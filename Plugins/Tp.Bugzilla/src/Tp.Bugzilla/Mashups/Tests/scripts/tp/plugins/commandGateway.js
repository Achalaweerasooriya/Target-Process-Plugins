define(["libs/jquery/jquery","tp/plugins/profileNameSource","tp/gateway"],function(a,b,c){function d(a){this._create(a)}return d.prototype={_requestUrlBase:"/api/v1/Plugins.asmx/{PluginName}/Commands/{CommandName}",_requestForProfileUrlBase:"/api/v1/Plugins.asmx/{PluginName}/Profiles/{ProfileName}/Commands/{CommandName}",_pluginName:null,_create:function(a){this.profileNameSource=b,this.gateway=c,a&&a.pluginName?this._pluginName=a.pluginName:this._pluginName=this.profileNameSource.getPluginName()},_getUrl:function(a){var b=this._requestUrlBase.replace(/{PluginName}/g,this._pluginName).replace(/{CommandName}/g,a);return(new Tp.WebServiceURL(b)).url},_getUrlForProfile:function(a){var b=this._requestForProfileUrlBase.replace(/{PluginName}/g,this._pluginName).replace(/{ProfileName}/g,this.profileNameSource.getProfileName()).replace(/{CommandName}/g,a);return(new Tp.WebServiceURL(b)).url},_post:function(a,b,c,d,e){this.gateway.postJSON(a,b,function(a){c&&c(a)},function(a){d&&d(a.responseText)},function(a){e&&e(a.responseText)})},execute:function(a,b,c,d,e){this._post(this._getUrl(a),b,c,d,e)},executeForProfile:function(a,b,c,d,e){this._post(this._getUrlForProfile(a),b,c,d,e)}},d})