define(["Underscore","tau/core/view-base","tau/core/event-dispatcher","tau/ui/templates/container/ui.template.container.list","tau/ui/templates/container/ui.template.container.table"],function(a,b,c){var d=b.extend({init:function(a){this._loaded=!1,this._super(a)},completeInitializationWithoutChildren:function(){var a=this;a.fire("afterInit"),a._fireChildrenRendered({children:[],childrenEvtArgs:[]})},setDefaultConfig:function(){var b=this;b._super(),a.defaults(b.config,{template:{name:"container."+(b.config.layout||"list")}})},"bus componentCreated":function(a){var b=a.data.component;this.fire("childComponentCreated",b),this.children.push(b)},_fireChildrenRendered:function(a){this.fire("internalChildrenRendered",a)},"bus afterInit+internalChildrenRendered":function(b){var c=this._getRenderConfig();this.fireBeforeRender({data:c}),this.doRender(c);var d=b.internalChildrenRendered.data;a.extend(d,{config:this.config}),this.fire("childrenRendered",d),this.fireAfterRender({data:c})},initializeComponents:function(b){var d=this;d.dispatcher=new c(d.children);var e=["afterInit"],f=function(a){d.fire(a.eventName)};a(e).each(function(a){d.dispatcher.listen(a,f)}),d.dispatcher.listen("afterRender",function(a){var b=a.argsArr,c={children:d.children,childrenEvtArgs:b};d._fireChildrenRendered(c)});var g=a(b.data).pluck("config");a(d.children).each(function(a,b){a.fire("initialize",g[b])})},"bus componentsCreated":function(a){this.fire("beforeComponentsInitialize",a.data),this.initializeComponents(a),this.fire("afterComponentsInitialize",a.data)},"bus initialize":function(b){var c=this;c.setDefaultConfig(),a.extend(c.config,b.data),c.fire("beforeInit",{config:c.config});var d=c.config.children;c.children=[];var e=a.size(d)>0&&c.config.visible;if(e){var f=c.config.children,g=c.config.context||{};this.fire("createComponents",{components:f,context:g})}else c.completeInitializationWithoutChildren()},"bus show":function(){this._super(),this._loaded||this.fire("initialize",{})},_getRenderConfig:function(){var a=this.config;a.visible&&(this._loaded=!0);return a},destroy:function(){this.dispatcher=null;var a=null;if(this.children&&this.children.length)while(a=this.children.pop())a.destroy();this.children=null,this._super()}});return d})