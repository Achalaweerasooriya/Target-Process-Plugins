define(["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/behaviour/customField/ui.behaviour.customField.url.editor"],function(a,b,c){return c.extend({category:"edit","bus permissionsReady+afterRender":function(a){var b=this,c=this.config.data||a.afterRender.data.data,d=a.permissionsReady.data;if(d.editable){var e=a.afterRender.data.element;this.$widget=e,e.find("[name=url]").val(c.value.url),e.find("[name=label]").val(c.value.label),e.behaviourUrlEditor({onSave:function(a){b.bus.fire("save",{customFields:[{name:c.name,value:a}]})}}),e.find(":button:eq(1)").click(function(){b.bus.fire("reset")})}},"bus validate":function(){this.$widget.behaviourUrlEditor("resetValidationErrors")},"bus afterValidate":function(a){this.$widget.behaviourUrlEditor("setValue",a.data.validation.instance.value)},"bus validationFailed":function(b){var c={};a.each(b.data.validation.errors,function(b){a.each(["url","label"],function(d){a.indexOf(b.path,d)!==-1&&(c[d]=b.description)})}),this.$widget.behaviourUrlEditor("setValidationErrors",c)}})})