define(["tau/configurator","tau/utils/utils.htmlConverter","tau/utils/utils.date"],function(a,b,c){function d(a){this.context=a}return d.prototype={destroy:function(){this.context=null},convertDTO:function(c){var d=this,e={id:c.id,parentId:c.parentId,avatar:[a.getApplicationPath(),"/Avatar.ashx?UserId=",c.owner.id,"&size=32"].join(""),name:d.getName(c.owner),description:b.fromSourceToHtml(c.description),age:this.getAge(c.createDate),comments:[],deleted:"DELETED"===c.description,isRequester:c.owner.kind&&c.owner.kind.toString().toLowerCase()==="requester"};return this.context.applicationContext.loggedUser.id==c.owner.id&&(e.isOwnerComment=!0),e},getName:function(a){var b=a.firstName||"",c=a.lastName||"",d="";if(b.length>0||c.length>0)d=[b," ",c.trim().substring(0,1),"."].join("");return d},getAge:function(a){if(!a)return"Draft";var b=c.getAge(c.parse(a));return b.isZero?"Just added":b.toString()}},d})