define(["Underscore","jQuery","tau/configurator","tau/components/extensions/component.extension.base"],function(a,b,c,d,e){return d.extend({"bus afterRender":function(a){var c=a.data.element,d=this,e=b(".filter-field",c),f=function(){e.is(":visible")&&e.focus()};b(".tau-bubble").bind("show",f),d.fire("showHandlerSigned",{handler:f});var g=function(a){var e=b(this),f=e.val();if(a.keyCode==jQuery.ui.keyCode.ENTER){d.fire("completeInput",{element:c,value:f});return}if(a.keyCode==jQuery.ui.keyCode.DOWN||a.keyCode==jQuery.ui.keyCode.UP)return;d.fire("inputChange",{element:c,value:f})};e.keyup(g),this.disableChange=!1},"bus inputChange":function(a){var b=this;b.lastChangeDate||(b.lastChangeDate=new Date),b.lastArgs||(b.lastArgs={value:""});if(b.lastArgs.value==a.data.value)return;b.lastArgs=a.data,setTimeout(function(){if(!b.lastChangeDate)return;var a=new Date-b.lastChangeDate;a>500&&b.lastArgs&&b.fire("completeInput",b.lastArgs)},501)},"bus partialDataRequest":function(){this.disableChange=!0},"bus dataRequestCompleted":function(){this.disableChange=!1},"bus completeInput":function(a){var b=this;b.lastRequestArgs||(b.lastRequestArgs={value:""});if(b.lastRequestArgs.value==a.data.value)return;var c=a.data.value!==""&&a.data.value!==null?[{property:"name",value:a.data.value}]:[];b.fire("search",{element:a.data.element,collection:c}),b.lastChangeDate=null,b.lastRequestArgs=a.data},"bus destroy+showHandlerSigned":function(a){b(".tau-bubble").unbind("show",a.showHandlerSigned.data.handler)}})})