define(["Underscore","tau/core/model-base","tau/models/model.extensions","tau/configurator"],function(a,b,c,d){return b.extend({onInit:function(){var b=["task"],c=this;a.forEach(b,function(a){c.store.on({eventName:"beforeSave",type:a,listener:c},{fn:c.beforeEntitySave,scope:c}),c.store.on({eventName:"afterSave",type:a,listener:c},{fn:c.afterEntitySave,scope:c})})},"bus contextRetrieved":function(a){this.project=a.data.context.applicationContext.selectedProjects[0]},beforeEntitySave:function(a){(a.data.changes.userStory||a.data.changes.project)&&a.data.cmd.config.fields.push({project:["id"]})},afterEntitySave:function(a){a.data.changes.project&&(this.fire("evictData"),this.fire("refresh"))}})})