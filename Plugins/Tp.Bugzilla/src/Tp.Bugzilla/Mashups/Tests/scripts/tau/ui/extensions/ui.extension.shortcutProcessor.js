define(["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(a,b,c){return c.extend({"bus afterRender":function(c){var d=c.data,e=this.$element=d.element,f=this.config.shortcutProcessorTarget,g=[],h=e.find(f);h.each(function(c,d){var e=b(d),f=e.html(),h=/\b(id):(\d*)\b/gi,i=f.match(h);if(i){var j=a(i).map(function(a){return a.split(":")[1]});g=g.concat(j);var k="<span class='tau-shortcut-loading' entity_ref='$2'>$1:$2</span>";f=f.replace(h,k),e.html(f)}}),g=a(g).uniq();var i=g.length;if(i){var j=this,k=this.config.store;for(var l=0;l<i;l++){var m=g[l],n={id:m,fields:["id","name",{entityType:["id","name"]}]};k=k.get("general",n,{success:j.replaceShortcut,scope:j})}k.done()}},replaceShortcut:function(a){var c=a.data,d=b('<a href="#'+c.entityType.name+"/"+c.id+'">#'+c.id+"&nbsp;"+c.name+"</a>");this.$element.find("[entity_ref='"+c.id+"']").each(function(a,c){var e=b(c);e.replaceWith(d.clone())})}})})