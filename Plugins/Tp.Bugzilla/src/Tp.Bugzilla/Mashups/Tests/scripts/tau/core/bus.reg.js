define(["Underscore","tau/core/event"],function(a,b){var c={buses:{},onCreate:function(a){var b=this;b.buses[a.id]=a,b.fire("create",{bus:a})},onDestroy:function(a){if(a.id==="global")return;delete this.buses[a.id],this.fire("destroy",{bus:a})},logCount:function(){console.log("#count: "+this.count())},count:function(b){var c=a(this.buses).keys();return b&&(c=a(c).without("global")),c.length},stats:function(){var b={},c=this;a.each(a(c.buses).keys(),function(a){var d=c.buses[a];b.hasOwnProperty(d.name)||(b[d.name]=0),b[d.name]++}),a.each(a(b).keys(),function(a){console.log(a+" : "+b[a])})}};return b.implementOn(c),window.tau=window.tau||{},a.extend(window.tau,{buses:c}),c})