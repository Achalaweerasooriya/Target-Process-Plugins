define(["tau/components/extensions/component.extension.base","tau/ui/behaviour/common/ui.behaviour.tauBubble","libs/underscore"],function(a,b){return a.extend({category:"edit","bus prepareChanges":function(a){this.bus.fire("markElementToBeUpdated",{element:this.element})},"bus applyChanges":function(a){var b=this;this.bus.on("afterRender",function(a){a.removeListener(),b.bus.fire("updateElement",{element:b.element})}),this.bus.fire("refresh")},"bus ownerChanged":function(){this.fire("refresh")},"bus beforeChangeOwner":function(){this.fire("markElementToBeUpdated",{element:this.element})},"bus permissionsReady+afterRender+dataBind":function(a){var b=this,c=this.element=a.afterRender.data.element,d=a.permissionsReady.data,e=a.dataBind.data;if(d.editable){var f={components:[{type:"userList",data:e,v2:!0}],context:b.config.context},g={target:c,componentsConfig:f,alignTo:c.find(".user-name")};this.fire("initBubble",g)}this.bus.on("edit",function(){this.fire("toggleBubble")},this)}})})