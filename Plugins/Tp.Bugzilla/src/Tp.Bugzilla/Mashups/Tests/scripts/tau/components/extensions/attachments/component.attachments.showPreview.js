define(["Underscore","tau/components/extensions/component.creator.extension"],function(a,b){var c=b.extend({"bus initialize":function(b){var c=b.data.context,d=c.assignable;this.contextForPreview={applicationContext:c.applicationContext};var e={entityType:d.entityType,id:d.id};a(this.contextForPreview).extend({assignable:e,general:e,entity:e})},"bus attachmentSelected":function(a){var b=a.data.attachment;b.mimeType=b.mimeType||"";if(b.mimeType.indexOf("image/")==0){var c={components:[{type:"attachmentsPreview",selected:{id:b.id}}],context:this.contextForPreview};this.createComponents(c,function(a){var b=a[0],c=b.component;c.on("afterRender",function(a){a.removeListener(),a.data.element.appendTo($("body"))}),c.fire("initialize")})}else window.location.assign(b.uri)}});return c})