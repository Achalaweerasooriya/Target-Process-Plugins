define(["tau/core/model.editable.base"],function(a){return a.extend({name:"Entity state editable",onInit:function(){var a=this,b=function(){a.onEntityAfterSave.apply(a,arguments)},c=function(){a.onEntityBeforeSave.apply(a,arguments)},d=this.config.context.entity.entityType.name;a.store.unbind(a),a.store.on({type:d,eventName:"afterSave",listener:a},b),a.store.on({type:d,eventName:"beforeSave",listener:a},c)},"bus dataBind":function(){this.fire("permissionsReady",{editable:!0})},entityBelongCurrentContext:function(a){return a.changes.entityState&&a.cmd.config.id==this.config.context.entity.id},onEntityAfterSave:function(a){var b=a.data;this.entityBelongCurrentContext(b)&&this.fire("entityStateChanged")},onEntityBeforeSave:function(a){var b=a.data;this.entityBelongCurrentContext(b)&&this.fire("beforeChangeEntityState")}})})