define(["Underscore","tau/models/dataProviders/strategies/model.provider.groups.strategy.base"],function(a,b){return b.extend({fetch:function(a,b,c){},moveToGroup:function(b,c,d,e,f){var g=a.find(e.realGroups,function(a){return a.id==c.entityState.id}),h=a.find(d.realGroups,function(a){return a.entityType.name.toLowerCase()==c.__type.toLowerCase()&&a.process.id==g.process.id});if(!h||h.id==g.id){f.call(null);return}var i=[];i.push(function(a){b.save(c.__type,{id:c.id,$set:{entityState:{id:h.id}},fields:["id",{entityState:["id","name","isFinal"]}]}).done({success:function(){a(null,arguments)}})}),i.push(function(a){b.get(c.__type,{id:c.id,fields:["id",{entityState:["id","name","isFinal"]}]}).done({success:function(b){a(null,b[0].data)}})}),a.series(i,function(b,c){a.isFunction(f)&&f.call(null,{changed:c[1]})})},isAvailableForItem:function(b,c,d){var e=a.find(d.realGroups,function(a){return a.id==b.entityState.id}),f=a.find(c.realGroups,function(a){return a.entityType.name.toLowerCase()==b.__type.toLowerCase()&&a.process.id==e.process.id}),g=a.pluck(e.nextStates,"id");return g.push(e.id),f&&a.include(g,f.id)},getCommentRequirements:function(b,c,d){var e=a.find(d.realGroups,function(a){return a.id==b.entityState.id}),f=[];return a.forEach(c,function(c){var d=a.find(c.realGroups,function(a){return a.entityType.name.toLowerCase()==b.__type.toLowerCase()&&a.process.id==e.process.id});f.push({isCommentRequired:d?d.isCommentRequired:!1})}),f}})})