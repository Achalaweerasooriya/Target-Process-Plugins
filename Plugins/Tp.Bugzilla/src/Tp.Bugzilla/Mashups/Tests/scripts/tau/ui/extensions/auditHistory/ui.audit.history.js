define(["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/configurator"],function(a,b,c,d){return c.extend({getColumns:function(){return[{Id:"RowID",Title:null,Type:"string",IsSynthetic:!0,IsUpdateable:!1,IsRequired:!1,Width:null,Facet:{}},{Id:"Entity",Title:null,Type:"string",IsSynthetic:!0,IsUpdateable:!1,IsRequired:!1,Width:null,Facet:{}},{Id:"ID",Title:null,Type:"string",IsSynthetic:!0,IsUpdateable:!1,IsRequired:!1,Width:null,Facet:{}},{Id:"Modification",Title:null,Type:"int",IsSynthetic:!0,IsUpdateable:!1,IsRequired:!1,Width:null,Facet:{}},{Id:"ProjectID",Title:null,Type:"int",IsSynthetic:!0,IsUpdateable:!1,IsRequired:!1,Width:null,Facet:{}},{Id:"InnerEntity",Title:null,Type:"string",IsSynthetic:!0,IsUpdateable:!1,IsRequired:!1,Width:null,Facet:{}},{Id:"Date",Title:"Date Time",Type:"date",IsSynthetic:!1,IsUpdateable:!1,IsRequired:!1,Width:null,Facet:{}},{Id:"Description",Title:"Action",Type:"HTMLText",IsSynthetic:!1,IsUpdateable:!1,IsRequired:!1,Width:300,Facet:{}},{Id:"Modifier",Title:"Modified By",Type:"HTMLText",IsSynthetic:!1,IsUpdateable:!1,IsRequired:!1,Width:null,Facet:{}}]},getDataRequest:function(){var a=this.config.context.entity;return{GridID:null,GroupBy:null,OrderBy:"Date",OrderDir:!1,Start:0,Limit:10,Cnt:{ID:a.id,Type:a.entityType.name}}},"bus extJsHistoryPanel":function(a){var b=a.data.panel;this.config.store.on({type:"general",eventName:"afterSave",listener:this},function(a){b.getStore().reload()})},"bus extJsHistoryPanel+destroy":function(a){var b=a.extJsHistoryPanel.data.panel;b.destroy()},"bus initialize":function(){var a=this,b=d.getApplicationPath()+"/PageServices/AuditHistoryListService.asmx/js?d=1";require([b],function(){a.fire("serviceLoaded")})},"bus afterRender+serviceLoaded":function(a){var c=a.afterRender.data.element,d=c[0],e=this;e.config.store.unbind(this),gridPanelType="Ext.grid.GridPanel",configurationFactory="Tp.controls.grid.AuditHistoryConfigurationFactory",editorFieldFactory="Tp.controls.grid.AuditHistoryFieldFactory",gridProxy="Ext.Tp.GridServiceProxy({ webServiceProxy: Tp.Web.Extensions.ExtJs.AuditHistoryListService, webServiceProxyMethod: Tp.Web.Extensions.ExtJs.AuditHistoryListService.GetData })";var f={id:"super_grid",canEdit:!1,canDelete:!1,isOwner:!1,gridHeader:{Title:"History",Columns:e.getColumns()},gridDataRequest:e.getDataRequest(),pluginTypes:"Tp.controls.grid.plugins.HidePagingConstraint",innerGridConfig:[]};Ext.onReady(function(){var a=b('<div class="ext-holder"/>').hide().appendTo("body"),d=Tp.controls.grid.Factory.getInstance();f=d.getConfigurationFactory(f).createConfig(),f.applyTo=a[0];var g=new Ext.grid.GridPanel(f);a.appendTo(c).show(),e.fire("extJsHistoryPanel",{panel:g}),b(".ui-empty-data-msg",c).hide()})}})})