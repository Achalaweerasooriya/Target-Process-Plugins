define(["Underscore","tau/models/propertyLists/model.propertyList.base"],function(a,b){return b.extend({name:"release-list",propertyType:"feature",onInit:function(){var a=this;a.store.get("project",{fields:["id","name",{process:["id"]},{features:["id","name"]}]},{success:a.onProjectRetrieved.tauCreateDelegate(a)}).get("feature",{fields:["id","name",{project:["id"]}]},{success:a.onFeatureRetrieved.tauCreateDelegate(a)}).get("process",{fields:["id",{practices:["name"]}]},{success:a.onProcessesRetrieved.tauCreateDelegate(a)}).done({success:a.onDataRetrieved.tauCreateDelegate(a)})},onFeatureRetrieved:function(a){this.featureList=a.data},onProjectRetrieved:function(a){this.projectList=a.data},onProcessesRetrieved:function(a){this.processList=a.data},getFeaturesForProject:function(b){var c=this.getCurrentEntityId(),d=function(a){a.id!==c&&this.push(a)},e=[];return this.projectHasRequirementsPractice(b)&&a.each(b.features,d,e),e},onDataRetrieved:function(){this.processData(this.projectList,this.processList)},projectHasRequirementsPractice:function(b){var c=b.process.id,d=a.detect(this.processList,function(a){return a.id==c}),e=a.detect(d.practices,function(a){return a.name=="Requirements"});return!a.isEmpty(e)},processData:function(b,c){var d=[];this.processList=c,a.each(this.sortProjects(b),function(b){var c=this.getFeaturesForProject(b);a.isEmpty(c)||d.push({id:b.id,name:b.name,items:c})},this);var e={states:d,completed:!0,nullableValue:this.getCurrentEntityId()!==null&&this.propertyIsNotEmpty()};this.fire("dataBind",e)}})})