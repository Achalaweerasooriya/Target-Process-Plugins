define(["Underscore","tau/models/dataProviders/model.provider.items.user_stories_bugs","tau/models/dataProviders/model.provider.items.user_stories","tau/models/dataProviders/model.provider.items.bugs"],function(a,b,c,d){return b.extend({init:function(b){this.config=b,b.additionalFields=["iteration"],this.providers=[new c(b)];var e=a.pluck(this.config.context.applicationContext.processes[0].practices,"name");a.indexOf(e,"Bug Tracking")!==-1&&this.providers.push(new d(b))},_convertData:function(c){c=b.prototype._convertData.call(this,c),a.forEach(c,function(a){a.visibleEntityState=a.entityState.name});return this._sortByState(c)},_sortByState:function(b){a.forEach(b,function(a){var b=a.entityState;a.stateWeight=b.isInitial?0:b.isfinal?99:b.id}),b=a.sortBy(b,function(a){return a.stateWeight});return b}})})