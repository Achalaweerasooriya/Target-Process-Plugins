define(["tau/models/model.customField.editable","tau/utils/utils.jsonSchema","libs/date.js/build/date"],function(a,b,c){var d=a.extend({category:"edit",name:"Editable custom field",schema:b.Schema.create({type:"object",properties:{value:{type:"string",optional:!1,post:function(a){if(this.wasError()==!1){var b=Date.parse(a);b==null?new this.Error("Date","Incorrect date format"):b<new Date("01/01/1900")?new this.Error("Date","Date must be greater then 01-01-1900"):a=b.format(this.schema.additionalProperties.dateFormat)}return a},additionalProperties:{dateFormat:"dd/MM/yyyy"}}}}),"bus validate":function(a){var b=a.data,c=b.cmd.$set.customFields[0];this.schema.properties.value.optional=!this.config.customField.required,this.schema.properties.value.empty=!this.config.customField.required,this.config.context&&(this.schema.properties.value.additionalProperties.dateFormat=this.config.context.applicationContext.culture.shortDateFormat),b.validation=this.schema.validate(c)}});return d})