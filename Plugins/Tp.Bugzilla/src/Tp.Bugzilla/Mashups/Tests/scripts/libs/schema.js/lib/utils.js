define(function(require,exports,module){var a=Array.prototype.slice,b=Object.hasOwnProperty;Object.keys||(Object.keys=function(a){if(a!==Object(a))throw new Error("Invalid object");var c=[];for(var d in a)b.call(a,d)&&(c[c.length]=d);return c}),exports.extend=function(b){var c=a.call(arguments,1),d;for(var e=0,f=c.length;e<f;e++){d=c[e];for(var g in d)b[g]=d[g]}return b},exports.locale=function(a,b){if(a instanceof Object){b=""+b||"en";if(a[b]!==undefined)return a[b];parts=b.split("_");while(parts.pop()){b=parts.join("_");if(a[b]!==undefined)return a[b]}return a.en}return a}})