define(["jQuery","tau/configurator","tests/common/testCase","tests/common/componentConfigCreator","tau/components/component.property.completeDate","tests/common/testData.Generator"],function(a,b,c,d,e,f){var g=function(){var a=new f;a.initDefaultData();var g=a.getData(),h=a.getProjects(),i=a.getBugs()[0],j=new d;j.setEntityIDAndType(i.id,i.__type),j.setSelectedProjects([g.selectByType("project")[0]]),j.setProcesses(g.selectByType("process"));var k=j.getConfig(),l=new c("[component.completeDate]");l.initModule({componentConfig:k,data:g},e),l.test("should render valid markup",function(){var a=this.element;equal(a.find(".property-text").text(),"10/13/2011","Complete Date name"),equal(a.find(".external-view").size(),0,"Url is not added")}),l.test("should refresh when completeDate is changed",function(){var a=this.element,c=new Date;this.serviceMock.registerSaveCommand({config:{id:i.id,$set:{endDate:c.toString()},fields:["id"]},returnedData:{id:i.id,endDate:"/Date(1319124023000+0300)/"}}),b.getStore().save(i.__type,{id:i.id,$set:{endDate:c.toString()}}).done();var a=this.element;equal(a.find(".property-text").text(),"10/20/2011","Complete Date name"),equal(a.find(".external-view").size(),0,"Url is not added")})};return{run:g}})