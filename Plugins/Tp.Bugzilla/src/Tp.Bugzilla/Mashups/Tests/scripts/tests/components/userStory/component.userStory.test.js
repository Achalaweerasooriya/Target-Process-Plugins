define(["jQuery","Underscore","tau/components/component.property.userStory","tests/components/component.specs","tests/common/testData.Generator","tests/common/service.mock","tau/configurator","tests/components/common/common.setup"],function(a,b,c,d,e,f,g,h){var i=function(){var a=new e;a.initDefaultData();var f=a.getData(),i=a.getProjects(),j=a.getBugs()[0],k=a.getUserStories(),l=i[1],m={manualContext:!0,context:{entity:{entityType:{name:j.__type},id:j.id},applicationContext:{selectedProjects:[l],culture:{name:"en-US",timePattern:"g:i A",shortDateFormat:"M/d/yyyy",longDateFormat:"dddd, MMMM dd, yyyy",decimalSeparator:".",__type:"culture"},processes:a.getProcesses()}}},n=j.userStory,o=k[2],p=h.create("[component.userStory]",f,c,m),q=[{name:"should render valid markup",test:function(){var a=this.$el;equal(a.find(".property-text").text(),n.name,"story name"),equal(a.find("a").attr("href"),["#userstory",n.id].join("/"),"story name")}}];d.create(p,m).viewShouldFollowBasicComponentLifeCycle().viewShouldPassTests(q).done();var r=a.getBugs()[1],s={manualContext:!0,context:{entity:{entityType:{name:r.__type},id:r.id},applicationContext:{selectedProjects:[l],culture:{name:"en-US",timePattern:"g:i A",shortDateFormat:"M/d/yyyy",longDateFormat:"dddd, MMMM dd, yyyy",decimalSeparator:".",__type:"culture"},processes:a.getProcesses()}}},t=h.create("[component.userStory] empty",f,c,s);d.create(t,s).viewShouldFollowBasicComponentLifeCycle().viewShouldPassTests([{name:"should render valid markup for empty UserStory",preSetup:function(){g.getProxy().markRecordSetAsCompleteLoaded("userStory")},test:function(){var a=this.$el;equal(a.find(".property-text").text(),"","UserStory name")}}]).done(),a.clear(),a.initDefaultData(),a.removeUserStoriesFromProject();var f=b.select(a.getData(),function(a){return a.__type!=="userStory"}),u=h.create("[component.userStory] not user stories ",f,c,s)};return{run:i}})