define(["Underscore","tau/core/comparer"],function(a,b){var c=function(){module("[comparer] tests"),test("plain new property",function(){var a={f:1},c={d:1},d=b.compare(a,c),e={value:1};same(e,d.changes.d,"new properties is registered in results")}),test("plain property value changed",function(){var a={d:1},c={d:2},d=b.compare(a,c),e={value:2};same(e,d.changes.d,"properties is registered in results")}),test("object property not changed",function(){var a={c:{d:2,v:8}},c={c:{d:2}},d=b.compare(a,c);same({},d.changes,"no changed properties")}),test("object property changed",function(){var a={c:{d:1,v:8}},c={c:{d:2}},d=b.compare(a,c),e={value:c.c};same(e,d.changes.c,"no changed properties registered in results")}),test("array equal",function(){var a={c:{d:[1],b:44}},c={c:{d:[1]}},d=b.compare(a,c);same({},d.changes,"no changed properties")}),test("array equal very complex",function(){var a={c:{d:[{r:1}],b:44}},c={c:{d:[{r:1}]}},d=b.compare(a,c);same({},d.changes,"no changed properties")}),test("array not equal very complex",function(){var c={c:{d:[{r:2}],b:44}},d={c:{d:[{r:1}]}},e=b.compare(c,d);same(1,a(e.changes).keys().length,"has changed properties")})};return{run:c}})