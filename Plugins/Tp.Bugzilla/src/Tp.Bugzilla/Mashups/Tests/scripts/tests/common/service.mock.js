define(["tau/core/class"],function(a){return a.extend({saveCommandList:null,removeCommandList:null,init:function(){this.saveCommandList=[],this.removeCommandList=[]},registerSaveCommand:function(a){this.saveCommandList.push(a)},registerRemoveCommand:function(a){this.removeCommandList.push(a)},executeCommand:function(a,b,c){if(b.length==0)throw"Unexpected call "+a+" function of service with command"+c;var d=b[0];b.splice(0,1),same(c.config,d.config),c.callbacks.success(d.returnedData)},remove:function(a){this.executeCommand("remove",this.removeCommandList,a)},save:function(a){this.executeCommand("save",this.saveCommandList,a)},get:function(a){same(a,{},"Unexpected service GET call. Looks like you forget to register the following fields in repository: ["+a.config.fields+"]. See also raw command")},verify:function(){this.saveCommandList.length>0&&same([],this.saveCommandList,"Not all save command was executed")}})})