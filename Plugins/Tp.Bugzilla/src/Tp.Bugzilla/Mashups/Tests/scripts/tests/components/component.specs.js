define(["Underscore","tests/components/common/common.tests","tests/components/utils/dispatcher"],function(a,b,c){return{create:function(d,e){var f=[];return{modelShouldReturnData:function(a,c,d){return f=b.addModelTestsToArray(f,a,c,d),this},shouldHandlePermissions:function(a){return f=b.addPermissionTestToArray(f,a),this},viewShouldFollowBasicComponentLifeCycle:function(){var a={name:"view should follow basic component life cycle",setup:function(){this.basicEvents=["beforeInit","afterInit","beforeRender","afterRender"],this.containerDispatcher=c.createDispatcher(this.component,this.basicEvents)},test:function(){c.verifyLifeCycle(this.basicEvents,this.containerDispatcher,"component"),same(this.containerDispatcher.order,this.basicEvents)}};return arguments.length===1&&(a.preSetup=arguments[0]),f.push(a),this},viewShouldFollowDataComponentLifeCycle:function(){var a={name:"view should follow data component life cycle",setup:function(){this.basicEvents=["beforeInit","dataBind","afterInit","beforeRender","afterRender"],this.containerDispatcher=c.createDispatcher(this.component,this.basicEvents)},test:function(){c.verifyLifeCycle(this.basicEvents,this.containerDispatcher,"component"),same(this.containerDispatcher.order,this.basicEvents)}};return arguments.length===1&&(a.preSetup=arguments[0]),f.push(a),this},on:function(b,c){var d={setup:function(){var c=this;c.EventsDictonary=c.EventsDictonary||{},c.EventsDictonary[b]=[],c.component.on(b,function(d){a(c.EventsDictonary[b]).contains(d)||c.EventsDictonary[b].push(d)})}};return a.extend(d,c),f.push(d),this},viewShouldFollowContainerComponentLifeCycle:function(){var a={name:"view should follow container component life cycle",setup:function(){var a=this;a.basicEvents=["beforeInit","afterInit","beforeRender","afterRender"],a.basicChildEvents=["beforeInit","afterInit","dataBind","beforeRender","afterRender"],a.childDispatchers=[],a.containerDispatcher=c.createDispatcher(this.component,a.basicEvents),this.component.on("childComponentCreated",function(b){var d=b.data;c.dispatchChild(d,a.config.children[a.childDispatchers.length],a.config.context,a.containerDispatcher),a.childDispatchers.push(c.createDispatcher(d,a.basicChildEvents))})},test:function(){var a=this;c.verifyLifeCycle(a.basicEvents,a.containerDispatcher,"main container");for(var b=0,d=a.childDispatchers.length;b<d;b++)c.verifyLifeCycle(a.basicEvents,a.childDispatchers[b],"child component #"+(b+1));same(a.containerDispatcher.order,a.basicEvents)}};return f.push(a),this},viewShouldPassTests:function(a,c){return b.addUITestToArray(f,a,c),this},viewShouldContainEmptyMessage:function(a,b){var c=function(){this.component.on("dataBind",function(){arguments[0].data.items=[]},this,null,1),this.component.on("afterRender",function(a){this.$el=a.data.element},this)},d=[{name:"should have valid empty message",setup:c,test:b||function(){equal(this.$el.children().length,2,"Count of children is valid"),equal(this.$el.children().eq(0).css("display"),"none","Style is valid"),ok(this.$el.children().eq(1).is("span"),"Count of children is valid"),equal(this.$el.children().eq(1).text(),a,"Count of children is valid")}}];return this.viewShouldPassTests(d,c)},done:function(){for(var a=0,b=f.length;a<b;a++){var c=f[a];c.context&&(e.context=c.context);var g=d.setup({setup:c.setup,preSetup:c.preSetup}).initialize(e,c.init).test(c.name,c.test)}return this}}}}})