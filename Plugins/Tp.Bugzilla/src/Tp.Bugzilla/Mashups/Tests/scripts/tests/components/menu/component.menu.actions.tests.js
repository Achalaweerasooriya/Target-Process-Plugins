define(["tau/core/tau","tau/components/component.menu.actions","tests/components/component.specs","tests/common/testData","tests/components/common/common.setup","tests/common/applicationContext"],function(a,b,c,d,e,f){var g=function(){var a,g,h={context:{type:"bug",id:15}},i=d.getTestDataForTitle(),j=[{label:"Add Task",command:function(){a="Alarm"}},{label:"Add Bug",command:function(){a="Upyachka"}},"-",{label:"Add Time",confirmation:"Are you sure?",command:function(){a="My vse umrem"}}],k=e.create("[component.menu.actions]",i,b,{items:j}),l=new f(h),m=l.processes[0],n=l.selectedProjects[0],o={entity:{__type:"bug",id:15,name:"BugName"},process:m,project:n,subPath:"Project/QA/Bug",appPath:"/TP"},p={editable:!0,deletable:!0},q=[{name:"should render valid markup",test:function(){var a=this.$el,b=a.find(".ui-menu__trigger"),c=a.find(".ui-menu__popup");b.click(),ok(c.css("display")!=="none","Menu is visible after click")}},{name:"should render valid markup from config",test:function(){var a=this.$el,b=a.find(".ui-menu__trigger"),c=a.find(".ui-menu__popup"),d=c.find(".ui-menu__item-action");equals(d.length,3,"Render valid actions from config"),equals(d.eq(0).text().trim(),j[0].label,"Render valid actions from config"),equals(d.eq(1).text().trim(),j[1].label,"Render valid actions from config"),equals(d.eq(2).text().trim(),j[3].label,"Render valid actions from config")}},{name:"should process clicks",test:function(){var b=window.confirm;window.confirm=function(){g=!0};var c=this.$el,d=c.find(".ui-menu__trigger"),e=c.find(".ui-menu__popup"),f=e.find(".ui-menu__item-action"),h=window;equals(a,undefined,"No actions"),f.eq(0).click(),equals(a,"Alarm","Execute first action"),f.eq(1).click(),equals(a,"Upyachka","Execute second action"),f.eq(2).click(),equals(g,!0,"Execute third action"),window.confirm=b}}];c.create(k,h).viewShouldFollowDataComponentLifeCycle().viewShouldPassTests(q).done()};return{run:g}})