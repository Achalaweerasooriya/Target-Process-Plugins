(function(){module("changeLogIterator",{setup:function(){this.source=[{name:"first",value:1},{name:"second",value:2},{name:"third",value:"3"},{name:"fourth",value:4},{name:"fifth",value:5}],this.iterator=new changeLogIterator(this.source)},teardown:function(){delete this.source,delete this.iterator}}),test("current",function(){this.iterator.current({value:2}),equals(this.iterator.current().value,2)}),test("previous",function(){this.iterator.current({value:2}),this.iterator.previous(),equals(this.iterator.current().value,1),this.iterator.previous(),equals(this.iterator.current().value,1,"previous should stay at first element")}),test("next",function(){this.iterator.current({value:4}),this.iterator.next(),equals(this.iterator.current().value,5),this.iterator.next(),equals(this.iterator.current().value,5,"next should stay at last element")}),test("canMoveBackward",function(){this.iterator.current({value:2}),equals(this.iterator.canMoveBackward(),!0),this.iterator.previous(),equals(this.iterator.canMoveBackward(),!1)}),test("canMoveForward",function(){this.iterator.current({value:4}),equals(this.iterator.canMoveForward(),!0),this.iterator.next(),equals(this.iterator.canMoveForward(),!1)})})()