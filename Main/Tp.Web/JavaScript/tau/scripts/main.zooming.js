require(["jQuery","tau/configurator","tau/components/component.container","tau/ui/extensions/ui.extension.templateBinder","tau/ui/extensions/board.plus/ui.extension.board.plus.cardsUpdater","tau/models/board.plus/model.dataUpdater","tau/ui/templates/board.plus/ui.template.boardplus.card.skeleton","tau/ui/templates/board.plus/ui.template.boardplus.card.content"],function($,configurator,ComponentContainer,TemplateBinder,CardsUpdater,ModelDataUpdater){var component={create:function(config){return config=config||{},config=_.extend(config,{extensions:[TemplateBinder,CardsUpdater,ModelDataUpdater]}),ComponentContainer.create(config)}},bus=component.create(),MAX_COUNT=300,columnCount=3;configurator.storeFactory.getStore().get("userstory",{fields:["id","name",{entityType:["id","name"]}]}).done({success:function(data){var userStoryData=_.map(data[0].data,function(story){return{id:story.id,type:story.entityType.name,name:story.name}});userStoryData=_.filter(userStoryData,function(a,i){return i<MAX_COUNT});var table=['<div class="tau-board"><table><tr>'];for(var i=0;i<columnCount;i++)table.push('<td><div class="cell"></div></td>');table.push("</tr></table>");var container=this.container||$(table.join("")),zoomLevel=$(["<select>",'<option value="1">1</option>','<option value="2">2</option>','<option value="3">3</option>','<option value="4">4</option>','<option value="5">5</option>','<option value="6">6</option>','<option value="7">7</option>','<option value="8">8</option>','<option value="9">9</option>',"</select> "].join(""));$("body").append(zoomLevel),zoomLevel.on("change",function(evt){bus.fire("model.zoomLevelChanged",{zoomLevel:this.value})}),bus.on("template.boardplus.card.skeleton.bound",function(evt){for(var i=0;i<columnCount;i++)container.find(".cell").eq(i).append(evt.data.element.clone())}),bus.fire("model.zoomLevelChanged",{zoomLevel:1}),_.each(userStoryData,function(userStory,i){bus.fire("template.bind",{name:"boardplus.card.skeleton",data:userStory})}),bus.fire("model.zoomLevelChanged",{zoomLevel:1}),bus.fire("view.skeleton.built",{element:container}),bus.fire("initialize",{store:configurator.storeFactory.getStore()}),bus.fire("model.data.loader.registerItems",{items:userStoryData}),$("body").append(container)}})})