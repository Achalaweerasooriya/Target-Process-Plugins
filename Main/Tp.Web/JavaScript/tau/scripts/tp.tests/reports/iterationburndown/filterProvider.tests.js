require(["tp/reports/filterProvider","tp/reports/burndown/filter","tp/reports/contextProvider.tp2"],function(filterProvider,filter,ContextProvider){(function(){module("filter provider tests",{setup:function(){this.filter=new filter,this.filterProvider=new filterProvider,this.filterProvider.storage={findPlannableFilter:function(success){success(null)}};var iterations=[{isBugsAvailable:!0,isPointsAvailable:!1,isTimeTrackingAvailable:!0,id:116,name:"Sprint #2.3",parentName:"Tau Product Web Site - Scrum #1",parentId:13,startDate:"/Date(1353963600000+0300)/",endDate:"/Date(1355086800000+0300)/",entityType:"Iteration"},{isBugsAvailable:!0,isPointsAvailable:!1,isTimeTrackingAvailable:!0,id:69,name:"Sprint #2.2",parentName:"Tau Product Web Site - Scrum #1",parentId:13,startDate:"/Date(1352754000000+0300)/",endDate:"/Date(1353877200000+0300)/",entityType:"Iteration"},{isBugsAvailable:!0,isPointsAvailable:!1,isTimeTrackingAvailable:!0,id:59,name:"Sprint #2.1",parentName:"Tau Product Web Site - Scrum #1",parentId:13,startDate:"/Date(1351544400000+0300)/",endDate:"/Date(1352667600000+0300)/",entityType:"Iteration"},{isBugsAvailable:!0,isPointsAvailable:!1,isTimeTrackingAvailable:!0,id:48,name:"Sprint #1.2",parentName:"Tau Product Web Site - Scrum #1",parentId:13,startDate:"/Date(1350334800000+0300)/",endDate:"/Date(1351458000000+0300)/",entityType:"Iteration"},{isBugsAvailable:!0,isPointsAvailable:!1,isTimeTrackingAvailable:!0,id:33,name:"Sprint #1.1",parentName:"Tau Product Web Site - Scrum #1",parentId:13,startDate:"/Date(1349125200000+0300)/",endDate:"/Date(1350248400000+0300)/",entityType:"Iteration"}];this.filterProvider.burnDownTypeProvider=new BurnDownTypeProviderMock(this.filterProvider,iterations[1]);var contextProvider=new ContextProviderMock,dataProvider={getPlannable:function(projects,success){return success(iterations)}};this.filterProvider.initialize({placeholder:$("<div></div>"),template:this.filter.template,contextProvider:contextProvider,dataProvider:dataProvider,update:$.noop})},teardown:function(){}}),test("check filter provider data",function(){var d=this.filterProvider._getFilterData();equals(this.filterProvider._isChecked("_include-bugs"),!0,"bugs option should be checked"),equals(d.burnDownType,"iteration","burn down type should be Iteration"),equals(d.plannableId,69,"iteration id should be valid"),equals(d.includeWeekends,!0,"weekends option should be checked"),equals(d.isInPoints,!1,"report should be in hours"),equals(d.units,"h","units should be hours")})})()})