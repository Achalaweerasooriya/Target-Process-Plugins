require(["tp/bus"],function(Bus){(function(){module("bus tests",{setup:function(){this._log="",Bus.subscribe("TestObject",{onInitialize:$.proxy(function(){this._log=this._log+"Initialize "},this),onInitializeWithArgs:$.proxy(function(args){this._log=this._log+"Initialize("+args+") "},this)})},teardown:function(){this._log="",Bus.unsubscribe("TestObject")}}),test("should broadcast event",function(){Bus.publish("Initialize"),equal(this._log,"Initialize ")}),test("should broadcast event with args",function(){Bus.publish("InitializeWithArgs",["my args"]),equal(this._log,"Initialize(my args) ")})})()})