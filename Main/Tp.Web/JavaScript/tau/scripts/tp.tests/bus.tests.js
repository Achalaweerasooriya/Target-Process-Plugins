require(["tp/bus"],function(a){(function(){module("bus tests",{setup:function(){this._log="",a.subscribe("TestObject",{onInitialize:$.proxy(function(){this._log=this._log+"Initialize "},this),onInitializeWithArgs:$.proxy(function(a){this._log=this._log+"Initialize("+a+") "},this)})},teardown:function(){this._log="",a.unsubscribe("TestObject")}}),test("should broadcast event",function(){a.publish("Initialize"),equal(this._log,"Initialize ")}),test("should broadcast event with args",function(){a.publish("InitializeWithArgs",["my args"]),equal(this._log,"Initialize(my args) ")})})()})