require(["tp/status"],function(a){(function(){module("status tests",{setup:function(){a.defaultTimeout=1e3},teardown:function(){}}),test("should show custom status and then hide",function(){var b="warn",c="test message";a.custom(b,c,2e3,100);var d=function(a,b,c,d){var e=function(a,b,c,d,f){return function(){a()||c*f>d?b():setTimeout(e(a,b,c,d,f+1),c)}};return e(a,b,c,d,0)()};stop(),d(function(){return $(".plugins.info-block").find("div").hasClass("_opened")},function(){var a=$(".plugins.info-block");ok(a.find("div").hasClass(b),"status is valid"),equals(a.text(),c,"status message is valid"),ok(a.is(":visible"),"status message is shown"),d(function(){return!$(".plugins.info-block").find("div").hasClass("_opened")},function(){var a=$(".plugins.info-block");ok(a.find("div").hasClass(b),"status is valid"),equals(a.text(),c,"status message is valid"),ok(!a.is(":visible"),"status message is hidden"),start()},50,4e3)},50,2100)})})()})