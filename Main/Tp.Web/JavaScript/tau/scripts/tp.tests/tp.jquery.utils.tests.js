(function($){module("tp.jquery.utils.outerclick",{setup:function(){this.isClicked=!1,this.element1=$("<div />").appendTo($("body")),this.element1child=$("<div />").appendTo(this.element1),this.element1childchild=$("<div />").appendTo(this.element1child),this.element2=$("<div />").appendTo($("body")),this.element1.outerclick($.proxy(function(){this.isClicked=!0},this))},teardown:function(){this.element1child.remove(),this.element1childchild.remove(),this.element1.remove(),this.element2.remove(),delete this.isClicked,delete this.element1,delete this.element2,delete this.element1child,delete this.element1childchild}}),test("click on element",function(){this.isClicked=!1,this.element1.click(),equals(this.isClicked,!1)}),test("click on body",function(){this.isClicked=!1,$("body").click(),equals(this.isClicked,!0)}),test("click on other element",function(){this.isClicked=!1,this.element2.click(),equals(this.isClicked,!0)}),test("click on first level child",function(){this.isClicked=!1,this.element1child.click(),equals(this.isClicked,!1)}),test("click on second level child",function(){this.isClicked=!1,this.element1childchild.click(),equals(this.isClicked,!1)}),module("tp.jquery.utils.minimizeTo",{setup:function(){this.tmp_hide=$.fn.hide,this.tmp_animate=$.fn.animate,this.element=$('<div style="width:25px;height:25px;">Element</div>'),this.element.appendTo("body"),this.target=$('<div style="position:absolute;left:10px;top:20px;">Target</div>'),this.target.appendTo("body")},teardown:function(){this.element.remove(),this.target.remove(),delete this.element,delete this.target,$.fn.hide=this.tmp_hide,$.fn.animate=this.tmp_animate,delete this.tmp_hide,delete this.tmp_animate}}),test("call minimizeTo",function(){var self=this,hideCallCount=0;$.fn.hide=function(){hideCallCount++};var actualAnimateArgs;$.fn.animate=function(properties,options){actualAnimateArgs=arguments,options.complete()};var config={target:self.target,callback:function(){equal(hideCallCount,1,"Hide is called when minimized")}},offset=self.element.offset(),expectedData={left:offset.left,top:offset.top,width:self.element.width(),height:self.element.height()};self.element.minimizeTo(config);var expectedAnimateArgs=[{left:10,top:20,width:0,height:0}];same(actualAnimateArgs[0],expectedAnimateArgs[0],"Animate parameters are valid"),same(self.element.data(),expectedData,"Original layout settings are saved on element correctly")}),module("tp.jquery.utils.maximizeFrom",{setup:function(){this.tmp_hide=$.fn.hide,this.tmp_show=$.fn.show,this.tmp_animate=$.fn.animate,this.element=$('<div style="position:absolute;width:25px;height:25px;left:1px;top:2px;">Element</div>'),this.element.appendTo("body"),this.target=$('<div style="position:absolute;left:10px;top:20px;">Target</div>'),this.target.appendTo("body")},teardown:function(){this.element.remove(),this.target.remove(),delete this.element,delete this.target,$.fn.hide=this.tmp_hide,$.fn.show=this.tmp_show,$.fn.animate=this.tmp_animate,delete this.tmp_hide,delete this.tmp_show,delete this.tmp_animate}}),test("call maximizeFrom",function(){var self=this,operations={hide:1,show:2},operationOrder=0,hideCallCount=0;$.fn.hide=function(){operationOrder++,ok(operationOrder===1,"Hide should be called before setup");var $element=this,actualOffset=$element.offset();equals(actualOffset.left,1,"Left position before setup is valid"),equals(actualOffset.top,2,"Top position before setup is valid"),equals($element.width(),25,"Width before setup is valid"),equals($element.height(),25,"Height before setup is valid")};var showCallCount=0;$.fn.show=function(){operationOrder++,ok(operationOrder===2,"Show should be called after setup complete");var $element=this,actualOffset=$element.offset();equals(actualOffset.left,10,"Left position before setup is valid"),equals(actualOffset.top,20,"Top position before setup is valid"),equals($element.width(),0,"Width after setup is valid"),equals($element.height(),0,"Height after setup is valid")};var actualAnimateArgs;$.fn.animate=function(properties,options){actualAnimateArgs=arguments,options.complete()};var config={target:self.target,callback:function(){ok(!0,"Callback is called")},settings:{left:11,top:22,width:120,height:100}};self.element.maximizeFrom(config);var expectedAnimateArgs=[{left:11,top:22,width:120,height:100}];same(actualAnimateArgs[0],expectedAnimateArgs[0],"Animate parameters are valid")})})(jQuery)