require(["tp/plugins/vcs/viewDiff/sourcePopup"],function(popup){(function(){module("source popup",{setup:function(){this.placeholder=$("<div />"),this.popup=popup},teardown:function(){this.popup.popup.popup("close"),this.popup.popup.popup("destroy"),delete this.popup}}),test("should open popup with provided content",function(){var content="Index: 1.txt\n===================================================================\n--- 1.txt	(revision 17)\n+++ 1.txt	(revision 16)\n@@ -9,4 +9,4 @@\n er\n f\n er\n-ffft54t\n\\ No newline at end of file\n+fff\n\\ No newline at end of file",path="/source.rb";this.popup.view("123",content,path),ok(this.popup.popup.popup("isOpen"),"popup is opened"),equal(this.popup.codeViewer.getValue(),content,"provided content is displayed"),equal(this.popup.popup.popup("option","title"),'File: /source.rb<br /><span class="subTitle">Revision: 123</span>',"title is displayed properly"),equal(this.popup.codeViewer.getOption("mode"),"text/x-ruby","mode determined right")})})()})