require(["tp/plugins/vcs/viewDiff/diffPopup"],function(a){(function(){module("diff popup",{setup:function(){this.placeholder=$("<div />"),this.popup=new a({placeholder:this.placeholder}),this.data={LeftPan:[{Action:0,Line:"erfref",LineNumber:0},{Action:20,Line:"ffft54t",LineNumber:1}],RightPan:[{Action:0,Line:"erfref",LineNumber:0},{Action:20,Line:"ffft54t87687687",LineNumber:1}]}},teardown:function(){this.popup.popup.popup("close"),this.popup.popup.popup("destroy"),delete this.popup}}),test("should open popup with provided content",function(){var a="/source.txt";this.popup.view("123",this.data,a),ok(this.popup.popup.popup("isOpen"),"popup is opened"),equal(this.popup.popup.find("._leftPan").html(),'<div>    1  erfref</div><div class="lineUpdated">    2  ffft54t</div>',"left panel content is displayed properly"),equal(this.popup.popup.find("._rightPan").html(),'<div>    1  erfref</div><div class="lineUpdated">    2  ffft54t87687687</div>',"right panel content is displayed properly"),equal(this.popup.popup.find("._leftPan .lineUpdated").length,1,"1 line in left panel marked as updated"),equal(this.popup.popup.find("._rightPan .lineUpdated").length,1,"1 line in right panel marked as updated"),equal(this.popup.popup.popup("option","title"),"Changed file: /source.txt","title is displayed properly")})})()})