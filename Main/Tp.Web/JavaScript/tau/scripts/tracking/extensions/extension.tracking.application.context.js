define(["Underscore","./extension.tracking.base"],function(_,Extension){return Extension.extend({"global application.context.data":function(evtHash,data){var teams=data.selectedTeamsCount>0?_.compact(_.pluck(data.selectedTeams,"id")):[],projects=data.selectedProjectsCount>0?_.compact(_.pluck(data.selectedProjects,"id")):[],host=this.getHost(),eventData={_id:host+"/"+data.acid,teams:_.filter(teams,function(i){return i>0}),projects:_.filter(projects,function(i){return i>0}),host:{id:host,tau_ref:"host"}};this.fire("track.application.context.ready",eventData)},"global application.context.data.changed":function(evtHash,data){var eventData={name:"change context to "+data.teams.length+" team(s) and "+data.projects.length+" project(s)",teams:data.teams,projects:data.projects,tags:["selected teams/projects"]};this.fire("track.action",eventData)}})})