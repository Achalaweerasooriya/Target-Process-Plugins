/*!!
 * JS Signals <http://millermedeiros.github.com/js-signals/>
 * Released under the MIT license <http://www.opensource.org/licenses/mit-license.php>
 * @author Miller Medeiros <http://millermedeiros.com/>
 * @version 0.6
 * @build 174 (04/09/2011 05:27 PM)
 */
/*!!
 * Crossroads - JavaScript Routes
 * Released under the MIT license <http://www.opensource.org/licenses/mit-license.php>
 * @author Miller Medeiros
 * @version 0.4
 * @build 31 (06/07/2011 12:15 AM)
 * ----------------------------------
 *
 * !!! WARNING: Patch for getParamIds method is added. Take into account when update to new version.
 *
 * ----------------------------------
 */
/**
 * @version: 1.0 Alpha-1
 * @author: Coolite Inc. http://www.coolite.com/
 * @date: 2008-05-13
 * @copyright: Copyright (c) 2006-2008, Coolite Inc. (http://www.coolite.com/). All rights reserved.
 * @license: Licensed under The MIT License. See license.txt and http://www.datejs.com/license/. 
 * @website: http://www.datejs.com/
 */
define("tau/core/class",[],function(){var a=!1,b=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,c=function(){},d=0,e=function(a,b){return b};return c.extend=function(c){function j(){!a&&this.init&&(this.__objectId=d++,this.init.apply(this,arguments))}var f=this.prototype;a=!0;var g=new this;a=!1,g.__profiler=g.__profiler||e;for(var h in c){if(h==="__profiler")continue;var i=typeof c[h]=="function"&&typeof f[h]=="function"&&b.test(c[h])?function(a,b){return function(){var c=this._super;this._super=f[a];var d=b.apply(this,arguments);return this._super=c,d}}(h,c[h]):c[h];g[h]=g.__profiler(h,i)}return j.prototype=g,j.constructor=j,j.extend=arguments.callee,j},c});var JSON;JSON||(JSON={}),function(){function f(a){return a<10?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return typeof b=="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g=gap,h,i=b[a];i&&typeof i=="object"&&typeof i.toJSON=="function"&&(i=i.toJSON(a)),typeof rep=="function"&&(i=rep.call(b,a,i));switch(typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";gap+=indent,h=[];if(Object.prototype.toString.apply(i)==="[object Array]"){f=i.length;for(c=0;c<f;c+=1)h[c]=str(c,i)||"null";return e=h.length===0?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]",gap=g,e}if(rep&&typeof rep=="object"){f=rep.length;for(c=0;c<f;c+=1)typeof rep[c]=="string"&&(d=rep[c],e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e))}else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));return e=h.length===0?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}",gap=g,e}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(a,b,c){var d;gap="",indent="";if(typeof c=="number")for(d=0;d<c;d+=1)indent+=" ";else typeof c=="string"&&(indent=c);rep=b;if(!b||typeof b=="function"||typeof b=="object"&&typeof b.length=="number")return str("",{"":a});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&typeof e=="object")for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),d!==undefined?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),define("libs/json2",function(){}),define("tau/core/external",["Underscore","jQuery","tau/core/class","libs/json2"],function(_,$,a){var b=function(a,b,c){a=a.charAt(0)!=="&"?"&"+a:a;var d=a.indexOf("&"+b+"="),e=d!==-1?d:a.length;d=a.indexOf("&",1+e);var f=d!==-1?d:a.length,g="";if(c!==null){var h=_.isString(c)?c:JSON.stringify(c),i=a==="&"?"":"&";g=i+b+"="+h}var j=a.substring(0,e),k=a.substring(f),l=j+g+k;return l=l.charAt(0)!=="&"?l:l.substring(1),l},c=function(a){var b=a;try{b=decodeURIComponent(a)}catch(c){}return b};return a.extend({init:function(a){this.external=_.defaults(a,{location:{hash:""}})},getHash:function(){var a=this.external.location.hash;while(a.indexOf("#")===0)a=a.substr(1);return c(a)},setHash:function(a){this.external.location.hash="#"+a},hashParams:function(){var a={},b=this.getHash(),c=b.split("&");for(var d=0,e=c.length;d<e;d++){var f=c[d],g=f.indexOf("=");if(g!==-1){var h=f.substr(0,g),i=f.substr(g+1),j=i;i.charAt(0)==="{"&&i.charAt(i.length-1)==="}"&&(j=JSON.parse(i)),a[h]=j}}return a},getHashParam:function(a,b){var c=this.hashParams(),d=c[a]||(arguments.length>1?b:{});return d},setHashParam:function(a,c){var d=this.getHash(),e=b(d,a,c);this.setHash(e)},onHashChange:function(a){var b=this,c=function(c){c.stopPropagation(),c.preventDefault(),a(b)};$(this.external).bind("hashchange",c)},triggerHashChange:function(a){$(this.external).trigger("hashchange",{hash:a})}})}),define("tau/app.resolver",["Underscore","tau/core/external"],function(_,a){var b=function(a){var b=a.split("/");if(b.length<2)return null;var c=b[0],d=b[1],e=d.length,f=_.without([d.indexOf("&"),d.indexOf("||"),e],-1),g=_.min(f),h=d.substring(0,g);return{id:h,type:c}};return{resolvePageInfo:function(c,d){var e=new a(c.win),f=e.getHashParam(c.appId,null),g=f||e.getHash(),h=b(g)||d;if(c.force&&!f){var i=["#",c.appId,"=",h.type,"/",h.id].join("");c.win.location.replace(i)}return h},getQueryParam:function(a,b){var c=a.indexOf(b+"=");if(c===-1)throw'Param "'+b+'" not found';c=c+b.length+1;var d=a.indexOf("&",c);d=d!==-1?d:a.length;var e=a.substring(c,d);return e}}}),define("tau/core/templates-factory",["Underscore","jQuery"],function(_,$){var a={sub:function(a,c){var d=_.isArray(c)?c:[c],e=[];for(var f=0,g=d.length;f<g;f++)e.push(b.get(a).render(null,d[f]));return e.join("")}},b={templates:{},initialized:{},get:function(a){var b=this,c=b.templates[a];if(!c)throw["Template '",a,"' was not registered."].join("");return b[c.engine+".get"](a)},"jquery.get":function(a){var b=this;if(!$.template.hasOwnProperty(a))throw["jQuery template '",a,"' was not found."].join("");return{bind:function(c,d){var e={},f=b.templates[a],g=f.tags||[];for(var h=0;h<g.length;h++){var i=g[h];i.register(c,e)}var j=$.template[a];return $.tmpl(j,d,e)}}},"jqote2.get":function(b){var c=this,d=c.templates[b];if(!d.jqotecmpl)throw["Template '",b,"' was not compiled."].join("");return{render:function(b,c){var e=d.customFunctions||{};return _(e).extend(a),d.jqotecmpl.call(c,0,0,[c],e)},bind:function(a,b){var c=this.render(a,b);return $(c)},bindPure:function(a,b){return this.render(a,b)}}},registerRecursively:function(a,b){var c=this;b=b||{tags:[]};var d=null;if(!$.template.hasOwnProperty(a)){d=this.templates[a];if(!d)throw["Template '",a,"' was not found."].join("");d.tags&&(b.tags=b.tags.concat(d.tags)),$.each(d.dependencies,function(a,d){c.registerRecursively(d,b)}),d.tags=b.tags;var e=d.markup;$.template(a,e)}else d=d||this.templates[a],d.tags&&(b.tags=b.tags.concat(d.tags))},"jquery.register":function(a){var b=this;b.registerRecursively(a.name)},"jqote2.register":function(a){a.jqotecmpl=$.jqotec(a.markup)},register:function(a){var b=this;return a.dependencies=a.dependencies||[],a.markup=_.isArray(a.markup)?a.markup.join(""):a.markup,a.engine=a.engine||"jquery",b.templates[a.name]=a,b[a.engine+".register"](a),{name:a.name,options:a.options||{},get:function(){return b.get(a.name)}}}};return b}),define("tau/ui/templates/container/ui.template.container.boardPlus",["tau/core/templates-factory"],function(a){var b={name:"container.boardPlus",engine:"jqote2",markup:['<header role="header" class="tau-app-header">',"</header>",'<div class="tau-app-body">','<div role="main" class="tau-app-main-pane">',"</div>",'<aside role="aside" class="tau-app-secondary-pane">',"</aside>","</div>"],dependencies:[]};return a.register(b)}),define("tau/configurations/board.container.config",["Underscore","tau/core/class","tau/ui/templates/container/ui.template.container.boardPlus"],function(_,a,b){var c=a.extend({getDefaultBoardSettings:function(a){return{id:a,name:"anonymous",zoomLevel:3,viewMode:"board",x:{types:["Release"],filter:""},y:{types:["Feature"],filter:""},cells:{types:["UserStory"],filter:""}}},getConfig:function(a){var c=a.viewMode==="list"?".list":"";return{layout:"selectable",template:b,children:[{type:"board.header",selector:"[role=header]"},{type:"board.selector",selector:"[role=aside]"},{type:"board.overview",selector:"[role=aside]"},{type:"board.settings",selector:"[role=main]"},{type:"board.plus"+c,selector:"[role=main]",min:1,max:6,defaultValue:3}]}}});return new c}),define("dev.toolbar",["jQuery","tau/app.resolver","tau/configurations/board.container.config"],function($,a,b){return function(a){var c=["<div>","<div style='float:left'>","<table cellpadding='5' cellspacing='5' border='1' width='500px' style='padding:5px;display:none;'>","   <tr><td style=''><button id='btnRun'>RUN</button></td></tr>","   <tr><td style='height:100px'><div id='mainInput' style='height:100px;color:white' contenteditable></div></td></tr>","   <tr><td style=''>&gt;<span id='mainOutput'></span></td></tr>","</table>","</div>","<div id='slideme' style='float:left;padding:5px;font-size:100px;cursor:pointer;'>&gt;</div>","</div>"],d=$(c.join(""));d.css("z-index",99999),d.css("border","solid 1px black"),d.css("color","green"),d.css("background-color","black"),d.css("position","absolute"),d.css("top",400),d.css("left",0);var e=d.find("#btnRun"),f=d.find("#mainInput"),g=d.find("#mainOutput"),h=b.getConfig;e.click(function(){b.getConfig=function(){var a=h.apply(this,arguments),b=JSON.parse(f.text());return a.children[1].definition=b,a},a.fire("refresh")}),b.getConfig=function(){var a=h.apply(this,arguments);return f.text(JSON.stringify(a.children[1].definition)),a},d.find("#slideme").click(function(){d.find("table").toggle()}),d.appendTo("body")}}),define("tau/core/Class",[],function(){var a=!1,b=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,c=function(){},d=0,e=function(a,b){return b};return c.extend=function(c){function j(){!a&&this.init&&(this.__objectId=d++,this.init.apply(this,arguments))}var f=this.prototype;a=!0;var g=new this;a=!1,g.__profiler=g.__profiler||e;for(var h in c){if(h==="__profiler")continue;var i=typeof c[h]=="function"&&typeof f[h]=="function"&&b.test(c[h])?function(a,b){return function(){var c=this._super;this._super=f[a];var d=b.apply(this,arguments);return this._super=c,d}}(h,c[h]):c[h];g[h]=g.__profiler(h,i)}return j.prototype=g,j.constructor=j,j.extend=arguments.callee,j},c}),define("app.path",["jQuery"],function($){var a=null,b=function(a){var b=null,c=window.location,d=c.search,e=c.href,f=d?e.indexOf(d):e.length,g=e.substr(0,f),h=g.split("/");h.pop();var i=$(document).find('script[src*="/require.js"]').attr("src"),j=i.split("/");j.pop();var k=a.split("/");while(".."===j[0])j.shift(),h.pop();if(j.length===0)for(var l=0;l<k.length;l++)h.pop();else if(j.join("/").toLowerCase()!==k.join("/").toLowerCase())throw"Can't determine application root";return b=h.join("/"),b};return{get:function(){return a||(a=b("javascript/tau/scripts"))}}}),Function.prototype.tauCreateDelegate=function(a){var b=this,c=(a.bus||{name:""}).name;return c==="entity component"&&console.log(c),function(){b.apply(a,arguments)}},String.prototype.trim=function(a){return function(){var b=this,c=/^\s+/,d=/\s+$/,e=a?a.call(b):b.toString().replace(c,"").replace(d,"");return e}}(String.prototype.trim),Date.prototype.setISO8601=function(a){var b="([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?",c=a.match(new RegExp(b)),d=0,e=new Date(c[1],0,1);c[3]&&e.setMonth(c[3]-1),c[5]&&e.setDate(c[5]),c[7]&&e.setHours(c[7]),c[8]&&e.setMinutes(c[8]),c[10]&&e.setSeconds(c[10]),c[12]&&e.setMilliseconds(Number("0."+c[12])*1e3),c[14]&&(d=Number(c[16])*60+Number(c[17]),d*=c[15]=="-"?1:-1),d-=e.getTimezoneOffset(),time=Number(e)+d*60*1e3,this.setTime(Number(time))},Date.prototype.toISO8601String=function(a,b){if(!a)var a=6;if(!b)var b="Z",c=this;else{var d=b.match(/([-+])([0-9]{2}):([0-9]{2})/),e=Number(d[2])*60+Number(d[3]);e*=d[1]=="-"?-1:1;var c=new Date(Number(Number(this)+e*6e4))}var f=function(a){return(a<10?"0":"")+a},g="";g+=c.getUTCFullYear(),a>1&&(g+="-"+f(c.getUTCMonth()+1)),a>2&&(g+="-"+f(c.getUTCDate())),a>3&&(g+="T"+f(c.getUTCHours())+":"+f(c.getUTCMinutes()));if(a>5){var h=Number(c.getUTCSeconds()+"."+(c.getUTCMilliseconds()<100?"0":"")+f(c.getUTCMilliseconds()));g+=":"+f(h)}else a>4&&(g+=":"+f(c.getUTCSeconds()));return a>3&&(g+=b),g},define("tau/extensions/extension.javascript",function(){}),define("tau/core/tau",["tau/extensions/extension.javascript"],function(){var a=a||{};return a.empty=function(){},a.ns=function(a){var b=a.split("."),c=window;for(var d=0,e=b.length;d<e;d++){var f=b[d];typeof c[f]=="undefined"&&(c[f]={}),c=c[f]}},a.getQueryValueFromUrl=function(a,b){b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c="[\\?&]"+b+"=([^&#]*)",d=new RegExp(c,"i"),e=d.exec(a);return e==null?"":e[1]},a.getValueFromQueryString=function(b){var c=window.location.href;return a.getQueryValueFromUrl(c,b)},a.extendArgs=function(a,b){var c=a;return c=[].slice.call(a),c.unshift(b),c},a.concat=function(){return String.prototype.concat.apply("",arguments)},a.createScopedCallbackIfRequired=function(b){return typeof b=="function"?b:a.createScopedCallback(b.fn,b.scope)},a.createScopedCallback=function(a,b){return typeof a!="function"&&typeof a.fn=="function"&&(a=a.fn,a.scope&&(b=a.scope)),typeof a=="function"&&b&&(a=a.tauCreateDelegate(b)),a},a.getCallbacks=function(b){b=b||{},b.success||(b.success=a.empty),b.failure||(b.failure=a.empty);var c=a.createScopedCallback(b.success,b.scope),d=a.createScopedCallback(b.failure,b.scope);return{success:c,failure:d}},a}),define("tau/store/typesClass",["Underscore","tau/core/class"],function(_,a){return a.extend({init:function(){this._dictionary={}},registerType:function(a,b){b[a.name]=a,a.aliases=a.aliases||[],a.refs=a.refs||{},_.each(a.aliases,function(c){b[c]=b[c.toLowerCase()]=a})},register:function(a){var b=this,c=b._dictionary;this.registerType(a,c)},findByKeyword:function(a){return this._dictionary[a]||null},getDictionary:function(){return this._dictionary}})}),define("tau/store/types",["tau/store/typesClass"],function(a){return new a}),define("tau/store/store",["Underscore","tau/core/class","tau/core/tau","tau/store/types","tau/store/typesClass"],function(_,a,b,c,d){var e={_processCommand:function(a,b,c,d){d=d||{};var e=this.types[b];e&&(b=e.name);var f={type:b,name:a,config:c,callbacks:d};return this.commands.push(f),this}},f=function(){var a=this;if(_.isEmpty(a._frozenPromises)){var b=[].concat(a._frozenCommandsQueue);a._frozenCommandsQueue=[],a.config.proxy.execute(b)}};return a.extend({init:function(a){var f=this;f.id=_.uniqueId("store_"),f._frozenCommandsQueue=[],f._frozenPromises={},f.config=a,f.eventEmitter=f.config.eventEmitter||{fire:function(){},on:function(){},removeAllListeners:function(){}};var g=a.types||a.proxy.types;if(g){var h=new d;_(g).each(function(a){h.register(a)}),e.types=h.getDictionary()}else e.types=c.getDictionary();var i=_.functionsExt(a.proxy);_.each(i,function(a){var c=a.split("api ");if(c.length!==2)return;var d=c[1];e[d]=function(){var a=b.extendArgs(arguments,d);return this._processCommand.apply(this,a)}}),f._extendWithCommonAPI(f,f)},_extendWithCommonAPI:function(a,b){_.each(_.functionsExt(e),function(c){if(c[0]=="_")return;a[c]=function(){var d=_.extend({},e);return d.commands=a.commands||[],d[c].apply(d,arguments),d.done=function(a){b._done(d.commands,a)},d}})},freeze:function(){var a=this,c=_.uniqueId(),d={id:c,unfreeze:function(){this.unfreeze=b.empty,delete a._frozenPromises[c],f.call(a)}};return a._frozenPromises[d.id]=d,d},register:function(a,b){this.config.proxy.registerData(a,b)},on:function(a,b){return this.config.proxy.on(a,b),this.eventEmitter.fire("afterStoreOn",a),this},unbind:function(a){return this.config.proxy.unbind(a),this.eventEmitter.fire("afterStoreUnbind",a),this},_processChain:function(a,c){c=b.getCallbacks(c);var d=[].concat(a);_.each(a,function(e){var f=b.getCallbacks(e.callbacks),g=function(b,g){d[_.indexOf(d,e)]=b;var h=_.select(a,function(a){return a.executed!==!0});f[g](b);if(h.length===0){var i=_.select(a,function(a){return a.failed===!0});c[i.length>0?"failure":"success"](d)}};e.callbacks={success:function(a){g(a,"success")},failure:function(a){g(a,"failure")}}})},done:function(a){b.getCallbacks(a).success([])},evictProperties:function(a,b,c){this.config.proxy.evictProperties(a,b,c)},evictData:function(){this.config.proxy.evictData()},isPropertyInitialized:function(a,b,c){return this.config.proxy.isPropertyInitialized(a,b,c)},_done:function(a,b){var c=this;c._processChain(a,b),_.isEmpty(c._frozenPromises)?c.config.proxy.execute(a):c._frozenCommandsQueue=[].concat(c._frozenCommandsQueue,a)}})}),define("tau/core/event",["Underscore"],function(_){var a=function(){};a.implementOn=function(b){var c=a.prototype;for(var d in c)b[d]==undefined&&(b[d]=c[d]);return b};var b=function(a){var b={},c=a.split(":");return b.name=c[0],c.length>1&&(b.rule=c[1]),b};return a.signUpOnEvents=function(a,c,d,e,f){var g={},h=[],i={},j=function(a){g[a.name]=a;if(_(g).keys().length===h.length){var b={};for(var e=0,f=h.length;e<f;e++){var j=i[h[e]];b[j.name]=g[j.name];if(j.rule==="last")continue;delete g[j.name]}c[d].call(c,b)}};for(var k=0,l=a.length;k<l;k++){var m=b(a[k]),n=m.name;i[n]=m,h.push(n),e.on(n,j,c,null,f)}},a.subscribeOn=function(b){var c=_(b);_.each(c.keys(),function(c){var d=b[c];if(!d)return;if(_.isFunction(d.on)){var e=_(b).functionsExt();for(var f=0,g=e.length;f<g;f++){var h=e[f],i=h.split(" "),j=i[1],k=i[0],l;if(i.length<2)continue;i.length>2&&!isNaN(i[2])&&(l=i[2]);var m=j.split("+");k==c&&(m.length>1?a.signUpOnEvents(m,b,h,d,l):d.on(j,b[h],b,null,l))}}})},a.unSubscribe=function(a){var b=_(a);_.each(b.keys(),function(b){var c=a[b];c&&_.isFunction(c.removeAllListeners)&&c.removeAllListeners(a)})},a.prototype=function(){var b=function(a){var _=a.getPrivate&&a.getPrivate()||a._||(a._={});return _.events||(_.events={})},c=function(a){this.name=a,this.listeners=[]};return c.prototype={getListenerIndex:function(a,b){for(var c=0,d=this.listeners;c<d.length;c++)if(d[c].fn==a&&(d[c].scopeObj===b||!d[c].scopeObj&&(arguments.length==1||!b)))return c;return-1}},{on:function(d,e,f,g,h){if(_.isString(d)&&d.indexOf("+")>0){var i=d.split("+");a.signUpOnEvents(i,this,e,this,h);return}if(_.isArray(d)){var j=arguments.callee,k=this;_.each(d,function(a){j.call(k,a,e,f,g,h)});return}var l=b(this),m=l[d]||(l[d]=new c(d));if(m.getListenerIndex(e,f)<0){var n=m.listeners;f||(f=this),isNaN(h)&&(h=10);var o=this,p=function(a,b,c,h){var i={name:d,sender:this,caller:a,data:b,listenerData:g,stop:c,cancel:h,removeListener:function(){o.removeListener(d,e,f)}};return e.call(f,i),i.data};p.fn=e,p.scopeObj=f,p.priority=h;for(var q=n.length-1;q>=0;q--)if(n[q].priority<=h){n.splice(q+1,0,p);return}n.unshift(p)}return this},fire:function(){var a=!1,c=function(){a=!0},d=!1,e=function(){d=!0};return function(f,g,h){var i=b(this)[f],j=a,k=d;a=d=!1;if(i){var l=i.listeners;if(l.length){l=l.slice(0);for(var m=0;m<l.length;m++){var n=l[m].call(this,h,g,c,e);typeof n!="undefined"&&(g=n);if(a||d)break}}}var o=d||(typeof g=="undefined"?!1:g);return a=j,d=k,o}}(),fireOnce:function(a,c,d){var e=this.fire(a,c,d);return delete b(this)[a],e},removeListener:function(a,c,d){var e=b(this)[a];if(e){var f=e.getListenerIndex(c,d);f>=0&&e.listeners.splice(f,1)}},removeAllListeners:function(a){var c=b(this);for(var d in c)if(c[d].listeners)if(!a)delete c[d].listeners,delete c[d];else{var e=c[d].listeners,f=[];for(var g=0;g<e.length;g++)e[g].scopeObj!=a&&f.push(e[g]);c[d].listeners=f}},hasListeners:function(a){var c=b(this)[a];return c&&c.listeners.length>0},getListeners:function(){var a=b(this),c=[];for(var d in a){var e=a[d].listeners;if(e&&e.length>0){var f=[];for(var g=0;g<e.length;g++){var h=e[g],i={name:"unknown",item:h};h.scopeObj&&h.scopeObj.bus&&h.scopeObj.bus.name?i.name=h.scopeObj.bus.name:h.scopeObj&&h.scopeObj.name&&(i.name=h.scopeObj.name),f.push(i)}c.push({name:d,items:e,count:e.length,listeners:f})}}return c},getListenersCount:function(){var a=b(this),c=0;for(var d in a)a[d].listeners&&(c+=a[d].listeners.length);return c}}}(),a}),define("tau/store/header",["Underscore","tau/core/tau"],function(_,tau){var tauExtension=_.extend(tau,{ref:function(a,b){var c={};return c[a]=b,c},list:function(a,b){var c=tau.ref(a,b);return c.list=!0,c},getNextPage:function(a,b,c){c=c||[];var d={holder:a,url:b,fields:c};return a.getNextPage=function(){return d},d},parseFieldsFromString:function(value){var self=this;value=value.replace(/([\w-]+)\[+/ig,'{"$1":['),value=value.replace(/(\])/ig,"]}"),value=value.substr(0,value.length-1),value=value.replace(/([\w-]+)(,|\])/ig,"'$1'$2");var fields=eval("(function () { return "+value+";})();"),toLowerCase=function(a){var b=a.split("-");if(b.length>1){var c=[];return _.each(b,function(a){c.push(toLowerCase(a))}),c.join("-")}return a.charAt(0).toLowerCase()+a.substr(1)},formatFields=function(a){var b=[];return _.each(a,function(a){if(self.header.isSimple(a)){b.push(toLowerCase(a));return}var c={},d=self.header.getFieldName(a);c[toLowerCase(d)]=formatFields(a[d]),b.push(c)}),b};return formatFields(fields)},formatObject:function(a,b){var c=this,d={data:[],nextPages:[]};if(_.isUndefined(a)||_.isNull(a))return d.data=null,d;if(typeof a!="object")return d.data=a,d;b=b?b:"Lower";var e=function(a){return a.charAt(0)["to"+b+"Case"]()+a.substr(1)};if(a&&(a.hasOwnProperty("Items")||a.hasOwnProperty("items"))){var f=a.next||a.Next;f&&d.nextPages.push(c.getNextPage(d.data,f,[])),a=a.Items||a.items}if(_.isArray(a))return _.each(a,function(a){var e=c.formatObject(a,b);d.nextPages=d.nextPages.concat(e.nextPages||[]),d.data.push(e.data)}),d;var g={};return _.each(_.keys(a),function(f){var h=e(f),i=h.split("-");if(i.length>1){var j=[];_.each(i,function(a){j.push(e(a))}),h=j.join("-")}var k=c.formatObject(a[f],b);d.nextPages=d.nextPages.concat(k.nextPages||[]),g[h]=k.data}),d.data=g,d},header:{getFieldName:function(a){return _.getFieldName(a)},isSimple:function(a){return _.isString(a)},isList:function(a){return a.list===!0}}});return tauExtension}),define("tau/core/comparer",["Underscore"],function(_){return{isEqualIncluded:function(a,b){if(a===b)return!0;var c=typeof a,d=typeof b;if(c!=d)return!1;if(a==b)return!0;if(!a&&b||a&&!b)return!1;if(_.isDate(a)&&_.isDate(b))return a.getTime()===b.getTime();if(_.isNaN(a)&&_.isNaN(b))return!1;if(_.isRegExp(a)&&_.isRegExp(b))return a.source===b.source&&a.global===b.global&&a.ignoreCase===b.ignoreCase&&a.multiline===b.multiline;if(c!=="object")return!1;if(_.isArray(a)&&_.isArray(b)&&a.length!==b.length)return!1;var e=_.keys(b);for(var f=0;f<e.length;f++){var g=e[f];if(a.hasOwnProperty(g)&&!this.isEqualIncluded(a[g],b[g]))return!1}return!0},compare:function(a,b){var c=this,d={changes:{}};return a?(_.each(_(b).keys(),function(e){var f={value:b[e]};if(!a.hasOwnProperty(e)){d.changes[e]=f;return}c.isEqualIncluded(a[e],b[e])||(d.changes[e]=f)}),d):d}}}),define("tau/store/db",["Underscore","tau/core/class","tau/store/header","tau/core/comparer"],function(_,a,b,c){return a.extend({init:function(a){this.__data={},this.__types=a.types||{}},_getTypeHolder:function(a,b){var c=a[b]||{};return a.hasOwnProperty(b)||(a[b]=c),c},_getTypeDictionary:function(a){return this._getTypeHolder(this.__data,a)},getPersistedNode:function(a,b){var c=this,d=c.__data[b];if(!d)return null;if(!a)return d;var e=d[a];return e?e:null},_getRefsArray:function(a){return!a||!a.refs?[]:(a.hasOwnProperty("refsArray")||(a.refsArray=_(a.refs).keys()),a.refsArray)},_registerReference:function(a,b,d,e,f){var g=this,h=d.refs[b];if(_.isUndefined(a)||a===null||a.id===null)return h.list?[]:null;a.__type=h.name;var i=g.__types[h.name],j=g._register(a,function(a){if(!i.refs)return;var b=h.relationProperty;if(!b)return;var d=i.refs[b];if(!d)return;var j=a.data.hasOwnProperty(b),k=a.data[b],l=d.list,m=g._getReferenceObject(e.id,e.__type),n=function(b){var c={};c[h.relationProperty]=b,f.diffs.push({id:a.id,type:g._getOriginType(a),changes:c})};if(l&&!j)return;l?_(k).any(function(a){return a.id===e.id})?m=k:(m=k.concat([m]),n(m)):c.isEqualIncluded(m,k)||n(m),a.data[b]=m});_.mergeArrayObjects(f,j,["diffs"]);var k={isReference:!0,type:h.name,list:!0};return h.list?_.extend(j.refs,k):j.refs[0]},_removeCascadeObjects:function(a,b){var c=this,d=c._getRegisterTemplate();return _.each(c._getRefsArray(a),function(e){var f=a.refs[e];f.cascade&&(f.list?_.each(b[e],function(a){c._extendRegister(d,c.remove(a.id,a.type))}):c._extendRegister(d,c.remove(b[e].id,b[e].type)))}),d},_getOriginType:function(a){var b=a.__type;return a.origin&&(b=a.origin.type),b},_removeRefFromObj:function(a,b,c,d,e){var f=this,g=a.data;if(!g.hasOwnProperty(b))return;var h=g[b];if(!h)return;var i=d.refs[b];if(!i.relationProperty)return;var j=f.__types[i.name];_.isArray(h)||(h=[h]);for(var k=0,l=h.length;k<l;k++){var m=h[k];if(e&&e!==m.id)continue;var n=f.getPersistedNode(m.id,m.type);if(!n)return;if(!n.data.hasOwnProperty(i.relationProperty))return;c.nodes.push(n);var o={};o[i.relationProperty]=null,j.refs&&j.refs[i.relationProperty]&&j.refs[i.relationProperty].list?(n.data[i.relationProperty]=_(n.data[i.relationProperty]).select(function(b){return b.id!=a.id}),o[i.relationProperty]=n.data[i.relationProperty]):n.data[i.relationProperty]=null,c.diffs.push({id:n.id,type:f._getOriginType(n),changes:o})}},_removeObjectFromRefs:function(a,b){var c=this,d=c._getRegisterTemplate();return _(c._getRefsArray(a)).each(function(e){c._removeRefFromObj(b,e,d,a)}),d},removeProperties:function(a,b,c){var d=this,e=d.getPersistedNode(a,b);if(!e)return;var f=e.data;_(c).each(function(a){delete f[a]})},removeFromList:function(a,c,d){var e=this,f=e._getRegisterTemplate(),g=e.getPersistedNode(a,c);if(!g)return f;var h=e.__types[c],i=b.header.getFieldName(d),j=g.data[i];if(!j)return f;var k=[],l=d[i].id;_.each(j,function(a){a.id!=l?k.push({id:a.id}):e._removeRefFromObj(g,i,f,h,l)});var m={id:a,__type:c};m[i]=k;var n=e.register(m);return e._extendRegister(n,f),n},remove:function(a,b){var c=this,d=c._getRegisterTemplate(),e=c.getPersistedNode(a,b);if(!e)return d;var f=c.__types[b],g=e.data;return d.deletedData.push(_(g).defaults({id:a,type:b})),delete c.__data[b][a],c._extendRegister(d,c._removeCascadeObjects(f,g)),c._extendRegister(d,c._removeObjectFromRefs(f,e)),d},isPropertyInitialized:function(a,b,c){var d=this.getPersistedNode(a,b);return d?d.data?d.data.hasOwnProperty(c):!1:!1},_getReferenceObject:function(a,b){return{isReference:!0,id:a,type:b}},_attachReference:function(a,b,c){var d=this._getReferenceObject(b,c);return a.push(d),d},_getParentTypeNames:function(a){var b=this;if(!a.__parents){a.__parents=[];var c=a.parent;while(c){a.__parents.push(c);var d=b.__types[c];if(!d)break;c=d.parent}}return a.__parents},_registerParentNodes:function(a,b,c){var d=this,e=d.__types[a],f={data:c.data,id:b,origin:{id:b,type:a}},g=d._getParentTypeNames(e);for(var h=0;h<g.length;h++){var i=g[h],j=d._getTypeDictionary(i);j[b]=j[b]||{},_.extend(j[b],f)}},_getRegisterTemplate:function(){return{refs:[],nodes:[],diffs:[],tree:{},deletedData:[]}},_registerObjectInTree:function(a,b){var c=this,d=c._getTypeHolder(a,b.type);if(!d.hasOwnProperty(b.id)){var e={},f=c.__types[b.type],g={id:b.id,changes:e},h=c._getParentTypeNames(f);for(var i=0;i<h.length;i++){var j=c.__types[h[i]],k=c._getTypeHolder(a,j.name);k[b.id]=g}d[b.id]=g}_.extend(d[b.id].changes,b.changes)},_extendTree:function(a,b){var c=this;_.each(b,function(b){c._registerObjectInTree(a,b)})},_extendRegister:function(a,b){this._extendTree(a.tree,b.diffs),_.mergeArrayObjects(a,b,["diffs","deleteData"])},register:function(a,b,c){return this._register(a,b,c)},isTypeDetectionRequired:function(a){var b=this.__types[a];return b.isParentType},getTypeDetectionForNode:function(a,b){if(!this.isTypeDetectionRequired(b))return{required:!1};var c=this.getPersistedNode(a,b),d={required:!0};return c?c.origin?!c.origin.id||!c.origin.type?d:{required:!1,type:c.origin.type}:d:d},_getTypeDefinitionForRegistration:function(a,b,c){var d=this,e=d.__types[b];e||(e=d.__types[b.toLowerCase()]);if(e.isParentType){var f=d.getTypeDetectionForNode(a,e.name);b=f.required?e.detectType(c):f.type,e=d.__types[b]}return e},_register:function(a,b,c){var d=this;c=c||"__type";var e=d._getRegisterTemplate();if(_.isEmpty(a))return e;_.isArray(a)||(a=_.isArray(a.items)?a.items:[a]);var f=a[c];for(var g=0,h=a.length;g<h;g++){var i=a[g];i.hasOwnProperty(c)||(i[c]=f),d._registerObject(i,e,b,c)}return e},_registerObject:function(a,b,d,e){var f=this,g=a[e],h=a.id;if(!g||!h)throw new Error("properties __type and id are required for data registration");var i=f._getTypeDefinitionForRegistration(h,g,a),j={id:h,type:i.name,changes:{}},k=f._getTypeDictionary(i.name),l=k[h];l||(k[h]=l={__type:i.name,data:{id:h},id:h},f._registerParentNodes(i.name,h,l,k));var m=l.data,n=i.refs,o=f._getRegisterTemplate();for(var p in a){if(p==="__type"||p==="id")continue;var q=a[p],r=m[p];n.hasOwnProperty(p)&&(q=f._registerReference(q,p,i,l,o)),l.data[p]=q,c.isEqualIncluded(r,q)||(j.changes[p]=q)}f._extendRegister(b,o),l.data.hasOwnProperty("__type")&&delete l.data.__type,b.nodes.push(l),f._extendTree(b.tree,[j]),b.diffs.push(j),f._attachReference(b.refs,h,i.name),d&&d(l)},get:function(a,b,c){var d=this;if(!a){var e={data:[],notInitializedFields:[],all:!0};return _.each(_(this._getTypeDictionary(b)).keys(),function(a){var f=d._get(a,b,c);e.data.push(f.data),d.mergeFields(e.notInitializedFields,f.notInitializedFields)}),e}return this._get(a,b,c)},_get:function(a,c,d){var e=this;d=d||{};var f=e.getPersistedNode(a,c),g=e.__types[c]||{},h=g.refs||{},i=d.$fields||d.fields||[],j={data:null,type:g,notInitializedFields:i};if(!f)return j;var k={},l=[],m=function(a,b,c){var d=e._get(a.id,a.type,{fields:b||[]});return d.notInitializedFields.length&&c.push(d.notInitializedFields),d.data},n=f.data;return _.each(i,function(a){var c=b.header.getFieldName(a),d=n[c];if(_.isUndefined(d)){l.push(a);return}k[c]=d;if(h.hasOwnProperty(c)&&d){var f=[];if(_.isArray(d)){var g=d;d=[],_.each(g,function(b){d.push(m(b,a[c],f))})}else d=m(d,a[c],f);if(f.length>0){var i={};i[c]=[],_(f).each(function(a){e.mergeFields(i[c],a)}),i[c].length>0&&l.push(i)}}k[c]=d}),f.origin&&(c=f.origin.type),{type:g,data:_(k).defaults({id:a,__type:c}),notInitializedFields:l}},mergeFields:function(a,b,c){return _.mergeFields(a,b,c)},destroy:function(){delete this.__data,delete this.__types}})}),define("tau/store/repository",["Underscore","tau/core/class","tau/core/event","tau/core/tau","tau/store/header","tau/core/comparer","tau/store/types","tau/store/db"],function(_,a,b,c,d,e,f,g){var h=a.extend({init:function(a){if(!a.service)throw"rest service should be defined";this.__listenerObjects={objects:[],holders:[]},this.__subscriptions={},this.types=a.types||f.getDictionary(),this._initDb(),this.service=a.service},_initDb:function(){this.__allTypeLoadMarkers={},this.db=new g({types:this.types})},mergeCommands:function(a){var b={},d=this;return _.each(a,function(a){a=_.defaults(a,{name:"get",config:{},callbacks:{}}),a.callbacks=c.getCallbacks(a.callbacks),d._processFieldsConfig(a,a.name==="get"?null:"_getEmptyArray");var e=[a.type,a.config.id||"_",a.name,a.config.nested===!0?_.uniqueId():""].join("_");if(!b.hasOwnProperty(e))b[e]=a,a.commands=[];else{var f=b[e];d.db.mergeFields(f.config.fields,a.config.fields),f.commands.push(a)}}),b},execute:function(a){var b=this;_.isArray(a)||(a=[a]);var c=b.mergeCommands(a);_.each(_.values(c),function(a){if(a.executed===!0)throw"command is already executed. the same command can not be used twice";b["api "+a.name](a)})},_registerListener:function(a,b,d){var e=a||{},f=b.eventName;e.hasOwnProperty(f)||(e[f]={});var g=_.uniqueId(f),h={id:g,config:b,callback:c.createScopedCallbackIfRequired(d)},i=e[f],j=b.listener;if(j){if(!j.__getRepositorySubscriberId){var k=_.uniqueId("repository_");j.__getRepositorySubscriberId=function(){return k},this.__listenerObjects[k]={listener:j,holders:[]}}var l={id:g,holder:i};this.__listenerObjects[j.__getRepositorySubscriberId()].holders.push(l)}return i[g]=h,h},unbind:function(a){if(!a.__getRepositorySubscriberId)return;var b=this,c=a.__getRepositorySubscriberId(),d=b.__listenerObjects[c];if(!d)return;var e=d.holders;if(!e)return;_(e).each(function(a){var b=a.holder[a.id];b.callback=function(){},delete a.holder[a.id]}),delete a.__getRepositorySubscriberId,delete b.__listenerObjects[c]},_getListeners:function(a){var b=this,c=b._getSubscriptions(a.type);if(!c)return[];var d=c[a.eventName];if(!d)return[];var f=[];return _.each(_(d).values(),function(c){var d=c.config.filter,g=c.config.hasChanges||[];if(d){var h=b.db.getPersistedNode(a.obj.id,a.obj.type),i=a.obj;h&&h.data?i=h.data:a.nodeEvent.changes&&!_.isEmpty(a.nodeEvent.changes)&&(i=a.nodeEvent.changes);var j=e.compare(i,d);if(_(j.changes).keys().length>0)return}if(a.nodeEvent&&g.length>0){var k=a.nodeEvent.changes||{},l=_(g).all(function(a){var b=a.split("|"),c=!1;return b.length>1?c=0<_(k).chain().keys().intersection(b).size().value():c=k.hasOwnProperty(a),c});if(!l)return}f.push(c)}),f},on:function(a,b){var c=this,d=a.type?c.types[a.type].name:"_all_",e=c._getSubscriptions(d);return c._registerListener(e,a,b)},_getSubscriptions:function(a){return this.__subscriptions.hasOwnProperty(a)||(this.__subscriptions[a]={}),this.__subscriptions[a]},_autoAppend:function(a,b,c){_.each(b,function(b){_.any(a,function(a){return d.header.getFieldName(a)===d.header.getFieldName(b)})||a[c?c:"unshift"](b)})},registerData:function(a,b){this.db.register(a,null,b)},_getEmptyArray:function(){return[]},_getDefaultFields:function(a){var b=this.types[a.type];return _.clone(b?b.fields||[]:[])},_processFieldsConfig:function(a,b){var c=this;b=b||"_getDefaultFields";if(!a.config.fields||a.config.fields.length===0)a.config.fields=c[b](a);var d=a.config.fields;c._autoAppend(d,["id"]);for(var e=d.length;e>0;e--){var f=d[e-1];if(_.isSimple(f))continue;var g=_.getFieldName(f),h=a.type?c.types[a.type]:null,i=null,j=[];if(h&&h.refs&&h.refs[g]){var k=h.refs[g];k.list===!0&&(f.list=!0),j=k.fields,i=k.name}var l={type:i,config:{fields:f[g]||j}};f[g]=c._processFieldsConfig(l,b)}var m=d.length;for(e=0;e<m;e++){var n=_.getFieldName(d[e]);for(var o=e+1;o<m;o++)_.getFieldName(d[o])===n&&(_.isSimple(d[e])||_.mergeFields(d[e][n],d[o][n]),d.splice(o,1),m--,o--)}return d},_invokeCommandCallback:function(a,b,c,d){var e=this;e._invokeCommandCallbackR(a,b,c,d);if(c.config.silent===!0)return;if(!e.__subscriptions._all_||_.isEmpty(e.__subscriptions._all_))return;var f=_.values(e.__subscriptions._all_[a]||[]),g={name:a,data:{cmd:c,data:d}};_(f).each(function(a){a.callback(g)})},_invokeCommandCallbackR:function(a,b,c,d){var e=this;c.executed=!0,b[a]({command:c,data:d}),c.hasOwnProperty("commands")&&_.each(c.commands,function(b){b.executed=!0,b.failed=c.failed,e._invokeCommandCallbackR(a,b.callbacks,b,d)})},"api removeFromList":function(a){var b=this,c=a.callbacks;a.config.$set=a.config.$set||{},a.callbacks={success:function(d){var e=_.extend(_.extend({},a.config.$set),d),f=b.db.removeFromList(a.config.id,a.type,a.config.$set);b._invokeCommandCallback("success",c,a,{}),b._notifyAboutNewsAndChanges(f,a)},failure:function(d){a.failed=!0,b._invokeCommandCallback("failure",c,a,d)}},b._populateBeforeSaveEvent(a),b._processFieldsConfig(a,"_getEmptyArray"),b.service.removeFromList(a)},"api remove":function(a){var b=this,c=a.callbacks;a.callbacks={success:function(d){var e=b.evictPersistedObject(a.config.id,a.type);b._populateAfterRemoveEvent(a,e),b._invokeCommandCallback("success",c,a,a.callbacks)},failure:function(d){a.failed=!0,b._invokeCommandCallback("failure",c,a,d)}},b._populateBeforeRemoveEvent(a),b.service.remove(a)},evictPersistedObject:function(a,b){return this.db.remove(a,this.types[b].name)},evictProperties:function(a,b,c){this.db.removeProperties(a,this.types[b].name,c)},evictData:function(){this._initDb()},isPropertyInitialized:function(a,b,c){return this.db.isPropertyInitialized(a,b,c)},"api save":function(a){var b=this,c=a.callbacks;a.config.$set=a.config.$set||{},a.callbacks={success:function(d){_.extend(d,{__type:a.type});var e=_.extend(_.extend({},a.config.$set),d),f=b.db.register(e);b._notifyAboutNewsAndChanges(f,a),b._invokeCommandCallback("success",c,a,e)},failure:function(d){a.failed=!0,b._invokeCommandCallback("failure",c,a,d)}},b._populateBeforeSaveEvent(a),b._processFieldsConfig(a,"_getEmptyArray"),b.service.save(a)},_notifyAboutNewsAndChanges:function(a,b){var c=this;_.each(_.keys(a.tree),function(d){_.each(_(a.tree[d]).values(),function(a){c._populateEvent(b,"afterSave",a,{id:a.id,type:d})})})},_populateEvent:function(a,b,c,d){var e=_.uniqueId("repositoryEvent"),f=this._getListeners({type:d.type,eventName:b,nodeEvent:c,obj:d});if(f.length!==0){var g={id:e,name:b,data:{id:d.id,type:d.type,cmd:a,obj:d,changes:c.changes}};_(f).each(function(a){a.callback(g)})}},_populateBeforeRemoveEvent:function(a){this._populateEvent(a,"beforeRemove",{},{id:a.config.id,type:a.type})},_populateAfterRemoveEvent:function(a,b){var c=this;_.each(b.deletedData,function(b){c._populateEvent(a,"afterRemove",{},b)}),c._notifyAboutNewsAndChanges(b,a)},_populateBeforeSaveEvent:function(a){this._populateEvent(a,"beforeSave",{changes:a.config.$set||{}},{id:a.config.id,type:a.type})},markRecordSetAsCompleteLoaded:function(a){this.__allTypeLoadMarkers[a]=!0},isTypeMarkedAsCompleteLoaded:function(a){return this.__allTypeLoadMarkers[a]===!0},_appendDiscriminator:function(a,b){var c=this;a.isParentType&&_.indexOf(b,"id")>=0&&c._autoAppend(b,[a.discriminator],"push"),_.each(b,function(b){if(d.header.isSimple(b))return;var e=d.header.getFieldName(b),f=a.refs[e];f&&c._appendDiscriminator(c.types[f.name],b[e])})},_processCommandForGet:function(a){var b=this,c=b.db.get(a.config.id,a.type,a.config),d=a.config.fields;if(c.notInitializedFields.length===0)if(!c.all||!!b.isTypeMarkedAsCompleteLoaded(a.type))return a.config.fields=d,b._invokeCommandCallback("success",a.callbacks,a,c.data),{isInvoked:!0};var e=c.notInitializedFields;return c.all&&!b.isTypeMarkedAsCompleteLoaded(a.type)&&(e=_.clone(d)),{isInvoked:!1,fields:e}},_runReadCommand:function(a,b,c,d){var e=this;e._appendDiscriminator(e.types[a.type],c),_.extend(a.config,{fields:c}),e._processFieldsConfig(a);var f=a.callbacks;a.callbacks={success:function(c){a.config.fields=b,_.defaults(c,{__type:a.type});var g=e.db.register(c),h=d(c,g);e._invokeCommandCallback("success",f,a,h),a.callbacks=f},failure:function(c){a.config.fields=b,a.failed=!0,e._invokeCommandCallback("failure",f,a,c),a.callbacks=f}},this.service[a.name](a)},"api refresh":function(a){var b=this,c=a.config.fields,d=function(d,e){return b._notifyAboutNewsAndChanges(e,a),b.db.get(a.config.id,a.type,{fields:c}).data};this._runReadCommand(a,c,_.clone(c),d)},"api turboGet":function(a){var b=this,c=a.config.fields||[];b._autoAppend(c,["id"]);var d=a.callbacks;a.callbacks={success:function(c){_.defaults(c,{__type:a.type}),b._invokeCommandCallback("success",d,a,c),a.callbacks=d},failure:function(c){a.failed=!0,b._invokeCommandCallback("failure",d,a,c),a.callbacks=d}},this.service[a.name](a)},"api find":function(a){var b=this,c=a.config.fields,d=function(d){var e=[];_.each(d,function(d){e.push(b.db.get(d.id,a.type,{fields:c}).data)});if(d.hasOwnProperty("getNextPage")){e.isNextPageAvailable=function(){return!0};var f=_.clone(a);f.config=_.clone(f.config),f.config.$skip=f.config.$skip+f.config.$limit,e.getNextPageCommand=function(){return f}}else e.isNextPageAvailable=function(){return!1};return e};this._runReadCommand(a,c,_.clone(c),d)},"api get":function(a){var b=this,c=a.config.fields,d=b._processCommandForGet(a);if(d.isInvoked)return;var e=function(d){return a.config.id||b.markRecordSetAsCompleteLoaded(a.type),b.db.get(a.config.id,a.type,{fields:c}).data};this._runReadCommand(a,c,d.fields,e)}});return h}),define("tau/store/services/formatProperties",[],function(){return{customFields:{}}}),define("tau/store/services/service.arrayToJsonConverter",["Underscore","tau/store/header","tau/store/services/formatProperties"],function(_,a,b){return{convertArray:function(b,c){var d=this,e=[],f=[];return c.next&&f.push(a.getNextPage(e,c.next,b.header)),c=c.items?c.items:c,_.each(c,function(a){var c=d.convert(b,a);e.push(c.data),f=f.concat(c.nextPages)}),{data:e,nextPages:f}},convert:function(c,d){var e={},f=this,g=[];for(var h=0,i=c.header.length;h<i;h++){var j=d[h];_.isUndefined(j)&&(j=null);var k=c.header[h];if(a.header.isSimple(k)){b.hasOwnProperty(k)&&(j=a.formatObject(j).data),e[k]=j;continue}var l=a.header.getFieldName(k),m=k.list===!0;!_.isNull(j)&&(j.hasOwnProperty("items")||j.hasOwnProperty("Items"))&&(m=!0);if(_.isEmpty(j)&&!m){e[l]=null;continue}if(!_.isNull(j)){var n={header:k[l]},o=j;if(j.hasOwnProperty("items")||j.hasOwnProperty("Items"))j=j.items||j.Items;if(m){var p=[];_.each(j,function(a){var b=f.convert(n,a);g=g.concat(b.nextPages),p.push(b.data)}),j=p,o.next&&g.push(a.getNextPage(p,o.next,n.header))}else{var q=f.convert(n,j);g=g.concat(q.nextPages),j=q.data}}_.isNull(j)&&m&&(j=[]),e.hasOwnProperty(l)?_.extend(e[l],j):e[l]=j}return{data:e,nextPages:g}}}}),define("tau/store/services/service.rest",["Underscore","jQuery","tau/core/Class","tau/store/types","tau/store/services/service.arrayToJsonConverter","tau/store/header","tau/core/tau","libs/json2"],function(_,$,a,b,c,d,e){var f=a.extend({init:function(a){a=a||{},_.defaults(a,{api:$,types:b.getDictionary()}),this.config=a},removeFromList:function(a){var b=this,c=d.header.getFieldName(a.config.$set),e={url:b.getUrl(a)+"/"+c+"/"+a.config.$set[c].id,contentType:"application/json; charset=utf-8",type:"DELETE",processData:!1,dataType:"json"},f=this.getErrorCallback(a);b.config.api.ajax(e).success(function(){a.callbacks.success({id:a.config.id})}).error(f)},remove:function(a){var b=this,c={Id:a.config.id},d={url:b.getUrl(a),contentType:"application/json; charset=utf-8",type:"DELETE",processData:!1,data:JSON.stringify(c),dataType:"json"},e=this.getErrorCallback(a);b.config.api.ajax(d).success(function(){a.callbacks.success({id:a.config.id})}).error(e)},save:function(a){var b={$set:a.config.$set||{}};if(a.type==="prioritizer"){_.extend(b,{$include:this._formIncludes(a.config.fields)}),this.executeCrudCommandViaPageService(a,b,"save");return}this.executeCrudCommand(a,b,"save")},getErrorCallback:function(a){var b=this.config.appPath,c=function(c){if(c.status===401){document.location.href=b+"/login.aspx?ReturnUrl="+document.location.href;return}try{c.response=$.parseJSON(c.responseText)}catch(d){}finally{a.callbacks.failure(c)}};return c},executeCrudCommandViaPageService:function(a,b,c){var e=this,f={id:a.config.id,type:a.type};_.extend(f,b);var g=JSON.stringify({json:JSON.stringify(f)}),h={url:[e.config.appPath,"PageServices/RESTCrud.asmx",c].join("/"),contentType:"application/json; charset=utf-8",type:"POST",data:g,dataType:"json"},i=this.getErrorCallback(a);e.config.api.ajax(h).success(function(b){var c={id:b.d.id};if(b.d.isError===!0){a.callbacks.failure({Message:b.d.errorMessage,CRUD:!0});return}if(b.d.jsonToReturn&&b.d.jsonToReturn.length>0){var e=$.parseJSON(b.d.jsonToReturn);e=d.formatObject(e),_.extend(c,e.data)}a.callbacks.success(c)}).error(i)},executeCrudCommand:function(a,b){var c=this;_.defaults(a.config,{format:"json"});var d={id:a.config.id};_.extend(d,b.$set);var e=c.getUrl(a,"resultInclude"),f=a.config.format,g=c._getFields(a),h=c._getApiConfig(e,f,"convert",g);_.extend(h,{url:e,contentType:"application/json; charset=utf-8",type:"POST",processData:!1,data:JSON.stringify(d),dataType:"json"}),c._executeApiCall(a,"json",h)},find:function(a){this.get(a)},refresh:function(a){this.get(a)},getCompleteCallback:function(a){var b=this,c=function(c){if(a.type==="context"||a.type==="implementationHistory")c.id=a.config.id;if(a.config.nested===!0){var e=b._getNestedObject(a),f=d.header.getFieldName(e),g={id:a.config.id};g[f]=c,c=g}a.callbacks.success(c)};return c},_getArrayConverter:function(a,b){var d=this;return function(e){var f=d.config.api.parseJSON(e);return c[a]({header:b},f)}},_getJsonConverter:function(){var a=this;return function(b){var c=a.config.api.parseJSON(b);return d.formatObject(c)}},_getApiConfig:function(a,b,c,d){var e=this;return{url:a,accepts:{array:"application/x-array"},dataType:b,converters:{"text array":e._getArrayConverter(c,d),"text json":e._getJsonConverter()}}},_getNextPageFields:function(a){var b=a.fields,c=e.getQueryValueFromUrl(a.url,"include");return c&&c.length>0&&(b=d.parseFieldsFromString(c)),b},_executeApiCall:function(a,b,c){var d=this,e=d.getErrorCallback(a),f=d.getCompleteCallback(a),g=null,h=[],i=function(){var a=h.length===0;return a&&f(g),a},j=function(a){for(var b=0,c=a.nextPages.length;b<c;b++){var d=a.nextPages[b];k(d)}},k=function(a){var c=d._getNextPageFields(a),f=d._getApiConfig(a.url,b,"convertArray",c);d.config.api.ajax(f).success(function(b){h=h.concat(b.nextPages||[]);var c=a.holder;_.each(b.data,function(a){c.push(a)}),b.data.getNextPage&&(b.data.getNextPage().holder=a.holder),j(b);var d=_.indexOf(h,a);h.splice(d,1),i()}).error(e)},l=function(b){g=b.data;if(a.name==="find"){f(g);return}h=h.concat(b.nextPages||[]),i(),j(b)};d.config.api.ajax(c).success(l).error(e)},get:function(a){var b=this;_.defaults(a.config,{format:"array"});var c=a.config.nested===!0||!a.config.id?"convertArray":"convert",d=b.getUrl(a),e=a.config.format,f=b._getFields(a),g=b._getApiConfig(d,e,c,f);b._executeApiCall(a,e,g)},turboGet:function(a){this.get(a)},_formIncludes:function(a){var b=[],c=this;return _.each(a,function(a){if(d.header.isSimple(a)){var e=a;a.indexOf("$ref")===0&&(e=a.replace("$ref:","")),b.push(e);return}var f=d.header.getFieldName(a);b.push(f+c._formIncludes(a[f]))}),["[",b.join(","),"]"].join("")},_getQueryOperators:function(){var a=function(a,b){var c=this,d=[];return _.isArray(b)||(b=[b]),_.each(b,function(b){d.push("("+a+" "+c.name+" "+JSON.stringify(b)+")")}),d},b=function(a){return["("+a+" "+this.name+")"]},c=function(a,b){var c=this,d=[];_.isArray(b)||(b=[b]);var e=[];return _(b).each(function(a){e.push(JSON.stringify(a))}),d.push("("+a+" "+c.name+" ("+e.join(",")+"))"),d};return{$in:{name:"in",render:c},$ne:{name:"ne",render:a},$gt:{name:"gt",render:a},$gte:{name:"gte",render:a},$lt:{name:"lt",render:a},$lte:{name:"lte",render:a},$contains:{name:"contains",render:a},$eq:{name:"eq",render:a},$isNull:{name:"is null",render:b},$isNotNull:{name:"is not null",render:b}}},_isQueryValueWithOperator:function(a,b){var c=_(a).keys();if(c.length===0)return!1;var d=b||this._getQueryOperators();return d.hasOwnProperty(c[0])},_formWhere:function(a,b){var c=[],d=this;b=b||"";var e=d._getQueryOperators();return _.each(_(a).keys(),function(f){var g=a[f],h=b+f;if(_.isString(g)||_.isNumber(g)||_.isDate(g)||_.isArray(g)||_.isBoolean(g)||_.isNull(g)){var i=g===null?"$isNull":"$eq";c=c.concat(e[i].render(h,g));return}if(d._isQueryValueWithOperator(g,e)){_.each(_(g).keys(),function(a){c=c.concat(e[a].render(h,g[a]))});return}c.push(d._formWhere(g,f+"."))}),c},_getWhere:function(a){var b=this._formWhere(a);return b.length===0?"":"&where="+encodeURIComponent(b.join(" and "))},_getNestedObject:function(a){var b=null;return _.each(a.config.fields,function(a){d.header.isSimple(a)||(b=a)}),b},_getFields:function(a){if(a.config.nested!==!0)return a.config.fields;var b=this._getNestedObject(a),c=d.header.getFieldName(b);return b[c]},_getOrderBy:function(a){return!a.config.$orderBy||a.config.$orderBy===""?"":"&orderBy="+a.config.$orderBy},_getOrderByDesc:function(a){return!a.config.$orderByDesc||a.config.$orderByDesc===""?"":"&orderByDesc="+a.config.$orderByDesc},getUrl:function(a,b){var c=this,e={$skip:0,$limit:999,$query:{}};_.defaults(a.config,e);if(a.type==="context")return a.config.format="json",[c.config.path,"context.asmx","?ids="+a.config.id].join("/");if(a.type==="implementationHistory")return a.config.format="json",[c.config.appPath,"Reports/ImplementationHistory.ashx?id="+a.config.id+"&"+(new Date).valueOf()].join("/");var f=c.config.types[a.type]||{resource:a.type},g=a.config.fields,h=[c.config.path,f.resource+".asmx",a.config.id].join("/");if(a.config.nested===!0){var i=c._getNestedObject(a),j=d.header.getFieldName(i);g=i[j],h=[h,j].join("/")}return a.name&&a.name.indexOf("remove")>=0?h:(h=[h,"?skip=",a.config.$skip,"&take=",a.config.$limit,"&",b?b:"include","=",c._formIncludes(g),a.name==="find"||a.name==="turboGet"?c._getWhere(a.config.$query):"",c._getOrderBy(a),c._getOrderByDesc(a)].join(""),h)}});return f}),define("tau/rules/auto-include-beforeSave",["Underscore"],function(_){return{"auto include beforeSave":function(a,b){var c=this,d=a.data.obj;for(var e=0;e<b.fields.length;e++){var f=b.fields[e];(c.store.isPropertyInitialized(d.id,d.type,_.getFieldName(f))||b.force)&&_.mergeFields(a.data.cmd.config.fields,[f])}}}}),define("tau/rules/core",["Underscore","tau/core/class","tau/rules/auto-include-beforeSave"],function(_,a,b){return a.extend({init:function(a){var c=this;c.store=a.store||{},a.rulesImpl=a.rulesImpl||{},_.extend(c,b),_.extend(c,{name:"rules engine"}),_(a.rulesImpl).each(function(a){_.extend(c,a)}),c.register(a.rules||[])},register:function(a){var c=this;_.isArray(a)||(a=[a]),_(a).each(function(a){_.defaults(a,{name:_(b).keys()[0],fields:[],changes:[]});if(!a.hasOwnProperty("type"))throw"type should be configured for rule";if(a.fields.length===0)return;_.each(a.changes,function(b){var d=function(b){c[a.name](b,a)},e=a.name.split(" ");c.store.on({eventName:e[e.length-1],type:a.type,listener:c,hasChanges:[b]},d)})})},registerRule:function(a){var b=this;_.defaults(a,{fields:[],changes:[]});if(!a.hasOwnProperty("name"))throw'"name" field should be configured for rule';if(!a.hasOwnProperty("type"))throw'"type" field should be configured for rule';if(!b.hasOwnProperty(a.name))throw"unknown rule name ["+a.name+"]";b[a.name].call(b,a)},destroy:function(){var a=this.store;delete this.store,a.unbind(this)}})}),define("tau/rules/rule.auto-include-before-save",["Underscore"],function(_){var a=function(a,b){var c=this,d=a.data.obj;for(var e=0;e<b.fields.length;e++){var f=b.fields[e];(d.id&&c.store.isPropertyInitialized(d.id,d.type,_.getFieldName(f))||b.force)&&_.mergeFields(a.data.cmd.config.fields,[f])}};return{"auto-include-before-save":function(b){var c=this;if(b.fields.length===0)return;_.each(b.changes,function(d){var e=[d],f=function(d){a.call(c,d,b)};c.store.on({eventName:"beforeSave",type:b.type,listener:c,hasChanges:e},f)})}}}),define("tau/rules/rule.auto-action-after-save",["Underscore"],function(_){var a=function(a,b){var c=this,d=a.data,e={store:c.store,data:d};b.action(e)};return{"auto-action-after-save":function(b){var c=this,d=function(d){a.call(c,d,b)},e={eventName:"afterSave",type:b.type,listener:c};b.hasOwnProperty("changes")&&b.changes.length&&(e.hasChanges=[b.changes.join("|")]),c.store.on(e,d)}}}),define("tau/rules/rule.auto-include-before-remove",["Underscore"],function(_){var a=function(a,b){var c=this,d=a.data.obj;for(var e=0;e<b.fields.length;e++){var f=b.fields[e];_.mergeFields(a.data.cmd.config.fields,[f])}};return{"auto-include-before-remove":function(b){var c=this;if(b.fields.length===0)return;var d=function(d){a.call(c,d,b)};c.store.on({eventName:"beforeRemove",type:b.type,listener:c},d)}}}),define("tau/store/types.targetprocess.generated",["tau/store/types"],function(a){return[{name:"context"},{name:"process",parent:null,resource:"processes",aliases:["Process","processes","Processes"],fields:["id","name"],simpleFields:["id","name","description","entityStates-count","projects-count","practices-count","customFields-count"],refs:{entityStates:{list:!0,name:"entityState",multiplicity:"one",relationProperty:"process"},projects:{list:!0,name:"project",multiplicity:"one",relationProperty:"process"},practices:{list:!0,name:"practice",multiplicity:"",relationProperty:""},customFields:{list:!0,name:"customField",multiplicity:"one",relationProperty:"process"}}},{name:"practice",parent:null,resource:"practices",aliases:["Practice","practices","Practices"],fields:["id","name"],simpleFields:["id","name","description","processes-count"],refs:{processes:{list:!0,name:"process",multiplicity:"",relationProperty:""}}},{name:"entityType",parent:null,resource:"entityTypes",aliases:["EntityType","entityTypes","EntityTypes"],fields:["id","name"],simpleFields:["id","name","isExtendable","entityStates-count"],refs:{entityStates:{list:!0,name:"entityState",multiplicity:"one",relationProperty:"entityType"}}},{name:"priority",parent:null,resource:"priorities",aliases:["Priority","priorities","Priorities"],fields:["id","name"],simpleFields:["id","name","importance","isDefault"],refs:{entityType:{name:"entityType",multiplicity:"",relationProperty:"priorities"}}},{name:"severity",parent:null,resource:"severities",aliases:["Severity","severities","Severities"],fields:["id","name"],simpleFields:["id","name","importance","isDefault"],refs:{}},{name:"entityState",parent:null,resource:"entityStates",aliases:["EntityState","entityStates","EntityStates"],fields:["id","name"],simpleFields:["id","name","isInitial","isFinal","isPlanned","isCommentRequired","numericPriority","nextStates-count","previousStates-count"],refs:{role:{name:"role",multiplicity:"",relationProperty:"entityStates"},nextStates:{list:!0,name:"entityState",multiplicity:"",relationProperty:""},previousStates:{list:!0,name:"entityState",multiplicity:"",relationProperty:""},entityType:{name:"entityType",multiplicity:"",relationProperty:"entityStates"},process:{name:"process",multiplicity:"",relationProperty:"entityStates"}}},{name:"general",parent:null,resource:"generals",aliases:["General","generals","Generals"],fields:["id","name"],simpleFields:["id","name","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","comments-count","messages-count","relatedRequests-count","attachments-count"],refs:{entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},project:{name:"project",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},relatedRequests:{list:!0,name:"request",multiplicity:"",relationProperty:""},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"assignable",parent:"general",resource:"assignables",aliases:["Assignable","assignables","Assignables"],fields:["id","name"],simpleFields:["id","effort","effortCompleted","effortToDo","timeSpent","timeRemain","leadTime","cycleTime","name","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","assignedUser-count","assignments-count","impediments-count","times-count","roleEfforts-count","revisions-count","comments-count","messages-count","relatedRequests-count","attachments-count"],refs:{assignedUser:{list:!0,name:"generalUser",multiplicity:"",relationProperty:""},release:{name:"release",multiplicity:"",relationProperty:"assignables"},iteration:{name:"iteration",multiplicity:"",relationProperty:"assignables"},teamIteration:{name:"teamIteration",multiplicity:"",relationProperty:"assignables"},team:{name:"team",multiplicity:"",relationProperty:"assignables"},priority:{name:"priority",multiplicity:"",relationProperty:"assignables"},entityState:{name:"entityState",multiplicity:"",relationProperty:"assignables"},assignments:{list:!0,name:"assignment",multiplicity:"one",relationProperty:"assignable"},impediments:{list:!0,name:"impediment",multiplicity:"zeroOrOne",relationProperty:"assignable"},times:{list:!0,name:"time",multiplicity:"zeroOrOne",relationProperty:"assignable"},roleEfforts:{list:!0,name:"roleEffort",multiplicity:"one",relationProperty:"assignable"},revisions:{list:!0,name:"revision",multiplicity:"",relationProperty:""},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},project:{name:"project",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},relatedRequests:{list:!0,name:"request",multiplicity:"",relationProperty:""},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"generalUser",parent:null,resource:"generalUsers",aliases:["GeneralUser","generalUsers","GeneralUsers"],fields:["id","firstName","lastName"],simpleFields:["id","firstName","lastName","email","login","createDate","modifyDate","deleteDate","isActive","isAdministrator","kind","password","assignables-count","comments-count","requests-count"],refs:{assignables:{list:!0,name:"assignable",multiplicity:"",relationProperty:""},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"owner"},requests:{list:!0,name:"request",multiplicity:"",relationProperty:""}}},{name:"user",parent:"generalUser",resource:"users",aliases:["User","users","Users"],fields:["id","firstName","lastName"],simpleFields:["id","weeklyAvailableHours","currentAllocation","currentAvailableHours","availableFrom","availableFutureAllocation","availableFutureHours","isObserver","firstName","lastName","email","login","createDate","modifyDate","deleteDate","isActive","isAdministrator","kind","password","times-count","impediments-count","customActivities-count","revisions-count","teamMembers-count","assignables-count","comments-count","requests-count"],refs:{role:{name:"role",multiplicity:"",relationProperty:""},times:{list:!0,name:"time",multiplicity:"one",relationProperty:"user"},impediments:{list:!0,name:"impediment",multiplicity:"zeroOrOne",relationProperty:"responsible"},customActivities:{list:!0,name:"customActivity",multiplicity:"one",relationProperty:"user"},revisions:{list:!0,name:"revision",multiplicity:"one",relationProperty:"author"},teamMembers:{list:!0,name:"teamMember",multiplicity:"one",relationProperty:"user"},assignables:{list:!0,name:"assignable",multiplicity:"",relationProperty:""},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"owner"},requests:{list:!0,name:"request",multiplicity:"",relationProperty:""}}},{name:"requester",parent:"generalUser",resource:"requesters",aliases:["Requester","requesters","Requesters"],fields:["id","firstName","lastName"],simpleFields:["id","phone","notes","sourceType","firstName","lastName","email","login","createDate","modifyDate","deleteDate","isActive","isAdministrator","kind","password","assignables-count","comments-count","requests-count"],refs:{company:{name:"company",multiplicity:"",relationProperty:""},assignables:{list:!0,name:"assignable",multiplicity:"",relationProperty:""},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"owner"},requests:{list:!0,name:"request",multiplicity:"",relationProperty:""}}},{name:"project",parent:"general",resource:"projects",aliases:["Project","projects","Projects"],fields:["id","name"],simpleFields:["id","isActive","isProduct","abbreviation","mailReplyAddress","name","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","generals-count","features-count","releases-count","iterations-count","userStories-count","tasks-count","bugs-count","testCases-count","testPlans-count","builds-count","times-count","revisions-count","customActivities-count","projectMembers-count","teamProjects-count","requests-count","testPlanRuns-count","comments-count","messages-count","relatedRequests-count","attachments-count"],refs:{generals:{list:!0,name:"general",multiplicity:"one",relationProperty:"project"},program:{name:"program",multiplicity:"",relationProperty:"projects"},process:{name:"process",multiplicity:"",relationProperty:"projects"},features:{list:!0,name:"feature",multiplicity:"one",relationProperty:"project"},releases:{list:!0,name:"release",multiplicity:"one",relationProperty:"project"},iterations:{list:!0,name:"iteration",multiplicity:"one",relationProperty:"project"},userStories:{list:!0,name:"userStory",multiplicity:"one",relationProperty:"project"},tasks:{list:!0,name:"task",multiplicity:"one",relationProperty:"project"},bugs:{list:!0,name:"bug",multiplicity:"one",relationProperty:"project"},testCases:{list:!0,name:"testCase",multiplicity:"one",relationProperty:"project"},testPlans:{list:!0,name:"testPlan",multiplicity:"one",relationProperty:"project"},builds:{list:!0,name:"build",multiplicity:"one",relationProperty:"project"},times:{list:!0,name:"time",multiplicity:"one",relationProperty:"project"},revisions:{list:!0,name:"revision",multiplicity:"one",relationProperty:"project"},customActivities:{list:!0,name:"customActivity",multiplicity:"one",relationProperty:"project"},company:{name:"company",multiplicity:"",relationProperty:"projects"},projectMembers:{list:!0,name:"projectMember",multiplicity:"one",relationProperty:"project"},teamProjects:{list:!0,name:"teamProject",multiplicity:"one",relationProperty:"project"},requests:{list:!0,name:"request",multiplicity:"one",relationProperty:"project"},testPlanRuns:{list:!0,name:"testPlanRun",multiplicity:"one",relationProperty:"project"},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},project:{name:"project",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},relatedRequests:{list:!0,name:"request",multiplicity:"",relationProperty:""},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"program",parent:"general",resource:"programs",aliases:["Program","programs","Programs"],fields:["id","name"],simpleFields:["id","name","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","projects-count","comments-count","messages-count","relatedRequests-count","attachments-count"],refs:{projects:{list:!0,name:"project",multiplicity:"zeroOrOne",relationProperty:"program"},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},project:{name:"project",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},relatedRequests:{list:!0,name:"request",multiplicity:"",relationProperty:""},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"release",parent:"general",resource:"releases",aliases:["Release","releases","Releases"],fields:["id","name"],simpleFields:["id","name","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","iterations-count","assignables-count","features-count","userStories-count","tasks-count","bugs-count","testPlanRuns-count","requests-count","builds-count","comments-count","messages-count","relatedRequests-count","attachments-count"],refs:{project:{name:"project",multiplicity:"",relationProperty:"releases"},iterations:{list:!0,name:"iteration",multiplicity:"one",relationProperty:"release"},assignables:{list:!0,name:"assignable",multiplicity:"zeroOrOne",relationProperty:"release"},features:{list:!0,name:"feature",multiplicity:"zeroOrOne",relationProperty:"release"},userStories:{list:!0,name:"userStory",multiplicity:"zeroOrOne",relationProperty:"release"},tasks:{list:!0,name:"task",multiplicity:"zeroOrOne",relationProperty:"release"},bugs:{list:!0,name:"bug",multiplicity:"zeroOrOne",relationProperty:"release"},testPlanRuns:{list:!0,name:"testPlanRun",multiplicity:"zeroOrOne",relationProperty:"release"},requests:{list:!0,name:"request",multiplicity:"zeroOrOne",relationProperty:"release"},builds:{list:!0,name:"build",multiplicity:"one",relationProperty:"release"},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},relatedRequests:{list:!0,name:"request",multiplicity:"",relationProperty:""},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"iteration",parent:"general",resource:"iterations",aliases:["Iteration","iterations","Iterations"],fields:["id","name"],simpleFields:["id","velocity","duration","name","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","assignables-count","userStories-count","tasks-count","bugs-count","testPlanRuns-count","requests-count","builds-count","comments-count","messages-count","relatedRequests-count","attachments-count"],refs:{project:{name:"project",multiplicity:"",relationProperty:"iterations"},release:{name:"release",multiplicity:"",relationProperty:"iterations"},assignables:{list:!0,name:"assignable",multiplicity:"zeroOrOne",relationProperty:"iteration"},userStories:{list:!0,name:"userStory",multiplicity:"zeroOrOne",relationProperty:"iteration"},tasks:{list:!0,name:"task",multiplicity:"zeroOrOne",relationProperty:"iteration"},bugs:{list:!0,name:"bug",multiplicity:"zeroOrOne",relationProperty:"iteration"},testPlanRuns:{list:!0,name:"testPlanRun",multiplicity:"zeroOrOne",relationProperty:"iteration"},requests:{list:!0,name:"request",multiplicity:"zeroOrOne",relationProperty:"iteration"},builds:{list:!0,name:"build",multiplicity:"zeroOrOne",relationProperty:"iteration"},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},relatedRequests:{list:!0,name:"request",multiplicity:"",relationProperty:""},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"teamIteration",parent:"general",resource:"teamIterations",aliases:["TeamIteration","teamIterations","TeamIterations"],fields:["id","name"],simpleFields:["id","velocity","duration","name","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","assignables-count","comments-count","messages-count","relatedRequests-count","attachments-count"],refs:{team:{name:"team",multiplicity:"",relationProperty:"teamIterations"},assignables:{list:!0,name:"assignable",multiplicity:"zeroOrOne",relationProperty:"teamIteration"},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},project:{name:"project",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},relatedRequests:{list:!0,name:"request",multiplicity:"",relationProperty:""},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"team",parent:"general",resource:"teams",aliases:["Team","teams","Teams"],fields:["id","name"],simpleFields:["id","name","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","teamMembers-count","teamProjects-count","assignables-count","teamIterations-count","comments-count","messages-count","relatedRequests-count","attachments-count"],refs:{teamMembers:{list:!0,name:"teamMember",multiplicity:"one",relationProperty:"team"},teamProjects:{list:!0,name:"teamProject",multiplicity:"one",relationProperty:"team"},assignables:{list:!0,name:"assignable",multiplicity:"zeroOrOne",relationProperty:"team"},teamIterations:{list:!0,name:"teamIteration",multiplicity:"one",relationProperty:"team"},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},project:{name:"project",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},relatedRequests:{list:!0,name:"request",multiplicity:"",relationProperty:""},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"feature",parent:"assignable",resource:"features",aliases:["Feature","features","Features"],fields:["id","name"],simpleFields:["id","initialEstimate","effort","effortCompleted","effortToDo","timeSpent","timeRemain","leadTime","cycleTime","name","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","userStories-count","requests-count","assignedUser-count","assignments-count","impediments-count","times-count","roleEfforts-count","revisions-count","comments-count","messages-count","relatedRequests-count","attachments-count"],refs:{project:{name:"project",multiplicity:"",relationProperty:"features"},release:{name:"release",multiplicity:"",relationProperty:"features"},userStories:{list:!0,name:"userStory",multiplicity:"zeroOrOne",relationProperty:"feature"},requests:{list:!0,name:"request",multiplicity:"",relationProperty:""},assignedUser:{list:!0,name:"generalUser",multiplicity:"",relationProperty:""},iteration:{name:"iteration",multiplicity:"",relationProperty:"assignables"},teamIteration:{name:"teamIteration",multiplicity:"",relationProperty:"assignables"},team:{name:"team",multiplicity:"",relationProperty:"assignables"},priority:{name:"priority",multiplicity:"",relationProperty:"assignables"},entityState:{name:"entityState",multiplicity:"",relationProperty:"assignables"},assignments:{list:!0,name:"assignment",multiplicity:"one",relationProperty:"assignable"},impediments:{list:!0,name:"impediment",multiplicity:"zeroOrOne",relationProperty:"assignable"},times:{list:!0,name:"time",multiplicity:"zeroOrOne",relationProperty:"assignable"},roleEfforts:{list:!0,name:"roleEffort",multiplicity:"one",relationProperty:"assignable"},revisions:{list:!0,name:"revision",multiplicity:"",relationProperty:""},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},relatedRequests:{list:!0,name:"request",multiplicity:"",relationProperty:""},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"userStory",parent:"assignable",resource:"userStories",aliases:["UserStory","userStories","UserStories"],fields:["id","name"],simpleFields:["id","initialEstimate","effort","effortCompleted","effortToDo","timeSpent","timeRemain","leadTime","cycleTime","name","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","tasks-count","bugs-count","testCases-count","times-count","requests-count","assignedUser-count","assignments-count","impediments-count","times-count","roleEfforts-count","revisions-count","comments-count","messages-count","relatedRequests-count","attachments-count"],refs:{project:{name:"project",multiplicity:"",relationProperty:"userStories"},feature:{name:"feature",multiplicity:"",relationProperty:"userStories"},tasks:{list:!0,name:"task",multiplicity:"zeroOrOne",relationProperty:"userStory"},bugs:{list:!0,name:"bug",multiplicity:"zeroOrOne",relationProperty:"userStory"},testCases:{list:!0,name:"testCase",multiplicity:"zeroOrOne",relationProperty:"userStory"},times:{list:!0,name:"time",multiplicity:"zeroOrOne",relationProperty:"userStory"},release:{name:"release",multiplicity:"",relationProperty:"userStories"},iteration:{name:"iteration",multiplicity:"",relationProperty:"userStories"},requests:{list:!0,name:"request",multiplicity:"",relationProperty:""},assignedUser:{list:!0,name:"generalUser",multiplicity:"",relationProperty:""},teamIteration:{name:"teamIteration",multiplicity:"",relationProperty:"assignables"},team:{name:"team",multiplicity:"",relationProperty:"assignables"},priority:{name:"priority",multiplicity:"",relationProperty:"assignables"},entityState:{name:"entityState",multiplicity:"",relationProperty:"assignables"},assignments:{list:!0,name:"assignment",multiplicity:"one",relationProperty:"assignable"},impediments:{list:!0,name:"impediment",multiplicity:"zeroOrOne",relationProperty:"assignable"},roleEfforts:{list:!0,name:"roleEffort",multiplicity:"one",relationProperty:"assignable"},revisions:{list:!0,name:"revision",multiplicity:"",relationProperty:""},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},relatedRequests:{list:!0,name:"request",multiplicity:"",relationProperty:""},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"task",parent:"assignable",resource:"tasks",aliases:["Task","tasks","Tasks"],fields:["id","name"],simpleFields:["id","effort","effortCompleted","effortToDo","timeSpent","timeRemain","leadTime","cycleTime","name","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","times-count","requests-count","assignedUser-count","assignments-count","impediments-count","times-count","roleEfforts-count","revisions-count","comments-count","messages-count","relatedRequests-count","attachments-count"],refs:{project:{name:"project",multiplicity:"",relationProperty:"tasks"},userStory:{name:"userStory",multiplicity:"",relationProperty:"tasks"},times:{list:!0,name:"time",multiplicity:"zeroOrOne",relationProperty:"task"},release:{name:"release",multiplicity:"",relationProperty:"tasks"},iteration:{name:"iteration",multiplicity:"",relationProperty:"tasks"},requests:{list:!0,name:"request",multiplicity:"",relationProperty:""},assignedUser:{list:!0,name:"generalUser",multiplicity:"",relationProperty:""},teamIteration:{name:"teamIteration",multiplicity:"",relationProperty:"assignables"},team:{name:"team",multiplicity:"",relationProperty:"assignables"},priority:{name:"priority",multiplicity:"",relationProperty:"assignables"},entityState:{name:"entityState",multiplicity:"",relationProperty:"assignables"},assignments:{list:!0,name:"assignment",multiplicity:"one",relationProperty:"assignable"},impediments:{list:!0,name:"impediment",multiplicity:"zeroOrOne",relationProperty:"assignable"},roleEfforts:{list:!0,name:"roleEffort",multiplicity:"one",relationProperty:"assignable"},revisions:{list:!0,name:"revision",multiplicity:"",relationProperty:""},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},relatedRequests:{list:!0,name:"request",multiplicity:"",relationProperty:""},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"bug",parent:"assignable",resource:"bugs",aliases:["Bug","bugs","Bugs"],fields:["id","name"],simpleFields:["id","effort","effortCompleted","effortToDo","timeSpent","timeRemain","leadTime","cycleTime","name","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","times-count","requests-count","assignedUser-count","assignments-count","impediments-count","times-count","roleEfforts-count","revisions-count","comments-count","messages-count","relatedRequests-count","attachments-count"],refs:{project:{name:"project",multiplicity:"",relationProperty:"bugs"},build:{name:"build",multiplicity:"",relationProperty:"bugs"},userStory:{name:"userStory",multiplicity:"",relationProperty:"bugs"},severity:{name:"severity",multiplicity:"",relationProperty:"bugs"},times:{list:!0,name:"time",multiplicity:"zeroOrOne",relationProperty:"bug"},release:{name:"release",multiplicity:"",relationProperty:"bugs"},iteration:{name:"iteration",multiplicity:"",relationProperty:"bugs"},requests:{list:!0,name:"request",multiplicity:"",relationProperty:""},assignedUser:{list:!0,name:"generalUser",multiplicity:"",relationProperty:""},teamIteration:{name:"teamIteration",multiplicity:"",relationProperty:"assignables"},team:{name:"team",multiplicity:"",relationProperty:"assignables"},priority:{name:"priority",multiplicity:"",relationProperty:"assignables"},entityState:{name:"entityState",multiplicity:"",relationProperty:"assignables"},assignments:{list:!0,name:"assignment",multiplicity:"one",relationProperty:"assignable"},impediments:{list:!0,name:"impediment",multiplicity:"zeroOrOne",relationProperty:"assignable"},roleEfforts:{list:!0,name:"roleEffort",multiplicity:"one",relationProperty:"assignable"},revisions:{list:!0,name:"revision",multiplicity:"",relationProperty:""},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},relatedRequests:{list:!0,name:"request",multiplicity:"",relationProperty:""},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"testCase",parent:"general",resource:"testCases",aliases:["TestCase","testCases","TestCases"],fields:["id","name"],simpleFields:["id","steps","success","lastStatus","lastFailureComment","lastRunDate","name","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","testPlans-count","testCaseRuns-count","comments-count","messages-count","relatedRequests-count","attachments-count"],refs:{project:{name:"project",multiplicity:"",relationProperty:"testCases"},userStory:{name:"userStory",multiplicity:"",relationProperty:"testCases"},priority:{name:"priority",multiplicity:"",relationProperty:"testCases"},testPlans:{list:!0,name:"testPlan",multiplicity:"",relationProperty:""},testCaseRuns:{list:!0,name:"testCaseRun",multiplicity:"",relationProperty:""},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},relatedRequests:{list:!0,name:"request",multiplicity:"",relationProperty:""},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"testCaseRun",parent:null,resource:"testCaseRuns",aliases:["TestCaseRun","testCaseRuns","TestCaseRuns"],fields:["id"],simpleFields:["id","executed","passed","comment","runDate","testCases-count"],refs:{testPlanRun:{name:"testPlanRun",multiplicity:"",relationProperty:"testCaseRuns"},testCases:{list:!0,name:"testCase",multiplicity:"",relationProperty:""}}},{name:"testPlan",parent:"general",resource:"testPlans",aliases:["TestPlan","testPlans","TestPlans"],fields:["id","name"],simpleFields:["id","initialEstimate","name","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","testCases-count","testPlanRuns-count","comments-count","messages-count","relatedRequests-count","attachments-count"],refs:{project:{name:"project",multiplicity:"",relationProperty:"testPlans"},testCases:{list:!0,name:"testCase",multiplicity:"",relationProperty:""},testPlanRuns:{list:!0,name:"testPlanRun",multiplicity:"one",relationProperty:"testPlan"},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},relatedRequests:{list:!0,name:"request",multiplicity:"",relationProperty:""},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"testPlanRun",parent:"assignable",resource:"testPlanRuns",aliases:["TestPlanRun","testPlanRuns","TestPlanRuns"],fields:["id","name"],simpleFields:["id","passedCount","failedCount","notRunCount","effort","effortCompleted","effortToDo","timeSpent","timeRemain","leadTime","cycleTime","name","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","testCaseRuns-count","assignedUser-count","assignments-count","impediments-count","times-count","roleEfforts-count","revisions-count","comments-count","messages-count","relatedRequests-count","attachments-count"],refs:{release:{name:"release",multiplicity:"",relationProperty:"testPlanRuns"},build:{name:"build",multiplicity:"",relationProperty:"testPlanRuns"},iteration:{name:"iteration",multiplicity:"",relationProperty:"testPlanRuns"},testPlan:{name:"testPlan",multiplicity:"",relationProperty:"testPlanRuns"},project:{name:"project",multiplicity:"",relationProperty:"testPlanRuns"},testCaseRuns:{list:!0,name:"testCaseRun",multiplicity:"one",relationProperty:"testPlanRun"},assignedUser:{list:!0,name:"generalUser",multiplicity:"",relationProperty:""},teamIteration:{name:"teamIteration",multiplicity:"",relationProperty:"assignables"},team:{name:"team",multiplicity:"",relationProperty:"assignables"},priority:{name:"priority",multiplicity:"",relationProperty:"assignables"},entityState:{name:"entityState",multiplicity:"",relationProperty:"assignables"},assignments:{list:!0,name:"assignment",multiplicity:"one",relationProperty:"assignable"},impediments:{list:!0,name:"impediment",multiplicity:"zeroOrOne",relationProperty:"assignable"},times:{list:!0,name:"time",multiplicity:"zeroOrOne",relationProperty:"assignable"},roleEfforts:{list:!0,name:"roleEffort",multiplicity:"one",relationProperty:"assignable"},revisions:{list:!0,name:"revision",multiplicity:"",relationProperty:""},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},relatedRequests:{list:!0,name:"request",multiplicity:"",relationProperty:""},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"time",parent:null,resource:"times",aliases:["Time","times","Times"],fields:["id"],simpleFields:["id","description","spent","remain","isEstimation","date","createDate"],refs:{project:{name:"project",multiplicity:"",relationProperty:"times"},user:{name:"user",multiplicity:"",relationProperty:"times"},assignable:{name:"assignable",multiplicity:"",relationProperty:"times"},role:{name:"role",multiplicity:"",relationProperty:"times"},customActivity:{name:"customActivity",multiplicity:"",relationProperty:"times"}}},{name:"revision",parent:null,resource:"revisions",aliases:["Revision","revisions","Revisions"],fields:["id"],simpleFields:["id","sourceControlId","description","commitDate","revisionFiles-count","assignables-count"],refs:{project:{name:"project",multiplicity:"",relationProperty:"revisions"},revisionFiles:{list:!0,name:"revisionFile",multiplicity:"one",relationProperty:"revision"},author:{name:"user",multiplicity:"",relationProperty:"revisions"},assignables:{list:!0,name:"assignable",multiplicity:"",relationProperty:""}}},{name:"revisionFile",parent:null,resource:"revisionFiles",aliases:["RevisionFile","revisionFiles","RevisionFiles"],fields:["id","fileName"],simpleFields:["id","fileName","fileAction"],refs:{revision:{name:"revision",multiplicity:"",relationProperty:"revisionFiles"}}},{name:"customActivity",parent:null,resource:"customActivities",aliases:["CustomActivity","customActivities","CustomActivities"],fields:["id","name"],simpleFields:["id","name","created","estimate","times-count"],refs:{project:{name:"project",multiplicity:"",relationProperty:"customActivities"},user:{name:"user",multiplicity:"",relationProperty:"customActivities"},times:{list:!0,name:"time",multiplicity:"zeroOrOne",relationProperty:"customActivity"}}},{name:"request",parent:"assignable",resource:"requests",aliases:["Request","requests","Requests"],fields:["id","name"],simpleFields:["id","sourceType","isReplied","isPrivate","effort","effortCompleted","effortToDo","timeSpent","timeRemain","leadTime","cycleTime","name","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","tasks-count","features-count","userStories-count","bugs-count","requesters-count","relatedEntities-count","assignedUser-count","assignments-count","impediments-count","times-count","roleEfforts-count","revisions-count","comments-count","messages-count","relatedRequests-count","attachments-count"],refs:{project:{name:"project",multiplicity:"",relationProperty:"requests"},release:{name:"release",multiplicity:"",relationProperty:"requests"},iteration:{name:"iteration",multiplicity:"",relationProperty:"requests"},requestType:{name:"requestType",multiplicity:"",relationProperty:"requests"},tasks:{list:!0,name:"task",multiplicity:"",relationProperty:""},features:{list:!0,name:"feature",multiplicity:"",relationProperty:""},userStories:{list:!0,name:"userStory",multiplicity:"",relationProperty:""},bugs:{list:!0,name:"bug",multiplicity:"",relationProperty:""},requesters:{list:!0,name:"generalUser",multiplicity:"",relationProperty:""},relatedEntities:{list:!0,name:"general",multiplicity:"",relationProperty:""},assignedUser:{list:!0,name:"generalUser",multiplicity:"",relationProperty:""},teamIteration:{name:"teamIteration",multiplicity:"",relationProperty:"assignables"},team:{name:"team",multiplicity:"",relationProperty:"assignables"},priority:{name:"priority",multiplicity:"",relationProperty:"assignables"},entityState:{name:"entityState",multiplicity:"",relationProperty:"assignables"},assignments:{list:!0,name:"assignment",multiplicity:"one",relationProperty:"assignable"},impediments:{list:!0,name:"impediment",multiplicity:"zeroOrOne",relationProperty:"assignable"},times:{list:!0,name:"time",multiplicity:"zeroOrOne",relationProperty:"assignable"},roleEfforts:{list:!0,name:"roleEffort",multiplicity:"one",relationProperty:"assignable"},revisions:{list:!0,name:"revision",multiplicity:"",relationProperty:""},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},relatedRequests:{list:!0,name:"request",multiplicity:"",relationProperty:""},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"requestType",parent:null,resource:"requestTypes",aliases:["RequestType","requestTypes","RequestTypes"],fields:["id","name"],simpleFields:["id","name","requests-count"],refs:{requests:{list:!0,name:"request",multiplicity:"one",relationProperty:"requestType"}}},{name:"build",parent:"general",resource:"builds",aliases:["Build","builds","Builds"],fields:["id","name"],simpleFields:["id","buildDate","name","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","bugs-count","testPlanRuns-count","comments-count","messages-count","relatedRequests-count","attachments-count"],refs:{project:{name:"project",multiplicity:"",relationProperty:"builds"},release:{name:"release",multiplicity:"",relationProperty:"builds"},iteration:{name:"iteration",multiplicity:"",relationProperty:"builds"},bugs:{list:!0,name:"bug",multiplicity:"zeroOrOne",relationProperty:"build"},testPlanRuns:{list:!0,name:"testPlanRun",multiplicity:"zeroOrOne",relationProperty:"build"},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},relatedRequests:{list:!0,name:"request",multiplicity:"",relationProperty:""},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"comment",parent:null,resource:"comments",aliases:["Comment","comments","Comments"],fields:["id"],simpleFields:["id","description","parentId","createDate"],refs:{general:{name:"general",multiplicity:"",relationProperty:"comments"},owner:{name:"generalUser",multiplicity:"",relationProperty:"comments"}}},{name:"assignment",parent:null,resource:"assignments",aliases:["Assignment","assignments","Assignments"],fields:["id"],simpleFields:["id"],refs:{assignable:{name:"assignable",multiplicity:"",relationProperty:"assignments"},generalUser:{name:"user",multiplicity:"",relationProperty:"assignments"},role:{name:"role",multiplicity:"",relationProperty:"assignments"}}},{name:"role",parent:null,resource:"roles",aliases:["Role","roles","Roles"],fields:["id","name"],simpleFields:["id","name","isPair","hasEffort","roleEfforts-count","entityStates-count"],refs:{roleEfforts:{list:!0,name:"roleEffort",multiplicity:"one",relationProperty:"role"},entityStates:{list:!0,name:"entityState",multiplicity:"one",relationProperty:"role"}}},{name:"impediment",parent:"general",resource:"impediments",aliases:["Impediment","impediments","Impediments"],fields:["id","name"],simpleFields:["id","isPrivate","name","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","comments-count","messages-count","relatedRequests-count","attachments-count"],refs:{assignable:{name:"assignable",multiplicity:"",relationProperty:"impediments"},entityState:{name:"entityState",multiplicity:"",relationProperty:"impediments"},priority:{name:"priority",multiplicity:"",relationProperty:"impediments"},responsible:{name:"user",multiplicity:"",relationProperty:"impediments"},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},project:{name:"project",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},relatedRequests:{list:!0,name:"request",multiplicity:"",relationProperty:""},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"company",parent:null,resource:"companies",aliases:["Company","companies","Companies"],fields:["id","name"],simpleFields:["id","name","url","description","projects-count"],refs:{projects:{list:!0,name:"project",multiplicity:"zeroOrOne",relationProperty:"company"}}},{name:"roleEffort",parent:null,resource:"roleEfforts",aliases:["RoleEffort","roleEfforts","RoleEfforts"],fields:["id"],simpleFields:["id","initialEstimate","effort","effortCompleted","effortToDo","timeSpent","timeRemain"],refs:{assignable:{name:"assignable",multiplicity:"",relationProperty:"roleEfforts"},role:{name:"role",multiplicity:"",relationProperty:"roleEfforts"}}},{name:"projectMember",parent:null,resource:"projectMembers",aliases:["ProjectMember","projectMembers","ProjectMembers"],fields:["id"],simpleFields:["id","weeklyAvailableHours","membershipStartDate","membershipEndDate","allocation"],refs:{project:{name:"project",multiplicity:"",relationProperty:"projectMembers"},user:{name:"user",multiplicity:"",relationProperty:""},role:{name:"role",multiplicity:"",relationProperty:""}}},{name:"teamMember",parent:null,resource:"teamMembers",aliases:["TeamMember","teamMembers","TeamMembers"],fields:["id"],simpleFields:["id","startDate","endDate"],refs:{team:{name:"team",multiplicity:"",relationProperty:"teamMembers"},user:{name:"user",multiplicity:"",relationProperty:"teamMembers"},role:{name:"role",multiplicity:"",relationProperty:""}}},{name:"teamProject",parent:null,resource:"teamProjects",aliases:["TeamProject","teamProjects","TeamProjects"],fields:["id"],simpleFields:["id","startDate","endDate"],refs:{team:{name:"team",multiplicity:"",relationProperty:"teamProjects"},project:{name:"project",multiplicity:"",relationProperty:"teamProjects"}}},{name:"message",parent:null,resource:"messages",aliases:["Message","messages","Messages"],fields:["id"],simpleFields:["id","subject","recipients","body","isRead","isProcessed","createDate","sendDate","messageType","contentType","generals-count","attachments-count"],refs:{from:{name:"generalUser",multiplicity:"",relationProperty:"messagesFrom"},to:{name:"generalUser",multiplicity:"",relationProperty:"messagesTo"},messageUid:{name:"messageUid",multiplicity:"",relationProperty:""},generals:{list:!0,name:"general",multiplicity:"",relationProperty:""},attachments:{list:!0,name:"attachment",multiplicity:"zeroOrOne",relationProperty:"message"}}},{name:"messageUid",parent:null,resource:"messageUids",aliases:["MessageUid","messageUids","MessageUids"],fields:["id"],simpleFields:["id","uid","mailServer","mailLogin"],refs:{}},{name:"customField",parent:null,resource:"customFields",aliases:["CustomField","customFields","CustomFields"],fields:["id","name","entityFieldName"],simpleFields:["id","name","value","entityFieldName","fieldType","enabledForFilter","required"],refs:{entityType:{name:"entityType",multiplicity:"",relationProperty:"customFields"},process:{name:"process",multiplicity:"",relationProperty:"customFields"}}},{name:"resourceBase",parent:"resource",resource:"resourceBases",aliases:["ResourceBase","resourceBases","ResourceBases"],fields:["id"],simpleFields:["id","actions-count"],refs:{actions:{list:!0,name:"action",multiplicity:"one",relationProperty:"entity"}}},{name:"attachment",parent:null,resource:"attachments",aliases:["Attachment","attachments","Attachments"],fields:["id","name"],simpleFields:["id","name","description","date","mimeType","uri","thumbnailUri","size"],refs:{owner:{name:"generalUser",multiplicity:"",relationProperty:"attachments"},general:{name:"general",multiplicity:"",relationProperty:"attachments"},message:{name:"message",multiplicity:"",relationProperty:"attachments"}}},{name:"history",parent:"resource",resource:"histories",aliases:["History","histories","Histories"],fields:["id"],simpleFields:["id","date","description","modification"],refs:{entity:{name:"general",multiplicity:"",relationProperty:"histories"},innerEntity:{name:"general",multiplicity:"",relationProperty:""},modifier:{name:"generalUser",multiplicity:"",relationProperty:""}}},{name:"change",parent:"resource",resource:"changes",aliases:["Change","changes","Changes"],fields:["id"],simpleFields:["id","field","oldValue","newValue"],refs:{history:{name:"history",multiplicity:"",relationProperty:"changes"}}},{name:"action",parent:"resource",resource:"actions",aliases:["Action","actions","Actions"],fields:["id","name"],simpleFields:["id","name","uri"],refs:{entity:{name:"resourceBase",multiplicity:"",relationProperty:"actions"}}},{name:"context",parent:null,resource:"contexts",aliases:["Context","contexts","Contexts"],fields:["id"],simpleFields:["id","acid","edition","selectedProjects-count","processes-count"],refs:{loggedUser:{name:"user",multiplicity:"",relationProperty:""},culture:{name:"culture",multiplicity:"",relationProperty:""},selectedProjects:{list:!0,name:"projectInfo",multiplicity:"",relationProperty:""},processes:{list:!0,name:"processInfo",multiplicity:"",relationProperty:""}}},{name:"culture",parent:null,resource:"cultures",aliases:["Culture","cultures","Cultures"],fields:["id","name"],simpleFields:["id","name","decimalSeparator","shortDateFormat","longDateFormat","timePattern"],refs:{}},{name:"processInfo",parent:null,resource:"processInfos",aliases:["ProcessInfo","processInfos","ProcessInfos"],fields:["id","name"],simpleFields:["id","name","terms-count","customFields-count","practices-count"],refs:{terms:{list:!0,name:"term",multiplicity:"",relationProperty:""},customFields:{list:!0,name:"customFieldInfo",multiplicity:"",relationProperty:""},practices:{list:!0,name:"practice",multiplicity:"",relationProperty:""}}},{name:"term",parent:null,resource:"terms",aliases:["Term","terms","Terms"],fields:["id","name"],simpleFields:["id","name","value"],refs:{}},{name:"customFieldInfo",parent:null,resource:"customFieldInfos",aliases:["CustomFieldInfo","customFieldInfos","CustomFieldInfos"],fields:["id","name"],simpleFields:["id","entityKind","name","type","required","listed"],refs:{}},{name:"projectInfo",parent:null,resource:"projectInfos",aliases:["ProjectInfo","projectInfos","ProjectInfos"],fields:["id","name"],simpleFields:["id","name"],refs:{process:{name:"processInfo",multiplicity:"",relationProperty:""},program:{name:"programInfo",multiplicity:"",relationProperty:""}}},{name:"programInfo",parent:null,resource:"programInfos",aliases:["ProgramInfo","programInfos","ProgramInfos"],fields:["id","name"],simpleFields:["id","name"],refs:{}}]}),define("tau/store/types.targetprocess",["Underscore","tau/store/types","tau/store/types.targetprocess.generated"],function(_,a,b){var c=function(a){var b=[];for(var c=0,d=a.length;c<d;c++){var e=a.charAt(c);c===0?e=e.toUpperCase():e===e.toUpperCase()&&b.push(" "),b.push(e)}return b.join("")},d=function(a){return{key:a,val:a}},e=function(a){var b=a.length-1;if(a.charAt(b)==="y"){var c=a.substring(0,b),d="ies";a=c+d}else a+="s";return{key:a,val:a}},f=function(a){var b=a.split(" "),c=b.length,d=c-1||0,e=b[d];return{key:a+" Big Icon Text",val:e}},g=function(a){var b=a.split(" "),c=b.length,d=c-1||0,e=b[d];return{key:a+" Small Icon Text",val:e.charAt(0)}},h=function(a){if(a&&a.entityType&&a.entityType.name)return a.entityType.name;throw"type of entity is not detected"},i=function(a){var b=c(a);return{name:d(b),names:e(b),iconBig:f(b),iconSmall:g(b)}};return _.each(b,function(b){b.name==="userStory"&&(b.aliases.unshift("story","stories","us"),b.simpleFields.push("tasks-effort-sum","tasks-effortToDo-sum"));if(b.name==="general"||b.name==="assignable")b.isParentType=!0,b.discriminator={entityType:["id","name"]},b.detectType=h;(b.parent==="general"||b.parent==="assignable")&&b.simpleFields.push("customFields"),b.terms=i(b.name),b.name==="processInfo"&&b.refs&&(b.refs={}),b.name==="context"&&(b.refs||(b.refs={}),b.refs.culture&&delete b.refs.culture,b.refs.selectedProjects={list:!0,name:"project"},b.simpleFields=["id","acid"]),a.register(b)}),a.register({name:"implementationHistory",aliases:["stats"]}),a.register({name:"prioritizer",fields:["id"],refs:[]}),a}),define("tau/target.process.rules.registrator",["Underscore","tau/store/types.targetprocess"],function(_,a){return{typeContainSimpleField:function(a,b){return _.find(a.simpleFields,function(a){return a===b})},registerRules:function(b,c){this.registeredEntityTypes={},this.rules=b,_.each(a.getDictionary(),this.registerType,this),b.register({type:"feature",changes:["initialEstimate"],fields:["timeRemain"]}),b.register({type:"iteration",changes:["startDate"],fields:["endDate"]}),b.register({type:"iteration",changes:["endDate"],fields:["startDate"]}),b.register({type:"testPlanRun",changes:["release"],fields:[{build:["id","name"]}]}),b.register({type:"testPlanRun",changes:["iteration"],fields:[{build:["id","name"]}]}),b.registerRule({name:"auto-include-before-save",type:"roleEffort",changes:["effort"],fields:[{assignable:["id","effort","effortToDo","effortCompleted","timeSpent","timeRemain"]}]}),b.registerRule({name:"auto-include-before-save",type:"userStory",changes:["release","iteration"],fields:[{tasks:[{release:["id","name"]},{iteration:["id","name"]}]}]}),b.registerRule({name:"auto-include-before-save",type:"task",changes:["entityState"],fields:[{release:["id","name"]},{iteration:["id","name"]}]}),b.registerRule({name:"auto-action-after-save",type:"assignable",changes:["times"],action:function(a){a.store.refresh("assignable",{id:a.data.id,fields:["effortCompleted","effortToDo","timeSpent","timeRemain",{roleEfforts:["id","effort","effortToDo"]}]}).done()}}),b.registerRule({name:"auto-action-after-save",type:"feature",changes:["userStories"],action:function(a){a.store.refresh("feature",{id:a.data.id,fields:["effortCompleted","effortToDo","timeSpent","timeRemain","userStories-count","effort",{roleEfforts:["id","effort","effortToDo"]}]}).done()}}),b.registerRule({name:"auto-action-after-save",type:"iteration",changes:["userStories|bugs"],action:function(a){a.store.refresh("iteration",{id:a.data.id,fields:["bugs-effortToDo-sum","bugs-effortCompleted-sum","userStories-effortToDo-sum","userStories-effortCompleted-sum"]}).done()}}),b.registerRule({name:"auto-action-after-save",type:"release",changes:["userStories"],action:function(a){a.store.refresh("release",{id:a.data.id,fields:["bugs-effortToDo-sum","bugs-effortCompleted-sum","userStories-effortToDo-sum","userStories-effortCompleted-sum",{features:["effortToDo","effortCompleted","userStories-count"]}]}).done()}}),b.registerRule({name:"auto-action-after-save",type:"userStory",changes:["tasks"],action:function(a){a.data.cmd.type==="task"&&!a.data.cmd.config.id?a.store.refresh("userStory",{id:a.data.id,fields:["tasks-count","tasks-effort-sum","tasks-effortToDo-sum",{entityState:["id","name"]}]}).done():a.store.refresh("userStory",{id:a.data.id,fields:["effort","effortToDo","effortCompleted","timeSpent","timeRemain","tasks-count","tasks-effort-sum","tasks-effortToDo-sum"]}).done()}}),b.registerRule({name:"auto-include-before-save",type:"task",changes:["entityState"],fields:[{userStory:["id","tasks-effort-sum","tasks-effortToDo-sum","effort","effortToDo","effortCompleted","timeSpent","timeRemain","tasks-count",{entityState:["id","name","isInitial","isFinal","isPlanned","isCommentRequired"]}]}]}),b.registerRule({name:"auto-include-before-save",type:"userStory",changes:["entityState"],fields:["tasks-effortToDo-sum",{feature:["effortToDo","effortCompleted","userStories-count"]},{iteration:["userStories-effortToDo-sum","userStories-effortCompleted-sum"]},{release:["bugs-effortToDo-sum","bugs-effortCompleted-sum","userStories-effortToDo-sum","userStories-effortCompleted-sum",{features:["effortToDo","effortCompleted","userStories-count"]}]}]}),b.registerRule({name:"auto-action-after-save",type:"feature",changes:["userStories"],action:function(a){a.store.refresh("feature",{id:a.data.obj.id,fields:["effortToDo","effortCompleted","userStories-count"]}).done()}}),b.registerRule({name:"auto-include-before-save",type:"bug",changes:["entityState"],fields:[{iteration:["bugs-effortToDo-sum","bugs-effortCompleted-sum"]}]}),b.registerRule({name:"auto-action-after-save",type:"roleEffort",changes:["effort"],action:function(a){var b=a.store,c=a.data.obj;b.get(c.type,{id:c.id,fields:[{assignable:["id"]}]}).done({success:function(a){a=a[0];var c=a.data.assignable.id,d=a.data.assignable.__type,e={task:[{userStory:["id","effort","effortToDo","effortCompleted","timeSpent","timeRemain","tasks-count","tasks-effort-sum","tasks-effortToDo-sum"]}],userStory:[{iteration:["userStories-effortToDo-sum","userStories-effortCompleted-sum"]},{release:["userStories-effortToDo-sum","userStories-effortCompleted-sum"]},{feature:["userStories-count","effort","effortToDo","effortCompleted","timeSpent","timeRemain"]}],bug:[{iteration:["bugs-effortToDo-sum","bugs-effortCompleted-sum"]},{release:["bugs-effortToDo-sum","bugs-effortCompleted-sum"]}]},f=e[d];if(f){var g=_(f).filter(function(a){var e=_.getFieldName(a);return b.isPropertyInitialized(c,d,e)});g.length&&b.refresh(d,{id:c,fields:g}).done()}}})}}),b.registerRule({name:"auto-action-after-save",type:"comment",action:function(a){var b=a.data,d=b.cmd["comment-practices-notification-opts"];if(d&&_(d).keys().length){var e=c.getNotificationService();e.notifyComment(b.id,d)}}})},registerType:function(a){var b=this.registeredEntityTypes,c=this.rules;if(!b.hasOwnProperty(a.name)){b[a.name]=!0,_.each(a.aliases,function(a){b[a]=!0});var d="endDate";a.refs.hasOwnProperty("entityState")&&this.typeContainSimpleField(a,d)&&(c.register({type:a.name,changes:["entityState"],fields:["endDate","leadTime","cycleTime"]}),c.register({type:a.name,changes:["entityState"],fields:[{roleEfforts:["effort","effortToDo"]}]}))}}}}),define("tau/core/keyboard.manager",["Underscore","jQuery"],function(_,$){function a(){}function b(){$(document).keydown(_.bind(c,this))}function c(){if(this.keyboardHandlers.length==0)return;var a=this.keyboardHandlers[this.keyboardHandlers.length-1];a&&a.handleKeyDown.apply(a,arguments)}function d(){this.keyboardHandlers=[],this.pushHandler=f,b.call(this),this.pushHandler.apply(this,arguments)}function e(){this.keyboardHandlers.pop()}function f(a){this.keyboardHandlers.push(a)}return a.prototype={pushHandler:d,popHandler:e},a}),define("tau/core/bus.reg",["Underscore","tau/core/event"],function(_,a){var b={buses:{},onCreate:function(a){var b=this;b.buses[a.id]=a,b.fire("create",{bus:a})},onDestroy:function(a){if(a.id==="global")return;delete this.buses[a.id],this.fire("destroy",{bus:a})},logCount:function(){console.log("#count: "+this.count())},count:function(a){var b=_(this.buses).keys();return a&&(b=_(b).without("global")),b.length},stats:function(){var a={},b=this;_.each(_(b.buses).keys(),function(c){var d=b.buses[c];a.hasOwnProperty(d.name)||(a[d.name]=0),a[d.name]++}),_.each(_(a).keys(),function(b){console.log(b+" : "+a[b])})}};return a.implementOn(b),window.tau=window.tau||{},_.extend(window.tau,{buses:b}),b}),define("tau/core/bus",["Underscore","tau/core/class","tau/core/bus.reg","tau/core/event"],function(_,a,b,c){function e(a,b,c){var d=b[1],e=b[0];a.name.match(/(diagnostics)/)&&console.log(a.name,"["+a.id+"]",":",e,d||"")}var d=a.extend({globalBus:null,init:function(a){a=a||{},this.globalBus=a&&a.globalBus?a.globalBus:null,this.name=a&&a.name?a.name:_.uniqueId()+"",_.defaults(a,{id:_.uniqueId("bus_")}),this.id=a.id,b.onCreate(this)},initialize:function(a){this.fire("initialize",a)},destroy:function(){this.fire("destroy"),delete this.globalBus},getGlobalBus:function(){return this.globalBus}});return c.implementOn(d.prototype),d.prototype.fire=function(a,d,e){this.globalBus&&this.globalBus.fire(a,d,this);var f=c.prototype.fire.apply(this,arguments);return a==="destroy"&&(b.onDestroy(this),delete this.globalBus),f},d}),define("tau/core/global.bus",["tau/core/bus"],function(a){return{bus:null,reset:function(){this.bus&&this.bus.removeAllListeners(),delete this.bus},get:function(){return this.bus=this.bus||new a({id:"global",name:"globalBus"}),this.bus}}}),define("tau/store/factory",["app.path","tau/core/class","tau/store/store","tau/store/repository","tau/store/services/service.rest","tau/core/global.bus","tau/rules/core","tau/rules/rule.auto-include-before-save","tau/rules/rule.auto-action-after-save","tau/rules/rule.auto-include-before-remove","tau/target.process.rules.registrator","tau/store/types.targetprocess"],function(a,b,c,d,e,f,g,h,i,j,k,l){return b.extend({rulesDisabled:!1,clearSingles:function(){this.rulesEngine&&(this.rulesEngine.destroy&&this.rulesEngine.destroy(),delete this.rulesEngine),delete this.proxy,delete this.service,delete this.store},clear:function(){this.clearSingles(),delete this.initialData,delete this.appPath,delete this.rulesDisabled},setApplicationPath:function(a){if(this.appPath===a)return;this.appPath=a},getApplicationPath:function(){if(!this.appPath){var b=a.get();return b}return this.appPath},setInitialData:function(a){this.initialData=a},setService:function(a){if(this.service===a)return;this.clearSingles(),this.service=a},getService:function(){return this.service||(this.service=new e({appPath:this.getApplicationPath(),path:this.getRestPath()})),this.service},getRestPath:function(){return this.getApplicationPath()+"/api/v1"},setProxy:function(a){this.proxy=a},getProxy:function(){return this.proxy||(this.proxy=new d({service:this.getService()})),this.initialData&&(this.proxy.registerData(this.initialData),delete this.initialData),this.proxy},disableRules:function(){this.rulesDisabled=!0},enableRules:function(){this.rulesDisabled=!1},initRules:function(a){if(this.rulesDisabled===!0)return;this.rulesEngine=new g({store:this.store,rules:[],rulesImpl:[h,i,j]}),k.registerRules(this.rulesEngine,a)},getStore:function(a){return a=a||{},this.store||(a.proxy=this.getProxy(),_.defaults(a,{eventEmitter:f.get()}),this.store=new c(a),this.initRules(a.services)),this.store}})}),define("tau/core/state.manager",["Underscore","tau/core/class"],function(_,a){var b=function(){},c=a.extend({init:function(a){a=a||{};var b=[];a.state||b.push("state"),a.service||b.push("service");if(b.length>0)throw"State manager should be initialized with following parameters: ["+b.join(",")+"]";this.subscriptions={},this.cfg=a},get:function(a){var c=this;if(!a.id)throw"StateManager.get operation requires parameter [id]";var d=_.defaults(a,{fields:[],callback:b}),e=this.cfg.service;return e.get(d),c},set:function(a){var c=this;if(!a.id)throw"StateManager.set operation requires parameter [id]";var d=_.defaults(a,{set:{},callback:b}),e=this.cfg.service;return e.set(d),c},update:function(a){var b=this,c=this.cfg.state,d=[];_(a).chain().keys().each(function(e){d.push(e);var f=c[e]||{},g=a[e];if(_.isString(g)||_.isString(f))return;var h=_(f).keys(),i=_(g).keys();_(_.union(h,i)).each(function(a){if(g[a]!==f[a]){var c=f.hasOwnProperty(a)?f[a]:null,d=g.hasOwnProperty(a)?g[a]:null;b.applyChanges({paramId:e,fieldName:a,value:d,delta:{prev:c,curr:d}})}})}),_(c).chain().keys().difference(d).each(function(a){var d=c[a];if(_.isString(d))return;_(d).chain().keys().each(function(c){b.applyChanges({paramId:a,fieldName:c,value:null,delta:{prev:d[c],curr:null}})})}),b.cfg.state=a},applyChanges:function(a){var b=this.subscriptions,c=(b[a.paramId]||{})[a.fieldName]||[];for(var d=0,e=c.length;d<e;d++){var f=c[d];f.callback.call(f.scope,a)}},bind:function(a){var b=a.paramId,c=a.fieldName,d=a.callback,e=a.listener,f=this.subscriptions;return f[b]=f[b]||{},f[b][c]=f[b][c]||[],f[b][c].push({callback:d,scope:e}),this},unbind:function(a){var b=this.subscriptions,c=_(b).keys();for(var d=0,e=c.length;d<e;d++){var f=c[d],g=_(b[f]).keys();for(var h=0,i=g.length;h<i;h++){var j=g[h],k=b[f][j];for(var l=0;l<k.length;)k[l].scope===a?k.splice(l,1):++l;b[f][j].length===0&&delete b[f][j]}_(b[f]).keys()===0&&delete b[f]}}});return c}),define("tau/services/service.routing",["Underscore","tau/core/Class"],function(_,a){var b=a.extend({init:function(a){a=a||{},this.config=a,this.external=a.external},get:function(a){var b={},c=a.id,d=a.fields,e=d.length,f=this.external.getHashParam(c);for(var g=0;g<e;g++){var h=d[g];b[h]=f.hasOwnProperty(h)?f[h]:null}a.callback(b)},set:function(a){var b=a.id,c=a.set,d=this.external.getHashParam(b),e=_(d).extend(c);this.external.setHashParam(b,e),a.callback(e)}});return b}),define("tau/utils/utils.storage",[],function(){var a=typeof window.localStorage!="undefined"&&window.localStorage!==null&&!!window.localStorage.getItem&&!!window.localStorage.setItem,b={set:function(a,b){return localStorage.setItem(a,JSON.stringify(b)),!0},get:function(a){var b=localStorage.getItem(a);if(b)try{b=JSON.parse(b)}catch(c){}return b},remove:function(a){return localStorage.removeItem(a)}},c={set:function(a,b,c){var d=new Date;d.setTime(d.getTime()+31536e6),c=c||d.toGMTString();var e="expires="+c,f=[a+"="+JSON.stringify(b),e,"path=/"].join("; ");document.cookie=f},get:function(a){a+="=";var b=document.cookie.split(";"),c;for(i=0;i<b.length;i++){var d=b[i];while(d.charAt(0)===" ")d=d.substring(1,d.length);d.indexOf(a)===0&&(c=d.substring(a.length,d.length),c=JSON.parse(c))}return c},remove:function(a){return c.set(a,"",-1)}};return a?storage=b:storage=c,storage}),function(){function a(a){var b=a.currentTarget||a.srcElement,c;if(a.type==="load"||f.test(b.readyState)){a=b.getAttribute("data-requiremodule"),h[a]=!0;for(a=0;c=g[a];a++)if(h[c.name])c.req([c.name],c.onLoad);else break;a>0&&g.splice(0,a),setTimeout(function(){b.parentNode.removeChild(b)},15)}}function b(a){var b,c;a.setAttribute("data-orderloaded","loaded");for(a=0;c=j[a];a++)if((b=i[c])&&b.getAttribute("data-orderloaded")==="loaded")delete i[c],require.addScriptToDom(b);else break;a>0&&j.splice(0,a)}var c=typeof document!="undefined"&&typeof window!="undefined"&&document.createElement("script"),d=c&&(c.async||window.opera&&Object.prototype.toString.call(window.opera)==="[object Opera]"||"MozAppearance"in document.documentElement.style),e=c&&c.readyState==="uninitialized",f=/^(complete|loaded)$/,g=[],h={},i={},j=[],c=null;define("order",{version:"1.0.5",load:function(c,f,h,l){var p;f.nameToUrl?(p=f.nameToUrl(c,null),require.s.skipAsync[p]=!0,d||l.isBuild?f([c],h):e?(l=require.s.contexts._,!l.urlFetched[p]&&!l.loaded[c]&&(l.urlFetched[p]=!0,require.resourcesReady(!1),l.scriptCount+=1,p=require.attach(p,l,c,null,null,b),i[c]=p,j.push(c)),f([c],h)):f.specified(c)?f([c],h):(g.push({name:c,req:f,onLoad:h}),require.attach(p,null,c,a,"script/cache"))):f([c],h)}})}(),function(a){function c(a,b,c,d,e){this._listener=b,this._isOnce=c,this.context=d,this._signal=a,this._priority=e||0}var b={VERSION:"0.6"};c.prototype={active:!0,execute:function(a){var b;return this.active&&(b=this._listener.apply(this.context,a),this._isOnce&&this.detach()),b},detach:function(){return this._signal.remove(this._listener)},getListener:function(){return this._listener},dispose:function(){this.detach(),this._destroy()},_destroy:function(){delete this._signal,delete this._isOnce,delete this._listener,delete this.context},isOnce:function(){return this._isOnce},toString:function(){return"[SignalBinding isOnce: "+this._isOnce+", active: "+this.active+"]"}},b.Signal=function(){this._bindings=[]},b.Signal.prototype={_shouldPropagate:!0,active:!0,_registerListener:function(a,b,d,e){if(typeof a!="function")throw new Error("listener is a required param of add() and addOnce() and should be a Function.");var f=this._indexOfListener(a),g;if(f!==-1){g=this._bindings[f];if(g.isOnce()!==b)throw new Error("You cannot add"+(b?"":"Once")+"() then add"+(b?"Once":"")+"() the same listener without removing the relationship first.")}else g=new c(this,a,b,d,e),this._addBinding(g);return g},_addBinding:function(a){var b=this._bindings.length;do--b;while(this._bindings[b]&&a._priority<=this._bindings[b]._priority);this._bindings.splice(b+1,0,a)},_indexOfListener:function(a){var b=this._bindings.length;while(b--)if(this._bindings[b]._listener===a)return b;return-1},add:function(a,b,c){return this._registerListener(a,!1,b,c)},addOnce:function(a,b,c){return this._registerListener(a,!0,b,c)},remove:function(a){if(typeof a!="function")throw new Error("listener is a required param of remove() and should be a Function.");var b=this._indexOfListener(a);return b!==-1&&(this._bindings[b]._destroy(),this._bindings.splice(b,1)),a},removeAll:function(){var a=this._bindings.length;while(a--)this._bindings[a]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(a){if(!this.active)return;var b=Array.prototype.slice.call(arguments),c=this._bindings.slice(),d=this._bindings.length;this._shouldPropagate=!0;do d--;while(c[d]&&this._shouldPropagate&&c[d].execute(b)!==!1)},dispose:function(){this.removeAll(),delete this._bindings},toString:function(){return"[Signal active: "+this.active+" numListeners: "+this.getNumListeners()+"]"}},a.signals=b}(window||global||this),define("libs/crossroads.js/dist/js-signals",function(){}),function(a){function g(a,b){var c=a.length;while(c--)if(a[c]===b)return c;return-1}function h(a,b){return"[object "+a+"]"===e.call(b)}function i(a){return h("RegExp",a)}function j(a){return h("Array",a)}function k(a){return h("Function",a)}function l(a){return a}var b,c,d,e=Object.prototype.toString,f=/^(true|false)$/i;b=function(){function f(a,b,d){var e=new c(a,b,d,p);return h(e),e}function h(b){var c=i();do--c;while(a[c]&&b._priority<=a[c]._priority);a.splice(c+1,0,b)}function i(){return a.length}function j(b){var c=k(b);c>=0&&a.splice(c,1),b._destroy()}function k(b){return g(a,b)}function l(){var b=i();while(b--)a[b]._destroy();a.length=0}function m(a){a=a||"";var c=n(a),d=c?o(a,c):null;c?(d?c.matched.dispatch.apply(c.matched,d):c.matched.dispatch(),e.dispatch(a,c,d)):b.dispatch(a)}function n(b){var c=i(),d;while(d=a[--c])if(d.match(b))return d;return null}function o(a,b){return d.getParamValues(a,b._matchRegexp)}var a=[],b=new signals.Signal,e=new signals.Signal,p={_routes:a,addRoute:f,removeRoute:j,removeAllRoutes:l,parse:m,bypassed:b,routed:e,getNumRoutes:i,toString:function(){return"[crossroads numRoutes:"+i()+"]"}};return p},c=function(a,b,c,e){var f=i(a);this._crossroads=e,this._pattern=a,this._paramsIds=f?null:d.getParamIds(this._pattern),this._matchRegexp=f?a:d.compilePattern(a),this.matched=new signals.Signal,b&&this.matched.add(b,this),this._priority=c||0},c.prototype={rules:void 0,match:function(a){return this._matchRegexp.test(a)&&this._validateParams(a)},_validateParams:function(a){var b=this.rules,c;for(c in b)if(b.hasOwnProperty(c)&&!this._isValidParam(a,c))return!1;return!0},_isValidParam:function(a,b){var c=this.rules[b],d=this._getParamValuesObject(a),e=d[b],f;return i(c)?f=c.test(e):j(c)?f=g(c,e)!==-1:k(c)&&(f=c(e,a,d)),f||!1},_getParamValuesObject:function(a){var b=this._paramsIds,c=d.getParamValues(a,this._matchRegexp),e={},f=b?b.length:0;while(f--)e[b[f]]=c[f];return e.request_=l(a),e},dispose:function(){this._crossroads.removeRoute(this)},_destroy:function(){this.matched.dispose(),this.matched=this._pattern=this._matchRegexp=null},toString:function(){return'[Route pattern:"'+this._pattern+'", numListeners:'+this.matched.getNumListeners()+"]"}},d=function(){function f(a){var b=[],d,e=new RegExp(c);while(d=e.exec(a))b.push(d[1]);return b}function g(a){return a=a?h(a):"",a=a.replace(/\/$/,""),a=j(a),a=i(a),new RegExp("^"+a+"/?$")}function h(a){return a.replace(c,d)}function i(a){return a.replace(e,b.source)}function j(b){return b.replace(a,"\\$&")}function k(a,b){var c=b.exec(a);return c&&(c.shift(),c=m(c)),c}function m(a){var b=a.length,c=[];while(b--)c[b]=l(a[b]);return c}var a=/[\\\.\+\*\?\^\$\[\]\(\)\{\}\/\'\#]/g,b=/([^\/]+)/,c=/\{([^\}]+)\}/g,d="___CR_PARAM___",e=new RegExp(d,"g");return{getParamIds:f,getParamValues:k,compilePattern:g}}(),a.crossroads=b}(window||this),define("libs/crossroads.js/dist/crossroads",function(){}),define("tau/utils/utils.history",["Underscore","tau/core/class","tau/core/event","order!libs/crossroads.js/dist/js-signals","order!libs/crossroads.js/dist/crossroads"],function(_,a,b){var c=a.extend({init:function(){this.stack=[],this.current=null},size:function(){return this.stack.length},push:function(a){var b=a;return b.index=this.stack.length,this.stack.push(b),this},pop:function(){var a=this.stack.pop();return a},rewindTo:function(a){var b=this.stack.length;for(var c=b-1;c>=0;c--){var d=this.stack[c];d.index>a&&this.stack.pop()}return this.fire("changed"),this},setCurrent:function(a){this.current=a,this.fire("setCurrent")},getCurrent:function(){return this.current},process:function(){this.current&&this.stack.push(_.clone(this.current)),this.current=null},updateCurrent:function(a){this.current&&(this.current.url=a.url||this.current.url,this.current.title=a.title||this.current.title,this.current.id=a.id||this.current.id,this.fire("setCurrent"))},exclude:function(a,b){this.stack=_.reject(this.stack,function(b,c){return b.id&&b.id==a}),this.current.id==a&&(this.current=null),b!==!1&&this.fire("changed")}});return b.implementOn(c.prototype),c}),define("libs/parseUri",[],function(){function a(b){var c=a.options,d=c.parser[c.strictMode?"strict":"loose"].exec(b),e={},f=14;while(f--)e[c.key[f]]=d[f]||"";return e[c.q.name]={},e[c.key[12]].replace(c.q.parser,function(a,b,d){b&&(e[c.q.name][b]=d)}),e}return a.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},a}),define("tau/utils/utils.routing/utils.routing.store.hash",["Underscore","jQuery","tau/core/external","tau/core/class","tau/core/event","libs/parseUri"],function(_,$,a,b,c,d){var e=b.extend({init:function(b){this.config=_.defaults(b,{window:window,v2:!1,safe:!1,encodeBy:function(a){return a},decodeBy:function(a){try{a=decodeURIComponent(a)}catch(b){}return a}}),this.window=this.config.window||window,this.config.v2&&(this.config.external=new a(this.window)),this.params=[];var c=this;this.hashChangeHandler=function(a){a.stopPropagation(),a.preventDefault();var b=a.hash||a.target.location.hash;c.fire("urlChanged",{url:c.parseUrl(b)})},$(this.window).bind("hashchange",this.hashChangeHandler),this.destroyHandler=function(a){c.fire("destroyed",{})},$(this.window).bind("unload",this.destroyHandler)},_extract:function(a){var b=a;if(this.config.safe){a="?"+a;var c=d(a);this.params=c.queryKey,b=this.params[this.config.safeParameterName]||""}return b},_generateV2:function(b,c){var d="||legacystate",e=this.config.external,f=e.getHash(),g=new a({location:{hash:f}}),h=!_.isEmpty(b.states)&&c?b.states:{};return g.setHashParam(d,h),g.getHash()},_generate:function(a,b){b=!!b;var c="";if(this.config.v2)return c=this._generateV2(a,b),c;var d=a.url;return!_.isEmpty(a.states)&&b&&(d+="||"+JSON.stringify(a.states)),c=d,this.config.safe&&(this.params[this.config.safeParameterName]=d,c=$.param(this.params)),this.config.encodeBy(c)},_parseUrlV2:function(b){var c={},d=new a({location:{hash:b}});return c.source="#"+d.getHash(),c.states=d.getHashParam("||legacystate"),c.url=d.getHashParam(this.config.safeParameterName),c},parseUrl:function(a){if(this.config.v2){var b=this._parseUrlV2(a);return b}a&&a[0]=="#"&&(a=a.slice(1));var c=this._extract(a);try{c=this.config.decodeBy(c)}catch(d){}var e={url:null,states:{},source:"#"+a},f=c.split("||");e.url=f[0];if(f[1])try{e.states=JSON.parse(f[1])}catch(d){}return e},generateUrl:function(a,b){return this._generate(a,b)},setUrl:function(a){var b="#";_.isObject(a)&&a.hasOwnProperty("url")&&a.hasOwnProperty("states")?b=this._generate(a,!0):_.isString(a)&&(b=a),this.window.location.hash=b},getUrl:function(){return this.parseUrl(this.window.location.hash)}});return c.implementOn(e.prototype),e}),define("tau/utils/utils.routing",["Underscore","jQuery","tau/core/class","tau/core/event","tau/utils/utils.routing/utils.routing.store.hash","tau/utils/utils.storage","order!libs/crossroads.js/dist/js-signals","order!libs/crossroads.js/dist/crossroads"],function(_,$,a,b,c,d){var e=a.extend({init:function(a){var b=window.crossroads;return this.backend=b(),this.options=a,this.window=this.options.window||window,this.store=new c(this.options),this.v2=a.v2===!0,this.current={url:"",states:{},source:""},this.processed={url:"",states:{},source:""},this.referer=this.restoreReferer(),this.reset(),this},register:function(a,b,c){var d=a;arguments.length>1&&(d={pattern:a,callback:b});var e=this,f=this.backend.addRoute(d.pattern,function(){var a=Array.prototype.slice.call(arguments),b=this,c={};_.forEach(b._paramsIds,function(b,d){c[b]=a[d]});var f=e.processed.states;d.callback.apply(this,_.union([c,f],a))});return this},register404:function(a){return this.backend.bypassed.add(a),this},_applyRouter:function(a){this.backend.parse(a)},start:function(){var a=this,b=_.bind(this._applyRouter,this),c=function(c){this.processed=c;if(this.processed.url!==this.current.url){this.setReferer(_.clone(this.current)),this.current=this.processed,b(this.current.url);return}var d=this.current.states,e=this.processed.states,f=_.union(_.keys(d),_.keys(e)),g={};_.forEach(f,function(a){d[a]!=e[a]&&(g[a]=e[a]||null)}),_.forEach(g,function(b,c){a.fire("stateChanged",{name:c,value:b})}),this.current=this.processed};this.setChangeListener(_.bind(c,this));var d=function(){this.setReferer(_.clone(this.current))};return this.setDestroyListener(_.bind(d,this)),this},redirect:function(a){this.window.open(a,"_self")},setInternalUrl:function(a){this.setUrl({url:a,states:{}})},getUrl:function(){return this.store.getUrl()},setUrl:function(a){this.store.setUrl(a)},generateUrl:function(a){return typeof a=="undefined"&&(a=this.current),this.store.generateUrl(a,!0)},setChangeListener:function(a){this.changeListener=function(b){a(b.data.url)},this.store.on("urlChanged",this.changeListener,this)},setDestroyListener:function(a){this.destroyListener=function(b){a(b.data.url)},this.store.on("destroyed",this.destroyListener,this)},reset:function(){return this.backend.removeAllRoutes(),this.backend.bypassed.removeAll(),this},execute:function(a){var b=this.store.parseUrl(a);return this.current=b,this._applyRouter(b.url),this},stop:function(){this.changeListener&&(this.store.removeListener("urlChanged",this.changeListener,this),delete this.changeListener),this.destroyListener&&(this.store.removeListener("destroy",this.destroyListener,this),delete this.destroyListener)},getStateParameter:function(a){return this.current.states[a]},setStateParameter:function(a,b,c){this.current.states[a]=b,this.setUrl(this.current),c&&this.fire("stateChanged",{name:a,value:b})},getReferer:function(){return this.referer},setReferer:function(a){this.referer=a,d.set("utils.routing.referer",this.referer)},restoreReferer:function(){var a=d.get("utils.routing.referer");return a}});return b.implementOn(e.prototype),e}),define("tau/store/services/service.globalSettings",["tau/core/class"],function(a){var b=null,c=a.extend({init:function(a){this.config=a},resetSettings:function(){b=null},getGlobalSettings:function(a){var c=function(a,b){a.success&&a.success.call(a.scope,b.d)};if(b){c(a,b);return}this.sendRequest("GlobalSettingsService","GetGlobalSettings",null,function(d){b=d,c(a,d)},function(b){a.failure&&a.failure.call(a.scope,b)})},sendRequest:function(a,b,c,d,e){var f=this.config.appPath+"/PageServices/"+a+".asmx/"+b,g={contentType:"application/json",type:"POST",success:d,error:e};c&&(g.data=JSON.stringify(c)),$.ajax(f,g)}});return c}),define("tau/store/services/service.notifications",["tau/core/class"],function(a){var b=a.extend({init:function(a){this.config=a},notifyComment:function(a,b,c){c=c||{},this.sendRequest("CommentsNotificationService","Notify",{commentId:a,options:b},function(a){c.success&&c.success.call(c.scope,a.d)},function(a){c.failure&&c.failure.call(c.scope,a)})},sendRequest:function(a,b,c,d,e){var f=this.config.appPath+"/PageServices/"+a+".asmx/"+b,g={contentType:"application/json",type:"POST",success:d,error:e};c&&(g.data=JSON.stringify(c)),$.ajax(f,g)}});return b}),define("tau/store/services/service.actions",["Underscore","tau/core/class"],function(_,a){var b=a.extend({init:function(a){this.config=a},getActionUrl:function(a){return this.config.appPath+"/PageServices/ActionsService.asmx/"+a},getActiveProjectForEntity:function(a,b,c){var d={generalId:a};this.sendRequest("GetActiveProjectForEntity",d,b,c)},copyGeneralToProject:function(a,b,c,d){var e={generalId:a,projectId:b};this.sendRequest("CopyGeneralToProject",e,c,d)},getProjectIds:function(a,b){var c={};this.sendRequest("GetProjectIds",c,a,b)},moveGeneralToProject:function(a,b,c,d){var e={generalId:a,projectId:b};this.sendRequest("MoveGeneralToProject",e,c,d)},attachGeneralToRequest:function(a,b,c,d){var e={generalId:a,requestId:b};this.sendRequest("AttachGeneralToRequest",e,c,d)},detachRequest:function(a){var b=function(){},c={generalId:a.generalId,requestId:a.requestId};a=_(a).defaults({success:b,error:b}),this.sendRequest("DetachRequestFromGeneral",c,a.success,a.error)},generalCanConvertTo:function(a,b,c){var d={generalId:a};this.sendRequest("GeneralCanConvertTo",d,b,c)},convertGeneralToTask:function(a,b,c,d){var e={generalId:a,userStoryId:b};this.sendRequest("ConvertGeneralToTask",e,c,d)},convertGeneralToType:function(a,b,c,d){var e={generalId:a,entityTypeId:b};this.sendRequest("ConvertGeneralToType",e,c,d)},splitUserStory:function(a,b,c){var d={generalId:a};this.sendRequest("SplitUserStory",d,b,c)},sendRequest:function(a,b,c,d){$.ajax(this.getActionUrl(a),{contentType:"application/json",type:"POST",data:JSON.stringify(b),success:c,error:d})}});return b}),define("tau/store/factory.instance",["tau/store/factory"],function(a){return new a}),define("tau/core/profile.methods",[],function(){var a=0,b=function(b,c){return typeof c!="function"?c:function(){var d=this,e=(d.name||d.__objectId)+"/"+b;++a;var f=(new Array(a)).join("    ");console.log(f,e);var g=+(new Date),h=c.apply(d,arguments),i=+(new Date);return console.log(f,i-g),--a,h}},c=1,d=[],e=function(a,b){return typeof b!="function"?b:function(){var e=this,f=(e.name||e.__objectId)+"/"+a,g={name:f,level:c};d.push(g),++c;var h=+(new Date),i=b.apply(e,arguments),j=+(new Date);return--c,g.value=j-h,i}},f=function(){var a={name:"root",stack:[]},b=[a];for(var c=0;c<d.length;c++){var e=d[c],f=e.level,g={name:e.name,value:e.value,stack:[]};b[f-1].stack.push(g),b[f]=g}var h=0;for(var i=0;i<a.stack.length;i++)h+=a.stack[i].value;return a.value=h,{tree:a,plain:d}};return{console:b,accumulate:{method:e,result:f}}}),define("tau/core/event.emitter",["tau/core/class","tau/core/event","tau/core/profile.methods"],function(a,b,c){var d=function(){},e=a.extend({init:function(a){this.bus=a.bus,b.subscribeOn(this)},"bus refresh":function(a){this.lifeCycleCleanUp()},lifeCycleCleanUp:d,on:function(){this.bus.on.apply(this.bus,arguments)},fire:function(){return this.bus.fire.apply(this.bus,arguments)},"bus destroy":function(){this.on=d,this.fire=d,this.destroy()},destroy:function(){var a=this.bus.getGlobalBus();a&&a.removeAllListeners(this),b.unSubscribe(this),delete this.bus}});return window.appIsInDebugMode!==!0,e}),define("tau/components/extensions/component.extension.base",["Underscore","tau/core/event.emitter"],function(_,a){var b=function(a){return a!=="bus"&&!_.isFunction(this[a])},c=function(a){delete this[a]},d=a.extend({init:function(a){this._super(a),this.config=a},"bus beforeInit":function(a){this.config||console.log("config is null "+this.category),_(this.config).extend((a.data||{}).config),a.data&&a.data.config&&(this.config.store=a.data.config.store||this.config.store)},"bus afterRender":function(a){this.element=a.data.element},createComponents:function(a,b){var c={bus:this.bus,config:a,create:function(){this.bus.on("componentsCreated",this.onComponentCreated,this),this.bus.fire("createComponents",this.config,this)},onComponentCreated:function(a){if(a.caller!==this)return;a.removeListener(),b(a.data)}};c.create()},isEntityInContext:function(a){var b=this.config.context.entity.id,c=b==(a.data.entity||a.data.assignable).id;return c},destroy:function(){delete this.config;var a=_.keys(this);_(a).chain().select(b,this).each(c,this).value(),this._super()}});return d}),define("tau/ui/extensions/ui.extension.domOperationsBase",["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(_,$,a){return a.extend({name:"ui.extension.domOperationsBase","bus markElementToBeDeleted":function(a){var b=a.data,c=b.element;c.addClass("deleting")},"bus deleteElement":function(a){var b=a.data.element,c=a.data.callback;b.fadeOut(750,c)},"bus markElementToBeUpdated":function(a){var b=a.data,c=b.element;c.addClass("updating")},"bus cancelUpdateElement":function(a){var b=a.data.element;this._highlightElement(b,"#EE5757",1500)},"bus updateElement":function(a){var b=this,c=a.data.element;c.each(function(){var a=$(this);b._highlightElement(a,"#FFFFD3",1500)})},_highlightElement:function(a,b,c){a.stop(!0,!0),a.removeClass("updating"),a.addClass("before-animate");var d=this._getElementBgColor(a),e=a.css("backgroundColor"),f=function(){a.css("backgroundColor","")};a.removeClass("before-animate"),a.css({backgroundColor:b}).animate({backgroundColor:d},c,f)},_getElementBgColor:function(a){var b="transparent";while(a.length>0&&a.parent()&&((b=a.css("backgroundColor"))=="transparent"||b==undefined||b=="rgba(0, 0, 0, 0)"||b.length==0)){a=a.parent();if(a.is("body"))break}if(b=="transparent"||b.length==0)b="#ffffff";return b}})}),define("tau/core/termProcessor",["Underscore","tau/core/class","tau/store/types.targetprocess"],function(_,a,b){var c=a.extend({init:function(a){a=a||[],this.mapping={};for(var b=0,c=a.length;b<c;b++){var d=a[b];this.mapping[d.name]=this.mapping[d.name.toLowerCase()]=d.value}},resolve:function(a,b){var c=b||a;return a&&this.mapping.hasOwnProperty(a)&&(c=this.mapping[a]),c},getTerms:function(a){var c=this,d=b.findByKeyword(a),e=d.terms,f=_(e).keys(),g={};return _(f).each(function(a){g[a]=c.resolve(e[a].key,e[a].val)}),g}});return c}),define("tau/ui/templateRenderer.extensions",["Underscore","tau/core/class","tau/core/termProcessor"],function(_,a,b){var c=a.extend({init:function(a){this.termProc=new b(a.terms)},terms:function(a){return this.termProc.getTerms(a)},text_implode:function(a){var b=new String(a);if(_.isString(a))b=a;else if(_.isArray(a)){var c=_.clone(a),d=c.pop();b=_.filter([c.join(", "),d],function(a){return a!=0}).join(" &amp; ")}return b},key:function(a,b){}});return c}),define("tau/ui/templateRenderer",["Underscore","jQuery"],function(_,$){return $.extend($.tmpl.tag,{"@":{_default:{$1:"'type'",$2:"null"},open:["var $__t = $item;","while(!$__t.$tau && $__t.parent){","$__t = $__t.parent","}","_=_.concat($__t.$tau.terms($2)[$1]);"].join("")},tauKey:{_default:{$1:"id",$2:"null"},open:['_=_.concat(new String(window._.complexKey($2["data"], $1) || "").toString());'].join("")}}),$}),define("tau/core/view-base",["Underscore","jQuery","tau/core/event.emitter","tau/ui/templateRenderer.extensions","tau/core/templates-factory","tau/ui/templateRenderer"],function(_,$,a,b,c){var d=a.extend({name:"view-base",init:function(a){this._super(a),this.config=a||{}},destroy:function(){this._super(),this.element&&this.element.remove(),delete this.element,delete this.config},merge:function(a,b){var c=this;if(b&&c.element){$.isArray(b)||(b=[b]);var d=_(b).isArray()?b:[b],e=this.element;_(d).each(function(b){var c=e.find(b),d=a.find(b);c.each(function(a){$(this).replaceWith(d.eq(a))})})}},bindTemplate:function(a){var b=this.config.template.name,d=c.get(b).bind(this.config,a);return d},prepareElement:function(a){var b=this.config.template.name,c=("tmpl-"+b).replace(/\./g,"-");return a.addClass(c),a.addClass("ui-placeholder"),a},updateElement:function(a,b){var c=this;c.element&&b?c.merge(a,b):(c.element&&(a.length?c.element.replaceWith(a):c.element.remove()),c.element=a)},doRender:function(a,b){var c=this.bindTemplate(a);c=this.prepareElement(c),this.updateElement(c,b),!this.config.visible&&this.hide()},fireAfterInit:function(a){this.fire("afterInit",{config:this.config,refreshSelector:a})},initialize:function(a){var b=this;this.fireAfterInit(a)},setDefaultConfig:function(){var a=this;_.defaults(a.config,{visible:!0})},"bus refreshData":function(a){this.doRender(a.data),this.fire("elementRefreshedWithData",{element:this.element})},"bus refresh":function(a){this._super();var b=a.data||{},c=b.refreshSelector;this.startLifeCycle(a,c)},"bus initialize":function(a){this.startLifeCycle(a)},startLifeCycle:function(a,b){var c=this;c.setDefaultConfig(),_.extend(c.config,a.data),c.fire("beforeInit",{config:c.config}),this.initialize(b)},"bus show":function(){this.show()},"bus hide":function(){},"bus show+afterRender:last":function(a){var b=a.afterRender.data.element},"bus hide+afterRender:last":function(a){var b=a.afterRender.data.element;b.hide(),this.config.visible=!1},showElement:function(){this.element.show()},show:function(){this.showElement(),this.config.visible=!0},hideElement:function(){this.element.hide()},hide:function(){this.hideElement(),this.config.visible=!1},"bus applyTo":function(a){this.element=a.data.element},"bus afterInit+dataBind":function(a){this.render(a.dataBind.data,a.afterInit.data)},render:function(a,b){this.fireBeforeRender({data:a}),this.doRender(a,b.refreshSelector),this.fireAfterRender({data:a})},fireBeforeRender:function(a){a=a||{},this.fire("beforeRender",{data:a.data,view:this,element:this.element})},fireAfterRender:function(a){a=a||{},this.fire("afterRender",{data:a.data,view:this,element:this.element})}});return d}),define("tau/components/extensions/application/extension.routing",["Underscore","jQuery","tau/core/event.emitter","tau/core/event","tau/store/types"],function(_,$,a,b,c){return a.extend({init:function(a){this._super(a),this.config=a,this.routing=a.context.configurator.getRouting(a.applicationId);var b=this.routing.getUrl().source;this.defaultHash=b!=="#"?b:"#__"+_.uniqueId()},"bus registerRoute":function(a){var b=a.data;this.routing.register(b.pattern,b.callback)},"bus registerRouteNotFound":function(a){var b=a.data;this.routing.register404(b.callback)},"bus afterInit":function(a){this.fire("routing.registered",{})},"bus controller.ready":function(){this.routing.start();var a=this.routing.getUrl();this.config.startUrl?a.url===this.config.startUrl?this.routing.execute(this.config.startUrl):(this.routing.execute(this.config.startUrl),this.routing.setInternalUrl(this.config.startUrl)):this.config.executeOnStart!==!1&&this.routing.execute(a.source)},destroy:function(){this._super(),this.routing.reset(),this.routing.stop(),this.routing.removeAllListeners(this),!this.config.applicationId&&this.config.integration&&this.config.integration.showInPopup&&this.routing.setUrl(this.defaultHash),delete this.config,delete this.routing,delete this.defaultHash}})}),define("tau/components/extensions/application/extension.routing.patterns",["Underscore","tau/core/event.emitter","tau/core/tau"],function(_,a,b){return a.extend({init:function(a){this._super(a),this.config=a},parseQueryParams:function(){var a=b.getValueFromQueryString("type").split("."),c=/\/(\w+?).aspx$/.exec(window.location.pathname);return{id:b.getValueFromQueryString("id"),entity:a[a.length-1],type:a[a.length-1],action:c&&c.length?c[1]:null}},normalizeUrl:function(){var a=this;if(a.config.applicationId){var b=a.config.context.configurator.getExternal(),c=b.getHashParam(a.config.applicationId,null);c||(c=a.config.pageType+"/"+a.config.pageId,b.setHashParam(a.config.applicationId,c))}},"bus routing.registered":function(a){var b=this,c=this.parseQueryParams();b.normalizeUrl();var d=_.bind(this.execute,this);this.fire("registerRoute",{pattern:/board\/([\w|0-9]+)/,callback:function(a,b,c){d("board",{id:c,entity:"board"})}}),this.fire("registerRoute",{pattern:"",callback:function(a){d("entity",c)}});var e;this.fire("registerRoute",{pattern:/(\w+)\/([0-9]+)($|\s|&)/,callback:function(a,b,c,f){f=parseInt(f);if(e!=f){var g={entity:c,id:f,action:"show"};e=f,d("entity",g)}}}),this.fire("registerRoute",{pattern:"{entity}/{id}/{action}",callback:function(a){a.id=parseInt(a.id),d("entity",a)}}),this.fire("registerRouteNotFound",{callback:function(a){b.fire("error",{message:"URL is not found"})}}),this.fire("dataBind",{})},execute:function(a,b){this.fire("application.navigate."+a,b)},"bus afterRender":function(a){this.fire("controller.ready")},destroy:function(){var a=this;if(a.config.applicationId){var b=a.config.context.configurator.getExternal();b.setHashParam(a.config.applicationId,null)}delete a.config,this._super()}})}),define("tau/components/extensions/application/extension.navigation",["Underscore","jQuery","tau/core/event.emitter"],function(_,$,a){return a.extend({init:function(a){this._super(a),this.config=a},"bus innerContentRendered":function(a){var b=this,c=b.config;if(!c.applicationId)return;a.data.element.delegate("a","click",function(a){if(a.ctrlKey||a.metaKey)return;var b=$(a.currentTarget),d=b.attr("href")||"";if(d.charAt(0)==="#"){a.preventDefault(),a.stopPropagation();if(d==="#")return;var e=c.context.configurator.getExternal();d.indexOf("=")===-1&&d.indexOf("&")===-1?e.setHashParam(c.applicationId,d.substring(1)):e.setHash(d.substring(1))}})},destroy:function(){this._super(),delete this.config}})}),define("tau/components/extensions/error/extension.errorBar",["jQuery","tau/components/extensions/component.extension.base"],function($,a){var b=a.extend({"bus initialize":function(a){if(document.documentMode==7){var b={message:"TargetProcess does not support Compatibility View for Internet Explorer 7. Please, turn it off."};throw this.fire("error",b),b}},"bus error":function(a){var b=a.data.message;$.notifyBar({cls:"error",html:b,delay:6e6})}});return b}),define("tau/core/model-base",["Underscore","tau/core/event.emitter"],function(_,a){var b=a.extend({init:function(a){this._super(a),this.store=a.store,this.config=a},onInit:function(a){},isCommandForEntityInContext:function(a){return a.data.cmd.config.id===this.config.context.entity.id},isPropertyChanged:function(a,b){var c=b.changes,d=b.cmd.config.$set||{};return _.any(a,function(a){return c.hasOwnProperty(a)||d.hasOwnProperty(a)})},attachToChangePropertiesOfCurrentEntity:function(a){var b=_.isArray(a)?a:[a],c=this.config.context.entity.id,d=this,e=function(a){var c=a.data;d.isPropertyChanged(b,c)&&d.fire("propertyChanged",c)},f=function(a){var c=a.data;d.isPropertyChanged(b,c)&&d.fire("beforeChangeProperty",c)},g=this.config.context.entity.entityType.name||"general";d.store.on({type:g,eventName:"afterSave",filter:{id:c},listener:d},e),d.store.on({type:g,eventName:"beforeSave",filter:{id:c},listener:d},f),a[this.propertyName]=[this.displayField,this.valueField]},"bus beforeInit":function(a){this.config=a.data?a.data.config:{},this.store=this.config.store?this.config.store:this.store,this.onInit()},"bus evictData":function(){var a=this.config.entity||this.config.context.entity,b=a.id;this.store.config.proxy.evictPersistedObject(b,"context"),this.store.config.proxy.evictPersistedObject(b,a.type||a.entityType.name)},destroy:function(){this.store.unbind(this),delete this.config,delete this.store,this._super()}});return b}),define("tau/models/model.extension",["tau/core/model-base"],function(a){var b=a.extend({onInit:function(){this.fire("registerStoreRequest"),this.fire("commitTransaction")}});return b}),define("tau/models/extension.model.base",["Underscore","tau/components/extensions/component.extension.base"],function(_,a){return a.extend({category:"extension model base",floatToString:function(a){return a||(a=0),a.toFixed(2).replace(".00","")},destroy:function(){this._super(),this.destroy=function(){}}})}),define("tau/models/baseInfoList/extension.model.entityIdRetriever",["tau/models/extension.model.base"],function(a){var b=a.extend({"bus registerStoreRequest":function(){var a=this.config.context.entity||{entityType:{}},b={};b[this.config.propertyName]=["id"];var c=[b];this.fire("get",{type:a.entityType.name,query:{id:a.id,fields:c},callback:{success:this.onEntityRetrieved,scope:this}})},onEntityRetrieved:function(a){var b=a.data[this.config.propertyName];this.fire("entityIdsRetrieved",b)}});return b}),define("tau/models/baseInfoList/extension.model.additionalInfoEntityRetriever",["Underscore","tau/models/extension.model.base"],function(_,a){var b=a.extend({"bus entityIdsRetrieved":function(a){var b=a.data,c=b.length;for(var d=0;d<c;d++){var e={id:b[d].id,fields:["id","name",{entityState:["name"]}]};this.fire("extendGetEntityQuery",e),this.fire("get",{type:this.config.typeName,query:e})}this.fire("commitTransaction",{scope:this,success:this.onEntitiesRetrieved})},convertServerDataModelData:function(a){return a=a,{__type:a.__type,id:a.id,name:a.name,state:{name:a.entityState.name}}},onEntitiesRetrieved:function(a){var b={entities:_.pluck(a,"data")};this.fire("filterEntities",b),a=b.entities;var c=_.map(a,this.convertServerDataModelData,this);c=_.compact(c),this.fire("entitiesRetrieved",c)}});return b}),define("tau/models/model.list.baseInfo",["tau/core/model-base","tau/models/baseInfoList/extension.model.entityIdRetriever","tau/models/baseInfoList/extension.model.additionalInfoEntityRetriever"],function(a,b,c){var d=a.extend({init:function(a){this._super.apply(this,arguments),this.propertyName=a.propertyName,this.typeName=a.typeName,new b(a),new c(a)},onInit:function(){if(this.config.disableModel)return;this.fire("registerStoreRequest"),this.fire("commitTransaction")},"bus entitiesRetrieved":function(a){var b={items:a.data};this.bus.fire("dataBind",b)},"bus evictProperty":function(){var a=this.config.context.entity;this.store.evictProperties(a.id,a.entityType.name,[this.propertyName])}});return d}),define("tau/models/baseInfoList/extension.model.additionalInfoImpedimentFilter",["Underscore","tau/models/extension.model.base"],function(_,a){var b=a.extend({"bus extendGetEntityQuery":function(a){var b=a.data.fields,c=["id"];b=a.data.fields=_.uniq(_.union(b,[{owner:c},{responsible:c},"isPrivate"])),_.each(b,function(a){a.hasOwnProperty("entityState")&&(a.entityState=_.uniq(_.union(a.entityState,["isFinal"])))})},"bus filterEntities":function(a){var b=a.data;b.entities=_.select(b.entities,function(a){if(a.entityState.isFinal)return!1;if(!a.isPrivate)return!0;var b=this.config.context.getLoggedUser().id;return(a.owner||{}).id==b||(a.responsible||{}).id==b},this)}});return b}),define("tau/models/model.impedimentsCountCalculator",["tau/models/model.list.baseInfo","tau/models/baseInfoList/extension.model.additionalInfoImpedimentFilter"],function(a,b){var c=a.extend({init:function(a){a.propertyName="impediments",a.typeName="impediment",this._super.apply(this,arguments),new b(a)},"bus entitiesRetrieved":function(a){this.fire("impedimentsCountRetrieved",{count:a.data.length}),this.fire("impedimentsRetrieved",{items:a.data})},onGetEntity:function(a){var b=a.data,c=b["impediments-count"];this.fire("impedimentsCountRetrieved",{count:c})}});return c}),define("tau/models/model.duplicateBugList",["Underscore","tau/core/model-base"],function(_,a){var b=a.extend({_retrieveEntity:function(){var a=this.config.context,b=a.entity.entityType.name,c=a.entity.id,d={id:c,fields:["id"]};this.store.get(b,d,{scope:this,success:this.onEntityRetrieved}).done()},convertServerDataModelData:function(a){return{__type:a.__type,id:a.id,name:a.name,state:{name:a.entityState.name}}},onEntityRetrieved:function(a){this.fire("registerStoreRequest"),this.fire("commitTransaction")},"bus duplicateBugRetrieved":function(a){var b=a.data.items,c=_.map(b,this.convertServerDataModelData,this);c=_.compact(c);var d={items:c};this.bus.fire("dataBind",d)},onInit:function(){if(this.config.disableModel)return;this._retrieveEntity()}});return b}),define("tau/models/model.duplicateBugCountCalculator",["tau/models/model.duplicateBugList"],function(a){var b=a.extend({"bus duplicateBugRetrieved":function(a){var b=a.data.items;this.fire("duplicateBugCountRetrieved",{count:b.length})}});return b}),define("tau/models/model.duplicateBugRetriever",["Underscore","tau/core/model-base"],function(_,a){var b=a.extend({init:function(){this._super.apply(this,arguments)},convertServerDataModelData:function(a){return{__type:a.__type,id:a.id,name:a.name,state:{name:a.entityState.name}}},"bus registerStoreRequest":function(){var a=this.config.context,b=a.entity.entityType.name,c=a.entity.id,d={fields:["id","name",{entityState:["name"]}],$query:{tags:{$contains:"duplicateOf#"+c}}};this.fire("find",{type:b,query:d,callback:{scope:this,success:this.onDuplicateBugsRetrieved}})},onDuplicateBugsRetrieved:function(a){var b=_.sortBy(a.data,function(a){return a.id}),c={items:b};this.fire("duplicateBugRetrieved",c)}});return b}),define("tau/components/extensions/impedimentList/extension.impedimentList.visibilityController",["jQuery","tau/components/extensions/component.extension.base"],function(jQuery,a){return a.extend({"bus afterRender":function(a){a.data.element.hide()},"bus componentsCreated+impedimentsCountRetrieved":function(a){var b=a.impedimentsCountRetrieved.data.count,c=a.componentsCreated.data,d=c[0].component;d.fire("sendEventToComponents",{name:"setBadgeText",data:{text:b}})},"bus componentsCreated+impedimentsRetrieved":function(a){var b=a.impedimentsRetrieved.data.items,c=a.componentsCreated.data,d=c[1].component;if(d.name=="impedimentListPanel inner")return;d.fire("dataBind",{items:b})},"bus afterRender+impedimentsCountRetrieved":function(a){if(a.impedimentsCountRetrieved.data.count>0){var b=a.afterRender.data.element;this.config.disableAnimation?b.show():b.slideDown("slow")}}})}),define("tau/components/extensions/duplicateBugList/extension.duplicateBugList.visibilityController",["jQuery","tau/components/extensions/component.extension.base"],function(jQuery,a){return a.extend({"bus afterRender":function(a){a.data.element.hide()},"bus componentsCreated+duplicateBugCountRetrieved":function(a){var b=a.duplicateBugCountRetrieved.data.count,c=a.componentsCreated.data,d=c[0].component;d.fire("sendEventToComponents",{name:"setBadgeText",data:{text:b}})},"bus componentsCreated+duplicateBugRetrieved":function(a){var b=a.duplicateBugRetrieved.data.items,c=a.componentsCreated.data,d=c[1].component;if(d.name=="duplicateBugListPanel inner")return;d.fire("duplicateBugRetrieved",{items:b})},"bus afterRender+duplicateBugCountRetrieved":function(a){if(a.duplicateBugCountRetrieved.data.count>0){var b=a.afterRender.data.element;this.config.disableAnimation?b.show():b.slideDown("slow")}}})}),define("tau/models/assignmentsList/extension.model.store.operations",["Underscore","tau/core/model-base","tau/core/event"],function(_,a){var b=a.extend({category:"store operations","bus commitTransaction":function(a){var b=this.transaction||this.store;delete this.transaction,b.done(a.data)},"bus get":function(a){var b=this.transaction=this.transaction||this.store,c=a.data||{};this.transaction=b.get(c.type,c.query,c.callback)},"bus find":function(a){var b=this.transaction=this.transaction||this.store,c=a.data||{};this.transaction=b.find(c.type,c.query,c.callback)},destroy:function(){this._super.apply(this,arguments),this.destroy=function(){}}});return b}),define("tau/configurations/converters/converter.print",["Underscore","tau/models/model.extension","tau/models/model.impedimentsCountCalculator","tau/models/model.duplicateBugCountCalculator","tau/models/model.duplicateBugRetriever","tau/components/extensions/impedimentList/extension.impedimentList.visibilityController","tau/components/extensions/duplicateBugList/extension.duplicateBugList.visibilityController","tau/models/assignmentsList/extension.model.store.operations","tau/core/termProcessor"],function(_,a,b,c,d,e,f,g,h){var i={impedimentListPanel:function(a,c){var d=new h(c.getTerms());return _.extend(a,{compId:"impediments",type:"container",layout:"list",cssClass:"b-section",disableAnimation:!0,children:[{type:"label",text:d.getTerms("Impediment").names,hideCounter:!0},{type:"impedimentList",disableModel:!0}],extensions:[e,b,g]}),a},duplicateBugListPanel:function(a,b){var e=new h(b.getTerms());return _.extend(a,{compId:"duplicateBugs",type:"container",layout:"list",cssClass:"b-section",disableAnimation:!0,children:[{type:"label",text:"Duplicate "+e.getTerms("Bug").names,hideCounter:!0},{type:"duplicateBugList",disableModel:!0}],extensions:[f,d,c,g]}),a},tabs:function(a){a=_.extend(a,{type:"container",children:[],cssClass:"b-tabs"});var b=[];return _.forEach(a.tabs,function(b,c){var d=!1;b=_.extend(b,{type:"container",children:b.items,cssClass:"b-tab"}),d=!_.isUndefined(b.children)&&b.children.length&&b.children[0].type==="revisionList";if(d)return;!_.isUndefined(b.header)&&b.header.length&&b.children.unshift({type:"label",text:b.header[0].text}),a.children.push(b)}),a},collapsible:function(a){return a=_.extend(a,{type:"container",children:[],cssClass:"b-section"}),a.children=a.items,!_.isUndefined(a.header)&&a.header.length&&a.children.unshift({type:"label",text:a.header[0].text}),a}},j=function(a,b){var c=null;if(_.isArray(a)){var d=0;c=function(b){a.splice(b,1),d--};for(d=0;d<a.length;d++)b(a[d],d,c)}else{c=function(b){delete a[b]};var e=_(a).keys(),f=null;while(f=e.pop())b(a[f],f,c)}},k=function(a,b){return j(a,function(c,d,e){if(c.type){if(c.printable===!1){e(d);return}_.isFunction(i[c.type])&&(a[d]=i[c.type](c,b)),c.children&&(a[d].children=k(c.children,b)),c.items&&(a[d].items=k(c.items,b)),a[d].disabledExtensionCategories=["edit"]}else d=="children"&&(a[d]=k(c,b))}),a};return{convert:function(a){return a=k(a,a.context),a.children&&a.children.length&&(a.children[0].cssClass="main-container main-container-print i-print"),a}}}),define("tau/components/extensions/print.convert.extension",["tau/components/extensions/component.extension.base","tau/configurations/converters/converter.print"],function(a,b){return a.extend({"bus onConfigContainerCreated":function(a){var c=a.data;b.convert(c),c.children.push({type:"print"})},"bus afterRender":function(a){var b=a.data.element,c=b.find("a");c.removeAttr("href"),b.find("[role=attachment]").removeAttr("role")}})}),define("tau/components/extensions/application/extension.controller.board.entity",["Underscore","tau/core/event.emitter"],function(_,a){return a.extend({init:function(a){this._super(a),this.config=a},"bus application.navigate.entity":function(a){this._initGlobalEvents()},_initGlobalEvents:function(){var a=this,b=function(b){var c=b.data,d={project:{id:c.project.id}},e={id:c.entity.id,changes:d,cmd:{config:{$set:d}}};a.bus.fire("application.reload",e)},c=function(b){var c=b.data,d={},e={id:c.bugId,changes:d,cmd:{config:{$set:d}}};a.fire("application.reload",e)};a.bus.getGlobalBus().on("bugWasMarkedAsDuplicate",c,a),a.bus.getGlobalBus().on("entityWasMovedToProject",b,a),a.bus.getGlobalBus().on("processChanged",b,a);var d=["general","assignment","roleEffort"],e=a.config.context.configurator.getStore(),f=function(b){a.fire("application.reload",b.data)};_.each(d,function(b){e.on({type:b,eventName:"afterSave",listener:a},f),e.on({type:b,eventName:"afterRemove",listener:a},f)})},destroy:function(){this._super(),this.config.context.configurator.getStore().unbind(this),delete this.config}})}),define("tau/ui/templates/application/ui.template.application.boardPlus",["tau/core/templates-factory"],function(a){var b={name:"application.board",markup:['<div class="tau-app">',"</div>"]};return a.register(b)}),define("tau/core/bus.profiler",["Underscore","tau/core/class"],function(_,a){var b=a.extend({init:function(a){var b=this;b.stream=[],b.stopped=!1;var c=a.fire;a.fire=function(){var a=arguments;!b.stopped&&b.registerEvent(a),c.apply(this,a)}},stop:function(){this.stopped=!0},registerEvent:function(a){var b=+(new Date),c={tick:b,name:a[0],data:a[1]||{}};this.stream.push(c)},data:function(){return this.stream}});return b}),define("tau/ui/extensions/board.plus/ui.board.plus.utils",["Underscore"],function(_){var a={};return{generateId:function(a){var b=[];return a.hasOwnProperty("x")&&(b.push("x"),b.push(a.x),b.push("-")),a.hasOwnProperty("y")&&(b.push("y"),b.push(a.y),b.push("-")),b.join("")},generateElementData:function(a){var b=[];return _(a).each(function(a,c){b.push("data-"+c+'="'+a+'"')}),b.join(" ")},generateCardId:function(a){return a.type.toLowerCase()+"-"+a.id},dimension:function(b,c){var d=b.attr("id");a[d]||(a[d]={});var e=a[d],f={x:c.attr("data-x"),y:c.attr("data-y")},g=c.attr("role");e.all||(e.all=b.find("td.i-role-"+g));var h=function(){return!1};f.x&&(h=function(){return this.getAttribute("data-x")==f.x}),f.y&&(h=function(){return this.getAttribute("data-y")==f.y});var i=c.attr("id");return e[i]||(e[i]=e.all.filter(h)),e[i]},isHidden:function(a){return a.attr("data-is-hidden")||!1},isCollapsed:function(a){return a.attr("data-is-collapsed")||!1}}}),define("tau/views/view.board.plus",["jQuery","tau/core/event.emitter","tau/ui/extensions/board.plus/ui.board.plus.utils"],function($,a,b){return a.extend({name:"view.board.plus","bus view.build.skeleton":function(a){var b=a.data;this.fire("template.bind",{name:"boardplus.skeleton",data:b})},"bus template.boardplus.skeleton.bound":function(a){var b=this,c=a.data.element;this.fire("view.skeleton.built",{element:c});var d=c.find(".i-role-cell");b.fire("view.cellSlot.built.start",{cells:d}),d.each(function(){b.fire("view.cellSlot.built",{element:this,data:{x:this.getAttribute("data-x")||null,y:this.getAttribute("data-y")||null}})}),b.fire("view.cellSlot.built.end",{cells:d})},"bus view.build.cell.skeleton":function(a){var b=a.data,c=b.hasOwnProperty("x"),d=b.hasOwnProperty("y"),e=c&&d?"boardplus.cell.grid.skeleton":"boardplus.cell.axis.skeleton";this.bindCellTemplate(e,b)},bindCellTemplate:function(a,b){this.fire("template.bind",{name:a,data:b})},appendCellToBoardSkeleton:function(a,c){var d=a.data,e=a.element,f=b.generateId(d),g=c.find("#"+f);g.append(e),this.fireCellSkeletonBuilt({element:g,data:d})},fireCellSkeletonBuilt:function(a){this.fire("view.cell.skeleton.built",a)},"bus view.skeleton.built:last+template.boardplus.cell.grid.skeleton.bound":function(a){var b=a["view.skeleton.built"].data.element,c=a["template.boardplus.cell.grid.skeleton.bound"].data;this.appendCellToBoardSkeleton(c,b)},"bus view.skeleton.built:last+template.boardplus.cell.axis.skeleton.bound":function(a){var b=a["view.skeleton.built"].data.element,c=a["template.boardplus.cell.axis.skeleton.bound"].data;this.appendCellToBoardSkeleton(c,b)},"bus view.cell.skeleton.built":function(a){var b=this,c=a.data,d=c.data,e=d.hasOwnProperty("x"),f=d.hasOwnProperty("y");if(e&&f){var g=c.element;g.find(".i-role-card").each(function(){var a=$(this);b.fire("view.card.skeleton.built",{element:a,data:{id:a.attr("data-id"),type:a.attr("data-type")}})})}}})}),define("tau/core/query",["jQuery","Underscore","libs/json2"],function($,_){return{find:function(a,b){var c=[],d=this,e=d._formWhere(b,"",function(a,b,c){return{operator:a,key:b,value:c}});return _.each(a,function(a){var b=!1;_.each(e,function(c){if(b)return;var e=d._getObjectValue(a,c.key);_.isUndefined(e)&&(b=!0),c.operator.compare(e,c.value)||(b=!0)}),b||c.push(a)}),c},render:function(a,b){return this._getWhere(a,b)},_initializeDefaultRenders:function(a){_.defaults(a,{defaultRenderer:function(a,b){var c=this,d=[];return _.isArray(b)||(b=[b]),_.each(b,function(b){d.push("("+a+c.name+JSON.stringify(b)+")")}),d},$in:function(a,b){var c=this,d=[];_.isArray(b)||(b=[b]);var e=[];return _(b).each(function(a){e.push(JSON.stringify(a))}),d.push("("+a+" "+c.name+" ["+e.join(",")+"])"),d}})},_getObjectValue:function(a,b){var c=b.split("."),d=a;for(var e=0;e<c.length;e++){if(!a.hasOwnProperty(c[e]))return undefined;d=a[c[e]]}return d},_getQueryOperators:function(){var a={};this._initializeDefaultRenders(a);var b={$in:{name:"in",compare:function(a,b){return _.any(b,function(b){return b==a})}},$ne:{name:"!=",compare:function(a,b){return a!=b}},$eq:{name:"==",compare:function(a,b){return a==b}}};return _.each(_(b).keys(),function(c){var d=b[c];d.render=a.hasOwnProperty(c)?a[c]:a.defaultRenderer}),b},_isQueryValueWithOperator:function(a,b){var c=_(a).keys();if(c.length===0)return!1;var d=b||this._getQueryOperators();return d.hasOwnProperty(c[0])},_formWhere:function(a,b,c){var d=[];c=c||function(a,b,c){return a.render(b,c)};var e=this;b=b||"";var f=e._getQueryOperators();return _.each(_(a).keys(),function(g){if(g[0]==="$")return;var h=a[g],i=b+g;if(_.isString(h)||_.isNumber(h)||_.isDate(h)||_.isArray(h)||_.isBoolean(h)||_.isNull(h)){var j=h===null?"$isNull":"$eq";d=d.concat(c(f[j],i,h));return}if(e._isQueryValueWithOperator(h,f)){_.each(_(h).keys(),function(a){d=d.concat(c(f[a],i,h[a]))});return}var k=e._formWhere(h,g+".",c);_.each(k,function(a){d.push(a)})}),d},_getWhere:function(a,b){b=b||function(a){return"("+c.join("and")+")"};var c=this._formWhere(a);return c.length===0?"":b(c)}}}),define("tau/slice/url.resolver",["jQuery","Underscore","app.path","tau/core/query"],function($,_,a,b){var c=a.get(),d=c+"/slice/v1/";return{resolve:function(a,c){var e=a.global.acid;if(!e)throw"acid should be defined";var f=[d,c.method,"?type=matrix&definition={","cells:{"," items: [{ id:'"+a.cells.types[0]+"'}]",",filter: '"+(a.cells.filter||"")+"'","}",",x:{ id:'"+a.x.types[0]+"', filter:'"+(a.x.filter||"")+"'}",",y:{ id: '"+a.y.types[0]+"', filter:'"+(a.y.filter||"")+"'}",",global: {acid:'"+e+"'}","}"].join(""),g=_.clone(c.config||{});_.defaults(g,{$take:999}),f+="&take="+g.$take,g.$skip&&(f+="&skip="+g.$skip);var h=b.render(g);return h&&(f+="&where="+h),g.$set&&_.each(_.keys(g.$set),function(a){f+="&"+a+"="+g.$set[a]}),encodeURI(f)}}}),define("tau/slice/url.resolver.proto",["jQuery","Underscore","app.path","tau/core/query"],function($,_,a,b){var c=a.get(),d=c+"/slice/v1/";return{resolve:function(a,c){var e=a.global.acid;if(!e)throw"acid should be defined";var f=d+c.method+"?type=matrix_proto&definition={cells:'"+a.cells.types[0]+"',x:'"+a.x.types[0]+"',y:'"+a.y.types[0]+"',global: {acid:'"+e+"'}}",g=_.clone(c.config||{});_.defaults(g,{$take:999,$innerTake:999}),f+="&take="+g.$take,f+="&innerTake="+g.$innerTake,g.$skip&&(f+="&skip="+g.$skip);var h=b.render(g);return h&&(f+="&where="+h),g.$set&&_.each(_.keys(g.$set),function(a){f+="&"+a+"="+g.$set[a]}),encodeURI(f)}}}),define("tau/slice/api",["tau/core/Class","jQuery","Underscore","./url.resolver","./url.resolver.proto"],function(a,$,_,b,c){return a.extend({config:null,init:function(a){this.config=a||{},_.defaults(this.config,{service:$.ajax})},_deferredResolved:function(a,b){a.$deferred.resolve(b)},_deferredRejected:function(a,b){a.$deferred.reject(b)},resolve:function(a){a=a||{};var c=a.command||{},d=c.config||{},e=b,f=d.hasOwnProperty("$url")?d.$url:e.resolve(this.config.definition,c),g={url:f,dataType:"json",$scope:a},h={ajaxConfig:g,command:c},i=this;return this.config.service(g).done(function(b){h.data=b,i._deferredResolved(a,h)}).fail(function(b){h.data=b,i._deferredRejected(a,h)}),a.$deferred},url:function(a){return this.resolveDeferred("url",a)},x:function(a){return this.resolveDeferred("xaxis",a)},y:function(a){return this.resolveDeferred("yaxis",a)},move:function(a){return this.resolveDeferred("move",a)},axes:function(){var a=this.createDeferredCall("axes"),b={command:a.command};return $.when(this.x(),this.y()).done(function(c,d){b.data={x:c.data.items,y:d.data.items},a.$deferred.resolve(b)}).fail(function(c){b.data=c,a.$deferred.reject(b)}),a.$deferred},size:function(){var a=this.createDeferredCall("size"),b={command:a.command};return $.when(this.x(),this.y()).done(function(c,d){b.data={x:c.data.items.length,y:d.data.items.length},a.$deferred.resolve(b)}).fail(function(c){b.data=c,a.$deferred.reject(b)}),a.$deferred},cell:function(a){return this.resolveDeferred("cells",a)},list:function(a){return this.resolveDeferred("list",a)},createDeferredCall:function(a,b){var c=$.Deferred(),d={config:b,method:a};return{$deferred:c,command:d}},resolveDeferred:function(a,b){return this.resolve(this.createDeferredCall(a,b))}})}),define("tau/models/board.plus/model.board.plus",["Underscore","tau/core/event.emitter","tau/slice/api"],function(_,a,b){return a.extend({"bus initialize+boardSettings.ready:last":function(a){var c=this,d=a.initialize.data,e=a["boardSettings.ready"].data.boardSettings;e.get({fields:["x","y","cells","zoomLevel"],callback:function(a){var e={definition:{global:{acid:d.context.acid},x:a.x,y:a.y,cells:a.cells},service:d.sliceService},f=new b(e);c.fire("slice.ready",{slice:f})}})},"bus slice.ready:last+model.get.sliceInfo":function(a){var b=this;b.onGetSliceInfo(a["slice.ready"].data.slice)},onGetSliceInfo:function(a){var b=this;a.axes().done(function(a){var c=a.data,d={marksX:c.x,marksY:c.y};b.onSliceInfoRetrieved(d)})},onSliceInfoRetrieved:function(a){this.fire("model.sliceInfo.retrieved",a)},"bus boardSettings.ready":function(a){var b=this,c=a.data.boardSettings;c.bind({fields:["zoomLevel"],listener:b,callback:_.bind(b.onZoomLevelUpdated,b)}),c.get({fields:["zoomLevel"],callback:_.bind(b.onZoomLevelReady,b)})},onZoomLevelUpdated:function(a){this.fire("model.zoomLevelChanged",a)},onZoomLevelReady:function(a){this.fire("model.zoomLevelChanged",a)}})}),define("tau/models/board.plus/model.board.cell",["Underscore","tau/core/event.emitter"],function(_,a){return a.extend({"bus slice.ready:last+model.get.cell.content":function(a){var b=this,c=a["slice.ready"].data.slice,d=a["model.get.cell.content"].data;b.onGetCellContent(c,d)},onGetCellContent:function(a,b){var c=this;a.cell({x:b.x,y:b.y}).done(function(a){var d=a.data.items.length>0?a.data.items[0]:{};_(d).defaults({x:b.x,y:b.y,dynamic:{items:[]},fixed:{items:[]}}),c.fireCellBasicInfoRetrieved(d)})},"bus model.get.cell.basicInfo":function(a){var b=this,c=a.data;c.x=c.x||null,c.y=c.y||null,c.x&&c.y?b.fire("model.get.cell.content",{x:c.x.toString(),y:c.y.toString()}):b.fire("model.get.axisCell.basicInfo",c)},"bus model.sliceInfo.retrieved:last+model.get.axisCell.basicInfo":function(a){var b=this,c=a["model.get.axisCell.basicInfo"].data,d=a["model.sliceInfo.retrieved"].data,e=c.hasOwnProperty("x"),f=c.hasOwnProperty("y"),g=c.x?"X":"Y",h=d["marks"+g],i=_(h).find(function(a){var b=g.toLowerCase();return a[b]==c[b]});b.fireCellBasicInfoRetrieved(i)},fireCellBasicInfoRetrieved:function(a){var b=this;b.fire("model.cell.basicInfo.retrieved",a)}})}),define("tau/models/board.plus/model.board.cell.freezable",["Underscore","./model.board.cell"],function(_,a){return a.extend({"bus model.get.cell.basicInfo.start":function(a){this.fire("model.get.cell.basicInfo.dump",{dump:{}})},processResponse:function(a,b,c){var d=a.data.items;for(var e=0,f=d.length;e<f;e++){var g=d[e],h=this.getKey(g);b.hasOwnProperty(h)&&_.extend(b[h],g)}var i=[];for(var j=0;j<c.length;j++){var k=c[j];this.fireCellBasicInfoRetrieved(k),i=i.concat(k.dynamic.items)}this.fire("model.cards.data.ready",{cards:i})},getKey:function(a){return a.x+"_"+a.y},"bus slice.ready:last+model.get.cell.basicInfo.dump:last+model.get.cell.basicInfo.end":function(a){var b=a["model.get.cell.basicInfo.dump"].data.dump,c=_.values(b),d=a["slice.ready"].data.slice,e=_(c).pluck("x"),f=_(c).pluck("y"),g=this;d.cell({x:{$in:e},y:{$in:f}}).done(function(a){g.processResponse(a,b,c)})},"bus slice.ready:last+model.get.cell.content":function(a){},"bus model.get.cell.basicInfo.dump:last+model.get.cell.content":function(a){var b=a["model.get.cell.basicInfo.dump"].data.dump,c=a["model.get.cell.content"].data,d={x:c.x.toString(),y:c.y.toString(),dynamic:{items:[]},fixed:{items:[]}};b[this.getKey(d)]=d}})}),define("tau/models/board.plus/model.board.cell.preloadable",["Underscore","./model.board.cell.freezable"],function(_,a){return a.extend({"bus model.cells.content.loaded:last+model.get.cell.basicInfo.dump:last+model.get.cell.basicInfo.end":function(a){var b=a["model.get.cell.basicInfo.dump"].data.dump,c=_.values(b),d=a["model.cells.content.loaded"].data;this.processResponse(d,b,c)},"bus slice.ready:last+model.get.cell.basicInfo.dump:last+model.get.cell.basicInfo.end":function(a){},"bus slice.ready":function(a){var b=this,c=a.data.slice;c.cell({x:{$ne:null},y:{$ne:null}}).done(function(a){b.fire("model.cells.content.loaded",a)})}})}),define("tau/ui/extensions/board.plus/ui.extension.board.plus.controller",["Underscore","jQuery","tau/core/event.emitter"],function(_,$,a){return a.extend({"bus initialize":function(a){var b=this;b.fire("model.get.sliceInfo")},"bus view.skeleton.built":function(a){var b=this;b.fire("afterInit",{}),b.fire("afterRender",a.data)},"bus model.sliceInfo.retrieved":function(a){var b=this,c=a.data;b.fire("view.build.skeleton",c)},"bus model.cell.basicInfo.retrieved":function(a){var b=a.data;this.fire("view.build.cell.skeleton",b)},"bus view.cellSlot.built.start":function(){this.fire("model.get.cell.basicInfo.start",{})},"bus view.cellSlot.built.end":function(){this.fire("model.get.cell.basicInfo.end",{})},"bus view.cellSlot.built":function(a){var b=a.data.data;this.fire("model.get.cell.basicInfo",b)}})}),define("tau/ui/extensions/board.plus/ui.extension.board.plus.layout",["jQuery","tau/components/extensions/component.extension.base","tau/ui/extensions/board.plus/ui.board.plus.utils"],function($,a,b){return a.extend({"bus afterRender+model.zoomLevelChanged":function(a){var c=_.values(a)[0].data.element;this.zoomLevel=_.values(a)[1].data.zoomLevel,c.css("visibility","hidden");var d=$("html"),e=c.find(".i-role-grid"),f=c.find(".i-role-header[data-dimension=x]"),g=f.find("ul"),h=c.find(".i-role-header[data-dimension=y]"),i=h.find("ul"),j=this.scroll=function(){var a={x:e.scrollLeft(),y:e.scrollTop()};g.css("margin-left",-1*a.x),i.css("margin-top",-1*a.y)};e.bind({scroll:j});var k={width:330,height:250},l=function(a,c){var d=_.capitalize(c),f=e[c]()-e[0]["client"+d],g=a[c]()-f-1,h=a.find(".i-role-cellholder"),i=h.length;h.each(function(a){var d=$(this);(b.isHidden(d)||b.isCollapsed(d))&&i--,b.isHidden(d)==0&&b.isCollapsed(d)&&(g=g-d[c]()-1)});var j=g/i;h.each(function(a){var f=$(this);if(b.isHidden(f)||b.isCollapsed(f))return;var g=f.children(),h=f["outer"+d]()-g[c](),i=j-h,k=f.attr("data-"+c)||!1;k!=i&&(g.css(c,i),b.dimension(e,f,a).children().css(c,i)),f.attr("data-"+c,i)})},m=function(a){switch(a){case 1:case 2:return 6;case 3:case 4:case 5:return 4;case 6:return 3;default:return 2}},n=function(a,d,g,h){var i=_.capitalize(d),j=e[d]()-e[0]["client"+i],k=a[d]()-j-1,l=a.find(".i-role-cellholder"),n=l.length;l.each(function(a){var c=$(this),e=b.isHidden(c),f=b.isHidden(c);(f||e)&&n--,f&&!e&&(k-=c[d]())});var o=m(g),p=Math.min(n,o);h&&(l=l.filter(h));var q=c[d]()-f[d]()-j-1-100,r=Math.floor(q/p),s=16;l.each(function(){var a=$(this);if(b.isHidden(a)||b.isCollapsed(a))return;var c=a.children(),f=b.dimension(e,a).children().add(c);f.css("max"+i,r-s),f.each(function(){this.style[d]=""});var g=_.map(f.toArray(),function(a){return a["scroll"+i]-s}),h=Math.max.apply(null,g);f.css(d,h)});var t=Math.max(0,q-e.children().get(0).getBoundingClientRect().height-2);t>0&&l.each(function(){var a=$(this);if(b.isHidden(a)||b.isCollapsed(a))return;var c=a.children(),d=b.dimension(e,a).children().add(c);d.css("maxHeight",r+t)})},o=this.equalWidth=function(a){l(f,"width")},p=this,q=this.equalHeight=function(a){n(h,"height",p.zoomLevel,a)},r=function(){},s={height:window.innerHeight,width:window.innerWidth},t=!1;$(window).resize(function(a){setTimeout(function(){if(t)return;t=!0;var a={height:window.innerHeight,width:window.innerWidth};Math.abs(a.height-s.height)>20&&(r(),q(),s.height=a.height),Math.abs(a.width-s.width)>20&&(o(),s.width=a.width),t=!1},100)}),setTimeout(function(){r(),o(),q(),j(),c.fadeOut(0),c.css("visibility",""),c.fadeIn("fast")},500)},"bus model.zoomLevelChanged":function(a){if(!this.zoomLevel)return;var b=a.data.zoomLevel;this.zoomLevel=b;var c=this;setTimeout(function(){c.equalHeight(),c.equalWidth()},2e3)},"bus view.axis.collapser.executed.after":function(a){var b=a.data;b.x&&(this.equalWidth(),this.scroll()),b.y&&(this.equalHeight(),this.scroll())},"bus view.axis.focus.executed.after":function(a){var b=a.data;b.x&&(this.equalWidth(),this.scroll()),b.y&&(this.equalHeight(),this.scroll())},"bus view.card.batch.move":function(a){var b=a.data,c=[],d=[];_.forEach(b,function(a){c.push(a.sourceData.y,a.cellData.y)}),_.forEach(b,function(a){d.push(a.sourceData.x,a.cellData.x)}),c=_.uniq(c),d=_.uniq(d),this.equalHeight(function(a,b){return _.indexOf(c,parseInt(b.getAttribute("data-y")))>-1}),this.equalWidth(function(a,b){return _.indexOf(d,parseInt(b.getAttribute("data-x")))>-1})}})}),define("tau/ui/extensions/board.plus/ui.extension.board.plus.selection",["jQuery","tau/components/extensions/component.extension.base"],function($,a){return a.extend({"bus afterRender":function(a){var b=this,c=a.data.element;b.counter=0,b.subscribeCards(c)},"bus view.card.selected":function(a){var b=a.data,c=b.element,d=b.selected;d?c.addClass("tau-selected"):c.removeClass("tau-selected"),d?++this.counter:--this.counter,this.counter=this.counter<0?0:this.counter},subscribeCards:function(a){var b=this;a.find(".i-role-grid").delegate(".i-role-card","mousedown",function(){var a=$(this),c=a.hasClass("tau-selected");b.fireCardSelected(a,!c)})},fireCardSelected:function(a,b){this.fire("view.card.selected",{element:a,selected:b})}})}),define("tau/models/board.plus/model.board.dragndrop",["Underscore","tau/core/event.emitter"],function(_,a){return a.extend({"bus slice.ready:last+view.card.batch.move:last":function(a){var b=_.values(a)[0].data.slice,c=_.values(a)[1].data,d=this,e=[];_.forEach(c,function(a){e.push(function(a){return function(c){b.move({$set:{x:a.cellData.x,y:a.cellData.y,itemId:a.entityId}}).done(function(b){c(null,{elementId:a.elementId,success:!0})}).fail(function(b){c(null,{elementId:a.elementId,success:!1})})}}(a))}),_.parallel(e,function(a,b){d.fire("view.card.batch.move.after",b)})}})}),define("tau/ui/extensions/board.plus/ui.extension.board.plus.dragndrop",["jQuery","tau/components/extensions/component.extension.base"],function($,a){return a.extend({classes:{DRAG_SOURCE:"tau-drag-source",DRAG_HELPER:"tau-drag-helper"},"bus afterRender":function(a){this.selectedCards={};var b=a.data.element.find(".i-role-grid"),c=b.find("tbody");this.$grid=b,this.cardOptions={addClasses:!1,appendTo:b,containment:c,cursor:"move",helper:"clone",distance:8,scrollSensitivity:100,start:_.bind(this.onDragStart,this),drag:_.bind(this.onDrag,this),stop:_.bind(this.onDragStop,this)},this.__options={},this.__options.sortItemsSelector=".i-role-card",this.__options.dropTargetSelector=".i-role-cell",this.__options.dragZone=b;var d=this;b.delegate(".i-role-card","mouseenter",function(){$(this).draggable(d.cardOptions)})},onDragStart:function(a,b){var c=this.classes,d=$(a.target);d.addClass(c.DRAG_SOURCE),b.helper.addClass(c.DRAG_HELPER),this.__dropTarget=d.parentsUntil(this.__options.dragZone,this.__options.dropTargetSelector),this.__intervalId=setInterval(_.bind(this.__updateDragSourceLocation,this,d),50),this.fire("view.card.drag.start",{element:d,helper:b.helper})},onDrag:function(a,b){this.__cursorPosition={x:a.pageX,y:a.pageY}},onDragStop:function(a,b){var c=this.classes,d=$(a.target);clearInterval(this.__intervalId),this.__intervalId=null,d.removeClass(c.DRAG_SOURCE),this.fire("view.card.drag.stop",{element:d})},__updateDragSourceLocation:function(a){this.__updateDropTarget(a),this.__sortItems(a)},__updateDropTarget:function(a){if(!this.__isElementUnderCursor(this.__dropTarget.get(0))){var b=this.__getDropTargetUnderCursor(this.__dropTarget);b.size()>0&&(this.__dropTarget=b.append(a))}},__sortItems:function(a){var b=this.__getSortItemUnderCursor(a);b.size()>0&&(a.index()<b.index()?a.insertAfter(b):a.insertBefore(b))},__isPointInRect:function(a,b,c,d,e,f){return a>=c&&b>=d&&a<=e&&b<=f},__isElementUnderCursor:function(a){var b=a.getBoundingClientRect();return this.__isPointInRect(this.__cursorPosition.x,this.__cursorPosition.y,b.left,b.top,b.right,b.bottom)},__getDropTargetUnderCursor:function(a){return $(_.find(this.__options.dragZone.find(this.__options.dropTargetSelector).not(a),function(a){return this.__isElementUnderCursor(a)},this))},__getSortItemUnderCursor:function(a){return $(_.find(a.siblings(this.__options.sortItemsSelector),function(a){return this.__isElementUnderCursor(a)},this))}})}),define("tau/ui/extensions/board.plus/ui.extension.board.plus.dragndrop.batch",["jQuery","tau/components/extensions/component.extension.base"],function($,a){return a.extend({"bus afterRender":function(a){this.$selectedCards=$()},"bus view.card.selected":function(a){var b=a.data.element;a.data.selected?this.$selectedCards=this.$selectedCards.add(b):this.$selectedCards=this.$selectedCards.not(b)},"bus view.card.drag.start":function(a){var b=a.data.helper,c=a.data.element;this.$selectedCards=this.$selectedCards.add(c),c.toggleClass("tau-selected",!0);var d=this.$selectedCards;d.each(function(){var a=$(this),b=a.parent();a.data("prevPosition",{cardId:a.prev().attr("id"),cellId:b.attr("id"),sourceData:{x:b.data("x")||null,y:b.data("y")||null}})}),d.length>1&&(b.attr("data-batch_count",d.length+""),b.addClass("tau-drag-helper_batch"),d.not(c).detach())},"bus view.card.drag.stop":function(a){var b=a.data.element,c=this.$selectedCards;c.length>1&&c.not(b).insertAfter(b).show(),b.removeAttr("data-batch_count"),b.removeClass("tau-drag-helper_batch");var d=this;c.each(function(){d.fire("view.card.selected",{element:$(this),selected:!1})}),c.addClass("tau-highlighted"),c.draggable("disable");var e=[],f=b.parents(".i-role-cell:first").data();f={x:f.x,y:f.y},c.each(function(){var a=$(this);e.push({entityId:a.data("id"),elementId:a.attr("id"),cellData:f,sourceData:b.data("prevPosition").sourceData})}),this.fire("view.card.batch.move",e),this.$selectedCards=$()},"bus afterRender:last+view.card.batch.move.after:last":function(a){var b=_.values(a)[0].data.element,c=_.values(a)[1].data||{};_.forEach(c,function(a){var c=b.find("#"+a.elementId);c.draggable("enable").removeClass("tau-highlighted");if(!a.success){var d=c.data("prevPosition")||{};d.cardId?c.insertAfter("#"+d.cardId):d.cellId&&c.appendTo("#"+d.cellId)}})}})}),define("tau/ui/extensions/board.plus/ui.extension.board.plus.requestIndicator",["jQuery","app.path","tau/components/extensions/component.extension.base"],function($,a,b){return b.extend({"bus afterRender":function(b){this.fire("template.bind",{name:"boardplus.request.indicator",data:{imageSrc:a.get()+"/JavaScript/tau/css/images/loader-yellow.gif"}})},"bus template.boardplus.request.indicator.bound+afterRender":function(a){var b=a["template.boardplus.request.indicator.bound"].data.element;a.afterRender.data.element.append(b)},"bus template.boardplus.request.indicator.bound:last+model.requestBegin":function(a){var b=a["template.boardplus.request.indicator.bound"].data.element;b.show()},"bus template.boardplus.request.indicator.bound:last+model.requestCompleted":function(a){var b=a["template.boardplus.request.indicator.bound"].data.element;b.hide()}})}),define("tau/models/board.plus/model.board.collapse",["Underscore","tau/core/event.emitter"],function(_,a){return a.extend({"bus boardSettings.ready":function(a){var b=a.data.boardSettings,c=this;b.get({fields:["collapse"],callback:function(a){c.fire("settings.collapse.provided",a.collapse)}}),b.bind({fields:["collapse"],listener:c,callback:function(a){c.fire("settings.collapse.provided",a.collapse)}})},"bus boardSettings.ready:last+view.axis.collapser.executed:last":function(a){var b=_.values(a)[0].data.boardSettings,c=_.values(a)[1].data;b.get({fields:["collapse"],callback:function(a){var d=a.collapse||{};d[c]=!d[c],b.set({set:{collapse:d},callback:function(a){}})}})}})}),define("tau/ui/extensions/board.plus/ui.extension.board.plus.collapse",["jQuery","Underscore","tau/components/extensions/component.extension.base","tau/ui/extensions/board.plus/ui.board.plus.utils"],function($,_,a,b){return a.extend({"bus afterRender":function(a){var b=a.data.element,c=this,d=b.find(".i-role-header");d.delegate(".i-role-collapser","click",function(a){var b=$(this).parents(".i-role-cellholder:first");c.fire("view.axis.collapser.executed",b.attr("id"))})},"bus afterRender:last+settings.collapse.provided:last":function(a){var c=_.values(a)[0].data.element,d=_.values(a)[1].data||{},e=this,f={},g=c.find(".i-role-grid"),h=c.find(".i-role-header .i-role-cellholder");h.each(function(){var a=$(this),c=d[this.id]||!1,e=b.isCollapsed(a);if(c==e)return;a.attr("data-is-collapsed",c?"1":""),a.toggleClass("tau-collapsed",c);var h=a.attr("data-x")?"x":"y";f[h]=!0;var i=b.dimension(g,a);i.toggleClass("tau-collapsed_"+h,c),a.toggleClass("tau-collapsed_"+h,c),i.each(function(){var a=$(this),b=a.hasClass("tau-collapsed_x")||a.hasClass("tau-collapsed_y");a.toggleClass("tau-collapsed",b)})}),e.fire("view.axis.collapser.executed.after",f)}})}),define("tau/models/board.plus/model.board.focus",["Underscore","tau/core/event.emitter"],function(_,a){return a.extend({"bus boardSettings.ready":function(a){var b=a.data.boardSettings,c=this;b.get({fields:["focus"],callback:function(a){c.fire("settings.focus.provided",a.focus)}}),b.bind({fields:["focus"],listener:c,callback:function(a){c.fire("settings.focus.provided",a.focus)}})},"bus boardSettings.ready:last+view.axis.focus.executed:last":function(a){var b=_.values(a)[0].data.boardSettings,c=_.values(a)[1].data;b.set({set:{focus:c},callback:function(a){}})}})}),define("tau/ui/extensions/board.plus/ui.extension.board.plus.focus",["jQuery","tau/components/extensions/component.extension.base","tau/ui/extensions/board.plus/ui.board.plus.utils"],function($,a,b){return a.extend({"bus afterRender":function(a){var c=a.data.element,d=this,e=c.find(".i-role-grid"),f=c.find(".i-role-header"),g=f.find(".i-role-cellholder"),h=c.find("[role=action-focus]"),i=c.find("[role=action-unfocus]");f.delegate("[name=focus]","change",function(){var a=$(this).parents(".i-role-cellholder:first"),c=a.parents(".i-role-header:first").data("dimension"),d=b.dimension(e,a).add(a);d.toggleClass("tau-selected_"+c),d.each(function(){var a=$(this);a.toggleClass("tau-selected",a.hasClass("tau-selected_x")||a.hasClass("tau-selected_y"))});var g=f.find("[name=focus]:checked");g.length?h.prop("disabled",!1):h.prop("disabled",!0)}),h.on("click",function(){var a={};f.each(function(){var b=$(this),c=a[b.data("dimension")]=[];b.find(".i-role-cellholder:has([name=focus]:checked)").each(function(){c.push(this.id)})}),d.fire("view.axis.focus.executed",{focus:!0,values:a})}),i.on("click",function(){d.fire("view.axis.focus.executed",{focus:!1,values:[]})})},"bus afterRender:last+settings.focus.provided:last":function(a){var c=_.values(a)[0].data.element,d=_.values(a)[1].data||{},e=this,f=c.find(".i-role-grid"),g=c.find(".i-role-header");c.find(".i-role-cellholder").removeClass("tau-selected").removeClass("tau-selected_x").removeClass("tau-selected_y"),g.find("input[name=focus]").prop("checked",!1);var h=c.find("[role=action-focus]"),i=c.find("[role=action-unfocus]");if(!d.focus){var j={};g.each(function(){var a=$(this),c=a.attr("data-dimension"),d=a.find(".i-role-cellholder");d.each(function(){var a=$(this),d=b.isHidden(a);if(!d)return;a.attr("data-is-hidden",""),j[c]=!0;var e=b.dimension(f,a).add(a);e.show()})}),i.prop("disabled",!0),h.prop("disabled",!0),e.fire("view.axis.focus.executed.after",j)}else if(d.focus===!0){var j={},k=d.values;g.each(function(){var a=$(this),c=a.attr("data-dimension"),d=k[c];if(d&&d.length){var e=a.find(".i-role-cellholder");e.each(function(){var a=$(this),e=b.isHidden(a);if(!_.inArray(this.id,d)){a.attr("data-is-hidden","1"),j[c]=!0;var g=b.dimension(f,a).add(a);g.hide()}else if(e){a.attr("data-is-hidden",""),j[c]=!0;var g=b.dimension(f,a).add(a);g.show()}})}}),i.prop("disabled",!1),h.prop("disabled",!0),e.fire("view.axis.focus.executed.after",j)}}})}),define("tau/ui/extensions/board.plus/ui.extension.board.plus.name",["jQuery","tau/components/extensions/component.extension.base","tau/ui/extensions/board.plus/ui.board.plus.utils"],function($,a,b){return a.extend({"bus boardSettings.ready":function(a){var b=a.data.boardSettings,c=this;b.get({fields:["name"],callback:function(a){c.fire("board.name.ready",{name:a.name})}})},"bus afterRender:last+board.name.ready:last":function(a){var b=_.values(a)[0].data.element,c=_.values(a)[1].data.name;b.find(".i-role-name").text(c)}})}),define("tau/ui/extensions/board.plus/ui.extension.board.plus.cardsViewer",["jQuery","app.path","tau/components/extensions/component.extension.base"],function($,a,b){return b.extend({childApplicationId:"popup","bus view.skeleton.built":function(a){var b=a.data.element;b.delegate(".tau-id","mousedown",$.proxy(this.onCardIdMouseDown,this)),this.subscribe(b,$.proxy(this.loadCardDetails,this)),this.restore(b)},onCardIdMouseDown:function(a){a.stopPropagation()},restore:function(a){var b=this,c=b.config.context.configurator.getExternal(),d=c.getHashParam(b.childApplicationId,null);if(d!==null){var e=d.split("/");b.builtInCardDetails(a,{type:e[0],id:e[1]})}},subscribe:function(a,b){a.delegate(".i-role-card","dblclick",function(a){var c=$(a.currentTarget).data();b(c)})},loadCardDetails:function(a){this.fire("view.load.cardDetails",a)},"bus view.skeleton.built:last+view.load.cardDetails":function(a){var b=a["view.skeleton.built"].data.element,c=a["view.load.cardDetails"].data;this.builtInCardDetails(b,c)},builtInCardDetails:function(a,b){var c=this;require(["tau/components/component.application","tau/configurator"],function(a,d){var e=d;e.pushRouting(),e.isBoardEdition=!0;var f=a.create({applicationId:c.childApplicationId,pageType:b.type,pageId:b.id,integration:{showInPopup:!0},context:{configurator:d}});f.on("destroy",function(){e.popRouting()}),c.on("destroy",function(){f.fire("destroy")}),f.initialize()})}})}),define("tau/models/board.plus/model.dataUpdater",["Underscore","tau/core/event.emitter"],function(_,a){var b={},c=0;return a.extend({dataSchema:{1:{query:{userstory:[]},dataFields:{userstory:[]}},2:{query:{userstory:[]},dataFields:{userstory:[]}},3:{query:{userstory:[]},dataFields:{userstory:[]}},4:{query:{userstory:["tags"]},dataFields:{userstory:["tags"]}},5:{query:{userstory:[]},dataFields:{userstory:[]}},6:{query:{userstory:[{assignments:[{generalUser:["id","firstName","lastName"]}]},"effort",{impediments:[{entityState:["isFinal"]}]},{bugs:[{entityState:["isFinal","isInitial","isPlanned"]}]},{tasks:[{entityState:["isFinal","isInitial","isPlanned"]}]}]},dataFields:{userstory:["assignments","effort","impediments","bugs","tasks"]}}},init:function(a){this._super(a),this.config=a,this.reguestsCount=0},"bus model.data.loader.registerItems":function(a){var b=[];this.registerItems=this.registerItems||{};var c=a.data.items;for(var d=0;d<c.length;d++){var e=c[d],f=this.registerItems[e.id]=this.registerItems[e.id]||{};_.extend(f,e),b.push(f)}this.fire("model.data.loader.itemsUpdated",{items:f})},handleOperations:function(a,b,c){var d=100,e=0,f=Math.min(e+d,a.length),g=this,h=function(){var i=b,j={};for(;e<f;e++){var k=a[e],l=k.type,m=j[l]=j[l]||{$in:[],fields:[],type:l};m.$in.push(k.id),m.fields=_.union(m.fields,k.fields)}_.each(j,function(a){i=i.turboGet(l,{$query:{id:{$in:a.$in}},fields:a.fields})}),g.beforeRequest(),i.done({success:function(){g.requestComplete(),c.apply(this,arguments)},failed:function(){g.requestComplete()}}),f!=a.length&&(f=Math.min(e+d,a.length),h())};h()},beforeRequest:function(){this.reguestsCount++,this.reguestsCount==1&&this.fire("model.requestBegin")},requestComplete:function(){--this.reguestsCount==0&&this.fire("model.requestCompleted")},getDataForZoomLevel:function(a,b){var c=this.getStoreOperationsForZoomLevel(a,_.map(this.registerItems,function(a){return a}));this.executeStoreOperations(c,b)},"bus initialize:last+model.zoomLevelChanged":function(a){var b=a["model.zoomLevelChanged"].data.zoomLevel,c=a.initialize.data.context.configurator.storeFactory.getStore();this.getDataForZoomLevel(b,c)},executeStoreOperations:function(a,b){var c=_.bind(this.dataRetrieved,this);a.length>0&&(this.fire("model.data.loader.willRegisterDataRequests"),this.handleOperations(a,b,c),this.fire("model.data.loader.didRegisterDataRequests"))},"bus model.data.loader.registerItems+initialize+model.zoomLevelChanged":function(a){var b=a.initialize.data.context.configurator.storeFactory.getStore(),c=this,d=a["model.zoomLevelChanged"].data.zoomLevel+1;d<7&&(d=7,c.getDataForZoomLevel(d,b))},"bus initialize:last+model.zoomLevelChanged:last+model.data.loader.registerItems":function(a){var b=a["model.zoomLevelChanged"].data.zoomLevel,c=this.getStoreOperationsForZoomLevel(b,a["model.data.loader.registerItems"].data.items),d=this.config.context.configurator.getStore();this.executeStoreOperations(c,d)},dataRetrieved:function(a){var b=a[0].data,c=[],d=this.registerItems||{};_.each(b,function(a){_.extend(d[a.id],a),_.extend(d[a.id],this.extractCountFields(a)),_.extend(d[a.id],this.splitTags(a));var b=d[a.id];c.push(b)},this),this.fire("model.dataUpdated",{items:c})},getCollectionInfo:function(a){var b={plannedCount:_.filter(a,function(a){var b=a.entityState;return b.isPlanned||b.isInitial}).length,inProgressCount:_.filter(a,function(a){var b=a.entityState;return!b.isPlanned&&!b.isInitial&&!b.isFinal}).length};return b},addCollectionInfo:function(a,b,c){if(_.isArray(a)){var d=this.getCollectionInfo(a);if(d.plannedCount||d.inProgressCount)c[b]=d}},extractCountFields:function(a){var b={};return _.isArray(a.impediments)&&(b.openImpedimentsCount=_.filter(a.impediments,function(a){return!a.entityState.isFinal}).length),this.addCollectionInfo(a.tasks,"tasksInfo",b),this.addCollectionInfo(a.bugs,"bugsInfo",b),b},splitTags:function(a){return _.isString(a.tags)&&a.tags.length>0?{tags:a.tags.split(",")}:{}},getStoreOperationsForZoomLevel:function(a,c){var d=new Date,e=[],f=[];for(var g=0;g<c.length;g++){var h=c[g],i=_.map(h,function(a,b){return b}),j,k=this.dataSchema;for(var l=1;l<=a;l++){if(!k.hasOwnProperty(l))break;var m=k[l],n=h.type.toLowerCase(),o=m.query[n]||[],p=m.dataFields[n]||[];if(p.length>0){var q=_.intersection(i,p),r=q.length===p.length;_.chain().difference(i,q).each(function(a){h[a]==b}),r||(j=j||{type:h.type,fields:[],id:h.id},j.fields=_.union(j.fields,o))}}j&&(f.push(j.id),e.push(j)),j=null}return e}})}),define("tau/models/model.board.zoomLevel",["Underscore","tau/core/model-base"],function(_,a){var b=a.extend({"bus boardSettings.ready":function(a){var b=this,c=a.data.boardSettings;c.bind({fields:["zoomLevel"],listener:b,callback:_.bind(b.onZoomLevelUpdated,b)}),c.get({fields:["zoomLevel"],callback:_.bind(b.onDataReady,b)})},onDataReady:function(a){var b=this,c={zoomLevel:a.zoomLevel};b.bus.fire("zoomLevelReady",c),this.config.bindData&&b.bus.fire("dataBind",c),!this.validateZoomLevel(a.zoomLevel)&&this.normalizeZoomLevel(a.zoomLevel)&&this.fire("updateZoomLevel",{zoomLevel:this.normalizeZoomLevel(a.zoomLevel)})},validateZoomLevel:function(a){return this.config.hasOwnProperty("min")&&a<this.config.min?!1:this.config.hasOwnProperty("max")&&a>this.config.max?!1:a!=undefined},normalizeZoomLevel:function(a){if(this.config.hasOwnProperty("min")&&this.config.hasOwnProperty("max")){if(a==undefined)return this.config.defaultValue;if(a<this.config.min)return this.config.min;if(a>this.config.max)return this.config.max}return a},onZoomLevelUpdated:function(a){var b=this;if(!this.validateZoomLevel(a.zoomLevel))return;b.bus.fire("zoomLevelUpdated",a)},"bus boardSettings.ready:last+updateZoomLevel":function(a){var b=a["boardSettings.ready"].data.boardSettings,c=a.updateZoomLevel.data,d=c.zoomLevel;this.validateZoomLevel(d)||(d=this.normalizeZoomLevel(d)),b.set({set:{zoomLevel:d}})}});return b}),define("tau/ui/extensions/board.zoomLevel/ui.extension.board.zoomLevel.editable",["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(_,$,a){return a.extend({"bus afterRender+zoomLevelReady":function(a){var b=a.afterRender.data.element,c=a.zoomLevelReady.data,d={max:this.config.max,min:this.config.min,animate:!0,change:_.bind(this.onSliderChange,this),value:c.zoomLevel};this.config.bindData||(b=b.find(".tau-zoomer")),b.slider(d)},onSliderChange:function(a,b){this.updateZoomLevel(b.value)},updateZoomLevel:function(a){var b=this;b.bus.fire("updateZoomLevel",{zoomLevel:a})},"bus zoomLevelUpdated+afterRender:last":function(a){var b=a.afterRender.data.element,c=a.zoomLevelUpdated.data;this.config.bindData||(b=b.find(".tau-zoomer")),b.slider({value:c.zoomLevel})}})}),define("tau/ui/extensions/board.plus/ui.extension.board.plus.viewMode",["jQuery","tau/components/extensions/component.extension.base"],function($,a){return a.extend({"bus afterRender+boardSettings.ready":function(a){var b=this,c=a.afterRender.data.element,d=a["boardSettings.ready"].data.boardSettings,e=$('<button class="tau-btn">List</button>').click(function(){d.set({set:{viewMode:"list"}})}),f=$('<button class="tau-btn">Board</button>').click(function(){d.set({set:{viewMode:"board"}})}),g=$('<span class="tau-btn-group" style="float:right;margin:0.5em 0;"></span>');g.append(e).append(f),c.find(".tau-board-header").append(g)}})}),define("tau/ui/extensions/board.plus/ui.extension.board.plus.profiler",["Underscore","jQuery","tau/core/event.emitter"],function(_,$,a){var b=function(a,b){var c=_(a).chain().find(function(a){return a.name===b}).value();return c},c=function(a,b){var c=_(a).chain().select(function(a){return a.name===b}).value();return c},d=function(a,c,d){var e=b(a,c),f=b(a,d);return f.tick-e.tick},e=function(a){var b=a[0],c=a[a.length-1];return c.tick-b.tick},f=function(a){var b=d(a,"initialize","view.skeleton.built"),c=d(a,"model.get.sliceInfo","model.sliceInfo.retrieved");return{client:b-c,server:c,total:b}},g=function(a,b,c,d,e){var f={};for(var g=0;g<a.length;g++){var h=a[g],i=e(h),j=_(b).find(function(a){var b=e(a);return b==i});if(!j)console.log("pair event ["+d+"] is not found for ["+c+"]"),console.log("cell group: "+i);else{var k={id:i,orig:h,pair:j};f[k.id]=k}}return f},h=function(a){var b=_(a).max(function(a){return a}),c=0;_(a).each(function(a){c+=a});var d=c/a.length;return{avg:d.toFixed(2),max:b.toFixed(2),total:c.toFixed(2)}},i=function(a){var d=b(a,"view.cellSlot.built.start"),e=c(a,"view.cellSlot.built"),f=c(a,"view.cell.skeleton.built"),i=d,j=f[f.length-1],k=j.tick-i.tick,l=c(a,"model.get.cell.basicInfo"),m=c(a,"model.cell.basicInfo.retrieved"),n=g(l,m,"model.get.cell.basicInfo","model.cell.basicInfo.retrieved",function(a){return["x",a.data.x,"y",a.data.y].join("")}),o=g(e,f,"view.cellSlot.built","view.cell.skeleton.built",function(a){return["x",a.data.data.x,"y",a.data.data.y].join("")}),p=[],q=[];return _(o).each(function(a,b){var c=a.pair.tick-a.orig.tick,d=n[b],e=0;d.orig.data.hasOwnProperty("x")&&d.orig.data.hasOwnProperty("y")&&(e=d.pair.tick-d.orig.tick,p.push(e));var f=c-e;q.push(f)}),{total:k,client:h(q),server:h(p)}},j=function(a){var b=$("<div></div>");b.width(375),b.height(225),b.empty().append("<p><b>Performance statistics:</b></p>");for(var c=0;c<arguments.length;c++){b.append("<hr />");if(_.isArray(arguments[c]))for(var d=0;d<arguments[c].length;d++)b.append("<p style='padding:1;margin:0;'>"+arguments[c][d]+"</p>");else b.append("<p style='padding:1;margin:0;'>"+arguments[c]+"</p>")}return b};return a.extend({init:function(a){this._super(a),this.expected=0,this.actual=0},"bus model.sliceInfo.retrieved":function(a){var b=a.data,c=b.marksX.length,d=b.marksY.length,e=b.marksX.length!==1||b.marksX[0].x!=="-1",f=b.marksY.length!==1||b.marksY[0].x!=="-1";this.expected=c*d,e&&f&&(this.expected+=c+d)},"bus profiler.ready:last+afterRender:last+view.cell.skeleton.built":function(a){++this.actual;var b=this.actual===this.expected;if(b){var c=a["profiler.ready"].data.profiler,d=a.afterRender.data.element;c.stop();var e=c.data(),f=e[0],g=e[e.length-1],h=g.tick-f.tick,i=["D",'<sup style="background-color:rgba(255, 25, 0, 0.5);font-size:9px;border:1px solid;color:#000;padding:0 1px 0 1px;">',h,"</sup>"].join("");this.buildDiagnostics(c,d,i)}},buildDiagnostics:function(a,b,c){var d=$("<div></div>");d.css("padding","4px").css("background","rgba(125, 125, 125, 0.7)").css("font-size","10px").css("color","#ffffff").css("width","20px").css("height","20px").css("z-index","100").css("margin-top","3px").css("margin-left","3px").css("position","absolute");var g=function(){var c=a.data(),g=b.find("[role=header]"),h=g.filter("[data-dimension=x]").find("[role=cell]").size(),k=g.filter("[data-dimension=y]").find("[role=cell]").size(),l=b.find("[role=grid]").find("[role=card]").size(),m="Slice: "+h+" x "+k+" ["+l+" cards]",n="Overall time: ["+e(c)+"] ms",o=f(c),p=["Basic skeleton: ["+o.total+"] ms","> Client: ["+o.client+"] ms","> Server: ["+o.server+"] ms"],q=i(c),r="Cells skeletons build process has taken ["+q.total+"] ms",s=["> Server: ","[","AVG:"+q.server.avg," / ","MAX: "+q.server.max,"] ms"].join(""),t=["> Client: ","[","AVG:"+q.client.avg," / ","MAX: "+q.client.max," / ","SUM: "+q.client.total,"] ms"].join(""),u=j(m,n,p,[r,s,t]);u.css("padding","4px").css("background","rgba(125, 125, 125, 0.7)").css("font-size","10px").css("color","#ffffff").css("z-index","100").css("position","absolute").css("top","29px").css("left",0).appendTo(d),d.children().eq(0).toggle(function(){u.hide()},function(){u.show()})},h=$("<div title='diagnostics'>"+c+"</div>");h.css("color","#A9D975").css("font-size","18px").css("font-family","Tahoma").css("text-align","center").css("width","100%").css("height","100%").css("line-height","100%").css("cursor","pointer").one("click",g),d.append(h),b.append(d)}})}),define("tau/ui/extensions/ui.extension.templateBinder",["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/core/templates-factory"],function(_,$,a,b){return a.extend({"bus template.bind":function(a){var c=a.data,d=c.name,e=c.data,f=c.config||{},g=b.get(d),h=g.bind(f,e);c.element=h,this.fire("template."+d+".bound",c)},"bus template.pure.bind":function(a){var c=a.data,d=c.name,e=c.data,f=c.config||{},g=b.get(d),h=g.bindPure(f,e);c.html=h,this.fire("template."+d+".pure.bound",c)}})}),define("tau/ui/templates/board.plus/ui.template.boardplus.skeleton",["Underscore","tau/core/templates-factory","tau/ui/extensions/board.plus/ui.board.plus.utils"],function(_,a,b){var c={name:"boardplus.skeleton",engine:"jqote2",customFunctions:{generateId:b.generateId,generateCellData:b.generateElementData},markup:['<% var hasX = !(this.marksX.length === 1 && this.marksX[0].x === "-1"); %>','<% var hasY = !(this.marksY.length === 1 && this.marksY[0].y === "-1"); %>','<div class="tau-board tau-board_animate_false <% if (!hasX && !hasY) { %> tau-board-list<% } %>">','<div class="tau-board-header">','<div class="i-role-name tau-board-name"><%= this.name %></div>','<span class="tau-btn-group tau-focuser">','<button role="action-focus" disabled=""    class="tau-btn tau-focus-in">focus</button>','<button role="action-unfocus" disabled=""  class="tau-btn tau-close tau-focus-out"></button>',"</span>",'<span class="tau-zoomer ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all">','<a href="#" class="ui-slider-handle ui-state-default ui-corner-all" style="left: 100%;"></a>',"</span>","</div>",'<div class="tau-board-body">','<div class="tau-board-grid-view">','<div role="board-body" class="i-role-board-body">',"<% if (hasX && hasY) { %>",'<div class="tau-x-header">',"</div>","<% } %>","<% if (hasY) { %>",'<div role="header" data-dimension="y" class="i-role-header tau-rows-header">',"<ul>","<% for (var y = 0; y < this.marksY.length; y++) { %>","<% var m = this.marksY[y]; %>",'<li role="cellholder" class="i-role-cellholder" id="ch_<%= fn.generateId(m) %>" <%= fn.generateCellData({y:m.y}) %>>','<div role="cell" class="i-role-cell tau-cell" id="<%= fn.generateId(m) %>" <%= fn.generateCellData({y:m.y}) %>>',"</div>","</li>","<% } %>","</ul>","</div>","<% } %>","<% if (hasX) { %>",'<div role="header" data-dimension="x" class="i-role-header tau-cols-header">',"<ul>","<% for (var x = 0; x < this.marksX.length; x++) { %>","<% var m = this.marksX[x]; %>",'<li role="cellholder" class="i-role-cellholder" id="ch_<%= fn.generateId(m) %>" <%= fn.generateCellData({x:m.x}) %>>','<div role="cell" class="i-role-cell tau-cell" id="<%= fn.generateId(m) %>" <%= fn.generateCellData({x:m.x}) %>>',"</div>","</li>","<% } %>","</ul>","</div>","<% } %>",'<div role="grid" class="i-role-grid tau-grid" id="grid_<%= _.uniqueId() %>">',"<table>","<tbody>","<% for (var y = 0; y < this.marksY.length; y++) { %>","<% var rowCoords = { y: this.marksY[y].y }; %>","<tr>","<% for (var x = 0; x < this.marksX.length; x++) { %>","<% var coords = { x: this.marksX[x].x, y: this.marksY[y].y }; %>",'<td role="cellholder" class="i-role-cellholder" id="ch_<%= fn.generateId(coords) %>" <%= fn.generateCellData(coords) %> >','<div role="cell" class="i-role-cell tau-cell" id="<%= fn.generateId(coords) %>" <%= fn.generateCellData(coords) %>>',"</div>","</td>","<% } %>","</tr>","<% } %>","</tbody>","</table>","</div>","</div>","</div>","</div>","</div>"],dependencies:[]};return a.register(c)}),define("tau/ui/templates/board.plus/ui.template.boardplus.card.id",["tau/core/templates-factory"],function(a){var b={name:"boardplus.card.id",engine:"jqote2",customFunctions:{generateCardRef:function(a){return["#",a.type.toLowerCase(),"/",a.id].join("")}},markup:['<a class="tau-id" href="<%= fn.generateCardRef(this) %>"><%= this.id %></a>'].join("")};return a.register(b)}),define("tau/ui/templates/board.plus/ui.template.boardplus.card.skeleton",["tau/core/templates-factory","tau/ui/extensions/board.plus/ui.board.plus.utils","tau/ui/templates/board.plus/ui.template.boardplus.card.id"],function(a,b){var c={name:"boardplus.card.skeleton",engine:"jqote2",customFunctions:{generateCardData:b.generateElementData,generateCardId:b.generateCardId},markup:[['<div role="card" class="tau-card i-role-card tau-<%= this.type.toLowerCase()%>" id="<%= fn.generateCardId(this) %>" <%= fn.generateCardData({ id: this.id, type: this.type }) %>>',"   <div>",'       <%= fn.sub("boardplus.card.id", this) %>',"   </div>","   <div>",'       <div class="tau-name"><%= this.name %></div>',"   </div>","   <div>","   </div>","</div>"].join("")]};return a.register(c)}),define("tau/ui/templates/board.plus/ui.template.boardplus.cell.grid.skeleton",["tau/core/templates-factory","tau/ui/templates/board.plus/ui.template.boardplus.card.skeleton"],function(a){var b={name:"boardplus.cell.grid.skeleton",engine:"jqote2",markup:[["<% for(var itemIndex = 0; itemIndex < this.dynamic.items.length; itemIndex++) { %>","<%      var dataItem = this.dynamic.items[itemIndex]; %>",'<%=     fn.sub("boardplus.card.skeleton", dataItem.data) %>',"<% } %>"].join("")]};return a.register(b)}),define("tau/ui/templates/board.plus/ui.template.boardplus.cell.axis.skeleton",["tau/core/templates-factory"],function(a){var b={name:"boardplus.cell.axis.skeleton",engine:"jqote2",markup:[['<div class="tau-label"><%= this.dynamic.items[0].data.name %></div>','<label class="tau-selector"><input type="checkbox" name="focus"></label>','<div class="tau-collapser">','<button  role="collapser" class="i-role-collapser tau-v-collapser"></button>',"</div>"].join("")],dependencies:[]};return a.register(b)}),define("tau/ui/templates/board.plus/ui.template.boardplus.card.assignments",["tau/core/templates-factory","app.path"],function(a,b){var c={name:"boardplus.card.assignments",engine:"jqote2",customFunctions:{getAppPath:function(){return b.get()}},markup:[['<span class="tau-avatar"><img  alt="<%= this.generalUser.firstName + \' \' + this.generalUser.lastName %>" title="<%= this.generalUser.firstName + \' \' + this.generalUser.lastName %>"  src="<%= fn.getAppPath() %>/Avatar.ashx?UserID=<%= this.generalUser.id%>&size=24" /></span>'].join("")]};return a.register(c)}),define("tau/ui/templates/board.plus/ui.template.boardplus.request.indicator",["tau/core/templates-factory"],function(a){var b={name:"boardplus.request.indicator",engine:"jqote2",markup:['<div style="display:none;" role="status" aria-hidden="true">','<div class="loadBar" id="loadDiv">','<img class="icon" src="<%= this.imageSrc %>">&nbsp;<span>Loading</span>',"</div>","</div>"].join("")};return a.register(b)}),define("tau/utils/utils.date/utils.date.formats",[],function(){var a={};return a={date:{"short":"d-MMM-yyyy"},time:{"short":"HH:mm"},datetime:{"short":"d-MMM-yyyy HH:mm"}},a}),define("tau/utils/utils.translation",["Underscore"],function(_){var a={pluralize:function(a,b){var c=_.isArray(a)?a:a.split("|"),d=function(a){return a===1?0:1},e=d(b);return c[e]?c[e]:c[0]}};return a}),Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]},function(){var a=Date,b=a.prototype,c=a.CultureInfo,d=function(a,b){return b||(b=2),("000"+a).slice(b*-1)};b.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},b.setTimeToNow=function(){var a=new Date;return this.setHours(a.getHours()),this.setMinutes(a.getMinutes()),this.setSeconds(a.getSeconds()),this.setMilliseconds(a.getMilliseconds()),this},a.today=function(){return(new Date).clearTime()},a.compare=function(a,b){if(isNaN(a)||isNaN(b))throw new Error(a+" - "+b);if(a instanceof Date&&b instanceof Date)return a<b?-1:a>b?1:0;throw new TypeError(a+" - "+b)},a.equals=function(a,b){return a.compareTo(b)===0},a.getDayNumberFromName=function(a){var b=c.dayNames,d=c.abbreviatedDayNames,e=c.shortestDayNames,f=a.toLowerCase();for(var g=0;g<b.length;g++)if(b[g].toLowerCase()==f||d[g].toLowerCase()==f||e[g].toLowerCase()==f)return g;return-1},a.getMonthNumberFromName=function(a){var b=c.monthNames,d=c.abbreviatedMonthNames,e=a.toLowerCase();for(var f=0;f<b.length;f++)if(b[f].toLowerCase()==e||d[f].toLowerCase()==e)return f;return-1},a.isLeapYear=function(a){return a%4===0&&a%100!==0||a%400===0},a.getDaysInMonth=function(b,c){return[31,a.isLeapYear(b)?29:28,31,30,31,30,31,31,30,31,30,31][c]},a.getTimezoneAbbreviation=function(a){var b=c.timezones,d;for(var e=0;e<b.length;e++)if(b[e].offset===a)return b[e].name;return null},a.getTimezoneOffset=function(a){var b=c.timezones,d;for(var e=0;e<b.length;e++)if(b[e].name===a.toUpperCase())return b[e].offset;return null},b.clone=function(){return new Date(this.getTime())},b.compareTo=function(a){return Date.compare(this,a)},b.equals=function(a){return Date.equals(this,a||new Date)},b.between=function(a,b){return this.getTime()>=a.getTime()&&this.getTime()<=b.getTime()},b.isAfter=function(a){return this.compareTo(a||new Date)===1},b.isBefore=function(a){return this.compareTo(a||new Date)===-1},b.isToday=function(){return this.isSameDay(new Date)},b.isSameDay=function(a){return this.clone().clearTime().equals(a.clone().clearTime())},b.addMilliseconds=function(a){return this.setMilliseconds(this.getMilliseconds()+a),this},b.addSeconds=function(a){return this.addMilliseconds(a*1e3)},b.addMinutes=function(a){return this.addMilliseconds(a*6e4)},b.addHours=function(a){return this.addMilliseconds(a*36e5)},b.addDays=function(a){return this.setDate(this.getDate()+a),this},b.addWeeks=function(a){return this.addDays(a*7)},b.addMonths=function(b){var c=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+b),this.setDate(Math.min(c,a.getDaysInMonth(this.getFullYear(),this.getMonth()))),this},b.addYears=function(a){return this.addMonths(a*12)},b.add=function(a){if(typeof a=="number")return this._orient=a,this;var b=a;return b.milliseconds&&this.addMilliseconds(b.milliseconds),b.seconds&&this.addSeconds(b.seconds),b.minutes&&this.addMinutes(b.minutes),b.hours&&this.addHours(b.hours),b.weeks&&this.addWeeks(b.weeks),b.months&&this.addMonths(b.months),b.years&&this.addYears(b.years),b.days&&this.addDays(b.days),this};var e,f,g;b.getWeek=function(){var a,b,c,d,h,i,j,k,l,m;return e=e?e:this.getFullYear(),f=f?f:this.getMonth()+1,g=g?g:this.getDate(),f<=2?(a=e-1,b=(a/4|0)-(a/100|0)+(a/400|0),c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0),l=b-c,h=0,i=g-1+31*(f-1)):(a=e,b=(a/4|0)-(a/100|0)+(a/400|0),c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0),l=b-c,h=l+1,i=g+(153*(f-3)+2)/5+58+l),j=(a+b)%7,d=(i+j-h)%7,k=i+3-d|0,k<0?m=53-((j-l)/5|0):k>364+l?m=1:m=(k/7|0)+1,e=f=g=null,m},b.getISOWeek=function(){return e=this.getUTCFullYear(),f=this.getUTCMonth()+1,g=this.getUTCDate(),d(this.getWeek())},b.setWeek=function(a){return this.moveToDayOfWeek(1).addWeeks(a-this.getWeek())},a._validate=function(a,b,c,d){if(typeof a=="undefined")return!1;if(typeof a!="number")throw new TypeError(a+" is not a Number.");if(a<b||a>c)throw new RangeError(a+" is not a valid value for "+d+".");return!0},a.validateMillisecond=function(b){return a._validate(b,0,999,"millisecond")},a.validateSecond=function(b){return a._validate(b,0,59,"second")},a.validateMinute=function(b){return a._validate(b,0,59,"minute")},a.validateHour=function(b){return a._validate(b,0,23,"hour")},a.validateDay=function(b,c,d){return a._validate(b,1,a.getDaysInMonth(c,d),"day")},a.validateMonth=function(b){return a._validate(b,0,11,"month")},a.validateYear=function(b){return a._validate(b,0,9999,"year")},b.set=function(b){return a.validateMillisecond(b.millisecond)&&this.addMilliseconds(b.millisecond-this.getMilliseconds()),a.validateSecond(b.second)&&this.addSeconds(b.second-this.getSeconds()),a.validateMinute(b.minute)&&this.addMinutes(b.minute-this.getMinutes()),a.validateHour(b.hour)&&this.addHours(b.hour-this.getHours()),a.validateMonth(b.month)&&this.addMonths(b.month-this.getMonth()),a.validateYear(b.year)&&this.addYears(b.year-this.getFullYear()),a.validateDay(b.day,this.getFullYear(),this.getMonth())&&this.addDays(b.day-this.getDate()),b.timezone&&this.setTimezone(b.timezone),b.timezoneOffset&&this.setTimezoneOffset(b.timezoneOffset),b.week&&a._validate(b.week,0,53,"week")&&this.setWeek(b.week),this},b.moveToFirstDayOfMonth=function(){return this.set({day:1})},b.moveToLastDayOfMonth=function(){return this.set({day:a.getDaysInMonth(this.getFullYear(),this.getMonth())})},b.moveToNthOccurrence=function(a,b){var c=0;if(b>0)c=b-1;else if(b===-1)return this.moveToLastDayOfMonth(),this.getDay()!==a&&this.moveToDayOfWeek(a,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(a,1).addWeeks(c)},b.moveToDayOfWeek=function(a,b){var c=(a-this.getDay()+7*(b||1))%7;return this.addDays(c===0?c+=7*(b||1):c)},b.moveToMonth=function(a,b){var c=(a-this.getMonth()+12*(b||1))%12;return this.addMonths(c===0?c+=12*(b||1):c)},b.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864e5)+1},b.getTimezone=function(){return a.getTimezoneAbbreviation(this.getUTCOffset())},b.setTimezoneOffset=function(a){var b=this.getTimezoneOffset(),c=Number(a)*-6/10;return this.addMinutes(c-b)},b.setTimezone=function(b){return this.setTimezoneOffset(a.getTimezoneOffset(b))},b.hasDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()},b.isDaylightSavingTime=function(){return this.hasDaylightSavingTime()&&(new Date).getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset()},b.getUTCOffset=function(){var a=this.getTimezoneOffset()*-10/6,b;return a<0?(b=(a-1e4).toString(),b.charAt(0)+b.substr(2)):(b=(a+1e4).toString(),"+"+b.substr(1))},b.getElapsed=function(a){return(a||new Date)-this},b.toISOString||(b.toISOString=function(){function a(a){return a<10?"0"+a:a}return'"'+this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+'Z"'}),b._toString=b.toString,b.toString=function(a){var b=this;if(a&&a.length==1){var e=c.formatPatterns;b.t=b.toString;switch(a){case"d":return b.t(e.shortDate);case"D":return b.t(e.longDate);case"F":return b.t(e.fullDateTime);case"m":return b.t(e.monthDay);case"r":return b.t(e.rfc1123);case"s":return b.t(e.sortableDateTime);case"t":return b.t(e.shortTime);case"T":return b.t(e.longTime);case"u":return b.t(e.universalSortableDateTime);case"y":return b.t(e.yearMonth)}}var f=function(a){switch(a*1){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};return a?a.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(a){if(a.charAt(0)==="\\")return a.replace("\\","");b.h=b.getHours;switch(a){case"hh":return d(b.h()<13?b.h()===0?12:b.h():b.h()-12);case"h":return b.h()<13?b.h()===0?12:b.h():b.h()-12;case"HH":return d(b.h());case"H":return b.h();case"mm":return d(b.getMinutes());case"m":return b.getMinutes();case"ss":return d(b.getSeconds());case"s":return b.getSeconds();case"yyyy":return d(b.getFullYear(),4);case"yy":return d(b.getFullYear());case"dddd":return c.dayNames[b.getDay()];case"ddd":return c.abbreviatedDayNames[b.getDay()];case"dd":return d(b.getDate());case"d":return b.getDate();case"MMMM":return c.monthNames[b.getMonth()];case"MMM":return c.abbreviatedMonthNames[b.getMonth()];case"MM":return d(b.getMonth()+1);case"M":return b.getMonth()+1;case"t":return b.h()<12?c.amDesignator.substring(0,1):c.pmDesignator.substring(0,1);case"tt":return b.h()<12?c.amDesignator:c.pmDesignator;case"S":return f(b.getDate());default:return a}}):this._toString()}}(),function(){var a=Date,b=a.prototype,c=a.CultureInfo,d=Number.prototype;b._orient=1,b._nth=null,b._is=!1,b._same=!1,b._isSecond=!1,d._dateElement="day",b.next=function(){return this._orient=1,this},a.next=function(){return a.today().next()},b.last=b.prev=b.previous=function(){return this._orient=-1,this},a.last=a.prev=a.previous=function(){return a.today().last()},b.is=function(){return this._is=!0,this},b.same=function(){return this._same=!0,this._isSecond=!1,this},b.today=function(){return this.same().day()},b.weekday=function(){return this._is?(this._is=!1,!this.is().sat()&&!this.is().sun()):!1},b.at=function(b){return typeof b=="string"?a.parse(this.toString("d")+" "+b):this.set(b)},d.fromNow=d.after=function(a){var b={};return b[this._dateElement]=this,(a?a.clone():new Date).add(b)},d.ago=d.before=function(a){var b={};return b[this._dateElement]=this*-1,(a?a.clone():new Date).add(b)};var e="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),f="january february march april may june july august september october november december".split(/\s/),g="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),h="Milliseconds Seconds Minutes Hours Date Week Month FullYear".split(/\s/),i="final first second third fourth fifth".split(/\s/),j;b.toObject=function(){var a={};for(var b=0;b<g.length;b++)a[g[b].toLowerCase()]=this["get"+h[b]]();return a},a.fromObject=function(a){return a.week=null,Date.today().set(a)};var k=function(b){return function(){if(this._is)return this._is=!1,this.getDay()==b;if(this._nth!==null){this._isSecond&&this.addSeconds(this._orient*-1),this._isSecond=!1;var c=this._nth;this._nth=null;var d=this.clone().moveToLastDayOfMonth();this.moveToNthOccurrence(b,c);if(this>d)throw new RangeError(a.getDayName(b)+" does not occur "+c+" times in the month of "+a.getMonthName(d.getMonth())+" "+d.getFullYear()+".");return this}return this.moveToDayOfWeek(b,this._orient)}},l=function(b){return function(){var d=a.today(),e=b-d.getDay();return b===0&&c.firstDayOfWeek===1&&d.getDay()!==0&&(e+=7),d.addDays(e)}};for(var m=0;m<e.length;m++)a[e[m].toUpperCase()]=a[e[m].toUpperCase().substring(0,3)]=m,a[e[m]]=a[e[m].substring(0,3)]=l(m),b[e[m]]=b[e[m].substring(0,3)]=k(m);var n=function(a){return function(){return this._is?(this._is=!1,this.getMonth()===a):this.moveToMonth(a,this._orient)}},o=function(b){return function(){return a.today().set({month:b,day:1})}};for(var p=0;p<f.length;p++)a[f[p].toUpperCase()]=a[f[p].toUpperCase().substring(0,3)]=p,a[f[p]]=a[f[p].substring(0,3)]=o(p),b[f[p]]=b[f[p].substring(0,3)]=n(p);var q=function(a){return function(){if(this._isSecond)return this._isSecond=!1,this;if(this._same){this._same=this._is=!1;var b=this.toObject(),c=(arguments[0]||new Date).toObject(),d="",e=a.toLowerCase();for(var f=g.length-1;f>-1;f--){d=g[f].toLowerCase();if(b[d]!=c[d])return!1;if(e==d)break}return!0}return a.substring(a.length-1)!="s"&&(a+="s"),this["add"+a](this._orient)}},r=function(a){return function(){return this._dateElement=a,this}};for(var s=0;s<g.length;s++)j=g[s].toLowerCase(),b[j]=b[j+"s"]=q(g[s]),d[j]=d[j+"s"]=r(j);b._ss=q("Second");var t=function(a){return function(b){return this._same?this._ss(arguments[0]):b||b===0?this.moveToNthOccurrence(b,a):(this._nth=a,a!==2||b!==undefined&&b!==null?this:(this._isSecond=!0,this.addSeconds(this._orient)))}};for(var u=0;u<i.length;u++)b[i[u]]=u===0?t(-1):t(u)}(),function(){Date.Parsing={Exception:function(a){this.message="Parse error at '"+a.substring(0,10)+" ...'"}};var a=Date.Parsing,_=a.Operators={rtoken:function(b){return function(c){var d=c.match(b);if(d)return[d[0],c.substring(d[0].length)];throw new a.Exception(c)}},token:function(a){return function(a){return _.rtoken(new RegExp("^s*"+a+"s*"))(a)}},stoken:function(a){return _.rtoken(new RegExp("^"+a))},until:function(a){return function(b){var c=[],d=null;while(b.length){try{d=a.call(this,b)}catch(e){c.push(d[0]),b=d[1];continue}break}return[c,b]}},many:function(a){return function(b){var c=[],d=null;while(b.length){try{d=a.call(this,b)}catch(e){return[c,b]}c.push(d[0]),b=d[1]}return[c,b]}},optional:function(a){return function(b){var c=null;try{c=a.call(this,b)}catch(d){return[null,b]}return[c[0],c[1]]}},not:function(b){return function(c){try{b.call(this,c)}catch(d){return[null,c]}throw new a.Exception(c)}},ignore:function(a){return a?function(b){var c=null;return c=a.call(this,b),[null,c[1]]}:null},product:function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1),c=[];for(var d=0;d<a.length;d++)c.push(_.each(a[d],b));return c},cache:function(b){var c={},d=null;return function(e){try{d=c[e]=c[e]||b.call(this,e)}catch(f){d=c[e]=f}if(d instanceof a.Exception)throw d;return d}},any:function(){var b=arguments;return function(c){var d=null;for(var e=0;e<b.length;e++){if(b[e]==null)continue;try{d=b[e].call(this,c)}catch(f){d=null}if(d)return d}throw new a.Exception(c)}},each:function(){var b=arguments;return function(c){var d=[],e=null;for(var f=0;f<b.length;f++){if(b[f]==null)continue;try{e=b[f].call(this,c)}catch(g){throw new a.Exception(c)}d.push(e[0]),c=e[1]}return[d,c]}},all:function(){var a=arguments,_=_;return _.each(_.optional(a))},sequence:function(b,c,d){return c=c||_.rtoken(/^\s*/),d=d||null,b.length==1?b[0]:function(e){var f=null,g=null,h=[];for(var i=0;i<b.length;i++){try{f=b[i].call(this,e)}catch(j){break}h.push(f[0]);try{g=c.call(this,f[1])}catch(k){g=null;break}e=g[1]}if(!f)throw new a.Exception(e);if(g)throw new a.Exception(g[1]);if(d)try{f=d.call(this,f[1])}catch(l){throw new a.Exception(f[1])}return[h,f?f[1]:e]}},between:function(a,b,c){c=c||a;var d=_.each(_.ignore(a),b,_.ignore(c));return function(a){var b=d.call(this,a);return[[b[0][0],r[0][2]],b[1]]}},list:function(a,b,c){return b=b||_.rtoken(/^\s*/),c=c||null,a instanceof Array?_.each(_.product(a.slice(0,-1),_.ignore(b)),a.slice(-1),_.ignore(c)):_.each(_.many(_.each(a,_.ignore(b))),px,_.ignore(c))},set:function(b,c,d){return c=c||_.rtoken(/^\s*/),d=d||null,function(e){var f=null,g=null,h=null,i=null,j=[[],e],k=!1;for(var l=0;l<b.length;l++){h=null,g=null,f=null,k=b.length==1;try{f=b[l].call(this,e)}catch(m){continue}i=[[f[0]],f[1]];if(f[1].length>0&&!k)try{h=c.call(this,f[1])}catch(n){k=!0}else k=!0;!k&&h[1].length===0&&(k=!0);if(!k){var o=[];for(var p=0;p<b.length;p++)l!=p&&o.push(b[p]);g=_.set(o,c).call(this,h[1]),g[0].length>0&&(i[0]=i[0].concat(g[0]),i[1]=g[1])}i[1].length<j[1].length&&(j=i);if(j[1].length===0)break}if(j[0].length===0)return j;if(d){try{h=d.call(this,j[1])}catch(q){throw new a.Exception(j[1])}j[1]=h[1]}return j}},forward:function(a,b){return function(c){return a[b].call(this,c)}},replace:function(a,b){return function(c){var d=a.call(this,c);return[b,d[1]]}},process:function(a,b){return function(c){var d=a.call(this,c);return[b.call(this,d[0]),d[1]]}},min:function(b,c){return function(d){var e=c.call(this,d);if(e[0].length<b)throw new a.Exception(d);return e}}},b=function(a){return function(){var b=null,c=[];arguments.length>1?b=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(b=arguments[0]);if(!b)return a.apply(null,arguments);for(var d=0,e=b.shift();d<e.length;d++)return b.unshift(e[d]),c.push(a.apply(null,b)),b.shift(),c}},c="optional not ignore cache".split(/\s/);for(var d=0;d<c.length;d++)_[c[d]]=b(_[c[d]]);var e=function(a){return function(){return arguments[0]instanceof Array?a.apply(null,arguments[0]):a.apply(null,arguments)}},f="each any all".split(/\s/);for(var g=0;g<f.length;g++)_[f[g]]=e(_[f[g]])}(),function(){var a=Date,b=a.prototype,c=a.CultureInfo,d=function(a){var b=[];for(var c=0;c<a.length;c++)a[c]instanceof Array?b=b.concat(d(a[c])):a[c]&&b.push(a[c]);return b};a.Grammar={},a.Translator={hour:function(a){return function(){this.hour=Number(a)}},minute:function(a){return function(){this.minute=Number(a)}},second:function(a){return function(){this.second=Number(a)}},meridian:function(a){return function(){this.meridian=a.slice(0,1).toLowerCase()}},timezone:function(a){return function(){var b=a.replace(/[^\d\+\-]/g,"");b.length?this.timezoneOffset=Number(b):this.timezone=a.toLowerCase()}},day:function(a){var b=a[0];return function(){this.day=Number(b.match(/\d+/)[0])}},month:function(a){return function(){this.month=a.length==3?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(a)/4:Number(a)-1}},year:function(a){return function(){var b=Number(a);this.year=a.length>2?b:b+(b+2e3<c.twoDigitYearMax?2e3:1900)}},rday:function(a){return function(){switch(a){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0,this.now=!0}}},finishExact:function(b){b=b instanceof Array?b:[b];for(var c=0;c<b.length;c++)b[c]&&b[c].call(this);var d=new Date;(this.hour||this.minute)&&!this.month&&!this.year&&!this.day&&(this.day=d.getDate()),this.year||(this.year=d.getFullYear()),!this.month&&this.month!==0&&(this.month=d.getMonth()),this.day||(this.day=1),this.hour||(this.hour=0),this.minute||(this.minute=0),this.second||(this.second=0),this.meridian&&this.hour&&(this.meridian=="p"&&this.hour<12?this.hour=this.hour+12:this.meridian=="a"&&this.hour==12&&(this.hour=0));if(this.day>a.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");var e=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);return this.timezone?e.set({timezone:this.timezone}):this.timezoneOffset&&e.set({timezoneOffset:this.timezoneOffset}),e},finish:function(b){b=b instanceof Array?d(b):[b];if(b.length===0)return null;for(var c=0;c<b.length;c++)typeof b[c]=="function"&&b[c].call(this);var e=a.today();if(this.now&&!this.unit&&!this.operator)return new Date;this.now&&(e=new Date);var f=!!(this.days&&this.days!==null||this.orient||this.operator),g,h,i;i=this.orient=="past"||this.operator=="subtract"?-1:1,!this.now&&"hour minute second".indexOf(this.unit)!=-1&&e.setTimeToNow(),(this.month||this.month===0)&&"year day hour minute second".indexOf(this.unit)!=-1&&(this.value=this.month+1,this.month=null,f=!0);if(!f&&this.weekday&&!this.day&&!this.days){var j=Date[this.weekday]();this.day=j.getDate(),this.month||(this.month=j.getMonth()),this.year=j.getFullYear()}f&&this.weekday&&this.unit!="month"&&(this.unit="day",g=a.getDayNumberFromName(this.weekday)-e.getDay(),h=7,this.days=g?(g+i*h)%h:i*h),this.month&&this.unit=="day"&&this.operator&&(this.value=this.month+1,this.month=null),this.value!=null&&this.month!=null&&this.year!=null&&(this.day=this.value*1),this.month&&!this.day&&this.value&&(e.set({day:this.value*1}),f||(this.day=this.value*1)),!this.month&&this.value&&this.unit=="month"&&!this.now&&(this.month=this.value,f=!0),f&&(this.month||this.month===0)&&this.unit!="year"&&(this.unit="month",g=this.month-e.getMonth(),h=12,this.months=g?(g+i*h)%h:i*h,this.month=null),this.unit||(this.unit="day");if(!this.value&&this.operator&&this.operator!==null&&this[this.unit+"s"]&&this[this.unit+"s"]!==null)this[this.unit+"s"]=this[this.unit+"s"]+(this.operator=="add"?1:-1)+(this.value||0)*i;else if(this[this.unit+"s"]==null||this.operator!=null)this.value||(this.value=1),this[this.unit+"s"]=this.value*i;this.meridian&&this.hour&&(this.meridian=="p"&&this.hour<12?this.hour=this.hour+12:this.meridian=="a"&&this.hour==12&&(this.hour=0));if(this.weekday&&!this.day&&!this.days){var j=Date[this.weekday]();this.day=j.getDate(),j.getMonth()!==e.getMonth()&&(this.month=j.getMonth())}return(this.month||this.month===0)&&!this.day&&(this.day=1),!this.orient&&!this.operator&&this.unit=="week"&&this.value&&!this.day&&!this.month?Date.today().setWeek(this.value):(f&&this.timezone&&this.day&&this.days&&(this.day=this.days),f?e.add(this):e.set(this))}};var _=a.Parsing.Operators,e=a.Grammar,f=a.Translator,g;e.datePartDelimiter=_.rtoken(/^([\s\-\.\,\/\x27]+)/),e.timePartDelimiter=_.stoken(":"),e.whiteSpace=_.rtoken(/^\s*/),e.generalDelimiter=_.rtoken(/^(([\s\,]|at|@|on)+)/);var h={};e.ctoken=function(a){var b=h[a];if(!b){var d=c.regexPatterns,e=a.split(/\s+/),f=[];for(var g=0;g<e.length;g++)f.push(_.replace(_.rtoken(d[e[g]]),e[g]));b=h[a]=_.any.apply(null,f)}return b},e.ctoken2=function(a){return _.rtoken(c.regexPatterns[a])},e.h=_.cache(_.process(_.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),f.hour)),e.hh=_.cache(_.process(_.rtoken(/^(0[0-9]|1[0-2])/),f.hour)),e.H=_.cache(_.process(_.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),f.hour)),e.HH=_.cache(_.process(_.rtoken(/^([0-1][0-9]|2[0-3])/),f.hour)),e.m=_.cache(_.process(_.rtoken(/^([0-5][0-9]|[0-9])/),f.minute)),e.mm=_.cache(_.process(_.rtoken(/^[0-5][0-9]/),f.minute)),e.s=_.cache(_.process(_.rtoken(/^([0-5][0-9]|[0-9])/),f.second)),e.ss=_.cache(_.process(_.rtoken(/^[0-5][0-9]/),f.second)),e.hms=_.cache(_.sequence([e.H,e.m,e.s],e.timePartDelimiter)),e.t=_.cache(_.process(e.ctoken2("shortMeridian"),f.meridian)),e.tt=_.cache(_.process(e.ctoken2("longMeridian"),f.meridian)),e.z=_.cache(_.process(_.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),f.timezone)),e.zz=_.cache(_.process(_.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),f.timezone)),e.zzz=_.cache(_.process(e.ctoken2("timezone"),f.timezone)),e.timeSuffix=_.each(_.ignore(e.whiteSpace),_.set([e.tt,e.zzz])),e.time=_.each(_.optional(_.ignore(_.stoken("T"))),e.hms,e.timeSuffix),e.d=_.cache(_.process(_.each(_.rtoken(/^([0-2]\d|3[0-1]|\d)/),_.optional(e.ctoken2("ordinalSuffix"))),f.day)),e.dd=_.cache(_.process(_.each(_.rtoken(/^([0-2]\d|3[0-1])/),_.optional(e.ctoken2("ordinalSuffix"))),f.day)),e.ddd=e.dddd=_.cache(_.process(e.ctoken("sun mon tue wed thu fri sat"),function(a){return function(){this.weekday=a}})),e.M=_.cache(_.process(_.rtoken(/^(1[0-2]|0\d|\d)/),f.month)),e.MM=_.cache(_.process(_.rtoken(/^(1[0-2]|0\d)/),f.month)),e.MMM=e.MMMM=_.cache(_.process(e.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),f.month)),e.y=_.cache(_.process(_.rtoken(/^(\d\d?)/),f.year)),e.yy=_.cache(_.process(_.rtoken(/^(\d\d)/),f.year)),e.yyy=_.cache(_.process(_.rtoken(/^(\d\d?\d?\d?)/),f.year)),e.yyyy=_.cache(_.process(_.rtoken(/^(\d\d\d\d)/),f.year)),g=function(){return _.each(_.any.apply(null,arguments),_.not(e.ctoken2("timeContext")))},e.day=g(e.d,e.dd),e.month=g(e.M,e.MMM),e.year=g(e.yyyy,e.yy),e.orientation=_.process(e.ctoken("past future"),function(a){return function(){this.orient=a}}),e.operator=_.process(e.ctoken("add subtract"),function(a){return function(){this.operator=a}}),e.rday=_.process(e.ctoken("yesterday tomorrow today now"),f.rday),e.unit=_.process(e.ctoken("second minute hour day week month year"),function(a){return function(){this.unit=a}}),e.value=_.process(_.rtoken(/^\d\d?(st|nd|rd|th)?/),function(a){return function(){this.value=a.replace(/\D/g,"")}}),e.expression=_.set([e.rday,e.operator,e.value,e.unit,e.orientation,e.ddd,e.MMM]),g=function(){return _.set(arguments,e.datePartDelimiter)},e.mdy=g(e.ddd,e.month,e.day,e.year),e.ymd=g(e.ddd,e.year,e.month,e.day),e.dmy=g(e.ddd,e.day,e.month,e.year),e.date=function(a){return(e[c.dateElementOrder]||e.mdy).call(this,a)},e.format=_.process(_.many(_.any(_.process(_.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(b){if(e[b])return e[b];throw a.Parsing.Exception(b)}),_.process(_.rtoken(/^[^dMyhHmstz]+/),function(a){return _.ignore(_.stoken(a))}))),function(a){return _.process(_.each.apply(null,a),f.finishExact)});var i={},j=function(a){return i[a]=i[a]||e.format(a)[0]};e.formats=function(a){if(a instanceof Array){var b=[];for(var c=0;c<a.length;c++)b.push(j(a[c]));return _.any.apply(null,b)}return j(a)},e._formats=e.formats(['"yyyy-MM-ddTHH:mm:ssZ"',"yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]),e._start=_.process(_.set([e.date,e.time,e.expression],e.generalDelimiter,e.whiteSpace),f.finish),e.start=function(a){try{var b=e._formats.call({},a);if(b[1].length===0)return b}catch(c){}return e._start.call({},a)},a._parse=a.parse,a.parse=function(b){var c=null;if(!b)return null;if(b instanceof Date)return b;try{c=a.Grammar.start.call({},b.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(d){return null}return c[1].length===0?c[0]:null},a.getParseFunction=function(b){var c=a.Grammar.formats(b);return function(a){var b=null;try{b=c.call({},a)}catch(d){return null}return b[1].length===0?b[0]:null}},a.parseExact=function(b,c){return a.getParseFunction(c)(b)}}(),define("libs/date.js/build/date",function(){}),TimeSpan=function(a,b){this.days=0,this.hours=0,this.minutes=0,this.seconds=0,this.milliseconds=0;var c=a<0?-1:1;return this.milliseconds=Math.abs(a),b=b||Math.floor,this.days=b(this.milliseconds/864e5)*c,this.milliseconds=this.milliseconds%864e5,this.hours=b(this.milliseconds/36e5)*c,this.milliseconds=this.milliseconds%36e5,this.minutes=b(this.milliseconds/6e4)*c,this.milliseconds=this.milliseconds%6e4,this.seconds=b(this.milliseconds/1e3)*c,this.milliseconds=this.milliseconds%1e3,this.milliseconds=this.milliseconds*c,this},TimeSpan.prototype.compare=function(a){var b=new Date(1970,1,1,this.hours(),this.minutes(),this.seconds()),c;return a===null?c=new Date(1970,1,1,0,0,0):c=new Date(1970,1,1,a.hours(),a.minutes(),a.seconds()),b>c?1:b<c?-1:0},TimeSpan.prototype.add=function(a){return a===null?this:this.addSeconds(a.getTotalMilliseconds()/1e3)},TimeSpan.prototype.subtract=function(a){return a===null?this:this.addSeconds(-a.getTotalMilliseconds()/1e3)},TimeSpan.prototype.addDays=function(a){return new TimeSpan(this.getTotalMilliseconds()+a*24*60*60*1e3)},TimeSpan.prototype.addHours=function(a){return new TimeSpan(this.getTotalMilliseconds()+a*60*60*1e3)},TimeSpan.prototype.addMinutes=function(a){return new TimeSpan(this.getTotalMilliseconds()+a*60*1e3)},TimeSpan.prototype.addSeconds=function(a){return new TimeSpan(this.getTotalMilliseconds()+a*1e3)},TimeSpan.prototype.addMilliseconds=function(a){return new TimeSpan(this.getTotalMilliseconds()+a)},TimeSpan.prototype.getTotalMilliseconds=function(){return this.days()*864e5+this.hours()*36e5+this.minutes()*6e4+this.seconds()*1e3},TimeSpan.prototype.get12HourHour=function(){return(h=this.hours()%12)?h:12},TimeSpan.prototype.getDesignator=function(){return this.hours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator},TimeSpan.prototype.toString=function(a){function b(){return this.days()!==null&&this.days()>0?this.days()+"."+this.hours()+":"+c(this.minutes())+":"+c(this.seconds()):this.hours()+":"+c(this.minutes())+":"+c(this.seconds())}function c(a){return a.toString().length<2?"0"+a:a}var d=this;return a?a.replace(/d|dd|HH|H|hh|h|mm|m|ss|s|tt|t/g,function(a){switch(a){case"d":return d.days();case"dd":return c(d.days());case"H":return d.hours();case"HH":return c(d.hours());case"h":return d.get12HourHour();case"hh":return c(d.get12HourHour());case"m":return d.minutes();case"mm":return c(d.minutes());case"s":return d.seconds();case"ss":return c(d.seconds());case"t":return(this.hours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator).substring(0,1);case"tt":return this.hours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator}}):this._toString()};var TimePeriod=function(a,b,c){this.years=0,this.months=0,this.days=0,this.hours=0,this.minutes=0,this.seconds=0,this.milliseconds=0;var d=a.clone(),e=b.clone(),f=d.clone(),g=d>e?-1:1;this.years=e.getFullYear()-d.getFullYear(),f.addYears(this.years),g==+1?f>e&&this.years!==0&&this.years--:f<e&&this.years!==0&&this.years++,d.addYears(this.years);if(g==+1)while(d<e&&d.clone().addDays(d.getDaysInMonth())<=e)d.addMonths(1),this.months++;else while(d>e&&d.clone().addDays(-d.getDaysInMonth())>=e)d.addMonths(-1),this.months--;var h=e-d;if(h!==0){var i=new TimeSpan(h,c);this.days=i.days,this.hours=i.hours,this.minutes=i.minutes,this.seconds=i.seconds,this.milliseconds=i.milliseconds}return this.years>=1&&(this.months>0||this.days>0)&&(this.years+=1),this.months>=1&&this.months<11&&this.days>0&&(this.months+=1),this};define("libs/date.js/build/time.special",function(){}),define("tau/services/service.applicationContext",["tau/core/class","tau/configurator"],function(a,b){var c=a.extend({init:function(a){this.store=a||b.getStore()},getApplicationContext:function(a,b){this.store.get("context",{id:a.id,fields:["id","acid","culture","edition",{loggedUser:["id","email","isAdministrator"]},{processes:["id","name","terms","practices","customFields"]},{selectedProjects:["id","name",{process:["id","name"]}]}]}).done({success:function(a){b.success.apply(null,[a[0].data])}})}});return c}),define("tau/service.container",["tau/core/Class","tau/store/factory","tau/core/keyboard.manager","tau/core/global.bus","tau/core/external","tau/core/state.manager","tau/services/service.routing","tau/utils/utils.routing","tau/utils/utils.history","libs/parseUri","tau/store/services/service.globalSettings","tau/services/service.applicationContext","tau/store/services/service.notifications","tau/store/services/service.actions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return a.extend({ckPath:"../Ckeditor/",_config:{},isBoardEdition:!1,setRestStorageService:function(a){this.restStorageService=a},getRestStorageService:function(){return this.restStorageService},getStoreFactory:function(){return this.storeFactory||(this.storeFactory=new b),this.storeFactory},getKeyBoardManager:function(){if(!this.keyboardManager){this.keyboardManager=new c;var a={handleKeyDown:function(a){a.keyCode==$.ui.keyCode.ESCAPE&&(a.preventDefault(),a.stopPropagation())}};this.keyboardManager.pushHandler(a)}return this.keyboardManager},setGlobalSettingsService:function(a){this.globalSettingsService=a},getGlobalSettingsService:function(){if(!this.globalSettingsService){var a={appPath:this.getApplicationPath()};this.globalSettingsService=new k(a)}return this.globalSettingsService},setApplicationContextService:function(a){this.applicationContextService=a},getApplicationContextService:function(){return this.applicationContextService||(this.applicationContextService=new l(this.getStore())),this.applicationContextService},setNotificationService:function(a){this.notificationService=a},getNotificationService:function(){if(!this.notificationService){var a={appPath:this.getApplicationPath()};this.notificationService=new m(a)}return this.notificationService},setActionsService:function(a){this.actionsService=a},getActionsService:function(){if(!this.actionsService){var a={appPath:this.getApplicationPath()};this.actionsService=new n(a)}return this.actionsService},clearSingles:function(){this.getStoreFactory().clearSingles()},clear:function(){this.clearSingles(),d.reset(),delete this.currentDate,delete this.external,delete this.stateManager,this.getStoreFactory().clear()},getCurrentAcid:function(){var a="",b=this.getWindow();if(b.location&&b.location.href){var c=b.location.href;a=j(c).queryKey.acid||a}return a},setWindow:function(a){this.window=a},getWindow:function(){return this.window||window},getHistory:function(){return this.history||(this.history=new i),this.history},pushRouting:function(){this.routingArr=this.routingArr||[],this.routingArr.push(this.routing),this.routing=null},popRouting:function(){this.routing=this.routingArr.pop()},createRouting:function(a){var b={window:this.getWindow()};a&&(b.safe=!0,b.v2=!0,b.safeParameterName=a);var c=new h(b);return c},getRouting:function(a){return this.routing||(this.routing=this.createRouting(a)),this.routing},setCurrentDate:function(a){this.currentDate=a},getCurrentDate:function(){return this.currentDate?this.currentDate:new Date},getGlobalBus:function(){return d.get()},setApplicationPath:function(a){this.getStoreFactory().setApplicationPath(a)},getApplicationPath:function(){return this.getStoreFactory().getApplicationPath()},getCkPath:function(){return this.ckPath},setCkPath:function(a){this.ckPath=a},setInitialData:function(a){this.getStoreFactory().setInitialData(a)},setStoreFactory:function(a){this.storeFactory=a},setService:function(a){this.getStoreFactory().setService(a)},getService:function(){return this.getStoreFactory().getService()},getRestPath:function(){return this.getStoreFactory().getRestPath()},setProxy:function(a){this.getStoreFactory().setProxy(a)},getProxy:function(){return this.getStoreFactory().getProxy()},disableRules:function(){this.getStoreFactory().disableRules()},enableRules:function(){this.getStoreFactory().enableRules()},initRules:function(){this.getStoreFactory().initRules()},getStore:function(a){return a=a||{},_.defaults(a,{services:this}),this.getStoreFactory().getStore(a)},setConfig:function(a,b){this._config[a]=b},getConfig:function(a,b){var c=b;return this._config.hasOwnProperty(a)&&(c=this._config[a]),c},setExternal:function(a){this.external=new e(a)},getExternal:function(){return this.external||(this.external=new e(window)),this.external},getStateManager:function(){var a=this;if(!a.stateManager){var b=a.getExternal(),c=new g({external:b});a.stateManager=new f({service:c,state:b.hashParams()}),b.onHashChange(function(b){var c=b.hashParams();a.stateManager.update(c)})}return a.stateManager}})}),define("tau/configurator",["tau/service.container","tau/store/factory.instance"],function(a,b){var c=new a;return c.setStoreFactory(b),c}),define("tau/core/component-base",["Underscore","tau/core/class","tau/configurator","tau/core/bus"],function(_,a,b,c){return a.extend({init:function(a){return this.config=_.extend({},a),this.config.context=this.config.context||{},_.defaults(this.config.context,{configurator:b}),this.bus=new c({name:a.name,globalBus:this.config.context.configurator.getGlobalBus()}),_.defaults(this.config,{bus:this.bus}),this},attach:function(a,b){b=b||{};var c=this.config.disabledExtensionCategories;if(c){var d=a.prototype.category;if(d&&_.indexOf(c,d)>=0)return this}var e=_.clone(this.config);b.hasOwnProperty("onCreate")||(e=_.extend(e,b));var f=new a(e);return b.onCreate&&b.onCreate(f),this}})}),define("tau/components/component.creator",["Underscore","tau/core/component-base","tau/core/view-base","tau/ui/extensions/ui.extension.domOperationsBase"],function(_,a,b,c){return{create:function(d,e){var f=e||{};d=d||{},_.defaults(f,{name:d.name}),d.template&&(f.template=d.template);var g=new a(f);f=g.config;var h=f.context.configurator;_.defaults(f,{store:h.getStore()});var i=d.ViewType||b;g.attach(i),d.ModelType&&g.attach(d.ModelType);var j=d.domOperations||c;g.attach(j);if(d.extensions&&d.extensions.constructor==Array)for(var k=0;k<d.extensions.length;k++){var l=d.extensions[k];l.hasOwnProperty("type")&&l.hasOwnProperty("config")?g.attach(l.type,l.config):g.attach(l)}return g.bus}}}),define("tau/components/extensions/application/extension.history",["Underscore","jQuery","tau/core/class","tau/core/event","tau/store/types","tau/configurator"],function(_,$,a,b,c,d){return a.extend({init:function(a){this.config=a,this.bus=a.bus,this.globalBus=this.bus.getGlobalBus(),d.getWindow().document&&(this.defaultTitle=d.getWindow().document.title),b.subscribeOn(this);var c=function(a){var b=d.getHistory().getCurrent();b&&b.title&&(d.getWindow().document.title=b.title)};this._currentHandler=_.bind(c,this),d.getHistory().on("setCurrent",this._currentHandler,this)},"bus controller.preExecute":function(a){d.getHistory().process()},"bus controller.postExecute":function(a){},clearCurrent:function(){d.getHistory().current=null},"bus destroy":function(){d.getWindow().document&&(d.getWindow().document.title=this.defaultTitle),this.clearCurrent(),d.getHistory().stack=[],d.getHistory().removeAllListeners(this)}})}),define("tau/utils/utils.redirect",["Underscore","jQuery","tau/core/class","tau/configurator"],function(_,$,a,b){return a.extend({init:function(a){this.context=a,this.window=b.getWindow()},_process:function(a){var c=null;if(a.match(/^http(s)?:\/\//i))c=a;else if(a[0]=="#")c=a;else{var d=b.getApplicationPath();a[0]!=="/"&&(a="/"+a),c=d+a}return this.context&&(c=$.tmpl(c,this.context).text()),c},_redirect:function(a,b){b.location.href=a},redirect:function(a,b){var c=this.window;if(typeof b!="undefined"){var d=$(document),e={scrollbars:1,width:d.width()*.8,height:d.height()*.8,top:50},f=[],g=null;for(g in e)f.push(g+"="+e[g]);var h=f.join(",");c=this.window.open(this._process(a),b,h);return}this._redirect(this._process(a),c)},back:function(){this.window.history&&this.window.history.back&&this.window.history.back()},reload:function(){this.window.location&&this.window.location.reload&&this.window.location.reload()}})}),define("tau/components/extensions/application/extension.integration",["Underscore","jQuery","tau/core/class","tau/core/event","tau/store/types","tau/configurator","tau/utils/utils.redirect"],function(_,$,a,b,c,d,e){return a.extend({init:function(a){this.config=a,this.config.integration=this.config.integration||{},this.bus=a.bus,this.globalBus=this.bus.getGlobalBus(),b.subscribeOn(this),this.criticalChanged=!1,this.window=d.getWindow(),this.redirect=new e},"bus afterRender":function(){$("body").delegate("a[href=#]","click",function(a){a.preventDefault()});var a=this.config.integration.reloadCallback,b=!!a;b?$("html").addClass("tau-html_integration_popup"):$("html").addClass("tau-html_integration_main")},"bus initProgress":function(a){this.config.integration.progress&&this.config.integration.progress.show("Reloading...")},"bus application.error":function(a){this.config.integration.progress&&this.config.integration.progress.hide()},"globalBus showProgress":function(a){this.config.integration.progress&&this.config.integration.progress.show(a.data.text)},"globalBus hideProgress":function(a){this.config.integration.progress&&this.config.integration.progress.hide()},"bus destroy":function(){d.getGlobalBus().removeAllListeners(this),this.window._criticalTauChanges&&(this.bus.fire("initProgress"),this.redirect.reload()),$("body .jquery-notify-bar").remove()},"bus application.reload":function(a){var b=this.config.integration.reloadCallback;if(!!b==0)return;b(a)},"bus application.exit":function(a){var b=this.config.integration.reloadCallback,c=!!b;c?(this.window._criticalTauChanges=!0,this.bus.fire("destroy")):(this.bus.fire("initProgress"),this.redirect.redirect("default.aspx"))}})}),define("tau/components/extensions/application/extension.controller.board",["Underscore","jQuery","tau/core/event.emitter","tau/utils/utils.redirect","tau/components/extensions/print.convert.extension"],function(_,$,a,b,c){return a.extend({init:function(a){this._super(a),this.config=a},"bus view.dom.ready+componentsCreated":function(a){var b=a.componentsCreated.data;_.each(b,function(a){a.component.fire("view.dom.ready")})},"bus afterRender:last+innerContentRendered":function(a){var b=a.afterRender.data.element,c=a.innerContentRendered.data.element,d="",e="";c.hasClass("tau-board-container")?(d="tau-page-board",e="tau-page-entity"):(d="tau-page-entity",e="tau-page-board"),b.removeClass(e).addClass(d).append(c)},"bus application.navigate.board":function(a){this.executeAction({strategy:"board",action:"actionBoard",parameters:a.data})},"bus application.navigate.entity":function(a){var b=a.data,c="action"+(b.action||"show").toLocaleLowerCase();c=this.hasOwnProperty(c)?c:"actionshow",this.executeAction({strategy:"entity",action:c,parameters:b})},executeAction:function(a){var b=this;require(["tau/components/component.page."+a.strategy],function(c){var d=a.action,e=a.parameters;b.fire("controller.preExecute",{action:d,parameters:e}),b[d](c,e.id,e.entity),b.fire("controller.postExecute")})},actionBoard:function(a,b){this.current&&this.current.fire("destroy");var c=this,d={context:{configurator:c.config.context.configurator,entity:{id:b,entityType:{name:"board"}}}};this.current=a.create(d),this.current.on("componentsCreated",function(a){this.fire.apply(c,arguments)},this),this.current.on("error",function(a){c.fire("application.error")}),this.current.on("afterRender",function(a){c.fire("innerContentRendered",{element:a.data.element})}),this.current.on("componentsCreated",function(a){c.fire("componentsCreated",a.data)}),this.current.initialize()},_getItemConfig:function(a,b){return{context:{configurator:this.config.context.configurator},entity:{id:a,type:b}}},actionshow:function(a,b,c){this._action(a,b,c),$("html").toggleClass("tau-html_action_view",!0).toggleClass("tau-html_action_print",!1)},actionprint:function(a,b,d){this._action(a,b,d,{extensions:[c]}),$("html").toggleClass("tau-html_action_view",!1).toggleClass("tau-html_action_print",!0),$("body").addClass("print-mode")},_action:function(a,c,d,e){$("html").toggleClass("tau-html_action_view",!1).toggleClass("tau-html_action_print",!1),this.current&&this.current.fire("destroy");var f=this;this.current=a.create(this._getItemConfig(c,d),e||{}),this.current.on("beforeDelete",function(a){f.fire("initProgress")}),this.current.on("deleted",function(a){var c=f.config.context.configurator.getHistory(),d=new b,e=c.pop();e?(c.setCurrent(null),d.redirect(e.url)):f.fire("application.exit")}),this.current.on("error",function(a){f.fire("application.error")}),this.current.on("afterRender",function(a){f.fire("innerContentRendered",{element:a.data.element})}),this.current.initialize()},destroy:function(){this._super(),this.current&&this.current.fire("destroy"),delete this.current,delete this.config}})}),define("tau/ui/extensions/popup/ui.extension.popup",["jQuery","tau/components/extensions/component.extension.base","tau/configurator"],function($,a,b){return a.extend({init:function(a){var b=this;b._super(a),b.bodyOverflow=$("body").css("overflow"),$("body").css("overflow","hidden"),b.$overlay=$('<div class="ui-popup-overlay" style="display: none;"></div>').appendTo("body"),b.$container=$('<div class="ui-popup" style="display: none;"><div class="close"></div></div>').appendTo("body")},"bus beforeDelete":function(){},"bus deleted":function(){var a=this,b=this.$container.position(),c=b.top,d=b.left,e=this.$container.width(),f=this.$container.height();this.$container.animate({opacity:0,top:c+f/2,left:d+e/2,width:0,height:0},800,function(){a.bus.fire("destroy")}),this.$overlay.hide()},"bus contentRendered":function(a){var b=this;b.$overlay.show(),b.element=a.data.element,b.element.addClass("ui-popup-content");var c=b.$container,d=$(".close",c);d.hide(),c.animate({opacity:"show"},150,function(){b.element.appendTo(c),d.fadeIn(1e3),b._attachHandlers()})},_attachKeyBoardHandling:function(){var a=this,c={handleKeyDown:function(){a._onDocumentKeyDown.apply(a,arguments)}};b.getKeyBoardManager().pushHandler(c)},_attachHandlers:function(){if(this._attached)return;this._attached=!0,this._onBodyClickHandler=$.proxy(this._onBodyClick,this),this._onDocumentKeyDownHandler=$.proxy(this._onDocumentKeyDown,this),this._onCloseButtonClickHandler=$.proxy(this._onCloseButtonClick,this),$(document).bind("click",this._onBodyClickHandler),this._attachKeyBoardHandling(),this.$container.find(".close").bind("click",this._onCloseButtonClickHandler),this._removeElements=this._removeElementsInnerImpl},_onDocumentKeyDown:function(a){a.keyCode==$.ui.keyCode.ESCAPE&&this.fire("destroy")},_onBodyClick:function(a){if(a.target!=this.$overlay[0])return;this.fire("destroy")},_onCloseButtonClick:function(){this.fire("destroy")},_detachHandlers:function(){$(document).unbind("click",this._onBodyClickHandler),this.element&&this.element.parents(".ui-popup").unbind("click",this._onElementClickHandler),b.getKeyBoardManager().popHandler(),this.$container.find(".close").unbind("click",this._onCloseButtonClickHandler)},_removeElementsInnerImpl:function(){this.$overlay.remove(),this.$container.remove(),$("body").css("overflow",this.bodyOverflow)},_removeElements:$.noop,destroy:function(){this._detachHandlers(),this._removeElements(),this._super()}})}),define("tau/utils/utils.date",["Underscore","tau/configurator","tau/utils/utils.date/utils.date.formats","tau/utils/utils.translation","libs/date.js/build/date","libs/date.js/build/time.special"],function(_,a,b,c){var d={},e="/Date",f=/^\/Date\((-?\d+)(([+-])(\d{2})(\d{2}))\)\//;Date.prototype.getDaysInMonth=function(){return Date.getDaysInMonth(this.getDate(),this.getMonth())};var g=function(a){return function(b){var c=d.parse(b);return c?d._format(c,a):""}};return d={serverTimezoneOffset:-1*(new Date).getTimezoneOffset(),format:{date:{"short":g(b.date.short)},time:{"short":g(b.time.short)},datetime:{"short":g(b.datetime.short)}},_format:function(a,b){return a.toString(b)||""},formatAs:function(a,b){return this._format(a,b)},parse:function(a){if(_.isString(a)&&a.indexOf(e)==0){var b=a.match(f),c=parseInt(b[1]),g=(parseInt(b[4])*60+parseInt(b[5]))*parseInt(b[3]+"1");a=new Date(c),a.sourceOffset=g,d.serverTimezoneOffset=g}return Date.parse(a)},convertToTimezone:function(a,b){a=d.parse(a);if(!a)return a;b||(b=a.sourceOffset||null);if(!b)return a;var c=(new Date).getTimezoneOffset(),e=b+c;return a=new Date(a.getTime()+e*60*1e3),a},getFormatData:function(){return b},getAge:function(b,d){d=d||a.getCurrentDate(),b=Date.parse(b);var e={isZero:!0,value:0,unit:"sec",direction:"ago",toString:function(){var a;return this.isZero?a="now":a=this.value+" "+this.unit+" "+this.direction,a}};e.direction=d>b?"ago":"after";var f=new TimePeriod(b,d,function(a){return a===1?1:a<1?0:Math.ceil(a)}),g=[{func:"years",units:"year|years"},{func:"months",units:"month|months"},{func:"days",units:"day|days"},{func:"hours",units:"hour|hours"},{func:"minutes",units:"min"},{func:"seconds",units:"sec"}],h=_.detect(g,function(a,b){var d=f[a.func];if(d!==0)return a.value=Math.abs(d),a.unit=c.pluralize(a.units,d),!0});return h&&(e.isZero=!1,e.value=h.value,e.unit=h.unit),e}},d}),define("tau/ui/templates/board.plus/ui.template.boardplus.card.customFields",["Underscore","tau/core/templates-factory","tau/utils/utils.date"],function(_,a,b){var c={name:"boardplus.card.customFields",engine:"jqote2",customFunctions:{formatDate:function(a){var a=b.parse(a);return a.toString("MMM yyyy")},isDate:function(a){return _.isDate(b.parse(a))}},markup:[['<span class="tau-customField"><%=this.name%>: ','<%if (this.type === "Date"){ %>',"<%=fn.formatDate(this.value)%>","<%}%>","<% else {%>","<%= this.value%>","<%}%>","</span>"].join("")]};return a.register(c)}),define("tau/ui/templates/board.plus/ui.template.boardplus.card.userStory",["tau/core/templates-factory","tau/ui/templates/board.plus/ui.template.boardplus.card.assignments","tau/ui/templates/board.plus/ui.template.boardplus.card.customFields","tau/ui/templates/board.plus/ui.template.boardplus.card.id"],function(a){var b={name:"boardplus.card.userstory",engine:"jqote2",markup:[["<div>",'   <%= fn.sub("boardplus.card.id", this) %>','<% if (this.hasOwnProperty("tags") && this.tags.length > 0) {%>',"<% for( var i=0;i<this.tags.length;i++){%>",'<span class="tau-tag"><%=this.tags[i]%></span>',"<% } %>","<% } %>","</div>",'<div class="tau-name"><%= this.name %></div>',"<div>",'<% if (this.hasOwnProperty("assignments")) {%>','   <%= fn.sub("boardplus.card.assignments", this.assignments) %>',"<% } %>","<% if (this.openImpedimentsCount) {%>",'   <span class="tau-impediments"><%=this.openImpedimentsCount%></span>',"<% } %>",'<% if (this.hasOwnProperty("effort")) {%>','   <div class="tau-effort"><%=this.effort%> pt</div>',"<% } %>",'<% if (this.hasOwnProperty("tasksInfo")) {%>','   <div class="tau-related-tasks">',"<%=this.tasksInfo.plannedCount%>/<%=this.tasksInfo.inProgressCount%>","   </div>","<% } %>",'<% if (this.hasOwnProperty("bugsInfo")) {%>','<div class="tau-related-bugs">',"<%=this.bugsInfo.plannedCount%>/<%=this.bugsInfo.inProgressCount%>","</div>","<% } %>","</div>",'<% if (this.hasOwnProperty("customFields")) {%>',"<div>",'   <%= fn.sub("boardplus.card.customFields", this.customFields) %>',"</div>","<% } %>"].join("")]};return a.register(b)}),define("tau/ui/templates/board.plus/ui.template.boardplus.cards",["tau/core/templates-factory","tau/ui/templates/board.plus/ui.template.boardplus.card.userStory"],function(a){var b={name:"boardplus.cards",engine:"jqote2",markup:[['<%= fn.sub("boardplus.card.userstory", this.items) %>'].join("")]};return a.register(b)}),define("tau/ui/extensions/board.plus/ui.extension.board.plus.cardsUpdater",["Underscore","jQuery","tau/core/event.emitter","tau/ui/extensions/board.plus/ui.board.plus.utils","tau/ui/templates/board.plus/ui.template.boardplus.cards"],function(_,$,a,b){var c=function(a){return"zoom-level-"+a};return a.extend({"bus view.skeleton.built:last+model.zoomLevelChanged:last":function(a){var b=a["view.skeleton.built"].data.element,d=b.attr("class");_.each(d.split(" "),function(a){a.indexOf("zoom-level-")==0&&b.removeClass(a)}),b.addClass(c(a["model.zoomLevelChanged"].data.zoomLevel))},"bus view.skeleton.built+model.cards.data.ready":function(a){var b=a["model.cards.data.ready"].data.cards;b.length>0&&this.fire("model.data.loader.registerItems",{items:_.pluck(b,"data")})},"bus model.dataUpdated:last+view.dom.ready:last+view.skeleton.built:last":function(a){var b=a["model.dataUpdated"].data,c=this,d=new Date;this.detachedElements=[],this.renderedItems=[],_.each(b.items,function(a){c.fire("template.pure.bind",{name:"boardplus.card.userstory",data:a})});var e=[];for(var f=0;f<this.renderedItems.length;f++){var g=this.renderedItems[f],h=g.card;h.innerHTML=g.html,this.fire("view.card.updated",{card:h})}_.each(e,function(a){a.parent.appendChild(a.child)})},"bus template.boardplus.card.userstory.pure.bound":function(a){var c=a.data,d=c.data,e=document.getElementById(b.generateCardId(d)),f=e.parentNode;e.innerHTML=c.html,this.renderedItems.push({card:e,html:c.html})}})}),define("tau/components/component.board.plus",["Underscore","tau/core/bus.profiler","tau/components/component.creator","tau/views/view.board.plus","tau/models/board.plus/model.board.plus","tau/models/board.plus/model.board.cell.preloadable","tau/ui/extensions/board.plus/ui.extension.board.plus.controller","tau/ui/extensions/board.plus/ui.extension.board.plus.layout","tau/ui/extensions/board.plus/ui.extension.board.plus.selection","tau/models/board.plus/model.board.dragndrop","tau/ui/extensions/board.plus/ui.extension.board.plus.dragndrop","tau/ui/extensions/board.plus/ui.extension.board.plus.dragndrop.batch","tau/ui/extensions/board.plus/ui.extension.board.plus.requestIndicator","tau/models/board.plus/model.board.collapse","tau/ui/extensions/board.plus/ui.extension.board.plus.collapse","tau/models/board.plus/model.board.focus","tau/ui/extensions/board.plus/ui.extension.board.plus.focus","tau/ui/extensions/board.plus/ui.extension.board.plus.name","tau/ui/extensions/board.plus/ui.extension.board.plus.cardsViewer","tau/ui/extensions/board.plus/ui.extension.board.plus.cardsUpdater","tau/models/board.plus/model.dataUpdater","tau/models/model.board.zoomLevel","tau/ui/extensions/board.zoomLevel/ui.extension.board.zoomLevel.editable","tau/ui/extensions/board.plus/ui.extension.board.plus.viewMode","tau/ui/extensions/board.plus/ui.extension.board.plus.profiler","tau/ui/extensions/ui.extension.templateBinder","tau/ui/templates/board.plus/ui.template.boardplus.skeleton","tau/ui/templates/board.plus/ui.template.boardplus.cell.grid.skeleton","tau/ui/templates/board.plus/ui.template.boardplus.cell.axis.skeleton","tau/ui/templates/board.plus/ui.template.boardplus.card.userStory","tau/ui/templates/board.plus/ui.template.boardplus.request.indicator"],function(_,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){return{create:function(z){var A={ViewType:c,ModelType:d,extensions:[e,f,g,h,i,j,k,l,m,n,o,p,q,u,v,r,s,t,w,x,y]},B=b.create(A,z),C=new a(B);return B.fire("profiler.ready",{profiler:C}),B}}}),define("tau/components/component.application.boardPlus",["tau/components/component.creator","tau/core/component-base","tau/service.container","tau/store/factory.instance","tau/core/view-base","tau/components/extensions/application/extension.history","tau/components/extensions/application/extension.routing","tau/components/extensions/application/extension.routing.patterns","tau/components/extensions/application/extension.integration","tau/components/extensions/application/extension.navigation","tau/components/extensions/error/extension.errorBar","tau/ui/extensions/popup/ui.extension.popup","tau/components/extensions/application/extension.controller.board","tau/components/extensions/application/extension.controller.board.entity","tau/ui/templates/application/ui.template.application.boardPlus"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return{create:function(a){a=a||{onCreate:function(){}};var p=new c;p.setStoreFactory(d),p.____id="personal-board-configurator",p.isBoardEdition=!0;var q={name:"application component",template:o,context:{configurator:p}},r=new b(q);return r.attach(g,a).attach(h,a).attach(f,a).attach(i,a).attach(j,a).attach(k,a).attach(m,a).attach(n,a).attach(e),a.integration&&a.integration.showInPopup===!0&&r.attach(l,a),r.bus}}}),require(["jQuery","tau/app.resolver","dev.toolbar","tau/configurator","tau/components/component.application.boardPlus","tau/components/component.board.plus","tau/utils/utils.date"],function($,a,b,c,d,e,f){var g=function(){var a=new TimeSpan(new Date("1 Aug 2012")-new Date);window.document.title="BOARD+ TargetProcess "+a.days+" days left"};g();var h=function(a){$("body").empty().html(a.data.element),l.fire("view.dom.ready")},i="page";c.getRouting(i).execute(window.location.hash);var j=a.getQueryParam(window.location.search,"acid"),k=a.resolvePageInfo({appId:i,win:window,force:!0},{type:"board",id:j}),l=d.create({applicationId:i,pageType:k.type,pageId:k.id});l.on("afterRender",h),l.initialize()}),require.onError=function(a){console.log("File wasn't loaded:"+a.message)},define("main.boardplus",function(){})