define("tau/components/extensions/extension.tracking.performance",["Underscore","tau/components/extensions/component.extension.base"],function(e,t){return t.extend({init:function(e){this.globalBus=e.bus.globalBus,this._super(e),this._slice={},this._commands={},this._startLifeCycle=null,this.diagnostics=e.context.configurator.getDiagnosticsService(),this._setPageClientProcessingTime()},_setPageClientProcessingTime:function(){var e=this.diagnostics.page();e&&(e.client=(new Date).getTime()-window.clientStartTime.getTime())},_requestCompleted:function(e,t){this._commands[t.command.method]=parseInt(t.response.getResponseHeader("X-Stopwatch"),10)},_viewReady:function(e){if(this._startLifeCycle.caller.id==e.caller.id){var t=e.date-this._startLifeCycle.date,i=Math.max(0,this._commands.xaxis||0,this._commands.yaxis||0);this._commands.list&&(i+=this._commands.list),this._commands.cells&&(i+=this._commands.cells),this.diagnostics.set("board",{server:i,client:t-i})}},"globalBus start.lifecycle":function(e){this._startLifeCycle=e},"globalBus slice.ready":function(t,i){e.each(i,function(e,t){this._slice[t]!==e&&(this._slice[t]&&(this._slice[t].removeListener("request.completed",this._requestCompleted,this),this._commands={}),this._slice[t]=e,e.on("request.completed",this._requestCompleted,this))},this)},"globalBus model.cells.content.loaded + cardsFullyLoaded":function(e){this._viewReady(e["model.cells.content.loaded"])},"globalBus overview.board.ready":function(e){this._viewReady(e)}})}),define("tau/components/extensions/extension.views.menu.comet.listener",["require","tau/components/extensions/component.extension.base"],function(e){var t=e("tau/components/extensions/component.extension.base");return t.extend({init:function(e){this._super(e);var t=e.context.configurator;this._listener=t.getViewsMenuCometListener(),this._listener.startListen()},destroy:function(){this._listener.stopListen(),this._super()}})}),define("tau/components/dashboard/widget.templates/new.list/list.component.renderer",["require","Underscore","jQuery","tau/components/component.board.new.list"],function(e){var t=e("Underscore"),i=e("jQuery"),n=e("tau/components/component.board.new.list");
return{insertListComponent:function(e){var r=e.placeholder,a=e.listDefinition,s=e.configurator,o={context:{configurator:s},listOptions:t.defaults({disableRootPaging:!0,columnWidths:{minNameUnitWidth:120,minUnitWidth:20}},n.getDefaultComponentListOptions()),behaviors:n.getDefaultBehaviorsWithoutStickyHeader()},c=n.create(o);c.on("afterRender",function(e,t){var n=i('<div class="tau-list-view-widget-adapter"></div>');n.append(i(t.element)),i(r).append(n),c.fire("view.dom.ready",t)});var l=i.Deferred();return c.on("overview.board.ready",function(){l.resolve()}),c.on("error",function(){l.resolve()}),c.fire("initialize",o),c.fire("boardSettings.ready",{boardSettings:this.createStubBoardSettings(a,s.getBoardSettingsFactory())}),l.then(t.constant({destroy:c.fire.bind(c,"destroy")}))},createStubBoardSettings:function(e,i){return i.createStaticSettings(t.deepClone(e))}}}),define("jsx!tau/components/dashboard/widget.templates/shared/settings.container.view",["require","react"],function(e){var t=e("react");return t.createClass({getDefaultProps:_.constant({labelsOnTop:!0}),render:function(){var e=t.addons.classSet({"tau-widget-settings-list":!0,"tau-widget-settings-list--col":this.props.labelsOnTop});return t.createElement("ul",{className:e},this.props.children)}})}),define("jsx!tau/components/dashboard/widget.templates/shared/error.view",["require","react"],function(e){var t=e("react");return t.createClass({displayName:"WidgetErrorView",getDefaultProps:function(){return{header:"Unable to display a widget content here",message:"Some error occurred and we're not sure why"}},render:function(){return t.createElement("div",null,t.createElement("div",null,this.props.header),t.createElement("div",{className:"tau-widget-error-vew__message i-role-widget-error-view__message"},this.props.message))}})}),define("tau/components/dashboard/widget.templates/linked.view.base/linked.view.widget.factory",["require","react","jsx!../shared/settings.container.view","jsx!../shared/error.view"],function(e){var t=e("react"),i=e("jsx!../shared/settings.container.view"),n=e("jsx!../shared/error.view");
return{MSG_VIEW_IS_NOT_SET_UP_AND_NOT_EDITABLE:"This View has not been configured yet, and you are not authorized to change its settings",MSG_VIEW_DOES_NOT_EXIST_OR_UNAUTHORIZED:"Either specified View does not exist or you are not authorized to view it",insert:function(e){var t=e.placeholder,i=e.configurator,n=e.settings.selectedViewId;return n?i.getViewApiService().getViewMenuItem(n).then(function(t){return e.insertView(t.data)},this.insertError.bind(this,t,this.MSG_VIEW_DOES_NOT_EXIST_OR_UNAUTHORIZED)):this._insertViewSelector(e.SelectorModel,e.SelectorView,t,i,e.environment)},insertError:function(e,i){t.render(t.createElement(n,{message:i}),e)},_insertViewSelector:function(e,n,r,a,s){return s.widgetApi.canEditWidget()?new e(a.getViewsMenuService()).getAllViews().then(function(e){var o=t.createElement(n,{views:e,onChange:this._onViewSelected.bind(this,a,s)}),c=t.createElement(i,{},o);t.render(c,r)}.bind(this)):this.insertError(r,this.MSG_VIEW_IS_NOT_SET_UP_AND_NOT_EDITABLE)},_onViewSelected:function(e,t,i){e.getViewApiService().getViewMenuItem(i).then(function(e){return t.widgetApi.internalModifyDefinition({selectedViewId:i},{name:e.data.name})})}}}),define("jsx!tau/components/dashboard/widget.templates/shared/settings.list.item.view",["require","react"],function(e){var t=e("react");return t.createClass({render:function(){return t.createElement("li",{className:"tau-widget-settings-list__item"},t.createElement("label",{className:this.props.labelClassName},t.createElement("span",{className:"tau-widget-settings-list__title"},this.props.title),this.props.children))}})}),define("jsx!tau/components/dashboard/widget.templates/linked.view.base/view.selector.view.factory",["require","react","Underscore","jsx!../shared/settings.list.item.view"],function(e){var t=e("react"),i=e("Underscore"),n=e("jsx!../shared/settings.list.item.view");return{createSelectorViewClass:function(e){var r=e.viewTypeName;if(!i.isString(r)||!r.length)throw new Error("viewTypeName should be defined and it should be a non-empty string");
return t.createClass({displayName:e.displayName,propTypes:{views:t.PropTypes.arrayOf(t.PropTypes.shape({key:t.PropTypes.string.isRequired,name:t.PropTypes.string})),selectedViewId:t.PropTypes.string,onChange:t.PropTypes.func},getDefaultProps:i.constant({views:[]}),getInitialState:function(){return{selectedViewId:this.props.initialSelectedViewId||""}},componentDidUpdate:function(e,t){this.state.selectedViewId!==t.selectedViewId&&i.isFunction(this.props.onChange)&&this.props.onChange(this.state.selectedViewId)},getSelectedViewId:function(){return this.state.selectedViewId},_onViewSelected:function(e){var t=e.target.value;this.setState({selectedViewId:t})},render:function(){var e=i.any(this.props.views,i.matches({key:this.state.selectedViewId}))?this.state.selectedViewId:null,a=i.map(this.props.views,function(e){return t.createElement("option",{key:e.key,value:e.key},e.name)});a.unshift(t.createElement("option",{key:"__none__",value:"",disabled:!0},"Please choose a ",r,".."));var s="Use "+r;return t.createElement(n,{labelClassName:"tau-select",title:s},t.createElement("select",{className:"tau-select tau-widget-settings__list i-role-widget__linked-view__view-selector",value:e,onChange:this._onViewSelected},a))}})}}}),define("tau/components/dashboard/widget.templates/new.list/linked/selector.view",["require","jsx!../../linked.view.base/view.selector.view.factory"],function(e){var t=e("jsx!../../linked.view.base/view.selector.view.factory");return t.createSelectorViewClass({viewTypeName:"list",displayName:"LinkedListSelector"})}),define("jsx!tau/components/dashboard/widget.templates/linked.view.base/view.link.view",["require","react"],function(e){var t=e("react");return t.createClass({displayName:"LinkedViewLink",propTypes:{viewUrl:t.PropTypes.string},render:function(){return this.props.viewUrl?t.createElement("a",{href:this.props.viewUrl,target:"_blank",className:"tau-widget-settings-list__link"},"Open in new tab"):null}})}),define("jsx!tau/components/dashboard/widget.templates/new.list/page.size.selector.view",["require","Underscore","react","jsx!../shared/settings.list.item.view"],function(e){var t=e("Underscore"),i=e("react"),n=e("jsx!../shared/settings.list.item.view");
return i.createClass({displayName:"ListWidgetPageSizeSelector",propTypes:{initialPageSize:i.PropTypes.number,availablePageSizes:i.PropTypes.arrayOf(i.PropTypes.number)},mixins:[i.addons.LinkedStateMixin],getDefaultProps:t.constant({availablePageSizes:[5,10,15,20,30],initialPageSize:10}),getInitialState:function(){return{pageSize:this.props.initialPageSize}},getSelectedPageSize:function(){return this.state.pageSize},render:function(){var e=t.map(this.props.availablePageSizes,function(e){return i.createElement("option",{key:e,value:e},e)});return i.createElement(n,{labelClassName:"tau-select-inline",title:"Show top"},i.createElement("select",{className:"tau-select-inline tau-widget-settings__list",valueLink:this.linkState("pageSize")},e),i.createElement("span",{className:"tau-widget-settings-list__title"},"elements"))}})}),define("jsx!tau/components/dashboard/widget.templates/new.list/linked/settings.view",["require","Underscore","react","./selector.view","jsx!../../linked.view.base/view.link.view","jsx!../page.size.selector.view","jsx!../../shared/settings.container.view"],function(e){var t=(e("Underscore"),e("react")),i=e("./selector.view"),n=e("jsx!../../linked.view.base/view.link.view"),r=e("jsx!../page.size.selector.view"),a=e("jsx!../../shared/settings.container.view");return t.createClass({displayName:"LinkedListWidgetSettings",propTypes:{viewUrl:t.PropTypes.string,views:t.PropTypes.array.isRequired,initialSelectedViewId:t.PropTypes.string,initialPageSize:t.PropTypes.number},getSelectedSettings:function(){return{selectedViewId:this.refs.listSelector.getSelectedViewId(),pageSize:this.refs.pageSizeSelector.getSelectedPageSize()}},render:function(){return t.createElement(a,null,t.createElement(i,{ref:"listSelector",initialSelectedViewId:this.props.initialSelectedViewId,views:this.props.views}),t.createElement(n,{viewUrl:this.props.viewUrl}),t.createElement(r,{ref:"pageSizeSelector",initialPageSize:this.props.initialPageSize}))}})}),define("tau/components/dashboard/widget.templates/linked.view.base/view.selector.model",["require","Underscore","tau/core/class","tau/components/board.menu/models/board.menu.section.collection"],function(e){var t=e("Underscore"),i=e("tau/core/class"),n=e("tau/components/board.menu/models/board.menu.section.collection");
return i.extend({init:function(e){if(!t.isFunction(e.isMatchingView))throw new Error("`isMatchingView` should be a valid function");this._viewsMenuService=e.viewsMenuService,this._isMatchingView=e.isMatchingView},getAllViews:function(e){return this._viewsMenuService.getViewsMenuForUser().then(this._getViewsFromSections.bind(this,e))},_getViewsFromSections:function(e,i){var r=new n;r.setSections(i);var a=r.getAllBoards();return t.chain(a).filter(function(t){var i=e&&t.storedViewData.key===e;return i||this._isMatchingView(t)},this).map(this._pickViewData,this).sortBy(t.property("name")).value()},_pickViewData:function(e){var t=e.storedViewData.key;return{key:t,name:e.storedViewData.name||t}}})}),define("tau/components/dashboard/widget.templates/new.list/linked/selector.model",["require","../../linked.view.base/view.selector.model","tau/services/boards/view.types"],function(e){var t=e("../../linked.view.base/view.selector.model"),i=e("tau/services/boards/view.types");return t.extend({init:function(e){this._super({viewsMenuService:e,isMatchingView:this._isListView})},_isListView:function(e){return e.itemType===i.BOARD&&"newlist"===e.viewMode}})}),define("tau/components/dashboard/widget.templates/new.list/linked/new.list.linked.widget.template",["require","Underscore","react","../../linked.view.base/linked.view.widget.factory","jsx!./settings.view","./selector.view","./selector.model","../list.component.renderer","tau/models/board.plus/nodata/nodata-checker"],function(e){function t(e,t,n,r){return d.isListConfigured(r)?l.insertListComponent({placeholder:e,configurator:n,listDefinition:i(r,t)}):a.insertError(e,p.MSG_LIST_IS_NOT_CONFIGURED)}function i(e,t){return e=n.deepClone(e),t=n.pick(t,"pageSize"),p.mergeWidgetSettingsIntoListDefinition(e,t),e}var n=e("Underscore"),r=e("react"),a=e("../../linked.view.base/linked.view.widget.factory"),s=e("jsx!./settings.view"),o=e("./selector.view"),c=e("./selector.model"),l=e("../list.component.renderer"),d=e("tau/models/board.plus/nodata/nodata-checker"),u=30,p=function(e){return{id:"new.list.linked",name:"Any List View",description:"Add any existing list view to a dashboard",previewSrc:"../img/widgets/lists-any.png",tags:["Lists"],defaultSettings:{pageSize:10},insert:function(i,n,r){return a.insert({placeholder:i,settings:n,environment:r,configurator:e,SelectorModel:c,SelectorView:o,insertView:t.bind(null,i,n,e)})
},insertSettings:function(t,i,n){var a=i.selectedViewId;return new c(e.getViewsMenuService()).getAllViews(a).then(function(o){var c=r.createElement(s,{views:o,viewUrl:e.getUrlBuilder().getRelativeBoardUrl(a,n.context.acid),initialSelectedViewId:a,initialPageSize:i.pageSize}),l=r.render(c,t);return function(){return l.getSelectedSettings()}})}}};return p.MSG_LIST_IS_NOT_CONFIGURED="List view is not configured.\n Please open a linked List view and specify its lanes and cards.",p.mergeWidgetSettingsIntoListDefinition=function(e,t){n.defaults(e,{cellPaging:{},cells:{}}),e.cellPaging.onPage=Math.min(t.pageSize||u,u)},p}),define("tau/components/dashboard/widget.templates/new.list/list.filter.component.renderer",["require","jQuery","./list.component.renderer","tau/components/component.filter","libs/jquery/jquery.toggleFilter","libs/jquery/jquery.tau.resetableInput"],function(e){var t=e("jQuery"),i=e("./list.component.renderer"),n=e("tau/components/component.filter");return e("libs/jquery/jquery.toggleFilter"),e("libs/jquery/jquery.tau.resetableInput"),{insertFilterComponent:function(e,r,a){var s=t(e),o={context:{configurator:r},name:"cells",filter:a.cells.filter,useFilter:!0},c=n.create(o);c.on("afterRender",function(e,t){s.append(t.element),s.find(".i-role-filter-control").toggleFilter(),s.find(".i-role-filter-input").tauResetableInput({showAlways:!0}),c.fire("view.dom.ready"),c.fire("$form.ready",s)}),c.fire("initialize",o),c.fire("boardSettings.ready",{boardSettings:i.createStubBoardSettings(a,r.getBoardSettingsFactory())})}}}),define("jsx!tau/components/dashboard/widget.templates/new.list/dsl.filter.view",["require","jQuery","react","jsx!../shared/settings.list.item.view","./list.filter.component.renderer"],function(e){var t=e("jQuery"),i=e("react"),n=e("jsx!../shared/settings.list.item.view"),r=e("./list.filter.component.renderer");return i.createClass({componentDidMount:function(){r.insertFilterComponent(this.refs.filterContainer.getDOMNode(),this.props.configurator,this.props.listDefinition)
},getFilter:function(){return t(this.getDOMNode()).find(".i-role-filter-input").val()},render:function(){return i.createElement(n,{labelClassName:"tau-select-inline",title:"Filter"},i.createElement("div",{className:"tau-inline-group",ref:"filterContainer"}))}})}),define("tau/components/dashboard/widget.templates/new.list/generic.list.template",["require","Underscore","react","./list.component.renderer","./linked/new.list.linked.widget.template","jsx!../shared/settings.container.view","jsx!./page.size.selector.view","jsx!./dsl.filter.view"],function(e){var t=e("Underscore"),i=e("react"),n=e("./list.component.renderer"),r=e("./linked/new.list.linked.widget.template"),a=e("jsx!../shared/settings.container.view"),s=e("jsx!./page.size.selector.view"),o=e("jsx!./dsl.filter.view"),c=i.createClass({displayName:"GenericListSettingsView",render:function(){return i.createElement(a,null,i.createElement(o,{ref:"dslFilter",configurator:this.props.configurator,listDefinition:this.props.listDefinition}),i.createElement(s,{ref:"pageSizeSelector",initialPageSize:this.props.listDefinition.cellPaging.onPage}))}});return{create:function(e,r){var a=this,s=t.deepClone(r.listDefinition);return{id:r.id,name:r.name,description:r.description,previewSrc:r.previewSrc||"../img/widgets/lists-list.png",tags:r.tags,defaultSettings:{pageSize:s.cellPaging.onPage,filter:s.cells.filter},insert:function(t,i){return n.insertListComponent({placeholder:t,listDefinition:a._constructDefinition(s,i),configurator:e})},insertSettings:function(t,n){var r=i.render(i.createElement(c,{configurator:e,listDefinition:a._constructDefinition(s,n)}),t);return function(){return{pageSize:r.refs.pageSizeSelector.getSelectedPageSize(),filter:r.refs.dslFilter.getFilter()}}}}},_constructDefinition:function(e,i){return e=t.deepClone(e),i=t.pick(i,"pageSize","filter"),r.mergeWidgetSettingsIntoListDefinition(e,i),i.filter&&(e.cells.useFilter=!0,e.cells.filter=i.filter),e}}}),define("tau/components/dashboard/services/dashboard.widget.template.default.source.lists",["require","../widget.templates/new.list/generic.list.template","Underscore"],function(e){var t=e("../widget.templates/new.list/generic.list.template"),i=e("Underscore");
return{getCustomListTemplates:function(e){return i.map(this._getListDefinitions(),function(i){return t.create(e,i)})},_getListDefinitions:function(){return this._setDefaultValues([{id:"new.list.new.bugs",name:"New Bugs",description:"A list of all the latest bugs",listDefinition:{cells:{types:["bug"],filter:"",useFilter:!1,ordering:{name:"Creation Date",direction:"Desc"}},x:{types:[],filter:"",useFilter:!1,ordering:{}},y:{types:[],filter:"",useFilter:!1,ordering:{}},cardSettings:{list_bug:{list:[[{id:"entity_name_1line",alignment:"base"},{id:"general_entity_id",alignment:"base"},{id:"project_abbr",alignment:"base"},{id:"assigned_users",alignment:"base"},{id:"create_date",alignment:"base"},{id:"severity_short",alignment:"base"}]]}},viewMode:"newlist"}},{id:"new.list.open.impediments",name:"Open Impediments",description:"Open impediments displayed in a list",listDefinition:{cells:{types:["impediment"],filter:"?EntityState.IsFinal is False",useFilter:!0,ordering:{name:"Creation Date",direction:"Desc"}},x:{types:[],filter:"",useFilter:!1,ordering:{}},y:{types:[],filter:"",useFilter:!1,ordering:{}},cardSettings:{list_impediment:{list:[[{id:"entity_name_1line",alignment:"base"},{id:"general_entity_id",alignment:"base"},{id:"project_abbr",alignment:"base"},{id:"create_date",alignment:"base"},{id:"priority_short",alignment:"base"},{id:"responsible_person",alignment:"base"},{id:"state_short",alignment:"alt"}]]}},viewMode:"newlist"}},{id:"new.list.new.entities",name:"New Entities",description:"A list of recently created assignable entities, like bugs and user stories",listDefinition:{cells:{types:["epic","feature","userstory","bug","task","request"],filter:"",useFilter:!1,ordering:{name:"Creation Date",direction:"Desc"}},x:{types:[],filter:"",useFilter:!1,ordering:{}},y:{types:[],filter:"",useFilter:!1,ordering:{}},cardSettings:{list_epic_feature_userstory_bug_task_request:{list:[[{id:"entity_name_1line",alignment:"base"},{id:"general_entity_id",alignment:"base"},{id:"project_abbr",alignment:"base"},{id:"create_date",alignment:"base"},{id:"owner",alignment:"base"}]]}},viewMode:"newlist"}},{id:"new.list.programs.status",name:"Programs status",description:"Programs progress with high level indicators",previewSrc:"../img/widgets/lists-programs.png",listDefinition:{cells:{types:["program"],filter:"",useFilter:!1,ordering:{name:"Name",direction:"Asc"}},x:{types:[],filter:"",useFilter:!1,ordering:{}},y:{types:[],filter:"",useFilter:!1,ordering:{}},cardSettings:{list_program:{list:[[{id:"entity_name_1line",alignment:"base"},{id:"progress_long_program",alignment:"base"},{id:"feature_icon",alignment:"base"},{id:"us_opentotal",alignment:"base"},{id:"bugs",alignment:"base"},{id:"projects_badge_program",alignment:"base"}]]}},viewMode:"newlist"}},{id:"new.list.projects.status",name:"Projects status",description:"List of projects with progress indicators",previewSrc:"../img/widgets/lists-projects.png",listDefinition:{cells:{types:["project"],filter:"",useFilter:!1,ordering:{name:"Name",direction:"Asc"}},x:{types:[],filter:"",useFilter:!1,ordering:{}},y:{types:[],filter:"",useFilter:!1,ordering:{}},cardSettings:{list_project:{list:[[{id:"team_project_name_long",alignment:"base"},{id:"progress_long",alignment:"base"},{id:"feature_icon",alignment:"base"},{id:"us_opentotal",alignment:"base"},{id:"bugs",alignment:"base"},{id:"owner",alignment:"base"}]]}},viewMode:"newlist"}},{id:"new.list.teams.status",name:"Teams status",description:"High level progress of Teams",previewSrc:"../img/widgets/lists-projects.png",listDefinition:{cells:{types:["team"],filter:"",useFilter:!1,ordering:{name:"Name",direction:"Asc"}},x:{types:[],filter:"",useFilter:!1,ordering:{}},y:{types:[],filter:"",useFilter:!1,ordering:{}},cardSettings:{list_team:{list:[[{id:"team_project_name_long",alignment:"base"},{id:"team_team",alignment:"base"},{id:"projects_badge_team",alignment:"base"},{id:"feature_icon",alignment:"base"},{id:"us_opentotal",alignment:"base"},{id:"bugs",alignment:"base"}]]}},viewMode:"newlist"}},{id:"new.list.releases.status",name:"Releases status",description:"Current Releases progress on a high level",previewSrc:"../img/widgets/lists-releases.png",listDefinition:{cells:{types:["release"],filter:"?it is Current",useFilter:!0,ordering:{name:"Name",direction:"Asc"}},x:{types:[],filter:"",useFilter:!1,ordering:{}},y:{types:[],filter:"",useFilter:!1,ordering:{}},cardSettings:{list_release:{list:[[{id:"entity_name_1line",alignment:"base"},{id:"project_abbr",alignment:"base"},{id:"progress_long_release_iteration",alignment:"base"},{id:"effort_spent_total_collection",alignment:"base"},{id:"us_opentotal",alignment:"base"},{id:"burndownlink",alignment:"base"},{id:"end_date",alignment:"base"}]]}},viewMode:"newlist"}},{id:"new.list.iterations.status",name:"Iterations status",description:"Current iterations progress on a high level",previewSrc:"../img/widgets/lists-teamiterations.png",listDefinition:{cells:{types:["iteration"],filter:"?it is Current",useFilter:!0,ordering:{name:"Name",direction:"Asc"}},x:{types:[],filter:"",useFilter:!1,ordering:{}},y:{types:[],filter:"",useFilter:!1,ordering:{}},cardSettings:{list_iteration:{list:[[{id:"entity_name_1line",alignment:"base"},{id:"project_abbr",alignment:"base"},{id:"iteration_velocity",alignment:"base"},{id:"effort_spent_total_collection",alignment:"base"},{id:"progress_long_release_iteration",alignment:"base"},{id:"burndownlink",alignment:"base"},{id:"dates",alignment:"base"}]]}},viewMode:"newlist"}}])
},_setDefaultValues:function(e){return i.each(e,function(e){i.defaults(e,{tags:["Lists"]}),i.defaults(e.listDefinition,{cellPaging:{onPage:10}})}),e}}}),define("tau/components/customReport/customReport.state.renderer",["require","jQuery","Underscore","tau/core/class"],function(e){var t=e("jQuery"),i=e("Underscore"),n=e("tau/core/class"),r=n.extend({init:function(e,t,i){this._chart=e,this._container=t,this._renderWithNewSettings=i},rerender:function(e){return this.destroy(),this._renderWithNewSettings(e).then(function(e){this._chart=e}.bind(this))},resize:function(e){setTimeout(function(){this._chart&&this._chart.resize(e)}.bind(this),0)},destroy:function(){this._chart&&this._chart.destroy()}});return n.extend({init:function(e){this._renderer=e},renderCustomReportAndGetState:function(e,n,a){var s=t.Deferred(),o=function(t){return this._renderer.renderCustomReport(e,t,a).then(i.property("chart"))}.bind(this);return o(n).done(function(t){s.resolve(new r(t,e[0],o))}).fail(function(){s.resolve(new r(null,e[0],o))}),s.promise()}})}),define("tau/components/dashboard/widget.templates/custom.report/custom.report.widget.renderer",["require","jQuery","Underscore","template!tau/components/customReport/templates/customReport.template","tau/components/customReport/customReport.renderer","tau/components/customReport/customReport.state.renderer"],function(e){function t(e){return{height:e.clientHeight-c}}var i=e("jQuery"),n=e("Underscore"),r=e("template!tau/components/customReport/templates/customReport.template"),a=e("tau/components/customReport/customReport.renderer"),s=e("tau/components/customReport/customReport.state.renderer"),o=a.extend({getChartPlugins:function(e,t,i){return[this.getTooltipPlugin(e,i),this.getOpenEntityPlugin(),this.getTrendlinePlugin({showPanel:!1})]}}),c=17;return{insertReportComponent:function(e){var n=e.placeholder,a=i('<div class="tau-custom-report-widget-adapter"></div>').append(r.get().bind()).appendTo(n),c=a.find(".i-role-report-content"),l={size:t(n),autoResize:!1},d=this._createReportSettings(e.reportDefinition,e.environmentContext);
return new s(new o(e.configurator)).renderCustomReportAndGetState(c,d,l).then(function(i){return{updateContext:function(t){i.rerender(this._createReportSettings(e.reportDefinition,t))}.bind(this),resize:function(){i.resize(t(n))},destroy:function(){i.destroy()}}}.bind(this))},_createReportSettings:function(e,t){var i=n.deepClone(e.reportSettings);return i.dataSource.global=n.extend(i.dataSource.global||{},{acid:t.acid}),i}}}),define("tau/components/dashboard/widget.templates/custom.report/custom.report.template",["require","Underscore","./custom.report.widget.renderer"],function(e){var t=e("Underscore"),i=e("./custom.report.widget.renderer"),n=function(e,r){return{id:r.id,name:r.name,description:r.description,previewSrc:r.previewSrc||"../img/widgets/reports-trend-down.png",tags:r.tags,layout:n.REPORT_LAYOUT_SETTINGS,insert:function(n,a,s){return i.insertReportComponent({placeholder:n,environmentContext:s.context,reportDefinition:t.deepClone(r.reportDefinition),configurator:e})}}};return n.REPORT_LAYOUT_SETTINGS={aspectRatio:1.6},n}),define("tau/components/dashboard/services/dashboard.widget.template.default.source.reports",["require","../widget.templates/custom.report/custom.report.template","Underscore"],function(e){var t=e("../widget.templates/custom.report/custom.report.template"),i=e("Underscore");return{getCustomReportTemplates:function(e){return i.map(this._getReportDefinitions(),function(i){return t(e,i)})},_getReportDefinitions:function(){return this._setDefaultValues([{id:"report.issues.resolution.time.trend",name:"Issues resolution time trend",description:"How quickly issues and questions are resolved",previewSrc:"../img/widgets/reports-trend-down.png",reportDefinition:{reportSettings:{report:{x:"endDate",y:"leadTime",color:"entityType",dimensions:{endDate:{type:"order",scale:"period"},entityType:{type:"category",scale:"ordinal"},leadTime:{type:"measure",scale:"linear"}},guide:{y:{label:"Lead Time"},x:{label:"End Date",tickPeriod:"day"}},type:"line"},dataSource:{source:{filter:'?(RequestType is "Issue" or RequestType is "Question") and CreateDate > Today - 30(days)',items:[{id:"Request"}]},dimensions:[{model:"DAY(EndDate)",id:"endDate"},{model:"Avg(LeadTime)",id:"leadTime"},{model:"entityType.name",id:"entityType"}],user:{}}}}},{id:"report.new.bugs.trend",name:"New Bugs trend",description:"New Bugs added into Project by day",previewSrc:"../img/widgets/reports-trend-flat.png",reportDefinition:{reportSettings:{report:{x:"createDate",y:["count"],color:"entityType",dimensions:{createDate:{type:"order",scale:"period"},entityType:{type:"category",scale:"ordinal"},count:{type:"measure",scale:"linear"}},guide:[{x:{label:"Create Date",tickPeriod:"day"},y:{label:"Count"}}],type:"line"},dataSource:{source:{filter:"?CreateDate >= Today - 30(days)",items:[{id:"Bug"}]},dimensions:[{model:"DAY(createDate)",id:"createDate"},{model:"Count()",id:"count"},{model:"entityType.name",id:"entityType"}],user:{}}}}},{id:"report.cycle.time.trend",name:"Cycle Time trend",description:"How average Cycle Time of Bugs and User Stories changes every week",previewSrc:"../img/widgets/reports-trend-down-double.png",reportDefinition:{reportSettings:{report:{x:"endDate",y:["cycleTime"],color:"entityType",dimensions:{endDate:{type:"order",scale:"period"},cycleTime:{type:"measure",scale:"linear"},entityType:{type:"category",scale:"ordinal"}},guide:[{x:{label:"Time",tickPeriod:"week"},y:{label:"CycleTime"}}],type:"line"},dataSource:{source:{filter:"?EntityState.IsFinal is true and EndDate >= Today - 182(days)",items:[{id:"Bug"},{id:"UserStory"}]},dimensions:[{id:"cycleTime",model:"avg(cycleTime)"},{id:"entityType",model:"entityType.name"},{id:"endDate",model:"week(endDate)"}]}}}},{id:"report.closed.bugs.trend",name:"Closed Bugs trend",description:"Bugs fixed in Project by day",previewSrc:"../img/widgets/reports-trend-up.png",reportDefinition:{reportSettings:{report:{x:"endDate",y:["count"],color:"entityType",dimensions:{endDate:{type:"order",scale:"period"},entityType:{type:"category",scale:"ordinal"},count:{type:"measure",scale:"linear"}},guide:[{x:{label:"End Date",tickPeriod:"day"},y:{label:"Count"}}],type:"line"},dataSource:{source:{filter:"?EndDate >= Today - 30(days)",items:[{id:"Bug"}]},dimensions:[{model:"DAY(endDate)",id:"endDate"},{model:"Count()",id:"count"},{model:"entityType.name",id:"entityType"}]}}}}])
},_setDefaultValues:function(e){return i.each(e,function(e){i.defaults(e,{tags:["Reports"]})}),e}}}),define("libs/react/react-infinity-scroll",["require","react","jQuery"],function(e){var t=e("react"),i=e("jQuery");if(t.addons=t.addons||{},t.addons.InfiniteScroll)return t.addons.InfiniteScroll;var n=t.addons.InfiniteScroll=t.createClass({statics:{setDefaultLoader:function(e){n._defaultLoader=e}},getDefaultProps:function(){return{pageStart:0,hasMore:!1,loadMore:function(){},threshold:250}},reset:function(){this.pageLoaded=0},componentDidMount:function(){this.pageLoaded=this.props.pageStart,this.attachScrollListener()},componentDidUpdate:function(){this.attachScrollListener()},render:function(){var e=this.props;return t.DOM.div(null,e.children,e.hasMore&&(e.loader||n._defaultLoader))},getScrollParent:function(){return i(this.getDOMNode()).scrollParent()[0]},scrollListener:function(){var e=this.getScrollParent();e.scrollHeight-i(e).scrollTop()-i(e).height()<Number(this.props.threshold)&&(this.detachScrollListener(),this.props.loadMore(this.pageLoaded+=1))},attachScrollListener:function(){if(this.props.hasMore){var e=this.getScrollParent();e.addEventListener("scroll",this.scrollListener),e.addEventListener("resize",this.scrollListener),this.scrollListener()}},detachScrollListener:function(){var e=this.getScrollParent();e.removeEventListener("scroll",this.scrollListener),e.removeEventListener("resize",this.scrollListener)},componentWillUnmount:function(){this.detachScrollListener()}});return n}),define("jsx!tau/components/dashboard/infinity.scroll.list",["require","react","libs/react/react-infinity-scroll"],function(e){var t=e("react"),i=e("libs/react/react-infinity-scroll");return t.createClass({propTypes:{pageSize:t.PropTypes.number.isRequired,pageLimit:t.PropTypes.number,loadMore:t.PropTypes.func.isRequired,loadNew:t.PropTypes.func,loadNewInterval:t.PropTypes.number,renderItem:t.PropTypes.func.isRequired,autoRefresh:t.PropTypes.bool},getInitialState:function(){return{hasMore:!0,items:[],hasError:!1}
},componentDidMount:function(){this.props.autoRefresh&&(this._autoRefreshIntervalId=setInterval(this.forceUpdate.bind(this),6e4)),this._loadNewIntervalId=setInterval(this.loadNew,1e3*(this.props.loadNewInterval||60))},componentWillUnmount:function(){clearInterval(this._autoRefreshIntervalId),clearInterval(this._loadNewIntervalId)},reset:function(){this.refs.scroll.reset(),this.setState(this.getInitialState())},_getLoader:function(){return this.props.loader||t.createElement("div",{className:"loader"},"Loading…")},_getEmptyMessage:function(){return this.props.emptyMessage||t.createElement("div",{className:"empty-message"},"No items to show")},_getErrorMessage:function(){return t.createElement("div",{className:"empty-message"},"Sorry, something went wrong :(")},_getHasMore:function(e,t){return e.length===this.props.pageSize&&(!this.props.pageLimit||t<this.props.pageLimit)},loadMore:function(e){this.isMounted()&&this.props.loadMore(e,this.props.pageSize).then(function(t){this.isMounted()&&this.setState({hasMore:this._getHasMore(t,e),items:this.state.items.concat(t)})}.bind(this)).fail(function(){this.isMounted()&&this.setState({hasMore:!1,hasError:!0})}.bind(this))},loadNew:function(){this.props.loadNew&&this.props.loadNew().then(function(e){this.isMounted()&&e.length&&this.setState({items:e.concat(this.state.items)})}.bind(this))},render:function(){var e=_.map(this.state.items,this.props.renderItem);return t.createElement("div",{style:{maxHeight:this.props.maxHeight||"500px",overflowY:"auto"},className:this.props.className||""},t.createElement(i,{ref:"scroll",loader:this._getLoader(),loadMore:this.loadMore,hasMore:this.state.hasMore},e,this.state.hasError?this._getErrorMessage():null,0!==this.state.items.length||this.state.hasMore||this.state.hasError?null:this._getEmptyMessage()))}})}),define("jsx!tau/components/latest.comments/dashboard.widget.latest.comments",["require","jQuery","react","jsx!tau/components/dashboard/infinity.scroll.list"],function(e){var t=(e("jQuery"),e("react")),i=e("jsx!tau/components/dashboard/infinity.scroll.list");
return t.createClass({componentWillReceiveProps:function(){this.refs.list.reset(),this._firstLoadCommentId=null},_loadMore:function(e,t){return this.props.service.loadComments(this.props.acid,this.props.source,e,t,null,this._getFirstLoadCommentId()).then(function(e){return!this._firstLoadCommentId&&e.length&&(this._firstLoadCommentId=e[0].id),e}.bind(this))},_loadNew:function(){return this.props.service.loadComments(this.props.acid,this.props.source,1,999,this._getLatestCommentId())},_getFirstLoadCommentId:function(){return this._firstLoadCommentId||null},_getLatestCommentId:function(){var e=this.refs.list.state.items;return e.length?e[0].id:null},_renderCommentItem:function(e){var i=e.general.entityType.name.toLowerCase(),n="tau-text tau-text_type_"+i;return t.createElement("div",{className:"tau-dashboard-widget-comment",key:e.id},t.createElement("div",{className:"tau-dashboard-widget-comment__header"},t.createElement("a",{href:e.owner.userUrl,target:"_blank",onClick:this._openEntityView.bind(this,e.owner.id,"user")},t.createElement("img",{className:"tau-dashboard-widget-person",src:e.owner.avatarUrl,title:e.owner.fullName})),t.createElement("a",{className:"tau-dashboard-widget-name",href:e.owner.userUrl,onClick:this._openEntityView.bind(this,e.owner.id,"user")},e.owner.fullName),t.createElement("div",{className:"tau-dashboard-widget-date-time",title:e.date.full},e.date.userFriendly),e.parentId?t.createElement("span",{className:"tau-icon tau-icon_name_back-arrow"}):null),t.createElement("div",{className:"tau-dashboard-widget-comment__body"},e.description),t.createElement("div",{className:"tau-dashboard-widget-comment__footer"},t.createElement("a",{href:e.general.url,className:n,onClick:this._openEntityView.bind(this,e.general.id,i)},e.general.entityType.abbreviation+" "+e.general.id),t.createElement("a",{href:e.general.url,className:n,onClick:this._openEntityView.bind(this,e.general.id,i)},e.general.name)))},_openEntityView:function(e,t,i){i.preventDefault(),i.stopPropagation(),this.props.service.openEntityView(e,t)
},render:function(){return t.createElement(i,{ref:"list",pageSize:10,loadMore:this._loadMore,loadNew:this._loadNew,loadNewInterval:600,renderItem:this._renderCommentItem,autoRefresh:!0})}})}),define("tau/components/latest.comments/dashboard.widget.latest.comments.constants",[],function(){return{SOURCE_ALL:"all",SOURCE_RELATED_TO_ME:"related"}}),define("jsx!tau/components/latest.comments/dashboard.widget.latest.comments.settings",["require","react","./dashboard.widget.latest.comments.constants"],function(e){var t=e("react"),i=e("./dashboard.widget.latest.comments.constants");return t.createClass({getInitialState:function(){return{source:this.props.initialSource}},render:function(){var e=this.state.source.toLowerCase();return t.createElement("ul",{className:"tau-widget-settings-list"},t.createElement("li",{className:"tau-widget-settings-list__item"},t.createElement("label",{className:"tau-switch i-role-show-comments"},t.createElement("span",{className:"tau-widget-settings-list__title"},"Show comments"),t.createElement("div",{className:"tau-inline-group"},t.createElement("button",{className:"tau-btn tau-btn-board-view"+(e===i.SOURCE_ALL?" tau-checked":""),type:"button","data-value":i.SOURCE_ALL,onClick:this._onSourceButtonClick},"All"),t.createElement("button",{className:"tau-btn tau-btn-board-view tau-extension-board-tooltip"+(e===i.SOURCE_RELATED_TO_ME?" tau-checked":""),type:"button","data-value":i.SOURCE_RELATED_TO_ME,"data-title":"Comments from entities you follow, set as an owner or assigned to",onClick:this._onSourceButtonClick},"Related to me")))))},_onSourceButtonClick:function(e){e.preventDefault(),e.stopPropagation(),this.setState({source:e.target.getAttribute("data-value")})}})}),define("tau/components/latest.comments/dashboard.widget.latest.comments.service",["require","jQuery","Underscore","tau/core/class","tau/store/header","./dashboard.widget.latest.comments.constants","tau/utils/utils.date","tau/core/termProcessor"],function(e){var t=e("jQuery"),i=e("Underscore"),n=e("tau/core/class"),r=e("tau/store/header"),a=e("./dashboard.widget.latest.comments.constants"),s=e("tau/utils/utils.date"),o=e("tau/core/termProcessor"),c=new o;
return n.extend({init:function(e){this._configurator=e},loadComments:function(e,t,n,r,a,s){return this._loadComments(e,t,n,r,a,s).then(function(e){return i.map(e,this._createCommentItem,this)}.bind(this))},_loadComments:function(e,i,n,s,o,c){var l=t.Deferred();if(i!==a.SOURCE_RELATED_TO_ME&&i!=a.SOURCE_ALL)return l.reject(),l;var d=this._configurator.getApplicationPath()+"/api/v1/comments/"+i+"?format=json&acid="+e+"&skip="+(n-1)*s+"&take="+s+"&from="+o+"&to="+c;return t.ajax({url:d,dataType:"json"}).done(function(e){var t=r.formatObject(e);l.resolve(t.data)}.bind(this)).fail(l.reject),l},_createCommentItem:function(e){var t=this._configurator.getUrlBuilder(),i=s.parse(s.convertToTimezone(e.createDate)),n=e.general.entityType.name.split("|"),r=n[0],a=n.length>1?c.getShortAbbreviation(n[1]):c.getTerms(r).iconSmall;return{id:e.id,parentId:e.parentId,date:{full:s.formatAs(i,"d MMMM yyyy HH:mm"),userFriendly:this._getCommentDateText(i)},owner:{id:e.owner.id,fullName:e.owner.firstName+" "+e.owner.lastName,avatarUrl:t.getAvatarUrl(e.owner.id,20),userUrl:t.getNewViewUrl(e.owner.id,"user",!0)},general:{id:e.general.id,name:e.general.name,entityType:{name:r,abbreviation:a},url:t.getNewViewUrl(e.general.id,r,!0)},description:this._getCommentText(e.description)}},_getCommentText:function(e){return t("<p>"+e.replace(/<img[^>]*>/g,"*image*").replace(/<(?:.|\n)*?>/gm,"")+"</p>").text()},_getCommentDateText:function(e){if(1===s.getDiffInDays(new Date,e)){var t=s.getAge(e,this._configurator.getCurrentDate());return"sec"===t.unit?"1 min ago":t.toString()}return s.formatAs(e,"MMMM d")},openEntityView:function(e,t){this._configurator.getEntityViewService().showEntityView({entityId:e,entityType:t})}})}),define("tau/components/dashboard/widget.templates/dashboard.widget.latest.comments.template",["require","Underscore","libs/react/react-ex","jsx!tau/components/latest.comments/dashboard.widget.latest.comments","jsx!tau/components/latest.comments/dashboard.widget.latest.comments.settings","tau/components/latest.comments/dashboard.widget.latest.comments.constants","tau/components/latest.comments/dashboard.widget.latest.comments.service"],function(e){var t=e("Underscore"),i=e("libs/react/react-ex"),n=e("jsx!tau/components/latest.comments/dashboard.widget.latest.comments"),r=e("jsx!tau/components/latest.comments/dashboard.widget.latest.comments.settings"),a=e("tau/components/latest.comments/dashboard.widget.latest.comments.constants"),s=e("tau/components/latest.comments/dashboard.widget.latest.comments.service");
return function(e){return{id:"latest_comments",name:"Latest Comments",previewSrc:"../img/widgets/general-lastcomments.png",description:"Show all the latest comments or only when it is related to you",tags:["Lists"],insert:function(r,a,o){a=t.extend({acid:o.context.acid,service:new s(e)},a);var c=i.renderClass(n,a,r);return{update:c.setProps.bind(c),updateContext:function(e){c.setProps({acid:e.acid})},destroy:function(){i.unmountComponentAtNode(r)}}},insertSettings:function(e,t){var n=i.renderClass(r,{initialSource:t.source},e);return function(){return{source:n.state.source}}},defaultSettings:{source:a.SOURCE_RELATED_TO_ME}}}}),define("tau/components/follow.activity/modification.type",[],function(){return{None:0,Deleted:1,InnerFieldUpdated:2,ChildRemoved:3,ChildAdded:4,ChildUpdated:5}}),define("tau/components/follow.activity/modification.field.type",[],function(){return{None:0,Simple:1,SimpleCustomField:2,UrlCustomField:3,TemplatedUrlCustomField:4,DateCustomField:5,RichTextCustomField:6,EmptyCustomField:7,ProjectSquad:8,GeneralEntity:9,EmptyField:10,Comment:11,Assignment:12,Attachment:13,State:14}}),define("jsx!tau/components/follow.activity/template.helper",["require","react","tau/core/class","./modification.type","./modification.field.type","tau/utils/utils.date"],function(e){var t=e("react"),i=e("tau/core/class"),n=e("./modification.type"),r=e("./modification.field.type"),a=e("tau/utils/utils.date"),s=function(e){var t=0;if(0===e.length)return t;for(var i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t&=t;return t};return i.extend({init:function(e){this._configurator=e,this._urlBuilder=e.getUrlBuilder()},getTemplate:function(e,i){var n=e.general.id,r=e.general.type.toLowerCase().replace("tp.businessobjects.",""),a="tau-text_type_"+r;return t.createElement("div",{className:"notification__item notification__item--in-widget",key:this._getModificationKey(e)},i?null:t.createElement("div",{className:"follow-title"},t.createElement("a",{href:"#",className:a,onClick:this._openEntityView.bind(this,n,r)},e.general.name)),t.createElement("div",{className:"follow-content"},this._getContainerTemplate(e),this._getByBlock(e)))
},_getModificationKey:function(e){return s(e.general.id+e.field+e.timestamp)},_getContainerTemplate:function(e){if(null===e.fieldValue)return e.modificationFieldType==r.ProjectSquad?this._getNoEntityContainer(e):this._getSimpleContainer(e);switch(e.modificationFieldType){case r.Comment:return this._getCommentContainer(e);case r.Attachment:return this._getAttachmentContainer(e);case r.Assignment:return this._getAssignmentContainer(e);case r.State:return this._getStateContainer(e);case r.ProjectSquad:return this._getProjectSquadContainer(e);case r.GeneralEntity:return this._getEntityPropertyContainer(e);default:return e.modificationType===n.ChildRemoved||e.modificationType===n.ChildUpdated||e.modificationType===n.ChildAdded?this._getChildContainer(e):this._getSimpleContainer(e)}},_getSimpleContainer:function(e){if(e.modificationType==n.Deleted)return this._getDeletedTemplate(e);switch(e.modificationFieldType){case r.EmptyField:case r.EmptyCustomField:return this._getEmptyFieldTemplate(e);case r.SimpleCustomField:return this._getSimpleCustomTemplate(e);case r.UrlCustomField:return this._getUrlCustomTemplate(e);case r.TemplatedUrlCustomField:return this._getTemplatedUrlCustomTemplate(e);case r.DateCustomField:return this._getDateCustomTemplate(e);case r.RichTextCustomField:return this._getFieldChangedTemplate(e);default:return this._getSimpleContainerForField(e)}},_getSimpleContainerForField:function(e){switch(e.field){case"BuildDate":case"StartDate":case"EndDate":case"PlannedStartDate":case"PlannedEndDate":return this._getDateTemplate(e);case"Effort":case"Velocity":return this._getDecimalWithUnitTemplate(e);case"EntityState":return this._getEntityStateTemplate(e);case"LastStatus":return this._getLastStatusTemplate(e);case"Name":return this._getNameTemplate(e);case"Priority":case"Severity":return this._getEntityTemplate(e);case"Responsible":return this._getResponsibleTemplate(e);default:return this._getFieldChangedTemplate(e)}},_getDateTemplate:function(e){var i=a.parse(a.convertToTimezone(e.fieldValue));
return t.createElement("div",{className:"follow-description"},"Changed ",this._getFieldName(e)," to ",t.createElement("span",{className:"follow-description__to-value"},a.formatAs(i,"MMMM dd, yyyy")))},_getDecimalWithUnitTemplate:function(e){return t.createElement("div",{className:"follow-description"},"Changed ",this._getFieldName(e)," from ",e.oldFieldValue," to ",t.createElement("span",{className:"follow-description__to-value"},e.fieldValue))},_getEntityStateTemplate:function(e){return t.createElement("div",{className:"follow-description"},"Changed State from ",e.oldFieldValue," ",t.createElement("span",{className:"tau-icon-general tau-icon-l-arrow"})," ",t.createElement("span",{className:"follow-description__state"},e.fieldValue))},_getLastStatusTemplate:function(e){return t.createElement("div",{className:"follow-description"},"Changed Last Status to ",t.createElement("span",{className:"follow-description__to-value"},e.fieldValue?"Passed":"Failed"))},_getNameTemplate:function(){return t.createElement("div",{className:"follow-description"},"Renamed this item")},_getDeletedTemplate:function(){return t.createElement("div",{className:"follow-description"},"Removed this item")},_getEmptyFieldTemplate:function(e){return t.createElement("div",{className:"follow-description"},"Set ",this._getFieldName(e)," to ",t.createElement("span",{className:"follow-description__to-value"},"none"))},_getSimpleCustomTemplate:function(e){return t.createElement("div",{className:"follow-description"},"Changed ",this._getFieldName(e)," to ",t.createElement("span",{className:"follow-description__to-value"},e.fieldValue.value))},_getUrlCustomTemplate:function(e){return t.createElement("div",{className:"follow-description"},"Changed ",this._getFieldName(e)," to ",t.createElement("a",{className:"follow-description__to-value follow-description__link",href:e.fieldValue.value,target:"_blank"},e.fieldValue.title))},_getTemplatedUrlCustomTemplate:function(e){var i=e.fieldValue.value.split(","),n=_.map(i,function(i,n){return t.createElement("a",{className:"follow-description__to-value follow-description__link",key:n,href:e.fieldValue.template.replace("{0}",i),target:"_blank"},i)
});return t.createElement("div",{className:"follow-description"},"Changed ",this._getFieldName(e)," to ",n)},_getDateCustomTemplate:function(e){var i=a.parse(a.convertToTimezone(e.fieldValue.value));return t.createElement("div",{className:"follow-description"},"Changed ",this._getFieldName(e)," to ",t.createElement("span",{className:"follow-description__to-value"},a.formatAs(i,"MMMM dd, yyyy")))},_getNoEntityContainer:function(e){return t.createElement("div",{className:"follow-description"},"Changed ",this._getFieldName(e)," to ",t.createElement("span",{className:"follow-description__to-value"},"No ",this._getFieldName(e)))},_getEntityTemplate:function(e){return t.createElement("div",{className:"follow-description"},"Changed ",e.fieldValue.type," to ",t.createElement("span",{className:"follow-description__to-value"},e.fieldValue.name))},_getResponsibleTemplate:function(e){return t.createElement("div",{className:"follow-description"},"Assigned ",t.createElement("a",{className:"follow-description__to-value",href:"#",onClick:this._openEntityView.bind(this,e.fieldValue.id,"user")},t.createElement("img",{className:"tau-user-avatar",src:this._urlBuilder.getAvatarUrl(e.fieldValue.id,15)})," ",e.fieldValue.name)," as a ",e.fieldValue.type)},_getFieldChangedTemplate:function(e){return t.createElement("div",{className:"follow-description"},"Changed ",this._getFieldName(e))},_getProjectSquadContainer:function(e){var i=e.fieldValue.id,n=e.fieldValue.type.replace("Tp.BusinessObjects.","").toLowerCase();return t.createElement("div",{className:"follow-description"},"Changed ",e.fieldValue.type," to ",t.createElement("a",{className:"follow-description__to-value",href:"#",onClick:this._openEntityView.bind(this,i,n)},e.fieldValue.name))},_getEntityPropertyContainer:function(e){var i=e.fieldValue.id,n=e.fieldValue.type.replace("Tp.BusinessObjects.","").toLowerCase(),r="entity-card entity-card__"+n;return t.createElement("div",{className:"notification__entity-wrap-container"},t.createElement("div",{className:"notification__text"},"Set ",this._getFieldName(e)," to "),t.createElement("div",{className:"notification__entity-wrap"},t.createElement("a",{href:"#",className:r,onClick:this._openEntityView.bind(this,i,n)},e.fieldValue.name)))
},_getChildContainer:function(e){var i=e.fieldValue.id,n=e.fieldValue.type.replace("Tp.BusinessObjects.","").toLowerCase(),r="entity-card entity-card__"+n;return t.createElement("div",{className:"notification__entity-wrap-container"},t.createElement("div",{className:"notification__text"},this._getAction(e.modificationType)," related entity"),t.createElement("div",{className:"notification__entity-wrap"},t.createElement("a",{href:"#",className:r,onClick:this._openEntityView.bind(this,i,n)},e.fieldValue.name)))},_getCommentContainer:function(e){return t.createElement("div",{className:"notification__comment"},t.createElement("div",{className:"notification__comment__user"},e.fieldValue.name))},_getAttachmentContainer:function(e){var i=this._configurator.getApplicationPath()+"/Attachment.aspx?AttachmentID="+e.fieldValue.id;return t.createElement("ul",{className:"notification__attached-data"},t.createElement("li",{className:"notification__attached-data__item"},t.createElement("a",{className:"notification__attached-data__link",target:"_blank",href:i},e.fieldValue.name)))},_getAssignmentContainer:function(e){return t.createElement("div",{className:"follow-description"},this._getAssignedAction(e.modificationType)," ",t.createElement("a",{className:"follow-description__to-value",href:"#",onClick:this._openEntityView.bind(this,e.fieldValue.id,"user")},t.createElement("img",{className:"tau-user-avatar",src:this._urlBuilder.getAvatarUrl(e.fieldValue.id,15)})," ",e.fieldValue.name)," as a ",e.fieldValue.type)},_getStateContainer:function(e){var i=e.fieldValue.target.id,n=e.field.replace("Tp.BusinessObjects.","").toLowerCase(),r="entity-card entity-card__"+n;return t.createElement("div",{className:"notification__entity-wrap-container"},t.createElement("div",{className:"notification__text"},t.createElement("span",null,"Changed State from ",e.oldFieldValue.state.name)," ",t.createElement("span",{className:"tau-icon-general tau-icon-l-arrow"})," ",t.createElement("span",{className:"follow-description__state"},e.fieldValue.state.name)," in"),t.createElement("div",{className:"notification__entity-wrap"},t.createElement("a",{href:"#",className:r,onClick:this._openEntityView.bind(this,i,n)},e.fieldValue.target.name)))
},_getByBlock:function(e){var i=a.parse(e.timestamp),n=e.author.firstName+" "+e.author.lastName;return t.createElement("div",{className:"notification__information"},"by ",t.createElement("a",{href:"#",className:"gray-link",onClick:this._openEntityView.bind(this,e.author.iD,"user")},n)," ",this._getModificationDateText(i))},_getModificationDateText:function(e){if(1===a.getDiffInDays(new Date,e)){var t=a.getAge(e,new Date);return"sec"===t.unit?"1 min ago":t.toString()}return a.formatAs(e,"on MMM dd a\\t HH:mm")},_getAction:function(e){switch(e){case n.ChildAdded:return"Added";case n.ChildRemoved:return"Removed";case n.ChildUpdated:return"Changed";default:return"Set"}},_getAssignedAction:function(e){switch(e){case n.ChildAdded:return"Assigned";case n.ChildRemoved:return"Unassigned";default:return"Set"}},_openEntityView:function(e,t,i){i.preventDefault(),i.stopPropagation(),this._configurator.getEntityViewService().showEntityView({entityId:e,entityType:t})},_getFieldName:function(e){return _.titleize(_.underscored(e.field).replace(/_/g," "))}})}),define("jsx!tau/components/follow.activity/dashboard.widget.follow.activity",["require","react","jsx!tau/components/dashboard/infinity.scroll.list","jsx!./template.helper"],function(e){var t=e("react"),i=e("jsx!tau/components/dashboard/infinity.scroll.list"),n=e("jsx!./template.helper");return t.createClass({componentWillMount:function(){this._templateHelper=new n(this.props.configurator)},componentWillReceiveProps:function(e){e.acid&&this.refs.list.reset()},_loadMoreModifications:function(e,t){var i={userId:this.props.configurator.getLoggedUser().id,to:this._getFirstLoadDate(),skip:(e-1)*t,take:t};return this.props.service.loadModifications(this.props.acid,i)},_loadNewModifications:function(){var e={userId:this.props.configurator.getLoggedUser().id,from:this._getFirstModificationDate()};return this.props.service.loadModifications(this.props.acid,e)},_getFirstLoadDate:function(){return this._firstLoadDate||(this._firstLoadDate=new Date),this._firstLoadDate
},_getFirstModificationDate:function(){var e=this.refs.list.state.items;return e.length>0?e[0].timestamp:this._getFirstLoadDate()},_createModificationItem:function(e,t,i){var n=t>0&&e.general.id===i[t-1].general.id;return this._templateHelper.getTemplate(e,n)},_getEmptyMessage:function(){return t.createElement("div",{className:"empty-message"},t.createElement("span",null,"There is nothing to show"),t.createElement("br",null),t.createElement("span",null,"This widget aggregates changes for all entities you "),t.createElement("a",{href:"https://guide.targetprocess.com/working-with-entities/follow-entity.html",target:"_blank"},"follow"))},render:function(){return t.createElement(i,{ref:"list",className:"notification__body",pageSize:100,pageLimit:100,loadMore:this._loadMoreModifications,loadNew:this._loadNewModifications,loadNewInterval:600,renderItem:this._createModificationItem,autoRefresh:!0,emptyMessage:this._getEmptyMessage()})}})}),define("tau/components/follow.activity/dashboard.widget.follow.activity.service",["require","jQuery","tau/core/class","tp/plugins/commandGateway","tau/store/header"],function(e){var t=e("jQuery"),i=e("tau/core/class"),n=e("tp/plugins/commandGateway"),r=new n({pluginName:"Following"}),a=e("tau/store/header");return i.extend({init:function(e){this._configurator=e},loadModifications:function(e,i){var n=t.Deferred(),s=function(){n.reject()},o=this._configurator.getApplicationPath()+"/GetUserFollowedEntities?&acid="+e;return t.ajax({type:"POST",url:o,dataType:"json"}).done(function(e){return e.length?(i.generals=e,void r.executeForSpecificProfile("FollowingProfile","GetModifications",i,function(e){var t=a.formatObject(e);n.resolve(t.data)},s,s)):void n.resolve([])}.bind(this)).fail(s),n}})}),define("tau/components/dashboard/widget.templates/dashboard.widget.follow.activity.template",["require","jQuery","Underscore","libs/react/react-ex","jsx!tau/components/follow.activity/dashboard.widget.follow.activity","tau/components/follow.activity/dashboard.widget.follow.activity.service"],function(e){var t=e("jQuery"),i=e("Underscore"),n=e("libs/react/react-ex"),r=e("jsx!tau/components/follow.activity/dashboard.widget.follow.activity"),a=e("tau/components/follow.activity/dashboard.widget.follow.activity.service");
return function(e){return{id:"follow_activity",name:"Follow Activity",previewSrc:"../img/widgets/general-follow.png",description:"Notifications about the entities you follow",tags:["Lists"],insert:function(s,o,c){t(s).closest(".tau-dashboard-widget").addClass("tau-dashboard-widget--follow"),o=i.extend({configurator:e,service:new a(e),acid:c.context.acid},o);var l=n.renderClass(r,o,s);return{updateContext:function(e){l.setProps({acid:e.acid})},destroy:function(){n.unmountComponentAtNode(s)}}}}}}),define("tau/components/dashboard/widget.templates/todo.list/todo.widget.entity.layouts",[],function(){var e=[[{id:"general_entity_id",alignment:"base"},{id:"project_abbr",alignment:"alt"},{id:"tags_long",alignment:"base"}],[{id:"entity_name_small_sizes",alignment:"base"}],[{id:"effort_total",alignment:"base"},{id:"dependencies",alignment:"base"},{id:"cycle_time",alignment:"base"},{id:"state_short",alignment:"alt"}]];return{epic:e,feature:e,userstory:e,task:e,bug:[[{id:"general_entity_id",alignment:"base"},{id:"project_abbr",alignment:"alt"},{id:"severity_icon",alignment:"alt"},{id:"tags_long",alignment:"base"}],[{id:"entity_name_small_sizes",alignment:"base"}],[{id:"effort_total",alignment:"base"},{id:"dependencies",alignment:"base"},{id:"cycle_time",alignment:"base"},{id:"state_short",alignment:"alt"}]],request:[[{id:"general_entity_id",alignment:"base"},{id:"tags_long",alignment:"base"},{id:"project_abbr",alignment:"alt"}],[{id:"entity_name_small_sizes",alignment:"base"}],[{id:"effort_total",alignment:"base"},{id:"dependencies",alignment:"base"},{id:"state_short",alignment:"alt"}]]}}),define("tau/components/dashboard/widget.templates/todo.list/todo.widget.model",["require","Underscore","jQuery","tau/core/class","tau/models/board.plus/model.board.slice.extender","tau/services/customize/service.customize.card.layout.factory","tau/components/dashboard/widget.templates/todo.list/todo.widget.entity.layouts","tau/models/board.customize.units/const.card.sizes","tau/utils/utils.date"],function(e){var t=e("Underscore"),i=e("jQuery"),n=e("tau/core/class"),r=e("tau/models/board.plus/model.board.slice.extender"),a=e("tau/services/customize/service.customize.card.layout.factory"),s=e("tau/components/dashboard/widget.templates/todo.list/todo.widget.entity.layouts"),o=e("tau/models/board.customize.units/const.card.sizes"),c=e("tau/utils/utils.date"),l=6,d=o.zoomToSize(l);
return n.extend({SHOW_MAX_CARDS:100,CARD_SETTINGS:null,LAYOUTS:null,cardsRetrieved:null,_acid:null,_configurator:null,_entityTypes:t.keys(s),_cometSubscription:null,init:function(e,i,n){this._configurator=i,this._updateSettings(n),this.cardsRetrieved=t.Callbacks();var r=this.CARD_SETTINGS=t.reduce(s,function(e,t,i){return e[i]={},e[i][d]=t,e},{}),o=new a(this._configurator);this.LAYOUTS=t.reduce(r,function(e,t,i){return e[i]=o.getLayout(r,i,d),e},{}),this.updateContext(e)},updateContext:function(e){this._acid=e.acid,this._createSliceAndLoadToDoList()},update:function(e){this._updateSettings(e),this._createSliceAndLoadToDoList()},_updateSettings:function(e){this._entityTypes=e.entities,this._highlight=e.highlight},_createSliceAndLoadToDoList:function(){this._stopCometListener(),i.when(this._createSlice()).then(function(){this._startCometListener(),this._loadToDoList()}.bind(this))},_loadToDoList:function(){i.when(this.slice.list({$skip:0,$take:this.SHOW_MAX_CARDS+1})).then(function(e){var t=e.data.items,i=t.length>0?t[0].dynamic:{};return this._loadAdditionalCardData(i.items||[])}.bind(this)).then(function(e){this.cardsRetrieved.fire({cards:e.slice(0,this.SHOW_MAX_CARDS),hasMore:e.length>this.SHOW_MAX_CARDS,layouts:this.LAYOUTS,highlight:this._highlight})}.bind(this))},_loadAdditionalCardData:function(e){if(!e.length)return e;var i=t.map(e,function(e){return e.data.cardData.id});return this._configurator.getStore().getDef("assignable",{fields:["id","lastStateChangeDate"],$query:{id:{$in:i}}}).then(function(i){return t.each(e,function(e){var n=t.findWhere(i,{id:e.data.cardData.id});e.lastStateChangeDate=n&&n.lastStateChangeDate?c.parseTimestampToDate(n.lastStateChangeDate):null})})},_createSlice:function(){var e=this._configurator.getSliceFactory().create(this._createSliceParameters()),t=new r;return t.extend({slice:e},this._createLayoutFactory()).then(function(e){return this.slice=e.slice,this.slice}.bind(this))},_createSliceParameters:function(){var e={definition:this._createDefinition()};
return e.definition.global={acid:this._acid},e},_createLayoutFactory:function(){var e=this._createDefinition(),t={get:function(){return i.Deferred().resolve(e)}};return new a(this._configurator,t)},_startCometListener:function(){var e=this.slice.getCometParameters();this._stopCometListener(),this._cometSubscription=this._configurator.getComet().subscribe("slice",{parameters:e,batchCallback:function(){this._loadToDoList()}.bind(this)})},_stopCometListener:function(){this._cometSubscription&&(this._cometSubscription.stop(),this._cometSubscription=null)},_createDefinition:function(){return{cells:{filter:"? Responsible is Me and AssignedUser.Contains(Me) and EntityState.IsFinal is False",ordering:{name:"Rank",direction:"Desc"},types:this._entityTypes,useFilter:!0},cardSettings:this.CARD_SETTINGS,zoomLevel:l}},destroy:function(){this._stopCometListener()}})}),define("tau/components/dashboard/widget.templates/todo.list/todo.widget.constants",[],function(){return{HIGHLIGHT_COLOR:"#f9d9d1",NO_STATE_CHANGE_DAYS:5}}),define("tau/components/dashboard/widget.templates/todo.list/todo.widget.open.card.view.mixin",["require","jQuery"],function(e){var t=e("jQuery"),i=".todo_list_open_card_view_mixin";return{componentDidMount:function(){t(this.getDOMNode()).on("click"+i,".tau-id",function(e){var i=t(e.target);this.props.openEntityView({entityId:i.data("entityId"),entityType:i.data("entityType")}),e.preventDefault()}.bind(this))},componentWillUnmount:function(){t(this.getDOMNode()).off(i)}}}),define("jsx!tau/components/dashboard/widget.templates/todo.list/todo.widget.view",["require","react","./todo.widget.constants","./todo.widget.open.card.view.mixin"],function(e){var t=e("react"),i=e("./todo.widget.constants"),n=e("./todo.widget.open.card.view.mixin");return t.createClass({displayName:"ToDo Widget",mixins:[n],getInitialState:function(){return{isLoaded:!1,hasMore:!1,cards:[]}},componentWillMount:function(){this.props.cardsRetrieved.on(this._onCardsRetrieved,this)},componentWillUnmount:function(){this.props.cardsRetrieved.remove(this)
},_onCardsRetrieved:function(e){this.isMounted()&&this.setState({isLoaded:!0,cards:e.cards,hasMore:e.hasMore,layouts:e.layouts,highlight:e.highlight})},_emptyMessage:function(){return t.createElement("div",{className:"empty-message"},"You have no assigned work",t.createElement("br",null),"Get some rest")},_hasMoreMessage:function(){return this.state.hasMore?t.createElement("div",{className:"empty-message"},"Only the first ",this.state.cards.length," cards are shown"):null},_getStylesForItem:function(e){return this.props.highlighter.shouldHighlightCard(e,this.state.highlight)?{backgroundColor:i.HIGHLIGHT_COLOR}:{}},render:function(){if(!this.state.isLoaded)return t.createElement("div",{className:"empty-message"},"Loading data...");var e=_.map(this.state.cards,function(e){var i=this.props.renderCardAsText(e,this.state.layouts[e.type.toLowerCase()]);return t.createElement("div",{key:e.data.cardData.id,className:"tau-dashboard-widget-todo-list__item",dangerouslySetInnerHTML:{__html:i},style:this._getStylesForItem(e)})},this);return t.createElement("div",{className:"tau-dashboard-widget-todo-list"},e.length?e:this._emptyMessage(),this._hasMoreMessage())}})}),define("jsx!tau/components/dashboard/widget.templates/todo.list/todo.widget.settings",["require","Underscore","react","tau/components/dashboard/widget.templates/todo.list/todo.widget.entity.layouts","./todo.widget.constants"],function(e){var t=e("Underscore"),i=e("react"),n=e("tau/components/dashboard/widget.templates/todo.list/todo.widget.entity.layouts"),r=e("./todo.widget.constants"),a=i.createClass({displayName:"HighlightSettingsItem",render:function(){return i.createElement("li",{className:"tau-widget-settings-highlight-cards__item"},i.createElement("label",{className:"tau-checkbox"},i.createElement("input",{type:"checkbox",defaultChecked:this.props.defaultChecked,onChange:this.props.onChange}),i.createElement("i",{className:"tau-checkbox__icon"}),this.props.children,i.createElement("i",{style:{backgroundColor:r.HIGHLIGHT_COLOR},className:"tau-icon tau-icon_type_color"})))
}});return i.createClass({getInitialState:function(){return{entities:this.props.initialEntities,highlight:this.props.initialHighlight}},componentDidMount:function(){$(this.getDOMNode()).find(".i-role-no-state-changes-days").editableText({mask:/^\d*$/,className:"none",classNameActive:"none",restoreText:!1})},componentWillUnmount:function(){$(this.getDOMNode()).find(".i-role-no-state-changes-days").editableText("destroy")},_getEntityTerm:function(e){return this.props.termProcessor.getTerms(e).names},_getEntityItem:function(e){var n=t.contains(this.state.entities,e);return i.createElement("li",{className:"tau-widget-settings-show-cards__item",key:e},i.createElement("label",{className:"tau-checkbox tau-checkbox--entity tau-checkbox--entity--"+e},i.createElement("input",{type:"checkbox",value:e,defaultChecked:n,onChange:this._onEntityCheckedChange}),i.createElement("i",{className:"tau-checkbox__icon"}),i.createElement("span",null,this._getEntityTerm(e))))},_onEntityCheckedChange:function(e){var i=this.state.entities,n=e.target.getAttribute("value");e.target.checked?i.push(n):i=t.filter(i,function(e){return e!==n}),this.setState({entities:i})},_onHighlightBlockersChange:function(e){var t=this.state.highlight;t.blockers=e.target.checked,this.setState({highlight:t})},_onHighlightNoChangeStatesChange:function(e){var t=this.state.highlight;t.noStateChanges=e.target.checked,this.setState({highlight:t})},_onHighlightNoChangeStatesDaysChange:function(e){var t=this.state.highlight;t.noStateChangesDays=e.target.value,this.setState({highlight:t})},render:function(){var e=t.keys(n),r=t.map(e,this._getEntityItem);return i.createElement("div",{className:"tau-widget-settings__content-cards"},i.createElement("ul",{className:"tau-widget-settings-show-cards"},i.createElement("li",{className:"tau-widget-settings-show-cards__item tau-widget-settings-cards-title"},"Show cards"),r),i.createElement("ul",{className:"tau-widget-settings-highlight-cards"},i.createElement("li",{className:"tau-widget-settings-highlight-cards__item tau-widget-settings-cards-title"},"Highlight cards"),i.createElement(a,{defaultChecked:this.state.highlight.blockers,onChange:this._onHighlightBlockersChange},i.createElement("span",null,"Top priority and blockers")),i.createElement(a,{defaultChecked:this.state.highlight.noStateChanges,onChange:this._onHighlightNoChangeStatesChange},i.createElement("span",null,"No state changes in",i.createElement("input",{disabled:this.state.highlight.noStateChanges?"":"disabled",value:this.state.highlight.noStateChangesDays,className:"i-role-no-state-changes-days tau-in-text",type:"text",onChange:this._onHighlightNoChangeStatesDaysChange}),"days"))))
}})}),define("tau/components/dashboard/widget.templates/todo.list/todo.widget.highlighter",["require","Underscore","jQuery","tau/core/class"],function(e){var t=e("Underscore"),i=e("jQuery"),n=e("tau/core/class"),r=["userstory","bug","request"],a=["userstory","bug","task","request"];return n.extend({init:function(e){this._store=e},initialize:function(){return this._loadTopPriorities()},_loadTopPriorities:function(){return i.when(this._store.getDef("priority",{fields:["importance",{entityType:["name"]}]}),this._store.getDef("severity",{fields:["importance"]})).then(function(e,i){this._topPriorities={userstory:this._getTopPriorityForEntity(e,"userstory"),request:this._getTopPriorityForEntity(e,"request"),bug:t.min(i,t.property("importance"))}}.bind(this))},_getTopPriorityForEntity:function(e,i){return t.min(t.filter(e,function(e){return e.entityType.name.toLowerCase()===i}),t.property("importance"))},shouldHighlightCard:function(e,i){var n=e.type.toLowerCase();if(i.blockers&&t.contains(r,n)){var s;if("userstory"===n||"request"===n?s=e.data.cardData.importance:"bug"===n&&(s=e.data.severity_icon.severity.importance),s===this._topPriorities[n].importance)return!0}if(i.noStateChanges&&t.contains(a,n)&&e.lastStateChangeDate){var o=Math.floor((t.now()-e.lastStateChangeDate.getTime())/864e5);if(o>=i.noStateChangesDays)return!0}return!1}})}),define("tau/components/dashboard/widget.templates/todo.list/todo.widget.template",["require","Underscore","libs/react/react-ex","./todo.widget.model","jsx!./todo.widget.view","jsx!./todo.widget.settings","./todo.widget.constants","tau/components/dashboard/widget.templates/todo.list/todo.widget.entity.layouts","tau/core/termProcessor","tau/ui/templates/board.plus/customized/ui.template.boardplus.default.card.customized","./todo.widget.highlighter"],function(e){var t=e("Underscore"),i=e("libs/react/react-ex"),n=e("./todo.widget.model"),r=e("jsx!./todo.widget.view"),a=e("jsx!./todo.widget.settings"),s=e("./todo.widget.constants"),o=e("tau/components/dashboard/widget.templates/todo.list/todo.widget.entity.layouts"),c=e("tau/core/termProcessor"),l=e("tau/ui/templates/board.plus/customized/ui.template.boardplus.default.card.customized"),d=e("./todo.widget.highlighter"),u=function(e){return{id:u.TEMPLATE_ID,name:"ToDo List",previewSrc:"../img/widgets/todo-list.png",description:"All open work assigned to you",tags:["Lists"],insert:function(t,a,s){var o=new n(s.context,e,a),c=new d(e.getStore());
return c.initialize().then(function(){return i.render(i.createElement(r,{highlighter:c,cardsRetrieved:o.cardsRetrieved,renderCardAsText:function(t,i){return l.renderToString({dataItem:t,layout:i,configurator:e})},openEntityView:function(t){e.getEntityViewService().showEntityView(t)}}),t),{update:function(e){o.update(e)},updateContext:o.updateContext.bind(o),destroy:function(){o.destroy(),i.unmountComponentAtNode(t)}}})},insertSettings:function(n,r,o){return e.getApplicationContextService().getApplicationContext({acid:o.context.acid}).then(function(e){var o=t.find(e.processes,t.property("isDefault")),l=o||e.processes[0],d=new c(l.terms),u=i.renderClass(a,{termProcessor:d,initialEntities:r.entities,initialHighlight:r.highlight},n);return function(){return{entities:u.state.entities,highlight:{blockers:u.state.highlight.blockers,noStateChanges:u.state.highlight.noStateChanges,noStateChangesDays:u.state.highlight.noStateChangesDays||s.NO_STATE_CHANGE_DAYS}}}})},defaultSettings:{entities:t.keys(o),highlight:{blockers:!1,noStateChanges:!1,noStateChangesDays:s.NO_STATE_CHANGE_DAYS}}}};return u.TEMPLATE_ID="todo_list",u}),define("tau/components/dashboard/widget.templates/custom.report/linked/selector.view",["require","jsx!../../linked.view.base/view.selector.view.factory"],function(e){var t=e("jsx!../../linked.view.base/view.selector.view.factory");return t.createSelectorViewClass({viewTypeName:"report",displayName:"LinkedReportSelector"})}),define("jsx!tau/components/dashboard/widget.templates/custom.report/linked/settings.view",["require","Underscore","react","./selector.view","jsx!../../linked.view.base/view.link.view","jsx!../../shared/settings.container.view"],function(e){var t=(e("Underscore"),e("react")),i=e("./selector.view"),n=e("jsx!../../linked.view.base/view.link.view"),r=e("jsx!../../shared/settings.container.view");return t.createClass({displayName:"LinkedReportWidgetSettings",propTypes:{initialSelectedViewId:t.PropTypes.string,views:t.PropTypes.array.isRequired,viewUrl:t.PropTypes.string},getSelectedSettings:function(){return{selectedViewId:this.refs.viewSelector.getSelectedViewId()}
},render:function(){return t.createElement(r,null,t.createElement(i,{ref:"viewSelector",initialSelectedViewId:this.props.initialSelectedViewId,views:this.props.views}),t.createElement(n,{viewUrl:this.props.viewUrl}))}})}),define("tau/components/dashboard/widget.templates/custom.report/linked/selector.model",["require","../../linked.view.base/view.selector.model","tau/services/boards/view.types"],function(e){var t=e("../../linked.view.base/view.selector.model"),i=e("tau/services/boards/view.types");return t.extend({init:function(e){this._super({viewsMenuService:e,isMatchingView:this._isReportView})},_isReportView:function(e){return e.itemType===i.REPORT}})}),define("tau/components/dashboard/widget.templates/custom.report/linked/custom.report.linked.template",["require","Underscore","react","../../linked.view.base/linked.view.widget.factory","../custom.report.template","jsx!./settings.view","./selector.view","./selector.model","../custom.report.widget.renderer","tau/services/boards/view.types"],function(e){function t(e,t,n,r){return l.insertReportComponent({placeholder:e,environmentContext:t,configurator:n,reportDefinition:i.deepClone(r)})}var i=e("Underscore"),n=e("react"),r=e("../../linked.view.base/linked.view.widget.factory"),a=e("../custom.report.template"),s=e("jsx!./settings.view"),o=e("./selector.view"),c=e("./selector.model"),l=e("../custom.report.widget.renderer"),d=e("tau/services/boards/view.types");return function(e){return{id:"custom.report.linked",name:"Any Report",description:"Add any existing report view to a dashboard",previewSrc:"../img/widgets/reports-any.png",tags:["Reports"],layout:a.REPORT_LAYOUT_SETTINGS,insert:function(i,n,a){return r.insert({placeholder:i,settings:n,environment:a,configurator:e,SelectorModel:c,SelectorView:o,insertView:t.bind(null,i,a.context,e)})},insertSettings:function(t,i,r){var a=i.selectedViewId;return new c(e.getViewsMenuService()).getAllViews(a).then(function(o){var c=n.createElement(s,{views:o,viewUrl:e.getUrlBuilder().getRelativeViewUrl(a,d.REPORT,r.context.acid),initialSelectedViewId:a,initialPageSize:i.pageSize}),l=n.render(c,t);
return function(){return l.getSelectedSettings()}})}}}}),define("tau/components/dashboard/widget.templates/burn.down.chart.widget",["jQuery","tau/components/component.burn.down.report","tau/components/component.burn.down.filter"],function(e,t,i){return function(n){return{id:"burnDownChart",name:"Burn Down Chart",previewSrc:"../img/widgets/reports-burndown.png",description:"The Burn Down chart is a graphical representation of work left to do versus time",tags:["Reports"],insert:function(i,r){var a={context:{configurator:n},placeholder:i,name:"burnDownChart",template:["<div></div>"],defaultSettings:r,axes:{x:{labelSlope:"slope"}}},s=t.create(a);return s.fire("initialize",a),s.fire("settings.changed",r),{update:function(e){s.fire("settings.changed",e)},updateContext:function(e){s.fire("acid.changed",e.acid)},resize:function(){s.fire("resize",{width:e(i).width()})}}},insertSettings:function(t,r){var a={settings:r,findPlannableFilter:function(e){e(this.settings)},savePlannableFilter:function(e){this.settings=e}},s=e(t),o={context:{configurator:n},name:"burnDownChartFilter",template:["<div></div>"],storage:a};s.addClass("tau-widget-settings--burn-down");var c=i.create(o),l=e.Deferred(),d=e.Deferred(),u=e.Deferred();return c.on("afterRender",function(e,t){d.resolve(t.element)}),c.on("filter.afterRender",function(){u.resolve()}),e.when(d,u).then(function(e){s.append(e),l.resolve(function(){return a.settings})}),c.fire("initialize",o),l}}}}),define("jsx!tau/components/dashboard/widget.templates/sample.widget",["require","libs/react/react-ex","jsx!./shared/settings.container.view","jsx!./shared/settings.list.item.view"],function(e){function t(){var e="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec a diam lectus. Sed sit amet ipsum mauris. Maecenas congue ligula ac quam viverra nec consectetur ante hendrerit. Donec et mollis dolor. Praesent et diam eget libero egestas mattis sit amet vitae augue. Nam tincidunt congue enim, ut porta lorem lacinia consectetur. Donec ut libero sed arcu vehicula ultricies a non tortor. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean ut gravida lorem. Ut turpis felis, pulvinar a semper sed, adipiscing id dolor. Pellentesque auctor nisi id magna consequat sagittis. Curabitur dapibus enim sit amet elit pharetra tincidunt feugiat nisl imperdiet. Ut convallis libero in urna ultrices accumsan. Donec sed odio eros. Donec viverra mi quis quam pulvinar at malesuada arcu rhoncus. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. In rutrum accumsan ultricies. Mauris vitae nisi at sem facilisis semper ac in est.",t=e.split(" ");
return _.take(t,_.random(5,t.length-1)).join(" ")}var i=e("libs/react/react-ex"),n=e("jsx!./shared/settings.container.view"),r=e("jsx!./shared/settings.list.item.view"),a=i.createClass({displayName:"Widget",render:function(){return i.createElement("div",{className:"i-role-dashboard-sample-widget",style:{backgroundColor:this.props.color,padding:"20px",height:"100%"}},this.props.content)}}),s=i.createClass({displayName:"WidgetSettings",mixins:[i.addons.LinkedStateMixin],getInitialState:function(){return{content:this.props.content,color:this.props.color}},render:function(){return i.createElement(n,{labelsOnTop:!1},i.createElement(r,{title:"Content"},i.createElement("input",{className:"i-role-dashboard-sample-widget-settings-content-input",type:"text",valueLink:this.linkState("content")})),i.createElement(r,{title:"Color"},i.createElement("input",{className:"i-role-dashboard-sample-widget-settings-content-color",type:"text",valueLink:this.linkState("color")})))}});return function(e){e=e||{};var n={id:e.id||"sample_widget",name:e.name||"Sample widget",description:e.description||"Widget placeholder",tags:["~debug","scrum","agile"],layout:{minHeight:e.minHeight,maxHeight:e.maxHeight,aspectRatio:e.aspectRatio},insert:function(t,n){var r=i.renderClass(a,n,t);return e.widgetInserted&&e.widgetInserted(r),{update:r.setProps.bind(r)}},insertSettings:function(t,n){var r=i.renderClass(s,n,t);return e.settingsInserted&&e.settingsInserted(r),function(){return r.state}}};return Object.defineProperty(n,"defaultSettings",{get:function(){var e=["#69D2E7","#A7DBD8","#6495ED","#E0E4CC","#F38630","#FA6900","#BFCAAA","#D0A28A","#C58B80","#CF4459","#791241"];return{color:e[_.random(e.length-1)],content:t()}},enumerable:!0}),n}}),define("tau/components/dashboard/widget.templates/sample.context.widget",["require","libs/react/react-ex"],function(e){var t=e("libs/react/react-ex"),i=t.DOM,n=t.createClass({render:function(){var e=this.props.applicationContext?"Current ACID is "+this.props.applicationContext:"Loading ACID...";
return i.div({},e)}});return function(){return{id:"sample_context_widget",name:"Sample context",description:"Sample context-aware widget",tags:["~debug"],insert:function(e,i,r){var a=t.renderClass(n,{applicationContext:r.context.acid},e);return{updateContext:function(e){a.setProps({applicationContext:e.acid})}}},insertSettings:function(e,i,r){return t.renderClass(n,{applicationContext:r.context.acid},e),function(){return{}}}}}}),define("tau/components/dashboard/widget.templates/sample.resize.widget",["require","libs/react/react-ex"],function(e){var t=e("libs/react/react-ex"),i=t.DOM,n=t.createClass({render:function(){var e="Placeholder size is "+this.props.width+"x"+this.props.height;return i.div({},e)}});return function(){return{id:"sample_resize_widget",name:"Sample resize",description:"Sample widget with resize callback",tags:["~debug"],insert:function(e){var i=function(){return{width:e.clientWidth,height:e.clientHeight}},r=t.renderClass(n,i(),e);return{resize:function(){r.setProps(i())}}}}}}),define("jsx!tau/components/dashboard/widget.templates/sample.async.widget",["require","jQuery","libs/react/react-ex"],function(e){var t=e("jQuery"),i=e("libs/react/react-ex"),n=i.DOM,r=3e3,a=1e3,s=i.createClass({displayName:"Widget",render:function(){var e="I am finally loaded after "+this.props.delay+"ms delay";return n.div({},e)}}),o=i.createClass({displayName:"WidgetSettings",mixins:[i.addons.LinkedStateMixin],getInitialState:function(){return{delay:this.props.initialDelay,settingsDelay:this.props.initialSettingsDelay}},render:function(){return i.createElement("ul",{className:"tau-widget-settings-list"},i.createElement("li",{className:"tau-widget-settings-list__item"},i.createElement("label",null,i.createElement("span",{className:"tau-widget-settings-list__title"},"Render delay"),i.createElement("input",{className:"i-role-dashboard-sample-widget-settings-content-input",type:"text",valueLink:this.linkState("delay")}))),i.createElement("li",{className:"tau-widget-settings-list__item"},i.createElement("label",null,i.createElement("span",{className:"tau-widget-settings-list__title"},"Settings delay"),i.createElement("input",{className:"i-role-dashboard-sample-widget-settings-content-input",type:"text",valueLink:this.linkState("settingsDelay")}))))
}});return function(){return{id:"sample_async_widget",name:"Sample async",description:"Sample asynchronously loaded widget",tags:["~debug"],defaultSettings:{delay:r,settingsDelay:a},insert:function(e,n){return t.when.timeout(n.delay).then(function(){return i.renderClass(s,n,e),{destroy:function(){i.unmountComponentAtNode(e),console.log("Async widget was destroyed")}}})},insertSettings:function(e,n){return t.when.timeout(n.settingsDelay).then(function(){var t=i.renderClass(o,{initialDelay:n.delay,initialSettingsDelay:n.settingsDelay},e);return function(){return _.pick(t.state,"delay","settingsDelay")}})}}}}),define("tau/components/dashboard/services/dashboard.widget.template.default.source",["require","tau/core/class","Underscore","jQuery","./dashboard.widget.template.default.source.lists","./dashboard.widget.template.default.source.reports","../widget.templates/dashboard.widget.latest.comments.template","../widget.templates/dashboard.widget.follow.activity.template","../widget.templates/todo.list/todo.widget.template","../widget.templates/new.list/linked/new.list.linked.widget.template","../widget.templates/custom.report/linked/custom.report.linked.template","../widget.templates/burn.down.chart.widget","jsx!./../widget.templates/sample.widget","./../widget.templates/sample.context.widget","../widget.templates/sample.resize.widget","jsx!../widget.templates/sample.async.widget"],function(e){var t=e("tau/core/class"),i=e("Underscore"),n=e("jQuery"),r=e("./dashboard.widget.template.default.source.lists"),a=e("./dashboard.widget.template.default.source.reports"),s=e("../widget.templates/dashboard.widget.latest.comments.template"),o=e("../widget.templates/dashboard.widget.follow.activity.template"),c=e("../widget.templates/todo.list/todo.widget.template"),l=e("../widget.templates/new.list/linked/new.list.linked.widget.template"),d=e("../widget.templates/custom.report/linked/custom.report.linked.template"),u=e("../widget.templates/burn.down.chart.widget"),p=e("jsx!./../widget.templates/sample.widget"),g=e("./../widget.templates/sample.context.widget"),m=e("../widget.templates/sample.resize.widget"),h=e("jsx!../widget.templates/sample.async.widget"),f=[p(),p({id:"sample_widget_max_height",name:"Sample widget (max height)",maxHeight:250}),p({id:"sample_widget_aspect_ration",name:"Sample widget (aspect ratio)",aspectRatio:4/3})];
return t.extend({id:"default",init:function(e){this._configurator=e,this._featuresService=e.getFeaturesService()},getWidgetTemplates:function(){var e=this._getSampleWidgets();e.push(l(this._configurator)),e.push(s(this._configurator)),e.push(o(this._configurator)),e.push(c(this._configurator)),e=e.concat(r.getCustomListTemplates(this._configurator)),this._featuresService.isEnabled("customReports")&&(e.push(d(this._configurator)),e=e.concat(a.getCustomReportTemplates(this._configurator))),e.push(u(this._configurator));var t=i.map(e,n.when);return n.Deferred().resolve(t)},_getSampleWidgets:function(){return this._featuresService.isEnabled("dashboard.sample.widgets")?i.toArray(f).concat(g(),m(),h()):[]}})}),define("tau/components/extensions/dashboard/extension.dashboard.widget.registry.builder",["require","tau/components/extensions/component.extension.base","tau/components/dashboard/services/dashboard.widget.template.default.source"],function(e){var t=e("tau/components/extensions/component.extension.base"),i=e("tau/components/dashboard/services/dashboard.widget.template.default.source");return t.extend({init:function(e){this._super(e);var t=e.context.configurator,n=t.getDashboardWidgetTemplateRegistry();n.addWidgetTemplateSource(new i(t))}})}),define("tau/app.resolver",["Underscore"],function(e){var t=function(t){var i=t.split("/");if(i.length<2)return null;var n=i[0],r=i[1],a=r.length,s=e.without([r.indexOf("&"),r.indexOf("||"),a],-1),o=e.min(s),c=r.substring(0,o);return{id:c,type:n}};return{resolvePageInfo:function(i,n,r){var a=i.configurator.getExternal(),s=a.getHashParam(i.appId,null),o=s||a.getHash(),c=t(o),l=c;return c||(l=n,e.isFunction(r)&&r.call(a,l)),l},getQueryParam:function(e,t){var i=e.indexOf(t+"=");if(-1===i)throw'Param "'+t+'" not found';i=i+t.length+1;var n=e.indexOf("&",i);n=-1!==n?n:e.length;var r=e.substring(i,n);return r}}}),define("main.boardplus.login",["Underscore","jQuery","tau/core/class","tau/app.resolver","tau/components/component.video-intro.popup"],function(e,t,i,n,r){return i.extend({init:function(e,t){this.configurator=e,this.applicationId=t
},process:function(){var e=this.configurator.getWindow(),t=!e.appIsInDebugMode&&e.tauUserInfo&&e.tauUserInfo.isFirstTimeTp3Login;return t?this.firstTimeLogin():this.notFirstTimeLogin()},notFirstTimeLogin:function(){var i=this.configurator.getHashService(),r=!i.getHash();if(r&&e.has(i.getHrefParsed().queryKey,"start"))this.setHash("start/start");else if(r&&e.has(i.getHrefParsed().queryKey,"invite"))this.setHash("invite");else{var a=this.applicationId;n.resolvePageInfo({appId:this.applicationId,configurator:this.configurator},{type:"board",id:"last"},function(e){this.setHashParam(a,e.type+"/"+e.id)})}return t.Deferred().resolve()},showCallAdminPopup:function(){var e=this.configurator.getGlobalBus();r.create({url:"//www.youtube.com/embed/Lxl2sTEyYaE",showNextButton:!1}),e.fire("contentRendered")},firstTimeLogin:function(){var i=t.Deferred(),n=this.configurator.getLoggedUser().isAdministrator,r=window.tauUserInfo&&window.tauUserInfo.Tp3Available,a=t.Deferred();return i.fail(a.reject),i.done(function(){var e=this.configurator.getGlobalSettingsService();e.sendRequest("GlobalSettingsService","FirstTimeLoginTP3",null).done(a.resolve).fail(function(){throw new Error("First time login operation is failed")})}.bind(this)),n||r||(this.showCallAdminPopup(),i.reject()),this.getPublicBoardsCount().then(e.bind(function(t){t>0?(this.setHash("invite"),i.resolve()):this.getPrivateBoardsCount().then(e.bind(function(e){e>1?(this.setHash("invite"),i.resolve()):n?(this.setHash("start/start"),i.resolve()):(this.showCallAdminPopup(),i.reject())},this))},this)),a},getBoardsCount:function(e){var i=t.Deferred();return this.configurator.getRestStorage().select("boards",{$where:'(publicData.isShared == "'+e+'")',$fields:["key"]}).done(function(e){i.resolve((e.data||[]).length)}),i},getPublicBoardsCount:function(){return this.getBoardsCount(!0)},getPrivateBoardsCount:function(){return this.getBoardsCount(!1)},setHash:function(e){this.configurator.getHashService().setHash(this.applicationId+"="+e)}})
}),define("main.boardplus.routes",["require","jQuery","Underscore","app.path","tp/reports/service.chart.size","tau/services/boards/view.types"],function(e){function t(e,t){return e+"/"+t}function i(e,t){var i=r.Deferred(),n=null,a=!1,o={fields:["acid"],callback:function(i){n=i.acid,a=!1,taus.context({"@":"--app-context-core",host:s.get(),version:e.getSystemInfo().version,path:t,user:e.getLoggedUser(),acid:i.acid})}};return e.getAppStateStore().get({fields:o.fields,callback:function(e){o.callback(e),i.resolve()}}),e.getApplicationContextService().onApplicationContextRetrieved.add(function(e){e.acid!==n||a||(a=!0,taus.track("appContext",{"@":"--app-context-teams-projects",projects:e.selectedProjectIds,teams:e.selectedTeamIds}))},!0),i}function n(e,n){var r=this.configurator,a=r.getBoardDefinitionFactory();r.getRestStorage()._cache={};var s={id:t(e,n),type:e,args:n};i(r,s).then(function(){return a.getById(n)}).done(function(t){taus.track("views",{"@":"open-view-action",view:t}),this.resolve({id:t.id,entity:e})}.bind(this)).fail(function(){r.getRouting().redirect(r.getUrlBuilder().getDefaultViewUrl())})}var r=e("jQuery"),a=e("Underscore"),s=e("app.path"),o=e("tp/reports/service.chart.size"),c=e("tau/services/boards/view.types");return{createApplicationRoutes:function(){return[{pattern:/start/,host:{name:"board_startScreen_h",type:"board.startScreen"},type:{name:"board_startScreen",type:"board.startScreen"}},{name:"process-setup-workflow",pattern:/process-setup\/(\d+)\/workflows\/([a-z]+)/,adapter:function(e,t){this.resolve({processId:parseInt(e,10),optionGroupId:"workflows",entityType:t})},host:{name:"board_host",type:"master.board"},type:{name:"setup workflow",type:"setup.workflow"}},{name:"process-setup-terms",pattern:/process-setup\/(\d+)\/terms/,host:{name:"board_host",type:"master.board"},adapter:function(e){this.resolve({processId:parseInt(e,10),optionGroupId:"terms"})},type:{name:"terms",type:"terms"}},{name:"process-setup-general",pattern:/process-setup\/(\d+)\/([a-z\-]+)/,adapter:function(e,t){this.resolve({processId:parseInt(e,10),optionGroupId:t})
},host:{name:"board_host",type:"master.board"},type:{name:"setup process",type:"setup.process"}},{pattern:/invite/,adapter:function(){var e=this.configurator,t=e.getHelpScenarioService(),i=t.getAvailableFlows().scratch;t.setCurrentFlow(i.id),t.setState(t.stateTypes.ToBeStarted),e.getRouting().redirect(e.getUrlBuilder().getDefaultViewUrl())},host:{name:"board_host",type:"master.board"},type:{name:"board_page",type:"page.board"}},{pattern:/\bcustomreport\/(\d+)/,adapter:a.partial(n,c.REPORT),host:{name:"board_host",type:"master.board"},type:{name:"customReport_page",type:"page.customReport"}},{pattern:/report\/(\d+)/,adapter:function(e){var t=this.configurator;t.registerService("chart.size",new o),this.resolve({id:e,entity:"report"})},host:{name:"board_host",type:"master.board"},type:{name:"report_page",type:"page.report"}},{pattern:/\bdashboard\/(\d+)/,adapter:a.partial(n,c.DASHBOARD),host:{name:"board_host",type:"master.board"},type:{name:"dashboard_page",type:"page.dashboard"}},{pattern:/\b(?:view|board)\/last/,adapter:function(){var e=this.configurator,i=e.getUrlBuilder(),n=r.Deferred(),a=null,s=e.getRouting().restoreReferer();if(s){var o=/(?:board|dashboard)\/(.+)/.exec(s)||[];a=o[1]}if(a){var c=e.getBoardDefinitionFactory();c.findLast(a).done(function(e){var r;if(e){var a=e.itemType||"board";r=i.getRelativeBoardPageUrl(t(a,e.id),e.acid||void 0)}else r=i.getDefaultViewUrl();n.resolve(r)})}else n.resolve(i.getDefaultViewUrl());r.when(n).then(function(t){e.getRouting().redirect(t)})},host:{name:"board_host",type:"master.board"},type:{name:"board_page",type:"page.board"}},{pattern:/\b(?:view|board)\/current/,adapter:function(){var e=this.configurator;e.getGlobalBus().fire("applicationStart");var i=e.getAppStateStore().settings.acid||void 0,n=e.getBoardDefinitionFactory();n.findDefault().then(function(e){var t=r.Deferred();return e?t.resolve(e):n.createBoard().done(function(e){t.resolve(e)}),t}).then(function(n){var r=e.getUrlBuilder(),a=n.itemType||"board",s=r.getRelativeBoardPageUrl(t(a,n.key),n.acid||i);
e.getRouting().redirect(s)})},host:{name:"board_host",type:"master.board"},type:{name:"board_page",type:"page.board"}},{pattern:/\bboard\/([^&]+)/,adapter:a.partial(n,c.BOARD),host:{name:"board_host",type:"master.board"},type:{name:"board_page",type:"page.board"}},{pattern:/finish-(\w+)\/(\d+)/,adapter:function(e,t){this.resolve({entity:{id:parseInt(t,10),type:e}})},host:{name:"board_host",type:"master.board"},type:{name:"entity component",type:"page.finish-iteration"}},{pattern:/(\w+)\/(\d+)\b/,adapter:function(e,n){var r=this,a=this.configurator,s=taus.start("statistics_view",{"@":["--add-last-view-entity-context",function(e){var t="@timing";return e.loadTime=e[t],delete e[t],e}],entity:{id:n,type:e.toLowerCase()}}),o={id:t(e,n),type:e,args:n};i(a,o).then(function(){taus.track({"@":["--save-last-view-entity-context"],action:"view entity",name:"view "+e+" #"+n,tags:["view entity"],type:e,id:n})}).then(function(){r.resolve({entity:{id:parseInt(n,10),type:e},action:"show",cssClass:"tau-app tau-page-single tau-page-entity i-role-bubble-holder",handlers:{onPageLoaded:function(){s.stop()}}})})},host:{name:"board_host",type:"master.board"},type:{name:"entity component",type:"page.entity",comet:{enabled:!0}}},{pattern:/(\w+)\/(\d+)\/(\w+).*/,adapter:function(e,t,i){this.resolve({entity:{id:parseInt(t,10),type:e},action:i,cssClass:"tau-app tau-page-single tau-page-entity i-role-bubble-holder"})},host:{name:"board_host",type:"master.board"},type:{name:"entity component",type:"page.entity"}}]}}}),define("tp/mashups.loader",["jQuery","Underscore","tp/mashups","libs/parseUri"],function(e,t,i,n){var r=["beforeAppInit"],a={initDeferred:e.Deferred(),loadState:{},initPointsData:{},init:function(){this._setLoadStates(),this._overrideMashupsFunctions();var e=n(location.href).hasQueryKey("nomashups");return e||require(["user/mashups"],function(){this._processRegisteredMashups(),this.initDeferred.resolve()}.bind(this)),this},_setLoadStates:function(){t.each(r,function(t){this.loadState[t]={status:e.Deferred()}
},this)},_overrideMashupsFunctions:function(){this.originalFunctions={initializeMashupFolder:i.prototype.initializeMashupFolder},i.prototype.initializeMashupFolder=e.noop},_processRegisteredMashups:function(){var e=i.prototype.getRegisteredMashups();t.each(e,function(e){var t=e.options.initPoint;this.initPointsData[t]||(this.initPointsData[t]={initPoint:t,mashups:[]}),e.mashups.length&&this.initPointsData[t].mashups.push(e)},this)},loadMashups:function(e){this.initDeferred.done(this._loadMashups.bind(this,e))},_loadMashups:function(e){var t=this.initPointsData[e]||{},i=t.mashups||[];t.startTime=Date.now();var n=this._initializeMashups(i);n.done(this._toggleState.bind(this,e))},_initializeMashups:function(i){var n=e.Deferred(),r=i.length,a=[],s=function(){0===r&&n.resolve(a)};return s(),t.each(i,function(e){this.originalFunctions.initializeMashupFolder.call(e.ctx),e.initDeferred.done(function(){a.push(e)}),e.initDeferred.always(function(){r--,s()})},this),n},_toggleState:function(e){var t=this.initPointsData[e]||{};this._updateTimingData(t),this._trackMashupsLoad(t),this.loadState[e].status.resolve()},_trackMashupsLoad:function(e){var i={"@":["--exclude-board-context"]},n=t.extend({},i,e);taus.track("mashups.load",n)},_updateTimingData:function(e){e.totalTime=Date.now()-e.startTime,delete e.startTime}};return a}),define("tracking/stores/store.testconsole",["tau/core/class","Underscore"],function(e){return e.extend({init:function(e){this.config=e||{},window.testconsole={posts:[]}},post:function(e){window.testconsole.posts.push(e)}})}),define("tracking/stores/store.console",["tau/core/class","Underscore"],function(e,t){return e.extend({init:function(e){this.config=e||{},t.defaults(this.config,{method:"log"})},post:function(e){console[this.config.method](e)}})}),define("tracking/stores/store.tauspy",["jQuery","Underscore","app.path","libs/json2"],function(e,t,i){var n=!1,r=0;"withCredentials"in new XMLHttpRequest&&(n=!0);var a=[],s=function(e){this.config=t.defaults(e||{},{local:"taus"}),this.usePost=n,this.config.local&&(this.localUrl=i.get()+"/"+e.local,this.usePost=!0)
};return s.prototype={encode:function(e){var t,i,n,r,a,s,o,c,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d=0,u=0,p="",g=[];if(!e)return e;do t=e.charCodeAt(d++),i=e.charCodeAt(d++),n=e.charCodeAt(d++),c=t<<16|i<<8|n,r=c>>18&63,a=c>>12&63,s=c>>6&63,o=63&c,g[u++]=l.charAt(r)+l.charAt(a)+l.charAt(s)+l.charAt(o);while(d<e.length);p=g.join("");var m=e.length%3;return(m?p.slice(0,m-3):p)+"===".slice(m||3)},postViaImage:function(e){try{if(!e)return!1;var t="https:"===document.location.protocol;if(t&&!this.config.urlSSL)return!1;var i=this.encode(encodeURIComponent(JSON.stringify(e)));if(Image){var n=t?this.config.urlSSL:this.config.url;(new Image).src=n+"?f=b&d="+i}}catch(r){}return!0},queueItem:function(e){var i=this;t.isArray(e)?a=a.concat(e):a.push(e),clearTimeout(r);var n=function(){if(0!==a.length){var e=a.concat([]);a=[],i.usePost?i.postForm(e):i.postViaImage(e)}};a.length>(i.usePost?20:3)?n():r=setTimeout(n,1e3)},postForm:function(t){try{if(!t)return!1;var i=this.localUrl;if(!i){i=n?this.config.urlSSL:this.config.url;var n="https:"===document.location.protocol;if(n&&!this.config.urlSSL)return!1}e.ajax({type:"POST",url:i,dataType:"text",processData:!1,data:JSON.stringify(t),contentType:"application/json; charset=utf-8"})}catch(r){}return!0},post:function(e){this.queueItem(e)}},s}),define("tracking/stores/store.factory",["tracking/stores/store.testconsole","tracking/stores/store.console","tracking/stores/store.tauspy"],function(e,t,i){var n=function(){},r={testconsole:e,console:t,tauspy:i,empty:function(){this.init=n,this.post=n}};return{createTrackingStore:function(e,t){var i;if(t.api)t.api&&t.api.init&&(t.api.init(t.config),i=t.api);else{var n=r.hasOwnProperty(e)?e:"empty";i=new r[n](t)}return{api:i}}}}),define("tracking/taus",["Underscore","tracking/stores/store.factory"],function(e,t){var i="action",n=function(i){this.sid=i.sid,this.globalBus=i.globalBus,this.debugMode=i.debugMode,this.stores=e.map(i.store,function(e,i){return t.createTrackingStore(i,e)
});var n=i.adapters;this.adapters={get:function(t){return n[t]||e.identity}},this.getPostAdapters=i.getPostAdapters||function(e){return[e,"--global--"]},this.sync={},this.temp={},this.last={},this.adaptersScope={sid:this.sid}};return n.prototype={_getAdapterArr:function(t){var i=[];return e.isArray(t)?i=t:e.isString(t)&&(i=[t]),i},_isDuplicate:function(e,t){var i="--tmp-"+e,n=JSON.stringify(t),r=(new Date).getTime(),a=r-(this.last[i]||0);return this.temp[i]===n&&3e3>=a?!0:(this.temp[i]=n,this.last[i]=r,!1)},_post:function(t){if(e.isObject(t))for(var i=0;i<this.stores.length;i++)try{this.stores[i].api.post(t)}catch(n){}},_verifyThenPost:function(t,i){if(this._isDuplicate(t,i))return!1;var n={};return n[t]=e.extend({sid:this.sid,tick:(new Date).getTime()},i),this._post(n),!0},_adapt:function(t,i){var n=e.isFunction(i)?i:this.adapters.get(i);return n.call(this.adaptersScope,t)},_applyAdapters:function(t,i){var n="@",r=this._getAdapterArr(t[n]),a=e.omit(t,n),s=r.concat(i);return e.reduce(s,this._adapt.bind(this),a)},context:function(e){this._applyAdapters(e,[])},track:function(){var t=[].slice.call(arguments),n=t[0],r=t[1];1===t.length&&(n=i,r=e.isString(t[0])?{name:t[0]}:t[0]);try{var a=this._applyAdapters(r,this.getPostAdapters(n));this._verifyThenPost(n,a)}catch(s){this.debugMode&&console&&console.log(s)}},error:function(e){this.track("error",e)},start:function(){var t,n;if(e.isFunction(arguments[0])){var r=arguments[0]();t=r.tick,n=r.args}else t=+new Date,n=[].slice.call(arguments);var a,s,o;if(3===n.length)a=n[0],s=n[1],o=n[2];else if(2===n.length){var c=e.isObject(n[0]);a=c?i:n[0],s=c?n[0]:n[1],o=c?n[1]:e.uniqueId()}else 1===n.length&&(a=i,s=e.isString(n[0])?{name:n[0]}:n[0],o=e.uniqueId());return this.sync[o]={t0:t,type:a,data:s},{stop:this.stop.bind(this,o)}},stop:function(){var t,i;if(e.isFunction(arguments[0])){var n=arguments[0]();t=n.tick,i=n.args}else t=+new Date,i=[].slice.call(arguments);var r=i[0],a=i[1]||{},s=this.sync[r];if(s&&s.t0){var o=e.extend({t0:s.t0,t1:t},s.data,a),c=this._getAdapterArr(o["@"]);
c.splice(0,0,"to-timing"),o["@"]=c,this.track(s.type,o),delete this.sync[r]}}},n}),define("tracking/taus.types.adapters",["Underscore"],function(e){var t="@timing",i="--exclude-board-context-flag",n={tick:function(){return(new Date).getTime()},getInfoFromTypes:function(t){if(!t)return"empty";var i=[],n=t.types?t.types:t;return e.isArray(n)&&(i=e.map(n,function(t){return e.isString(t)?t:t.type})),0===i.length?"empty":i.join(",")},getFilter:function(e){return e?e.filter?e.filter:"":""},getBoardContext:function(t){if(!t)return{};var i=this.getInfoFromTypes(t.cells).split(",");1===i.length&&"empty"==i[0]&&(i=[]),i=e.sortBy(i);var n=t.user||{};return{x:{type:this.getInfoFromTypes(t.x),filter:this.getFilter(t.x)},y:{type:this.getInfoFromTypes(t.y),filter:this.getFilter(t.y)},mode:t.viewMode||null,zoomLevel:t.zoomLevel||null,user_cardFilter:n.cardFilter||"",cards:{types:i,filter:this.getFilter(t.cells)},cardSettings:t.cardSettings}},makePlainCleanObject:function(t,i,n,r){var a=this;if(t=t||{},!(e.isUndefined(i)||e.isNull(i)||e.isEmpty(i))){var s=e.isArray(i);if(!e.isObject(i)&&!s)return void(t[n]=i);if(s)return t[n]=[],e.each(i,function(e){e&&t[n].push(a.makePlainCleanObject({},e,"",r))}),t;for(var o=e.keys(i),c=n?n+"_":"",l=0;l<o.length;l++){var d=o[l];e.indexOf(r,d)>=0||a.makePlainCleanObject(t,i[d],c+d,r)}return t}}},r=function(t,i){var n=i?e.pick(i,"mode","zoomLevel","x","y","cards","user_cardFilter"):null;if(n&&"timeline"===(n.mode||"").toLocaleLowerCase()){var r=e.pick(i,"timelineGlobalDateRange","timelineLocalDateRange","timelineSettings");e.extend(n,r)}return e.extend(t,{"@board-context":n})},a={"--app-context-core":function(e){var t,i,n,r;return e.host&&(t=e.host.toLowerCase().replace("http://","").replace("https://","")),e.user&&(i=[t,"user",e.user.id].join("/")),e.path&&(n=e.path),e.acid&&(r=e.acid),this.cntx={appContext:{id:[t,r].join("/"),host:t,version:e.version,acid:r},host:{id:t},user:{id:i},path:n},this.cntx},"--app-context-teams-projects":function(t){var i=function(e){return"null"===e?-1:e
};return{_id:this.cntx.appContext.id,host:{id:this.cntx.host.id},teams:t.teams?e.map(t.teams,i):[],projects:t.projects?e.map(t.projects,i):[]}},"--add-last-view-entity-context":function(e){return e["@view-context"]=this.viewEntityContext||null,e},"--save-last-view-entity-context":function(e){return this.viewEntityContext={id:e.id,type:e.type,sid:+new Date},a["--add-last-view-entity-context"].call(this,e)},"view-entity":function(e){var t=e.tags||[];return t.push("view entity"),e.tags=t,a["--add-last-view-entity-context"].call(this,e)},"to-timing":function(i){var n={};return n[t]=i.t1-i.t0,e.extend(e.omit(i,"t0","t1"),n)},action:function(e){if(e.action=e.action||e.name,!e.action)throw"stats: [action | name] property must be provided for action message";return e},"action.id.sid":function(e){return e._id&&(e._id+="/"+this.sid),e},"--exclude-board-context":function(e){return e[i]=!0,e},"--update-board-context":function(t){return this.boardContext&&e.extend(this.boardContext,t.changes),t},"open-board-action":function(t){var i=t.boardSettings,r=t.definition,s=n.getBoardContext(r),o=e.extend({},i,s);this.boardContext=o;var c=e.extend({action:"open board",tags:["board","open board"],contextBoard:i.acid&&i.acid.length>0?!0:!1},o);c.boardName=c.name||"Unknown board",delete c.cards;var l=s.cards.types.join(",");return l||(l="no cards"),c.name=['open board "',c.boardName,'" ',"[",s.x.type,"/",s.y.type," with cards ",l,"]"].join(""),a["--exclude-board-context"](c)},"open-view-action":function(t){var i=e.extend({action:"open view",tags:["view","open view"]},t.view);return a["--exclude-board-context"](i)},"slice-request-completed":function(i){var r=function(e){return!i.hasOwnProperty(e)};if(e.any(["command","response",t],r))throw"Invalid argument's properties for [slice-request-completed] adapter";var s=i.command||{},o=i[t],c=i.response||{},l=e.defaults({},s,{config:{$skip:0,$take:0}}),d=parseInt(c.getResponseHeader("X-Stopwatch")),u=c.getResponseHeader("X-Sql-Stopwatch"),p=parseInt(c.getResponseHeader("X-Count")),g=(c.responseText||"").length,m={method:l.method,page:{skip:l.config.$skip,take:l.config.$take},totalTime:o,netTime:o-d,serverTime:d,contentSize:g};
return e.keys(s.config||{}).length>0&&(m.params=l.config),isNaN(p)||(m.countOfEntities=p),u&&(m.serverSqlTimes=u.split(";")),n.makePlainCleanObject(m,i.request.definition,"",["global"]),a["--exclude-board-context"](m)},"slice-detailed-error":function(t){var i=e.extend({place:"slice",board:n.getBoardContext(t.definition)},e.omit(t,"definition"));return a["--exclude-board-context"](i)},"header-menu-click":function(t){var i=t.tags||[],n=i[0]||"click",r=i[1]||"header menu click";return e.extend(t,{action:r,name:r,tags:["board","click","page header","page header item"],area:"page header",event:n})},"--save-statistics_newlist_cardLoad":function(e){return this.latest_statistics_newlist_cardLoad=e,e},"--restore-statistics_newlist_cardLoad":function(){var e=this.latest_statistics_newlist_cardLoad;return delete this.latest_statistics_newlist_cardLoad,e},"--cast-statistics_newlist_cardLoad-to-statistics":function(e){return e.board=e["@board-context"],delete e["@board-context"],e.loadTime=e["@timing"],delete e["@timing"],e},"--global--":function(t){return t[i]||r(t,this.boardContext),delete t[i],e.extend({},t,this.cntx)}};return a}),define("tracking/extensions/extension.tracking.base",["tau/core/extension.base","app.path","Underscore"],function(e,t,i){return e.extend({init:function(e){this.global=e.bus.getGlobalBus(),this._super(e)},getPath:function(){return t.get()},getHost:function(){return t.get().toLowerCase().replace("http://","").replace("https://","")},makePlainCleanObject:function(e,t,n,r){if(!(i.isUndefined(t)||i.isNull(t)||i.isEmpty(t))){e=e||{};var a=i.isArray(t);if(!i.isObject(t)&&!a)return void(e[n]=t);if(a)return e[n]=[],i.each(t,function(t){t&&e[n].push(this.makePlainCleanObject({},t,"",r))},this),e;for(var s=i.keys(t),o=n?n+"_":"",c=0;c<s.length;c++){var l=s[c];i.indexOf(r,l)>=0||this.makePlainCleanObject(e,t[l],o+l,r)}return e}},getInfoFromTypes:function(e){if(!e)return"empty";var t=[];return e.types&&(e=e.types),i.isArray(e)&&i.each(e,function(e){t.push(i.isString(e)?e:e.type)
}),t.length?t.join(","):"empty"},getFilter:function(e){return e&&e.filter?e.filter:""},getBoardContext:function(e){if(!e)return{};var t=this.getInfoFromTypes(e.cells).split(",");1===t.length&&"empty"==t[0]&&(t=[]),t=i.sortBy(t);var n=e.user||{};return{x:{type:this.getInfoFromTypes(e.x),filter:this.getFilter(e.x)},y:{type:this.getInfoFromTypes(e.y),filter:this.getFilter(e.y)},mode:e.viewMode||null,zoomLevel:e.zoomLevel||null,user_cardFilter:n.cardFilter||"",cards:{types:t,filter:this.getFilter(e.cells)},cardSettings:e.cardSettings}}})}),define("tracking/extensions/extension.tracking.board.statistics",["./extension.tracking.base","Underscore"],function(e,t){return e.extend({"global start.lifecycle + overview.board.ready + board.paging.settings + model.cells.content.loaded":function(e){var i=e["start.lifecycle"],n=e["overview.board.ready"],r=e["board.paging.settings"].data,a=e["model.cells.content.loaded"].data;if(i.caller.id==n.caller.id){var s=n.date-i.date,o=0;a.data?t.each(a.data.items,function(e){o+=e.dynamic.items.length}):a.cards&&(o=a.cards.length);var c=["viewMode","x","y","cells","global","boardId"],l=this.makePlainCleanObject(this.getBoardContext(r.definition),r.definition,null,c);if("newlist"!==(l.mode||"").toLowerCase()){var d={"@":["--exclude-board-context"],loadTime:s,page:{current:t.extend({},r.page),size:{x:r.x.onPage,y:r.y.onPage},total:{x:r.x.totalPages,y:r.y.totalPages}},cardsCount:o,board:l};window.performance&&window.performance.timing&&!this.initialLoadTracked&&(this.initialLoadTracked=!0,d.totalLoadTime=Date.now()-performance.timing.navigationStart),this.fire("track.statistics",d)}}}})}),define("tracking/extensions/extension.tracking.application.context",["Underscore","./extension.tracking.base"],function(e,t){return t.extend({init:function(e){this._super(e);var t=e.context.configurator,i=t.getAppStateStore();i.bind({fields:["acid"],listener:this,callback:this.fire.bind(this,"acid.changed")})},"global acid.changed > track.new.context":function(e,t,i){var n=this._extractSelectedIds(i),r={action:"change context",name:this._getEventDescription(n),teams:n.teams,projects:n.projects,processes:n.processes,tags:["selected context"]};
this.fire("track.action",r)},_extractSelectedIds:function(e){return{teams:this._getEntityIds(e.selectedTeams),projects:this._getEntityIds(e.selectedProjects),processes:e.selectedProcessIds}},_getEntityIds:function(t){return e.without(e.pluck(t,"id"),"None")},_getEventDescription:function(e){return"context changed, teams="+e.teams.length+", projects="+e.projects.length+", processes="+e.processes.length}})}),define("tracking/extensions/extension.tracking.board.actions",["Underscore","./extension.tracking.base","libs/json2"],function(e,t){return t.extend({bs_id:0,"global boardSettings.ready":function(e,t){var i=t.boardSettings;this.bs_id!==i.__objectId&&(this.bs_id=i.__objectId,this.boardSettings&&this.boardSettings.onChange.remove(this.trackBoardSettingsDiff),this.boardSettings=i,this.boardSettings.onChange.remove(this.trackBoardSettingsDiff).add(this.trackBoardSettingsDiff))},"global add.board":function(t,i){this.fire("track.action",e.extend({name:"add board"},i))},"global remove.board":function(t,i){this.fire("track.action",e.extend({name:"remove board"},i))},"global help.flow.action":function(e,t){var i={name:t.name,area:"help flow",tags:["help flow","help"]};t.tags&&(i.tags=i.tags.concat(t.tags)),t.progress&&(i.progress=t.progress),this.fire("track.action",i)},"global quick.add.popup.rendered":function(){this.fire("track.action",{name:"show quick add popup",tags:["board","quick add"]})},"global relatedQuickAdd.afterShow":function(){this.fire("track.action",{name:"show related quick add popup",tags:["board","quick add"]})},"global paging.cell.show.more":function(){this.fire("track.action",{name:"show more cards",tags:["board","show more"]})},"global board.configurator.ready:last + model.data.item.did.add":function(e,t,i){if(i.message&&i.message.dataItem&&i.message.dataItem.type&&i.message.dataItem.data){var n=i.message.dataItem.data.cardData,r=n.type.toLowerCase();this.fire("track.action",{action:"entity added",name:r+" #"+n.id+" added using quick add",type:r,tags:["add "+r,"add card","board"]})
}},"global error":function(t,i){var n="---",r="";if(i)if(e.isString(i))n=i;else if(i.message)n=i.message+(i.details||"");else if(i.$node){var a=i.$node.text&&i.$node.text();a=a||"unknown issue: unknown $node",n=a}else try{r=e.keys(i).join(" / "),n="unknown issue: "+JSON.stringify(i)}catch(s){n=["unknown issue: ","fail during global error stringification","(",s.message,").","Object keys:","[",r,"]"].join("")}else n="unknown issue: unspecified global error";this.fire("track.error",{message:n})},"global model.data.item.did.fail.add":function(e,t){t.Message&&(this.fire("track.error",{name:"quick add error",message:t.Message}),this.fire("track.action",{name:"quick add error",tags:["error","board","quick add"],message:t.Message}))},"global view.card.batch.move.completed":function(t,i){var n=[],r={};e.each(i,function(e){if(e.data){var t=e.data("entity-type");n.push({type:t,id:e.data("entity-id")}),r[t]||(r[t]=0),r[t]++}}),this.fire("track.action",{action:"move cards",name:n.length+" card(s) moved "+JSON.stringify(r),cards:n,tags:["board","business action","move cards"]})},"global board.template.selected":function(e,t){t=t||{name:"not defined"},this.fire("track.action",{action:"apply template",name:"apply template ["+t.name+"]",template:t,tags:["board","templates","customize","settings"]})},trackBoardSettingsDiff:function(t){if(t){var i=[],n={};e.each(t,function(e,t){var r=t;"isdraft"!==r.toLowerCase()&&(r="user"===t?"user filter":"edit"===t?"switch "+(e?"on":"off")+" board edit mode":"name"==t?"boardName":t,n[r]=e,i.push(r))}),i.length>0&&taus.track({"@":["--update-board-context"],action:"customize board",name:"change board settings ["+i.join(",")+"]",tags:["customize","board"].concat(i),changes:n})}}})}),define("tracking/extensions/extension.tracking.clicks",["./extension.tracking.base","Underscore","jQuery"],function(e,t,i){return e.extend({track:function(e,i,n){e||(e="body"),n=n||"click",i=i||{},t.defaults(i,{tags:[]});var r=function(e){i.tags.indexOf(e.toLowerCase())<0&&i.tags.push(e)
};r("board"),r(n),i.area&&r(i.area);var a={selector:e,data:i,event:n};return this.clickMap[e]=a,{name:function(e){return i.name=e,r(e),this},nameSelector:function(e){return a.nameSelector=e,this},nameTemplate:function(e){return a.nameTemplate=e,this},tag:function(){return t.each(arguments,function(e){r(e)}),this},event:function(e){return a.event=e,r(e),this},area:function(e){return i.area=e,r(e),this}}},trackArea:function(e,t){var i=this;return function(n){var r=e+(n?" "+n:"");return i.track(r,{area:t})}},trackMainMenu:function(){this.track(".tau-user-submenu .tau-menu-item").area("page header menu").tag("context menu");var e=this.trackArea(".tau-teams-projects-manager","project/team selection");e("button"),this.track(".tau-social-share-popup .tau-share-link").area("social sharing").tag("share targetprocess")},trackGettingStarted:function(){this.track(".tau-getting-started .rhino-btn,.tau-getting-started .rhino-bullet").area("getting started popup").tag("getting started")},trackQuickAdd:function(){var e=this.trackArea(".tau-quick-add-dialog","quick add popup");e("button").tag("quick add popup")},trackBoard:function(){this.track(".tau-board-settings-header.i-role-tabheaders").area("board settings").tag("select setting tab").nameTemplate("select [<%= name%>] tab"),this.track(".tau-cellholder .tau-add").area("board").tag("quick add").name("quick add in cell")},trackSidebar:function(){this.track(".tau-pane-collapser").area("sidebar").name("boards menu collapse (expand)"),this.track(".tau-boardselector__headermenu__item").nameTemplate("customize board menu -> <%= name%>").area("sidebar").tag("boards menu header")},startTracking:function(){var e=this,n=function(e){return e?e:null},r=function(e){var t=n(e.text())||n(e.attr("title"))||n(e.data("title"))||n(e.data("label"))||n(e.attr("role"))||"";return t.toLowerCase()},a=function(e,t){var n;return e.nameSelector?(n=i(e.nameSelector,this).text(),n&&e.data.name&&(n=e.data.name+" "+n),n):(n=e.data.name||r(t)||r(i(this)),n.replace(/[\t\n;]/g,""))
},s=function(n){try{var r=i(n.target),s=n.data,o=a.call(this,s,r);if(!o)return;s.nameTemplate&&(o=t.template(s.nameTemplate)({name:o}));var c=t.defaults({name:o,event:s.event},s.data);e.fire("track.action",c)}catch(l){}},o=i("body");t.each(this.clickMap,function(e){o.on(e.event,e.selector,e,s)})},init:function(e){var i=this;i._super(e),e=e||{},e.disableClicksTracking!==!0&&(t.defaults(e,{clickMap:{}}),i.clickMap=e.clickMap,i.trackSidebar(),i.trackMainMenu(),i.trackGettingStarted(),i.trackBoard(),i.trackQuickAdd(),i.startTracking())}})}),define("libs/schedule",[],function(){function e(e){this.createdOn=new Date,this.period=e,this.expected=0,this.xxx=null,this.MAX_DELTA=6e4,this.iterationNo=-1;var t=this.loop=function(e,i){var n=new Date,r=n.getTime(),a=this.expected>0?this.expected:r,s=r-a;i||e({date:n,"schedule-shift":s,i:++this.iterationNo}),this.expected=+new Date+this.period,this.xxx=setTimeout(function(){t(e,i)},this.period)}.bind(this);this.stop=function(){this.expected=0,clearTimeout(this.xxx)}.bind(this)}return e}),define("tracking/extensions/session",["jQuery"],function(e){var t=e.Deferred();window.session={options:{use_html5_location:!1,session_timeout:1},start:function(e){t.resolve(e)}};var i=function(e,t,i){"use strict";var r=.4,a={use_html5_location:!1,ipinfodb_key:!1,gapi_location:!0,location_cookie:"location",location_cookie_timeout:5,session_timeout:32,session_cookie:"first_session",get_object:null,set_object:null},s=function(){if(e.session=e.session||{},e.session.contains=function(e){if("string"==typeof e)return-1!==this.indexOf(e);for(var t=0;t<e.length;t++)if(-1!==this.indexOf(e[t]))return!0;return!1},e.session&&e.session.options)for(var t in e.session.options)a[t]=e.session.options[t];var i={api_version:r,locale:c.locale(),current_session:c.session(),original_session:c.session(a.session_cookie,24*a.session_timeout*60*60*1e3),browser:c.browser(),plugins:c.plugins(),time:c.time(),device:c.device()};if(a.use_html5_location?i.location=c.html5_location():a.ipinfodb_key?i.location=c.ipinfodb_location(a.ipinfodb_key):a.gapi_location&&(i.location=c.gapi_location()),e.session&&e.session.start)var n=e.session.start;
var s,o=0,l=function(t){t&&o--,0===o&&n&&n(e.session)};e.session={};for(var d in i)if(s=i[d],"function"==typeof s)try{s(function(t){e.session[d]=t,l(!0)}),o++}catch(u){e.console&&"function"==typeof console.log&&(console.log(u),l(!0))}else e.session[d]=s;l()},o={detect:function(){var e={browser:this.search(this.data.browser),version:this.search(i.userAgent)||this.search(i.appVersion),os:this.search(this.data.os)};if("Linux"==e.os)for(var t=["CentOS","Debian","Fedora","Gentoo","Mandriva","Mageia","Red Hat","Slackware","SUSE","Turbolinux","Ubuntu"],n=0;n<t.length;n++)if(i.userAgent.toLowerCase().match(t[n].toLowerCase())){e.distro=t[n];break}return e},search:function(e){if("object"!=typeof e){var t=e.indexOf(this.version_string);if(-1==t)return;return parseFloat(e.substr(t+this.version_string.length+1))}for(var i=0;i<e.length;i++){var n=e[i].string,r=e[i].prop;if(this.version_string=e[i].versionSearch||e[i].identity,n){if(-1!=n.indexOf(e[i].subString))return e[i].identity}else if(r)return e[i].identity}},data:{browser:[{string:i.userAgent,subString:"Chrome",identity:"Chrome"},{string:i.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:i.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:e.opera,identity:"Opera",versionSearch:"Version"},{string:i.vendor,subString:"iCab",identity:"iCab"},{string:i.vendor,subString:"KDE",identity:"Konqueror"},{string:i.userAgent,subString:"Firefox",identity:"Firefox"},{string:i.vendor,subString:"Camino",identity:"Camino"},{string:i.userAgent,subString:"Netscape",identity:"Netscape"},{string:i.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:i.userAgent,subString:"Trident",identity:"Explorer",versionSearch:"rv"},{string:i.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:i.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],os:[{string:i.platform,subString:"Win",identity:"Windows"},{string:i.platform,subString:"Mac",identity:"Mac"},{string:i.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:i.userAgent,subString:"iPad",identity:"iPad"},{string:i.userAgent,subString:"Android",identity:"Android"},{string:i.platform,subString:"Linux",identity:"Linux"}]}},c={browser:function(){return o.detect()
},time:function(){var e=new Date,t=new Date;return e.setMonth(0),e.setDate(1),t.setMonth(6),t.setDate(1),{tz_offset:-(new Date).getTimezoneOffset()/60,observes_dst:e.getTimezoneOffset()!==t.getTimezoneOffset()}},locale:function(){var e=(i.language||i.browserLanguage||i.systemLanguage||i.userLanguage||"").split("-");return 2==e.length?{country:e[1].toLowerCase(),lang:e[0].toLowerCase()}:e?{lang:e[0].toLowerCase(),country:null}:{lang:null,country:null}},device:function(){var n,r,a={screen:{width:e.screen.width,height:e.screen.height}};try{n=e.innerWidth||t.documentElement.clientWidth||t.body.clientWidth}catch(s){n=0}try{r=e.innerHeight||t.documentElement.clientHeight||t.body.clientHeight}catch(s){r=0}return a.viewport={width:n,height:r},a.is_tablet=!!i.userAgent.match(/(iPad|SCH-I800|xoom|kindle)/i),a.is_phone=!a.is_tablet&&!!i.userAgent.match(/(iPhone|iPod|blackberry|android 0.5|htc|lg|midp|mmp|mobile|nokia|opera mini|palm|pocket|psp|sgh|smartphone|symbian|treo mini|Playstation Portable|SonyEricsson|Samsung|MobileExplorer|PalmSource|Benq|Windows Phone|Windows Mobile|IEMobile|Windows CE|Nintendo Wii)/i),a.is_mobile=a.is_tablet||a.is_phone,a},plugins:function(){var e=function(e){if(i.plugins){for(var t,n=0,r=i.plugins.length;r>n;n++)if(t=i.plugins[n],t&&t.name&&-1!==t.name.toLowerCase().indexOf(e))return!0;return!1}return!1},t=function(e){for(var t=!0,i=0;i<e.length;i++){try{var t=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"+e[i]),!0)}catch(n){}if(t)return!0}return!1};return{flash:e("flash")||t([".7",".6",""]),silverlight:e("silverlight"),java:e("java"),quicktime:e("quicktime")}},session:function(i,n){var r=l.get_obj(i);if(null==r){r={visits:1,start:(new Date).getTime(),last_visit:(new Date).getTime(),url:e.location.href,path:e.location.pathname,referrer:t.referrer,referrer_info:l.parse_url(t.referrer),search:{engine:null,query:null}};var a,s=[{name:"Google",host:"google",query:"q"},{name:"Bing",host:"bing.com",query:"q"},{name:"Yahoo",host:"search.yahoo",query:"p"},{name:"AOL",host:"search.aol",query:"q"},{name:"Ask",host:"ask.com",query:"q"},{name:"Baidu",host:"baidu.com",query:"wd"}],o=s.length,c=0,d="q query term p wd query text".split(" ");
for(c=0;o>c;c++)if(a=s[c],-1!==r.referrer_info.host.indexOf(a.host)){r.search.engine=a.name,r.search.query=r.referrer_info.query[a.query],r.search.terms=r.search.query?r.search.query.split(" "):null;break}if(null===r.search.engine&&r.referrer_info.search.length>1)for(c=0;c<d.length;c++){var u=r.referrer_info.query[d[c]];if(u){r.search.engine="Unknown",r.search.query=u,r.search.terms=u.split(" ");break}}}else r.prev_visit=r.last_visit,r.last_visit=(new Date).getTime(),r.visits++,r.time_since_last_visit=r.last_visit-r.prev_visit;return l.set_obj(i,r,n),r},html5_location:function(){return function(e){i.geolocation.getCurrentPosition(function(t){t.source="html5",e(t)},function(){a.gapi_location?c.gapi_location()(e):e({error:!0,source:"html5"})})}},gapi_location:function(){return function(t){var i=l.get_obj(a.location_cookie);i&&"google"===i.source?t(i):(e.gloader_ready=function(){"google"in e&&(e.google.loader.ClientLocation?(e.google.loader.ClientLocation.source="google",t(e.google.loader.ClientLocation)):t({error:!0,source:"google"}),l.set_obj(a.location_cookie,e.google.loader.ClientLocation,60*a.location_cookie_timeout*60*1e3))},l.embed_script("https://www.google.com/jsapi?callback=gloader_ready"))}},architecture:function(){var e=n.userAgent.match(/x86_64|Win64|WOW64|x86-64|x64\;|AMD64|amd64/)||"x64"===n.cpuClass?"x64":"x86";return{arch:e,is_x64:"x64"==e,is_x86:"x68"==e}},ipinfodb_location:function(t){return function(i){var n=l.get_obj(a.location_cookie);n||"ipinfodb"!==n.source?i(n):(e.ipinfocb=function(e){if("OK"===e.statusCode)e.source="ipinfodb",l.set_obj(a.location_cookie,e,60*a.location_cookie*60*1e3),i(e);else{if(a.gapi_location)return c.gapi_location()(i);i({error:!0,source:"ipinfodb",message:e.statusMessage})}},l.embed_script("http://api.ipinfodb.com/v3/ip-city/?key="+t+"&format=json&callback=ipinfocb"))}}},l={parse_url:function(e){var i=t.createElement("a"),n={};i.href=e;var r=i.search.substr(1);if(""!=r)for(var a,s=r.split("&"),o=0,c=s.length;c>o;o++)a=s[o].split("="),2===a.length&&(n[a[0]]=decodeURI(a[1]));
return{host:i.host,path:i.pathname,protocol:i.protocol,port:""===i.port?80:i.port,search:i.search,query:n}},set_cookie:function(i,n,r,a){return i?(a||(a={}),(null===n||void 0===n)&&(r=-1),r&&(a.expires=(new Date).getTime()+r),t.cookie=[encodeURIComponent(i),"=",encodeURIComponent(String(n)),a.expires?"; expires="+new Date(a.expires).toUTCString():"","; path="+(a.path?a.path:"/"),a.domain?"; domain="+a.domain:"",e.location&&"https:"===e.location.protocol?"; secure":""].join("")):null},get_cookie:function(e,i){return(i=new RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)").exec(t.cookie))?decodeURIComponent(i[1]):null},embed_script:function(e){var i=t.createElement("script");i.type="text/javascript",i.src=e,(t.body||t.getElementsByTagName("body")[0]||t.head).appendChild(i)},package_obj:function(e){if(e){e.version=r;var t=d.stringify(e);return delete e.version,t}},set_obj:function(e,t,i,n){l.set_cookie(e,l.package_obj(t),i,n)},get_obj:function(e){var t;try{t=d.parse(l.get_cookie(e))}catch(i){}return t&&t.version==r?(delete t.version,t):void 0}};null!=a.get_object&&(l.get_obj=a.get_object),null!=a.set_object&&(l.set_obj=a.set_object);var d={parse:e.JSON&&e.JSON.parse||function(e){return"string"==typeof e&&e?new Function("return "+e)():null},stringify:e.JSON&&e.JSON.stringify||function(e){var t=typeof e;if("object"===t&&null!==e){var i,n,r=[],a=e&&e.constructor===Array;for(i in e)n=e[i],t=typeof n,"string"===t?n='"'+n+'"':"object"===t&&null!==n&&(n=this.stringify(n)),r.push((a?"":'"'+i+'":')+n);return(a?"[":"{")+r.join(",")+(a?"]":"}")}return"string"===t?'"'+e+'"':void 0}};s()};return"undefined"==typeof window.exports?i(window,document,navigator):window.exports.session=i,t}),define("tracking/extensions/host.info",["jQuery","app.path","libs/json2"],function(e,t){var i=null;return{get:function(){if(!i){var n=localStorage.getItem("host_info");if(n)try{n=e.parseJSON(n);var r=new Date-new Date(n.date),a=Math.floor(r/36e5);if(24>a)return i=e.Deferred().resolve(n.data)}catch(s){}i=e.ajax({url:t.get()+"/info.ashx",dataType:"json"}).done(function(e){var t={date:(new Date).getTime(),data:e};
localStorage.setItem("host_info",JSON.stringify(t))})}return i}}}),define("tracking/extensions/extension.tracking.user.host",["jQuery","app.path","Underscore","libs/schedule","./extension.tracking.base","tau/configurator","./session","tp/mashups","./host.info","tp/mashups/failed"],function(e,t,i,n,r,a,s,o,c,l){var d=function(e,t){if(!e)return"";var i=e.toLowerCase().split("/mashups/");return i.length?(i=(i[i.length-1]||"").replace("/","").replace(t,"").replace(".js",""),i=i.split(o.prototype.mashupKeySeparator)[0]):""};return r.extend({init:function(e){var t=e.scheduler;this._super.apply(this,arguments),this.global.on("application.context.data",function(e){e.removeListener(),t.onceADay(function(){this.getSessionData(e.data,function(e){this.fire("data.track",e)}.bind(this))}.bind(this)),window.performance&&window.performance.memory&&window.performance.memory.usedJSHeapSize&&t.eachXMins(30,function(e){var t={date:e.date,"live-minutes":30*e.i,"schedule-shift":e["schedule-shift"],memory:window.performance.memory};taus.track("browser-memory",t)})}.bind(this),this)},"global boardsSet.selected":function(e,t){var i=this.getHost(),n=this.getUser(),r={userProcess:{_id:n._id,user:{id:n._id},host:{id:i},process:t}};this.fire("data.track",r)},getUser:function(e){var t=this.getHost();e=e||{};var n=[window.loggedUser,a.getLoggedUser(),e.loggedUser,{id:0,role:"N/A"}],r=i.find(n,i.identity);return r=i.deepClone(r),r._id=t+"/user/"+r.id,r.host={id:t},r.tau_keep_date=!0,delete r.id,r},getSessionData:function(t,n){var r=this,a=r.getHost(),u=this.getUser(t);s.done(function(t){var r=t.location||{address:{}},s=new Date,p=s.getDate()+"_"+(s.getMonth()+1)+"_"+s.getFullYear(),g=u._id+"/"+p;delete r.latitude,delete r.longitude,delete r.source,u.location=r;var m=[],h=o.prototype.getRegisteredMashups();i.each(i.keys(h),function(e){var t=d(e,a),n=h[e],r=n.files;t.length&&m.push({_id:a+"/"+t+"/"+p,name:i.trim(t),host:{id:a},files:r})});var f={user:u,mashup:m,host:{_id:a},visit:{_id:g,user:{id:u._id},host:{id:a},browser:t.browser,device:t.device,locale:t.locale,location:r}},v=i.keys(l);
if(v.length>0){var w=[];i.each(v,function(e){var t=d(e,a);t.length&&w.push({_id:a+"/"+t+"/"+p,name:t,path:e,host:{id:a}})}),f.failedMashup=w}c.get().done(function(t){if("string"===e.type(t.createdOn)){var r=t.createdOn.split("/");t.createdOn=new Date(parseInt(r[2],10),parseInt(r[0],10)-1,parseInt(r[1],10))}i.extend(f.host,t),i.extend(f.visit.host,t),i.extend(f.user.host,t),n(f)})})}})}),define("tracking/extensions/extension.tracking.store.v2",["Underscore","./extension.tracking.base","tracking/stores/store.factory"],function(e,t,i){return t.extend({init:function(t){this._super(t),this.sid=t.sid,this.stores=[],e.each(t.store,function(e,t){try{var n=i.createTrackingStore(t,e);this.stores.push(n)}catch(r){}},this)},postData:function(t){if(e.isObject(t))for(var i=this,n=0;n<i.stores.length;n++){var r=i.stores[n];try{r.api.post(t,i.bus)}catch(a){}}},"bus data.track":function(e,t){this.postData(t)},"bus track.action":function(e,t){taus.track(t)},"bus track.action.id.sid":function(e,t){t["@"]=["action.id.sid"],taus.track(t)},"bus track.error":function(e,t){taus.error(t)},"bus track.statistics":function(e,t){taus.track("statistics",t)}})}),define("tracking/extensions/extension.tracking.rest",["Underscore","./extension.tracking.base","tau/configurator"],function(e,t,i){return t.extend({"global store.command.executed":function(t,n){if(n&&n.command&&n.command.config&&("save"==n.command.name||"remove"==n.command.name)){var r=n.command.config.id,a=r?" #"+r:"",s=n.command.type.toLowerCase();if("remove"==n.command.name)return void this.fire("track.action",{action:"delete entity",name:"delete "+s+a,area:"entity",tags:["delete "+s,"delete entity","entity"],type:s,id:r});var o=n.command.config.$set;if("save"==n.command.name&&o){var c=r||o.id?"update ":"add ",l=e.keys(o);if(0===l.length)return;var d=l.join(","),u=window.loggedUser||i.getLoggedUser()||{id:0,role:"N/A"};this.fire("track.action.id.sid",{action:"update entity",_id:this.getHost()+"/"+t.caller.id+"/"+u.id+"/"+l.join("_"),name:c+s+a+" ["+d.toLowerCase()+"]",area:"entity",tags:[c+s,c+"entity","entity","add|update"],type:s,changes:l,params:o,id:r})
}}},"global store.command.failed":function(t){var i="something is wrong";try{if(t.data&&t.data.data){t.data.data.Message&&(i=t.data.data.Message);var n=t.data.data.response;if(n){if(n.Message&&(i=n.Message),e.isArray(n)){var r=[n[1]];e.isArray(n[4])&&n[4].length>0&&n[4][0]!=r[0]&&r.push(n[4][0]),i=r.join(":&nbsp;")}n.Error&&n.Error.Message&&(i=n.Error.Message)}}}catch(a){}var s={name:i,tags:["error","rest"]};this.fire("track.error",s)}})}),define("tracking/component.tracking",["Underscore","tau/core/component-base","./extensions/extension.tracking.board.statistics","./extensions/extension.tracking.application.context","./extensions/extension.tracking.board.actions","./extensions/extension.tracking.clicks","./extensions/extension.tracking.user.host","./extensions/extension.tracking.store.v2","./extensions/extension.tracking.rest"],function(e,t,i,n,r,a,s,o,c){return{create:function(l){var d=e.compact([{type:i},{type:a},{type:s},{type:n},{type:r},{type:o},{type:c}]),u={name:"tracking component","queue.bus":!0},p=new t(e.extend(u,l||{}));return e.each(d,function(e){p.attach(e.type,e.config)}),p.bus}}}),define("tracking/spy.event",["jQuery"],function(e){return e.Deferred()}),define("tracking/tauspy",["Underscore","jQuery","./taus","./taus.types.adapters","tau/core/global.bus","./component.tracking","./spy.event","libs/schedule"],function(e,t,i,n,r,a,s,o){var c=null,l={start:function(e){return c||(e=e||{},c=a.create(e)),c}},d=function(t){var n=[],r=function(e){return function(){n.push({methodName:e,params:[].slice.call(arguments)})}};window.taus={context:r("context"),track:r("track"),error:r("error"),start:function(){var t,i,r,a="action",s=[].slice.call(arguments);return 3===s.length?(t=s[0],i=s[1],r=s[2]):2===s.length?e.isObject(s[0])?(t=a,i=s[0],r=s[1]):(t=s[0],i=s[1],r=e.uniqueId()):1===s.length&&(t=a,i=e.isString(s[0])?{name:s[0]}:s[0],r=e.uniqueId()),n.push({methodName:"start",params:[function(){return{tick:+new Date,args:[t,i,r]}}]}),{stop:this.stop.bind(this,r)}},stop:function(){var e=[].slice.call(arguments);
n.push({methodName:"stop",params:[function(){return{tick:+new Date,args:e}}]})}};for(var a=new i(t);n.length>0;){var s=n.shift();a[s.methodName].apply(a,s.params)}window.taus=a},u=function(e,t){var i=new Date,n=i.getHours(),r=i.getMinutes(),a=60*(24-n)-r,s=new o(60*(a+1)*1e3);s.loop(function(t){e(t.date),s.stop(),setTimeout(u.bind(null,e,!0),0)},t)},p=function(e){var t=e.data("label")||e.attr("title")||e.data("title")||e.attr("role")||e.text()||"";return t.toLowerCase()},g=function(e){var t=e.attr("tauspref")||"",i=["click"];t&&i.push(t);var n=i.join(" "),r=e.attr("taustype"),a=r?r.split(","):[];taus.track("action",{"@":a,action:n,name:[n,p(e)].join(" "),tags:i})};return t(document).on("click",".i-taus",function(e){g(t(e.currentTarget))}),t.Event.prototype.stopPropagation=e.wrap(t.Event.prototype.stopPropagation,function(e){var i=this.originalEvent;if(i){var n=t(i.target).closest(".i-taus");0!==n.length&&g(n)}return e.apply(this,arguments)}),s.done(function(t){var i=(new Date).getTime(),a={version:2},s={onceADay:u,eachXMins:function(e,t){new o(60*e*1e3).loop(t)}};l.start(e.extend({sid:i},t,{scheduler:s},a)),d(e.extend({sid:i},t,{scheduler:s},a,{globalBus:r.get(),adapters:n}))}),l}),define("main.boardplus.init",["require","jQuery","Underscore","libs/parseUri","tau/service.container","tau/configurator","tau/services/service.navigator","tau/components/component.application.generic","tau/ui/extensions/application.generic/ui.extension.application.generic.boardSpecific","tau/components/extensions/extension.tracking.performance","tau/components/extensions/extension.views.menu.comet.listener","tau/components/extensions/dashboard/extension.dashboard.widget.registry.builder","main.boardplus.login","main.boardplus.routes","tp/mashups.loader","Modernizr","tracking/tauspy"],function(e){function t(e){var t=new a;t._id=n.uniqueId("board_"),t.isBoardEdition=!0,t.setWindow(window),t.setFeaturesService(t.getWindow().tauFeatures),t.setLoggedUser(t.getWindow().loggedUser);var i=new o(t,{parameterName:e});
return t.registerService("navigator",i),t}var i=e("jQuery"),n=e("Underscore"),r=e("libs/parseUri"),a=e("tau/service.container"),s=e("tau/configurator"),o=e("tau/services/service.navigator"),c=e("tau/components/component.application.generic"),l=e("tau/ui/extensions/application.generic/ui.extension.application.generic.boardSpecific"),d=e("tau/components/extensions/extension.tracking.performance"),u=e("tau/components/extensions/extension.views.menu.comet.listener"),p=e("tau/components/extensions/dashboard/extension.dashboard.widget.registry.builder"),g=e("main.boardplus.login"),m=e("main.boardplus.routes"),h=e("tp/mashups.loader");e("Modernizr"),e("tracking/tauspy"),s.isBoardEdition=!0,i(function(){var i="page",n=t(i),a=s.getGlobalBus();if(tauFeatures["load.progress"]){var o={},f=function(){a.removeAllListeners(o),setTimeout(function(){tauLoadProgress.activityEnd("app.init").remove()},4)};a.addEventListener("error",f,o),a.addEventListener("contentRendered",f,o)}new g(n,i).process().then(function(){var t={name:"application board",options:{applicationId:i},routes:m.createApplicationRoutes(),context:{configurator:n},extensions:[l,d,u,p]},a=c.create(t),s=function(){tauFeatures["load.progress"]&&tauLoadProgress.activityEnd("user.mashups").activity("app.init"),a.initialize(t)};r(location.href).hasQueryKey("nomashups")?s():n.getFeaturesService().isEnabled("mashups.loader")?h.initDeferred.done(function(){h.loadState.beforeAppInit.status.done(function(){s()})}):e(["user/mashups"],function(){s()})})})}),require(["main.boardplus.init"],function(){}),define("main.boardplus",function(){});