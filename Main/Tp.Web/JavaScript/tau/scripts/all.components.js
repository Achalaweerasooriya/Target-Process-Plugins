define('tracking/stores/store.testconsole',["tau/core/class","Underscore"],function(n){return n.extend({init:function(n){this.config=n||{},window.testconsole={posts:[]}},post:function(n){window.testconsole.posts.push(n)}})});
define('tracking/stores/store.console',["tau/core/class","Underscore"],function(n,o){return n.extend({init:function(n){this.config=n||{},o.defaults(this.config,{method:"log"})},post:function(n){console[this.config.method](n)}})});
define('app.path',["jQuery","tau/core/class"],function($,clazz){var appRoot=null,getAppPath=function(t){var e=window.location,r=e.protocol+"//"+e.host+e.pathname,i=r.split("/");i.pop();var s=$(document).find('script[src*="/require.js"]').attr("src"),n=s.split("/");n.pop();for(var o=t.split("/");".."===n[0];)n.shift(),i.pop();if(0===n.length)for(var h=0;h<o.length;h++)i.pop();else if(n.join("/").toLowerCase()!==o.join("/").toLowerCase())throw"Can't determine application root";return i.join("/")},api={get:function(){return appRoot||(appRoot=getAppPath("javascript/tau/scripts"))},tp:{}},tp=api.tp;return tp.UrlParameterCollection=clazz.extend({query:null,_parameters:null,init:function(t){this.query=t;var e=[],r=this.query.split("&"),i="";if(r.length<1)return e;for(var s=0;s<r.length;s++)i=r[s].split("="),i[0].length>0&&(e[s]=[i[0],1==i.length?i[0]:i[1]]);this._parameters=e},get:function(t){var e=this._findParameter(t);return e?e[1]:void 0},_findParameter:function(t){for(var e=0;e<this._parameters.length;e++)if(this._parameters[e][0]==t)return this._parameters[e]},set:function(t,e){var r=this._findParameter(t);return r?void(r[1]=e):void this._parameters.push([t,e])},remove:function(t){for(var e=0;e<this._parameters.length;e++)this._parameters[e][0]==t&&this._parameters.splice(e,1)}}),tp.UrlParameterCollection.prototype.toString=function(){if(0==this._parameters.length)return"";for(var t="?",e=0;e<this._parameters.length;e++)e>0&&(t+="&"),t+=this._parameters[e][0]+"="+this._parameters[e][1];return t},tp.URL=clazz.extend({init:function(url){0==url.length&&eval('throw "Invalid URL ['+url+']"'),this.url=url,this.port=-1,this.query=this.url.indexOf("?")>=0?this.url.substring(this.url.indexOf("?")+1):"",this.query.indexOf("#")>=0&&(this.query=this.query.substring(0,this.query.indexOf("#"))),this.protocol="",this.host="",this.protocolSep="",this.portSep="";var protocolSepIndex=this.url.indexOf("://");if(protocolSepIndex>=0){this.protocolSep="://",this.protocol=this.url.substring(0,protocolSepIndex).toLowerCase(),this.host=this.url.substring(protocolSepIndex+3),this.host.indexOf("/")>=0&&(this.host=this.host.substring(0,this.host.indexOf("/")));var atIndex=this.host.indexOf("@");if(atIndex>=0){var credentials=this.host.substring(0,atIndex),colonIndex=credentials.indexOf(":");colonIndex>=0?(this.username=credentials.substring(0,colonIndex),this.password=credentials.substring(colonIndex)):this.username=credentials,this.host=this.host.substring(atIndex+1)}var portColonIndex=this.host.indexOf(":");portColonIndex>=0&&(this.portSep=":",this.port=this.host.substring(portColonIndex),this.host=this.host.substring(0,portColonIndex)),this.file=this.url.substring(protocolSepIndex+3),this.file=this.file.substring(this.file.indexOf("/"))}else this.file=this.url;this.file.indexOf("?")>=0&&(this.file=this.file.substring(0,this.file.indexOf("?")));var refSepIndex=url.indexOf("#");refSepIndex>=0?(this.file=this.file.substring(0,refSepIndex),this.reference=this.url.substring(this.url.indexOf("#"))):this.reference="",this.path=this.file,this.query.length>0&&(this.file+="?"+this.query),this.reference.length>0&&(this.file+="#"+this.reference),this._parameters=new tp.UrlParameterCollection(this.query)},getPort:function(){return this.port},getQuery:function(){return this._parameters.toString()},getProtocol:function(){return this.protocol},getHost:function(){return this.host},getUserName:function(){return this.username},getPassword:function(){return this.password},getFile:function(){return this.file},getReference:function(){return this.reference},getPath:function(){return this.path},getAcid:function(){return this.getArgumentValue("acid")},setAcid:function(t){this.setArgumentValue("acid",t)},setArgumentValue:function(t,e){this._parameters.set(t,e)},removeArgument:function(t){this._parameters.remove(t)},getArgumentValue:function(t){var e=this._parameters.get(t);return null!=e?e.replace(/\+/g," "):null}}),tp.URL.prototype.toString=function(){var t=[this.getProtocol(),this.protocolSep,this.getHost(),this.getPort(),this.getPath(),this.getQuery()],e="";return $.each(t,function(){this&&-1!=this&&(e+=this)}),e},tp.AcidURL=tp.URL.extend({init:function(t){this._super(t)},toString:function(){var t=new tp.URL(document.location.href).getAcid();return this.setAcid(t),this._super()}}),tp.WebServiceURL=tp.AcidURL.extend({init:function(t){this._super(api.get()+t)}}),api});
var JSON;JSON||(JSON={}),function(){"use strict";function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var r,n,o,f,u,i=gap,p=e[t];switch(p&&"object"==typeof p&&"function"==typeof p.toJSON&&(p=p.toJSON(t)),"function"==typeof rep&&(p=rep.call(e,t,p)),typeof p){case"string":return quote(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p)return"null";if(gap+=indent,u=[],"[object Array]"===Object.prototype.toString.apply(p)){for(f=p.length,r=0;f>r;r+=1)u[r]=str(r,p)||"null";return o=0===u.length?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+i+"]":"["+u.join(",")+"]",gap=i,o}if(rep&&"object"==typeof rep)for(f=rep.length,r=0;f>r;r+=1)"string"==typeof rep[r]&&(n=rep[r],o=str(n,p),o&&u.push(quote(n)+(gap?": ":":")+o));else for(n in p)Object.prototype.hasOwnProperty.call(p,n)&&(o=str(n,p),o&&u.push(quote(n)+(gap?": ":":")+o));return o=0===u.length?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+i+"}":"{"+u.join(",")+"}",gap=i,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,r){var n;if(gap="",indent="","number"==typeof r)for(n=0;r>n;n+=1)indent+=" ";else"string"==typeof r&&(indent=r);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var r,n,o=t[e];if(o&&"object"==typeof o)for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n=walk(o,r),void 0!==n?o[r]=n:delete o[r]);return reviver.call(t,e,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();
define("libs/json2", function(){});

define('tracking/stores/store.tauspy',["jQuery","Underscore","app.path","libs/json2"],function(t,e,o){var r=!1,n=0;"withCredentials"in new XMLHttpRequest&&(r=!0);var i=[],a=function(t){this.config=e.defaults(t||{},{local:"taus"}),this.usePost=r,this.config.local&&(this.localUrl=o.get()+"/"+t.local,this.usePost=!0)};return a.prototype={encode:function(t){var e,o,r,n,i,a,c,s,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h=0,l=0,f="",p=[];if(!t)return t;do e=t.charCodeAt(h++),o=t.charCodeAt(h++),r=t.charCodeAt(h++),s=e<<16|o<<8|r,n=s>>18&63,i=s>>12&63,a=s>>6&63,c=63&s,p[l++]=u.charAt(n)+u.charAt(i)+u.charAt(a)+u.charAt(c);while(h<t.length);f=p.join("");var g=t.length%3;return(g?f.slice(0,g-3):f)+"===".slice(g||3)},postViaImage:function(t){try{if(!t)return!1;var e="https:"===document.location.protocol;if(e&&!this.config.urlSSL)return!1;var o=this.encode(encodeURIComponent(JSON.stringify(t)));if(Image){var r=e?this.config.urlSSL:this.config.url;(new Image).src=r+"?f=b&d="+o}}catch(n){}return!0},queueItem:function(t){var o=this;e.isArray(t)?i=i.concat(t):i.push(t),clearTimeout(n);var r=function(){if(0!==i.length){var t=i.concat([]);i=[],o.usePost?o.postForm(t):o.postViaImage(t)}};i.length>(o.usePost?20:3)?r():n=setTimeout(r,1e3)},postForm:function(e){try{if(!e)return!1;var o=this.localUrl;if(!o){o=r?this.config.urlSSL:this.config.url;var r="https:"===document.location.protocol;if(r&&!this.config.urlSSL)return!1}t.ajax({type:"POST",url:o,dataType:"text",processData:!1,data:JSON.stringify(e),contentType:"application/json; charset=utf-8"})}catch(n){}return!0},post:function(t){this.queueItem(t)}},a});
define('tracking/stores/store.factory',["tracking/stores/store.testconsole","tracking/stores/store.console","tracking/stores/store.tauspy"],function(t,e,i){var n=function(){},o={testconsole:t,console:e,tauspy:i,empty:function(){this.init=n,this.post=n}};return{createTrackingStore:function(t,e){var i;if(e.api)e.api&&e.api.init&&(e.api.init(e.config),i=e.api);else{var n=o.hasOwnProperty(t)?t:"empty";i=new o[n](e)}return{api:i}}}});
define('tracking/taus',["Underscore","tracking/stores/store.factory"],function(t,e){var s="action",i=function(s){this.sid=s.sid,this.globalBus=s.globalBus,this.debugMode=s.debugMode,this.stores=t.map(s.store,function(t,s){return e.createTrackingStore(s,t)});var i=s.adapters;this.adapters={get:function(e){return i[e]||t.identity}},this.getPostAdapters=s.getPostAdapters||function(t){return[t,"--global--"]},this.sync={},this.temp={},this.last={},this.adaptersScope={sid:this.sid}};return i.prototype={_getAdapterArr:function(e){var s=[];return t.isArray(e)?s=e:t.isString(e)&&(s=[e]),s},_isDuplicate:function(t,e){var s="--tmp-"+t,i=JSON.stringify(e),r=(new Date).getTime(),n=r-(this.last[s]||0);return this.temp[s]===i&&3e3>=n?!0:(this.temp[s]=i,this.last[s]=r,!1)},_post:function(e){if(t.isObject(e))for(var s=0;s<this.stores.length;s++)try{this.stores[s].api.post(e)}catch(i){}},_verifyThenPost:function(e,s){if(this._isDuplicate(e,s))return!1;var i={};return i[e]=t.extend({sid:this.sid,tick:(new Date).getTime()},s),this._post(i),!0},_adapt:function(e,s){var i=t.isFunction(s)?s:this.adapters.get(s);return i.call(this.adaptersScope,e)},_applyAdapters:function(e,s){var i="@",r=this._getAdapterArr(e[i]),n=t.omit(e,i),a=r.concat(s);return t.reduce(a,this._adapt.bind(this),n)},context:function(t){this._applyAdapters(t,[])},track:function(){var e=[].slice.call(arguments),i=e[0],r=e[1];1===e.length&&(i=s,r=t.isString(e[0])?{name:e[0]}:e[0]);try{var n=this._applyAdapters(r,this.getPostAdapters(i));this._verifyThenPost(i,n)}catch(a){this.debugMode&&console&&console.log(a)}},error:function(t){this.track("error",t)},start:function(){var e,i;if(t.isFunction(arguments[0])){var r=arguments[0]();e=r.tick,i=r.args}else e=+new Date,i=[].slice.call(arguments);var n,a,o;if(3===i.length)n=i[0],a=i[1],o=i[2];else if(2===i.length){var c=t.isObject(i[0]);n=c?s:i[0],a=c?i[0]:i[1],o=c?i[1]:t.uniqueId()}else 1===i.length&&(n=s,a=t.isString(i[0])?{name:i[0]}:i[0],o=t.uniqueId());return this.sync[o]={t0:e,type:n,data:a},{stop:this.stop.bind(this,o)}},stop:function(){var e,s;if(t.isFunction(arguments[0])){var i=arguments[0]();e=i.tick,s=i.args}else e=+new Date,s=[].slice.call(arguments);var r=s[0],n=s[1]||{},a=this.sync[r];if(a&&a.t0){var o=t.extend({t0:a.t0,t1:e},a.data,n),c=this._getAdapterArr(o["@"]);c.splice(0,0,"to-timing"),o["@"]=c,this.track(a.type,o),delete this.sync[r]}}},i});
define('tracking/taus.types.adapters',["Underscore"],function(t){var e="@timing",n="--exclude-board-context-flag",i={tick:function(){return(new Date).getTime()},getInfoFromTypes:function(e){if(!e)return"empty";var n=[],i=e.types?e.types:e;return t.isArray(i)&&(n=t.map(i,function(e){return t.isString(e)?e:e.type})),0===n.length?"empty":n.join(",")},getFilter:function(t){return t?t.filter?t.filter:"":""},getBoardContext:function(e){if(!e)return{};var n=this.getInfoFromTypes(e.cells).split(",");1===n.length&&"empty"==n[0]&&(n=[]),n=t.sortBy(n);var i=e.user||{};return{x:{type:this.getInfoFromTypes(e.x),filter:this.getFilter(e.x)},y:{type:this.getInfoFromTypes(e.y),filter:this.getFilter(e.y)},mode:e.viewMode||null,zoomLevel:e.zoomLevel||null,user_cardFilter:i.cardFilter||"",cards:{types:n,filter:this.getFilter(e.cells)},cardSettings:e.cardSettings,isCustomizeDisabled:e.isCustomizeDisabled}},makePlainCleanObject:function(e,n,i,r){var o=this;if(e=e||{},!(t.isUndefined(n)||t.isNull(n)||t.isEmpty(n))){var a=t.isArray(n);if(!t.isObject(n)&&!a)return void(e[i]=n);if(a)return e[i]=[],t.each(n,function(t){t&&e[i].push(o.makePlainCleanObject({},t,"",r))}),e;for(var s=t.keys(n),c=i?i+"_":"",d=0;d<s.length;d++){var l=s[d];t.indexOf(r,l)>=0||o.makePlainCleanObject(e,n[l],c+l,r)}return e}}},r=function(e,n){var i=n?t.pick(n,"mode","zoomLevel","x","y","cards","user_cardFilter"):null;if(i&&"timeline"===(i.mode||"").toLocaleLowerCase()){var r=t.pick(n,"timelineGlobalDateRange","timelineLocalDateRange","timelineSettings");t.extend(i,r)}return t.extend(e,{"@board-context":i})},o={"--app-context-core":function(t){var e,n,i,r;return t.host&&(e=t.host.toLowerCase().replace("http://","").replace("https://","")),t.user&&(n=[e,"user",t.user.id].join("/")),t.path&&(i=t.path),t.acid&&(r=t.acid),this.cntx={appContext:{id:[e,r].join("/"),host:e,version:t.version,acid:r},host:{id:e},user:{id:n},path:i},this.cntx},"--app-context-teams-projects":function(e){var n=function(t){return"null"===t?-1:t};return{_id:this.cntx.appContext.id,host:{id:this.cntx.host.id},teams:e.teams?t.map(e.teams,n):[],projects:e.projects?t.map(e.projects,n):[]}},"--add-last-view-entity-context":function(t){return t["@view-context"]=this.viewEntityContext||null,t},"--save-last-view-entity-context":function(t){return this.viewEntityContext={id:t.id,type:t.type,sid:+new Date},o["--add-last-view-entity-context"].call(this,t)},"view-entity":function(t){var e=t.tags||[];return e.push("view entity"),t.tags=e,o["--add-last-view-entity-context"].call(this,t)},"to-timing":function(n){var i={};return i[e]=n.t1-n.t0,t.extend(t.omit(n,"t0","t1"),i)},action:function(t){if(t.action=t.action||t.name,!t.action)throw"stats: [action | name] property must be provided for action message";return t},"action.id.sid":function(t){return t._id&&(t._id+="/"+this.sid),t},"--exclude-board-context":function(t){return t[n]=!0,t},"--update-board-context":function(e){return this.boardContext&&t.extend(this.boardContext,e.changes),e},"open-board-action":function(e){var n=e.boardSettings,r=e.definition,a=i.getBoardContext(r),s=t.extend({},n,a);this.boardContext=s;var c=t.extend({action:"open board",tags:["board","open board"],contextBoard:n.acid&&n.acid.length>0?!0:!1},s);c.boardName=c.name||"Unknown board",delete c.cards;var d=a.cards.types.join(",");return d||(d="no cards"),c.name=['open board "',c.boardName,'" ',"[",a.x.type,"/",a.y.type," with cards ",d,"]"].join(""),o["--exclude-board-context"](c)},"slice-request-completed":function(n){var r=function(t){return!n.hasOwnProperty(t)};if(t.any(["command","response",e],r))throw"Invalid argument's properties for [slice-request-completed] adapter";var a=n.command||{},s=n[e],c=n.response||{},d=t.defaults({},a,{config:{$skip:0,$take:0}}),l=parseInt(c.getResponseHeader("X-Stopwatch")),u=c.getResponseHeader("X-Sql-Stopwatch"),p=parseInt(c.getResponseHeader("X-Count")),f=(c.responseText||"").length,m={method:d.method,page:{skip:d.config.$skip,take:d.config.$take},totalTime:s,netTime:s-l,serverTime:l,contentSize:f};return t.keys(a.config||{}).length>0&&(m.params=d.config),isNaN(p)||(m.countOfEntities=p),u&&(m.serverSqlTimes=u.split(";")),i.makePlainCleanObject(m,n.request.definition,"",["global"]),o["--exclude-board-context"](m)},"slice-detailed-error":function(e){var n=t.extend({place:"slice",board:i.getBoardContext(e.definition)},t.omit(e,"definition"));return o["--exclude-board-context"](n)},"--save-statistics_newlist_cardLoad":function(t){return this.latest_statistics_newlist_cardLoad=t,t},"--restore-statistics_newlist_cardLoad":function(){var t=this.latest_statistics_newlist_cardLoad;return delete this.latest_statistics_newlist_cardLoad,t},"--cast-statistics_newlist_cardLoad-to-statistics":function(t){return t.board=t["@board-context"],delete t["@board-context"],t.loadTime=t["@timing"],delete t["@timing"],t},"--global--":function(e){return e[n]||r(e,this.boardContext),delete e[n],t.extend({},e,this.cntx)}};return o});
define('tau/core/event',["Underscore"],function(e){var n=function(e){var n=e.split(":"),t={name:n[0]};return n.length>1&&(t.rule=n[1]),t},t=function(n){return n.name?[n.data]:e.pluck(e.values(n),"data")},r=function(){};r.implementOn=function(e){var n=r.prototype;for(var t in n)void 0==e[t]&&(e[t]=n[t]);return e},r.extend=function(e){return r.implementOn(e.prototype),e},r.signUpOnEvents=function(r,i,s,a,o,v){for(var u={},l=[],f={},c=function(n){if(v)for(var a=e.indexOf(r,n.name),o=0;a>o;o++){var c=r[o].replace(":last","");if(!u.hasOwnProperty(c))return}if(u[n.name]=n,e.keys(u).length===l.length){for(var h={},p=0,g=l.length;g>p;p++){var m=f[l[p]];h[m.name]=u[m.name],"last"!==m.rule&&delete u[m.name]}h=[h].concat(t(h)),i[s].apply(i,h)}},h=0,p=r.length;p>h;h++){var g=n(r[h]),m=g.name;f[m]=g,l.push(m),a.on(m,c,i,null,o)}},r.subscribeOn=function(n){var t=[];for(var i in n)if(/\s/.test(i)){var s=n[i];s&&e.isFunction(s)&&t.push(i)}t.sort();for(var a=0,o=t.length;o>a;a++){var v=t[a],u=v.replace(/\s*\+\s*/g,"+").replace(/\s*>\s*/g,">"),l=u.split(/\s+/);if(!(l.length<2)){var f=l[0];if(e.has(n,f)){var c=n[f];if(c&&e.isFunction(c.on)){var h=l[1],p=h.split("+"),g=h.split(">");if(p.length>1&&g.length>1)throw new Error('"'+v+'": + and > can not be used together');var m;l.length>2&&!isNaN(l[2])&&(m=l[2]),p.length>1?r.signUpOnEvents(p,n,v,c,m,!1):g.length>1?r.signUpOnEvents(g,n,v,c,m,!0):c.on(h,n[v],n,null,m)}}}}},r.unSubscribe=function(n){e.each(n,function(t){t&&e.isFunction(t.removeAllListeners)&&t.removeAllListeners(n)})};var i=function(e){this.name=e,this.listeners=[]};i.prototype={getListenerIndex:function(e,n){for(var t=0,r=this.listeners;t<r.length;t++){var i=r[t];if(i.fn==e&&(i.scopeObj===n||!i.scopeObj&&!n))return t}return-1}};var s={getPrivateEvents:function(){var e=this.getPrivate&&this.getPrivate()||this._||(this._={});return e.events||(e.events={})},getPrivateEvent:function(e){var n=this.getPrivate&&this.getPrivate()||this._;return n&&n.events?n.events[e]:null},once:function(n,t,r,i,s){var a=e.bind(function(e){this.removeListener(n,e,r||this)},this),o=function(){t.apply(this,e.toArray(arguments)),a(o)};this.on(n,o,r,i,s)},on:function(n,t,s,a,o){if(e.isString(n)&&n.indexOf("+")>0){var v=n.split("+");return r.signUpOnEvents(v,this,t,this,o),this}if(e.isArray(n)){var u=this;return e.each(n,function(e){u.on(e,t,s,a,o)}),this}var l=this.getPrivateEvents(),f=l[n]||(l[n]=new i(n));if(f.getListenerIndex(t,s)>=0)return this;var c=f.listeners;s||(s=this),isNaN(o)&&(o=10);var h=this,p=function(e,r,i,o,v){var u={name:n,sender:this,date:new Date,caller:e,data:r,listenerData:a,stop:i,cancel:o,suspendMain:function(){v&&v.lock()},cancelMain:function(){v&&v.cancel()},resumeMain:function(){v&&v.unlock()},removeListener:function(){h.removeListener(n,t,s)}};return t.call(s,u,u.data),u.data};p.fn=t,p.scopeObj=s,p.priority=o;for(var g=c.length-1;g>=0;g--)if(c[g].priority<=o)return c.splice(g+1,0,p),this;return c.unshift(p),this},fire:function(){var e=!1,n=function(){e=!0},t=!1,r=function(){t=!0};return function(i,s,a,o){var v=this.getPrivateEvent(i),u=e,l=t;if(e=t=!1,v){var f=v.listeners;if(f.length){f=f.slice(0);for(var c=0;c<f.length;c++){var h=f[c].call(this,a,s,n,r,o);if("undefined"!=typeof h&&(s=h),e||t)break}}}var p=t||("undefined"==typeof s?!1:s);return e=u,t=l,p}}(),fireOnce:function(e,n,t){var r=this.fire(e,n,t);return delete this.getPrivateEvents()[e],r},removeListener:function(e,n,t){var r=this.getPrivateEvent(e);if(r){var i=r.getListenerIndex(n,t);i>=0&&r.listeners.splice(i,1)}},removeAllListeners:function(e){var n=this.getPrivateEvents();for(var t in n)if(n[t].listeners)if(e){for(var r=n[t].listeners,i=[],s=0;s<r.length;s++)r[s].scopeObj!=e&&i.push(r[s]);n[t].listeners=i}else delete n[t].listeners,delete n[t]},hasListeners:function(e){var n=this.getPrivateEvent(e);return n&&n.listeners.length>0},getListeners:function(){var e=this.getPrivateEvents(),n=[];for(var t in e){var r=e[t].listeners;if(r&&r.length>0){for(var i=[],s=0;s<r.length;s++){var a=r[s],o={name:"unknown",item:a};a.scopeObj&&a.scopeObj.bus&&a.scopeObj.bus.name?o.name=a.scopeObj.bus.name:a.scopeObj&&a.scopeObj.name&&(o.name=a.scopeObj.name),i.push(o)}n.push({name:t,items:r,count:r.length,listeners:i})}}return n},getListenersCount:function(){var e=this.getPrivateEvents(),n=0;for(var t in e)e[t].listeners&&(n+=e[t].listeners.length);return n}};return s.addEventListener=s.on,s.unbind=s.removeAllListeners,r.prototype=s,r});
define('tau/core/bus.collection',["Underscore","jQuery","tau/core/class","tau/core/event"],function(e,t,n,s){var i=n.extend({init:function(){this.buses={}},register:function(e){this.buses[e.id]=e,this.fire("create",{bus:e})},count:function(t){var n=e.keys(this.buses);return t&&(n=e.without(n,"global")),n.length},size:function(){return this.count()},stats:function(){var t={};e.forEach(this.buses,function(e){t.hasOwnProperty(e.name)||(t[e.name]=0),t[e.name]++}),e.forEach(t,function(e,t){console.log(t+" : "+e)})},unregister:function(e){"global"!==e.id&&(delete this.buses[e.id],this.fire("destroy",{bus:e}))},getByName:function(n,s){var i=t.Deferred(),r=function(e){return e.name===n},o=e.find(this.buses,r);if(o)i.resolve(o);else{var u=e.bind(function(e,t){var n=t.data.bus;r(n)&&(this.removeListener("create",u,this),e.resolve(n))},this,i);this.on("create",u,this)}return s&&i.done(s),i},onCreate:function(e){this.register(e)},onDestroy:function(e){this.unregister(e)},logCount:function(){console.log("#count: "+this.count())},clear:function(){this.buses={}}});return s.implementOn(i.prototype),i});
define('tau/core/bus.reg',["Underscore","tau/core/bus.collection"],function(e,n){var o=new n;return window.tau=window.tau||{},e.extend(window.tau,{buses:o}),o});
define('tau/core/event.queued',["Underscore","tau/core/event"],function(e,t){var n=function(){t.call(this,arguments)};e.extend(n,t),e.extend(n.prototype,t.prototype);var o=null,s=function(n){var s=e.clone(n.originalArguments);s[0]="after_"+s[0],s[1]=s[1]||{},s[2]=s[2]||{},o&&0!=o.length?(o.push({arguments:n.originalArguments,scope:n.scope}),o.push({arguments:s,scope:n.scope})):(t.prototype.fire.apply(n.scope,n.originalArguments),t.prototype.fire.apply(n.scope,s))};return n.prototype.fire=function(){var n=e.toArray(arguments),c=e.clone(n);c[0]="before_"+c[0],c[1]=c[1]||{},c[2]=c[2]||{};var i=e.clone(n);if(i[0]="after_"+i[0],i[1]=i[1]||{},i[2]=i[2]||{},c[3]={lockCount:0,canceled:!1,originalArguments:n,scope:this,unlockedDelegate:function(){},setUnlockDelegate:function(e){this.unlockedDelegate=e},isCanceled:function(){return this.canceled},isLocked:function(){return this.lockCount>0},cancel:function(){this.canceled=!0},lock:function(){this.lockCount++},unlock:function(){this.lockCount--,0==this.lockCount&&(this.unlockedDelegate(this),delete this.originalArguments,delete this.scope)}},e.isNull(o)){for(o=[],o.push({arguments:c,scope:this}),o.push({arguments:n,scope:this}),o.push({arguments:i,scope:this});o.length>0;){var r=o.shift(),u=r.arguments,l=r.scope;t.prototype.fire.apply(l,u);var a=u&&u[3];a&&(a.isLocked()||a.isCanceled())&&(o.splice(0,2),0==a.isCanceled()&&a.setUnlockDelegate(s))}o=null}else o.push({arguments:c,scope:this}),o.push({arguments:n,scope:this}),o.push({arguments:i,scope:this})},n});
define('tau/core/bus',["Underscore","tau/core/class","tau/core/bus.reg","tau/core/event","tau/core/event.queued"],function(e,t,i,u,n){var s=function(e){return function(t,u){this.globalBus&&this.globalBus.fire(t,u,this);var n=e.prototype.fire.apply(this,arguments);return"destroy"===t&&(i.onDestroy(this),delete this.globalBus),n}},o=s(n),l=t.extend({globalBus:null,init:function(t){t=t||{},(t["queue.bus"]||t.queuedBus)&&(this.fire=o),this.globalBus=t&&t.globalBus?t.globalBus:null,this.name=t&&t.name?t.name:e.uniqueId()+"",e.defaults(t,{id:e.uniqueId("bus_")}),this.id=t.id,i.onCreate(this)},initialize:function(e){this.fire("initialize",e)},destroy:function(){this.fire("destroy"),delete this.globalBus},getGlobalBus:function(){return this.globalBus}});return u.implementOn(l.prototype),l.prototype.fire=s(u),l});
define('tau/core/global.bus',["tau/core/bus","app.bus"],function(e,n){var u=new e({id:"global",name:"globalBus"});return n.resolve(u),{bus:null,reset:function(){},get:function(){return u}}});
define('tau/core/tau',["Underscore"],function(e){var r=r||{};r.empty=function(){},r.ns=function(e){for(var r=e.split("."),n=window,t=0,o=r.length;o>t;t++){var c=r[t];"undefined"==typeof n[c]&&(n[c]={}),n=n[c]}},r.getIEVersion=function(e){e=e||window.navigator;var r,n=e.appName,t=e.userAgent;return"Microsoft Internet Explorer"==n?r=t.match(/MSIE (\d+[.\d]*)/):"Netscape"==n&&(r=t.match(/Trident\/.*rv:(\d+[.\d]*)/)),r?parseInt(r[1],10):void 0},r.ieVersion=r.getIEVersion(),r.getQueryValueFromUrl=function(e,r){r=r.replace(/\[/,"\\[").replace(/\]/,"\\]");var n="[\\?&]"+r+"=([^&#]*)",t=new RegExp(n,"i"),o=t.exec(e);return o?o[1]:""},r.getValueFromQueryString=function(e){var n=window.location.href;return r.getQueryValueFromUrl(n,e)},r.getTokenParameterFromQueryString=function(e){var n=r.getValueFromQueryString("token");return n?e+"token="+n:""},r.extendArgs=function(e,r){var n=e;return n=[].slice.call(e),n.unshift(r),n},r.concat=function(){return String.prototype.concat.apply("",arguments)},r.createScopedCallbackIfRequired=function(e){return"function"==typeof e?e:r.createScopedCallback(e.fn,e.scope)},r.createScopedCallback=function(e,r){return"function"!=typeof e&&"function"==typeof e.fn&&(e=e.fn,e.scope&&(r=e.scope)),"function"==typeof e&&r?e.bind(r):e},r.getCallbacks=function(n){return n=n||{},e.isFunction(n)&&(n={success:n}),{success:r.createScopedCallback(n.success||r.empty,n.scope),failure:r.createScopedCallback(n.failure||r.empty,n.scope)}};var n=function(e,r,n){this.name="tauError",this.message=e,this.description=r,this.data=n,this.stack=(new window.Error).stack};return n.prototype=new window.Error,r.Error=n,r});
define('tau/store/typesClass',["Underscore","tau/core/class"],function(i,e){return e.extend({init:function(){this._dictionary={}},registerType:function(e,n){n[e.name]=e,e.aliases=e.aliases||[],e.refs=e.refs||{},i.each(e.aliases,function(i){n[i]=n[i.toLowerCase()]=e})},register:function(i){var e=this,n=e._dictionary;this.registerType(i,n)},findByKeyword:function(i){return this._dictionary[i]||null},getDictionary:function(){return this._dictionary}})});
define('tau/store/types',["tau/store/typesClass"],function(e){return new e});
define('tau/core/save.interrupter',["tau/core/class","jQuery","Underscore"],function(r){var t=r.extend({init:function(){this.interrupters={}},interruptSave:function(r,t){var e=r.toLowerCase();this.interrupters[e]||(this.interrupters[e]=[]),this.interrupters[e].push(t)},getInterruptersByType:function(r){if(!r)return[];var t=this.interrupters[r.toLowerCase()];return t||[]},clear:function(){this.interrupters={}}});return t});
define('tau/store/store.interrupter',["tau/core/save.interrupter"],function(e){return new e});
define('tau/store/store',["Underscore","tau/core/class","tau/core/tau","tau/store/types","tau/store/typesClass","tau/core/bus","tau/core/global.bus","tau/store/store.interrupter","libs/jquery/jquery"],function(e,t,n,r,i,o,s,u,c){var a=new o({"queue.bus":!0,name:"store",globalBus:s.get()}),f={_processCommand:function(e,t,n,r){r=r||{};var i=this.types[t];i&&(t=i.name);var o={type:t,name:e,config:n,callbacks:r};return this.commands.push(o),this}};return t.extend({init:function(t){this.id=e.uniqueId("store_"),this._frozenCommandsQueue=[],this._frozenPromisesQueue=[],this._frozenPromises={},this.config=t,this.eventEmitter=this.config.eventEmitter||{fire:function(){},on:function(){},removeAllListeners:function(){}};var o=t.types||t.proxy.types;if(o){var s=new i;e(o).each(function(e){s.register(e)}),f.types=s.getDictionary()}else f.types=r.getDictionary();var u=e.functionsExt(t.proxy);e.each(u,function(e){var t=e.split("api ");if(2===t.length){var r=t[1];f[r]=function(){var e=this,t=n.extendArgs(arguments,r);return e._processCommand.apply(e,t)}}}),this._extendWithCommonAPI(this,this)},typeMetaInfo:function(e){return f.types[e]},getTypes:function(){return r},_extendWithCommonAPI:function(t,n){e.each(e.functionsExt(f),function(r){"_"!=r[0]&&(t[r]=function(){var i=e.extend({},f);return i.commands=t.commands||[],i[r].apply(i,arguments),i.done=function(e){n._done(i.commands,e)},i})})},_unfreeze:function(){if(e.isEmpty(this._frozenPromises)){var t=[].concat(this._frozenCommandsQueue);this._frozenCommandsQueue=[],this.config.proxy.execute(t)}},_freeze:function(){var t=this,r=e.uniqueId(),i={id:r,unfreeze:function(){this.unfreeze=n.empty,delete t._frozenPromises[r],t._unfreeze(),t._frozenPromisesQueue.shift();var e=t._frozenPromisesQueue[0];e&&e.resolve(t._freeze())}};return t._frozenPromises[r]=i,i},freeze:function(e){var t=c.Deferred();if(this._frozenPromisesQueue.push(t),e)return 1===this._frozenPromisesQueue.length&&t.resolve(this._freeze()),t;var n=this._freeze();return t.resolve(n),n},register:function(e,t){this.config.proxy.registerData(e,t)},registerWithEvents:function(e,t,n){var r=e.id,i=e.__type;e.hasOwnProperty("assignable")&&this.evictProperties(r,i,["$ref:assignable[id]"]);var o=this.config.proxy,s=o.registerData(e,t);o._notifyAboutNewsAndChanges(s,n||null)},removeWithEvents:function(t){t.type=e.toCamelCase(t.__type);var n=this.config.proxy;this.evictPersistedObject(t.id,t.type),n._populateAfterRemoveEvent(null,{tree:[],deletedData:[t]})},on:function(e,t){return this.config.proxy.on(e,t),this.eventEmitter.fire("afterStoreOn",e),this},unbind:function(e){return this.config.proxy.unbind(e),this.eventEmitter.fire("afterStoreUnbind",e),this},_processChain:function(t,r){r=n.getCallbacks(r);var i=[].concat(t);e.each(t,function(o){var s=n.getCallbacks(o.callbacks),u=function(n,u,c){a.fire(u,c),i[e.indexOf(i,o)]=c;var f=e.every(t,function(e){return e.executed===!0});if(s[n](c),f){var p=e.some(t,function(e){return e.failed===!0});r[p?"failure":"success"](i)}};o.callbacks={success:u.bind(this,"success","store.command.executed"),failure:u.bind(this,"failure","store.command.failed")}},this)},done:function(e){n.getCallbacks(e).success([])},getEvictedPropertiesByType:function(e){return"project"===e?["process"]:"task"===e?["project","team","userStory"]:["project","team"]},evictProperties:function(e,t,n){this.config.proxy.evictProperties(e,t,n)},evictData:function(){this.config.proxy.evictData()},evictPersistedObject:function(e,t){this.config.proxy.evictPersistedObject(e,t)},evictCollection:function(e){this.config.proxy.evictCollection(e)},isPropertyInitialized:function(e,t,n){return this.config.proxy.isPropertyInitialized(e,t,n)},_done:function(t,n){if(this._processChain(t,n),e.isEmpty(this._frozenPromises)){var r=e.reduce(t,function(e,t){var n="save"==t.name&&u.getInterruptersByType(t.type).length>0;return n?e.interrupted.push(t):e.nonInterrupted.push(t),e},{interrupted:[],nonInterrupted:[]});r.interrupted.length>0?this._callInterruptedCommands(r.interrupted,r.nonInterrupted):this._callNotInterruptedCommands(r.nonInterrupted)}else this._frozenCommandsQueue=[].concat(this._frozenCommandsQueue,t)},_callInterruptedCommands:function(t,n){var r=this,i=t.concat(n),o=e.chain(t).map(function(t){return e.map(u.getInterruptersByType(t.type),function(e){return{callback:e,deferred:c.Deferred(),command:t}})}).flatten().value(),s=e.map(o,function(e){return e.deferred});c.whenList(s).done(function(){r.config.proxy.execute(i)}).fail(function(t){e.each(i,function(e){e.failed=!0,e.error=t,r.config.proxy.invokeFailCallback(e)})}),e.each(o,function(e){e.callback(e.deferred,r._getChanges(e.command))})},_getChanges:function(t){var n=t.type,r=c.isArray(t.config.$set)?t.config.$set:[t.config.$set],i=t.config.id;return e.map(r,function(t){return{type:n,id:i||t.id,changes:e.chain(e.keys(t)).filter(function(e){return"id"!=e}).map(function(e){return{name:e,value:t[e]}}).value()}})},_callNotInterruptedCommands:function(e){this.config.proxy.execute(e)},getDef:function(){var t=e.toArray(arguments),n=c.Deferred();return t.push({success:function(e){n.resolve(e.data)},failure:n.reject}),this.get.apply(this,t).done(),n},saveDef:function(){var t=e.toArray(arguments),n=c.Deferred();return t.push({success:function(e){n.resolve(e)},failure:n.reject}),this.save.apply(this,t).done(),n}})});
define('tau/store/header',["Underscore","tau/core/tau"],function(_,tau){var tauExtension=_.extend(tau,{ref:function(e,t){var a={};return a[e]=t,a},list:function(e,t){var a=tau.ref(e,t);return a.list=!0,a},getNextPage:function(e,t,a){a=a||[];var r={holder:e,url:t,fields:a};return e.getNextPage=function(){return r},r},parseFieldsFromString:function(value){var self=this;value=value.replace(/([\w-]+)\[+/gi,'{"$1":['),value=value.replace(/(\])/gi,"]}"),value=value.substr(0,value.length-1),value=value.replace(/([\w-]+)(,|\])/gi,"'$1'$2");var fields=eval("(function () { return "+value+";})();"),toLowerCase=function(e){var t=e.split("-");if(t.length>1){var a=[];return _.each(t,function(e){a.push(toLowerCase(e))}),a.join("-")}return e.charAt(0).toLowerCase()+e.substr(1)},formatFields=function(e){var t=[];return _.each(e,function(e){if(self.header.isSimple(e))return void t.push(toLowerCase(e));var a={},r=self.header.getFieldName(e);a[toLowerCase(r)]=formatFields(e[r]),t.push(a)}),t};return formatFields(fields)},formatObject:function(e,t){var a=this,r={data:[],nextPages:[]};if(_.isUndefined(e)||_.isNull(e))return r.data=null,r;if("object"!=typeof e)return r.data=e,r;t=t?t:"Lower";var n=function(e){return e.charAt(0)["to"+t+"Case"]()+e.substr(1)};if(e&&(e.hasOwnProperty("Items")||e.hasOwnProperty("items"))){var u=e.next||e.Next;u&&r.nextPages.push(a.getNextPage(r.data,u,[])),e=e.Items||e.items}if(_.isArray(e))return _.each(e,function(e){var n=a.formatObject(e,t);r.nextPages=r.nextPages.concat(n.nextPages||[]),r.data.push(n.data)}),r;var i={};return _.each(_.keys(e),function(u){var s=n(u),o=s.split("-");if(o.length>1){var l=[];_.each(o,function(e){l.push(n(e))}),s=l.join("-")}var f=a.formatObject(e[u],t);r.nextPages=r.nextPages.concat(f.nextPages||[]),i[s]=f.data}),r.data=i,r},header:{getFieldName:function(e){return _.getFieldName(e)},isSimple:function(e){return _.isString(e)},isList:function(e){return e.list===!0}}});return tauExtension});
define('tau/core/comparer',["Underscore"],function(e){return{isEqualIncluded:function(r,n){if(r===n)return!0;var i=typeof r,t=typeof n;if(i!=t)return!1;if(r==n)return!0;if(!r&&n||r&&!n)return!1;if(e.isDate(r)&&e.isDate(n))return r.getTime()===n.getTime();if(e.isNaN(r)&&e.isNaN(n))return!1;if(e.isRegExp(r)&&e.isRegExp(n))return r.source===n.source&&r.global===n.global&&r.ignoreCase===n.ignoreCase&&r.multiline===n.multiline;if("object"!==i)return!1;if(e.isArray(r)&&e.isArray(n)&&r.length!==n.length)return!1;for(var u=e.keys(n),a=0;a<u.length;a++){var s=u[a];if(r.hasOwnProperty(s)&&!this.isEqualIncluded(r[s],n[s]))return!1}return!0},compare:function(r,n){var i=this,t={changes:{}};return r?(e.each(e(n).keys(),function(e){var u={value:n[e]};return r.hasOwnProperty(e)?void(i.isEqualIncluded(r[e],n[e])||(t.changes[e]=u)):void(t.changes[e]=u)}),t):t}}});
define('tau/store/db',["Underscore","tau/core/class","tau/store/header","tau/core/comparer"],function(e,t,r,i){return t.extend({init:function(e){this.__data={},this.__types=e.types||{}},_getTypeHolder:function(e,t){var r=e[t]||{};return e.hasOwnProperty(t)||(e[t]=r),r},_getTypeDictionary:function(e){return this._getTypeHolder(this.__data,e)},getPersistedNode:function(e,t){var r=this,i=r.__data[t];if(!i)return null;if(!e)return i;var n=i[e];return n?n:null},_getRefsArray:function(t){return t&&t.refs?(t.hasOwnProperty("refsArray")||(t.refsArray=e(t.refs).keys()),t.refsArray):[]},_registerReference:function(t,r,n,a,s){var o=this,d=n.refs[r];if(e.isUndefined(t)||null===t||null===t.id)return d.list?[]:null;t.__type=d.name;var f=o.__types[d.name],u=o._register(t,function(t){if(f.refs){var r=d.relationProperty;if(r){var n=f.refs[r];if(n){var u=t.data.hasOwnProperty(r),_=t.data[r],p=n.list,c=o._getReferenceObject(a.id,a.__type),y=function(e){var r={};r[d.relationProperty]=e,s.diffs.push({id:t.id,type:o._getOriginType(t),changes:r})};(!p||u)&&(p?e(_).any(function(e){return e.id===a.id})?c=_:(c=_.concat([c]),y(c)):i.isEqualIncluded(c,_)||y(c),t.data[r]=c)}}}});e.mergeArrayObjects(s,u,["diffs"]);var _={isReference:!0,type:d.name,list:!0};return d.list?e.extend(u.refs,_):u.refs[0]},_removeCascadeObjects:function(t,r){var i=this,n=i._getRegisterTemplate();return e.each(i._getRefsArray(t),function(a){var s=t.refs[a];s.cascade&&(s.list?e.each(r[a],function(e){i._extendRegister(n,i.remove(e.id,e.type))}):i._extendRegister(n,i.remove(r[a].id,r[a].type)))}),n},_getOriginType:function(e){var t=e.__type;return e.origin&&(t=e.origin.type),t},_removeRefFromObj:function(t,r,i,n,a){var s=this,o=t.data;if(o.hasOwnProperty(r)){var d=o[r];if(d){var f=n.refs[r];if(f.relationProperty){var u=s.__types[f.name];e.isArray(d)||(d=[d]);for(var _=0,p=d.length;p>_;_++){var c=d[_];if(!a||a===c.id){var y=s.getPersistedNode(c.id,c.type);if(!y)return;if(!y.data.hasOwnProperty(f.relationProperty))return;i.nodes.push(y);var g={};g[f.relationProperty]=null,u.refs&&u.refs[f.relationProperty]&&u.refs[f.relationProperty].list?(y.data[f.relationProperty]=e(y.data[f.relationProperty]).select(function(e){return e.id!=t.id}),g[f.relationProperty]=y.data[f.relationProperty]):y.data[f.relationProperty]=null,i.diffs.push({id:y.id,type:s._getOriginType(y),changes:g})}}}}}},_removeObjectFromRefs:function(t,r){var i=this,n=i._getRegisterTemplate();return e(i._getRefsArray(t)).each(function(e){i._removeRefFromObj(r,e,n,t)}),n},removeProperties:function(t,r,i){var n=this.getPersistedNode(t,r);if(n){var a=n.data;e.each(i,function(e){delete a[e]})}},removeFromList:function(t,i,n){var a=this._getRegisterTemplate(),s=this.getPersistedNode(t,i);if(!s)return a;var o=this.__types[i],d=r.header.getFieldName(n),f=s.data[d]||[];if(!f)return a;var u=[],_=n[d].id;e.each(f,function(e){e.id==_?this._removeRefFromObj(s,d,a,o,_):u.push({id:e.id})},this);var p={id:t,__type:i};p[d]=u;var c=this.register(p);return this._extendRegister(c,a),c},remove:function(t,r){var i=this,n=i._getRegisterTemplate(),a=i.getPersistedNode(t,r);if(!a)return n;var s=i.__types[r],o=a.data;return n.deletedData.push(e(o).defaults({id:t,type:r})),delete i.__data[r][t],i._extendRegister(n,i._removeCascadeObjects(s,o)),i._extendRegister(n,i._removeObjectFromRefs(s,a)),n},removeCollection:function(t){var r=this,i=r.__data[t];i&&e.forEach(e.keys(i),function(e){r.remove(e,t)})},isPropertyInitialized:function(e,t,r){var i=this.getPersistedNode(e,t);return i?i.data?i.data.hasOwnProperty(r):!1:!1},_getReferenceObject:function(e,t){return{isReference:!0,id:e,type:t}},_attachReference:function(e,t,r){var i=this._getReferenceObject(t,r);return e.push(i),i},_getParentTypeNames:function(e){var t=this;if(!e.__parents){e.__parents=[];for(var r=e.parent;r;){e.__parents.push(r);var i=t.__types[r];if(!i)break;r=i.parent}}return e.__parents},_registerParentNodes:function(t,r,i){for(var n=this,a=n.__types[t],s={data:i.data,id:r,origin:{id:r,type:t}},o=n._getParentTypeNames(a),d=0;d<o.length;d++){var f=o[d],u=n._getTypeDictionary(f);u[r]=u[r]||{},e.extend(u[r],s)}},_getRegisterTemplate:function(){return{refs:[],nodes:[],diffs:[],tree:{},deletedData:[]}},_registerObjectInTree:function(t,r){var i=this,n=i._getTypeHolder(t,r.type);if(!n.hasOwnProperty(r.id)){for(var a={},s=i.__types[r.type],o={id:r.id,changes:a},d=i._getParentTypeNames(s),f=0;f<d.length;f++){var u=i.__types[d[f]],_=i._getTypeHolder(t,u.name);_[r.id]=o}n[r.id]=o}e.extend(n[r.id].changes,r.changes)},_extendTree:function(t,r){var i=this;e.each(r,function(e){i._registerObjectInTree(t,e)})},_extendRegister:function(t,r){this._extendTree(t.tree,r.diffs),e.mergeArrayObjects(t,r,["diffs","deleteData"])},register:function(e,t,r){return this._register(e,t,r)},isTypeDetectionRequired:function(e){var t=this.__types[e];return t.isParentType},getTypeDetectionForNode:function(e,t){if(!this.isTypeDetectionRequired(t))return{required:!1};var r=this.getPersistedNode(e,t),i={required:!0};return r?r.origin?r.origin.id&&r.origin.type?{required:!1,type:r.origin.type}:i:i:i},_getTypeDefinitionForRegistration:function(e,t,r){var i=this,n=i.__types[t];if(n||(n=i.__types[t.toLowerCase()]),n.isParentType){var a=i.getTypeDetectionForNode(e,n.name);t=a.required?n.detectType(r):a.type,n=i.__types[t]}return n},_register:function(t,r,i){i=i||"__type";var n=this._getRegisterTemplate();if(e.isEmpty(t))return n;e.isArray(t)||(t=e.isArray(t.items)?t.items:[t]);for(var a=t[i],s=0,o=t.length;o>s;s++){var d=t[s];d.hasOwnProperty(i)||(d[i]=a),this._registerObject(d,n,r,i)}return n},_registerObject:function(t,r,n,a){var s=this,o=t[a],d=t.id;if(!d)throw new Error("property 'id' is required for data registration entity '"+o+"'");if(!o)throw new Error("property '__type' is required for data registration entity '"+d+"'");var f=s._getTypeDefinitionForRegistration(d,o,t),u={id:d,type:f.name,changes:{}},_=s._getTypeDictionary(f.name),p=_[d];p||(_[d]=p={__type:f.name,data:{id:d},id:d},s._registerParentNodes(f.name,d,p,_));var c=p.data,y=f.refs,g=s._getRegisterTemplate();for(var l in t)if("__type"!==l&&"id"!==l){var h=t[l],v=c[l];if(y.hasOwnProperty(l)&&(h=s._registerReference(h,l,f,p,g)),"customFields"===l){var m=function(t,r){return e.find(t,function(e){return e.name===r})};h=e.map(h,function(e){if("Entity"===e.type&&e.value&&"None"===e.value.kind&&""===e.value.name){var t=m(v,e.name);if(t)return t}return"CheckBox"===e.type&&null==e.value&&(e.value=!1),e});var P=e.filter(h,function(e){var t=m(v,e.name);return t?!i.isEqualIncluded(e,t):!0});u.changes[l]=P}p.data[l]=h,"customFields"===l||i.isEqualIncluded(v,h)||(u.changes[l]=h)}s._extendRegister(r,g),p.data.hasOwnProperty("__type")&&delete p.data.__type,r.nodes.push(p),s._extendTree(r.tree,[u]),r.diffs.push(u),s._attachReference(r.refs,d,f.name),n&&n(p)},get:function(t,r,i){var n=this;if(!t){var a={data:[],notInitializedFields:[],all:!0};return e.each(e(this._getTypeDictionary(r)).keys(),function(e){var t=n._get(e,r,i);a.data.push(t.data),n.mergeFields(a.notInitializedFields,t.notInitializedFields)}),a}return this._get(t,r,i)},_get:function(t,i,n){var a=this;n=n||{};var s=a.getPersistedNode(t,i),o=a.__types[i]||{},d=o.refs||{},f=n.$fields||n.fields||[],u={data:null,type:o,notInitializedFields:f};if(!s)return u;var _={},p=[],c=function(e,t,r){var i=a._get(e.id,e.type,{fields:t||[]});return i.notInitializedFields.length&&r.push(i.notInitializedFields),i.data},y=s.data;return e.each(f,function(t){var i=r.header.getFieldName(t),n=y[i];if(e.isUndefined(n))return void p.push(t);if(_[i]=n,d.hasOwnProperty(i)&&n){var s=[];if(e.isArray(n)){var o=n;n=[],e.each(o,function(e){n.push(c(e,t[i],s))})}else n=c(n,t[i],s);if(s.length>0){var f={};f[i]=[],e(s).each(function(e){a.mergeFields(f[i],e)}),f[i].length>0&&p.push(f)}}_[i]=n}),s.origin&&(i=s.origin.type),{type:o,data:e(_).defaults({id:t,__type:i}),notInitializedFields:p}},mergeFields:function(t,r,i){return e.mergeFields(t,r,i)},destroy:function(){delete this.__data,delete this.__types}})});
define('tau/store/repository',["Underscore","tau/core/class","tau/core/event","tau/core/tau","tau/store/header","tau/core/comparer","tau/store/types","tau/store/db"],function(e,t,i,n,a,s,o,r){var c=t.extend({init:function(e){if(!e.service)throw"rest service should be defined";this.__listenerObjects={objects:[],holders:[]},this.__subscriptions={},this.types=e.types||o.getDictionary(),this._initDb(e),this.service=e.service},_initDb:function(e){e=e||{},this.__allTypeLoadMarkers={},this.db=e.db||new r({types:this.types})},mergeCommands:function(t){var i={},a=this;return e.each(t,function(t){t=e.defaults(t,{name:"get",config:{},callbacks:{}}),t.callbacks=n.getCallbacks(t.callbacks),a._processFieldsConfig(t,"get"===t.name?null:"_getEmptyArray");var s=[t.type,t.config.id||"_",t.name,t.config.nested===!0?e.uniqueId():""].join("_");if(i.hasOwnProperty(s)){var o=i[s];a.db.mergeFields(o.config.fields,t.config.fields),o.commands.push(t)}else i[s]=t,t.commands=[]}),i},execute:function(t){var i=this;e.isArray(t)||(t=[t]);var n=i.mergeCommands(t);e.each(n,function(e){if(e.executed===!0)throw"command is already executed. the same command can not be used twice";e.failed===!0?i._invokeCommandCallback("failure",e.callbacks,e,e.error):i["api "+e.name](e)})},_registerListener:function(t,i,a){var s=t||{},o=i.eventName;s.hasOwnProperty(o)||(s[o]={});var r=e.uniqueId(o),c={id:r,config:i,callback:n.createScopedCallbackIfRequired(a)},l=s[o],d=i.listener;if(d){if(!d.__getRepositorySubscriberId){var f=e.uniqueId("repository_");d.__getRepositorySubscriberId=function(){return f},this.__listenerObjects[f]={listener:d,holders:[]}}var u={id:r,holder:l};this.__listenerObjects[d.__getRepositorySubscriberId()].holders.push(u)}return l[r]=c,c},unbind:function(t){if(t.__getRepositorySubscriberId){var i=this,n=t.__getRepositorySubscriberId(),a=i.__listenerObjects[n];if(a){var s=a.holders;s&&(e(s).each(function(e){var t=e.holder[e.id];t.callback=function(){},delete e.holder[e.id]}),delete t.__getRepositorySubscriberId,delete i.__listenerObjects[n])}}},_getListeners:function(t){var i=this,n=i._getSubscriptions(t.type);if(!n)return[];var a=n[t.eventName];if(!a)return[];var o=[];return e.each(e(a).values(),function(n){var a=n.config.filter,r=n.config.hasChanges||[];if(a){var c=i.db.getPersistedNode(t.obj.id,t.obj.type),l=t.obj;c&&c.data?l=c.data:t.nodeEvent.changes&&!e.isEmpty(t.nodeEvent.changes)&&(l=t.nodeEvent.changes);var d=s.compare(l,a);if(e(d.changes).keys().length>0)return}if(t.nodeEvent&&r.length>0){var f=t.nodeEvent.changes||{},u=e(r).all(function(t){var i=t.split("|"),n=!1;return n=i.length>1?0<e(f).chain().keys().intersection(i).size().value():f.hasOwnProperty(t)});if(!u)return}o.push(n)}),o},on:function(t,i){var n="_all_";t.type&&(n=e.has(this.types,t.type)?this.types[t.type].name:t.type);var a=this._getSubscriptions(n);return this._registerListener(a,t,i)},invokeFailCallback:function(e){this._invokeCommandCallback("failure",e.callbacks,e,e.error)},_getSubscriptions:function(e){return this.__subscriptions.hasOwnProperty(e)||(this.__subscriptions[e]={}),this.__subscriptions[e]},_autoAppend:function(t,i,n){e.each(i,function(i){e.any(t,function(e){return a.header.getFieldName(e)===a.header.getFieldName(i)})||t[n?n:"unshift"](i)})},registerData:function(e,t){return this.db.register(e,null,t)},_getEmptyArray:function(){return[]},_getDefaultFields:function(t){var i=this.types[t.type];return e.clone(i?i.fields||[]:[])},_processFieldsConfig:function(t,i){var n=this;i=i||"_getDefaultFields",t.config.fields&&0!==t.config.fields.length||(t.config.fields=n[i](t));var a=t.config.fields;n._autoAppend(a,["id"]);for(var s=a.length;s>0;s--){var o=a[s-1];if(!e.isSimple(o)){var r=e.getFieldName(o),c=t.type?n.types[t.type]:null,l=null,d=[];if(c&&c.refs&&c.refs[r]){var f=c.refs[r];f.list===!0&&(o.list=!0),d=f.fields,l=f.name}var u={type:l,config:{fields:o[r]||d}};o[r]=n._processFieldsConfig(u,i)}}var p=a.length;for(s=0;p>s;s++)for(var v=e.getFieldName(a[s]),m=s+1;p>m;m++)e.getFieldName(a[m])===v&&(e.isSimple(a[s])||e.mergeFields(a[s][v],a[m][v]),a.splice(m,1),p--,m--);return a},_invokeCommandCallback:function(t,i,n,a){var s=this;if(s._invokeCommandCallbackR(t,i,n,a),n.config.silent!==!0&&s.__subscriptions._all_&&!e.isEmpty(s.__subscriptions._all_)){var o=e.values(s.__subscriptions._all_[t]||[]),r={name:t,data:{cmd:n,data:a}};e(o).each(function(e){e.callback(r)})}},_invokeCommandCallbackR:function(t,i,n,a){var s=this;n.executed=!0,i[t]({command:n,data:a}),n.hasOwnProperty("commands")&&e.each(n.commands,function(e){e.executed=!0,e.failed=n.failed,s._invokeCommandCallbackR(t,e.callbacks,e,a)})},"api removeFromList":function(t){var i=this,n=t.callbacks;t.config.$set=t.config.$set||{},t.callbacks={success:function(a){var s=(e.extend(e.extend({},t.config.$set),a),i.db.removeFromList(t.config.id,t.type,t.config.$set));i._invokeCommandCallback("success",n,t,{}),i._notifyAboutNewsAndChanges(s,t)},failure:function(e){t.failed=!0,i._invokeCommandCallback("failure",n,t,e)}},i._populateBeforeSaveEvent(t),i._processFieldsConfig(t,"_getEmptyArray"),i.service.removeFromList(t)},"api remove":function(e){var t=this,i=e.callbacks;e.callbacks={success:function(){var n=t.evictPersistedObject(e.config.id,e.type);t._populateAfterRemoveEvent(e,n),t._invokeCommandCallback("success",i,e,e.callbacks)},failure:function(n){e.failed=!0,t._invokeCommandCallback("failure",i,e,n)}},t._populateBeforeRemoveEvent(e),t.service.remove(e)},evictPersistedObject:function(e,t){return this.db.remove(e,this.types[t].name)},evictProperties:function(e,t,i){this.db.removeProperties(e,this.types[t].name,i)},evictData:function(){this._initDb()},evictCollection:function(e){this.db.removeCollection(e),this.unmarkRecordSetAsCompleteLoaded(e)},isPropertyInitialized:function(e,t,i){return this.db.isPropertyInitialized(e,t,i)},getProperties:function(t){var i=this.db.__types[t];return i.simpleFields.concat(e.keys(i.refs))},"api save":function(t){var i=this,n=t.callbacks;t.config.$set=t.config.$set||{},t.callbacks={success:function(a){a.__type=t.type;var s={};if(e.isArray(t.config.$set)){s=[];for(var o=0;o<t.config.$set.length;o++){var r=e.extend(e.extend({__type:t.type},t.config.$set[o]),a[o]);s.push(r)}}else s=e.extend(e.extend({},t.config.$set),a);var c=i.db.register(s);i._notifyAboutNewsAndChanges(c,t),i._invokeCommandCallback("success",n,t,s)},failure:function(e){t.failed=!0,i._invokeCommandCallback("failure",n,t,e)}},i._populateBeforeSaveEvent(t),i._processFieldsConfig(t,"_getEmptyArray"),i.service.save(t)},_notifyAboutNewsAndChanges:function(t,i){var n=this;e.each(t.tree,function(t,a){e.each(t,function(e){n._populateEvent(i,"afterSave",e,{id:e.id,type:a})})})},_populateEvent:function(t,i,n,a){var s=this._getListeners({type:a.type,eventName:i,nodeEvent:n,obj:a});if(0!==s.length){var o=e.uniqueId("repositoryEvent"),r={id:o,name:i,data:{id:a.id,type:a.type,cmd:t,obj:a,changes:n.changes}};e.each(s,function(e){e.callback(r)})}},_populateBeforeRemoveEvent:function(e){this._populateEvent(e,"beforeRemove",{},{id:e.config.id,type:e.type})},_populateAfterRemoveEvent:function(t,i){e.each(i.deletedData,function(e){this._populateEvent(t,"afterRemove",{},e)},this),this._notifyAboutNewsAndChanges(i,t)},_populateBeforeSaveEvent:function(e){this._populateEvent(e,"beforeSave",{changes:e.config.$set||{}},{id:e.config.id,type:e.type})},markRecordSetAsCompleteLoaded:function(e){this.__allTypeLoadMarkers[e]=!0},unmarkRecordSetAsCompleteLoaded:function(e){this.__allTypeLoadMarkers[e]=!1},isTypeMarkedAsCompleteLoaded:function(e){return this.__allTypeLoadMarkers[e]===!0},_appendDiscriminator:function(t,i){var n=this;if(!t)throw new Error("Table name is not defined");t.isParentType&&e.indexOf(i,"id")>=0&&n._autoAppend(i,[t.discriminator],"push"),e.each(i,function(e){if(!a.header.isSimple(e)){var i=a.header.getFieldName(e),s=t.refs[i];s&&n._appendDiscriminator(n.types[s.name],e[i])}})},_processCommandForGet:function(t){var i=this,n=i.db.get(t.config.id,t.type,t.config),a=t.config.fields;if(0===n.notInitializedFields.length&&(!n.all||i.isTypeMarkedAsCompleteLoaded(t.type)))return t.config.fields=a,i._invokeCommandCallback("success",t.callbacks,t,n.data),{isInvoked:!0};var s=n.notInitializedFields;return n.all&&!i.isTypeMarkedAsCompleteLoaded(t.type)&&(s=e.clone(a)),{isInvoked:!1,fields:s}},_runReadCommand:function(t,i,n,a){var s=this;try{s._appendDiscriminator(s.types[t.type],n)}catch(o){return t.failed=!0,void t.callbacks.failure(null,o)}e.extend(t.config,{fields:n}),s._processFieldsConfig(t);var r=t.callbacks;t.callbacks={success:function(n){t.config.fields=i,e.defaults(n,{__type:t.type});var o=s.db.register(n),c=a(n,o);s._invokeCommandCallback("success",r,t,c),t.callbacks=r},failure:function(e){t.config.fields=i,t.failed=!0,s._invokeCommandCallback("failure",r,t,e),t.callbacks=r}},this.service[t.name](t)},"api refresh":function(t){var i=this,n=t.config.fields,a=function(e,a){return i._notifyAboutNewsAndChanges(a,t),i.db.get(t.config.id,t.type,{fields:n}).data};this._runReadCommand(t,n,e.clone(n),a)},"api turboGet":function(t){var i=this,n=t.config.fields||[];i._autoAppend(n,["id"]);var a=t.callbacks;t.callbacks={success:function(n){e.defaults(n,{__type:t.type}),i._invokeCommandCallback("success",a,t,n),t.callbacks=a},failure:function(e){t.failed=!0,i._invokeCommandCallback("failure",a,t,e),t.callbacks=a}},this.service[t.name](t)},"api find":function(t){var i=this,n=t.config.fields,a=function(a){var s=[];if(e.each(a,function(e){s.push(i.db.get(e.id,t.type,{fields:n}).data)}),a.hasOwnProperty("getNextPage")){s.isNextPageAvailable=function(){return!0};var o=e.clone(t);o.config=e.clone(o.config),o.config.$skip+=o.config.$limit,s.getNextPageCommand=function(){return o}}else s.isNextPageAvailable=function(){return!1};return s};this._runReadCommand(t,n,e.clone(n),a)},"api get":function(e){var t=this,i=e.config.fields,n=t._processCommandForGet(e);if(!n.isInvoked){var a=function(){return e.config.id||t.markRecordSetAsCompleteLoaded(e.type),t.db.get(e.config.id,e.type,{fields:i}).data};this._runReadCommand(e,i,n.fields,a)}}});return c});
define('tau/store/services/formatProperties',[],function(){return{customFields:{}}});
define('tau/store/services/service.arrayToJsonConverter',["Underscore","tau/store/header","tau/store/services/formatProperties"],function(e,t,a){return{convertArray:function(a,r){var n=this,s=[],i=[];return r.next&&i.push(t.getNextPage(s,r.next,a.header)),r=r.items?r.items:r,e.each(r,function(e){var t=n.convert(a,e);s.push(t.data),i=i.concat(t.nextPages)}),{data:s,nextPages:i}},convert:function(r,n){for(var s={},i=this,o=[],h=0,c=r.header.length;c>h;h++){var d=n[h];e.isUndefined(d)&&(d=null);var u=r.header[h];if(t.header.isSimple(u))a.hasOwnProperty(u)&&(d=t.formatObject(d).data),s[u]=d;else{var l=t.header.getFieldName(u),v=u.list===!0;if(e.isNull(d)||!d.hasOwnProperty("items")&&!d.hasOwnProperty("Items")||(v=!0),!e.isEmpty(d)||v){if(!e.isNull(d)){var f={header:u[l]},P=d;if((d.hasOwnProperty("items")||d.hasOwnProperty("Items"))&&(d=d.items||d.Items),v){var m=[];e.each(d,function(e){var t=i.convert(f,e);o=o.concat(t.nextPages),m.push(t.data)}),d=m,P.next&&o.push(t.getNextPage(m,P.next,f.header))}else{var p=i.convert(f,d);o=o.concat(p.nextPages),d=p.data}}e.isNull(d)&&v&&(d=[]),s.hasOwnProperty(l)?e.extend(s[l],d):s[l]=d}else s[l]=null}}return{data:s,nextPages:o}}}});
define('tau/store/services/service.rest',["Underscore","jQuery","tau/core/class","tau/store/types","tau/store/services/service.arrayToJsonConverter","tau/store/header","tau/core/tau","libs/json2"],function(e,r,t,n,i,a,o){var s=t.extend({init:function(t){t=t||{},e.defaults(t,{api:r,types:n.getDictionary()}),this.config=t},removeFromList:function(e){var r=this,t=a.header.getFieldName(e.config.$set),n={url:r.getUrl(e)+"/"+t+"/"+e.config.$set[t].id,contentType:"application/json; charset=utf-8",type:"POST",processData:!1,dataType:"json",beforeSend:function(e){e.setRequestHeader("X-HTTP-Method-Override","DELETE")}},i=this.getErrorCallback(e);r.config.api.ajax(n).success(function(){e.callbacks.success({id:e.config.id})}).error(i)},remove:function(e){var r=this,t={Id:e.config.id},n={url:r.getUrl(e),contentType:"application/json; charset=utf-8",type:"POST",processData:!1,data:JSON.stringify(t),dataType:"json",beforeSend:function(e){e.setRequestHeader("X-HTTP-Method-Override","DELETE")}},i=this.getErrorCallback(e);r.config.api.ajax(n).success(function(){e.callbacks.success({id:e.config.id})}).error(i)},save:function(r){var t={$set:r.config.$set||{}};return"prioritizer"===r.type?(e.extend(t,{$include:this._formIncludes(r.config.fields)}),void this.executeCrudCommandViaPageService(r,t,"save")):void this.executeCrudCommand(r,t,"save")},getErrorCallback:function(e){var t=this.config.appPath;return function(n){if(401===n.status)return void(document.location.href=t+"/login.aspx?ReturnUrl="+document.location.href);try{n.response=r.parseJSON(n.responseText||null)}catch(i){}finally{e.callbacks.failure(n)}}},executeCrudCommandViaPageService:function(t,n,i){var o=this,s={id:t.config.id,type:t.type};e.extend(s,n);var c=JSON.stringify({json:JSON.stringify(s)}),u={url:[o.config.appPath,"PageServices/RESTCrud.asmx",i].join("/"),contentType:"application/json; charset=utf-8",type:"POST",data:c,dataType:"json"},d=this.getErrorCallback(t);o.config.api.ajax(u).success(function(n){var i={id:n.d.id};if(n.d.isError===!0)return void t.callbacks.failure({Message:n.d.errorMessage,CRUD:!0});if(n.d.jsonToReturn&&n.d.jsonToReturn.length>0){var o=r.parseJSON(n.d.jsonToReturn);o=a.formatObject(o),e.extend(i,o.data)}t.callbacks.success(i)}).error(d)},executeCrudCommand:function(r,t){var n=this;e.defaults(r.config,{format:"json"});var i=t.$set,a={id:r.config.id};e.isArray(i)?a=i:e.extend(a,i);var o=n.getUrl(r,"resultInclude"),s=r.config.format,c=n._getFields(r),u=n._getApiConfig(o,s,"convert",c);e.extend(u,{url:o,contentType:"application/json; charset=utf-8",type:"POST",processData:!1,data:JSON.stringify(a),dataType:"json"}),n._executeApiCall(r,"json",u)},find:function(e){this.get(e)},refresh:function(e){this.get(e)},getCompleteCallback:function(e){var r=this;return function(t){if("implementationHistory"===e.type&&(t.id=e.config.hasOwnProperty("acid")?e.config.acid:e.config.hasOwnProperty("ids")?t.acid:e.config.id),"context"===e.type&&(t.id=e.config.hasOwnProperty("id")?e.config.id:t.acid),e.config.nested===!0){var n=r._getNestedObject(e),i=a.header.getFieldName(n),o={id:e.config.id};o[i]=t,t=o}e.callbacks.success(t)}},_getArrayConverter:function(e,r){var t=this;return function(n){var a=t.config.api.parseJSON(n);return i[e]({header:r},a)}},_getJsonConverter:function(){var e=this;return function(r){var t=e.config.api.parseJSON(r);return a.formatObject(t)}},_getApiConfig:function(e,r,t,n){var i=this;return{url:e,accepts:{array:"application/x-array"},dataType:r,converters:{"text array":i._getArrayConverter(t,n),"text json":i._getJsonConverter()}}},_getNextPageFields:function(e){var r=e.fields,t=o.getQueryValueFromUrl(e.url,"include");return t&&t.length>0&&(r=a.parseFieldsFromString(t)),r},_executeApiCall:function(r,t,n){var i=this,a=i.getErrorCallback(r),o=i.getCompleteCallback(r),s=null,c=[],u=function(){var e=0===c.length;return e&&o(s),e},d=function(e){for(var r=0,t=e.nextPages.length;t>r;r++){var n=e.nextPages[r];f(n)}},f=function(r){var n=i._getNextPageFields(r),o=i._getApiConfig(r.url,t,"convertArray",n);i.config.api.ajax(o).success(function(t){c=c.concat(t.nextPages||[]);var n=r.holder;e.each(t.data,function(e){n.push(e)}),t.data.getNextPage&&(t.data.getNextPage().holder=r.holder),d(t);var i=e.indexOf(c,r);c.splice(i,1),u()}).error(a)},l=function(e){return s=e.data,"find"===r.name?void o(s):(c=c.concat(e.nextPages||[]),u(),void d(e))};i.config.api.ajax(n).success(l).error(a)},get:function(r){var t=this;e.defaults(r.config,{format:"array"});var n=r.config.nested!==!0&&r.config.id?"convert":"convertArray",i=t.getUrl(r),a=r.config.format,o=t._getFields(r),s=t._getApiConfig(i,a,n,o);t._executeApiCall(r,a,s)},turboGet:function(e){this.get(e)},_formIncludes:function(r){var t=[],n=this;return e.each(r,function(e){if(a.header.isSimple(e)){var r=e;return 0===e.indexOf("$ref")&&(r=e.replace("$ref:","")),void t.push(r)}var i=a.header.getFieldName(e);t.push(i+n._formIncludes(e[i]))}),["[",t.join(","),"]"].join("")},_getQueryOperators:function(){var r=function(r,t){var n=this,i=[];return e.isArray(t)||(t=[t]),e.each(t,function(e){i.push("("+r+" "+n.name+" "+JSON.stringify(e)+")")}),i},t=function(e){return["("+e+" "+this.name+")"]},n=function(r,t){var n=this,i=[];e.isArray(t)||(t=[t]);var a=[];return e(t).each(function(e){a.push(JSON.stringify(e))}),i.push("("+r+" "+n.name+" ("+a.join(",")+"))"),i};return{$in:{name:"in",render:n},$ne:{name:"ne",render:r},$gt:{name:"gt",render:r},$gte:{name:"gte",render:r},$lt:{name:"lt",render:r},$lte:{name:"lte",render:r},$contains:{name:"contains",render:r},$eq:{name:"eq",render:r},$isNull:{name:"is null",render:t},$isNotNull:{name:"is not null",render:t}}},_isQueryValueWithOperator:function(r,t){var n=e(r).keys();if(0===n.length)return!1;var i=t||this._getQueryOperators();return i.hasOwnProperty(n[0])},_formWhere:function(r,t){var n=[],i=this;t=t||"";var a=i._getQueryOperators();return e.each(e(r).keys(),function(o){var s=r[o],c=t+o;if(e.isString(s)||e.isNumber(s)||e.isDate(s)||e.isArray(s)||e.isBoolean(s)||e.isNull(s)){var u=null===s?"$isNull":"$eq";return void(n=n.concat(a[u].render(c,s)))}return i._isQueryValueWithOperator(s,a)?void e.each(e(s).keys(),function(e){n=n.concat(a[e].render(c,s[e]))}):void n.push(i._formWhere(s,c+"."))}),n},_getWhere:function(r){var t=this._formWhere(r);return 0===t.length?"":"&where="+encodeURIComponent(e.flatten(t).join(" and "))},_getNestedObject:function(r){var t=null;return e.each(r.config.fields,function(e){a.header.isSimple(e)||(t=e)}),t},_getFields:function(e){if(e.config.nested!==!0)return e.config.fields;var r=this._getNestedObject(e),t=a.header.getFieldName(r);return r[t]},_getOrderBy:function(e){return e.config.$orderBy&&""!==e.config.$orderBy?"&orderBy="+e.config.$orderBy:""},_getOrderByDesc:function(e){return e.config.$orderByDesc&&""!==e.config.$orderByDesc?"&orderByDesc="+e.config.$orderByDesc:""},_encodeRestParams:function(t){return e.isObject(t)&&(t=e.map(t,function(r,t){return{name:t,value:e.isArray(r)?r.join(","):r}})),decodeURIComponent(r.param(t))},getUrl:function(r,t){var n=this,i={$skip:0,$limit:999,$query:{}},s=r.config;if(e.defaults(s,i),"context"===r.type){if(s.format="json",s.hasOwnProperty("acid"))return[n.config.path,"context.asmx","?acid="+s.acid].join("/");var c={};return c.ids=s.id||s.ids,c.ids||(c.projectIds=s.projectIds||s.projectId||"*",c.teamIds=s.teamIds||s.teamId||"*"),e.each(c,function(e,r){e||delete c[r]}),[n.config.path,"context.asmx?"+n._encodeRestParams(c)].join("/")}if("implementationHistory"===r.type)return s.format="json",[n.config.appPath,"TpReports/ImplementationHistory.ashx?id="+s.id+"&"+(new Date).valueOf()].join("/");var u=n.config.types[r.type]||{resource:r.type},d=s.fields,f=[n.config.path,u.resource+".asmx",s.id].join("/");if(s.nested===!0){var l=n._getNestedObject(r),g=a.header.getFieldName(l);d=l[g],f=[f,g].join("/")}if(r.name&&r.name.indexOf("remove")>=0)return f;e.isArray(s.$set)&&(f+="bulk");var p="find"===r.name||"turboGet"===r.name||!e.isEmpty(s.$query);return f=[f,"?skip=",s.$skip,"&take=",s.$limit,"&",t?t:"include","=",n._formIncludes(d),p?n._getWhere(s.$query):"",n._getOrderBy(r),n._getOrderByDesc(r),o.getTokenParameterFromQueryString("&")].join("")}});return s});
define('tau/rules/auto-include-beforeSave',["Underscore"],function(e){return{"auto include beforeSave":function(i,d){for(var r=this,t=i.data.obj,n=0;n<d.fields.length;n++){var o=d.fields[n];(r.store.isPropertyInitialized(t.id,t.type,e.getFieldName(o))||d.force)&&e.mergeFields(i.data.cmd.config.fields,[o])}}}});
define('tau/rules/core',["Underscore","tau/core/class","tau/rules/auto-include-beforeSave"],function(e,n,t){return n.extend({init:function(n){var r=this;r.store=n.store||{},n.rulesImpl=n.rulesImpl||{},e.extend(r,t),e.extend(r,{name:"rules engine"}),e(n.rulesImpl).each(function(n){e.extend(r,n)}),r.register(n.rules||[])},register:function(n){var r=this;e.isArray(n)||(n=[n]),e(n).each(function(n){if(e.defaults(n,{name:e(t).keys()[0],fields:[],changes:[]}),!n.hasOwnProperty("type"))throw"type should be configured for rule";0!==n.fields.length&&e.each(n.changes,function(e){var t=function(e){r[n.name](e,n)},s=n.name.split(" ");r.store.on({eventName:s[s.length-1],type:n.type,listener:r,hasChanges:[e]},t)})})},registerRule:function(n){var t=this;if(e.defaults(n,{fields:[],changes:[]}),!n.hasOwnProperty("name"))throw'"name" field should be configured for rule';if(!n.hasOwnProperty("type"))throw'"type" field should be configured for rule';if(!t.hasOwnProperty(n.name))throw"unknown rule name ["+n.name+"]";t[n.name].call(t,n)},destroy:function(){var e=this.store;delete this.store,e.unbind(this)}})});
define('tau/rules/rule.auto-include-before-save',["Underscore"],function(e){var i=function(i,n){for(var t=this,a=i.data.obj,r=0;r<n.fields.length;r++){var o=n.fields[r];(a.id&&t.store.isPropertyInitialized(a.id,a.type,e.getFieldName(o))||n.force)&&e.mergeFields(i.data.cmd.config.fields,[o])}};return{"auto-include-before-save":function(n){var t=this;0!==n.fields.length&&e.each(n.changes,function(e){var a=[e],r=function(e){i.call(t,e,n)};t.store.on({eventName:"beforeSave",type:n.type,listener:t,hasChanges:a},r)})}}});
define('tau/rules/rule.auto-action-after-save',["Underscore"],function(){var e=function(e,n){var t=this,a=e.data,r={store:t.store,data:a};n.action(r)};return{"auto-action-after-save":function(n){var t=this,a=function(a){e.call(t,a,n)},r={eventName:"afterSave",type:n.type,listener:t};n.hasOwnProperty("changes")&&n.changes.length&&(r.hasChanges=[n.changes.join("|")]),t.store.on(r,a)}}});
define('tau/rules/rule.auto-include-before-remove',["Underscore"],function(e){var n=function(n,r){for(var t=(n.data.obj,0);t<r.fields.length;t++){var i=r.fields[t];e.mergeFields(n.data.cmd.config.fields,[i])}};return{"auto-include-before-remove":function(e){var r=this;if(0!==e.fields.length){var t=function(t){n.call(r,t,e)};r.store.on({eventName:"beforeRemove",type:e.type,listener:r},t)}}}});
define('tau/store/types.targetprocess.generated',[],function(){return[{name:"context"},{name:"process",parent:null,resource:"processes",aliases:["Process","processes","Processes"],fields:["id","name"],simpleFields:["id","name","isDefault","description","entityStates-count","projects-count","practices-count","customFields-count","processAdmins-count"],refs:{entityStates:{list:!0,name:"entityState",multiplicity:"one",relationProperty:"process"},projects:{list:!0,name:"project",multiplicity:"one",relationProperty:"process"},practices:{list:!0,name:"practice",multiplicity:"",relationProperty:""},customFields:{list:!0,name:"customField",multiplicity:"one",relationProperty:"process"},processAdmins:{list:!0,name:"user",multiplicity:"",relationProperty:""}}},{name:"tag",parent:null,resource:"tags",aliases:["Tag","tags","Tags"],fields:["id","name"],simpleFields:["id","name","generals-count"],refs:{generals:{list:!0,name:"general",multiplicity:"",relationProperty:""}}},{name:"milestone",parent:null,resource:"milestones",aliases:["Milestone","milestones","Milestones"],fields:["id","name"],simpleFields:["id","name","description","date","cssClass","projects-count"],refs:{owner:{name:"user",multiplicity:"",relationProperty:"milestones"},projects:{list:!0,name:"project",multiplicity:"",relationProperty:""}}},{name:"practice",parent:null,resource:"practices",aliases:["Practice","practices","Practices"],fields:["id","name"],simpleFields:["id","name","description","processes-count"],refs:{processes:{list:!0,name:"process",multiplicity:"",relationProperty:""}}},{name:"entityType",parent:null,resource:"entityTypes",aliases:["EntityType","entityTypes","EntityTypes"],fields:["id","name"],simpleFields:["id","name","isExtendable","isSearchable","entityStates-count"],refs:{entityStates:{list:!0,name:"entityState",multiplicity:"one",relationProperty:"entityType"}}},{name:"priority",parent:null,resource:"priorities",aliases:["Priority","priorities","Priorities"],fields:["id","name"],simpleFields:["id","name","importance","isDefault"],refs:{entityType:{name:"entityType",multiplicity:"",relationProperty:"priorities"}}},{name:"severity",parent:null,resource:"severities",aliases:["Severity","severities","Severities"],fields:["id","name"],simpleFields:["id","name","importance","isDefault"],refs:{}},{name:"entityState",parent:null,resource:"entityStates",aliases:["EntityState","entityStates","EntityStates"],fields:["id","name"],simpleFields:["id","name","isInitial","isFinal","isPlanned","isCommentRequired","numericPriority","nextStates-count","previousStates-count"],refs:{role:{name:"role",multiplicity:"",relationProperty:"entityStates"},nextStates:{list:!0,name:"entityState",multiplicity:"",relationProperty:""},previousStates:{list:!0,name:"entityState",multiplicity:"",relationProperty:""},entityType:{name:"entityType",multiplicity:"",relationProperty:"entityStates"},process:{name:"process",multiplicity:"",relationProperty:"entityStates"}}},{name:"general",parent:null,resource:"generals",aliases:["General","generals","Generals"],fields:["id","name"],simpleFields:["id","name","customField1","customField2","customField3","customField4","customField5","customField6","customField7","customField8","customField9","customField10","customField11","customField12","customField13","customField14","customField15","customField16","customField17","customField18","customField19","customField20","customField21","customField22","customField23","customField24","customField25","customField26","customField27","customField28","customField29","customField30","customField31","customField32","customField33","customField34","customField35","customField36","customField37","customField38","customField39","customField40","customField41","customField42","customField43","customField44","customField45","customField46","customField47","customField48","customField49","customField50","customField51","customField52","customField53","customField54","customField55","customField56","customField57","customField58","customField59","customField60","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","isNow","isNext","isPrevious","comments-count","messages-count","tagObjects-count","masterRelations-count","slaveRelations-count","attachments-count"],refs:{entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},lastCommentedUser:{name:"generalUser",multiplicity:"",relationProperty:"lastCommentedGenerals"},project:{name:"project",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},tagObjects:{list:!0,name:"tag",multiplicity:"",relationProperty:""},masterRelations:{list:!0,name:"relation",multiplicity:"one",relationProperty:"slave"},slaveRelations:{list:!0,name:"relation",multiplicity:"one",relationProperty:"master"},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"assignable",parent:"general",resource:"assignables",aliases:["Assignable","assignables","Assignables"],fields:["id","name"],simpleFields:["id","effort","effortCompleted","effortToDo","progress","timeSpent","timeRemain","plannedStartDate","plannedEndDate","units","leadTime","cycleTime","forecastEndDate","name","customField1","customField2","customField3","customField4","customField5","customField6","customField7","customField8","customField9","customField10","customField11","customField12","customField13","customField14","customField15","customField16","customField17","customField18","customField19","customField20","customField21","customField22","customField23","customField24","customField25","customField26","customField27","customField28","customField29","customField30","customField31","customField32","customField33","customField34","customField35","customField36","customField37","customField38","customField39","customField40","customField41","customField42","customField43","customField44","customField45","customField46","customField47","customField48","customField49","customField50","customField51","customField52","customField53","customField54","customField55","customField56","customField57","customField58","customField59","customField60","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","isNow","isNext","isPrevious","assignedUser-count","assignments-count","impediments-count","times-count","roleEfforts-count","revisions-count","comments-count","messages-count","tagObjects-count","masterRelations-count","slaveRelations-count","attachments-count"],refs:{assignedUser:{list:!0,name:"generalUser",multiplicity:"",relationProperty:""},release:{name:"release",multiplicity:"",relationProperty:"assignables"},iteration:{name:"iteration",multiplicity:"",relationProperty:"assignables"},teamIteration:{name:"teamIteration",multiplicity:"",relationProperty:"assignables"},team:{name:"team",multiplicity:"",relationProperty:"assignables"},priority:{name:"priority",multiplicity:"",relationProperty:"assignables"},entityState:{name:"entityState",multiplicity:"",relationProperty:"assignables"},assignments:{list:!0,name:"assignment",multiplicity:"one",relationProperty:"assignable"},impediments:{list:!0,name:"impediment",multiplicity:"zeroOrOne",relationProperty:"assignable"},times:{list:!0,name:"time",multiplicity:"zeroOrOne",relationProperty:"assignable"},roleEfforts:{list:!0,name:"roleEffort",multiplicity:"one",relationProperty:"assignable"},revisions:{list:!0,name:"revision",multiplicity:"",relationProperty:""},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},lastCommentedUser:{name:"generalUser",multiplicity:"",relationProperty:"lastCommentedGenerals"},project:{name:"project",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},tagObjects:{list:!0,name:"tag",multiplicity:"",relationProperty:""},masterRelations:{list:!0,name:"relation",multiplicity:"one",relationProperty:"slave"},slaveRelations:{list:!0,name:"relation",multiplicity:"one",relationProperty:"master"},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"generalUser",parent:null,resource:"generalUsers",aliases:["GeneralUser","generalUsers","GeneralUsers"],fields:["id","firstName","lastName"],simpleFields:["id","firstName","lastName","email","login","createDate","modifyDate","deleteDate","isActive","isAdministrator","kind","password","avatarUri","assignables-count","comments-count","requests-count"],refs:{assignables:{list:!0,name:"assignable",multiplicity:"",relationProperty:""},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"owner"},requests:{list:!0,name:"request",multiplicity:"",relationProperty:""}}},{name:"user",parent:"generalUser",resource:"users",aliases:["User","users","Users"],fields:["id","activeDirectoryName","firstName","lastName"],simpleFields:["id","lastLoginDate","weeklyAvailableHours","currentAllocation","currentAvailableHours","availableFrom","availableFutureAllocation","availableFutureHours","isObserver","skills","activeDirectoryName","firstName","lastName","email","login","createDate","modifyDate","deleteDate","isActive","isAdministrator","kind","password","avatarUri","times-count","impediments-count","customActivities-count","revisions-count","teamMembers-count","projectMembers-count","milestones-count","adminProcesses-count","assignables-count","comments-count","requests-count"],refs:{role:{name:"role",multiplicity:"",relationProperty:""},times:{list:!0,name:"time",multiplicity:"one",relationProperty:"user"},impediments:{list:!0,name:"impediment",multiplicity:"zeroOrOne",relationProperty:"responsible"},customActivities:{list:!0,name:"customActivity",multiplicity:"one",relationProperty:"user"},revisions:{list:!0,name:"revision",multiplicity:"one",relationProperty:"author"},teamMembers:{list:!0,name:"teamMember",multiplicity:"one",relationProperty:"user"},projectMembers:{list:!0,name:"projectMember",multiplicity:"one",relationProperty:"user"},milestones:{list:!0,name:"milestone",multiplicity:"one",relationProperty:"owner"},adminProcesses:{list:!0,name:"process",multiplicity:"",relationProperty:""},assignables:{list:!0,name:"assignable",multiplicity:"",relationProperty:""},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"owner"},requests:{list:!0,name:"request",multiplicity:"",relationProperty:""}}},{name:"requester",parent:"generalUser",resource:"requesters",aliases:["Requester","requesters","Requesters"],fields:["id","firstName","lastName"],simpleFields:["id","phone","notes","sourceType","firstName","lastName","email","login","createDate","modifyDate","deleteDate","isActive","isAdministrator","kind","password","avatarUri","assignables-count","comments-count","requests-count"],refs:{company:{name:"company",multiplicity:"",relationProperty:""},assignables:{list:!0,name:"assignable",multiplicity:"",relationProperty:""},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"owner"},requests:{list:!0,name:"request",multiplicity:"",relationProperty:""}}},{name:"project",parent:"general",resource:"projects",aliases:["Project","projects","Projects"],fields:["id","name"],simpleFields:["id","isActive","isProduct","abbreviation","mailReplyAddress","color","progress","forecastEndDate","name","customField1","customField2","customField3","customField4","customField5","customField6","customField7","customField8","customField9","customField10","customField11","customField12","customField13","customField14","customField15","customField16","customField17","customField18","customField19","customField20","customField21","customField22","customField23","customField24","customField25","customField26","customField27","customField28","customField29","customField30","customField31","customField32","customField33","customField34","customField35","customField36","customField37","customField38","customField39","customField40","customField41","customField42","customField43","customField44","customField45","customField46","customField47","customField48","customField49","customField50","customField51","customField52","customField53","customField54","customField55","customField56","customField57","customField58","customField59","customField60","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","isNow","isNext","isPrevious","generals-count","features-count","releases-count","iterations-count","userStories-count","tasks-count","bugs-count","testCases-count","testPlans-count","builds-count","times-count","revisions-count","customActivities-count","projectMembers-count","teamProjects-count","requests-count","testPlanRuns-count","milestones-count","comments-count","messages-count","tagObjects-count","masterRelations-count","slaveRelations-count","attachments-count"],refs:{generals:{list:!0,name:"general",multiplicity:"one",relationProperty:"project"},program:{name:"program",multiplicity:"",relationProperty:"projects"},process:{name:"process",multiplicity:"",relationProperty:"projects"},features:{list:!0,name:"feature",multiplicity:"one",relationProperty:"project"},releases:{list:!0,name:"release",multiplicity:"one",relationProperty:"project"},iterations:{list:!0,name:"iteration",multiplicity:"one",relationProperty:"project"},userStories:{list:!0,name:"userStory",multiplicity:"one",relationProperty:"project"},tasks:{list:!0,name:"task",multiplicity:"one",relationProperty:"project"},bugs:{list:!0,name:"bug",multiplicity:"one",relationProperty:"project"},testCases:{list:!0,name:"testCase",multiplicity:"one",relationProperty:"project"},testPlans:{list:!0,name:"testPlan",multiplicity:"one",relationProperty:"project"},builds:{list:!0,name:"build",multiplicity:"one",relationProperty:"project"},times:{list:!0,name:"time",multiplicity:"one",relationProperty:"project"},revisions:{list:!0,name:"revision",multiplicity:"one",relationProperty:"project"},customActivities:{list:!0,name:"customActivity",multiplicity:"one",relationProperty:"project"},company:{name:"company",multiplicity:"",relationProperty:"projects"},projectMembers:{list:!0,name:"projectMember",multiplicity:"one",relationProperty:"project"},teamProjects:{list:!0,name:"teamProject",multiplicity:"one",relationProperty:"project"},requests:{list:!0,name:"request",multiplicity:"one",relationProperty:"project"},testPlanRuns:{list:!0,name:"testPlanRun",multiplicity:"one",relationProperty:"project"},milestones:{list:!0,name:"milestone",multiplicity:"",relationProperty:""},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},lastCommentedUser:{name:"generalUser",multiplicity:"",relationProperty:"lastCommentedGenerals"},project:{name:"project",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},tagObjects:{list:!0,name:"tag",multiplicity:"",relationProperty:""},masterRelations:{list:!0,name:"relation",multiplicity:"one",relationProperty:"slave"},slaveRelations:{list:!0,name:"relation",multiplicity:"one",relationProperty:"master"},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"program",parent:"general",resource:"programs",aliases:["Program","programs","Programs"],fields:["id","name"],simpleFields:["id","name","customField1","customField2","customField3","customField4","customField5","customField6","customField7","customField8","customField9","customField10","customField11","customField12","customField13","customField14","customField15","customField16","customField17","customField18","customField19","customField20","customField21","customField22","customField23","customField24","customField25","customField26","customField27","customField28","customField29","customField30","customField31","customField32","customField33","customField34","customField35","customField36","customField37","customField38","customField39","customField40","customField41","customField42","customField43","customField44","customField45","customField46","customField47","customField48","customField49","customField50","customField51","customField52","customField53","customField54","customField55","customField56","customField57","customField58","customField59","customField60","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","isNow","isNext","isPrevious","projects-count","comments-count","messages-count","tagObjects-count","masterRelations-count","slaveRelations-count","attachments-count"],refs:{projects:{list:!0,name:"project",multiplicity:"zeroOrOne",relationProperty:"program"},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},lastCommentedUser:{name:"generalUser",multiplicity:"",relationProperty:"lastCommentedGenerals"},project:{name:"project",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},tagObjects:{list:!0,name:"tag",multiplicity:"",relationProperty:""},masterRelations:{list:!0,name:"relation",multiplicity:"one",relationProperty:"slave"},slaveRelations:{list:!0,name:"relation",multiplicity:"one",relationProperty:"master"},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"release",parent:"general",resource:"releases",aliases:["Release","releases","Releases"],fields:["id","name"],simpleFields:["id","isCurrent","progress","units","forecastEndDate","name","customField1","customField2","customField3","customField4","customField5","customField6","customField7","customField8","customField9","customField10","customField11","customField12","customField13","customField14","customField15","customField16","customField17","customField18","customField19","customField20","customField21","customField22","customField23","customField24","customField25","customField26","customField27","customField28","customField29","customField30","customField31","customField32","customField33","customField34","customField35","customField36","customField37","customField38","customField39","customField40","customField41","customField42","customField43","customField44","customField45","customField46","customField47","customField48","customField49","customField50","customField51","customField52","customField53","customField54","customField55","customField56","customField57","customField58","customField59","customField60","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","isNow","isNext","isPrevious","iterations-count","assignables-count","features-count","userStories-count","tasks-count","bugs-count","testPlanRuns-count","requests-count","builds-count","testPlans-count","comments-count","messages-count","tagObjects-count","masterRelations-count","slaveRelations-count","attachments-count"],refs:{project:{name:"project",multiplicity:"",relationProperty:"releases"},iterations:{list:!0,name:"iteration",multiplicity:"one",relationProperty:"release"},assignables:{list:!0,name:"assignable",multiplicity:"zeroOrOne",relationProperty:"release"},features:{list:!0,name:"feature",multiplicity:"zeroOrOne",relationProperty:"release"},userStories:{list:!0,name:"userStory",multiplicity:"zeroOrOne",relationProperty:"release"},tasks:{list:!0,name:"task",multiplicity:"zeroOrOne",relationProperty:"release"},bugs:{list:!0,name:"bug",multiplicity:"zeroOrOne",relationProperty:"release"},testPlanRuns:{list:!0,name:"testPlanRun",multiplicity:"zeroOrOne",relationProperty:"release"},requests:{list:!0,name:"request",multiplicity:"zeroOrOne",relationProperty:"release"},builds:{list:!0,name:"build",multiplicity:"one",relationProperty:"release"},testPlans:{list:!0,name:"testPlan",multiplicity:"zeroOrOne",relationProperty:"release"},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},lastCommentedUser:{name:"generalUser",multiplicity:"",relationProperty:"lastCommentedGenerals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},tagObjects:{list:!0,name:"tag",multiplicity:"",relationProperty:""},masterRelations:{list:!0,name:"relation",multiplicity:"one",relationProperty:"slave"},slaveRelations:{list:!0,name:"relation",multiplicity:"one",relationProperty:"master"},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"iteration",parent:"general",resource:"iterations",aliases:["Iteration","iterations","Iterations"],fields:["id","name"],simpleFields:["id","isCurrent","velocity","duration","progress","canBeFinished","units","forecastEndDate","name","customField1","customField2","customField3","customField4","customField5","customField6","customField7","customField8","customField9","customField10","customField11","customField12","customField13","customField14","customField15","customField16","customField17","customField18","customField19","customField20","customField21","customField22","customField23","customField24","customField25","customField26","customField27","customField28","customField29","customField30","customField31","customField32","customField33","customField34","customField35","customField36","customField37","customField38","customField39","customField40","customField41","customField42","customField43","customField44","customField45","customField46","customField47","customField48","customField49","customField50","customField51","customField52","customField53","customField54","customField55","customField56","customField57","customField58","customField59","customField60","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","isNow","isNext","isPrevious","assignables-count","userStories-count","tasks-count","bugs-count","testPlanRuns-count","requests-count","builds-count","comments-count","messages-count","tagObjects-count","masterRelations-count","slaveRelations-count","attachments-count"],refs:{project:{name:"project",multiplicity:"",relationProperty:"iterations"},release:{name:"release",multiplicity:"",relationProperty:"iterations"},assignables:{list:!0,name:"assignable",multiplicity:"zeroOrOne",relationProperty:"iteration"},userStories:{list:!0,name:"userStory",multiplicity:"zeroOrOne",relationProperty:"iteration"},tasks:{list:!0,name:"task",multiplicity:"zeroOrOne",relationProperty:"iteration"},bugs:{list:!0,name:"bug",multiplicity:"zeroOrOne",relationProperty:"iteration"},testPlanRuns:{list:!0,name:"testPlanRun",multiplicity:"zeroOrOne",relationProperty:"iteration"},requests:{list:!0,name:"request",multiplicity:"zeroOrOne",relationProperty:"iteration"},builds:{list:!0,name:"build",multiplicity:"zeroOrOne",relationProperty:"iteration"},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},lastCommentedUser:{name:"generalUser",multiplicity:"",relationProperty:"lastCommentedGenerals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},tagObjects:{list:!0,name:"tag",multiplicity:"",relationProperty:""},masterRelations:{list:!0,name:"relation",multiplicity:"one",relationProperty:"slave"},slaveRelations:{list:!0,name:"relation",multiplicity:"one",relationProperty:"master"},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"teamIteration",parent:"general",resource:"teamIterations",aliases:["TeamIteration","teamIterations","TeamIterations"],fields:["id","name"],simpleFields:["id","isCurrent","velocity","duration","progress","forecastEndDate","canBeFinished","name","customField1","customField2","customField3","customField4","customField5","customField6","customField7","customField8","customField9","customField10","customField11","customField12","customField13","customField14","customField15","customField16","customField17","customField18","customField19","customField20","customField21","customField22","customField23","customField24","customField25","customField26","customField27","customField28","customField29","customField30","customField31","customField32","customField33","customField34","customField35","customField36","customField37","customField38","customField39","customField40","customField41","customField42","customField43","customField44","customField45","customField46","customField47","customField48","customField49","customField50","customField51","customField52","customField53","customField54","customField55","customField56","customField57","customField58","customField59","customField60","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","isNow","isNext","isPrevious","assignables-count","userStories-count","tasks-count","bugs-count","testPlanRuns-count","testPlans-count","comments-count","messages-count","tagObjects-count","masterRelations-count","slaveRelations-count","attachments-count"],refs:{team:{name:"team",multiplicity:"",relationProperty:"teamIterations"},assignables:{list:!0,name:"assignable",multiplicity:"zeroOrOne",relationProperty:"teamIteration"},userStories:{list:!0,name:"userStory",multiplicity:"zeroOrOne",relationProperty:"teamIteration"},tasks:{list:!0,name:"task",multiplicity:"zeroOrOne",relationProperty:"teamIteration"},bugs:{list:!0,name:"bug",multiplicity:"zeroOrOne",relationProperty:"teamIteration"},testPlanRuns:{list:!0,name:"testPlanRun",multiplicity:"zeroOrOne",relationProperty:"teamIteration"},testPlans:{list:!0,name:"testPlan",multiplicity:"zeroOrOne",relationProperty:"teamIteration"},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},lastCommentedUser:{name:"generalUser",multiplicity:"",relationProperty:"lastCommentedGenerals"},project:{name:"project",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},tagObjects:{list:!0,name:"tag",multiplicity:"",relationProperty:""},masterRelations:{list:!0,name:"relation",multiplicity:"one",relationProperty:"slave"},slaveRelations:{list:!0,name:"relation",multiplicity:"one",relationProperty:"master"},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"team",parent:"general",resource:"teams",aliases:["Team","teams","Teams"],fields:["id","name"],simpleFields:["id","icon","isActive","abbreviation","iconUri","name","customField1","customField2","customField3","customField4","customField5","customField6","customField7","customField8","customField9","customField10","customField11","customField12","customField13","customField14","customField15","customField16","customField17","customField18","customField19","customField20","customField21","customField22","customField23","customField24","customField25","customField26","customField27","customField28","customField29","customField30","customField31","customField32","customField33","customField34","customField35","customField36","customField37","customField38","customField39","customField40","customField41","customField42","customField43","customField44","customField45","customField46","customField47","customField48","customField49","customField50","customField51","customField52","customField53","customField54","customField55","customField56","customField57","customField58","customField59","customField60","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","isNow","isNext","isPrevious","teamMembers-count","teamProjects-count","assignables-count","userStories-count","tasks-count","bugs-count","requests-count","features-count","teamIterations-count","testPlans-count","comments-count","messages-count","tagObjects-count","masterRelations-count","slaveRelations-count","attachments-count"],refs:{teamMembers:{list:!0,name:"teamMember",multiplicity:"one",relationProperty:"team"},teamProjects:{list:!0,name:"teamProject",multiplicity:"one",relationProperty:"team"},assignables:{list:!0,name:"assignable",multiplicity:"zeroOrOne",relationProperty:"team"},userStories:{list:!0,name:"userStory",multiplicity:"zeroOrOne",relationProperty:"team"},tasks:{list:!0,name:"task",multiplicity:"zeroOrOne",relationProperty:"team"},bugs:{list:!0,name:"bug",multiplicity:"zeroOrOne",relationProperty:"team"},requests:{list:!0,name:"request",multiplicity:"one",relationProperty:"team"},features:{list:!0,name:"feature",multiplicity:"zeroOrOne",relationProperty:"team"},teamIterations:{list:!0,name:"teamIteration",multiplicity:"one",relationProperty:"team"},testPlans:{list:!0,name:"testPlan",multiplicity:"zeroOrOne",relationProperty:"team"},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},lastCommentedUser:{name:"generalUser",multiplicity:"",relationProperty:"lastCommentedGenerals"},project:{name:"project",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},tagObjects:{list:!0,name:"tag",multiplicity:"",relationProperty:""},masterRelations:{list:!0,name:"relation",multiplicity:"one",relationProperty:"slave"},slaveRelations:{list:!0,name:"relation",multiplicity:"one",relationProperty:"master"},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"feature",parent:"assignable",resource:"features",aliases:["Feature","features","Features"],fields:["id","name"],simpleFields:["id","initialEstimate","effort","effortCompleted","effortToDo","progress","timeSpent","timeRemain","plannedStartDate","plannedEndDate","units","leadTime","cycleTime","forecastEndDate","name","customField1","customField2","customField3","customField4","customField5","customField6","customField7","customField8","customField9","customField10","customField11","customField12","customField13","customField14","customField15","customField16","customField17","customField18","customField19","customField20","customField21","customField22","customField23","customField24","customField25","customField26","customField27","customField28","customField29","customField30","customField31","customField32","customField33","customField34","customField35","customField36","customField37","customField38","customField39","customField40","customField41","customField42","customField43","customField44","customField45","customField46","customField47","customField48","customField49","customField50","customField51","customField52","customField53","customField54","customField55","customField56","customField57","customField58","customField59","customField60","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","isNow","isNext","isPrevious","userStories-count","history-count","bugs-count","assignedUser-count","assignments-count","impediments-count","times-count","roleEfforts-count","revisions-count","comments-count","messages-count","tagObjects-count","masterRelations-count","slaveRelations-count","attachments-count"],refs:{project:{name:"project",multiplicity:"",relationProperty:"features"},release:{name:"release",multiplicity:"",relationProperty:"features"},team:{name:"team",multiplicity:"",relationProperty:"assignables"},userStories:{list:!0,name:"userStory",multiplicity:"zeroOrOne",relationProperty:"feature"},history:{list:!0,name:"featureHistory",multiplicity:"one",relationProperty:"feature"},bugs:{list:!0,name:"bug",multiplicity:"zeroOrOne",relationProperty:"feature"},assignedUser:{list:!0,name:"generalUser",multiplicity:"",relationProperty:""},iteration:{name:"iteration",multiplicity:"",relationProperty:"assignables"},teamIteration:{name:"teamIteration",multiplicity:"",relationProperty:"assignables"},priority:{name:"priority",multiplicity:"",relationProperty:"assignables"},entityState:{name:"entityState",multiplicity:"",relationProperty:"assignables"},assignments:{list:!0,name:"assignment",multiplicity:"one",relationProperty:"assignable"},impediments:{list:!0,name:"impediment",multiplicity:"zeroOrOne",relationProperty:"assignable"},times:{list:!0,name:"time",multiplicity:"zeroOrOne",relationProperty:"assignable"},roleEfforts:{list:!0,name:"roleEffort",multiplicity:"one",relationProperty:"assignable"},revisions:{list:!0,name:"revision",multiplicity:"",relationProperty:""},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},lastCommentedUser:{name:"generalUser",multiplicity:"",relationProperty:"lastCommentedGenerals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},tagObjects:{list:!0,name:"tag",multiplicity:"",relationProperty:""},masterRelations:{list:!0,name:"relation",multiplicity:"one",relationProperty:"slave"},slaveRelations:{list:!0,name:"relation",multiplicity:"one",relationProperty:"master"},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"userStory",parent:"assignable",resource:"userStories",aliases:["UserStory","userStories","UserStories"],fields:["id","name"],simpleFields:["id","initialEstimate","effort","effortCompleted","effortToDo","progress","timeSpent","timeRemain","plannedStartDate","plannedEndDate","units","leadTime","cycleTime","forecastEndDate","name","customField1","customField2","customField3","customField4","customField5","customField6","customField7","customField8","customField9","customField10","customField11","customField12","customField13","customField14","customField15","customField16","customField17","customField18","customField19","customField20","customField21","customField22","customField23","customField24","customField25","customField26","customField27","customField28","customField29","customField30","customField31","customField32","customField33","customField34","customField35","customField36","customField37","customField38","customField39","customField40","customField41","customField42","customField43","customField44","customField45","customField46","customField47","customField48","customField49","customField50","customField51","customField52","customField53","customField54","customField55","customField56","customField57","customField58","customField59","customField60","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","isNow","isNext","isPrevious","tasks-count","bugs-count","testCases-count","times-count","history-count","assignedUser-count","assignments-count","impediments-count","times-count","roleEfforts-count","revisions-count","comments-count","messages-count","tagObjects-count","masterRelations-count","slaveRelations-count","attachments-count"],refs:{project:{name:"project",multiplicity:"",relationProperty:"userStories"},feature:{name:"feature",multiplicity:"",relationProperty:"userStories"},tasks:{list:!0,name:"task",multiplicity:"zeroOrOne",relationProperty:"userStory"},bugs:{list:!0,name:"bug",multiplicity:"zeroOrOne",relationProperty:"userStory"},testCases:{list:!0,name:"testCase",multiplicity:"zeroOrOne",relationProperty:"userStory"},times:{list:!0,name:"time",multiplicity:"zeroOrOne",relationProperty:"userStory"},release:{name:"release",multiplicity:"",relationProperty:"userStories"},iteration:{name:"iteration",multiplicity:"",relationProperty:"userStories"},team:{name:"team",multiplicity:"",relationProperty:"userStories"},teamIteration:{name:"teamIteration",multiplicity:"",relationProperty:"userStories"},history:{list:!0,name:"userStoryHistory",multiplicity:"one",relationProperty:"userStory"},assignedUser:{list:!0,name:"generalUser",multiplicity:"",relationProperty:""},priority:{name:"priority",multiplicity:"",relationProperty:"assignables"},entityState:{name:"entityState",multiplicity:"",relationProperty:"assignables"},assignments:{list:!0,name:"assignment",multiplicity:"one",relationProperty:"assignable"},impediments:{list:!0,name:"impediment",multiplicity:"zeroOrOne",relationProperty:"assignable"},roleEfforts:{list:!0,name:"roleEffort",multiplicity:"one",relationProperty:"assignable"},revisions:{list:!0,name:"revision",multiplicity:"",relationProperty:""},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},lastCommentedUser:{name:"generalUser",multiplicity:"",relationProperty:"lastCommentedGenerals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},tagObjects:{list:!0,name:"tag",multiplicity:"",relationProperty:""},masterRelations:{list:!0,name:"relation",multiplicity:"one",relationProperty:"slave"},slaveRelations:{list:!0,name:"relation",multiplicity:"one",relationProperty:"master"},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"userStoryHistory",parent:null,resource:"userStoryHistories",aliases:["UserStoryHistory","userStoryHistories","UserStoryHistories"],fields:["id"],simpleFields:["id","date","effort","effortCompleted","effortToDo"],refs:{entityState:{name:"entityState",multiplicity:"",relationProperty:"userStoryHistories"},modifier:{name:"generalUser",multiplicity:"",relationProperty:"userStoryHistories"},userStory:{name:"userStory",multiplicity:"",relationProperty:"history"},release:{name:"release",multiplicity:"",relationProperty:"userStoryHistories"},iteration:{name:"iteration",multiplicity:"",relationProperty:"userStoryHistories"}}},{name:"bugHistory",parent:null,resource:"bugHistories",aliases:["BugHistory","bugHistories","BugHistories"],fields:["id"],simpleFields:["id","date","effort","effortCompleted","effortToDo"],refs:{entityState:{name:"entityState",multiplicity:"",relationProperty:"bugHistories"},modifier:{name:"generalUser",multiplicity:"",relationProperty:"bugHistories"},bug:{name:"bug",multiplicity:"",relationProperty:"history"},release:{name:"release",multiplicity:"",relationProperty:"bugHistories"},iteration:{name:"iteration",multiplicity:"",relationProperty:"bugHistories"}}},{name:"featureHistory",parent:null,resource:"featureHistories",aliases:["FeatureHistory","featureHistories","FeatureHistories"],fields:["id"],simpleFields:["id","date","effort","effortCompleted","effortToDo"],refs:{entityState:{name:"entityState",multiplicity:"",relationProperty:"featureHistories"},modifier:{name:"generalUser",multiplicity:"",relationProperty:"featureHistories"},feature:{name:"feature",multiplicity:"",relationProperty:"history"},release:{name:"release",multiplicity:"",relationProperty:"featureHistories"},iteration:{name:"iteration",multiplicity:"",relationProperty:"featureHistories"}}},{name:"requestHistory",parent:null,resource:"requestHistories",aliases:["RequestHistory","requestHistories","RequestHistories"],fields:["id"],simpleFields:["id","date","effort","effortCompleted","effortToDo"],refs:{entityState:{name:"entityState",multiplicity:"",relationProperty:"requestHistories"},modifier:{name:"generalUser",multiplicity:"",relationProperty:"requestHistories"},request:{name:"request",multiplicity:"",relationProperty:"history"},release:{name:"release",multiplicity:"",relationProperty:"requestHistories"},iteration:{name:"iteration",multiplicity:"",relationProperty:"requestHistories"}}},{name:"taskHistory",parent:null,resource:"taskHistories",aliases:["TaskHistory","taskHistories","TaskHistories"],fields:["id"],simpleFields:["id","date","effort","effortCompleted","effortToDo"],refs:{entityState:{name:"entityState",multiplicity:"",relationProperty:"taskHistories"},modifier:{name:"generalUser",multiplicity:"",relationProperty:"taskHistories"},task:{name:"task",multiplicity:"",relationProperty:"history"},release:{name:"release",multiplicity:"",relationProperty:"taskHistories"},iteration:{name:"iteration",multiplicity:"",relationProperty:"taskHistories"}}},{name:"impedimentHistory",parent:null,resource:"impedimentHistories",aliases:["ImpedimentHistory","impedimentHistories","ImpedimentHistories"],fields:["id"],simpleFields:["id","date"],refs:{entityState:{name:"entityState",multiplicity:"",relationProperty:"impedimentHistories"},modifier:{name:"generalUser",multiplicity:"",relationProperty:"impedimentHistories"},impediment:{name:"impediment",multiplicity:"",relationProperty:"history"}}},{name:"task",parent:"assignable",resource:"tasks",aliases:["Task","tasks","Tasks"],fields:["id","name"],simpleFields:["id","effort","effortCompleted","effortToDo","progress","timeSpent","timeRemain","plannedStartDate","plannedEndDate","units","leadTime","cycleTime","forecastEndDate","name","customField1","customField2","customField3","customField4","customField5","customField6","customField7","customField8","customField9","customField10","customField11","customField12","customField13","customField14","customField15","customField16","customField17","customField18","customField19","customField20","customField21","customField22","customField23","customField24","customField25","customField26","customField27","customField28","customField29","customField30","customField31","customField32","customField33","customField34","customField35","customField36","customField37","customField38","customField39","customField40","customField41","customField42","customField43","customField44","customField45","customField46","customField47","customField48","customField49","customField50","customField51","customField52","customField53","customField54","customField55","customField56","customField57","customField58","customField59","customField60","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","isNow","isNext","isPrevious","times-count","history-count","assignedUser-count","assignments-count","impediments-count","times-count","roleEfforts-count","revisions-count","comments-count","messages-count","tagObjects-count","masterRelations-count","slaveRelations-count","attachments-count"],refs:{project:{name:"project",multiplicity:"",relationProperty:"tasks"},userStory:{name:"userStory",multiplicity:"",relationProperty:"tasks"},times:{list:!0,name:"time",multiplicity:"zeroOrOne",relationProperty:"task"},release:{name:"release",multiplicity:"",relationProperty:"tasks"},iteration:{name:"iteration",multiplicity:"",relationProperty:"tasks"},team:{name:"team",multiplicity:"",relationProperty:"tasks"},teamIteration:{name:"teamIteration",multiplicity:"",relationProperty:"tasks"},history:{list:!0,name:"taskHistory",multiplicity:"one",relationProperty:"task"},assignedUser:{list:!0,name:"generalUser",multiplicity:"",relationProperty:""},priority:{name:"priority",multiplicity:"",relationProperty:"assignables"},entityState:{name:"entityState",multiplicity:"",relationProperty:"assignables"},assignments:{list:!0,name:"assignment",multiplicity:"one",relationProperty:"assignable"},impediments:{list:!0,name:"impediment",multiplicity:"zeroOrOne",relationProperty:"assignable"},roleEfforts:{list:!0,name:"roleEffort",multiplicity:"one",relationProperty:"assignable"},revisions:{list:!0,name:"revision",multiplicity:"",relationProperty:""},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},lastCommentedUser:{name:"generalUser",multiplicity:"",relationProperty:"lastCommentedGenerals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},tagObjects:{list:!0,name:"tag",multiplicity:"",relationProperty:""},masterRelations:{list:!0,name:"relation",multiplicity:"one",relationProperty:"slave"},slaveRelations:{list:!0,name:"relation",multiplicity:"one",relationProperty:"master"},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"bug",parent:"assignable",resource:"bugs",aliases:["Bug","bugs","Bugs"],fields:["id","name"],simpleFields:["id","effort","effortCompleted","effortToDo","progress","timeSpent","timeRemain","plannedStartDate","plannedEndDate","units","leadTime","cycleTime","forecastEndDate","name","customField1","customField2","customField3","customField4","customField5","customField6","customField7","customField8","customField9","customField10","customField11","customField12","customField13","customField14","customField15","customField16","customField17","customField18","customField19","customField20","customField21","customField22","customField23","customField24","customField25","customField26","customField27","customField28","customField29","customField30","customField31","customField32","customField33","customField34","customField35","customField36","customField37","customField38","customField39","customField40","customField41","customField42","customField43","customField44","customField45","customField46","customField47","customField48","customField49","customField50","customField51","customField52","customField53","customField54","customField55","customField56","customField57","customField58","customField59","customField60","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","isNow","isNext","isPrevious","times-count","history-count","assignedUser-count","assignments-count","impediments-count","times-count","roleEfforts-count","revisions-count","comments-count","messages-count","tagObjects-count","masterRelations-count","slaveRelations-count","attachments-count"],refs:{project:{name:"project",multiplicity:"",relationProperty:"bugs"},build:{name:"build",multiplicity:"",relationProperty:"bugs"},userStory:{name:"userStory",multiplicity:"",relationProperty:"bugs"},feature:{name:"feature",multiplicity:"",relationProperty:"bugs"},severity:{name:"severity",multiplicity:"",relationProperty:"bugs"},times:{list:!0,name:"time",multiplicity:"zeroOrOne",relationProperty:"bug"},release:{name:"release",multiplicity:"",relationProperty:"bugs"},iteration:{name:"iteration",multiplicity:"",relationProperty:"bugs"},team:{name:"team",multiplicity:"",relationProperty:"bugs"},teamIteration:{name:"teamIteration",multiplicity:"",relationProperty:"bugs"},history:{list:!0,name:"bugHistory",multiplicity:"one",relationProperty:"bug"},assignedUser:{list:!0,name:"generalUser",multiplicity:"",relationProperty:""},priority:{name:"priority",multiplicity:"",relationProperty:"assignables"},entityState:{name:"entityState",multiplicity:"",relationProperty:"assignables"},assignments:{list:!0,name:"assignment",multiplicity:"one",relationProperty:"assignable"},impediments:{list:!0,name:"impediment",multiplicity:"zeroOrOne",relationProperty:"assignable"},roleEfforts:{list:!0,name:"roleEffort",multiplicity:"one",relationProperty:"assignable"},revisions:{list:!0,name:"revision",multiplicity:"",relationProperty:""},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},lastCommentedUser:{name:"generalUser",multiplicity:"",relationProperty:"lastCommentedGenerals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},tagObjects:{list:!0,name:"tag",multiplicity:"",relationProperty:""},masterRelations:{list:!0,name:"relation",multiplicity:"one",relationProperty:"slave"},slaveRelations:{list:!0,name:"relation",multiplicity:"one",relationProperty:"master"},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"testCase",parent:"general",resource:"testCases",aliases:["TestCase","testCases","TestCases"],fields:["id","name"],simpleFields:["id","steps","success","lastStatus","lastFailureComment","lastRunDate","name","customField1","customField2","customField3","customField4","customField5","customField6","customField7","customField8","customField9","customField10","customField11","customField12","customField13","customField14","customField15","customField16","customField17","customField18","customField19","customField20","customField21","customField22","customField23","customField24","customField25","customField26","customField27","customField28","customField29","customField30","customField31","customField32","customField33","customField34","customField35","customField36","customField37","customField38","customField39","customField40","customField41","customField42","customField43","customField44","customField45","customField46","customField47","customField48","customField49","customField50","customField51","customField52","customField53","customField54","customField55","customField56","customField57","customField58","customField59","customField60","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","isNow","isNext","isPrevious","testPlans-count","testCaseRuns-count","comments-count","messages-count","tagObjects-count","masterRelations-count","slaveRelations-count","attachments-count"],refs:{project:{name:"project",multiplicity:"",relationProperty:"testCases"},userStory:{name:"userStory",multiplicity:"",relationProperty:"testCases"},priority:{name:"priority",multiplicity:"",relationProperty:"testCases"},testPlans:{list:!0,name:"testPlan",multiplicity:"",relationProperty:""},testCaseRuns:{list:!0,name:"testCaseRun",multiplicity:"",relationProperty:""},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},lastCommentedUser:{name:"generalUser",multiplicity:"",relationProperty:"lastCommentedGenerals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},tagObjects:{list:!0,name:"tag",multiplicity:"",relationProperty:""},masterRelations:{list:!0,name:"relation",multiplicity:"one",relationProperty:"slave"},slaveRelations:{list:!0,name:"relation",multiplicity:"one",relationProperty:"master"},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"testCaseRun",parent:null,resource:"testCaseRuns",aliases:["TestCaseRun","testCaseRuns","TestCaseRuns"],fields:["id","name"],simpleFields:["id","executed","passed","comment","runDate","name","steps","success","testCases-count"],refs:{testPlanRun:{name:"testPlanRun",multiplicity:"",relationProperty:"testCaseRuns"},testCases:{list:!0,name:"testCase",multiplicity:"",relationProperty:""},testCase:{name:"testCase",multiplicity:"",relationProperty:"testCase"}}},{name:"testPlan",parent:"assignable",resource:"testPlans",aliases:["TestPlan","testPlans","TestPlans"],fields:["id","name"],simpleFields:["id","initialEstimate","effort","effortCompleted","effortToDo","progress","timeSpent","timeRemain","plannedStartDate","plannedEndDate","units","leadTime","cycleTime","forecastEndDate","name","customField1","customField2","customField3","customField4","customField5","customField6","customField7","customField8","customField9","customField10","customField11","customField12","customField13","customField14","customField15","customField16","customField17","customField18","customField19","customField20","customField21","customField22","customField23","customField24","customField25","customField26","customField27","customField28","customField29","customField30","customField31","customField32","customField33","customField34","customField35","customField36","customField37","customField38","customField39","customField40","customField41","customField42","customField43","customField44","customField45","customField46","customField47","customField48","customField49","customField50","customField51","customField52","customField53","customField54","customField55","customField56","customField57","customField58","customField59","customField60","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","isNow","isNext","isPrevious","testCases-count","testPlanRuns-count","assignedUser-count","assignments-count","impediments-count","times-count","roleEfforts-count","revisions-count","comments-count","messages-count","tagObjects-count","masterRelations-count","slaveRelations-count","attachments-count"],refs:{project:{name:"project",multiplicity:"",relationProperty:"testPlans"},release:{name:"release",multiplicity:"",relationProperty:"testPlans"},testCases:{list:!0,name:"testCase",multiplicity:"",relationProperty:""},testPlanRuns:{list:!0,name:"testPlanRun",multiplicity:"one",relationProperty:"testPlan"},team:{name:"team",multiplicity:"",relationProperty:"testPlans"},teamIteration:{name:"teamIteration",multiplicity:"",relationProperty:"testPlans"},assignedUser:{list:!0,name:"generalUser",multiplicity:"",relationProperty:""},iteration:{name:"iteration",multiplicity:"",relationProperty:"assignables"},teamIteration:{name:"teamIteration",multiplicity:"",relationProperty:"assignables"},priority:{name:"priority",multiplicity:"",relationProperty:"assignables"},entityState:{name:"entityState",multiplicity:"",relationProperty:"assignables"},assignments:{list:!0,name:"assignment",multiplicity:"one",relationProperty:"assignable"},impediments:{list:!0,name:"impediment",multiplicity:"zeroOrOne",relationProperty:"assignable"},times:{list:!0,name:"time",multiplicity:"zeroOrOne",relationProperty:"assignable"},roleEfforts:{list:!0,name:"roleEffort",multiplicity:"one",relationProperty:"assignable"},revisions:{list:!0,name:"revision",multiplicity:"",relationProperty:""},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},lastCommentedUser:{name:"generalUser",multiplicity:"",relationProperty:"lastCommentedGenerals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},tagObjects:{list:!0,name:"tag",multiplicity:"",relationProperty:""},masterRelations:{list:!0,name:"relation",multiplicity:"one",relationProperty:"slave"},slaveRelations:{list:!0,name:"relation",multiplicity:"one",relationProperty:"master"},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"testPlanRun",parent:"assignable",resource:"testPlanRuns",aliases:["TestPlanRun","testPlanRuns","TestPlanRuns"],fields:["id","name"],simpleFields:["id","passedCount","failedCount","notRunCount","effort","effortCompleted","effortToDo","progress","timeSpent","timeRemain","plannedStartDate","plannedEndDate","units","leadTime","cycleTime","forecastEndDate","name","customField1","customField2","customField3","customField4","customField5","customField6","customField7","customField8","customField9","customField10","customField11","customField12","customField13","customField14","customField15","customField16","customField17","customField18","customField19","customField20","customField21","customField22","customField23","customField24","customField25","customField26","customField27","customField28","customField29","customField30","customField31","customField32","customField33","customField34","customField35","customField36","customField37","customField38","customField39","customField40","customField41","customField42","customField43","customField44","customField45","customField46","customField47","customField48","customField49","customField50","customField51","customField52","customField53","customField54","customField55","customField56","customField57","customField58","customField59","customField60","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","isNow","isNext","isPrevious","testCaseRuns-count","assignedUser-count","assignments-count","impediments-count","times-count","roleEfforts-count","revisions-count","comments-count","messages-count","tagObjects-count","masterRelations-count","slaveRelations-count","attachments-count"],refs:{release:{name:"release",multiplicity:"",relationProperty:"testPlanRuns"},build:{name:"build",multiplicity:"",relationProperty:"testPlanRuns"},iteration:{name:"iteration",multiplicity:"",relationProperty:"testPlanRuns"},testPlan:{name:"testPlan",multiplicity:"",relationProperty:"testPlanRuns"},project:{name:"project",multiplicity:"",relationProperty:"testPlanRuns"},testCaseRuns:{list:!0,name:"testCaseRun",multiplicity:"one",relationProperty:"testPlanRun"},assignedUser:{list:!0,name:"generalUser",multiplicity:"",relationProperty:""},teamIteration:{name:"teamIteration",multiplicity:"",relationProperty:"assignables"},team:{name:"team",multiplicity:"",relationProperty:"assignables"},priority:{name:"priority",multiplicity:"",relationProperty:"assignables"},entityState:{name:"entityState",multiplicity:"",relationProperty:"assignables"},assignments:{list:!0,name:"assignment",multiplicity:"one",relationProperty:"assignable"},impediments:{list:!0,name:"impediment",multiplicity:"zeroOrOne",relationProperty:"assignable"},times:{list:!0,name:"time",multiplicity:"zeroOrOne",relationProperty:"assignable"},roleEfforts:{list:!0,name:"roleEffort",multiplicity:"one",relationProperty:"assignable"},revisions:{list:!0,name:"revision",multiplicity:"",relationProperty:""},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},lastCommentedUser:{name:"generalUser",multiplicity:"",relationProperty:"lastCommentedGenerals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},tagObjects:{list:!0,name:"tag",multiplicity:"",relationProperty:""},masterRelations:{list:!0,name:"relation",multiplicity:"one",relationProperty:"slave"},slaveRelations:{list:!0,name:"relation",multiplicity:"one",relationProperty:"master"},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"time",parent:null,resource:"times",aliases:["Time","times","Times"],fields:["id"],simpleFields:["id","description","spent","remain","isEstimation","date","createDate"],refs:{project:{name:"project",multiplicity:"",relationProperty:"times"},user:{name:"user",multiplicity:"",relationProperty:"times"},assignable:{name:"assignable",multiplicity:"",relationProperty:"times"},role:{name:"role",multiplicity:"",relationProperty:"times"},customActivity:{name:"customActivity",multiplicity:"",relationProperty:"times"}}},{name:"revision",parent:null,resource:"revisions",aliases:["Revision","revisions","Revisions"],fields:["id"],simpleFields:["id","sourceControlId","description","commitDate","revisionFiles-count","assignables-count"],refs:{project:{name:"project",multiplicity:"",relationProperty:"revisions"},revisionFiles:{list:!0,name:"revisionFile",multiplicity:"one",relationProperty:"revision"},author:{name:"user",multiplicity:"",relationProperty:"revisions"},assignables:{list:!0,name:"assignable",multiplicity:"",relationProperty:""}}},{name:"revisionFile",parent:null,resource:"revisionFiles",aliases:["RevisionFile","revisionFiles","RevisionFiles"],fields:["id","fileName"],simpleFields:["id","fileName","fileAction"],refs:{revision:{name:"revision",multiplicity:"",relationProperty:"revisionFiles"}}},{name:"customActivity",parent:null,resource:"customActivities",aliases:["CustomActivity","customActivities","CustomActivities"],fields:["id","name"],simpleFields:["id","name","created","estimate","times-count"],refs:{project:{name:"project",multiplicity:"",relationProperty:"customActivities"},user:{name:"user",multiplicity:"",relationProperty:"customActivities"},times:{list:!0,name:"time",multiplicity:"zeroOrOne",relationProperty:"customActivity"}}},{name:"request",parent:"assignable",resource:"requests",aliases:["Request","requests","Requests"],fields:["id","name"],simpleFields:["id","sourceType","isReplied","isPrivate","effort","effortCompleted","effortToDo","progress","timeSpent","timeRemain","plannedStartDate","plannedEndDate","units","leadTime","cycleTime","forecastEndDate","name","customField1","customField2","customField3","customField4","customField5","customField6","customField7","customField8","customField9","customField10","customField11","customField12","customField13","customField14","customField15","customField16","customField17","customField18","customField19","customField20","customField21","customField22","customField23","customField24","customField25","customField26","customField27","customField28","customField29","customField30","customField31","customField32","customField33","customField34","customField35","customField36","customField37","customField38","customField39","customField40","customField41","customField42","customField43","customField44","customField45","customField46","customField47","customField48","customField49","customField50","customField51","customField52","customField53","customField54","customField55","customField56","customField57","customField58","customField59","customField60","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","isNow","isNext","isPrevious","requesters-count","history-count","assignedUser-count","assignments-count","impediments-count","times-count","roleEfforts-count","revisions-count","comments-count","messages-count","tagObjects-count","masterRelations-count","slaveRelations-count","attachments-count"],refs:{project:{name:"project",multiplicity:"",relationProperty:"requests"},team:{name:"team",multiplicity:"",relationProperty:"requests"},release:{name:"release",multiplicity:"",relationProperty:"requests"},iteration:{name:"iteration",multiplicity:"",relationProperty:"requests"},requestType:{name:"requestType",multiplicity:"",relationProperty:"requests"},requesters:{list:!0,name:"generalUser",multiplicity:"",relationProperty:""},history:{list:!0,name:"requestHistory",multiplicity:"one",relationProperty:"request"},assignedUser:{list:!0,name:"generalUser",multiplicity:"",relationProperty:""},teamIteration:{name:"teamIteration",multiplicity:"",relationProperty:"assignables"},priority:{name:"priority",multiplicity:"",relationProperty:"assignables"},entityState:{name:"entityState",multiplicity:"",relationProperty:"assignables"},assignments:{list:!0,name:"assignment",multiplicity:"one",relationProperty:"assignable"},impediments:{list:!0,name:"impediment",multiplicity:"zeroOrOne",relationProperty:"assignable"},times:{list:!0,name:"time",multiplicity:"zeroOrOne",relationProperty:"assignable"},roleEfforts:{list:!0,name:"roleEffort",multiplicity:"one",relationProperty:"assignable"},revisions:{list:!0,name:"revision",multiplicity:"",relationProperty:""},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},lastCommentedUser:{name:"generalUser",multiplicity:"",relationProperty:"lastCommentedGenerals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},tagObjects:{list:!0,name:"tag",multiplicity:"",relationProperty:""},masterRelations:{list:!0,name:"relation",multiplicity:"one",relationProperty:"slave"},slaveRelations:{list:!0,name:"relation",multiplicity:"one",relationProperty:"master"},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"requestType",parent:null,resource:"requestTypes",aliases:["RequestType","requestTypes","RequestTypes"],fields:["id","name"],simpleFields:["id","name","requests-count"],refs:{requests:{list:!0,name:"request",multiplicity:"one",relationProperty:"requestType"}}},{name:"build",parent:"general",resource:"builds",aliases:["Build","builds","Builds"],fields:["id","name"],simpleFields:["id","buildDate","name","customField1","customField2","customField3","customField4","customField5","customField6","customField7","customField8","customField9","customField10","customField11","customField12","customField13","customField14","customField15","customField16","customField17","customField18","customField19","customField20","customField21","customField22","customField23","customField24","customField25","customField26","customField27","customField28","customField29","customField30","customField31","customField32","customField33","customField34","customField35","customField36","customField37","customField38","customField39","customField40","customField41","customField42","customField43","customField44","customField45","customField46","customField47","customField48","customField49","customField50","customField51","customField52","customField53","customField54","customField55","customField56","customField57","customField58","customField59","customField60","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","isNow","isNext","isPrevious","bugs-count","testPlanRuns-count","comments-count","messages-count","tagObjects-count","masterRelations-count","slaveRelations-count","attachments-count"],refs:{project:{name:"project",multiplicity:"",relationProperty:"builds"},release:{name:"release",multiplicity:"",relationProperty:"builds"},iteration:{name:"iteration",multiplicity:"",relationProperty:"builds"},bugs:{list:!0,name:"bug",multiplicity:"zeroOrOne",relationProperty:"build"},testPlanRuns:{list:!0,name:"testPlanRun",multiplicity:"zeroOrOne",relationProperty:"build"},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},lastCommentedUser:{name:"generalUser",multiplicity:"",relationProperty:"lastCommentedGenerals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},tagObjects:{list:!0,name:"tag",multiplicity:"",relationProperty:""},masterRelations:{list:!0,name:"relation",multiplicity:"one",relationProperty:"slave"},slaveRelations:{list:!0,name:"relation",multiplicity:"one",relationProperty:"master"},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"comment",parent:null,resource:"comments",aliases:["Comment","comments","Comments"],fields:["id"],simpleFields:["id","description","parentId","createDate"],refs:{general:{name:"general",multiplicity:"",relationProperty:"comments"},owner:{name:"generalUser",multiplicity:"",relationProperty:"comments"}}},{name:"assignment",parent:null,resource:"assignments",aliases:["Assignment","assignments","Assignments"],fields:["id"],simpleFields:["id"],refs:{assignable:{name:"assignable",multiplicity:"",relationProperty:"assignments"},generalUser:{name:"user",multiplicity:"",relationProperty:"assignments"},role:{name:"role",multiplicity:"",relationProperty:"assignments"}}},{name:"role",parent:null,resource:"roles",aliases:["Role","roles","Roles"],fields:["id","name"],simpleFields:["id","name","isPair","hasEffort","canChangeOwner","roleEfforts-count","entityStates-count"],refs:{roleEfforts:{list:!0,name:"roleEffort",multiplicity:"one",relationProperty:"role"},entityStates:{list:!0,name:"entityState",multiplicity:"one",relationProperty:"role"}}},{name:"impediment",parent:"general",resource:"impediments",aliases:["Impediment","impediments","Impediments"],fields:["id","name"],simpleFields:["id","isPrivate","plannedStartDate","plannedEndDate","name","customField1","customField2","customField3","customField4","customField5","customField6","customField7","customField8","customField9","customField10","customField11","customField12","customField13","customField14","customField15","customField16","customField17","customField18","customField19","customField20","customField21","customField22","customField23","customField24","customField25","customField26","customField27","customField28","customField29","customField30","customField31","customField32","customField33","customField34","customField35","customField36","customField37","customField38","customField39","customField40","customField41","customField42","customField43","customField44","customField45","customField46","customField47","customField48","customField49","customField50","customField51","customField52","customField53","customField54","customField55","customField56","customField57","customField58","customField59","customField60","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","isNow","isNext","isPrevious","history-count","comments-count","messages-count","tagObjects-count","masterRelations-count","slaveRelations-count","attachments-count"],refs:{assignable:{name:"assignable",multiplicity:"",relationProperty:"impediments"},entityState:{name:"entityState",multiplicity:"",relationProperty:"impediments"},priority:{name:"priority",multiplicity:"",relationProperty:"impediments"},responsible:{name:"user",multiplicity:"",relationProperty:"impediments"},history:{list:!0,name:"impedimentHistory",multiplicity:"one",relationProperty:"impediment"},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},lastCommentedUser:{name:"generalUser",multiplicity:"",relationProperty:"lastCommentedGenerals"},project:{name:"project",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},tagObjects:{list:!0,name:"tag",multiplicity:"",relationProperty:""},masterRelations:{list:!0,name:"relation",multiplicity:"one",relationProperty:"slave"},slaveRelations:{list:!0,name:"relation",multiplicity:"one",relationProperty:"master"},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"company",parent:null,resource:"companies",aliases:["Company","companies","Companies"],fields:["id","name"],simpleFields:["id","name","url","description","projects-count"],refs:{projects:{list:!0,name:"project",multiplicity:"zeroOrOne",relationProperty:"company"}}},{name:"roleEffort",parent:null,resource:"roleEfforts",aliases:["RoleEffort","roleEfforts","RoleEfforts"],fields:["id"],simpleFields:["id","initialEstimate","effort","effortCompleted","effortToDo","timeSpent","timeRemain"],refs:{assignable:{name:"assignable",multiplicity:"",relationProperty:"roleEfforts"},role:{name:"role",multiplicity:"",relationProperty:"roleEfforts"}}},{name:"projectMember",parent:null,resource:"projectMembers",aliases:["ProjectMember","projectMembers","ProjectMembers"],fields:["id"],simpleFields:["id","weeklyAvailableHours","membershipStartDate","membershipEndDate","allocation","isActive"],refs:{project:{name:"project",multiplicity:"",relationProperty:"projectMembers"},user:{name:"user",multiplicity:"",relationProperty:"projectMembers"},role:{name:"role",multiplicity:"",relationProperty:""}}},{name:"teamMember",parent:null,resource:"teamMembers",aliases:["TeamMember","teamMembers","TeamMembers"],fields:["id"],simpleFields:["id","startDate","endDate"],refs:{team:{name:"team",multiplicity:"",relationProperty:"teamMembers"},user:{name:"user",multiplicity:"",relationProperty:"teamMembers"},role:{name:"role",multiplicity:"",relationProperty:""}}},{name:"teamProject",parent:null,resource:"teamProjects",aliases:["TeamProject","teamProjects","TeamProjects"],fields:["id"],simpleFields:["id","startDate","endDate","isProjectAccessed"],refs:{team:{name:"team",multiplicity:"",relationProperty:"teamProjects"},project:{name:"project",multiplicity:"",relationProperty:"teamProjects"}}},{name:"message",parent:null,resource:"messages",aliases:["Message","messages","Messages"],fields:["id"],simpleFields:["id","subject","recipients","body","isRead","isProcessed","createDate","sendDate","messageType","contentType","generals-count","attachments-count"],refs:{from:{name:"generalUser",multiplicity:"",relationProperty:"messagesFrom"},to:{name:"generalUser",multiplicity:"",relationProperty:"messagesTo"},messageUid:{name:"messageUid",multiplicity:"",relationProperty:""},generals:{list:!0,name:"general",multiplicity:"",relationProperty:""},attachments:{list:!0,name:"attachment",multiplicity:"zeroOrOne",relationProperty:"message"}}},{name:"messageUid",parent:null,resource:"messageUids",aliases:["MessageUid","messageUids","MessageUids"],fields:["id"],simpleFields:["id","uid","mailServer","mailLogin"],refs:{}},{name:"customField",parent:null,resource:"customFields",aliases:["CustomField","customFields","CustomFields"],fields:["id","name","entityFieldName"],simpleFields:["id","name","value","entityFieldName","fieldType","enabledForFilter","required","configString","config"],refs:{entityType:{name:"entityType",multiplicity:"",relationProperty:"customFields"},process:{name:"process",multiplicity:"",relationProperty:"customFields"}}},{name:"relationType",parent:null,resource:"relationTypes",aliases:["RelationType","relationTypes","RelationTypes"],fields:["id","name"],simpleFields:["id","name","relations-count"],refs:{relations:{list:!0,name:"relation",multiplicity:"one",relationProperty:"relationType"}}},{name:"relation",parent:null,resource:"relations",aliases:["Relation","relations","Relations"],fields:["id"],simpleFields:["id"],refs:{master:{name:"general",multiplicity:"",relationProperty:"slaveRelations"},slave:{name:"general",multiplicity:"",relationProperty:"masterRelations"},relationType:{name:"relationType",multiplicity:"",relationProperty:"relations"}}},{name:"resourceBase",parent:"resource",resource:"resourceBases",aliases:["ResourceBase","resourceBases","ResourceBases"],fields:["id"],simpleFields:["id"],refs:{}},{name:"attachment",parent:null,resource:"attachments",aliases:["Attachment","attachments","Attachments"],fields:["id","name"],simpleFields:["id","name","description","date","mimeType","uri","thumbnailUri","size"],refs:{owner:{name:"generalUser",multiplicity:"",relationProperty:"attachments"},general:{name:"general",multiplicity:"",relationProperty:"attachments"},message:{name:"message",multiplicity:"",relationProperty:"attachments"}}},{name:"customFieldConfig",parent:null,resource:"customFieldConfigs",aliases:["CustomFieldConfig","customFieldConfigs","CustomFieldConfigs"],fields:["id"],simpleFields:["id","defaultValue"],refs:{}},{name:"generalListItem",parent:null,resource:"generalListItems",aliases:["GeneralListItem","generalListItems","GeneralListItems"],fields:["id","name"],simpleFields:["id","name","parentProjectId","entityTypeId","numericPriority","createDate","startDate","endDate"],refs:{}},{name:"context",parent:null,resource:"contexts",aliases:["Context","contexts","Contexts"],fields:["id"],simpleFields:["id","acid","edition","version","selectedProjects-count","selectedTeams-count","processes-count"],refs:{loggedUser:{name:"user",multiplicity:"",relationProperty:""},culture:{name:"culture",multiplicity:"",relationProperty:""},selectedProjects:{list:!0,name:"projectInfo",multiplicity:"",relationProperty:""},selectedTeams:{list:!0,name:"teamInfo",multiplicity:"",relationProperty:""},processes:{list:!0,name:"processInfo",multiplicity:"",relationProperty:""},appContext:{name:"appContext",multiplicity:"",relationProperty:""}}},{name:"appContext",parent:null,resource:"appContexts",aliases:["AppContext","appContexts","AppContexts"],fields:["id"],simpleFields:["id"],refs:{projectContext:{name:"simpleContext",multiplicity:"",relationProperty:""},teamContext:{name:"simpleContext",multiplicity:"",relationProperty:""}}},{name:"simpleContext",parent:null,resource:"simpleContexts",aliases:["SimpleContext","simpleContexts","SimpleContexts"],fields:["id"],simpleFields:["id","no"],refs:{}},{name:"culture",parent:null,resource:"cultures",aliases:["Culture","cultures","Cultures"],fields:["id","name"],simpleFields:["id","name","decimalSeparator","shortDateFormat","longDateFormat","timePattern"],refs:{}},{name:"processInfo",parent:null,resource:"processInfos",aliases:["ProcessInfo","processInfos","ProcessInfos"],fields:["id","name"],simpleFields:["id","name","isDefault","terms-count","customFields-count","practices-count"],refs:{terms:{list:!0,name:"term",multiplicity:"",relationProperty:""},customFields:{list:!0,name:"customFieldInfo",multiplicity:"",relationProperty:""},practices:{list:!0,name:"practice",multiplicity:"",relationProperty:""}}},{name:"term",parent:null,resource:"terms",aliases:["Term","terms","Terms"],fields:["id","name"],simpleFields:["id","name","value"],refs:{}},{name:"customFieldInfo",parent:null,resource:"customFieldInfos",aliases:["CustomFieldInfo","customFieldInfos","CustomFieldInfos"],fields:["id","name","entityFieldName"],simpleFields:["id","entityKind","name","entityFieldName","value","type","required","listed"],refs:{process:{name:"processInfo",multiplicity:"",relationProperty:"customFields"}}},{name:"projectInfo",parent:null,resource:"projectInfos",aliases:["ProjectInfo","projectInfos","ProjectInfos"],fields:["id","name"],simpleFields:["id","name","color","isActive","abbreviation"],refs:{process:{name:"processInfo",multiplicity:"",relationProperty:""},program:{name:"programInfo",multiplicity:"",relationProperty:""}}},{name:"teamInfo",parent:null,resource:"teamInfos",aliases:["TeamInfo","teamInfos","TeamInfos"],fields:["id","name"],simpleFields:["id","name","abbreviation","icon"],refs:{}},{name:"programInfo",parent:null,resource:"programInfos",aliases:["ProgramInfo","programInfos","ProgramInfos"],fields:["id","name"],simpleFields:["id","name"],refs:{}}]
});
define('tau/store/types.targetprocess.additional',[],function(){return[{name:"endDate",parent:null,aliases:["enddate","End Date","enddates","End Dates"],fields:[],simpleFields:[],refs:{}},{name:"createdDate",parent:null,aliases:["createdate","createddate","Created Date","createddates","Created Dates"],fields:[],simpleFields:[],refs:{}},{name:"startDate",parent:null,aliases:["startdate","Start Date","startdates","Start Dates"],fields:[],simpleFields:[],refs:{}},{name:"effort",parent:null,aliases:["Effort","efforts","Efforts"],fields:[],simpleFields:[],refs:{}},{name:"source",parent:null,aliases:["Source","sources","Sources"],fields:[],simpleFields:[],refs:{}},{name:"assignedUser",parent:null,aliases:["assigneduser","Assigned User","Assigned Users","assignedusers"],fields:[],simpleFields:[],refs:{}},{name:"inboundRelation",parent:null,aliases:["inboundrelation","Inbound Relation","Inbound Relations","inboundrelations"],fields:[],simpleFields:[],refs:{}},{name:"outboundRelation",parent:null,aliases:["outboundrelation","Outbound Relation","Outbound Relations","outboundrelations"],fields:[],simpleFields:[],refs:{}}]});
define('tau/store/types.targetprocess',["Underscore","tau/store/types","tau/store/types.targetprocess.generated","tau/store/types.targetprocess.additional"],function(e,t,s,r){var n=function(e){for(var t=[],s=0,r=e.length;r>s;s++){var n=e.charAt(s),a=n.toUpperCase();0===s?n=a:n===a&&t.push(" "),t.push(n)}return t.join("")},a=function(e){return{key:e,val:e}},i=function(e){var t=e.length-1,s=e.charAt(t);return"s"===s?/^.*[sx]is$/.test(e)?e=e.substring(0,t-1)+"es":e+="es":"z"===s||"x"===s||"h"===s&&/^.*[sc]h$/.test(e)?e+="es":"y"===s?/^.*[aeijouy]y$/.test(e)?e+="s":e=e.substring(0,t)+"ies":e+="s",e},o=function(e,t){return t=t||i(e),{key:t,val:t}},c=function(e){return{key:e+" Big Icon Text",val:e}},u={testcase:"TC",teamiteration:"TI",testplan:"TP",testplanrun:"TR",userstory:"U"},l=function(t,s){return{key:t+" Small Icon Text",val:u[s.toLowerCase()]||e.last(t.split(" ")).charAt(0)}},p=function(e){if(e&&e.entityType&&e.entityType.name)return e.entityType.name;throw new Error("Type of entity is not detected")},f=function(e,t){var s=n(e);return{name:a(s),names:o(s,t),iconBig:c(s),iconSmall:l(s,e)}};return e.each(s.concat(r),function(e){var s;switch(e.name){case"projectMember":s="Project Allocations";break;case"userStory":e.aliases.unshift("story","stories","us"),e.simpleFields.push("tasks-effort-sum","tasks-effortToDo-sum");break;case"general":case"assignable":e.isParentType=!0,e.discriminator={entityType:["id","name"]},e.detectType=p}("general"===e.parent||"assignable"===e.parent)&&e.simpleFields.push("customFields"),e.terms=f(e.name,s),"processInfo"===e.name&&e.refs&&(e.refs={}),"context"===e.name&&(e.refs||(e.refs={}),e.refs.culture&&delete e.refs.culture,e.refs.appContext&&delete e.refs.appContext,e.refs.selectedProjects={list:!0,name:"project"},e.simpleFields=["id","acid"]),t.register(e)}),t.register({name:"implementationHistory",aliases:["stats"]}),t.register({name:"solution"}),t.register({name:"prioritizer",fields:["id"],refs:[]}),t});
define('tau/target.process.rules.registrator',["Underscore","tau/store/types.targetprocess"],function(e,t){return{typeContainSimpleField:function(t,o){return e.find(t.simpleFields,function(e){return e===o})},registerRules:function(o,r){this.registeredEntityTypes={},this.rules=o,e.each(t.getDictionary(),this.registerType,this),o.register({type:"feature",changes:["initialEstimate"],fields:["timeRemain"]}),o.register({type:"iteration",changes:["startDate"],fields:["endDate"]}),o.register({type:"iteration",changes:["endDate"],fields:["startDate"]}),o.register({type:"teamIteration",changes:["startDate"],fields:["endDate"]}),o.register({type:"teamIteration",changes:["endDate"],fields:["startDate"]}),o.register({type:"testPlanRun",changes:["release"],fields:[{build:["id","name"]}]}),o.register({type:"testPlanRun",changes:["iteration","teamIteration"],fields:[{build:["id","name"]}]}),o.registerRule({name:"auto-include-before-save",type:"roleEffort",changes:["effort"],fields:[{assignable:["id","effort","effortToDo","effortCompleted","timeSpent","timeRemain"]}]}),o.registerRule({name:"auto-include-before-save",type:"userStory",changes:["release","iteration","teamIteration"],fields:[{tasks:[{release:["id","name"]},{iteration:["id","name"]},{teamIteration:["id","name"]}]}]}),o.registerRule({name:"auto-include-before-save",type:"task",changes:["entityState"],fields:[{release:["id","name"]},{iteration:["id","name"]},{teamIteration:["id","name"]}]}),o.registerRule({name:"auto-action-after-save",type:"assignable",changes:["times"],action:function(e){e.store.refresh("assignable",{id:e.data.id,fields:["effortCompleted","effortToDo","timeSpent","timeRemain",{roleEfforts:["id","effort","effortToDo"]}]}).done()}}),o.registerRule({name:"auto-action-after-save",type:"feature",changes:["userStories"],action:function(e){e.store.refresh("feature",{id:e.data.id,fields:["effortCompleted","effortToDo","timeSpent","timeRemain","userStories-count","effort",{roleEfforts:["id","effort","effortToDo"]}]}).done()}}),o.registerRule({name:"auto-action-after-save",type:"iteration",changes:["userStories|bugs"],action:function(e){e.store.refresh("iteration",{id:e.data.id,fields:["bugs-effortToDo-sum","bugs-effortCompleted-sum","userStories-effortToDo-sum","userStories-effortCompleted-sum"]}).done()}}),o.registerRule({name:"auto-action-after-save",type:"teamIteration",changes:["userStories|bugs"],action:function(e){e.store.refresh("teamIteration",{id:e.data.id,fields:["bugs-effortToDo-sum","bugs-effortCompleted-sum","userStories-effortToDo-sum","userStories-effortCompleted-sum"]}).done()}}),o.registerRule({name:"auto-action-after-save",type:"release",changes:["userStories"],action:function(e){e.store.refresh("release",{id:e.data.id,fields:["bugs-effortToDo-sum","bugs-effortCompleted-sum","userStories-effortToDo-sum","userStories-effortCompleted-sum",{features:["effortToDo","effortCompleted","userStories-count"]}]}).done()}}),o.registerRule({name:"auto-action-after-save",type:"userStory",changes:["tasks"],action:function(e){var t=e.data,o=t.cmd?t.cmd.type:t.obj?t.obj.type:t.type,r=t.cmd?t.cmd.config.id:null;"task"!==o||r?e.store.refresh("userStory",{id:e.data.id,fields:["effort","effortToDo","effortCompleted","timeSpent","timeRemain","tasks-count","tasks-effort-sum","tasks-effortToDo-sum"]}).done():e.store.refresh("userStory",{id:e.data.id,fields:["tasks-count","tasks-effort-sum","tasks-effortToDo-sum",{entityState:["id","name"]}]}).done()}}),o.registerRule({name:"auto-include-before-save",type:"task",changes:["entityState"],fields:[{userStory:["id","tasks-effort-sum","tasks-effortToDo-sum","effort","effortToDo","effortCompleted","timeSpent","timeRemain","tasks-count",{entityState:["id","name","isInitial","isFinal","isPlanned","isCommentRequired"]}]}]}),o.registerRule({name:"auto-include-before-save",type:"userStory",changes:["entityState"],fields:["tasks-effortToDo-sum",{feature:["effortToDo","effortCompleted","userStories-count"]},{iteration:["userStories-effortToDo-sum","userStories-effortCompleted-sum"]},{teamIteration:["userStories-effortToDo-sum","userStories-effortCompleted-sum"]},{release:["bugs-effortToDo-sum","bugs-effortCompleted-sum","userStories-effortToDo-sum","userStories-effortCompleted-sum",{features:["effortToDo","effortCompleted","userStories-count"]}]}]}),o.registerRule({name:"auto-action-after-save",type:"feature",changes:["userStories"],action:function(e){e.store.refresh("feature",{id:e.data.obj.id,fields:["effortToDo","effortCompleted","userStories-count"]}).done()}}),o.registerRule({name:"auto-include-before-save",type:"bug",changes:["entityState"],fields:[{iteration:["bugs-effortToDo-sum","bugs-effortCompleted-sum"]},{teamIteration:["bugs-effortToDo-sum","bugs-effortCompleted-sum"]}]}),o.registerRule({name:"auto-action-after-save",type:"roleEffort",changes:["effort"],action:function(t){var o=t.store,r=t.data.obj;o.get(r.type,{id:r.id,fields:[{assignable:["id"]}]}).done({success:function(t){t=t[0];var r=t.data.assignable.id,s=t.data.assignable.__type,i={task:[{userStory:["id","effort","effortToDo","effortCompleted","timeSpent","timeRemain","tasks-count","tasks-effort-sum","tasks-effortToDo-sum",{roleEfforts:["effort","effortToDo"]}]}],userStory:[{iteration:["userStories-effortToDo-sum","userStories-effortCompleted-sum"]},{teamIteration:["userStories-effortToDo-sum","userStories-effortCompleted-sum"]},{release:["userStories-effortToDo-sum","userStories-effortCompleted-sum"]},{feature:["userStories-count","effort","effortToDo","effortCompleted","timeSpent","timeRemain"]}],bug:[{iteration:["bugs-effortToDo-sum","bugs-effortCompleted-sum"]},{teamIteration:["bugs-effortToDo-sum","bugs-effortCompleted-sum"]},{release:["bugs-effortToDo-sum","bugs-effortCompleted-sum"]}]},a=i[s];if(a){var f=e(a).filter(function(t){var i=e.getFieldName(t);return o.isPropertyInitialized(r,s,i)});f.length&&o.refresh(s,{id:r,fields:f}).done()}}})}}),o.registerRule({name:"auto-action-after-save",type:"comment",action:function(t){var o=t.data,s=o.cmd["comment-practices-notification-opts"];if(s&&e(s).keys().length){var i=r.getNotificationService();i.notifyComment(o.id,s)}}})},registerType:function(t){var o=this.registeredEntityTypes,r=this.rules;if(!o.hasOwnProperty(t.name)){o[t.name]=!0,e.each(t.aliases,function(e){o[e]=!0});var s="endDate";t.refs.hasOwnProperty("entityState")&&this.typeContainSimpleField(t,s)&&(r.register({type:t.name,changes:["entityState"],fields:["endDate","leadTime","cycleTime"]}),r.register({type:t.name,changes:["entityState"],fields:[{roleEfforts:["effort","effortToDo"]}]}))}}}});
define('tau/store/factory',["Underscore","app.path","tau/core/class","tau/store/store","tau/store/repository","tau/store/services/service.rest","tau/core/global.bus","tau/rules/core","tau/rules/rule.auto-include-before-save","tau/rules/rule.auto-action-after-save","tau/rules/rule.auto-include-before-remove","tau/target.process.rules.registrator","tau/store/types","tau/store/db","tau/store/types.targetprocess"],function(t,e,i,s,r,n,a,u,l,o,h,c,p,g){var d=null;return i.extend({rulesDisabled:!1,clearSingles:function(){d=null,this.rulesEngine&&(this.rulesEngine.destroy&&this.rulesEngine.destroy(),delete this.rulesEngine),delete this.proxy,delete this.service,delete this.store},clear:function(){this.clearSingles(),delete this.initialData,delete this.appPath,delete this.rulesDisabled},setApplicationPath:function(t){this.appPath!==t&&(this.appPath=t)},getApplicationPath:function(){return this.appPath?this.appPath:e.get()},setInitialData:function(t){this.initialData=t},setService:function(t){this.service!==t&&(this.clearSingles(),this.service=t)},getService:function(){return this.service||(this.service=new n({appPath:this.getApplicationPath(),path:this.getRestPath()})),this.service},getRestPath:function(){return this.getApplicationPath()+"/api/v1"},getDb:function(){return d||(d=new g({types:p.getDictionary()})),d},setProxy:function(t){this.proxy=t},getProxy:function(){return this.proxy||(this.proxy=new r({db:this.getDb(),service:this.getService()})),this.initialData&&(this.proxy.registerData(this.initialData),delete this.initialData),this.proxy},disableRules:function(){this.rulesDisabled=!0},enableRules:function(){this.rulesDisabled=!1},initRules:function(t){this.rulesDisabled!==!0&&(this.rulesEngine=new u({store:this.store,rules:[],rulesImpl:[l,o,h]}),c.registerRules(this.rulesEngine,t))},getStore:function(t){return this.store||(t=t||{},t.proxy=this.getProxy(),t.eventEmitter=t.eventEmitter||a.get(),this.store=new s(t),this.initRules(t.services)),this.store},setStore:function(t){this.store=t}})});
define('tau/services/keyboard.manager',["Underscore","jQuery","tau/core/class"],function(n,e,t){return t.extend({init:function(){this._handlers=[],e(document).keydown(n.bind(this._keyDown,this))},pushHandler:function(n){this._handlers.push(n)},popHandler:function(){this._handlers.pop()},_keyDown:function(e){var t=this._handlers.length>0?n.last(this._handlers):null;t&&t.handleKeyDown&&t.handleKeyDown(e)}})});
define('tau/services/state.manager',["Underscore","tau/core/class"],function(e,t){var a=function(){},i=t.extend({init:function(e){e=e||{};var t=[];if(e.state||t.push("state"),e.service||t.push("service"),t.length>0)throw"State manager should be initialized with following parameters: ["+t.join(",")+"]";this.subscriptions={},this.cfg=e},get:function(t){var i=this;if(!t.id)throw"StateManager.get operation requires parameter [id]";var r=e.defaults(t,{fields:[],callback:a}),n=this.cfg.service;return n.get(r),i},set:function(t){var i=this;if(!t.id)throw"StateManager.set operation requires parameter [id]";var r=e.defaults(t,{set:{},callback:a}),n=this.cfg.service;return n.set(r),i},update:function(t){var a=this,i=this.cfg.state,r=[];e(t).chain().keys().each(function(n){r.push(n);var s=i[n]||{},c=t[n];if(!e.isString(c)&&!e.isString(s)){var l=e(s).keys(),u=e(c).keys();e(e.union(l,u)).each(function(t){if(!e.isEqual(c[t],s[t])){var i=s.hasOwnProperty(t)?s[t]:null,r=c.hasOwnProperty(t)?c[t]:null;a.applyChanges({paramId:n,fieldName:t,value:r,delta:{prev:i,curr:r}})}})}}),e(i).chain().keys().difference(r).each(function(t){var r=i[t];e.isString(r)||e(r).chain().keys().each(function(e){a.applyChanges({paramId:t,fieldName:e,value:null,delta:{prev:r[e],curr:null}})})}),a.cfg.state=t},applyChanges:function(t){for(var a=this.subscriptions,i=e.clone((a[t.paramId]||{})[t.fieldName]||[]),r=0,n=i.length;n>r;r++){var s=i[r];s&&!s.isDeleted&&s.callback.call(s.scope,t)}},bind:function(e){var t=e.paramId,a=e.fieldName,i=e.callback,r=e.listener,n=this.subscriptions;return n[t]=n[t]||{},n[t][a]=n[t][a]||[],n[t][a].push({callback:i,scope:r}),this},unbind:function(t){for(var a=this.subscriptions,i=e(a).keys(),r=0,n=i.length;n>r;r++){for(var s=i[r],c=e(a[s]).keys(),l=0,u=c.length;u>l;l++){for(var o=c[l],h=a[s][o],f=h.length-1;f>=0;f--)h[f].scope===t&&(h[f].isDeleted=!0,h.splice(f,1));0===a[s][o].length&&delete a[s][o]}0===e(a[s]).keys()&&delete a[s]}}});return i});
define('tau/services/service.routing',["Underscore","tau/core/class"],function(e,t){var a=t.extend({init:function(e){e=e||{},this.config=e,this.external=e.external},get:function(e){for(var t={},a=e.id,n=e.fields,r=n.length,i=this.external.getHashParam(a),s=0;r>s;s++){var l=n[s];t[l]=i.hasOwnProperty(l)?i[l]:null}e.callback(t)},set:function(t){var a=t.id,n=t.set,r=this.external.getHashParam(a),i=e(r).extend(n);this.external.setHashParam(a,i),t.callback(i)}});return a});
define('libs/parseUri',[],function(){function e(r){for(var o=e.options,t=o.parser[o.strictMode?"strict":"loose"].exec(r),s={},n=14;n--;)s[o.key[n]]=t[n]||"";return s[o.q.name]={},s[o.key[12]].replace(o.q.parser,function(e,r,t){r&&(s[o.q.name][r]=t)}),s}return e.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},e});
define('tau/services/service.hash',["Underscore","jQuery","tau/core/class","tau/core/event","libs/parseUri","libs/json2"],function(t,n,e,i,r){var s=e.extend({init:function(n){this._id=t.uniqueId("sh"),this.setWindow(n.getWindow()),this.setEncoder(n.getHashEncoder()||this.encoderDefault())},setWindow:function(e){this.window&&n(this.window).unbind("hashchange."+this._id),this.window=t.defaults(e||{},{location:{hash:""}}),n(this.window).bind("hashchange."+this._id,t.bind(function(){this.fire("changed",{hash:this.getHash()})},this))},setEncoder:function(t){this.paramsEncoder=t},getHash:function(){for(var t=this.window.location.hash;0===t.indexOf("#");)t=t.substr(1);return this.tryDecodeUri(t)},setHref:function(t){this.window.location.href=t},getHref:function(){return this.window.location.href},getHrefParsed:function(){return r(this.getHref())},setHash:function(t){this.window.location.replace("#"+t)},triggerChange:function(t){n(this.window).trigger("hashchange."+this._id,{hash:t})},hashParams:function(){for(var t={},n=this.getHash(),e=n.split("&"),i=0,r=e.length;r>i;i++){var s=e[i],a=s.indexOf("=");if(-1!==a){var h=s.substr(0,a),o=s.substr(a+1);t[h]=this.paramsEncoder.decode(o)}}return t},getHashParam:function(t,n){var e=this.hashParams();return e[t]||(arguments.length>1?n:{})},setHashParam:function(t,n){var e=this.getHash(),i=this.mergeHashParams(e,t,n);this.setHash(i)},applyHashObject:function(n){var e=this,i=this.getHash();t.each(n,function(t,n){i=this.mergeHashParams(i,n,t)},e),e.setHash(i)},mergeHashParams:function(t,n,e){t="&"!==t.charAt(0)?"&"+t:t;var i=t.indexOf("&"+n+"="),r=-1!==i?i:t.length;i=t.indexOf("&",1+r);var s=-1!==i?i:t.length,a="";if(null!==e){var h=this.paramsEncoder.encode(e),o="&"===t?"":"&";a=o+n+"="+h}var c=t.substring(0,r),u=t.substring(s),d=c+a+u;return d="&"!==d.charAt(0)?d:d.substring(1)},tryDecodeUri:function(t){var n=t;try{n=decodeURIComponent(t)}catch(e){}return n},onHashChange:function(t){this.on("changed",t,t)},unbindHashChange:function(t){this.removeListener("changed",t,t)},encoderDefault:function(){return{encode:function(n){var e=n;return t.isObject(n)&&(e=JSON.stringify(n)),e},decode:function(t){var n=t;return"{"===n.charAt(0)&&"}"===n.charAt(n.length-1)&&(n=JSON.parse(n)),n}}},setDefaultEncoder:function(){this.paramsEncoder=this.encoderDefault()},setFakeWindow:function(){var e,i=t.toArray(arguments);e=2==i.length?{hash:i[0],href:i[1]}:t.isString(i[0])?{hash:i[0]}:i[0]||{};var r=n("<div />");r.location=t.defaults(e,{hash:"",href:"",replace:function(n){r.location.hash=t.asString(n),r.trigger("hashchange",{})}}),this.setWindow(r)}});return s.prototype.triggerHashChange=s.prototype.triggerChange,i.implementOn(s.prototype),s});
define('tau/utils/utils.routing/utils.routing.store.hash',["Underscore","jQuery","tau/core/class","tau/core/event","libs/parseUri"],function(t,e,r,a,n){var i=r.extend({init:function(r){this.config=t.defaults(r,{window:window,v2:!1,safe:!1,encodeBy:function(t){return t},decodeBy:function(t){try{t=decodeURIComponent(t)}catch(e){}return t}}),this.window=this.config.window||window,this.config.v2&&(this.config.external=this.config.configurator.createExternal(this.window)),this.params=[];var a=this;this.hashChangeHandler=function(t){t.stopPropagation(),t.preventDefault();var e=t.hash||t.target.location.hash;a.fire("urlChanged",{url:a.parseUrl(e)})},e(this.window).bind("hashchange",this.hashChangeHandler),this.destroyHandler=function(){a.fire("destroyed",{})},e(this.window).bind("unload",this.destroyHandler)},_extract:function(t){var e=t;if(this.config.safe){t="?"+t;var r=n(t);this.params=r.queryKey,e=this.params[this.config.safeParameterName]||""}return e},_generateV2:function(e,r){var a="||legacystate",n=this.config.external,i=n.getHash(),s=this.config.configurator.createExternal({location:{hash:i}}),o=!t.isEmpty(e.states)&&r?e.states:{};return s.setHashParam(a,o),s.getHash()},_generate:function(r,a){a=!!a;var n="";if(this.config.v2)return n=this._generateV2(r,a);var i=r.url;return!t.isEmpty(r.states)&&a&&(i+="||"+JSON.stringify(r.states)),n=i,this.config.safe&&(this.params[this.config.safeParameterName]=i,n=e.param(this.params)),this.config.encodeBy(n)},_parseUrlV2:function(t){var e={},r=this.config.configurator.createExternal({location:{hash:t}});return e.source="#"+r.getHash(),e.states=r.getHashParam("||legacystate"),e.url=r.getHashParam(this.config.safeParameterName),e},parseUrl:function(t){if(this.config.v2){var e=this._parseUrlV2(t);return e}t&&"#"==t[0]&&(t=t.slice(1));var r=this._extract(t);try{r=this.config.decodeBy(r)}catch(a){}var n={url:null,states:{},source:"#"+t},i=r.split("||");if(n.url=i[0],i[1])try{n.states=JSON.parse(i[1])}catch(a){}return n},generateUrl:function(t,e){return this._generate(t,e)},setUrl:function(e){var r="#";t.isObject(e)&&e.hasOwnProperty("url")&&e.hasOwnProperty("states")?r=this._generate(e,!0):t.isString(e)&&(r=e),this.window.location.hash=r},getUrl:function(){return this.parseUrl(this.window.location.hash)}});return a.implementOn(i.prototype),i});
define('libs/base64/base64',[],function(){function t(){this.buffer=[]}function e(t){this._input=t,this._index=-1,this._buffer=[]}function r(t){this._input=t,this._index=-1,this._buffer=[]}t.prototype.append=function(t){return this.buffer.push(t),this},t.prototype.toString=function(){return this.buffer.join("")};var i={codex:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(r){for(var i=new t,n=new e(r);n.moveNext();){var h=n.current;n.moveNext();var u=n.current;n.moveNext();var s=n.current,f=h>>2,o=(3&h)<<4|u>>4,c=(15&u)<<2|s>>6,d=63&s;isNaN(u)?c=d=64:isNaN(s)&&(d=64),i.append(this.codex.charAt(f)+this.codex.charAt(o)+this.codex.charAt(c)+this.codex.charAt(d))}return i.toString()},decode:function(e){for(var i=new t,n=new r(e);n.moveNext();){var h=n.current;if(128>h)i.append(String.fromCharCode(h));else if(h>191&&224>h){n.moveNext();var u=n.current;i.append(String.fromCharCode((31&h)<<6|63&u))}else{n.moveNext();var u=n.current;n.moveNext();var s=n.current;i.append(String.fromCharCode((15&h)<<12|(63&u)<<6|63&s))}}return i.toString()}};return e.prototype={current:Number.NaN,moveNext:function(){if(this._buffer.length>0)return this.current=this._buffer.shift(),!0;if(this._index>=this._input.length-1)return this.current=Number.NaN,!1;var t=this._input.charCodeAt(++this._index);return 13==t&&10==this._input.charCodeAt(this._index+1)&&(t=10,this._index+=2),128>t?this.current=t:t>127&&2048>t?(this.current=t>>6|192,this._buffer.push(63&t|128)):(this.current=t>>12|224,this._buffer.push(t>>6&63|128),this._buffer.push(63&t|128)),!0}},r.prototype={current:64,moveNext:function(){if(this._buffer.length>0)return this.current=this._buffer.shift(),!0;if(this._index>=this._input.length-1)return this.current=64,!1;var t=i.codex.indexOf(this._input.charAt(++this._index)),e=i.codex.indexOf(this._input.charAt(++this._index)),r=i.codex.indexOf(this._input.charAt(++this._index)),n=i.codex.indexOf(this._input.charAt(++this._index)),h=t<<2|e>>4,u=(15&e)<<4|r>>2,s=(3&r)<<6|n;return this.current=h,64!=r&&this._buffer.push(u),64!=n&&this._buffer.push(s),!0}},i});
define('tau/utils/utils.storage.cookie',["libs/base64/base64"],function(e){var n=function(n){var t=e.encode(n);return t="#"+t},t=function(n){var t=n;return"#"===n.charAt(0)&&(n=n.substring(1),t=e.decode(n)),t},r=function(e){return"$"+e},i={set:function(e,t,i){var o=r(e),u=new Date;u.setTime(u.getTime()+31536e6),i=i||u.toGMTString();var a=JSON.stringify(t);a=n(a);var s=[o+"="+a,"expires="+i,"path=/"].join("; ");document.cookie=s},get:function(e){var n=r(e);n+="=";for(var i,o=document.cookie.split(";"),u=0;u<o.length;u++){for(var a=o[u];" "===a.charAt(0);)a=a.substring(1,a.length);0===a.indexOf(n)&&(i=a.substring(n.length,a.length),i=t(i),i=JSON.parse(i))}return i},remove:function(e){return i.set(e,"",-1)}};return i});
define('tau/utils/utils.storage',["tau/utils/utils.storage.cookie"],function(t){var e=!!(window.localStorage&&window.localStorage.getItem&&window.localStorage.setItem);return e?{set:function(t,e){return localStorage.setItem(t,JSON.stringify(e)),!0},get:function(t){var e=localStorage.getItem(t);if(e)try{e=JSON.parse(e)}catch(o){}return e},remove:function(t){return localStorage.removeItem(t)}}:t});
!function(i){function t(i,t,n,e,s){this._listener=t,this._isOnce=n,this.context=e,this._signal=i,this._priority=s||0}var n={VERSION:"0.6"};t.prototype={active:!0,execute:function(i){var t;return this.active&&(t=this._listener.apply(this.context,i),this._isOnce&&this.detach()),t},detach:function(){return this._signal.remove(this._listener)},getListener:function(){return this._listener},dispose:function(){this.detach(),this._destroy()},_destroy:function(){delete this._signal,delete this._isOnce,delete this._listener,delete this.context},isOnce:function(){return this._isOnce},toString:function(){return"[SignalBinding isOnce: "+this._isOnce+", active: "+this.active+"]"}},n.Signal=function(){this._bindings=[]},n.Signal.prototype={_shouldPropagate:!0,active:!0,_registerListener:function(i,n,e,s){if("function"!=typeof i)throw new Error("listener is a required param of add() and addOnce() and should be a Function.");var r,o=this._indexOfListener(i);if(-1!==o){if(r=this._bindings[o],r.isOnce()!==n)throw new Error("You cannot add"+(n?"":"Once")+"() then add"+(n?"Once":"")+"() the same listener without removing the relationship first.")}else r=new t(this,i,n,e,s),this._addBinding(r);return r},_addBinding:function(i){var t=this._bindings.length;do--t;while(this._bindings[t]&&i._priority<=this._bindings[t]._priority);this._bindings.splice(t+1,0,i)},_indexOfListener:function(i){for(var t=this._bindings.length;t--;)if(this._bindings[t]._listener===i)return t;return-1},add:function(i,t,n){return this._registerListener(i,!1,t,n)},addOnce:function(i,t,n){return this._registerListener(i,!0,t,n)},remove:function(i){if("function"!=typeof i)throw new Error("listener is a required param of remove() and should be a Function.");var t=this._indexOfListener(i);return-1!==t&&(this._bindings[t]._destroy(),this._bindings.splice(t,1)),i},removeAll:function(){for(var i=this._bindings.length;i--;)this._bindings[i]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(){if(this.active){var i=Array.prototype.slice.call(arguments),t=this._bindings.slice(),n=this._bindings.length;this._shouldPropagate=!0;do n--;while(t[n]&&this._shouldPropagate&&t[n].execute(i)!==!1)}},dispose:function(){this.removeAll(),delete this._bindings},toString:function(){return"[Signal active: "+this.active+" numListeners: "+this.getNumListeners()+"]"}},i.signals=n}(window||global||this);
define("libs/crossroads.js/dist/js-signals", function(){});

define('libs/crossroads.js/dist/crossroads',["./js-signals"],function(){!function(t){function e(t,e){for(var r=t.length;r--;)if(t[r]===e)return r;return-1}function r(t,e){return"[object "+t+"]"===h.call(e)}function n(t){return r("RegExp",t)}function i(t){return r("Array",t)}function a(t){return r("Function",t)}function s(t){return t}var u,o,c,h=Object.prototype.toString;u=function(){function t(t,e,n){var i=new o(t,e,n,m);return r(i),i}function r(t){var e=n();do--e;while(l[e]&&t._priority<=l[e]._priority);l.splice(e+1,0,t)}function n(){return l.length}function i(t){var e=a(t);e>=0&&l.splice(e,1),t._destroy()}function a(t){return e(l,t)}function s(){for(var t=n();t--;)l[t]._destroy();l.length=0}function u(t){t=t||"";var e=h(t),r=e?f(t,e):null;e?(r?e.matched.dispatch.apply(e.matched,r):e.matched.dispatch(),d.dispatch(t,e,r)):p.dispatch(t)}function h(t){for(var e,r=n();e=l[--r];)if(e.match(t))return e;return null}function f(t,e){return c.getParamValues(t,e._matchRegexp)}var l=[],p=new signals.Signal,d=new signals.Signal,m={_routes:l,addRoute:t,removeRoute:i,removeAllRoutes:s,parse:u,bypassed:p,routed:d,getNumRoutes:n,toString:function(){return"[crossroads numRoutes:"+n()+"]"}};return m},o=function(t,e,r,i){var a=n(t);this._crossroads=i,this._pattern=t,this._paramsIds=a?null:c.getParamIds(this._pattern),this._matchRegexp=a?t:c.compilePattern(t),this.matched=new signals.Signal,e&&this.matched.add(e,this),this._priority=r||0},o.prototype={rules:void 0,match:function(t){return this._matchRegexp.test(t)&&this._validateParams(t)},_validateParams:function(t){var e,r=this.rules;for(e in r)if(r.hasOwnProperty(e)&&!this._isValidParam(t,e))return!1;return!0},_isValidParam:function(t,r){var s,u=this.rules[r],o=this._getParamValuesObject(t),c=o[r];return n(u)?s=u.test(c):i(u)?s=-1!==e(u,c):a(u)&&(s=u(c,t,o)),s||!1},_getParamValuesObject:function(t){for(var e=this._paramsIds,r=c.getParamValues(t,this._matchRegexp),n={},i=e?e.length:0;i--;)n[e[i]]=r[i];return n.request_=s(t),n},dispose:function(){this._crossroads.removeRoute(this)},_destroy:function(){this.matched.dispose(),this.matched=this._pattern=this._matchRegexp=null},toString:function(){return'[Route pattern:"'+this._pattern+'", numListeners:'+this.matched.getNumListeners()+"]"}},c=function(){function t(t){for(var e,r=[],n=new RegExp(h);e=n.exec(t);)r.push(e[1]);return r}function e(t){return t=t?r(t):"",t=t.replace(/\/$/,""),t=i(t),t=n(t),new RegExp("^"+t+"/?$")}function r(t){return t.replace(h,f)}function n(t){return t.replace(l,c.source)}function i(t){return t.replace(o,"\\$&")}function a(t,e){var r=e.exec(t);return r&&(r.shift(),r=u(r)),r}function u(t){for(var e=t.length,r=[];e--;)r[e]=s(t[e]);return r}var o=/[\\\.\+\*\?\^\$\[\]\(\)\{\}\/\'\#]/g,c=/([^\/]+)/,h=/\{([^\}]+)\}/g,f="___CR_PARAM___",l=new RegExp(f,"g");return{getParamIds:t,getParamValues:a,compilePattern:e}}(),t.crossroads=u}(window||this)});
define('tau/utils/utils.routing',["Underscore","jQuery","tau/core/class","tau/core/event","tau/utils/utils.routing/utils.routing.store.hash","tau/utils/utils.storage","libs/crossroads.js/dist/crossroads"],function(t,e,r,s,i,n){var o=r.extend({init:function(t){var e=window.crossroads;return this.backend=e(),this.options=t,this.window=this.options.window||window,this.store=new i(this.options),this.v2=t.v2===!0,this.current={url:"",states:{},source:""},this.processed={url:"",states:{},source:""},this.referer=this.restoreReferer(),this.reset(),this},register:function(e,r){var s=e;arguments.length>1&&(s={pattern:e,callback:r});{var i=this;this.backend.addRoute(s.pattern,function(){var e=Array.prototype.slice.call(arguments),r=this,n={};t.forEach(r._paramsIds,function(t,r){n[t]=e[r]});var o=i.processed.states;s.callback.apply(this,t.union([n,o],e))})}return this},register404:function(t){return this.backend.bypassed.add(t),this},_applyRouter:function(t){this.backend.parse(t)},start:function(){var e=this,r=t.bind(this._applyRouter,this),s=function(s){if(this.processed=s,this.processed.url!==this.current.url)return this.setReferer(t.clone(this.current)),this.current=this.processed,void r(this.current.url);var i=this.current.states,n=this.processed.states,o=t.union(t.keys(i),t.keys(n)),h={};t.forEach(o,function(t){i[t]!=n[t]&&(h[t]=n[t]||null)}),t.forEach(h,function(t,r){e.fire("stateChanged",{name:r,value:t})}),this.current=this.processed};this.setChangeListener(t.bind(s,this));var i=function(){this.setReferer(t.clone(this.current))};return this.setDestroyListener(t.bind(i,this)),this},redirect:function(t,e){e=e||{},this.skipTrigger=e.trigger===!1?!0:!1,this.window.open(t,"_self")},setInternalUrl:function(t){this.setUrl({url:t,states:{}})},getUrl:function(){return this.store.getUrl()},setUrl:function(t){this.store.setUrl(t)},generateUrl:function(t){return"undefined"==typeof t&&(t=this.current),this.store.generateUrl(t,!0)},setChangeListener:function(t){this.changeListener=function(e){this.skipTrigger?this.skipTrigger=!1:t(e.data.url)},this.store.on("urlChanged",this.changeListener,this)},setDestroyListener:function(t){this.destroyListener=function(e){t(e.data.url)},this.store.on("destroyed",this.destroyListener,this)},reset:function(){return this.backend.removeAllRoutes(),this.backend.bypassed.removeAll(),this},execute:function(t){var e=this.store.parseUrl(t);return this.current=e,this._applyRouter(e.url),this},stop:function(){this.changeListener&&(this.store.removeListener("urlChanged",this.changeListener,this),delete this.changeListener),this.destroyListener&&(this.store.removeListener("destroy",this.destroyListener,this),delete this.destroyListener)},getStateParameter:function(t){return this.current.states[t]},setStateParameter:function(t,e,r){this.current.states[t]=e,this.setUrl(this.current),r&&this.fire("stateChanged",{name:t,value:e})},getReferer:function(){return this.referer},setReferer:function(t){this.referer=t,n.set("utils.routing.referer",this.referer)},restoreReferer:function(){var t=n.get("utils.routing.referer");return t}});return s.implementOn(o.prototype),o});
define('tau/utils/utils.history',["Underscore","tau/core/class","tau/core/event"],function(t,r,n){var i=r.extend({init:function(){this.stack=[],this.current=null},size:function(){return this.stack.length},push:function(t){return this.stack.push(t),this},pop:function(){return this.stack.pop()},setCurrent:function(t){this.current=t,this.fire("setCurrent")},getCurrent:function(){return this.current},process:function(){this.current&&(this.stack=this.getFlatStack(),this.stack.push(t.clone(this.current))),this.current=null},updateCurrent:function(t){this.current&&(this.current.url=t.url||this.current.url,this.current.title=t.title||this.current.title,this.current.id=t.id||this.current.id,this.fire("setCurrent"))},exclude:function(r,n){this.stack=t.reject(this.stack,function(t){return t.id&&t.id==r}),this.current&&this.current.id==r&&(this.current=null),n!==!1&&this.fire("changed")},getFlatStack:function(){var r=this.stack,n=r;if(this.current){var i=t.find(n,t.bind(function(t){return t.id&&t.id===this.current.id},this));i&&(n=r.slice(0,t.indexOf(n,i)))}return n},reset:function(){this.current=null,this.stack=[]}});return n.implementOn(i.prototype),i});
define('tau/storage/app.state.store.seriailzer',["Underscore"],function(){return{extractSharedState:function(i){var n=null;return i.acid&&(n={},n[i.id]={acid:i.acid}),n},serialize:function(i){return i.acid?i.id+'={"acid":"'+i.acid+'"}':null}}});
define('tau/utils/utils.urlBuilder.service',["Underscore","jQuery","tau/core/class","tau/storage/app.state.store.seriailzer","tau/services/service.hash"],function(t,e,r,i,n){return r.extend({init:function(e){this.applicationPath=e.getApplicationPath(),this.currentAcid=e.getCurrentAcid(),this.configurator=e,this.stateManager=e.getStateManager(),this.stateManager.get({id:"appConfig",fields:["acid"],callback:t.bind(function(t){t.acid&&(this.currentAcid=t.acid)},this)}),this.stateManager.bind({paramId:"appConfig",fieldName:"acid",listener:this,callback:t.bind(function(t){t.value&&(this.currentAcid=t.value)},this)}),this.pages={view:"/RestUI/TpView.aspx"}},getApplicationPath:function(){return this.applicationPath},getCurrentAcid:function(){return this.currentAcid},hash:function(){var e=new n(this.configurator),r={location:{hash:"",replace:function(t){r.location.hash=t}}};return e.setWindow(r),{append:function(r){return t.forEach(r,function(t,r){e.setHashParam(r,t)}),this},build:function(){return"#"+e.getHash()}}},getAddImpedimentUrl:function(t){return this.getApplicationPath()+"/Project/Tracking/Impediment/Edit.aspx?AssignableID="+t},getAddTimeUrl:function(t){return this.getApplicationPath()+"/Project/Tracking/Time/Edit.aspx?AssignableID="+t},getAddTaskForUserStoryUrl:function(t){return this.getApplicationPath()+"/Project/Planning/Task/Edit.aspx?UserStoryID="+t},getAddTaskForRequestUrl:function(t){return this.getApplicationPath()+"/Project/Planning/Task/Edit.aspx?RequestID="+t},getSplitForUserStoryUrl:function(t,e){return this.getApplicationPath()+"/Project/Planning/UserStory/Split.aspx?UserStoryID="+t+"&SplittedStoryID="+e},getAddBugForUserStoryUrl:function(t){return this.getApplicationPath()+"/Project/QA/Bug/Edit.aspx?UserStoryID="+t},getAddBugForRequestUrl:function(t){return this.getApplicationPath()+"/Project/QA/Bug/Edit.aspx?RequestID="+t},getAddTestCaseForUserStoryUrl:function(t){return this.getApplicationPath()+"/Project/QA/TestCase/Edit.aspx?UserStoryID="+t},getAssignTestCasesForTestPlanUrl:function(t){return this.getApplicationPath()+"/Project/QA/TestPlan/AssignTestCases.aspx?TestPlanID="+t},getAddTestRunForTestPlanUrl:function(t){return this.getApplicationPath()+"/Project/QA/TestPlanRun/Edit.aspx?TestPlanID="+t},getAddUserStoryForRequestUrl:function(t){return this.getApplicationPath()+"/Project/Planning/UserStory/Edit.aspx?RequestID="+t},getAddUserStoryForFeatureUrl:function(t){return this.getApplicationPath()+"/Project/Planning/UserStory/Edit.aspx?FeatureID="+t},getAddUserStoryForIterationUrl:function(t){return this.getApplicationPath()+"/Project/Planning/UserStory/Edit.aspx?IterationID="+t},getAddUserStoryForTeamIterationUrl:function(t){return this.getApplicationPath()+"/Project/Planning/UserStory/Edit.aspx?TeamIterationID="+t},getAddFeatureForRequestUrl:function(t){return this.getApplicationPath()+"/Project/Planning/Feature/Edit.aspx?RequestID="+t},getAddTestCaseForTestPlanRunUrl:function(t){return this.getApplicationPath()+"/Project/QA/TestPlan/AssignTestCases.aspx?TestPlanID="+t},getAddIterationForReleaseUrl:function(t){return this.getApplicationPath()+"/Project/Planning/Iteration/Edit.aspx?ReleaseID="+t},getBoardPageRelativePath:function(){return"restui/board.aspx"},getPrintUrlRelative:function(t,e){return"RestUI/Print.aspx?acid="+this.getCurrentAcid()+"#"+e.toLowerCase()+"/"+t+"/print"},getNewViewUrl:function(t,e,r){return this.getRelativeBoardPageUrl(e.toLowerCase()+"/"+t,r===!0?void 0:r)},getDashboardUrl:function(){return this.getRelativeBoardPageUrl("board/current")},getShortViewUrl:function(t){return this.getApplicationPath()+"/entity/"+t.id},getEditUrl:function(e,r){var i=this.getApplicationPath()+"/",n=r.toLowerCase();return"project"==n?i+="EditProject.aspx?ProjectID="+e:(i+="Project/",i+=t.indexOf(["bug","testplan","testcase","testplanrun"],n)>-1?"QA/":t.indexOf(["impediment"],n)>-1?"Tracking/":t.indexOf(["request"],n)>-1?"HelpDesk/":"time"===n?"Tracking/":"Planning/",i+=r+"/Edit.aspx?"+r+"ID="+e),i},getAvatarUrl:function(t,e){return this.getApplicationPath()+"/Avatar.ashx?UserId="+t+"&size="+e},getLogoutUrl:function(){return this.getApplicationPath()+"/login.aspx?logout=true"},getUserUrl:function(t,e){var r="/User/View.aspx?UserID=";return e&&"Requester"==e&&(r="/User/Requester/View.aspx?RequesterID="),[this.getApplicationPath(),r,t].join("")},getRelativeBoardPageUrl:function(e,r){if(t.isUndefined(r))r=this.configurator.getAppStateStore().settings;else if(t.isString(r)){var n=this.configurator.getAppStateStore().settings;n.acid=r,r=n}var a=this.hash();return a.append({page:e}),a.append(i.extractSharedState(r)),a.build()},getRelativeBoardUrl:function(t,e){return this.getRelativeBoardPageUrl("board/"+t,e)},getAdminWorkflowEdit:function(t){return this.getApplicationPath()+"/Admin/Workflow.aspx?acid="+this.getCurrentAcid()+"&ProcessID="+t+"&rmnav=1&hideleftmenu=1"},_build:function(t){var r="";r=t.path;var i=e.param(t.params);return i&&(r=r+"?"+i),t.hash&&(r=r+"#"+t.hash),r},destroy:function(){this.stateManager.unbind(this)}})});
!function(){"use strict";function o(o,n,e,t,r,a){n[o]&&(e.push(o),(n[o]===!0||1===n[o])&&t.push(r+o+"/"+a))}function n(o,n,e,t,r){var a=t+n+"/"+r;require._fileExists(o.toUrl(a))&&e.push(a)}function e(o,n,t){var r;for(r in n)!n.hasOwnProperty(r)||o.hasOwnProperty(r)&&!t?"object"==typeof n[r]&&e(o[r],n[r],t):o[r]=n[r]}var t=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define('i18n',["module"],function(r){var a=r.config();return{version:"2.0.1",load:function(r,i,l,u){u=u||{},u.locale&&(a.locale=u.locale);var f,c,s,g=t.exec(r),v=g[1],p=g[4],h=g[5],d=p.split("-"),y=[],w={},x="";if(g[5]?(v=g[1],f=v+h):(f=r,h=g[4],p=a.locale,p||(p=a.locale="undefined"==typeof navigator?"root":(navigator.language||navigator.userLanguage||"root").toLowerCase()),d=p.split("-")),u.isBuild){for(y.push(f),n(i,"root",y,v,h),c=0;c<d.length;c++)s=d[c],x+=(x?"-":"")+s,n(i,x,y,v,h);i(y,function(){l()})}else i([f],function(n){var t,r=[];for(o("root",n,r,y,v,h),c=0;c<d.length;c++)t=d[c],x+=(x?"-":"")+t,o(x,n,r,y,v,h);i(y,function(){var o,t,a;for(o=r.length-1;o>-1&&r[o];o--)a=r[o],t=n[a],(t===!0||1===t)&&(t=i(v+a+"/"+h)),e(w,t);l(w)})})}}})}();
define('tau/nls/tokens',{root:{TargetProcess:"Targetprocess",board:"board",list:"list","Show in menu to all users":"Show in menu to all users","Remove board":"Remove board","show more":"show more"},"ru-ru":!0});

define('tau/nls/translator',["Underscore","i18n!tau/nls/tokens"],function(n,t){var e=function(e){var r=t.hasOwnProperty(e)?t[e]:e;return n.isFunction(r)?r():r};return e.gettext=e,e});
define('tau/store/services/service.globalSettings',["jQuery","tau/core/class"],function(e,n){var t=null,i=n.extend({init:function(e){this.config=e},resetSettings:function(){t=null},getGlobalSettings:function(e){var n=function(e,n){e.success&&e.success.call(e.scope,n.d)};return t?void n(e,t):void this.sendRequest("GlobalSettingsService","GetGlobalSettings",null,function(i){t=i,n(e,i)},function(n){e.failure&&e.failure.call(e.scope,n)})},sendRequest:function(n,t,i,s,c){var u=this.config.appPath+"/PageServices/"+n+".asmx/"+t,a={contentType:"application/json",type:"POST",success:s,error:c};return i&&(a.data=JSON.stringify(i)),e.ajax(u,a)}});return i});
define('tau/services/service.applicationContext',["Underscore","jQuery","tau/core/class","tau/core/event"],function(e,t,i,s){var o=i.extend({dirtyState:!1,init:function(e){this.configurator=e,this.store=e.getStore(),this.store2=e.getStore2(),this.onApplicationContextRetrieved=t.Callbacks()},refreshChoice:function(){this.fire("refreshChoice.after")},setCurrentAcid:function(e,t){this.store.save("context",{acid:e}).done(t)},getTeamsProjectsAvailable:function(e){return this.configurator.getStore2().getTeamsProjectsAvailable(e)},appendToContext:function(t,i,s){return s.get({fields:["acid"]}).then(function(e){return this.getApplicationContext({acid:e.acid})}.bind(this)).then(function(s){var o={project:s.selectedProjectIds,team:s.selectedTeamIds};o[t.toLowerCase()]=e.union(o[t.toLowerCase()],i);var n={projectIds:o.project,teamIds:o.team};return this.getApplicationContext(n)}.bind(this)).then(function(e){return s.set({set:{acid:e.acid}})}.bind(this))},findByEntity:function(e){var i=t.Deferred();return this.getApplicationContext({id:e.id},{success:function(e){i.resolve(e)},failure:function(e){i.reject(e)}}),i},markAsDirty:function(){this.dirtyState=!0},_getErrorMessage:function(t){var i=t[0]||{};return e.complexKey(i,"data.response.Message")||"Failed to load application context"},getApplicationContext:function(i,s){var o=t.Deferred(),n=this,r={fields:["id","acid","culture","edition","appContext",{loggedUser:["id","email","isAdministrator"]},{processes:["id","name","terms","practices","customFields"]},{selectedProjects:["id","name",{process:["id","name"]}]},{selectedTeams:["id","name"]}]};i.hasOwnProperty("acid")?r.acid=i.acid:i.hasOwnProperty("ids")&&(r.ids=i.ids),(i.hasOwnProperty("projectIds")||i.hasOwnProperty("projectId"))&&(r.projectIds=i.projectIds||i.projectId),(i.hasOwnProperty("teamIds")||i.hasOwnProperty("teamId"))&&(r.teamIds=i.teamIds||i.teamId),r.id=i.id||i.acid,r.failureGlobal=!1;var a,c;r.id?this.dirtyState?(c=function(){this.dirtyState=!1}.bind(this),a="refresh"):a="get":a="turboGet";var d=function(e,t){e.availableProcesses=t.availableProcesses},l=function(t,i){var s=e(i.teams).pluck("id"),o=e(i.projects).pluck("id");t.teamIdsAvailable=s,t.selectedTeamIdsAvailable=e.intersection(t.selectedTeamIds,s),t.projectIdsAvailable=o,t.selectedProjectIdsAvailable=e.intersection(t.selectedProjectIds,o)},u=function(t,i){var s=i.projectContext.no?["null"]:[],o=i.teamContext.no?["null"]:[];t.selectedProjectIds=e.union(s,e.pluck(t.selectedProjects,"id")),t.selectedTeamIds=e.union(o,e.pluck(t.selectedTeams,"id"))},p=function(e,t){n.isBoardEdition&&(t.push("board"),t.push("hasTeams")),e.edition=t},f=this.configurator;return f.getFeaturesService().isEnabled("context.v2")?this.store2.getApplicationContext(r).done(function(t){var i=f.getSystemInfo(),s=t.context,n={__type:"context",acid:s.acid,appContext:{projectContext:{no:s.isNoProjectIncluded},teamContext:{no:s.isNoTeamIncluded}},culture:i.culture,edition:i.edition,id:s.acid,loggedUser:e.omit(f.getLoggedUser(),"role"),selectedProjects:s.selectedProjects.items,selectedTeams:s.selectedTeams.items,processes:e.map(s.processes,function(e){return{customFields:e.customFields.items,id:e.id,name:e.name,isDefault:e.isDefault,practices:e.practices.items,terms:e.terms.items}})},r={name:"turboGet",type:n.__type,config:{}};this.store.registerWithEvents(n,"__type",r),p(n,[i.edition]),u(n,n.appContext),d(n,s),l(n,t),n.projects=t.projects,n.teams=t.teams,n.loggedUser=f.getLoggedUser(),o.resolve(n)}.bind(this)).fail(function(e){o.reject(this._getErrorMessage([{data:e}]))}.bind(this)):this.store[a]("context",r).done({success:function(t){var i=t[0].data;e.isArray(i)&&(i=i[0]);var s=i.edition?[i.edition]:[];p(i,s);var r=i.appContext||{};e.defaults(r,{projectContext:{no:!1},teamContext:{no:!1}}),u(i,r),n.getTeamsProjectsAvailable(i.loggedUser.id).done(function(e){d(i,e),l(i,e),o.resolve(i)}).fail(function(e){o.reject(e.statusText)})},failure:function(e){o.reject(this._getErrorMessage(e))}.bind(this)}),o.done(e.compact([function(e){this.onApplicationContextRetrieved.fire(e),s&&s.success&&s.success.apply(null,[e])}.bind(this),c])).fail(function(e){s&&s.failure&&s.failure.apply(null,[e])}),o}});return s.implementOn(o.prototype),o});
define('tau/store/services/service.notifications',["tau/core/class"],function(e){var n=e.extend({init:function(e){this.config=e},notifyComment:function(e,n,t){t=t||{},this.sendRequest("CommentsNotificationService","Notify",{commentId:e,options:n},function(e){t.success&&t.success.call(t.scope,e.d)},function(e){t.failure&&t.failure.call(t.scope,e)})},sendRequest:function(e,n,t,i,c){var s=this.config.appPath+"/PageServices/"+e+".asmx/"+n,o={contentType:"application/json",type:"POST",success:i,error:c};t&&(o.data=JSON.stringify(t)),$.ajax(s,o)}});return n});
define('tau/store/services/service.actions',["jQuery","Underscore","tau/core/class"],function(e,t,n){var r=n.extend({init:function(e){this.config=e},getActionUrl:function(e){return this.config.appPath+"/PageServices/ActionsService.asmx/"+e},getActiveProjectForEntity:function(e,t,n){var r={generalId:e};this.sendRequest("GetActiveProjectForEntity",r,t,n)},copyGeneralToProject:function(e,t,n,r){var s={generalId:e,projectId:t};this.sendRequest("CopyGeneralToProject",s,n,r)},getProjectIds:function(e,t){var n={};this.sendRequest("GetProjectIds",n,e,t)},moveGeneralToProject:function(e,t,n,r){var s={generalId:e,projectId:t};this.sendRequest("MoveGeneralToProject",s,n,r)},attachGeneralToRequest:function(e,t,n,r){var s={generalId:e,requestId:t};this.sendRequest("AttachGeneralToRequest",s,n,r)},detachRequest:function(n){var r={generalId:n.generalId,requestId:n.requestId};n=t(n).defaults({success:e.noop,error:e.noop}),this.sendRequest("DetachRequestFromGeneral",r,n.success,n.error)},_mapEntityTypes:function(e){return t.map(e.d,function(e){return{id:e.ID,name:e.EntityTypeName,term:e.Name}})},getEntityTypesToConvert:function(e){return this.sendRequestDef("GeneralCanConvertTo",{generalId:e}).then(this._mapEntityTypes)},getEntityTypesToCreateFromRequest:function(e){return this.sendRequestDef("CanCreateFromRequest",{requestId:e}).then(this._mapEntityTypes)},convertGeneralToTask:function(e,t){var n={generalId:e,userStoryId:t};return this.sendRequestDef("ConvertGeneralToTask",n)},createFromRequest:function(e,t){var n={requestId:e,entityTypeId:t};return this.sendRequestDef("CreateFromRequest",n)},createTaskFromRequest:function(e,t){var n={requestId:e,userStoryId:t};return this.sendRequestDef("CreateTaskFromRequest",n)},convertGeneralToType:function(e,t){var n={generalId:e,entityTypeId:t};return this.sendRequestDef("ConvertGeneralToType",n)},finishIteration:function(e,t,n,r,s){var o={from:e,to:t,useMoveInsteadSplit:n};this.sendRequest("FinishIteration",o,r,s)},finishTeamIteration:function(e,t,n,r,s){var o={from:e,to:t,useMoveInsteadSplit:n};this.sendRequest("FinishTeamIteration",o,r,s)},splitUserStory:function(e,t,n){var r={generalId:e};this.sendRequest("SplitUserStory",r,t,n)},sendFeedback:function(e,t){var n={viewMode:e,message:t};return this.sendRequestDef("SendFeedback",n)},sendRequest:function(t,n,r,s){e.ajax(this.getActionUrl(t),{contentType:"application/json",type:"POST",data:JSON.stringify(n),success:r,error:s})},sendRequestDef:function(t,n){return e.ajax({url:this.getActionUrl(t),contentType:"application/json",type:"POST",data:JSON.stringify(n)})}});return r});
define('tau/core/query',["jQuery","Underscore","libs/json2"],function(r,e){return{find:function(r,n){var t=[],i=this,u=i._formWhere(n,"",function(r,e,n){return{operator:r,key:e,value:n}});return e.each(r,function(r){var n=!1;e.each(u,function(t){if(!n){var u=i._getObjectValue(r,t.key);e.isUndefined(u)&&(n=!0),t.operator.compare(u,t.value)||(n=!0)}}),n||t.push(r)}),t},render:function(r,e){return this._getWhere(r,e)},_initializeDefaultRenders:function(r){e.defaults(r,{defaultRenderer:function(r,n){var t=this,i=[];return e.isArray(n)||(n=[n]),e.each(n,function(e){i.push("("+r+t.name+JSON.stringify(e)+")")}),i},$in:function(r,n){var t=this,i=[];e.isArray(n)||(n=[n]);var u=[];return e(n).each(function(r){u.push(JSON.stringify(r))}),i.push("("+r+" "+t.name+" ["+u.join(",")+"])"),i}})},_getObjectValue:function(r,e){for(var n=e.split("."),t=r,i=0;i<n.length;i++){if(!r.hasOwnProperty(n[i]))return void 0;t=r[n[i]]}return t},_getQueryOperators:function(){var r={};this._initializeDefaultRenders(r);var n={$in:{name:"in",compare:function(r,n){return e.any(n,function(e){return e==r})}},$ne:{name:"!=",compare:function(r,e){return r!=e}},$eq:{name:"==",compare:function(r,e){return r==e}}};return e.each(e(n).keys(),function(e){var t=n[e];t.render=r.hasOwnProperty(e)?r[e]:r.defaultRenderer}),n},_isQueryValueWithOperator:function(r,n){var t=e(r).keys();if(0===t.length)return!1;var i=n||this._getQueryOperators();return i.hasOwnProperty(t[0])},_formWhere:function(r,n,t){var i=[];t=t||function(r,e,n){return r.render(e,n)};var u=this;n=n||"";var a=u._getQueryOperators();return e.each(e(r).keys(),function(o){if("$"!==o[0]){var f=r[o],c=n+o;if(e.isString(f)||e.isNumber(f)||e.isDate(f)||e.isArray(f)||e.isBoolean(f)||e.isNull(f)){var s=null===f?"$isNull":"$eq";return void(i=i.concat(t(a[s],c,f)))}if(u._isQueryValueWithOperator(f,a))return void e.each(e(f).keys(),function(r){i=i.concat(t(a[r],c,f[r]))});var h=u._formWhere(f,o+".",t);e.each(h,function(r){i.push(r)})}}),i},_getWhere:function(r,e){e=e||function(){return"("+n.join("and")+")"};var n=this._formWhere(r);return 0===n.length?"":e(n)}}});
define('tau/storage/url.resolver',["jQuery","Underscore","app.path","tau/core/query"],function(e,r,n,o){var t=n.get(),$=t+"/storage/v1/";return{resolve:function(e){var n=$+e.$group||"common";e.$key&&(n+="/"+e.$key),n+="?";var t=e.$where&&r.isString(e.$where)?e.$where:o.render(e.$where||{});return t&&(n+="&where="+t),e.$fields&&e.$fields.length&&(n+="&select=new("+e.$fields.join(",")+")"),encodeURI(n)}}});
define('tau/utils/utils.api',["Underscore"],function(e){return{createDeleteAjaxCommandConfig:function(n){return n=n||{},e.extend({},n,{type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",beforeSend:e.wrap(n.beforeSend,function(e,n){n.setRequestHeader("X-HTTP-Method-Override","DELETE"),e&&e(n)})})},convertJsonNode:function(n){n=n||{};var t={};return e.each(n,function(e,n){t[n]=JSON.stringify(e)}),t}}});
define('tau/storage/api.nocache',["tau/core/bus","jQuery","Underscore","./url.resolver","tau/core/event","tau/utils/utils.api"],function(e,r,t,a,n,i){var o=function(e){e=e||{};var r=["key","ownerIds","scope","id","group","data","userData","publicData"],a=t.difference(t.keys(e),r);return t.each(a,function(r){e[r]=JSON.parse(e[r])}),e.publicData&&(e.publicData=o(e.publicData)),e.userData&&(e.userData=o(e.userData)),e},s=function(e){if(!e)return null;var r=(e?JSON.parse(e):null)||{},a=[];return r.items?(t.each(r.items,function(e){a.push(o(e))}),a):o(r)},u=e.extend({config:null,init:function(e){this.config=e||{},t.defaults(this.config,{service:r.ajax})},getServiceDeferred:function(e){return this.config.service(e)},_makeServiceCall:function(e,r,a){var n=this,i=function(e){a.data=e,e&&(e.publicData||e.userData)&&(a.value=t.extend({},e.publicData,e.userData)),r.resolve(a)};return n.getServiceDeferred(e,r).done(i).fail(function(e){if(0!==e.status){try{e.responseText=JSON.parse(e.responseText)}catch(t){e.responseText={message:e.statusText}}a.data=e,r.reject(a);var i=e.responseText;n.fire("error",i)}}),r},resolve:function(e){var r=e.$config,n=a.resolve(e.$config),o={url:n,dataType:"json",$scope:r,converters:{"text json":s}},u={ajaxConfig:o,config:r};if("DELETE"===r.$actionType)o.type="POST",o.contentType="application/json; charset=utf-8",o.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override","DELETE")};else if(r.$value){var c=t.clone(r.$value);c.userData=i.convertJsonNode(c.userData),c.publicData=i.convertJsonNode(c.publicData),o.type="POST",o.contentType="application/json; charset=utf-8",o.data=JSON.stringify(c)}return this._makeServiceCall(o,e,u)},select:function(e,r){return r.$group=e,this.resolveDeferred(r)},remove:function(e,a){a.$group=e,a.$actionType="DELETE",this.fire("beforeRemove",a);var n=r.Deferred();return n.$config=a,n.always(t.bind(function(){this.fire("afterRemove",a)},this,a)),this.resolve(n),n},data:function(e,a,n,i){if(!e)throw new Error("group is required");t.isObject(a)&&(n=a,a=null),!n||n.hasOwnProperty("publicData")||n.hasOwnProperty("userData")||(n={userData:n}),i=t.extend({},i,{$group:e,$key:a,$value:n});var o={};o=a?{before:"beforeUpdate",after:"afterUpdate"}:{before:"beforeInsert",after:"afterInsert"},this.fire(o.before,i);var s=r.Deferred();return s.$config=i,s.always(t.bind(function(){this.fire(o.after,i)},this,i)),this.resolve(s)},createDeferredCall:function(e){var t=r.Deferred();return t.$config=e,t},resolveDeferred:function(e){return this.resolve(this.createDeferredCall(e))}});return n.implementOn(u.prototype),u});
define('tau/storage/api',["./api.nocache","jQuery","Underscore"],function(e,r,c){return e.extend({_cache:{},_getCacheKey:function(e,r){var t=this,a=e.url.toLowerCase(),o=r.$config.$key||r.$config.key,n=r.$config.$group||r.$config.group;if(n&&o&&(a=this._createCacheNameFromGroupAndKey(n,o)),o||"POST"!==e.type||(a=null),"POST"===e.type||"DELETE"===e.type){var h=t._cache[t.getGroupCacheKey(n)];if(h){var u=c.keys(h);c.each(u,function(e){delete t._cache[e]}),delete t._cache[t.getGroupCacheKey(n)]}}return a},_makeServiceCall:function(e,r,c){var t=this,a=this._getCacheKey(e,r);return e.type&&"GET"!==e.type||!t._cache.hasOwnProperty(a)?(a&&(t._cache[a]=r),this._super(e,r,c)):t._cache[a]},getGroupCacheKey:function(e){return("group_cache_"+e).toLowerCase()},getServiceDeferred:function(e,r){return this._super(e).done(function(c){this._trySaveCacheByGroupAndKey(c,r)||this._saveCacheByGroupOrUrl(e,r)}.bind(this))},_trySaveCacheByGroupAndKey:function(e,r){return e&&e.group&&e.key?(this._cache[this._createCacheNameFromGroupAndKey(e.group.name,e.key)]=r,!0):!1},_saveCacheByGroupOrUrl:function(e,r){var c=r.$config.$group||r.$config.group,t=this.getGroupCacheKey(c);this._cache.hasOwnProperty(t)||(this._cache[t]={}),this._cache[t][e.url.toLowerCase()]={}},_createCacheNameFromGroupAndKey:function(e,r){return(e+"_"+r).toLowerCase()}})});
define('tau/libs/boardSettings/model.settings.storage',["Underscore","jQuery","tau/core/class"],function(e,t,i){var n=function(t,i){var n=new Array(t.length);return function(s){var r=s.uid;n[r]=s.data,t=e.without(t,r),0===t.length&&i(n)}},s=function(e,t){return function(i){e.callback(i),t.resolve(i)}};return i.extend({init:function(i,n){this.settings=e.defaults(i,{cache:!0}),this.sources=n,this.callbacksMap=[],this.responses=[],this.fieldsRetrieved=[],this.onChange=t.Callbacks(),this.commonCallback=e.bind(function(e,t){var i=this.mergeChanges(e.data,t);if(null!==i){var n=e.cmd||{};this._onBeforeRetrieve(i),this.applyCallback(i,n.isSilent)}},this)},getGroupName:function(){return this.settings.groupName},applyCallback:function(t,i){for(var n=e.keys(t),s=e.clone(this.callbacksMap),r=0;r<s.length;r++){var a=s[r];a.isDeleted||i&&!a.skipSilentCallsFiltering||!this.matchCommandCallback(n,a)||a.callback.call(a.listener,t)}},matchCommandCallback:function(t,i){var n=i.fields;return e.any(t,function(t){return e.indexOf(n,t)>=0})},each:function(t,i){this.sources.length?e.each(this.sources,t):i&&i()},mergeChanges:function(t,i){for(var n=this.settings,s=e.keys(t),r=null,a=0;a<s.length;a++){var l=s[a];this.markFieldsRetrieved(l);var c=t[l];if(!e.isEqual(n[l],c)){r=r||{};var o=e.cloneDeep(c);e.isNumber(i)&&(this.responses[i]=this.responses[i]||{},this.responses[i][l]=o,o=this.getField(l)),r[l]=n[l]=o}}return r},_isValue:function(t){return!e.isNull(t)&&!e.isUndefined(t)&&!e.isNaN(t)},getField:function(e){for(var t=this.responses.length-1;t>=0;t--){var i=this.responses[t][e];if(this._isValue(i))return i}},markFieldsRetrieved:function(t){t=e.isString(t)?[t]:t,this.fieldsRetrieved=e.union(this.fieldsRetrieved,t)},selectNotRetrievedFields:function(t){return this.settings.cache?e.difference(t,this.fieldsRetrieved):t},_cmdDefaults:function(i){e.defaults(i,{callback:t.noop})},_onBeforeRetrieve:function(){},_onBeforeSave:function(){},get:function(i){e.isArray(i)&&(i={fields:i}),this._cmdDefaults(i);var r=t.Deferred(),a=s(i,r),l=this.settings,c={},o=e.range(this.sources.length),u=this.selectNotRetrievedFields(i.fields),h=this,f=function(i){h.markFieldsRetrieved(u),e.each(i,function(t,i){h.responses[i]=e.extend(h.responses[i]||{},t);for(var n=0;n<u.length;n++){var s=u[n],r=null===t[s]?l[s]:t[s];h._isValue(r)&&(c[s]=r)}}),e.extend(l,c);var n={};t.extend(!0,n,l),this._onBeforeRetrieve(n),a(n)}.bind(this);if(0===u.length)f([]);else{var d=n(o,f);this.each(function(e,t){e.get({uid:t,fields:u,callback:d})},function(){f([])})}return r},set:function(i){var r=e.cloneDeep(i.set);this._onBeforeSave(r),this._cmdDefaults(i);var a=t.Deferred(),l=s(i,a),c=this.sources,o=e.range(c.length),u=function(){},h=n(o,u),f=this.mergeChanges(r);this.each(function(e,t){e.set({uid:t,set:r,callback:function(e){h.call(this,e,t)}})},function(){u([])}),null!==f&&(this._onBeforeRetrieve(f),this.onChange.fire(f),this.applyCallback(f,i.isSilent));var d=e.clone(this.settings);return this._onBeforeRetrieve(d),l(d),a},setDef:function(i){var n=e.cloneDeep(i.set);this._onBeforeSave(n);var s=this.sources;return t.when.apply(null,e.map(s,function(e){var i=t.Deferred();return e.set({uid:0,set:n,callback:i.resolve}),i})).done(e.bind(function(){this.commonCallback({data:n,cmd:i})},this))},registerSubscription:function(e){return this.callbacksMap.push(e),this.commonCallback},unregisterSubscription:function(t){this.callbacksMap.length&&(this.callbacksMap=e.reject(this.callbacksMap,function(e){var i=t===e.listener;return i&&(e.isDeleted=!0),i}))},bind:function(e){var t=this.registerSubscription(e);this.each(function(i,n){i.bind({uid:n,fields:e.fields,listener:e.listener,callback:function(e){t.call(this,e,n)}})})},_unbindListener:function(e){var t={listener:e};this.each(function(e){e.unbind(t)})},unbind:function(e){this._unbindListener(e.listener),this.unregisterSubscription(e.listener)},dispose:function(){this._unbindListener(this),this.callbacksMap=[]}})});
define('tau/libs/boardSettings/model.definition.storage',["Underscore","jQuery","tau/libs/boardSettings/model.settings.storage"],function(e,o,i){return i.extend({_onBeforeRetrieve:function(o){if(o&&o.zoomLevel){if(!e.isObject(o.zoomLevel))throw Error("Invalid type of zoomLevel");var i=o.viewMode||this.settings.viewMode;if(!e.isString(i))throw Error("viewMode is not defined");for(var r=o.zoomLevel[i],t=e.keys(o.zoomLevel).sort(),n=0;n<t.length&&!e.isNumber(r);n++)r=o.zoomLevel[t[n]];e.isNumber(r)||(r=3),o.zoomLevel=r}},_onBeforeSave:function(o){if(o&&!e.isUndefined(o.zoomLevel)&&!e.isNull(o.zoomLevel)){if(!e.isNumber(o.zoomLevel))throw Error("Invalid type of zoomLevel");var i=o.viewMode||this.settings.viewMode;if(!e.isString(i))throw Error("viewMode is not defined");var r=o.zoomLevel;o.zoomLevel=e.clone(this.settings.zoomLevel)||{},o.zoomLevel[i]=r}}})});
define('tau/core/async.source.adapter',["tau/core/class"],function(n){var i=function(n,i){if(!n.hasOwnProperty("uid"))throw"required parameter [uid] is missed in command";var t=n.callback,r=function(i){var r={uid:n.uid,data:i};t(r)};n.callback=r,i(n)};return n.extend({init:function(n){this.proxy=n},get:function(n){return i(n,this.proxy.onGet),this},set:function(n){return i(n,this.proxy.onSet),this},bind:function(n){return i(n,this.proxy.onBind),this},unbind:function(n){return this.proxy.onUnbind(n),this}})});
define('tau/libs/boardSettings/asyncSource.stateManager',["Underscore","tau/core/async.source.adapter"],function(e,n){var a=function(e,a){var i=e.getStateManager();return new n({onGet:function(e){i.get({id:a.id,fields:e.fields,callback:e.callback})},onSet:function(e){i.set({id:a.id,set:e.set,callback:e.callback})},onBind:function(e){var n=function(n){var a={};a[n.fieldName]=n.value,e.callback.call(this,a)};i.bind({paramId:a.id,fieldName:e.fields[0],callback:n,listener:e.listener})},onUnbind:function(e){i.unbind(e.listener)}})};return{create:a}});
define('tau/libs/boardSettings/asyncSource.componentSpecific',["Underscore","tau/core/async.source.adapter"],function(n,a){var e=function(n,e){var t=n.getRestStorage();return new a({onGet:function(n){t.data(e.groupName,e.id).done(function(a){var e=a.data||{};e=e.userData||{};for(var t={},r=0;r<n.fields.length;r++){var o=n.fields[r];e.hasOwnProperty(o)&&(t[o]=e[o])}n.callback(t)})},onSet:function(n){var a=n.set;t.data(e.groupName,e.id,{scope:"Public",userData:a}).done(function(){n.callback(a)})},onBind:function(){},onUnbind:function(){}})};return{create:e}});
define('tau/libs/boardSettings/asyncSource.boardSpecific',["Underscore","tau/core/async.source.adapter"],function(n,e){var a=function(n,a){var t=n.getBoardApiService();return new e({onGet:function(n){t.getBoardData(a.id).done(function(e){for(var a=e.data,t={},r=0;r<n.fields.length;r++){var o=n.fields[r];a.hasOwnProperty(o)&&(t[o]=a[o])}n.callback(t)})},onSet:function(n){var e=n.set;e.isDraft=!1,t.setBoardData(a.id,e).done(function(){n.callback(e)})},onBind:function(){},onUnbind:function(){}})};return{create:a}});
define('tau/libs/boardSettings/asyncSource.url',["Underscore","tau/core/async.source.adapter","libs/parseUri"],function(n,e,r){return{create:function(n){return new e({onGet:function(e){for(var t=n.getExternal().getHref(),o=r(t),c={},i=0;i<e.fields.length;i++){var a=e.fields[i];o.queryKey.hasOwnProperty(a)&&(c[a]=o.queryKey[a])}e.callback(c)},onSet:function(){},onBind:function(){},onUnbind:function(){}})}}});
define('tau/libs/boardSettings/asyncSource.acid',["Underscore","tau/core/async.source.adapter"],function(n,e){return{create:function(n){return new e({onGet:function(n){n.callback({})},onSet:function(e){e.set.acid&&n.getApplicationContextService().setCurrentAcid(e.set.acid)},onBind:function(){},onUnbind:function(){}})}}});
define('tau/libs/boardSettings/asyncSource.static',["Underscore","tau/core/async.source.adapter"],function(n,c){var e=function(){var e={};return new c({onGet:function(c){var t={};n.each(c.fields,function(n){e.hasOwnProperty(n)&&(t[n]=e[n])}),c.callback(t)},onSet:function(c){var t=c.set;n.each(t,function(n,c){e[c]=n}),c.callback(t)},onBind:function(){},onUnbind:function(){}})};return{create:e}});
define('tau/libs/boardSettings/factory.board.settings',["Underscore","tau/core/class","tau/libs/boardSettings/model.settings.storage","tau/libs/boardSettings/model.definition.storage","tau/libs/boardSettings/asyncSource.stateManager","tau/libs/boardSettings/asyncSource.componentSpecific","tau/libs/boardSettings/asyncSource.boardSpecific","tau/libs/boardSettings/asyncSource.url","tau/libs/boardSettings/asyncSource.acid","tau/libs/boardSettings/asyncSource.static"],function(e,t,n,i,a,r,s,c,o,u){return t.extend({init:function(e){this.serviceContainer=e},create:function(t){return e.isObject(t)||(t={id:t}),e.defaults(t,this.serviceContainer.getBoardSettingsOptions()),this.createInstance(t)},createInstance:function(e){var t=[],n=this.serviceContainer;return n.isBoardEdition||t.push(a.create(n,e)),t.push(s.create(n,e)),new i(e,t)},createComponentSettings:function(t){var i=[],s=this.serviceContainer;return e.defaults(t,{groupName:"settings"}),i.push(r.create(s,t)),s.isBoardEdition||i.push(a.create(s,t)),new n(t,i)},createAcidSettings:function(t){t=e.defaults(t,{cache:!1});var i=this.serviceContainer;return new n(t,[c.create(i,t),a.create(i,t),o.create(i,t)])},createStaticSettings:function(e){return new n(e,[u.create()])},clear:function(){}})});
define('tau/services/boards/service.boards.api',["Underscore","jQuery","tau/core/class","tau/core/event","tau/storage/api","tau/storage/api.nocache","app.path","tau/utils/utils.api"],function(e,a,t,r,o,n,i,c){var s="__board_legacy",u="__board_legacy_id_",d={makeServiceCall:function(e){var t=e.$scope||{},r=a.Deferred();return r.$config=t,this._makeServiceCall(e,r,{ajaxConfig:e,config:t}).then(function(e){return e.value=e.data,e})}},h=n.extend(d),f=o.extend(d).extend({clearCache:function(){this._cache={}},_trySaveCacheByGroupAndKey:function(e,a){if(e&&e.key){var t=u+e.key;return this._cache[this._createCacheNameFromGroupAndKey(s,t)]=a,!0}return!1},saveCacheByGroupAndKey:function(e,a){this._trySaveCacheByGroupAndKey(e,a)}}),v=t.extend({init:function(e){this._storage=new f(e),this._noCacheStorage=new h(e)},createBoard:function(e){return this.setBoardData("",e).then(function(e){return this._notifyBoardCreated(e.data),e}.bind(this))},setBoardData:function(e,a){var t=this._createStoreRequestConfig(e);t.$value=a;var r=this._createAjaxConfig(e,t);return r.type="POST",r.contentType="application/json; charset=utf-8",r.data=JSON.stringify(a),this._storage.makeServiceCall(r)},getBoardData:function(e){var a=this._createStoreRequestConfig(e),t=this._createAjaxConfig(e,a);return this._storage.makeServiceCall(t)},setBoardsCache:function(a){e.each(a,function(e){this.setBoardCache(e)},this)},setBoardCache:function(e){var t=this._createStoreRequestConfig(e.key),r=this._createAjaxConfig(e.key,t),o={ajaxConfig:r,config:t,data:e,value:e};this._storage.saveCacheByGroupAndKey(e,a.Deferred().resolve(o))},removeBoard:function(e){var a=this._createStoreRequestConfig(e),t=c.createDeleteAjaxCommandConfig({url:i.get()+"/api/board/v1/"+e});return t.$scope=a,this._storage.makeServiceCall(t).then(this._notifyBoardRemoved.bind(this,e))},removeAllBoards:function(){var e=c.createDeleteAjaxCommandConfig({url:i.get()+"/api/boards/v1/",$scope:{}});return this._noCacheStorage.makeServiceCall(e)},getBoardsForUser:function(e){var a={url:i.get()+"/api/boards/v1/visibleForUser/"+e,dataType:"json",type:"GET",$scope:{}};return this._noCacheStorage.makeServiceCall(a)},clearBoardCache:function(){this._storage.clearCache()},_createStoreRequestConfig:function(e){var a={$group:s};return e&&(a.$key=u+e),a},_createAjaxConfig:function(e,a){return{url:i.get()+"/api/board/v1/"+e,dataType:"json",$scope:a,type:"GET"}},_notifyBoardCreated:function(e){this.fire("service.boards.api.board.created",e)},_notifyBoardRemoved:function(e){this.fire("service.boards.api.board.removed",e)}});return r.extend(v)});
define('tau/slice/slice.interrupter',["tau/core/save.interrupter"],function(e){return new e});
define('tau/slice/api.cache',["tau/core/class","jQuery","Underscore"],function(e,t,a){var i={NoCache:"NoCache",Static:"Static",Dynamic:"Dynamic",Today:"Today"};return e.extend({init:function(e){this.name=e,this.cache={}},_getCacheEntry:function(e,t){var a=this.cache[e];return a&&a[t]},_setCacheEntry:function(e,t,a){this.cache[e]||(this.cache[e]={}),this.cache[e][t]=a},evict:function(e,t){t?this._setCacheEntry(e,this._getCacheKey(t),void 0):this.cache[e]={}},process:function(e){function t(){s(null).fail(u).done(function(t){JSON.stringify(t.data)===JSON.stringify(d.value.data)?d.timestamp=new Date:(this._sendStatistics(r,{invalidated:!0}),this._setCacheEntry(e.namespace,o,void 0),h())}.bind(this))}function n(){c=s(null),c.fail(u).done(function(t){var n=t.data.metaInfo&&t.data.metaInfo.cacheType||i.NoCache;if(n!=i.NoCache){var c=a.clone(t);c.data=a.deepClone(t.data),this._setCacheEntry(e.namespace,o,{value:c,timestamp:new Date,type:n})}}.bind(this))}var c,s=e.resolver,h=e.invalidatedCallback,r=e.statInfo,o=this._getCacheKey(e.key),d=this._getCacheEntry(e.namespace,o),l=this._getCacheActions(d);this._sendStatistics(r,l);var u=function(){this._setCacheEntry(e.namespace,o,void 0)}.bind(this);if(l.cacheHit){var f=a.deepClone(d.value);c=s(f),l.needInvalidate&&t.call(this)}else n.call(this);return c},_getCacheKey:function(e){return a.map(e,function(e){return a.isArray(e)?this._getCacheKey.call(this,e):a.isObject(e)?JSON.stringify(e):e}.bind(this)).join("_")},_getCacheActions:function(e){var t,a;if(e){var n=e.type;switch(n){case i.Static:t=!0,a=!1;break;case i.Today:var c=e.timestamp;t=c.getDate()==(new Date).getDate(),a=!1;break;case i.Dynamic:t=!0,a=!0;break;default:t=!1,a=!1}}else t=!1,a=!1;return{cacheHit:t,needInvalidate:a}},_sendStatistics:function(e,t){var i=a.clone(e);a.extend(i,t),taus.track("cache."+this.name,i)}})});
define('tau/slice/api.no.cache',["jQuery"],function(e){return{process:function(e){return e.resolver(null)},evict:e.noop}});
define('tau/services/service.features',["tau/core/class","Underscore"],function(t,e){return t.extend({init:function(t){this.feature=t||window.tauFeatures||{},this.set("entity.quickAdd",!0)},isEnabled:function(t){return!!this.feature[t]},set:function(t,e){return e=!!e,this.feature[t]=e,e},setEnabled:function(t){return this.set(t,!0)},setDisabled:function(t){return this.set(t,!1)},getEnabled:function(){return e.chain(this.feature).keys().filter(function(t){return this.isEnabled(t)}.bind(this)).value()}})});
define('tau/slice/api.cache.axes.instance',["./api.cache","./api.no.cache","tau/services/service.features"],function(e,a,c){var i=new c;return i.isEnabled("cache.axis")?new e("axis"):a});
define('tau/slice/api',["tau/core/class","jQuery","Underscore","tau/core/event","tau/slice/slice.interrupter","./api.cache.axes.instance"],function(e,t,n,r,i,s){var o=e.extend({init:function(e,r){this.config=e||{},this.resolver=r,this.id=n.uniqueId("slice/"+ +new Date+"/"+n.UUID()),this._requests={},n.defaults(this.config,{definition:{},service:t.ajax,base64:!1,clientId:this.id,options:{}})},getSliceParams:function(){var e=this,t=e.config,n=e.resolver.resolve(t.definition,{method:"noop"},{base64:t.base64,clientId:t.clientId});return n.parameters},clone:function(){var e=n.deepClone(this.config),t=new o(e,this.resolver);return t.id=this.id,t},_interruptBatchAction:function(e,t){var r=n.uniq(n.map(t.$set.items,function(e){return e.type}));return this._interruptAction(e,r,t.$set.items)},_interruptSingleAction:function(e,t){var n=t.$set.type||t.$set.entityType,r=[n];return this._interruptAction(e,r,[t.$set])},_interruptAction:function(e,r,s){var o=n.chain(r).map(function(e){return i.getInterruptersByType(e)}).flatten().value();if(o.length>0){var a=n.map(o,function(e){return{callback:e,deferred:t.Deferred()}}),c=n.map(a,function(e){return e.deferred}),u=t.whenList(c).then(function(){return e()}),d=this._getItemsChanges(s);return n.each(a,function(e){e.callback(e.deferred,d)}),u}return e()},_getItemsChanges:function(e){var t=this;return n.map(e,function(e){var r={id:e.itemId,type:e.type||e.entityType,changes:[]};return e.x&&r.changes.push({name:t.config.definition.x.types[0],value:e.x}),e.y&&r.changes.push({name:t.config.definition.y.types[0],value:e.y}),e.values&&n.each(e.values,function(e){r.changes.push({name:e.id,value:e.value})}),r})},_deferredResolved:function(e,t){this.fire("after."+e.command.method,{result:t.data,command:e.command}),e.$deferred.resolve(t)},_deferredRejected:function(e,t){e.$deferred.reject(t)},abort:function(){var e=n.values(this._requests);for(this._requests={};e.length>0;){var t=e.pop();t.abort(),this.fire("abort",t.configAction)}},getCallOptions:function(e){return e=e||{},n.defaults(e,{base64:this.config.base64}),e.sign&&(e.clientId=this.config.clientId),e},resolve:function(e,r){var i=this;e=e||{};var s=e.command||{};r=this.getCallOptions(r);var o,a=this._createApiRequestConfig(s,r),c={},u={type:"POST",url:a.serviceUrl,dataType:"json",data:JSON.stringify(a.parameters),contentType:"application/json; charset=utf-8",$scope:e,beforeSend:function(){c.start=(new Date).getTime(),o=taus.start("slice",{})}},d={ajaxConfig:u,command:s},f=n.uniqueId("ajaxCall"),l=this.config.service(u);return i._requests[f]=l,i._requests[f].configAction={command:d.command},l.done(function(t,n,r){c.end=(new Date).getTime(),i._requests.hasOwnProperty(f)&&(delete i._requests[f],d.data=t,d.isResolvedFromCache=!1,i.fire("request.completed",{time:c,command:s,response:r,request:a.parameters}),o.stop({"@":"slice-request-completed",command:s,response:r,request:a.parameters}),i._deferredResolved(e,d))}).fail(function(n){if(i._requests.hasOwnProperty(f)){delete i._requests[f];try{n.responseText=t.parseJSON(n.responseText)}catch(r){}d.data=n,i._deferredRejected(e,d)}}),e.$deferred},_createApiRequestConfig:function(e,t){return this.resolver.resolve(this.config.definition,e,t)},isUndefinedAxis:function(e){return 0===this.getTypes(this.config.definition[e]).length},x:function(e,t){return this.axis("x",e,t)},y:function(e,t){return this.axis("y",e,t)},axis:function(e,t,n){var r=this.isUndefinedAxis(e)?{items:[]}:null;if(r)return this.resolveDeferred(e+"axis",t,null,{data:r});var i=this.config.definition[e],o=i&&i.types&&i.types[0];return s.process({namespace:o,key:{axis:e,config:t,definition:this.config.definition},resolver:function(n){return this.resolveDeferred(e+"axis",t,null,n)}.bind(this),invalidatedCallback:n,statInfo:{axis:e,axisType:i&&i.types&&i.types[0]}})},cell:function(e){var t=0===this.getTypes(this.config.definition.cells).length?{data:{items:[]}}:null;return this.resolveDeferred("cells",e,null,t)},size:function(){var e=this.isUndefinedAxis("x")&&this.isUndefinedAxis("y")?{data:{}}:null;return this.resolveDeferred("size",{},null,e)},dataItemTemplate:function(e){return this.resolveDeferred("dataItemTemplate",e)},dataTemplate:function(e){return this.resolveDeferred("dataTemplate",e)},viewDataTemplate:function(e){return this.resolveDeferred("viewDataTemplate",e)},axisDataTemplate:function(e){return this.resolveDeferred("axisDataTemplate",e)},listDataTemplate:function(e){return this.resolveDeferred("listDataTemplate",e)},notifyBoardAccess:function(e){return this.resolveDeferred("notifyBoardAccess",e)},addData:function(e){return this._interruptSingleAction(n.bind(function(){return this.resolveDeferred("addData",e)},this),e)},axisAddData:function(e){return this._interruptSingleAction(n.bind(function(){var t={sign:!0};return this.resolveDeferred("addAxisData",e,t)},this),e)},listAddData:function(e){return this._interruptSingleAction(n.bind(function(){return this.resolveDeferred("listAddData",e)},this),e)},viewAddData:function(e){return this._interruptSingleAction(n.bind(function(){return this.resolveDeferred("viewAddData",e)},this),e)},cellActions:function(e){return this.resolveDeferred("cellActions",e)},cellActionsV2:function(e){return this.resolveDeferred("cellActionsV2",e)},axesActions:function(e){return this.resolveDeferred("axesActions",e)},viewActions:function(e){return this.resolveDeferred("viewActions",e)},move:function(e){return this.resolveDeferred("move",e)},listModeActionsV2:function(e){return this.resolveDeferred("listModeActionsV2",e)},cardDetails:function(e){var t=this.config.definition.cells,r=this.getTypes(t),i=n(r).filter(function(e){return e.data&&"{}"!==e.data});t.types=i;var s={disableWhereScope:!0},o=0===i.length||0===e.$set.CardsIds.length?{data:{items:[]}}:null;return this.resolveDeferred("cardsDetails",e,s,o)},moveAndPrioritizeBatch:function(e){return this._interruptBatchAction(n.bind(function(){var t={disableWhereScope:!0};return e.$set.items.length>this.config.options.DnDTurnOffCometWhenItemsCountExceed&&(t.sign=!0),this.resolveDeferred("moveAndPrioritizeBatch",e,t)},this),e)},moveBatch:function(e){return this._interruptBatchAction(n.bind(function(){var t={disableWhereScope:!0};return e.$set.items.length>this.config.options.DnDTurnOffCometWhenItemsCountExceed&&(t.sign=!0),this.resolveDeferred("moveBatch",e,t)},this),e)},movePlannedDatesBatch:function(e){return this._interruptBatchAction(n.bind(function(){var t={disableWhereScope:!0};return e.$set.items.length>this.config.options.DnDTurnOffCometWhenItemsCountExceed&&(t.sign=!0),this.resolveDeferred("movePlannedDatesBatch",e,t)},this),e)},prioritizeBatch:function(e){return this._interruptBatchAction(n.bind(function(){var t={};return e.$set.items.length>this.config.options.DnDTurnOffCometWhenItemsCountExceed&&(t.sign=!0),this.resolveDeferred("prioritizeBatch",e,t)},this),e)},prioritize:function(e){return this.resolveDeferred("prioritize",e)},axes:function(){var e=this._createDeferredCall("axes"),n={command:e.command};return t.when(this.x(),this.y()).done(function(t,r){n.data={x:t.data.items,y:r.data.items},e.$deferred.resolve(n)}).fail(function(t){n.data=t,e.$deferred.reject(n)}),e.$deferred},space:function(){return this.resolveDeferred("space",{})},spaceV2:function(){return this.resolveDeferred("spaceV2",{})},getTypes:function(e){return e?n.isArray(e)?e:n.isString(e)?[e]:e.types?n.isArray(e.types)?e.types:n.isString(e.types)?[e.types]:[]:[]:[]},cellCounts:function(e){return this.resolveDeferred("cellCounts",e)},axesCounts:function(e){return this.resolveDeferred("axesCounts",e)},density:function(e){return this.resolveDeferred("density",e)},list:function(e){var t=0===this.getTypes(this.config.definition.cells).length?{data:{items:[]}}:null;return this.resolveDeferred("list",e,null,t)},_createDeferredCall:function(e,n){var r=t.Deferred();return{$deferred:r,command:{config:n,method:e}}},resolveDeferred:function(e,t,n,r){var i=this._createDeferredCall(e,t);if(r)return this._deferredResolved(i,r),i.$deferred;var s=this;return s.fire("before."+e,t),this.resolve(i,n).fail(function(t){if(0!==t.data.status){var n,r="";t.data.readyState?(n=t.data.responseText,r=n.Message):n={message:r},n.cmd=t.command,s.fire("error",n);var i=r||"unknown slice issue";taus.error({"@":["slice-detailed-error"],message:i,method:e,definition:s.config.definition}),taus.track({"@":["slice-detailed-error"],tags:["error","slice"],name:i,method:e,definition:s.config.definition})}})}});return r.implementOn(o.prototype),o});
define('tau/slice/slice.space.cached',["Underscore","tau/slice/api"],function(e,r){var t={};return r.extend({space:function(){var e={method:"space"},r=this.getCallOptions({}),i=this.resolver.resolve(this.config.definition,e,r),n=i.url;return t.hasOwnProperty(n)||(t[n]=this.resolveDeferred("space",{})),t[n]}})});
define('tau/slice/slice.definition.transformations',["Underscore"],function(e){return{createSliceDefinitionFromBoardSettings:function(t){var n=t.global?t.global.acid:null,i={global:{acid:n}};if(t.hasOwnProperty("x")){var r=this._convertToDefinitionItem(t.x);r&&(i.x=r)}if(t.hasOwnProperty("user")){var l=e.cloneDeep(t.user);l&&(i.user=l)}if(t.hasOwnProperty("y")){var o=this._convertToDefinitionItem(t.y);o&&(i.y=o)}return t.hasOwnProperty("cells")&&(i.cells=this._convertToDefinitionCells(t.cells)),t.hasOwnProperty("entityId")&&t.hasOwnProperty("entityType")&&(i.entityId=t.entityId,i.entityType=t.entityType),i},_convertToDefinitionItem:function(t){if(!t)return null;t=e.cloneDeep(t);var n={};if(e.isString(t)&&(t=[t]),e.isArray(t))n.id=t.length?t[0]:null,n.filter=null,n.ordering=null;else if(e.isObject(t)){var i=t.type||t.types;n.id=e.isArray(i)?i.length?i[0]:null:i,e.isString(t.data)&&(n.data=t.data),this._convertFilterAndOrdering(t,n)}return n},_convertToDefinitionCells:function(t){if(!t)return null;t=e.cloneDeep(t);var n={};return e.isArray(t)?n.items=t:e.isObject(t)&&(n.items=t.items||t.types||t.type,this._convertFilterAndOrdering(t,n)),e.each(n.items,function(e,t){n.items[t]=this._convertToDefinitionItem(e)},this),n},_convertFilterAndOrdering:function(e,t){e.useFilter!==!1&&(t.filter=e.filter||null),t.ordering=e.ordering&&e.ordering.name?e.ordering:null}}});
define('tau/slice/url.resolver',["jQuery","Underscore","tau/core/class","app.path","tau/core/query","tau/slice/slice.definition.transformations"],function(e,r,i,t,n,a){var s=t.get(),o=s+"/slice/v1/";return i.extend({init:function(e){this.prefix=e.prefix},resolve:function(i,t,s){var o=this.resolveUrl(t.method),c=r.clone(t.config||{});r.defaults(c,{});var l={base64:s.base64||!1};if(s.clientId&&(l.clientId=s.clientId),l.take=c.$take,c.$skip&&(l.skip=c.$skip),!s.disableWhereScope){var d=n.render(c);d&&(l.where=d);var f=n.render(c.$whereX||{});f&&(l.whereX=f);var u=n.render(c.$whereY||{});u&&(l.whereY=u)}c.$set&&r.forEach(c.$set,function(e,r){l[r]=e}),l.definition=a.createSliceDefinitionFromBoardSettings(i);var h=r.clone(l);return delete h.clientId,{serviceUrl:o,parameters:l,url:o+"?"+e.param(h)}},resolveUrl:function(e){return[o,this.prefix,"/",e].join("")}})});
define('tau/slice/slice.factory',["Underscore","tau/core/class","tau/slice/slice.space.cached","tau/slice/url.resolver"],function(e,t,n,r){return t.extend({init:function(e){this.defaults=e||{}},create:function(t){var c=t||{};return e.defaults(c,this.defaults),new n(c,new r({prefix:"matrix"}))}})});
define('tau/utils/utils.titleManager',["Underscore","tau/core/class"],function(i,t){var n=t.extend({init:function(t){this.config=i.defaults(t||{},{window:window,delimiter:" ",source:""}),this.config.source=this.config.source||i.asString(this.config.window.document.title)},set:function(t){this.config.window.document.title=i.asString(t)},setTitle:function(t){this.set(i.asString(t)+this.config.delimiter+this.config.source)},restoreDefault:function(){this.set(this.config.source)}});return n});
define('tau/utils/utils.base64hashEncoder',["Underscore","libs/base64/base64"],function(e,c){return{encode:function(n){return e.isObject(n)?c.encode(JSON.stringify(n)):n},decode:function(e){var n=c.decode(e);return n="{"===n.charAt(0)&&"}"===n.charAt(n.length-1)?JSON.parse(n):e},encodeName:function(e){return c.encode(e).replace(/\+/g,"__1").replace(/\//g,"__2").replace(/=/g,"__3")},decodeName:function(e){return c.decode(e.replace(/__1/g,"+").replace(/__2/g,"/").replace(/__3/g,"="))}}});
define('tau/services/service.componentBuilder',["Underscore","jQuery","tau/core/class"],function(e,r,t){return t.extend({init:function(e){this.requireLoader=e.getRequireLoader()},create:function(t,n){e.isString(t)&&(t={name:t,path:t});var i;if(t.path)i=t.path;else{if(!t.type)throw new Error("Configuration error: type or path is missing");e.defaults(t,{namespace:"tau"}),i=t.namespace+"/components/component."+t.type}var o=r.Deferred();return this.requireLoader([i],function(r){o.resolve(r.create(e.defaults(t,n||{})))},function(e){o.reject(e)}),o},createAsChild:function(t,n){return r.when(this.create(t)).then(function(r){return n.on("refresh",e.bind(r.fire,r,"destroy")),n.on("destroy",e.bind(r.fire,r,"destroy")),r})}})});
define('tau/libs/clipboard/clipboard.manager',["Underscore","tau/core/class"],function(e,t){var a=t.extend({init:function(t,a){var i=this;i.restStorage=t,i.options=e.defaults(a||{},{}),i._cache={}},set:function(e,t){this._cache={},this.add(e,t)},add:function(t,a){var i=this,n=this._sanitize(t),c=e.values(i._cache).length;e.forEach(n,function(e){var t=i._createKey(e);i._cache[t]=e}),e.values(i._cache).length!=c&&this._save(i._cache,a)},update:function(t,a){var i=this,n=this._sanitize(t);e.forEach(n,function(e){var t=i._createKey(e);i._cache[t]=e}),this._save(i._cache,a)},remove:function(t,a){var i=this,n=e.values(i._cache).length,c=this._sanitize(t);e.forEach(c,function(e){var t=i._createKey(e);delete i._cache[t]}),e.values(i._cache).length!=n&&this._save(i._cache,a)},removeAll:function(e){self._cache={},this._save([],e)},getAll:function(t){var a=this;this._get(function(i,n){e.forEach(n,function(e){a._cache[a._createKey(e)]=e}),t(i,n)})},unbind:function(e){this.restStorage.unbind({listener:e})},bind:function(e,t){this.restStorage.bind({listener:e,fields:["items"],callback:function(e){t&&t(null,e.items||[])}})},_save:function(t,a){this.restStorage.set({set:{items:e.values(t)},callback:function(e){a&&a(null,e.items)}})},_get:function(e){this.restStorage.get({fields:["items"],callback:function(t){e&&e(null,t.items||[])}})},_sanitize:function(t){var a=this,i=function(t){return t=e.deepClone(t||{}),t=e.pick(t,"id","data","isSelected"),t._id=a._createKey(t),t.data=e.defaults(t.data||{},{id:"",type:""}),t.data.type=t.data.type.toLowerCase(),t};return e.map(e.isArray(t)?t:[t],i)},_createKey:function(e){return"_"+e.data.type+"_"+e.id+"_"}});return a});
define('tau/core/termProcessor',["Underscore","tau/core/class","tau/store/types.targetprocess"],function(e,t,n){return t.extend({keys:["name","names","iconSmall","iconBig"],init:function(t){this.registry={},e.forEach(n._dictionary,function(n,r){n.terms&&(this.registry[r]=e.inject(this.keys,function(r,i){var s=n.terms[i],c=e.find(t,function(e){return e.name==s.key});return r[i]=c?c.value:s.val,r},{},this))},this)},getTerm:function(e,t){var n=this.getTerms(e);return n?n[t]||n.name:""},getTerms:function(e){return this.registry[e]},resolve:function(e,t){return this.getTerm(e,"name")||t||e}})});
define('tau/core/templates-factory',["Underscore","jQuery","tau/nls/translator","tau/core/termProcessor"],function(e,t,r,n){var i={templates:{},termProcessor:new n,jqote2customFunctions:{sub:function(t,r){var n=i.get(t);e.isArray(r)||(r=[r]);for(var s=[],o=0,a=r.length;a>o;o++)s.push(n.render(null,r[o]));return s.join("")},term:function(t,r){return e.asString(i.termProcessor.getTerm(t,r))},cond:function(e,t,r){return(e?t:r)||""},uid:function(t){return e.uniqueId(t||"uid")},_:e,$:t,translate:r,T:r},setTermProcessor:function(e){this.termProcessor=e},getTermProcessor:function(){return this.termProcessor},get:function(e){var t=this.templates[e];if(!t)throw new Error('Template "'+e+'" was not registered.');return this[t.engine+".get"](e)},"jquery.get":function(e){var r=this;if(!t.template.hasOwnProperty(e))throw new Error('jQuery template "'+e+'" was not found.');return{render:function(r,n){var i=t.template[e],s=i(t,{data:n});return s.join("")},bind:function(n,i){for(var s={},o=r.templates[e],a=o.tags||[],u=0;u<a.length;u++){var c=a[u];c.register(n,s)}var m=t.template[e];return t.tmpl(m,i,s)}}},"jqote2.get":function(r){var n=this.templates[r];if(!n.jqotecmpl)throw new Error('Template "'+r+'" was not compiled.');return{config:n,render:e.bind(function(t,r){var i=n.customFunctions||{};e.extend(i,this.jqote2customFunctions),e.isFunction(n.pre)&&(r=n.pre(r));var s=n.jqotecmpl.call(r,0,0,[r],i);return e.isFunction(n.post)&&(s=n.post(s,r)),s},this),bind:function(e,r){var n=this.render(e,r);return t(n)},bindPure:function(e,t){return this.render(e,t)}}},registerRecursively:function(r,n){n=n||{tags:[]};var i=this.templates[r];if(!i)throw new Error('Template "'+r+'" was not found.');i.tags&&(n.tags=n.tags.concat(i.tags)),t.template.hasOwnProperty(r)||(e.each(i.dependencies,function(e){this.registerRecursively(e,n)},this),i.tags=n.tags,t.template(r,i.markup))},"jquery.register":function(e){this.registerRecursively(e.name)},"jqote2.register":function(e){try{e.jqotecmpl=t.jqotec(e.markup)}catch(r){throw new Error('Error in template "'+e.name+'": '+r.message)}},register:function(t){t.dependencies=t.dependencies||[],t.markup=e.isArray(t.markup)?t.markup.join(""):t.markup,t.engine=t.engine||"jquery";var r=t.name;return this.templates[r]=t,this[t.engine+".register"](t),{name:r,options:t.options||{},get:this.get.bind(this,r),render:function(e){return this.get(r).bind({},e)}.bind(this)}}};return i});
define('tau/ui/templateRenderer',["Underscore","jQuery"],function(t,e){return e.extend(e.tmpl.tag,{"@":{_default:{$1:"'type'",$2:"null"},open:["var $__t = $item;","while(!$__t.$tau && $__t.parent){","$__t = $__t.parent","}","_=_.concat($__t.$tau.terms($2)[$1]);"].join("")},tauKey:{_default:{$1:"id",$2:"null"},open:['_=_.concat(new String(window._.complexKey($2["data"], $1) || "").toString());'].join("")}}),e});
define('tau/ui/templateRenderer.extensions',["Underscore","tau/core/class","tau/core/termProcessor"],function(r,e,n){var t=e.extend({init:function(r){this.termProc=new n(r.terms)},terms:function(r){return this.termProc.getTerms(r)},text_implode:function(e){var n=new String(e);if(r.isString(e))n=e;else if(r.isArray(e)){var t=r.clone(e),i=t.pop();n=r.filter([t.join(", "),i],function(r){return 0!=r}).join(" &amp; ")}return n},key:function(){}});return t});
define('tau/ui/ui.templateFactory',["tau/core/templates-factory","tau/ui/templateRenderer","tau/ui/templateRenderer.extensions"],function(e){return e});
define('tau/routers/routers.base',["tau/core/class","tau/core/event"],function(e,t){var n=e.extend({navigate:function(e){this.fire("urlToNavigate.ready",e)},destroy:function(){this.removeAllListeners()}});return t.implementOn(n.prototype),n});
define('tau/utils/utils.redirect',["Underscore","jQuery","tau/core/class"],function(i,t,o){return o.extend({init:function(i,t){this.window=i,this.appPath=t},_process:function(i,o){var n=null;if(i.match(/^http(s)?:\/\//i))n=i;else if("#"==i[0])n=i;else{var e=this.appPath;"/"!==i[0]&&(i="/"+i),n=e+i}return o&&(n=t.tmpl(n,o).text()),n},_redirect:function(i,t){t.location.href=i},redirect:function(i,o,n){var e=this.window;if(o){var r=t(document),s={scrollbars:1,width:.8*r.width(),height:.8*r.height(),top:50},h=[],c=null;for(c in s)h.push(c+"="+s[c]);var a=h.join(",");return void(e=this.window.open(this._process(i,n),o,a))}this._redirect(this._process(i,n),e)},back:function(){this.window.history&&this.window.history.back&&this.window.history.back()},reload:function(){if(this.window.location&&this.window.location.reload){var t=i.bind(function(){this.window.location.reload()},this);setTimeout(t,1)}}})});
define('libs/date.js/build/xdate',[],function(){var t=function(t,e,n,r){function u(){return s(this instanceof u?this:new u,arguments)}function s(e,n){var r,s=n.length;if(Y(n[s-1])&&(r=n[--s],n=W(n,0,s)),s)if(1==s){var o=n[0];o instanceof t||L(o)?e[0]=new t(+o):o instanceof u?e[0]=w(o):J(o)&&(e[0]=new t(0),e=m(o,r||!1,e))}else e[0]=new t(ee.apply(t,n)),r||(e[0]=N(e[0]));else e[0]=new t;return Y(r)&&i(e,r),e}function o(t){return t[0].toString===ne}function i(e,n,r){return n?o(e)||(r&&(e[0]=z(e[0])),e[0].toString=ne):o(e)&&(e[0]=r?N(e[0]):new t(+e[0])),e}function a(t,e,n,r,u){var s=O(D,t[0],u),o=O(b,t[0],u),i=e==Z?n%12:s(Z),a=!1;2==r.length&&Y(r[1])&&(a=r[1],r=[n]),o(e,r),a&&s(Z)!=i&&(o(Z,[s(Z)-1]),o(E,[H(s(I),s(Z))]))}function c(t,n,r,u){r=Number(r);var s=e.floor(r);t["set"+V[n]](t["get"+V[n]]()+s,u||!1),s!=r&&$>n&&c(t,n+1,(r-s)*_[n],u)}function f(t,n,r){t=t.clone().setUTCMode(!0,!0),n=u(n).setUTCMode(!0,!0);var s=0;if(r==I||r==Z){for(var o=$;o>=r;o--)s/=_[o],s+=D(n,!1,o)-D(t,!1,o);r==Z&&(s+=12*(n.getFullYear()-t.getFullYear()))}else if(r==E){var i=t.toDate().setUTCHours(0,0,0,0),a=n.toDate().setUTCHours(0,0,0,0);s=e.round((a-i)/B)+(n-a-(t-i))/B}else s=(n-t)/[36e5,6e4,1e3,1][r-3];return s}function g(t){return h(t(I),t(Z),t(E))}function h(n,r,u){var s=new t(ee(n,r,u)),o=d(n),i=o;if(o>s)i=d(n-1);else{var a=d(n+1);s>=a&&(i=a)}return e.floor(e.round((s-i)/B)/7)+1}function d(e){var n=new t(ee(e,0,4));return n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+6)%7),n}function l(t,e,n,u){var s=O(D,t,u),o=O(b,t,u),i=d(n===r?s(I):n);u||(i=N(i)),t.setTime(+i),o(E,[s(E)+7*(e-1)])}function m(e,n,r){for(var s,o=u.parsers,i=0;i<o.length;i++)if(s=o[i](e,n,r))return s;return r[0]=new t(e),r}function T(e,n,r){var u=e.match(/^(\d{4})(-(\d{2})(-(\d{2})([T ](\d{2}):(\d{2})(:(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/);if(u){var s=new t(ee(u[1],u[3]?u[3]-1:0,u[5]||1,u[7]||0,u[8]||0,u[10]||0,u[12]?1e3*Number("0."+u[12]):0));return u[13]?u[14]&&s.setUTCMinutes(s.getUTCMinutes()+("-"==u[15]?1:-1)*(60*Number(u[16])+(u[18]?Number(u[18]):0))):n||(s=N(s)),r.setTime(+s)}}function y(t,e,n,r,s){function o(t){return n[t]||c[t]}function i(t){if(r)for(var e=(t==j?E:t)-1;e>=0;e--)r.push(f(e));return f(t)}var a=u.locales,c=a[u.defaultLocale]||{},f=O(D,t,s);return n=(J(n)?a[n]:n)||{},M(t,e,i,o,s)}function M(t,e,n,r,u){for(var s,o,i="";s=e.match(te);)i+=e.substr(0,s.index),s[1]?i+=p(t,s[1],n,r,u):s[3]?(o=M(t,s[4],n,r,u),parseInt(o.replace(/\D/g,""),10)&&(i+=o)):i+=s[7]||"'",e=e.substr(s.index+s[0].length);return i+e}function p(t,e,n,u,s){for(var o,i=e.length,a="";i>0;)o=C(t,e.substr(0,i),n,u,s),o!==r?(a+=o,e=e.substr(i),i=e.length):i--;return a+e}function C(t,e,n,r,s){var o=u.formatters[e];if(J(o))return M(t,o,n,r,s);if(k(o))return o(t,s||!1,r);switch(e){case"fff":return x(n($),3);case"s":return n(R);case"ss":return x(n(R));case"m":return n(P);case"mm":return x(n(P));case"h":return n(G)%12||12;case"hh":return x(n(G)%12||12);case"H":return n(G);case"HH":return x(n(G));case"d":return n(E);case"dd":return x(n(E));case"ddd":return r("dayNamesShort")[n(j)]||"";case"dddd":return r("dayNames")[n(j)]||"";case"M":return n(Z)+1;case"MM":return x(n(Z)+1);case"MMM":return r("monthNamesShort")[n(Z)]||"";case"MMMM":return r("monthNames")[n(Z)]||"";case"yy":return(n(I)+"").substring(2);case"yyyy":return n(I);case"t":return U(n,r).substr(0,1).toLowerCase();case"tt":return U(n,r).toLowerCase();case"T":return U(n,r).substr(0,1);case"TT":return U(n,r);case"z":case"zz":case"zzz":return s?"Z":S(t,e);case"w":return g(n);case"ww":return x(g(n));case"S":var i=n(E);return i>10&&20>i?"th":["st","nd","rd"][i%10-1]||"th"}}function S(t,n){var r=t.getTimezoneOffset(),u=0>r?"+":"-",s=e.floor(e.abs(r)/60),o=e.abs(r)%60,i=s;return"zz"==n?i=x(s):"zzz"==n&&(i=x(s)+":"+x(o)),u+i}function U(t,e){return e(t(G)<12?"amDesignator":"pmDesignator")}function v(t){return!isNaN(+t[0])}function w(e){var n=new t(+e[0]);return o(e)&&(n.toString=ne),n}function D(t,e,n){return t["get"+(e?"UTC":"")+V[n]]()}function b(t,e,n,r){t["set"+(e?"UTC":"")+V[n]].apply(t,r)}function z(e){return new t(ee(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()))}function N(e){return new t(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())}function H(e,n){return 32-new t(ee(e,n,32)).getUTCDate()}function F(t){return function(){return t.apply(r,[this].concat(W(arguments)))}}function O(t){var e=W(arguments,1);return function(){return t.apply(r,e.concat(W(arguments)))}}function W(t,e,u){return n.prototype.slice.call(t,e||0,u===r?t.length:u)}function A(t,e){for(var n=0;n<t.length;n++)e(t[n],n)}function J(t){return"string"==typeof t}function L(t){return"number"==typeof t}function Y(t){return"boolean"==typeof t}function k(t){return"function"==typeof t}function x(t,e){for(e=e||2,t+="";t.length<e;)t="0"+t;return t}var I=0,Z=1,E=2,G=3,P=4,R=5,$=6,j=7,q=8,B=864e5,K="yyyy-MM-dd'T'HH:mm:ss(.fff)",Q=K+"zzz",V=["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds","Day","Year"],X=["Years","Months","Days"],_=[12,31,24,60,60,1e3,1],te=new RegExp("(([a-zA-Z])\\2*)|(\\((('.*?'|\\(.*?\\)|.)*?)\\))|('(.*?)')"),ee=t.UTC,ne=t.prototype.toUTCString,re=u.prototype;return re.length=1,re.splice=n.prototype.splice,re.getUTCMode=F(o),re.setUTCMode=F(i),re.getTimezoneOffset=function(){return o(this)?0:this[0].getTimezoneOffset()},A(V,function(t,e){re["get"+t]=function(){return D(this[0],o(this),e)},e!=q&&(re["getUTC"+t]=function(){return D(this[0],!0,e)}),e!=j&&(re["set"+t]=function(t){return a(this,e,t,arguments,o(this)),this},e!=q&&(re["setUTC"+t]=function(t){return a(this,e,t,arguments,!0),this},re["add"+(X[e]||t)]=function(t,n){return c(this,e,t,n),this},re["diff"+(X[e]||t)]=function(t){return f(this,t,e)}))}),re.getWeek=function(){return g(O(D,this,!1))},re.getUTCWeek=function(){return g(O(D,this,!0))},re.setWeek=function(t,e){return l(this,t,e,!1),this},re.setUTCWeek=function(t,e){return l(this,t,e,!0),this},re.addWeeks=function(t){return this.addDays(7*Number(t))},re.diffWeeks=function(t){return f(this,t,E)/7},u.parsers=[T],u.parse=function(t){return+u(""+t)},re.toString=function(t,e,n){return t!==r&&v(this)?y(this,t,e,n,o(this)):this[0].toString()},re.toUTCString=re.toGMTString=function(t,e,n){return t!==r&&v(this)?y(this,t,e,n,!0):this[0].toUTCString()},re.toISOString=function(){return this.toUTCString(Q)},u.defaultLocale="",u.locales={"":{monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],amDesignator:"AM",pmDesignator:"PM"}},u.formatters={i:K,u:Q},A(["getTime","valueOf","toDateString","toTimeString","toLocaleString","toLocaleDateString","toLocaleTimeString","toJSON"],function(t){re[t]=function(){return this[0][t]()}}),re.setTime=function(t){return this[0].setTime(t),this},re.valid=F(v),re.clone=function(){return new u(this)},re.clearTime=function(){return this.setHours(0,0,0,0)},re.toDate=function(){return new t(+this[0])},u.now=function(){return+new t},u.today=function(){return(new u).clearTime()},u.UTC=ee,u.getDaysInMonth=H,"undefined"!=typeof module&&module.exports&&(module.exports=u),u}(Date,Math,Array);return t});
define('libs/date.js/build/date',["./xdate"],function(t){var e="www.datejs.com";return t[e]?t:(t.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]},function(){var e=t,n=e.prototype,r=e.CultureInfo,i=function(t,e){return e||(e=2),("000"+t).slice(-1*e)};n.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},n.setTimeToNow=function(){var e=new t;return this.setHours(e.getHours()),this.setMinutes(e.getMinutes()),this.setSeconds(e.getSeconds()),this.setMilliseconds(e.getMilliseconds()),this},e.today=function(){return(new t).clearTime()},e.compare=function(e,n){if(isNaN(e)||isNaN(n))throw new Error(e+" - "+n);if(e instanceof t&&n instanceof t)return n>e?-1:e>n?1:0;throw new TypeError(e+" - "+n)},e.equals=function(t,e){return 0===t.compareTo(e)},e.getDayNumberFromName=function(t){for(var e=r.dayNames,n=r.abbreviatedDayNames,i=r.shortestDayNames,s=t.toLowerCase(),a=0;a<e.length;a++)if(e[a].toLowerCase()==s||n[a].toLowerCase()==s||i[a].toLowerCase()==s)return a;return-1},e.getMonthNumberFromName=function(t){for(var e=r.monthNames,n=r.abbreviatedMonthNames,i=t.toLowerCase(),s=0;s<e.length;s++)if(e[s].toLowerCase()==i||n[s].toLowerCase()==i)return s;return-1},e.isLeapYear=function(t){return t%4===0&&t%100!==0||t%400===0},e.getDaysInMonth=function(t,n){return[31,e.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][n]},e.getTimezoneAbbreviation=function(t){for(var e=r.timezones,n=0;n<e.length;n++)if(e[n].offset===t)return e[n].name;return null},e.getTimezoneOffset=function(t){for(var e=r.timezones,n=0;n<e.length;n++)if(e[n].name===t.toUpperCase())return e[n].offset;return null},n.clone=function(){return new t(this.getTime())},n.compareTo=function(e){return t.compare(this,e)},n.equals=function(e){return t.equals(this,e||new t)},n.between=function(t,e){return this.getTime()>=t.getTime()&&this.getTime()<=e.getTime()},n.isAfter=function(e){return 1===this.compareTo(e||new t)},n.isBefore=function(e){return-1===this.compareTo(e||new t)},n.isToday=function(){return this.isSameDay(new t)},n.isSameDay=function(t){return this.clone().clearTime().equals(t.clone().clearTime())},n.addMilliseconds=function(t){return this.setMilliseconds(this.getMilliseconds()+t),this},n.addSeconds=function(t){return this.addMilliseconds(1e3*t)},n.addMinutes=function(t){return this.addMilliseconds(6e4*t)},n.addHours=function(t){return this.addMilliseconds(36e5*t)},n.addDays=function(t){return this.setDate(this.getDate()+t),this},n.addWeeks=function(t){return this.addDays(7*t)},n.addMonths=function(t){var n=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+t),this.setDate(Math.min(n,e.getDaysInMonth(this.getFullYear(),this.getMonth()))),this},n.addYears=function(t){return this.addMonths(12*t)},n.add=function(t){if("number"==typeof t)return this._orient=t,this;var e=t;return e.milliseconds&&this.addMilliseconds(e.milliseconds),e.seconds&&this.addSeconds(e.seconds),e.minutes&&this.addMinutes(e.minutes),e.hours&&this.addHours(e.hours),e.weeks&&this.addWeeks(e.weeks),e.months&&this.addMonths(e.months),e.years&&this.addYears(e.years),e.days&&this.addDays(e.days),this};var s,a,o;n.getWeek=function(){var t,e,n,r,i,u,h,c,d,l;return s=s?s:this.getFullYear(),a=a?a:this.getMonth()+1,o=o?o:this.getDate(),2>=a?(t=s-1,e=(t/4|0)-(t/100|0)+(t/400|0),n=((t-1)/4|0)-((t-1)/100|0)+((t-1)/400|0),d=e-n,i=0,u=o-1+31*(a-1)):(t=s,e=(t/4|0)-(t/100|0)+(t/400|0),n=((t-1)/4|0)-((t-1)/100|0)+((t-1)/400|0),d=e-n,i=d+1,u=o+(153*(a-3)+2)/5+58+d),h=(t+e)%7,r=(u+h-i)%7,c=u+3-r|0,l=0>c?53-((h-d)/5|0):c>364+d?1:(c/7|0)+1,s=a=o=null,l},n.getISOWeek=function(){return s=this.getUTCFullYear(),a=this.getUTCMonth()+1,o=this.getUTCDate(),i(this.getWeek())},n.setWeek=function(t){return this.moveToDayOfWeek(1).addWeeks(t-this.getWeek())},e._validate=function(t,e,n,r){if("undefined"==typeof t)return!1;if("number"!=typeof t)throw new TypeError(t+" is not a Number.");if(e>t||t>n)throw new RangeError(t+" is not a valid value for "+r+".");return!0},e.validateMillisecond=function(t){return e._validate(t,0,999,"millisecond")},e.validateSecond=function(t){return e._validate(t,0,59,"second")},e.validateMinute=function(t){return e._validate(t,0,59,"minute")},e.validateHour=function(t){return e._validate(t,0,23,"hour")},e.validateDay=function(t,n,r){return e._validate(t,1,e.getDaysInMonth(n,r),"day")},e.validateMonth=function(t){return e._validate(t,0,11,"month")},e.validateYear=function(t){return e._validate(t,0,9999,"year")},n.set=function(t){return e.validateMillisecond(t.millisecond)&&this.addMilliseconds(t.millisecond-this.getMilliseconds()),e.validateSecond(t.second)&&this.addSeconds(t.second-this.getSeconds()),e.validateMinute(t.minute)&&this.addMinutes(t.minute-this.getMinutes()),e.validateHour(t.hour)&&this.addHours(t.hour-this.getHours()),e.validateMonth(t.month)&&this.addMonths(t.month-this.getMonth()),e.validateYear(t.year)&&this.addYears(t.year-this.getFullYear()),e.validateDay(t.day,this.getFullYear(),this.getMonth())&&this.addDays(t.day-this.getDate()),t.timezone&&this.setTimezone(t.timezone),t.timezoneOffset&&this.setTimezoneOffset(t.timezoneOffset),t.week&&e._validate(t.week,0,53,"week")&&this.setWeek(t.week),this},n.moveToFirstDayOfMonth=function(){return this.set({day:1})},n.moveToLastDayOfMonth=function(){return this.set({day:e.getDaysInMonth(this.getFullYear(),this.getMonth())})},n.moveToNthOccurrence=function(t,e){var n=0;if(e>0)n=e-1;else if(-1===e)return this.moveToLastDayOfMonth(),this.getDay()!==t&&this.moveToDayOfWeek(t,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(t,1).addWeeks(n)},n.moveToDayOfWeek=function(t,e){var n=(t-this.getDay()+7*(e||1))%7;return this.addDays(0===n?n+=7*(e||1):n)},n.moveToMonth=function(t,e){var n=(t-this.getMonth()+12*(e||1))%12;return this.addMonths(0===n?n+=12*(e||1):n)},n.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new t(this.getFullYear(),0,1))/864e5)+1},n.getTimezone=function(){return e.getTimezoneAbbreviation(this.getUTCOffset())},n.setTimezoneOffset=function(t){var e=this.getTimezoneOffset(),n=-6*Number(t)/10;return this.addMinutes(n-e)},n.setTimezone=function(t){return this.setTimezoneOffset(e.getTimezoneOffset(t))},n.hasDaylightSavingTime=function(){return t.today().set({month:0,day:1}).getTimezoneOffset()!==t.today().set({month:6,day:1}).getTimezoneOffset()},n.isDaylightSavingTime=function(){return this.hasDaylightSavingTime()&&(new t).getTimezoneOffset()===t.today().set({month:6,day:1}).getTimezoneOffset()},n.getUTCOffset=function(){var t,e=-10*this.getTimezoneOffset()/6;return 0>e?(t=(e-1e4).toString(),t.charAt(0)+t.substr(2)):(t=(e+1e4).toString(),"+"+t.substr(1))},n.getElapsed=function(e){return(e||new t)-this},n.toISOString||(n.toISOString=function(){function t(t){return 10>t?"0"+t:t}return'"'+this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+"T"+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())+'Z"'});var u=n.toString,h=function(t){var e=this;if(t&&1==t.length){var n=r.formatPatterns;switch(e.t=e.toString,t){case"d":return e.t(n.shortDate);case"D":return e.t(n.longDate);case"F":return e.t(n.fullDateTime);case"m":return e.t(n.monthDay);case"r":return e.t(n.rfc1123);case"s":return e.t(n.sortableDateTime);case"t":return e.t(n.shortTime);case"T":return e.t(n.longTime);case"u":return e.t(n.universalSortableDateTime);case"y":return e.t(n.yearMonth)}}var s=function(t){switch(1*t){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};return t?t.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(t){if("\\"===t.charAt(0))return t.replace("\\","");switch(e.h=e.getHours,t){case"hh":return i(e.h()<13?0===e.h()?12:e.h():e.h()-12);case"h":return e.h()<13?0===e.h()?12:e.h():e.h()-12;case"HH":return i(e.h());case"H":return e.h();case"mm":return i(e.getMinutes());case"m":return e.getMinutes();case"ss":return i(e.getSeconds());case"s":return e.getSeconds();case"yyyy":return i(e.getFullYear(),4);case"yy":return i(e.getFullYear());case"dddd":return r.dayNames[e.getDay()];case"ddd":return r.abbreviatedDayNames[e.getDay()];case"dd":return i(e.getDate());case"d":return e.getDate();case"MMMM":return r.monthNames[e.getMonth()];case"MMM":return r.abbreviatedMonthNames[e.getMonth()];case"MM":return i(e.getMonth()+1);case"M":return e.getMonth()+1;case"t":return e.h()<12?r.amDesignator.substring(0,1):r.pmDesignator.substring(0,1);case"tt":return e.h()<12?r.amDesignator:r.pmDesignator;case"S":return s(e.getDate());default:return t}}):u.apply(this,arguments)};n.toString=h}(),function(){var e=t,n=e.prototype,r=e.CultureInfo,i=Number.prototype;n._orient=1,n._nth=null,n._is=!1,n._same=!1,n._isSecond=!1,i._dateElement="day",n.next=function(){return this._orient=1,this},e.next=function(){return e.today().next()},n.last=n.prev=n.previous=function(){return this._orient=-1,this},e.last=e.prev=e.previous=function(){return e.today().last()},n.is=function(){return this._is=!0,this},n.same=function(){return this._same=!0,this._isSecond=!1,this},n.today=function(){return this.same().day()},n.weekday=function(){return this._is?(this._is=!1,!this.is().sat()&&!this.is().sun()):!1},n.at=function(t){return"string"==typeof t?e.parse(this.toString("d")+" "+t):this.set(t)},i.fromNow=i.after=function(e){var n={};return n[this._dateElement]=this,(e?e.clone():new t).add(n)},i.ago=i.before=function(e){var n={};return n[this._dateElement]=-1*this,(e?e.clone():new t).add(n)};var s,a="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),o="january february march april may june july august september october november december".split(/\s/),u="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),h="Milliseconds Seconds Minutes Hours Date Week Month FullYear".split(/\s/),c="final first second third fourth fifth".split(/\s/);n.toObject=function(){for(var t={},e=0;e<u.length;e++)t[u[e].toLowerCase()]=this["get"+h[e]]();return t},e.fromObject=function(e){return e.week=null,t.today().set(e)};for(var d=function(t){return function(){if(this._is)return this._is=!1,this.getDay()==t;if(null!==this._nth){this._isSecond&&this.addSeconds(-1*this._orient),this._isSecond=!1;var n=this._nth;this._nth=null;var r=this.clone().moveToLastDayOfMonth();if(this.moveToNthOccurrence(t,n),this>r)throw new RangeError(e.getDayName(t)+" does not occur "+n+" times in the month of "+e.getMonthName(r.getMonth())+" "+r.getFullYear()+".");return this}return this.moveToDayOfWeek(t,this._orient)}},l=function(t){return function(){var n=e.today(),i=t-n.getDay();return 0===t&&1===r.firstDayOfWeek&&0!==n.getDay()&&(i+=7),n.addDays(i)}},f=0;f<a.length;f++)e[a[f].toUpperCase()]=e[a[f].toUpperCase().substring(0,3)]=f,e[a[f]]=e[a[f].substring(0,3)]=l(f),n[a[f]]=n[a[f].substring(0,3)]=d(f);for(var y=function(t){return function(){return this._is?(this._is=!1,this.getMonth()===t):this.moveToMonth(t,this._orient)}},m=function(t){return function(){return e.today().set({month:t,day:1})}},g=0;g<o.length;g++)e[o[g].toUpperCase()]=e[o[g].toUpperCase().substring(0,3)]=g,e[o[g]]=e[o[g].substring(0,3)]=m(g),n[o[g]]=n[o[g].substring(0,3)]=y(g);for(var p=function(e){return function(){if(this._isSecond)return this._isSecond=!1,this;if(this._same){this._same=this._is=!1;for(var n=this.toObject(),r=(arguments[0]||new t).toObject(),i="",s=e.toLowerCase(),a=u.length-1;a>-1;a--){if(i=u[a].toLowerCase(),n[i]!=r[i])return!1;if(s==i)break}return!0}return"s"!=e.substring(e.length-1)&&(e+="s"),this["add"+e](this._orient)}},M=function(t){return function(){return this._dateElement=t,this}},v=0;v<u.length;v++)s=u[v].toLowerCase(),n[s]=n[s+"s"]=p(u[v]),i[s]=i[s+"s"]=M(s);n._ss=p("Second");for(var w=function(t){return function(e){return this._same?this._ss(arguments[0]):e||0===e?this.moveToNthOccurrence(e,t):(this._nth=t,2!==t||void 0!==e&&null!==e?this:(this._isSecond=!0,this.addSeconds(this._orient)))}},T=0;T<c.length;T++)n[c[T]]=w(0===T?-1:T)}(),function(){t.Parsing={Exception:function(t){this.message="Parse error at '"+t.substring(0,10)+" ...'"}};for(var e=t.Parsing,n=e.Operators={rtoken:function(t){return function(n){var r=n.match(t);if(r)return[r[0],n.substring(r[0].length)];throw new e.Exception(n)}},token:function(){return function(t){return n.rtoken(new RegExp("^s*"+t+"s*"))(t)}},stoken:function(t){return n.rtoken(new RegExp("^"+t))},until:function(t){return function(e){for(var n=[],r=null;e.length;){try{r=t.call(this,e)}catch(i){n.push(r[0]),e=r[1];continue}break}return[n,e]}},many:function(t){return function(e){for(var n=[],r=null;e.length;){try{r=t.call(this,e)}catch(i){return[n,e]}n.push(r[0]),e=r[1]}return[n,e]}},optional:function(t){return function(e){var n=null;try{n=t.call(this,e)}catch(r){return[null,e]}return[n[0],n[1]]}},not:function(t){return function(n){try{t.call(this,n)}catch(r){return[null,n]}throw new e.Exception(n)}},ignore:function(t){return t?function(e){var n=null;return n=t.call(this,e),[null,n[1]]}:null},product:function(){for(var t=arguments[0],e=Array.prototype.slice.call(arguments,1),r=[],i=0;i<t.length;i++)r.push(n.each(t[i],e));return r},cache:function(t){var n={},r=null;return function(i){try{r=n[i]=n[i]||t.call(this,i)}catch(s){r=n[i]=s}if(r instanceof e.Exception)throw r;return r}},any:function(){var t=arguments;return function(n){for(var r=null,i=0;i<t.length;i++)if(null!=t[i]){try{r=t[i].call(this,n)}catch(s){r=null}if(r)return r}throw new e.Exception(n)}},each:function(){var t=arguments;return function(n){for(var r=[],i=null,s=0;s<t.length;s++)if(null!=t[s]){try{i=t[s].call(this,n)}catch(a){throw new e.Exception(n)}r.push(i[0]),n=i[1]}return[r,n]}},all:function(){var t=arguments,e=e;return e.each(e.optional(t))},sequence:function(t,r,i){return r=r||n.rtoken(/^\s*/),i=i||null,1==t.length?t[0]:function(n){for(var s=null,a=null,o=[],u=0;u<t.length;u++){try{s=t[u].call(this,n)}catch(h){break}o.push(s[0]);try{a=r.call(this,s[1])}catch(c){a=null;break}n=a[1]}if(!s)throw new e.Exception(n);if(a)throw new e.Exception(a[1]);if(i)try{s=i.call(this,s[1])}catch(d){throw new e.Exception(s[1])}return[o,s?s[1]:n]}},between:function(t,e,i){i=i||t;var s=n.each(n.ignore(t),e,n.ignore(i));return function(t){var e=s.call(this,t);return[[e[0][0],r[0][2]],e[1]]}},list:function(t,e,r){return e=e||n.rtoken(/^\s*/),r=r||null,t instanceof Array?n.each(n.product(t.slice(0,-1),n.ignore(e)),t.slice(-1),n.ignore(r)):n.each(n.many(n.each(t,n.ignore(e))),px,n.ignore(r))},set:function(t,r,i){return r=r||n.rtoken(/^\s*/),i=i||null,function(s){for(var a=null,o=null,u=null,h=null,c=[[],s],d=!1,l=0;l<t.length;l++){u=null,o=null,a=null,d=1==t.length;try{a=t[l].call(this,s)}catch(f){continue}if(h=[[a[0]],a[1]],a[1].length>0&&!d)try{u=r.call(this,a[1])}catch(y){d=!0}else d=!0;if(d||0!==u[1].length||(d=!0),!d){for(var m=[],g=0;g<t.length;g++)l!=g&&m.push(t[g]);o=n.set(m,r).call(this,u[1]),o[0].length>0&&(h[0]=h[0].concat(o[0]),h[1]=o[1])}if(h[1].length<c[1].length&&(c=h),0===c[1].length)break}if(0===c[0].length)return c;if(i){try{u=i.call(this,c[1])}catch(p){throw new e.Exception(c[1])}c[1]=u[1]}return c}},forward:function(t,e){return function(n){return t[e].call(this,n)}},replace:function(t,e){return function(n){var r=t.call(this,n);return[e,r[1]]}},process:function(t,e){return function(n){var r=t.call(this,n);return[e.call(this,r[0]),r[1]]}},min:function(t,n){return function(r){var i=n.call(this,r);if(i[0].length<t)throw new e.Exception(r);return i}}},i=function(t){return function(){var e=null,n=[];if(arguments.length>1?e=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(e=arguments[0]),!e)return t.apply(null,arguments);for(var r=0,i=e.shift();r<i.length;r++)return e.unshift(i[r]),n.push(t.apply(null,e)),e.shift(),n}},s="optional not ignore cache".split(/\s/),a=0;a<s.length;a++)n[s[a]]=i(n[s[a]]);for(var o=function(t){return function(){return arguments[0]instanceof Array?t.apply(null,arguments[0]):t.apply(null,arguments)}},u="each any all".split(/\s/),h=0;h<u.length;h++)n[u[h]]=o(n[u[h]])}(),function(){var e=t,n=(e.prototype,e.CultureInfo),r=function(t){for(var e=[],n=0;n<t.length;n++)t[n]instanceof Array?e=e.concat(r(t[n])):t[n]&&e.push(t[n]);return e};e.Grammar={},e.Translator={hour:function(t){return function(){this.hour=Number(t)}},minute:function(t){return function(){this.minute=Number(t)}},second:function(t){return function(){this.second=Number(t)}},meridian:function(t){return function(){this.meridian=t.slice(0,1).toLowerCase()}},timezone:function(t){return function(){var e=t.replace(/[^\d\+\-]/g,"");e.length?this.timezoneOffset=Number(e):this.timezone=t.toLowerCase()}},day:function(t){var e=t[0];return function(){this.day=Number(e.match(/\d+/)[0])}},month:function(t){return function(){this.month=3==t.length?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(t)/4:Number(t)-1}},year:function(t){return function(){var e=Number(t);this.year=t.length>2?e:e+(e+2e3<n.twoDigitYearMax?2e3:1900)}},rday:function(t){return function(){switch(t){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0,this.now=!0}}},finishExact:function(n){n=n instanceof Array?n:[n];for(var r=0;r<n.length;r++)n[r]&&n[r].call(this);var i=new t;if(!this.hour&&!this.minute||this.month||this.year||this.day||(this.day=i.getDate()),this.year||(this.year=i.getFullYear()),this.month||0===this.month||(this.month=i.getMonth()),this.day||(this.day=1),this.hour||(this.hour=0),this.minute||(this.minute=0),this.second||(this.second=0),this.meridian&&this.hour&&("p"==this.meridian&&this.hour<12?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.day>e.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");var s=new t(this.year,this.month,this.day,this.hour,this.minute,this.second);return this.timezone?s.set({timezone:this.timezone}):this.timezoneOffset&&s.set({timezoneOffset:this.timezoneOffset}),s},finish:function(n){if(n=n instanceof Array?r(n):[n],0===n.length)return null;for(var i=0;i<n.length;i++)"function"==typeof n[i]&&n[i].call(this);var s=e.today();if(this.now&&!this.unit&&!this.operator)return new t;this.now&&(s=new t);var a,o,u,h=!!(this.days&&null!==this.days||this.orient||this.operator);if(u="past"==this.orient||"subtract"==this.operator?-1:1,this.now||-1=="hour minute second".indexOf(this.unit)||s.setTimeToNow(),(this.month||0===this.month)&&-1!="year day hour minute second".indexOf(this.unit)&&(this.value=this.month+1,this.month=null,h=!0),!h&&this.weekday&&!this.day&&!this.days){var c=t[this.weekday]();this.day=c.getDate(),this.month||(this.month=c.getMonth()),this.year=c.getFullYear()}if(h&&this.weekday&&"month"!=this.unit&&(this.unit="day",a=e.getDayNumberFromName(this.weekday)-s.getDay(),o=7,this.days=a?(a+u*o)%o:u*o),this.month&&"day"==this.unit&&this.operator&&(this.value=this.month+1,this.month=null),null!=this.value&&null!=this.month&&null!=this.year&&(this.day=1*this.value),this.month&&!this.day&&this.value&&(s.set({day:1*this.value}),h||(this.day=1*this.value)),this.month||!this.value||"month"!=this.unit||this.now||(this.month=this.value,h=!0),h&&(this.month||0===this.month)&&"year"!=this.unit&&(this.unit="month",a=this.month-s.getMonth(),o=12,this.months=a?(a+u*o)%o:u*o,this.month=null),this.unit||(this.unit="day"),!this.value&&this.operator&&null!==this.operator&&this[this.unit+"s"]&&null!==this[this.unit+"s"]?this[this.unit+"s"]=this[this.unit+"s"]+("add"==this.operator?1:-1)+(this.value||0)*u:(null==this[this.unit+"s"]||null!=this.operator)&&(this.value||(this.value=1),this[this.unit+"s"]=this.value*u),this.meridian&&this.hour&&("p"==this.meridian&&this.hour<12?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.weekday&&!this.day&&!this.days){var c=t[this.weekday]();this.day=c.getDate(),c.getMonth()!==s.getMonth()&&(this.month=c.getMonth())}return!this.month&&0!==this.month||this.day||(this.day=1),this.orient||this.operator||"week"!=this.unit||!this.value||this.day||this.month?(h&&this.timezone&&this.day&&this.days&&(this.day=this.days),h?s.add(this):s.set(this)):t.today().setWeek(this.value)}};var i,s=e.Parsing.Operators,a=e.Grammar,o=e.Translator;a.datePartDelimiter=s.rtoken(/^([\s\-\.\,\/\x27]+)/),a.timePartDelimiter=s.stoken(":"),a.whiteSpace=s.rtoken(/^\s*/),a.generalDelimiter=s.rtoken(/^(([\s\,]|at|@|on)+)/);var u={};a.ctoken=function(t){var e=u[t];if(!e){for(var r=n.regexPatterns,i=t.split(/\s+/),a=[],o=0;o<i.length;o++)a.push(s.replace(s.rtoken(r[i[o]]),i[o]));e=u[t]=s.any.apply(null,a)}return e},a.ctoken2=function(t){return s.rtoken(n.regexPatterns[t])},a.h=s.cache(s.process(s.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),o.hour)),a.hh=s.cache(s.process(s.rtoken(/^(0[0-9]|1[0-2])/),o.hour)),a.H=s.cache(s.process(s.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),o.hour)),a.HH=s.cache(s.process(s.rtoken(/^([0-1][0-9]|2[0-3])/),o.hour)),a.m=s.cache(s.process(s.rtoken(/^([0-5][0-9]|[0-9])/),o.minute)),a.mm=s.cache(s.process(s.rtoken(/^[0-5][0-9]/),o.minute)),a.s=s.cache(s.process(s.rtoken(/^([0-5][0-9]|[0-9])/),o.second)),a.ss=s.cache(s.process(s.rtoken(/^[0-5][0-9]/),o.second)),a.hms=s.cache(s.sequence([a.H,a.m,a.s],a.timePartDelimiter)),a.t=s.cache(s.process(a.ctoken2("shortMeridian"),o.meridian)),a.tt=s.cache(s.process(a.ctoken2("longMeridian"),o.meridian)),a.z=s.cache(s.process(s.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),o.timezone)),a.zz=s.cache(s.process(s.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),o.timezone)),a.zzz=s.cache(s.process(a.ctoken2("timezone"),o.timezone)),a.timeSuffix=s.each(s.ignore(a.whiteSpace),s.set([a.tt,a.zzz])),a.time=s.each(s.optional(s.ignore(s.stoken("T"))),a.hms,a.timeSuffix),a.d=s.cache(s.process(s.each(s.rtoken(/^([0-2]\d|3[0-1]|\d)/),s.optional(a.ctoken2("ordinalSuffix"))),o.day)),a.dd=s.cache(s.process(s.each(s.rtoken(/^([0-2]\d|3[0-1])/),s.optional(a.ctoken2("ordinalSuffix"))),o.day)),a.ddd=a.dddd=s.cache(s.process(a.ctoken("sun mon tue wed thu fri sat"),function(t){return function(){this.weekday=t}})),a.M=s.cache(s.process(s.rtoken(/^(1[0-2]|0\d|\d)/),o.month)),a.MM=s.cache(s.process(s.rtoken(/^(1[0-2]|0\d)/),o.month)),a.MMM=a.MMMM=s.cache(s.process(a.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),o.month)),a.y=s.cache(s.process(s.rtoken(/^(\d\d?)/),o.year)),a.yy=s.cache(s.process(s.rtoken(/^(\d\d)/),o.year)),a.yyy=s.cache(s.process(s.rtoken(/^(\d\d?\d?\d?)/),o.year)),a.yyyy=s.cache(s.process(s.rtoken(/^(\d\d\d\d)/),o.year)),i=function(){return s.each(s.any.apply(null,arguments),s.not(a.ctoken2("timeContext")))},a.day=i(a.d,a.dd),a.month=i(a.M,a.MMM),a.year=i(a.yyyy,a.yy),a.orientation=s.process(a.ctoken("past future"),function(t){return function(){this.orient=t}}),a.operator=s.process(a.ctoken("add subtract"),function(t){return function(){this.operator=t}}),a.rday=s.process(a.ctoken("yesterday tomorrow today now"),o.rday),a.unit=s.process(a.ctoken("second minute hour day week month year"),function(t){return function(){this.unit=t}}),a.value=s.process(s.rtoken(/^\d\d?(st|nd|rd|th)?/),function(t){return function(){this.value=t.replace(/\D/g,"")}}),a.expression=s.set([a.rday,a.operator,a.value,a.unit,a.orientation,a.ddd,a.MMM]),i=function(){return s.set(arguments,a.datePartDelimiter)},a.mdy=i(a.ddd,a.month,a.day,a.year),a.ymd=i(a.ddd,a.year,a.month,a.day),a.dmy=i(a.ddd,a.day,a.month,a.year),a.date=function(t){return(a[n.dateElementOrder]||a.mdy).call(this,t)},a.format=s.process(s.many(s.any(s.process(s.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(t){if(a[t])return a[t];throw e.Parsing.Exception(t)}),s.process(s.rtoken(/^[^dMyhHmstz]+/),function(t){return s.ignore(s.stoken(t))}))),function(t){return s.process(s.each.apply(null,t),o.finishExact)});var h={},c=function(t){return h[t]=h[t]||a.format(t)[0]};a.formats=function(t){if(t instanceof Array){for(var e=[],n=0;n<t.length;n++)e.push(c(t[n]));return s.any.apply(null,e)}return c(t)},a._formats=a.formats(['"yyyy-MM-ddTHH:mm:ssZ"',"yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]),a._start=s.process(s.set([a.date,a.time,a.expression],a.generalDelimiter,a.whiteSpace),o.finish),a.start=function(t){try{var e=a._formats.call({},t);if(0===e[1].length)return e}catch(n){}return a._start.call({},t)},e._parse=e.parse,e.parse=function(n){var r=null;if(!n)return null;if(n instanceof t)return n;if(n instanceof window.Date)return new t(n);try{r=e.Grammar.start.call({},n.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(i){return null}var s=0===r[1].length?r[0]:null;return s&&(s=new t(s)),s},e.getParseFunction=function(t){var n=e.Grammar.formats(t);return function(t){var e=null;try{e=n.call({},t)}catch(r){return null}return 0===e[1].length?e[0]:null}},e.parseExact=function(t,n){return e.getParseFunction(n)(t)}}(),t[e]=!0,t)});
define('tau/utils/utils.date/utils.date.wrapper',["libs/date.js/build/date"],function(t){return t.prototype.getDaysInMonth=function(){return t.getDaysInMonth(this.getFullYear(),this.getMonth())},t});
define('tau/utils/utils.date/utils.date.formats',[],function(){var y={};return y={date:{"short":"d-MMM-yyyy",iso:"yyyy-MM-dd"},time:{"short":"HH:mm",iso:"HH:mm:ss"},datetime:{"short":"d-MMM-yyyy HH:mm",iso:"yyyy-MM-ddTHH:mm:ss"}}});
define('tau/utils/utils.translation',["Underscore"],function(r){var e={pluralize:function(e,n){var t=r.isArray(e)?e:e.split("|"),i=function(r){return 1===r?0:1},s=i(n);return t[s]?t[s]:t[0]},BAD_SHORTENINGS:{ass:!0},shorten:function(e,n){e=r.trim(e||""),n=n||3;var t=r.trim(e.slice(0,n));return this.BAD_SHORTENINGS[t.toLowerCase()]&&(t=t.replace(/.$/,".")),t}};return e});
define('libs/date.js/build/time.special',[],function(){TimeSpan=function(s,t){this.days=0,this.hours=0,this.minutes=0,this.seconds=0,this.milliseconds=0;var e=0>s?-1:1;return this.milliseconds=Math.abs(s),t=t||Math.floor,this.days=t(this.milliseconds/864e5)*e,this.milliseconds=this.milliseconds%864e5,this.hours=t(this.milliseconds/36e5)*e,this.milliseconds=this.milliseconds%36e5,this.minutes=t(this.milliseconds/6e4)*e,this.milliseconds=this.milliseconds%6e4,this.seconds=t(this.milliseconds/1e3)*e,this.milliseconds=this.milliseconds%1e3,this.milliseconds=this.milliseconds*e,this},TimeSpan.prototype.compare=function(s){var t,e=new Date(1970,1,1,this.hours(),this.minutes(),this.seconds());return t=null===s?new Date(1970,1,1,0,0,0):new Date(1970,1,1,s.hours(),s.minutes(),s.seconds()),e>t?1:t>e?-1:0},TimeSpan.prototype.add=function(s){return null===s?this:this.addSeconds(s.getTotalMilliseconds()/1e3)},TimeSpan.prototype.subtract=function(s){return null===s?this:this.addSeconds(-s.getTotalMilliseconds()/1e3)},TimeSpan.prototype.addDays=function(s){return new TimeSpan(this.getTotalMilliseconds()+24*s*60*60*1e3)},TimeSpan.prototype.addHours=function(s){return new TimeSpan(this.getTotalMilliseconds()+60*s*60*1e3)},TimeSpan.prototype.addMinutes=function(s){return new TimeSpan(this.getTotalMilliseconds()+60*s*1e3)},TimeSpan.prototype.addSeconds=function(s){return new TimeSpan(this.getTotalMilliseconds()+1e3*s)},TimeSpan.prototype.addMilliseconds=function(s){return new TimeSpan(this.getTotalMilliseconds()+s)},TimeSpan.prototype.getTotalMilliseconds=function(){return 864e5*this.days()+36e5*this.hours()+6e4*this.minutes()+1e3*this.seconds()},TimeSpan.prototype.get12HourHour=function(){return(h=this.hours()%12)?h:12},TimeSpan.prototype.getDesignator=function(){return this.hours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator},TimeSpan.prototype.toString=function(s){function t(s){return s.toString().length<2?"0"+s:s}var e=this;return s?s.replace(/d|dd|HH|H|hh|h|mm|m|ss|s|tt|t/g,function(s){switch(s){case"d":return e.days();case"dd":return t(e.days());case"H":return e.hours();case"HH":return t(e.hours());case"h":return e.get12HourHour();case"hh":return t(e.get12HourHour());case"m":return e.minutes();case"mm":return t(e.minutes());case"s":return e.seconds();case"ss":return t(e.seconds());case"t":return(this.hours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator).substring(0,1);case"tt":return this.hours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator}}):this._toString()};var s=function(s,t,e){this.years=0,this.months=0,this.days=0,this.hours=0,this.minutes=0,this.seconds=0,this.milliseconds=0;var i=s.clone(),n=t.clone(),o=i.clone(),r=i>n?-1:1;if(this.years=n.getFullYear()-i.getFullYear(),o.addYears(this.years),1==r?o>n&&0!==this.years&&this.years--:n>o&&0!==this.years&&this.years++,i.addYears(this.years),1==r)for(;n>i&&i.clone().addDays(i.getDaysInMonth())<=n;)i.addMonths(1),this.months++;else for(;i>n&&i.clone().addDays(-i.getDaysInMonth())>=n;)i.addMonths(-1),this.months--;var a=n-i;if(0!==a){var h=new TimeSpan(a,e);this.days=h.days,this.hours=h.hours,this.minutes=h.minutes,this.seconds=h.seconds,this.milliseconds=h.milliseconds}return this.months>=1&&this.months<11&&this.days>14&&(this.months+=1),this.years>=1&&this.months>5&&(this.years+=1),this};return{TimePeriod:s,TimeSpan:TimeSpan}});
define('tau/utils/utils.date',["Underscore","tau/utils/utils.date/utils.date.wrapper","tau/utils/utils.date/utils.date.formats","tau/utils/utils.translation","libs/date.js/build/time.special"],function(t,e,n,r,i){var u={},o="/Date",s=/^\/Date\((-?\d+)(([+-])(\d{2})(\d{2}))\)\//,a=function(t){return function(e){var n=u.parse(e);return n?u._format(n,t):""}};return u={Date:e,format:{date:{"short":a(n.date.short),iso:a(n.date.iso)},time:{"short":a(n.time.short),iso:a(n.time.iso)},datetime:{"short":a(n.datetime.short),iso:a(n.datetime.iso)}},_format:function(t,e){return t.toString(e)||""},formatAs:function(t,n){return t instanceof e||(t=new e(t)),this._format(t,n)},_getServerTimezonOffset:function(){var t=window.tauServerInfo||{timeZoneOffsetInMilliseconds:0};return t.timeZoneOffsetInMilliseconds},_convertToServerTime:function(t){return new e(t.getTime()-this._getServerTimezonOffset())},getServerNow:function(){return this.__now||this._convertToServerTime(new e)},lockNow:function(t){this.__now=new e(t)},unlockNow:function(){this.__now=null},parse:function(n){if(t.isString(n)&&0===n.indexOf(o)){var r=n.match(s),i=parseInt(r[1]),u=(60*parseInt(r[4])+parseInt(r[5]))*parseInt(r[3]+"1");n=new e(i),n.sourceOffset=u}return e.parse(n)},convertToTimezone:function(t,n){if(t=u.parse(t),!t)return t;if(!n){var r=t.sourceOffset;n=null!==r&&void 0!==r?r:null}if(null===n||void 0===n)return t;var i=t.getTimezoneOffset(),o=60*(n+i)*1e3;return t=new e(t.getTime()+o)},getFormatData:function(){return n},getAge:function(n,u){n=e.parse(n),u=e.parse(u);var o={isZero:!0,value:0,unit:"sec",direction:u>n?"ago":"after",toString:function(){return this.isZero?"now":this.value+" "+this.unit+" "+this.direction}},s=new i.TimePeriod(n,u,function(t){return 1===t?1:1>t?0:Math.round(t)}),a=[{func:"years",units:"year|years"},{func:"months",units:"month|months"},{func:"days",units:"day|days"},{func:"hours",units:"hour|hours"},{func:"minutes",units:"min"},{func:"seconds",units:"sec"}],f=t.detect(a,function(t){var e=s[t.func];return 0!==e?(t.value=Math.abs(e),t.unit=r.pluralize(t.units,e),!0):void 0});return f&&(o.isZero=!1,o.value=f.value,o.unit=f.unit),o},addDays:function(t,n){return new e(t.getTime()+864e5*n)},getDiff:function(t,e){return t-e-60*t.getTimezoneOffset()*1e3+60*e.getTimezoneOffset()*1e3},getDiffInDays:function(t,e){return Math.ceil(this.getDiff(t,e)/864e5)},getDiffInMinutes:function(t,e){return Math.ceil(this.getDiff(t,e)/6e4)},addMinutes:function(t,n){return new e(t.getTime()+6e4*n)},sameDay:function(t,e){return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()},parseTimestamp:function(t){var e=6,n=t.length-2,r=t.substring(e,n);return parseInt(r)},parseTimestampToDate:function(t){return new e(this.parseTimestamp(t))},toTimestamp:function(t){return"/Date("+t.valueOf()+"+0000)/"},between:function(t,n,r){var i=new e(t.getYear(),t.getMonth(),t.getDate()),u=new e(n.getYear(),n.getMonth(),n.getDate()),o=new e(r.getYear(),r.getMonth(),r.getDate()+1);return i>=u&&o>i},getNow:function(){return new e}}});
define('tau/utils/utils.constants',["jQuery"],function(){return function(){var e={},n=Object.prototype.hasOwnProperty,t={string:1,number:1,"boolean":1,regexp:1};return e.emailRegexp=/^[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,{define:function(r,i){return this.defined(r)?!1:n.call(t,$.type(i))?(e[r]=i,!0):!1},defined:function(t){return n.call(e,t)},get:function(n){return this.defined(n)?e[n]:null}}}()});
define('tau/services/service.avatar',["tau/core/class","tau/core/tau"],function(e,r){var t=e.extend({init:function(e){this.appPath=e,this.service=$.ajax},getCropRect:function(e){return this.service({url:this.appPath+"/avatar.ashx?userid="+e+"&operation=CropRect&"+(new Date).getTime()+r.getTokenParameterFromQueryString("&")}).then(function(e){return JSON.parse(e).CropRect},function(e){return JSON.parse(e.responseText)})},crop:function(e){return this.service({url:e}).then(function(e){return JSON.parse(e)},function(e){return JSON.parse(e.responseText)})},remove:function(e){return this.service({url:e}).then(function(e){return JSON.parse(e)},function(e){return JSON.parse(e.responseText)})}});return t});
define('tau/services/comet/comet.subscriber',["Underscore","jQuery","tau/core/class"],function(s,i,r){return r.extend({init:function(r,t){this.subscriptionIds=[],this.resourceProxy=t.get(r),this.aborted=i.Deferred(),this.resourceProxy.onStatus.progress(s.bind(function(i){var r=s.difference(this.subscriptionIds,i);r.length>0&&this.aborted.resolve()},this))},subscribe:function(i,r){var t=s.bind(function(s,i,r){this.subscriptionIds=s.union(this.subscriptionIds,r),i(this.subscriptionIds)},this,s,r);this.resourceProxy.subscribe(i,t)},unsubscribe:function(s){this.resourceProxy.unsubscribe(this.subscriptionIds,s),this.subscriptionIds=[]}})});
define('tau/services/comet/comet.connection',["jQuery","./comet.subscriber"],function(e,n){e(document).ready(function(){e(this).keypress(function(e){return 27==e.keyCode?!1:void 0})});var r=e.Callbacks(),o=e.Deferred(),t=e.Deferred(),c=e.Deferred(),i=!0;e(window).on("beforeunload",function(){r.disable()});var d={disconnectedOnce:r.add,startAsync:function(d){d=d||e.noop,o.done(d),i&&(i=!1,require(["tp/serverNotifications"],function(d){d&&(t.done(function(){d.stop(function(){i=!0,o=e.Deferred(),c.resolve(),c=e.Deferred()})}),d.disconnected(function(){i=!0,o=e.Deferred(),c=e.Deferred(),r.fire().empty()}),d.start(function(){var e={createSubscriber:function(e){return new n(e,d)}};o.resolve(e)}))}))},stopAsync:function(n){c.done(n||e.noop),t.resolve()}};return d});
define('tau/services/comet/comet.subscription',["Underscore","jQuery","tau/core/class"],function(t,e,i){return i.extend({init:function(i,r,s){this.connection=s,t.isArray(r)||(r=[r]),this.deferDisconnected=e.Deferred(),this.$cmdOnAbort=e.Deferred(),this.$cmdStart=e.Deferred(),this.$cmdStarted=e.Deferred(),this.$cmdStop=e.Deferred(),this.$cmdStopped=e.Deferred(),this.$cmdNotify=e.Deferred(),this.$cmdBatchNotify=e.Deferred(),this.params=t.map(r,t.bind(function(t){return t.callback=this.$cmdNotify.notify,t.batchCallback=this.$cmdBatchNotify.notify,t.clientId=t.parameters.clientId,t},this)),this.connection.disconnectedOnce(this.deferDisconnected.resolve),this.connection.startAsync(t.bind(function(t){this.setSubscriber(t.createSubscriber(i))},this))},disconnected:function(t){return this.deferDisconnected.done(t),this},aborted:function(t){return this.$cmdOnAbort.done(t),this},start:function(t){return this.$cmdStarted.done(t),this.$cmdStart.resolve(this.params),this},stop:function(t){this.deferDisconnected=e.Deferred(),this.$cmdStopped.done(t),this.$cmdStop.resolve()},on:function(i){var r={},s=function(t){var e=r["*"];e&&e.notify(t);var i=(t.data.modification||"").toLowerCase(),s=r[i];s&&s.notify(t)},n=e.Deferred(),c=function(t){n.notify(t)};this.$cmdNotify.progress(s),this.$cmdBatchNotify.progress(c);var o=(i.eventName||"*").toLowerCase(),d=i.callback||e.noop,h=i.batchCallback||e.noop;t.has(r,o)||(r[o]=e.Deferred()),n.progress(h);var a=r[o];return a.progress(d),this},setSubscriber:function(e){this.subscriber=e,this.subscriber.aborted.done(this.$cmdOnAbort.resolve),this.$cmdStop.done(t.bind(function(){this.subscriber.unsubscribe(this.$cmdStopped.resolve)},this)),this.$cmdStart.done(t.bind(function(t){this.subscriber.subscribe(t,this.$cmdStarted.resolve)},this))}})});
define('tau/services/comet/service.comet',["Underscore","tau/core/class","./comet.subscription"],function(n,t,e){return t.extend({init:function(n){this.cometConnection=n},listen:function(n,t){return new e(n,t,this.cometConnection)}})});
define('tau/services/service.tp2',["Underscore","jQuery","tau/core/class"],function(e,o,t){return t.extend({showPopupToChangeProcessWorkflow:function(e,t,n,r){t.tauIFramePopup({url:e.getUrlBuilder().getAdminWorkflowEdit(r)}),t.on("tauiframepopupload",function(e,t){var r=o((t[0].contentDocument||t[0].contentWindow.document).body),u=r.find("._entities"),a=u.find("option").filter(function(e,t){return o(t).attr("value").toLowerCase()=="tp.businessobjects."+n.toLowerCase()});u.val(a.attr("value")),u.trigger("change")}),t.tauIFramePopup("show")}})});
define('tau/services/service.boardCacheData',["tau/core/class"],function(t){var n={},e=t.extend({setData:function(t){n=t},getData:function(){return n},evict:function(){n={}}});return e});
define('tau/models/board.customize.units/const.entity.types.names',[],function(){return{GENERAL:"general",US:"userstory",BUG:"bug",FEATURE:"feature",TASK:"task",REQUEST:"request",TEST_CASE:"testcase",TEST_CASE_RUN:"testcaserun",IMPEDIMENT:"impediment",USER:"user",ASSIGNED_USER:"assigneduser",TEAM:"team",PROJECT:"project",ITERATION:"iteration",TEAM_ITERATION:"teamiteration",RELEASE:"release",TEST_PLAN:"testplan",TEST_PLAN_RUN:"testplanrun",BUILD:"build",PROJECT_MEMBER:"projectmember",INBOUND_RELATIONS:"inboundrelations",OUTBOUND_RELATIONS:"outboundrelations",ANY_TYPE:"anytype"}});
define('tau/models/board.customize.units/const.card.sizes',["Underscore"],function(t){var n={XS:"xs",S:"s",M:"m",L:"l",XL:"xl",LIST:"list"},e={2:n.XS,3:n.S,4:n.M,5:n.L,6:n.XL},r=function(){t.extend(this,n)};return r.prototype.has=function(n){return t.isString(n)&&this[n.toUpperCase()]},r.prototype.zoomToSize=function(t){return e[t]},r.prototype.sizeToZoom=function(n){var r=t.chain(t.pairs(e)).filter(function(t){return t[1]==n.toLowerCase()}).map(function(t){return parseInt(t[0])}).value();return r&&r[0]},new r});
define('tau/models/board.customize.units/const.sorting.applying',["Underscore"],function(){return{ALL:"all",NONE:"none",SINGLE:"single"}});
define('tau/models/board.customize.units/board.customize.units.base',["Underscore","app.path"],function(e,n){return{url:function(e){return n.get()+e},pushClones:function(n,t,u){e.each(u,function(u){n.push(e.extend(e.deepClone(t),u))})},createUnitValueWrapperTemplate:function(e){return[].concat('<div class="tau-board-unit__value">',e,"</div>")}}});
define('tau/models/board.customize.units/board.customize.units.simple',["Underscore","tau/models/board.customize.units/const.entity.types.names","tau/models/board.customize.units/const.card.sizes","tau/models/board.customize.units/const.sorting.applying","tau/models/board.customize.units/board.customize.units.base","app.path","tau/utils/utils.date"],function(t,a,e,i,s,n,d){a.STORY=a.US;var r=[e.XS,e.S,e.M,e.L,e.XL],l=[e.XS,e.S,e.M,e.L,e.XL,e.LIST],o={daysOrHoursValue:function(t,a){return this.precise_round(1>t?24*t:t,a||1)},daysOrHoursUnit:function(t){return 1>t?"h":"d"}},u=function(t){return['<div class="tau-board-unit__value_type_day"><%=fn.formatDayShort(this.data.{{DATE}})%></div>','<div class="tau-board-unit__value_type_month"><%=fn.formatDate(this.data.{{DATE}}, "MMM")%></div>','<div class="tau-board-unit__value_type_year"><%=fn.formatDate(this.data.{{DATE}}, "yyyy")%></div>'].join("").replace(new RegExp("{{DATE}}","g"),t)},m=['<div class="tau-board-unit_type_date-range__start-date <% if (this.data.isCurrent) { %>tau-date-range_current<%}%>">',"<% if (this.data.startDate) {%>",'<div class="tau-board-unit__value_type_day"><%= fn.formatDayShort(this.data.startDate)%></div>','<div class="tau-board-unit__value_type_month"><%= fn.formatDate(this.data.startDate, "MMM")%></div>',"<% } else {%>",'<div class="tau-board-unit__value_type_unknown">not set</div>',"<%}%>","</div>",'<div class="tau-board-unit_type_date-range__end-date <%if (this.data.isCurrent) {%>tau-date-range_current<%}%>">',"<% if(this.data.endDate) {%>",'<div class="tau-board-unit__value_type_day"><%= fn.formatDayShort(this.data.endDate)%></div>','<div class="tau-board-unit__value_type_month"><%= fn.formatDate(this.data.endDate, "MMM")%></div>',"<% } else {%>",'<div class="tau-board-unit__value_type_unknown">not set</div>',"<%}%>","</div>"],_=['<div class="tau-board-unit_type_date-range__start-date <% if (this.data.isActive) { %>tau-date-range_current<%}%>">',"<% if (this.data.startDate) {%>",'<div class="tau-board-unit__value_type_day"><%= fn.formatDate(this.data.startDate, "dd") %></div>','<div class="tau-board-unit__value_type_month"><%=fn.formatDate(this.data.startDate, "MMM")%></div>','<div class="tau-board-unit__value_type_year"><%=fn.formatDate(this.data.startDate, "yyyy")%></div>',"<% } else {%>",'<div class="tau-board-unit__value_type_unknown">not set</div>',"<%}%>","</div>",'<div class="tau-board-unit_type_date-range__end-date <% if (this.data.isActive) { %>tau-date-range_current<%}%>">',"<% if (this.data.endDate) {%>",'<div class="tau-board-unit__value_type_day"><%= fn.formatDate(this.data.endDate, "dd")%></div>','<div class="tau-board-unit__value_type_month"><%=fn.formatDate(this.data.endDate, "MMM")%></div>','<div class="tau-board-unit__value_type_year"><%=fn.formatDate(this.data.endDate, "yyyy")%></div>',"<% } else {%>",'<div class="tau-board-unit__value_type_unknown">not set</div>',"<%}%>","</div>"],c=s.createUnitValueWrapperTemplate.bind(s),p=function(t){return n.get()+t},f=[{id:"general_entity_id",classId:"tau-board-unit_type_id",name:"Id",header:"ID",rank:100,settings:[{types:[a.FEATURE,a.STORY,a.TASK,a.BUG,a.REQUEST,a.TEST_CASE,a.IMPEDIMENT,a.TEAM,a.PROJECT,a.ITERATION,a.TEAM_ITERATION,a.RELEASE,a.TEST_PLAN,a.TEST_PLAN_RUN,a.BUILD],sizes:[e.XS,e.S,e.M,e.L,e.XL,e.LIST]},{types:[a.GENERAL,a.INBOUND_RELATIONS,a.OUTBOUND_RELATIONS],sizes:[e.LIST]}],template:['<div class="tau-board-unit__value">',"<%= fn.generateEntityLink(this, this.data, this.data.entityType.name) %>","</div>"],sampleData:{id:193011,entityType:{name:"userstory"}},listSettings:{title:'<%= fn.term(this.data.entityType.name, "name") + " #" + this.data.id %>'}},{id:"user_entity_id",classId:"tau-board-unit_type_id",name:"Id",header:"ID",types:[a.USER,a.ASSIGNED_USER],sizes:[e.S,e.M,e.L,e.XL,e.LIST],template:['<div class="tau-board-unit__value">','<%= fn.generateEntityLink(this, this.data, "user") %>',"</div>"],sampleData:{id:193011},listSettings:{title:'<%= fn.term(this.type, "name") + " #" + this.data.id %>'}},{id:"entity_name_1line",classId:"tau-board-unit_type_entity-name",name:"Name",settings:[{types:[a.FEATURE,a.STORY,a.TASK,a.BUG,a.REQUEST,a.TEST_CASE,a.IMPEDIMENT,a.ITERATION,a.TEAM_ITERATION,a.RELEASE,a.TEST_PLAN,a.TEST_PLAN_RUN,a.BUILD],sizes:[e.M,e.L,e.XL,e.LIST]},{types:[a.GENERAL,a.INBOUND_RELATIONS,a.OUTBOUND_RELATIONS],sizes:[e.LIST]}],sections:1,rank:101,isNameUnit:!0,template:['<div class="tau-board-unit__value tau-name i-role-name"><%!this.data.name%></div>'],sampleData:{name:"Chances are you'll remember information printed in a font like this one better than information presented in a font like this, because less legible fonts make you concentrate harder."},editorConfig:{type:"title",template:{name:"title.simple"}}},{id:"entity_name_small_sizes",classId:"tau-board-unit_type_entity-name-extended-small",name:"Name",types:[a.FEATURE,a.STORY,a.TASK,a.BUG,a.REQUEST,a.TEST_CASE,a.IMPEDIMENT,a.ITERATION,a.TEAM_ITERATION,a.RELEASE,a.TEST_PLAN,a.TEST_PLAN_RUN,a.BUILD],sizes:r,sections:1,isStretchable:!1,template:['<div class="tau-board-unit__value tau-name i-role-name"><%!this.data.name%></div>'],sampleData:{name:"Chances are you'll remember information printed in a font like this one better than information presented in a font like this, because less legible fonts make you concentrate harder."}},{id:"entity_name_3lines",classId:"tau-board-unit_type_entity-name-extended",name:"Name",types:[a.FEATURE,a.STORY,a.TASK,a.BUG,a.REQUEST,a.TEST_CASE,a.IMPEDIMENT,a.ITERATION,a.TEAM_ITERATION,a.RELEASE,a.TEST_PLAN,a.TEST_PLAN_RUN,a.BUILD],sizes:[e.S,e.M,e.L,e.XL],sections:2,template:['<div class="tau-board-unit__value tau-name i-role-name"><%!this.data.name%></div>'],sampleData:{name:"Chances are you'll remember information printed in a font like this one better than information presented in a font like this"}},{id:"entity_name_5lines",classId:"tau-board-unit_type_entity-name-extended-plus",name:"Name",types:[a.FEATURE,a.STORY,a.TASK,a.BUG,a.REQUEST,a.TEST_CASE,a.IMPEDIMENT,a.ITERATION,a.TEAM_ITERATION,a.RELEASE,a.TEST_PLAN,a.TEST_PLAN_RUN,a.BUILD],sizes:[e.M],sections:3,template:['<div class="tau-board-unit__value tau-name i-role-name"><%!this.data.name%></div>'],sampleData:{name:"Chances are you'll remember information printed in a font like this one better than information presented in a font like this. Cras tristique at lacus pretium rutrum. Sed suscipit aliquam diam, nec feugiat quam pharetra ac. Suspendisse vel neque laoreet"}},{id:"team_project_name_short",classId:"tau-board-unit_type_entity-name",name:"Name",types:[a.TEAM,a.PROJECT],sizes:[e.XS,e.M,e.L,e.XL],template:['<div class="tau-board-unit__value tau-name i-role-name"><%!fn.trim(this.data.name,15)%></div>'],sampleData:{name:"Custom Graphic Reports"},editorConfig:{type:"title",template:{name:"title.simple"}}},{id:"team_project_name_long",classId:"tau-board-unit_type_entity-name",name:"Name",types:[a.TEAM,a.PROJECT],sizes:[e.XS,e.S,e.M,e.L,e.XL,e.LIST],sections:1,rank:101,isNameUnit:!0,template:['<div class="tau-board-unit__value tau-name i-role-name"><%!this.data.name%></div>'],sampleData:{name:"Custom Graphic Reports"},editorConfig:{type:"title",template:{name:"title.simple"}}},{id:"user_name",classId:"tau-board-unit_type_user-name",name:"Full name",header:"Full Name",isNameUnit:!0,settings:[{types:[a.USER,a.ASSIGNED_USER],sizes:[e.S,e.M,e.L,e.XL,e.LIST],model:"firstName,lastName,email",sortConfig:{field:"lastName,firstName,email"}},{types:[a.PROJECT_MEMBER],sizes:[e.S,e.M,e.L,e.XL,e.LIST],model:"user.firstName,user.lastName,user.email",sortConfig:{field:"user.lastName,user.firstName,user.email"}}],template:['<div class="tau-board-unit__value tau-name i-role-name">','<%! (this.data.firstName && this.data.lastName || this.data.empty)? [this.data.firstName, this.data.lastName].join(" ") : this.data.email %></div>'],sampleData:{firstName:"Uladzimir",lastName:"Karatkievich",email:"u.karatkievich@writer.com"}},{id:"effort_spent_total",classId:"tau-board-unit_type_effort-todo-total",name:"Todo/total effort",header:"Effort",types:[a.STORY,a.TASK,a.BUG,a.REQUEST,a.TEST_PLAN_RUN,a.FEATURE],sizes:l,sortConfig:{allowed:i.NONE},template:['<div class="tau-board-unit__value-todo"><%=fn.precise_round(this.data.effortToDo||0,1)%></div>','<div class="tau-board-unit__value-total"><%=fn.precise_round(this.data.effort||0,1)%></div>','<div class="tau-board-unit__points"><%=this.data.units%></div>'],sampleData:{effortToDo:20.5,effort:55.5,units:"pt"},listSettings:{title:["<%= fn.precise_round(this.data.effortToDo || 0, 1) %>"," / ","<%= fn.precise_round(this.data.effort || 0, 1) %><%= this.data.units %>"]}},{id:"effort_total",classId:"tau-board-unit_type_effort-total",name:"Total effort",header:"Effort",types:[a.STORY,a.TASK,a.BUG,a.REQUEST,a.TEST_PLAN_RUN,a.FEATURE],sizes:l,template:['<div class="tau-board-unit__value"><%=fn.precise_round(this.data.effort||0,1)%></div>','<div class="tau-board-unit__points"><%=this.data.units%></div>'],sampleData:{effort:10.5,units:"pt"},editorConfig:{type:"effort",isEditable:function(t){return"feature"!==t.type}}},{id:"create_date",classId:"tau-board-unit_type_date tau-board-unit_type_creation-date",hideIf:function(t){return!t.createDate},name:"Created",settings:[{types:[a.FEATURE,a.STORY,a.TASK,a.BUG,a.REQUEST,a.TEST_CASE,a.IMPEDIMENT,a.TEAM,a.PROJECT,a.ITERATION,a.TEAM_ITERATION,a.RELEASE,a.TEST_PLAN,a.TEST_PLAN_RUN,a.BUILD],sizes:l},{types:[a.USER],sizes:[e.S,e.M,e.L,e.XL,e.LIST]}],template:c(u("createDate")),sampleData:{createDate:"/Date(1385350733000-0500)/"},listSettings:{title:'<%=fn.formatDate(this.data.createDate, "dd MMM yyyy")%>'}},{id:"last_login_date",classId:"tau-board-unit_type_time-last-login",name:"Last login",header:"Last Login",settings:[{types:[a.USER],sizes:[e.M,e.L,e.XL,e.LIST]}],template:['<div class="tau-board-unit__value">',"<% if (this.data.lastLoginDate) { %>",u("lastLoginDate"),"<% } else { %>",'<span class="tau-board-unit_type_time-last-login-never">unknown</span>',"<% } %>","</div>"],sampleData:{lastLoginDate:"/Date(1385350733000-0500)/"},listSettings:{title:'<%=fn.formatDate(this.data.lastLoginDate, "dd MMM yyyy")%>'}},{id:"start_date",classId:"tau-board-unit_type_date tau-board-unit_type_start-date",hideIf:function(t){return!t.startDate},name:"Started",types:[a.FEATURE,a.STORY,a.TASK,a.BUG,a.REQUEST,a.IMPEDIMENT,a.ITERATION,a.TEAM_ITERATION,a.RELEASE,a.TEST_PLAN,a.TEST_PLAN_RUN,a.PROJECT],sizes:l,template:c(u("startDate")),sampleData:{startDate:"/Date(1385360733000-0500)/"},listSettings:{title:'<%=fn.formatDate(this.data.startDate, "dd MMM yyyy")%>'}},{id:"dates",classId:"tau-board-unit_type_date-range",hideIf:function(t){return!t.startDate&&!t.endDate},name:"Started — Finished",sortConfig:{allowed:i.NONE},types:[a.ITERATION,a.TEAM_ITERATION,a.RELEASE],sizes:l,template:c(m),listSettings:{title:["<% if (this.data.startDate || this.data.endDate) { %>",'<%= this.data.startDate ? fn.formatDate(this.data.startDate, "dd MMM") : "..."%>'," — ",'<%= this.data.endDate ? fn.formatDate(this.data.endDate, "dd MMM") : "..."%>',"<% } %>"]},sampleData:{startDate:"/Date(1385360733000-0500)/",endDate:"/Date(1305360733000-0500)/",isCurrent:!1}},{id:"pm_dates",classId:"tau-board-unit_type_date-range",hideIf:function(t){return!t.startDate&&!t.endDate},name:"Started — Finished",sortConfig:{allowed:i.NONE},types:[a.PROJECT_MEMBER],sizes:[e.S,e.M,e.L,e.XL,e.LIST],template:c(_),sampleData:{startDate:"/Date(1305360733000-0500)/",endDate:"/Date(1385360733000-0500)/"},model:"startDate:membershipStartDate,endDate:membershipEndDate",listSettings:{title:['<%= fn.cond(this.data.startDate, fn.formatDate(this.data.startDate, "dd MMM yyyy"), "not set") %>'," — ",'<%= fn.cond(this.data.endDate, fn.formatDate(this.data.endDate, "dd MMM yyyy"), "not set") %>']}},{id:"long_dates",classId:"tau-board-unit_type_date-range",hideIf:function(t){return!t.startDate&&!t.endDate},name:"Started — Finished",types:[a.PROJECT],sizes:[e.XS,e.S,e.M,e.L,e.XL,e.LIST],sortConfig:{allowed:i.NONE},template:c(_),sampleData:{startDate:"/Date(1305360733000-0500)/",endDate:"/Date(1385360733000-0500)/"},listSettings:{title:['<%= fn.cond(this.data.startDate, fn.formatDate(this.data.startDate, "dd MMM yyyy"), "not set") %>'," — ",'<%= fn.cond(this.data.endDate, fn.formatDate(this.data.endDate, "dd MMM yyyy"), "not set") %>']}},{id:"end_date",classId:"tau-board-unit_type_date tau-board-unit_type_end-date",hideIf:function(t){return!t.endDate},name:"Finished",types:[a.FEATURE,a.STORY,a.TASK,a.BUG,a.REQUEST,a.IMPEDIMENT,a.ITERATION,a.TEAM_ITERATION,a.RELEASE,a.TEST_PLAN_RUN,a.PROJECT],sizes:l,template:c(u("endDate")),sampleData:{endDate:"/Date(1305360733000-0500)/"},listSettings:{title:'<%=fn.formatDate(this.data.endDate, "dd MMM yyyy")%>'}},{id:"build_date",classId:"tau-board-unit_type_date tau-board-unit_type_build-date",name:"Build date",header:"Build Date",types:[a.BUILD],sizes:l,template:c(['<div class="tau-board-unit_type_build-date__date">',u("buildDate"),"</div>",'<div class="tau-board-unit_type_build-date__time">','<div class="tau-board-unit__value_type_hours"><%=fn.formatDate(this.data.buildDate, "HH")%></div>','<div class="tau-board-unit__value_type_minutes"><%=fn.formatDate(this.data.buildDate, "mm")%></div>',"</div>"]),sampleData:{buildDate:"/Date(1305360733000-0500)/"},listSettings:{title:'<%=fn.formatDate(this.data.buildDate, "dd MMM yyyy HH:mm")%>'}},{id:"cycle_time",classId:"tau-board-unit_type_time-cycle",name:"Cycle time",header:"Cycle Time",types:[a.STORY,a.BUG,a.TASK,a.TEST_PLAN_RUN,a.FEATURE],sizes:l,sortConfig:{allowed:i.NONE},template:{customFunctions:o,markup:['<div class="tau-board-unit__value"><%=fn._.isUndefined(this.data.cycleTime)?"n/a":fn.daysOrHoursValue(this.data.cycleTime)%></div>','<div class="tau-board-unit__points"><%=fn._.isUndefined(this.data.cycleTime)?"":fn.daysOrHoursUnit(this.data.cycleTime)%></div>']},sampleData:{cycleTime:356.2}},{id:"lead_time",classId:"tau-board-unit_type_time-lead",name:"Lead time",header:"Lead Time",types:[a.STORY,a.BUG,a.TASK,a.TEST_PLAN_RUN,a.FEATURE],sizes:l,sortConfig:{allowed:i.NONE},template:{customFunctions:o,markup:['<div class="tau-board-unit__value"><%=fn.daysOrHoursValue(this.data.leadTime||0)%></div>','<div class="tau-board-unit__points"><%=fn.daysOrHoursUnit(this.data.leadTime||0)%></div>']},sampleData:{leadTime:324.85}},{id:"time_spent_remain",name:"Time spent/time remaining",header:"Time",classId:"tau-board-unit_type_time-remain-spent",types:[a.STORY,a.TASK,a.BUG,a.REQUEST,a.TEST_PLAN_RUN,a.FEATURE],sizes:l,sortConfig:{allowed:i.NONE},template:c(['<div class="tau-board-unit__value-spent"><%=fn.precise_round(this.data.timeSpent||0,1)%></div>','<div class="tau-board-unit__value-remain"><%=fn._.isUndefined(this.data.timeRemain) ? "n/a" : fn.precise_round(this.data.timeRemain||0,1)%></div>']),listSettings:{title:["Spent: <%=fn.precise_round(this.data.timeSpent||0,1)%>"," / ",'remain: <%=fn._.isUndefined(this.data.timeRemain) ? "n/a" : fn.precise_round(this.data.timeRemain||0,1)%>']},sampleData:{timeSpent:322.47,timeRemain:320.8}},{id:"tc_last_run_date",classId:"tau-board-unit_type_date tau-board-unit_type_last-run-date",hideIf:function(t){return!t.lastRunDate},name:"Last run",types:[a.TEST_CASE],sizes:r,template:c(u("lastRunDate")),sampleData:{lastRunDate:"/Date(1305360733000-0500)/"},listSettings:{title:'<%=fn.formatDate(this.data.lastRunDate, "dd MMM yyyy")%>'}},{id:"last_comment_date",classId:"tau-board-unit_type_date tau-board-unit_type_last-comment-date",hideIf:function(t){return!t.lastCommentDate},name:"Last commented",header:"Last Commented",types:[a.FEATURE,a.STORY,a.TASK,a.BUG,a.REQUEST,a.TEST_CASE,a.IMPEDIMENT,a.ITERATION,a.TEAM_ITERATION,a.RELEASE,a.TEST_PLAN,a.TEST_PLAN_RUN,a.BUILD],sizes:l,template:c(u("lastCommentDate")),sampleData:{lastCommentDate:"/Date(1335360733000-0500)/"},listSettings:{title:'<%=fn.formatDate(this.data.lastCommentDate, "dd MMM yyyy")%>'}},{id:"project_project_icon",classId:"tau-board-unit_type_icon",hideIf:function(t){return!t.color},name:"Project color",header:"Color",types:[a.PROJECT],sizes:l,template:['<i class="tau-icon tau-icon_type_color" style="background-color:<%=this.data.color||\'transparent\'%>;"></i>'],sampleData:{color:"#f9d9d1",name:"CodeGuard 3"},listSettings:{title:"<%= this.data.name %>"}},{id:"project_project_abbr",classId:"tau-board-unit_type_project_abbr",name:"Abbreviation",header:"Abbr.",types:[a.PROJECT],sizes:l,sortConfig:{field:"abbreviation"},template:['<div class="tau-board-unit__value_type_abbr" style="background-color:<%=this.data.color||\'transparent\'%>;"><%!this.data.abbreviation%></div>'],sampleData:{color:"#f9d9d1",abbreviation:"CG3",name:"CodeGuard 3"},listSettings:{title:"<%= this.data.name %>"}},{id:"team_team",classId:"tau-board-unit_type_icon",hideIf:function(t){return!t.icon},name:"Team icon",header:"Icon",types:[a.TEAM],sizes:l,template:['<i class="tau-icon tau-icon_type_svg tau-icon_name_<%= this.data.icon %>"></i>'],sampleData:{icon:"ufo",name:"United Future Organization"},listSettings:{title:"<%! this.data.icon && this.data.name %>"}},{id:"request_private",classId:"tau-board-unit_type_icon",hideIf:function(t){return!t.isPrivate},name:"Private",settings:[{types:[a.REQUEST,a.IMPEDIMENT],sizes:l}],template:['<i class="tau-icon tau-icon_type_svg tau-icon_name_lock"></i>'],sampleData:{isPrivate:!0},listSettings:{title:'<%= fn.cond(this.data && this.data.isPrivate, "Private", "") %>'}},{id:"progress_short",classId:"tau-board-unit_type_progress",name:"Progress",types:[a.PROJECT,a.FEATURE,a.STORY,a.TASK,a.BUG,a.REQUEST,a.TEST_PLAN_RUN],sizes:r,template:['<div class="tau-board-unit__value"><%= fn.precise_round(this.data.progress * 100, 0) %></div>'],sampleData:{progress:1}},{id:"progress_long",classId:"tau-board-unit_type_progress",name:"Progress",types:[a.PROJECT,a.FEATURE,a.STORY,a.TASK,a.BUG,a.REQUEST,a.TEST_PLAN_RUN],sizes:l,sortConfig:{allowed:i.NONE},template:['<div class="tau-progress tau-v-<%= fn.precise_round(this.data.progress * 10, 0) * 10 %>"></div>','<div class="tau-board-unit__value"><%= fn.precise_round(this.data.progress * 100, 0) %></div>'],listSettings:{title:"<%= fn.precise_round(this.data.progress * 100, 0) %>%"},sampleData:{progress:1}},{id:"user_avatar",classId:"tau-board-unit_type_avatar",name:"Avatar",sortConfig:{allowed:i.NONE},settings:[{types:[a.USER,a.ASSIGNED_USER],sizes:l,model:"avatarUri,fullName,email"},{types:[a.PROJECT_MEMBER],sizes:l,model:"user.avatarUri,user.fullName,user.email"}],template:['<div class="tau-avatar"><img src="<%= this.data.avatarUri %>24"></div>'],listSettings:{title:"<%= this.data.fullName || this.data.email %>"},sampleData:{avatarUri:p("/javascript/tau/css/images/icons/user.png?size=")}},{id:"user_email_short",classId:"tau-board-unit_type_user-email",name:"Email",settings:[{types:[a.USER],sizes:[e.S,e.M,e.L,e.XL,e.LIST],model:"email"},{types:[a.PROJECT_MEMBER],sizes:[e.S,e.M,e.L,e.XL,e.LIST],model:"user.email"}],template:['<div class="tau-board-unit__value tau-board-unit-not-selectable">','<a <% if (!this.settings.isDesignMode) { %>href="mailto:<%! this.data.email %>"<%}%> ><%! fn.trim(this.data.email, 15) %></a>',"</div>"],sampleData:{email:"u.karatkievich@writer.com"}},{id:"user_email_long",classId:"tau-board-unit_type_user-email",name:"Email",settings:[{types:[a.USER,a.ASSIGNED_USER],sizes:[e.S,e.M,e.L,e.XL],model:"email",sortConfig:{field:"email"}},{types:[a.PROJECT_MEMBER],sizes:[e.S,e.M,e.L,e.XL],model:"user.email",sortConfig:{field:"user.email"}}],sections:1,template:['<div class="tau-board-unit__value tau-board-unit-not-selectable">','<a <% if (!this.settings.isDesignMode) { %>href="mailto:<%! this.data.email %>"<%}%> ><%! this.data.email %></a>',"</div>"],sampleData:{email:"u.karatkievich@writer.com"}},{id:"user_login",classId:"tau-board-unit_type_user-login",name:"Login",settings:[{types:[a.USER],sizes:[e.S,e.M,e.L,e.XL,e.LIST],model:"login",sortConfig:{field:"login"}},{types:[a.PROJECT_MEMBER],sizes:[e.S,e.M,e.L,e.XL,e.LIST],model:"user.login",sortConfig:{field:"user.login"}}],template:['<div class="tau-board-unit__value"><%! fn.trim(this.data.login, 15) %></div>'],sampleData:{login:"uladzimir.karatkievich"}},{id:"user_login_long",classId:"tau-board-unit_type_user-login",name:"Login",settings:[{types:[a.USER],sizes:[e.S,e.M,e.L,e.XL],model:"login"},{types:[a.PROJECT_MEMBER],sizes:[e.S,e.M,e.L,e.XL],model:"user.login"}],sections:1,template:['<div class="tau-board-unit__value"><%! this.data.login %></div>'],sampleData:{login:"uladzimir.karatkievich"}},{id:"allocation",classId:"tau-board-unit_type_allocation",name:"Allocation",types:[a.USER],sizes:[e.S,e.M,e.L,e.XL,e.LIST],template:['<div class="tau-board-unit__value"><%= fn.precise_round(this.data.currentAllocation, 0) %></div>'],sampleData:{currentAllocation:150},listSettings:{title:"<%= fn.precise_round(this.data.currentAllocation, 0) %>%"}},{id:"user_is_active",classId:function(t){return"tau-board-unit_type_status-"+(t&&t.isActive?"active":"inactive")},data:{label:'<%= this.data.isActive ? "Active" : "Inactive" %>'},name:"Active",types:[a.USER,a.ASSIGNED_USER],sizes:[e.S,e.M,e.L,e.XL,e.LIST],template:[],listSettings:{title:'<%= fn.cond(this.data && this.data.isActive, "Active", "Inactive") %>'},sampleData:{isActive:!0}},{id:"user_observer",classId:"tau-board-unit_type_status-observer",data:{label:"Observer"},hideIf:function(t){return!t.isObserver},name:"Observer",types:[a.USER,a.ASSIGNED_USER],sizes:[e.S,e.M,e.L,e.XL,e.LIST],template:[],listSettings:{title:'<%= fn.cond(this.data && this.data.isObserver, "Observer", "") %>'},sampleData:{isObserver:!0}},{id:"user_admin",classId:"tau-board-unit_type_status-admin",data:{label:"Admin"},hideIf:function(t){return!t.isAdministrator},name:"Administrator",types:[a.USER,a.ASSIGNED_USER],sizes:[e.S,e.M,e.L,e.XL,e.LIST],template:[],listSettings:{title:'<%= fn.cond(this.data && this.data.isAdministrator, "Administrator", "") %>'},sampleData:{isAdministrator:!0}},{id:"user_big_details",classId:"tau-board-unit_type_user-info",name:"Large avatar with some details (role, name)",types:[a.USER],sizes:[e.S,e.M,e.L,e.XL],sections:2,template:['<img class="tau-board-unit_type_user-info__avatar" src="<%= this.data.avatarUri %>">','<div class="tau-board-unit_type_user-info__name">',"<%! _.trim(this.data.fullName) || this.data.email %>","</div>",'<div class="tau-board-unit_type_user-info__role"><%! this.data.role.name %></div>'],sampleData:{fullName:"Uladzimir Karatkievich",email:"u.karatkievich@writer.com",avatarUri:p("/Javascript/tau/css/images/icons/user.png"),role:{name:"Writer"}}},{id:"request_is_replied",classId:"tau-board-unit_type_icon",hideIf:function(t){return!t.isReplied},name:"Replied",types:[a.REQUEST],sizes:l,template:['<i class="tau-icon tau-icon_type_svg tau-icon_name_back-arrow"></i>'],listSettings:{title:'<%= fn.cond(this.data && this.data.isReplied, "Replied", "") %>'},sampleData:{isReplied:!0}},{id:"request_email",classId:"tau-board-unit_type_icon",hideIf:function(t){return!t||!t.sourceType||"none"===t.sourceType.toLowerCase()},name:"Request source (email, phone etc.)",header:"Request Source",types:[a.REQUEST],sizes:l,template:{customFunctions:{sourceToIcon:function(t){switch(t.toLowerCase()){case"phone":return"phone";case"email":return"email";case"internal":return"rect-in";case"external":return"rect-out";default:return"undefined"}},sourceToText:function(t){switch(t.toLowerCase()){case"phone":return"Phone call";case"email":return"Email";case"internal":return"Internal source";case"external":return"External source";default:return""}}},markup:['<i class="tau-icon tau-icon_type_svg tau-icon_name_<%= fn.sourceToIcon(this.data.sourceType) %>"></i>']},listSettings:{title:"<%= fn.sourceToText(this.data.sourceType) %>"},sampleData:{sourceType:"email"}},{id:"tc_failure_message_short",classId:"tau-board-unit_type_failure-comment",hideIf:function(t){return!t.lastFailureComment},name:"Most recent failure comment",header:"Failure Comment",types:[a.TEST_CASE],sizes:[e.M,e.L,e.XL,e.LIST],template:['<div class="tau-board-unit__value"><%! fn.trim(this.data.lastFailureComment, 15) %></div>'],sampleData:{lastFailureComment:"The font is not legible at all"}},{id:"tc_failure_message_long",classId:"tau-board-unit_type_failure-comment",hideIf:function(t){return!t.lastFailureComment},name:"Most recent failure comment",types:[a.TEST_CASE],sizes:r,sections:1,template:['<div class="tau-board-unit__value"><%! this.data.lastFailureComment %></div>'],sampleData:{lastFailureComment:"The font is not legible at all"}},{id:"tc_last_status",classId:"tau-board-unit_type_icon",name:"Most recent status",header:"Status",types:[a.TEST_CASE],sizes:l,template:{customFunctions:{getLastStatusText:function(a){return t.isUndefined(a.data.lastStatus)?"ignored":a.data.lastStatus?"passed":"failed"}},markup:['<i class="tau-icon tau-icon_type_svg tau-icon_name_status-<%= fn.getLastStatusText(this) %>"></i>']},listSettings:{title:["<%= _.capitalize(fn.getLastStatusText(this)) %>"]},sampleData:{lastStatus:!0}},{id:"iteration_velocity",classId:"tau-board-velocity",name:"Velocity",types:[a.ITERATION,a.TEAM_ITERATION],sizes:l,template:['<div class="tau-board-unit__value"><%=fn.precise_round(this.data.velocity||0,1)%></div>','<div class="tau-board-unit__points"><%=this.data.units%></div>'],sampleData:{velocity:2853.9,units:"pt"}},{id:"tasks_total",classId:"tau-board-unit_type_effort-total-e",name:"Total tasks effort",header:"Tasks Effort",types:[a.STORY],sizes:l,sortConfig:{allowed:i.NONE},hideIf:function(t){return!t.effort},template:['<div class="tau-board-unit__label">Tasks</div>','<div class="tau-board-unit__value"><%=fn.precise_round(this.data.effort||0,1)%></div>','<div class="tau-board-unit__points">h</div>'],sampleData:{effort:324.9},model:"effort:tasks.Sum(effort)",listSettings:{title:["<%=fn.precise_round(this.data.effort||0,1)%>h"]}},{id:"tc_last_run_date",classId:"tau-board-tc_last_run_date tau-board-unit_type_date",name:"Last run date",header:"Last Run Date",settings:[{types:[a.TEST_PLAN],model:"lastRun:LastRunDateForTestPlan",sizes:l,sortConfig:{allowed:i.NONE}},{types:[a.TEST_CASE],model:"lastRun:lastRunDate",sizes:l,sortConfig:{field:"lastRunDate"}}],hideIf:function(t){return!t.lastRun},template:c(u("lastRun")),sampleData:{lastRun:"/Date(1363986000000-0500)/"},listSettings:{title:'<%=fn.formatDate(this.data.lastRun, "dd MMM yyyy")%>'}},{id:"project_is_active",classId:function(t){return"tau-board-unit_type_status-"+(t&&t.isActive?"active":"inactive")},data:{label:'<%= this.data.isActive ? "Active" : "Inactive" %>'},name:"Active",types:[a.PROJECT],sizes:l,template:[],listSettings:{title:'<%= fn.cond(this.data && this.data.isActive, "Active", "Inactive") %>'},sampleData:{isActive:!0}},{id:"percent",classId:"tau-board-unit_type_percent-participating",name:"Percent participating",header:"Percent Participating",hideIf:function(t){return"undefined"==typeof t.allocation},types:[a.PROJECT_MEMBER],sizes:[e.S,e.M,e.L,e.XL,e.LIST],template:['<div class="tau-pie-progress tau-v-<%= fn.precise_round(this.data.allocation/10,0)*10 %>"></div> ','<div class="tau-board-unit__value"><%= this.data.allocation %>%</div>'],listSettings:{title:"<%= this.data.allocation %>%"},sampleData:{allocation:33}},{id:"planned_dates",classId:function(t){var a=d.getServerNow(),e=new Date(a.getFullYear(),a.getMonth(),a.getDate()),i=!(t.startDate&&d.convertToTimezone(t.startDate)>e||t.endDate&&d.convertToTimezone(t.endDate)<e);return"tau-board-unit_type_planned_dates"+(i?" tau-board-unit_type_planned_dates-green":"")},hideIf:function(t){return!t.startDate&&!t.endDate},sortConfig:{allowed:i.NONE},data:{startDate:new Date},name:"Planned dates",header:"Planned Dates",types:[a.FEATURE,a.STORY,a.TASK,a.BUG,a.REQUEST,a.TEST_PLAN,a.TEST_PLAN_RUN,a.IMPEDIMENT],sizes:[e.S,e.M,e.L,e.XL,e.LIST],template:c(m),listSettings:{title:["<% if (this.data.startDate || this.data.endDate) { %>",'<%= this.data.startDate ? fn.formatDate(this.data.startDate, "dd MMM") : "..."%>'," — ",'<%= this.data.endDate ? fn.formatDate(this.data.endDate, "dd MMM") : "..."%>',"<% } %>"]},sampleData:{startDate:"/Date(1385360733000-0500)/",endDate:"/Date(1305360733000-0500)/"},model:"startDate:PlannedStartDate,endDate:PlannedEndDate"},{id:"name_unit",classId:"tau-board-unit_type_simple-name",name:"Name",header:"Name",rank:100,isNameUnit:!0,settings:[{types:["tag","severity","requesttype","role","process"],model:"name:name",sizes:[e.LIST],sortConfig:{field:"name"}},{types:["enddate","datetime","createdate","startdate","effort"],model:"name:it.HumanFormat()",sizes:[e.LIST],sortConfig:{field:"name"}},{types:["priority"],model:"name:it.Key",sizes:[e.LIST],sortConfig:{field:"name"}},{types:["entitystate"],model:"name:it.Key.name",sizes:[e.LIST],sortConfig:{field:"name"}},{types:["source","requestsourceenum"],model:"name:it.ToString()",sizes:[e.LIST],sortConfig:{allowed:i.NONE}}],template:['<div class="tau-board-unit__value i-role-name"><%! this.data.name %></div>'],sampleData:{name:"Open"}},{id:"tcr_id",classId:"tau-board-unit_type_id",name:"Id",header:"ID",types:[a.TEST_CASE_RUN],sizes:[e.S,e.M,e.L,e.XL,e.LIST],template:['<div class="tau-board-unit__value">','<%= fn.generateEntityLink(this, this.data, "testcaserun") %>',"</div>"],sampleData:{id:1},listSettings:{title:'<%= "TestCaseRun #" + this.data.id %>'}},{id:"tcr_name",classId:"tau-board-unit_type_entity-name",name:"Test Case Run Name",header:"Name",isNameUnit:!0,types:[a.TEST_CASE_RUN],sizes:l,template:['<div class="tau-board-unit__value tau-name i-role-name"><%!this.data.name%></div>'],sampleData:{name:"Test Case Run 1."}},{id:"tcr_run_date",classId:"tau-board-unit_type_date",hideIf:function(t){return!t.runDate},name:"Last run date",header:"Last Run Date",types:[a.TEST_CASE_RUN],sizes:l,template:['<div class="tau-board-unit__value_type_day"><%=fn.formatDayShort(this.data.runDate)%></div>','<div class="tau-board-unit__value_type_month"><%=fn.formatDate(this.data.runDate, "MMM")%></div>','<div class="tau-board-unit__value_type_year"><%=fn.formatDate(this.data.runDate, "yyyy")%></div>'],sampleData:{runDate:"/Date(1335360733000-0500)/"}},{id:"tcr_status",classId:"tau-board-unit_type_icon",name:"Most recent status",header:"Status",types:[a.TEST_CASE_RUN],sizes:l,template:['<i class="tau-icon tau-icon_type_svg tau-icon_name_status-<% if (fn._.isUndefined(this.data.passed)){%>ignored<% } else if (this.data.passed){ %>passed<% } else { %>failed<% } %>"></i>'],sampleData:{passed:!0}},{id:"tcr_comment",classId:"tau-board-unit__label",name:"Test case run comment",header:"Comment",types:[a.TEST_CASE_RUN],sizes:l,template:['<span class="tau-board-unit__label"><%=this.data.comment ? this.data.comment : ""%></span>'],sampleData:{comment:"The test case run failed."}},{id:"name_unit_default",classId:"tau-board-unit_type_simple-name",name:"Name",header:"Name",rank:100,isNameUnit:!0,types:[a.ANY_TYPE],model:"name:it.ToString()",sizes:[e.LIST],hideInLibrary:!0,template:['<div class="tau-board-unit__value"><%! this.data.name %></div>'],sampleData:{name:"Open"}}];return t.each(f,function(t){t.category="simple"}),f});
define('tau/models/board.customize.units/board.customize.units.oneToOne',["Underscore","tau/models/board.customize.units/const.entity.types.names","tau/models/board.customize.units/const.card.sizes","tau/models/board.customize.units/const.sorting.applying","app.path","tau/models/board.customize.units/board.customize.units.base"],function(e,t,a,i,s,r){var n=[a.XS,a.S,a.M,a.L,a.XL],o=[a.XS,a.S,a.M,a.L,a.XL,a.LIST];t.STORY=t.US;var d={type:"choice",expandable:!0,filter:!0,filterPosition:"top",showEmptyDataMessage:!0,hideDefaultValue:!0,allowToReset:!0,fullModeLabel:"show old&hellip;",emptyDataMessage:"No items found",maxHeight:300},l=function(t,a){return t&&e.find(t.items,function(e){return e.name===a})},u=[{id:"team_name_short",sizes:[a.M,a.L,a.XL,a.LIST],types:[t.FEATURE,t.STORY,t.TASK,t.BUG,t.REQUEST,t.TEAM_ITERATION,t.TEST_PLAN_RUN,t.TEST_PLAN],classId:"tau-board-unit_type_team-name",hideIf:function(e){return!e.team||!e.team.name},name:"Team name",header:"Team",template:['<div class="tau-board-unit__value"><%!fn.trim(this.data.team.name,15)%></div>'],sampleData:{team:{name:"Customize cards team"}}},{id:"team_name_long",sizes:n,sections:1,types:[t.FEATURE,t.STORY,t.TASK,t.BUG,t.REQUEST,t.TEAM_ITERATION,t.TEST_PLAN_RUN,t.TEST_PLAN],classId:"tau-board-unit_type_team-name",hideIf:function(e){return!e.team||!e.team.name},name:"Team name",header:"Team",sortConfig:{field:"team.name"},template:['<div class="tau-board-unit__value"><%!this.data.team.name%></div>'],sampleData:{team:{name:"Customize cards team"}},model:"team:{name:team.name},id:team.id"},{id:"state_short",classId:"tau-board-unit_type_state",name:"State",types:[t.FEATURE,t.STORY,t.TASK,t.BUG,t.REQUEST,t.IMPEDIMENT,t.TEST_PLAN_RUN,t.TEST_PLAN],sizes:[a.M,a.L,a.XL,a.LIST],template:['<div class="tau-board-unit__value"><%!fn.trim(this.data.entityState.name,19)%></div>'],sampleData:{entityState:{name:"Ready for release"}},editorConfig:{type:"choice.entityState"}},{id:"state_full_length",classId:"tau-board-unit_type_state",name:"State",types:[t.FEATURE,t.STORY,t.TASK,t.BUG,t.REQUEST,t.IMPEDIMENT,t.TEST_PLAN_RUN,t.TEST_PLAN],sizes:n,sections:1,sortConfig:{field:"entityState.name"},template:['<div class="tau-board-unit__value"><%!this.data.entityState.name%></div>'],sampleData:{entityState:{name:"Ready for release"}},editorConfig:{type:"choice.entityState"}},{id:"release_id",classId:"tau-board-unit_type_id tau-board-unit_type_release-id",hideIf:function(e){return!e.release||!e.release.id},name:"Release id",header:"Release Id",types:[t.FEATURE,t.STORY,t.BUG,t.ITERATION,t.TEST_PLAN_RUN,t.BUILD,t.TASK],sizes:o,sortConfig:{field:"release.id"},template:['<%= fn.generateEntityLink(this, this.data.release, "release", "tau-board-unit__value tau-related-id") %>'],sampleData:{release:{id:120188,name:"Release #1 (Minimal wow effect)"}},listSettings:{title:["<%! this.data.release && this.data.release.name %>"]}},{id:"release_short",classId:"tau-board-unit_type_release",hideIf:function(e){return!e.release||!e.release.name},name:"Release",types:[t.FEATURE,t.STORY,t.TASK,t.BUG,t.ITERATION,t.TEST_PLAN_RUN,t.BUILD],sizes:[a.M,a.L,a.XL,a.LIST],template:['<div class="tau-board-unit__value"><%!fn.trim(this.data.release.name,19)%></div>'],sampleData:{release:{name:"Release #1 (Minimal wow effect)"}}},{id:"release_long",classId:"tau-board-unit_type_release",name:"Release",hideIf:function(e){return!e.release||!e.release.name},types:[t.FEATURE,t.STORY,t.TASK,t.BUG,t.ITERATION,t.TEST_PLAN_RUN,t.BUILD],sizes:n,sections:1,sortConfig:{field:"release.name"},template:['<div class="tau-board-unit__value"><%!this.data.release.name%></div>'],sampleData:{release:{name:"Release #1 (Minimal wow effect)"}},model:"release:{name:release.name},id:release.id",editorConfig:e.extend({},d,{listType:"release",emptyDataMessage:"No releases found",isEditable:function(e){return"task"!==e.type},clearValueLabel:"(no release)"})},{id:"iteration_id",classId:"tau-board-unit_type_id tau-board-unit_type_iteration-id",hideIf:function(e){return!e.iteration||!e.iteration.id},name:"Iteration id",header:"Iteration Id",types:[t.STORY,t.BUG,t.TEST_PLAN_RUN,t.BUILD,t.TASK],sizes:o,sortConfig:{field:"iteration.id"},template:['<%= fn.generateEntityLink(this, this.data.iteration, "iteration", "tau-board-unit__value tau-related-id") %>'],sampleData:{iteration:{id:130387,name:"Iteration #1.2 (Research/Concept)"}},listSettings:{title:["<%! this.data.iteration && this.data.iteration.name %>"]}},{id:"iteration_short",classId:"tau-board-unit_type_iteration",hideIf:function(e){return!e.iteration||!e.iteration.name},name:"Iteration",types:[t.STORY,t.TASK,t.BUG,t.TEST_PLAN_RUN,t.BUILD],sizes:[a.M,a.L,a.XL,a.LIST],template:['<div class="tau-board-unit__value"><%!fn.trim(this.data.iteration.name,19)%></div>'],sampleData:{iteration:{name:" Iteration #1.2 (Research/Concept)"}}},{id:"iteration_long",classId:"tau-board-unit_type_iteration",hideIf:function(e){return!e.iteration||!e.iteration.name},name:"Iteration",types:[t.STORY,t.TASK,t.BUG,t.TEST_PLAN_RUN,t.BUILD],sizes:n,sections:1,sortConfig:{field:"iteration.name"},template:['<div class="tau-board-unit__value"><%!this.data.iteration.name%></div>'],sampleData:{iteration:{name:" Iteration #1.2 (Research/Concept)"}},model:"iteration:{name:iteration.name},id:iteration.id,practices:project.process.practices",editorConfig:e.extend({},d,{listType:"iteration",emptyDataMessage:"No iterations found",isEditable:function(e){return"task"!==e.type&&l(e.data.practices,"Iterations")},clearValueLabel:"(no iteration)"})},{id:"feature_id",classId:"tau-board-unit_type_id tau-board-unit_type_feature-id",hideIf:function(e){return!e.feature||!e.feature.id},name:"Feature id",header:"Feature Id",settings:[{types:[t.STORY,t.BUG],sizes:o,model:"feature:{feature.id,feature.name}",sortConfig:{field:"feature.id"}},{types:[t.TASK],sizes:o,model:"feature:{userStory.feature.id,userStory.feature.name}",sortConfig:{field:"userStory.feature.id"}}],template:['<%= fn.generateEntityLink(this, this.data.feature, "feature", "tau-board-unit__value tau-related-id") %>'],sampleData:{feature:{id:91283,name:"Reports: High Level Report"}},listSettings:{title:["<%! this.data.feature && this.data.feature.name %>"]}},{id:"feature_short",classId:"tau-board-unit_type_feature",hideIf:function(e){return!e.feature||!e.feature.name},name:"Feature",sortConfig:{field:"feature.name"},settings:[{types:[t.STORY,t.BUG],sizes:[a.M,a.L,a.XL,a.LIST],model:"feature:{feature.name}"},{types:[t.TASK],sizes:[a.M,a.L,a.XL,a.LIST],model:"feature:{userStory.feature.name}"}],template:['<div class="tau-board-unit__value"><%!fn.trim(this.data.feature.name,19)%></div>'],sampleData:{feature:{name:"Reports: High Level Report"}}},{id:"feature_long",classId:"tau-board-unit_type_feature",hideIf:function(e){return!e.feature||!e.feature.name},name:"Feature",settings:[{types:[t.STORY,t.BUG],sizes:n,model:"feature:{feature.name},id:feature.id,practices:project.process.practices",sortConfig:{field:"feature.name"}},{types:[t.TASK],sizes:n,model:"feature:{userStory.feature.name}",sortConfig:{field:"userStory.feature.name,practices:project.process.practices"}}],sections:1,template:['<div class="tau-board-unit__value"><%!this.data.feature.name%></div>'],sampleData:{feature:{name:"Reports: High Level Report"}},model:"feature:{feature.name},id:feature.id",editorConfig:{type:"finder.entity",propertyName:"feature",isEditable:function(e){var t=e.type;return("userstory"==t||"bug"==t)&&l(e.data.practices,"Requirements")},allowToReset:!0,clearValueLabel:"(no feature)"}},{id:"project_icon",classId:"tau-board-unit_type_icon",hideIf:function(e){return!e.project||!e.project.id},name:"Project color",header:"Project Color",settings:[{types:[t.FEATURE,t.STORY,t.TASK,t.BUG,t.REQUEST,t.TEST_CASE,t.IMPEDIMENT,t.ITERATION,t.RELEASE,t.TEST_PLAN,t.TEST_PLAN_RUN,t.BUILD],sizes:o},{types:[t.PROJECT_MEMBER],sizes:o}],template:['<i class="tau-icon tau-icon_type_color" style="background-color: <%= this.data.project.color || "transparent"%>;"></i>'],sampleData:{project:{id:1,color:"#f9d9d1",name:"CodeGuard 3"}},listSettings:{title:"<%= this.data.project.name %>"}},{id:"project_abbr",classId:"tau-board-unit_type_project_abbr",hideIf:function(e){return!e.project||!e.project.abbreviation},name:"Project abbreviation",header:"Project",sortConfig:{field:"project.abbreviation"},settings:[{types:[t.FEATURE,t.STORY,t.TASK,t.BUG,t.REQUEST,t.TEST_CASE,t.IMPEDIMENT,t.ITERATION,t.RELEASE,t.TEST_PLAN,t.TEST_PLAN_RUN,t.BUILD],sizes:o},{types:[t.PROJECT_MEMBER],sizes:[a.S,a.M,a.L,a.XL,a.LIST]},{types:[t.GENERAL,t.INBOUND_RELATIONS,t.OUTBOUND_RELATIONS],sizes:[a.LIST]}],template:['<div class="tau-board-unit__value_type_abbr"',' style="background-color: <%=this.data.project.color||"transparent"%>;">',"<%!this.data.project.abbreviation%>","</div>"],sampleData:{project:{color:"#f9d9d1",abbreviation:"CGR",name:"CodeGuard 3"}},listSettings:{title:"<%= this.data.project.name %>"}},{id:"project_short",classId:"tau-board-unit_type_project",hideIf:function(e){return!e.project||!e.project.name},name:"Project name",header:"Project",sortConfig:{field:"project.name"},settings:[{types:[t.FEATURE,t.STORY,t.TASK,t.BUG,t.REQUEST,t.TEST_CASE,t.IMPEDIMENT,t.ITERATION,t.RELEASE,t.TEST_PLAN,t.TEST_PLAN_RUN,t.BUILD],sizes:[a.M,a.L,a.XL,a.LIST]},{types:[t.PROJECT_MEMBER],sizes:[a.M,a.L,a.XL,a.LIST]}],template:['<div class="tau-board-unit__value" style="background-color: <%= this.data.project.color || "transparent"%>;">',"<%! fn.trim(this.data.project.name, 15) %>","</div>"],sampleData:{project:{name:"Custom Graphic Reports",color:"#f9d9d1"}}},{id:"project_long",classId:"tau-board-unit_type_project",hideIf:function(e){return!e.project||!e.project.name},name:"Project name",header:"Project",sortConfig:{field:"project.name"},settings:[{types:[t.FEATURE,t.STORY,t.TASK,t.BUG,t.REQUEST,t.TEST_CASE,t.IMPEDIMENT,t.ITERATION,t.RELEASE,t.TEST_PLAN,t.TEST_PLAN_RUN,t.BUILD],sizes:n},{types:[t.PROJECT_MEMBER],sizes:[a.S,a.M,a.L,a.XL]}],sections:1,template:['<div class="tau-board-unit__value" style="background-color: <%= this.data.project.color || "transparent"%>;">',"<%! this.data.project.name %>","</div>"],sampleData:{project:{name:"Custom Graphic Reports",color:"#f9d9d1"}},model:"project:{name:project.name,color:project.color},id:project.id"},{id:"severity_short",classId:"tau-board-unit_type_severity",name:"Severity",types:[t.BUG],sizes:[a.M,a.L,a.XL,a.LIST],template:['<div class="tau-board-unit__value"><%!fn.trim(this.data.severity.name,15)%></div>'],sampleData:{severity:{name:"Annoyance & Frustration - Easy workaround"}}},{id:"severity_long",classId:"tau-board-unit_type_severity",name:"Severity",types:[t.BUG],sizes:n,sections:1,sortConfig:{field:"severity.name"},template:['<div class="tau-board-unit__value"><%!this.data.severity.name%></div>'],sampleData:{severity:{name:"Annoyance & Frustration - Easy workaround"}},model:"severity:{name:severity.name},id:severity.id",editorConfig:{type:"choice",listType:"severity"},listSettings:{minWidth:110}},{id:"business_value_short",classId:"tau-board-unit_type_business-value",name:"Business value",header:"Business Value",types:[t.FEATURE,t.STORY,t.BUG,t.IMPEDIMENT,t.TEST_CASE,t.REQUEST],sizes:[a.M,a.L,a.XL,a.LIST],sortConfig:{field:"priority.importance",inverseOrder:!0},template:['<div class="tau-board-unit__value"><%!fn.trim(this.data.priority.name,15)%></div>'],sampleData:{priority:{name:"Nice to have"}}},{id:"business_value_long",classId:"tau-board-unit_type_business-value",name:"Business value",header:"Business Value",types:[t.FEATURE,t.STORY,t.BUG,t.REQUEST,t.TEST_CASE,t.IMPEDIMENT],sizes:n,sortConfig:{field:"priority.importance",inverseOrder:!0},sections:1,template:['<div class="tau-board-unit__value"><%!this.data.priority.name%></div>'],sampleData:{priority:{name:"Nice to have"}},model:"priority:{name:priority.name},id:priority.id",editorConfig:{type:"choice",listType:"priority"}},{id:"team",classId:"tau-board-unit_type_icon",hideIf:function(e){return!e.team||!e.team.id},name:"Team icon",header:"Team",types:[t.FEATURE,t.STORY,t.TASK,t.BUG,t.REQUEST,t.TEAM_ITERATION,t.TEST_PLAN_RUN],sizes:o,template:['<i class="tau-icon tau-icon_type_svg tau-icon_name_<%= this.data.team.icon||"trihead" %>"></i>'],sampleData:{team:{id:1,icon:"ufo",name:"Ufo team"}},listSettings:{title:'<%= this.data.team.name || "" %>'}},{id:"owner",classId:"tau-board-unit_type_avatar",name:"Owner",sortConfig:{field:"owner.fullName"},types:[t.FEATURE,t.STORY,t.TASK,t.BUG,t.REQUEST,t.TEST_CASE,t.IMPEDIMENT,t.TEAM,t.PROJECT,t.ITERATION,t.TEAM_ITERATION,t.RELEASE,t.TEST_PLAN,t.TEST_PLAN_RUN,t.BUILD],sizes:o,template:['<div class="tau-avatar tau-owner-avatar">',"<% var owner = this.data.owner; %>",'<img src="<%= owner.avatarUri %>20" <% if (!this.settings.isDesignMode) { %>title="<%! _.trim(owner.fullName) || owner.email %>"<% } %>>',"</div>"],model:"owner:{owner.avatarUri,owner.fullName,owner.email}",sampleData:{owner:{avatarUri:r.url("/Javascript/tau/css/images/icons/user.png?size="),fullName:"Owner's Full Name"}}},{id:"teamiteration_id",classId:"tau-board-unit_type_id tau-board-unit_type_teamiteration-id",hideIf:function(e){return!e.teamIteration||!e.teamIteration.id},name:"Team iteration id",header:"Team Iteration Id",sortConfig:{field:"teamIteration.id"},types:[t.STORY,t.BUG,t.TEST_PLAN_RUN,t.TASK],sizes:o,template:['<%= fn.generateEntityLink(this, this.data.teamIteration, "teamiteration", "tau-board-unit__value tau-related-id") %>'],sampleData:{teamIteration:{id:270707,name:"Team iteration #1.1 (Research/Concept)"}},listSettings:{title:["<%! this.data.teamIteration && this.data.teamIteration.name %>"]}},{id:"team_iteration_short",classId:"tau-board-unit_type_teamiteration",hideIf:function(e){return!e.teamIteration||!e.teamIteration.name},name:"Team iteration",header:"Team Iteration",types:[t.STORY,t.BUG,t.TEST_PLAN_RUN,t.TASK],sizes:[a.M,a.L,a.XL,a.LIST],template:['<div class="tau-board-unit__value"><%!fn.trim(this.data.teamIteration.name,19)%></div>'],sampleData:{teamIteration:{name:"Team iteration #1.1 (Research/Concept)"}}},{id:"team_iteration_long",classId:"tau-board-unit_type_teamiteration",name:"Team iteration",header:"Team Iteration",hideIf:function(e){return!e.teamIteration||!e.teamIteration.name},types:[t.STORY,t.BUG,t.TEST_PLAN_RUN,t.TASK],sizes:n,sections:1,sortConfig:{field:"teamIteration.name"},template:['<div class="tau-board-unit__value"><%!this.data.teamIteration.name%></div>'],sampleData:{teamIteration:{name:"Team iteration #1.1 (Research/Concept)"}},model:"teamIteration:{name:teamIteration.name},id:teamIteration.id",editorConfig:e.extend({},d,{listType:"teamIteration",emptyDataMessage:"No team iterations found",isEditable:function(e){return"task"!==e.type},clearValueLabel:"(no team iteration)"})},{id:"last_commented_user_icon",classId:"tau-board-unit_type_avatar",hideIf:function(e){return!e.lastCommentedUser||!e.lastCommentedUser.avatarUri},name:"Last commented user",header:"Last Commented User",types:[t.FEATURE,t.STORY,t.TASK,t.BUG,t.REQUEST,t.TEST_CASE,t.IMPEDIMENT,t.ITERATION,t.TEAM_ITERATION,t.RELEASE,t.TEST_PLAN,t.TEST_PLAN_RUN,t.BUILD],sizes:o,sortConfig:{field:"lastCommentedUser.fullName"},template:['<div class="tau-avatar tau-last-commented-user-avatar">','<img <% if (this.data.lastCommentedUser.avatarUri) { %> src="<%= this.data.lastCommentedUser.avatarUri %>" <% } %> >',"</div>"],listSettings:{title:["<% var user = this.data.lastCommentedUser, title = user.fullName || user.email; %>",'<%= fn.cond(title, title, "") %>']},sampleData:{lastCommentedUser:{avatarUri:r.url("/Javascript/tau/css/images/icons/user.png"),fullName:"Johnny Depp",email:"j.depp@email.com"}}},{id:"user_total_allocation",classId:"tau-board-unit_type_allocation",name:"Total user allocation",header:"User Allocation",types:[t.PROJECT_MEMBER],sizes:[a.S,a.M,a.L,a.XL,a.LIST],sortConfig:{field:"user.currentAllocation"},template:['<div class="tau-board-unit__value"><%= fn.precise_round(this.data.user.currentAllocation, 0) %></div>'],listSettings:{title:"<%= fn.precise_round(this.data.user.currentAllocation, 0) %>%"},sampleData:{user:{currentAllocation:150}}},{id:"build_id",classId:"tau-board-unit_type_id tau-board-unit_type_build-id",name:"Build id",header:"Build Id",hideIf:function(e){return!e.build||!e.build.id},types:[t.BUG,t.TEST_PLAN_RUN],sizes:o,template:['<%= fn.generateEntityLink(this, this.data.build, "build", "tau-board-unit__value tau-related-id") %>'],sampleData:{build:{id:314159,name:"Build 2.21.9 acceptance testing"}},listSettings:{title:["<%! this.data.build && this.data.build.name %>"]}},{id:"build_short",classId:"tau-board-unit_type_build",name:"Build",hideIf:function(e){return!e.build||!e.build.name},types:[t.BUG,t.TEST_PLAN_RUN],sizes:[a.M,a.L,a.XL,a.LIST],template:['<div class="tau-board-unit__value"><%!fn.trim(this.data.build.name,19)%></div>'],sampleData:{build:{name:"Build 2.21.9 acceptance testing"}}},{id:"build_long",classId:"tau-board-unit_type_build",hideIf:function(e){return!e.build||!e.build.name},name:"Build",types:[t.BUG,t.TEST_PLAN_RUN],sizes:n,sections:1,template:['<div class="tau-board-unit__value"><%!this.data.build.name%></div>'],sampleData:{build:{name:"Build 2.21.9 acceptance testing"}}},{id:"userstory_id",classId:"tau-board-unit_type_id tau-board-unit_type_userstory-id",hideIf:function(e){return!e.userStory||!e.userStory.id},name:"User story id",header:"User Story Id",types:[t.TASK,t.BUG,t.TEST_CASE],sizes:o,sortConfig:{field:"userStory.id"},template:['<%= fn.generateEntityLink(this, this.data.userStory, "userstory", "tau-board-unit__value tau-related-id") %>'],sampleData:{userStory:{id:240685,name:"Add audit history for Team and Team Iteration"}},listSettings:{title:["<%!this.data.userStory && this.data.userStory.name %>"]}},{id:"us_name_short",classId:"tau-board-unit_type_userstory",hideIf:function(e){return!e.userStory||!e.userStory.name},name:"User story",header:"User Story",types:[t.TASK,t.BUG,t.TEST_CASE],sizes:[a.M,a.L,a.XL,a.LIST],template:['<div class="tau-board-unit__value"><%!fn.trim(this.data.userStory.name,19)%></div>'],sampleData:{userStory:{name:"Add audit history for Team and Team Iteration"}}},{id:"us_name_long",classId:"tau-board-unit_type_userstory",hideIf:function(e){return!e.userStory||!e.userStory.name},name:"User story",header:"User Story",types:[t.TASK,t.BUG,t.TEST_CASE],sizes:n,sections:1,sortConfig:{allowed:i.SINGLE,field:"userStory.name"},template:['<div class="tau-board-unit__value"><%!this.data.userStory.name%></div>'],sampleData:{userStory:{name:"Add audit history for Team and Team Iteration"}},model:"userStory:{userStory.name},id:userStory.id",editorConfig:{type:"finder.entity",propertyName:"userstory",isEditable:function(e){var t=e.type;return"bug"==t||"task"==t||"testcase"==t},allowToReset:function(e){return"task"!==e.type.toLowerCase()},clearValueLabel:"(no user story)"}},{id:"role_short",classId:"tau-board-unit_type_role",name:"Role",settings:[{types:[t.USER],sizes:[a.S,a.M,a.L,a.XL,a.LIST],model:"roleName:role.name"},{types:[t.PROJECT_MEMBER],sizes:[a.S,a.M,a.L,a.XL,a.LIST],model:"roleName:role.name"}],template:['<div class="tau-board-unit__value"><%!fn.trim(this.data.roleName,19)%></div>'],sampleData:{roleName:"Product Owner / Scrum Master"}},{id:"role_long",classId:"tau-board-unit_type_role",name:"Role",settings:[{types:[t.USER,t.ASSIGNED_USER],sizes:[a.S,a.M,a.L,a.XL],model:"roleName:role.name"},{types:[t.PROJECT_MEMBER],sizes:[a.S,a.M,a.L,a.XL],model:"roleName:role.name"}],sections:1,sortConfig:{field:"role.name"},template:['<div class="tau-board-unit__value"><%!this.data.roleName%></div>'],sampleData:{roleName:"Product Owner / Scrum Master"}},{id:"request_question",classId:"tau-board-unit_type_icon",name:"Request type (issue, idea or question)",header:"Req. Type",types:[t.REQUEST],sizes:o,template:{customFunctions:{typeToIcon:function(e){var t=e.data.requestType.name.toLowerCase();switch(t){case"issue":return"warning";case"idea":return"lightbulb";case"question":return"question";default:return"undefined"}}},markup:['<i class="tau-icon tau-icon_type_svg tau-icon_name_<%= fn.typeToIcon(this)%>" title="<%= this.data.requestType.name%>"></i>']},sampleData:{requestType:{name:"Issue"}},listSettings:{title:["<%!this.data.requestType.name%>"]}},{id:"testplan_id",classId:"tau-board-unit_type_id tau-board-unit_type_testplan-id",hideIf:function(e){return!e.testPlan||!e.testPlan.id},name:"Test plan id",header:"Test Plan Id",types:[t.TEST_PLAN_RUN],sizes:o,sortConfig:{field:"testPlan.id"},template:['<%= fn.generateEntityLink(this, this.data.testPlan, "testplan", "tau-board-unit__value tau-related-id") %>'],sampleData:{testPlan:{id:271828,name:"Smoke test: email integration"}},listSettings:{title:["<%! this.data.testPlan && this.data.testPlan.name %>"]}},{id:"test_plan_short",classId:"tau-board-unit_type_testplan",hideIf:function(e){return!e.testPlan||!e.testPlan.name},name:"Test plan",header:"Test Plan",types:[t.TEST_PLAN_RUN],sizes:[a.M,a.L,a.XL,a.LIST],template:['<div class="tau-board-unit__value"><%!fn.trim(this.data.testPlan.name,19)%></div>'],sampleData:{testPlan:{name:"Smoke test: email integration"}}},{id:"test_plan_long",classId:"tau-board-unit_type_testplan",hideIf:function(e){return!e.testPlan||!e.testPlan.name},name:"Test plan",types:[t.TEST_PLAN_RUN],sizes:n,sections:1,template:['<div class="tau-board-unit__value"><%!this.data.testPlan.name%></div>'],sampleData:{testPlan:{name:"Smoke test: email integration"}}},{id:"related_entity_short",classId:function(e){return"tau-board-unit_type_"+(e&&e.assignable.entityType.name||"").toLowerCase()},hideIf:function(e){return!e.assignable||!e.assignable.name},name:"Related entity",header:"Related Entity",types:[t.IMPEDIMENT],sizes:[a.M,a.L,a.XL,a.LIST],template:['<div class="tau-board-unit__value"><%!fn.trim(this.data.assignable.name,19)%></div>'],sampleData:{assignable:{name:"Custom Reports: Inline editor should work",entityType:{name:"UserStory"}}}},{id:"related_entity_long",classId:function(e){return"tau-board-unit_type_"+(e&&e.assignable.entityType.name||"").toLowerCase()},hideIf:function(e){return!e.assignable||!e.assignable.name},name:"Related entity",header:"Related Entity",types:[t.IMPEDIMENT],sizes:n,sections:1,template:['<div class="tau-board-unit__value"><%!this.data.assignable.name%></div>'],sampleData:{assignable:{name:"Custom Reports: Inline editor should work",entityType:{name:"UserStory"}}}},{id:"pm_big_details",classId:"tau-board-unit_type_user-info",name:"Large avatar with some details (name, role, project)",types:[t.PROJECT_MEMBER],sizes:[a.S,a.M,a.L,a.XL],sections:2,template:['<img class="tau-board-unit_type_user-info__avatar" src="<%= this.data.user.avatarUri %>">','<div class="tau-board-unit_type_user-info__name"><%! _.trim(this.data.user.fullName) || this.data.user.email %></div>','<div class="tau-board-unit_type_user-info__role"><%! this.data.role.name %> in <%! this.data.project.abbreviation || this.data.project.name %></div>'],sampleData:{role:{name:"Writer"},project:{abbreviation:"CGR",name:"Custom Graphic Reports"},user:{fullName:"Uladzimir Karatkievich",email:"u.karatkievich@writer.com",avatarUri:r.url("/Javascript/tau/css/images/icons/user.png")}}},{id:"pm_big_details_role",classId:"tau-board-unit_type_user-info",name:"Large avatar with some details (name, role)",types:[t.PROJECT_MEMBER],sizes:[a.S,a.M,a.L,a.XL],sections:2,template:['<img class="tau-board-unit_type_user-info__avatar" src="<%= this.data.user.avatarUri %>">','<div class="tau-board-unit_type_user-info__name"><%! _.trim(this.data.user.fullName) || this.data.user.email %></div>','<div class="tau-board-unit_type_user-info__role"><%! this.data.role.name %></div>'],sampleData:{role:{name:"Writer"},user:{fullName:"Uladzimir Karatkievich",email:"u.karatkievich@writer.com",avatarUri:r.url("/Javascript/tau/css/images/icons/user.png")}}},{id:"pm_big_details_project",classId:"tau-board-unit_type_user-info",name:"Large avatar with some details (name, project)",types:[t.PROJECT_MEMBER],sizes:[a.S,a.M,a.L,a.XL],sections:2,template:['<img class="tau-board-unit_type_user-info__avatar" src="<%= this.data.user.avatarUri %>">','<div class="tau-board-unit_type_user-info__name"><%! _.trim(this.data.user.fullName) || this.data.user.email %></div>','<div class="tau-board-unit_type_user-info__role">in <%! this.data.project.abbreviation || this.data.project.name %></div>'],sampleData:{project:{abbreviation:"CGR",name:"Custom Graphic Reports"},user:{fullName:"Uladzimir Karatkievich",email:"u.karatkievich@writer.com",avatarUri:r.url("/Javascript/tau/css/images/icons/user.png")}}},{id:"responsible_person",classId:"tau-board-responsible-person",name:"Responsible person",header:"Responsible Person",types:[t.IMPEDIMENT],sizes:o,model:"user:{responsible.id,responsible.avatarUri,responsible.fullName,responsible.email}",template:['<div class="tau-avatar">','<img src="','<%=this.data.user.avatarUri%>20"',"<% if (!this.settings.isDesignMode) { %>",'title="<%=_.escape(_.trim(this.data.user.fullName) || this.data.user.email) %>"',"<% } %>",'">',"</div>"],sampleData:{user:{id:1,fullName:"Uladzimir Karatkievich",email:"u.karatkievich@writer.com",avatarUri:r.url("/Javascript/tau/css/images/icons/users/karat.png?size=")}},listSettings:{title:["<%! _.escape(_.trim(this.data.user.fullName) || this.data.user.email) %>"]}},{id:"process_short",classId:"tau-board-unit_type_process",name:"Process",types:[t.PROJECT],sizes:[a.M,a.L,a.XL,a.LIST],template:['<div class="tau-board-unit__value"><%!fn.trim(this.data.process.name,15)%></div>'],sampleData:{process:{name:"Scrum"}}},{id:"process_long",classId:"tau-board-unit_type_process",name:"Process",types:[t.PROJECT],sizes:n,sections:1,template:['<div class="tau-board-unit__value"><%!this.data.process.name%></div>'],sampleData:{process:{name:"Scrum"}}}];return e.each(u,function(e){e.category="one to one"}),u});
define('tau/models/board.customize.units/board.customize.units.collections',["Underscore","tau/models/board.customize.units/const.entity.types.names","tau/models/board.customize.units/const.card.sizes","tau/models/board.customize.units/board.customize.units.base"],function(t,e,s,a){e.STORY=e.US;var n={users:[{id:1,fullName:"Uladzimir Karatkievich",email:"u.karatkievich@writer.com",avatarUri:a.url("/Javascript/tau/css/images/icons/users/karat.png?size="),isActive:!0},{id:2,fullName:"Janka Kupala",email:"ja.kupala@writer.com",avatarUri:a.url("/Javascript/tau/css/images/icons/users/kupala.png?size="),isActive:!0},{id:3,fullName:"Adam Mickiewicz",email:"a.mickiewicz@writer.com",avatarUri:a.url("/Javascript/tau/css/images/icons/users/mick.png?size="),isActive:!0},{id:4,fullName:"Uladzimir Karatkievich",email:"u.karatkievich@writer.com",avatarUri:a.url("/Javascript/tau/css/images/icons/user.png?size="),isActive:!0}],currentStateResponsiblePersons:[1,2,3,4]},o=function(e,s,a){for(var n=[],o=Math.min(e.length,s),i=0;o>i;i++)n.push('<div class="tau-board-unit_type_list__item">'),n.push(a(e[i])),n.push("</div>");return e.length>s&&(n.push('<div class="tau-board-unit_type_list__others-counter">'),n.push(e.length-s),n.push("</div>")),t.flatten(n,!0).join("")},i=function(e){return t.map(e.tags,function(e){return'<div class="tau-board-unit_type_list__item">'+t.escape(e)+"</div>"}).join(", ")},u=function(t,e){return o(t.projects,e,function(t){return['<i style="background-color: ',t.color||"transparent",'" class="tau-icon tau-icon_type_color"></i>']})},r=function(e,s){return o(e.projects,s,function(e){return['<div class="tau-board-unit__value_type_abbr" style="background-color: ',e.color||"transparent",'">',t.escape(e.abbr),"</div>"]})},d=function(t,e){return o(t.teams,e,function(t){return['<i class="tau-icon tau-icon_type_svg tau-icon_name_',t.icon||"trihead",'"></i>']})},l=function(t){return t.openAssignables+t.openBlockers+t.others},p=function(t){return{markup:["<%= fn.assignedPeople(this.data, "+t+", this.settings) %>"],customFunctions:{assignedPeople:function(t,e,s){var a=this.isResponsible.bind(this,t),n=this.getUserText.bind(this),i=this.getPeopleOrdered(t);return o(i,e,function(t){return['<div class="tau-avatar',a(t)?"":" tau-avatar-not-currentResponsible",'">','<img src="'+t.avatarUri+'20"',s.isDesignMode?"":' title="'+n(t)+'"',">","</div>"]})}}}},c=function(t){return['<div class="tau-board-unit__value-open"><%= this.data.open{{FIELD}}Count%></div>','<div class="tau-board-unit__value-total"><%= this.data.total{{FIELD}}Count%></div>'].join("").replace(new RegExp("{{FIELD}}","g"),t)},m=function(t){return["<% if (this.data.open{{FIELD}}Count || this.data.total{{FIELD}}Count) { %>","Open: <%= this.data.open{{FIELD}}Count %> / total: <%= this.data.total{{FIELD}}Count %>","<% } %>"].join("").replace(new RegExp("{{FIELD}}","g"),t)},S=[{id:"progress_short_release_iteration",classId:"tau-board-unit_type_progress",name:"Progress",types:[e.ITERATION,e.TEAM_ITERATION,e.RELEASE],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],template:['<div class="tau-board-unit__value"><%= fn.precise_round(this.data.progress*100, 0) %></div>'],sampleData:{progress:1},listSettings:{title:"<%= fn.precise_round(this.data.progress*100, 0) %>%"}},{id:"progress_long_release_iteration",classId:"tau-board-unit_type_progress",name:"Progress",types:[e.ITERATION,e.TEAM_ITERATION,e.RELEASE],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],template:['<div class="tau-progress tau-v-<%= fn.precise_round(this.data.progress*10, 0)*10 %>"></div>','<div class="tau-board-unit__value"><%= fn.precise_round(this.data.progress*100, 0) %></div>'],sampleData:{progress:1},listSettings:{title:"<%= fn.precise_round(this.data.progress*100, 0) %>%"}},{id:"test_cases",classId:"tau-board-unit_type_testcases-detailed-counter",hideIf:function(t){return!t.testCaseStats||!t.testCaseStats.passed&&!t.testCaseStats.failed&&!t.testCaseStats.ignored},name:"Test cases stats",header:"Test Cases Stats",settings:[{types:[e.TEST_PLAN],sizes:[s.S,s.M,s.L,s.XL,s.LIST],model:"TestCaseStats:{passed:testCases.Count(lastStatus == true),failed:testCases.Count(lastStatus == false),ignored:testCases.Count(lastStatus == null)}"},{types:[e.STORY],sizes:[s.S,s.M,s.L,s.XL,s.LIST],model:"TestCaseStats:{passed:testCases.Count(lastStatus == true),failed:testCases.Count(lastStatus == false),ignored:testCases.Count(lastStatus == null)}"},{types:[e.TEST_PLAN_RUN],sizes:[s.S,s.M,s.L,s.X,s.XL,s.LIST],model:"TestCaseStats:{passed:PassedCount,failed:FailedCount,ignored:NotRunCount}"}],template:["<% var testCaseStats = this.data.testCaseStats || {}; %>",'<div class="tau-board-unit__value-passed"><%= testCaseStats.passed || 0 %></div>','<div class="tau-board-unit__value-failed"><%= testCaseStats.failed || 0 %></div>','<div class="tau-board-unit__value-ignored"><%= testCaseStats.ignored || 0 %></div>'],listSettings:{title:["<% var testCaseStats = this.data.testCaseStats || {}; %>","<% if (testCaseStats.passed || testCaseStats.failed || testCaseStats.ignored) { %>","Passed: <%= testCaseStats.passed || 0 %>, ","failed: <%= testCaseStats.failed || 0 %>, ","ignored: <%= testCaseStats.ignored || 0 %>","<% } %>"]},sampleData:{testCaseStats:{passed:830,failed:110,ignored:120}}},{id:"assignments_big_2",classId:"tau-board-unit_type_avatars-list",hideIf:function(t){return!(t.user||t.users&&t.users.length)},name:"Assigned people",header:"Assignments",settings:[{types:[e.FEATURE,e.STORY,e.TASK,e.BUG,e.REQUEST,e.TEST_PLAN_RUN],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],model:"users:assignedUser.Select({id,avatarUri,fullName,email}),currentStateResponsiblePersons"}],template:p(2),listSettings:{title:'<%= _.map(fn.getPeopleOrdered(this.data), fn.getUserText).join("&#10;") %>'},sampleData:n,editorConfig:{type:"assignments"}},{id:"assigned_users",classId:"tau-board-unit_type_avatars-list",hideIf:function(t){return!t.users||!t.users.length},name:"Assigned people",header:"Assignments",settings:[{types:[e.FEATURE,e.STORY,e.TASK,e.BUG,e.REQUEST,e.TEST_PLAN_RUN],sizes:[s.M,s.L,s.XL,s.LIST],model:"users:assignedUser.Select({id,avatarUri,fullName,email}),currentStateResponsiblePersons"}],template:p(3),listSettings:{title:'<%= _.map(fn.getPeopleOrdered(this.data), fn.getUserText).join("&#10;") %>'},sampleData:n,editorConfig:{type:"assignments"}},{id:"attachments",classId:"tau-board-unit_type_attachments-counter",hideIf:function(t){return!t.attachmentsCount},name:"Attachments count",header:"Attachments",types:[e.FEATURE,e.STORY,e.TASK,e.BUG,e.REQUEST,e.TEST_CASE,e.IMPEDIMENT,e.ITERATION,e.TEAM_ITERATION,e.RELEASE,e.TEST_PLAN,e.TEST_PLAN_RUN,e.BUILD],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],template:['<div class="tau-board-unit__value"><%!this.data.attachmentsCount%></div>'],sampleData:{attachmentsCount:3},model:"attachmentsCount:attachments.Count()"},{id:"comments_count",classId:"tau-board-unit_type_comments-counter",hideIf:function(t){return!t.commentsCount},name:"Comments count",header:"Comments",types:[e.FEATURE,e.STORY,e.TASK,e.BUG,e.REQUEST,e.TEST_CASE,e.IMPEDIMENT,e.ITERATION,e.TEAM_ITERATION,e.RELEASE,e.TEST_PLAN,e.TEST_PLAN_RUN,e.BUILD],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],template:['<div class="tau-board-unit__value"><%!this.data.commentsCount%></div>'],sampleData:{commentsCount:27},model:"commentsCount:comments.Count()"},{id:"requests_open",classId:"tau-board-unit_type_requesters-counter",hideIf:function(t){return!t.requestersCount},name:"Requesters count",header:"Requesters",types:[e.REQUEST],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],template:['<div class="tau-board-unit__value"><%!this.data.requestersCount%></div>'],sampleData:{requestersCount:43},model:"requestersCount:requesters.Count()"},{id:"tasks",classId:"tau-board-unit_type_tasks-counter-open-total",hideIf:function(t){return!t.totalTasksCount},name:"Open/total tasks",header:"Tasks",types:[e.STORY],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],template:[c("Tasks")],listSettings:{title:m("Tasks")},sampleData:{totalTasksCount:43,openTasksCount:26},model:"totalTasksCount:tasks.Count(),openTasksCount:tasks.Where(entityState.isFinal != true).Count()"},{id:"story_bugs",classId:"tau-board-unit_type_bugs-counter-open-total",hideIf:function(t){return!t.totalBugsCount},name:"Open/total bugs",header:"Bugs",types:[e.STORY],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],template:[c("Bugs")],listSettings:{title:m("Bugs")},sampleData:{totalBugsCount:43,openBugsCount:26},model:"totalBugsCount:bugs.Count(),openBugsCount:bugs.Where(entityState.isFinal != true and project.isActive = true).Count()"},{id:"bugs",classId:"tau-board-unit_type_bugs-counter-open-total-e",hideIf:function(t){return!t.totalBugsCount},name:"Open/total bugs",header:"Bugs",settings:[{types:[e.USER],sizes:[s.S,s.M,s.L,s.XL,s.LIST],model:"totalBugsCount:bugs.Where(project.isActive == true).Count(),openBugsCount:bugs.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[e.TEAM,e.PROJECT,e.ITERATION,e.TEAM_ITERATION,e.RELEASE,e.BUILD],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],model:"totalBugsCount:bugs.Count(),openBugsCount:bugs.Where(entityState.isFinal != true and project.isActive == true).Count()"}],template:[c("Bugs")],listSettings:{title:m("Bugs")},sampleData:{totalBugsCount:431,openBugsCount:261}},{id:"tasks_badge",classId:"tau-board-unit_type_tasks-counter",hideIf:function(t){return!t.openTasksCount},name:"Open tasks",header:"Open Tasks",settings:[{types:[e.STORY],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],model:"openTasksCount:tasks.Where(entityState.isFinal != true).Count()"},{types:[e.USER],sizes:[s.S,s.M,s.L,s.XL,s.LIST],model:"openTasksCount:tasks.Where(entityState.isFinal != true and project.isActive == true).Count()"}],template:['<div class="tau-board-unit__value"><%!this.data.openTasksCount%></div>'],sampleData:{openTasksCount:26}},{id:"story_bugs_badge",classId:"tau-board-unit_type_bugs-counter",hideIf:function(t){return!t.openBugsCount},name:"Open bugs",header:"Open Bugs",types:[e.STORY],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],template:['<div class="tau-board-unit__value"><%!this.data.openBugsCount%></div>'],sampleData:{openBugsCount:42},model:"openBugsCount:bugs.Where(entityState.isFinal != true).Count()"},{id:"bugs_badge",classId:"tau-board-unit_type_bugs-counter-e",hideIf:function(t){return!t.openBugsCount},name:"Open bugs",header:"Open Bugs",settings:[{types:[e.PROJECT,e.TEAM,e.ITERATION,e.TEAM_ITERATION,e.RELEASE,e.BUILD],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],model:"openBugsCount:bugs.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[e.USER],sizes:[s.S,s.M,s.L,s.XL,s.LIST],model:"openBugsCount:bugs.Where(entityState.isFinal != true and project.isActive == true).Count()"}],template:['<div class="tau-board-unit__value"><%!this.data.openBugsCount%></div>'],sampleData:{openBugsCount:421}},{id:"teams_badge",classId:"tau-board-unit_type_teams-counter",hideIf:function(t){return!t.teamsCount},name:"Teams",settings:[{types:[e.PROJECT],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],model:"teamsCount:teamProjects.Count()"},{types:[e.USER],sizes:[s.S,s.M,s.L,s.XL,s.LIST],model:"teamsCount:teamMembers.Count()"}],template:['<div class="tau-board-unit__value"><%!this.data.teamsCount%></div>'],sampleData:{teamsCount:24}},{id:"us_count",classId:"tau-board-unit_type_userstories-counter",hideIf:function(t){return!t.userStoriesCount},name:"Open user stories",header:"Open User Stories",settings:[{types:[e.FEATURE,e.TEAM,e.PROJECT,e.ITERATION,e.TEAM_ITERATION,e.RELEASE],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],model:"userStoriesCount:userStories.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[e.USER],sizes:[s.S,s.M,s.L,s.XL,s.LIST],model:"userStoriesCount:userStories.Where(entityState.isFinal != true and project.isActive == true).Count()"}],template:['<div class="tau-board-unit__value"><%!this.data.userStoriesCount%></div>'],sampleData:{userStoriesCount:425}},{id:"request_badge",classId:"tau-board-unit_type_requests-counter",hideIf:function(t){return!t.requestsCount},name:"Open requests",header:"Open Requests",settings:[{types:[e.PROJECT,e.TEAM],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],model:"requestsCount:requests.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[e.USER],sizes:[s.S,s.M,s.L,s.XL,s.LIST],model:"requestsCount:assignedRequests.Where(entityState.isFinal != true and project.isActive == true).Count()"}],template:['<div class="tau-board-unit__value"><%!this.data.requestsCount%></div>'],sampleData:{requestsCount:43}},{id:"dependencies",classId:"tau-board-unit_type_relations-counter-in-out",hideIf:function(t){return!(t.inbound&&l(t.inbound)||t.outbound&&l(t.outbound))},name:"Relations",types:[e.FEATURE,e.STORY,e.TASK,e.BUG,e.REQUEST,e.TEST_CASE,e.IMPEDIMENT,e.TEAM,e.PROJECT,e.ITERATION,e.TEAM_ITERATION,e.RELEASE,e.TEST_PLAN,e.TEST_PLAN_RUN,e.BUILD],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],template:{markup:a.createUnitValueWrapperTemplate(["<% var inboundCount = fn.count(this.data.inbound); %>","<% var outboundCount = fn.count(this.data.outbound); %>",'<div class="tau-board-unit__value-in <%=this.data.inbound.openBlockers > 0 ? "tau-board-unit__value-blocker":"" %>"><%= inboundCount %></div>','<div class="tau-board-unit__value-out <%=this.data.outbound.openBlockers > 0 ? "tau-board-unit__value-blocker":"" %>"><%= outboundCount %></div>']),customFunctions:{count:l}},listSettings:{title:["<% var inboundCount = fn.count(this.data.inbound); %>","<% var outboundCount = fn.count(this.data.outbound); %>","<% if (inboundCount || outboundCount) { %>","In: <%= inboundCount %>, out: <%= outboundCount %>","<% } %>"]},sampleData:{inbound:{openAssignables:22,openBlockers:0,others:18},outbound:{openAssignables:43,openBlockers:0,others:4}},model:"inbound:masterRelations.activeMasterRelationsCount,outbound:slaveRelations.activeSlaveRelationsCount"},{id:"test_run_short",classId:"tau-board-unit_type_testruns-counter-open-total",hideIf:function(t){return!t.totalTestRunsCount},name:"Open/total test plan runs",header:"Test Plan Runs",types:[e.PROJECT,e.ITERATION,e.TEAM_ITERATION,e.RELEASE,e.TEST_PLAN,e.BUILD],sizes:[s.M,s.L,s.XL,s.LIST],template:[c("TestRuns")],listSettings:{title:m("TestRuns")},sampleData:{totalTestRunsCount:403,openTestRunsCount:286},model:"totalTestRunsCount:testPlanRuns.Count(),openTestRunsCount:testPlanRuns.Where(entityState.isFinal != true).Count()"},{id:"test_run_badge",classId:"tau-board-unit_type_testruns-counter",hideIf:function(t){return!t.openTestRunsCount},name:"Open test plan runs",header:"Open Test Plan Runs",types:[e.PROJECT,e.ITERATION,e.TEAM_ITERATION,e.RELEASE,e.TEST_PLAN,e.BUILD],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],template:['<div class="tau-board-unit__value"><%!this.data.openTestRunsCount%></div>'],sampleData:{openTestRunsCount:286},model:"openTestRunsCount:testPlanRuns.Where(entityState.isFinal != true).Count()"},{id:"feature_icon",classId:"tau-board-unit_type_features-counter-open-total",hideIf:function(t){return!t.totalFeaturesCount},name:"Open/total features",header:"Features",settings:[{types:[e.PROJECT,e.RELEASE,e.TEAM],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],model:"totalFeaturesCount:features.Count(),openFeaturesCount:features.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[e.USER],sizes:[s.S,s.M,s.L,s.XL,s.LIST],model:"totalFeaturesCount:features.Where(project.isActive == true).Count(),openFeaturesCount:features.Where(entityState.isFinal != true and project.isActive == true).Count()"}],template:[c("Features")],listSettings:{title:m("Features")},sampleData:{totalFeaturesCount:286,openFeaturesCount:204}},{id:"feature_badge",classId:"tau-board-unit_type_features-counter",hideIf:function(t){return!t.openFeaturesCount},name:"Open features",header:"Open Features",settings:[{types:[e.PROJECT,e.RELEASE,e.TEAM],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],model:"openFeaturesCount:features.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[e.USER],sizes:[s.S,s.M,s.L,s.XL,s.LIST],model:"openFeaturesCount:features.Where(entityState.isFinal != true and project.isActive == true).Count()"}],template:['<div class="tau-board-unit__value"><%!this.data.openFeaturesCount%></div>'],sampleData:{openFeaturesCount:286}},{id:"us_opentotal",classId:"tau-board-unit_type_userstories-counter-open-total",hideIf:function(t){return!t.totalStoriesCount},name:"Open/total user stories",header:"User Stories",settings:[{types:[e.FEATURE,e.PROJECT,e.ITERATION,e.TEAM_ITERATION,e.RELEASE,e.TEAM],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],model:"totalStoriesCount:userStories.Count(),openStoriesCount:userStories.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[e.USER],sizes:[s.S,s.M,s.L,s.XL,s.LIST],model:"totalStoriesCount:userStories.Where(project.isActive == true).Count(),openStoriesCount:userStories.Where(entityState.isFinal != true and project.isActive == true).Count()"}],template:[c("Stories")],listSettings:{title:m("Stories")},sampleData:{totalStoriesCount:281,openStoriesCount:201}},{id:"effort_total_collection",classId:"tau-board-unit_type_effort-total-e",name:"Total effort",header:"Effort",types:[e.ITERATION,e.TEAM_ITERATION,e.RELEASE],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],template:['<div class="tau-board-unit__value"><%=fn.precise_round(this.data.effort||0,1)%></div>','<div class="tau-board-unit__points"><%=this.data.units%></div>'],sampleData:{effort:255.5,units:"pt"},model:"effort:bugs.Sum(effort)+userStories.Sum(effort),units:units"},{id:"effort_complete_collection",classId:"tau-board-unit_type_effort-total-e tau-board-unit_type_effort-complete",name:"Completed effort",header:"Completed Effort",types:[e.ITERATION,e.TEAM_ITERATION,e.RELEASE],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],template:['<div class="tau-board-unit__value"><%=fn.precise_round(this.data.effort||0,1)%></div>','<div class="tau-board-unit__points"><%=this.data.units%></div>'],sampleData:{effort:201.3,units:"pt"},model:"effort:bugs.Sum(effort)+userStories.Sum(effort)-bugs.Sum(effortToDo)-userStories.Sum(effortToDo),units:units"},{id:"effort_spent_total_collection",classId:"tau-board-unit_type_effort-todo-total-e",name:"Todo/total effort",header:"Effort",types:[e.ITERATION,e.TEAM_ITERATION,e.RELEASE],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],template:['<div class="tau-board-unit__value-todo"><%=fn.precise_round(this.data.effortToDo||0,1)%></div>','<div class="tau-board-unit__value-total"><%=fn.precise_round(this.data.effort||0,1)%></div>','<div class="tau-board-unit__points"><%=this.data.units%></div>'],sampleData:{effortToDo:253.7,effort:380.3,units:"pt"},model:"effort:bugs.Sum(effort)+userStories.Sum(effort),effortToDo:bugs.Sum(effortToDo)+userStories.Sum(effortToDo),units:units",listSettings:{title:["<%= fn.precise_round(this.data.effortToDo || 0, 1) %>"," / ","<%= fn.precise_round(this.data.effort || 0, 1) %><%= this.data.units %>"]}}];return a.pushClones(S,{hideIf:function(t){return!t.tags||!t.tags.length},name:"Tags",types:[e.FEATURE,e.STORY,e.TASK,e.BUG,e.REQUEST,e.TEST_CASE,e.IMPEDIMENT,e.TEAM,e.PROJECT,e.ITERATION,e.TEAM_ITERATION,e.RELEASE,e.TEST_PLAN,e.TEST_PLAN_RUN,e.BUILD],template:{markup:['<div class="tau-board-unit_type_tags-list__wrapper">',"<%=fn.tags(this.data)%>","</div>"],customFunctions:{tags:i}},sampleData:{tags:["UX","Design","Prototype","Javascript"]},model:"tags:tagObjects.Select(name)",editorConfig:{type:"tagsInline"},listSettings:{title:'<%= this.data.tags.join("&#10;") %>',minWidth:70,maxWidth:600}},[{id:"tags_short",classId:"tau-board-unit_type_list tau-board-unit_type_tags-list-s",sizes:[s.M,s.L,s.XL,s.LIST]},{id:"tags_short_xs",classId:"tau-board-unit_type_list tau-board-unit_type_tags-list-xs",sizes:[s.M,s.L,s.XL]},{id:"tags_long",classId:"tau-board-unit_type_list tau-board-unit_type_tags-list",sizes:[s.XS,s.S,s.M,s.L,s.XL],sections:1}]),a.pushClones(S,{hideIf:function(t){return!(t.testCasesCount||t.passedCount||t.failedCount||t.notRunCount)},name:"Total test cases",header:"Test Cases",settings:[{types:[e.STORY,e.TEST_PLAN],sizes:[s.S,s.M,s.L,s.XL,s.LIST],model:"testCasesCount:testCases.Count()"},{types:[e.TEST_PLAN_RUN],sizes:[s.S,s.M,s.L,s.XL,s.LIST],model:"testCasesCount:passedCount+failedCount+notRunCount"}],template:['<div class="tau-board-unit__value"><%!this.data.testCasesCount%></div>'],sampleData:{testCasesCount:142}},[{id:"test_case_badge",classId:"tau-board-unit_type_testcases-counter"},{id:"test_case_icon",classId:"tau-board-unit_type_testcases-counter-alt"}]),a.pushClones(S,{hideIf:function(t){return!t.impedimentsCount},name:"Open impediments",header:"Open Impediments",types:[e.FEATURE,e.STORY,e.TASK,e.BUG,e.REQUEST,e.TEST_PLAN_RUN],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],template:['<div class="tau-board-unit__value"><%!this.data.impedimentsCount%></div>'],sampleData:{impedimentsCount:7},model:"impedimentsCount:masterRelations.activeMasterRelationsCount.openBlockers"},[{id:"impediments",classId:"tau-board-unit_type_impediments-counter-alt"},{id:"impediments_badge",classId:"tau-board-unit_type_impediments-counter"}]),a.pushClones(S,{classId:"tau-board-unit_type_list tau-board-unit_type_projects-abbrs-list",hideIf:function(t){return!t.projects||!t.projects.length},name:"Projects abbreviations",header:"Projects",template:{markup:["<%=fn.projects(this.data, 2)%>"],customFunctions:{projects:r}},sampleData:{projects:[{color:"#f9d9d1",abbr:"MMM",name:"MMM"},{color:"#fbe9d6",abbr:"MWO",name:"MWO"},{color:"#fbe9d6",abbr:"MWO",name:"MWO"},{color:"#fbe9d6",abbr:"MWO",name:"MWO"}]},listSettings:{title:'<%= _.pluck(this.data.projects, "name").join("&#10;") %>'}},[{id:"project_abbrs_team",types:[e.TEAM],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],model:"projects:TeamProjects.Where(project.IsActive == true).Select({project.color,abbr:project.abbreviation,name:project.name})"},{id:"project_abbrs_user",types:[e.USER,e.ASSIGNED_USER],sizes:[s.S,s.M,s.L,s.XL,s.LIST],model:"projects:ProjectMembers.Where(project.IsActive == true).Select({project.color,abbr:project.abbreviation,name:project.name})"}]),a.pushClones(S,{classId:"tau-board-unit_type_list tau-board-unit_type_projects-list",hideIf:function(t){return!t.projects||!t.projects.length},name:"Projects",template:{markup:["<%=fn.projects(this.data, 3)%>"],customFunctions:{projects:u}},sampleData:{projects:[{color:"#f9d9d1",abbr:"MMM",name:"MMM"},{color:"#fbe9d6",abbr:"MWO",name:"MWO"},{color:"#fbe9d6",abbr:"MWO",name:"MWO"},{color:"#fbe9d6",abbr:"MWO",name:"MWO"}]},listSettings:{title:'<%= _.pluck(this.data.projects, "name").join("&#10;") %>'}},[{id:"project_icons_team",types:[e.TEAM],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],model:"projects:TeamProjects.Where(project.IsActive == true).Select({project.color,abbr:project.abbreviation,name:project.name})"},{id:"project_icons_user",types:[e.USER],sizes:[s.S,s.M,s.L,s.XL,s.LIST],model:"projects:ProjectMembers.Where(project.IsActive == true).Select({project.color,abbr:project.abbreviation,name:project.name})"}]),a.pushClones(S,{classId:"tau-board-unit_type_list tau-board-unit_type_teams-list",hideIf:function(t){return!t.teams||!t.teams.length},name:"Teams",template:{markup:["<%=fn.teams(this.data, 3)%>"],customFunctions:{teams:d}},sampleData:{teams:[{icon:"apple",name:"Apple Team"},{icon:"windows",name:"Windows Team"},{icon:"linux",name:"Linux Team"},{name:"Anonymous"}]},listSettings:{title:'<%= _.pluck(this.data.teams, "name").join("&#10;") %>'}},[{id:"teams_user",types:[e.USER,e.ASSIGNED_USER],sizes:[s.S,s.M,s.L,s.XL,s.LIST],model:"teams:teamMembers.Select({team.icon,team.name})"},{id:"teams_project",types:[e.PROJECT],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],model:"teams:TeamProjects.Select({team.icon,team.name})"}]),a.pushClones(S,{classId:"tau-board-unit_type_list tau-board-unit_type_avatars-list",sections:1,hideIf:function(t){return!t.users||!t.users.length},name:"People",sizes:[s.M,s.L,s.XL,s.LIST],template:["<% var users = this.data.users, count = users.length;%>",'<div class="tau-board-unit_type_list__total-counter"><%= count %></div>',"<% for (var i = 0; i < count; i++) {%>","<% var user = users[i]; %>",'<div class="tau-board-unit_type_list__item">','<div class="tau-avatar <%=user.isActive?"":"tau-avatar-not-active"%>">','<img src="<%= user.avatarUri %>20" <% if (!this.settings.isDesignMode) { %>title="<%! _.trim(user.fullName) || user.email %>"<% } %>>',"</div>","</div>","<% }%>"],sampleData:n,listSettings:{title:'<%= _.map(fn.getPeopleOrdered(this.data), fn.getUserText).join("&#10;") %>'}},[{id:"people_icons_project",types:[e.PROJECT],model:"users:projectMembers.Select({user.avatarUri,user.fullName,user.email,user.isActive})"},{id:"people_icons_team",types:[e.TEAM],model:"users:teamMembers.Select({user.avatarUri,user.fullName,user.email,user.isActive})"}]),a.pushClones(S,{classId:"tau-board-unit_type_projects-counter",hideIf:function(t){return!t.projectsCount},name:"Projects",template:['<div class="tau-board-unit__value"><%!this.data.projectsCount%></div>'],sampleData:{projectsCount:24}},[{id:"projects_badge_team",types:[e.TEAM],model:"projectsCount:teamProjects.Where(project.IsActive == true).Count()",sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST]},{id:"projects_badge_user",types:[e.USER],model:"projectsCount:projectMembers.Where(project.IsActive == true).Count()",sizes:[s.S,s.M,s.L,s.XL,s.LIST]}]),t.each(S,function(t){t.category="collection",t.lazy=!0}),S});
define('tau/models/board.customize.units/board.customize.units.visualization',["Underscore","tau/models/board.customize.units/const.entity.types.names","tau/models/board.customize.units/const.card.sizes","tau/models/board.customize.units/board.customize.units.base"],function(s,e,t,i){var a=[{id:"openClosed",lazy:!0,classId:"tau-board-unit_type_stories-bugs-sparklines",name:"User Stories and Bugs sparklines.",types:[e.TEAM,e.PROJECT],sizes:[t.M,t.L,t.XL],sections:2,template:['<div <%if (!this.settings.isDesignMode) { %>title="User Stories sparkline provides an overview of progress over the last 16 weeks. Top: done user stories per week. Bottom: added user stories per week."<%}%> class="tau-board-unit_type_stories-bugs-sparklines__us-chart">',"<%if (this.settings.isDesignMode) { %>",'   <img src="<%=this.data.usUrl%>">',"<% } else { %>","   <svg class=\"tau-sparkline i-role-sparkline\" data-source='<%= JSON.stringify(this.data.sparklines.userStories) %>' />","<%}%>","</div>",'<div <%if (!this.settings.isDesignMode) { %>title="Bugs sparkline provides an overview of progress over the last 16 weeks. Top: closed bugs per week. Bottom: added bugs per week."<%}%> class="tau-board-unit_type_stories-bugs-sparklines__bugs-chart">',"<%if (this.settings.isDesignMode) { %>",'   <img src="<%=this.data.bugUrl%>">',"<% } else { %>","   <svg class=\"tau-sparkline tau-sparkline-bugs i-role-sparkline\" data-source='<%= JSON.stringify(this.data.sparklines.bugs) %>' />","<%}%>","</div>"],sampleData:{id:"visualization",bugUrl:i.url("/Javascript/tau/css/images/icons/bug-chart.png"),usUrl:i.url("/Javascript/tau/css/images/icons/us-chart.png")},model:"{ userStories.Sparkline(16) AS userStories, bugs.Sparkline(16) AS bugs } as sparklines"},{id:"burndownlink",classId:"tau-board-unit_type_burndownlink",name:"Burn down link",header:"Burn Down",types:[e.ITERATION,e.TEAM_ITERATION,e.RELEASE],sizes:[t.S,t.M,t.L,t.XL,t.LIST],template:['<span class="tau-board-unit_type_burndown-trigger__control tau-label__burnDown" data-entity-id="<%= this.data.id %>" data-entity-type="<%= this.data.entityType.toLowerCase() %>"></span>'],sampleData:{id:15,entityType:"release"},model:"id, entityType.Name as entityType"}];return s.each(a,function(s){s.category="visualization"}),a});
define('tau/services/customize/templateRegistrators/templateRegistrator.functions',["Underscore"],function(n){return{getDataAttributes:function(t){var r="";return t&&(r=n.map(t,function(n,r){return"data-"+r+'="'+t[r]+'"'}).join(" ")),r}}});
define('tau/services/customize/templateRegistrators/cardTemplateRegistrator',["jQuery","Underscore","tau/core/class","tau/core/templates-factory","tau/services/customize/templateRegistrators/templateRegistrator.functions"],function(t,e,a,n,s){return a.extend({registerUnit:function(t){var a={name:"unit."+t.id,engine:"jqote2",customFunctions:e.extend({createClassName:function(a){var n=["i-role-card-content-"+t.id,this.unitClass(a),e.isFunction(t.classId)?t.classId(a.data):t.classId];return n.join(" ")},_hideIf:function(t){return!t.data||this.hideIf(t.data)}},t.template.customFunctions),markup:e.flatten(["<% if (!fn._hideIf(this)) { %>",'<div class="<%= fn.createClassName(this) %>" ',"<%= fn.unitData(this) %> ",s.getDataAttributes(t.data),">",t.template.markup||t.template,"</div>","<% } %>"])};return n.register(a),{card:a.name}}})});
define('tau/models/board.customize.units/board.customize.units.settings.default.generated',[],function(){return{feature:{xs:[[{id:"entity_name_small_sizes",alignment:"base"}]],s:[[{id:"entity_name_small_sizes",alignment:"base"}],[{id:"assignments_big_2",alignment:"base"},{id:"effort_total",alignment:"alt"}]],m:[[{id:"general_entity_id",alignment:"base"},{id:"impediments",alignment:"alt"},{id:"tags_long",alignment:"base"}],[{id:"entity_name_small_sizes",alignment:"base"}],[{id:"assignments_big_2",alignment:"base"},{id:"effort_total",alignment:"base"},{id:"us_count",alignment:"alt"}]],l:[[{id:"general_entity_id",alignment:"base"},{id:"project_abbr",alignment:"alt"},{id:"tags_long",alignment:"base"}],[{id:"entity_name_3lines",alignment:"base"}],null,[{id:"assignments_big_2",alignment:"base"},{id:"effort_total",alignment:"base"},{id:"dependencies",alignment:"alt"},{id:"us_opentotal",alignment:"alt"}],[{id:"attachments",alignment:"base"},{id:"team",alignment:"alt"},{id:"release_long",alignment:"base"}]],xl:[[{id:"entity_name_1line",alignment:"base"}]],list:[[{id:"entity_name_1line",alignment:"base"},{id:"general_entity_id",alignment:"base"},{id:"effort_total",alignment:"base"},{id:"assigned_users",alignment:"base"},{id:"state_short",alignment:"base"},{id:"release_short",alignment:"base"},{id:"business_value_short",alignment:"base"},{id:"team_name_short",alignment:"base"},{id:"project_abbr",alignment:"base"},{id:"tags_short",alignment:"base"}]]},userstory:{xs:[[{id:"entity_name_small_sizes",alignment:"base"}]],s:[[{id:"entity_name_small_sizes",alignment:"base"}],[{id:"assignments_big_2",alignment:"base"},{id:"effort_total",alignment:"alt"}]],m:[[{id:"general_entity_id",alignment:"base"},{id:"impediments",alignment:"alt"},{id:"tags_long",alignment:"base"}],[{id:"entity_name_small_sizes",alignment:"base"}],[{id:"assignments_big_2",alignment:"base"},{id:"effort_total",alignment:"base"},{id:"story_bugs_badge",alignment:"alt"},{id:"tasks_badge",alignment:"alt"}]],l:[[{id:"general_entity_id",alignment:"base"},{id:"project_abbr",alignment:"alt"},{id:"tags_long",alignment:"base"}],[{id:"entity_name_3lines",alignment:"base"}],null,[{id:"assignments_big_2",alignment:"base"},{id:"effort_total",alignment:"base"},{id:"dependencies",alignment:"alt"},{id:"story_bugs_badge",alignment:"alt"},{id:"tasks_badge",alignment:"alt"}],[{id:"attachments",alignment:"base"},{id:"team",alignment:"alt"},{id:"feature_long",alignment:"base"}]],xl:[[{id:"entity_name_1line",alignment:"base"}]],list:[[{id:"entity_name_1line",alignment:"base"},{id:"general_entity_id",alignment:"base"},{id:"effort_total",alignment:"base"},{id:"assigned_users",alignment:"base"},{id:"state_short",alignment:"base"},{id:"release_short",alignment:"base"},{id:"iteration_short",alignment:"base"},{id:"business_value_short",alignment:"base"},{id:"team_name_short",alignment:"base"},{id:"team_iteration_short",alignment:"base"},{id:"project_abbr",alignment:"base"},{id:"tags_short",alignment:"base"}]]},task:{xs:[[{id:"entity_name_small_sizes",alignment:"base"}]],s:[[{id:"entity_name_small_sizes",alignment:"base"}],[{id:"assignments_big_2",alignment:"base"},{id:"effort_total",alignment:"alt"}]],m:[[{id:"general_entity_id",alignment:"base"},{id:"impediments",alignment:"alt"},{id:"tags_long",alignment:"base"}],[{id:"entity_name_small_sizes",alignment:"base"}],[{id:"assignments_big_2",alignment:"base"},{id:"effort_total",alignment:"base"},{id:"userstory_id",alignment:"alt"}]],l:[[{id:"general_entity_id",alignment:"base"},{id:"project_abbr",alignment:"alt"},{id:"tags_long",alignment:"base"}],[{id:"entity_name_3lines",alignment:"base"}],null,[{id:"assigned_users",alignment:"base"},{id:"effort_total",alignment:"base"},{id:"dependencies",alignment:"alt"}],[{id:"attachments",alignment:"base"},{id:"team",alignment:"alt"},{id:"us_name_long",alignment:"base"}]],xl:[[{id:"entity_name_1line",alignment:"base"}]],list:[[{id:"entity_name_1line",alignment:"base"},{id:"general_entity_id",alignment:"base"},{id:"effort_total",alignment:"base"},{id:"assigned_users",alignment:"base"},{id:"state_short",alignment:"base"},{id:"us_name_short",alignment:"base"},{id:"project_abbr",alignment:"base"},{id:"tags_short",alignment:"base"}]]},bug:{xs:[[{id:"entity_name_small_sizes",alignment:"base"}]],s:[[{id:"entity_name_small_sizes",alignment:"base"}],[{id:"assignments_big_2",alignment:"base"},{id:"effort_total",alignment:"alt"}]],m:[[{id:"general_entity_id",alignment:"base"},{id:"impediments",alignment:"alt"},{id:"tags_long",alignment:"base"}],[{id:"entity_name_small_sizes",alignment:"base"}],[{id:"assigned_users",alignment:"base"},{id:"effort_total",alignment:"base"}]],l:[[{id:"general_entity_id",alignment:"base"},{id:"project_abbr",alignment:"alt"},{id:"tags_long",alignment:"base"}],[{id:"entity_name_3lines",alignment:"base"}],null,[{id:"assignments_big_2",alignment:"base"},{id:"effort_total",alignment:"base"},{id:"dependencies",alignment:"alt"},{id:"userstory_id",alignment:"alt"}],[{id:"attachments",alignment:"base"},{id:"team",alignment:"alt"},{id:"severity_long",alignment:"base"}]],xl:[[{id:"entity_name_1line",alignment:"base"}]],list:[[{id:"entity_name_1line",alignment:"base"},{id:"general_entity_id",alignment:"base"},{id:"effort_total",alignment:"base"},{id:"assigned_users",alignment:"base"},{id:"state_short",alignment:"base"},{id:"us_name_short",alignment:"base"},{id:"release_short",alignment:"base"},{id:"iteration_short",alignment:"base"},{id:"business_value_short",alignment:"base"},{id:"team_name_short",alignment:"base"},{id:"team_iteration_short",alignment:"base"},{id:"project_abbr",alignment:"base"},{id:"tags_short",alignment:"base"}]]},request:{xs:[[{id:"entity_name_small_sizes",alignment:"base"}]],s:[[{id:"entity_name_small_sizes",alignment:"base"}],[{id:"requests_open",alignment:"base"},{id:"request_is_replied",alignment:"base"},{id:"request_question",alignment:"alt"}]],m:[[{id:"general_entity_id",alignment:"base"},{id:"request_question",alignment:"alt"},{id:"tags_long",alignment:"base"}],[{id:"entity_name_small_sizes",alignment:"base"}],[{id:"requests_open",alignment:"base"},{id:"request_is_replied",alignment:"base"},{id:"create_date",alignment:"alt"}]],l:[[{id:"general_entity_id",alignment:"base"},{id:"project_abbr",alignment:"alt"},{id:"tags_long",alignment:"base"}],[{id:"entity_name_3lines",alignment:"base"}],null,[{id:"requests_open",alignment:"base"},{id:"create_date",alignment:"base"},{id:"dependencies",alignment:"alt"}],[{id:"request_is_replied",alignment:"base"},{id:"attachments",alignment:"base"},{id:"comments_count",alignment:"base"},{id:"team",alignment:"alt"},{id:"assignments_big_2",alignment:"alt"}]],xl:[[{id:"entity_name_1line",alignment:"base"}]],list:[[{id:"entity_name_1line",alignment:"base"},{id:"general_entity_id",alignment:"base"},{id:"state_short",alignment:"base"},{id:"project_abbr",alignment:"base"},{id:"create_date",alignment:"base"},{id:"assigned_users",alignment:"base"},{id:"last_comment_date",alignment:"base"},{id:"last_commented_user_icon",alignment:"base"},{id:"request_question",alignment:"base"},{id:"request_private",alignment:"base"},{id:"owner",alignment:"base"}]]},testcase:{xs:[[{id:"entity_name_small_sizes",alignment:"base"}]],s:[[{id:"entity_name_small_sizes",alignment:"base"}],[{id:"tc_last_status",alignment:"base"},{id:"owner",alignment:"alt"}]],m:[[{id:"general_entity_id",alignment:"base"},{id:"tags_long",alignment:"base"}],[{id:"entity_name_small_sizes",alignment:"base"}],[{id:"tc_last_status",alignment:"base"},{id:"create_date",alignment:"base"},{id:"owner",alignment:"alt"}]],l:[[{id:"general_entity_id",alignment:"base"},{id:"project_abbr",alignment:"alt"},{id:"tags_long",alignment:"base"}],[{id:"entity_name_3lines",alignment:"base"}],null,[{id:"tc_last_status",alignment:"base"},{id:"tc_last_run_date",alignment:"base"},{id:"us_name_short",alignment:"base"},{id:"owner",alignment:"alt"}],[{id:"tc_failure_message_long",alignment:"base"}]],xl:[[{id:"entity_name_1line",alignment:"base"}]],list:[[{id:"entity_name_1line",alignment:"base"},{id:"general_entity_id",alignment:"base"},{id:"project_abbr",alignment:"base"},{id:"tc_last_status",alignment:"base"},{id:"us_name_short",alignment:"base"},{id:"tags_short",alignment:"base"}]]},impediment:{xs:[[{id:"entity_name_small_sizes",alignment:"base"}]],s:[[{id:"entity_name_small_sizes",alignment:"base"}],[{id:"responsible_person",alignment:"base"},{id:"owner",alignment:"alt"}]],m:[[{id:"general_entity_id",alignment:"base"},{id:"request_private",alignment:"alt"},{id:"tags_long",alignment:"base"}],[{id:"entity_name_small_sizes",alignment:"base"}],[{id:"responsible_person",alignment:"base"},{id:"related_entity_long",alignment:"alt"}]],l:[[{id:"general_entity_id",alignment:"base"},{id:"project_abbr",alignment:"alt"},{id:"request_private",alignment:"alt"},{id:"tags_long",alignment:"base"}],[{id:"entity_name_3lines",alignment:"base"}],null,[{id:"responsible_person",alignment:"base"},{id:"owner",alignment:"alt"},{id:"related_entity_long",alignment:"alt"}],[{id:"dependencies",alignment:"base"},{id:"business_value_long",alignment:"base"}]],xl:[[{id:"entity_name_1line",alignment:"base"}]],list:[[{id:"entity_name_1line",alignment:"base"},{id:"general_entity_id",alignment:"base"},{id:"state_short",alignment:"base"},{id:"related_entity_short",alignment:"base"},{id:"responsible_person",alignment:"base"},{id:"request_private",alignment:"base"},{id:"owner",alignment:"base"},{id:"project_abbr",alignment:"base"},{id:"business_value_short",alignment:"base"},{id:"tags_short",alignment:"base"}]]},user:{xs:[[{id:"user_avatar",alignment:"base"}]],s:[[{id:"user_big_details",alignment:"base"}],null],m:[[{id:"user_big_details",alignment:"base"}],null,[{id:"projects_badge_user",alignment:"base"},{id:"teams_badge",alignment:"base"},{id:"allocation",alignment:"alt"}]],l:[[{id:"user_big_details",alignment:"base"}],null,[{id:"allocation",alignment:"base"},{id:"projects_badge_user",alignment:"base"},{id:"teams_badge",alignment:"base"},{id:"user_is_active",alignment:"alt"},{id:"bugs_badge",alignment:"alt"},{id:"us_count",alignment:"alt"}]],xl:[[{id:"user_avatar",alignment:"base"},{id:"user_name",alignment:"base"},{id:"user_email_short",alignment:"alt"}],[{id:"teams_user",alignment:"base"},{id:"project_abbrs_user",alignment:"base"},{id:"bugs_badge",alignment:"alt"},{id:"us_count",alignment:"alt"}]],list:[[{id:"user_name",alignment:"base"},{id:"user_entity_id",alignment:"base"},{id:"user_avatar",alignment:"base"},{id:"user_email_short",alignment:"base"},{id:"user_is_active",alignment:"base"},{id:"user_observer",alignment:"base"},{id:"user_admin",alignment:"base"},{id:"role_short",alignment:"base"},{id:"teams_user",alignment:"base"},{id:"project_abbrs_user",alignment:"base"}]]},team:{xs:[[{id:"team_team",alignment:"base"},{id:"team_project_name_long",alignment:"base"}]],s:[[{id:"team_project_name_long",alignment:"base"}],[{id:"team_team",alignment:"base"},{id:"project_abbrs_team",alignment:"alt"}]],m:[[{id:"team_team",alignment:"base"},{id:"project_abbrs_team",alignment:"alt"},{id:"team_project_name_long",alignment:"base"}],[{id:"people_icons_team",alignment:"base"}],[{id:"feature_badge",alignment:"base"},{id:"us_count",alignment:"base"},{id:"bugs_badge",alignment:"base"},{id:"owner",alignment:"alt"}]],l:[[{id:"team_team",alignment:"base"},{id:"project_abbrs_team",alignment:"alt"},{id:"team_project_name_long",alignment:"base"}],[{id:"people_icons_team",alignment:"base"}],[{id:"feature_badge",alignment:"base"},{id:"us_count",alignment:"base"},{id:"bugs_badge",alignment:"base"},{id:"owner",alignment:"alt"}],[{id:"openClosed",alignment:"base"}],null],xl:[[{id:"general_entity_id",alignment:"base"},{id:"team_team",alignment:"base"},{id:"project_abbrs_team",alignment:"alt"},{id:"team_project_name_short",alignment:"base"}],[{id:"people_icons_team",alignment:"base"}]],list:[[{id:"team_project_name_long",alignment:"base"},{id:"general_entity_id",alignment:"base"},{id:"team_team",alignment:"base"},{id:"people_icons_team",alignment:"base"},{id:"project_abbrs_team",alignment:"base"}]]},project:{xs:[[{id:"project_project_abbr",alignment:"base"},{id:"team_project_name_long",alignment:"base"}]],s:[[{id:"team_project_name_long",alignment:"base"}],[{id:"project_project_icon",alignment:"base"},{id:"teams_project",alignment:"alt"}]],m:[[{id:"project_project_icon",alignment:"base"},{id:"teams_project",alignment:"alt"},{id:"team_project_name_long",alignment:"base"}],[{id:"people_icons_project",alignment:"base"}],[{id:"feature_badge",alignment:"base"},{id:"us_count",alignment:"base"},{id:"bugs_badge",alignment:"base"},{id:"owner",alignment:"alt"}]],l:[[{id:"project_project_icon",alignment:"base"},{id:"teams_project",alignment:"alt"},{id:"team_project_name_long",alignment:"base"}],[{id:"people_icons_project",alignment:"base"}],[{id:"feature_badge",alignment:"base"},{id:"us_count",alignment:"base"},{id:"bugs_badge",alignment:"base"},{id:"owner",alignment:"alt"}],[{id:"openClosed",alignment:"base"}],null],xl:[[{id:"general_entity_id",alignment:"base"},{id:"project_project_icon",alignment:"base"},{id:"teams_project",alignment:"alt"},{id:"team_project_name_long",alignment:"base"}],[{id:"people_icons_project",alignment:"base"}]],list:[[{id:"team_project_name_long",alignment:"base"},{id:"general_entity_id",alignment:"base"},{id:"project_project_abbr",alignment:"base"},{id:"process_short",alignment:"base"},{id:"long_dates",alignment:"base"},{id:"owner",alignment:"base"},{id:"project_is_active",alignment:"base"}]]},iteration:{xs:[[{id:"entity_name_small_sizes",alignment:"base"}]],s:[[{id:"entity_name_small_sizes",alignment:"base"}],[{id:"dates",alignment:"base"},{id:"burndownlink",alignment:"alt"}]],m:[[{id:"general_entity_id",alignment:"base"},{id:"dates",alignment:"base"},{id:"burndownlink",alignment:"alt"}],[{id:"entity_name_1line",alignment:"base"}],[{id:"progress_long_release_iteration",alignment:"base"},{id:"effort_total_collection",alignment:"base"},{id:"bugs_badge",alignment:"alt"},{id:"us_count",alignment:"alt"}]],l:[[{id:"general_entity_id",alignment:"base"},{id:"dates",alignment:"base"},{id:"burndownlink",alignment:"alt"}],[{id:"entity_name_1line",alignment:"base"}],[{id:"progress_long_release_iteration",alignment:"base"},{id:"effort_spent_total_collection",alignment:"base"},{id:"bugs",alignment:"alt"},{id:"us_opentotal",alignment:"alt"}],[{id:"project_abbr",alignment:"alt"},{id:"release_long",alignment:"base"}]],xl:[[{id:"entity_name_1line",alignment:"base"}]],list:[[{id:"entity_name_1line",alignment:"base"},{id:"general_entity_id",alignment:"base"},{id:"dates",alignment:"base"},{id:"effort_spent_total_collection",alignment:"base"},{id:"release_short",alignment:"base"},{id:"project_abbr",alignment:"base"}]]},teamiteration:{xs:[[{id:"entity_name_small_sizes",alignment:"base"}]],s:[[{id:"entity_name_small_sizes",alignment:"base"}],[{id:"dates",alignment:"base"},{id:"burndownlink",alignment:"alt"}]],m:[[{id:"general_entity_id",alignment:"base"},{id:"dates",alignment:"base"},{id:"burndownlink",alignment:"alt"}],[{id:"entity_name_1line",alignment:"base"}],[{id:"progress_long_release_iteration",alignment:"base"},{id:"effort_total_collection",alignment:"base"},{id:"bugs_badge",alignment:"alt"},{id:"us_count",alignment:"alt"}]],l:[[{id:"general_entity_id",alignment:"base"},{id:"dates",alignment:"base"},{id:"burndownlink",alignment:"alt"}],[{id:"entity_name_1line",alignment:"base"}],[{id:"progress_long_release_iteration",alignment:"base"},{id:"effort_spent_total_collection",alignment:"base"},{id:"bugs",alignment:"alt"},{id:"us_opentotal",alignment:"alt"}],[{id:"team",alignment:"alt"},{id:"team_name_long",alignment:"base"}]],xl:[[{id:"entity_name_1line",alignment:"base"}]],list:[[{id:"entity_name_1line",alignment:"base"},{id:"general_entity_id",alignment:"base"},{id:"dates",alignment:"base"},{id:"effort_spent_total_collection",alignment:"base"},{id:"team_name_short",alignment:"base"}]]},release:{xs:[[{id:"entity_name_small_sizes",alignment:"base"}]],s:[[{id:"entity_name_small_sizes",alignment:"base"}],[{id:"dates",alignment:"base"},{id:"burndownlink",alignment:"alt"}]],m:[[{id:"general_entity_id",alignment:"base"},{id:"dates",alignment:"base"},{id:"burndownlink",alignment:"alt"}],[{id:"entity_name_1line",alignment:"base"}],[{id:"progress_long_release_iteration",alignment:"base"},{id:"effort_total_collection",alignment:"base"},{id:"feature_badge",alignment:"alt"},{id:"bugs_badge",alignment:"alt"},{id:"us_count",alignment:"alt"}]],l:[[{id:"general_entity_id",alignment:"base"},{id:"dates",alignment:"base"},{id:"burndownlink",alignment:"alt"}],[{id:"entity_name_1line",alignment:"base"}],[{id:"progress_long_release_iteration",alignment:"base"},{id:"effort_spent_total_collection",alignment:"base"},{id:"feature_icon",alignment:"alt"},{id:"bugs",alignment:"alt"},{id:"us_opentotal",alignment:"alt"}],[{id:"project_long",alignment:"base"}]],xl:[[{id:"entity_name_1line",alignment:"base"}]],list:[[{id:"entity_name_1line",alignment:"base"},{id:"general_entity_id",alignment:"base"},{id:"dates",alignment:"base"},{id:"effort_spent_total_collection",alignment:"base"},{id:"project_abbr",alignment:"base"}]]},testplan:{xs:[[{id:"entity_name_small_sizes",alignment:"base"}]],s:[[{id:"entity_name_small_sizes",alignment:"base"}],[{id:"test_cases",alignment:"base"}]],m:[[{id:"general_entity_id",alignment:"base"},{id:"tags_long",alignment:"base"}],[{id:"entity_name_small_sizes",alignment:"base"}],[{id:"test_run_short",alignment:"base"},{id:"test_case_icon",alignment:"base"},{id:"test_cases",alignment:"alt"}]],l:[[{id:"general_entity_id",alignment:"base"},{id:"project_abbr",alignment:"alt"},{id:"tags_long",alignment:"base"}],[{id:"entity_name_3lines",alignment:"base"}],null,[{id:"test_run_short",alignment:"base"},{id:"test_case_icon",alignment:"base"},{id:"test_cases",alignment:"alt"}],[{id:"owner",alignment:"base"}]],xl:[[{id:"entity_name_1line",alignment:"base"}]],list:[[{id:"entity_name_1line",alignment:"base"},{id:"general_entity_id",alignment:"base"},{id:"project_abbr",alignment:"base"},{id:"test_case_icon",alignment:"base"},{id:"tags_short",alignment:"base"}]]},testplanrun:{xs:[[{id:"entity_name_small_sizes",alignment:"base"}]],s:[[{id:"entity_name_small_sizes",alignment:"base"}],[{id:"test_cases",alignment:"base"}]],m:[[{id:"general_entity_id",alignment:"base"},{id:"tags_long",alignment:"base"}],[{id:"entity_name_small_sizes",alignment:"base"}],[{id:"assignments_big_2",alignment:"base"},{id:"test_cases",alignment:"alt"}]],l:[[{id:"general_entity_id",alignment:"base"},{id:"project_abbr",alignment:"alt"},{id:"tags_long",alignment:"base"}],[{id:"entity_name_3lines",alignment:"base"}],null,[{id:"assignments_big_2",alignment:"base"},{id:"dependencies",alignment:"alt"},{id:"test_cases",alignment:"alt"}],[{id:"team",alignment:"alt"},{id:"test_plan_long",alignment:"base"}]],xl:[[{id:"entity_name_1line",alignment:"base"}]],list:[[{id:"entity_name_1line",alignment:"base"},{id:"general_entity_id",alignment:"base"},{id:"project_abbr",alignment:"base"},{id:"state_short",alignment:"base"},{id:"test_plan_short",alignment:"base"},{id:"build_short",alignment:"base"},{id:"iteration_short",alignment:"base"},{id:"release_short",alignment:"base"},{id:"tags_short",alignment:"base"}]]},build:{xs:[[{id:"entity_name_small_sizes",alignment:"base"}]],s:[[{id:"entity_name_small_sizes",alignment:"base"}],[{id:"build_date",alignment:"base"}]],m:[[{id:"general_entity_id",alignment:"base"},{id:"tags_long",alignment:"base"}],[{id:"entity_name_small_sizes",alignment:"base"}],[{id:"build_date",alignment:"base"},{id:"test_run_badge",alignment:"alt"},{id:"bugs_badge",alignment:"alt"}]],l:[[{id:"general_entity_id",alignment:"base"},{id:"project_abbr",alignment:"alt"},{id:"tags_long",alignment:"base"}],[{id:"entity_name_3lines",alignment:"base"}],null,[{id:"build_date",alignment:"base"},{id:"test_run_short",alignment:"alt"},{id:"bugs",alignment:"alt"}],[{id:"release_id",alignment:"base"},{id:"iteration_id",alignment:"base"}]],xl:[[{id:"entity_name_1line",alignment:"base"}]],list:[[{id:"entity_name_1line",alignment:"base"},{id:"general_entity_id",alignment:"base"},{id:"build_date",alignment:"base"},{id:"iteration_short",alignment:"base"},{id:"release_short",alignment:"base"},{id:"project_abbr",alignment:"base"},{id:"tags_short",alignment:"base"}]]},projectmember:{xs:[[{id:"user_avatar",alignment:"base"}]],s:[[{id:"pm_big_details",alignment:"base"}],null],m:[[{id:"pm_big_details",alignment:"base"}],null,[{id:"pm_dates",alignment:"base"},{id:"percent",alignment:"base"}]],l:[[{id:"pm_big_details",alignment:"base"}],null,[{id:"pm_dates",alignment:"base"},{id:"percent",alignment:"base"}]],xl:[[{id:"user_avatar",alignment:"base"},{id:"user_name",alignment:"base"},{id:"percent",alignment:"base"},{id:"role_short",alignment:"base"}],[{id:"pm_dates",alignment:"base"},{id:"project_abbr",alignment:"base"}]],list:[[{id:"user_name",alignment:"base"},{id:"user_avatar",alignment:"base"},{id:"project_short",alignment:"base"},{id:"percent",alignment:"base"},{id:"role_short",alignment:"base"},{id:"pm_dates",alignment:"base"}]]},teammembership:{xs:[[{id:"user_avatar",alignment:"base"}]],s:[[{id:"tm_big_details",alignment:"base"}],null],m:[[{id:"tm_big_details",alignment:"base"}],null,[{id:"pm_dates",alignment:"base"},{id:"percent",alignment:"base"},{id:"team_name_short",alignment:"alt"}]],l:[[{id:"tm_big_details",alignment:"base"}],null,[{id:"pm_dates",alignment:"base"},{id:"percent",alignment:"base"},{id:"team_name_short",alignment:"alt"}],[{id:"activity",alignment:"base"}],null],xl:[[{id:"user_avatar",alignment:"base"},{id:"user_name",alignment:"base"},{id:"percent",alignment:"base"},{id:"role_short",alignment:"base"},{id:"pm_dates",alignment:"base"},{id:"team",alignment:"base"}]],list:[[{id:"user_name",alignment:"base"},{id:"general_entity_id",alignment:"base"},{id:"user_avatar",alignment:"base"},{id:"percent",alignment:"base"},{id:"role_short",alignment:"base"},{id:"pm_dates",alignment:"base"},{id:"team",alignment:"base"}]]}}});
define('tau/models/board.customize.units/board.customize.units.settings.default.additional',[],function(){return{process:{list:[[{id:"name_unit"}]]},entitystate:{list:[[{id:"name_unit"}]]},enddate:{list:[[{id:"name_unit"}]]},datetime:{list:[[{id:"name_unit"}]]},createdate:{list:[[{id:"name_unit"}]]},startdate:{list:[[{id:"name_unit"}]]},tag:{list:[[{id:"name_unit"}]]},assigneduser:{list:[[{id:"user_name",alignment:"base"},{id:"user_entity_id",alignment:"base"},{id:"user_email_long",alignment:"base"},{id:"user_is_active",alignment:"base"},{id:"user_observer",alignment:"base"},{id:"user_admin",alignment:"base"},{id:"role_long",alignment:"base"},{id:"teams_user",alignment:"base"},{id:"project_abbrs_user",alignment:"base"},{id:"user_avatar",alignment:"base"}]]},priority:{list:[[{id:"name_unit"}]]},effort:{list:[[{id:"name_unit"}]]},severity:{list:[[{id:"name_unit"}]]},source:{list:[[{id:"name_unit"}]]},requestsourceenum:{list:[[{id:"name_unit"}]]},requesttype:{list:[[{id:"name_unit"}]]},inboundrelations:{list:[[{id:"entity_name_1line",alignment:"base"},{id:"general_entity_id",alignment:"base"},{id:"project_abbr",alignment:"base"}]]},outboundrelations:{list:[[{id:"entity_name_1line",alignment:"base"},{id:"general_entity_id",alignment:"base"},{id:"project_abbr",alignment:"base"}]]},role:{list:[[{id:"name_unit"}]]}}});
define('tau/models/board.customize.units/board.customize.units.settings.default',["Underscore","tau/models/board.customize.units/const.entity.types.names","tau/models/board.customize.units/const.card.sizes","tau/models/board.customize.units/board.customize.units.settings.default.generated","tau/models/board.customize.units/board.customize.units.settings.default.additional"],function(t,e,s,n,o){return{get:function(t,e){return n[e]&&n[e][t]||o[e]&&o[e][t]||[]}}});
define('tau/ui/templates/board.plus/customized/ui.template.boardplus.card-fake.customized',["Underscore","tau/core/templates-factory"],function(e,i){var t={name:"boardplus.card-fake.customized",engine:"jqote2",markup:['<div class="tau-ui-size-<%=this.size%>" style="visibility: hidden">','<div class="i-role-card tau-card-v2 tau-card-v2_type_<%=this.type%>">',"<%for(var i = 0;i<this.countSections;i++) {%>",'<div class="tau-card-v2__section"></div>',"<%}%>","</div>","</div>"],dependencies:[]};return i.register(t)});
define('tau/ui/extensions/board.plus/ui.board.plus.utils',["Underscore","tau/ui/extensions/board.plus/ui.board.plus.utils","tau/models/board.customize.units/board.customize.units.settings.default","tau/ui/templates/board.plus/customized/ui.template.boardplus.card-fake.customized","tau/models/board.customize.units/const.card.sizes"],function(t,e,n,r,a){var i=["feature","userstory","task","bug","request","testcase","testcaserun","testplan","testplanrun","impediment","user","team","project","release","iteration","teamiteration","build","projectmember"],s={},u=function(e){return t.trim(e)},o={};return{esc:u,getDomNodeByIdFast:function(t,e){return window.document.getElementById(e)},generateId:function(t){var e=[];return t.hasOwnProperty("x")&&(e.push("x"),e.push(t.x),e.push("-")),t.hasOwnProperty("y")&&(e.push("y"),e.push(t.y),e.push("-")),u(e.join(""))},generateElementData:function(e){var n=[];return t.forEach(e,function(e,r){t.isUndefined(e)||n.push("data-"+r.toLowerCase()+'="'+t.escape(e)+'"')}),n.join(" ")},getCardIds:function(t){return o[t.id]||[]},getCardId:function(t){return o[t.id]||[]},getLatestCardId:function(t){var e=o[t];return e[e.length-1]},resetCardIds:function(){o={}},getCardSeed:function(t){return t.type.toLowerCase()+"-"+t.id},generateCardId:function(t){var e=o[t.id]=o[t.id]||[],n=this.getCardSeed(t)+"-"+e.length;return e.push(n),n},dimension:function(t,e){var n=t.attr("id");s[n]={};var r=s[n],a={x:e.attr("data-x"),y:e.attr("data-y")},i=e.attr("role");r.all||(r.all=t.find(".i-role-"+i));var u=function(){return!1};a.x&&(u=function(){return this.getAttribute("data-x")==a.x}),a.y&&(u=function(){return this.getAttribute("data-y")==a.y});var o=e.attr("id");return r[o]||(r[o]=r.all.filter(u)),r[o]},isHidden:function(t){return t.attr("data-is-hidden")||!1},isSupportedCardForView:function(e){var n=t.isString(e)?e:e.entityType;return t.include(i,n.toLowerCase())},convertCellAxisData:function(e){var n,r=e.dynamic&&e.dynamic.items&&e.dynamic.items.length?e.dynamic.items[0]:null;return r?(n={id:r.id,name:this._getCellAxisName(r),itemData:this._getItemDataTypeSpecificAugmented(r),entity:{id:this._getEntityId(r),type:this._getEntityType(r)}},n.isEntity=!(!n.entity.id||!n.entity.type),n.isSupportView=n.isEntity&&this.isSupportedCardForView({entityType:n.entity.type})):n={id:null,name:"",itemData:{},entity:{id:null,type:null},isEntity:!1,isSupportView:!1},t.extend(e,n)},getOperationLocation:function(t){var e=(t.items[0].location||"card").toLowerCase(),n=e;return"card"!==e&&(n=e.charAt(0)),n},isCardReBuildOperation:function(e){var n=this.getOperationLocation(e);return t.contains(["updated","added","cascade"],e.name)&&"card"===n},getClassForCustomizeSection:function(t){var e="";return t.forEach(function(t){2==t.unit.sections?e="tau-card-v2__section_double":3==t.unit.sections&&(e="tau-card-v2__section_triple")}),e},orderListUnits:function(e){return t.sortBy(e,function(t){return-t.rank})},getListKeyByTypes:function(t){return t=t||[],"list_"+t.join("_")},getCardRenderData:function(t,e,n){return e?{dataItem:t,layout:e,configurator:n}:t},getCardSize:t.memoize(function(t,e,i){var s=i||0,u=n.get(e,t).length,o=r.get().bind({},{size:e,countSections:u,type:t});o.appendTo("body");var d,c=o.find(".i-role-card");d=e===a.XL?parseInt(c.css("minWidth"),10):c.outerWidth();var m={width:Math.ceil(d+s),height:Math.ceil(c.outerHeight()+2*s)};return o.remove(),m},function(t,e,n){return t+e+n}),_getItemDataTypeSpecificAugmented:function(e){var n=e.data;return"team"==e.type.toLowerCase()&&(n.users=n.users||[],n.users=t.map(n.users,function(e){return t.extend(e,{name:t.trim(t.asString(e.firstName)+" "+t.asString(e.lastName))||t.asString(e.email),avatarUri:e.avatarUri})})),n},_getCellAxisName:function(e){var n=e.name||"",r=e.data;return r&&(r.name?n=r.name:t.isArray(r.names)?n=r.names.join(", "):("user"==r.type.toLowerCase()||r.hasOwnProperty("firstName")&&r.hasOwnProperty("lastName"))&&(n=t.trim(t.asString(r.firstName)+" "+t.asString(r.lastName))||t.asString(r.email))),n},_getEntityId:function(t){return t.data&&t.data.id?t.data.id:null},_getEntityType:function(t){return t.data&&t.data.type?t.data.type.toLowerCase():t.type?t.type.toLowerCase():""}}});
define('tau/utils/utils.customFields.list',["Underscore"],function(n){return{getListHeader:function(e){var t=e.lastIndexOf(" custom field");t>0&&(e=e.substring(0,t));var r=n.map(e.split(" "),function(n){return n.length>0?n[0].toUpperCase()+(n.length>1?n.substring(1,n.length):""):n});return r.join(" ")}}});
define('tau/components/board.new.list/views/sortingItem',["Underscore","tau/core/class"],function(t,i){return i.extend({NON_SORTED_CLASS:"tau-unit-non_sorted",ASC_SORTED_CLASS:"tau-unit-asc_sorted",DESC_SORTED_CLASS:"tau-unit-desc_sorted",HEADER_SELECTOR_PART:".tau-list-caption .tau-elems-table-level-",ASC:"asc",DESC:"desc",init:function(t,i){this.nodeCollection=i,this._$el=t,this._direction=this._$el.hasClass(this.ASC_SORTED_CLASS)?this.DESC:this._$el.hasClass(this.DESC_SORTED_CLASS)?null:this.ASC,this._inverseOrder=this._$el.data("inverseSortOrder"),this._field=this._$el.data("sort")},getOrdering:function(){return this._direction?{name:this._getField(),direction:this._direction}:null},_getField:function(){return this._inverseOrder?this._field+" "+(this._direction===this.ASC?this.DESC:this.ASC):this._field}})});
define('tau/services/customize/templateRegistrators/listTemplateRegistrator.functions',["jQuery","Underscore","tau/ui/extensions/board.plus/ui.board.plus.utils","tau/utils/utils.base64hashEncoder","tau/utils/utils.customFields.list","tau/models/board.customize.units/const.sorting.applying","tau/components/board.new.list/views/sortingItem"],function(t,e,i,n,r,s,a){function o(t){return"tau-list-"+t+"-cell"}return{itemFunctions:function(t){return{isApplicable:function(e){return t.isApplicableByType(e.type)},isEditable:function(e){return t.editorConfig?t.editorConfig.isEditable?t.editorConfig.isEditable(e):!0:!1},isEmptyUnit:function(t){return this.hideIf(t.data||{})},isNoValueUnit:function(t){return t.data&&t.data.empty},createCellClassName:function(t){var e=["tau-elems-cell"],i=this.isApplicable(t);return i||e.push("tau-elems-cell_unit-not-applicable"),t.first&&e.push("ui-resizable"),this.isNoValueUnit(t)?e.push("tau-elems-cell-no-value"):i&&this.isEditable(t)&&e.push("tau-elems-cell_unit-editable"),e.join(" ")},canDisplayNameControls:function(t){return t.first},canDisplayOpenDetailsButton:function(t){return!this.isNoValueUnit(t)&&i.isSupportedCardForView(t.type)},createUnitClassName:function(i){var n=[this.unitClass(i),o(i.unit?i.unit.id:t.id),"tau-board-unit_overflow",e.isFunction(t.classId)?t.classId(i.data):t.classId];return n.join(" ").replace(" tau-board-unit_format_max "," ")},LIST_UNIT_TITLE_PREFIX:'<div title="',LIST_UNIT_TITLE_SUFFIX:'"></div>',LIST_UNIT_TITLE_REGEX:/<[^<%>]+(<%[^%>]+%>[^<%>]*)*[^<%>]*>/g,getTitleTemplateName:function(){return"list.unit."+t.id+".title"},createTitleTemplateMarkup:function(){var i=e.complexKey(t,"listSettings.title")||(t.template.markup||t.template).join("").replace(this.LIST_UNIT_TITLE_REGEX,"");return e.flatten([this.LIST_UNIT_TITLE_PREFIX,"<% if (fn.isApplicable(this)) { %>",i,"<% } %>",this.LIST_UNIT_TITLE_SUFFIX])},createTitle:function(t){if(t.first)return"";var i=this.sub(this.getTitleTemplateName(),t).slice(this.LIST_UNIT_TITLE_PREFIX.length,-this.LIST_UNIT_TITLE_SUFFIX.length);return'title="'+e.escape(i).replace(/&amp;#10;/g,"&#10;")+'"'}}},headerFunctions:function(t){return{isResizable:function(t){return!!t.first},createCellClassName:function(t){var e=["tau-elems-cell",o(t.unit.id)];return t.first&&e.push("tau-name-cell"),this.isResizable(t)&&e.push("ui-resizable"),e.join(" ")},createListSettings:function(e){var i=[];return t.listSettings&&t.listSettings.minWidth&&i.push('data-min-width="'+t.listSettings.minWidth+'"'),t.listSettings&&t.listSettings.maxWidth&&i.push('data-max-width="'+t.listSettings.maxWidth+'"'),i.push('data-unit-id="'+e.unit.id+'"'),i.join(" ")},getUnitHeader:function(e){return void 0!==t.header?t.header:"{{name}}"===t.name?r.getListHeader(e.unit.name):t.name},getUnitTitle:function(){return void 0!==t.title?t.title:void 0!==t.header&&t.header.toLowerCase()!==t.name.toLowerCase()?t.name:""},getSortedField:function(e){if("simple"!==t.category&&"one to one"!==t.category)return null;var i=this._tryGetSortFieldFromConfig(e);if("undefined"!=typeof i)return i;var n=this._tryGetSortFieldFromSettings(e);return"undefined"!=typeof n?n:null},sortableTemplateHeader:function(t){var e=this.getSortedField(t);if(e&&t.renderSortingHeaders){var i=a.prototype,n=i.NON_SORTED_CLASS,r=t.ordering?t.ordering.name.replace(" "+i.ASC,"").replace(" "+i.DESC,"").toLowerCase():null;return r&&r===e.field.toLowerCase()&&(n=t.ordering.direction.toLowerCase()===i.ASC?i.ASC_SORTED_CLASS:i.DESC_SORTED_CLASS),'<span class="i-role-card-sorting tau-unit-sorting '+n+'" data-sort="'+e.field+'" data-inverse-sort-order="'+e.inverseOrder+'"><span class="i-role-card-sorting-title tau-unit-sorting-title">'}return""},sortableTemplateFooter:function(t){var e=this.getSortedField(t);return e?"</span></span>":""},_tryGetSortFieldFromConfig:function(i){if(t.sortConfig&&t.sortConfig.allowed===s.NONE)return null;if(i.cardTypes.length>1){if(t.sortConfig&&t.sortConfig.allowed===s.SINGLE)return null;var n=e.flatMap(t.settings,function(t){return t.types}),r=e.map(i.cardTypes,function(t){return t.typeId});if(e.intersection(n,r).length!=r.length)return null}if(t.sortConfig&&t.sortConfig.field)return{field:t.sortConfig.field,inverseOrder:t.sortConfig.inverseOrder||!1};var a=e.any(t.settings,function(t){return t.sortConfig});return a?void 0:t.sampleData.name?{field:"name",inverseOrder:!1}:{field:e.keys(t.sampleData)[0],inverseOrder:!1}},_tryGetSortFieldFromSettings:function(i){if(1!==i.cardTypes.length)return null;var n=e.find(t.settings,function(t){var n=e.map(t.types,function(t){return t.toLowerCase()});return e.contains(n,i.cardTypes[0].typeId.toLowerCase())});return n&&n.sortConfig&&n.sortConfig.field?{field:n.sortConfig.field,inverseOrder:n.sortConfig.inverseOrder||!1}:void 0}}}}});
define('tau/services/customize/templateRegistrators/listTemplateRegistrator',["jQuery","Underscore","tau/core/class","tau/models/board.customize.units/const.card.sizes","tau/core/templates-factory","tau/services/customize/templateRegistrators/templateRegistrator.functions","tau/services/customize/templateRegistrators/listTemplateRegistrator.functions"],function(t,e,i,a,s,n,r){return i.extend({registerItemTitleTemplate:function(t,e){s.register({name:e.getTitleTemplateName(),engine:"jqote2",customFunctions:e,markup:e.createTitleTemplateMarkup()})},createItemTemplate:function(t){var i=e.extend(r.itemFunctions(t),t.template.customFunctions);return this.registerItemTitleTemplate(t,i),{name:"list.unit."+t.id,engine:"jqote2",customFunctions:i,markup:e.flatten(['<div class="<%= fn.createCellClassName(this) %>">',"<% if (fn.isEmptyUnit(this)) { %>",'<div class="tau-elems-cell_unit-empty-text">click to edit</div>',"<% } %>",'<div class="<%! fn.createUnitClassName(this) %>" data-id="<%= this.unit.id %>" ',"<%= fn.createTitle(this) %> ",n.getDataAttributes(t.data),">","<% if (fn.isApplicable(this)) { %>",t.template.markup||t.template,"<% } %>","<% if (fn.canDisplayNameControls(this)) { %>",'<span class="tau-board-unit_name-controls">',"<% if (fn.canDisplayOpenDetailsButton(this)) { %>",'<span title="Click for details" class="tau-board-list-view_details-view-trigger tau-icon tau-icon_name_newwindow"></span>',"<% } %>",'<span class="tau-counter tau-counter-hidden"></span>',"</span>","<% } %>","</div>","</div>"])}},createHeaderTemplate:function(t){return{name:"list.header."+t.id,engine:"jqote2",customFunctions:e.extend(r.headerFunctions(t),t.template.customFunctions),markup:['<div class="<%= fn.createCellClassName(this) %>" <%= fn.createListSettings(this) %> title="<%= fn.getUnitTitle(this) %>">',"<%= fn.cond(fn.isResizable(this), '<div class=\"tau-list-caption-cell__overflow-helper\">') %>","<%= fn.sortableTemplateHeader(this) %>","<% if (this.first) { %>","<% this.cardTypes.forEach(function(item, index) { %>","<% if (index > 0) { %>",'<span class="tau-cap">, </span>',"<% } %>",'<span class="tau-cap tau-<%=item.typeId%>"><%! fn.term(item.typeId, "names") || item.typeName %></span>',"<% }); %>","<% if (this.parentEntityType) { %>",'<span class="tau-cap"> for <%! fn.term(this.parentEntityType, "name") %></span>',"<% }; %>","<%= fn.sortableTemplateFooter(this) %>","<% } else { %>","<%= fn.getUnitHeader(this) %>","<% } %>","<%= fn.sortableTemplateFooter(this) %>","<%= fn.cond(fn.isResizable(this), '</div>') %>","<% if (this.first) { %>",'<span class="tau-list-quick-add-holder i-role-quick-add-holder"></span>',"<% } %>","</div>"]}},registerUnit:function(t){var e=this.createItemTemplate(t),i=this.createHeaderTemplate(t);return s.register(e),s.register(i),{list:e.name,header:i.name}}})});
define('tau/models/board.customize.units/board.customize.units.fn',["Underscore","tau/utils/utils.date"],function(t,e){function n(e,n){return["<a ",e?"":'href="'+t.escape(n.href)+'" ',!e&&n.title?'title="'+t.escape(n.title)+'" ':"",!e&&n.target?'target="'+n.target+'" ':"",'class="tau-board-unit-link tau-board-unit-not-selectable ',n.additionalClasses||"",'" ',n.additionalAttributes||"",">",t.escape(n.text),"</a>"].join("")}return function(i){return{_:t,dateUtils:e,trim:function(t,e){return t&&t.length>e?t.substr(0,e)+"&hellip;":t},formatDate:function(n,i){return t.isString(n)&&(n=e.convertToTimezone(n)),n?e.formatAs(n,i):""},formatDayShort:function(n){return t.isString(n)&&(n=e.convertToTimezone(n)),n?n.getDate():""},precise_round:function(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n},unitClass:function(e){var n=["tau-board-unit"];return t.each(e.settings&&e.settings.classes||[],function(t){n.push("tau-board-unit_"+t)}),i.sections&&n.push("tau-board-unit_format_max"),e.settings&&e.settings.metaData&&e.settings.metaData.alignment&&n.push("tau-board-unit_alignment_"+e.settings.metaData.alignment),n.join(" ")},unitData:function(e){var n=[],a=e.settings&&e.settings.metaData;return a&&(a.title&&n.push('title="'+t.escape(a.title)+'"'),a.id&&n.push('data-unit-id="'+t.escape(a&&a.id)+'"'),a.alignment&&n.push('data-alignment="'+t.escape(a&&a.alignment)+'"'),i.sections&&(n.push('data-sections="'+i.sections+'"'),1==i.sections&&n.push('data-is-stretchable="'+!(i.isStretchable===!1)+'"'))),n.join(" ")},generateEntityLink:function(t,e,i,a){var s=t.settings&&t.settings.isDesignMode,r=s?"":t.configurator.getUrlBuilder().getNewViewUrl(e.id,i,!0);return n(s,{href:r,title:e.name,additionalClasses:"tau-id "+(a||""),additionalAttributes:'data-entity-id="'+e.id+'" data-entity-type="'+i+'" ',text:e.id})},buildLink:function(t,e,i){if(e.cf&&e.cf.value){var a=n(t.settings&&t.settings.isDesignMode,{text:e.cf.value.label,title:i?e.cf.value.label:"",href:e.cf.value.uri,target:"_blank"});return i?a:this.trim(e.cf.name,10)+": "+a}return""},getUserText:function(e){return t.escape(t.trim(e.fullName)||e.email)},getPeopleOrdered:function(e){var n=e.users||[e.user],i="responsible",a="others",s=t.groupBy(n,function(t){return this.isResponsible(e,t)?i:a},this);return t.concat([s[i],s[a]])},isResponsible:function(t,e){return!t.currentStateResponsiblePersons||t.currentStateResponsiblePersons.indexOf(e.id)>=0}}}});
define('tau/services/customize/service.customize.units.helper',["Underscore","tau/core/class","tau/models/board.customize.units/board.customize.units.fn","tau/models/board.customize.units/const.entity.types.names"],function(t,e,n,s){var i=function(){return""};return e.extend({init:function(t){this._templateRegistrators=t},_getKeyMap:function(e,n){return t.isObject(e)?(n=n?n+".":"",t.map(e,function(e,s){var i=this._getKeyMap(e,n+s);return t.isArray(i)?s+":{"+i.join(",")+"}":i},this)):n},getKeys:function(t){return this._getKeyMap(t).join(",")},processSettings:function(e,n){var s=e.model||this.getKeys(e.sampleData);e.settings?t.each(e.settings,function(t){t.model=t.model||s}):e.settings=[{types:e.types,sizes:e.sizes,model:s}],n&&t.each(e.settings,function(t){t.model=n(s)})},processIsApplicable:function(e){e.isApplicableByTypeAndSize=function(t,e){return null!=this.getModelByTypeAndSize(t,e)},e.isApplicableByType=function(e){var n=t.find(this.settings,function(n){return t.contains(n.types,e)||t.contains(n.types,s.ANY_TYPE)});return n?n.model:null},e.getModelByTypeAndSize=function(e,n){var i=t.find(this.settings,function(i){var o=t.contains(i.types,e)||t.contains(i.types,s.ANY_TYPE),u=!n||t.contains(i.sizes,n);return o&&u});return i?i.model:null}},processCustomFunctions:function(t){t.template.customFunctions=$.extend(t.template.customFunctions||{},n(t)),t.template.customFunctions.hideIf=t.hideIf||i},processTemplates:function(e){var n=t.reduce(this._templateRegistrators,function(n,s){var i=s.registerUnit(e);return t.extend(n,i)},{});e.getTemplateName=function(t){return n[t]}}})});
define('tau/services/customize/service.customize.units.registry',["Underscore","tau/core/class","tau/models/board.customize.units/board.customize.units.simple","tau/models/board.customize.units/board.customize.units.oneToOne","tau/models/board.customize.units/board.customize.units.collections","tau/models/board.customize.units/board.customize.units.visualization","tau/services/customize/templateRegistrators/cardTemplateRegistrator","tau/services/customize/templateRegistrators/listTemplateRegistrator","tau/services/customize/service.customize.units.helper","tau/models/board.customize.units/const.entity.types.names"],function(t,e,s,i,n,u,o,r,c,a){return e.extend({init:function(e){this.unitsHelper=new c([new o,new r]),e=e||t.flatten([s,i,n,u]),e=this.mappingTypes(e),this.units=this.register(e)},_mappingAssignedUserOnUser:function(e){return t.contains(e,a.USER)?t.union(e,a.ASSIGNED_USER):e},mappingTypes:function(e){return t.each(e,function(e){t.each(e.settings,function(t){t.types=this._mappingAssignedUserOnUser(t.types)},this)},this),e},register:function(e){return t.object(t.map(e,t.bind(function(t){return this.unitsHelper.processCustomFunctions(t),this.unitsHelper.processTemplates(t),this.unitsHelper.processSettings(t),this.unitsHelper.processIsApplicable(t),[t.id,t]},this)))},getUnitById:function(t){return this.units[t]}})});
define('tau/models/board.customize.units/const.customField.types',["Underscore"],function(){return{TEXT:"text",DROP_DOWN:"dropdown",CHECK_BOX:"checkbox",URL:"url",DATE:"date",RICH_TEXT:"richtext",NUMBER:"number",ENTITY:"entity",MULTIPLE_LIST:"multipleselectionlist",TEMPLATED:"templatedurl",MULTIPLE_ENTITIES:"multipleentities"}});
define('tau/services/customize/service.customize.units.customField.sampleData',["tau/models/board.customize.units/const.customField.types"],function(e){var t={};return t[e.TEXT]="{{name}}",t[e.DROP_DOWN]="{{name}}",t[e.CHECK_BOX]=1,t[e.URL]={url:"http://targetprocess.com/",label:"{{name}}"},t[e.DATE]="{{name}}",t[e.NUMBER]="{{name}}",t[e.ENTITY]={id:831209,name:"{{name}}",entityKind:"UserStory"},t[e.MULTIPLE_LIST]="{{name}}",t[e.TEMPLATED]={url:"http://example.com/?query={0}&test=test",value:"{{name}}"},t[e.MULTIPLE_ENTITIES]="{{name}}",t});
define('tau/models/board.customize.units/board.customize.units.customFields',["Underscore","tau/models/board.customize.units/const.entity.types.names","tau/models/board.customize.units/const.card.sizes","tau/models/board.customize.units/const.customField.types","tau/services/customize/service.customize.units.customField.sampleData","tau/models/board.customize.units/board.customize.units.base"],function(t,e,a,i,s,u){e.STORY=e.US;var n=[a.XS,a.S,a.M,a.L,a.XL],d=n.concat(a.LIST),o={formatText:function(e,a,s){if(!e)return"";var u=e.value;if(a&&a.isDesignMode)s&&(u="Value for "+u);else if(e.type.toLowerCase()==i.DATE)return['<div class="tau-board-unit__value_type_day">',this.formatDayShort(u),"</div>",'<div class="tau-board-unit__value_type_month">',this.formatDate(u,"MMM"),"</div>",'<div class="tau-board-unit__value_type_year">',this.formatDate(u,"yyyy"),"</div>"].join("");return t.escape(u)},formatTextForTitle:function(e){if(!e)return"";var a=e.value;return e.type.toLowerCase()==i.DATE?[this.formatDayShort(a),this.formatDate(a,"MMM"),this.formatDate(a,"yyyy")].join(" "):t.escape(a)},type:function(t){var e=t.cf;return e&&e.value&&e.value.entityKind?e.value.entityKind.toLowerCase():"none"},getRelationsCount:function(t){return(t.cf.value||"").split(",").length}},c=function(t){var e=t.cf,a=e&&e.value&&e.value.entityKind&&e.value.entityKind.toLowerCase();return"tau-board-unit_type_"+a},l=function(t){return t&&t.cf&&t.cf.value?"tau-board-unit_type_custom-checkbox-checked":"tau-board-unit_type_custom-checkbox"},_=[{id:"custom_field__long__{{name}}",classId:"tau-board-unit_type_custom_field_long",customFieldTypes:[i.TEXT,i.DATE,i.NUMBER,i.MULTIPLE_LIST,i.DROP_DOWN],sizes:n,sections:1,template:{markup:['<div class="tau-board-unit__value">',"<%!fn.trim(this.data.cf.name,10)%>: ","<%=fn.formatText(this.data.cf, this.settings, true)%>","</div>"]}},{id:"custom_field__short__{{name}}",classId:"tau-board-unit_type_custom_field_short",sizes:n,customFieldTypes:[i.TEXT,i.DATE,i.NUMBER,i.DROP_DOWN],template:{markup:['<div class="tau-board-unit__value">',"<%=fn.formatText(this.data.cf, this.settings)%>","</div>"]}},{id:"custom_field__100__{{name}}",sections:1,classId:"tau-board-unit_type_custom_field_100",customFieldTypes:[i.TEXT,i.DATE,i.NUMBER,i.MULTIPLE_LIST,i.DROP_DOWN],listSettings:{title:"<%=fn.formatTextForTitle(this.data.cf)%>"},template:{markup:['<div class="tau-board-unit__value">',"<%=fn.formatText(this.data.cf, this.settings)%>","</div>"]}},{id:"custom_field__entity_id__{{name}}",classId:function(t){return"tau-board-unit_type_custom-related-entity tau-board-unit_type_id "+c(t)+"-id"},customFieldTypes:[i.ENTITY],template:{markup:["<% if (this.data.cf && this.data.cf.value && this.data.cf.value.entityKind){ %>",'<%= fn.generateEntityLink(this, this.data.cf.value, this.data.cf.value.entityKind, "tau-board-unit__value tau-related-id") %>',"<% } %>"]},listSettings:{title:'<%= this.data.cf && this.data.cf.value ? this.data.cf.value.name : ""%>'}},{id:"custom_field__url_short__{{name}}",classId:"tau-board-unit_type_custom-url",customFieldTypes:[i.URL],template:{markup:['<div class="tau-board-unit__value">',"<%=fn.buildLink(this, this.data, true)%>","</div>"]},listSettings:{title:'<%= this.data.cf && this.data.cf.value ? this.data.cf.value.label : ""%>'}},{id:"custom_field__url_line__{{name}}",classId:"tau-board-unit_type_custom-url",customFieldTypes:[i.URL],sections:1,sizes:n,template:{markup:['<div class="tau-board-unit__value">',"<%=fn.buildLink(this, this.data, false)%>","</div>"]}},{id:"custom_field__checkbox_short__{{name}}",classId:function(t){return"tau-board-unit_type_custom-checkbox-short "+l(t)},customFieldTypes:[i.CHECK_BOX],template:{markup:[""]},hideIf:function(t){return!t||!t.cf||!t.cf.name}},{id:"custom_field__checkbox__{{name}}",classId:l,sizes:n,customFieldTypes:[i.CHECK_BOX],template:{markup:['<div class="tau-board-unit__value"><%!fn.trim(this.data.cf.name,15)%></div>']},hideIf:function(t){return!t||!t.cf||!t.cf.name}},{id:"custom_field__checkbox_long__{{name}}",classId:l,customFieldTypes:[i.CHECK_BOX],sections:1,sizes:n,template:{markup:['<div class="tau-board-unit__value"><%! this.data.cf.name %></div>']},hideIf:function(t){return!t||!t.cf||!t.cf.name}}];u.pushClones(_,{classId:function(t){return"tau-board-unit_type_custom-related-entity "+c(t)},customFieldTypes:[i.ENTITY],template:{markup:['<div class="tau-board-unit__value">',"<% if (this.data.cf && this.data.cf.value) { %>","<%!this.data.cf.value.name%>","<% } %>","</div>"]}},[{id:"custom_field__entity_long__{{name}}",sections:1,sizes:n},{id:"custom_field__entity_name__{{name}}",sizes:d}]);var r=function(t){return null===t.cf.value||void 0===t.cf.value||""===t.cf.value};return t.each(_,function(a){a=t.defaults(a,{category:"custom fields",priority:1,model:'cf:CustomValues.Get("{{name}}")',name:"{{name}}",types:[e.FEATURE,e.STORY,e.TASK,e.BUG,e.REQUEST,e.TEST_CASE,e.IMPEDIMENT,e.ITERATION,e.TEAM_ITERATION,e.RELEASE,e.TEST_PLAN,e.TEST_PLAN_RUN,e.BUILD,e.PROJECT],sizes:d,hideIf:r}),a.template.customFunctions=o,a.sampleData||(a.sampleData={cf:{name:"{{name}}",type:a.customFieldTypes[0],value:s[a.customFieldTypes[0]]}}),a.hideIf=t.wrap(a.hideIf,function(t,e){return!e.cf||a.customFieldTypes.indexOf(e.cf.type.toLowerCase())<0||t(e)})}),_});
define('tau/services/customize/service.customize.units.customField.factory',["Underscore","tau/core/class","tau/utils/utils.base64hashEncoder","tau/models/board.customize.units/board.customize.units.customFields","tau/services/customize/templateRegistrators/cardTemplateRegistrator","tau/services/customize/templateRegistrators/listTemplateRegistrator","tau/services/customize/service.customize.units.customField.sampleData","tau/services/customize/service.customize.units.helper"],function(e,t,i,s,n,r,a,u){return t.extend({prefix:"custom_field__",init:function(e){this.unitIdRegex=new RegExp("^"+this.prefix+"(.+?)__(.+)$","i"),this.unitsHelper=new u([new n,new r]),this.units=this.register(s),this.configurator=e},register:function(t){return e.object(e.map(t,e.bind(function(e){return this.unitsHelper.processSettings(e),this.unitsHelper.processIsApplicable(e),this.unitsHelper.processCustomFunctions(e),this.unitsHelper.processTemplates(e),[e.id,e]},this)))},getUnitById:function(e){var t=this.unitIdRegex.exec(e);if(null===t)return null;var s=t[1],n=t[2],r=this.units[this.prefix+s+"__{{name}}"];return r?this.createUnit(r,i.decodeName(n)):this.units[e]},createUnit:function(t,s){var n=e.deepClone(t);return this.unitsHelper.processSettings(n,function(e){return e.replace("{{name}}",s)}),this.unitsHelper.processIsApplicable(n),n.name=s+" custom field",n.sampleData.cf.name=s,n.sampleData.cf.value=this._prepareSampleValue(n.sampleData.cf.value,s),n.id=n.id.replace("{{name}}",i.encodeName(s.toLowerCase())),n},_prepareSampleValue:function(t,i){var s,n=function(t){return e.isString(t)?t.replace("{{name}}",i):t};return e.isString(t)?s=n(t):(s=e.deepClone(t),t.name?s.name=n(t.name):t.label?s.label=n(t.label):t.value&&(s.value=n(t.value))),s},_createUnitsFromCustomField:function(t){var i=t.name,s=t.type.toLowerCase();return e.chain(this.units).filter(function(t){return e.contains(t.customFieldTypes,s)}).map(e.bind(function(e){var n=this.createUnit(e,i);return n.sampleData.cf.value=this._prepareSampleValue(a[s],i),n.sampleData.cf.type=s,n.types=[t.entityKind.toLowerCase()],n.settings[0].types=n.types,n},this)).value()},_getCustomFields:function(){var t=this.configurator;return t.getAppStateStore().get({fields:["acid"]}).then(function(e){return t.getApplicationContextService().getApplicationContext({acid:e.acid})}).then(function(t){return e.chain(t.processes).pluck("customFields").flatten().value()})},getAllUnits:function(){return this._getCustomFields().then(e.bind(function(t){return e.chain(t).map(e.bind(this._createUnitsFromCustomField,this)).flatten().groupBy("id").map(this._groupCustomFields).value()},this))},_groupCustomFields:function(t){return e.foldl(t,function(t,i){return t?(t.types=e.unique(t.types.concat(i.types)),t.settings[0].types=t.types):t=i,t},null)}})});
define('tau/core/event2',["Underscore"],function(e){var n=function(n){return n.name?[n.data]:e.pluck(e.values(n),"data")},t=function(){};return t.implementOn=function(e){var n=t.prototype;for(var r in n)void 0==e[r]&&(e[r]=n[r]);return e},t.parseName=function(n){n=e.trim(n),n=n.replace(/\s*\+\s*/g,"+").replace(/\s*>\s*/g,">");var t=!!n.match(/[+>]/),r=(n.match(/\s(\d+)$/)||0,[n]),i=!1;if(t){if(n.indexOf("+")>0&&n.indexOf(">")>0)throw new Error("Only + or > is accepted");r=n.split(/\s+/g)[0].split(/[+>]/g),i=n.indexOf(">")>0}return r=e.map(r,function(e){var n=e.split(":");return{name:n[0],rule:n[1]}}),{name:n,isCombination:t,isOrdered:i,parts:r,priority:0}},t.signUp=function(n,r,i,s){var a=t.parseName(r),o=a.parts;if(a.isCombination)for(var c=a.isOrdered,u=[],f=e.pluck(o,"name"),l=function(n){var t=e.indexOf(f,n.name);if(!(c&&e.compact(u).length<t)&&(u[t]||(u[t]=e.pick(o[t],"name","rule")),u[t].event=n,e.compact(u).length===o.length)){var r={};u=e.map(u,function(e){return r[e.name]=e.event,"last"===e.rule?e:void 0}),r=[r].concat(e.map(r,function(e){return e.data})),i.apply(s,r)}},p=0,v=o.length;v>p;p++)n._on(o[p].name,l,s,null,0);else n._on(o[0].name,i,s,null,a.priority)},t.subscribeOn=function(n){var r=e.functionsExt(n);e.each(n,function(i){if(i&&e.isFunction(i.on))for(var s=0,a=r.length;a>s;s++){var o=r[s],c=o.split(/\s/);t.signUp(i,c[1],n[o],n)}})},t.unSubscribe=function(n){e.each(n,function(t){t&&e.isFunction(t.removeAllListeners)&&t.removeAllListeners(n)})},t.prototype=function(){var r=function(e){var n=e.getPrivate&&e.getPrivate()||e._||(e._={});return n.events||(n.events={})},i=function(e){this.name=e,this.listeners=[]};i.prototype={},i.prototype.getListenerIndex=function(e,n){for(var t=0,r=this.listeners;t<r.length;t++)if(!(r[t].fn!=e||r[t].scopeObj!==n&&(r[t].scopeObj||1!=arguments.length&&n)))return t;return-1};var s={on:function(e,n,r){return t.signUp(this,e,n,r),this},_on:function(t,s,a,o,c){if(e.isArray(t)){var u=arguments.callee,f=this;return e.each(t,function(e){u.call(f,e,s,a,o,c)}),this}var l=r(this),p=l[t]||(l[t]=new i(t));if(p.getListenerIndex(s,a)<0){var v=p.listeners;a||(a=this),isNaN(c)&&(c=10);var h=this,m=function(e,r,i,c,u){var f={name:t,sender:this,caller:e,data:r,listenerData:o,stop:i,cancel:c,suspendMain:function(){u&&u.lock()},cancelMain:function(){u&&u.cancel()},resumeMain:function(){u&&u.unlock()},removeListener:function(){h.removeListener(t,s,a)}},l=[f].concat(n(f));return s.apply(a,l),f.data};m.fn=s,m.scopeObj=a,m.priority=c;for(var d=v.length-1;d>=0;d--)if(v[d].priority<=c)return v.splice(d+1,0,m),this;v.unshift(m)}return this},fire:function(){var e=!1,n=function(){e=!0},t=!1,i=function(){t=!0};return function(s,a,o,c){var u=r(this)[s],f=e,l=t;if(e=t=!1,u){var p=u.listeners;if(p.length){p=p.slice(0);for(var v=0;v<p.length;v++){var h=p[v].call(this,o,a,n,i,c);if("undefined"!=typeof h&&(a=h),e||t)break}}}var m=t||("undefined"==typeof a?!1:a);return e=f,t=l,m}}(),fireOnce:function(e,n,t){var i=this.fire(e,n,t);return delete r(this)[e],i},removeListener:function(e,n,t){var i=r(this)[e];if(i){var s=i.getListenerIndex(n,t);s>=0&&i.listeners.splice(s,1)}},removeAllListeners:function(e){var n=r(this);for(var t in n)if(n[t].listeners)if(e){for(var i=n[t].listeners,s=[],a=0;a<i.length;a++)i[a].scopeObj!=e&&s.push(i[a]);n[t].listeners=s}else delete n[t].listeners,delete n[t]},hasListeners:function(e){var n=r(this)[e];return n&&n.listeners.length>0},getListeners:function(){var e=r(this),n=[];for(var t in e){var i=e[t].listeners;if(i&&i.length>0){for(var s=[],a=0;a<i.length;a++){var o=i[a],c={name:"unknown",item:o};o.scopeObj&&o.scopeObj.bus&&o.scopeObj.bus.name?c.name=o.scopeObj.bus.name:o.scopeObj&&o.scopeObj.name&&(c.name=o.scopeObj.name),s.push(c)}n.push({name:t,items:i,count:i.length,listeners:s})}}return n},getListenersCount:function(){var e=r(this),n=0;for(var t in e)e[t].listeners&&(n+=e[t].listeners.length);return n}};return s.addEventListener=s.on,s}(),t});
define('tau/services/service.help-scenario-runner',["jQuery","Underscore","tau/core/class","tau/core/event"],function(t,e,s,n){var i=s.extend({init:function(){this.data={}},get:function(t){return this.data[t]},set:function(t,e){this.data[t]=e}}),o=s.extend({init:function(t){var s=this;s.configurator=t.configurator,s.globalBus=t.configurator.getGlobalBus(),s.scenarioContext=new i,s.general_setup=t.methods.setup,s.general_teardown=t.methods.teardown,s._defaultsStep();var n=e.deepClone(t.scenario);s.scenario=e(n.sections).reduce(function(t,s,n){var i={id:n,name:s.name};return e(s.steps).each(function(t){t.section=i}),t.concat(s.steps)},[]),s.processStep=e.bind(s.processStep,s)},_defaultsStep:function(){var t=this;t.step=null,t.stepIndex=-1,t.stepTargetDefer=null,t.stepCompleteDefer=null},next:function(){this.stepIndex++,this.step=this.scenario[this.stepIndex],this.step?(e.defaults(this.step,{teardown:t.noop,rollbackDepth:1,scenarioContext:this.scenarioContext,configurator:this.configurator}),this.stepTargetDefer=this.step.target(this.step),this.stepTargetDefer.done(this.processStep)):(this._defaultsStep(),this.fire("done"))},processStep:function(t){this.fire("next",this.step);var s=this.general_setup(t,this.step),n=e.bind(this.rollbackStep,this,s),i=e.bind(this.completeStep,this,s);this.stepCompleteDefer=this.step.complete(s).fail(n).done(i)},rollbackStep:function(t,e){this._teardownContext(t),e?(this._defaultsStep(),this.fire("abort")):(this.fire("rollback",this.step),this.stepIndex-=this.step.rollbackDepth,this.next())},completeStep:function(t){this._teardownContext(t),this.next()},_teardownContext:function(t){this.step.teardown(t),this.general_teardown(t)},start:function(){this.next()},abort:function(){this.stepTargetDefer&&this.stepTargetDefer.reject(),this.stepCompleteDefer&&this.stepCompleteDefer.reject(!0)}});return n.implementOn(o.prototype),o});
define('tau/services/help-scenarios/base',["jQuery","Underscore"],function(e,t){function o(n,r,a){r=r||e.Deferred();var i=t.isFunction(n)?n.call(null):e(n);return i.length&&e.contains(document.documentElement,i[0])&&(a||i.is(":visible"))?r.resolve(i):"pending"===r.state()&&t.delay(o,250,n,r,a),r}var n=function(e){var t=e.$holder.tauBubble("getContent");return t.on("click",".i-role-next",e.resolve),e},r=function(e,t,o){e.descriptor=setTimeout(function(){t(),null!==e.descriptor&&r(e,t,o)},o)},a=function(e){clearTimeout(e.descriptor),e.descriptor=null},i=function(e){var t=e.offset();return t.w=e[0].clientWidth,t.h=e[0].clientHeight,t},s=e("<div></div>").appendTo("body"),c={descriptor:null},u=function(e,t){e.addClass("tau-help-attention");var o=['<div style="display: block;" class="i-role-help-drop-target tau-bubble tau-warning-bubble i-state_visible i-role-taububble-ignore">','   <div class="tau-bubble__inner" role="content"></div>',"</div>"].join(""),n={alignTo:e,content:"<p>"+t+"</p>",zIndex:10001,template:o,showOnCreation:!0,className:"tau-warning-bubble",showEvent:null,hideEvent:null,mode:"bubble",onPositionConfig:function(e){e.my="center top",e.at="center center"},onShow:function(t){var o=i(e.closest(".i-role-grid")),n=i(e),r=t.height(),a=o.top+o.h-n.top;if(r>a)t.hide();else{var s=n.top+(a-r)/2;t.css("top",s)}},stackName:"help-flow-drop-target",dontCloseSelectors:["body"]};s.tauBubble(n);var a=function(){s.tauBubble("show")};r(c,a,500)},l=function(e){a(c),s.tauBubble("hide"),e.removeClass("tau-help-attention")},d=function(e){return".tau-teams-projects-manager-wrapper .tau-teams-projects-manager-holder "+e},p=function(e,t){e.scenarioContext.set("project-created",t)},m=function(e){return e.scenarioContext.get("project-created")},f=function(e){t.defer(e.resolve)},v=function(o){return function(){var n=e(".tau-teams-projects-manager-wrapper .i-role-section-projects .i-role-item"),r=n.filter(function(){return t.trim(e(this).text())===o});r.is(":visible")&&r.addClass("tau-active-item");var a=r.find(".i-role-selecttrigger");return 0===a.length?e():a.eq(0)}},b={liveSelect:o,complete:n,resolveCtx:f,markDropTarget:u,unMarkDropTarget:l,fieldInCtxAddProject:d,selectorOnVisibleBubble:function(e){return".i-role-bubble.i-state_visible "+e},hideTooltipOnCardDnD:function(t){var o=t.$node;o.on("mousedown",function(){o.addClass("i-role-help-disable-tooltip"),e("body").one("mouseup",function(){o.removeClass("i-role-help-disable-tooltip")})})},extractJustAddedEntityId:function(t){var o=e(t).data("id");return parseInt(o)},stepVideoIntro:function(t){var o,n;return{custom:!0,target:function(){return o=e.Deferred(),n=e.Deferred(),require(["tau/components/component.video-intro.popup"],function(e){e.create({url:t.url,showNextButton:!0,destroy:o,render:n})}),n},complete:function(){return o}}},stepContextPromptToSeeExistingProjectsAndTeams:function(){return{message:["<p>Open the Teams and Projects menu.</p>"].join(""),target:function(){return o(".tau-context-filter")},complete:function(t){return e(".tau-bubble-board.tau-teams-projects-manager-wrapper").is(":visible")?f(t):t.$node.one("click",t.resolve),t}}},stepContextExplainProjects:function(e){return e=e?" "+e+" ":" ",{message:["<p>Select which Project you want to see on the"+e+"board. This is your current project context. The project context can be a combination of teams-projects.</p>","<p>You can change it at any time. We will limit our context to just one project for now.</p>",'<p class="tau-help-continue"><button class="i-role-next tau-btn tau-primary">Continue</button></p>'].join(""),rollbackDepth:2,target:function(){var e=".tau-teams-projects-manager-wrapper .i-role-section-projects";return o(e)},complete:function(e){var t=e.$holder.tauBubble("getContent");return t.on("click",".i-role-next",e.resolve),e}}},stepContextApplyExistingProject:function(t){return{message:["<p>Click to show the work from your chosen project context on the current board.</p>"].join(""),rollbackDepth:3,target:function(e){p(e,t);var n=v(t);return o(n)},complete:function(e){return e.$node.one("click",e.resolve),e},teardown:function(){var t=e(".tau-teams-projects-manager-wrapper .i-role-section-projects .i-role-item.tau-active-item");t.removeClass("tau-active-item")}}},stepContextPromptToAddNewProject:function(){return{message:"Click to add a new project.",rollbackDepth:2,target:function(){var e=".tau-teams-projects-manager-wrapper .i-role-section-projects .i-role-formtrigger:visible";return o(e)},complete:function(e){return e.$node.hasClass("tau-active")?f(e):e.$node.one("click",e.resolve),e}}},stepContextTypeProjectName:function(){return{message:"Enter project name.",rollbackDepth:3,target:function(){var e=d(".tau-new-entity-info .tau-new-entity-name");return o(e)},complete:function(e){var t=e.$node.val()||"";return t.length>0?f(e):e.$node.one("keypress",e.resolve),e}}},stepContextSelectProcess:function(e){return{message:"Select <strong>"+e+"</strong> process.",rollbackDepth:4,target:function(){var e=d(".tau-new-entity-process .tau-select");return o(e)},complete:function(t){var o=t.$node.find("option:selected").text();return o.toLowerCase()===e.toLowerCase()?f(t):t.$node.on("change",function(){var o=t.$node.find("option:selected").text();o.toLowerCase()===e.toLowerCase()&&t.resolve()}),t}}},stepContextInvitePeopleToProject:function(){return{message:["<p>Invite some people who will work on this project. Type their emails (optional).</p>",'<p class="tau-help-continue"><button class="i-role-next tau-btn tau-primary">Continue</button></p>'].join(""),rollbackDepth:5,target:function(){var e=d(".tau-invite-widget .tau-invite-field");return o(e)},complete:function(t){t.step.scenarioContext.set("isProjectAlreadyCreated",!1);var o=d(".tau-teams-projects-manager .i-role-form");e(o).one("entity.add.completed",function(){t.step.scenarioContext.set("isProjectAlreadyCreated",!0),t.resolve()});var n=t.$node.find(".i-role-member").text();if(n.length>0)f(t);else{var r=t.$holder.tauBubble("getContent");r.on("click",".i-role-next",t.resolve)}return t}}},stepContextCreateProject:function(){return{message:"Click here to create a project.",rollbackDepth:6,target:function(t){var n=t.scenarioContext.get("isProjectAlreadyCreated"),r=e.Deferred();if(n)r.resolve(e("<div></div>"));else{var a=d(".tau-new-entity-form .tau-success");r=o(a)}return r},complete:function(t){var o=t.step.scenarioContext.get("isProjectAlreadyCreated");if(o)p(t.step,e(d(".tau-new-entity-info .tau-new-entity-name")).val()),f(t);else{var n=d(".tau-teams-projects-manager .i-role-form");e(n).one("entity.add.completed",function(){p(t.step,e(d(".tau-new-entity-info .tau-new-entity-name")).val()),t.resolve()})}return t}}},stepContextHighlightCreatedProject:function(){return{message:"The project you've created was added to the list of projects.",target:function(e){var n=".tau-teams-projects-manager-wrapper .i-role-section-projects .i-role-item.tau-added";return o(n).then(function(o){return p(e,t.trim(o.text())),o})},complete:function(e){return t.delay(e.resolve,3e3),e}}},stepContextApplyCreatedProject:function(){return{message:["<p>Click to apply the selected context to the current board.</p>",'<p class="tau-help-apply-project"></p>'].join(""),target:function(e){var t=m(e),n=v(t);return o(n)},complete:function(e){return e.$node.one("click",e.resolve),e},teardown:function(){var t=e(".tau-teams-projects-manager-wrapper .i-role-section-projects .i-role-item.tau-active-item");t.removeClass("tau-active-item")}}},stepContextCloseContextMenu:function(){return{message:"Click to close this menu.",offset:10,target:function(){return o(".tau-context-filter")},complete:function(t){var o=e(".tau-teams-projects-manager-wrapper").is(":visible");return o?t.$node.on("click",t.resolve):f(t),t}}},stepOpenBoard:function(n){var r=n.boardName.toLowerCase(),a=-1===r.indexOf("board")?" board":"",i=n.message?n.message:"Open the "+n.boardName+a+".",s=function(){var t=this,o=t.boardName,n=e('.tau-app-secondary-pane .tau-boardselector__item.i-role-item:contains("'+o+'")');return n.filter(function(){return e(this).text()===o}).eq(0)},c=function(){var t=this,o=t.boardName,n=e('.tau-app-secondary-pane .tau-boardselector__item.i-role-item.tau-boardselector__item_active_true:contains("'+o+'")');return n.filter(function(){return e(this).text()===o}).eq(0)};return{message:i,boardName:n.boardName,target:function(n){var r=e.Deferred(),a=t.bind(s,n),i=a();return i.size()>0?r.resolve(i):n.configurator.getHelpScenarioService().createBoardFromTemplate(this.boardName).done(function(){t.delay(o,1500,a,r)}),r},complete:function(n){if(n.$node.hasClass("tau-boardselector__item_active_true"))t.delay(n.resolve,2e3);else{var r=t.bind(c,n.step),a=e.Deferred();a.done(function(){t.delay(n.resolve,2e3)}),o(r,a)}return n}}},stepSelectYourProject:function(n,r){var a={message:"Select the project you've just created.",target:function(){return o(n)},complete:function(t){var o=m(t.step),n=t.$node.find("option:selected").text();return t.$node.is(":disabled")||n.toLowerCase()===o.toLowerCase()?f(t):(t.$node.find("option").each(function(){var t=e(this),n=t.text();n.toLowerCase()===o.toLowerCase()&&t.html("<b>"+n+"</b>")}),t.$node.on("change",function(){var e=t.$node.find("option:selected").text();e.toLowerCase()===o.toLowerCase()&&t.resolve()})),t}};return t.extend(a,r)},stepSelectToday:function(e,n){var r={message:"<p>Let's assume that it starts <b>today</b>. You can change the start date later.</p>",target:function(){return o(e)},complete:function(e){return e.$node.on("change",function(){var t=e.$node.val(),o=t.replace(/-/g," "),n=new Date(Date.parse(o));(new Date).toDateString()===n.toDateString()&&e.resolve()}),e}};return t.extend(r,n)},stepClickOrEscToClose:function(n){var r={message:"Click to close this screen.",direction:"none",targetSelector:".tau-cover-view_page .close:visible",target:function(){return o(this.targetSelector)},complete:function(o){return window.scrollTo(0,0),o.$node.on("click",o.resolve),o.escHandler=t.bind(function(e){27===e.keyCode&&this.resolve()},o),e(document).on("keydown",o.escHandler),o},teardown:function(t){e(document).off("keydown",t.escHandler)}};return t.extend(r,n)},stepClickForQuickAdd:function(n){var i={quickAddRoleClass:"i-role-ch-quickadd-target",target:function(n){var a=this.quickAddRoleClass,i=e(this.todoCellSelector);e(".i-role-board-body").find("."+a).not(i).addClass(a+"-help-depressed").removeClass(a);var s=t.bind(function(){var t=e(this.todoCellSelector);t.find(" .tau-quick-add .tau-add").is(":visible")||t.mouseenter()},this),c={descriptor:null};r(c,s,250),n.scenarioContext.set("quick-add-inductor-process",c);var u=this.todoCellSelector+" .tau-quick-add .tau-add";return o(u)},complete:function(e){var t=e.$holder.tauBubble("getContent");return t.on("click",".i-role-next",e.resolve),e.$node.off("click",e.resolve).one("click",e.resolve),e},teardown:function(t){var o=t.step.scenarioContext.get("quick-add-inductor-process");a(o);var n=this.quickAddRoleClass,r=n+"-help-depressed";e(".i-role-board-body").find("."+r).addClass(n).removeClass(r)}};return t.extend(i,n)},stepFinish:function(e){e=e||{};var n=e.processName?" "+e.processName+" ":" ",r={message:["<p>Thanks! You're done with the"+n+"tour now.</p>","<p>One important note before you move on:</p>","<p>As you create and remove boards from your screen, you simply change how you see one and the same data set.</p>","<p>You do not actually remove or delete anything, all your information is safe. So, don't be scared to experiment.</p>","<p>Try various mixes of vertical and horizontal lanes or use the predefined templates to get a clear view of what you want to focus on.</p>","<p>Play with the boards!</p>",'<p class="tau-help-continue"><button class="i-role-got-it tau-btn tau-primary">Got it, thanks</button></p>'].join(""),target:function(){return o(".tau-app-secondary-pane .tau-add-board-btn")},complete:function(e){var t=e.$holder.tauBubble("getContent");return e.$node.click(e.resolve),t.on("click",".i-role-got-it",e.resolve),e}};return t.extend(r,e)},flowUserGuide:{name:"User Guide",steps:[{message:["<p>Read User Guide to learn more about concepts and User Interface.</p>",'<p class="tau-help-continue"><button class="i-role-next tau-btn tau-primary">OK! I\'m done</button></p>'].join(""),direction:"none",target:function(){e(".tau-flow-info-panel").tauBubble("hide"),e(".tau-flow-info").removeClass("tau-flow-started tau-flow-info");var t=".tau-main-menu .tau-menu-item.tau-menu-items-help";return o(t)},complete:function(e){e.$node.one("click",e.resolve);var t=e.$holder.tauBubble("getContent");return t.on("click",".i-role-next",e.resolve),e}}]}};return b.flowIntroVideo={name:"Watch video",steps:[b.stepVideoIntro({url:"//www.youtube.com/embed/Lxl2sTEyYaE"})]},b});
define('tau/services/help-scenarios/basic-intro',["jQuery","Underscore","tau/services/help-scenarios/base"],function(e,t,a){var n=a.liveSelect,o=[a.flowIntroVideo,{name:"Projects and Teams",steps:[{message:["<p>Here you can select projects and teams to see related work. New projects can be added here as well.</p>",'<p class="tau-help-continue"><button class="i-role-next tau-btn tau-primary">Continue</button></p>'].join(""),offset:35,target:function(){return n(".tau-context-filter")},complete:a.complete}]},{name:"Quick Add",steps:[{message:["<p>Add new items: Releases, Sprints, User Stories, Bugs, etc.</p>",'<p class="tau-help-continue"><button class="i-role-next tau-btn tau-primary">Continue</button></p>'].join(""),offset:30,target:function(){var e='.tau-app-secondary-pane .tau-quick-add[role="action-quick-add"]';return n(e)},complete:a.complete}]},{name:"Boards",steps:[{message:["<p>This area contains boards added by Admin or other people. Board is just a way to see and manipulate data.</p>",'<p class="tau-help-continue"><button class="i-role-next tau-btn tau-primary">Continue</button></p>'].join(""),target:function(){var e=".tau-boardselector";return n(e)},complete:a.complete}]},{name:"Create board",steps:[{message:["<p>You can create your own private boards to see relevant information.</p>",'<p class="tau-help-continue"><button class="i-role-next tau-btn tau-primary">Continue</button></p>'].join(""),target:function(){return n(".tau-app-secondary-pane .tau-add-board-btn")},complete:a.complete}]},a.flowUserGuide];return o});
define('tau/services/help-scenarios/kanban',["jQuery","Underscore","tau/services/help-scenarios/base"],function(e,t,o){var r=o.liveSelect,n=o.markDropTarget,a=o.unMarkDropTarget,s=o.selectorOnVisibleBubble,i=[o.flowIntroVideo,{name:"Select/add project(s) and/or team(s)",steps:[o.stepContextPromptToSeeExistingProjectsAndTeams(),o.stepContextExplainProjects("Kanban"),o.stepContextApplyExistingProject("Tau Product - Kanban #1")]},{name:"Kanban Board",steps:[o.stepOpenBoard({boardName:"Kanban Board",message:["<p>Now open the Kanban board. Kanban is a simple process. You don't have to plan iterations here.</p>","<p>Just visualize your dev flow and limit Work In Progress (WIP). You'll do this later.</p>"].join("")}),o.stepClickForQuickAdd({message:"<p>Click the green + to add a new user story to the project.</p>",isScrollTo:!1,todoCellSelector:".tau-grid tr:first-child .tau-cellholder:first-child"}),{message:'<p>Enter a user story name, e.g. "As a user I want to log in"</p>',direction:"left",rollbackDepth:2,target:function(){return r(".tau-quick-add-dialog input.Name")},complete:function(e){return e.$node.on("keypress",e.resolve),e}},o.stepSelectYourProject(".tau-quick-add-dialog select.project",{direction:"left",rollbackDepth:3}),{message:"<p>Click here to add this user story to the Kanban board.</p>",direction:"left",rollbackDepth:4,target:function(){return r(".tau-quick-add-dialog .tau-add-item")},complete:function(e){return e.$node.one("click",function(){r(s(".i-role-quick-add-success-message"),e,!0)}),e}},{message:["<p>Here's your new story card.</p>",'<p class="tau-help-continue"><button class="i-role-next tau-btn tau-primary">Continue</button></p>'].join(""),pin:!1,target:function(e){var t=o.extractJustAddedEntityId(s(".i-role-quick-add-success-message"));return e.scenarioContext.set("step_EntityId",t),r(".i-role-card[data-entity-id="+t+"]")},complete:o.complete},{message:"<p>We will customize the Kanban board now. Click here.</p>",direction:"none",target:function(){return r(".tau-actions-btn")},complete:function(e){return e.$node.on("click",e.resolve),e}},{message:"<p>And here.</p>",direction:"none",target:function(){return r(".actions-menu-items .tau-board-settings-toggle")},complete:function(e){return e.$node.on("click",e.resolve),e}},{message:["<p>You can limit your Work in Progress in this tab.</p>",'<p class="tau-help-continue"><button class="i-role-next tau-btn tau-primary">Got it, thanks</button></p>'].join(""),direction:"right",target:function(){return r('.i-role-tabheader[data-label="limits"]')},complete:o.complete},{message:["<p>Let's get back to the Board Setup now.</p>"].join(""),direction:"none",target:function(){return r('.i-role-tabheader[data-label="setup"]')},complete:function(e){return e.$node.hasClass("tau-active")?o.resolveCtx(e):e.$node.one("click",e.resolve),e}},{message:"<p>Select Person to see work assigned to all the people.</p>",target:function(){return r(".tau-select[name=y_types]")},complete:function(e){return"assigneduser"===e.$node.val()?o.resolveCtx(e):e.$node.on("change",function(){"assigneduser"===e.$node.val()&&e.resolve()}),e}},{message:['<p>We\'ve set "State" for the vertical lanes, and "Person" for the horizontal lanes, so you see the Person/State swimlanes now.</p>',"<p>This means who's working on what, and what's the progress. You can mix the lanes later as you wish.</p>",'<p class="tau-help-continue"><button class="i-role-next tau-btn tau-primary">Got it, thanks</button></p>'].join(""),target:function(){return r(".tau-x-header .tau-cell:eq(0)")},complete:function(e){var t=e.$holder.tauBubble("getContent");return t.on("click",".i-role-next",e.resolve),e}},{message:"<p>Click here to get back to the Kanban board.</p>",direction:"none",target:function(){return r(".tau-settings-close")},complete:function(e){return e.$node.on("click",e.resolve),e}},{message:["<p>Let's see how to assign stories to people in the Person/State swimlanes. This can be done with drag-n-drop.</p>",'<p class="tau-help-card-dnd-vertical"></p>'].join(""),target:function(t){var o=t.scenarioContext.get("step_EntityId"),a=".i-role-card[data-entity-id="+o+"]",s=e('.i-role-cellaxis-viewtrigger[data-entity-type="user"][data-entity-id="'+window.loggedUser.id+'"]'),i=s.data("id"),l='.i-role-grid .i-role-cellholder[data-y="'+i+'"]:eq(0)',c=e(l);return n(c,"Drop the card here to assign it to yourself."),t.scenarioContext.set("step_CurrentUserCellHolderSelector",l),r(a)},complete:function(e){o.hideTooltipOnCardDnD(e);var t=e.step.scenarioContext.get("step_EntityId"),n=e.step.scenarioContext.get("step_CurrentUserCellHolderSelector");return r(n+" .i-role-card[data-entity-id="+t+"]",e),e},teardown:function(t){var o=t.step.scenarioContext.get("step_CurrentUserCellHolderSelector"),r=e(o);a(r)}},{message:["<p>Double-click the story card for more details.</p>",'<p class="tau-help-card-dblclick"></p>'].join(""),target:function(e){var t=e.scenarioContext.get("step_EntityId");return r(".i-role-card[data-entity-id="+t+"]")},complete:function(e){return e.$node.on("dblclick",e.resolve),e}},o.stepClickOrEscToClose({message:"<p>Click to get back to the board.</p>"})]},{name:"My Work",steps:[o.stepOpenBoard({message:"<p>You can manage your work items from a personal board as well. Click here to open it.</p>",boardName:"Personal Kanban"}),{message:["<p>Drag-n-drop the card to In Progress to start work.</p>",'<p class="tau-help-card-dnd-horizontal"></p>'].join(""),target:function(t){var o=t.scenarioContext.get("step_EntityId"),a=".i-role-grid .i-role-card[data-entity-id="+o+"]",s='.i-role-header .i-role-cellholder:contains("In Progress")',i=e(s),l=i.data("x"),c='.i-role-grid .i-role-cellholder[data-x="'+l+'"]';t.scenarioContext.set("inProgressCellHolderSelector",c);var d=e(c);return n(d,"Drop the card to this column"),r(a)},complete:function(e){o.hideTooltipOnCardDnD(e);var t=e.step.scenarioContext.get("step_EntityId"),n=e.step.scenarioContext.get("inProgressCellHolderSelector");return r(n+" .i-role-card[data-entity-id="+t+"]",e),e},teardown:function(t){var o=t.step.scenarioContext.get("inProgressCellHolderSelector"),r=e(o);a(r)}}]},o.flowUserGuide];return i});
define('tau/services/help-scenarios/scrum',["jQuery","Underscore","tau/services/help-scenarios/base"],function(e,t,o){var a=o.liveSelect,r=o.markDropTarget,n=o.unMarkDropTarget,i=o.selectorOnVisibleBubble,l=[o.flowIntroVideo,{name:"Select/add project(s) and/or team(s)",steps:[o.stepContextPromptToSeeExistingProjectsAndTeams(),o.stepContextExplainProjects(),o.stepContextApplyExistingProject("Tau Product Web Site - Scrum #1")]},{name:"Create a backlog/add stories to backlog",steps:[o.stepOpenBoard({boardName:"Story Mapping",message:"<p>Let's create a backlog. You can add Features and User Stories, and break Features into Stories here.</p>"}),o.stepClickForQuickAdd({message:"<p>Click to add a new user story.</p>",direction:"none",isScrollTo:!1,todoCellSelector:".tau-grid tr:first-child .tau-cellholder:first-child"}),{message:"<p>Enter a user story name.</p>",rollbackDepth:2,direction:"left",target:function(){return a(".tau-quick-add-dialog input.Name")},complete:function(e){return e.$node.on("keypress",e.resolve),e}},o.stepSelectYourProject(".tau-quick-add-dialog select.project",{rollbackDepth:3,direction:"left"}),{message:"<p>Click to add this user story to the Story Mapping board.</p>",rollbackDepth:4,direction:"left",target:function(){return a(".tau-quick-add-dialog .tau-add-item")},complete:function(e){return e.$node.one("click",function(){a(i(".i-role-quick-add-success-message"),e,!0)}),e}},{message:["<p>Here's your new user story.</p>",'<p class="tau-help-continue"><button class="i-role-next tau-btn tau-primary">Continue</button></p>'].join(""),pin:!1,direction:"left",target:function(e){var t=o.extractJustAddedEntityId(i(".i-role-quick-add-success-message"));return e.scenarioContext.set("step_EntityId",t),a(".i-role-card[data-entity-id="+t+"]")},complete:o.complete}]},{name:"Estimate work",steps:[o.stepOpenBoard({boardName:"Estimation",message:["<p>Let's estimate work before planning a release.</p>"].join("")}),{message:['<p>The "0" column has unestimated items, ',"the 1-2-3+ columns contain stories and bugs with the estimated effort of 1-2-3+ hrs.</p>","<p>(you can switch to pts later)</p>",'<p class="tau-help-continue"><button class="i-role-next tau-btn tau-primary">Continue</button></p>'].join(""),isScrollTo:!1,target:function(){return a(".i-role-header.tau-cols-header .i-role-name")},complete:function(e){var t=e.$holder.tauBubble("getContent");return t.on("click",".i-role-next",e.resolve),e}},{message:['<p>Drag-n-drop this story to the "2" column to give it a 2 hr estimate.</p>','<p class="tau-help-card-dnd-horizontal"></p>'].join(""),target:function(t){var o=t.scenarioContext.get("step_EntityId"),n=".i-role-grid .i-role-card[data-entity-id="+o+"]",i=e('.i-role-header.tau-cols-header .i-role-cellholder .i-role-focustrigger:contains("2"):eq(0)').closest(".i-role-cellholder"),l=i.data("x"),s='.i-role-grid .i-role-cellholder[data-x="'+l+'"]',c=e(s);return r(c,"Drop card to this column"),t.scenarioContext.set("step_EffortCellHolderSelector",s),a(n)},complete:function(e){o.hideTooltipOnCardDnD(e);var t=e.step.scenarioContext.get("step_EntityId"),r=e.step.scenarioContext.get("step_EffortCellHolderSelector");return a(r+" .i-role-card[data-entity-id="+t+"]",e),e},teardown:function(t){var o=t.step.scenarioContext.get("step_EffortCellHolderSelector");n(e(o))}},{message:["<p>You can repeat this step to estimate all the work.</p>",'<p class="tau-help-continue"><button class="i-role-next tau-btn tau-primary">Continue</button></p>'].join(""),targetCellSelector:".i-role-grid .i-role-cellholder:eq(0) .i-role-cell:eq(0)",target:function(){var e=this.targetCellSelector;return a(e)},complete:function(t){var a=this.targetCellSelector+" .i-role-card";if(0===e(a).size())o.resolveCtx(t);else{var r=t.$holder.tauBubble("getContent");r.on("click",".i-role-next",t.resolve)}return t}}]},{name:"Add a release",steps:[{message:["<p>We're done with the estimation, and it's time to plan a release. Click +Add to add a new release first.</p>","<p>You can create several releases for one project.</p>"].join(""),offset:40,target:function(){var e='.tau-app-secondary-pane .tau-quick-add[role="action-quick-add"]';return a(e)},complete:function(e){return e.$node.click(e.resolve),e}},{message:"<p>Click here.</p>",rollbackDepth:2,target:function(){var e='.tau-quick-add-dialog-general .quick-add__entity-items .i-role-entity-selector[data-type="Release"]';return a(e)},complete:function(e){return e.$node.click(e.resolve),e}},{message:"<p>Give a name to your release, e.g. Ship Happens.</p>",rollbackDepth:3,target:function(){var e='.tau-quick-add-dialog-general .tau-quick-add-dialog .tau-entity-controls .tau-control-set[data-type="Release"] input[data-fieldname="Name"]';return a(e)},complete:function(e){return e.$node.on("keypress",e.resolve),e}},o.stepSelectYourProject('.tau-quick-add-dialog-general .tau-quick-add-dialog .tau-entity-controls .tau-control-set[data-type="Release"] [data-fieldname="project"]',{rollbackDepth:4}),o.stepSelectToday('.tau-quick-add-dialog-general .tau-quick-add-dialog .tau-entity-controls .tau-control-set[data-type="Release"] [data-fieldname="StartDate"]',{rollbackDepth:5}),{message:"<p>Pick your release end date.</p>",rollbackDepth:6,target:function(){var e='.tau-quick-add-dialog-general .tau-quick-add-dialog .tau-entity-controls .tau-control-set[data-type="Release"] [data-fieldname="EndDate"]';return a(e)},complete:function(e){return e.$node.one("change",e.resolve),e}},{message:"<p>Click Add to create a release.</p>",rollbackDepth:7,target:function(){var e='.tau-quick-add-dialog-general .tau-quick-add-dialog .tau-entity-controls .tau-control-set[data-type="Release"] .tau-add-item';return a(e)},complete:function(e){return e.$node.click(e.resolve),e}},{message:"<p>Click here to hide the Quick Add screen. We will now proceed to the iteration planning.</p>",offset:30,target:function(){var e='.tau-app-secondary-pane .tau-quick-add[role="action-quick-add"]';return a(e)},complete:function(e){return e.$node.click(e.resolve),e}}]},{name:"Plan an Iteration",steps:[o.stepOpenBoard({boardName:"Iteration Plan",message:"<p>Let's open this board and break the release into iterations, as usually is done in Scrum planning.</p>"}),o.stepClickForQuickAdd({message:"<p>Click here to create a new iteration. You can create several iterations for one release.</p>",direction:"left",isScrollTo:!1,todoCellSelector:".i-role-board-body .i-role-header"}),{message:"<p>Give a name to your iteration, e.g. Iteration 0.</p>",rollbackDepth:2,direction:"left",target:function(){var e='.tau-quick-add-dialog .tau-entity-controls .tau-control-set[data-type="Iteration"] input[data-fieldname="Name"]';return a(e)},complete:function(e){return e.$node.on("keypress",e.resolve),e}},o.stepSelectYourProject('.tau-quick-add-dialog .tau-entity-controls .tau-control-set[data-type="Iteration"] [data-fieldname="project"]',{rollbackDepth:3,direction:"left"}),{message:"<p>Select the release you've just added.</p>",direction:"left",rollbackDepth:4,target:function(){var e='.tau-quick-add-dialog .tau-entity-controls .tau-control-set[data-type="Iteration"] .tau-field:eq(2)';return a(e)},complete:function(e){return e.$node.one("click",".tau-userStorySelector__control",e.resolve),e}},o.stepSelectToday('.tau-quick-add-dialog .tau-entity-controls .tau-control-set[data-type="Iteration"] [data-fieldname="StartDate"]',{rollbackDepth:5,direction:"left"}),{message:"<p>How long will your iteration be?</p>",rollbackDepth:6,direction:"left",target:function(){var e='.tau-quick-add-dialog .tau-entity-controls .tau-control-set[data-type="Iteration"] [data-fieldname="Duration"]';return a(e)},complete:function(e){return e.$node.on("keypress",e.resolve),e}},{message:"<p>Click Add. You can repeat these steps to create more iterations in the release.</p>",rollbackDepth:7,direction:"left",target:function(){var e='.tau-quick-add-dialog .tau-entity-controls .tau-control-set[data-type="Iteration"] .tau-add-item';return a(e)},complete:function(t){var r=i(".i-role-quick-add-success-message"),n=e.Deferred();return n.done(function(){var e=o.extractJustAddedEntityId(r);t.step.scenarioContext.set("step_IterationEntityId",e),o.resolveCtx(t)}),a(r,n,!0),t}},{message:"<p>Click here to hide the Quick Add screen.</p>",rollbackDepth:0,direction:"left",isScrollTo:!1,todoCellSelector:".i-role-board-body .i-role-header",target:function(){var e=this.todoCellSelector+" .tau-quick-add .tau-add";return a(e)},complete:function(e){return e.$node.one("click",function(){t.delay(e.resolve,3e3)}),e}},{message:["<p>Click here to see your new iteration.</p>",'<p class="tau-help-continue"><button class="i-role-next tau-btn tau-primary">Continue</button></p>'].join(""),direction:"none",isScrollTo:!1,target:function(o){var r=o.scenarioContext.get("step_IterationEntityId"),n='.i-role-cellaxis-viewtrigger[data-entity-id="'+r+'"]',i=e.Deferred();return i.done(t.bind(function(t){var o=this,a=e(t).data("id");o.scenarioContext.set("step_IterationSliceId",a)},o,n)),a(n,i),i},complete:function(e){var t=e.$holder.tauBubble("getContent");return t.on("click",".i-role-next",e.resolve),e}},{message:["<p>Expand the column. We will soon drag-n-drop cards here to plan this iteration.</p>"].join(""),direction:"none",isScrollTo:!1,target:function(t){var o=t.scenarioContext.get("step_IterationEntityId"),a='.i-role-cellaxis-viewtrigger[data-entity-id="'+o+'"]',r=e(a).closest(".i-role-cell").find(".i-role-axis-mark-collapser"),n=e.Deferred();return n.resolve(r),n},complete:function(e){return e.$node.one("click",e.resolve),e}},{message:["<p>Select the story cards you want to assign to this iteration.</p>",'<p class="tau-help-continue"><button class="i-role-next tau-btn tau-primary">Continue</button></p>'].join(""),direction:"left",isScrollTo:!1,targetCellSelector:".i-role-grid .i-role-cellholder .i-role-cell:eq(0)",target:function(){var e=this.targetCellSelector+" .i-role-card:eq(0) .i-role-name";return a(e)},complete:o.complete},{message:["<p>Drag-n-drop the selected cards to the iteration.</p>",'<p class="tau-help-card-dnd-horizontal"></p>'].join(""),direction:"none",isScrollTo:!1,targetCellSelector:".i-role-grid .i-role-cellholder .i-role-cell:eq(0)",target:function(o){var n=o.scenarioContext.get("step_IterationSliceId"),i='.i-role-grid .i-role-cellholder[data-x="'+n+'"]:eq(0)',l=e(i);return r(l,"Drop the cards here"),a(t.bind(function(){var t=e(this.targetCellSelector+" .i-role-card.tau-selected:eq(0)");return t.length?t:e(this.targetCellSelector+" .i-role-card:eq(0)")},this))},complete:function(e){o.hideTooltipOnCardDnD(e);var t=e.step.scenarioContext.get("step_IterationSliceId"),r='.i-role-grid .i-role-cellholder[data-x="'+t+'"]:eq(0) .i-role-card';return a(r,e),e},teardown:function(t){var o=t.step.scenarioContext.get("step_IterationSliceId"),a=e('.i-role-grid .i-role-cellholder[data-x="'+o+'"]:eq(0)');n(a)}},{message:["<p>Take a look at the iteration burn down chart.</p>"].join(""),direction:"none",isScrollTo:!1,target:function(e){var t=e.scenarioContext.get("step_IterationSliceId"),o='.i-role-header .i-role-cellholder[data-x="'+t+'"] .tau-icon_name_burn-down';return a(o)},complete:function(e){return e.$node.one("click",e.resolve),e}},{message:["<p>You can use this chart later to check how close the real progress is to what you've planned.</p>",'<p class="tau-help-continue"><button class="i-role-next tau-btn tau-primary">Continue</button></p>'].join(""),direction:"none",target:function(){return a(".ui-popup.ui-popup_active_true.tau-page-entity .i-role-tabheaders .i-role-tabheader.selected")},complete:function(e){window.scrollTo(0,0);var t=e.$holder.tauBubble("getContent");return t.on("click",".i-role-next",e.resolve),e}},o.stepClickOrEscToClose({message:"<p>Click to get back to the board.</p>",targetSelector:".ui-popup.ui-popup_active_true.tau-page-entity .close"})]},{name:"Break stories into tasks (optional)",steps:[o.stepOpenBoard({boardName:"Task Board",message:["<p>Sometimes you need to break User Stories into Tasks, e.g. for a more accurate planning.</p>","<p>Let's open the Task Board to see how this is done.</p>"].join("")}),o.stepClickForQuickAdd({message:"<p>Click to add a task to this user story. The task will appear in the ToDo (Open) state.</p>",direction:"right",offset:-15,isScrollTo:!1,todoCellSelector:".tau-grid tr:eq(1) .tau-cellholder:eq(0)"}),{message:"<p>Give a name to your task.</p>",rollbackDepth:2,direction:"left",target:function(){return a(".tau-quick-add-dialog input.Name")},complete:function(e){return e.$node.one("keypress",e.resolve),e}},o.stepSelectYourProject(".tau-quick-add-dialog select.project",{rollbackDepth:3,direction:"left"}),{message:"<p>Click to add this task to your user story. You can repeat these steps to add more tasks.</p>",rollbackDepth:4,direction:"left",target:function(){return a(".tau-quick-add-dialog .tau-add-item")},complete:function(e){return e.$node.one("click",function(){a(i(".i-role-quick-add-success-message"),e,!0)}),e}},{message:["<p>Here's your new task.</p>",'<p class="tau-help-continue"><button class="i-role-next tau-btn tau-primary">Continue</button></p>'].join(""),pin:!1,target:function(e){var t=o.extractJustAddedEntityId(i(".i-role-quick-add-success-message"));e.scenarioContext.set("step_justAddedTaskId",t);var r='.tau-grid tr:eq(1) .tau-cellholder:eq(0) .i-role-card[data-entity-id="'+t+'"]';return a(r)},complete:function(e){var t=e.$holder.tauBubble("getContent");return t.one("click",".i-role-next",e.resolve),e}},{message:["<p>Double-click the task card for details.</p>",'<p class="tau-help-card-dblclick"></p>'].join(""),target:function(e){var t=e.scenarioContext.get("step_justAddedTaskId"),o='.tau-grid tr:eq(1) .tau-cellholder:eq(0) .i-role-card[data-entity-id="'+t+'"]';return a(o)},complete:function(e){return e.$node.one("dblclick",e.resolve),e}},{message:'<p>You can assign this task to yourself. Click "Assign to Me".</p>',direction:"left",target:function(){var e=".tau-page-entity .additional-info .assignments-table .add-btn:eq(0)";return a(e)},complete:function(e){window.scrollTo(0,0);var t='.tau-page-entity .additional-info .assignments-table .user-list [role="user"]';return a(t,e),e}},o.stepClickOrEscToClose({message:"<p>Click to get back to the board</p>"}),o.stepClickForQuickAdd({message:["<p>Click + to add more tasks (optional).</p>",'<p><button class="i-role-next tau-btn tau-primary">Got it, thanks</button></p>'].join(""),isScrollTo:!1,direction:"left",offset:-5,todoCellSelector:".tau-grid tr:eq(1) .tau-cellholder:eq(0)",complete:o.complete})]},o.flowUserGuide];return l});
define('tau/services/help-scenarios',["jQuery","Underscore","tau/services/help-scenarios/basic-intro","tau/services/help-scenarios/kanban","tau/services/help-scenarios/scrum"],function(e,t,n,o,r){function i(t){t.$holder=e("<div></div>").appendTo("body");var n={alignTo:t.$node,content:"<span>"+t.message+"</span>",zIndex:10001,template:u,showOnCreation:!0,className:"tau-warning-bubble"+(t.step.pin===!1?"":" i-role-taububble-ignore"),showEvent:null,hideEvent:null,mode:"bubble",stackName:"help-flow",dontCloseSelectors:["body"]},o=t.step.hasOwnProperty("offset")?t.step.offset:-5;"left"===t.step.direction?n.onPositionConfig=function(e){return e.at="left center",e.my="right center",e.offset="0 "+o,e}:"none"!==t.step.direction&&(n.onPositionConfig=function(e){return e.at="right center",e.my="left center",e.offset="0 "+o,e}),t.$holder.tauBubble(n)}function a(e){if(e.step.attractor!==!1){var n=b(e),o=n.direction,r=n.position;if(r.top*r.left!==0){var i=t.bind(function(e,t){var n="r"===t,o=n?"right-15 center":"center center";e.$node.is(":visible")&&e.$attractor.position({my:"center",at:o,of:e.$node,collision:"none"})},this,e,o),a=e.$attractor.offset(),s=t.max([Math.abs(a.top-r.top),Math.abs(a.left-r.left)]);e.$attractor.animate(r,{complete:i,queue:!0,duration:s>300?1e3:600})}}}function s(e){if(e.step.attractor!==!1){var t=b(e),n=t.direction,o="r"===n,r=o?"right-15 center":"center center";e.$attractor.position({my:"center",at:r,of:e.$node,collision:"none"})}}function c(e){d=setTimeout(function(){e.$attractor.removeClass("tau-animated-attractor")},500)}function l(n){function o(){r&&(n.$node.hasClass("i-role-help-disable-tooltip")?n.$holder.tauBubble("hide"):n.$node.is(":visible")?(s(n),n.$holder.tauBubble("show")):(e.contains(document.documentElement,n.$node[0]),n.reject()),t.delay(o,500))}var r=!0;t.delay(o,500),n.stopMonitoring=function(){r=!1}}var u=['<div class="tau-bubble">','    <div class="tau-bubble__arrow" role="arrow"></div>','    <div class="tau-bubble__inner tau-container">','        <div role="content"></div>',"    </div>","</div>"].join(""),d=null,f=function(){clearTimeout(d);var t=e(".i-role-attention-attractor");return 0===t.length&&(t=e('<div class="i-role-attention-attractor tau-help-attention-attractor"></div>'),t.appendTo("body")),t},b=function(e){e.$attractor=f(),e.$attractor.addClass("tau-animated-attractor");var t=e.$node.offset(),n=e.$node.width(),o=e.$node.height(),r=n>100?"r":"c",i="r"===r?n-15:n/2;return t.left+=10+i,t.top+=o/2,{position:t,direction:r}},p={},m={get:function(e){return p[e]},set:function(e,t){return p[e]=t}},h={setup:function(n,o){var r=t.extend(e.Deferred(),{$node:n,globalBus:this.globalBus,message:o.message,step:o,scenarioContext:m});return o.isScrollTo!==!1&&r.$node[0].scrollIntoView(!1),o.custom!==!0&&(i(r),l(r),a(r)),r},teardown:function(e){e.step.custom!==!0&&(e.stopMonitoring(),e.$holder.tauBubble("destroy").remove(),c(e))}},v=[{id:"",name:"Select Help Scenario",sections:[{name:"Select help flow above ↑",steps:[]}]},{id:"scratch",requiredProject:null,requiredProjectName:null,name:"Basic Intro",sections:n},{id:"scrum",requiredProject:13,requiredProjectName:"Tau Product Web Site - Scrum #1",name:"Scrum Getting Started",sections:r},{id:"kanban",requiredProject:2,requiredProjectName:"Tau Product - Kanban #1",name:"Kanban Getting Started",sections:o}];return{utils:h,scenarios:t.toObject(v,"id")}});
define('tau/services/service.help-scenarios',["jQuery","Underscore","tau/core/class","tau/core/event2","tau/services/service.help-scenario-runner","tau/services/help-scenarios"],function(e,t,n,r,i,o){var s=n.extend({_defaultsScenarios:function(){this.currentSectionId=-1,this.scenarios=t.deepClone(o.scenarios)},init:function(e){var t=this;t.configurator=e.configurator,t._state=0,t.currentFlowId=null,t._defaultsScenarios(),t.stateTypes={Stopped:0,ToBeStarted:1,InProgress:2,Aborted:3,Done:4}},createBoardFromTemplate:function(n){var r=e.Deferred(),i=this.configurator,o={$where:'publicData.name=="\\"'+n+'\\""',$fields:["key","publicData.name","publicData.definition"],$limit:{start:0,max:50}};return i.getRestStorage().select("boardTemplates",o).done(function(e,n){var i=n.data[0];if(!i)return void r.reject();var o=this.configurator.getBoardDefinitionFactory(),s=o.createForLoggedUser();s.name=i.name,o.createBoard(s).done(function(e){var n=this.configurator.getBoardSettingsFactory().create(e),o=t.extend({isDraft:!1},e,i.definition);n.setDef({set:o}).done(r.resolve)}.bind(this))}.bind(this,r)),r.promise()},setState:function(e){this._state=e},getState:function(){return this._state},run:function(e){var n=this,r=n.getScenarioById(e);n.scenarioRunner=new i({configurator:n.configurator,scenario:r,methods:{setup:o.utils.setup,teardown:o.utils.teardown}}),n.scenarioRunner.on("next",t.bind(n.handleNextStep,n)),n.scenarioRunner.on("done",t.bind(n.handleDoneStep,n)),n.scenarioRunner.start(),n.setState(n.stateTypes.InProgress),n.fire("run.scenario",{scenarioId:e})},abort:function(){this.scenarioRunner&&this.scenarioRunner.abort(),this.setState(this.stateTypes.Aborted),this._defaultsScenarios(),this.fire("abort.scenario")},handleDoneStep:function(){this.markSection("done"),this.setState(this.stateTypes.Done),this.fire("done.scenario",{})},handleNextStep:function(e){var t=e.data,n=t.section.id;this.currentSectionId!=n&&(this.markSection("done"),this.currentSectionId=n,this.markSection("active"),this.fire("next.section",{})),this.fire("next.step",{})},markSection:function(e){var t=this.getScenarioById(this.currentFlowId).sections[this.currentSectionId];t&&(t.state=e)},getAvailableFlows:function(){return t.toObject(this.scenarios,"id")},setCurrentFlow:function(e){this.currentFlowId=e},getCurrentFlow:function(){return this.currentFlowId},getScenarios:function(){return t.map(this.scenarios,t.identity)},checkScenarioPrerequisites:function(e,n){var r=n.requiredProject,i=t.contains(e.selectedProjectIds||[],n.requiredProject),o=t.contains(t(e.selectedProjects||[]).pluck("name"),n.requiredProjectName);return!r||i&&o},getScenarioById:function(e){var n=this.scenarios[e]||{};return t.defaults(n,{sections:[]})},getSubFlows:function(e){var n=this.getScenarioById(e);return t(n.sections).map(function(e,t){return{id:t,name:e.name,state:e.state}})}});return r.implementOn(s.prototype),s});
define('tau/services/service.board.access',["Underscore"],function(n){return{isOwner:function(i,r){return n.contains(i.ownerIds,r.id)},isEditable:function(n,i){return this.isOwner(n,i)||i.isAdministrator}}});
define('tau/components/board.changelog/templates/template.board.changelog',["Underscore","tau/core/templates-factory"],function(a,e){var l={engine:"jqote2",name:"template.board.changelog",markup:['<div class="tau-changelog" style="display: none;">','<div class="popup-header">','<div id="changeLogPopupHeader" class="popup-title">What\'s new in build <span class="tau-changelog-version">&hellip;</span></div>',"</div>",'<div class="tau-changelog-iframe-holder">','<iframe class="tau-changelog-iframe"></iframe>',"</div>",'<div class="paging">','<a href="#" class="button tau-changelog-prev disable">&hellip;</a>','<a href="#" class="button tau-changelog-next disable">&hellip;</a>','<a href="http://targetprocess.com/agileproductblog/" class="blog-link" target="_blank">Product blog</a>',"</div>","</div>"]};return e.register(l)});
define('tau/components/board.changelog/views/view.board.changelog',["Underscore","tau/core/class","tau/components/board.changelog/templates/template.board.changelog"],function(t,i,s){return i.extend({init:function(){this._isShown=!1,this.onPopupClosed=t.Callbacks(),this._$popup=s.render(),this._$popup.find(".tau-changelog-prev").click(this._move.bind(this,function(t){return t+1})),this._$popup.find(".tau-changelog-next").click(this._move.bind(this,function(t){return t-1})),this._$popup.tauPopup({className:"tau-changelog-popup",hideOnEscape:!0,popupContent:this._$popup,hide:this.hidePopup.bind(this)}),this._widget=this._$popup.tauPopup("widget"),this._widget.tauProgressIndicator()},showPopup:function(){this._isShown||(this._isShown=!0,this._widget.tauProgressIndicator("show"),this._$popup.tauPopup("show"))},hidePopup:function(){this._isShown&&(this._isShown=!1,this._$popup.tauPopup("widget").find(".tau-changelog").hide(),this._$popup.tauPopup("hide"),this._versions=null,this.onPopupClosed.fire())},setPopupData:function(t){if(0===t.length)throw new Error("It should be at least 1 version");this._versions=t,this._showVersion(0)},_move:function(t){var i=t(this._$popup.tauPopup("widget").data("current"));if(0>i||i>=this._versions.length)throw new Error("Index is out of range");this._showVersion(i)},_processButton:function(t,i,s,o){i>=0&&i<this._versions.length?s.removeClass("disable").html(o(this._versions[i].version)):s.addClass("disable").html(this._versions[t].version)},_showVersion:function(t){this._widget.tauProgressIndicator("show"),this._processButton(t,t-1,this._widget.find(".tau-changelog-next"),function(t){return t+"&nbsp;&gt;"}),this._processButton(t,t+1,this._widget.find(".tau-changelog-prev"),function(t){return"&lt;&nbsp;"+t}),this._widget.find(".tau-changelog-version").text(this._versions[t].version),this._widget.find(".tau-changelog-iframe").hide().load(function(t){this._widget.find(".tau-changelog").show(),this._widget.tauProgressIndicator("hide"),$(t.target).show()}.bind(this)).attr({src:this._versions[t].url}),this._widget.find(".tau-changelog").show(),this._$popup.tauPopup("widget").data("current",t)}})});
define('tp/gateway',["jQuery"],function(t){function n(){}return n.prototype={postJSON:function(n,e,o,s,a){t.ajax({url:n,data:e?JSON.stringify(e):e,success:o,error:t.proxy(function(t){if(t&&t.getResponseHeader){var n=t.getResponseHeader("content-type");n&&(-1!=n.indexOf("application/json")?400==t.status&&s?s(t):500==t.status&&a&&a(t):a&&a(t))}},this),type:"POST",dataType:"json",contentType:"application/json"})},getJSON:function(n,e){return t.ajax({url:n,dataType:"json",contentType:"application/json",success:e})}},new n});
define('tau/components/board.changelog/models/model.board.changelog',["Underscore","jQuery","tau/core/class","tp/gateway","app.path"],function(e,t,n,r,a){return n.extend({retrieveData:function(){return r.getJSON(a.get()+"/changelogs")},setSeen:function(e){return r.postJSON(a.get()+"/changelogs",{version:e})}})});
define('tau/components/board.changelog/controllers/controller.board.changelog',["Underscore","tau/core/class","tau/components/board.changelog/views/view.board.changelog","tau/components/board.changelog/models/model.board.changelog"],function(e,i,n,o){return i.extend({init:function(i){this.onError=e.Callbacks(),this._model=i||new o,this._view=new n,this._view.onPopupClosed.add(this._updateSeenVersion.bind(this))},checkNewVersion:function(){this._model.retrieveData().done(function(e){e.newVersion&&(this._newVersion=e.newVersion,this._view.showPopup(),this._view.setPopupData(e.versions))}.bind(this))},show:function(){this._view.showPopup(),this._model.retrieveData().done(function(e){this._newVersion=null,this._view.setPopupData(e.versions)}.bind(this)).fail(this._serverError.bind(this))},_serverError:function(){this._view.hidePopup();var e=["Targetprocess was updated. See ",'<a style="font-size:20px !important" target="_blank" href="http://www.targetprocess.com/agileproductblog/tag/changelog">what\'s new</a>'].join("");this.onError.fire({message:e,type:"information"})},_updateSeenVersion:function(){this._newVersion&&this._model.setSeen(this._newVersion)}})});
define('tau/store/services/service.auditHistory',["Underscore","jQuery","tau/core/class"],function(t,e,n){var i=n.extend({init:function(t){this.baseUrl=t+"/Services/AuditHistoryService.asmx/"},getActionUrl:function(t){return this.baseUrl+t},getChangeGroups:function(t){var e={keys:t};return this.sendRequest("GetChangeGroups",e)},getAuditRecordsLimited:function(t,e,n){var i={entityID:t,start:e,limit:n};return this.sendRequest("GetAuditRecordsLimited",i)},sendRequest:function(t,n){return e.ajax({url:this.getActionUrl(t),contentType:"application/json",type:"POST",data:JSON.stringify(n)})}});return i});
define('tau/libs/store2/store2',["Underscore","jQuery","tau/core/class"],function(e,t,r){var n=r.extend({init:function(e){this.loggedUser=e.getLoggedUser(),this.path=e.getApplicationPath()+"/api/v2/",this.service=t.ajax},escapeExpressionArgument:function(t){return encodeURIComponent(this._jsEscape(e.asString(t)))},getTeamsProjectsAvailable:e.memoize(function(t){var r="User?select={AvailableProjects() as projects, AvailableTeams() as teams, AvailableProcesses() as availableProcesses}&where=(id == "+t+")",n=this.path+r;return this.service({url:n}).then(function(t){var r={projects:[],teams:[]};return 1===t.items.length?e.defaults(t.items[0],r):r})}),getApplicationContext:function(r){var n=function(t){if(t.acid)return"acid="+t.acid;t.ids=t.id||t.ids,t.ids||(t.projectIds=t.projectIds||t.projectId||"*",t.teamIds=t.teamIds||t.teamId||"*");var r=["fields","failureGlobal","id"];return e.chain(t).keys().filter(function(e){return r.indexOf(e)<0&&t[e]}).map(function(e){return e+"="+t[e]}).value().join("&")},a=n(r);return this.service({url:this.path+"Context?"+a,contentType:"application/json; charset=utf-8",dataType:"json"}).then(function(e){return{context:e,projects:e.availableProjects,teams:e.availableTeams}}).fail(function(e){e.response=t.parseJSON(e.responseText||null)})},findAll:function(e){return this.service({url:this.path+e}).then(function(e){return e.items})},_jsEscape:function(e){return e.replace(/(["'\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")}});return n.prototype.arg=n.prototype.escapeExpressionArgument,n});
define('tau/services/service.prototypeContextEntity',["Underscore","tau/core/class"],function(e,t){return t.extend({init:function(){this._currentPrototype={}},updateContextPrototype:function(t){var r=e.clone(this._currentPrototype);this._currentPrototype=t,this._extendProcess(this._currentPrototype,r.processes)},_extendProcess:function(t,r){var n=t.processes,s=e.pluck(n,"id"),o=e.pluck(r,"id"),c=e.difference(o,s);if(0!==c.length){var i=e.reduce(r,function(t,r){return e.contains(c,r.id)&&t.push(r),t},[]);this._currentPrototype.processes=n.concat(i)}},tryBuildContextFromContextPrototype:function(t,r){var n=this._currentPrototype;if(e.isEmpty(n)||void 0===t)return!1;var s=e.clone(n);s.projectIdsAvailable=[t||null],s.teamIdsAvailable=[r||null],s.selectedProjects=e.filter(s.selectedProjects,function(e){return e.id==t}),s.selectedTeams=e.filter(s.selectedTeams,function(e){return e.id==r});var o;if(t){var c=e.find(s.selectedProjects,function(e){return e.id==t}),i=c&&c.process&&c.process.id;o=function(e){return e.id==i}}else o=function(e){return e.isDefault===!0};return s.processes=e.filter(n.processes,o),0===s.processes.length?!1:s}})});
define('tau/services/service.diagnostics',["Underscore","tau/core/class","tau/core/event"],function(e,t,n){var r=t.extend({storage:{},init:function(e){window.performance&&window.performance.timing&&(this.storage.page={server:window.performance.timing.responseEnd-window.performance.timing.navigationStart,client:window.performance.timing.loadEventEnd-window.performance.timing.responseEnd}),this._configurator=e.configurator,this._window=this._configurator.getWindow()},set:function(e,t){this.storage[e]=t,this.fire(e,t)},remove:function(e){delete this.storage[e]},get:function(e){return this.storage[e]},page:function(){return this.get("page")},networkLatency:function(){var t=e.range(10).map(function(){return this._networkLatencyCall()}.bind(this));return $.whenList(t).then(function(){var t=e.chain(arguments).filter(function(e){return"success"===e.status}),n=t.reduce(function(e,t){return e+t.latency},0).value()/t.value().length,r=t.map(function(e){return e.timestamp}).first().value();return{timestamp:r,latency:n}})},_networkLatencyCall:function(){var e;return $.ajax({url:this._getDiagnosticsUrl("ServerTime"),dataType:"json",contentType:"application/json",async:!1,beforeSend:function(){e=(new Date).getTime()}}).then(function(t,n){return{timestamp:"success"===n?new Date(t):"N/A",status:n,latency:(new Date).getTime()-e}})},networkSpeed:function(){var e;return $.ajax({url:this._getDiagnosticsUrl("SampleFile"),contentType:"image/png",async:!1,beforeSend:function(){e=(new Date).getTime()}}).then(function(){var t=(new Date).getTime()-e,n=this.complete&&"undefined"!=typeof this.naturalWidth&&0!==this.naturalWidth?"success":"failed";return{status:n,speed:t}})},jsBenchmark:function(){for(var e=1e7,t=0,n=1,r=(new Date).getTime(),i=0;e>=i;i++)t=t+4/n-4/(n+2),n+=4;return(new Date).getTime()-r},serverUsage:function(){return $.ajax({url:this._getDiagnosticsUrl("usage"),dataType:"json",contentType:"application/json"}).then(function(e){return e})},memoryUsage:function(){if(this._window.performance&&this._window.performance.memory){var e=1048576;return{jsHeapSizeLimit:this._window.performance.memory.jsHeapSizeLimit/e,usedJSHeapSize:this._window.performance.memory.usedJSHeapSize/e,totalJSHeapSize:this._window.performance.memory.totalJSHeapSize/e}}return null},_detectBrowser:function(){var e=this._window.navigator.userAgent;return/Firefox[\/\s](\d+\.\d+)/.test(e)?"Firefox "+new Number(RegExp.$1):/MSIE (\d+\.\d+);/.test(e)||/Trident.*rv[ :]*(\d+)/.test(e)?"IE "+new Number(RegExp.$1):/Opera[\/\s](\d+\.\d+)/.test(e)||/OPR[\/\s](\d+\.\d+)/.test(e)?"Opera "+new Number(RegExp.$1):/Chrome[\/\s](\d+\.\d+)/.test(e)?"Chrome "+new Number(RegExp.$1):/Version\/(\d+).*Safari/.test(e)||/Safari[\/\s](\d+\.\d+)/.test(e)?"Safari "+new Number(RegExp.$1):e},browser:function(){var e=this.jsBenchmark(),t=this.page(),n=t?{processing:t.client,network:t.server}:null;return{language:this._window.navigator.language,platform:this._window.navigator.platform,userAgent:this._detectBrowser(),benchmark:e,timing:n,memory:this.memoryUsage()}},sendReport:function(e){return $.ajax({url:this._getDiagnosticsUrl("SendReport"),data:JSON.stringify(e),type:"POST",dataType:"json",contentType:"application/json"})},_getDiagnosticsUrl:function(e){return this._configurator.getApplicationPath()+"/diagnostics/v1/"+e}});return n.implementOn(r.prototype),r});
define('tau/services/service.sample.data.api',["Underscore","tau/core/class","tau/core/event"],function(t,a,e){var n=a.extend({storage:{},init:function(t){this._configurator=t.configurator},sampleData:function(){return $.ajax({url:this._getCallUrl("data"),dataType:"json",type:"GET"})},clearSampleData:function(t){return $.ajax({url:this._getCallUrl("clear"),type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(t)})},_getCallUrl:function(t){return this._configurator.getApplicationPath()+"/sampleData/v1/"+t}});return e.implementOn(n.prototype),n});
define('tau/service.container',["require","Underscore","libs/jquery/jquery","tau/core/class","tau/core/bus.reg","tau/core/global.bus","tau/store/factory","tau/services/keyboard.manager","tau/services/state.manager","tau/services/service.routing","tau/services/service.hash","tau/utils/utils.routing","tau/utils/utils.history","tau/utils/utils.urlBuilder.service","libs/parseUri","tau/nls/translator","tau/store/services/service.globalSettings","tau/services/service.applicationContext","tau/store/services/service.notifications","tau/store/services/service.actions","tau/storage/api","tau/libs/boardSettings/factory.board.settings","tau/services/boards/service.boards.api","tau/slice/slice.factory","tau/utils/utils.titleManager","tau/utils/utils.base64hashEncoder","tau/services/service.componentBuilder","tau/core/bus.collection","tau/libs/clipboard/clipboard.manager","tau/ui/ui.templateFactory","tau/routers/routers.base","tau/utils/utils.redirect","tau/utils/utils.date/utils.date.wrapper","tau/utils/utils.date","tau/utils/utils.constants","tau/services/service.avatar","tau/services/service.features","tau/services/comet/comet.connection","tau/services/comet/service.comet","tau/services/service.tp2","tau/services/service.boardCacheData","tau/services/customize/service.customize.units.registry","tau/services/customize/service.customize.units.customField.factory","tau/services/service.help-scenarios","tau/services/service.board.access","tau/components/board.changelog/controllers/controller.board.changelog","tau/store/services/service.auditHistory","tau/libs/store2/store2","tau/services/service.prototypeContextEntity","tau/services/service.diagnostics","tau/services/service.sample.data.api"],function(t){var e=t("Underscore"),i=t("libs/jquery/jquery"),r=t("tau/core/class"),s=t("tau/core/bus.reg"),n=t("tau/core/global.bus"),o=t("tau/store/factory"),a=t("tau/services/keyboard.manager"),c=t("tau/services/state.manager"),u=t("tau/services/service.routing"),h=t("tau/services/service.hash"),g=t("tau/utils/utils.routing"),v=t("tau/utils/utils.history"),l=t("tau/utils/utils.urlBuilder.service"),S=t("libs/parseUri"),d=t("tau/nls/translator"),p=t("tau/store/services/service.globalSettings"),f=t("tau/services/service.applicationContext"),y=t("tau/store/services/service.notifications"),b=t("tau/store/services/service.actions"),w=t("tau/storage/api"),m=t("tau/libs/boardSettings/factory.board.settings"),C=t("tau/services/boards/service.boards.api"),F=t("tau/slice/slice.factory"),P=t("tau/utils/utils.titleManager"),x=t("tau/utils/utils.base64hashEncoder"),R=t("tau/services/service.componentBuilder"),B=t("tau/core/bus.collection"),A=t("tau/libs/clipboard/clipboard.manager"),E=t("tau/ui/ui.templateFactory"),M=t("tau/routers/routers.base"),O=t("tau/utils/utils.redirect"),D=t("tau/utils/utils.date/utils.date.wrapper"),H=t("tau/utils/utils.date"),U=t("tau/utils/utils.constants"),k=t("tau/services/service.avatar"),q=t("tau/services/service.features"),W=t("tau/services/comet/comet.connection"),z=t("tau/services/comet/service.comet"),I=t("tau/services/service.tp2"),j=t("tau/services/service.boardCacheData"),L=t("tau/services/customize/service.customize.units.registry"),T=t("tau/services/customize/service.customize.units.customField.factory"),N=t("tau/services/service.help-scenarios"),_=t("tau/services/service.board.access"),G=t("tau/components/board.changelog/controllers/controller.board.changelog"),K=t("tau/store/services/service.auditHistory"),J=t("tau/libs/store2/store2"),Q=t("tau/services/service.prototypeContextEntity"),V=t("tau/services/service.diagnostics"),X=t("tau/services/service.sample.data.api"),Y=r.extend({_config:{},isBoardEdition:!1,init:function(){this.registeredServices={hashEncoder:x},this.registerService("urlBuilder",new l(this))},getUrlBuilder:function(){return this.service("urlBuilder")},setLoggedUser:function(t){this.loggedUser=t},getLoggedUser:function(){return this.loggedUser||this.getWindow().loggedUser},setSystemInfo:function(t){this.systemInfo=t},getSystemInfo:function(){var t=this.systemInfo||this.getWindow().tauSystemInfo;return e.clone(t)},setRequireLoader:function(t){this.require=t},getRequireLoader:function(){return this.require||window.require},getComponentBuilder:function(){return this.componentBuilder=this.componentBuilder||new R(this),this.componentBuilder},require:function(t,e){var i=this.require||window.require;i(t,e)},setRestStorage:function(t){this.restStorage=t},getRestStorage:function(){return this.restStorage||(this.restStorage=new w({service:this.getRestStorageService()})),this.restStorage},setRestStorageService:function(t){this.restStorageService=t},getRestStorageService:function(){return this.restStorageService||(this.restStorageService=i.ajax),this.restStorageService},setBoardSettingsOptions:function(t){this.boardSettingsOptions=t},getBoardSettingsOptions:function(){return this.boardSettingsOptions},getBoardSettingsFactory:function(){return this.boardSettingsFactory||(this.boardSettingsFactory=new m(this)),this.boardSettingsFactory},getBoardApiService:function(){return this.boardApiService||(this.boardApiService=new C({service:this.getRestStorageService()})),this.boardApiService},setBoardApiService:function(t){this.boardApiService=t},getStoreFactory:function(){return this.storeFactory||(this.storeFactory=new o),this.storeFactory},setStoreFactory:function(t){this.storeFactory=t},setSliceFactoryOptions:function(t){this.sliceFactoryOptions=t||{}},mergeSliceFactoryOptions:function(t){this.sliceFactoryOptions=e.extend(this.sliceFactoryOptions||{},t)},getSliceFactoryOptions:function(){return e.defaults(this.sliceFactoryOptions||{},{base64:!0,options:{DnDTurnOffCometWhenItemsCountExceed:50},service:this.getSliceService()})},getSliceFactory:function(){if(!this.sliceFactory){var t=this.getSliceFactoryOptions();this.sliceFactory=new F(t)}return this.sliceFactory},setSliceService:function(t){this.sliceService=t},getSliceService:function(){return this.sliceService||(this.sliceService=i.ajax),this.sliceService},getKeyBoardManager:function(){if(!this.keyboardManager){this.keyboardManager=new a;var t={handleKeyDown:function(t){t.keyCode==i.ui.keyCode.ESCAPE&&(t.preventDefault(),t.stopPropagation())}};this.keyboardManager.pushHandler(t)}return this.keyboardManager},setGlobalSettingsService:function(t){this.globalSettingsService=t},getGlobalSettingsService:function(){if(!this.globalSettingsService){var t={appPath:this.getApplicationPath()};this.globalSettingsService=new p(t)}return this.globalSettingsService},setApplicationContextService:function(t){this.applicationContextService=t},getApplicationContextService:function(){return this.applicationContextService||(this.applicationContextService=new f(this),this.applicationContextService.isBoardEdition=this.isBoardEdition),this.applicationContextService},setNotificationService:function(t){this.notificationService=t},getNotificationService:function(){if(!this.notificationService){var t={appPath:this.getApplicationPath()};this.notificationService=new y(t)}return this.notificationService},setActionsService:function(t){this.actionsService=t},getActionsService:function(){if(!this.actionsService){var t={appPath:this.getApplicationPath()};this.actionsService=new b(t)}return this.actionsService},clearSingles:function(){this.getStoreFactory().clearSingles()},clear:function(){this.clearSingles(),delete this.currentDate,delete this.external,delete this.window,delete this.routing,delete this.stateManager,this.getStoreFactory().clear(),this.getBoardSettingsFactory().clear(),this.getBusRegistry().clear()},getAppStateStore:function(){return this.acidStore=this.acidStore||this.getBoardSettingsFactory().createAcidSettings({id:"appConfig"}),this.acidStore},getAuditHistoryService:function(){return this.auditHistoryService=this.auditHistoryService||new K(this.getApplicationPath()),this.auditHistoryService},getCurrentAcid:function(){var t="",e=this.getWindow();return e.location&&e.location.href&&(t=S(e.location.href).queryKey.acid||t),t},setWindow:function(t){this.window=t},getWindow:function(){return this.window||window},getHistory:function(){return this.history||(this.history=new v),this.history},createRouting:function(t){var e={window:this.getWindow()};return t&&(e.safe=!0,e.v2=!0,e.safeParameterName=t,e.configurator=this),new g(e)},getRouting:function(t){return this.routing||(this.routing=this.createRouting(t)),this.routing},getTitleManager:function(){return this.titleManager||(this.titleManager=new P({window:this.getWindow()})),this.titleManager},getTranslator:function(){return d},setCurrentDate:function(t){this.currentDate=new D(t)},getCurrentDate:function(){return this.currentDate?this.currentDate:H.getServerNow()},getGlobalBus:function(){return n.get()},getBusRegistry:function(){return s},getComponentBusRegistry:function(){return this.componentBusRegistry||(this.componentBusRegistry=new B),this.componentBusRegistry},setApplicationPath:function(t){this.getStoreFactory().setApplicationPath(t)},getApplicationPath:function(){return this.getStoreFactory().getApplicationPath()},getCkPath:function(){return this.ckPath||(this.ckPath=this.getApplicationPath()+"/Ckeditor"),this.ckPath},setCkPath:function(t){this.ckPath=t},setInitialData:function(t){this.getStoreFactory().setInitialData(t)},setService:function(t){this.getStoreFactory().setService(t)},getService:function(){return this.getStoreFactory().getService()},getRestPath:function(){return this.getStoreFactory().getRestPath()},setProxy:function(t){this.getStoreFactory().setProxy(t)},getProxy:function(){return this.getStoreFactory().getProxy()},disableRules:function(){this.getStoreFactory().disableRules()},enableRules:function(){this.getStoreFactory().enableRules()},initRules:function(){this.getStoreFactory().initRules()},getStore:function(t){return t=t||{},t.services=t.services||this,this.getStoreFactory().getStore(t)},getStore2:function(){return this.store2=new J(this),this.store2},setConfig:function(t,e){this._config[t]=e},getConfig:function(t,e){return this._config.hasOwnProperty(t)?this._config[t]:e},setHashEncoder:function(t){return this.registerService("hashEncoder",t)},getHashEncoder:function(){return this.service("hashEncoder")},getStateManager:function(){var t=this;if(!t.stateManager){var e=t.getExternal(),i=new u({external:e});t.stateManager=new c({service:i,state:e.hashParams()});var r=function(){var i=e.hashParams();t.stateManager?t.stateManager.update(i):e.unbindHashChange(r)};e.onHashChange(r)}return t.stateManager},getSettingsManager:function(){return this.settingsManager=this.settingsManager||this.getBoardSettingsFactory().createComponentSettings({id:"board"}),this.settingsManager},setClipboardManagerOptions:function(t){this.clipboardManagerOptions=t},getClipboardManagerOptions:function(){return e.defaults(this.clipboardManagerOptions||{},{id:"clipboard"})},getClipboardManager:function(){return this.clipboardManager||(this.clipboardManager=new A(this.getBoardSettingsFactory().createComponentSettings(this.getClipboardManagerOptions()))),this.clipboardManager},setRouter:function(t){this.router=t},getRouter:function(){return this.router||(this.router=new M),this.router},setRedirect:function(t){this.redirect=t},getRedirect:function(){return this.redirect||(this.redirect=new O(this.getWindow(),this.getApplicationPath())),this.redirect},getTemplateFactory:function(){return E},getConstObject:function(){return U},getAvatarService:function(){return this.avatarService||(this.avatarService=new k(this.getApplicationPath())),this.avatarService},setAvatarService:function(t){this.avatarService=t},createChild:function(){var t=new Y;return t.getStoreFactory().setStore(this.getStore()),t.isBoardEdition=this.isBoardEdition,t.featuresService=this.getFeaturesService(),t.acidStore=this.getAppStateStore(),t.setPrototypeContextEntityService(this.getPrototypeContextEntityService()),t.applicationContextService=this.getApplicationContextService(),t.loggedUser=this.getLoggedUser(),t},getFeaturesService:function(t){return this.featuresService||(this.featuresService=new q(t)),this.featuresService},setFeaturesService:function(t){return this.featuresService=new q(t),this.featuresService},getCometConnection:function(){var t="comet-connection";return this.registeredServices.hasOwnProperty(t)||this.registerService(t,W),this.service(t)},getComet:function(){return this.cometApi||(this.cometApi=new z(this.getCometConnection()),this.cometApi.logging=this.getFeaturesService().isEnabled("comet.collect-server-statistics")),this.cometApi},registerService:function(t,e){this.registeredServices[t]=e},service:function(t){if(!this.registeredServices.hasOwnProperty(t))throw new Error("Service ["+t+"] is not registered");return this.registeredServices[t]},setHashService:function(t){this.registerService("hash",t)},getHashService:function(){return this.registeredServices.hasOwnProperty("hash")||this.registerService("hash",new h(this)),this.service("hash")},createExternal:function(t){var e=this.getHashService();return e.setWindow(t),e},setExternal:function(t){this.setHashService(this.createExternal(t))},getExternal:function(){return this.getHashService()},setExternalService:function(t){return this.setHashService(t)},getTp2Service:function(){return this.registeredServices.hasOwnProperty("tp2")||this.registerService("tp2",new I(this)),this.service("tp2")},getBoardCacheService:function(){return this.registeredServices.hasOwnProperty("boardCacheData")||this.registerService("boardCacheData",new j(this)),this.service("boardCacheData")},getPrototypeContextEntityService:function(){return this.registeredServices.hasOwnProperty("prototypeContextEntity")||this.registerService("prototypeContextEntity",new Q),this.service("prototypeContextEntity")},setPrototypeContextEntityService:function(t){return this.registerService("prototypeContextEntity",t),this.service("prototypeContextEntity")},getChangelogController:function(){if(!this.registeredServices.hasOwnProperty("changelog")){var t=new G,e=this.service("errorBar");t.onError.add(e.fire.bind(e,"error")),this.registerService("changelog",t)}return this.service("changelog")},getUnitsRegistry:function(){return this.unitsRegistry||(this.unitsRegistry=new L),this.unitsRegistry},setUnitsRegistry:function(t){return this.unitsRegistry=t,this.unitsRegistry},getHelpScenarioService:function(){return this.registeredServices.hasOwnProperty("flow-help")||this.registerService("flow-help",new N({configurator:this})),this.service("flow-help")},getCustomFieldsUnitsFactory:function(){return this.customFieldsUnitsRegistry||(this.customFieldsUnitsRegistry=new T(this)),this.customFieldsUnitsRegistry},getBoardAccessService:function(){return _},getDiagnosticsService:function(){return this.diagnosticsService||(this.diagnosticsService=new V({configurator:this})),this.diagnosticsService},getSampleDataService:function(){return this.sampleDataService||(this.sampleDataService=new X({configurator:this})),this.sampleDataService}});return Y});
define('tau/store/factory.instance',["tau/store/factory"],function(e){return new e});
define('tau/configurator',["Underscore","tau/service.container","tau/store/factory.instance"],function(e,n,r){var t=new n;return t.setStoreFactory(r),t._id=e.uniqueId("global_"),t});
define('tau/core/component-base',["Underscore","tau/core/class","tau/core/bus","tau/configurator"],function(t,n,e,o){return n.extend({init:function(n){return this.config=t.extend({},n),this.config.context=this.config.context||{},t.defaults(this.config.context,{configurator:o}),this.bus=new e({name:this.config.name,globalBus:this.config.context.configurator.getGlobalBus(),"queue.bus":this.config["queue.bus"]||this.config.queuedBus}),t.defaults(this.config,{bus:this.bus}),this},attach:function(n,e){e=e||{};var o=[];t.isObject(n)&&t.has(n,"extType")&&t.has(n,"args")&&(o=n.args,n=n.extType);var i=this.config.disabledExtensionCategories;if(i){var r=n.prototype.category;if(r&&t.contains(i,r))return this}var s=t.clone(this.config);e.hasOwnProperty("onCreate")||(s=t.extend(s,e));var c=o.length?this.applyConstruct(n,[s].concat(o)):new n(s);return e.onCreate&&e.onCreate(c),this},extendWithArgs:function(t,n){return{ExtType:t,args:n}},applyConstruct:function(t,n){function e(){}var o,i;return e.prototype=t.prototype,o=new e,o.constructor=t,i=t.apply(o,n),null===i||"object"!=typeof i&&"function"!=typeof i||(o=i),o}})});
define('tau/core/extension.base',["Underscore","tau/core/class","tau/core/event"],function(e,t,n){return t.extend({resetLifecycle:!1,noop:function(){},init:function(e){this.bus=e.bus,n.subscribeOn(this)},"bus refresh":function(){this.lifeCycleCleanUp()},"bus destroy":function(){this.on=this.noop,this.fire=this.noop,this.destroy()},on:function(){this.bus.on.apply(this.bus,arguments)},fire:function(){return this.bus.fire.apply(this.bus,arguments)},lifeCycleCleanUp:function(){this.resetLifecycle&&this.resetSubscriptions()},resetSubscriptions:function(){n.unSubscribe(this),n.subscribeOn(this)},safeCallback:function(e){return function(){this._safeExecute(e,arguments)}.bind(this)},_safeExecute:function(e,t){e.apply(this,t)},destroy:function(){this._safeExecute=this.noop;var t=this.bus.getGlobalBus();t&&t.removeAllListeners(this),n.unSubscribe(this),e.each(this,function(e,t,n){0===t.indexOf("bus ")&&(n[t]=null)}),this.bus={fire:this.noop,on:this.noop,removeListener:this.noop}},_isComponentConfig:function(e){return e.hasOwnProperty("type")||e.hasOwnProperty("name")||e.hasOwnProperty("component")||e.hasOwnProperty("context")},_extractOptions:function(t,n){var s={};return e.isObject(t)&&(t.hasOwnProperty("options")?s=e.deepClone(t.options||{}):this._isComponentConfig(t)||(s=e.deepClone(t))),s=e.deepMerge(n,s)}})});
define('tracking/extensions/extension.tracking.base',["tau/core/extension.base","app.path","Underscore"],function(e,t,r){return e.extend({init:function(e){this.global=e.bus.getGlobalBus(),this._super(e)},destroy:function(){delete this.globalBus,this._super()},getPath:function(){return t.get()},getHost:function(){return t.get().toLowerCase().replace("http://","").replace("https://","")},makePlainCleanObject:function(e,t,n,i){e=e||{};var s=this;if(!(r.isUndefined(t)||r.isNull(t)||r.isEmpty(t))){var l=r.isArray(t);if(!r.isObject(t)&&!l)return void(e[n]=t);if(l)return e[n]=[],r.each(t,function(t){t&&e[n].push(s.makePlainCleanObject({},t,"",i))}),e;for(var o=r.keys(t),a=n?n+"_":"",u=0;u<o.length;u++){var f=o[u];r.indexOf(i,f)>=0||s.makePlainCleanObject(e,t[f],a+f,i)}return e}},getInfoFromTypes:function(e){if(!e)return"empty";var t=[];return e.types&&(e=e.types),r.isArray(e)&&r.each(e,function(e){t.push(r.isString(e)?e:e.type)}),0===t.length?"empty":t.join(",")},getFilter:function(e){return e?e.filter?e.filter:"":""},getBoardContext:function(e){if(!e)return{};var t=this.getInfoFromTypes(e.cells).split(",");1===t.length&&"empty"==t[0]&&(t=[]),t=r.sortBy(t);var n=e.user||{};return{x:{type:this.getInfoFromTypes(e.x),filter:this.getFilter(e.x)},y:{type:this.getInfoFromTypes(e.y),filter:this.getFilter(e.y)},mode:e.viewMode||null,zoomLevel:e.zoomLevel||null,user_cardFilter:n.cardFilter||"",cards:{types:t,filter:this.getFilter(e.cells)},cardSettings:e.cardSettings}}})});
define('tracking/extensions/extension.tracking.board.statistics',["./extension.tracking.base","Underscore"],function(e,a){return e.extend({"global start.lifecycle + overview.board.ready + board.paging.settings + model.cells.content.loaded":function(e){var t=e["start.lifecycle"],d=e["overview.board.ready"],n=e["board.paging.settings"].data,i=e["model.cells.content.loaded"].data;if(t.caller.id==d.caller.id){var o=d.date-t.date,l=0;i.data?a.each(i.data.items,function(e){l+=e.dynamic.items.length}):i.cards&&(l=i.cards.length);var r=["viewMode","x","y","cells","global","boardId"],s=this.makePlainCleanObject(this.getBoardContext(n.definition),n.definition,null,r);if("newlist"!==(s.mode||"").toLowerCase()){var c={"@":["--exclude-board-context"],loadTime:o,page:{current:a.extend({},n.page),size:{x:n.x.onPage,y:n.y.onPage},total:{x:n.x.totalPages,y:n.y.totalPages}},cardsCount:l,board:s};this.fire("track.statistics",c)}}}})});
define('tracking/extensions/extension.tracking.application.context',["Underscore","./extension.tracking.base"],function(e,t){return t.extend({"global application.context.data.changed":function(e,t){var n={action:"change context",name:"change context to "+t.teams.length+" team(s) and "+t.projects.length+" project(s)",teams:t.teams,projects:t.projects,tags:["selected teams/projects"]};this.fire("track.action",n)}})});
define('tracking/extensions/extension.tracking.board.actions',["Underscore","./extension.tracking.base","libs/json2"],function(a,e){return e.extend({bs_id:0,"global boardSettings.ready":function(a,e){var t=e.boardSettings;this.bs_id!==t.__objectId&&(this.bs_id=t.__objectId,this.boardSettings&&this.boardSettings.onChange.remove(this.trackBoardSettingsDiff),this.boardSettings=t,this.boardSettings.onChange.remove(this.trackBoardSettingsDiff).add(this.trackBoardSettingsDiff))},"global add.board":function(e,t){this.fire("track.action",a.extend({name:"add board"},t))},"global remove.board":function(e,t){this.fire("track.action",a.extend({name:"remove board"},t))},"global help.flow.action":function(a,e){var t={name:e.name,area:"help flow",tags:["help flow","help"]};e.tags&&(t.tags=t.tags.concat(e.tags)),e.progress&&(t.progress=e.progress),this.fire("track.action",t)},"global quick.add.popup.rendered":function(){this.fire("track.action",{name:"show quick add popup",tags:["board","quick add"]})},"global relatedQuickAdd.afterShow":function(){this.fire("track.action",{name:"show related quick add popup",tags:["board","quick add"]})},"global paging.cell.show.more":function(){this.fire("track.action",{name:"show more cards",tags:["board","show more"]})},"global board.configurator.ready:last + model.data.item.did.add":function(a,e,t){if(t.message&&t.message.dataItem&&t.message.dataItem.type&&t.message.dataItem.data){var i=e.getFeaturesService().isEnabled("board.customize.cards")?t.message.dataItem.data.cardData:t.message.dataItem.data,o=i.type.toLowerCase();this.fire("track.action",{action:"entity added",name:o+" #"+i.id+" added using quick add",type:o,tags:["add "+o,"add card","board"]})}},"global error":function(e,t){var i="---",o="";if(t)if(a.isString(t))i=t;else if(t.message)i=t.message+(t.details||"");else if(t.$node){var s=t.$node.text&&t.$node.text();s=s||"unknown issue: unknown $node",i=s}else try{o=a.keys(t).join(" / "),i="unknown issue: "+JSON.stringify(t)}catch(r){i=["unknown issue: ","fail during global error stringification","(",r.message,").","Object keys:","[",o,"]"].join("")}else i="unknown issue: unspecified global error";this.fire("track.error",{message:i})},"global model.data.item.did.fail.add":function(a,e){e.Message&&(this.fire("track.error",{name:"quick add error",message:e.Message}),this.fire("track.action",{name:"quick add error",tags:["error","board","quick add"],message:e.Message}))},"global view.card.batch.move.completed":function(e,t){var i=[],o={};a.each(t,function(a){if(a.data){var e=a.data("entity-type");i.push({type:e,id:a.data("entity-id")}),o[e]||(o[e]=0),o[e]++}}),this.fire("track.action",{action:"move cards",name:i.length+" card(s) moved "+JSON.stringify(o),cards:i,tags:["board","business action","move cards"]})},"global board.template.selected":function(a,e){e=e||{name:"not defined"},this.fire("track.action",{action:"apply template",name:"apply template ["+e.name+"]",template:e,tags:["board","templates","customize","settings"]})},trackBoardSettingsDiff:function(e){if(e){var t=[],i={};a.each(e,function(a,e){var o=e;"isdraft"!==o.toLowerCase()&&(o="user"===e?"user filter":"edit"===e?"switch "+(a?"on":"off")+" board edit mode":"name"==e?"boardName":e,i[o]=a,t.push(o))}),t.length>0&&taus.track({"@":["--update-board-context"],action:"customize board",name:"change board settings ["+t.join(",")+"]",tags:["customize","board"].concat(t),changes:i})}}})});
define('tracking/extensions/extension.tracking.clicks',["./extension.tracking.base","Underscore","jQuery"],function(t,a,e){return t.extend({track:function(t,e,r){t||(t="body"),r=r||"click",e=e||{},a.defaults(e,{tags:[]});var n=function(t){e.tags.indexOf(t.toLowerCase())<0&&e.tags.push(t)};n("board"),n(r),e.area&&n(e.area);var i={selector:t,data:e,event:r};return this.clickMap[t]=i,{name:function(t){return e.name=t,n(t),this},nameSelector:function(t){return i.nameSelector=t,this},nameTemplate:function(t){return i.nameTemplate=t,this},tag:function(){return a.each(arguments,function(t){n(t)}),this},event:function(t){return i.event=t,n(t),this},area:function(t){return e.area=t,n(t),this}}},trackArea:function(t,a){var e=this;return function(r){var n=t+(r?" "+r:"");return e.track(n,{area:a})}},trackMainMenu:function(){var t=this.trackArea(".tau-app-header","page header");t().tag("page header item"),this.track(".tau-user-submenu .tau-menu-item").area("page header menu").tag("context menu");var a=this.trackArea(".tau-teams-projects-manager","project/team selection");a("button"),this.track(".tau-social-share-popup .tau-share-link").area("social sharing").tag("share targetprocess")},trackGettingStarted:function(){this.track(".tau-getting-started .rhino-btn,.tau-getting-started .rhino-bullet").area("getting started popup").tag("getting started")},trackQuickAdd:function(){var t=this.trackArea(".tau-quick-add-dialog","quick add popup");t("button").tag("quick add popup")},trackBoard:function(){this.track(".tau-board-settings-header.i-role-tabheaders").area("board settings").tag("select setting tab").nameTemplate("select [<%= name%>] tab"),this.track(".tau-cellholder .tau-add").area("board").tag("quick add").name("quick add in cell")},trackSidebar:function(){this.track(".tau-pane-collapser").area("sidebar").name("boards menu collapse (expand)"),this.track(".tau-boardselector__headermenu__item").nameTemplate("customize board menu -> <%= name%>").area("sidebar").tag("boards menu header")},startTracking:function(){var t=this,r=function(t){return t?t:null},n=function(t){var a=r(t.text())||r(t.attr("title"))||r(t.data("title"))||r(t.data("label"))||r(t.attr("role"))||"";return a.toLowerCase()},i=function(t,a){if(t.nameSelector){var r=e(t.nameSelector,this).text();return r&&t.data.name&&(r=t.data.name+" "+r),r}return t.data.name||n(a)||n(e(this))},c=function(r){try{var n=e(r.target),c=r.data,u=i.call(this,c,n);if(!u)return;c.nameTemplate&&(u=a.template(c.nameTemplate)({name:u}));var s=a.defaults({name:u,event:c.event},c.data);t.fire("track.action",s)}catch(o){}},u=e("body");a.each(this.clickMap,function(t){u.on(t.event,t.selector,t,c)})},init:function(t){var e=this;e._super(t),t=t||{},t.disableClicksTracking!==!0&&(a.defaults(t,{clickMap:{}}),e.clickMap=t.clickMap,e.trackSidebar(),e.trackMainMenu(),e.trackGettingStarted(),e.trackBoard(),e.trackQuickAdd(),e.startTracking())}})});
define('libs/schedule',[],function(){function t(t){this.createdOn=new Date,this.period=t,this.expected=0,this.xxx=null,this.MAX_DELTA=6e4,this.iterationNo=-1;var e=this.loop=function(t,i){var s=new Date,h=s.getTime(),n=this.expected>0?this.expected:h,o=h-n;i||t({date:s,"schedule-shift":o,i:++this.iterationNo}),this.expected=+new Date+this.period,this.xxx=setTimeout(function(){e(t,i)},this.period)}.bind(this);this.stop=function(){this.expected=0,clearTimeout(this.xxx)}.bind(this)}return t});
define('tracking/extensions/session',["jQuery"],function(e){var i=e.Deferred();window.session={options:{use_html5_location:!1,session_timeout:1},start:function(e){i.resolve(e)}};var t=function(e,i,t){var n=.4,o={use_html5_location:!1,ipinfodb_key:!1,gapi_location:!0,location_cookie:"location",location_cookie_timeout:5,session_timeout:32,session_cookie:"first_session"},r=function(){if(e.session=e.session||{},e.session.contains=function(e){if("string"==typeof e)return-1!==this.indexOf(e);for(var i=0;i<e.length;i++)if(-1!==this.indexOf(e[i]))return!0;return!1},e.session&&e.session.options)for(var i in e.session.options)o[i]=e.session.options[i];var t={api_version:n,locale:a.locale(),current_session:a.session(),original_session:a.session(o.session_cookie,24*o.session_timeout*60*60*1e3),browser:a.browser(),plugins:a.plugins(),time:a.time(),device:a.device()};if(o.use_html5_location?t.location=a.html5_location():o.ipinfodb_key?t.location=a.ipinfodb_location(o.ipinfodb_key):o.gapi_location&&(t.location=a.gapi_location()),e.session&&e.session.start)var r=e.session.start;var s,c=0,l=function(i){i&&c--,0===c&&r&&r(e.session)};e.session={};for(var u in t)if(s=t[u],"function"==typeof s)try{s(function(i){e.session[u]=i,l(!0)}),c++}catch(g){e.console&&"function"==typeof console.log&&(console.log(g),l(!0))}else e.session[u]=s;l()},s={detect:function(){return{browser:this.search(this.data.browser),version:this.search(t.userAgent)||this.search(t.appVersion),os:this.search(this.data.os)}},search:function(e){if("object"!=typeof e){var i=e.indexOf(this.version_string);if(-1==i)return;return parseFloat(e.substr(i+this.version_string.length+1))}for(var t=0;t<e.length;t++){var n=e[t].string,o=e[t].prop;if(this.version_string=e[t].versionSearch||e[t].identity,n){if(-1!=n.indexOf(e[t].subString))return e[t].identity}else if(o)return e[t].identity}},data:{browser:[{string:t.userAgent,subString:"Chrome",identity:"Chrome"},{string:t.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:t.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:e.opera,identity:"Opera",versionSearch:"Version"},{string:t.vendor,subString:"iCab",identity:"iCab"},{string:t.vendor,subString:"KDE",identity:"Konqueror"},{string:t.userAgent,subString:"Firefox",identity:"Firefox"},{string:t.vendor,subString:"Camino",identity:"Camino"},{string:t.userAgent,subString:"Netscape",identity:"Netscape"},{string:t.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:t.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:t.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],os:[{string:t.platform,subString:"Win",identity:"Windows"},{string:t.platform,subString:"Mac",identity:"Mac"},{string:t.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:t.userAgent,subString:"iPad",identity:"iPad"},{string:t.userAgent,subString:"Android",identity:"Android"},{string:t.platform,subString:"Linux",identity:"Linux"}]}},a={browser:function(){return s.detect()},time:function(){var e=new Date,i=new Date;return e.setMonth(0),e.setDate(1),i.setMonth(6),i.setDate(1),{tz_offset:-(new Date).getTimezoneOffset()/60,observes_dst:e.getTimezoneOffset()!==i.getTimezoneOffset()}},locale:function(){var e=(t.language||t.browserLanguage||t.systemLanguage||t.userLanguage||"").split("-");return 2==e.length?{country:e[1].toLowerCase(),lang:e[0].toLowerCase()}:e?{lang:e[0].toLowerCase(),country:null}:{lang:null,country:null}},device:function(){var n={screen:{width:e.screen.width,height:e.screen.height}};return n.viewport={width:e.innerWidth||i.documentElement.clientWidth||i.body.clientWidth,height:e.innerHeight||i.documentElement.clientHeight||i.body.clientHeight},n.is_tablet=!!t.userAgent.match(/(iPad|SCH-I800|xoom|kindle)/i),n.is_phone=!n.is_tablet&&!!t.userAgent.match(/(iPhone|iPod|blackberry|android 0.5|htc|lg|midp|mmp|mobile|nokia|opera mini|palm|pocket|psp|sgh|smartphone|symbian|treo mini|Playstation Portable|SonyEricsson|Samsung|MobileExplorer|PalmSource|Benq|Windows Phone|Windows Mobile|IEMobile|Windows CE|Nintendo Wii)/i),n.is_mobile=n.is_tablet||n.is_phone,n},plugins:function(){var e=function(e){if(t.plugins){for(var i,n=0,o=t.plugins.length;o>n;n++)if(i=t.plugins[n],i&&i.name&&-1!==i.name.toLowerCase().indexOf(e))return!0;return!1}return!1};return{flash:e("flash"),silverlight:e("silverlight"),java:e("java"),quicktime:e("quicktime")}},session:function(t,n){var o=c.get_obj(t);if(null==o){o={visits:1,start:(new Date).getTime(),last_visit:(new Date).getTime(),url:e.location.href,path:e.location.pathname,referrer:i.referrer,referrer_info:c.parse_url(i.referrer),search:{engine:null,query:null}};var r,s=[{name:"Google",host:"google",query:"q"},{name:"Bing",host:"bing.com",query:"q"},{name:"Yahoo",host:"search.yahoo",query:"p"},{name:"AOL",host:"search.aol",query:"q"},{name:"Ask",host:"ask.com",query:"q"},{name:"Baidu",host:"baidu.com",query:"wd"}],a=s.length,l=0,u="q query term p wd query text".split(" ");for(l=0;a>l;l++)if(r=s[l],-1!==o.referrer_info.host.indexOf(r.host)){o.search.engine=r.name,o.search.query=o.referrer_info.query[r.query],o.search.terms=o.search.query?o.search.query.split(" "):null;break}if(null===o.search.engine&&o.referrer_info.search.length>1)for(l=0;l<u.length;l++){var g=o.referrer_info.query[u[l]];if(g){o.search.engine="Unknown",o.search.query=g,o.search.terms=g.split(" ");break}}}else o.prev_visit=o.last_visit,o.last_visit=(new Date).getTime(),o.visits++,o.time_since_last_visit=o.last_visit-o.prev_visit;return c.set_cookie(t,c.package_obj(o),n),o},html5_location:function(){return function(e){t.geolocation.getCurrentPosition(function(i){i.source="html5",e(i)},function(){o.gapi_location?a.gapi_location()(e):e({error:!0,source:"html5"})})}},gapi_location:function(){return function(i){var t=c.get_obj(o.location_cookie);t&&"google"===t.source?i(t):(e.gloader_ready=function(){"google"in e&&(e.google.loader.ClientLocation?(e.google.loader.ClientLocation.source="google",i(e.google.loader.ClientLocation)):i({error:!0,source:"google"}),c.set_cookie(o.location_cookie,c.package_obj(e.google.loader.ClientLocation),60*o.location_cookie_timeout*60*1e3))},c.embed_script("https://www.google.com/jsapi?callback=gloader_ready"))}},ipinfodb_location:function(i){return function(t){var n=c.get_obj(o.location_cookie);n&&"ipinfodb"===n.source&&t(n),e.ipinfocb=function(e){if("OK"===e.statusCode)e.source="ipinfodb",c.set_cookie(o.location_cookie,c.package_obj(e),60*o.location_cookie*60*1e3),t(e);else{if(o.gapi_location)return a.gapi_location()(t);t({error:!0,source:"ipinfodb",message:e.statusMessage})}},c.embed_script("http://api.ipinfodb.com/v3/ip-city/?key="+i+"&format=json&callback=ipinfocb")}}},c={parse_url:function(e){var t=i.createElement("a"),n={};t.href=e;var o=t.search.substr(1);if(""!=o)for(var r,s=o.split("&"),a=0,c=s.length;c>a;a++)r=s[a].split("="),2===r.length&&(n[r[0]]=decodeURI(r[1]));return{host:t.host,path:t.pathname,protocol:t.protocol,port:""===t.port?80:t.port,search:t.search,query:n}},set_cookie:function(t,n,o,r){return t?(r||(r={}),(null===n||void 0===n)&&(o=-1),o&&(r.expires=(new Date).getTime()+o),i.cookie=[encodeURIComponent(t),"=",encodeURIComponent(String(n)),r.expires?"; expires="+new Date(r.expires).toUTCString():"","; path="+(r.path?r.path:"/"),r.domain?"; domain="+r.domain:"",e.location&&"https:"===e.location.protocol?"; secure":""].join("")):null},get_cookie:function(e,t){return(t=new RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)").exec(i.cookie))?decodeURIComponent(t[1]):null},embed_script:function(e){var t=i.createElement("script");t.type="text/javascript",t.src=e,(i.body||i.getElementsByTagName("body")[0]||i.head).appendChild(t)},package_obj:function(e){if(e){e.version=n;var i=l.stringify(e);return delete e.version,i}},get_obj:function(e){var i;try{i=l.parse(c.get_cookie(e))}catch(t){}return i&&i.version==n?(delete i.version,i):void 0}},l={parse:e.JSON&&e.JSON.parse||function(e){return"string"==typeof e&&e?new Function("return "+e)():null},stringify:e.JSON&&e.JSON.stringify||function(e){var i=typeof e;if("object"===i&&null!==e){var t,n,o=[],r=e&&e.constructor===Array;for(t in e)n=e[t],i=typeof n,"string"===i?n='"'+n+'"':"object"===i&&null!==n&&(n=this.stringify(n)),o.push((r?"":'"'+t+'":')+n);return(r?"[":"{")+o.join(",")+(r?"]":"}")}return"string"===i?'"'+e+'"':void 0}};r()};return"undefined"==typeof window.exports?t(window,document,navigator):window.exports.session=t,i});
define('tracking/extensions/host.info',["jQuery","app.path","libs/json2"],function(e,t){var a=null;return{get:function(){if(!a){var n=localStorage.getItem("host_info");if(n)try{n=e.parseJSON(n);var r=new Date-new Date(n.date),o=Math.floor(r/36e5);if(24>o)return a=e.Deferred().resolve(n.data)}catch(i){}a=e.ajax({url:t.get()+"/info.ashx",dataType:"json"}).done(function(e){var t={date:(new Date).getTime(),data:e};localStorage.setItem("host_info",JSON.stringify(t))})}return a}}});
define('tracking/extensions/extension.tracking.user.host',["jQuery","app.path","Underscore","libs/schedule","./extension.tracking.base","tau/configurator","./session","tp/mashups","./host.info","tp/mashups/failed"],function(e,t,i,s,n,r,a,o,d,c){var h=new o,u=function(e,t){if(!e)return"";var i=e.toLowerCase().split("/mashups/");return i.length?(i[i.length-1]||"").replace("/","").replace(t,"").replace(".js",""):""};return n.extend({init:function(e){var t=e.scheduler;this._super.apply(this,arguments),this.global.on("application.context.data",function(e){e.removeListener(),t.onceADay(function(){this.getSessionData(e.data,function(e){this.fire("data.track",e)}.bind(this))}.bind(this)),window.performance&&window.performance.memory&&window.performance.memory.usedJSHeapSize&&t.eachXMins(30,function(e){var t={date:e.date,"live-minutes":30*e.i,"schedule-shift":e["schedule-shift"],memory:window.performance.memory};taus.track("browser-memory",t)})}.bind(this),this)},"global boardsSet.selected":function(e,t){var i=this.getHost(),s=this.getUser(),n={userProcess:{_id:s._id,user:{id:s._id},host:{id:i},process:t}};this.fire("data.track",n)},getUser:function(e){var t=this.getHost();e=e||{};var s=[window.loggedUser,r.getLoggedUser(),e.loggedUser,{id:0,role:"N/A"}],n=i.find(s,i.identity);return n=i.deepClone(n),n._id=t+"/user/"+n.id,n.host={id:t},n.tau_keep_date=!0,delete n.id,n},getSessionData:function(t,s){var n=this,r=n.getHost(),o=this.getUser(t);a.done(function(t){var n=t.location||{address:{}},a=new Date,l=a.getDate()+"_"+(a.getMonth()+1)+"_"+a.getFullYear(),p=o._id+"/"+l;delete n.latitude,delete n.longitude,delete n.source,o.location=n;var g=[],f=h.getRegisteredMashups();i.each(i.keys(f),function(e){var t=u(e,r);t.length&&g.push({_id:r+"/"+t+"/"+l,name:i.trim(t),host:{id:r},files:f[e]})});var m={user:o,mashup:g,host:{_id:r},visit:{_id:p,user:{id:o._id},host:{id:r},browser:t.browser,device:t.device,locale:t.locale,location:n}},v=i.keys(c);if(v.length>0){var w=[];i.each(v,function(e){var t=u(e,r);t.length&&w.push({_id:r+"/"+t+"/"+l,name:t,path:e,host:{id:r}})}),m.failedMashup=w}d.get().done(function(t){if("string"===e.type(t.createdOn)){var n=t.createdOn.split("/");t.createdOn=new Date(parseInt(n[2],10),parseInt(n[0],10)-1,parseInt(n[1],10))}i.extend(m.host,t),i.extend(m.visit.host,t),i.extend(m.user.host,t),s(m)})})}})});
define('tracking/extensions/extension.tracking.store.v2',["Underscore","./extension.tracking.base","tracking/stores/store.factory"],function(t,s,i){return s.extend({init:function(s){this._super(s),this.sid=s.sid,this.stores=[],t.each(s.store,function(t,s){try{var r=i.createTrackingStore(s,t);this.stores.push(r)}catch(a){}},this)},postData:function(s){if(t.isObject(s))for(var i=this,r=0;r<i.stores.length;r++){var a=i.stores[r];try{a.api.post(s,i.bus)}catch(c){}}},"bus data.track":function(t,s){this.postData(s)},"bus track.action":function(t,s){taus.track(s)},"bus track.action.id.sid":function(t,s){s["@"]=["action.id.sid"],taus.track(s)},"bus track.error":function(t,s){taus.error(s)},"bus track.statistics":function(t,s){taus.track("statistics",s)}})});
define('tracking/extensions/extension.tracking.rest',["Underscore","./extension.tracking.base","tau/configurator"],function(e,a,t){return a.extend({"global store.command.executed":function(a,r){if(r&&r.command&&r.command.config&&("save"==r.command.name||"remove"==r.command.name)){var n=r.command.config.id,i=n?" #"+n:"",o=r.command.type.toLowerCase();if("remove"==r.command.name)return void this.fire("track.action",{action:"delete entity",name:"delete "+o+i,area:"entity",tags:["delete "+o,"delete entity","entity"],type:o,id:n});var d=r.command.config.$set;if("save"==r.command.name&&d){var s=n||d.id?"update ":"add ",c=e.keys(d);if(0===c.length)return;var m=c.join(","),g=window.loggedUser||t.getLoggedUser()||{id:0,role:"N/A"};this.fire("track.action.id.sid",{action:s+"entity",_id:this.getHost()+"/"+a.caller.id+"/"+g.id+"/"+c.join("_"),name:s+o+i+" ["+m.toLowerCase()+"]",area:"entity",tags:[s+o,s+"entity","entity","add|update"],type:o,changes:c,params:d,id:n})}}},"global store.command.failed":function(a){var t="something is wrong";try{if(a.data&&a.data.data){a.data.data.Message&&(t=a.data.data.Message);var r=a.data.data.response;if(r){if(r.Message&&(t=r.Message),e.isArray(r)){var n=[r[1]];e.isArray(r[4])&&r[4].length>0&&r[4][0]!=n[0]&&n.push(r[4][0]),t=n.join(":&nbsp;")}r.Error&&r.Error.Message&&(t=r.Error.Message)}}}catch(i){}var o={name:t,tags:["error","rest"]};this.fire("track.error",o),this.fire("track.action",o)}})});
define('tracking/component.tracking',["Underscore","tau/core/component-base","./extensions/extension.tracking.board.statistics","./extensions/extension.tracking.application.context","./extensions/extension.tracking.board.actions","./extensions/extension.tracking.clicks","./extensions/extension.tracking.user.host","./extensions/extension.tracking.store.v2","./extensions/extension.tracking.rest"],function(e,n,t,s,i,o,c,a,r){return{create:function(x){var p=e.compact([{type:t},{type:o},{type:c},{type:s},{type:i},{type:a},{type:r}]),u={name:"tracking component","queue.bus":!0},g=new n(e.extend(u,x||{}));return e.each(p,function(e){g.attach(e.type,e.config)}),g.bus}}});
define('tracking/spy.event',["jQuery"],function(e){return e.Deferred()});
define('tracking/tauspy',["Underscore","jQuery","./taus","./taus.types.adapters","tau/core/global.bus","./component.tracking","./spy.event","libs/schedule"],function(t,e,n,a,r,o,s,i){var u=null,c={start:function(t){return u||(t=t||{},u=o.create(t)),u}},l=function(e){var a=[],r=function(t){return function(){a.push({methodName:t,params:[].slice.call(arguments)})}};window.taus={context:r("context"),track:r("track"),error:r("error"),start:function(){var e,n,r,o="action",s=[].slice.call(arguments);return 3===s.length?(e=s[0],n=s[1],r=s[2]):2===s.length?t.isObject(s[0])?(e=o,n=s[0],r=s[1]):(e=s[0],n=s[1],r=t.uniqueId()):1===s.length&&(e=o,n=t.isString(s[0])?{name:s[0]}:s[0],r=t.uniqueId()),a.push({methodName:"start",params:[function(){return{tick:+new Date,args:[e,n,r]}}]}),{stop:this.stop.bind(this,r)}},stop:function(){var t=[].slice.call(arguments);a.push({methodName:"stop",params:[function(){return{tick:+new Date,args:t}}]})}};for(var o=new n(e);a.length>0;){var s=a.shift();o[s.methodName].apply(o,s.params)}window.taus=o},p=function(t,e){var n=new Date,a=n.getHours(),r=n.getMinutes(),o=60*(24-a)-r,s=new i(60*(o+1)*1e3);s.loop(function(e){t(e.date),s.stop(),setTimeout(p.bind(null,t,!0),0)},e)},d=function(t){var e=t.data("label")||t.attr("title")||t.data("title")||t.attr("role")||t.text()||"";return e.toLowerCase()},g=function(t){var e=t.attr("tauspref")||"",n=["click"];e&&n.push(e);var a=n.join(" "),r=t.attr("taustype"),o=r?r.split(","):[];taus.track("action",{"@":o,action:a,name:[a,d(t)].join(" "),tags:n})};return e(document).on("click",".i-taus",function(t){g(e(t.currentTarget))}),e.Event.prototype.stopPropagation=t.wrap(e.Event.prototype.stopPropagation,function(t){var n=this.originalEvent;if(n){var a=e(n.target).closest(".i-taus");0!==a.length&&g(a)}return t.apply(this,arguments)}),s.done(function(e){var n=(new Date).getTime(),o={version:2},s={onceADay:p,eachXMins:function(t,e){new i(60*t*1e3).loop(e)}};c.start(t.extend({sid:n},e,{scheduler:s},o)),l(t.extend({sid:n},e,{scheduler:s},o,{globalBus:r.get(),adapters:a}))}),c});
define('tau/core/view-base',["Underscore","jQuery","tau/core/extension.base","tau/ui/templateRenderer.extensions","tau/core/templates-factory","tau/ui/templateRenderer"],function(e,t,i,n,s){return i.extend({name:"view-base",init:function(e){this._super(e),this.config=e||{}},"bus initialize":function(e){this.startLifeCycle(e)},"bus refresh":function(e){this._super();var t=e.data||{},i=t.refreshSelector;this.startLifeCycle(e,i)},"bus show":function(){this.show()},"bus hide":function(){this.hide()},"bus applyTo":function(e){this.element=e.data.element},"bus afterInit+dataBind":function(e,t,i){this.render(i,t)},"bus render":function(e,t){this.fireBeforeRender({data:t.data}),this.doRender(t.data,!1,t.template),this.fireAfterRender({data:t.data})},destroy:function(){this._super(),this.element&&this.element.remove(),delete this.element,delete this.config},merge:function(i,n){if(n&&this.element){e.isArray(n)||(n=[n]);var s=n,r=this.element;e.forEach(s,function(e){var n=r.find(e),s=i.find(e);n.each(function(e){t(this).replaceWith(s.eq(e))})})}return this.element},bindTemplate:function(t,i){var n;if(e.isObject(i))n=s.process(i,this.config,t);else{var r;if(this.config.template.get&&this.config.template.render)r=this.config.template.get();else{var h=e.isString(i)?i:this.config.template.name;r=s.get(h)}n=r.bind(this.config,t)}return n},prepareElement:function(e){return e},updateElement:function(e,t){return this.element&&t?this.merge(e,t):(this.element&&(e.length?this.element.replaceWith(e):this.element.remove()),this.element=e),this.element},doRender:function(e,t,i){var n=this.bindTemplate(e,i);n=this.prepareElement(n),this.element=this.updateElement(n,t),this.toggleBase(this.element,this.config.visible)},fireAfterInit:function(e){this.fire("afterInit",{config:this.config,refreshSelector:e})},initialize:function(e){this.fireAfterInit(e)},setDefaultConfig:function(){e.defaults(this.config,{visible:!0})},"bus refreshData":function(e){this.doRender(e.data),this.fire("elementRefreshedWithData",{element:this.element,data:e.data,view:this})},startLifeCycle:function(t,i){this.setDefaultConfig(),e.extend(this.config,t.data),this.fire("beforeInit",{config:this.config}),this.initialize(i)},show:function(){this.element&&this.showElement(this.element),this.config.visible=!0},showElement:function(e){this.toggle(e,!0)},hide:function(){this.element&&this.hideElement(this.element),this.config.visible=!1},hideElement:function(e){this.toggle(e,!1)},toggleBase:function(e,t){this.config.visibilityClassName?e.toggleClass(this.config.visibilityClassName,t):t?e.removeAttr("hidden"):e.attr("hidden","hidden")},toggle:function(e,t){this.toggleBase(e,t)},render:function(e,t){this.fireBeforeRender({data:e}),this.doRender(e,t.refreshSelector),this.fireAfterRender({data:e})},fireBeforeRender:function(e){e=e||{},this.fire("beforeRender",{data:e.data,view:this,element:this.element})},fireAfterRender:function(e){e=e||{},this.fire("afterRender",{data:e.data,view:this,element:this.element})}})});
define('tau/core/extension.base.stateful',["Underscore","tau/core/extension.base"],function(t,n){var i=n.extend({init:function(t){if(this.config=t,t.context&&t.context.configurator){var n=t.context.configurator;this.config.store=n.getStore()}this.store=this.config.store,this._super(t)},"bus    beforeInit":function(n,i){i=i||{};var o=null;this.config.context&&(o=this.config.context.configurator),i.config&&(this.config=t.extend(this.config,i.config)),this.config.context&&(o=this.config.context.configurator||o,this.config.context.configurator=o),o&&(this.store=o.getStore(),this.config.store=this.store),this.onInit(this.config)},onInit:function(){},destroy:function(){this._super(),this.config=null,this.store.unbind(this),this.store=null,t.each(this,function(n,i,o){"bus"===i||t.isFunction(n)||(o[i]=null)})}});return i});
define('tau/components/extensions/component.extension.base',["Underscore","tau/core/extension.base.stateful"],function(t,e){var n=e.extend({"bus afterRender":function(t){this.element=t.data.element},createComponents:function(t,e){var n={bus:this.bus,config:t,create:function(){this.bus.on("componentsCreated",this.onComponentCreated,this),this.bus.fire("createComponents",this.config,this)},onComponentCreated:function(t){t.caller===this&&(t.removeListener(),e(t.data))}};n.create()},isEntityInContext:function(t){var e=this.config.context.entity.id;return e==(t.data.entity||t.data.assignable).id}});return n});
define('tau/ui/extensions/ui.extension.domOperationsBase',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,t,n){return n.extend({name:"ui.extension.domOperationsBase","bus markElementToBeDeleted":function(e){var t=e.data,n=t.element;n.addClass("deleting")},"bus deleteElement":function(e){var t=e.data.element,n=e.data.callback;t.fadeOut(750,n)},"bus markElementToBeUpdated":function(e){var t=e.data,n=t.element;n.addClass("updating")},"bus cancelUpdateElement":function(e){var t=e.data.element;this._highlightElement(t,"#EE5757",1500)},"bus updateElement":function(e){var n=this,a=e.data.element;a.each(function(){var a=t(this);n._highlightElement(a,e.data.color||"#FFFFD3",e.data.duration||1500)})},_highlightElement:function(e,t,n){e.stop(!0,!0),e.removeClass("updating"),e.addClass("before-animate");var a=this._getElementBgColor(e),o=(e.css("backgroundColor"),function(){e.css("backgroundColor","")});e.removeClass("before-animate"),e.css({backgroundColor:t}).animate({backgroundColor:a},n,o)},_getElementBgColor:function(e){for(var t="transparent";e.length>0&&e.parent()&&("transparent"==(t=e.css("backgroundColor"))||void 0==t||"rgba(0, 0, 0, 0)"==t||0==t.length)&&(e=e.parent(),!e.is("body")););return("transparent"==t||0==t.length)&&(t="#ffffff"),t}})});
define('tau/components/component.creator',["Underscore","tau/core/component-base","tau/core/view-base","tau/ui/extensions/ui.extension.domOperationsBase","tau/ui/ui.templateFactory"],function(e,t,n,a,r){return{create:function(o,s){var i=s||{};o=o||{},e.defaults(i,{name:o.name}),o.template&&(i.template=o.template),i.template&&i.template.markup&&(i.template=r.register(i.template));var p=new t(i);i=p.config;var u=i.context.configurator;e.defaults(i,{store:u.getStore()});var c=o.ViewType||n;if(p.attach(c),o.ModelType&&p.attach(o.ModelType),p.attach(a),o.extensions&&e.isArray(o.extensions))for(var m=0;m<o.extensions.length;m++){var f=o.extensions[m];if(!f)throw new Error("Extension ["+m+"] for component "+i.name+" is not defined");f.hasOwnProperty("type")&&f.hasOwnProperty("config")?p.attach(f.type,f.config):p.attach(f)}var g=p.bus;return u.getComponentBusRegistry().register(g),g.on("destroy",function(){u.getComponentBusRegistry().unregister(this)}),g}}});
define('tau/core/event-dispatcher',["Underscore","tau/core/class"],function(e,n){var t=n.extend({init:function(e){this.components=e,this.eventArgsQueue={},this.dictionaryQueue={}},listen:function(n,t){var i=this;i.dictionaryQueue.hasOwnProperty(n)||(i.dictionaryQueue[n]=e(i.components).clone(),i.eventArgsQueue[n]=[]);var r=function(n){var r=n.sender;n.removeListener();var u=e(i.components).indexOf(r);if(i.eventArgsQueue[n.name][u]=n.data,i.dictionaryQueue[n.name]=e(i.dictionaryQueue[n.name]).without(r),e.isEmpty(i.dictionaryQueue[n.name])){var a={eventName:n.name,argsArr:i.eventArgsQueue[n.name]};t(a)}};e(i.components).each(function(e){e.on(n,r,null,{},1e3)})}});return t});
define('tau/ui/templates/container/ui.template.container.list',["tau/core/templates-factory"],function(e){var a={name:"container.list",markup:['<div class="tau-container ${cssClass}">',"</div>"],dependencies:[]};return e.register(a)});
define('tau/ui/templates/container/ui.template.container.table',["tau/core/templates-factory"],function(e){var t={name:"container.table",markup:['<table class="${cssClass} container-table">',"   <tr></tr>","</table>"],dependencies:[]};return e.register(t)});
define('tau/ui/templates/container/ui.template.container.replaceable',["tau/core/templates-factory"],function(e){var r={name:"container.replaceable",engine:"jqote2",markup:["<div>","</div>"]};return e.register(r)});
define('tau/views/view.container',["Underscore","jQuery","tau/core/view-base","tau/core/event-dispatcher","tau/ui/templates/container/ui.template.container.list","tau/ui/templates/container/ui.template.container.table","tau/ui/templates/container/ui.template.container.replaceable"],function(e,i,n,t){return n.extend({init:function(e){this._loaded=!1,this._super(e)},"bus initialize":function(e,i){this.startLifeCycle(e,i)},"bus refresh":function(e,i){this.startLifeCycle(e,i)},"bus componentCreated":function(e){var i=e.data.component;this.fire("childComponentCreated",i),this.children.push(i)},"bus afterRender + afterRenderLazy":function(e,i){this.fire("afterRenderAll",i)},"bus afterInit + internalChildrenRendered":function(i,n,t){var s=this._getRenderConfig();this.fireBeforeRender({data:s}),this.doRender(s),e.extend(t,{config:this.config}),this.fire("childrenRendered",t),1==this.config.visibility&&this.fire("visibility.on"),this.fireAfterRender({data:s})},"bus afterInit + internalChildrenRenderedLazy":function(i,n,t){e.extend(t,{config:this.config}),this.fire("childrenRenderedLazy",t),1==this.config.visibility&&this.fire("visibility.on")},"bus componentsCreated:last + sendEventToComponents":function(i,n,t){e.forEach(n,function(e){e.component.fire(t.name,t.data)})},"bus componentsCreated":function(i,n){this.fire("beforeComponentsInitialize",i.data);var t={};e.forEach(n,function(i,n){var s=i.config,r=i.component;e.has(s,"label")?t[s.label]=r:t[n]=r}),this.fire("childrenBuses.ready",t),this.initializeComponents(i),this.fire("afterComponentsInitialize",i.data)},"bus show":function(){this.show(),this._loaded?this.fire("show.completed",this.element):this.fire("initialize")},"bus hide":function(){this.hide(),this.fire("hide.completed",this.element)},"bus $children.rendered":function(e,i){1==this.config.visible?this.fire("show.completed",i):this.fire("hide.completed",i)},completeInitializationWithoutChildren:function(){this.fire("afterInit"),this._fireChildrenRendered({children:[],childrenEvtArgs:[]})},completeInitializationWithoutChildrenLazy:function(){this._fireChildrenRenderedLazy({children:[],childrenEvtArgs:[]})},setDefaultConfig:function(){this._super(),e.defaults(this.config,{template:{name:"container."+(this.config.layout||"list")}})},_fireChildrenRendered:function(e){this.fire("internalChildrenRendered",e)},_fireChildrenRenderedLazy:function(e){this.fire("internalChildrenRenderedLazy",e)},initializeComponents:function(i){var n=e.pluck(i.data,"config"),t=this.separateChildComponents(this.children,n);this.listenContainerChildren(t.containerComponents),t.lazyComponents.components.length&&this.fire("existLazyChildren"),this.bus.on("internalChildrenRendered",e.bind(function(){this.initializeLazyComponents(t.lazyComponents)},this)),this.initializeFastComponents(t.fastComponents)},separateChildComponents:function(i,n){var t={components:[],configs:[]},s={components:[],configs:[]},r={components:[],configs:[]};return e.each(this.children,function(e,i){var o=n[i];o.lazy?(t.components.push(e),t.configs.push(o)):(s.components.push(e),s.configs.push(o));var h=this.config.visible!==!1&&o.visible!==!1,a="tabs"===o.type||o.children&&0!==o.children.length;a&&h&&(r.components.push(e),r.configs.push(e))},this),{lazyComponents:t,fastComponents:s,containerComponents:r}},initializeFastComponents:function(i){return 0===i.components.length?void this.completeInitializationWithoutChildren():(this.dispatcher=new t(i.components),this.dispatcher.listen("afterInit",e.bind(function(e){this.fire(e.eventName)},this)),this.dispatcher.listen("afterRender",e.bind(function(e){var n=e.argsArr,t={children:i.components,childrenEvtArgs:n};this._fireChildrenRendered(t)},this)),void e.forEach(i.components,e.bind(function(e,i,n){i.fire("initialize",e[n])},this,i.configs)))},initializeLazyComponents:function(i){return 0===i.components.length?void this.completeInitializationWithoutChildrenLazy():(this.dispatcherLazy=new t(i.components),this.dispatcherLazy.listen("afterRender",e.bind(function(e){var n=e.argsArr,t={children:i.components,childrenEvtArgs:n};this._fireChildrenRenderedLazy(t)},this)),void this.config.store.freeze(!0).done(e.bind(function(i){this.fire("storeFreeze.ready",i);var n=["afterInit"];e.forEach(n,e.bind(function(n){this.dispatcherLazy.listen(n,e.bind(function(){i.unfreeze()},this))},this))},this)).done(e.bind(function(){e.forEach(i.components,function(e,n){e.fire("initialize",i.configs[n])})},this)))},"bus storeFreeze.ready + destroy":function(e,i){i.unfreeze()},"bus storeFreeze.ready + refresh":function(e,i){i.unfreeze()},listenContainerChildren:function(n){var s=i.Deferred(),r=i.Deferred(),o=i.Deferred(),h=i.Deferred(),a=i.Deferred();return a.done(e.bind(function(){this.fire(this.fire("afterRenderLazy"))},this)),this.bus.on("afterRender",e.bind(function(e,i){r.resolve(i)},this)),this.bus.on("internalChildrenRenderedLazy",e.bind(function(){o.resolve()},this)),this.dispatcherContainers=new t(n.components),this.dispatcherContainers.listen("afterRenderLazy",e.bind(function(){h.resolve()},this)),s.done(e.bind(function(n){this.fire("isLazy",n),this.config.lazy&&i.when(r,o).done(e.bind(function(){this.fire("afterRenderLazy")},this)),n&&!this.config.lazy?i.when(r,h,o).done(e.bind(function(){this.fire("afterRenderLazy")},this)):i.when(r,o).done(e.bind(function(){this.fire("afterRenderLazy")},this))},this)),this.config.lazy?void s.resolve(!0):0===n.components.length?void s.resolve(!1):void this.dispatcherContainers.listen("isLazy",e.bind(function(i){var n=!0;-1===e.indexOf(i.argsArr,!0)&&(n=!1),s.resolve(n)},this))},lifeCycleCleanUp:function(){this.destroyChildren()},startLifeCycle:function(i,n){this.setDefaultConfig(),e.extend(this.config,n||{}),this.fire("beforeInit",{config:this.config});var t=this.config.children;this.children=[];var s=e.isArray(t)&&e.size(t)>0&&this.config.visible;if(s){var r=this.config.children,o=this.config.context||{};this.fire("createComponents",{components:r,context:o})}else this.completeInitializationWithoutChildren(),this.completeInitializationWithoutChildrenLazy()},toggle:function(e,n,t){var s=this.config.useAnimation!==!1&&!i.fx.off&&t!==!1;s&&!e.parents(".tau-bubble:first").length?n?e.slideDown(200):this._loaded?e.slideUp(200):this._super(e,n):this._super(e,n)},_getRenderConfig:function(){var e=this.config;return e.visible&&(this._loaded=!0),e},destroyChildren:function(){this.children&&this.children.length&&e.invoke(this.children,"destroy"),this.children=null},destroy:function(){this.dispatcher=null,this.dispatcherLazy=null,this.dispatcherContainers=null,this.destroyChildren(),this._super()}})});
define('tau/components/extensions/additionalInfo/extension.additionalInfo.editable',["jQuery","tau/components/extensions/component.extension.base"],function(e,t){return t.extend({category:"edit",editableIndexes:null,init:function(t){this._super(t),this.onRowClickProxy=e.proxy(this.onRowClick,this)},"bus beforeComponentsInitialize":function(e,t){this.editableIndexes=[],this.createComponentList(t),this.attachListeners()},"bus afterRender":function(e){this.$el=e.data.element,this.addEditableBehaviour()},"bus refresh":function(){this.clearComponent()},createComponentList:function(e){this.components=[];for(var t=1;t<e.length;t+=2)this.components.push(e[t].component)},addEditableBehaviour:function(){for(var e=0;e<this.editableIndexes.length;e++)this.doEditableRow(this.editableIndexes[e])},attachListeners:function(){var e=this.components;if(e)for(var t=0;t<e.length;t++)e[t].on("permissionsReady",this.onPermissionsReady,this,{index:t})},removeListeners:function(){var e=this.components;if(e)for(var t=0;t<e.length;t++)e[t].removeListener("permissionsReady",this.onPermissionsReady,this)},onRowClick:function(t){var i=e(t.target);i.is("a")||i.parent().is("a")||(t.stopPropagation(),t.data.component.fire("edit"))},doEditableRow:function(e){var t=this.$el.find(" > tbody > tr").eq(e);t.off("click",this.onRowClickProxy),t.on("click",{component:this.components[e]},this.onRowClickProxy),t.addClass("ui-additionalinfo_editable_true")},onPermissionsReady:function(e){if(e.data.editable){var t=e.listenerData.index;this.$el?this.doEditableRow(t):this.editableIndexes.push(t)}},clearComponent:function(){this.removeListeners(),delete this.components,delete this.editableIndexes,delete this.$el},destroy:function(){this.clearComponent(),this._super()}})});
define('tau/components/extensions/additionalInfo/extension.additionalInfo.updateAnimation',["jQuery","tau/components/extensions/component.extension.base"],function(e,n){return n.extend({category:"edit",init:function(){this._super.apply(this,arguments)},"bus beforeComponentsInitialize":function(e){var n=this.createComponentList(e.data);this.fire("componentsList.ready",n)},"bus afterRender + componentsList.ready":function(e){var n=e.afterRender.data.element,t=e["componentsList.ready"].data;this.attachListeners(t,n)},createComponentList:function(e){for(var n=[],t=1;t<e.length;t+=2)n.push(e[t].component);return n},attachListeners:function(e,n){if(e)for(var t=0;t<e.length;t++){var r=e[t];r.on("beforeChangeProperty",this.createOnBeforeChangePropertyHandler({$el:n}),this,{index:t}),r.on("propertyChanged",this.createOnPropertyChangedHandler({$el:n}),this,{index:t,component:e[t]},1)}},createOnPropertyChangedHandler:function(e){var n=this;return function(t){var r=t.listenerData.index,a=t.listenerData.component;a.on("afterRender",function(t){t.removeListener();var a=e.$el.find(" > tbody > tr").eq(r).find(">td");n.fire("updateElement",{element:a})},a)}},createOnBeforeChangePropertyHandler:function(e){var n=this;return function(t){var r=t.listenerData.index,a=e.$el.find(" > tbody > tr").eq(r).find(">td");n.fire("markElementToBeUpdated",{element:a})}}})});
define('tau/components/extensions/component.creator.extension',["Underscore","tau/components/extensions/component.extension.base"],function(e,n){return n.extend({"bus createComponents":function(n){var t=n.data,o=n.caller;e.isArray(t.components)||(t.components=[t.components]);var a=this.getDependencies(t.components);requireSync(a,this.createDependenciesLoadedCallback(t,o))},getDependencies:function(n){var t=[];return e.forEach(n,function(n){if(n.path)t.push(n.path);else{if(!n.type)throw"Configuration error: type or path is missing";e.defaults(n,{namespace:"tau"});var o=n.namespace+"/components/component."+n.type;t.push(o)}}),t},_createComponent:function(e){return e.name||(e.name="",e.type&&(e.name=e.type),e.id&&(e.name+=":"+e.id)),e.component.create(e)},childrenLoadedCallback:function(n,t){var o=[];e.forEach(n,function(e){var n=this._createComponent(e);this.fire("componentCreated",{component:n}),o.push({config:e,component:n})},this),this.fire("componentsCreated",o,t)},createDependenciesLoadedCallback:function(n,t){var o=this,a=n.components,c=n.context;return function(){var n=arguments;e.forEach(a,function(e,t){e.component=n[t],e.context=c}),o.childrenLoadedCallback(a,t)}}})});
define('tau/ui/extensions/layout/ui.extension.layout',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,n,t){return t.extend({"bus afterRender + existLazyChildren":function(n,t){var i=e.defaults(this.config.spinnerConfigForLazy||{},{delay:500,isShow:!1,height:10,selectorForHeight:null});i.isShow&&this.setSpinnerForLazyContainer(t.element,i)},setSpinnerForLazyContainer:function(e,t){function i(){clearTimeout(o),r.reject()}e.tauProgressIndicator();var r=n.Deferred();r.done(function(e){e.data("ui-tauProgressIndicator")&&e.tauProgressIndicator("hide")});var o=setTimeout(function(){if("pending"===r.state()&&e.data("ui-tauProgressIndicator")){var n=t.selectorForHeight&&e.closest(t.selectorForHeight).height()||t.height;e.css({height:n}),e.tauProgressIndicator("show")}},t.delay);this.bus.on("refresh",i),this.bus.on("destroy",i),this.bus.on("childrenRenderedLazy",function(){e.css({height:""}),r.resolve(e)})},appendChildren:function(n,t,i){var r=this;r.element=t.element;var o=n.childrenEvtArgs;r.config.layout=r.config.layout||"list";var l=r.config,a=["_add",l.layout,"item"].join(" ");l.childrenContainerSelector=l.childrenContainerSelector||("list"===l.layout?null:"> tbody > tr"),e.each(o,function(e){var n=e.element,t={element:n,data:e};r.fire("append.child.element",t),r[a](t.element,e.view?e.view.config:{})}),r.element&&(t.element=r.element),!i&&this.fire("$children.rendered",this.element)},"bus childrenRendered + afterRender":function(e,n,t){this.appendChildren(n,t,!1)},"bus childrenRenderedLazy + afterRender":function(e,n,t){this.appendChildren(n,t,!0)},"_add list item":function(e){var n=e.jquery?e:e.element,t=this.config.childrenContainerSelector?this.element.find(this.config.childrenContainerSelector):this.element;t.append(n)},getTableItemContainer:function(){var e=this,t=e.config,i=e.element.find(t.childrenContainerSelector+":last");if(t.hasOwnProperty("columnCount")){var r=i.children("td").size();r>=t.columnCount&&(i=n("<tr></tr>"),e.element.children("tbody").append(i))}return i},"_add table item":function(e){var t=this,i=e.jquery?e:e.element,r=t.config,o=this.getTableItemContainer(),l=o.children("td").length,a=r.cellsCssClass&&r.cellsCssClass[l]||"";n("<td></td>").addClass(a).append(i).appendTo(o)},"_add selectable item":function(e,n){var t=this.element,i=n.selector||"[role=main]",r=t.filter(i);0==r.length&&(r=t.find(i)),0==r.length?(console.log(t),console.error('No element for selector "'+i+'"')):r.eq(0).append(e)},"_add replaceable item":function(e){var n=e.jquery?e:e.element,t=this.element;t.parent().length?t.replaceWith(n):this.element=n}})});
define('tau/ui/extensions/spinner/ui.extension.spinner',["tau/components/extensions/component.extension.base"],function(n){return n.extend({options:{spinnerClass:"ui-spinner"},"bus beforeInit":function(){var n=this;this.config.spinner!==!1&&n.element&&n.element.addClass(n.options.spinnerClass)},"bus afterRender":function(n){var e=this;e.element=n.data.element,this.config.spinner!==!1&&e.element.removeClass(e.options.spinnerClass)}})});
define('tau/components/component.additionalInfo',["Underscore","tau/components/component.creator","tau/views/view.container","tau/components/extensions/additionalInfo/extension.additionalInfo.editable","tau/components/extensions/additionalInfo/extension.additionalInfo.updateAnimation","tau/components/extensions/component.creator.extension","tau/ui/templates/container/ui.template.container.table","tau/ui/extensions/layout/ui.extension.layout","tau/ui/extensions/spinner/ui.extension.spinner"],function(e,n,i,t,o,a,s,l,d){return{create:function(u){u=u||{};var r=[];e.forEach(u.children,function(e){e.label&&e.field?(e.label.disabledExtensionCategories=u.disabledExtensionCategories,r.push(e.label),e.field.disabledExtensionCategories=u.disabledExtensionCategories,r.push(e.field)):(e.disabledExtensionCategories=u.disabledExtensionCategories,r.push(e))}),u.children=r,e.defaults(u,{template:s,cssClass:"additional-info-table",columnCount:2,cellsCssClass:["ui-additionalinfo__label","ui-additionalinfo__value"],layout:"table"});var c={extensions:[a,l,o,d,t],ViewType:i};return n.create(c,u)}}});
define('tau/models/application/model.application.main',["Underscore","jQuery","tau/core/extension.base","tau/core/tau"],function(e,r,t,i){var o=i.Error;return t.extend({"bus initialize":function(r,t){var i=this._extractOptions(t,{applicationId:e.uniqueId("app"),turnOffLoadingIndicator:!1,integration:{showInPopup:!1,keepAlive:!1,appendTo:null},routing:{silent:!1,executeOnStart:!0},comet:{enabled:!1}}),o=t.context.configurator;this.fire("configurator.ready",o),this.fire("options.ready",i),this.checkCompatibility(o).done(e.bind(function(){this.fire("routing.enable")},this)).fail(e.bind(function(e){this.fire("routing.disable"),this.fire("routing.forward",{url:"error",args:{error:e}})},this))},"bus afterInit":function(){this.fire("dataBind",{})},getCompatibilityMessage:function(t){var i={ieDocMode:"Targetprocess 3 does not support Internet Explorer in %s document mode. Please, turn standards mode.",other:'Targetprocess 3 is not supported in this browser. Please, try one of these:</p><div class="msg"><ul><li style=""><a href="http://www.google.com/chrome/">Google Chrome</a></li><li><a href="http://www.mozilla.com/firefox/">Mozilla Firefox</a> 10+</li><li><a href="http://www.microsoft.com/windows/Internet-explorer/">Internet Explorer</a> 9+</li><li><a href="http://www.apple.com/safari/download/">Safari</a> 5+</li></ul></div>'},o=r.browser;if(!(o.webkit||o.msie||o.mozilla||o.opera))return i.other;var n=parseInt(o.version,10);if(o.mozilla&&t&&10>n)return i.other;if(!o.msie)return null;var a=t?9:8;if("BackCompat"===document.compatMode)return e.sprintf(i.ieDocMode,"Quirks");var s=document.documentMode||6;return a>s?a>n?i.other:e.sprintf(i.ieDocMode,"IE"+s):null},checkCompatibility:function(e){var t=r.Deferred(),i=this.getCompatibilityMessage(e.isBoardEdition);return i?t.reject(new o("Browser is not supported",i)):t.resolve(),t}})});
define('tau/ui/extensions/application.generic/ui.extension.application.generic.routing',["Underscore","tau/core/extension.base"],function(e,t){return t.extend({"bus configurator.ready + beforeInit":function(t,r,n){var i=n.config.routes;i.unshift({pattern:/error/,host:{name:"error_page",type:"page.error"},type:{type:"label",text:""}});var a=e.map(i,e.bind(function(e){return this.processRoute(e,r)},this));this.currentValue=!0,this.fire("routes.ready",a)},"bus configurator.ready + options.ready + routes.ready + afterRender":function(e,t,r,n){this.bindToRoutes(t,r,n),r.routing.executeOnStart&&t.getHashService().triggerChange(),this.fire("routes.bound",n)},"bus configurator.ready + destroy":function(e,t){this.currentValue=null,t.getHashService().removeAllListeners(this)},"bus application.exit":function(){this.currentValue=null},"bus routes.bound:last + configurator.ready:last+routing.forward":function(t,r,n,i){var a=i.url,s=i.args;if(this.currentValue!==a){this.currentValue=a;var u=e.find(r,function(e){return e.pattern.test(a)});if(u){var o=u.pattern.exec(a).slice(1);o=o.concat(e.toArray(s)),u.callback.apply(null,o),n.getRouting().setReferer(n.service("navigator").getCurrent())}else this.fire("error","URL is not found")}},"bus routing.disable":function(){this.disabled=!0},"bus routing.enable":function(){this.disabled=!1},bindToRoutes:function(t,r,n){var i=r.applicationId,a=t.getHashService(),s=e.bind(function(){if(!this.disabled){var r=i?a.getHashParam(i):a.getHash().split("&")[0];if(this.currentValue!==r){this.currentValue=r;var s=e.find(n,function(e){return e.pattern.test(r)});if(s){var u=s.pattern.exec(r).slice(1);s.callback.apply(null,u),t.getRouting().setReferer(t.service("navigator").getCurrent())}else this.fire("error",{message:"URL is not found"})}}},this);a.on("changed",e.bind(s,this),this)},processRoute:function(t,r){return{pattern:e.isString(t.pattern)?new RegExp(t.pattern):t.pattern,callback:this.createPatternCallback(t,r)}},createPatternCallback:function(t,r){var n=e.bind(function(r){this.fire("application.navigate",{host:t.host,type:t.type,requestArgs:e.defaults(r||{},{handlers:{onPageLoaded:e.identity}})})},this),i=e.bind(this.fire,this);return function(){t.adapter?t.adapter.apply({fire:i,configurator:r,resolve:n},arguments):(t.host.request=e.toArray(arguments),t.type.request=e.toArray(arguments),n())}}})});
define('tau/ui/behaviour/common/ui.behaviour.progressIndicator',["Underscore","jQuery"],function(r){return{get:function(t){var e=t.tauProgressIndicator();return{show:r.bind(function(r){var o=this;r=r||{};var a=e;if(r.delay>0){var i=setTimeout(function(){o.data("ui-tauProgressIndicator")&&o.tauProgressIndicator("show",r)},r.delay);t.data("tauProgressIndicator-timeoutDescriptor",i)}else a=o.tauProgressIndicator("show",r);return a},t),hide:r.bind(function(){var r=this,t=r.data("tauProgressIndicator-timeoutDescriptor");return t&&clearTimeout(t),r.tauProgressIndicator("hide")},t)}}}});
define('tau/ui/extensions/application.generic/ui.extension.application.generic.controller',["Underscore","jQuery","tau/core/extension.base","tau/ui/behaviour/common/ui.behaviour.progressIndicator","tau/core/event-dispatcher"],function(e,t,r,n,a){return r.extend({"bus beforeInit":function(){this.fire("controller.hostType",null),this.fire("controller.app.host.prev",null),this.fire("controller.app.page.prev",null)},"bus controller.app.host.prev > controller.app.host":function(e){var t=e["controller.app.host"].data,r=e["controller.app.host.prev"].data;r&&r.destroy(),this.fire("controller.app.host.prev",t)},"bus controller.app.page.prev > controller.app.page":function(e){var t=e["controller.app.page"].data,r=e["controller.app.page.prev"].data;r&&r.destroy(),this.fire("controller.app.page.prev",t)},"bus configurator.ready:last + application.navigate":function(e,t){t.service("errorBar").fire("clearError")},"bus controller.hostType:last + application.navigate":function(t,r,n){var a=n.requestArgs||{},o=a.entity,i=a.action,s=e.isObject(o)?o.type:e.asString(o);n.requestArgs&&n.requestArgs.cssClass||!(s&&i||"reports"==o)||(n.applicationClassName="tau-page-entity"),n.requestArgs&&n.requestArgs.applicationClassName&&(n.applicationClassName=n.requestArgs.applicationClassName);var l=n.host,p=!r||l.name!==r.name;p&&this.fire("controller.hostType",l);var d=p?"full":"partial";this.fire("controller.load."+d,n)},"bus options.ready:last + configurator.ready:last + controller.load.full":function(r,n,o,i){var s=o.getComponentBuilder(),l=i.requestArgs,p=l.handlers||{},d=this._getInitConfig(o,n,e.omit(l,"handlers"));t.when(s.create(i.host,d),s.create(i.type,d)).done(e.bind(function(t,r){this.fire("controller.preExecute",{}),this.fire("controller.app.host",t),this.fire("controller.app.page",r),this.addListeners(t,"Host"),this.addListeners(r,"Page");var n=new a([t,r]);n.listen("afterRender",e.bind(function(t){var n=t.argsArr[0].element,a=t.argsArr[1].element;this.fire("innerContentRendered",{element:n,$host:n,$page:a,applicationClassName:i.applicationClassName}),this.fire("host.ready"),r.on("afterRender",e.bind(function(e,t){this.fire("innerContentRendered",{element:this.$host,$host:this.$host,$page:t.element,applicationClassName:i.applicationClassName})},this),this),r.on("afterRenderAll",e.bind(function(e,t){this.fire("innerContentRenderedAll",{element:this.$host,$host:this.$host,$page:t.element,applicationClassName:i.applicationClassName}),p.onPageLoaded&&p.onPageLoaded()},this),this)},this)),t.initialize(d),r.initialize(d),this.fire("controller.postExecute",{})},this))},"bus options.ready:last + configurator.ready:last + host.ready:last + controller.load.partial":function(r,n,a,o,i){var s=a.getComponentBuilder(),l=i.requestArgs,p=l.handlers||{},d=this._getInitConfig(a,n,e.omit(l,"handlers"));t.when(s.create(i.type,d)).done(e.bind(function(t){this.fire("controller.preExecute",{}),this.fire("controller.app.page",t),this.addListeners(t,"Page"),t.on("afterRender",e.bind(function(e,t){this.fire("innerContentRendered",{element:this.$host,$host:this.$host,$page:t.element,applicationClassName:i.applicationClassName}),p.onPageLoaded&&p.onPageLoaded()},this),this),t.initialize(d),this.fire("controller.postExecute",{})},this))},"bus afterRender:last + innerContentRendered":function(e,t,r){var n=t.element,a=r.$host,o=r.$page;a.is(this.$host)&&o.is(this.$page)||(a.is(this.$host)||(this._appendHost(n,a),this.$host=a,this._appendPage(n,a,o),this.$page=o),o.is(this.$page)||(this._appendPage(n,this.$host,o),this.$page=o),this.fire("applyClasses",{$el:n,controllersRenderData:r}),this.fire("controller.appContent.rendered",n),this.fire("contentRendered",{element:n}))},"bus view.dom.ready:last + applyClasses":function(e,t,r){var n=r.$el,a=r.controllersRenderData,o=n.parents(".ui-popup:first");o=o.length?n.add(o):n,a.applicationClassName?n.data("classname")!=a.applicationClassName&&(o.removeClass(o.data("classname")||""),o.addClass(a.applicationClassName),o.data("classname",a.applicationClassName)):(o.removeClass(o.data("classname")||""),o.data("classname",""))},"bus controller.load.partial > controller.host.rendered":function(e,t,r){this.toggleProgressIndicator(r.element,!0)},"bus controller.load.partial > controller.host.rendered > innerPageRendered":function(e,t,r){this.toggleProgressIndicator(r.element,!1)},toggleProgressIndicator:function(e,t){var r=e.find("[role=main]"),a=this.config.integration||{};!0!==a.disableProgressIndicator&&n.get(r).toggle(!!t)},"bus configurator.ready:last + controller.app.page":function(e,t,r){r.on("entity.beforeDelete",function(){this.fire("initProgress")},this),r.on("entity.deleted",function(){t.service("navigator").back()},this),r.on("error",function(e){this.fire("application.error",e.data)},this)},"bus view.dom.ready:last + controller.app.host:last + innerHostRendered + controller.appContent.rendered":function(e,t,r){r.fire("view.dom.ready",t)},"bus view.dom.ready:last + controller.app.page:last + innerPageRendered + controller.appContent.rendered":function(e,t,r){r.fire("view.dom.ready",t)},"bus controller.app.host:last > destroy":function(e,t){t.fire("destroy")},"bus controller.app.page:last > destroy":function(e,t){t.fire("destroy")},"bus controller.app.page:last > application.exit":function(e,t){t.fire("destroy")},_getInitConfig:function(t,r,n){var a=e.defaults({context:{configurator:t}},n);return a.turnOffLoadingIndicator=r.turnOffLoadingIndicator||!1,a.comet=r.comet||{},a},_appendHost:function(e,t){e.empty().append(t)},_appendPage:function(e,t,r){t.find("[role=main]").append(r)},addListeners:function(t,r){return t.on("afterRender",e.bind(function(e){this.fire("inner"+r+"Rendered",e.data)},this),this),t}})});
define('tau/ui/extensions/application.generic/ui.extension.application.generic.navigation',["Underscore","jQuery","tau/core/class","tau/core/extension.base","libs/parseUri"],function(t,e,i,r,a){return r.extend({"bus initialize":function(){this._id=t.uniqueId("navigator")},"bus options.ready:last + view.dom.ready:last + configurator.ready:last + afterRender":function(i,r,n,o,s){if(r.routing.silent){var c=s.element;c.parent().off("click."+this._id,"a"),c.parent().on("click."+this._id,"a",t.bind(function(i,r){if(!r.ctrlKey&&!r.metaKey){var n=e(r.currentTarget),o=t.asString(n.attr("href"));if("#"!==o){var s="";"#"===o.charAt(0)?s=o.substr(1):n.data("target")||n.attr("target")||(s=a(o).anchor),s&&(r.preventDefault(),r.stopPropagation(),i.service("navigator").to(s))}}},this,o))}},"bus configurator.ready:last + routes.bound:last + application.navigate.entity":function(e,i,r,a){var n=t.compact([a.entity||a.type,a.id,a.action]).join("/");i.service("navigator").to(n)},"bus configurator.ready":function(e,i){i.service("navigator").on("back",t.bind(function(e){var r=i.getHistory(),n=r.pop();n?(r.setCurrent(null),i.service("navigator").to(a(n.url).anchor)):this.fire("application.exit"),e.data.clearNotification&&t.delay(t.bind(this.fire,this,"clearError"),100)},this),this)},"bus configurator.ready:last + destroy":function(t,e){e.service("navigator").removeAllListeners(this)},"bus contentRendered + destroy":function(t,e){var i=e.element;i.parent().off("click."+this._id,"a")}})});
define('tau/ui/extensions/application.generic/ui.extension.application.generic.history',["Underscore","tau/core/extension.base"],function(t,e){return e.extend({"bus configurator.ready":function(t,e){this.setHandler(e)},"bus configurator.ready:last + application.exit + application.navigate.entity":function(t,e){this.setHandler(e)},"bus configurator.ready:last + history.reset":function(t,e){e.getHistory().reset()},"bus configurator.ready:last + controller.preExecute":function(t,e){e.getHistory().process()},"bus configurator.ready:last + application.exit":function(t,e){this.clear(e)},"bus configurator.ready:last + destroy":function(t,e){this.clear(e)},setHandler:function(e){var r=t.bind(function(){var t=e.getHistory().getCurrent();t&&t.title&&e.getTitleManager().set(t.title)},this);e.getHistory().on("setCurrent",r,this)},clear:function(t){t.getTitleManager().restoreDefault();var e=t.getHistory();e.reset(),e.removeAllListeners(this)}})});
define('tau/ui/extensions/application.generic/ui.extension.application.generic.integration',["Underscore","jQuery","tau/core/extension.base"],function(e,t,i){return i.extend({"bus beforeInit + configurator.ready":function(t,i,n){var r=e.bind(function(e){var t=e.data,i={project:{id:t.project.id}},n={id:t.entity.id,changes:i,cmd:{config:{$set:i}}};this.fire("integration.react",n)},this),a=e.bind(function(e){var t=e.data,i={},n={id:t.bugId,changes:i,cmd:{config:{$set:i}}};this.fire("integration.react",n)},this),o=n.getGlobalBus();o.removeAllListeners(this),o.on("bugWasMarkedAsDuplicate",a,this),o.on("entityWasMovedToProject",r,this);var s=n.getStore();s.unbind(this);var d=e.bind(function(e){this.fire("integration.react",e.data)},this),c=["general","assignment","roleEffort"];e.each(c,e.bind(function(e){s.on({type:e,eventName:"afterSave",listener:this},d),s.on({type:e,eventName:"afterRemove",listener:this},d)},this))},"bus options.ready + beforeInit":function(e,i){t("body").delegate("a[href=#]","click",function(e){e.preventDefault()});var n=i.integration.reloadCallback,r=i.integration.progress;r&&this.fire("progress.ready",r),n&&this.fire("reloadCallback.ready",n)},"bus progress.ready:last + initProgress":function(e,t){t.show("Reloading...")},"bus progress.ready:last + application.error":function(e,t){t.hide()},"bus reloadCallback.ready:last + integration.react":function(e,t,i){t({data:i})},"bus configurator.ready > destroy":function(e,t){t.getStore().unbind(this),t.getGlobalBus().removeAllListeners(this)}})});
define('tau/ui/extensions/application.generic/ui.extension.application.generic.errorBar',["jQuery","Underscore","tau/core/extension.base","tau/core/bus"],function(e,o,t,i){return t.extend({"bus initialize":function(o,t){var n=t.context.configurator;n.registerService("errorBar",new i);var r=e("body"),s=n.service("errorBar");s.on("error",function(e,o){this.showError(e,o.data)}.bind(this,r)),s.on("notification",function(e,o){this.showNotification(e,o.data)}.bind(this,r)),s.on("clearError",function(e,o){this.clearError(e,o.data)}.bind(this,r)),this.fire("$notified.ready",r)},"bus $notified.ready:last + clearError":function(e,o,t){this.clearError(o,t)},"bus $notified.ready:last + error":function(e,o,t){this.showError(o,t)},"bus $notified.ready:last + notification":function(e,o,t){this.showNotification(o,t)},clearError:function(e,o){e.notifyBar("remove",o)},showError:function(e,t){this.notify({id:t.id,type:t.type||"error",message:o.isString(t)?t:t.message||"Error",details:t.details,$node:t.$node,delay:t.delay,disableAutoClose:t.disableAutoClose===!0,button:t.button},e)},showNotification:function(e,o){this.notify({id:o.id,type:o.type,message:o.message,$node:o.$node,delay:o.delay,disableAutoClose:o.disableAutoClose===!0,button:o.button},e)},notify:function(t,i){if(!t.$node&&(t.$node=e('<div class="tau-system-message-body-inner"></div>'),t.$node.append("<h3>"+o.asString(t.message)+"</h3>"),t.details)){var n=e("<p></p>").append(t.details);t.$node.append(n)}var r=t.type||"success",s="success"===r,a=t.disableAutoClose,d=s?5e3:t.delay||1e5;s&&void 0===a&&(a=!1),i.notifyBar({id:t.id,className:"tau-system-message-"+r,$node:t.$node,delay:d,disableAutoClose:a,button:t.button})}})});
define('tau/ui/extensions/application.generic/ui.extension.application.generic.popup',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,t,i){return i.extend({"bus options.ready + beforeInit":function(e,t){this.initContainer(t)},init:function(e){this._super(e),this.$element=this.createElement()},createElement:function(){return t("<div></div>")},setWidget:function(e){this.$element.tauPopup({hideOnEscape:!0,hide:function(){this.fire(e.integration.keepAlive?"application.exit":"destroy")}.bind(this)})},showWidget:function(){this.$element.tauPopup("show")},hideWidget:function(){this.$element.tauPopup("hide")},getWidget:function(){return this.$element.tauPopup("widget")},initContainer:function(e){this.setWidget(e),this.$widget=this.getWidget(),this.$widget.on("transitionend webkitTransitionEnd",function(){t(window).trigger("resize")}),e.integration.cssClass&&this.$widget.addClass(e.integration.cssClass),this.fire("$popup.ready",this.$element)},"bus $popup.ready > contentRendered":function(e,t,i){this.fire("popup.open",i)},"bus popup.close > contentRendered":function(e,t,i){this.fire("popup.open",i)},"bus configurator.ready:last + $popup.ready:last + popup.open":function(e,i,n,o){var s=o.element;s.addClass("ui-popup-content"),this.showWidget(),this.$widget.append(s),this.fire("view.dom.ready",t("body"))},"bus application.exit":function(){this.fire("popup.close")},"bus configurator.ready:last + $popup.ready:last + popup.close":function(){this.$widget.is(":visible")&&this.hideWidget()},"bus $popup.ready > destroy":function(){this.hideWidget()}})});
define('tau/ui/extensions/application.generic/ui.extension.application.generic.coverView',["Underscore","jQuery","tau/ui/extensions/application.generic/ui.extension.application.generic.popup"],function(e,i,t){return t.extend({createElement:function(){return i('<div class="tau-cover-view_page tau-cover-view-hide"></div>').appendTo("body")},showWidget:function(){this.$element.tauCoverView("show")},hideWidget:function(){this.$element.tauCoverView("hide")},setWidget:function(e){this.$element.tauCoverView({showCloseButton:!0,showOverlay:!0,autoHide:{onEscape:!0,onOverlayClick:!0},showCompleted:function(){}.bind(this),hide:function(){this.fire(e.integration.keepAlive?"application.exit":"destroy")}.bind(this)})},getWidget:function(){return this.$element.tauCoverView("widget")},"bus $popup.ready > destroy":function(){this.$element.remove()}})});
define('tau/ui/templates/application/ui.template.application.generic',["tau/core/templates-factory"],function(e){var i={name:"application.generic",engine:"jqote2",markup:['<div role="application" class="tau-app i-role-application','<% if (navigator.userAgent.indexOf("Windows") > 0) { %> i-useragent_os_win<% } %>',"<% if (fn.$.browser.webkit) { %> i-browser_engine_webkit<% } %>","<% else if (fn.$.browser.mozilla) { %> i-browser_engine_mozilla<% } %>","<% else if (fn.$.browser.msie) { %> i-browser_engine_ie<% } %>",'">',"</div>"]};return e.register(i)});
define('tau/components/component.application.generic',["Underscore","tau/service.container","tau/core/component-base","tau/models/application/model.application.main","tau/core/view-base","tau/ui/extensions/application.generic/ui.extension.application.generic.routing","tau/ui/extensions/application.generic/ui.extension.application.generic.controller","tau/ui/extensions/application.generic/ui.extension.application.generic.navigation","tau/ui/extensions/application.generic/ui.extension.application.generic.history","tau/ui/extensions/application.generic/ui.extension.application.generic.integration","tau/ui/extensions/application.generic/ui.extension.application.generic.errorBar","tau/ui/extensions/application.generic/ui.extension.application.generic.popup","tau/ui/extensions/application.generic/ui.extension.application.generic.coverView","tau/ui/templates/application/ui.template.application.generic"],function(e,i,n,t,o,a,c,r,p,u,s,g,l,x){return{create:function(m){m=m||{onCreate:function(){}};var f=m.context.configurator||new i,h=new n({name:m.name,queuedBus:!0,context:{configurator:f},template:x}),v=[t,o,a,c,r,p,u,s],w=m.integration||m.options&&m.options.integration||{};w.showInPopup===!0?v.push(g):w.showInCoverView===!0&&v.push(l),v=v.concat(m.extensions||[]),e.forEach(v,function(e){h.attach(e,m)});var d=h.bus;return f.getComponentBusRegistry().register(d),d.on("destroy",function(){f.getComponentBusRegistry().unregister(this)}),d}}});
define('tau/services/service.navigator',["Underscore","jQuery","tau/core/class","tau/core/event"],function(e,t,a,i){var r=a.extend({init:function(t,a){this.hashService=t.getHashService(),this.options=e.defaults(a||{},{parameterName:null})},to:function(e){this.options.parameterName?this.hashService.setHashParam(this.options.parameterName,e):this.hashService.setHash(e)},back:function(e){this.fire("back",{clearNotification:e})},getCurrent:function(){return this.options.parameterName?this.hashService.getHashParam(this.options.parameterName):this.hashService.getHash()}});return i.implementOn(r.prototype),r});
define('tau/core/model-base',["Underscore","tau/core/extension.base.stateful"],function(e,t){var n=t.extend({isCommandForEntityInContext:function(e){var t=e.data,n=t.cmd?t.cmd.config.id:t.obj?t.obj.id:null;return n===this.config.context.entity.id},isPropertyChanged:function(t,n){var i=n.changes,r=n.cmd&&n.cmd.config.$set||{};return e.any(t,function(e){return i&&i.hasOwnProperty(e)||r.hasOwnProperty(e)})},attachToChangePropertiesOfCurrentEntity:function(t){var n=e.isArray(t)?t:[t],i=this.config.context.entity.id,r=this,o=function(e){var t=e.data;r.isPropertyChanged(n,t)&&r.fire("propertyChanged",t)},a=function(e){var t=e.data;r.isPropertyChanged(n,t)&&r.fire("beforeChangeProperty",t)},s=function(e){var t=e.data;t.cmd.config.id==i&&r.isPropertyChanged(n,t)&&r.fire("propertyChanged",t)};r.store.unbind(r);var c=this.config.context.entity.entityType.name||"general";r.store.on({type:c,eventName:"afterSave",filter:{id:i},listener:r},o),r.store.on({type:c,eventName:"beforeSave",filter:{id:i},listener:r},a),r.store.on({eventName:"failure",listener:r},s),t[this.propertyName]=[this.displayField,this.valueField]},"bus evictData":function(){var e=this.config.entity||this.config.context.entity,t=e.id;this.store.config.proxy.evictPersistedObject(t,"context"),this.store.config.proxy.evictPersistedObject(t,e.type||e.entityType.name)}});return n});
define('tau/models/model.extension',["tau/core/model-base"],function(e){var t=e.extend({onInit:function(){this.fire("registerStoreRequest"),this.fire("commitTransaction")}});return t});
define('tau/models/model.duplicateBugList',["Underscore","tau/core/model-base"],function(t,e){var i=e.extend({_retrieveEntity:function(){var t=this.config.context,e=t.entity.entityType.name,i=t.entity.id,n={id:i,fields:["id"]};this.store.get(e,n,{scope:this,success:this.onEntityRetrieved}).done()},convertServerDataModelData:function(t){return{__type:t.__type,id:t.id,name:t.name,state:{name:t.entityState.name},url:this.config.context.configurator.getUrlBuilder().getNewViewUrl(t.id,t.__type,!0)}},onEntityRetrieved:function(){this.fire("registerStoreRequest"),this.fire("commitTransaction")},"bus duplicateBugRetrieved":function(e){var i=e.data.items,n=t.map(i,this.convertServerDataModelData,this);n=t.compact(n);var r={items:n};this.bus.fire("dataBind",r)},onInit:function(){this.config.disableModel||this._retrieveEntity()}});return i});
define('tau/models/model.duplicateBugCountCalculator',["tau/models/model.duplicateBugList"],function(e){var t=e.extend({"bus duplicateBugRetrieved":function(e){var t=e.data.items;this.fire("duplicateBugCountRetrieved",{count:t.length})}});return t});
define('tau/models/model.duplicateBugRetriever',["Underscore","tau/core/model-base"],function(e,t){var i=t.extend({init:function(){this._super.apply(this,arguments)},convertServerDataModelData:function(e){return{__type:e.__type,id:e.id,name:e.name,state:{name:e.entityState.name}}},"bus registerStoreRequest":function(){var e=this.config.context,t=e.entity.entityType.name,i=e.entity.id,n={fields:["id","name",{entityState:["name"]}],$query:{tags:{$contains:"duplicateOf#"+i}}};this.fire("find",{type:t,query:n,callback:{scope:this,success:this.onDuplicateBugsRetrieved}})},onDuplicateBugsRetrieved:function(t){var i=e.sortBy(t.data,function(e){return e.id}),n={items:i};this.fire("duplicateBugRetrieved",n)}});return i});
define('tau/components/extensions/duplicateBugList/extension.duplicateBugList.visibilityController',["jQuery","tau/components/extensions/component.extension.base"],function(e,t){return t.extend({"bus afterRender":function(e){e.data.element.hide()},"bus componentsCreated+duplicateBugCountRetrieved":function(e){var t=e.duplicateBugCountRetrieved.data.count,n=e.componentsCreated.data,a=n[0].component;a.fire("sendEventToComponents",{name:"setBadgeData",data:t.toString()})},"bus componentsCreated+duplicateBugRetrieved":function(e){var t=e.duplicateBugRetrieved.data.items,n=e.componentsCreated.data,a=n[1].component;"duplicateBugListPanel inner"!=a.name&&a.fire("duplicateBugRetrieved",{items:t})},"bus afterRender+duplicateBugCountRetrieved":function(e){if(e.duplicateBugCountRetrieved.data.count>0){var t=e.afterRender.data.element;this.config.disableAnimation?t.show():t.slideDown("slow")}}})});
define('tau/models/assignmentsList/extension.model.store.operations',["Underscore","tau/core/model-base","tau/core/event"],function(t,n){var a=n.extend({category:"store operations","bus commitTransaction":function(t){var n=this.transaction||this.store;delete this.transaction,n.done(t.data)},"bus get":function(t){var n=this.transaction=this.transaction||this.store,a=t.data||{};this.transaction=n.get(a.type,a.query,a.callback)},"bus find":function(t){var n=this.transaction=this.transaction||this.store,a=t.data||{};this.transaction=n.find(a.type,a.query,a.callback)},destroy:function(){this._super.apply(this,arguments),this.destroy=function(){}}});return a});
define('tau/configurations/converters/converter.print',["Underscore","tau/models/model.extension","tau/models/model.duplicateBugCountCalculator","tau/models/model.duplicateBugRetriever","tau/components/extensions/duplicateBugList/extension.duplicateBugList.visibilityController","tau/models/assignmentsList/extension.model.store.operations","tau/core/termProcessor"],function(e,t,n,i,s,r,l){var a={duplicateBugListPanel:function(t,a){var d=new l(a.getTerms());return e.extend(t,{compId:"duplicateBugs",type:"container",layout:"list",cssClass:"b-section",disableAnimation:!0,children:[{type:"label",text:"Duplicate "+d.getTerms("Bug").names,hideCounter:!0},{type:"duplicateBugList",disableModel:!0}],extensions:[s,i,n,r]}),t},tabs:function(t){return t=e.extend(t,{type:"container",children:[],cssClass:"b-tabs"}),delete t.additionalHeaders,e.forEach(t.tabs,function(n){n=e.extend(n,{type:"container",children:n.items,cssClass:"b-tab"});var i=!e.isUndefined(n.children)&&n.children.length&&"revisionList"===n.children[0].type;i||(!e.isUndefined(n.header)&&n.header.length&&n.children.unshift({type:"label",text:n.header[0].text}),t.children.push(n))}),t},collapsible:function(t){return t=e.extend(t,{type:"container",children:[],cssClass:"b-section"}),t.children=t.items,!e.isUndefined(t.header)&&t.header.length&&t.children.unshift({type:"label",text:t.header[0].text}),t}},d=function(t,n){var i=null;if(e.isArray(t)){var s=0;for(i=function(e){t.splice(e,1),s--},s=0;s<t.length;s++)n(t[s],s,i)}else{i=function(e){delete t[e]};for(var r=e(t).keys(),l=null;l=r.pop();)n(t[l],l,i)}},o=function(t,n){return d(t,function(i,s,r){if(i.type){if(i.printable===!1)return void r(s);e.isFunction(a[i.type])&&(t[s]=a[i.type](i,n)),i.children&&(t[s].children=o(i.children,n)),i.items&&(t[s].items=o(i.items,n)),t[s].disabledExtensionCategories=["edit"]}else"children"==s&&(t[s]=o(i,n))}),t};return{convert:function(e){return e=o(e,e.context),e.children&&e.children.length&&(e.children[0].cssClass="main-container main-container-print i-print"),e}}});
define('tau/ui/extensions/page/ui.extension.page.print',["tau/core/extension.base","tau/configurations/converters/converter.print"],function(t,e){return t.extend({"bus onConfigContainerCreated":function(t){var n=t.data;e.convert(n),n.children.push({type:"print"})},"bus afterRender":function(t){var e=t.data.element,n=e.find("a");n.removeAttr("href"),e.find("[role=attachment]").removeAttr("role"),$("html").toggleClass("tau-html_action_view",!1).toggleClass("tau-html_action_print",!0),$("body").addClass("print-mode")}})});
define('tau/components/component.application',["tau/components/component.application.generic","tau/services/service.navigator","tau/ui/extensions/page/ui.extension.page.print","libs/parseUri"],function(t,e,n,i){return{create:function(a){var r=a.context.configurator;r.registerService("navigator",new e(r,{parameterName:a.options.applicationId||null}));var o="entity component",p=function(t,e,n){taus.track({"@":["--save-last-view-entity-context"],action:"view entity",name:"view "+t+" #"+e,tags:["view entity"],type:t,id:e});var i=taus.start("statistics_view",{"@":["--add-last-view-entity-context",function(t){var e="@timing";return t.loadTime=t[e],delete t[e],t}],entity:{id:e,type:t.toLowerCase()}});this.resolve({entity:{id:parseInt(e,10),type:t},action:n,handlers:{onPageLoaded:function(){i.stop()}}})},s=function(t,e,n){var i=this.configurator,a=i.getStore(),r=i.getBoardSettingsFactory().createComponentSettings({id:"project"}),o=$.Deferred();a.find("projectmember",{id:e,fields:[{project:["id"]}]}).done({success:function(t){var n=_.find(t[0].data[0],function(t){return t.id==e});o.resolve(n&&n.project?n.project.id:e)},failure:function(){o.resolve(e)}});var s=$.Deferred();r.set({set:{generalTab:"people"},callback:function(){s.resolve()}});var c=p.bind(this);$.when(o,s).done(function(t){c("project",t,n)})},c=function(t,e,n){var i="projectmember"==t.toLowerCase()?s:p;_.bind(i,this)(t,e,n||"show")};return a.routes=[{pattern:/^$/,adapter:function(){var t=this.configurator.getRouting().getReferer();t?this.configurator.service("navigator").to(t):this.fire("application.exit")},host:{name:"empty_host",type:"master.empty"},type:{name:o,type:"page.entity"}},{pattern:/finish-(\w+)\/([0-9]+)/,adapter:function(t,e){this.resolve({entity:{id:parseInt(e,10),type:t},applicationClassName:"tau-info-popup"})},host:{name:"empty_host",type:"master.empty"},type:{name:"entity_page",type:"page.finish-iteration"}},{pattern:/(\w+)\/([0-9]+)($|\s|&)/,adapter:function(t,e){_.bind(c,this)(t,e)},host:{name:"empty_host",type:"master.empty"},type:{name:o,type:"page.entity"}},{pattern:/(\w+)\/([0-9]+)\/silent/,adapter:function(t,e){_.bind(c,this)(t,e)},host:{name:"empty_host",type:"master.empty",turnOffLoadingIndicator:!0},type:{name:o,type:"page.entity",turnOffLoadingIndicator:!0}},{pattern:/(\w+)\/([0-9]+)\/print/,adapter:function(t,e){var n=i(window.location.href);"Print.aspx"!=n.file?this.configurator.service("navigator").to("#"+t+"/"+e):_.bind(c,this)(t,e,"print")},host:{name:"empty_host",type:"master.empty"},type:{name:o,type:"page.entity",hostClassName:"tau-page-entity",extensions:[n]}},{pattern:/(\w+)\/([0-9]+)\/(\w+)[&|]*.*/,adapter:function(t,e,n){_.bind(c,this)(t,e,n)},host:{name:"empty_host",type:"master.empty"},type:{name:o,type:"page.entity",hostClassName:"tau-page-entity"}}],t.create(a)}}});
define('tau/models/model.iteration.progressBar',["Underscore","tau/core/model-base"],function(t,e){var o=e.extend({name:"Iteration Progress Bar",afterSaveRoleEffort:function(){this.fire("roleEffortChanged")},onDataUpdate:function(){this.fire("refresh")},floatToString:function(t){return t.toFixed(2).replace(".00","")},_getEffortPoints:function(){return this.config.context.getEffortPoint().shortName},_getDefaultFields:function(){return["bugs-effortToDo-sum","bugs-effortCompleted-sum","userStories-effortToDo-sum","userStories-effortCompleted-sum"]},onInit:function(){var e=this.config.context.entity,o=e.entityType.name,i=e.id,r=this._getDefaultFields();this.store.unbind(this),this.store.on({eventName:"afterSave",type:"roleEffort",listener:this,filter:{assignable:{id:i}}},t.bind(this.afterSaveRoleEffort,this)),this.store.on({eventName:"afterSave",type:o,listener:this,filter:{id:i},hasChanges:[r.join("|")]},t.bind(this.onDataUpdate,this));var s={id:i,fields:r};this.store.get(o,s,{success:this.safeCallback(this.onEntityRetrieved)}).done({success:this.safeCallback(this.done)})},calculatePercentCompleted:function(){var t=Math.round(100*parseFloat(this.effortToDo)+100*parseFloat(this.effortCompleted))/100,e=Math.round(1e4*(this.effortCompleted/t))/100;e=isNaN(e)?0:e,e=e>100?100:e,this.percentCompleted=e},onEntityRetrieved:function(t){var e=t.data,o=e["bugs-effortToDo-sum"]+e["userStories-effortToDo-sum"],i=e["bugs-effortCompleted-sum"]+e["userStories-effortCompleted-sum"];this.effortToDo=o,this.effortCompleted=i,this.calculatePercentCompleted()},done:function(){this.fire("dataBind",{effortToDo:this.floatToString(this.effortToDo),effortCompleted:this.floatToString(this.effortCompleted),percentCompleted:this.percentCompleted,totalEffort:this.floatToString(this.effortToDo+this.effortCompleted),point:this._getEffortPoints()})}});return o});
define('tau/ui/templates/label/ui.template.assignmentEffort.label',["tau/core/templates-factory"],function(a){var t={name:"assignment-effort-label",markup:['<div><span class="property"><span class="effort">${totalEffort}&nbsp;${point}</span></span>']};return a.register(t)});
define('tau/components/component.assignedEffort',["tau/components/component.creator","tau/models/model.iteration.progressBar","tau/ui/templates/label/ui.template.assignmentEffort.label"],function(e,t,n){return{create:function(a){var r={extensions:[t],template:n};return e.create(r,a)}}});
define('tau/ui/templates/inviter/ui.template.inviter.widget.members',["tau/core/templates-factory"],function(e){var s={name:"inviter.widget.members",engine:"jqote2",markup:['<div class="tau-invite-field i-role-members-widget">','<ul class="tau-invite-field__inner">','<li class="tau-inputholder">',"<div>",'<input class="tau-input i-role-input" type="text" />','<span class="tau-input-sizer i-role-sizer"></span>','<span class="tau-input-systemhelper i-role-placeholder">',"Start typing name(s) or email(s)","</span>",'<span class="tau-input-systemhelper i-role-systemhelper"><s></s><span></span></span>',"</div>","</li>","</ul>","</div>"]};return e.register(s)});
define('tau/ui/extensions/user/jquery.tauUserAutocomplete',["Underscore","jQuery","tau/core/templates-factory"],function(e,t,i){var r={position:{my:"left top",at:"left bottom+5",collision:"none"},rejectUserIdsGetter:function(){return[]},itemRenderer:{_itemTemplate:null,renderItem:function(e){return this._itemTemplate||(this._itemTemplate=i.register({name:"ui.tauUsersAutocomplete.item",engine:"jqote2",markup:["<li>",'<a class="tau-item">','<img width="20" height="20" alt="" src="<%= this.avatarUri%>20" />',"<span><%! this.name %></span>","</a>","</li>"]})),this._itemTemplate.render(e)}},itemLoadingRenderer:{_itemTemplate:null,renderItem:function(e){return this._itemTemplate||(this._itemTemplate=i.register({name:"ui.tauUsersAutocomplete.item.loading",engine:"jqote2",markup:['<li  class="tau-menu-item">','<a class="tau-item tau-loader">',"</a>","</li>"]})),this._itemTemplate.render(e)}}};return t.widget("ui.tauUserAutocomplete",t.ui.autocomplete,{options:{store2:null,minLength:2,autoFocus:!0,showLoading:!1,autocompleteQueryAdd:"",autocompleteFieldsQueryAdd:"",autocompleteTakeQueryAdd:"",position:r.position,delayLoading:250,rejectUserIdsGetter:r.rejectUserIdsGetter,itemRenderer:r.itemRenderer,itemLoadingRenderer:r.itemLoadingRenderer,focus:function(){return!1},source:function(t,i){if(" "!=e.last(t.term)){var r=e.last(e.compact(e.trim(t.term).split(/[\s,]+/)))||"",n=null;this.options.showLoading&&(n=e.delay(function(){i([{isLoading:!0}])},this.options.delayLoading)),this._trigger("found",null,{term:"",items:[]}),this.options.store2.findAll("User?select={"+["id",'"User" as __type',"firstName","lastName","email","login","avatarUri"].join(",")+this.options.autocompleteFieldsQueryAdd+"}&where=("+this._getUserIdsQueryFilter()+'(firstName.startsWith("'+this.options.store2.arg(r)+'")  OR lastName.startsWith("'+this.options.store2.arg(r)+'")  OR email.startsWith("'+this.options.store2.arg(r)+'")) '+this.options.autocompleteQueryAdd+" AND deleteDate == NULL AND isActive == True )"+this.options.autocompleteTakeQueryAdd).done(e.bind(function(e){e.length?(e=this._processItems(e,r),this._trigger("found",null,{term:r,items:e})):(this.close(),this._trigger("nothing",null,{term:r})),i(e)},this)).fail(function(){i([])}).always(function(){clearTimeout(n)})}}},_create:function(){this._super()},_getUserIdsQueryFilter:function(){var e=this.options.rejectUserIdsGetter();return e&&e.length>0?"(not (id in ["+e.join(",")+"])) AND ":""},_renderMenu:function(i,r){t(i).addClass("tau-user-autocomplete").css({maxHeight:.5*t(window).height(),zIndex:this.element.zIndex()+1}),e.each(r,e.bind(function(e){this._renderItem(i,e)},this))},_renderItem:function(e,t){var i=t.isLoading?this.options.itemLoadingRenderer:this.options.itemRenderer;return i.renderItem(t).data("ui-autocomplete-item",t).appendTo(e)},_processItems:function(t,i){var r=i.toLowerCase();return e.chain(t).map(e.bind(function(t){return t.name=e.trim(e.asString(t.firstName)+" "+e.asString(t.lastName))||e.trim(t.email),t},this)).sortBy(function(t){var i=t.name.toLowerCase();return(e.startsWith(i,r)?"0":"1")+i}).value()}})});
define('tau/ui/extensions/inviter/jquery.tauInviter',["Underscore","jQuery","tau/core/class","tau/libs/store2/store2","tau/utils/utils.constants","tau/ui/templates/inviter/ui.template.inviter.widget.members","tau/ui/extensions/user/jquery.tauUserAutocomplete"],function(t,e,i,s,n,o){var r=i.extend({init:function(e){this.options=t.defaults(t.extend({},e),{allowEmails:!1}),this.data=[]},_containsUser:function(e){return t.some(this.data,function(t){return e.id&&t.id==e.id||t.email===e.email})},add:function(t){return this._containsUser(t)?!1:(this.data.push(t),!0)},addBatch:function(e){t.map(e,this.add,this)},addByString:function(e){var i=this.split(t.trim(e)),s=[],n=[];return t.forEach(i,t.bind(function(t){if(this.options.allowEmails&&this.isEmail(t)){var e={id:null,email:t,name:t,firstName:null,lastName:null,login:t,type:"invited",state:"notconfirmed"};this.add(e)&&n.push(e)}else s.push(t)},this)),{items:n,rest:s.join(" ")}},split:function(e){return t.compact(t.trim(e).split(/[\s,]+/))},remove:function(e){this.data=t.reject(this.data,function(t){return t.id==e.id})},isEmpty:function(){return!this.data.length},getAll:function(){return this.data},isEmail:function(t){return t.match(n.get("emailRegexp"))}});return e.widget("ui.tauInviter",{options:{configurator:null,autocompleteQueryAdd:"",autocompleteFieldsQueryAdd:"",autocompletePosition:{},messagePosition:{},allowEmails:!1,minLength:2,bubblesAppendTo:null,processItems:null,canDelete:function(){return!0},reforwardingOption:["autocompleteQueryAdd","autocompleteFieldsQueryAdd","minLength","autocompleteTakeQueryAdd","showLoading"]},_setOption:function(e,i){"reforwardingOption"===e&&(i=this.options.reforwardingOption.concat(i)),t.contains(this.options.reforwardingOption,e)&&this.$inp.tauUserAutocomplete("option",e,i),this._super(e,i)},_create:function(){this.configurator=this.options.configurator,this.$el=this.element,this.openInnerBubble=!1,this.model=new r({allowEmails:this.options.allowEmails}),this._initTemplates(),this._initWidget()},_initTemplates:function(){var t=this.configurator.getTemplateFactory();t.register({name:"board.context.filter.members-widget.selectedItem",engine:"jqote2",markup:["<li class=\"tau-user tau-user-<%! this.type || 'existing' %> i-role-member\">","<% if (this.avatarUri) { %>",'<img class="tau-user__avatar" width="20" height="20" alt="" src="<%= this.avatarUri%>20" />',"<% } %>",'<span class="tau-user__name"><%! this.name %></span>','<i class="tau-delete i-role-action-delete"></i>',"</li>"]}),t.register({name:"board.context.filter.members-widget.popupContent",engine:"jqote2",markup:["<span><%! this.main %></span>","<% if (this.sub) { %>",'<div class="tau-message <%! this.type %>"><%! this.sub %></div>',"<% } %>"]})},_initWidget:function(){this.$widget=this.configurator.getTemplateFactory().get(o.name).bind({},{}),this.$el.hide(),this.$el.after(this.$widget);var i=this.$widget,s=i.find(".i-role-input");this.$inp=s,this.$inpLi=s.closest("li"),this.$helper=i.find(".i-role-systemhelper"),this.$sizer=i.find(".i-role-sizer"),this.$placeholder=i.find(".i-role-placeholder");var n=this.$el.attr("placeholder");n&&this.$placeholder.text(n),this.initBubbled(),i.on("click",function(){s.focus()}),i.on("click",".i-role-action-delete",t.bind(function(t){var i=e(t.currentTarget).closest("li");this.removeItem(i,function(){this.$placeholder.toggle(this.model.isEmpty())}.bind(this))},this)),i.on("process",t.bind(this.processInput,this,!1)),this.initInput(),this.initAutocomplete()},initBubbled:function(){var e=t.defaults(this.options.messagePosition,{my:"left top",at:"left bottom+5",collision:"none"});this.$bubbled=this.$widget.tauBubble({template:['<div class="tau-invite-widget-tooltip">','    <div class="i-role-content" role="content"></div>',"</div>"].join(""),stackName:"members-widget",showEvent:"nothing",hideEvent:"nothing",appendTo:this.options.bubblesAppendTo,onPositionConfig:function(i){return t.extend(i,e)}})},initInput:function(){var i=(this.$helper,this.$placeholder),s=this.$inp;s.on("input",function(){i.hide()}),this.model.isEmpty()||i.hide(),s.focusin(t.bind(function(){this.model.isEmpty()||i.hide(),this.hideMessage()},this)),s.focusout(t.bind(function(){""===s.val()&&this.model.isEmpty()&&i.show()},this)),s.on("keydown",function(t){var i="";switch(t.which){case e.ui.keyCode.ESCAPE:if(this.openInnerBubble)return this.hideMessage(),t.stopPropagation(),t.preventDefault(),!1;break;case e.ui.keyCode.ENTER:if(i="enter",""===s.val())return;t.stopPropagation(),t.preventDefault();break;case e.ui.keyCode.BACKSPACE:i="backspace";break;case e.ui.keyCode.SPACE:i="whitespace"}return i&&(s.trigger("keydown:"+i,t),"enter"==i)?!1:void 0}.bind(this)),s.on("keydown:enter",t.bind(function(){this.processInput(),this.resetSize()},this)),s.on("keydown:whitespace",t.bind(function(){this.processInput(),s.tauUserAutocomplete("close"),this.hideMessage()},this)),s.on("keydown:backspace",t.bind(function(){if(!s.val().length){var t=s.closest("li").prev();this.removeItem(t,function(){this.resetSize()}.bind(this))}this.hideMessage()},this)),s.on("keyup",t.bind(function(){this.refreshHelper(),this.syncSize()},this)),s.on("paste",t.bind(function(){setTimeout(t.bind(function(){this.processInput(),this.syncSize()},this),1)},this))},setValue:function(t){this.model.data=[],this.model.addBatch(t),this.syncFromModel()},syncFromModel:function(){this.$widget.find(".i-role-member").remove(),this.addItems(this.model.getAll()),this.$placeholder.toggle(this.model.isEmpty())},addItems:function(e){t.forEach(e,t.bind(function(t){var e=this.createItem(t);this.$inpLi.before(e)},this))},getValue:function(t){return t&&this.processInput(),this.model.data},processInput:function(t){var e=this.$inp.val();if(e.length>0){var i=this.model.addByString(e);this.addItems(i.items),this.$inp.val(i.rest),t!==!1&&this.$inp.focus(),this.emptyHelper(),this.hideMessage(),this._trigger("change")}},showMessage:function(t){var e=this.bt("board.context.filter.members-widget.popupContent",t);this.$bubbled.tauBubble("option","content",e).tauBubble("option","alignTo",this.$inp).tauBubble("show"),this.openInnerBubble=!0},hideMessage:function(){this.$bubbled.data("ui-tauBubble")&&this.$bubbled.tauBubble("hide"),this.openInnerBubble=!1},split:function(e){return t.compact(t.trim(e).split(/[\s,]+/))},resultBubble:function(e){var i=t.last(this.split(e));if(i&&i.length>=this.options.minLength||0===e.length&&0===this.options.minLength){var s;s=this.options.allowEmails?this.isEmail(i)?{main:"The invitation will be sent to",sub:i,type:"tau-valid"}:{main:"There's no one with this name. Please, enter the email address of the person you want to invite.",sub:i+" is invalid email",type:"tau-error"}:{main:"There's no one with this name or email.",sub:"",type:"tau-error"},this.showMessage(s)}else this.hideMessage()},refreshHelper:function(e){e=e||""===e?e:this.$helper.text();var i=this.$inp.val();if(i&&t.startsWith(e.toLowerCase(),i.toLowerCase())){var s=e.slice(i.length);this.$helper.find("s").text(i),this.$helper.find("span").text(s)}else this.emptyHelper()},emptyHelper:function(){this.$helper.find("s").text(""),this.$helper.find("span").text("")},syncSize:function(){var t=this.$widget.width()-10;this.$sizer.text(this.$inp.val());var e=this.$sizer.width();if(!(e<=this.$inp.width()-8)){var i=this.$inp[0].getBoundingClientRect().left,s=t-i,n=s;t>e&&(n=s>e?s:t),this.$inp.width()!=n&&this.$inp.width(n)}},resetSize:function(){this.$inp.width("10")},bt:function(t,e){return this.configurator.getTemplateFactory().get(t).bind({},e)},createItem:function(t){return this.bt("board.context.filter.members-widget.selectedItem",t).data("id",t.id)},removeItem:function(t,e){var i=t.data();this.options.canDelete(i)&&(this.model.remove(i),this._trigger("change"),t.remove(),e())},initAutocomplete:function(){var e=t.defaults(this.options.autocompletePosition,{my:"left top",at:"left bottom",collision:"none"});if(this.$inp.tauUserAutocomplete({store2:new s(this.configurator),autocompleteQueryAdd:this.options.autocompleteQueryAdd,appendTo:this.options.bubblesAppendTo,rejectUserIdsGetter:t.bind(function(){return t.compact(t.pluck(this.model.getAll(),"id"))},this),focus:t.bind(function(t,e){return this.refreshHelper(e.item.name),!1},this),open:function(){this.openInnerBubble=!0}.bind(this),position:e,select:t.bind(function(t,e){var i=e.item;if(i.isLoading)return!1;this.model.add(i),this._trigger("change");var s=this.createItem(i);return this.$inpLi.before(s),this.$inp.val(""),this.emptyHelper(),this.hideMessage(),!1},this),close:t.bind(function(){this.emptyHelper(),this.openInnerBubble=!1},this),found:t.bind(function(){this.hideMessage()},this),nothing:t.bind(function(t,e){this.resultBubble(e.term)},this)}),this.options.processItems){var i=this.$inp.data("ui-tauUserAutocomplete");i._processItems=t.wrap(i._processItems,this.options.processItems)}},widget:function(){return this.$widget},isEmail:function(t){return t.match(n.get("emailRegexp"))},reset:function(){this.model.data=[],this.syncFromModel()}})});
define('tau/ui/extensions/assignments/ui.extension.assignments',["Underscore","jQuery","tau/core/extension.base","tau/ui/extensions/inviter/jquery.tauInviter"],function(t,e,i){return i.extend({init:function(t,e,i,o,n,r){return this.model=o,this.configurator=e,this.templateForm=n,this.entity=i,this.$within=r||window,0===this.$within.length&&(this.$within=window),this._super(t)},"bus beforeInit":function(){e.when(this.model.load()).then(t.bind(function(t){this.fire("dataBind",{groups:t})},this))},"bus afterRender":function(i,o){var n=o.element;n.on("click",".i-role-formtrigger",t.bind(function(i){var o=e(i.currentTarget);e.when(this.closeFormAll(n,o)).then(t.bind(this.startEdit,this,o,n))},this)),n.on("click","form",t.bind(function(t){t.stopPropagation()},this)),1==this.model.groups.length&&this.startEdit(n.find(".i-role-formtrigger"),n)},startEdit:function(i,o){return i.hasClass("tau-assignments__group_state_edit")?void this.closeForm(i,i.find("form")):e.when(this.createForm(i,o)).then(t.bind(this.appendFormToGroup,this,i)).then(t.bind(this.handleForm,this,i)).then(this.domModified.bind(this))},domModified:function(){this.fire("dom.modified")},handleForm:function(e,i){i.on("submit",t.bind(function(t){t.preventDefault();var o=this.serializeForm(i);return this.model.processFormData(o),1==this.model.groups.length?(this.fire("complete"),!1):(this.closeForm(e,i),!1)},this))},serializeForm:function(e){var i=e.serializeArray();return i=t.object(t.pluck(i,"name"),t.pluck(i,"value")),i.users=e.find("[name=users]").tauInviter("getValue"),i},createForm:function(i,o){var n=i.data("id"),r=this.model.findGroupById(n),s=this.configurator.getTemplateFactory().get(this.templateForm.name).bind({},{data:{roleId:r.role.id,groupId:r.id,users:r.users}}),a=s.find("[name=users]");return a.tauInviter({configurator:this.configurator,allowEmails:!1,autocompletePosition:{my:"left top",at:"left bottom",collision:"flipfit flipfit",within:this.$within},messagePosition:{my:"left top",at:"left bottom+5",collision:"flipfit flipfit",within:this.$within},bubblesAppendTo:o,processItems:function(e,i,o){var n=function(t){var e=t.projectRoles&&t.projectRoles[0],i=t.teamRoles&&t.teamRoles[0];return(e||i)!==r.role.id},s=function(t,e){return e},a=function(t,i){return t.concat(e(i,o))};return t.chain(i).groupBy(n).sortBy(s).reduce(a,[]).value()}}),a.tauInviter("setValue",r.users),a.on("tauinviterchange",t.bind(function(){s.find(":text").trigger("focus"),this.fire("assignment.editor.saving"),this.model.processFormData(this.serializeForm(s)).then(this.fire.bind(this,"assignment.editor.saved")).then(this.domModified.bind(this))},this)),e.when(this.createAutocompleteQuery()).then(t.bind(function(t){a.length&&a.data("ui-tauInviter")&&a.tauInviter("option",{autocompleteQueryAdd:t.where,autocompleteFieldsQueryAdd:t.select,minLength:0,showLoading:!0,autocompleteTakeQueryAdd:"&take=1000"})},this)),{$form:s,$inviter:a}},createAutocompleteQuery:function(){var i=e.Deferred();return this.configurator.getStore().get(this.entity.entityType.name,{id:this.entity.id,fields:["id",{project:["id"]},{team:["id"]}]}).done(function(e){var o=e[0].data,n=[],r="",s=[],a="";o.project&&o.project.id&&(n.push(t.sprintf("ProjectMembers.Count(project.id==%d) > 0 ",o.project.id)),s.push(t.sprintf("ProjectMembers.Where(Project.Id==%d).Select(Role.id) as projectRoles",o.project.id))),o.team&&o.team.id&&(n.push(t.sprintf("TeamMembers.Count(team.id==%d) > 0",o.team.id)),s.push(t.sprintf("TeamMembers.Where(Team.Id==%d).Select(Role.id) as teamRoles",o.team.id))),n.length&&(r=" AND ("+n.join(" OR ")+")"),s.length&&(a=","+s.join(",")),i.resolve({where:r,select:a})}),i},appendFormToGroup:function(e,i){e.toggleClass("tau-assignments__group_state_edit",!0),e.append(i.$form);var o=i.$form.find(":text");this.domModified();var n=t.debounce(function(){o.data("ui-tauUserAutocomplete")&&o.tauUserAutocomplete("search",o.val())},100);return o.on("focus",n),o.focus(),i.$form},closeForm:function(t,e){e.remove(),t.toggleClass("tau-assignments__group_state_edit",!1),this.domModified()},closeFormAll:function(i,o){i.find(".i-role-group").not(o).each(t.bind(function(t,i){var o=e(i);this.closeForm(o,o.find("form"))},this))}})});
(function(){var t,i=function(t,i){return function(){return t.apply(i,arguments)}},e=[].slice,n={}.hasOwnProperty,s=function(t,i){function e(){this.constructor=t}for(var s in i)n.call(i,s)&&(t[s]=i[s]);return e.prototype=i.prototype,t.prototype=new e,t.__super__=i.prototype,t},r=[].indexOf||function(t){for(var i=0,e=this.length;e>i;i++)if(i in this&&this[i]===t)return i;return-1};t={},String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),t.Binding=function(){function n(t,e,n,s,r,o){var h,l,u,a;if(this.view=t,this.el=e,this.type=n,this.key=s,this.keypath=r,this.options=null!=o?o:{},this.update=i(this.update,this),this.unbind=i(this.unbind,this),this.bind=i(this.bind,this),this.publish=i(this.publish,this),this.sync=i(this.sync,this),this.set=i(this.set,this),this.eventHandler=i(this.eventHandler,this),this.formattedValue=i(this.formattedValue,this),!(this.binder=this.view.binders[n])){a=this.view.binders;for(h in a)u=a[h],"*"!==h&&-1!==h.indexOf("*")&&(l=new RegExp("^"+h.replace("*",".+")+"$"),l.test(n)&&(this.binder=u,this.args=new RegExp("^"+h.replace("*","(.+)")+"$").exec(n),this.args.shift()))}this.binder||(this.binder=this.view.binders["*"]),this.binder instanceof Function&&(this.binder={routine:this.binder}),this.formatters=this.options.formatters||[],this.model=this.key?this.view.models[this.key]:this.view.models}return n.prototype.formattedValue=function(t){var i,n,s,r,o,h;for(h=this.formatters,r=0,o=h.length;o>r;r++)n=h[r],i=n.split(/\s+/),s=i.shift(),n=this.model[s]instanceof Function?this.model[s]:this.view.formatters[s],(null!=n?n.read:void 0)instanceof Function?t=n.read.apply(n,[t].concat(e.call(i))):n instanceof Function&&(t=n.apply(null,[t].concat(e.call(i))));return t},n.prototype.eventHandler=function(t){var i,e;return e=(i=this).view.config.handler,function(n){return e.call(t,this,n,i)}},n.prototype.set=function(t){var i;return t=this.formattedValue(t instanceof Function&&!this.binder["function"]?t.call(this.model):t),null!=(i=this.binder.routine)?i.call(this,this.el,t):void 0},n.prototype.sync=function(){return this.set(this.options.bypass?this.model[this.keypath]:this.view.config.adapter.read(this.model,this.keypath))},n.prototype.publish=function(){var i,n,s,r,o,h,l,u,a;for(r=t.Util.getInputValue(this.el),l=this.formatters.slice(0).reverse(),o=0,h=l.length;h>o;o++)n=l[o],i=n.split(/\s+/),s=i.shift(),(null!=(u=this.view.formatters[s])?u.publish:void 0)&&(r=(a=this.view.formatters[s]).publish.apply(a,[r].concat(e.call(i))));return this.view.config.adapter.publish(this.model,this.keypath,r)},n.prototype.bind=function(){var t,i,e,n,s,r,o,h,l;if(null!=(r=this.binder.bind)&&r.call(this,this.el),this.options.bypass?this.sync():(this.view.config.adapter.subscribe(this.model,this.keypath,this.sync),this.view.config.preloadData&&this.sync()),null!=(o=this.options.dependencies)?o.length:void 0){for(h=this.options.dependencies,l=[],n=0,s=h.length;s>n;n++)t=h[n],/^\./.test(t)?(e=this.model,i=t.substr(1)):(t=t.split("."),e=this.view.models[t.shift()],i=t.join(".")),l.push(this.view.config.adapter.subscribe(e,i,this.sync));return l}},n.prototype.unbind=function(){var t,i,e,n,s,r,o,h,l;if(null!=(r=this.binder.unbind)&&r.call(this,this.el),this.options.bypass||this.view.config.adapter.unsubscribe(this.model,this.keypath,this.sync),null!=(o=this.options.dependencies)?o.length:void 0){for(h=this.options.dependencies,l=[],n=0,s=h.length;s>n;n++)t=h[n],/^\./.test(t)?(e=this.model,i=t.substr(1)):(t=t.split("."),e=this.view.models[t.shift()],i=t.join(".")),l.push(this.view.config.adapter.unsubscribe(e,i,this.sync));return l}},n.prototype.update=function(t){var i;return null==t&&(t={}),this.key?t[this.key]&&(this.options.bypass||this.view.config.adapter.unsubscribe(this.model,this.keypath,this.sync),this.model=t[this.key],this.options.bypass?this.sync():(this.view.config.adapter.subscribe(this.model,this.keypath,this.sync),this.view.config.preloadData&&this.sync())):this.sync(),null!=(i=this.binder.update)?i.call(this,t):void 0},n}(),t.ComponentBinding=function(e){function n(e,n,s){var o,h,l,u,a;for(this.view=e,this.el=n,this.type=s,this.unbind=i(this.unbind,this),this.bind=i(this.bind,this),this.update=i(this.update,this),this.locals=i(this.locals,this),this.component=t.components[this.type],this.attributes={},this.inflections={},u=this.el.attributes||[],h=0,l=u.length;l>h;h++)o=u[h],a=o.name,r.call(this.component.attributes,a)>=0?this.attributes[o.name]=o.value:this.inflections[o.name]=o.value}return s(n,e),n.prototype.sync=function(){},n.prototype.locals=function(t){var i,e,n,s,r,o,h,l,u;null==t&&(t=this.view.models),r={},l=this.inflections;for(e in l)for(i=l[e],u=i.split("."),o=0,h=u.length;h>o;o++)s=u[o],r[e]=(r[e]||t)[s];for(e in t)n=t[e],null==r[e]&&(r[e]=n);return r},n.prototype.update=function(t){var i;return null!=(i=this.componentView)?i.update(this.locals(t)):void 0},n.prototype.bind=function(){var i,e;return null!=this.componentView?null!=(e=this.componentView)?e.bind():void 0:(i=this.component.build.call(this.attributes),(this.componentView=new t.View(i,this.locals(),this.view.options)).bind(),this.el.parentNode.replaceChild(i,this.el))},n.prototype.unbind=function(){var t;return null!=(t=this.componentView)?t.unbind():void 0},n}(t.Binding),t.TextBinding=function(t){function e(t,e,n,s,r,o){this.view=t,this.el=e,this.type=n,this.key=s,this.keypath=r,this.options=null!=o?o:{},this.sync=i(this.sync,this),this.formatters=this.options.formatters||[],this.model=this.key?this.view.models[this.key]:this.view.models}return s(e,t),e.prototype.binder={routine:function(t,i){return t.data=null!=i?i:""}},e.prototype.sync=function(){return e.__super__.sync.apply(this,arguments)},e}(t.Binding),t.View=function(){function n(e,n,s){var r,o,h,l,u,a,d,p,c;for(this.els=e,this.models=n,this.options=null!=s?s:{},this.update=i(this.update,this),this.publish=i(this.publish,this),this.sync=i(this.sync,this),this.unbind=i(this.unbind,this),this.bind=i(this.bind,this),this.select=i(this.select,this),this.build=i(this.build,this),this.componentRegExp=i(this.componentRegExp,this),this.bindingRegExp=i(this.bindingRegExp,this),this.els.jquery||this.els instanceof Array||(this.els=[this.els]),d=["config","binders","formatters"],u=0,a=d.length;a>u;u++){if(o=d[u],this[o]={},this.options[o]){p=this.options[o];for(r in p)h=p[r],this[o][r]=h}c=t[o];for(r in c)h=c[r],null==(l=this[o])[r]&&(l[r]=h)}this.build()}return n.prototype.bindingRegExp=function(){var t;return t=this.config.prefix,t?new RegExp("^data-"+t+"-"):/^data-/},n.prototype.componentRegExp=function(){var t,i;return new RegExp("^"+(null!=(t=null!=(i=this.config.prefix)?i.toUpperCase():void 0)?t:"RV")+"-")},n.prototype.build=function(){var i,n,s,o,h,l,u,a,d,p=this;for(this.bindings=[],l=[],i=this.bindingRegExp(),s=this.componentRegExp(),n=function(i,e,n,s){var r,o,h,l,u,a,d,c,f,b;return a={},f=function(){var t,i,e,n;for(e=s.split("|"),n=[],t=0,i=e.length;i>t;t++)c=e[t],n.push(c.trim());return n}(),r=function(){var t,i,e,n;for(e=f.shift().split("<"),n=[],t=0,i=e.length;i>t;t++)o=e[t],n.push(o.trim());return n}(),d=r.shift(),b=d.split(/\.|:/),a.formatters=f,a.bypass=-1!==d.indexOf(":"),b[0]?l=b.shift():(l=null,b.shift()),u=b.join("."),(h=r.shift())&&(a.dependencies=h.split(/\s+/)),p.bindings.push(new t[i](p,e,n,l,u,a))},h=function(o){var u,a,d,c,f,b,v,g,y,m,w,x,k,E,N,V,j,R,T,B,C,S,U,_,O,Q,A,D,L,F,H,$;if(r.call(l,o)<0){if(o.nodeType===Node.TEXT_NODE){if(g=t.TextTemplateParser,(f=p.config.templateDelimiters)&&(E=g.parse(o.data,f)).length&&(1!==E.length||E[0].type!==g.types.text))for(w=E[0],m=2<=E.length?e.call(E,1):[],o.data=w.value,0===w.type?o.data=w.value:n("TextBinding",o,null,w.value),j=0,C=m.length;C>j;j++)k=m[j],x=document.createTextNode(k.value),o.parentNode.appendChild(x),1===k.type&&n("TextBinding",x,null,k.value)}else if(s.test(o.tagName))N=o.tagName.replace(s,"").toLowerCase(),p.bindings.push(new t.ComponentBinding(p,o,N));else if(null!=o.attributes){for(A=o.attributes,R=0,S=A.length;S>R;R++)if(u=A[R],i.test(u.name)){if(N=u.name.replace(i,""),!(d=p.binders[N])){D=p.binders;for(b in D)V=D[b],"*"!==b&&-1!==b.indexOf("*")&&(y=new RegExp("^"+b.replace("*",".+")+"$"),y.test(N)&&(d=V))}if(d||(d=p.binders["*"]),d.block){for(L=o.childNodes,T=0,U=L.length;U>T;T++)v=L[T],l.push(v);a=[u]}}for(F=a||o.attributes,B=0,_=F.length;_>B;B++)u=F[B],i.test(u.name)&&(N=u.name.replace(i,""),n("Binding",o,N,u.value))}for(H=o.childNodes,$=[],Q=0,O=H.length;O>Q;Q++)c=H[Q],$.push(h(c));return $}},d=this.els,u=0,a=d.length;a>u;u++)o=d[u],h(o)},n.prototype.select=function(t){var i,e,n,s,r;for(s=this.bindings,r=[],e=0,n=s.length;n>e;e++)i=s[e],t(i)&&r.push(i);return r},n.prototype.bind=function(){var t,i,e,n,s;for(n=this.bindings,s=[],i=0,e=n.length;e>i;i++)t=n[i],s.push(t.bind());return s},n.prototype.unbind=function(){var t,i,e,n,s;for(n=this.bindings,s=[],i=0,e=n.length;e>i;i++)t=n[i],s.push(t.unbind());return s},n.prototype.sync=function(){var t,i,e,n,s;for(n=this.bindings,s=[],i=0,e=n.length;e>i;i++)t=n[i],s.push(t.sync());return s},n.prototype.publish=function(){var t,i,e,n,s;for(n=this.select(function(t){return t.binder.publishes}),s=[],i=0,e=n.length;e>i;i++)t=n[i],s.push(t.publish());return s},n.prototype.update=function(t){var i,e,n,s,r,o,h;null==t&&(t={});for(e in t)n=t[e],this.models[e]=n;for(o=this.bindings,h=[],s=0,r=o.length;r>s;s++)i=o[s],h.push(i.update(t));return h},n}(),t.TextTemplateParser=function(){function t(){}return t.types={text:0,binding:1},t.parse=function(t,i){var e,n,s,r,o,h,l;for(h=[],r=t.length,e=0,n=0;r>n;){if(e=t.indexOf(i[0],n),0>e){h.push({type:this.types.text,value:t.slice(n)});break}if(e>0&&e>n&&h.push({type:this.types.text,value:t.slice(n,e)}),n=e+2,e=t.indexOf(i[1],n),0>e){o=t.slice(n-2),s=h[h.length-1],(null!=s?s.type:void 0)===this.types.text?s.value+=o:h.push({type:this.types.text,value:o});break}l=t.slice(n,e).trim(),h.push({type:this.types.binding,value:l}),n=e+2}return h},t}(),t.Util={bindEvent:function(t,i,e){return null!=window.jQuery?(t=jQuery(t),null!=t.on?t.on(i,e):t.bind(i,e)):null!=window.addEventListener?t.addEventListener(i,e,!1):(i="on"+i,t.attachEvent(i,e))},unbindEvent:function(t,i,e){return null!=window.jQuery?(t=jQuery(t),null!=t.off?t.off(i,e):t.unbind(i,e)):null!=window.removeEventListener?t.removeEventListener(i,e,!1):(i="on"+i,t.detachEvent(i,e))},getInputValue:function(t){var i,e,n,s;if(null!=window.jQuery)switch(t=jQuery(t),t[0].type){case"checkbox":return t.is(":checked");default:return t.val()}else switch(t.type){case"checkbox":return t.checked;case"select-multiple":for(s=[],e=0,n=t.length;n>e;e++)i=t[e],i.selected&&s.push(i.value);return s;default:return t.value}}},t.binders={enabled:function(t,i){return t.disabled=!i},disabled:function(t,i){return t.disabled=!!i},checked:{publishes:!0,bind:function(i){return t.Util.bindEvent(i,"change",this.publish)},unbind:function(i){return t.Util.unbindEvent(i,"change",this.publish)},routine:function(t,i){var e;return t.checked="radio"===t.type?(null!=(e=t.value)?e.toString():void 0)===(null!=i?i.toString():void 0):!!i}},unchecked:{publishes:!0,bind:function(i){return t.Util.bindEvent(i,"change",this.publish)},unbind:function(i){return t.Util.unbindEvent(i,"change",this.publish)},routine:function(t,i){var e;return t.checked="radio"===t.type?(null!=(e=t.value)?e.toString():void 0)!==(null!=i?i.toString():void 0):!i}},show:function(t,i){return t.style.display=i?"":"none"},hide:function(t,i){return t.style.display=i?"none":""},html:function(t,i){return t.innerHTML=null!=i?i:""},value:{publishes:!0,bind:function(i){return t.Util.bindEvent(i,"change",this.publish)},unbind:function(i){return t.Util.unbindEvent(i,"change",this.publish)},routine:function(t,i){var e,n,s,o,h,l,u;if(null!=window.jQuery){if(t=jQuery(t),(null!=i?i.toString():void 0)!==(null!=(o=t.val())?o.toString():void 0))return t.val(null!=i?i:"")}else if("select-multiple"===t.type){if(null!=i){for(u=[],n=0,s=t.length;s>n;n++)e=t[n],u.push(e.selected=(h=e.value,r.call(i,h)>=0));return u}}else if((null!=i?i.toString():void 0)!==(null!=(l=t.value)?l.toString():void 0))return t.value=null!=i?i:""}},text:function(t,i){return null!=t.innerText?t.innerText=null!=i?i:"":t.textContent=null!=i?i:""},"if":{block:!0,bind:function(t){var i,e;return null==this.marker?(i=["data",this.view.config.prefix,this.type].join("-").replace("--","-"),e=t.getAttribute(i),this.marker=document.createComment(" rivets: "+this.type+" "+e+" "),t.removeAttribute(i),t.parentNode.insertBefore(this.marker,t),t.parentNode.removeChild(t)):void 0},unbind:function(){var t;return null!=(t=this.nested)?t.unbind():void 0},routine:function(i,e){var n,s,r,o,h;if(!!e==(null==this.nested)){if(e){r={},h=this.view.models;for(n in h)s=h[n],r[n]=s;return o={binders:this.view.options.binders,formatters:this.view.options.formatters,config:this.view.options.config},(this.nested=new t.View(i,r,o)).bind(),this.marker.parentNode.insertBefore(i,this.marker.nextSibling)}return i.parentNode.removeChild(i),this.nested.unbind(),delete this.nested}},update:function(t){var i;return null!=(i=this.nested)?i.update(t):void 0}},unless:{block:!0,bind:function(i){return t.binders["if"].bind.call(this,i)},unbind:function(){return t.binders["if"].unbind.call(this)},routine:function(i,e){return t.binders["if"].routine.call(this,i,!e)},update:function(i){return t.binders["if"].update.call(this,i)}},"on-*":{"function":!0,unbind:function(i){return this.handler?t.Util.unbindEvent(i,this.args[0],this.handler):void 0},routine:function(i,e){return this.handler&&t.Util.unbindEvent(i,this.args[0],this.handler),t.Util.bindEvent(i,this.args[0],this.handler=this.eventHandler(e))}},"each-*":{block:!0,bind:function(t){var i;return null==this.marker?(i=["data",this.view.config.prefix,this.type].join("-").replace("--","-"),this.marker=document.createComment(" rivets: "+this.type+" "),this.iterated=[],t.removeAttribute(i),t.parentNode.insertBefore(this.marker,t),t.parentNode.removeChild(t)):void 0},unbind:function(){var t,i,e,n,s;if(null!=this.iterated){for(n=this.iterated,s=[],i=0,e=n.length;e>i;i++)t=n[i],s.push(t.unbind());return s}},routine:function(i,e){var n,s,r,o,h,l,u,a,d,p,c,f,b,v,g,y,m,w,x,k;if(u=this.args[0],e=e||[],this.iterated.length>e.length)for(m=Array(this.iterated.length-e.length),b=0,g=m.length;g>b;b++)s=m[b],f=this.iterated.pop(),f.unbind(),this.marker.parentNode.removeChild(f.els[0]);for(k=[],r=v=0,y=e.length;y>v;r=++v)if(l=e[r],n={},n[u]=l,null==this.iterated[r]){w=this.view.models;for(h in w)l=w[h],null==n[h]&&(n[h]=l);d=this.iterated.length?this.iterated[this.iterated.length-1].els[0]:this.marker,a={binders:this.view.options.binders,formatters:this.view.options.formatters,config:{}},x=this.view.options.config;for(o in x)c=x[o],a.config[o]=c;a.config.preloadData=!0,p=i.cloneNode(!0),f=new t.View(p,n,a),f.bind(),this.iterated.push(f),k.push(this.marker.parentNode.insertBefore(p,d.nextSibling))}else k.push(this.iterated[r].models[u]!==l?this.iterated[r].update(n):void 0);return k},update:function(t){var i,e,n,s,r,o,h,l;i={};for(e in t)n=t[e],e!==this.args[0]&&(i[e]=n);for(h=this.iterated,l=[],r=0,o=h.length;o>r;r++)s=h[r],l.push(s.update(i));return l}},"class-*":function(t,i){var e;return e=" "+t.className+" ",!i==(-1!==e.indexOf(" "+this.args[0]+" "))?t.className=i?""+t.className+" "+this.args[0]:e.replace(" "+this.args[0]+" "," ").trim():void 0},"*":function(t,i){return i?t.setAttribute(this.type,i):t.removeAttribute(this.type)}},t.components={},t.config={preloadData:!0,handler:function(t,i,e){return this.call(t,i,e.view.models)}},t.formatters={},t.factory=function(i){return i._=t,i.binders=t.binders,i.components=t.components,i.formatters=t.formatters,i.config=t.config,i.configure=function(i){var e,n;null==i&&(i={});for(e in i)n=i[e],t.config[e]=n},i.bind=function(i,e,n){var s;return null==e&&(e={}),null==n&&(n={}),s=new t.View(i,e,n),s.bind(),s}},"object"==typeof exports?t.factory(exports):"function"==typeof define&&define.amd?define('libs/rivets',["exports"],function(i){return t.factory(this.rivets=i),i}):t.factory(this.rivets={})}).call(this);
"use strict";!function(t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define('libs/watch',t):(window.WatchJS=t(),window.watch=window.WatchJS.watch,window.unwatch=window.WatchJS.unwatch,window.callWatchers=window.WatchJS.callWatchers)}(function(){var t={noMore:!1},n=[],r=function(t){var n={};return t&&"[object Function]"==n.toString.call(t)},e=function(t){return t%1===0},c=function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=function(t){if(null==t||"object"!=typeof t)return t;var n=t.constructor();for(var r in t)n[r]=t[r];return n},a=function(t,n,r,e){try{Object.observe(t[n],function(t){e(t)})}catch(c){try{Object.defineProperty(t,n,{get:r,set:e,enumerable:!0,configurable:!0})}catch(o){try{Object.prototype.__defineGetter__.call(t,n,r),Object.prototype.__defineSetter__.call(t,n,e)}catch(a){throw new Error("watchJS error: browser not supported :/")}}}},i=function(t,n,r){try{Object.defineProperty(t,n,{enumerable:!1,configurable:!0,writable:!1,value:r})}catch(e){t[n]=r}},f=function(){r(arguments[1])?s.apply(this,arguments):c(arguments[1])?u.apply(this,arguments):h.apply(this,arguments)},s=function(t,n,r,e){if("string"!=typeof t&&(t instanceof Object||c(t))){var o=[];if(c(t))for(var a=0;a<t.length;a++)o.push(a);else for(var i in t)o.push(i);u(t,o,n,r,e)}},u=function(t,n,r,e,o){if("string"!=typeof t&&(t instanceof Object||c(t)))for(var a in n)h(t,n[a],r,e,o)},h=function(t,n,e,o,a){"string"!=typeof t&&(t instanceof Object||c(t))&&(r(t[n])||(null!=t[n]&&(void 0===o||o>0)&&(void 0!==o&&o--,s(t[n],e,o)),v(t,n,e),a&&m(t,n,e,o)))},l=function(){r(arguments[1])?p.apply(this,arguments):c(arguments[1])?w.apply(this,arguments):j.apply(this,arguments)},p=function(t,n){if(!(t instanceof String)&&(t instanceof Object||c(t))){var r=[];if(c(t))for(var e=0;e<t.length;e++)r.push(e);else for(var o in t)r.push(o);w(t,r,n)}},w=function(t,n,r){for(var e in n)j(t,n[e],r)},v=function(n,r,e){var c=n[r];d(n,r),n.watchers||i(n,"watchers",{}),n.watchers[r]||(n.watchers[r]=[]);for(var o in n.watchers[r])if(n.watchers[r][o]===e)return;n.watchers[r].push(e);var f=function(){return c},u=function(o){var a=c;c=o,n[r]&&s(n[r],e),d(n,r),t.noMore||JSON.stringify(a)!==JSON.stringify(o)&&(g(n,r,"set",o,a),t.noMore=!1)};a(n,r,f,u)},g=function(t,n,r,c,o){if(n)for(var a in t.watchers[n])e(a)&&t.watchers[n][a].call(t,n,r,c||t[n],o);else for(var n in t)g(t,n,r,c,o)},y=["pop","push","reverse","shift","sort","slice","unshift"],b=function(t,n,r,e){i(t[n],e,function(){var c=r.apply(t[n],arguments);return h(t,t[n]),"slice"!==e&&g(t,n,e,arguments),c})},d=function(t,n){if(t[n]&&!(t[n]instanceof String)&&c(t[n]))for(var r,e=y.length;e--;)r=y[e],b(t,n,t[n][r],r)},j=function(t,n,r){for(var e in t.watchers[n]){var c=t.watchers[n][e];c==r&&t.watchers[n].splice(e,1)}O(t,n,r)},m=function(t,r,e,c){n.push({obj:t,prop:r,actual:o(t[r]),watcher:e,level:c})},O=function(t,r,e){for(var c in n){var o=n[c];o.obj==t&&o.prop==r&&o.watcher==e&&n.splice(c,1)}};return t.watch=f,t.unwatch=l,t.callWatchers=g,t});
define('tau/ui/extensions/assignments/ui.extension.assignments.view',["Underscore","jQuery","tau/core/view-base","libs/rivets","libs/watch"],function(n,e,i,u,t){return u.configure({prefix:"bind",adapter:{subscribe:function(n,e,i){t.watch(n,function(n){n==e&&i(this[n])},0)},unsubscribe:function(n,e){t.unwatch(n,e)},read:function(e,i){return n.complexKey(e,i)},publish:function(){}}}),i.extend({doRender:function(n,e,i){this._super(n,e,i);var t=this.element;this.fire("view.bound",u.bind(t,{data:n}))},"bus view.bound > refresh":function(n,e){e.unbind()},"bus view.bound:last + destroy":function(n,e){e.unbind()}})});
define('tau/ui/extensions/assignments/model',["Underscore","jQuery","tau/core/class","tau/core/event","tau/utils/utils.translation"],function(e,t,i,n,s){return n.extend(i.extend({init:function(e,t,i,n,s){this.store=e,this.store2=t,this.contextService=i,this.groups=[],this.entity=n,s&&this.listenServer()},load:function(){return t.when(this.loadGroups()).then(e.bind(this.loadAssignments,this))},loadGroups:function(){return t.when(this.loadRoles()).then(e.bind(this.createGroupsFromRoles,this))},loadRoles:function(){return"feature"===this.entity.entityType.name.toLowerCase()?this.loadFeatureRoles():this.loadEntityRoles()},loadEntityRoles:function(){var e=t.Deferred();return this.store.get(this.entity.entityType.name,{id:this.entity.id,fields:[{roleEfforts:[{role:["id","name"]}]}]}).done(function(t){e.resolve(t[0].data.roleEfforts)}.bind(this)),e},loadFeatureRoles:function(){var i=t.Deferred();return t.when(this.loadProcessId()).then(function(){this.store.get("process",{id:this.processId,nested:!0,fields:[{entityStates:["id",{role:["id","name","hasEffort","isPair"]},{entityType:["id","name"]}],list:!0}]}).done(function(t){var n=e.filter(t[0].data.entityStates,function(e){return e.role&&"feature"===e.entityType.name.toLowerCase()});i.resolve(n)}.bind(this))}.bind(this)),i},loadProcessId:function(){return t.when(this.contextService.findByEntity(this.entity)).then(e.bind(function(e){return this.processId=e.processes[0].id,this.processId},this))},ASSIGNMENT_FIELDS:["id",{role:["id","name"]},{generalUser:["id","firstName","lastName","avatarUri","email"]}],loadAssignments:function(){var i=t.Deferred();return this.store.get(this.entity.entityType.name,{id:this.entity.id,fields:[{assignments:this.ASSIGNMENT_FIELDS}]}).done(e.bind(function(e){this.assignments=e[0].data.assignments,this.groups=this.processAssignments(this.assignments),i.resolve(this.groups)},this)),i},createGroupsFromRoles:function(t){this.groups=e.chain(t).pluck("role").compact().uniq(function(e){return e.id}).map(this.createGroupFromRole).value()},createGroupFromRole:function(e){return{id:e.id,name:s.shorten(e.name),role:e,users:[]}},processAssignments:function(t){return e.forEach(t,function(t){var i=e.find(this.groups,function(e){return e.role.id==t.role.id});if(!i){var n=this.createGroupFromRole(t.role);this.groups.push(n),i=n}this.addToGroup(i,this.processUser(t.generalUser))},this),this.groups},processUser:function(t){var i=e.asString(t.firstName)+" "+e.asString(t.lastName);return e.trim(i)||(i=t.email),t=e.extend(e.pick(t,"id","firstName","lastName","email","avatarUri"),{name:i,_avatarUri:t._avatarUri||t.avatarUri}),t.avatarUri=t._avatarUri+"20",t},findGroupById:function(t){return e.findWhere(this.groups,{id:t})},processFormData:function(i){var n,s=this.findGroupById(parseInt(i.groupId,10)),r=s.users,o=i.users,a=this.store,d=[],u=Math.max(r.length,o.length);for(n=0;u>n;n++){var h=r[n],f=o[n];if(h&&f&&h.id!=f.id||!h||!f)break}var c=r.slice(n),l=o.slice(n);e.forEach(c,e.bind(function(t){this.removeFromGroup(s,t),d.push(e.bind(function(t,i){this.store2.findAll(e.sprintf("Assignment?where=(GeneralUser.id=%d and Assignable.id=%d and Role.id=%d)",t.id,this.entity.id,s.id)).then(function(t){e.forEach(t,function(e){a.remove("assignments",{id:e.id}).done({success:function(){},failure:function(){}})}),i()})},this,t))},this)),e.forEach(l,e.bind(function(t){this.addToGroup(s,this.processUser(t)),d.push(e.bind(function(t,i){var n={role:{id:s.role.id},generalUser:{id:t.id},assignable:{id:this.entity.id}};a.save("assignments",{$set:n}).done({success:function(){i()},failure:e.bind(function(){this.removeFromGroup(s,t),i()},this)})},this,t))},this));var m=t.Deferred();return e.series(d,function(){m.resolve()}),m},listenServer:function(){this.store.unbind(this),this.store.on({eventName:"afterSave",type:"assignment",listener:this},e.bind(function(i){var n=i.data.obj.id;t.when(this.findOwnAssignmentById(n)).then(e.bind(function(e){e&&this.addChangedAssignment(e)},this))},this)),this.store.on({eventName:"afterRemove",type:"assignment",listener:this},e.bind(function(i){var n=i.data.obj.id;t.when(this.findOwnAssignmentById(n)).then(e.bind(function(e){e&&this.removeChangedAssignment(e)},this))},this))},findOwnAssignmentById:function(i){var n=e.findWhere(this.assignments,{id:i});if(n)return n;var s=t.Deferred();return this.store.get("assignment",{id:i,fields:this.ASSIGNMENT_FIELDS,errorHandler:function(){return!1}}).done({success:e.bind(function(e){this.assignments.push(e[0].data),s.resolve(e[0].data)},this),failure:e.bind(function(){s.resolve(null)},this)}),s},addChangedAssignment:function(t){var i=e.find(this.groups,function(e){return e.role.id==t.role.id});if(i){var n=e.find(i.users,function(e){return e.id==t.generalUser.id});n||this.addToGroup(i,this.processUser(t.generalUser))}},removeChangedAssignment:function(t){var i=e.find(this.groups,function(e){return e.role.id==t.role.id});if(i){var n=e.find(i.users,function(e){return e.id==t.generalUser.id});n&&this.removeFromGroup(i,n)}},addToGroup:function(e,t){e.users.push(t)},removeFromGroup:function(t,i){var n=e.findWhere(t.users,{id:i.id});n&&(t.users=e.without(t.users,n))}}))});
define('tau/ui/templates/assignments/ui.template.assignments.bound',["tau/core/templates-factory"],function(a){return a.register({name:"assignments",engine:"jqote2",markup:['<div class="tau-assignments">','<div class="i-role-group i-role-formtrigger tau-assignments__group" data-bind-each-group="data.groups" data-bind-data-id="group.id" tabindex="-1">','<span class="tau-assignments__grouptitle" data-bind-text="group.name" data-bind-title="group.role.name"></span>','<div class="tau-assignments__users">','<span class="i-role-user tau-assignments__user tau-avatar" data-bind-each-user="group.users">','<img data-bind-src="user.avatarUri" data-bind-title="user.name" />',"</span>","</div>","</div>","</div>"]})});
define('tau/ui/templates/assignments/ui.template.assignments.form',["tau/core/templates-factory"],function(e){return e.register({name:"assignments.form",engine:"jqote2",markup:['<form role="i-role-form tau-assignments__form" action="">','<input type="hidden" name="groupId" value="<%= this.data.groupId %>" />','<input type="hidden" name="roleId" value="<%= this.data.roleId %>" />','<div class="tau-invite-widget">','<textarea name="users" placeholder="Type a name or email" />',"</div>","</form>"]})});
define('tau/components/component.assignments',["tau/components/component.creator","tau/ui/extensions/assignments/ui.extension.assignments","tau/ui/extensions/assignments/ui.extension.assignments.view","tau/ui/extensions/assignments/model","tau/ui/templates/assignments/ui.template.assignments.bound","tau/ui/templates/assignments/ui.template.assignments.form","tau/libs/store2/store2"],function(e,t,n,s,i,a,o){return{create:function(u){var m=u.context.configurator,r=u.context.entity,g={ViewType:n,extensions:[{extType:t,args:[m,r,new s(m.getStore(),new o(m),m.getApplicationContextService(),r,!0),a,u.$within]}],template:i};return e.create(g,u)}}});
define('tau/models/extension.model.base',["Underscore","tau/components/extensions/component.extension.base"],function(e,n){return n.extend({category:"extension model base",floatToString:function(e){return e||(e=0),e.toFixed(2).replace(".00","")},destroy:function(){this._super(),this.destroy=function(){}}})});
define('tau/models/assignmentsList/extension.model.effortRetriever',["Underscore","tau/models/extension.model.base"],function(t,e){return e.extend({category:"model effort retriver","bus registerStoreRequest":function(){var t=this.config.context.entity||{entityType:{}};this.fire("get",{type:t.entityType.name,query:{id:t.id,fields:["effort","effortToDo"]},callback:{scope:this,success:this.onEffortRetrieved}})},"bus extendDataToBind":function(t){var e=t.data||{},o=this.entity||{};e.totalEffort={effort:this.floatToString(o.effort),remain:this.floatToString(o.effortToDo)}},onEffortRetrieved:function(t){this.entity=t.data},destroy:function(){delete this.entity,this._super()}})});
define('tau/models/assignmentsList/extension.model.effortPointsRetriever',["Underscore","tau/models/extension.model.base"],function(t,e){return e.extend({category:"model effort points extension",_getEffortPoints:function(){return this.config.context.getEffortPoint().shortName},"bus extendDataToBind":function(t){var e=t.data||{};e.effortPoints=this._getEffortPoints()}})});
define('tau/models/assignmentsList/extension.model.assignmentsRetriever',["Underscore","tau/models/extension.model.base"],function(e,t){return t.extend({category:"model extension assignments retriever","bus registerStoreRequest":function(){var e=this.config.context.entity||{entityType:{}},t={generalUser:["id","firstName","lastName","avatarUri","email"]};this.fire("get",{type:e.entityType.name,query:{id:e.id,fields:[{assignments:["id",{role:["id","name"]},t],list:!0}]},callback:{scope:this,success:this.onAssignmentsRetrieved}})},onAssignmentsRetrieved:function(e){var t=e.data.assignments;this.fire("assignmentsReady",t)}})});
define('tau/models/assignmentsList/extension.model.entityRolesRetriever',["Underscore","tau/models/extension.model.base"],function(e,t){return t.extend({category:"model entity roles retriever extension","bus registerStoreRequest":function(){var e=this.config.context.entity||{entityType:{}},t={role:["id","name","isPair","hasEffort"]};this.fire("get",{type:e.entityType.name,query:{id:e.id,fields:[{roleEfforts:["id","effort","effortToDo",t,{assignable:["id"]}],list:!0},{entityState:[{role:["id"]}]}]},callback:{scope:this,success:this.onRoleEffortsRetrieved}})},"bus userGroupWasCreated":function(t){var i=t.data||{},o=i.role||{};if(o.hasEffort){var r=this.entity.roleEfforts;e.each(r,function(e){return e.role.id==o.id?(i.roleEffort={effort:this.floatToString(e.effort),remain:this.floatToString(e.effortToDo),id:e.id},!0):void 0},this),this.fire("roleEffortsReady",r)}else i.roleEffort=null},getRoles:function(t){var i=t.entityState.role&&t.entityState.role.id;return e(t.roleEfforts).map(function(e){var t=e.role;return t.isResponsible=t.id==i,t})},onRoleEffortsRetrieved:function(e){this.entity=e.data;var t=this.getRoles(this.entity);this.fire("rolesReady",t)},"bus extendDataToBind":function(e){e.data||{}}})});
define('tau/models/assignmentsList/extension.model.featureRolesRetriever',["Underscore","tau/models/extension.model.base"],function(e,t){return t.extend({category:"model feature roles retriever extension","bus registerStoreRequest":function(){var e=this.config.context.getProcessId();this.fire("get",{type:"process",query:{id:e,nested:!0,fields:[{entityStates:["id",{role:["id","name","hasEffort","isPair"]},{entityType:["id","name"]}],list:!0}]},callback:{scope:this,success:this.onEntityStatesRetrieved}})},onEntityStatesRetrieved:function(t){if(this.config){var i=t.data.entityStates,s=this.roles=[],n={},o=this.config.context.entity.entityType.name.toLocaleLowerCase();e.each(i,function(e){var t=e.role;t&&e.entityType.name.toLowerCase()===o&&(n.hasOwnProperty(t.id)||(n[t.id]=!0,s.push(t)))}),this.fire("rolesReady",s)}}})});
define('tau/models/assignmentsList/extension.model.assignmentToRolesMapper',["Underscore","tau/models/extension.model.base"],function(e,t){return t.extend({category:"model assignment to role mapper","bus registerStoreRequest":function(){var e=this.config.context.entity||{entityType:{}},t={generalUser:["id","firstName","lastName"]};this.fire("get",{type:e.entityType.name,query:{id:e.id,fields:[{assignments:["id",{role:["id","name"]},t],list:!0}]},callback:{scope:this,success:this.onAssignmentsRetrieved}})},"bus assignmentsReady+rolesReady+extendDataToBind":function(e){for(var t=(e.assignmentsReady||{}).data,a=(e.rolesReady||{}).data,s=(e.extendDataToBind||{}).data,n=[],r=0;r<a.length;r++){var i=a[r],o={role:i,users:this.getUsersInRole(t,i),allowAdd:!0};this.fire("userGroupWasCreated",o),n.push(o)}s.assignments={groups:n}},_convertUserDataToViewData:function(t){var a=t.avatarUri+"32";return{id:t.id,name:e.trim([t.firstName,t.lastName].join(" "))||t.email,avatar:a}},getUsersInRole:function(t,a){t=e.sortBy(t,function(e){return e.id});for(var s=[],n=0,r=t.length;r>n;n++){var i=t[n];if(i.role.id==a.id){var o=this._convertUserDataToViewData(i.generalUser);o.assignmentId=i.id,o.roleId=a.id,s.push(o)}}return s}})});
define('tau/models/assignmentsList/extension.model.taskEffortRetriever',["Underscore","tau/models/extension.model.base"],function(t,e){return e.extend({category:"model task EffortRetriever","bus registerStoreRequest":function(){var t=this.config.context.entity||{entityType:{}};this.fire("get",{type:t.entityType.name,query:{id:t.id,fields:["tasks-count","tasks-effort-sum","tasks-effortToDo-sum"]},callback:{scope:this,success:this.onTaskEffortRetrieved}})},"bus extendDataToBind":function(t){var e=t.data||{},s=this.entity||{};s["tasks-count"]>0&&(e.tasksEffort={effort:this.floatToString(s["tasks-effort-sum"]),remain:this.floatToString(s["tasks-effortToDo-sum"])})},onTaskEffortRetrieved:function(t){this.entity=t.data},destroy:function(){delete this.entity,this._super()}})});
define('tau/models/model.assignmentsList',["Underscore","tau/store/types","tau/core/model-base","tau/models/assignmentsList/extension.model.effortRetriever","tau/models/assignmentsList/extension.model.store.operations","tau/models/assignmentsList/extension.model.effortPointsRetriever","tau/models/assignmentsList/extension.model.assignmentsRetriever","tau/models/assignmentsList/extension.model.entityRolesRetriever","tau/models/assignmentsList/extension.model.featureRolesRetriever","tau/models/assignmentsList/extension.model.assignmentToRolesMapper","tau/models/assignmentsList/extension.model.taskEffortRetriever"],function(e,t,n,s,i,r,o,a,f,d,m){var u=n.extend({"bus assignmentsReady":function(e){this.assignments=e.data},"bus assignmentsReady:last+userAvatarChanged":function(t,n,s){var i=e.find(n,function(e){return e.generalUser.id==s.id});void 0!==i&&this.fire("avatarChanged",s)},"bus roleEffortsReady":function(e){this.roleEfforts=e.data},destroyExtensions:function(){var t=this.extensions||[];if(t.length>0){{this.config.context.entity.id,this.bus}e.each(t,function(e){e.destroy("destroy")})}delete this.extensions},initExtensions:function(){this.destroyExtensions();var e=t.findByKeyword(this.config.context.entity.entityType.name),n=new("feature"!=e.name?a:f)(this.config);this.extensions=[new s(this.config),new i(this.config),new r(this.config),new o(this.config),n,new d(this.config)],"userstory"==e.name.toLowerCase()&&this.extensions.push(new m(this.config))},onInit:function(){this.clearData();var e=this;e.store.unbind(e),e.initExtensions(),e.fire("registerStoreRequest"),e.fire("commitTransaction",{success:e.done,scope:e}),this.bindStoreListeners()},done:function(){var e={};this.bus.fire("extendDataToBind",e),this.bus.fire("dataBind",e),this.destroyExtensions()},bindStoreListeners:function(){var t=this;t.store.on({eventName:"afterSave",type:"assignment",listener:t},function(){t.afterAssignmentSaved.apply(t,arguments)}),t.store.on({eventName:"afterSave",type:"user",hasChanges:["avatarUri"],listener:t},function(){t.afterUserSaved.apply(t,arguments)}),t.store.on({eventName:"beforeSave",type:"assignment",listener:t},function(){t.beforeSaveAssignment.apply(t,arguments)}),t.store.on({eventName:"beforeSave",type:"roleEffort",listener:t},function(){t.beforeSaveRoleEffort.apply(t,arguments)}),t.store.on({eventName:"afterSave",type:"roleEffort",listener:t},function(){t.afterSaveRoleEffort.apply(t,arguments)}),t.store.on({eventName:"beforeRemove",type:"assignment",listener:t},function(){t.beforeRemoveAssignment.apply(t,arguments)}),t.store.on({eventName:"afterRemove",type:"assignment",listener:t},function(){t.afterAssignmentRemoved.apply(t,arguments)});var n=this.config.context.entity.id,s=this.config.context.entity.entityType.name,i={id:n};t.store.on({eventName:"beforeRemove",type:s,listener:t,filter:i},function(){t.store.unbind(t)}),t.store.on({eventName:"beforeSave",type:s,listener:t,filter:i,hasChanges:["entityState"]},e.bind(t.beforeEntityEntityStateChanged,t)),t.store.on({eventName:"afterSave",type:s,listener:t,filter:i,hasChanges:["entityState"]},e.bind(t.afterEntityEntityStateChanged,t)),t.store.on({eventName:"afterSave",type:s,listener:t,filter:i,hasChanges:["effort|effortToDo|effortCompleted|tasks-count|tasks-effort-sum|tasks-effortToDo-sum"]},e.bind(t.onDataUpdate,t))},beforeEntityEntityStateChanged:function(){this.fire("beforeStateChanged")},afterEntityEntityStateChanged:function(){this.fire("afterStateChanged")},onDataUpdate:function(){this.fire("dataDidUpdated")},beforeSaveRoleEffort:function(t){var n=t.data.id;if(e.isNumber(n)&&this.isRoleEffortOfCurrentEntity(n)){var s=t.data.cmd;s.config.fields=s.config.fields||[],s.config.fields.push("effortToDo"),this.fire("beforeSaveRoleEffort",{roleEffortId:n})}},afterSaveRoleEffort:function(t){var n=t.data.id;e.isNumber(n)&&this.isRoleEffortOfCurrentEntity(n)&&this.fire("afterSaveRoleEffort",{roleEffortId:n})},beforeRemoveAssignment:function(e){this.fireEventIfAssignmentFromCurrentEntity(e,"beforeRemoveAssignment")},afterAssignmentRemoved:function(e){this.fireEventIfAssignmentFromCurrentEntity(e,"afterAssignmentRemoved")},beforeSaveAssignment:function(t){e.isNumber(t.data.id)?this.fireEventIfAssignmentFromCurrentEntity(t,"beforeSaveAssignment"):this.fireEventIfAssignmentFromCurrentEntity(t,"beforeAddAssignment")},afterAssignmentSaved:function(t){var n=t.data,s=n.cmd?n.cmd.config.id:n.obj?n.obj.id:null;e.isNumber(s)?this.fireEventIfAssignmentFromCurrentEntity(t,"afterAssignmentSaved"):this.fireEventIfAssignmentFromCurrentEntity(t,"afterAssignmentAdded")},afterUserSaved:function(e){this.fire("userAvatarChanged",e.data)},fireEventIfAssignmentFromCurrentEntity:function(t,n){var s=t.data.id,i=t.data.changes||t.data.obj;if(this.isAssignmentOfCurrentEntity(s)||((i||{}).assignable||{}).id===this.config.context.entity.id){var r=e.extend({assignmentId:s},i);this.fire(n,r)}},isRoleEffortOfCurrentEntity:function(t){return e.any(this.roleEfforts,function(e){return e.id===t})},isAssignmentOfCurrentEntity:function(t){return e.any(this.assignments,function(e){return e.id===t})},clearData:function(){delete this.assignments,delete this.roleEfforts},destroy:function(){this.clearData(),this._super.apply(this,arguments)}});return u});
define('tau/core/model.editable.base',["tau/core/model-base"],function(e){return e.extend({"bus save":function(e,i){var t=this.config.context?this.config.context.entity:{};this.handleSave(i||{},t)},"bus remove":function(e){var i=this,t=i.config.context.entity,a=e.data||{},n=a.typeName||t.entityType.name;i.fire("beforeRemove",a),i.store.remove(n,{id:a.id},{success:function(e){i.fire("afterRemove",e.data)},failure:function(){}}).done()},handleSave:function(e,i){var t=e.$set||e,a=e.$include,n=e.hasOwnProperty("id")?e.id:i.id,r=e.typeName||i.entityType.name,o={$set:t,fields:a};n&&(o.id=n);var s={type:r,cmd:o,validation:{isValid:!0,isError:function(){return!1}}};this.fire("validate",s),this.fire("afterValidate",s);var d=s.validation;if(d.isValid===!1||d.isError&&d.isError())return void this.fire("validationFailed",s);this.fire("beforeSave",s);var f=this;this.store.save(r,o,{success:function(e){f.fire("afterSave",{type:e.command.type,cmd:o})},failure:function(e){f.fire("saveFailed",{type:e.command.type,cmd:o})}}).done()}})});
define('tau/models/model.assignmentsList.editable',["tau/core/model.editable.base"],function(e){var i=e.extend({"bus dataBind":function(){this.fire("permissionsReady",{editable:!0})}});return i});
define('tau/models/userList/extension.model.unassignAction',["Underscore","tau/core/model-base"],function(n,e){return e.extend({name:"Model Extension Unassign Action","bus extendDataToBind":function(n){var e=n.data;e.headerActions.push({id:"unassign",title:"Unassign"})}})});
define('tau/models/userList/extension.model.showMore',["Underscore","tau/core/model-base"],function(t,e){return e.extend({name:"Model Extension Unassign Action","bus extendDataToBind":function(t){var e=t.data;e.moreAvailable=this.isMoreAvailable()},filterIsEmpty:function(){return!this.filterIsNotEmpty()},isMoreAvailable:function(){var t=this.config.data;return this.filterIsEmpty()&&t.showMore!==!0&&(t.hasOwnProperty("roleId")||t.hasOwnProperty("role"))},filterIsNotEmpty:function(){return this.config.data.filter&&this.config.data.filter.length}})});
define('tau/components/extensions/assignmentsList/extension.assignmentsList.editable',["Underscore","jQuery","tau/core/model-base"],function(e,t,n){return n.extend({category:"edit",init:function(){var e=this;e._super.apply(e,arguments),e.animations=[]},"bus dataBind":function(e){this.bindedData=e.data},"bus afterRender":function(e){this.refresh=this._innerRefresh,this.$el=e.data.element,this.startAnimations()},"bus permissionsReady+afterRender":function(e){var t=e.permissionsReady.data;if(t.editable){var n=this;n.$el.removeClass("assignments-table-readonly"),n.$el.find(".group .effort").editableText({mask:/^\d*\.?\d*$/,restoreText:!0,onSave:function(e){var t=this.$element.parents(".group").tmplItem().data,i=n.normalizeEffort(t.roleEffort.effort),r=n.normalizeEffort(e);if(i===r)return this.restoreInitialText(),!1;var s={typeName:"roleEffort",$include:["id"],id:t.roleEffort.id,$set:{effort:r}};n.bus.fire("save",s)},onEditStart:function(){this.$element.data("points",this.$element.find("span").detach())},onEditEnd:function(){this.$element.append(this.$element.data("points"))}})}},"bus beforeSaveAssignment":function(e){var t,n,i=this,r=e.data.assignmentId;r&&(t=this.getAssignmentSelector(r),n=this.$el.find(t),n&&(this.fire("markElementToBeUpdated",{element:n}),this.addAnimation(function(){i.fire("updateElement",{element:i.$el.find(t)})})))},"bus beforeStateChanged":function(){var e=this;e.fire("markElementToBeUpdated",{element:this.$el}),e.addAnimation(function(){e.fire("updateElement",{element:e.$el})})},"bus dataDidUpdated":function(){this.refresh()},"bus avatarChanged":function(){this.refresh()},"bus afterSaveRoleEffort":function(e){var t=e.data.roleEffortId,n=this;n.addAnimation(function(){var e=n.findRoleEffortElementByRoleEffortId(t);n.fire("updateElement",{element:e}),n.fire("updateElement",{element:n.$el.find(".total-row .effort-cell span")})}),this.refresh()},"bus afterAssignmentSaved":function(){this.refresh()},"bus afterAssignmentRemoved":function(){this.refresh()},"bus afterStateChanged":function(){this.refresh()},"bus afterAssignmentAdded":function(){this.refresh()},"bus beforeAddAssignment":function(e){var n=e.data,i=this,r=i.generateAssignmentIdForNewAssignment(n),s={name:"",role:{},assignmentId:r};t.tmpl("user",s).appendTo(i.$el.find(".group[roleId="+n.role.id+"]"));var a=i.getUserSelector({roleId:n.role.id,id:n.generalUser.id});i.addAnimation(function(){i.fire("updateElement",{element:i.$el.find(a)})})},"bus beforeRemoveAssignment":function(e){var t=e.assignmentId,n=this.$el.find(this.getAssignmentSelector(t));this.fire("markElementToBeDeleted",{element:n})},"bus beforeSaveRoleEffort":function(e){var t=e.data,n=t.roleEffortId,i=this.findRoleEffortElementByRoleEffortId(n);this.fire("markElementToBeUpdated",{element:i})},getUserSelector:function(e){return".group[roleId="+e.roleId+"] .user[userId="+e.id+"]"},getAssignmentSelector:function(e){var t,n=this,i=".user",r=n.$el.find(i);return r.each(function(n){var s=r.eq(n);return s.tmplItem().data.assignmentId==e?(t=s,i+=":eq("+n+")",!1):void 0}),i},generateAssignmentIdForNewAssignment:function(e){return[this.config.context.entity.id,e.role.id,e.generalUser.id].join(",")},findRoleEffortElementByRoleEffortId:function(e){var n=this.$el.find(".role-effort .effort"),i=t();return n.each(function(){var n=t(this),r=n.parents(".group"),s=r.tmplItem().data;return s.roleEffort=s.roleEffort||{},s.roleEffort.id===e?(i=n,!1):void 0}),i},addAnimation:function(e){this.animations.push(e)},startAnimations:function(){e.each(this.animations,function(e){e()}),this.animations=[]},_innerRefresh:function(){this.refresh=function(){},this.fire("refresh")},refresh:function(){},normalizeEffort:function(e){return Math.abs(Math.round(100*parseFloat(e))/100)||0},destroy:function(){delete this.$el,delete this.bindedData,delete this.animations,this._super()}})});
define('tau/components/extensions/bubble/extension.bubble.creator',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,t,n){return n.extend({category:"edit",init:function(e){this._super(e),this.containers=[]},"bus initBubble":function(t,n){var o=this.config.context,i=e.defaults(n,{closeOnStoreActions:!0});this.initBubble(i,e.defaults(i.context||{},o))},"bus $target.ready:last + toggleBubble":function(e,n){window.appIsInDebugMode&&!t.contains(document.documentElement,n[0])&&window.console.error("$target.ready:last - bubble target is detached",n[0]),n.tauBubble("toggle")},initBubble:function(n,o){this.destroyContainers();var i=t(n.target);n.destroyExistingBubble&&i.data("ui-tauBubble")&&i.tauBubble("destroy"),this.fire("$target.ready",i);var a=e.extend({},n,{alignTo:n.alignTo||i,content:n.html,onHide:function(e){n.cleanupOnHide&&i.data("bubbleLoaded",!1),n.onHide&&n.onHide(e)},onBeforeShow:e.bind(this.onBeforeShowBubble,this,n,i),onShow:e.bind(this.onShowBubble,this,o,n,i)});i.tauBubble(a),n.applyBubbleClasses!==!1&&(i.addClass("tau-bubble-target"),i.tauBubble("getAlignTo").addClass("ui-link"))},onBeforeShowBubble:function(e,t,n){var o=!0;return e.onBeforeShow&&(o=e.onBeforeShow(n)),t.data("bubbleLoaded")!==!0&&(this.destroyContainers(),t.tauBubble("setContent",'<div class="ui-loading-message-container"><div class="ui-loading-message">Loading&hellip;</div></div>')),o},onShowBubble:function(e,t,n,o){t.onShow&&t.onShow(o),t.componentsConfig&&n.data("bubbleLoaded")!==!0&&this.createContainer(n,o,t,e)},createContainer:function(e,n,o,i){var a=this,s=o.componentsConfig;s.store=this.config.store,s.context=i,a.createComponents(s,function(i){var u=i[0].component,r=i[0].config;a.fire("childComponentCreated",u),a.addContainer(u),a.processContainer(e,n,u,o,r),r.context=s.context,r.store=s.store;var b=r.onBeforeInitializeComponent||t.noop;b.apply(r,[u]),u.initialize(r),u.fire("$outerBubbled.ready",e)})},processContainer:function(e,t,n,o,i){var a=function(){e.data("ui-tauBubble")&&e.tauBubble("adjust")};n.on("afterRender",function(t,o){t.removeListener();var i=o.element;i.css("visibility","hidden"),e.data("bubbleLoaded",!0),e.tauBubble("setContent",i),n.fire("focus.before",{}),n.fire("popupResize",e),i.css("visibility","visible"),a(),n.fire("focus",{}),e.trigger("taububbleloadcontent")}),n.on("afterRender",a),n.on("dataRendered",function(){n.fire("popupResize",e),n.fire("focus"),a()}),e.on("show",function(){n.fire("$outerBubbled.show")}),e.on("close",function(){n.fire("blur",{})});var s=function(t){e.data("ui-tauBubble")&&(t.data&&t.data.animated?e.tauBubble("widget").fadeOut(function(){e.tauBubble("empty")}):e.tauBubble("empty"))},u=function(){e.data("ui-tauBubble")&&e.tauBubble("destroy"),n.destroy()};n.on("close",s),n.on("reset",u),o.closeOnStoreActions&&(n.on("beforeSave",s),n.on("beforeRemove",s),n.on("afterSave",u),n.on("afterRemove",u));var r=i.handleComponentEvents;if(r){var b=function(e,t,o){n.on(e,t.bind(o||null))},d={closeBubble:s,destroyBubble:u};r(b,d)}n.on("adjustPosition",a)},destroy:function(){this.destroyContainers(),this._super()},addContainer:function(e){this.containers.push(e)},destroyContainers:function(){e.invoke(this.containers,"destroy"),this.containers=[]}})});
define('tau/components/extensions/bubble/extension.bubble.creator.direct',["Underscore","jQuery","tau/components/extensions/bubble/extension.bubble.creator"],function(e,t,n){return n.extend({category:"edit","bus afterInit":function(){this.onEditActivated()},"bus afterRender + applyPopups":function(n,a,i){var o=a.element,s=this;e.forEach(i,function(n){var a=o.find(n.target),i=o.find(n.alignTo),r=a.length>1;a.each(function(a){var o=t(this);o.addClass("tau-bubble-target");var l=e.deepClone(n);l.targetCssClass&&o.addClass(l.targetCssClass),l.target=o,l.alignTo=o.find(l.alignTo),l.alignTo=l.alignTo.length?l.alignTo:i.eq(a),l.componentsConfig.components[0].data=e.deepClone(o.tmplItem().data),r&&(l.cleanupOnHide=!0),l.stackName=n.stackName,s.fire("initBubble",l)})})},onEditActivated:function(){this.fire("applyPopups",this.config.popupEditorContainer)}})});
define('tau/models/assignment/model.property.assignUser.editable.base',["Underscore","tau/core/model.editable.base"],function(e,n){return n.extend({"bus assignToLoggedUser":function(){this.assignTo(this.getLoggedUser().id)},"bus changeAssignment":function(e){var n=e.data.user.id;this.assignTo(n)},getLoggedUser:function(){return this.config.context.getLoggedUser()},assignTo:function(){},destroy:function(){this.project=null,this.entity=null,this._super()}})});
define('tau/models/assignment/model.assignment.editable',["Underscore","tau/models/assignment/model.property.assignUser.editable.base"],function(e,s){return s.extend({"bus removeAssignment":function(){var e={id:this.config.data.assignmentId,typeName:"assignment"};this.fire("remove",e)},assignTo:function(s){var n={typeName:"assignment",$include:[{generalUser:["id","firstName","lastName"]},{role:["id","name"]},{assignable:["id"]}]};this.config.data.hasOwnProperty("assignmentId")&&e.extend(n,{id:this.config.data.assignmentId,$set:{generalUser:{id:s}}}),this.fire("save",n)},destroy:function(){this.project=null,this.entity=null,this._super()}})});
define('tau/models/assignment/model.add.assignment.editable',["Underscore","tau/models/assignment/model.property.assignUser.editable.base"],function(e,i){return i.extend({assignTo:function(i){var n={typeName:"assignment",$include:[{generalUser:["id","firstName","lastName"]},{role:["id","name"]},{assignable:["id"]}]};this.config.data.role&&e.extend(n,{id:null,$set:{generalUser:{id:i},assignable:{id:parseInt(this.config.context.entity.id)},role:{id:this.config.data.role.id}}}),this.fire("save",n)},destroy:function(){this.project=null,this.entity=null,this._super()}})});
define('tau/ui/extensions/ui.extension.tooltip',["jQuery","tau/components/extensions/component.extension.base"],function(e,t){return t.extend({name:"ui.extension.tooltip",category:"edit","bus afterRender":function(t){var n=t.data.element;n.find(".tau-extension-tooltip").each(function(){var t=e(this),n=t.prop("title");n&&t.prop("title","").tauBubble({content:'<div class="tau-tooltip-title">'+n+"</div>",zIndex:9999,className:"tau-bubble-tooltip",showEvent:"mouseenter",hideEvent:"mouseleave",mode:"tooltip",stackName:"tooltip"})})}})});
define('tau/ui/templates/common/ui.template.userName',["tau/core/templates-factory"],function(e){return e.register({name:"user-name",markup:"<span {{if name}} class='user-name'{{/if}} role='username'>${name}</span><br/>"})});
define('tau/ui/templates/common/ui.template.user',["tau/core/templates-factory","tau/ui/templates/common/ui.template.userName"],function(e){return e.register({name:"user",markup:["<table class='user' role='user' userId='${id}'><tr>","<td class='user-avatar-container'>","{{if avatar}}<img src='${avatar}' class='user-avatar'/>{{/if}}","</td>","<td class='user-info'>","   {{tmpl 'user-name'}}","{{if role}}","<span class='user-role'>${role.name}</span>","{{/if}}","</td>","</tr></table>"].join(""),dependencies:["user-name"]})});
define('tau/ui/templates/assignmentsList/ui.template.assignmentsList.addBtn',["tau/core/templates-factory"],function(e){var t={name:"assignments-add-btn",markup:['<button class="add-btn',"{{if allowAdd == false}}"," disabled","{{/if}}",'" type="button"><div>AddAssignment</div></button>'].join(""),dependencies:[]};return e.register(t)});
define('tau/ui/templates/assignmentsList/ui.template.assignmentsList.userList',["tau/core/templates-factory","tau/ui/templates/common/ui.template.user","tau/ui/templates/assignmentsList/ui.template.assignmentsList.addBtn"],function(e){var s={name:"assignments-user-list",markup:['<div class="group {{if role.isResponsible}}assignments-responsible{{/if}}" roleId="${role.id}">','<table class="role-header">',"   <tr>",'   <td class="role-title">','   {{tmpl "assignments-add-btn"}}',"&nbsp;${role.name}","   </td>",'   <td class="role-effort">',"{{if roleEffort}}",'       <div class="effort">${roleEffort.effort}<span class="point">${$item.effortPoints}</span></div>',"{{/if}}","   </td>","</tr>","</table>",'{{tmpl(users) "user"}}',"</div>"].join(""),dependencies:["user","assignments-add-btn"]};return e.register(s)});
define('tau/ui/templates/assignmentsList/ui.template.assignmentsList',["tau/core/templates-factory","tau/ui/templates/assignmentsList/ui.template.assignmentsList.userList","tau/ui/templates/common/ui.template.user"],function(t){var s={name:"assignments-list",markup:['<table class="box assignments-table-readonly assignments-table">','   <tr class="title">','       <td class="assignments-title"></td>','       <td class="effort title-cell">Effort</td>',"    </tr>",'    <tr class="title-row">','       <td class="user-list" colspan="2">','               {{tmpl(assignments.groups, {effortPoints: effortPoints}) "assignments-user-list"}}',"       </td>","   </tr>",'   <tr class="head-row">',"       <td></td>","       <td></td>","   </tr>","{{if tasksEffort}}",'   <tr class="tasks-row">','       <td class="task-title">Tasks</td>','       <td class="effort-cell">${tasksEffort.effort} h</td>',"   </tr>","{{/if}}",'   <tr class="total-row">','       <td class="total-title">Total</td>','       <td class="effort-cell"><span>${totalEffort.effort} ${effortPoints}</span></td>',"   </tr>",'   <tr class="title-row" style="display: none;">','       <td class="owner title-cell">Owner</td>',"       <td></td>","   </tr>","</table>"].join(""),dependencies:["assignments-user-list","user"]};return t.register(s)});
define('tau/components/component.assignmentsList',["Underscore","tau/components/component.creator","tau/models/model.assignmentsList","tau/models/model.assignmentsList.editable","tau/models/userList/extension.model.unassignAction","tau/models/userList/extension.model.showMore","tau/components/extensions/assignmentsList/extension.assignmentsList.editable","tau/components/extensions/component.creator.extension","tau/components/extensions/bubble/extension.bubble.creator.direct","tau/models/assignment/model.assignment.editable","tau/models/assignment/model.add.assignment.editable","tau/ui/extensions/ui.extension.tooltip","tau/ui/templates/assignmentsList/ui.template.assignmentsList"],function(e,t,n,s,o,i,a,m,u,r,l,d,c){return{create:function(p){var g={extensions:e.concat([n,m,s,a,d,{type:u,config:{popupEditorContainer:e.map([{target:".user-list .user",alignTo:".user-name",componentsConfig:{components:[{type:"userList",extensions:[r,o,i]}]}},{target:".owner-cell .user-name",componentsConfig:{components:[{type:"userList",extensions:[i]}]}},{target:".add-btn:not(.disabled)",targetCssClass:"ui-link",componentsConfig:{components:[{type:"userList",extensions:[l,i]}]}}],function(t){return e.defaults(t,{stackName:"add-assignments-editor",className:"i-role-taububble-ignore"})})}},p.extensions]),template:p.template||c};return t.create(g,p)}}});
define('tau/models/model.attachments',["tau/core/model-base","tau/utils/utils.date"],function(t,e){var i=function(){return!0};return t.extend({init:function(t,e,n){this.name="Attachment Model",this._super.apply(this,arguments),this.filter=this.config.filter||n||i},_getAttachmentFields:function(){return["id","date","name","mimeType","uri","thumbnailUri",{owner:["id","firstName","lastName"]}]},onInit:function(){var t=this.config.context.entity,e=[{attachments:this._getAttachmentFields()}];this.store.get(t.entityType.name,{id:t.id,fields:e},{scope:this,success:this.onAssignableRetrieved}).done()},"bus attachmentUploaded":function(t){var e=this,i=[{general:["id"]}].concat(this._getAttachmentFields());e.store.save("attachment",{id:t.data.data.id,$set:{},fields:i}).done({success:function(){e.bus.fire("attachmentUploadCompleted",{element:t.data.element})}})},onAssignableRetrieved:function(t){for(var e=t.data.attachments,i=this.config&&this.config.selected,n={items:[]},a=0,s=e.length;s>a;a++){var d=e[a];if(this.filter(d)){var r=this.attachmentDTOToModelAttachment(d);n.items.push(r),i&&d.id===i.id&&(r.selected=!0,n.selected=r)}}this.bus.fire("dataBind",n)},attachmentDTOToModelAttachment:function(t){var i=e.parse(e.convertToTimezone(t.date)),n=t.owner||{};return{id:t.id,name:t.name,mimeType:t.mimeType,ownerName:[n.firstName,n.lastName].join(" "),date:e.format.date.short(i),thumbnailUri:t.thumbnailUri,uri:t.uri}}})});
define('tau/models/model.attachments.editable',["Underscore","tau/core/model.editable.base"],function(t,e){function n(t,e){return t===e.id}return e.extend({category:"edit",name:"Editable attachment",onInit:function(){this.store.on({eventName:"afterRemove",listener:this,type:"attachment"},t.bind(this._afterAttachmentRemove,this))},"bus dataBind":function(t){this.bus.fire("permissionsReady",{editable:!0,deletable:!0}),this._attachments||(this._attachments=t.data.items,this._fireAttachmentsEvent())},"bus attachmentUploaded":function(t){this._addAttachment(t.data.data),this._fireAttachmentsEvent()},_afterAttachmentRemove:function(t){var e=parseInt(t.data.cmd.config.id,10);this._isValidAttachmentId(e)&&(this._removeAttachment(e),this.bus.fire("afterAttachmentRemove",{id:e}),this._fireAttachmentsEvent())},_addAttachment:function(t){this._attachments.push(t)},_removeAttachment:function(e){this._attachments=t.reject(this._attachments,t.bind(n,null,e))},_isValidAttachmentId:function(e){return t.any(this._attachments,t.bind(n,null,e))},_fireAttachmentsEvent:function(){this.bus.fire("attachments",this._attachments)}})});
!function(e){"use strict";"function"==typeof define&&define.amd?define('libs/jquery/jquery.fileupload',["jQuery"],e):e(window.jQuery)}(function(e){"use strict";e.support.xhrFileUpload=!(!window.XMLHttpRequestUpload||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.widget("blueimp.fileupload",{widgetEventPrefix:"fileupload",options:{dropZone:e(document),pasteZone:e(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,formData:function(e){return e.serializeArray()},add:function(t,i){(i.autoUpload||i.autoUpload!==!1&&(e(this).data("blueimp-fileupload")||e(this).data("fileupload")).options.autoUpload)&&i.submit()},processData:!1,contentType:!1,cache:!1},_refreshOptionsList:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_BitrateTimer:function(){this.timestamp=+new Date,this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,i){var r=e-this.timestamp;return(!this.bitrate||!i||r>i)&&(this.bitrate=(t-this.loaded)*(1e3/r)*8,this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var i;return"function"==typeof t.formData?t.formData(t.form):e.isArray(t.formData)?t.formData:t.formData?(i=[],e.each(t.formData,function(e,t){i.push({name:e,value:t})}),i):[]},_getTotal:function(t){var i=0;return e.each(t,function(e,t){i+=t.size||1}),i},_initProgressObject:function(e){e._progress={loaded:0,total:0,bitrate:0}},_onProgress:function(e,t){if(e.lengthComputable){var i,r=+new Date;if(t._time&&t.progressInterval&&r-t._time<t.progressInterval&&e.loaded!==e.total)return;t._time=r,i=Math.floor(e.loaded/e.total*(t.chunkSize||t._progress.total))+(t.uploadedBytes||0),this._progress.loaded+=i-t._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(r,this._progress.loaded,t.bitrateInterval),t._progress.loaded=t.loaded=i,t._progress.bitrate=t.bitrate=t._bitrateTimer.getBitrate(r,i,t.bitrateInterval),this._trigger("progress",e,t),this._trigger("progressall",e,this._progress)}},_initProgressListener:function(t){var i=this,r=t.xhr?t.xhr():e.ajaxSettings.xhr();r.upload&&(e(r.upload).bind("progress",function(e){var r=e.originalEvent;e.lengthComputable=r.lengthComputable,e.loaded=r.loaded,e.total=r.total,i._onProgress(e,t)}),t.xhr=function(){return r})},_initXHRData:function(t){var i,r=t.files[0],n=t.multipart||!e.support.xhrFileUpload,o=t.paramName[0];t.headers=t.headers||{},t.contentRange&&(t.headers["Content-Range"]=t.contentRange),n?e.support.xhrFormDataFileUpload&&(t.postMessage?(i=this._getFormData(t),t.blob?i.push({name:o,value:t.blob}):e.each(t.files,function(e,r){i.push({name:t.paramName[e]||o,value:r})})):(t.formData instanceof FormData?i=t.formData:(i=new FormData,e.each(this._getFormData(t),function(e,t){i.append(t.name,t.value)})),t.blob?(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(r.name)+'"',i.append(o,t.blob,r.name)):e.each(t.files,function(e,r){(window.Blob&&r instanceof Blob||window.File&&r instanceof File)&&i.append(t.paramName[e]||o,r,r.name)})),t.data=i):(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(r.name)+'"',t.contentType=r.type,t.data=t.blob||r),t.blob=null},_initIframeSettings:function(t){t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&e("<a></a>").prop("href",t.url).prop("host")!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e,"iframe")},_getParamName:function(t){var i=e(t.fileInput),r=t.paramName;return r?e.isArray(r)||(r=[r]):(r=[],i.each(function(){for(var t=e(this),i=t.prop("name")||"files[]",n=(t.prop("files")||[1]).length;n;)r.push(i),n-=1}),r.length||(r=[i.prop("name")||"files[]"])),r},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var i=e.extend({},this.options,t);return this._initFormSettings(i),this._initDataSettings(i),i},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,i,r){var n=e.Deferred(),o=n.promise();return i=i||this.options.context||o,t===!0?n.resolveWith(i,r):t===!1&&n.rejectWith(i,r),o.abort=n.promise,this._enhancePromise(o)},_addConvenienceMethods:function(e,t){var i=this;t.submit=function(){return"pending"!==this.state()&&(t.jqXHR=this.jqXHR=i._trigger("submit",e,this)!==!1&&i._onSend(e,this)),this.jqXHR||i._getXHRPromise()},t.abort=function(){return this.jqXHR?this.jqXHR.abort():this._getXHRPromise()},t.state=function(){return this.jqXHR?i._getDeferredState(this.jqXHR):void 0},t.progress=function(){return this._progress}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),i=t&&t.split("-"),r=i&&i.length>1&&parseInt(i[1],10);return r&&r+1},_chunkedUpload:function(t,i){var r,n,o=this,s=t.files[0],a=s.size,l=t.uploadedBytes=t.uploadedBytes||0,p=t.maxChunkSize||a,d=s.slice||s.webkitSlice||s.mozSlice,u=e.Deferred(),h=u.promise();return this._isXHRUpload(t)&&d&&(l||a>p)&&!t.data?i?!0:l>=a?(s.error="Uploaded bytes exceed file size",this._getXHRPromise(!1,t.context,[null,"error",s.error])):(n=function(){var i=e.extend({},t),h=i._progress.loaded;i.blob=d.call(s,l,l+p,s.type),i.chunkSize=i.blob.size,i.contentRange="bytes "+l+"-"+(l+i.chunkSize-1)+"/"+a,o._initXHRData(i),o._initProgressListener(i),r=(o._trigger("chunksend",null,i)!==!1&&e.ajax(i)||o._getXHRPromise(!1,i.context)).done(function(r,s,p){l=o._getUploadedBytes(p)||l+i.chunkSize,i._progress.loaded===h&&o._onProgress(e.Event("progress",{lengthComputable:!0,loaded:l-i.uploadedBytes,total:l-i.uploadedBytes}),i),t.uploadedBytes=i.uploadedBytes=l,i.result=r,i.textStatus=s,i.jqXHR=p,o._trigger("chunkdone",null,i),o._trigger("chunkalways",null,i),a>l?n():u.resolveWith(i.context,[r,s,p])}).fail(function(e,t,r){i.jqXHR=e,i.textStatus=t,i.errorThrown=r,o._trigger("chunkfail",null,i),o._trigger("chunkalways",null,i),u.rejectWith(i.context,[e,t,r])})},this._enhancePromise(h),h.abort=function(){return r.abort()},n(),h):!1},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),t._progress||(t._progress={}),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(t,i,r,n){var o=n._progress.total;n._progress.loaded<o&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:o,total:o}),n),n.result=t,n.textStatus=i,n.jqXHR=r,this._trigger("done",null,n)},_onFail:function(e,t,i,r){r.jqXHR=e,r.textStatus=t,r.errorThrown=i,this._trigger("fail",null,r),r.recalculateProgress&&(this._progress.loaded-=r._progress.loaded,this._progress.total-=r._progress.total)},_onAlways:function(e,t,i,r){this._active-=1,this._trigger("always",null,r),0===this._active&&this._trigger("stop")},_onSend:function(t,i){i.submit||this._addConvenienceMethods(t,i);var r,n,o,s,a=this,l=a._getAJAXSettings(i),p=function(){return a._sending+=1,l._bitrateTimer=new a._BitrateTimer,r=r||((n||a._trigger("send",t,l)===!1)&&a._getXHRPromise(!1,l.context,n)||a._chunkedUpload(l)||e.ajax(l)).done(function(e,t,i){a._onDone(e,t,i,l)}).fail(function(e,t,i){a._onFail(e,t,i,l)}).always(function(e,t,i){if(a._sending-=1,a._onAlways(e,t,i,l),l.limitConcurrentUploads&&l.limitConcurrentUploads>a._sending)for(var r=a._slots.shift();r;){if("pending"===a._getDeferredState(r)){r.resolve();break}r=a._slots.shift()}})};return this._beforeSend(t,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(o=e.Deferred(),this._slots.push(o),s=o.pipe(p)):s=this._sequence=this._sequence.pipe(p,p),s.abort=function(){return n=[void 0,"abort","abort"],r?r.abort():(o&&o.rejectWith(l.context,n),p())},this._enhancePromise(s)):p()},_onAdd:function(t,i){var r,n,o,s,a=this,l=!0,p=e.extend({},this.options,i),d=p.limitMultiFileUploads,u=this._getParamName(p);if((p.singleFileUploads||d)&&this._isXHRUpload(p))if(!p.singleFileUploads&&d)for(o=[],r=[],s=0;s<i.files.length;s+=d)o.push(i.files.slice(s,s+d)),n=u.slice(s,s+d),n.length||(n=u),r.push(n);else r=u;else o=[i.files],r=[u];return i.originalFiles=i.files,e.each(o||i.files,function(n,s){var p=e.extend({},i);return p.files=o?s:[s],p.paramName=r[n],a._initProgressObject(p),a._addConvenienceMethods(t,p),l=a._trigger("add",t,p)}),l},_replaceFileInput:function(t){var i=t.clone(!0);e("<form></form>").append(i)[0].reset(),t.after(i).detach(),e.cleanData(t.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,r){return r===t[0]?i[0]:r}),t[0]===this.element[0]&&(this.element=i)},_handleFileTreeEntry:function(t,i){var r,n=this,o=e.Deferred(),s=function(e){e&&!e.entry&&(e.entry=t),o.resolve([e])};return i=i||"",t.isFile?t._file?(t._file.relativePath=i,o.resolve(t._file)):t.file(function(e){e.relativePath=i,o.resolve(e)},s):t.isDirectory?(r=t.createReader(),r.readEntries(function(e){n._handleFileTreeEntries(e,i+t.name+"/").done(function(e){o.resolve(e)}).fail(s)},s)):o.resolve([]),o.promise()},_handleFileTreeEntries:function(t,i){var r=this;return e.when.apply(e,e.map(t,function(e){return r._handleFileTreeEntry(e,i)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){t=t||{};var i=t.items;return i&&i.length&&(i[0].webkitGetAsEntry||i[0].getAsEntry)?this._handleFileTreeEntries(e.map(i,function(e){var t;return e.webkitGetAsEntry?(t=e.webkitGetAsEntry(),t&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){t=e(t);var i,r,n=t.prop("webkitEntries")||t.prop("entries");if(n&&n.length)return this._handleFileTreeEntries(n);if(i=e.makeArray(t.prop("files")),i.length)void 0===i[0].name&&i[0].fileName&&e.each(i,function(e,t){t.name=t.fileName,t.size=t.fileSize});else{if(r=t.prop("value"),!r)return e.Deferred().resolve([]).promise();i=[{name:r.replace(/^.*\\/,"")}]}return e.Deferred().resolve(i).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var i=this,r={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(r.fileInput).always(function(e){r.files=e,i.options.replaceFileInput&&i._replaceFileInput(r.fileInput),i._trigger("change",t,r)!==!1&&i._onAdd(t,r)})},_onPaste:function(t){var i=t.originalEvent.clipboardData,r=i&&i.items||[],n={files:[]};return e.each(r,function(e,t){var i=t.getAsFile&&t.getAsFile();i&&n.files.push(i)}),this._trigger("paste",t,n)===!1||this._onAdd(t,n)===!1?!1:void 0},_onDrop:function(e){var t=this,i=e.dataTransfer=e.originalEvent.dataTransfer,r={};i&&i.files&&i.files.length&&e.preventDefault(),this._getDroppedFiles(i).always(function(i){r.files=i,t._trigger("drop",e,r)!==!1&&t._onAdd(e,r)})},_onDragOver:function(t){var i=t.dataTransfer=t.originalEvent.dataTransfer;return this._trigger("dragover",t)===!1?!1:void(i&&-1!==e.inArray("Files",i.types)&&(i.dropEffect="copy",t.preventDefault()))},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste})),this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,i){var r=-1!==e.inArray(t,this._refreshOptionsList);r&&this._destroyEventHandlers(),this._super(t,i),r&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_create:function(){var t=this.options;e.extend(t,e(this.element[0].cloneNode(!1)).data()),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},progress:function(){return this._progress},add:function(t){var i=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,i._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var i,r,n=this,o=e.Deferred(),s=o.promise();return s.abort=function(){return r=!0,i?i.abort():(o.reject(null,"abort","abort"),s)},this._getFileInputFiles(t.fileInput).always(function(e){r||(t.files=e,i=n._onSend(null,t).then(function(e,t,i){o.resolve(e,t,i)},function(e,t,i){o.reject(e,t,i)}))}),this._enhancePromise(s)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})});
!function(e){"use strict";"function"==typeof define&&define.amd?define('libs/jquery/jquery.iframe-transport',["jQuery"],e):e(window.jQuery)}(function(e){"use strict";var t=0;e.ajaxTransport("iframe",function(r){if(r.async){var a,n,o;return{send:function(p,i){a=e('<form style="display:none;"></form>'),a.attr("accept-charset",r.formAcceptCharset),o=/\?/.test(r.url)?"&":"?","DELETE"===r.type?(r.url=r.url+o+"_method=DELETE",r.type="POST"):"PUT"===r.type?(r.url=r.url+o+"_method=PUT",r.type="POST"):"PATCH"===r.type&&(r.url=r.url+o+"_method=PATCH",r.type="POST"),n=e('<iframe src="javascript:false;" name="iframe-transport-'+(t+=1)+'"></iframe>').bind("load",function(){var t,o=e.isArray(r.paramName)?r.paramName:[r.paramName];n.unbind("load").bind("load",function(){var t;try{if(t=n.contents(),!t.length||!t[0].firstChild)throw new Error}catch(r){t=void 0}i(200,"success",{iframe:t}),e('<iframe src="javascript:false;"></iframe>').appendTo(a),a.remove()}),a.prop("target",n.prop("name")).prop("action",r.url).prop("method",r.type),r.formData&&e.each(r.formData,function(t,r){e('<input type="hidden"/>').prop("name",r.name).val(r.value).appendTo(a)}),r.fileInput&&r.fileInput.length&&"POST"===r.type&&(t=r.fileInput.clone(),r.fileInput.after(function(e){return t[e]}),r.paramName&&r.fileInput.each(function(t){e(this).prop("name",o[t]||r.paramName)}),a.append(r.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data")),a.submit(),t&&t.length&&r.fileInput.each(function(r,a){var n=e(t[r]);e(a).prop("name",n.prop("name")),n.replaceWith(a)})}),a.append(n).appendTo(document.body)},abort:function(){n&&n.unbind("load").prop("src","javascript".concat(":false;")),a&&a.remove()}}}}),e.ajaxSetup({converters:{"iframe text":function(t){return t&&e(t[0].body).text()},"iframe json":function(t){return t&&e.parseJSON(e(t[0].body).text())},"iframe html":function(t){return t&&e(t[0].body).html()},"iframe script":function(t){return t&&e.globalEval(e(t[0].body).text())}}})});
define('tau/ui/templates/attachments/ui.template.attachments.fileupload',["tau/core/templates-factory"],function(e){var a={name:"attachments.fileupload",engine:"jqote2",markup:['<div class="uploader-toolbar">','<span class="fileBrowser">','<span class="uploader-text">','<span class="ico"></span>',"<%!fn.T(this.uploaderText)%>","</span>",'<span class="uploader-text-active"><%!fn.T(this.uploaderTextActive)%></span>','<input class="i-role-fileinput" type="file" <%=this.multiple%>/>',"</span>","</div>"]};return e.register(a)});
define('tau/ui/templates/attachments/ui.template.attachments.attachment',["tau/core/templates-factory"],function(a){var t={name:"attachments.attachment",engine:"jqote2",markup:['<div id="attach-<%= this.id %>" ','class="ui-attach" ','title="<%! this.name %> by <%! this.ownerName %> on <%! this.date %>" data-id="<%= this.id %>" ',">",'<div class="inner i-role-attachment" role="attachment">','<a class="preview" href="<%= this.uri %>" target="_blank">',"<% if (this.thumbnailUri){ %>",'<img src="<%= this.thumbnailUri %>" />',"<% } %>","</a>",'<p class="name"><%! this.name %></p>','<p class="owner">by <%! this.ownerName %></p>','<p class="date">on <%! this.date %></p>','<p class="toolbar">','<a class="download" href="<%= this.uri %>" target="_blank">download</a>',"</p>","</div>","</div>"]};return a.register(t)});
define('tau/components/extensions/attachments/extension.attachments.uploader',["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/utils/utils.date","libs/jquery/jquery.fileupload","libs/jquery/jquery.iframe-transport","tau/ui/templates/attachments/ui.template.attachments.fileupload","tau/ui/templates/attachments/ui.template.attachments.attachment"],function(e,t,n,a,r,i,o,l){var d=/<title\b[^>]*>(.*?)<\/title>/,s=!!window.FileReader;return n.extend({"bus permissionsReady+afterRender":function(e,t,n){this._initialized||(this._initialized=!0,this.element=n.element,t.editable&&t.deletable&&this._initUploader())},"bus afterRender":function(t,n){var a=n.element,r=e.bind(function(){a.parents("body").length?this.fire("view.dom.ready"):e.delay(r,100)},this);r()},"bus view.dom.ready + afterRender":function(e,n,a){if(s){var r=a.element.find(".uploader-toolbar"),i=t("body");r.on("dragover.uploader",function(e){var t=e.originalEvent;return t.dataTransfer.dropEffect="copy",!1}),r.on("dragenter.uploader",function(){r.addClass("hover")}),i.on("dragleave.uploader",function(e){var t=e.originalEvent.clientX,n=e.originalEvent.clientY,a=this.getBoundingClientRect(),i=0>=t||0>=n||t>=a.width||n>=a.height;i&&r.removeClass("dragged-over hover")}),i.on("dragenter.uploader",function(){r.addClass("dragged-over")}),i.on("drop.uploader",function(){r.removeClass("dragged-over hover")}),i.on("dragover.uploader",".cke",function(){return!1}),i.on("dragover.uploader",function(e){var t=e.originalEvent;t.dataTransfer.dropEffect="none",r.removeClass("hover"),e.preventDefault()}),this.on("destroy",function(){i.off(".uploader")})}},_initUploader:function(){var t={uploaderText:s?"Drag and drop files here or click to select files":"Click here to select files",uploaderTextActive:s?"Drop here...":"",multiple:/\bapple\b/i.test(navigator.vendor)?"":"multiple"},n=o.render(t);n.find(".i-role-fileinput").fileupload({url:this._getUploadUrl(),formData:this._getFormData(),add:e.bind(this._onFileAdd,this),dropZone:this.element,pasteZone:this.element}),n.appendTo(this.element)},_getUploadUrl:function(){return this.config.context.configurator.getApplicationPath()+"/UploadFile.ashx"},_getFormData:function(){return[{name:"generalId",value:this._getGeneralId()}]},_getGeneralId:function(){return this.config.context.entity.id},_onFileAdd:function(e,t){var n=this;if(this.element.find(".uploader-toolbar").removeClass("dragged-over"),t.files&&0!==t.files.length){var a=this._createAttachmentDummy(t.files[0].name);a.appendTo(this._getAttachmentsPlaceholder()),t.submit().success(function(e){var t,r=n._getResponseText(e);try{t=n._parseResponse(r)}catch(i){return void n._onAttachmentUploadFail(a)}n.bus.fire("attachmentUploaded",{element:n._updateAttachmentElement(a,t),data:t})}).error(function(e){var t,r=e.responseText.match(d);t=r&&r.length>0?r[1]:"Looks like application is not available. Please check your connection or server availability",n._onAttachmentUploadFail(a,t)})}},_updateAttachmentElement:function(e,t){var n=this._createAttachmentElement(t);return e.replaceWith(n),n},_onAttachmentUploadFail:function(e,t){this._deleteFailedAttachmentElement(e,t)},_getResponseText:function(e){var t="";return"string"==typeof e?t=e:e.jquery&&(t=e.text()),t},_createAttachmentDummy:function(e){var t=this._createAttachmentElement({name:e});return t.addClass("uploading").find(".toolbar").remove(),t},_deleteFailedAttachmentElement:function(e,n){n=n||"Upload failed",this.fire("error",{message:n}),e.addClass("failed"),t('<p class="error">Upload failed</p>').insertAfter(e.find(".name")),e.fadeOut(1500,function(){e.remove()})},_getAttachmentsPlaceholder:function(){return this.element.find(".ui-attachments-content")},_createAttachmentElement:function(e){return l.render(e)},_parseResponse:function(e){var t;try{t=JSON.parse(e),t=t.items||t,t=t.pop()}catch(n){}var r=a.parse(a.convertToTimezone(t[1]));return{id:t[0],uri:t[4],thumbnailUri:t[5],mimeType:t[3],name:t[2],ownerName:t[6][1]+" "+t[6][2],date:a.format.date.short(r)}}})});
define('tau/components/extensions/attachments/extension.attachments.selectable',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(t,e,n){return n.extend({"bus afterRender":function(e){var n=e.data.element;n.on("click",".i-role-attachment",t.bind(this._onAttachmentClick,this))},_onAttachmentClick:function(t){var n=e(t.target),a=0!==n.closest(".toolbar").length;if(!a){t.preventDefault();var c=n.closest(".ui-attach");this.bus.fire("attachmentSelected",c.data("id"))}}})});
define('tau/components/extensions/attachments/extension.attachments.showPreview',["Underscore","tau/components/extensions/component.creator.extension"],function(e,t){return t.extend({"bus initialize":function(e){var t=e.data.context,i=t.entity,n={entityType:i.entityType,id:i.id};this.contextForPreview={applicationContext:t.applicationContext,entity:n,configurator:t.configurator}},"bus beforeInit":function(t,i){i.config.context.configurator.getComponentBusRegistry().getByName("imagePreview").done(e.bind(function(e){this.fire("previewBus.ready",e)},this))},"bus previewBus.ready:last + attachments:last + image.selected":function(t,i,n,o){i.fire("refresh",{items:e.filter(n,function(e){return e.mimeType&&0===e.mimeType.indexOf("image/")}),selectedId:o.id})},"bus attachments:last + attachmentSelected":function(t,i,n){var o=e.find(i,function(e){return e.id===n});o.mimeType&&0===o.mimeType.indexOf("image/")?this.fire("image.selected",o):window.open(o.uri,"_blank")}})});
define('tau/components/extensions/attachments/extension.attachments.thumbProxy',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,n,t){return t.extend({"bus afterRender":function(e){var t=e.data.element.find(".ui-attach .preview img");t.each(function(){var e=n(this);if(!e.prop("complete")){var t=e.parent();t.addClass("loading"),e.load(function(){t.removeClass("loading")})}})}})});
define('tau/components/extensions/attachments/extension.attachments.deletable',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,t,n){return n.extend({"bus permissionsReady+afterRender":function(t,n,i){this.$element=i.element,n.deletable&&(this._createDeleteTriggers(),this.$element.on("click",".ui-attach.deletable .delete",e.bind(this._onAttachmentDeleteClick,this)))},"bus attachmentUploaded":function(){this._createDeleteTriggers()},"bus afterAttachmentRemove":function(e){var t=e.data.id,n=this.$element.find("#attach-"+t);n.animate({opacity:0},{complete:function(){n.remove()}})},_createDeleteTriggers:function(){this.$element.find(".ui-attach:not(.deletable)").each(function(e,n){t(n).addClass("deletable").find(".toolbar").append(t('<button class="delete" type="button">delete</button>'))})},_onAttachmentDeleteClick:function(e){var n=this._findUpConfirmationPlaceholder(t(e.target));this._showConfirmation(n)},_findUpConfirmationPlaceholder:function(e){return e.closest(".ui-attach").children(".inner")},_findUpAttachElement:function(e){return e.closest(".ui-attach")},_createConfirmation:function(t){t.confirmation({message:"Delete attachment?",ok:e.bind(this._deleteAttachment,this),cancel:e.bind(this._cancelAttachmentDelete,this)})},_showConfirmation:function(e){e.data("confirmation")||this._createConfirmation(e),e.confirmation("show")},_hideConfirmation:function(e){e.confirmation("hide")},_deleteAttachment:function(e){var n=t(e.target);this._hideConfirmation(this._findUpConfirmationPlaceholder(n));var i=this._findUpAttachElement(n),a=i.data("id");this.bus.fire("markElementToBeDeleted",{element:i}),this.bus.fire("remove",{id:a,typeName:"attachment"})},_cancelAttachmentDelete:function(e){this._hideConfirmation(this._findUpConfirmationPlaceholder(t(e.target)))}})});
define('tau/components/extensions/error/extension.errorBar',["jQuery","Underscore","tau/core/extension.base"],function(r,e,o){return o.extend({"bus initialize":function(r,o){e.has(o.context.configurator.registeredServices,"errorBar")&&this.fire("errorBar.ready",o.context.configurator.service("errorBar"))},"bus errorBar.ready:last + clearError":function(r,e,o){e.fire("clearError",o)},"bus errorBar.ready:last + error":function(r,e,o){e.fire("error",o)},"bus errorBar.ready:last + notification":function(r,e,o){e.fire("notification",o)}})});
define('tau/ui/templates/attachments/ui.template.attachments',["tau/core/templates-factory","tau/ui/templates/attachments/ui.template.attachments.attachment"],function(t){var e={name:"attachments",engine:"jqote2",options:{contentSelector:".ui-attachments-content"},markup:['<div class="ui-attachments-control">','<div class="ui-attachments-content">','<%= fn.sub("attachments.attachment", this.items) %>',"</div>","</div>"]};return t.register(e)});
define('tau/components/component.attachments',["tau/components/component.creator","tau/models/model.attachments","tau/models/model.attachments.editable","tau/components/extensions/attachments/extension.attachments.uploader","tau/components/extensions/attachments/extension.attachments.selectable","tau/components/extensions/attachments/extension.attachments.showPreview","tau/components/extensions/attachments/extension.attachments.thumbProxy","tau/components/extensions/attachments/extension.attachments.deletable","tau/components/extensions/error/extension.errorBar","tau/ui/templates/attachments/ui.template.attachments"],function(t,e,n,a,s,o,m,c,i,r){return{create:function(u){var h=u||{},x={extensions:[e,n,a,s,o,m,c,i],template:r};return t.create(x,h)}}});
define('tau/models/model.attachmentsPreview',["Underscore","tau/core/extension.base"],function(e,n){return n.extend({"bus beforeInit":function(n,t){var i=t.config.items||[],d=t.config.selectedId||null,s={};d||(s=i.length?e.first(i):{},d=s.id),i=e.map(i,function(e){return e.selected=!1,e.id===d&&(e.selected=!0,s=e),e}),this.fire("dataBind",{selected:s,items:i})}})});
define('tau/ui/extensions/attachmentsPreview/ui.extension.attachmentsPreview',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,t,i){return i.extend({"bus beforeInit + afterRender":function(i,a,n){var r=n.element;this.fire("$el.ready",r);var s=r.find(".i-role-thumb");this.fire("$thumbs.ready",s),r.on("click",".i-role-thumb",e.bind(function(e){this.fire("thumb.selected",t(e.currentTarget).data("id"))},this)),r.on("click","a",e.bind(function(e){e.preventDefault(),e.stopPropagation()},this)),r.on("click",".toolbar .prev",e.bind(function(e){e.stopPropagation(),this.fire("prev")},this)),r.on("click",".toolbar .next",e.bind(function(e){e.stopPropagation(),this.fire("next")},this)),r.on("click",e.bind(function(e){t(e.target).is("img")||this.fire("close")},this));var o=a.config.context.configurator;this.fire("configurator.ready",o),s.length&&o.getKeyBoardManager().pushHandler({handleKeyDown:e.bind(function(e){e.keyCode==t.ui.keyCode.ESCAPE&&this.fire("close"),e.keyCode==t.ui.keyCode.LEFT&&this.fire("prev"),e.keyCode==t.ui.keyCode.RIGHT&&this.fire("next")},this)}),e.delay(e.bind(function(){this.fire("afterChangeImage")},this),100)},"bus $el.ready:last + $thumbs.ready:last + thumb.selected":function(t,i,a,n){var r=a.filter(".selected");if(n!=r.data("id")){a.toggleClass("selected",!1),r=a.filter("[data-id="+n+"]").toggleClass("selected",!0);var s=i.find(".ui-attachment-view-image");s.on("load",e.bind(function(){this.fire("afterChangeImage")},this)),s.attr("src",r.data("big-src"))}},"bus afterRender:last + afterChangeImage":function(e,t){var i=t.element,a=i.find(".ui-attachment-view-image");i.toggleClass("ui-attachments-preview-control_mode_full",!1),i.toggleClass("ui-attachments-preview-control_mode_short",!0),a.unbind("click.resize"),a.data("ui-draggable")&&(a.draggable("destroy"),a.css("position","static"));var n=a.parent().width(),r=a.parent().height();parseInt(a[0].naturalWidth,10)>n||parseInt(a[0].naturalHeight,10)>r?(a.toggleClass("ui-attachment-view-image_resize_true",!0),a.one("click.resize",function(){i.toggleClass("ui-attachments-preview-control_mode_full"),i.toggleClass("ui-attachments-preview-control_mode_short"),a.draggable()})):a.toggleClass("ui-attachment-view-image_resize_true",!1)},"bus configurator.ready:last + $el.ready:last + $thumbs.ready:last + close":function(e,t,i,a){i.hide(),a.length&&t.getKeyBoardManager().popHandler(),this.fire("closed")},"bus $thumbs.ready:last + next":function(e,t){var i=t.index(t.filter(".selected"))+1;i>=t.length&&(i=0),this.fire("thumb.selected",t.eq(i).data("id"))},"bus $thumbs.ready:last + prev":function(e,t){var i=t.index(t.filter(".selected"))-1;0>i&&(i=t.length-1),this.fire("thumb.selected",t.eq(i).data("id"))}})});
define('tau/ui/extensions/attachmentsPreview/ui.extension.attachmentsPreview.animations',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,i,t){return t.extend({"bus afterRender":function(e){var t=this;t.element=e.data.element,i(window).bind("resize",function(){t._resizeImage()});var n=t.element.find(".ui-attachment-wait"),a=t.element.find(".ui-attachment-view-image");a.hide(),n.show(),this.element.find(".ui-attachment-view-image").bind("load",function(){t._onImageLoad()});var h=function(){i(this).parent().removeClass("ui-thumbnail-loading"),i(this).unbind("load",h),i(this).fadeIn("slow")};this.element.find(".thumbnail-nav li").addClass("ui-thumbnail-loading"),this.element.find(".thumbnail-nav li > img").each(function(){this.complete?h.call(this):i(this).bind("load",h).hide()})},_onImageLoad:function(){var e=this,i=e.element.find(".ui-attachment-wait"),t=e.element.find(".ui-attachment-view-image");e._resizeImage(),t.fadeIn("slow",function(){i.hide()})},_resizeImage:function(){var e=this,i=e.element;if(i){var t=e.element.find(".ui-attachment-wait"),n=e.element.find(".ui-attachment-view-image"),a=i.find(".image-view");n.width(""),n.height("");var h=a.width(),m=a.height(),d=n.width(),o=n.height();if(d>h||o>m){var s=m/o*d,u=h/d*o;h>s?(n.width(s),n.height(m)):(n.width(h),n.height(u))}return{$wait:t,$image:n}}},"bus beforeChangeImage":function(e){var i=this,t=i.element.find(".ui-attachment-wait"),n=i.element.find(".ui-attachment-view-image");t.show();var a=e.data;n.fadeOut("slow",function(){n.attr("src",a)}),e.data=!1}})});
define('tau/ui/templates/attachmentsPreview/ui.template.attachmentsPreview.thumbnail',["tau/core/templates-factory"],function(t){var i={name:"attachmentsPreview.thumbnail",engine:"jqote2",markup:["<li >",'<a href="<%= this.uri %>">','<img class="ui-attach-thumbnail i-role-thumb <% if (this.selected){ %> selected<% } %>" src="<%= this.thumbnailUri %>" data-id="<%= this.id %>" data-big-src="<%= this.uri %>" />',"</a>","</li>"]};return t.register(i)});
define('tau/ui/templates/attachmentsPreview/ui.template.attachmentsPreview',["tau/core/templates-factory","tau/ui/templates/attachmentsPreview/ui.template.attachmentsPreview.thumbnail"],function(t){var e={name:"attachmentsPreview",engine:"jqote2",markup:['<div class="ui-attachments-preview-control ui-attachments-preview-control_mode_short" <% if (this.items.length == 0){%> style="display:none" <%}%>>','<div class="toolbar">','<button class="close" type="button">&times;</button>',"<% if (this.items.length > 1) { %>",'<button class="prev" type="button">&larr;</button>','<button class="next" type="button">&rarr;</button>',"<% } %>","</div>",'<div class="swap-view">','<div class="image-view">','<div class="ui-attachment-wait"></div>','<img class="ui-attachment-view-image" src="<%= this.selected.uri || "" %>">',"</div>","</div>",'<ul class="thumbnail-nav">','<%= fn.sub("attachmentsPreview.thumbnail", this.items) %>',"</ul>","</div>"]};return t.register(e)});
define('tau/components/component.attachmentsPreview',["tau/components/component.creator","tau/models/model.attachmentsPreview","tau/ui/extensions/attachmentsPreview/ui.extension.attachmentsPreview","tau/ui/extensions/attachmentsPreview/ui.extension.attachmentsPreview.animations","tau/ui/templates/attachmentsPreview/ui.template.attachmentsPreview"],function(e,t,n,a,i){return{create:function(a){var s=function(){},r={ModelType:t,extensions:[n],template:i};return a.filter=a.filter||s,e.create(r,a)}}});
define('tau/models/auditHistory/model.auditHistory',["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/store/services/service.auditHistory","tau/utils/utils.date"],function(t,e,i,n,r){return i.extend({REQUEST_SOURCE_TYPE_MAP:{0:"None",1:"Email",2:"Phone",3:"Internal",4:"External"},"bus afterInit":function(){var t=this.config.context.configurator;this.auditHistoryService=t.getAuditHistoryService(),this.urlBuilder=t.getUrlBuilder(),this.fire("dataBind")},"bus getAuditRecords":function(t,e){var i=this.config.context.entity.id;this.auditHistoryService.getAuditRecordsLimited(i,e.start,e.limit).done(function(t){var e=t.d,i=this._convertRawAuditRecords(e);this.fire("auditRecords.ready",{auditRecords:i})}.bind(this)).fail(function(t){this.fire("auditRecords.ready",{}),this._handleError(t)}.bind(this))},"bus getAuditRecordsChanges":function(e,i){var n=t.map(i.records,function(t){return{historyId:t.historyId,entityTypeName:t.entityTypeName}},this);this.auditHistoryService.getChangeGroups(n).done(function(t){var e=t.d;this.fire("auditRecordsChanges.ready",this._convertRawChangeGroups(e))}.bind(this)).fail(function(t,e){this.fire("auditRecordsChanges.ready",this._convertKeysToNoChangeGroups(t)),this._handleError(e)}.bind(this,n))},_convertRawAuditRecords:function(e){return t.map(e,function(t){var e=r.parseTimestampToDate(t.Date);return{historyId:t.ID,entityTypeName:t.InnerEntity||t.Entity,date:{year:e.toString("yyyy"),month:e.toString("MMM"),day:e.toString("dd"),time:e.toString("h:mm tt")},description:t.Description,avatarUrl:this.urlBuilder.getAvatarUrl(t.ModifierID,15),user:t.Modifier}},this)},_convertKeysToNoChangeGroups:function(e){return t.map(e,function(t){return{historyId:t.historyId,entityTypeName:t.entityTypeName}},this)},_convertRawChangeGroups:function(e){return t.map(e,this._convertRawChangeGroup,this)},_convertRawChangeGroup:function(t){return{historyId:t.Key.HistoryId,entityTypeName:t.Key.EntityTypeName,changes:this._convertRawChanges(t.Changes)}},_convertRawChanges:function(e){return t.map(e,function(t){return{fieldName:t.Field,oldValue:this._formatValue(t.OldValue,t.ChangeID),newValue:this._formatValue(t.NewValue,t.ChangeID)||"Empty",toBeEncoded:!("Description"==t.NativeField&&-1==t.ChangeID.indexOf("Attachment-Description")||t.ChangeID.indexOf("TestCase-Success")>0||t.ChangeID.indexOf("TestCase-Steps")>0)}},this)},_formatValue:function(t,e){return e.indexOf("Request-SourceType")>0?this.REQUEST_SOURCE_TYPE_MAP[t]||t:t},_handleError:function(t){this.fire("error",t.statusText.toString())}})});
define('tau/ui/templates/auditHistory/ui.template.auditHistory.records',["tau/core/templates-factory"],function(t){var e={name:"auditHistory.records",engine:"jqote2",markup:["<% _.each(this.auditRecords, function(auditRecord) { %>",'<tr data-history-id="<%! auditRecord.historyId %>" data-entity-type-name="<%! auditRecord.entityTypeName %>">','<td class="tau-date"><%! auditRecord.date %></td>','<td class="tau-time"><%! auditRecord.time %></td>','<td class="tau-description i-role-description" ><%! auditRecord.description %></td > ','<td class="tau-person"><img src="<%! auditRecord.avatarUrl %>" title="<%! auditRecord.user %>"><span><%! auditRecord.user %></span></td>',"</tr>","<% }); %>"]};return t.register(e)});
define('tau/ui/templates/auditHistory/ui.template.auditHistory.record.changes',["tau/core/templates-factory"],function(a){var e={name:"auditHistory.record.changes",engine:"jqote2",markup:['<div class="tau-updates i-role-changes" style="display: none">',"<% if (this.changes.length) {%>","<% _.each(this.changes, function(change) { %>",'<div class="tau-txt">',"<b><%! change.fieldName%></b>","<% if (change.oldValue) { %>","<% if (change.toBeEncoded) { %>",' changed from <span class="tau-old-data"><%! change.oldValue%></span> to ',"<% } else { %>",' changed from <span class="tau-old-data"><%= change.oldValue%></span> to ',"<% } %>","<% } else { %>",": ","<% } %>","<% if (change.toBeEncoded) { %>",'<span class="tau-new-data"><%! change.newValue %></span><br/>',"<% } else { %>",'<span class="tau-new-data"><%= change.newValue %></span><br/>',"<% } %>","</div>","<% }); %>","<% } else { %>",'<div class="tau-txt"><b>no details...</b></div>',"<% } %>","</div>"]};return a.register(e)});
define('tau/ui/extensions/auditHistory/ui.extension.auditHistory',["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/templates/auditHistory/ui.template.auditHistory.records","tau/ui/templates/auditHistory/ui.template.auditHistory.record.changes"],function(e,t,r,i,o){return r.extend({init:function(e){this._super(e),this.limit=e.limit||10},"bus afterRender":function(e,t){var r=t.element;this._bindLoadMore(r),this._bindExpandCollapse(r),this.fire("loadedAuditRecords",{count:0}),this.fire("loadAuditRecords")},"bus afterRender:last + loadedAuditRecords:last + loadAuditRecords":function(e,t,r){this._showProgress(t.element.find(".i-role-more")),this.fire("getAuditRecords",{start:r.count,limit:this.limit})},"bus afterRender:last + loadedAuditRecords:last + auditRecords.ready":function(t,r,i,o){var s=r.element,n=s.find(".i-role-more");if(this._tryHideProgress(n),o.auditRecords)if(e.isEmpty(o.auditRecords))this._switchToNoMore(n,!0);else{var d=o.auditRecords.length;d<this.limit&&this._switchToNoMore(n);var a=this._buildAuditRecordsBindModel(o.auditRecords,i.lastRecordDate),c=this._$renderRecords(a.auditRecords);c.appendTo(this._$getRecordsHolder(this._$getRecords(s))),i.count>0&&this._scrollToLoadedRecords(c),this.fire("loadedAuditRecords",{count:i.count+d,lastRecordDate:a.lastRecordDate})}},"bus afterRender:last + auditRecordsChanges.ready":function(t,r,i){var o=this._$getRecords(r.element),s=this._$getRecordsHolder(o);this._tryHideProgress(this._$getChangesProgressHolder(o,i)),e.each(i,function(e){var t=this._$getRecord(s,e.historyId,e.entityTypeName);t.removeClass("i-role-expanding"),e.changes?this._showRecordChanges(t,e.changes):this._$toggleRecordsOpened(t,!1)},this)},"bus afterRender:last + getAuditRecordsChanges":function(e,t,r){var i=this._$getChangesProgressHolder(this._$getRecords(t.element),r.records);this._showProgress(i)},_bindLoadMore:function(e){e.find(".i-role-more-trigger").on("click",function(){this.fire("loadAuditRecords")}.bind(this))},_bindExpandCollapse:function(e){var r=this._$getRecordsHolder(this._$getRecords(e));r.on("click","td:not(.tau-date)",function(e){var r=t(e.currentTarget).parent();r.has(".i-role-changes:visible").length?this._collapse(r):this._expand(r)}.bind(this)),e.find(".i-role-expandAll").on("click",function(e,t){t.preventDefault(),this._expandAll(e)}.bind(this,r)),e.find(".i-role-collapseAll").on("click",function(e,t){t.preventDefault(),this._collapseAll(e)}.bind(this,r))},_expandAll:function(e){this._expand(this._$getRecordsItems(e))},_expand:function(e){this._$toggleRecordsOpened(e,!0).find(".i-role-changes").slideDown("fast");var r=this._$filterRecordsItemsToGetChanges(e);r.addClass("i-role-expanding");var i=r.map(function(e,r){var i=t(r);return{historyId:i.data("historyId"),entityTypeName:i.data("entityTypeName")}}.bind(this)).get();i.length>0&&this.fire("getAuditRecordsChanges",{records:i})},_collapseAll:function(e){this._collapse(this._$getRecordsItems(e))},_collapse:function(e){this._$toggleRecordsOpened(e,!1).find(".i-role-changes").slideUp("fast")},_scrollToLoadedRecords:function(e){var t=e.last();t.scrollParent().scrollTo(t,1e3)},_showProgress:function(e){e.data("ui-tauProgressIndicator")||e.tauProgressIndicator();var t=e.data("progress-timeout");t||e.data("progress-timeout",setTimeout(function(e){e.tauProgressIndicator("show",{hover:!0})}.bind(this,e),200))},_tryHideProgress:function(e,t){if(e.data("ui-tauProgressIndicator")){var r=e.data("progress-timeout");r&&(clearTimeout(r),e.removeData("progress-timeout")),e.tauProgressIndicator("hide"),t&&e.tauProgressIndicator("destroy")}},_switchToNoMore:function(e,t){e.find(".i-role-more-trigger").hide(),t&&(e.find(".i-role-no-more").fadeIn(400),e.fadeOut(2e3,"linear"))},_buildAuditRecordsBindModel:function(t,r){var i,o=r,s=e.map(t,function(e){return i=e.date.month+" "+e.date.day+", "+e.date.year,o&&i==o?i=null:o=i,{historyId:e.historyId,entityTypeName:e.entityTypeName,date:i,time:e.date.time,description:e.description,avatarUrl:e.avatarUrl,user:e.user}},this);return{auditRecords:s,lastRecordDate:o}},_showRecordChanges:function(e,t){var r=this._$getRecordDescription(e),i=this._$renderRecordChanges(t);i.appendTo(r),i.slideDown("fast")},_$filterRecordsItemsToGetChanges:function(e){return e.filter(":not(.i-role-expanding):not(:has(.i-role-changes))")},_$getChangesProgressHolder:function(t,r){var i=1==r.length;if(i){var o=e.first(r);return this._$getRecordDescription(this._$getRecord(this._$getRecordsHolder(t),o.historyId,o.entityTypeName))}return t},_$getRecords:function(e){return e.find(".i-role-records")},_$getRecordsHolder:function(e){return e.find(".i-role-records-holder")},_$getRecord:function(e,t,r){return e.find('[data-history-id="'+t+'"][data-entity-type-name="'+r+'"]')},_$getRecordDescription:function(e){return e.find(".i-role-description")},_$getRecordsItems:function(e){return e.find("tr")},_$renderRecords:function(e){return i.get().bind(null,{auditRecords:e})},_$renderRecordChanges:function(e){return o.get().bind(null,{changes:e})},_$toggleRecordsOpened:function(e,t){return e.toggleClass("tau-open",t)}})});
define('tau/ui/templates/auditHistory/ui.template.auditHistory',["tau/core/templates-factory"],function(a){var e={name:"auditHistory",engine:"jqote2",markup:['<div class="tau-audit-history">','<div class="tau-actions"><a href="" class="tau-expand i-role-expandAll">Expand all</a><span>/</span><a href="" class="tau-collapse i-role-collapseAll">Collapse all</a></div>','<table class="tau-audit-history-info i-role-records">','<tbody class="i-role-records-holder">',"</tbody>","</table>",'<div class="tau-more i-role-more"><a class="i-role-more-trigger">Load more records</a><span class="tau-more i-role-no-more" style="display: none">No more records</span></div>',"</div>"]};return a.register(e)});
define('tau/components/component.auditHistory',["tau/components/component.creator","tau/models/auditHistory/model.auditHistory","tau/ui/extensions/auditHistory/ui.extension.auditHistory","tau/components/extensions/error/extension.errorBar","tau/ui/templates/auditHistory/ui.template.auditHistory"],function(t,e,i,o,n){return{create:function(r){var a={extensions:[e,i,o],template:n};return t.create(a,r)}}});
define('tau/models/model.avatar',["jQuery","tau/core/model.editable.base","app.path","tau/core/tau"],function(e,t,a,i){return t.extend({onInit:function(){var e=this.config,t=e.context.entity;e.store.get("user",{id:t.id,fields:["avatarUri"]}).done(this.safeCallback(this.onUserDataRetrieved));var a=e.context.configurator.getAvatarService();a.getCropRect(t.id).done(function(e){this.fire("model.crop.ready",e)}.bind(this)),e.store.unbind(this),e.store.on({eventName:"afterSave",type:"user",hasChanges:["avatarUri"],listener:this},function(){this.fire("avatarChanged")}.bind(this))},onUserDataRetrieved:function(e){var t=e[0].data,a=this.config.context.avatarSize||64;this.fire("dataBind",{url:t.avatarUri+a+i.getTokenParameterFromQueryString("&"),id:t.id})}})});
define('libs/jquery/jquery.Jcrop',["libs/jquery/jquery.ui"],function(e){!function(e){e.Jcrop=function(t,n){function o(e){return e+"px"}function r(e){return R.baseClass+"-"+e}function i(){return e.fx.step.hasOwnProperty("backgroundColor")}function a(t){var n=e(t).offset();return[n.left,n.top]}function s(e){return[e.pageX-J[0],e.pageY-J[1]]}function c(t){"object"!=typeof t&&(t={}),R=e.extend(R,t),e.each(["onChange","onSelect","onRelease","onDblClick"],function(e,t){"function"!=typeof R[t]&&(R[t]=function(){})})}function u(e,t){if(J=a(q),pt.setCursor("move"===e?e:e+"-resize"),"move"===e)return pt.activateHandlers(l(t),b);var n=lt.getFixed(),o=h(e),r=lt.getCorner(h(o));lt.setPressed(lt.getCorner(o)),lt.setCurrent(r),pt.activateHandlers(d(e,n),b)}function d(e,t){return function(n){if(R.aspectRatio)switch(e){case"e":n[1]=t.y+1;break;case"w":n[1]=t.y+1;break;case"n":n[0]=t.x+1;break;case"s":n[0]=t.x+1}else switch(e){case"e":n[1]=t.y2;break;case"w":n[1]=t.y2;break;case"n":n[0]=t.x2;break;case"s":n[0]=t.x2}lt.setCurrent(n),ft.update()}}function l(e){var t=e;return gt.watchKeys(),function(e){lt.moveOffset([e[0]-t[0],e[1]-t[1]]),t=e,ft.update()}}function h(e){switch(e){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function f(e){return function(t){return R.disabled?!1:"move"!==e||R.allowMove?(J=a(q),ot=!0,u(e,s(t)),t.stopPropagation(),t.preventDefault(),!1):!1}}function p(e,t,n){var o=e.width(),r=e.height();o>t&&t>0&&(o=t,r=t/e.width()*e.height()),r>n&&n>0&&(r=n,o=n/e.height()*e.width()),tt=e.width()/o,nt=e.height()/r,e.width(o).height(r)}function g(e){return{x:e.x*tt,y:e.y*nt,x2:e.x2*tt,y2:e.y2*nt,w:e.w*tt,h:e.h*nt}}function b(){var e=lt.getFixed();e.w>R.minSelect[0]&&e.h>R.minSelect[1]?(ft.enableHandles(),ft.done()):ft.release(),pt.setCursor(R.allowSelect?"crosshair":"default")}function w(e){if(R.disabled)return!1;if(!R.allowSelect)return!1;ot=!0,J=a(q),ft.disableHandles(),pt.setCursor("crosshair");var t=s(e);return lt.setPressed(t),ft.update(),pt.activateHandlers(v,b),gt.watchKeys(),e.stopPropagation(),e.preventDefault(),!1}function v(e){lt.setCurrent(e),ft.update()}function m(){var t=e("<div></div>").addClass(r("tracker"));return e.browser.msie&&t.css({opacity:0,backgroundColor:"white"}),t}function C(e){L.removeClass().addClass(r("holder")).addClass(e)}function S(e,t){function n(){window.setTimeout(v,l)}var o=e[0]/tt,r=e[1]/nt,i=e[2]/tt,a=e[3]/nt;if(!rt){var s=lt.flipCoords(o,r,i,a),c=lt.getFixed(),u=[c.x,c.y,c.x2,c.y2],d=u,l=R.animationDelay,h=s[0]-u[0],f=s[1]-u[1],p=s[2]-u[2],g=s[3]-u[3],b=0,w=R.swingSpeed;x=d[0],y=d[1],i=d[2],a=d[3],ft.animMode(!0);var v=function(){return function(){b+=(100-b)/w,d[0]=x+b/100*h,d[1]=y+b/100*f,d[2]=i+b/100*p,d[3]=a+b/100*g,b>=99.8&&(b=100),100>b?(z(d),n()):(ft.done(),"function"==typeof t&&t.call(bt))}}();n()}}function k(e){z([e[0]/tt,e[1]/nt,e[2]/tt,e[3]/nt]),R.onSelect.call(bt,g(lt.getFixed())),ft.enableHandles()}function z(e){lt.setPressed([e[0],e[1]]),lt.setCurrent([e[2],e[3]]),ft.update()}function O(){return g(lt.getFixed())}function j(){return lt.getFixed()}function F(e){c(e),P()}function H(){R.disabled=!0,ft.disableHandles(),ft.setCursor("default"),pt.setCursor("default")}function D(){R.disabled=!1,P()}function M(){ft.done(),pt.activateHandlers(null,null)}function T(){L.remove(),Y.show(),Y.css("visibility",""),e(t).removeData("Jcrop")}function I(e,t){ft.release(),H();var n=new Image;n.onload=function(){var o=n.width,r=n.height,i=R.boxWidth,a=R.boxHeight;q.width(o).height(r),q.attr("src",e),N.attr("src",e),p(q,i,a),W=q.width(),G=q.height(),N.width(W).height(G),st.width(W+2*at).height(G+2*at),L.width(W).height(G),ht.resize(W,G),D(),"function"==typeof t&&t.call(bt)},n.src=e}function B(e,t,n){var o=t||R.bgColor;R.bgFade&&i()&&R.fadeTime&&!n?e.animate({backgroundColor:o},{queue:!1,duration:R.fadeTime}):e.css("backgroundColor",o)}function P(e){R.allowResize?e?ft.enableOnly():ft.enableHandles():ft.disableHandles(),pt.setCursor(R.allowSelect?"crosshair":"default"),ft.setCursor(R.allowMove?"move":"default"),R.hasOwnProperty("trueSize")&&(tt=R.trueSize[0]/W,nt=R.trueSize[1]/G),R.hasOwnProperty("setSelect")&&(k(R.setSelect),ft.done(),delete R.setSelect),ht.refresh(),R.bgColor!=ct&&(B(R.shade?ht.getShades():L,R.shade?R.shadeColor||R.bgColor:R.bgColor),ct=R.bgColor),ut!=R.bgOpacity&&(ut=R.bgOpacity,R.shade?ht.refresh():ft.setBgOpacity(ut)),Z=R.maxSize[0]||0,$=R.maxSize[1]||0,_=R.minSize[0]||0,et=R.minSize[1]||0,R.hasOwnProperty("outerImage")&&(q.attr("src",R.outerImage),delete R.outerImage),ft.refresh()}var J,R=e.extend({},e.Jcrop.defaults),A=!1;e.browser.msie&&"6"===e.browser.version.split(".")[0]&&(A=!0),"object"!=typeof t&&(t=e(t)[0]),"object"!=typeof n&&(n={}),c(n);var E={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},Y=e(t),X=!0;if("IMG"==t.tagName){if(0!=Y[0].width&&0!=Y[0].height)Y.width(Y[0].width),Y.height(Y[0].height);else{var K=new Image;K.src=Y[0].src,Y.width(K.width),Y.height(K.height)}var q=Y.clone().removeAttr("id").css(E).show();q.width(Y.width()),q.height(Y.height()),Y.after(q).hide()}else q=Y.css(E).show(),X=!1,null===R.shade&&(R.shade=!0);p(q,R.boxWidth,R.boxHeight);var W=q.width(),G=q.height(),L=e("<div />").width(W).height(G).addClass(r("holder")).css({position:"relative",backgroundColor:R.bgColor}).insertAfter(Y).append(q);R.addClass&&L.addClass(R.addClass);var N=e("<div />"),V=e("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),Q=e("<div />").width("100%").height("100%").css("zIndex",320),U=e("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var e=lt.getFixed();R.onDblClick.call(bt,e)}).insertBefore(q).append(V,Q);X&&(N=e("<img />").attr("src",q.attr("src")).css(E).width(W).height(G),V.append(N)),A&&U.css({overflowY:"hidden"});var Z,$,_,et,tt,nt,ot,rt,it,at=R.boundary,st=m().width(W+2*at).height(G+2*at).css({position:"absolute",top:o(-at),left:o(-at),zIndex:290}).mousedown(w),ct=R.bgColor,ut=R.bgOpacity;J=a(q);var dt=function(){function e(){var e,t={},n=["touchstart","touchmove","touchend"],o=document.createElement("div");try{for(e=0;e<n.length;e++){var r=n[e];r="on"+r;var i=r in o;i||(o.setAttribute(r,"return;"),i="function"==typeof o[r]),t[n[e]]=i}return t.touchstart&&t.touchend&&t.touchmove}catch(a){return!1}}function t(){return R.touchSupport===!0||R.touchSupport===!1?R.touchSupport:e()}return{createDragger:function(e){return function(t){return t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,R.disabled?!1:"move"!==e||R.allowMove?(ot=!0,u(e,s(t)),t.stopPropagation(),t.preventDefault(),!1):!1}},newSelection:function(e){return e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,w(e)},isSupported:e,support:t()}}(),lt=function(){function e(e){e=a(e),p=h=e[0],g=f=e[1]}function t(e){e=a(e),d=e[0]-p,l=e[1]-g,p=e[0],g=e[1]}function n(){return[d,l]}function o(e){var t=e[0],n=e[1];0>h+t&&(t-=t+h),0>f+n&&(n-=n+f),g+n>G&&(n+=G-(g+n)),p+t>W&&(t+=W-(p+t)),h+=t,p+=t,f+=n,g+=n}function r(e){var t=i();switch(e){case"ne":return[t.x2,t.y];case"nw":return[t.x,t.y];case"se":return[t.x2,t.y2];case"sw":return[t.x,t.y2]}}function i(){if(!R.aspectRatio)return c();var e,t,n,o,r=R.aspectRatio,i=R.minSize[0]/tt,a=R.maxSize[0]/tt,d=R.maxSize[1]/nt,l=p-h,b=g-f,w=Math.abs(l),v=Math.abs(b),y=w/v;return 0===a&&(a=10*W),0===d&&(d=10*G),r>y?(t=g,n=v*r,e=0>l?h-n:n+h,0>e?(e=0,o=Math.abs((e-h)/r),t=0>b?f-o:o+f):e>W&&(e=W,o=Math.abs((e-h)/r),t=0>b?f-o:o+f)):(e=p,o=w/r,t=0>b?f-o:f+o,0>t?(t=0,n=Math.abs((t-f)*r),e=0>l?h-n:n+h):t>G&&(t=G,n=Math.abs(t-f)*r,e=0>l?h-n:n+h)),e>h?(i>e-h?e=h+i:e-h>a&&(e=h+a),t=t>f?f+(e-h)/r:f-(e-h)/r):h>e&&(i>h-e?e=h-i:h-e>a&&(e=h-a),t=t>f?f+(h-e)/r:f-(h-e)/r),0>e?(h-=e,e=0):e>W&&(h-=e-W,e=W),0>t?(f-=t,t=0):t>G&&(f-=t-G,t=G),u(s(h,f,e,t))}function a(e){return e[0]<0&&(e[0]=0),e[1]<0&&(e[1]=0),e[0]>W&&(e[0]=W),e[1]>G&&(e[1]=G),[e[0],e[1]]}function s(e,t,n,o){var r=e,i=n,a=t,s=o;return e>n&&(r=n,i=e),t>o&&(a=o,s=t),[r,a,i,s]}function c(){var e,t=p-h,n=g-f;return Z&&Math.abs(t)>Z&&(p=t>0?h+Z:h-Z),$&&Math.abs(n)>$&&(g=n>0?f+$:f-$),et/nt&&Math.abs(n)<et/nt&&(g=n>0?f+et/nt:f-et/nt),_/tt&&Math.abs(t)<_/tt&&(p=t>0?h+_/tt:h-_/tt),0>h&&(p-=h,h-=h),0>f&&(g-=f,f-=f),0>p&&(h-=p,p-=p),0>g&&(f-=g,g-=g),p>W&&(e=p-W,h-=e,p-=e),g>G&&(e=g-G,f-=e,g-=e),h>W&&(e=h-G,g-=e,f-=e),f>G&&(e=f-G,g-=e,f-=e),u(s(h,f,p,g))}function u(e){return{x:e[0],y:e[1],x2:e[2],y2:e[3],w:e[2]-e[0],h:e[3]-e[1]}}var d,l,h=0,f=0,p=0,g=0;return{flipCoords:s,setPressed:e,setCurrent:t,getOffset:n,moveOffset:o,getCorner:r,getFixed:i}}(),ht=function(){function t(e,t){p.left.css({height:o(t)}),p.right.css({height:o(t)})}function n(){return r(lt.getFixed())}function r(e){p.top.css({left:o(e.x),width:o(e.w),height:o(e.y)}),p.bottom.css({top:o(e.y2),left:o(e.x),width:o(e.w),height:o(G-e.y2)}),p.right.css({left:o(e.x2),width:o(W-e.x2)}),p.left.css({width:o(e.x)})}function i(){return e("<div />").css({position:"absolute",backgroundColor:R.shadeColor||R.bgColor}).appendTo(f)}function a(){h||(h=!0,f.insertBefore(q),n(),ft.setBgOpacity(1,0,1),N.hide(),s(R.shadeColor||R.bgColor,1),ft.isAwake()?u(R.bgOpacity,1):u(1,1))}function s(e,t){B(l(),e,t)}function c(){h&&(f.remove(),N.show(),h=!1,ft.isAwake()?ft.setBgOpacity(R.bgOpacity,1,1):(ft.setBgOpacity(1,1,1),ft.disableHandles()),B(L,0,1))}function u(e,t){h&&(R.bgFade&&!t?f.animate({opacity:1-e},{queue:!1,duration:R.fadeTime}):f.css({opacity:1-e}))}function d(){R.shade?a():c(),ft.isAwake()&&u(R.bgOpacity)}function l(){return f.children()}var h=!1,f=e("<div />").css({position:"absolute",zIndex:240,opacity:0}),p={top:i(),left:i().height(G),right:i().height(G),bottom:i()};return{update:n,updateRaw:r,getShades:l,setBgColor:s,enable:a,disable:c,resize:t,refresh:d,opacity:u}}(),ft=function(){function t(t){var n=e("<div />").css({position:"absolute",opacity:R.borderOpacity}).addClass(r(t));return V.append(n),n}function n(t,n){var o=e("<div />").mousedown(f(t)).css({cursor:t+"-resize",position:"absolute",zIndex:n}).addClass("ord-"+t);return dt.support&&o.bind("touchstart.jcrop",dt.createDragger(t)),Q.append(o),o}function i(e){var t=R.handleSize;return n(e,j++).css({opacity:R.handleOpacity}).width(t).height(t).addClass(r("handle"))}function a(e){return n(e,j++).addClass("jcrop-dragbar")}function s(e){var t;for(t=0;t<e.length;t++)D[e[t]]=a(e[t])}function c(e){var n,o;for(o=0;o<e.length;o++){switch(e[o]){case"n":n="hline";break;case"s":n="hline bottom";break;case"e":n="vline right";break;case"w":n="vline"}F[e[o]]=t(n)}}function u(e){var t;for(t=0;t<e.length;t++)H[e[t]]=i(e[t])}function d(e,t){R.shade||N.css({top:o(-t),left:o(-e)}),U.css({top:o(t),left:o(e)})}function l(e,t){U.width(e).height(t)}function h(){var e=lt.getFixed();lt.setPressed([e.x,e.y]),lt.setCurrent([e.x2,e.y2]),p()}function p(e){return O?b(e):void 0}function b(e){var t=lt.getFixed();l(t.w,t.h),d(t.x,t.y),R.shade&&ht.updateRaw(t),O||v(),e?R.onSelect.call(bt,g(t)):R.onChange.call(bt,g(t))}function w(e,t,n){(O||t)&&(R.bgFade&&!n?q.animate({opacity:e},{queue:!1,duration:R.fadeTime}):q.css("opacity",e))}function v(){U.show(),R.shade?ht.opacity(ut):w(ut,!0),O=!0}function y(){S(),U.hide(),R.shade?ht.opacity(1):w(1),O=!1,R.onRelease.call(bt)}function x(){M&&Q.show()}function C(){return M=!0,R.allowResize?(Q.show(),!0):void 0}function S(){M=!1,Q.hide()}function k(e){rt===e?S():C()}function z(){k(!1),h()}var O,j=370,F={},H={},D={},M=!1;R.dragEdges&&e.isArray(R.createDragbars)&&s(R.createDragbars),e.isArray(R.createHandles)&&u(R.createHandles),R.drawBorders&&e.isArray(R.createBorders)&&c(R.createBorders),e(document).bind("touchstart.jcrop-ios",function(t){e(t.currentTarget).hasClass("jcrop-tracker")&&t.stopPropagation()});var T=m().mousedown(f("move")).css({cursor:"move",position:"absolute",zIndex:360});return dt.support&&T.bind("touchstart.jcrop",dt.createDragger("move")),V.append(T),S(),{updateVisible:p,update:b,release:y,refresh:h,isAwake:function(){return O},setCursor:function(e){T.css("cursor",e)},enableHandles:C,enableOnly:function(){M=!0},showHandles:x,disableHandles:S,animMode:k,setBgOpacity:w,done:z}}(),pt=function(){function t(){st.css({zIndex:450}),dt.support&&e(document).bind("touchmove.jcrop",a).bind("touchend.jcrop",c),h&&e(document).bind("mousemove.jcrop",o).bind("mouseup.jcrop",r)}function n(){st.css({zIndex:290}),e(document).unbind(".jcrop")}function o(e){return d(s(e)),!1}function r(e){return e.preventDefault(),e.stopPropagation(),ot&&(ot=!1,l(s(e)),ft.isAwake()&&R.onSelect.call(bt,g(lt.getFixed())),n(),d=function(){},l=function(){}),!1}function i(e,n){return ot=!0,d=e,l=n,t(),!1}function a(e){return e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,o(e)}function c(e){return e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,r(e)}function u(e){st.css("cursor",e)}var d=function(){},l=function(){},h=R.trackDocument;return h||st.mousemove(o).mouseup(r).mouseout(r),q.before(st),{activateHandlers:i,setCursor:u}}(),gt=function(){function t(){R.keySupport&&(i.show(),i.focus())}function n(){i.hide()}function o(e,t,n){R.allowMove&&(lt.moveOffset([t,n]),ft.updateVisible(!0)),e.preventDefault(),e.stopPropagation()}function r(e){if(e.ctrlKey||e.metaKey)return!0;it=e.shiftKey?!0:!1;var t=it?10:1;switch(e.keyCode){case 37:o(e,-t,0);break;case 39:o(e,t,0);break;case 38:o(e,0,-t);break;case 40:o(e,0,t);break;case 27:R.allowSelect&&ft.release();break;case 9:return!0}return!1}var i=e('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}),a=e("<div />").css({position:"absolute",overflow:"hidden"}).append(i);return R.keySupport&&(i.keydown(r).blur(n),A||!R.fixedSupport?(i.css({position:"absolute",left:"-20px"}),a.append(i).insertBefore(q)):i.insertBefore(q)),{watchKeys:t}}();dt.support&&st.bind("touchstart.jcrop",dt.newSelection),Q.hide(),P(!0);var bt={setImage:I,animateTo:S,setSelect:k,setOptions:F,tellSelect:O,tellScaled:j,setClass:C,disable:H,enable:D,cancel:M,release:ft.release,destroy:T,focus:gt.watchKeys,getBounds:function(){return[W*tt,G*nt]},getWidgetSize:function(){return[W,G]},getScaleFactor:function(){return[tt,nt]},getOptions:function(){return R},ui:{holder:L,selection:U}};return e.browser.msie&&L.bind("selectstart",function(){return!1}),Y.data("Jcrop",bt),bt},e.fn.Jcrop=function(t,n){var o;return this.each(function(){if(e(this).data("Jcrop")){if("api"===t)return e(this).data("Jcrop");e(this).data("Jcrop").setOptions(t)}else"IMG"==this.tagName?e.Jcrop.Loader(this,function(){e(this).css({display:"block",visibility:"hidden"}),o=e.Jcrop(this,t),e.isFunction(n)&&n.call(o)}):(e(this).css({display:"block",visibility:"hidden"}),o=e.Jcrop(this,t),e.isFunction(n)&&n.call(o))}),this},e.Jcrop.Loader=function(t,n,o){function r(){a.complete?(i.unbind(".jcloader"),e.isFunction(n)&&n.call(a)):window.setTimeout(r,50)}var i=e(t),a=i[0];i.bind("load.jcloader",r).bind("error.jcloader",function(){i.unbind(".jcloader"),e.isFunction(o)&&o.call(a)}),a.complete&&e.isFunction(n)&&(i.unbind(".jcloader"),n.call(a))},e.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:7,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}}(e)});
define('tau/ui/behaviour/overlay/ui.behaviour.overlay',["Underscore","jQuery"],function(e,t){t.widget("ui.tauOverlay",{options:{showOnCreation:!0},_create:function(){this.$target=this.element,this.options.showOnCreation&&this.show()},showLarge:function(){this._show("ui-spinner-centered")},show:function(){this._show("ui-overlay")},_show:function(e){var o=this;o.$overlay=o.overlay||t(['<div class="',e,'"></div>'].join("")),o.$overlay.detach(),o.$target.addClass("ui-overlay-container");var r=t("body");r="relative"===o.$target.css("position")?o.$target:o.$target.offsetParent(),r.append(o.$overlay)},hide:function(){var e=this;e.destroy()},destroy:function(){var e=this;e.$target.removeClass("ui-overlay-container"),e.$overlay&&e.$overlay.remove(),t.Widget.prototype.destroy.apply(this,arguments)}})});
define('tau/ui/extensions/avatar/ui.extension.avatar.editor',["app.path","Underscore","jQuery","tau/components/extensions/component.extension.base","tau/core/tau","libs/jquery/jquery.fileupload","libs/jquery/jquery.iframe-transport","libs/jquery/jquery.Jcrop","tau/ui/behaviour/overlay/ui.behaviour.overlay"],function(e,i,t,r,a){return r.extend({"bus afterRender":function(e){e.data.element.find(".file-input").fileupload({url:this._getUploadUrl(),formData:this._getFormData(),add:i.bind(this._onFileAdd,this)}),this.avatarService=this.config.context.configurator.getAvatarService(),e.data.element.find(".crop-avatar").click(i.bind(this.onCropClick,this)),e.data.element.find(".remove-avatar").click(i.bind(this.onRemoveClick,this)),e.data.element.find(".tau-save-crop").click(i.bind(this.onSaveClick,this)),e.data.element.find(".tau-cancel-crop").click(i.bind(this.onCancelClick,this));var t=e.data.element.find(".tau-avatar-crop-container"),r=t.css("max-width");this.fire("view.max.width.calculated",r)},onCancelClick:function(){this.fire("view.save.cancel")},onSaveClick:function(){this.fire("view.save.crop")},onRemoveClick:function(){this.fire("view.lock"),this.fire("view.remove.avatar")},onCropClick:function(){this.fire("view.initialize.crop")},"bus model.crop.ready:last+view.initialize.crop":function(e,i){this.fire("view.lock"),this.fire("view.edit.avatar.with.url",{url:this.getOriginAvatarUrl(this._getGeneralId()),cropRect:i})},"bus view.edit.avatar.with.url:last+view.crop.selected:last+afterRender:last+view.save.crop":function(e,i,r,a){{var n=a.element.find(".tau-avatar-crop-container .tau-img:visible"),o=n[0].naturalWidth/n.width(),s=n[0].naturalHeight/n.height(),d=this.getCropAvatarUrl(i.url,{x:parseInt(r.x*o),y:parseInt(r.y*s),w:parseInt(r.w*s),h:parseInt(r.h*s)});n.width()/n[0].naturalWidth}this.fire("view.image.will.crop"),this.avatarService.crop(d).done(t.proxy(function(e){this.fire("view.image.did.cropped",e),this.fire("model.crop.ready",{x:d.x,y:d.y,width:d.w,height:d.h})},this)).fail(t.proxy(function(e){this.fire("error",{message:e.Message,disableAutoClose:!0}),this.fire("view.hide.avatar.editor"),this.fire("view.unlock")},this))},"bus afterRender:last+view.hide.avatar.editor":function(e,i,t){var r=this;i.element.find(".tau-avatar-crop-container").slideUp(function(){t&&1==t.close&&r.fire("close",{animated:!0})}),i.element.find(".drop-down-list__inner").show()},"bus afterRender:last+view.show.avatar.editor":function(e,i){i.element.find(".tau-avatar-crop-container").slideDown(),i.element.find(".drop-down-list__inner").hide()},"bus afterRender:last+view.lock":function(e,i){i.element.tauOverlay()},"bus afterRender:last+view.unlock":function(e,i){i.element.tauOverlay("hide")},"bus afterRender:last+view.save.cancel":function(){this.fire("view.hide.avatar.editor")},"bus jcrop.api.ready+view.image.will.crop":function(e,i){i.destroy(),this.fire("view.lock")},"bus avatar.did.removed":function(e,i){this.store.registerWithEvents([{id:i.Id,__type:"user",avatarUri:i.AvatarUri}]),this.fire("view.unlock")},"bus view.image.did.cropped":function(e){var i=e.data;this.store.registerWithEvents([{id:i.Id,__type:"user",avatarUri:i.AvatarUri}]),this.fire("view.hide.avatar.editor",{close:!0}),this.fire("view.unlock")},"bus view.remove.avatar":function(){this.fire("view.lock");var e=this.getRemoveAvatarUrl(this._getGeneralId());this.avatarService.remove(e).done(t.proxy(function(e){this.fire("avatar.did.removed",e)},this)).fail(t.proxy(function(e){this.fire("error",{message:e.Message,disableAutoClose:!0}),this.fire("view.unlock")},this))},"bus view.files.selected":function(e,i){function t(e){var i=JSON.parse(e.responseText);r.fire("error",{message:i.Message,disableAutoClose:!0}),r.fire("view.unlock")}var r=this;r.fire("view.lock"),i.submit().done(function(e,i,a){try{e=JSON.parse(e)}catch(n){e=e.find("body").text(),a.responseText=e,e=JSON.parse(e)}e.Success===!0?r.fire("view.file.did.upload"):t(a)}).fail(t)},"bus afterRender:last+view.crop.selected":function(e,i){i.element.find(".tau-save-crop").attr("disabled",!1)},"bus jcrop.api.ready>before_view.file.did.upload":function(e,i){i.destroy()},"bus afterRender:last+view.crop.released":function(e,i){i.element.find(".tau-save-crop").attr("disabled",!0)},getTempAvatarUrl:function(i){var t=e.get()+"/Avatar.ashx?UserID="+i+"&source=temp&"+(new Date).getTime();return this._appendToken(t)},getRemoveAvatarUrl:function(i){var t=e.get()+"/Avatar.ashx?operation=remove&UserID="+i;return this._appendToken(t)},getOriginAvatarUrl:function(i){var t=e.get()+"/Avatar.ashx?UserID="+i+"&source=original&"+(new Date).getTime();return this._appendToken(t)},getCropAvatarUrl:function(e,i){var t=e+"&operation=crop&"+["x="+i.x,"y="+i.y,"width="+i.w,"height="+i.h].join("&");return this._appendToken(t)},_appendToken:function(e){var i=e;return e.indexOf("?token=")<0&&e.indexOf("&token=")<0&&(i+=a.getTokenParameterFromQueryString("&")),i},"bus afterRender:last+view.file.did.upload":function(){var e=this._getGeneralId(),i=this.getTempAvatarUrl(e);this.fire("view.hide.avatar.editor"),this.fire("view.edit.avatar.with.url",{url:i})},"bus jcrop.api.ready>before_view.edit.avatar.with.url":function(e,i){i.destroy()},"bus afterRender:last+view.max.width.calculated:last+view.edit.avatar.with.url":function(e,i,r,a){var n=this,o=i.element.find(".tau-avatar-crop-container");o.css("max-width",r);var s=i.element.find(".tau-avatar-crop-container .tau-img:first-child");s.css("width","").css("height","").prop("src",a.url);var d=a.cropRect,c=function(){if(0==i.element.is(":visible"))return void n.fire("view.unlock");n.fire("view.show.avatar.editor"),i.element.find(".tau-save-crop").attr("disabled",!0);var e=s.width(),r=s.height(),a=48,c=i.element,l=c.offset(),v=t(window).height()-50-l.top;if(r>v){var u=v*e/r;o.css("max-width",u),e=s.width(),r=s.height()}var f=s.width()/s[0].naturalWidth,h=null;d&&(h=[d.x*f,d.y*f,d.width*f,d.height*f],h[2]+=h[0],h[3]+=h[1]),s.Jcrop({aspectRatio:1,minSize:[a,a],setSelect:h?h:[0,0,e,r],onSelect:function(e){n.fire("view.crop.selected",e)},onChange:function(e){n.fire("view.crop.selected",e)},onRelease:function(){n.fire("view.crop.released")}},function(){n.fire("view.unlock"),n.fire("jcrop.api.ready",this)})};s.on("load",c)},_getUploadUrl:function(){return e.get()+"/Avatar.ashx?UserID="+this._getGeneralId()+a.getTokenParameterFromQueryString("&")},_getFormData:function(){return[]},_getGeneralId:function(){return this.config.context.entity.id},_onFileAdd:function(e,i){i.files&&0!=i.files.length&&this.fire("view.files.selected",i)}})});
define('tau/ui/templates/avatar/ui.template.avatar.editor',["tau/core/templates-factory"],function(t){var a={name:"user.avatar.editor",markup:['<div class="ui-menu-actions tau-avatar-editor">','<div class="drop-down-list drop-down-list__inner i-inner">','<div class="ui-menu__item drop-down-option upload-photo" role="option">',"<span>Upload Image",'<input type="file" class="file-input" accept="image/*">',"</span>","</div>",'<div class="ui-menu__item drop-down-option crop-avatar">Edit Avatar</div>','<div class="ui-menu__item drop-down-option remove-avatar" role="option">Remove</div>',"</div>",'<div class="tau-avatar-crop-container" style="display: none; max-width: 600px;">','<img class="tau-img"  width="100%;" />','<div class="tau-avatar-button-panel">','<button type="button" class="tau-btn tau-save-crop tau-primary">Update Avatar</button> ','<button type="button" class="tau-btn tau-cancel-crop">Cancel</button> ',"</div>","</div>","</div>"].join("")};return t.register(a)});
define('tau/components/component.avatar.editor',["tau/components/component.creator","tau/models/model.avatar","tau/ui/extensions/avatar/ui.extension.avatar.editor","tau/components/extensions/error/extension.errorBar","tau/ui/templates/avatar/ui.template.avatar.editor"],function(e,t,a,r,n){return{create:function(o){var u={name:"avatar.editor",extensions:[t,a,r],template:n};return o["queue.bus"]=!0,e.create(u,o)}}});
define('tau/ui/extensions/avatar/ui.extension.avatar',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,n,t){return t.extend({"bus afterRender":function(e){var t=e.data.element,o=function(e){e.at="center bottom-10",e.my="center top"},i={target:t,onPositionConfig:o,onArrowPositionConfig:o,showEvent:this.config.editorConfig.showEvent||"mouseenter",hideEvent:"click",showCloseButton:!1,delay:100,onShow:function(){var e=this.target.tauBubble("widget");e.find(".tau-bubble__inner").attr("tabindex",-1).css("outline","none").focus(),e.on("keydown",function(t){t.keyCode==n.ui.keyCode.ESCAPE&&(e.hide().off("keydown"),t.stopPropagation())})},componentsConfig:{components:[{type:"avatar.editor"}],context:this.config.context},stackName:"avatar"};this.fire("initBubble",i)},"bus avatarChanged":function(){this.fire("refresh")}})});
define('tau/ui/templates/avatar/ui.template.avatar',["tau/core/templates-factory"],function(a){var r={name:"user.avatar",markup:['<div class="box ui-avatar tau-avatar_${id}">','<img src="${url}" /> ',"</div>"].join("")};return a.register(r)});
define('tau/components/component.avatar',["tau/components/component.creator","tau/models/model.avatar","tau/ui/extensions/avatar/ui.extension.avatar","tau/components/extensions/bubble/extension.bubble.creator","tau/components/extensions/component.creator.extension","tau/ui/templates/avatar/ui.template.avatar"],function(e,t,n,a,o,i){return{create:function(s){s.isEdit&&(s.extensions=(s.extensions||[]).concat(a||[])),s.editorConfig=_.extend({},s.editorConfig);var r={name:"avatar",extensions:[t,o,n].concat(s.extensions||[]),template:i};return e.create(r,s)}}});
define('tau/models/board.plus/model.board.slice.comet',["Underscore","tau/core/class","tau/core/extension.base"],function(t,e,i){var s=function(e){window.appIsInDebugMode&&window.console&&(window.console.group&&window.console.table?(console.group("board comet tick"),console.log("Raw: %o",e),console.log("Reason: %o",e.data.reason),console.table(t.map(e.data.items,function(e){var i=t.pick(e,"modification","location","x","y");return i.type=e.data.type,i.id=e.data.id,i})),console.groupEnd()):console.log("board comet tick",e))},n=e.extend({init:function(){this._queue=[],this.onTickCb=$.noop()},add:function(t){this._queue.push(t),this.postponeFlush()},flush:function(t){this._queue.push(t),this.executeFlush()},reset:function(){this.timeout&&clearTimeout(this.timeout),this.queue=[]},postponeFlush:function(){clearTimeout(this.timeout),this.timeout=setTimeout(t.bind(this.onFlush,this),100)},executeFlush:function(){clearTimeout(this.timeout),this.onFlush()},onFlush:function(){var e=this._queue;for(this._queue.length>1&&(e=t.map(e,function(e){return e.data.items=t.map(e.data.items,function(t){return"NotInSlice"!=t.modification&&(t.modification="cascade"),t}),e}),this._queue=e);e.length;)this.doTick(e.shift())},doTick:function(){this.onTickCb.apply(null,t.toArray(arguments))},onTick:function(t){this.onTickCb=t}});return i.extend({STATUS_ONLINE:"online",STATUS_OFFLINE:"offline",reconnectDuration:1e4,resetLifecycle:!0,init:function(e,i,o){this.configurator=i,this.hubName=o||"slice",this.templateMessageReconnect=this.configurator.getTemplateFactory().register({name:"connection.restore",markup:['<div class="tau-system-message-body-inner">',"<h3>Connection is restored.</h3>",'<div>Please, <a class="tau-target-link i-role-actionrefresh"">refresh</a> View to apply changes from server.<div>',"</div>"]}).get(),this.templateMessageOffline=this.configurator.getTemplateFactory().register({name:"connection.lost",markup:['<div class="tau-system-message-body-inner">',"<h3>Connection lost.</h3>","<div>Cannot connect to the server.<div>","</div>"]}).get(),this.status=null,this.cometState={},this.queue=new n,this._super(e),this.queue.onTick(t.bind(function(t){s(t),this.fireCometTick(t)},this))},fireCometTick:function(t){this.fire("comet.tick",t)},"bus start.lifecycle + slice.ready":function(t,e,i){this.status=this.STATUS_ONLINE,this.initSubscription(i.slice)},"bus comet.subscription.ready:last > slice.ready":function(t,e,i){clearTimeout(this.timeoutId);var s=setTimeout(function(){e.stop(),this.subscription=null,this.status=this.STATUS_ONLINE,this.initSubscription(i.slice)}.bind(this),100);this.timeoutId=s,this.on("refresh",function(){clearTimeout(s)}),this.on("destroy",function(){clearTimeout(s)})},"bus slice.ready:last + netStatus.changed":function(e,i,s){var n=this.status;n!==s&&(s===this.STATUS_ONLINE?(this.reconnectInterval&&clearInterval(this.reconnectInterval),n===this.STATUS_OFFLINE&&this.notifyReconnected()):s===this.STATUS_OFFLINE&&(this.notifyDisconnected(),this.reconnectInterval=setInterval(t.bind(function(){this.initSubscription(i.slice)},this),this.reconnectDuration)),this.status=s)},"bus comet.subscription.ready:last + before_destroy":function(t,e){this.subscription=null,e.stop()},"bus comet.subscription.ready:last + before_refresh":function(t,e){this.subscription=null,e.stop()},initSubscription:function(e){if(!this.subscription){this.cometState={},this.queue.reset();var i=this.configurator.getComet().listen(this.hubName,{parameters:e.getSliceParams()});return i.on({callback:this.handleData.bind(this),batchCallback:this.handleBatchData.bind(this)}).aborted(t.bind(this.handleAbort,this,i,e)).disconnected(t.bind(this.handleDisconnect,this,i)).start(t.bind(this.handleStart,this,i)),this.subscription=i,i}},handleStart:function(t){this.fire("comet.subscription.ready",t),this.fire("netStatus.changed",this.STATUS_ONLINE)},handleDisconnect:function(t){this.subscription=null,t.stop(),this.fire("netStatus.changed",this.STATUS_OFFLINE)},handleAbort:function(e,i){this.subscription=null,e.stop(),t.defer(t.bind(this.initSubscription,this,i))},isStateDeprecated:function(t,e){var i=this.cometState[e]||0,s=!1;return i>t&&(s=!0),s},handleBatchData:function(t){this.fire("comet.batch",t)},handleData:function(e){{var i=t.first(e.data.items),s=(i.data.id||"").toLowerCase(),n=e.timestamp;this.cometState[s]||0}this.isStateDeprecated(n,s)||(this.cometState[s]=e.timestamp,this.isOperationToMerge(e)?this.queue.add(e):this.queue.flush(e))},isOperationToMerge:function(e){var i=t.first(e.data.items),s=(i.location||"").toLowerCase(),n=e.data.reason,o=i.modification.toLowerCase(),a=!t.difference(["NumericPriority"],n).length,c="updated"===o&&"card"===s&&a;return c},notifyDisconnected:function(){var t=this.templateMessageOffline.bind({},{});this.fire("error",{$node:t,disableAutoClose:!0})},notifyReconnected:function(){var e=this.templateMessageReconnect.bind({},{});e.on("click",".i-role-actionrefresh",t.bind(function(){this.fire("refresh")},this)),this.fire("notification",{$node:e,disableAutoClose:!0})}})});
define('tau/components/board.core/models/model.board.core',["Underscore","tau/core/class"],function(e,t){return t.extend({init:function(){},getMarks:function(e,t,i){return i.slice(0,t.size[e])},isLastPage:function(e,t,i){var n=this.getPageLimit(e,i);return t.length<n},getPageLimit:function(e,t){return Math.floor(1.25*t.size[e])+1},getSlicePagingArgs:function(e,t){var i=this.getPageLimit(e,t);return{$take:i,$skip:t.size[e]*t[e]}},isConfigured:function(t){return t?e.isString(t)?!0:t.id?!0:e.isArray(t.types)?t.types.length>0:!1:!1},getPagesCountForAxis:function(e,t){var i=Math.floor(e/t),n=e-i*t;return n>0&&n>.25*t&&i++,0===i&&(i=1),i},getEmptyModelInfoArgs:function(e){return{viewMode:"board",marksX:[],definition:e,x:this.getAxisNullPagingObject(),y:this.getAxisNullPagingObject(),zoomLevel:e.zoomLevel||3,marksY:[],page:{x:0,y:0}}},getAxisPagingObject:function(e,t,i){var n=this,a=n.isLastPage(e,t,i),r=a?n.getPageLimit(e,i):i.size[e],s=t.slice(0,r),g=i[e],u=0===g;return{isNull:!1,currentPage:g,isFirst:u,isLast:a,hasPrev:!u,prevPage:u?null:g-1,hasNext:!a,nextPage:a?null:g+1,data:s,onPage:s.length,maxOnPage:i.size[e]}},getAxisNullPagingObject:function(){return{currentPage:0,isFirst:!0,isLast:!0,hasPrev:!1,prevPage:null,hasNext:!1,nextPage:null,data:[],start:0,end:0,onPage:0,maxOnPage:0,total:0,totalPages:1}}})});
define('tau/components/board.new.list/models/model.new.list',["Underscore","tau/components/board.core/models/model.board.core"],function(e,i){return i.extend({findCardById:function(e){var i=this._rootModel.hierarchy.findChildByCardId(e);return i.card},setup:function(e,i){this._rootModel=e,this._definition=i},isNotConfigured:function(){var i=!e.any([this._definition.x,this._definition.y],this.isConfigured,this),n=!this.isConfigured(this._definition.cells);return i&&n},getIsEmptyObject:function(i){var n={isEmpty:i.isEmpty(),noCards:!1,noValuableAxis:!1,noCardsSetup:!1,noLanesSetup:!1,noSetup:!1};return i.isCellLevel()?n.noCards=n.isEmpty:n.noValuableAxis=n.isEmpty,n.noLanesSetup=!e.any([this._definition.x,this._definition.y],this.isConfigured.bind(this)),n.noCardsSetup=!this.isConfigured(this._definition.cells),n.noSetup=n.noLanesSetup&&n.noCardsSetup,n},deleteCard:function(e,i){this._rootModel.deleteDescendantsByCardIdAndType(e,i)},refreshCard:function(e,i){this._rootModel.refreshDescendantsByCardIdAndType(e,i)},getEmptyModelInfoArgs:function(e){return{viewMode:"newlist",marksX:[],definition:e,x:this.getAxisNullPagingObject(),y:this.getAxisNullPagingObject(),zoomLevel:e.zoomLevel||3,marksY:[],page:{x:0,y:0}}}})});
define('tau/services/customize/service.customize.card.layout.factory',["jQuery","Underscore","tau/core/class","tau/models/board.customize.units/board.customize.units.settings.default","tau/models/board.customize.units/const.card.sizes"],function(t,n,e,i,r){return e.extend({name:"board",sizes:r,defaultSettings:i,init:function(t,n){this.configurator=t,this.boardSettings=n,this.unitProviders=[t.getUnitsRegistry(),t.getCustomFieldsUnitsFactory()]},getLayoutFactory:function(){return this.boardSettings.get({fields:["cells","cardSettings","zoomLevel"]}).then(n.bind(function(t){return this.createFactory(t)},this))},patch:function(t){return t&&t.impediment&&n.each(t.impediment,function(t){n.each(t,function(t){n.each(t,function(t){"assignments_big_2"==t.id&&(t.id="responsible_person")})})}),t},createFactory:function(t){var e=this.patch(t.cardSettings),i=this._zoomToSize(t.zoomLevel);return n.bind(function(t,n,e,i){return this.getLayout(t,e,i||n)},this,e,i)},getLayout:function(t,e,i){var r=n.chain(n.isArray(e)?e:[e]).compact().map(function(t){return t.toLowerCase()}).value(),o=this.findSettings(t,r,[i]),u=n.object(n.map(o,function(t,e){return[e,n.find(t,function(t,n){return n===i})||[]]}));return n.isArray(e)?u:u[r[0]]},getCardLayoutByType:function(t){return this.getCardLayoutByTypeAndSize(t)},getCardLayoutsByTypesAndSize:function(t,n){return this.getLayoutFactory().then(function(e){return e(t,n)})},getCardLayoutByTypeAndSize:function(t,n){return this.getCardLayoutsByTypesAndSize([t],n).then(function(n){return n[t]})},getSavedSetting:function(t,n,e,i,r){return t&&t[i]&&t[i][r]},findSettings:function(t,e,i){var r=this,o=this.defaultSettings;return n.object(n.map(e,function(u){return u=u.toLowerCase(),[u,n.object(n.map(i,function(a){var s=r.getSavedSetting(t,e,i,u,a),c=!1;return s||(s=o.get(a,u),c=!0),s=n.map(s,function(t){return t=n.map(t,function(t){return n.extend({unit:r.findUnitById(t.id)},t)}),t=n.filter(t,function(t){return t.unit})}),s.isDefault=c,[a,s]}))]}))},_zoomToSize:function(t){return r.zoomToSize(t)},findUnitById:function(t){return n.chain(this.unitProviders).map(function(n){return n.getUnitById(t)}).compact().first().value()}})});
define('tau/services/customize/service.customize.card.layout.factory.newlist',["jQuery","Underscore","./service.customize.card.layout.factory","tau/ui/extensions/board.plus/ui.board.plus.utils"],function(t,n,e,i){return e.extend({name:"newlist",createFactory:function(t){return n.bind(function(t,n){var e=this.findSettings(t.cardSettings,n,[this.sizes.LIST]),i=this.getSavedSetting(t.cardSettings,n);return e=this.processOrderAndEmptyFields(e,i)},this,t)},getSavedSetting:function(t,n){var e=i.getListKeyByTypes(n);return t&&t[e]&&t[e].list},_replaceShortUnitsWithLong:function(t){var e=["long","full_length"];return n.map(t,function(t){var i=t,r=/.+_short$/;if(r.test(t.id))for(var u=0;u<e.length;u++){var a=t.id.replace(/(.+)_short$/,"$1_"+e[u]),s=this.findUnitById(a);if(s){i=n.defaults({id:a,unit:s},t);break}}return i}.bind(this))},processOrderAndEmptyFields:function(t,e){var i=this.sizes.LIST,r=function(t){var e=n.countBy(t,function(t){return t.id});return n.each(t,function(t){t.rank=e[t.id],t.unit.rank&&(t.rank=t.unit.rank)}),t},u=function(t,e){var i=e[0].reverse();return n.each(t,function(t){for(var n=0;n<i.length;n++)if(t.id==i[n].id){t.rank=n;break}}),t},a=n.chain(t).map(function(t){return t[i]}).flatten().value();a=e?u(a,e):r(a);var s=n.chain(a).flatten().unique(function(t){return t.id}).value();return n.reduce(t,function(t,e,r){return t[r]=n.filter(s,function(t){return t.unit.isApplicableByTypeAndSize(r,i)}),0===t[r].length&&(t[r]=[{id:"name_unit_default",unit:this.findUnitById("name_unit_default"),isDefault:!0}]),t[r]=this._replaceShortUnitsWithLong(t[r]),t}.bind(this),{})}})});
define('tau/components/board.new.list/extensions/extension.new.list.cardLayout',["Underscore","tau/core/extension.base","tau/services/customize/service.customize.card.layout.factory.newlist"],function(e,t,r){return t.extend({"bus configurator.ready:last + boardSettings.ready":function(e,t,a){this.fire("cardLayoutFactory.ready",new r(t,a.boardSettings))}})});
define('tau/components/board.new.list/extensions/extension.new.list.selection',["Underscore","jQuery","tau/core/extension.base"],function(e,t,n){return n.extend({"bus $selectable.ready":function(e,t){t.tauSelectable("option",{triggerSelector:":checkbox",items:".i-role-nosuchcard"})}})});
define('tau/components/board.new.list/models/card.prioritizer',["Underscore"],function(e){return{isCardOnPage:function(r,n,i,t){if(!n.length)return!0;var u,a,s=e.isNumber(t.prevOrderingValue)?t.prevOrderingValue:e.first(n),d=e.isNumber(t.nextOrderingValue)?t.nextOrderingValue:e.last(n),g=r;return i?(a=g>s,u=d>g):(a=s>g,u=g>d),a=a&&t.hasPrev,u=u&&t.hasNext,!a&&!u}}});
define('tau/components/board.new.list/models/node.modification.strategies',["Underscore","tau/core/class","./card.prioritizer"],function(r,e,n){var a=e.extend({addCard:function(r,e){var n=r.hierarchy.findChildByCardId(e.id);return n?!1:(this._addCardInternal(r.nodes,e,!0),!0)},_addCardInternal:function(r,e,n){var a=r.createChildNode(e);r.items.push(a),n&&r.sortCards(),r.cardAdded.fire({nodeModel:a,card:a.card,index:r.findCardIndex(a.card)})},updateCard:function(r,e,n){var a=r.createCard(n),d=e.card,i=!!d,t=this._isOnPage(r,a.orderingValue),o=r.isPrioritizable,s=o&&t;i?t||!o?r.updateCardWith(a,d,s):r.removeCardFromView(d):s&&this._addCardInternal(r,a,!0)},_isOnPage:function(e,a){if("Rank"!=e.ordering.name)return!0;var d=r.chain(e.items).filter(function(r){return!r.hasNoValueCard()}).map(function(r){return r.card.orderingValue}).value(),i="asc"==e.ordering.direction.toLowerCase();return n.isCardOnPage(a,d,i,e.pagingModel)}}),d=a.extend({addCard:function(r,e){var n=!r.nodes;if(n)return this._increaseCount(r,e),!1;var a=r.hierarchy.findChildByCardId(e.id);if(a)return!1;var d=this._isOnPage(r.nodes,e.orderingValue);return d?(this._addCardInternal(r.nodes,e,r.nodes.isPrioritizable),!0):(this._increaseCount(r,e),!1)},_increaseCount:function(r,e){r.countsModel.increaseCount(e.type)}});return{regular:new a,comet:new d}});
define('tau/components/board.new.list/models/comet.dispatcher',["Underscore","./node.modification.strategies"],function(e,t){return{tryDispatchOperations:function(t,n){if(!n)return!1;var r=e.flatMap(n,function(n){if(n.shouldBePropagated){var r=t.hierarchy.getAllNodesAtLevel(n.level);return e.map(r,function(t){var r=e.deepClone(n);return r.path=t.hierarchy.getPath(),r})}return[n]}),a=e.groupBy(r,e.property("name"));return e.reduce(a,function(e,n,r){return this._executeOperations(t,n,r)||e},!1,this)},_executeOperations:function(e,t,n){var r={added:this._onAdded,updated:this._onUpdated,deleted:this._onDeleted,notinslice:this._onNotInSlice},a=r[n];return a?(a.call(this,e,t),!0):!1},_onAdded:function(n,r){e.each(r,function(e){var r=n.hierarchy.findNodeByPath(e.path);r&&t.comet.addCard(r,e.card)})},_onUpdated:function(n,r){var a=e.groupBy(r,e.property("level"));e.each(a,function(r,a){a=parseFloat(a);var d=e.chain(r).pluck("card").uniq(function(e){return e.id+";"+e.type}).value(),i=e.flatMap(d,function(e){return this._getNodesAtLevel(n,a,e)},this),o=e.map(r,function(e){return{dataItem:e.card,path:e.path}});n.applyCardsChanges(t.comet,i,{data:o})},this)},_onDeleted:function(t,n){e.each(n,function(e){t.deleteDescendantsByCardIdAndType(e.card.id,e.card.type)})},_onNotInSlice:function(t,n){e.each(n,function(n){var r=this._getNodesAtLevel(t,n.level,n.card);e.each(r,function(e){e.parent.nodes.deleteCard(e.card)})},this)},_getNodesAtLevel:function(t,n,r){var a=t.hierarchy.findAllDescendantNodesByCardIdAndType(r.id,r.type);return e.filter(a,function(e){return e.level===n})}}});
define('tau/components/board.new.list/extensions/extension.new.list.operations',["Underscore","jQuery","tau/core/extension.base","tau/components/board.new.list/models/comet.dispatcher"],function(e,t,o,a){return o.extend({init:function(e,t){this.model=t,this._super(e)},"bus comet.tick":function(e,t){this.fire("operation.execute",t.data)},"bus configurator.ready:last + operation.execute":function(e,t,o){t.getFeaturesService().isEnabled("newlist.operations")&&this.executeCometOperation(o)},executeCometOperation:function(t){var o=e.map(t.items,this._getOperationData.bind(this,t));this._executeOperations(o)},_getOperationData:function(t,o){var a=e.cloneDeep(o.data);return a.path=a.path||[],{name:(o.modification||t.name).toLowerCase(),path:a.path,card:a.dataItem||a.data,levelType:o.levelType,shouldBePropagated:o.shouldBePropagated,level:o.level,options:t.options,items:t.items,reason:t.reason}},_executeOperations:function(e){a.tryDispatchOperations(this.model._rootModel,e)&&this.fire("operation.execute.done")}})});
define('tau/components/board.new.list/templates/template.new.list',["tau/core/templates-factory"],function(i){var d={name:"new.list",engine:"jqote2",markup:['<div class="i-role-board-body tau-board-body" id="<%=fn.uid(\'boardBody\')%>">','<div class="i-role-grid tau-board-list-view i-role-board-body">','<div class="tau-board-list-view__inner">','<div class="i-role-list-root-container">','<div class="tau-board-list-view-resizer"></div>',"</div>","</div>",'<div class="i-role-pagingholder tau-list-pagingholder"></div>',"</div>","</div>"]};return i.register(d)});
define('tau/components/board.new.list/templates/template.new.list.subtree',["Underscore","tau/core/templates-factory"],function(e,t){var l={name:"new.list.subtree",engine:"jqote2",customFunctions:{getLevelId:function(){return e.uniqueId("tau-list-level-")},getListLevelClassName:function(e){return"tau-list-level tau-list-level-"+e.level+(0===e.items.length?" tau-list-level-empty":"")}},markup:['<div id="<%= fn.getLevelId() %>" class="<%= fn.getListLevelClassName(this) %>" data-list-parent-id="<%= this.cardId %>" data-list-level="<%= this.level %>" data-list-level-key="<%= this.getLevelKey() %>">','<div class="i-role-headerholder textSelectionDisabled"></div>','<div class="i-role-cardsholder"></div>',"</div>"]};return t.register(l)});
define('tau/ui/extensions/board.plus/ui.board.plus.dom.utils',["Underscore","jQuery"],function(r,e){return{createDragNDropPlaceholderContent:function(r){var e;return e=r===!0?"Prioritization on":r===!1?"Prioritization off":"shift"===r?'Hold <span class="shiftButton"></span> to prioritize':""},animated:function(r,t){var n=e.Deferred();return r.animateWithCss({cssClassName:t,complete:n.resolve.bind(null,r)}),n.promise()},redirectEvent:function(r,e){return e.target=null,r.trigger(e),!1}}});
define('tau/components/board.new.list/templates/template.new.list.header',["tau/core/templates-factory"],function(e){var t={name:"new.list.header",engine:"jqote2",markup:["<div class=\"tau-list-caption <%= fn.cond(!this.enable, 'tau-list-caption-disabled') %>\">",'<div class="tau-elems-table tau-elems-table-level-<%= this.levelKey %>">','<div class="tau-drag-handler-cell"></div>',"<% if (this.renderCollapser) { %>",'<div class="tau-list-collapser-cell"><button class="i-role-header-collapser tau-v-collapser tau-v-header-collapser"></button></div>',"<% } %>","<% _.each(this.layout, function(item, index) { %>",'<%= fn.sub(item.unit.getTemplateName("header"), _.extend({unit: item.unit, first: !index, ordering: this.ordering, renderSortingHeaders:this.renderSortingHeaders}, this)) %>',"<% }, this); %>","</div>","</div>"]};return e.register(t)});
define('tau/ui/extensions/board.plus/ui.board.plus.cards-custom-functions',["Underscore","tau/ui/extensions/board.plus/ui.board.plus.utils"],function(t,e){function a(t){return function(e,a){return t==e?void 0:a}}return{_:t,generateDataAttributes:function(t){var n=t.data.cardData,i={id:t.id,"entity-type":n.type.toLowerCase(),"ordering-value":t.orderingValue,"entity-id":n.id,"card-data":JSON.stringify(n),"data-item":JSON.stringify(t,a("data"))};return t._id&&(i._id=t._id),e.generateElementData(i)},generateCardId:t.bind(e.generateCardId,e),generateFinalStateClass:function(t){return t.isFinal?"tau-card-v2_final-state":""}}});
define('tau/ui/templates/board.plus/customized/ui.template.boardplus.card.section.customized',["Underscore","tau/core/templates-factory","tau/ui/extensions/board.plus/ui.board.plus.utils"],function(t,i,a){var n={name:"boardplus.card.section.customized",engine:"jqote2",customFunctions:{getSectionAdditionalClass:a.getClassForCustomizeSection,isLazy:function(t,i){return t===!1?!1:i.unit.lazy},getData:function(t,i,a){return i.unit.lazy?t===!1?a[i.unit.id]:i.unit.sampleData:a[i.unit.id]}},markup:["<% var data = this.data, configurator = this.configurator; %>",'<div class="tau-card-v2__section <%=fn.getSectionAdditionalClass(this.section)%>">',"<%this.section.forEach(function(item){%>",'<%= fn.sub(item.unit.getTemplateName("card"), [{settings:{ metaData:{ alignment:item.alignment } }, data:data[item.unit.id], configurator:configurator}])%>',"<%});%>","</div>"],dependencies:[]};return i.register(n)});
define('tau/components/board.new.list/templates/template.new.list.card.customized',["Underscore","tau/core/templates-factory","tau/ui/extensions/board.plus/ui.board.plus.utils","tau/ui/extensions/board.plus/ui.board.plus.cards-custom-functions","tau/ui/templates/board.plus/customized/ui.template.boardplus.card.section.customized"],function(a,t,e,r){var i=a.extend({},r,{generateCardClass:function(a,t){return["i-role-card","tau-list-entity",this.generateFinalStateClass(t),this.generateListClass(a,t)].join(" ")},generateListClass:function(a,t){var r="tau-list-"+t.type.toLowerCase(),i=a.data.empty;return i&&(r+=" tau-axis-card-no-value"),e.isSupportedCardForView(t.type.toLowerCase())||(r+=" tau-axis-card-no-view"),r},generateHandlerClass:function(a){var t=a.isNoValueCard();return"tau-drag-handler tau-drag-handler-level-"+a.levelKey+(t?" tau-drag-handler-disabled":" tau-drag-handler-enabled")},generateFinalStateClass:function(a){return a.isFinal?this.getFinalStateClass():""},getFinalStateClass:function(){return"tau-list-entity_final-state"},generateCardCollapserClass:function(a){var t="tau-list-collapser-cell";return a.isCollapserEnabled||(t+=" disabled"),t}}),s={engine:"jqote2",customFunctions:i,name:"new.list.card.customized",markup:["<% var dataItem = this.dataItem, configurator = this.configurator; %>","<% var cardData = dataItem.data.cardData || { id: dataItem.id, type: dataItem.type }; %>","<% dataItem.data.cardData = cardData; %>",'<div role="card" id="<%= fn.generateCardId(cardData) %>" class="<%= fn.generateCardClass(dataItem, cardData) %>" <%= fn.generateDataAttributes(dataItem) %>>','<div class="tau-list-line">','<div class="tau-elems-table tau-elems-table-level-<%= dataItem.levelKey %>">','<div class="tau-drag-handler-cell i-role-dragndrop-handler">','<div class="<%= fn.generateHandlerClass(dataItem) %>"></div>',"</div>","<% if (dataItem.renderCollapser) { %>",'<div class="<%= fn.generateCardCollapserClass(dataItem) %>"><button class="i-role-card-collapser tau-v-collapser"></button></div>',"<% } %>","<% var type = cardData.type.toLowerCase(); %>","<% _.each(this.layout, function(item, index) { %>","<% var data = dataItem.data[item.unit.id]; %>","<% if (dataItem.data.empty) { %>","<% if (!item.unit.isNameUnit) {","<% return; %>","<% } %>","<% data = dataItem.data; %>","<% } %>","<% var itemData = {type: type, settings: {width: item.width}, data: data, configurator: configurator, first: !index, unit: item}; %>",'<%= fn.sub(item.unit.getTemplateName("list"), [itemData]) %>',"<% }, this); %>","</div>","</div>","</div>"]};return t.register(s)});
define('tau/ui/templates/board.plus/ui.template.board.plus.emptyMessage',["tau/core/templates-factory"],function(t){return t.register({name:"board.plus.emptyMessage",engine:"jqote2",markup:['<% var isEmpty = this.type == "isEmpty"; %>','<div class="tau-no-data-in-slice <% if (!isEmpty) { %>tau-notconfigured<% } %> i-role-empty-message">','<div class="tau-empty-message">','<h2 class="<% if (isEmpty) { %>tau-no-data_empty<% } %> i-role-empty-message-text">',"<%! this.message %>","</h2>","<% if (!isEmpty) { %>",'<div class="tau-col">','<div class="tau-txt">Select the cards you want<br />to see in the View</div>','<div class="tau-step-pic tau-step1-pic"></div>',"</div>",'<div class="tau-col">','<div class="tau-txt">Set horizontal<br />and vertical lanes</div>','<div class="tau-step-pic tau-step2-pic"></div>',"</div>",'<div class="tau-col">','<div class="tau-txt">Use filters</div>','<div class="tau-step-pic tau-step3-pic"></div>',"</div>","<% } %>","</div>","</div>"]})});
define('tau/components/board.new.list/views/editors/editor.utils',[],function(){return{toggleElementBusyIndicator:function(e,n){return e.toggleClass("tau-elems-cell_unit-busy",n)}}});
define('tau/components/board.new.list/views/editors/view.new.list.editor',["Underscore","jQuery","tau/core/class","tau/components/board.new.list/views/editors/editor.utils"],function(t,i,n,e){return n.extend({init:function(i){this._$el=i,this.unitClicked=t.Callbacks()},startListen:function(){this._$el.on("click.newlist-editor-view",".tau-elems-cell_unit-editable:not(.tau-elems-cell_unit-busy)",function(t){var n=i(t.currentTarget),e=n.closest(".i-role-card"),a=n.find(".tau-board-unit");this.unitClicked.fire({$card:e,$unit:n,$unitData:a,cardId:e.data("id").toString(),unitId:a.data("id").toString()}),t.stopPropagation()}.bind(this))},toggleUnitBusyIndicator:function(t,i){e.toggleElementBusyIndicator(t,i)}})});
define('tau/components/board.new.list/views/units/unit',["Underscore","jQuery","tau/core/class"],function(t,e,i){var n=e.ui.ie&&function(t){t=t.toLowerCase();var e=/(msie) ([\w.]+)/.exec(t)||[],i=parseInt(e[2])||0;return 11>i}(navigator.userAgent);return i.extend({MIN_UNIT_WIDTH:90,MAX_UNIT_WIDTH:600,init:function(t,i,n){var h=e(t).data()||{};this.unitId=h.unitId,this.minWidth=h.minWidth||0,this.maxWidth=h.maxWidth||Number.MAX_VALUE,this.className=".tau-list-"+this.unitId+"-cell",this.layoutKey=i,this.$items=n.find(".i-role-card "+this.generateCssSelector()),this.hasItems=this.$items.length>0,this.headerLayoutItem=t},_getElementWidth:n?function(t){var e=Math.ceil(t.getBoundingClientRect().width||0),i=t.scrollWidth;return Math.min(e,i+1)}:function(t){var e=Math.ceil(t.getBoundingClientRect().width||0);return e},generateCssSelector:function(){return".tau-elems-table-level-"+this.layoutKey+" "+this.className},getHeaderWidth:function(){return this._getElementWidth(this.headerLayoutItem)},getContentWidth:function(){var e=this.hasItems?t.map(this.$items,this._getElementWidth,this):[0];return Math.max.apply(Math,e)},calculateWidth:function(){var t=this.getHeaderWidth(),e=this.getContentWidth(),i=Math.max(t,e,this.minWidth,this.MIN_UNIT_WIDTH);return i=Math.min(i,this.maxWidth,this.MAX_UNIT_WIDTH),{selector:this.generateCssSelector(),hasItems:this.hasItems,header:t,content:e,calculated:i}}})});
define('tau/components/board.new.list/views/units/nameUnit',["tau/components/board.new.list/views/units/unit"],function(t){var e=t.extend({MIN_UNIT_WIDTH:300,LEVEL_INDENTATION:25,COLLAPSER_WIDTH:15,init:function(t,e,n){this._super(t,e,n),this.$container=n},setupWidth:function(t,e){var n,i=this.getHeaderWidth(),r=this.getContentWidth(),s=Math.max(this.minWidth,this.MIN_UNIT_WIDTH,i);if(s>r)n=s;else{var a=t.width(),o=a-e;n=o>r?r:Math.max(o,s)}return this.setupForcedWidth(n)},setupForcedWidth:function(t){return{selector:this.generateCssSelector(),calculated:this.adjustNameColumnWidthForLevel(t)}},adjustNameColumnWidthForLevel:function(t){return t-e.getLevelIndentation(this.layoutKey,this.$container)}});return e.getLevelIndentation=function(t,n){if("0"===t)return 0;var i=n.find(".tau-list-caption .tau-elems-table-level-"+t+" .tau-list-collapser-cell"),r=i.length?0:e.prototype.COLLAPSER_WIDTH,s=t.indexOf("_"),a=s>0?t.substring(0,s):t,o=parseInt(a,10);return o*e.prototype.LEVEL_INDENTATION-r},e});
define('tau/components/board.new.list/views/view.new.list.tree.quickAdd',["Underscore","jQuery","tau/core/class"],function(i,d,t){return t.extend({init:function(d,t){this.treeView=d,this.quickAddModel=t,this.showQuickAddClicked=i.Callbacks(),this.quickAddModel.dataLoaded.add(this.renderPossibleActions,this),this.renderPossibleActions()},renderPossibleActions:function(){if(this.quickAddModel.data){var t=this.treeView.findHeaderHolder(),e=t.find(".i-role-quick-add-holder");e.find("button.tau-list-quick-add").remove();var s=d('<button class="tau-list-quick-add tau-btn tau-success"></button>');e.append(s),s.on("click",this._onShowQuickAddClicked.bind(this,{target:s})),t.on("dblclick",this._onShowQuickAddClicked.bind(this,{target:s}));var o=s.closest(".tau-board-list-view__inner");o.on("scroll",i.debounce(function(){s.data("ui-tauBubble")&&s.tauBubble("adjustPosition")},200))}},_onShowQuickAddClicked:function(i){i.target.parent().hasClass("tau-quick-add_expand")||this.showQuickAddClicked.fire(i)},destroy:function(){this.quickAddModel.dataLoaded.remove(this)}})});
define('tau/components/board.new.list/views/view.new.list.tree.counts',["Underscore","jQuery","tau/core/class","tau/core/termProcessor"],function(e,t,r,n){return r.extend({init:function(e,t,r){this.treeView=e,this.treeModel=r,this.countsModel=t,this.termProcessor=new n,this.treeModel.applyAndObserve(function(e){e.countsModel.dataLoaded.add(this.refreshCount.bind(this,e.countsModel))}.bind(this)),this.treeModel.cardUpdated.add(this._onCardUpdated.bind(this))},_onCardUpdated:function(e){var t=this.treeModel.hierarchy.findChildByCardId(e.card.id);this.refreshCount(t.countsModel)},_getTitle:function(t){var r;return t.data&&t.data.types&&(r=e.map(t.data.types,function(e){var t=this._getTypePluralizedName(e.type);return(""===t?e.typeName:t)+": "+e.count},this).join(" / ")),r},refreshCount:function(e){var t=this._getTitle(e),r=e.getAllCount(),n=this._getCounter(e.treeModel.card);n.text(r),n[0].title=t,n.toggleClass("tau-counter-hidden",!r)},_getCounter:function(e){var t=this.treeView.findChildCardById(e.id);return t.find(".tau-counter").first()},_getTypePluralizedName:function(e){return this.termProcessor.getTerm(e,"names")},destroy:function(){}})});
define('tau/components/board.new.list/views/view.new.list.tree',["Underscore","jQuery","tau/core/class","tau/ui/extensions/board.plus/ui.board.plus.dom.utils","tau/ui/extensions/board.plus/ui.board.plus.utils","tau/components/board.new.list/templates/template.new.list.header","tau/components/board.new.list/templates/template.new.list.card.customized","tau/components/board.new.list/templates/template.new.list.subtree","tau/ui/templates/board.plus/ui.template.board.plus.emptyMessage","./editors/view.new.list.editor","tau/components/board.new.list/views/units/unit","tau/components/board.new.list/views/units/nameUnit","tau/components/board.new.list/views/view.new.list.tree.quickAdd","tau/components/board.new.list/views/view.new.list.tree.counts"],function(e,t,i,n,r,a,s,d,o,l,u,h,c,p){return i.extend({_cardTypes:[],init:function(t,i,n,r,a){this.skeleton=r,this.configurator=r.configurator,this.eventAggregator=r.eventAggregator,this.parentView=n,this.treeModel=t,this.level=this.treeModel.level,this.$el=i,this.$treeContainer=this.$el.find(".i-role-cardsholder").first(),this.columnWidthService=a,this.expansionStateToggled=e.Callbacks(),this.collapseAllClicked=e.Callbacks(),this.openCardDetailsClicked=e.Callbacks(),this.subViews=[]},renderTree:function(){return this._renderTreeNode(this.treeModel).then(this._updateEmptyLevelState.bind(this))},_renderTreeNode:function(e){if(this._cardTypes=e.getCardTypes(),!e.items.length&&!this._cardTypes.length)return t.Deferred().resolve().promise();this._attachCardBehaviors();var i=this.$treeContainer;return t.when(this.renderHeader()).then(this.appendHeader.bind(this)).then(this.updateHeaderExpansionState.bind(this)).then(this.renderCards.bind(this,e.items)).then(this.insertCards.bind(this,i)).promise()},getListLayout:function(){var i=e.pluck(this._cardTypes,"typeId");return t.when(this.skeleton.cardLayoutFactory.getLayoutFactory()).then(this._createLayout.bind(this,i))},_createLayout:function(t,i){var n=e.chain(i(t)).toArray().flatten().uniq(e.property("id")).value();return this.configurator.getFeaturesService().isEnabled("board.customize.list")?r.orderListUnits(n):n},renderHeader:function(){return t.when(this.getListLayout()).then(function(t){var i=e.extend(r.getCardRenderData({},t,this.configurator),{cardTypes:this._cardTypes,enable:!0,level:this.level,levelKey:this.treeModel.getLevelKey(),renderSortingHeaders:!this.treeModel.isInnerCollectionsLevel(),renderCollapser:this.treeModel.canExpandCard(),isCollapserEnabled:!0,parentEntityType:this.treeModel.hierarchyMetaInfo.parentEntityType,ordering:this.treeModel.hierarchyMetaInfo.ordering});return a.render(i)}.bind(this))},renderCards:function(i){return t.when(this.getListLayout()).then(function(n){return t.when.all(e.map(i,function(e){return this.renderCard(e.card,n)},this))}.bind(this)).then(function(e){return e.join("")})},renderCard:function(t,i){var n=e.extend({},t,{levelKey:this.treeModel.getLevelKey(),renderCollapser:this.treeModel.canExpandCard(),isCollapserEnabled:this.treeModel.canExpandCard(t.type)}),a=this.configurator.getTemplateFactory().get(s.name);return a.bindPure({},r.getCardRenderData(n,i,this.configurator))},_updateEmptyLevelState:function(){this.$el.toggleClass("tau-list-level-empty",!this.treeModel.items.length)},findHeaderHolder:function(){var e=".i-role-headerholder";return this.$treeContainer.siblings(e)},_findHeaderCollapser:function(){return this.findHeaderHolder().find(".i-role-header-collapser")},appendHeader:function(e){var t=this.findHeaderHolder();t.append(e)},insertCards:function(e,t){e.append(t)},_attachCardBehaviors:function(){this.$el.off("click.newlist"),this.$el.on("click.newlist",".i-role-card-collapser",function(e){var i=t(e.target),n=i.closest(".tau-list-entity"),r=n.data("id").toString();this.expansionStateToggled.fire(r),e.stopPropagation()}.bind(this)),this.$el.on("click.newlist",".i-role-header-collapser",function(e){this.collapseAllClicked.fire(),e.stopPropagation()}.bind(this)),this.$treeContainer.off("click.newlist"),this.$treeContainer.on("click.newlist",".tau-board-list-view_details-view-trigger",function(e){var i=t(e.target),n=i.closest(".tau-list-entity");this.openCardDetailsClicked.fire({cardData:n.data(),$card:n}),e.stopPropagation()}.bind(this))},appendNodes:function(e){return this.renderCards(e).then(function(e){return this.$treeContainer.append(e)}.bind(this))},updateHeaderExpansionState:function(){var t=e.any(this.treeModel.items,function(e){return e.getIsExpanded()});this._findHeaderCollapser().toggleClass("tau-v-collapser-expanded",t)},calculateColumnWidths:function(){this.skeleton.calculateColumnWidthsForLevel(this.treeModel.level)},createTreeView:function(e){var t=d.render(e),i=this._getParentNodeByCardId(e.cardId);i.after(t);var n=this._getViewConstructor(),r=new n(e,t,this,this.skeleton,this.columnWidthService);return this.subViews.push(r),this.skeleton.treeViewCreated.fire(r),r},findView:function(t){if(0===t.length)return this;var i=e.find(this.subViews,function(e){return e.treeModel.cardId===t[0]});return i?i.findView(e.rest(t)):null},_getViewConstructor:function(){return null},setExpandedStateForCardId:function(e){var t=this._getParentNodeByCardId(e);t.addClass("tau-list-entity-open")},removeChildTreeNodeView:function(t){var i=this._getParentNodeByCardId(t);i.removeClass("tau-list-entity-open");var n='div[data-list-parent-id="'+t+'"]',r=this.$el.find(n);r.remove();var a=e.findIndex(this.subViews,function(e){return e.treeModel.cardId===t});a>=0&&(this.subViews[a].destroy(),this.subViews.splice(a,1))},_getParentNodeByCardId:function(e){var t='> .tau-list-entity[data-id="'+e+'"]';return this.$treeContainer.find(t).eq(0)},updateCardUnit:function(t,i,n){var r=this._findUnit(t.id,i);if(e.contains(["orderingValue","cardData"],i))return void r.$card.data(i,n);var a=r.$cell,s=this.skeleton.cardLayoutFactory.findUnitById(i);if(a.length&&s){var d=this.configurator.getTemplateFactory().get(s.getTemplateName("list")).bind({},{type:t.type.toLowerCase(),configurator:this.configurator,settings:{},data:n,unit:s,first:a.is(":has(.i-role-name)")});d.html()!=a.html()&&(a.children().remove(),a.append(d.children())),a.toggleClass("tau-board-unit_updating",!1)}},_findUnit:function(e,t){var i=this.findChildCardById(e),n=i.find(".tau-board-unit[data-id="+t+"]"),r=n.closest(".tau-elems-cell");return{$card:i,$unit:n,$cell:r}},moveCard:function(e,t){var i=this.findChildCardById(e.id);i.detach();var r=null!==t;r&&this.insertCardByIndex(this.$treeContainer,i,t),n.animated(i,"tau-operation_card_updated")},removeCardsSilent:function(t){e.each(t,function(e){this.removeCard(e.card,!0)},this)},removeCard:function(e,i){var r=this.findChildCardById(e.id);return r.removeClass("i-role-card"),t.when(i?!0:n.animated(r,"tau-operation_card_deleted")).then(function(){r.remove(),this.removeChildTreeNodeView(e.id)}.bind(this)).then(this._updateEmptyLevelState.bind(this))},addCard:function(e,i,r){return t.when(this.getListLayout()).then(this.renderCard.bind(this,i)).then(function(e){var i=t(e);this.insertCardByIndex(this.$treeContainer,i,r),n.animated(i,"tau-operation_card_added")}.bind(this)).then(this._updateEmptyLevelState.bind(this))},insertCardByIndex:function(e,t,i){if(i>=0){var n=e.children(".i-role-card").eq(i);if(n.length)return void n.before(t)}e.append(t)},createEditorView:function(){return new l(this.$treeContainer)},createCountsView:function(e){var t=this._getCountsViewConstructor();this.countsView=new t(this,e,this.treeModel)},createQuickAddView:function(e){this.quickAddView=new c(this,e)},_getCountsViewConstructor:function(){return p},toggleNodeExpansionProgress:function(e,t){var i=this.findChildCardById(e),n=i.find(".i-role-card-collapser");n.toggleClass("tau-loading",t)},highlightCard:function(e){var t=this.findChildCardById(e);n.animated(t,"tau-operation_card_added")},findChildCardById:function(e){return this.$treeContainer.children('.i-role-card[data-id="'+e+'"]')},updateCardFinalState:function(e,t){var i=this.findChildCardById(e);i.toggleClass(s.get().config.customFunctions.getFinalStateClass(),!!t)},destroy:function(){this.quickAddView&&this.quickAddView.destroy(),this.countsView&&this.countsView.destroy()}})});
define('tau/components/board.new.list/views/view.new.list.paging.node',["Underscore","jQuery","tau/core/class"],function(e,i,n){return n.extend({init:function(i){this._$container=i,this.nextPageClicked=e.Callbacks(),this.prevPageClicked=e.Callbacks(),this.pageSizeChanged=e.Callbacks()},render:function(n){if(n.pagingModel.hasNext){var a=i('<div class="tau-list-more"><div class="tau-list-more-inner"><a>show more</a></div></div>');a.appendTo(this._$container),a.on("click",".tau-list-more-inner a",e.bind(function(){this.nextPageClicked.fire({pagingType:"showMore",direction:"next"})},this))}},showProgress:function(){var e=i('<div class="tau-loader"></div>');e.appendTo(this._$container.children(".tau-list-more").find(".tau-list-more-inner"))},update:function(e){var i=this._$container.children(".tau-list-more");e.pagingModel.hasNext?i.find(".tau-loader").remove():i.remove()}})});
define('tau/components/board.new.list/views/view.new.list.tree.node',["Underscore","jQuery","tau/components/board.new.list/views/view.new.list.tree","tau/components/board.new.list/views/view.new.list.paging.node"],function(e,n,t,i){var r=t.extend({createPagingView:function(){return new i(this.$el)},_getViewConstructor:function(){return r}});return r});
define('tau/components/board.new.list/templates/template.new.list.paging',["tau/core/templates-factory"],function(a){var i={name:"new.list.paging",engine:"jqote2",markup:["<% if (this.isEnabled) { %>",'<div class="tau-list-paging">','<div class="tau-pages-navigator">',"<% if (this.hasPrev) { %>",'<span class="i-role-cell-paging-link i-role-cell-paging-first-link tau-first" data-direction="first"></span>','<span class="i-role-cell-paging-link i-role-cell-paging-prev-link tau-prev" data-direction="prev">Prev</span>',"<% } %>",'<span class="tau-paging-info">','<b class="i-role-current-page-counts"><%= this.getFrom() %> – <%= this.getTo() %></b>','<b class="i-role-all-root-count">',"<% if (this.totalCount) { %>"," of <%= this.totalCount %>","<% } %>","</b>","</span>","<% if (this.hasNext) { %>",'<span class="i-role-cell-paging-link i-role-cell-paging-more-link tau-next" data-direction="next">Next</span>','<span class="i-role-cell-paging-link i-role-cell-paging-last-link tau-last" data-direction="last"></span>',"<% } %>","</div>",'<div class="tau-page-items">','<span class="tau-txt">Entities per page</span>',"<% _.each(this.availablePageSizes, function(v) { %>",'<span class="i-role-option-onpage tau-count <%= fn.cond(v == this.pageSize, \'tau-active\') %>" data-value="<%= v %>">',"<%= v %>","</span>","<% }, this); %>","</div>","</div>","<% } %>"]};return a.register(i)});
define('tau/components/board.new.list/views/view.new.list.paging.root',["Underscore","jQuery","tau/core/class","tau/components/board.new.list/templates/template.new.list.paging"],function(e,i,t,a){return t.extend({init:function(i){this._$container=i,this.nextPageClicked=e.Callbacks(),this.prevPageClicked=e.Callbacks(),this.lastPageClicked=e.Callbacks(),this.firstPageClicked=e.Callbacks(),this.pageSizeChanged=e.Callbacks()},render:function(t){var n=a.render(t.pagingModel);n.on("click",".i-role-cell-paging-link",e.bind(function(e){var t,a=i(e.target).data("direction");"prev"===a?t=this.prevPageClicked:"next"===a?t=this.nextPageClicked:"last"===a?t=this.lastPageClicked:"first"===a&&(t=this.firstPageClicked),t.fire({pagingType:"root paging",direction:a})},this)),n.on("click",".i-role-option-onpage",e.bind(function(e){var t=i(e.currentTarget).data("value");this.pageSizeChanged.fire(t)},this)),this._$container.html(n)},showProgress:function(){},update:function(e){this.render(e)}})});
define('tau/components/board.new.list/views/view.new.list.tree.root',["Underscore","jQuery","tau/components/board.new.list/views/view.new.list.tree","tau/components/board.new.list/views/view.new.list.tree.node","tau/components/board.new.list/views/view.new.list.paging.root"],function(e,n,t,i,o){return t.extend({createPagingView:function(){return new o(this.skeleton.findRootPagingContainer())},_getViewConstructor:function(){return i}})});
define('tau/utils/utils.debug',["Underscore"],function(n){function o(o){return window.appIsInDebugMode?n.isFunction(o)?!o():!o:!1}function r(n,o){var r=Array.prototype.slice.call(o,1);Function.prototype.apply.call(n||console.log,console,r)}return{assertWarn:function(n){o(n)&&r(console.warn,arguments)},assertError:function(n){o(n)&&r(console.error,arguments)}}});
define('tau/components/board.new.list/views/columnWidthService',["Underscore","jQuery","tau/core/class","tau/utils/utils.debug","tau/components/board.new.list/views/units/unit","tau/components/board.new.list/views/units/nameUnit"],function(t,e,n,i,s,r){return n.extend({COLUMN_WIDTHS_STYLE_ID:"-list-columns-level-",SETTING_NAME:"listUserSettings",init:function(t){this.resetCache(),this.boardSettings=t},resetCache:function(){this.layout={items:{}}},setElementScope:function(t){this.$boardBody=t,this.boardBodyId=t.attr("id"),i.assertError(!!this.boardBodyId,"board body id should be set")},calculateColumnWidths:function(n,i){var s=taus.start("statistics_newlist_columnWidths",this._createStatsDataFromRequests(n)),r=t.chain(n).groupBy(function(t){return t.levelKey}).map(function(n,s){var r=e(t.map(n,function(t){return t.levelContainer})),a="0"===s?this._calculateRootLevel(r):this._calculateNestedLevel(s,r,i);return e.when(a).then(function(t){return{levelKey:s,cssRules:t}})}.bind(this)).value();return e.when.all(r).then(function(e){var n=t.filter(e,function(t){return!!t.cssRules});this._createColumnWidthStyles(n),s.stop()}.bind(this))},_calculateRootLevel:function(t){return e.when(this.layout.name?this.layout:this._getColumnSizeSettings()).then(function(e){this.layout.name=e.name,this._calculateUnitWidths("0",t);var n=this._generateCssRules("0"),i=this._getForLevel("0");return this.layout.name=i&&i.name&&i.name.calculated,n}.bind(this))},_calculateNestedLevel:function(t,e,n){return this._shouldSkipCalculationFor(t,e,n)?void 0:(this._calculateUnitWidths(t,e),this._generateCssRules(t))},_calculateUnitWidths:function(e,n){var i=".tau-elems-table-level-"+e,a=n.eq(0).find(".i-role-headerholder "+i);if(!a.length)return console.warn("_calculateUnitWidths: empty level "+e),void this._setForLevel(e,null);this._removeColumnWidthsStyle(e),this.layout.dragHandler=this.layout.dragHandler||a.find(".tau-drag-handler-cell").width();var l=this.layout.dragHandler,u={},o=a.find(".tau-elems-cell"),h=t.tail(o);t.each(h,function(t){var i=new s(t,e,n),r=i.calculateWidth();u[i.unitId]=r,u.hasItems=u.hasItems||i.hasItems,l+=r.calculated},this);var c=new r(o[0],e,n);if(this.layout.name)u.name=c.setupForcedWidth(this.layout.name);else{var d=this.$boardBody.find(".tau-board-list-view__inner");u.name=c.setupWidth(d,l)}this._setForLevel(e,u)},_generateCssRule:function(t){return"#"+this.boardBodyId+" "+t.selector+" { width: "+t.calculated+"px; }"},_generateCssRules:function(e){var n=[],i=this._getForLevel(e);return i?(t.each(i,function(t,e){t.hasItems&&"name"!==e&&n.push(this._generateCssRule(t))},this),n.push(this._generateCssRule(i.name)),n):(console.warn("_generateCssRules: empty level "+e),n)},resize:function(){},setNameWidth:function(e,n){return this._setColumnSizeSettings({name:e}).then(function(){this.layout.name=e;var i=n.closest(".i-role-board-body");t.each(this.layout.items,function(t,e){var n=new r(null,e,i);t.name.calculated=n.setupForcedWidth(this.layout.name).calculated;var s=this._generateCssRules(e);this._createColumnWidthStyles([{levelKey:e,cssRules:s}])},this)}.bind(this))},_getColumnSizeSettings:function(){return this._getListUserSettings().then(function(t){return t.columnSizes||{}}.bind(this))},_setColumnSizeSettings:function(t){return this._setListUserSettings({columnSizes:t})},_getListUserSettings:function(){return this.boardSettings.get([this.SETTING_NAME]).then(function(t){return t[this.SETTING_NAME]||{}}.bind(this))},_setListUserSettings:function(e){return this._getListUserSettings().then(function(n){t.extend(n,e);var i={};return i[this.SETTING_NAME]=n,i}.bind(this)).then(function(t){return this.boardSettings.set({set:t})}.bind(this))},_getForLevel:function(t){return this.layout.items[t]},_setForLevel:function(t,e){this.layout.items[t]=e},_createColumnWidthStyles:function(n){t.each(n,function(t){this._removeColumnWidthsStyle(t.levelKey)},this);var i=t.map(n,function(t){var e=this._createColumnWidthStyleId(t.levelKey);return'<style id="'+e+'">'+t.cssRules.join("\n")+"</style>"},this).join("\n");e(i).appendTo(this.$boardBody)},_removeColumnWidthsStyle:function(t){e("#"+this._createColumnWidthStyleId(t)).remove()},_createColumnWidthStyleId:function(t){return this.boardBodyId+this.COLUMN_WIDTHS_STYLE_ID+t},_shouldSkipCalculationFor:function(t,e,n){var i=this._getForLevel(t);if(!i)return!1;if(n){if(i.hasItems)return!0;if(i.hasItems===!1&&!e.find(".i-role-card:first-child").length)return!0}return!1},_createStatsDataFromRequests:function(e){return t.chain(e).groupBy(function(t){return t.levelKey}).reduce(function(t,e,n){return t[n]=e.length,t},{}).value()}})});
define('tau/components/board.new.list/views/view.new.list.skeleton',["Underscore","jQuery","tau/core/class","tau/components/board.new.list/templates/template.new.list","tau/components/board.new.list/templates/template.new.list.subtree","tau/components/board.new.list/views/view.new.list.tree.root","tau/ui/templates/board.plus/ui.template.board.plus.emptyMessage","tau/components/board.new.list/views/columnWidthService","tau/ui/behaviour/common/ui.behaviour.progressIndicator"],function(e,t,i,n,o,r,s,a,l){"use strict";return i.extend({$el:null,_$currentRoot:t(),columnWidthService:null,cardLayoutFactory:null,_rootView:null,_eventNamespace:".newlist",init:function(t,i){this.configurator=t,this.eventAggregator=i,this.treeViewCreated=e.Callbacks()},setCardLayoutFactory:function(e){this.cardLayoutFactory=e},buildSkeleton:function(i,o,r){return this._boardSettings=r,t.when(n.render(o)).then(e.bind(function(e){return this.columnWidthService=new a(r),this.eventAggregator.skeletonBuilt.fire(e),this._setElement(i,e),e},this)).promise()},_setElement:function(e,t){this.$el&&this.$el.replaceWith(t),this.$el=t},createTreeView:function(i){return t(this.configurator.getWindow()).off("resize"+this._eventNamespace).on("resize"+this._eventNamespace,e.throttle(this.resize.bind(this),250)),this._$currentRoot.remove(),this._$currentRoot=o.render(i),this.columnWidthService.setElementScope(this._$currentRoot),i.cardAdded.add(this.updateEmptyListMessage,this),i.cardDeleted.add(this.updateEmptyListMessage,this),this._rootView=new r(i,this._$currentRoot,null,this,this.columnWidthService),this.treeViewCreated.fire(this._rootView),this._rootView},appendRoot:function(){var e=this.$el.find(".i-role-list-root-container");e.css("opacity",0),e.append(this._$currentRoot),this.calculateColumnWidths(),e.css("opacity",1)},findBoardContainer:function(){return this.$el.find(".tau-board-list-view__inner")},findRootPagingContainer:function(){return this.$el.find(".i-role-pagingholder").eq(0)},findView:function(e){return this._rootView.findView(e)},getAllTreeViews:function(){if(!this._rootView)return[];var t=function(i){return(i.subViews||[]).concat(e.flatMap(i.subViews,t))};return[this._rootView].concat(t(this._rootView))},showNotConfiguredMessage:function(){var e={message:"Set up your list View",type:"notConfigured"},i=s.render(e);this.$el.prepend(i),this.eventAggregator.treeRendered.fire(t())},updateEmptyListMessage:function(){var e=this._rootView.treeModel,t=this.$el.find(".i-role-board-body");if(e.items&&e.items.length)t.find(".i-role-empty-message").remove();else{var i={message:"Yikes...! Nothing in there :-|",type:"isEmpty"};s.render(i).appendTo(t)}this.eventAggregator.hasDataInSliceChanged.fire(e)},calculateColumnWidths:function(){this.columnWidthService.resetCache(),t.when(this._calculateColumnWidthsFor(".tau-list-level",!1)).then(function(){taus.track({action:"name column width calculate",width:this.columnWidthService.layout.name,tags:["newlist"]})}.bind(this))},calculateColumnWidthsForLevel:function(e,t){this.calculateColumnWidthsForMultipleLevels([e],t)},calculateColumnWidthsForMultipleLevels:function(t,i){var n=e.map(t,function(e){return".tau-list-level-"+e}).join(", ");this._calculateColumnWidthsFor(n,i)},_calculateColumnWidthsFor:function(i,n){var o=e.map(this.$el.find(i),function(e){var i=t(e);return{levelKey:i.data("listLevelKey"),levelContainer:e}});return this.columnWidthService.calculateColumnWidths(o,n)},toggleProgress:function(e){var t=l.get(this.$el);e?t.show():t.hide(),this.$el.find(".i-role-board-body").css("opacity",e?.5:1)},resize:function(){this.columnWidthService.resize(this.$el)},cleanup:function(){this._rootView=null,this.treeViewCreated.empty(),t(this.configurator.getWindow()).off(this._eventNamespace)},destroy:function(){this.cleanup()}})});
define('tau/components/board.new.list/bus.new.list.event.aggregator',["Underscore","tau/core/class"],function(e,a){return a.extend({init:function(){this.acidRetrieved=e.Callbacks(),this.boardSettingsRetrieved=e.Callbacks(),this.definitionReady=e.Callbacks(),this.sliceServiceCreated=e.Callbacks(),this.sliceInfoRetrieved=e.Callbacks(),this.skeletonBuilt=e.Callbacks(),this.cellModelLoaded=e.Callbacks(),this.hasDataInSliceChanged=e.Callbacks(),this.treeRendered=e.Callbacks(),this.cardRemoved=e.Callbacks(),this.itemAddedToContext=e.Callbacks(),this.entityDetailsViewRequested=e.Callbacks()}})});
define('tau/components/component.base.new.list',["tau/models/board.plus/model.board.slice.comet","tau/components/board.new.list/models/model.new.list","tau/core/extension.base","tau/components/board.new.list/extensions/extension.new.list.cardLayout","tau/components/board.new.list/extensions/extension.new.list.selection","tau/components/board.new.list/extensions/extension.new.list.operations","tau/components/board.new.list/views/view.new.list.skeleton","tau/components/board.new.list/bus.new.list.event.aggregator"],function(e,n,t,o,s,i,a,r){return{createNewList:function(c,l){var u=l.context.configurator,w=c.newListRegistry,x=new r,d=new n(u),m=new a(u,x);return c.controller=t,c.extensions=(c.extensions||[]).concat([{extType:w.LifeCycleExtension,args:[d,m,x]},{extType:i,args:[d]},o,s]),l.context.configurator.getFeaturesService().isEnabled("comet.notifications")&&c.extensions.push({extType:e,args:[l.context.configurator,"slice-newlist"]}),w.baseComponent.create(c,l)}}});
define('tau/models/model.board.add',["Underscore","tau/core/model-base"],function(e,t){return t.extend({"bus afterInit":function(e){this.fire("dataBind",{});var t=e.data.config.context.configurator;this.fire("configurator.ready",t)},"bus configurator.ready:last + add.executed":function(t,i){i.getBoardDefinitionFactory().createBoard().done(e.bind(function(e){this.fire("add.board",{board:{id:e.id}}),this.fire("definition.saved",e)},this))},"bus configurator.ready:last + definition.saved":function(e,t,i){var r=t.getUrlBuilder().getRelativeBoardUrl(i.id);t.setConfig("tmpBoardIsJustAdded",!0),t.getRouting().redirect(r)}})});
define('tau/ui/templates/board.add/ui.template.board.add',["tau/core/templates-factory","tau/nls/translator"],function(a,e){var t={name:"board.add",engine:"jqote2",markup:['<div class="tau-add-board-btn">','<div role="action-add"',' data-collapsed-selector=".tau-sp-collapsed .tau-extension-board-tooltip"',' data-title-collapsed="'+e("Create&nbsp;new&nbsp;View")+'"',' class="tau-extension-board-tooltip"',">","<i><!-- --></i>","<span>"+e("Create View")+"</span>","</div>",'<span class="tau-help i-role-tooltipArticle" data-article-id="board.add"></span>',"</div>"],dependencies:[]};return a.register(t)});
define('tau/ui/extensions/board.add/ui.extension.board.add',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,n,t){return t.extend({"bus afterRender":function(e){var n=e.data.element,t=n.is("[role=action-add]")?n:n.find("[role=action-add]"),o=this;t.click(function(){o.fire("add.executed")})}})});
define('tau/components/component.board.add',["Underscore","tau/components/component.creator","tau/models/model.board.add","tau/ui/templates/board.add/ui.template.board.add","tau/ui/extensions/board.add/ui.extension.board.add"],function(e,t,a,d,n){return{create:function(e){var o={extensions:[a,n],template:d};return t.create(o,e)}}});
define('tau/models/model.extensions',["Underscore"],function(){var t=function(t,c){for(var n=this,u=n.config.context,a=u.entity.entityType.name,e=[],s=0;s<t.length;s++)e.push(t[s]);var l={id:u.entity.id,fields:t},i={innerCallback:function(t){for(var n=t.data,u=0,a=0;a<e.length;a++)u+=n[e[a]];c.callback.call(c.scope,{count:u})}};n.store.get(a,l,{success:i.innerCallback,scope:i}).done()};return{calculateTagsCount:function(c){t.call(this,["tags-count"],c)},calculateBugsAndTasksCount:function(c){var n=[];this.config.context.isPracticeAvailable("Planning")&&n.push("tasks-count"),this.config.context.isPracticeAvailable("Bug Tracking")&&n.push("bugs-count"),t.call(this,n,c)},calculateTasksCount:function(c){t.call(this,["tasks-count"],c)},calculateBugsCount:function(c){t.call(this,["bugs-count"],c)},calculateUserStoriesAndBugsCount:function(c){var n=[];n.push("userStories-count"),this.config.context.isPracticeAvailable("Bug Tracking")&&n.push("bugs-count"),t.call(this,n,c)},calculateIterationsCount:function(c){t.call(this,["iterations-count"],c)},calculateReleasesCount:function(c){t.call(this,["releases-count"],c)},calculateFeaturesCount:function(c){t.call(this,["features-count"],c)},calculateRequestsCount:function(c){t.call(this,["requests-count"],c)},calculateImpedimentsCount:function(c){t.call(this,["impediments-count"],c)},calculateTimesCount:function(c){t.call(this,["times-count"],c)},calculateAttachmentsCount:function(c){t.call(this,["attachments-count"],c)},calculateCommentsCount:function(c){t.call(this,["comments-count"],c)},calculateTesCasesCount:function(c){t.call(this,["testCases-count"],c)},calculateTestPlanRunsCount:function(c){t.call(this,["testPlanRuns-count"],c)},calculateUserStoriesCount:function(c){t.call(this,["userStories-count"],c)},calculateTestCaseRunsCount:function(c){t.call(this,["testCaseRuns-count"],c)},calculateRelatedEntitiesCount:function(c){t.call(this,["relatedEntities-count"],c)},calculateRequestersCount:function(c){t.call(this,["requesters-count"],c)}}});
define('tau/configurations/enum.page.entity.mode',[],function(){return{full:"full",listEntityDetails:"listEntityDetails"}});
define('tau/configurations/entity.container.config.builder',["Underscore","tau/core/class"],function(t,e){return e.extend({_typeDefaults:{string:""},_containerType:"container",init:function(t){this._context={features:t.context.configurator.getFeaturesService(),mode:t.mode,entityType:t.context.entity.entityType.name.toLowerCase(),isBoard:t.context.configurator.isBoardEdition}},children:function(t){return this.collection(t)},containers:function(t){return this._filterCollection(t,[this._matchContextSpec,this._isNotEmptyContainerSpec])},valueOrDefault:function(t){return this._matchContextSpec(t)?t.value:t.hasOwnProperty("default")?t["default"]:this._default(t.value)},collection:function(t){return this._filterCollection(t,[this._matchContextSpec])},_filterCollection:function(e,n){var i=t.isArray(e),o=i?[]:{},c=i?this._collectArray:this._collectObject;return t.each(e,function(t,e){this._specsAreSatisfiedByItem(n,t)&&c(o,t,e)},this),o},_collectArray:function(t,e){t.push(e)},_collectObject:function(t,e,n){t[n]=e},_specsAreSatisfiedByItem:function(e,n){return t.every(e,function(t){return t.call(this,n)},this)},_matchContextSpec:function(t){return!(t.enabledIf&&!this._matchContextSubSpec(t.enabledIf)||t.disabledIf&&this._matchContextSubSpec(t.disabledIf))},_matchContextSubSpec:function(e){return!(e.feature&&!this._context.features.isEnabled(e.feature)||e.modeIn&&!t.contains(e.modeIn,this._context.mode)||e.entityTypeIn&&!t.contains(e.entityTypeIn,this._context.entityType)||e.isBoard&&e.isBoard!==this._context.isBoard)},_isNotEmptyContainerSpec:function(t){return t.type.toLowerCase()===this._containerType&&t.children&&t.children.length>0},_default:function(t){return this._typeDefaults[typeof t]}})});
define('tau/configurations/base.container.config',["jQuery","Underscore","tau/core/class","tau/core/termProcessor","tau/configurations/enum.page.entity.mode","tau/configurations/entity.container.config.builder"],function(e,t,i,n,a,r){return i.extend({init:function(e){var t=e.context.getTerms();this.termProcessor=new n(t),this.configurator=e.context.configurator,this.features=this.configurator.getFeaturesService(),this.collections={},this.builder=new r({context:e.context,mode:e.mode||a.full});var i=e.context.entity;this._registerActions(i),this.registerAdditionalInfoItem("PlannedStartDate",{label:{text:"Planned Start"},field:{type:"property.plannedStartDate",editable:!0}}),this.registerAdditionalInfoItem("PlannedEndDate",{label:{text:"Planned End"},field:{type:"property.plannedEndDate",editable:!0}}),this.registerAdditionalInfoItem("Owner",{label:{text:"Owner"},field:{type:"property.owner"}}),this.registerAdditionalInfoItem("Assigned Effort",{label:{text:"Assigned Effort"},field:{type:"assignedEffort"}}),this.registerAdditionalInfoItem("Release Assigned Effort",{label:{text:"Assigned Effort"},field:{type:"release.assignedEffort"}}),this.registerAdditionalInfoItem("Velocity",{label:{text:"Velocity"},field:{type:"property.velocity"}}),this.registerAdditionalInfoItem("CycleTime",{label:{text:"Cycle Time"},field:{type:"property.timeInterval",timeField:"cycleTime"}}),this.registerAdditionalInfoItem("LeadTime",{label:{text:"Lead Time"},field:{type:"property.timeInterval",timeField:"leadTime"}}),this.registerAdditionalInfoItem("State",{label:{text:"State"},field:{type:"property.entityState"}}),this.registerAdditionalInfoItem("Test Plan",{label:{text:this.getTermName("TestPlan")},field:{type:"property.testPlan"}}),this.registerAdditionalInfoItem("Responsible",{label:{text:"Responsible"},field:{type:"property.responsible"}}),this.registerAdditionalInfoItem("IsPrivate",{label:{text:"Private?"},field:{type:"property.isPrivate"}}),this.registerAdditionalInfoItem("LastFailureComment",{label:{text:"Last Failure Comment"},field:{type:"property.lastFailureComment"}}),e.context.getProject()&&(this.registerAdditionalInfoItem("Release",{label:{text:this.getTermName("Release")},field:{type:"property.release"},practices:["Planning"]}),this.registerAdditionalInfoItem("Release For Iteration",{label:{text:this.getTermName("Release")},field:{type:"property.release",resetDisabled:!0}}),this.registerAdditionalInfoItem("Iteration",{label:{text:this.getTermName("Iteration")},field:{type:"property.iteration"},practices:["Iterations"]}),this.registerAdditionalInfoItem("Build",{label:{text:this.getTermName("build")},field:{type:"property.build"}})),this.registerAdditionalInfoItem("ImpedimentDate",{label:{text:"Creation Date"},field:{type:"property.impedimentDate"}}),this.registerAdditionalInfoItem("CreationDate",{label:{text:"Creation Date"},field:{type:"property.createDate"}}),this.registerAdditionalInfoItem("FinishDate",{label:{text:"Finish  Date"},field:{type:"property.completeDate",editable:!0}}),this.registerAdditionalInfoItem("StartDate",{label:{text:"Start Date"},field:{type:"property.startDate",editable:!0}}),this.registerAdditionalInfoItem("ResolvedOn",{label:{text:"Resolved On"},field:{type:"property.completeDate",editable:!0}}),this.registerAdditionalInfoItem("CompletionDate",{label:{text:"Completion  Date"},field:{type:"property.completeDate",editable:!0}}),this.registerAdditionalInfoItem("Project",{label:{text:this.getTermName("Project")},field:{type:"property.project"}}),this.registerAdditionalInfoItem("Priority",{label:{text:this.getTermName("Priority")},field:{type:"property.priority"},practices:["Planning"]}),this.registerAdditionalInfoItem("Business Value",{label:{text:"Business Value"},field:{type:"property.priority"},practices:["Planning"]}),this.registerAdditionalInfoItem("Initial Estimate",{label:{text:"Initial Estimate"},field:{type:"property.initialEstimate"},practices:["Planning"]}),this.registerAdditionalInfoItem("Feature",{label:{text:this.getTermName("Feature")},field:{type:"property.feature"},practices:["Requirements"]}),this.registerAdditionalInfoItem("Team",{label:{text:"Team"},field:{type:"property.team"},editions:["hasTeams"]}),this.registerAdditionalInfoItem("Team Iteration",{label:{text:"Team Iteration"},field:{type:"property.teamIteration"},editions:["hasTeams"]}),this.registerAdditionalInfoItem("User Story",{label:{text:this.getTermName("userStory")},field:{type:"property.userStory"}}),this.registerAdditionalInfoItem("Assignable",{label:{text:this.getTermName("Assignable")},field:{type:"property.assignable"}}),this.registerAdditionalInfoItem("Last Status",{label:{text:"Last Status"},field:{type:"property.lastStatus"}}),this.registerAdditionalInfoItem("Last Run Date",{label:{text:"Last Run Date"},field:{type:"property.lastRunDate"}}),this.registerAdditionalInfoItem("User Story For Task",{label:{text:this.getTermName("userStory")},field:{type:"property.userStory",resetDisabled:!0}}),this.registerAdditionalInfoItem("Severity",{label:{text:this.getTermName("Severity")},field:{type:"property.severity"},practices:["Planning"]}),this.registerAdditionalInfoItem("Test Case",{label:{text:"Test Case"},field:{type:"property.testCase"}}),this.registerAdditionalInfoItem("Test Plan Run",{label:{text:"Test Plan Run"},field:{type:"property.testPlanRun"}}),this.registerAdditionalInfoItem("Test Case Run Status",{label:{text:"Status"},field:{type:"property.status.testCaseRun"}}),this.registerAdditionalInfoItem("Failure Comment",{label:{text:"Failure Comment"},field:{type:"property.failureComment"}}),this.registerAdditionalInfoItem("Run Date",{label:{text:"Run Date"},field:{type:"property.runDate"}}),this._registerTabs(e),this._registerPanels(e)},_registerActions:function(e){var t=this.configurator.getUrlBuilder();this.registerAction("Old Edit",{disabledIf:{feature:"tp3.only"},label:"Old Edit",url:t.getEditUrl(e.id,e.entityType.name)}),this.registerAction("Print",{label:"Print View",command:function(i){i.redirectTo(t.getPrintUrlRelative(e.id,e.entityType.name),"_blank")}}),this.registerAction("-----","-----"),this.registerAction("-add-",{disabledIf:{feature:"entity.quickAdd"},label:"-----"}),this.registerAction("Delete",{label:"Delete",confirmation:"Are you sure?",command:function(e){e.removeEntity()},className:"ui-menu__item-action-delete ui-menu__item-dont-close"}),this.registerAction("Move or Copy",{label:"Move or Copy",command:function(e){e.moveOrCopy()},editions:["~board"]}),this.registerAction("Copy to project",{label:"Copy to project&hellip;",command:function(e,t){e.copyToProject(t)},editions:["board"]}),this.registerAction("Convert",{label:"Convert to&hellip;",roleAction:"convert",className:"ui-menu__item__parent",editions:["~innerList"]}),this.registerAction("Create",{label:"Create&hellip;",roleAction:"create",className:"ui-menu__item__parent",editions:["~innerList"]}),this.registerAction("Attach to Request",{label:"Attach to "+this.getTermName("Request"),command:function(e){e.attachToRequest()},editions:["Pro"]}),this.registerAction("Add Impediment",{disabledIf:{feature:"entity.quickAdd"},label:"Add "+this.getTermName("Impediment"),url:t.getAddImpedimentUrl(e.id)})},_registerTabs:function(e){this.registerTab("Description",{selected:!0,label:"description",header:[{type:"label",text:"Description"}],items:[{type:"container",spinnerConfigForLazy:this.getSpinnerConfigForLazy(),children:[{type:"container",lazy:!0,name:"lazyPlaceholder container",children:[{type:"tagsEditor",layout:"selectable",children:[{type:"tags",selector:".i-role-tagslistcontainer"},{type:"container",name:"tagsCloud.container",selector:".i-role-tagscloudcontainer",visible:!1,children:[{type:"tagsCloud"}]}]},{type:"container",name:"description container",cssClass:"ui-sub-control",children:[{type:"description"}]},{type:"container",lazy:!0,name:"lazyPlaceholder container",children:[this._buildRichTextCustomFieldsSummary(e),{type:"attachments"},{type:"label",text:"Comments",cssClass:"ui-ctrl-title"},{type:"container",name:"comments container",cssClass:"ui-sub-control",children:[{type:"comments"}]}]}]}]}]}),this.registerTab("Relations",{label:"relations",printable:!1,header:[{type:"label.relationCount",text:"Relations"}],items:[{type:"container",spinnerConfigForLazy:this.getSpinnerConfigForLazy(),children:[{type:"container",lazy:!0,name:"lazyPlaceholder container",children:[{name:"relations container",type:"relations.container"}]}]}]}),this.registerTab("Flow",{label:"implementationHistory",printable:!1,header:[{type:"label",text:"Flow"}],items:[{type:"container",spinnerConfigForLazy:this.getSpinnerConfigForLazy(),children:[{type:"implementationHistory"}]}]}),this.registerTab("History",{label:"History",printable:!1,header:[{type:"label",text:"History"}],items:[{type:"container",spinnerConfigForLazy:this.getSpinnerConfigForLazy(),children:[{type:"container",lazy:!0,name:"lazyPlaceholder container",children:[{type:"auditHistory",name:"audit history"}]}]}]})},_registerPanels:function(e){this.registerPanel("Additional Info",{type:"collapsible",name:"additional info container",collapsed:!1,stateName:"additionalInfo",header:[{type:"label",text:"Info"}],items:[{type:"additionalInfo",children:this.getAdditionalInfoItems()}]}),this.registerPanel("Lead Cycle Time",{type:"collapsible",name:"Lead Cycle Time",stateName:"leadTime",collapsed:!1,header:[{type:"label",text:"Lead Cycle Time"}],items:[{type:"leadCycleTime"}]});var t=this._buildCustomFieldsSummary(e);t.length&&this.registerPanel("Custom Fields",{type:"collapsible",name:"custom fields collapsible",collapsed:!1,stateName:"customFields",header:[{type:"label",text:"Custom Fields"}],items:t}),window.appIsInDebugMode&&this.registerPanel("Diagnostic",{type:"collapsible",name:"diagnostics container",printable:!1,collapsed:!0,header:[{type:"diagnostics"}],items:[{type:"collapsible",collapsed:!0,header:[{type:"label",text:"Global Bus Listeners"}],items:[{type:"diagnostics.globalListeners"}]},{type:"collapsible",collapsed:!0,header:[{type:"label",text:"Store Listeners"}],items:[{type:"diagnostics.store"}]}]})},getCollection:function(e){return e in this.collections||(this.collections[e]={}),this.collections[e]},getSpinnerConfigForLazy:function(){return{isShow:!0,selectorForHeight:".tau-page-entity"}},addToCollection:function(e,t,i){return this.getCollection(e)[t]=i,this},registerAction:function(e,t){t.alias=e,t.className=t.className||"",this.addToCollection("actions",e,t)},getActions:function(){var e=t.compact(this.getActionsAliases()),i=this.builder.collection(this.getCollection("actions")),n=[];return t.forEach(e,function(e){e in i&&n.push(i[e])}),n},getActionsAliases:function(){return["Old Edit","Print","-----","Delete"]},registerAdditionalInfoItem:function(e,i){i.field&&t.defaults(i.field,{name:e+" "+i.field.type}),i.label&&(i.label.type=i.label.type||"label",i.label.name=i.label.name||e+" "+i.label.type),this.addToCollection("additionalInfo",e,i)},getAdditionalInfoItems:function(){var e=this.getAdditionalInfoAliases(),i=this.builder.collection(this.getCollection("additionalInfo")),n=[];return t.forEach(e,function(e){e in i&&n.push(i[e])}),n},getAdditionalInfoAliases:function(){return[]},registerTab:function(e,t){this.addToCollection("tabs",e,t)},getTabs:function(){var e=this.getTabsAliases(),i=this.builder.collection(this.getCollection("tabs")),n=[];return t.forEach(e,function(e){e in i&&n.push(i[e])}),n},getTabsAliases:function(){return["Description","Relations"]},registerPanel:function(e,t){this.addToCollection("panels",e,t)},getPanels:function(){var e=this.getPanelsAliases(),i=this.builder.collection(this.getCollection("panels")),n=[],a=this;return t.forEach(e,function(e){e in i&&("Additional Info"==e&&(i[e].items[0].children=a.getAdditionalInfoItems()),n.push(i[e]))}),n},getPanelsAliases:function(){return["Look Switcher","Diagnostic","Additional Info","Custom Fields"]},_buildCustomFieldsSummary:function(e){for(var i=e.context,n=i.getCustomFields(),a=i.entity.entityType.name.toLowerCase(),r=t(n).select(function(e){return a===e.entityKind.toLowerCase()&&"richtext"!==e.type.toLowerCase()&&"multipleentities"!==e.type.toLowerCase()}),l=[],s=0;s<r.length;s++){var o=r[s],d=o.type.toLowerCase();"multipleselectionlist"===d&&(d="multiselect"),l.push({type:"customField."+d,customField:o})}return l},_buildRichTextCustomFieldsSummary:function(e){for(var i=e.context,n=i.getCustomFields(),a=i.entity.entityType.name.toLowerCase(),r=t(n).select(function(e){return a===e.entityKind.toLowerCase()&&"richtext"===e.type.toLowerCase()}),l={type:"container",name:"custom fields container",visible:r.length>0,children:[]},s=0;s<r.length;s++){var o=r[s];l.children.push({type:"label",text:o.name,cssClass:"ui-ctrl-title"}),l.children.push({type:"container",name:"custom field container for "+o.type.toLowerCase(),cssClass:"ui-sub-control",children:[{type:"customField."+o.type.toLowerCase(),customField:o}]})}return l},getNames:function(e){return this.termProcessor.getTerms(e).names},getTermName:function(e){return this.termProcessor.getTerms(e).name},getEntityQuickAddOptions:function(){return{}},getEntityMenuOptions:function(){return{type:"menu.actions",items:this.getActions()}},getConfig:function(e){var i=t.uniqueId("entitygeneralinfo"),n=t.uniqueId("entityadditionalinfo");return{children:[{type:"container",name:"main entity container",layout:"selectable",template:{name:"main.entity.container",engine:"jqote2",markup:["<div class=\"main-container <%= this.cssClass || '' %>\">",'<div id="'+i+'" class="general-info"></div>',this.builder.valueOrDefault({enabledIf:{modeIn:[a.full]},value:'<div id="'+n+'" class="additional-info"></div>'}),"</div>"]},children:this.builder.children([{type:"container",name:"general info column container",layout:"list",selector:"#"+i,cssClass:this.builder.valueOrDefault({enabledIf:{modeIn:[a.full]},disabledIf:{entityTypeIn:["team","project","testcaserun"]},value:"tau-sharelink-enabled"}),children:this.builder.children([{type:"breadcrumbs"},{type:"container",cssClass:"ui-popup-header",children:this.builder.children([{type:"title",editable:this.builder.valueOrDefault({enabledIf:{entityTypeIn:["testcaserun"]},value:!1,"default":!0})},{enabledIf:{modeIn:[a.full]},disabledIf:{entityTypeIn:["team","project","testcaserun"]},type:"shareLink"}])},{type:"tabs",cssClass:"tau-tabs",stateName:"generalTab",tabsHeader:{type:"tabsHeader",options:{more:!0}},tabs:this.getTabs(e),additionalHeaders:this.builder.containers([{type:"container",cssClass:"inner",children:this.builder.children([{enabledIf:{modeIn:[a.full]},type:"entity.menuTrigger",options:this.getEntityMenuOptions(e),className:"tau-tab-item-quick-add",printable:!1},{enabledIf:{feature:"entity.quickAdd",modeIn:[a.full]},type:"entity.quickAddTrigger",options:this.getEntityQuickAddOptions(),className:"tau-tab-item-quick-add",printable:!1}])}])}])},{enabledIf:{modeIn:[a.full]},type:"container",name:"additional info column container",layout:"list",selector:"#"+n,spinnerConfigForLazy:this.getSpinnerConfigForLazy(),children:[{type:"container",lazy:!0,name:"additional_lazy info column container",children:this.getPanels()}]}])},{name:"imagePreview",type:"attachmentsPreview"}]}},isIE9:function(){return e.browser.msie&&"9.0"==e.browser.version}})});
define('tau/ui/extensions/assignmentsList/ui.extension.assignmentsList.overlay',["tau/components/extensions/component.extension.base"],function(e){return e.extend({"bus afterRender":function(e){this.element=e.data.element;var t=this.action||function(){};t.call(this),this.action=function(){}},getWidget:function(){return this.element.parents(".ui-placeholder:first")},showOverlay:function(){this.getWidget().tauOverlay()},hideOverlay:function(){this.getWidget().tauOverlay("hide")},"bus markElementToBeUpdated":function(){this.showOverlay()},"bus updateElement":function(){this.action=function(){this.hideOverlay()}},"bus markElementToBeDeleted":function(){this.showOverlay()},"bus afterAssignmentRemoved":function(){this.hideOverlay()},"bus beforeSaveAssignment":function(){this.showOverlay()},"bus beforeAddAssignment":function(){this.showOverlay()}})});
define('tau/configurations/baseAssignable.container.config',["Underscore","tau/configurations/base.container.config","tau/models/model.extensions","tau/ui/extensions/assignmentsList/ui.extension.assignmentsList.overlay"],function(e,t,i,r){return t.extend({init:function(e){t.prototype.init.call(this,e);var i=e.context.entity,s=e.context.configurator.getUrlBuilder();this.registerAction("Add Time",{disabledIf:{feature:"entity.quickAdd"},label:"Add "+this.getTermName("Time"),url:s.getAddTimeUrl(i.id),practices:["Time Tracking"]}),this.registerAction("Move to User Story",{label:"Move to Another User Story",command:function(){this.moveOrCopy()},editions:["~board"]}),this.registerAction("Find Duplicate",{label:"Find Duplicate",command:function(){this.markAsDuplicate()},editions:["~board"]}),this.registerAction("Split",{disabledIf:{feature:"tp3.only"},label:"Split",command:function(){this.split()}}),this.registerAction("Add Test Case",{disabledIf:{feature:"entity.quickAdd"},label:"Add "+this.getTermName("testCase"),url:s.getAddTestCaseForUserStoryUrl(i.id),practices:["Test Cases"]}),this.registerAction("Add Bug",{disabledIf:{feature:"entity.quickAdd"},label:"Add "+this.getTermName("bug"),url:s.getAddBugForUserStoryUrl(i.id),practices:["Bug Tracking"]}),this.registerAction("Create Bug",{label:"Create "+this.getTermName("bug"),url:s.getAddBugForRequestUrl(i.id),practices:["Bug Tracking"]}),this.registerAction("Add Task",{disabledIf:{feature:"entity.quickAdd"},label:"Add "+this.getTermName("task"),url:s.getAddTaskForUserStoryUrl(i.id)}),this.registerAction("Create Task",{label:"Create "+this.getTermName("task"),url:s.getAddTaskForRequestUrl(i.id)}),this.registerAction("Create User Story",{label:"Create "+this.getTermName("userStory"),url:s.getAddUserStoryForRequestUrl(i.id)}),this.registerAction("Create Feature",{label:"Create "+this.getTermName("feature"),url:s.getAddFeatureForRequestUrl(i.id),practices:["Requirements"]}),this.registerTab("Time",{label:"time",header:[{type:"label",text:"Time"}],items:[{type:"container",spinnerConfigForLazy:this.getSpinnerConfigForLazy(),practices:["Time Tracking"],children:[{type:"container",lazy:!0,name:"lazyPlaceholder container",practices:["Time Tracking"],children:[{type:"collapsible",name:"time list collapsible",stateName:"times",collapsed:!1,header:[{type:"label",text:"Time records"}],items:[{type:"timeList"}]}]}]}]}),this.registerTab("Source",{label:"source",header:[{type:"label",text:"Source",practices:["Source Control"]}],items:[{type:"container",spinnerConfigForLazy:this.getSpinnerConfigForLazy(),practices:["Source Control"],children:[{type:"container",practices:["Source Control"],lazy:!0,children:[{type:"revisionList",practices:["Source Control"]}]}]}]}),this.registerPanel("Progress Bar",{type:"progressBar"}),this.registerPanel("Assignments",{type:"collapsible",stateName:"assignments",collapsed:!1,header:[{type:"label",text:"Assignments"}],items:[{type:"assignmentsList",extensions:[r]}]})},getActionsAliases:function(){return["Add Time","-----","Old Edit","Print","-----","Delete"]},getAdditionalInfoAliases:function(){return["Release","Iteration"]},getTabsAliases:function(){return["Description","Source","Relations","Flow","Time","History"]},getPanelsAliases:function(){return["Look Switcher","Diagnostic","Progress Bar","Impediments","Assignments","Additional Info","Custom Fields"]}})});
define('tau/configurations/baseContainable.container.config',["tau/configurations/base.container.config"],function(t){return t.extend({init:function(t){this._super(t);var e=t.context.configurator.getUrlBuilder(),i=t.context.entity;this.registerAction("Add Iteration",{disabledIf:{feature:"entity.quickAdd"},label:"Add "+this.getTermName("Iteration"),url:e.getAddIterationForReleaseUrl(i.id),practices:["Iterations"]})}})});
define('tau/components/extensions/extension.labelRefresher.base',["Underscore","tau/components/extensions/component.extension.base"],function(e,t){return t.extend({eventName:null,propertyListForEvict:[],init:function(){var t=this;t._super.apply(t,arguments),e.isArray(t.eventName)||(t.eventName=[t.eventName]);var n=t.bus.getGlobalBus();e(t.eventName).each(function(e){n.on(e,t.eventHandler,t)}),n.on("bugWasMarkedAsDuplicate",t.onBugWasMarkedAsDuplicate,t)},destroy:function(){var t=this,n=t.bus.getGlobalBus();e(t.eventName).each(function(e){n.removeListener(e,t.eventHandler,t)}),n.removeListener("bugWasMarkedAsDuplicate",this.onBugWasMarkedAsDuplicate,this),this._super.apply(this,arguments)},refresh:function(){var e=this.config.context.entity;this.config.store.evictProperties(e.id,e.entityType.name,this.propertyListForEvict),this.fire("refresh")},onBugWasMarkedAsDuplicate:function(e){var t=this.config?this.config.context.entity.id:null;t===e.data.bugId&&this.refresh()},eventHandler:function(e){this.isEntityInContext(e)&&this.refresh()}})});
define('tau/components/extensions/requestsList/extensions.requestList.labelRefresher',["tau/components/extensions/extension.labelRefresher.base"],function(e){return e.extend({eventName:["requestWasAttachedToEntity","requestIsDetachedFromEntity"],propertyListForEvict:["requests-count"]})});
define('tau/components/extensions/testCaseList/extensions.testCaseList.labelRefresher',["tau/components/extensions/extension.labelRefresher.base"],function(e){return e.extend({eventName:"testCase.items.added",propertyListForEvict:["testCases-count"]})});
define('tau/components/extensions/entity/extension.requestList.remover',["Underscore","tau/core/model-base","tau/models/model.extensions"],function(t,e,s){return e.extend({init:function(){this._super.apply(this,arguments),this.hideElementIfHelpDeskPracticeIsOff(this.config.context)},hideElementIfHelpDeskPracticeIsOff:function(t){this.store=this.config.context.configurator.getStore(),t.isPracticeAvailable("Help Desk")<0&&(this.bus.getGlobalBus().on("requestWasAttachedToEntity",this._updateRefresh,this),this.bus.getGlobalBus().on("bugWasMarkedAsDuplicate",this._updateRefresh,this),this.bus.on("afterRender",this._update,this))},_updateRefresh:function(){var t=this.config.context;this.config.store.evictProperties(t.entity.id,t.entity.entityType.name,["requests-count"]),this._update()},_update:function(){s.calculateRequestsCount.call(this,{callback:function(t){var e=t.count,s=this.$el;e>0?s.show():s.hide()},scope:this})},destroy:function(){this.bus.getGlobalBus().removeListener("requestWasAttachedToEntity",this._updateRefresh,this),this._super()},"bus afterRender":function(t){this.$el=t.data.element}})});
define('tau/models/dataprocessor/model.processor.assignments',["Underscore","tau/utils/utils.translation"],function(e,s){return{getAssignmentsForRole:function(s,r){return e.select(r.assignments,function(e){return e.role.id==s.id})},getAssignments:function(r){for(var t={groups:[]},n=r.roleEfforts,a=0;a<n.length;a++){for(var i=n[a].role,u={role:{id:i.id,name:s.shorten(i.name),fullName:i.name},users:[]},o=this.getAssignmentsForRole(i,r),l=0;l<o.length;l++){var m=o[l].generalUser,g=[];m.firstName?(g.push(m.firstName),m.lastName&&g.push(e.asString(m.lastName).substring(0,1)+".")):g.push(m.lastName?m.lastName:m.email),u.users.push({id:m.id,name:e.trim(g.join(" ")),assignmentId:o[l].id,avatarUri:m.avatarUri})}t.groups.push(u)}return t}}});
define('tau/models/dataprocessor/model.processor.importance',["Underscore","tau/core/class"],function(i,n){var t=n.extend({init:function(i,n){this.min=i,this.max=n},getKind:function(i){var n="medium";return i==this.min?n="high":i==this.max&&(n="low"),n}});return t});
define('tau/models/dataProviders/model.provider.items.base',["Underscore","jQuery","tau/core/class","tau/models/dataprocessor/model.processor.assignments","tau/models/dataprocessor/model.processor.importance"],function(t,e,n,i,r){return n.extend({init:function(t){this.config=t,this.fields={generalUser:["id","firstName","lastName","avatarUri","email"],entityState:["id","name","isInitial","isFinal","numericPriority",{role:["id","name"]}],entityStateWithComment:["id","name","isInitial","isFinal","numericPriority","isCommentRequired",{nextStates:["id"]},{role:["id","name"]}]}},_chainResponse:function(t){var n=e.Deferred();return n.done(t),n.resolve},_createDetailCommand:function(t){var e={};return e[t]=["id","name","numericPriority","tags","effort","effortCompleted","effortToDo","timeSpent","timeRemain",{entityState:this.fields.entityState},{roleEfforts:["id",{role:["id","name"]}]},{assignments:["id",{role:["id"]},{generalUser:this.fields.generalUser}]}],e},_createQuery:function(){return{}},_processAssignments:function(e){var n=i.getAssignments(e);return t.forEach(n.groups,function(e){t.forEach(e.users,function(t){t.avatarUrl=t.avatarUri+"24"})}),n},_processTags:function(e){return e.tags?t.isArray(e.tags)?e.tags:e.tags.toString().split(", "):[]},_calculateEffortToMaximum:function(e){if(0==e.length)return e;var n=t.max(e,function(t){return t.effort.total}),i=n.effort.total;return t.forEach(e,function(t){t.effort.percentFromCount=e.length,t.effort.percentFromMaximum=0==i?0:Math.round(t.effort.total/i*100)}),e},_convertData:function(e){var n=e,i=[],r=this;return t.forEach(n,function(t){var e=t.__type.toLowerCase(),n=t.entityType?t.entityType.name.toLowerCase():"";"solution"!==e&&"solution"!==n&&i.push(r._convertItem(t))}),i},_convertItem:function(t){return{id:t.id,name:t.name,numericPriority:t.numericPriority,__type:t.__type,entityState:{id:t.entityState.id,name:t.entityState.name},tags:this._processTags(t),effort:this._getEffortData(t),assignments:this._processAssignments(t),severity:{id:t.severity.id,name:t.severity.name}}},_getEffortData:function(t){var e={estimated:t.effort,spent:t.effortCompleted,remain:t.effortToDo};return e.total=e.spent+e.remain,e.percentComplete=0===e.total?0:Math.round(e.spent/e.total*100),e.percentFromMaximum=0,e.timeSpent=Math.round(100*t.timeSpent)/100,e.timeRemain=Math.round(100*t.timeRemain)/100,e.unit=this.config.context.getEffortPoint(t.__type),e},_getAssignedEffort:function(e){var n={},i=0,r=0,o=function(t){i+=t.effortToDo,r+=t.effortCompleted};return t.each(e.userStories,o),t.each(e.bugs,o),n.value=Math.round(100*(i+r))/100,n.unit=this.config.context.getEffortPoint(e.__type),n},_getVelocityData:function(t){return{value:t.velocity,unit:this.config.context.getEffortPoint(t.__type)}},_fetch:function(e,n,i,o){var a=this.config.context,s=a.entity.entityType.name,c=a.entity.id,f=this.config.store,u=this._createDetailCommand(e),m=this._createQuery(e),d={id:c,nested:!0,fields:[u],$query:m},l=this,p=function(i){var r=i[0].data[e];t.map(r,function(t){t.__type=n});var a=l._convertData(r);o(a)};i&&(f=f.get(i,{fields:["id","importance"]}),p=function(i){var a=t(i[0].data).pluck("importance"),s=t.min(a),c=t.max(a);l.importanceProcessor=new r(s,c);var f=i[1].data[e];t.map(f,function(t){t.__type=n});var u=l._convertData(f);o(u)}),f=f.get(s,d),f.done({success:l._chainResponse(p),scope:l})},_sortByPriority:function(e){var n=t.max(e,function(t){return t.numericPriority||0});return n=n?n.numericPriority:0,t.sortBy(e,function(t){var e=t.numericPriority||0;return t.entityState.isFinal===!0&&(e+=n+1),e})},changePriority:function(e,n,i,r){var o=this.config.store;o.evictProperties(e.id,e.__type,["numericPriority"]);var a=[];a.push(function(t){o.save("prioritizer",{id:e.id,$set:{beforeId:i.id,afterId:n.id}}).done({success:function(){t(null,arguments)}})}),a.push(function(t){o.get(e.__type,{id:e.id,fields:["id","numericPriority"]}).done({success:function(e){t(null,e[0].data)}})}),t.series(a,function(e,n){t.isFunction(r)&&r.call(null,{changed:n[1]})})}})});
define('tau/models/dataProviders/model.provider.items.bugs',["Underscore","tau/models/dataProviders/model.provider.items.base"],function(t,i){return i.extend({fetch:function(t){this._fetch("bugs","bug","severity",t)},_createDetailCommand:function(i){var e={};e[i]=["id","name","numericPriority","tags","effort","effortCompleted","effortToDo","timeSpent","timeRemain",{entityState:this.fields.entityStateWithComment},{roleEfforts:["id","effort","effortToDo",{role:["id","name","isPair","hasEffort"]}]},{owner:["id","firstName","lastName"]},{assignments:["id",{role:["id"]},{generalUser:this.fields.generalUser}]},{severity:["id","name","importance"]}];var r={project:["id"]};return this.config.multiprojects&&r.project.push("abbreviation"),e[i].push(r),this.config.additionalFields&&t.indexOf(this.config.additionalFields,"iteration")>-1&&e[i].push({iteration:["id","name"]}),e},_convertData:function(t){return t=this._super(t),t=this._calculateEffortToMaximum(t),this._sortByPriority(t)},_convertItem:function(i){var e=this;i.project=i.project||{};var r={id:i.id,name:i.name,numericPriority:i.numericPriority,__type:i.__type,entityState:{id:i.entityState.id,name:i.entityState.name,isInitial:i.entityState.isInitial,isFinal:i.entityState.isFinal,numericPriority:i.entityState.numericPriority},tags:this._processTags(i),effort:this._getEffortData(i),assignments:this._processAssignments(i),severity:{id:i.severity.id,name:i.severity.name,kind:e.importanceProcessor.getKind(i.severity.importance)},projectId:i.project.id,entitiesCount:0,url:this.config.context.configurator.getUrlBuilder().getNewViewUrl(i.id,i.__type,!0)};return this.config.multiprojects&&(r.project={id:i.project.id,abbreviation:i.project.abbreviation}),this.config.additionalFields&&t.indexOf(this.config.additionalFields,"iteration")>-1&&(r.iteration={id:i.iteration?i.iteration.id:null,name:i.iteration?i.iteration.name:null}),r}})});
define('tau/models/dataProviders/model.provider.items.tasks',["Underscore","tau/models/dataProviders/model.provider.items.base"],function(t,e){return e.extend({fetch:function(t){this._fetch("tasks","task","priority",t)},_createDetailCommand:function(t){var e={};return e[t]=["id","name","numericPriority","tags","effort","effortCompleted","effortToDo","timeSpent","timeRemain",{userStory:["id"]},{entityState:this.fields.entityState},{roleEfforts:["id","effort","effortToDo",{role:["id","name","isPair","hasEffort"]}]},{owner:["id","firstName","lastName"]},{assignments:["id",{role:["id"]},{generalUser:this.fields.generalUser}]},{priority:["id","name","importance"]},{project:["id"]}],e},_convertItem:function(t){t.project=t.project||{};var e={id:t.id,name:t.name,numericPriority:t.numericPriority,__type:t.__type,entityState:{id:t.entityState.id,name:t.entityState.name,isInitial:t.entityState.isInitial,isFinal:t.entityState.isFinal,numericPriority:t.entityState.numericPriority},tags:this._processTags(t),effort:this._getEffortData(t),assignments:this._processAssignments(t),priority:null,projectId:t.project.id,entitiesCount:0};return e}})});
define('tau/models/dataProviders/model.provider.items.tasks_bugs',["Underscore","tau/models/dataProviders/model.provider.items.base","tau/models/dataProviders/model.provider.items.bugs","tau/models/dataProviders/model.provider.items.tasks"],function(t,i,e,r){return i.extend({init:function(t){this.config=t,this.providers=[new r(t)],this.config.context.isPracticeAvailable("Bug Tracking")&&this.providers.push(new e(t))},_convertData:function(t){return t=this._calculateEffortToMaximum(t),this._sortByPriority(t)},fetch:function(i){var e=this,r=function(t){var r=e._convertData(t);i(r)},o=[];t.forEach(e.providers,function(t){o.push(function(i){t.fetch(function(t){i(null,t)})})}),t.parallel(o,function(i,e){var o=t.flatten(e);r(o)})}})});
define('tau/models/dataProviders/model.provider.groups.base',["Underscore","tau/core/class"],function(e,i){return i.extend({init:function(e){this.config=e},_mergeGroups:function(i){var t=null;return i.length&&(t={key:[],items:[],title:[],isInitial:!1,isPlanned:!1,isFinal:!1,realGroups:[]},e.forEach(i,function(e){t.key.push(e.key),t.title.push(e.title?e.title:e.key),t.isInitial=!!e.isInitial,t.isPlanned=!!e.isPlanned,t.isFinal=!!e.isFinal,t.realGroups=t.realGroups.concat(e.realGroups)})),t},_fetchState:function(i,t,n){var s=this,r=e(t).isFunction()?t:function(i){var n=s.config.context.getProcess(),r=i.entityType.name.toLowerCase();return i.process.id===n.id&&e.indexOf(t,r)>-1},a=this.config.store,o=["id","name","isFinal","isInitial","isPlanned","isCommentRequired","numericPriority",{entityType:["id","name"]},{process:["id"]},{nextStates:["id"]}],l={list:!0,fields:o};a=a.get("entityStates",l),a.done({success:function(i){var t=i[0].data;t=e(t).filter(r);var a=e.groupByComplex(t,function(e){return e.name});a=this._sortByState(a),e.forEach(a,function(i){i.collapsed=!!i.items[0].isFinal,i.isFinal=!!i.items[0].isFinal,i.isInitial=!!i.items[0].isInitial,i.isPlanned=!!i.items[0].isPlanned,i.realGroups=e.clone(i.items),i.items=[],delete i.stateWeight});var o=e.select(a,function(e){return e.isInitial}),l=e.select(a,function(e){return!e.isInitial&&e.isPlanned}),u=e.select(a,function(e){return!e.isInitial&&!e.isFinal&&!e.isPlanned}),c=e.select(a,function(e){return!e.isInitial&&e.isFinal&&!e.isPlanned});a=[];var d=null;o.length&&(d=s._mergeGroups(o),a.push(d)),l.length&&(d=s._mergeGroups(l),a.push(d)),a=a.concat(u),c.length&&(d=s._mergeGroups(c),a.push(d)),e.forEach(a,function(i){i.collapsed=!!i.isFinal,i.title&&e.isArray(i.title)&&(i.title=i.title.join(", ")),e.isArray(i.key)&&1==i.key.length&&(i.key=i.key.pop()),delete i.isFinal,delete i.isInitial,delete i.isPlanned}),n(a)},scope:this})},_sortByState:function(i){return e.forEach(i,function(i){var t=[];e.forEach(i.items,function(e){t.push(e.numericPriority)});var n=e.reduce(t,function(e,i){return e+i},0),s=n?n/t.length:0;i.stateWeight=s}),i=e.sortBy(i,function(e){return e.stateWeight})},moveToGroup:function(){},_moveToGroupByState:function(i,t,n,s){var r=this.config.store,a=e.find(n.realGroups,function(e){return e.id==i.entityState.id}),o=e.find(t.realGroups,function(e){return e.entityType.name.toLowerCase()==i.__type.toLowerCase()&&e.process.id==a.process.id});if(!o||o.id==a.id)return void s.call(null);var l=[];l.push(function(e){r.save(i.__type,{id:i.id,$set:{entityState:{id:o.id}},fields:["id",{entityState:["id","name","isFinal"]}]}).done({success:function(){e(null,arguments)}})}),l.push(function(e){r.get(i.__type,{id:i.id,fields:["id",{entityState:["id","name","isFinal"]}]}).done({success:function(i){e(null,i[0].data)}})}),e.series(l,function(i,t){e.isFunction(s)&&s.call(null,{changed:t[1]})})},isAvailableForItem:function(){return!0},getCommentRequirements:function(){return[]}})});
define('tau/models/dataProviders/model.provider.groups.tasks_bugs',["Underscore","tau/models/dataProviders/model.provider.groups.base"],function(e,t){return t.extend({fetch:function(t,n,r){var i={tasks:[],bugs:[]},u=e(n).select(function(e){return"task"===e.__type}),o=e(n).select(function(e){return"bug"===e.__type});i.tasks=e(u).chain().pluck("projectId").uniq().value(),this.config.context.isPracticeAvailable("Bug Tracking")&&(i.bugs=e(o).chain().pluck("projectId").uniq().value());var s=this.config.store,c=this;s.get("projects",{fields:[{process:["id"]}],list:!0}).done({success:function(n){var u=n[0].data,o={tasks:[],bugs:[]};e.forEach(i,function(t,n){o[n]=e(u).chain().select(function(n){return e(t).include(n.id)}).map(function(e){return e.process.id}).uniq().value()});var s=function(t){var n=(t.entityType.name||"").toLowerCase(),r=t.process.id;return"task"===n&&e(o.tasks).include(r)||"bug"===n&&e(o.bugs).include(r)};return c._fetchState(t,s,r)}})},moveToGroup:function(e,t,n,r){return this._moveToGroupByState(e,t,n,r)},isAvailableForItem:function(t,n,r){var i=e.find(r.realGroups,function(e){return e.id==t.entityState.id}),u=e.find(n.realGroups,function(e){return e.entityType.name.toLowerCase()==t.__type.toLowerCase()&&e.process.id==i.process.id}),o=e.pluck(i.nextStates,"id");return o.push(i.id),u&&e.include(o,u.id)},getCommentRequirements:function(t,n,r){var i=e.find(r.realGroups,function(e){return e.id==t.entityState.id}),u=[];return e.forEach(n,function(n){var r=e.find(n.realGroups,function(e){return e.entityType.name.toLowerCase()==t.__type.toLowerCase()&&e.process.id==i.process.id});u.push({isCommentRequired:r?r.isCommentRequired:!1})}),u}})});
define('tau/ui/extensions/list/extension.list.refresher',["tau/components/extensions/component.extension.base"],function(e){return e.extend({ENTITY_PROPS_MAP:{userStory:["tasks","bugs"],feature:["bugs"]},"bus afterInit":function(){if(!this.signedUp){this.signedUp=!0;var e=this.config.context.entity,t=e.entityType.name,i=this.config.store;this._refresher||(this._refresher=function(){i.evictProperties(e.id,t,this.ENTITY_PROPS_MAP[t]),this.fire("refresh")}.bind(this),i.unbind(this),i.on({eventName:"afterSave",type:t,listener:this,filter:{id:e.id},hasChanges:["entityState"]},this._refresher))}},"bus destroy":function(){this.config.store.unbind(this),delete this._refresher,this._super.apply(this,arguments)}})});
define('tau/models/dataProviders/userstory/userstory.model.provider.testcases.items',["Underscore","tau/models/dataProviders/model.provider.items.base","tau/utils/utils.date"],function(t,e,r){return e.extend({fetch:function(t){this._fetch("testCases","testCase","priority",t)},_convertData:function(e){return e=this._super(e),t.sortBy(e,function(t){var e=t.numericPriority||0;return e})},_createDetailCommand:function(t){var e={};return e[t]=["id","name","tags","lastStatus","lastRunDate","steps","success","numericPriority"],e},_convertItem:function(t){var e={id:t.id,__type:t.__type,name:t.name,tags:[],lastStatus:t.lastStatus?"passed":"failed",lastRunDate:r.format.datetime.short(r.convertToTimezone(t.lastRunDate)),steps:t.steps,success:t.success,numericPriority:t.numericPriority,url:this.config.context.configurator.getUrlBuilder().getNewViewUrl(t.id,t.__type,!0)};return e}})});
define('tau/ui/extensions/list/testcases/extension.list.testcases.actions',["Underscore","tau/components/extensions/component.extension.base"],function(t,e){return e.extend({_toggle:function(e,i){var a=e.find(".ui-richeditor:visible");a.length&&a.prev().richeditor("hideEditor"),t.isBoolean(i)?(e.find(".tau-list__itemexpander").toggleClass("tau-list__itemexpander_state_open",i).toggleClass("tau-list__itemexpander_state_closed",!i),e.find(".tau-list__table-additional").toggleClass("tau-list__table-additional_state_open",i).toggleClass("tau-list__table-additional_state_closed",!i)):(e.find(".tau-list__itemexpander").toggleClass("tau-list__itemexpander_state_open").toggleClass("tau-list__itemexpander_state_closed"),e.find(".tau-list__table-additional").toggleClass("tau-list__table-additional_state_open").toggleClass("tau-list__table-additional_state_closed"))},"bus prioritize.start":function(){var t=this.$el.find(".ui-richeditor:visible");t.length&&t.prev().richeditor("hideEditor")},"bus preDataBind":function(t){var e=t.data;e.labelAdd=this.config.labelAdd||"Add"},"bus testCaseWasAdded":function(){this.fire("evictTestCases")},"bus evictTestCases":function(){var t=this.config.context.entity;this.config.context.configurator.getStore().evictProperties(t.id,t.entityType.name,["testCases","testCases-count"]),this.fire("refresh")},"bus afterRender":function(e){var i=e.data.element;this.$el=i;var a=i.find("[role=item]"),s=this;i.delegate("[role=item-expander-all]","click",function(){s._toggle(a,!0)}),i.delegate("[role=item-collapser-all]","click",function(){s._toggle(a,!1)});var n=this.config.context.configurator.getStore(),l=function(t,e){n.save("testcase",{id:t.id,$set:{lastStatus:e,lastFailureComment:null},fields:["id","lastStatus","lastRunDate"]}).done({success:function(){}})},o=t.bind(this.addTestCaseClickHandler,this);i.delegate("[role=action-add]","click",function(t){t.preventDefault(),t.stopPropagation(),o(t)}),i.delegate("[role=item-expander]","click",function(){var t=$(this),e=t.parents("[role=item]:first");s._toggle(e)}),i.delegate("[role=action-pass]","click",function(t){t.preventDefault(),t.stopPropagation();var e=$(this).parents("[role=item]:first"),i=e.data("tmplItem").data;l(i,!0),s._toggle(e,!1);var a=e.next("[role=item]");a.length&&s._toggle(a,!0)}),i.delegate("[role=action-fail]","click",function(t){t.preventDefault(),t.stopPropagation();var e=$(this).parents("[role=item]:first"),i=e.data("tmplItem").data,a=!1;l(i,a),s._toggle(e,!1);var n=e.next("[role=item]");n.length&&s._toggle(n,!0)})},addTestCaseClickHandler:function(t){this.bus.fire("action.add",{originalEvent:t,entity:this.config.context.entity})}})});
define('tau/components/component.container',["Underscore","tau/components/component.creator","tau/views/view.container","tau/components/extensions/component.creator.extension","tau/ui/extensions/layout/ui.extension.layout","tau/ui/extensions/spinner/ui.extension.spinner"],function(e,n,t,o,i,s){return{create:function(r){var u={extensions:e.concat([r.extensions,o,i,s]),ViewType:r.ViewType||t};return n.create(u,r)}}});
define('tau/models/dataprocessor/model.processor.context',["Underscore"],function(e){function t(t){return e.isUndefined(t)||e.isNull(t)?null:(t.checkPractice=v,t.isPracticeAvailable=v,t.getTimeTrackingPolicies=r,t.getEffortPoint=s,t.getTerms=i,t.getCustomFields=o,t.getPractices=c,t.getEdition=u,t.hasEdition=p,t.getTeam=l,t.getTeamId=m,t.getProject=a,t.getProjectId=h,t.getProcess=g,t.getLoggedUser=d,t.getProcessId=f,t)}var n=function(e,t){for(var n=null,r=e.processes[0].practices,s=0;s<r.length;s++)r[s].name.toLowerCase()===t.toLowerCase()&&(n=r[s]);return n},r=function(){var e=n(this.applicationContext,"Time Tracking"),t=!e;return{disableSpentRemain:t}},s=function(e){var t=n(this.applicationContext,"Planning")||{},r=t.effortPoints;if(e=e||this.entity.entityType.name.toLowerCase(),("task"===e||"request"===e)&&(r="Hour"),!r)return{};var s="point"===r.toLowerCase()?"pt":"h";return{name:r,shortName:s}},i=function(){var e=this.applicationContext;return e&&e.processes&&e.processes.length>0?e.processes[0].terms:[]},o=function(){var e=this.applicationContext;return e&&e.processes&&e.processes.length>0?e.processes[0].customFields:[]},c=function(){var e=this.applicationContext;return e&&e.processes&&e.processes.length>0?e.processes[0].practices:[]},a=function(){var e=this.applicationContext;return e&&e.selectedProjects&&e.selectedProjects.length>0?e.selectedProjects[0]:null},l=function(){var e=this.applicationContext;return e&&e.selectedTeams&&e.selectedTeams.length>0?e.selectedTeams[0]:null},u=function(){var t=this.applicationContext,n=t&&t.edition?t.edition:[];return e.isArray(n)?n:[n]},p=function(t){return e.indexOf(this.getEdition(),t)>=0},g=function(){var e=this.applicationContext;return e&&e.processes&&e.processes.length>0?e.processes[0]:null},d=function(){var e=this.applicationContext;return e&&e.loggedUser?e.loggedUser:null},f=function(){var e=this.getProcess();return e?e.id:null},h=function(){var e=this.getProject();return e?e.id:null},m=function(){var e=this.getTeam();return e?e.id:null},v=function(e){return null!==n(this.applicationContext,e)};return t});
define('tau/models/page.entity/entity.context.factory',["require","Underscore","libs/jquery/jquery","tau/models/dataprocessor/model.processor.context","tau/core/tau","tau/core/termProcessor"],function(e){var t=e("Underscore"),n=e("libs/jquery/jquery"),o=e("tau/models/dataprocessor/model.processor.context"),i=e("tau/core/tau"),r=e("tau/core/termProcessor"),a=i.Error,s=function(e){var n={};e.applicationContext.globalSettings=e.globalSettings,t.extend(n,{entity:e.entity,applicationContext:e.applicationContext,componentSettings:e.componentSettings,configurator:e.configurator});var i=o(n);return e.applicationContextAdditions.hasTeams&&(i.applicationContext.edition=["hasTeams"].concat(i.applicationContext.edition)),e.configurator.getTemplateFactory().setTermProcessor(new r(i.getTerms())),n},c={notFound:"%s with Id %d not found or access is forbidden",invalidType:'Entity type "%s" does not exist',context:"Context error",teams:"Teams error: %s"},u=["user","testcaserun"];return{create:function(e,o){var i=n.Deferred(),r=[];return r.push(function(e){var t=o.getGlobalSettingsService();t.getGlobalSettings({success:function(t){e(!1,t)},failure:function(){e(!1,{})}})}),r.push(function(n){var i=o.getApplicationContextService(),r="";t.contains(u,e.entityType.name.toLowerCase())||(r=e.id);var s=o.getFeaturesService().isEnabled("contextPrototype"),d=!1;s&&(d=o.getPrototypeContextEntityService().tryBuildContextFromContextPrototype(e.projectId,e.teamId)),d?n(!1,d):i.getApplicationContext({id:r},{success:function(e){n(!1,e)},failure:function(o){var i;if(r){var s="general"==e.entityType.name?"Entity":t.titleize(t.underscored(e.entityType.name).replace("_"," "));i=new a(t.sprintf(c.notFound,s,r)),n(i,o)}else i=new a(t.sprintf(c.context)),n(i,o)}})}.bind(this)),r.push(function(n){"general"==e.entityType.name?o.getStore().get(e.entityType.name,{id:e.id,fields:["id",{entityType:["id","name"]}],failureGlobal:!1}).done({success:function(e){n(!1,e[0].data)},failure:function(){n(new a(t.sprintf(c.notFound,"Entity",e.id)),{})}}):"user"==e.entityType.name?o.getStore().get(e.entityType.name,{id:e.id,fields:["id"],failureGlobal:!1}).done({success:function(){n(!1,e)},failure:function(){n(new a(t.sprintf(c.notFound,"User",e.id)),{})}}):n(!1,e)}),r.push(function(t){var n=o.getBoardSettingsFactory().createComponentSettings({id:e.entityType.name});t(!1,n)}),r.push(function(e){var n=o.getConfig("hasTeams");t.isUndefined(n)?o.getStore().get("team",{fields:["id"]}).done({success:function(t){var n=t[0].data.length>0;o.setConfig("hasTeams",n),e(!1,{hasTeams:n})},failure:function(n){e(new a(t.sprintf(c.teams,n)),{})}}):e(!1,{hasTeams:n})}),t.parallel(r,function(e,t){e?i.reject(e):i.resolve(s({globalSettings:t[0],applicationContext:t[1],entity:t[2],componentSettings:t[3],applicationContextAdditions:t[4],configurator:o}))}),i}}});
define('tau/models/page.entity/model.page.entity.context',["Underscore","tau/core/extension.base","tau/models/page.entity/entity.context.factory"],function(t,e,i){return e.extend({name:"Entity","bus initialize":function(t,e){e&&e.context.configurator.getStore().evictData()},"bus beforeInit":function(e,n){var r=t.isObject(n.config.entity)?n.config.entity:{id:n.config.id,type:n.config.entity},o=n.config.context.configurator,a=o.getStore().getTypes().findByKeyword(r.type);if(!a){var d=new Error(t.sprintf('Entity type "%s" does not exist',r.type));return void this.fire("loadingError.ready",d)}var c={id:r.id,entityType:{name:a.name}},y=o.getBoardCacheService(),f=y.getData()||{};r.id==f.id&&f.name&&(o.getStore().registerWithEvents({id:f.id,name:f.name,__type:r.type}),y.evict()),r.id==f.id&&(f.projectId||f.teamId)&&(c.projectId=f.projectId||null,c.teamId=f.teamId||null,y.evict()),this.fire("configurator.ready",o),i.create(c,o).done(t.bind(function(t){this.fire("entity.ready",t.entity),this.fire("contextRetrieved",{context:t})},this)).fail(t.bind(function(t){this.fire("loadingError.ready",t)},this))},"bus entity.ready + afterRender":function(t,e){this.fire("application.entity.loaded",{id:e.id,entity:e.entityType.name})}})});
define('tau/ui/templates/title/ui.template.title.clean',["tau/core/templates-factory"],function(t){var e={name:"title.clean",engine:"jqote2",markup:['<table class="ui-title ui-title_type_simple">',"<tbody>","<tr>","<td>",'<div class="ui-title__title i-role-title">',"<%! this.name %>","</div>","</td>","</tr>","</tbody>","</table>"]};return t.register(e)});
define('tau/ui/extensions/list/testcases/extension.list.testcases.actions.add.userStory',["Underscore","tau/components/extensions/component.extension.base","tau/components/component.container","tau/models/page.entity/model.page.entity.context","tau/core/component-base","tau/ui/templates/title/ui.template.title.clean"],function(t,e,s,n,i,a){return e.extend({"bus testCase.bubble.show":function(){var t=this.config.context,e=this,s=this.config.context.configurator,n=s.getStore();n.save("TestCase",{fields:["id","name",{userStory:["id"]},{project:["id"]}],$set:{name:"My test case",steps:"empty",success:"empty",userStory:{id:t.entity.id}}},{success:function(t){e.fire("testCase.draft.saved",{id:t.data.id})}}).done()},showTestCaseEditor:function(t){var e=this,s=$(t.originalEvent.target).tauBubble({onPositionConfig:function(t){t.offset="-20 0"}});s.bind("show",function(t,n){var i=n.popup.find(".tau-bubble__inner");i.html('<div class="test-case-wait-message">Adding test case. Please wait...</div>'),setTimeout(function(){e.fire("testCase.bubble.show",{$link:s,data:n})},1);var a={handleKeyDown:function(){}};e.config.context.configurator.getKeyBoardManager().pushHandler(a)}),s.bind("close",function(t,n){e.config.context.configurator.getKeyBoardManager().popHandler(),setTimeout(function(){e.fire("testCase.bubble.close",{$link:s,data:n})},1)}),s.tauBubble("show")},getTestCaseConfig:function(){return{layout:"list",cssClass:"test-case-quick-add-container",children:[{type:"title",template:a},{type:"container",layout:"table",cssClass:"test-case-description",cellsCssClass:["steps","success"],children:[{type:"container",children:[{type:"label",text:"Steps"},{type:"steps",richEditorHeight:100}]},{type:"container",children:[{type:"label",text:"Success"},{type:"success",richEditorHeight:100}]}]}]}},"bus testCase.quickAdd.container.ready + testCase.bubble.close":function(t,e){e.fire("destroy");var s=this.config.context,n=s.entity.id;this.fire("testCaseWasAdded",{assignable:{id:n}})},"bus testCase.draft.context.ready + testCase.bubble.show":function(t,e,n){var i=this,a=s.create({name:"quick add test case container",context:e.context});a.on("afterRender",function(t){var e=t.data.element,s=n.data.popup.find(".tau-bubble__inner");s.html('<div class="ui-quick-add-stats">Modify content for added test case</div>'),s.append(e),setTimeout(function(){$(".entity-title.editableText",s).click().html(""),i.fire("testCase.quickAdd.container.ready",a)},0)}),a.fire("initialize",this.getTestCaseConfig())},"bus testCase.draft.saved":function(t){var e=this,s=new i({name:"context retriever","queue.bus":!0,entity:{id:t.data.id,type:"testCase"},context:{configurator:this.config.context.configurator}}).attach(n),a=s.bus;a.on("contextRetrieved",function(t){e.fire("testCase.draft.context.ready",t.data),a.fire("destroy")}),a.fire("beforeInit")},"bus action.add":function(t){this.showTestCaseEditor(t.data)}})});
define('tau/ui/tags/ui.tag.term',["Underscore","jQuery","tau/core/termProcessor"],function(t,e,r){return e.extend(e.tmpl.tag,{term:{_default:{$1:"'type'",$2:"null"},open:["var $__t = $item;","while($__t.parent && !$__t.$tau){$__t = $__t.parent}","_=_.concat($__t.$tau.terms($2)[$1]);"].join("")}}),{register:function(t,e){var n=t.context&&t.context.getTerms?t.context.getTerms():[],$=new r(n);e.$tau=e.$tau||{},e.$tau.terms=function(t){return $.getTerms(t)}}}});
define('tau/ui/templates/list_/grid.entity/ui.template.cell.progress',["tau/core/templates-factory"],function(e){var i=["{{if !$item.parent.parent.data.config.currentView.timeTrackingPolicies.disableSpentRemain}}","Time spent: ${timeSpent}{{if timeSpent}}h{{/if}}  ","Time remain: {{if !timeRemain && timeRemain !== 0}}N/A{{else}}${timeRemain}{{if timeRemain}}h{{/if}}{{/if}}  ","{{/if}}","Percent complete: ${percentComplete}%"].join(""),t={name:"cell-progress",markup:["{{if $item.textMode}}",'<div class="tau-extension-tooltip" title="'+i+'">',"${Math.round(percentComplete)}%","</div>","{{else}}",'<div{{if percentFromMaximum == 0}} class="tau-extension-tooltip" title="'+i+'"{{/if}}>',"{{if percentFromMaximum > 0}}",'    <div class="ui-progress-bar-progress ui-progressbar__progress tau-extension-tooltip" style="width:${percentFromMaximum}%;" title="'+i+'">','        <span class="ui-progress-progress ui-progressbar__progress__indicator" style="width:${percentComplete}%;{{if percentComplete == 0}}display:none;{{/if}}"></span>',"    </div>","{{/if}}","</div>","{{/if}}"]};return e.register(t)});
define('tau/ui/templates/list_/grid.entity/ui.template.cell.assignments',["tau/core/templates-factory"],function(s){var a={name:"cell-assignments",markup:['<span class="ui-assignment__group">','<span class="ui-assignment__group__title tau-extension-tooltip" title="${role.fullName}">${role.name}</span>',"{{if users.length}}",'<span class="ui-assignment__group__users">',"{{each users}}",'<span class="ui-assignment__user">','<img style="width:24px; height:24px;" src="${avatarUrl}" alt="${name}" title="${name}" />',"</span>","{{/each}}","</span>","{{else}}",'<span class="ui-assignment__group__unassigned">Unassigned</span>',"{{/if}}","</span>"]};return s.register(a)});
define('tau/ui/templates/title/ui.template.title.simple',["tau/core/templates-factory"],function(e){var i={name:"title.simple",engine:"jqote2",markup:['<div class="ui-title ui-title_type_simple">','<div class="ui-title__title i-role-title"><%! this.name %></div>',"</div>"],dependencies:[]};return e.register(i)});
define('tau/ui/templates/list_/grid.entity/ui.template.cell.name',["tau/core/templates-factory","tau/ui/templates/title/ui.template.title.simple"],function(t){var a={name:"cell-name",markup:['<span class="tau-title-container">','<div class="tau-title tau-list-field-slot" title="${name}" runas="title" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}" data-template:name="title.simple">${name}</div>',"</span>",'{{if typeof tags !== "undefined" && tags && tags.length}}','   <span class="tau-tags">${tags[0]}</span>','   {{if tags.length > 1}}<span class="tau-tags">&#133;</span>{{/if}}',"{{/if}}"]};return t.register(a)});
define('tau/ui/tags/ui.tag.abbr',["jQuery","tau/utils/utils.translation"],function(t,a){return t.extend(t.tmpl.tag,{abbr:{open:["var $__t = $item;","while($__t.parent && !$__t.$tau){$__t = $__t.parent}","_=_.concat($__t.$tau.abbr($2));"].join("")}}),{register:function(t,n){n.$tau=n.$tau||{},n.$tau.abbr=a.shorten.bind(a)}}});
define('tau/ui/templates/common/ui.template.userIcon',["tau/core/templates-factory"],function(e){return e.register({name:"ui.template.userIcon",markup:["{{if $item.showUser}}",'<span class="ui-assignment__user user tau-avatar_${id}"  userId="${id}">','   <img src="${avatar}" style="width:24px; height:24px;" alt="${name}" title="${name}" class="user-name" />',"</span>","{{/if}}","{{if $item.showEllipsis}}",'   <span class="ui-assignment__user ui-assignment__user_count">+${$item.count}</span>',"{{/if}}"].join(""),dependencies:[]})});
define('tau/ui/templates/assignmentsList/ui.template.assignmentsList.userList.mini',["tau/core/templates-factory","tau/ui/tags/ui.tag.abbr","tau/ui/templates/common/ui.template.userIcon","tau/ui/templates/assignmentsList/ui.template.assignmentsList.addBtn"],function(s,e){var t={name:"ui.template.assignmentsList.userList.mini",tags:[e],dependencies:["assignments-add-btn","ui.template.userIcon"],markup:['<div class="ui-assignment__group group" roleId="${role.id}">','<span class="ui-assignment__group__title">','<span class="tau-extension-tooltip" title="{{= role.name}}">{{abbr(role.name)}}</span>',"</span>","{{if users.length}}",'<span class="ui-assignment__group__users">',"{{each users}} ","{{if $index < 2}}",'{{tmpl($value,{showUser:true}) "ui.template.userIcon"}}',"{{/if}}","{{if $index == 2}}",'{{tmpl($value,{showEllipsis:true,count:users.length-2}) "ui.template.userIcon"}}',"{{/if}}","{{/each}}","</span>","{{/if}}","{{if allowAdd}}",'<span class="ui-assignment__group__unassigned">{{tmpl "assignments-add-btn"}}</span>',"{{/if}}","</div>"]};return s.register(t)});
define('tau/ui/templates/assignmentsList/ui.template.assignments.mini',["tau/core/templates-factory","tau/ui/templates/assignmentsList/ui.template.assignmentsList.userList.mini"],function(s){var i={name:"ui.template.assignments.mini",markup:['<div class="assignments-table-readonly">','<div class="user-list">{{tmpl(assignments.groups) "ui.template.assignmentsList.userList.mini"}}</div>',"</div>"].join(""),dependencies:["ui.template.assignmentsList.userList.mini"]};return s.register(i)});
define('tau/ui/templates/property.effort/ui.template.property.effort.content',["tau/core/templates-factory"],function(t){var e="Estimated effort: ${effort}{{if effort}}${unit.shortName}{{/if}}",f={name:"ui.template.property.effort.content",markup:[' <div class="tau-extension-tooltip" title="'+e+'">','   <div class="entity-effort">${effort}<span class="entity-effort-info">${unit.shortName}</span></div>',"</div>"],dependencies:[]};return t.register(f)});
define('tau/ui/templates/list_/grid.entity/ui.template.list.grid.entity.row',["tau/core/templates-factory","tau/ui/templates/list_/grid.entity/ui.template.cell.progress","tau/ui/templates/list_/grid.entity/ui.template.cell.assignments","tau/ui/templates/list_/grid.entity/ui.template.cell.name","tau/ui/templates/assignmentsList/ui.template.assignments.mini","tau/ui/templates/property.effort/ui.template.property.effort.content"],function(t){var e={name:"list-grid-entity__row",markup:["",'<li class="tau-list__list__item" role="item">','<table class="tau-list__table">',"   <tbody>",'       <tr class="i-item-${id} tau-list__table__row {{if $item.data.entityState && $item.data.entityState.isFinal}} tau-list__table__row_isfinalstate_true{{/if}}">','<td class="tau-list__table__cell tau-list__table__cell-dragdrop"  role="sortable-handler" ><div class="dragdrop_indicator"></div></td>','<td class="tau-list__table__cell tau-list__table__cell-id">','   <a href="${url}"><em class="ui-type-icon ui-type-icon-${__type.toLowerCase()}">${id}</em></a>',"</td>",'<td class="tau-list__table__cell tau-list__table__cell-name">','   {{tmpl($item.data) "cell-name"}}',"</td>","{{if $item.parent.data.config.currentView.multiprojects}}","   {{if project}}",'   <td class="tau-list__table__cell tau-list__table__cell-project">${project.abbreviation}</td>',"   {{else}}",'   <td class="tau-list__table__cell  tau-list__table__cell-project">&nbsp;</td>',"   {{/if}}","{{/if}}","{{if visibleEntityState}}",'   <td class="tau-list__table__cell tau-list__table__cell-state">','       <div runas="property.entityState" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}">${visibleEntityState.name}</div>',"   </td>","{{/if}}","{{if severity}}",'   <td class="tau-list__table__cell tau-list__table__cell-severity">','       <span runas="property.severity" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}" class="tau-list-severity-${severity.kind}">${severity.name}</span>',"   </td>","{{else priority}}",'   <td class="tau-list__table__cell tau-list__table__cell-priority">','       <span class="tau-list-priority-${priority.kind}" runas="property.priority" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}">${priority.name}</span>',"   </td>","{{/if}}","{{if effortMock}}",'   <td class="tau-list__table__cell tau-list__table__cell-effort">',"   </td>",'   <td class="tau-list__table__cell tau-list__table__cell-progress">',"   </td>","{{/if}}","{{if effort}}",'   <td class="tau-list__table__cell tau-list__table__cell-effort">','      <div class="tau-list-field-slot" runas="property.effort" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}" data-entities-count="${entitiesCount}">','        {{tmpl({effort: effort.estimated, unit: effort.unit}) "ui.template.property.effort.content"}}',"      </div>","   </td>",'   <td class="tau-list__table__cell tau-list__table__cell-progress tau-list__table__cell-progress-text-mode">','       <div runas="progressBar.small"',' data-text-mode="true"',' data-items-count="${effort.percentFromCount}"',' data-max-width-percents="${effort.percentFromMaximum}"',' data-context:general:id="${id}"',' data-context:general:entity-type:name="${__type}"',">",'           {{tmpl(effort, {textMode: true}) "cell-progress"}}',"       </div>","   </td>","{{/if}}","{{if responsible}}",'<td class="tau-list__table__cell tau-list__table__cell-responsible">','    <div class="tau-responsible"> <span class="tau-label">Res.</span><span class="tau-responsible-component"><span class="tau-list-responsible" runas="property.responsible" data-hidename="true" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}">${responsible.firstName}</span></span></div>',"</td>","{{/if}}","{{if assignments}}",'<td class="tau-list__table__cell tau-list__table__cell-assignments">','   <div class="tau-list-field-slot" runas="assignmentsList" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}" data-template:name="ui.template.assignments.mini">{{tmpl(assignments.groups) "cell-assignments"}}</div>',"</td>","{{/if}}","{{if velocity}}",'   <td class="tau-list__table__cell tau-list__table__cell-velocity">${velocity.value}&nbsp;${velocity.unit.shortName}</td>',"{{/if}}","{{if assignedEffort}}",'   <td class="tau-list__table__cell tau-list__table__cell-assignedEffort">','   <div class="tau-extension-tooltip" title="Assigned Effort: ${assignedEffort.value}&nbsp;${assignedEffort.unit.shortName}">',"       <div>${assignedEffort.value}&nbsp;${assignedEffort.unit.shortName}</div>","   </div>","   </td>","{{/if}}","{{if startDate}}",'   <td class="tau-list__table__cell tau-list__table__cell-date">${startDate}</td>',"{{/if}}","{{if endDate}}",'   <td class="tau-list__table__cell tau-list__table__cell-date">${endDate}</td>',"{{/if}}",'   <td class="tau-list__table__cell tau-list__table__cell-actions">','<div class="tau-list-field-slot" ','runas="entity.menuTrigger" ','data-context:general:id="${id}" ','data-context:general:entity-type:name="${__type}" ','data-options:external="true"',">","</div>","   </td>",'<td class="tau-list__table__cell tau-list__table__cell-quickadd">','<div class="tau-list-field-slot" ','runas="entity.quickAddTrigger" ','data-context:general:id="${id}" ','data-context:general:entity-type:name="${__type}" ','data-options:external="true"',">","</div>","</td>","</tr>","</tbody>","</table>","</li>"],dependencies:["ui.template.property.effort.content","ui.template.assignments.mini","cell-progress","cell-assignments","cell-name"]};return t.register(e)});
define('tau/ui/templates/list_/grid.entity/testplan/ui.template.list.grid.entity.row.testplanrun',["tau/core/templates-factory","tau/ui/tags/ui.tag.term","tau/ui/templates/list_/grid.entity/ui.template.cell.progress","tau/ui/templates/list_/grid.entity/ui.template.cell.assignments","tau/ui/templates/list_/grid.entity/ui.template.cell.name","tau/ui/templates/assignmentsList/ui.template.assignments.mini","tau/ui/templates/property.effort/ui.template.property.effort.content"],function(t,e){var a={name:"list-grid-entity__rowtestplanrun",tags:[e],markup:["",'<li class="tau-list__list__item" role="item">','<table class="tau-list__table">',"<tbody>",'<tr class="i-item-${id} tau-list__table__row {{if $item.data.entityState && $item.data.entityState.isFinal}} tau-list__table__row_isfinalstate_true{{/if}}">','<td class="tau-list__table__cell tau-list__table__cell-dragdrop"  role="sortable-handler" ><div class="dragdrop_indicator"></div></td>','<td class="tau-list__table__cell tau-list__table__cell-id">','   <a class="tau-entitylink" href="${url}" title="${name}"><em class="ui-type-icon ui-type-icon-${__type.toLowerCase()}">${id}</em></a>',"</td>",'<td class="tau-list__table__cell tau-list__table__cell-stat">','<div class="tau-testCasesRunResults">','<div class="tau-testCasesRunResults-container">','<span title="Passed" class="tau-testCasesRunResults-item tau-testCasesRunResults-passed">${passedCount}</span>','<span title="Failed" class="tau-testCasesRunResults-item tau-testCasesRunResults-failed">${failedCount}</span>','<span title="Not Run" class="tau-testCasesRunResults-item tau-testCasesRunResults-notRun">${notRunCount}</span>',"</div>","</div>","</td>",'<td class="tau-list__table__cell tau-list__table__cell-release">','<div runas="property.release" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}" data-show-url="false" data-placeholder-text="assign to {{term("release") "name"}}">',"{{if release}}","${release.name}","{{/if}}","</div>","</td>","{{if isAvailableIteration}}",'<td class="tau-list__table__cell tau-list__table__cell-iteration">','<div runas="property.iteration" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}" data-show-url="false"  data-placeholder-text="assign to {{term("iteration") "name"}}">',"{{if iteration}}","${iteration.name}","{{/if}}","</div>","</td>","{{/if}}",'<td class="tau-list__table__cell tau-list__table__cell-build">','<div runas="property.build.testPlanRun" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}" data-show-url="false"  data-placeholder-text="assign to {{term("build") "name"}}">',"{{if build}}","${build.name}","{{/if}}","</div>","</td>","{{if assignments}}",'<td class="tau-list__table__cell tau-list__table__cell-assignments" >','   <div runas="assignmentsList" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}" data-template:name="ui.template.assignments.mini">{{tmpl(assignments.groups) "cell-assignments"}}</div>',"</td>","{{/if}}",'<td class="tau-list__table__cell tau-list__table__cell-additionalactions" >','<div runas="menu.testPlanRun" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}"></div>',"</td>",'<td class="tau-list__table__cell tau-list__table__cell-actions" >','<div class="tau-list-field-slot" ','runas="entity.menuTrigger" ','data-context:general:id="${id}" ','data-context:general:entity-type:name="${__type}" ','data-options:external="true"',">","</div>","</td>",'<td class="tau-list__table__cell tau-list__table__cell-quickadd" >','<div class="tau-list-field-slot" ','runas="entity.quickAddTrigger" ','data-context:general:id="${id}" ','data-context:general:entity-type:name="${__type}" ','data-options:external="true"',">","</div>","</td>","</tr>","</tbody>","</table>","</li>"],dependencies:["ui.template.property.effort.content","ui.template.assignments.mini","cell-progress","cell-assignments","cell-name"]};return t.register(a)});
define('tau/ui/templates/list_/grid.entity/testplanrun/ui.template.list.grid.entity.row.testcaserun',["tau/core/templates-factory","tau/ui/templates/list_/grid.entity/ui.template.cell.progress","tau/ui/templates/list_/grid.entity/ui.template.cell.assignments","tau/ui/templates/list_/grid.entity/ui.template.cell.name","tau/ui/templates/assignmentsList/ui.template.assignments.mini","tau/ui/templates/property.effort/ui.template.property.effort.content"],function(t){var e={name:"list-grid-entity__rowtestcaserun",markup:["",'<li class="tau-list__list__item tau-list__list__item-testcaserun" role="item">','<table class="tau-list__table">',"<tbody>",'<tr class="i-item-${testcase.id} tau-list__table__row">','<td class="tau-list__table__cell tau-list__table__cell-dragdrop"  role="sortable-handler" ><div class="dragdrop_indicator"></div></td>','<td class="tau-list__table__cell tau-list__table__cell-id">','   <a class="tau-entitylink" href="${testcase.url}" title="${testcase.name}"><em class="ui-type-icon ui-type-icon-testcase">${testcase.id}</em></a>',"</td>",'<td class="tau-list__table__cell tau-list__table__cell-name">','{{tmpl($item.data.testcase) "cell-name"}}',"</td>",'<td class="tau-list__table__cell tau-list__table__cell-priority">','<span class="tau-list-priority-${testcase.priority.kind}" runas="property.priority" data-context:general:id="${testcase.id}" data-context:general:entity-type:name="${testcase.__type}">',"${testcase.priority.name}","</span>","</td>",'<td class="tau-list__table__cell tau-list__table__cell-laststatus">',"<div>",'<div class="ui-status {{if passed === true}}ui-status_type_passed green{{/if}}{{if passed === false}}ui-status_type_failed red{{/if}}{{if passed === null}}ui-status_type_na grey{{/if}}">',"{{if runDate !== null}}","{{if passed === true}}","Passed","{{/if}}","{{if passed === false}}","Failed","{{/if}}","{{if passed === null}}","Skipped","{{/if}}","{{/if}}","</div>","</div>","</td>",'<td class="tau-list__table__cell tau-list__table__cell-actions" >','<div class="tau-list-field-slot" ','runas="entity.menuTrigger" ','data-context:general:id="${id}" ','data-context:general:entity-type:name="${__type}" ','data-options:external="true"',">","</div>","</td>",'<td class="tau-list__table__cell tau-list__table__cell-quickadd" >','<div class="tau-list-field-slot" ','runas="entity.quickAddTrigger" ','data-context:general:id="${id}" ','data-context:general:entity-type:name="${__type}" ','data-options:external="true"',">","</div>","</td>","</tr>","</tbody>","</table>","</li>"],dependencies:["ui.template.property.effort.content","ui.template.assignments.mini","cell-progress","cell-assignments","cell-name"]};return t.register(e)});
define('tau/ui/templates/list_/grid.entity/ui.template.list.grid.entity.group',["tau/core/templates-factory","tau/ui/templates/list_/grid.entity/ui.template.list.grid.entity.row","tau/ui/templates/list_/grid.entity/testplan/ui.template.list.grid.entity.row.testplanrun","tau/ui/templates/list_/grid.entity/testplanrun/ui.template.list.grid.entity.row.testcaserun"],function(t){var e={name:"list-grid-entity__group",markup:['<div class="tau-list__group {{if collapsed}} tau-list__group_collapsed_true{{/if}}" role="group">','   <div class="tau-list__group__header tau-list__group__collapse" role="expander">',"       {{if realGroup}}","           {{if realGroup.url}}",'           <a class="tau-list__group__id" href="${realGroup.url}"><em class="ui-type-icon ui-type-icon-${realGroup.__type}">${realGroup.id}</em></a>',"           {{/if}}","       {{/if}}",'       <span class="tau-list__group__title" role="title">${title}</span>','       {{if subtitle}}<span class="tau-list__group__subtitle" >${subtitle}</span>{{/if}}','       <span class="tau-list__group__counter{{if items.length == 0}} tau-list__group__counter__empty{{/if}}" role="counter">${items.length}</span>',"   </div>",'${$item.data.config=$item.parent.data.config,""}','   <ul class="tau-list__list" role="list">',"      {{tmpl(items) $item.parent.data.config.currentView.rowTemplateName }}","   </ul>","</div>"],dependencies:["list-grid-entity__row","list-grid-entity__rowtestplanrun"]};return t.register(e)});
define('tau/ui/templates/list_/grid.entity/userstory/ui.template.list.grid.entity.row.testcase',["tau/core/templates-factory","tau/ui/tags/ui.tag.term","tau/ui/templates/list_/grid.entity/ui.template.cell.progress","tau/ui/templates/list_/grid.entity/ui.template.cell.assignments","tau/ui/templates/list_/grid.entity/ui.template.cell.name","tau/ui/templates/assignmentsList/ui.template.assignments.mini","tau/ui/templates/property.effort/ui.template.property.effort.content"],function(t,e){var a={tags:[e],name:"list-grid-entity__rowtestcase",markup:["",'<li class="tau-list__list__item" role="item">','<table class="tau-list__table">',"<tbody>",'<tr class="i-item-${id} tau-list__table__row {{if $item.data.entityState && $item.data.entityState.isFinal}} tau-list__table__row_isfinalstate_true{{/if}}">','<td class="tau-list__table__cell tau-list__table__cell-dragdrop"  role="sortable-handler" ><div class="dragdrop_indicator"></div></td>','<td class="tau-list__table__cell tau-list__table__cell-expander tau-list__itemexpander tau-list__itemexpander_state_closed"  role="item-expander" ><div class="tau-list__itemexpander__indicator "></div></td>','<td class="tau-list__table__cell tau-list__table__cell-id">','   <a class="tau-entitylink" href="${url}" title="${name}"><em class="ui-type-icon ui-type-icon-${__type.toLowerCase()}">${id}</em></a>',"</td>",'<td class="tau-list__table__cell tau-list__table__cell-name">','   {{tmpl($item.data) "cell-name"}}',"</td>",'<td class="tau-list__table__cell tau-list__table__cell-lastrundate">','<div runas="property.lastRunDate.list" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}">',"${lastRunDate}","</div>","</td>",'<td class="tau-list__table__cell tau-list__table__cell-laststatus">','<div runas="property.lastStatus" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}">',"${lastStatus}","</div>","</td>",'<td class="tau-list__table__cell tau-list__table__cell-testcaseactions">','<div class="button-group">','<button class="button success" role="action-pass">Pass</button>','<button class="button danger" role="action-fail">Fail</button>',"</div>","</td>","</tr>","</tbody>","</table>",'<table class="tau-list__table tau-list__table-additional tau-list__table-additional_state_closed">',"<tbody>","<tr>",'<td class="tau-list__table__cell tau-list__table__cell-dragdrop"></td>','<td class="tau-list__table__cell tau-list__table__cell-expander-additional"></td>','<td class="tau-list__table__cell tau-list__table__cell-steps">','<div class="tau-steps">','<h4 class="tau-steps__header">Steps</h4>','<div class="tau-steps__content">','<div runas="steps" data-rich-editor-height="100" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}">',"${steps}","</div>","</div>","</div>","</td>",'<td class="tau-list__table__cell tau-list__table__cell-success">','<div class="tau-success">','<h4 class="tau-success__header">Success</h4>','<div class="tau-success__content">','<div runas="success" data-rich-editor-height="100" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}">',"${success}","</div>","</div>","</div>","</td>","</tr>","</tbody>","</table>","</li>"],dependencies:["ui.template.property.effort.content","ui.template.assignments.mini","cell-progress","cell-assignments","cell-name"]};return t.register(a)});
define('tau/ui/templates/list_/ui.template.list.comment',["tau/core/templates-factory"],function(t){var e={name:"list-grid__comment",markup:['<div class="ui-entity-state-comment" role="comment-form" style="display:none;">','<div class="ui-state-comment-header">Please, provide comment</div>','<div class="ui-state-comment-field-container">','<textarea rows="5" class="ui-state-comment-field"></textarea>',"</div>",'<div class="button-group">','<button type="button" class="save button">Save</button>','<button type="button" class="save button">Cancel</button>',"</div>","</div>"]};return t.register(e)});
define('tau/ui/templates/list_/grid.entity.testcase/ui.template.list.grid.entity.testcase',["tau/core/templates-factory","tau/ui/tags/ui.tag.term","tau/ui/templates/list_/grid.entity/ui.template.list.grid.entity.group","tau/ui/templates/list_/grid.entity/ui.template.list.grid.entity.row","tau/ui/templates/list_/grid.entity/testplan/ui.template.list.grid.entity.row.testplanrun","tau/ui/templates/list_/grid.entity/testplanrun/ui.template.list.grid.entity.row.testcaserun","tau/ui/templates/list_/grid.entity/userstory/ui.template.list.grid.entity.row.testcase","tau/ui/templates/list_/ui.template.list.comment"],function(t,e){var i={tags:[e],name:"list-grid-entity-testcase",markup:['<div class="tau-list tau-list-testcases">',"   {{if isEmpty === true}}",'<table class="tau-list__table tau-list__table-header">',"<tbody>",'<tr class="tau-list__table__row">','<td class="tau-list__table__cell tau-list__table__cell-header">',"</td>","</tr>","</tbody>","</table>",'      <div class="tau-list__empty-message">${config.currentView.emptyMessage}</div>',"   {{else}}",'     <div class="tau-list__content">',"       {{if groups && groups.length}}",'          {{tmpl(groups) "list-grid-entity__group"}}',"       {{/if}}","       {{if items && items.length}}",'           <div class="tau-list__group tau-list__group_flat_true"  role="group">','<table class="tau-list__table tau-list__table-header">',"<tbody>",'<tr class="tau-list__table__row">','<td class="tau-list__table__cell tau-list__table__cell-dragdrop"></td>','<td class="tau-list__table__cell tau-list__table__cell-expander tau-list__table__cell-header-expander" >','<div class="tau-list__itemexpander tau-list__itemexpander_state_closed"  role="item-expander-all">','<div class="tau-list__itemexpander__indicator "></div>',"</div>",'<div class="tau-list__itemexpander tau-list__itemexpander_state_open"  role="item-collapser-all">','<div class="tau-list__itemexpander__indicator "></div>',"</div>","</td>",'<td class="tau-list__table__cell tau-list__table__cell-header">',"</td>","</tr>","</tbody>","</table>",'               <ul class="tau-list__list"  role="list">',"                   {{tmpl(items) $item.data.config.currentView.rowTemplateName }}","               </ul>","           </div>","       {{/if}}","     </div>","   {{/if}}",'   <div class="tau-list__comment-holder">','          {{tmpl({}) "list-grid__comment"}}',"   </div>","</div>"],dependencies:["list-grid-entity__group","list-grid-entity__row","list-grid-entity__rowtestplanrun","list-grid-entity__rowtestcaserun","list-grid-entity__rowtestcase","list-grid__comment"]};return t.register(i)});
define('tau/models/dataProviders/userstory/userstory.model.provider.tasks.items',["Underscore","tau/models/dataProviders/model.provider.items.base"],function(t,e){return e.extend({fetch:function(t){this._fetch("tasks","task","priority",t)},_createDetailCommand:function(t){var e={};return e[t]=["id","name","numericPriority","tags","effort","effortCompleted","effortToDo","timeSpent","timeRemain",{userStory:["id"]},{entityState:this.fields.entityStateWithComment},{roleEfforts:["id","effort","effortToDo",{role:["id","name","isPair","hasEffort"]}]},{owner:["id","firstName","lastName"]},{assignments:["id",{role:["id"]},{generalUser:this.fields.generalUser}]},{priority:["id","name","importance"]},{project:["id"]}],e},_convertData:function(t){return t=this._super(t),t=this._calculateEffortToMaximum(t),this._sortByPriority(t)},_convertItem:function(t){t.project=t.project||{};var e={id:t.id,name:t.name,numericPriority:t.numericPriority,__type:t.__type,entityState:{id:t.entityState.id,name:t.entityState.name,isInitial:t.entityState.isInitial,isFinal:t.entityState.isFinal,numericPriority:t.entityState.numericPriority},tags:this._processTags(t),effort:this._getEffortData(t),assignments:this._processAssignments(t),priority:null,projectId:t.project.id,entitiesCount:0,url:this.config.context.configurator.getUrlBuilder().getNewViewUrl(t.id,t.__type,!0)};return e.visibleEntityState=e.entityState,e}})});
define('tau/models/dataProviders/entity/entity.model.provider.bug.items',["Underscore","tau/models/dataProviders/model.provider.items.bugs"],function(t,e){return e.extend({_convertData:function(t){return t=this._super(t),t=this._calculateEffortToMaximum(t),this._sortByPriority(t)},_convertItem:function(t){var e=this._super(t);return e.visibleEntityState=e.entityState,e}})});
define('tau/ui/extensions/list/request/extension.list.entityState',["tau/components/extensions/component.extension.base"],function(t){return t.extend({destroy:function(){this.config.store.unbind(this)},"bus afterInit+dataBind+afterRender":function(t){var e=t.afterInit.data.config.store,n=t.dataBind.data.items,a=t.afterRender.data.element,i=_.pluck(n,"id");e.on({eventName:"afterSave",type:"general",listener:this,hasChanges:["entityState"]},function(t){var n=t.data.id;-1!=_.indexOf(i,n)&&e.get(t.data.cmd.type,{id:n,fields:["id",{entityState:["id","isFinal"]}]}).done({success:function(t){var e=t[0].data.entityState.isFinal;a.find(".i-item-"+n).toggleClass("tau-list__table__row_isfinalstate_true",e)}})})}})});
define('tau/configurations/userStory.container.config',["Underscore","tau/configurations/baseAssignable.container.config","tau/models/model.extensions","tau/components/extensions/requestsList/extensions.requestList.labelRefresher","tau/components/extensions/testCaseList/extensions.testCaseList.labelRefresher","tau/components/extensions/entity/extension.requestList.remover","tau/models/dataProviders/model.provider.items.tasks_bugs","tau/models/dataProviders/model.provider.groups.tasks_bugs","tau/ui/extensions/list/extension.list.refresher","tau/models/dataProviders/userstory/userstory.model.provider.testcases.items","tau/ui/extensions/list/testcases/extension.list.testcases.actions","tau/ui/extensions/list/testcases/extension.list.testcases.actions.add.userStory","tau/ui/templates/list_/grid.entity.testcase/ui.template.list.grid.entity.testcase","tau/models/dataProviders/userstory/userstory.model.provider.tasks.items","tau/models/dataProviders/entity/entity.model.provider.bug.items","tau/ui/extensions/list/request/extension.list.entityState"],function(e,t,s,i,a,n,r,o,l,d,c,u,p,m,y,g){return t.extend({init:function(e){this._super(e);var t=this;this.registerTab("Tasks",{label:"tasks",header:[{type:"label",text:t.getNames("task"),countFieldNames:["tasks"]}],items:[{type:"container",spinnerConfigForLazy:this.getSpinnerConfigForLazy(),children:[{type:"container",lazy:!0,name:"lazyPlaceholder container",children:[{type:"quick.add",printable:!1,property:"userStory",entityType:"task",evictProperties:["tasks","tasks-count"],label:"Add "+t.getNames("task")},{type:"list.editable",extensions:[l,g],externalRefreshEvents:["task.items.added"],itemsDataProvider:m,multiprojects:!0,views:[{type:"grid.entity"}]}]}]}]}),this.registerTab("Bugs",{label:"bugs",practices:["Bug Tracking"],header:[{type:"label",text:t.getNames("bug"),countFieldNames:["bugs"]}],items:[{type:"container",spinnerConfigForLazy:this.getSpinnerConfigForLazy(),practices:["Bug Tracking"],children:[{type:"container",lazy:!0,name:"lazyPlaceholder container",practices:["Bug Tracking"],children:[{practices:["Bug Tracking"],type:"quick.add",printable:!1,property:"userStory",entityType:"bug",evictProperties:["bugs","bugs-count"],label:"Add "+t.getNames("bug")},{type:"list.editable",extensions:[l,g],practices:["Bug Tracking"],externalRefreshEvents:["bug.items.added"],itemsDataProvider:y,multiprojects:!0,views:[{type:"grid.entity"}]}]}]}]}),this.registerTab("Test Cases",{label:"testcases",header:[{type:"label",text:t.getNames("testCase"),countFieldNames:["testCases"],extensions:[a]}],items:[{type:"container",spinnerConfigForLazy:this.getSpinnerConfigForLazy(),practices:["Test Cases"],children:[{type:"container",lazy:!0,name:"lazyPlaceholder container",practices:["Test Cases"],children:[{practices:["Test Cases"],type:"quick.add",printable:!1,property:"userStory",additionalFieldsSet:{steps:"&nbsp;",success:"&nbsp;"},entityType:"testCase",evictProperties:["testCases","testCases-count"],label:"Add "+t.getNames("testcase")},{type:"list.editable",itemsDataProvider:d,multiprojects:!0,practices:["Test Cases"],externalRefreshEvents:["testCase.items.added"],views:[{type:"grid.entity.testcase",rowTemplateName:"list-grid-entity__rowtestcase",emptyMessage:"No test cases found"}],template:p,extensions:[c,u]}]}]}],practices:["Test Cases"]})},getTabsAliases:function(){return["Description","Tasks","Bugs","Test Cases","Relations","Source","Flow","Time","History"]},getPanelsAliases:function(){return["Look Switcher","Diagnostic","Progress Bar","Requests","Impediments","Assignments","Additional Info",!$.browser.msie||this.isIE9()?["Lead Cycle Time"]:[],"Custom Fields"]},getActionsAliases:function(){return["Split","Add Task","Add Time","Add Bug","Add Test Case","Add Impediment","Attach to Request","Move or Copy","Copy to project","Convert","-----","Old Edit","Print","-----","Delete"]},getEntityQuickAddOptions:function(){return{items:[{entityType:"time",relationName:"times",practices:["Time Tracking"]},{entityType:"task",relationName:"tasks"},{entityType:"bug",relationName:"bugs",practices:["Bug Tracking"]},{entityType:"testcase",relationName:"testCases",practices:["Test Cases"]},{entityType:"impediment",relationName:"impediments"}]}},getAdditionalInfoAliases:function(){return e.union(["Project","Team","Owner","Business Value","Release","Iteration","Team Iteration","Feature","StartDate","CompletionDate","PlannedStartDate","PlannedEndDate"],$.browser.msie&&!this.isIE9()?["CycleTime","LeadTime","CreationDate","CompletionDate"]:[])}})});
define('tau/configurations/task.container.config',["Underscore","tau/configurations/baseAssignable.container.config"],function(e,t){return t.extend({getAdditionalInfoAliases:function(){return["Project","Team","Owner","User Story For Task","CreationDate","StartDate","CompletionDate","PlannedStartDate","PlannedEndDate"]},getActionsAliases:function(){return["Add Time","Add Impediment","Attach to Request","Convert","-----","Old Edit","Print","-----","Delete"]},getPanelsAliases:function(){return["Look Switcher","Diagnostic","Progress Bar","Requests","Impediments","Assignments","Additional Info","Custom Fields"]},getEntityQuickAddOptions:function(){return{items:[{entityType:"time",relationName:"times",practices:["Time Tracking"]},{entityType:"impediment",relationName:"impediments"}]}}})});
define('tau/configurations/bug.container.config',["Underscore","tau/configurations/baseAssignable.container.config"],function(e,t){return t.extend({init:function(e){this._super(e),this.registerPanel("Duplicated Bugs",{type:"duplicateBugListPanel"})},getAdditionalInfoAliases:function(){return e.union(["Project","Team","Owner","Business Value","Severity","Release","Iteration","Team Iteration","User Story","Feature","Build","StartDate","CompletionDate","PlannedStartDate","PlannedEndDate"],$.browser.msie&&!this.isIE9()?["CycleTime","LeadTime","CreationDate","CompletionDate"]:[])},getEntityQuickAddOptions:function(){return{items:[{entityType:"time",relationName:"times",practices:["Time Tracking"]},{entityType:"impediment",relationName:"impediments"}]}},getActionsAliases:function(){return["Add Time","Add Impediment","Attach to Request","Move or Copy","Copy to project","Convert","Find Duplicate","-----","Old Edit","Print","-----","Delete"]},getPanelsAliases:function(){return e.union(["Look Switcher","Diagnostic","Progress Bar","Requests","Duplicated Bugs","Impediments","Assignments","Additional Info"],!$.browser.msie||this.isIE9()?["Lead Cycle Time"]:[],["Custom Fields"])}})});
define('tau/ui/extensions/list/request/extension.related_entities.action.detach',["tau/components/extensions/component.extension.base"],function(e){return e.extend({"bus afterRender":function(e){var t=e.data.element,i=this.config.store,n=this.config.context.entity,s=this.bus;t.delegate("[role=action-detach]","click",function(e){var t=$(e.target).parents("[role=item]:first"),r=t.data("tmplItem").data;i.removeFromList(r.__type,{id:r.id,$set:{relatedRequests:{id:n.id}}}).done({success:function(){i.save("request",{id:n.id,$set:{relatedEntities:[]}}).done(),i.evictProperties(n.id,n.entityType.name,["relatedEntities","relatedEntities-count"]),s.fire("refresh")}})})}})});
define('tau/models/dataProviders/request/request.model.provider.requesters.items',["Underscore","tau/models/dataProviders/model.provider.items.base","tau/utils/utils.date"],function(e,t,r){return t.extend({fetch:function(e){this._fetch("requesters","user",null,e)},_convertData:function(t){return t=this._super(t),e.reject(t,function(e){return null!=e.deleteDate})},_createDetailCommand:function(e){var t={};return t[e]=["id","firstName","lastName","deleteDate","email","login","kind"],t},_convertItem:function(e){var t=this.config.context.configurator.getUrlBuilder(),a=this.config.context.configurator.getFeaturesService().isEnabled("tp3.only"),i={id:e.id,firstName:e.firstName,lastName:e.lastName,deleteDate:e.deleteDate,login:e.login,email:e.email,endDate:r.format.date.short(e.endDate),avatar:t.getAvatarUrl(e.id,32),url:a?"user"==e.kind.toLowerCase()?t.getNewViewUrl(e.id,"user",!0):null:t.getUserUrl(e.id,e.kind)};return i}})});
define('tau/ui/extensions/list/testplan/extension.list.editableCells',["tau/components/extensions/component.extension.base"],function(e){return e.extend({"bus afterRender+component.ready":function(e){var t=e.afterRender.data.element;t.find(".tau-list__table__cell:has(.tau-property_editable_true)").addClass("tau-list__table__cell_editable_true"),t.delegate(".tau-list__table__cell:has(.tau-property_editable_true)","click",function(e){0==$(e.currentTarget).hasClass("tau-property__value")&&(e.stopPropagation(),$(this).find(".tau-property__value").click())})}})});
define('tau/ui/extensions/list/request/extension.requesters.tabs',["tau/components/extensions/component.extension.base"],function(t){return t.extend({"bus afterRender":function(t){var e=this.$el=t.data.element;setTimeout(function(){e.find(":input[data-autofocus]:visible").focus()},10)},"bus tabs.switched":function(){var t=this;setTimeout(function(){t.$el.find(":input[data-autofocus]:visible").focus()},10)}})});
define('tau/ui/extensions/list/request/extension.requesters.action.add',["tau/components/extensions/component.extension.base","tau/ui/extensions/list/request/extension.requesters.tabs"],function(e,t){return e.extend({"bus afterInit":function(e){var t=e.data.config.store,n=e.data.config.context.entity,s=this;t.unbind(this),t.on({eventName:"afterSave",type:n.entityType.name,listener:this,filter:{id:n.id},hasChanges:["requesters"]},function(){t.evictProperties(n.id,n.entityType.name,["requesters"]),s.fire("refresh")})},"bus afterRender":function(e){var n=e.data.element.find("[role=action-add]"),s={actionOnBlur:"destroy",target:n,alignTo:n,componentsConfig:{components:[{type:"tabs",tabsHeader:{type:"tabsHeader",options:{more:!1}},cssClass:"tau-tabs-small",extensions:[t],tabs:[{label:"select",header:[{type:"label",text:"Select requester"}],items:[{type:"finder.requesters"}],selected:!0},{label:"add",header:[{type:"label",text:"Add new"}],items:[{type:"editor.requester"}]}]}]}};this.fire("initBubble",s);var a=function(){n.tauBubble("empty")};n.on("close externalClose",a),n.on("show",function(){var e=n.tauBubble("widget");e.delegate("[role=action-cancel]","click",a)})}})});
define('tau/ui/extensions/list/request/extension.requesters.action.detach',["tau/components/extensions/component.extension.base","tau/components/extensions/bubble/extension.bubble.creator","tau/components/extensions/component.creator.extension"],function(e){return e.extend({"bus afterRender":function(e){var t=e.data.element,n=this.config.store,o=this.config.context.entity,s=this.bus;t.delegate("[role=action-detach]","click",function(e){var t=$(e.target).parents("[role=item]:first"),i=t.data("tmplItem").data;n.removeFromList("request",{id:o.id,$set:{requesters:{id:i.id}}}).done({success:function(){s.fire("refresh")}})})}})});
define('tau/configurations/request.container.config',["Underscore","tau/configurations/baseAssignable.container.config","tau/models/model.extensions","tau/ui/extensions/list/request/extension.related_entities.action.detach","tau/models/dataProviders/request/request.model.provider.requesters.items","tau/ui/extensions/list/testplan/extension.list.editableCells","tau/ui/extensions/list/request/extension.list.entityState","tau/ui/extensions/list/request/extension.requesters.action.add","tau/components/extensions/bubble/extension.bubble.creator","tau/components/extensions/component.creator.extension","tau/ui/extensions/list/request/extension.requesters.action.detach"],function(e,t,i,s,n,r,o,a,u,l,d){return t.extend({init:function(e){this._super(e),this.registerAdditionalInfoItem("Owner",{label:{text:"Owner"},field:{type:"property.owner.request"}}),this.registerAdditionalInfoItem("RequestType",{label:{text:this.getTermName("RequestType")},field:{type:"property.requestType"}}),this.registerAdditionalInfoItem("Source",{label:{text:"Source"},field:{type:"property.requestSource"}}),this.registerTab("Requesters",{label:"requesters",header:[{type:"label",text:"Requesters",countFieldNames:["requesters"]}],items:[{type:"container",lazy:!0,name:"lazyPlaceholder container",children:[{type:"list",sortable:!1,itemsDataProvider:n,extensions:[a,u,l,d],views:[{rowTemplateName:"list-grid-entity__row_requester",type:"grid.entity.requesters"}]}]}]})},getTabsAliases:function(){return["Description","Requesters","Relations","Flow","Time","History"]},getAdditionalInfoAliases:function(){return["Project","Team","Owner","Business Value","IsPrivate","RequestType","Source","CreationDate","StartDate","CompletionDate","PlannedStartDate","PlannedEndDate"]},getEntityQuickAddOptions:function(){return{items:[{entityType:"time",relationName:"times",practices:["Time Tracking"]}]}},getActionsAliases:function(){return["Add Time","Create","Move or Copy","Copy to project","Convert","-----","Old Edit","Print","-----","Delete"]}})});
define('tau/models/dataProviders/testplanrun/testplanrun.model.provider.testcaseruns.items',["Underscore","tau/models/dataProviders/model.provider.items.base"],function(e,t){return t.extend({fetch:function(e){this._fetch("testCaseRuns","testCaseRun","priority",e)},_createDetailCommand:function(e){var t={};return t[e]=["id","passed","executed","runDate",{testCases:["id","name","tags","numericPriority",{priority:["id","name","importance"]}]}],t},_convertData:function(t){return t=this._super(t),t=e.compact(t),e.sortBy(t,function(e){var t=e.testcase.numericPriority||0;return t})},_convertItem:function(e){if(0==e.testCases.length)return null;var t=e.testCases[0];t.priority.kind=this.importanceProcessor.getKind(t.priority.importance);var r={id:e.id,__type:e.__type,name:t.name,testcase:{id:t.id,__type:t.__type,name:t.name,tags:this._processTags(t),priority:t.priority,numericPriority:t.numericPriority,url:this.config.context.configurator.getUrlBuilder().getNewViewUrl(t.id,t.__type,!0)},passed:e.passed,runDate:e.runDate,executed:e.executed,status:e.passed===!0?"Passed":e.passed===!1?"Failed":"Skipped"};return r}})});
define('tau/ui/extensions/list/testplanrun/extension.list.testcaseruns.refresher',["Underscore","tau/core/extension.base"],function(e,n){return n.extend({"bus beforeInit":function(n,t){var i=t.config.context,o=i.configurator,r=i.entity,s=r.entityType.name,a=this,f=o.getStore();f.unbind(this),e.forEach(["passedCount","failedCount","notRunCount"],function(e){f.on({eventName:"afterSave",type:s,listener:a,filter:{id:r.id},hasChanges:[e]},function(){f.evictProperties(r.id,s,["testCaseRuns"]),a.fire("refresh")})})}})});
define('tau/configurations/testplanrun.container.config',["Underscore","tau/configurations/baseAssignable.container.config","tau/models/model.extensions","tau/models/dataProviders/testplanrun/testplanrun.model.provider.testcaseruns.items","tau/ui/extensions/list/testplanrun/extension.list.testcaseruns.refresher"],function(e,t,s,n,i){return t.extend({init:function(e){this._super(e),this.registerAdditionalInfoItem("Build",{label:{text:this.getTermName("build")},field:{type:"property.build.testPlanRun"}}),this.registerPanel("Last Run",{type:"collapsible",stateName:"lastRun",collapsed:!1,header:[{type:"label",text:"Last Run"}],items:[{type:"container",lazy:!0,name:"lazyPlaceholder container",children:[{type:"testCasesRunResults"}]}]}),this.registerTab("Test Case Runs",{label:"testcaseruns",header:[{type:"label",text:this.getNames("testCaseRun"),countFieldNames:["testCaseRuns"]}],items:[{type:"container",spinnerConfigForLazy:this.getSpinnerConfigForLazy(),practices:["Test Cases"],children:[{type:"container",lazy:!0,practices:["Test Cases"],name:"lazyPlaceholder container",children:[{type:"list",itemsDataProvider:n,extensions:[i],sortable:!1,views:[{rowTemplateName:"list-grid-entity__rowtestcaserun",type:"grid.entity",emptyMessage:"No items found"}]}]}]}],practices:["Test Cases"]}),this.registerTab("Test Runs",{label:"testCases",header:[{type:"label",text:"Test Runs",countFieldNames:["testCaseRuns"]}],items:[{name:"TestCaseRuns",type:"view.new.list",definition:{cells:{types:["testcaserun"]},cardSettings:{list_testcaserun:{list:[[{id:"tcr_name",order:0},{id:"tcr_id",order:1},{id:"tcr_run_date",order:2},{id:"tcr_status",order:3},{id:"tcr_comment",order:4}]]}}},lazy:!0,spinnerConfigForLazy:this.getSpinnerConfigForLazy()}]})},getAdditionalInfoAliases:function(){return["Project","Team","Test Plan","Build","Release","Iteration","Team Iteration","CreationDate","StartDate","CompletionDate","PlannedStartDate","PlannedEndDate"]},getActionsAliases:function(){return["Add Time","-add-","Old Edit","Print","-----","Delete"]},getPanelsAliases:function(){return["Look Switcher","Diagnostic","Progress Bar","Last Run","Impediments","Assignments","Additional Info","Custom Fields"]},getTabsAliases:function(){var e=this.configurator.getFeaturesService().isEnabled("qa.area.improvements");return["Description",e?"Test Runs":"Test Case Runs","Relations","Flow","Time","History"]},getEntityMenuOptions:function(){return{type:"menu.actions.testplanrun",items:this.getActions()}},getEntityQuickAddOptions:function(){return{items:[{entityType:"time",relationName:"times",practices:["Time Tracking"]}]}}})});
define('tau/models/dataProviders/testcase/testcase.model.provider.testcaseruns.items',["Underscore","tau/models/dataProviders/model.provider.items.base","tau/utils/utils.date"],function(e,t,n){return t.extend({fetch:function(e){this._fetch("testCaseRuns","testCaseRun","priority",e)},_createDetailCommand:function(e){var t={};return t[e]=["id","passed","executed","comment","runDate",{testPlanRun:["id","name","tags","numericPriority",{testPlan:["id","name"]},{priority:["id","name","importance"]},{release:["id","name"]},{iteration:["id","name"]},{build:["id","name"]}]}],t},_convertData:function(t){return t=this._super(t),t=e.compact(t),e.sortBy(t,function(e){return e.runDateReal}).reverse()},_convertItem:function(e){if(null==e.runDate)return null;if(null===e.passed)return null;var t=e.testPlanRun,a=t.testPlan,r={id:e.id,__type:e.__type,name:a.name,testplan:a,comment:e.comment,testplanrun:{id:t.id,__type:t.__type,name:t.name,url:this.config.context.configurator.getUrlBuilder().getNewViewUrl(t.id,t.__type,!0)},release:t.release,iteration:t.iteration,build:t.build,passed:e.passed,runDate:n.format.datetime.short(n.convertToTimezone(e.runDate)),runDateReal:e.runDate,executed:e.executed,status:e.passed===!0?"Passed":e.passed===!1?"Failed":"Skipped"};return r}})});
define('tau/configurations/testcase.container.config',["tau/configurations/baseContainable.container.config","tau/models/model.extensions","tau/models/dataProviders/testcase/testcase.model.provider.testcaseruns.items"],function(e,t,s){var n=e.extend({init:function(t){e.prototype.init.call(this,t),this.registerTab("Test Case Runs",{label:"testcaseruns",header:[{type:"label",text:"Runs"}],items:[{type:"container",spinnerConfigForLazy:this.getSpinnerConfigForLazy(),practices:["Test Cases"],children:[{type:"container",lazy:!0,name:"lazyPlaceholder container",practices:["Test Cases"],children:[{type:"list",itemsDataProvider:s,sortable:!1,views:[{rowTemplateName:"list-grid-entity__rowtestcaserun_testcase",type:"grid.entity",emptyMessage:"No items found"}]}]}]}],practices:["Test Cases"]})},getTabs:function(){var e=this._super.apply(this,arguments);return e[0].items[0].children[0].children[1]={type:"container",layout:"table",cssClass:"test-case-description",cellsCssClass:["steps","success"],children:[{type:"container",children:[{type:"label",text:"Steps"},{type:"steps"}]},{type:"container",children:[{type:"label",text:"Success"},{type:"success"}]}]},e},getTabsAliases:function(){return["Description","Test Case Runs","Relations","Time","History"]},getActionsAliases:function(){return["Move or Copy","Copy to project","-----","Old Edit","Print","-----","Delete"]},getAdditionalInfoAliases:function(){return["Project","Business Value","User Story","Owner","CreationDate","Last Status","LastFailureComment","Last Run Date"]}});return n});
define('tau/configurations/testcaserun.container.config',["tau/configurations/baseContainable.container.config"],function(e){var t=e.extend({init:function(t){e.prototype.init.call(this,t),this.registerTab("Description",{selected:!0,label:"description",header:[{type:"label",text:"Description"}],items:[{type:"container",spinnerConfigForLazy:this.getSpinnerConfigForLazy(),children:[{type:"container",lazy:!0,name:"lazyPlaceholder container",children:[{type:"container",layout:"table",cssClass:"test-case-description",cellsCssClass:["steps","success"],children:[{type:"container",children:[{type:"label",text:"Steps"},{type:"steps",editable:!1}]},{type:"container",children:[{type:"label",text:"Success"},{type:"success",editable:!1}]}]},{type:"testcaserun.result.editor"}]}]}]})},getTabsAliases:function(){return["Description"]},getActionsAliases:function(){return["Print"]},getAdditionalInfoAliases:function(){return["Test Case","Test Plan Run","Test Case Run Status","Failure Comment","Run Date"]}});return t});
define('tau/components/extensions/testCaseList/extension.testPlanRun.testCaseList.edit.addTestCase',["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/core/termProcessor"],function(e,t,n,a){return n.extend({"bus afterRender+permissionsReady+dataBind":function(e){if(e.permissionsReady.data.editable){var n=(e.dataBind.data,e.afterRender.data.element),s=this.config.context.getTerms(),r=new a(s),d=n.find(".tau-add-testCase"),i=t('<a class="tau-add-testCase">Add '+r.getTerms("TestCase").names+"</a>");i.attr("href",this.config.context.configurator.getUrlBuilder().getAddTestCaseForTestPlanRunUrl(this.config.context.entity.id)),i.text(d.text()),d.replaceWith(i)}}})});
define('tau/models/dataProviders/testplan/testplan.model.provider.testplanruns.items',["Underscore","tau/models/dataProviders/model.provider.items.base"],function(t,i){return i.extend({fetch:function(t){this._fetch("testPlanRuns","testPlanRun","severity",t)},_createDetailCommand:function(i){var e={};e[i]=["id","name","numericPriority","tags","effort","effortCompleted","effortToDo","timeSpent","timeRemain","passedCount","failedCount","notRunCount","testCaseRuns-count",{entityState:this.fields.entityStateWithComment},{roleEfforts:["id","effort","effortToDo",{role:["id","name","isPair","hasEffort"]}]},{assignments:["id",{role:["id"]},{generalUser:this.fields.generalUser}]},{release:["id","name"]},{iteration:["id","name"]},{build:["id","name"]}];var n={project:["id"]};return this.config.multiprojects&&n.project.push("abbreviation"),e[i].push(n),this.config.additionalFields&&t.indexOf(this.config.additionalFields,"iteration")>-1&&e[i].push({iteration:["id","name"]}),e},_convertData:function(i){return i=this._super(i),t.sortBy(i,function(t){var i=t.numericPriority||0;return i})},_convertItem:function(i){var e=!0;this.config.context.isPracticeAvailable("Iterations")||(e=!1),i.project=i.project||{};var n={id:i.id,name:i.name,numericPriority:i.numericPriority,__type:i.__type,entityState:{id:i.entityState.id,name:i.entityState.name,isInitial:i.entityState.isInitial,isFinal:i.entityState.isFinal,numericPriority:i.entityState.numericPriority},assignments:this._processAssignments(i),projectId:i.project.id,entitiesCount:0,release:i.release,iteration:i.iteration,build:i.build,passedCount:t.toNumber(i.passedCount)||0,failedCount:t.toNumber(i.failedCount)||0,notRunCount:t.toNumber(i.notRunCount)||0,url:this.config.context.configurator.getUrlBuilder().getNewViewUrl(i.id,i.__type,!0),isAvailableIteration:e,additionalActions:{}};return this.config.multiprojects&&(n.project={id:i.project.id,abbreviation:i.project.abbreviation}),this.config.additionalFields&&t.indexOf(this.config.additionalFields,"iteration")>-1&&(n.iteration={id:i.iteration?i.iteration.id:null,name:i.iteration?i.iteration.name:null}),n}})});
define('tau/models/dataProviders/strategies/model.provider.groups.strategy.base',["Underscore","tau/core/class"],function(e,n){return n.extend({fetch:function(){},moveToGroup:function(){},isAvailableForItem:function(){},getCommentRequirements:function(){}})});
define('tau/models/dataProviders/strategies/model.provider.groups.strategy.states',["Underscore","tau/models/dataProviders/strategies/model.provider.groups.strategy.base"],function(e,t){return t.extend({fetch:function(){},moveToGroup:function(t,n,i,r,o){var s=e.find(r.realGroups,function(e){return e.id==n.entityState.id}),u=e.find(i.realGroups,function(e){return e.entityType.name.toLowerCase()==n.__type.toLowerCase()&&e.process.id==s.process.id});if(!u||u.id==s.id)return void o.call(null);var d=[];d.push(function(e){t.save(n.__type,{id:n.id,$set:{entityState:{id:u.id}},fields:["id",{entityState:["id","name","isFinal"]}]}).done({success:function(){e(null,arguments)}})}),d.push(function(e){t.get(n.__type,{id:n.id,fields:["id",{entityState:["id","name","isFinal"]}]}).done({success:function(t){e(null,t[0].data)}})}),e.series(d,function(t,n){e.isFunction(o)&&o.call(null,{changed:n[1]})})},isAvailableForItem:function(t,n,i){var r=e.find(i.realGroups,function(e){return e.id==t.entityState.id}),o=e.find(n.realGroups,function(e){return e.entityType.name.toLowerCase()==t.__type.toLowerCase()&&e.process.id==r.process.id}),s=e.pluck(r.nextStates,"id");return s.push(r.id),o&&e.include(s,o.id)},getCommentRequirements:function(t,n,i){var r=e.find(i.realGroups,function(e){return e.id==t.entityState.id}),o=[];return e.forEach(n,function(n){var i=e.find(n.realGroups,function(e){return e.entityType.name.toLowerCase()==t.__type.toLowerCase()&&e.process.id==r.process.id});o.push({isCommentRequired:i?i.isCommentRequired:!1})}),o}})});
define('tau/models/dataProviders/testplan/testplan.model.provider.testplanruns.groups',["Underscore","tau/models/dataProviders/model.provider.groups.base","tau/models/dataProviders/strategies/model.provider.groups.strategy.states"],function(e,t,s){return t.extend({init:function(e){this._super(e),this.strategy=new s},fetch:function(t,s,r){var n=e(s).pluck("projectId"),i=this.config.store,o={fields:[{process:["id"]}],list:!0};i.get("projects",o,{scope:this,success:this.onProjects(n,t,r)}).done()},onProjects:function(t,s,r){return function(n){var i=e(n.data).chain().select(function(s){return e(t).include(s.id)}).map(function(e){return e.process.id}).uniq().value(),o=$.Deferred(),u=function(t){var s=(t.entityType.name||"").toLowerCase();return"testplanrun"===s&&e(i).include(t.process.id)};if(i.length)o.resolveWith(this,[u]);else{var c=this.config.store;c.get("processes",{fields:["id","IsDefault"],$query:{IsDefault:"true"}},{scope:this,fail:o.reject,success:function(t){i.push(e.chain(t.data).select(function(e){return e.IsDefault}).pluck("id").first().value()),o.resolveWith(this,[u])}}).done()}this._fetchStateAsync(s,o,r)}},_fetchStateAsync:function(e,t,s){t.always(function(t){return this._fetchState(e,t,s)})},moveToGroup:function(e,t,s,r){var n=this.config.store;return this.strategy.moveToGroup(n,e,t,s,r)},isAvailableForItem:function(e,t,s){return this.strategy.isAvailableForItem(e,t,s)},getCommentRequirements:function(e,t,s){return this.strategy.getCommentRequirements(e,t,s)}})});
define('tau/ui/extensions/list/testplan/extension.list.testplanruns.refresher',["Underscore","tau/core/extension.base"],function(t,e){return e.extend({"bus beforeInit":function(e,n){var i=n.config.context,o=i.configurator,r=i.entity,s=r.entityType.name,u=o.getStore();o.getGlobalBus().unbind(this),o.getGlobalBus().on("testplanrun.runCompleted",t.bind(function(){u.evictProperties(r.id,s,["testPlanRuns"]),this.fire("refresh")},this),this)},"bus beforeInit:last + destroy":function(t,e){var n=e.config.context,i=n.configurator;i.getGlobalBus().unbind(this)}})});
define('tau/models/dataProviders/testplan/testplan.model.provider.testcases.items',["Underscore","tau/models/dataProviders/userstory/userstory.model.provider.testcases.items"],function(e,r){return r.extend({})});
define('tau/ui/extensions/list/testcases/extension.list.testcases.actions.add.testPlan',["Underscore","tau/components/extensions/component.extension.base"],function(e,n){return n.extend({"bus action.add":function(e){var n=e.data.entity,t=this.config.context.configurator;t.getRouting().redirect(t.getUrlBuilder().getAddTestCaseForTestPlanRunUrl(n.id))}})});
define('tau/ui/extensions/list/external.refresh.extension',["Underscore","tau/core/extension.base"],function(e,t){return t.extend({"bus beforeInit":function(t,n){var i=this,r=e.bind(function(t,n){var i=this,r=n.data["evict-data"],o=e.bind(function(e,t){e.evictProperties(t.entityId,t.entityType,t.evictProperties),this.fire("refresh")},i,t,r);e.has(r,"$defer")?r.$defer.done(o):o()},i,n.config.store),o=n.config.context.configurator.getGlobalBus();o.removeAllListeners(this),e.each(n.config.externalRefreshEvents,function(e){o.on(e,r,i)}),this.fire("globalBus.ready",o)},"bus globalBus.ready:last + destroy":function(e,t){t.removeAllListeners(this)}})});
define('tau/configurations/testplan.container.config',["tau/configurations/baseAssignable.container.config","tau/models/model.extensions","tau/components/extensions/testCaseList/extension.testPlanRun.testCaseList.edit.addTestCase","tau/components/extensions/testCaseList/extensions.testCaseList.labelRefresher","tau/ui/extensions/list/testplan/extension.list.editableCells","tau/models/dataProviders/testplan/testplan.model.provider.testplanruns.items","tau/models/dataProviders/testplan/testplan.model.provider.testplanruns.groups","tau/ui/extensions/list/testplan/extension.list.testplanruns.refresher","tau/models/dataProviders/testplan/testplan.model.provider.testcases.items","tau/ui/extensions/list/testcases/extension.list.testcases.actions","tau/ui/extensions/list/testcases/extension.list.testcases.actions.add.testPlan","tau/ui/templates/list_/grid.entity.testcase/ui.template.list.grid.entity.testcase","tau/ui/extensions/list/external.refresh.extension"],function(e,t,s,a,i,n,r,l,o,d,c,p){return e.extend({init:function(e){this._super(e);var t=e.context.entity,s=e.context.configurator.getUrlBuilder();this.registerAction("Add Test Plan Run",{disabledIf:{feature:"entity.quickAdd"},label:"Add "+this.getTermName("TestPlanRun"),url:s.getAddTestRunForTestPlanUrl(t.id),practices:["Test Cases"]}),this.registerAction("Assign Test Cases",{disabledIf:{isBoard:!0},label:"Assign "+this.getTermName("TestCase"),url:s.getAssignTestCasesForTestPlanUrl(t.id),practices:["Test Cases"]}),this.registerAdditionalInfoItem("Initial Estimate",{label:{text:"Run Estimate"},field:{type:"property.initialEstimate"},practices:["Planning"]}),this.registerTab("Test Cases",{disabledIf:{isBoard:!0},label:"testcases",header:[{type:"label",text:this.getNames("testCase"),countFieldNames:["testCases"],extensions:[a]}],items:[{type:"container",spinnerConfigForLazy:this.getSpinnerConfigForLazy(),practices:["Test Cases"],children:[{type:"container",lazy:!0,name:"lazyPlaceholder container",practices:["Test Cases"],children:[{practices:["Test Cases"],type:"quick.add",printable:!1,property:"testPlan",additionalFieldsSet:{steps:"&nbsp;",success:"&nbsp;"},onBeforeAdd:function(e){var t=e.$set;e.fields=["id","name",{testPlans:["id","testCases-count"]}];var s=t.testPlan;delete t.testPlan,t.testPlans=[s]},entityType:"testCase",evictProperties:["testCases","testCases-count"],label:"Add "+this.getNames("testcase")},{type:"list.editable",itemsDataProvider:o,multiprojects:!0,practices:["Test Cases"],views:[{type:"grid.entity.testcase",rowTemplateName:"list-grid-entity__rowtestcase",emptyMessage:"No test cases found"}],template:p,externalRefreshEvents:["testCase.items.added"],extensions:[d,c],labelAdd:"Assign"}]}]}],practices:["Test Cases"]}),this.registerTab("Tests",{enabledIf:{isBoard:!0},label:"testCases",header:[{type:"label",text:"Tests",countFieldNames:["testCases"]}],items:[{name:"TestCases",type:"view.new.list",definition:{cells:{types:["testcase"]},cardSettings:{list_testcase:{list:[[{id:"entity_name_1line",order:0},{id:"general_entity_id",order:1},{id:"tc_last_status",order:2},{id:"tc_last_run_date",order:3}]]}}},lazy:!0,spinnerConfigForLazy:this.getSpinnerConfigForLazy()}]}),this.registerTab("Test Plan Runs",{label:"testplanruns",header:[{type:"label",text:this.getNames("testPlanRun"),countFieldNames:["testPlanRuns"]}],items:[{type:"container",spinnerConfigForLazy:this.getSpinnerConfigForLazy(),practices:["Test Cases"],children:[{type:"container",lazy:!0,practices:["Test Cases"],name:"lazyPlaceholder container",children:[{type:"quick.add",printable:!1,property:"testPlan",entityType:"testPlanRun",evictProperties:["testPlanRuns-count"],label:"Add "+this.getNames("TestPlanRun")},{type:"list.editable",itemsDataProvider:n,externalRefreshEvents:["testPlanRun.items.added"],groupsDataProvider:r,groupBy:"entityState.name",multiprojects:!0,views:[{rowTemplateName:"list-grid-entity__rowtestplanrun",type:"grid.entity",group:{dataIndex:"name"}}],extensions:[i,l]}]}]}],practices:["Test Cases"]})},getTabsAliases:function(){return["Description","Tests","Test Cases","Test Plan Runs","Relations","Time","Flow","History"]},getAdditionalInfoAliases:function(){return["Project","Team","Owner","Business Value","Initial Estimate","StartDate","CreationDate","CompletionDate","PlannedStartDate","PlannedEndDate"]},getActionsAliases:function(){return["Add Time","Copy to project","Add Test Plan Run","Assign Test Cases","-add-","Old Edit","Print","-----","Delete"]},getEntityQuickAddOptions:function(){return{items:[{entityType:"time",relationName:"times",practices:["Time Tracking"]},{entityType:"testplanrun",relationName:"testPlanRuns",practices:["Test Cases"]},{entityType:"testcase",relationName:"testCases",practices:["Test Cases"]}]}}})});
define('tau/models/dataProviders/model.provider.items.user_stories',["Underscore","tau/models/dataProviders/model.provider.items.base"],function(t,i){return i.extend({fetch:function(t){this._fetch("userStories","userStory","priority",t)},fetchForGroup:function(i,e){var r=this.config.context,n=r.entity.entityType.name,o=r.entity.id,a=this.config.store,s="userStories",c="userStory",d=this._createDetailCommand(s),f={id:o,nested:!0,fields:[d]};a=a.get(n,f);var m=this,u=function(r){var n=t(r).pluck("data")[0][s];t.map(n,function(t){t.__type=c}),n=t.filter(n,function(t){return t.entityState.name==i.key});var o=m._convertData(n);e(o)};a.done({success:u,scope:m})},_createDetailCommand:function(i){var e={};e[i]=["id","name","numericPriority","tags",{priority:["id","name","importance"]},"effort","effortCompleted","effortToDo","timeSpent","timeRemain","tasks-count","tasks-effort-sum","tasks-effortToDo-sum",{feature:["id"]},{entityState:this.fields.entityStateWithComment},{roleEfforts:["id","effort","effortToDo",{role:["id","name","isPair","hasEffort"]}]},{assignments:["id",{role:["id"]},{generalUser:this.fields.generalUser}]}];var r={project:["id"]};return this.config.multiprojects&&r.project.push("abbreviation"),e[i].push(r),this.config.additionalFields&&t.indexOf(this.config.additionalFields,"iteration")>-1&&e[i].push({iteration:["id","name"]}),e},_convertData:function(t){return t=i.prototype._convertData.call(this,t),t=this._calculateEffortToMaximum(t),this._sortByPriority(t)},_convertItem:function(i){var e=this;i.project=i.project||{};var r={id:i.id,name:i.name,__type:i.__type,numericPriority:i.numericPriority,entityState:{id:i.entityState.id,name:i.entityState.name,isInitial:i.entityState.isInitial,isFinal:i.entityState.isFinal,numericPriority:i.entityState.numericPriority},tags:this._processTags(i),priority:{id:i.priority.id,name:i.priority.name,kind:e.importanceProcessor.getKind(i.priority.importance)},effort:this._getEffortData(i),assignments:this._processAssignments(i),projectId:i.project.id,entitiesCount:i["tasks-count"],url:this.config.context.configurator.getUrlBuilder().getNewViewUrl(i.id,i.__type,!0)};return this.config.multiprojects&&(r.project={id:i.project.id,abbreviation:i.project.abbreviation}),this.config.additionalFields&&t.indexOf(this.config.additionalFields,"iteration")>-1&&(r.iteration={id:i.iteration?i.iteration.id:null,name:i.iteration?i.iteration.name:null}),r}})});
define('tau/models/dataProviders/iteration/iteration.model.provider.user_stories_bugs.items',["Underscore","tau/models/dataProviders/model.provider.items.base","tau/models/dataProviders/model.provider.items.user_stories","tau/models/dataProviders/model.provider.items.bugs"],function(t,e,i,r){return e.extend({init:function(t){this.config=t,this.providers=[new i(t)],this.config.context.isPracticeAvailable("Bug Tracking")&&this.providers.push(new r(t))},_convertData:function(t){return t=this._calculateEffortToMaximum(t),this._sortByPriority(t)},fetch:function(e){var i=this,r=function(t){var r=i._convertData(t);e(r)},o=[];t.forEach(i.providers,function(t){o.push(function(e){t.fetch(function(t){e(null,t)})})}),t.parallel(o,function(e,i){var o=t.flatten(i);r(o)})}})});
define('tau/models/dataProviders/iteration/iteration.model.provider.user_stories_bugs.groups',["Underscore","tau/models/dataProviders/model.provider.groups.base","tau/models/dataProviders/strategies/model.provider.groups.strategy.states","tau/utils/utils.date"],function(t,e,r){return e.extend({init:function(t){this._super(t),this.strategy=new r},fetch:function(t,e,r){var s=["userstory"];return this.config.context.isPracticeAvailable("Bug Tracking")&&s.push("bug"),this._fetchState(t,s,r)},moveToGroup:function(t,e,r,s){var i=this.config.store;return this.strategy.moveToGroup(i,t,e,r,s)},isAvailableForItem:function(t,e,r){return this.strategy.isAvailableForItem(t,e,r)},getCommentRequirements:function(t,e,r){return this.strategy.getCommentRequirements(t,e,r)}})});
define('tau/models/dataProviders/release/release.model.provider.user_stories.items',["Underscore","tau/models/dataProviders/model.provider.items.base"],function(t,e){return e.extend({fetch:function(t){this._fetch("userStories","userStory","priority",t)},_createDetailCommand:function(t){var e={};return e[t]=["id","name","numericPriority","tags",{priority:["id","name","importance"]},"effort","effortCompleted","effortToDo","timeSpent","timeRemain","tasks-count","tasks-effort-sum","tasks-effortToDo-sum",{entityState:this.fields.entityStateWithComment},{roleEfforts:["id","effort","effortToDo",{role:["id","name","isPair","hasEffort"]}]},{assignments:["id",{role:["id"]},{generalUser:this.fields.generalUser}]},{project:["id"]}],e},_convertData:function(t){return t=e.prototype._convertData.call(this,t),t=this._calculateEffortToMaximum(t),this._sortByPriority(t)},_convertItem:function(t){var e=this;t.project=t.project||{};var i={id:t.id,name:t.name,__type:t.__type,numericPriority:t.numericPriority,entityState:{id:t.entityState.id,name:t.entityState.name,isInitial:t.entityState.isInitial,isFinal:t.entityState.isFinal,numericPriority:t.entityState.numericPriority},tags:this._processTags(t),priority:{id:t.priority.id,name:t.priority.name,kind:e.importanceProcessor.getKind(t.priority.importance)},effort:this._getEffortData(t),assignments:this._processAssignments(t),projectId:t.project.id,entitiesCount:t["tasks-count"],url:this.config.context.configurator.getUrlBuilder().getNewViewUrl(t.id,t.__type,!0)};return i.visibleEntityState=i.entityState,i}})});
define('tau/configurations/iteration.container.config',["tau/configurations/baseContainable.container.config","tau/models/model.extensions","tau/models/dataProviders/iteration/iteration.model.provider.user_stories_bugs.items","tau/models/dataProviders/iteration/iteration.model.provider.user_stories_bugs.groups","tau/ui/extensions/list/external.refresh.extension","tau/models/dataProviders/entity/entity.model.provider.bug.items","tau/models/dataProviders/release/release.model.provider.user_stories.items","tau/ui/extensions/list/request/extension.list.entityState"],function(e,t,i,r,s,n,a,o){return e.extend({init:function(e){this._super(e);var t=e.context.entity,i=e.context.configurator.getUrlBuilder();this.registerAction("Add User Story",{disabledIf:{feature:"entity.quickAdd"},label:"Add "+this.getTermName("userStory"),url:i.getAddUserStoryForIterationUrl(t.id)}),this.registerAction("Finish Iteration",{label:"Finish",url:i.getRelativeBoardPageUrl("finish-iteration/"+t.id),className:"tau-action-finish_iteration"}),this.registerPanel("Progress Bar",{type:"iteration.progressBar"});var r=this;this.registerTab("User Stories",{label:"userStories",header:[{type:"label",text:r.getNames("userStory"),countFieldNames:["userStories"]}],items:[{type:"container",spinnerConfigForLazy:this.getSpinnerConfigForLazy(),children:[{type:"container",lazy:!0,name:"lazyPlaceholder container",children:[{type:"quick.add",printable:!1,property:"iteration",entityType:"userStory",evictProperties:["userStories","userStories-count"],label:"Add "+r.getNames("UserStory")},{type:"list.editable",externalRefreshEvents:["userStory.items.added"],itemsDataProvider:a,views:[{type:"grid.entity"}],extensions:[o]}]}]}]}),this.registerTab("Bugs",{practices:["Bug Tracking"],label:"bugs",header:[{type:"label",text:r.getNames("bug"),countFieldNames:["bugs"]}],items:[{type:"container",spinnerConfigForLazy:this.getSpinnerConfigForLazy(),practices:["Bug Tracking"],children:[{type:"container",lazy:!0,name:"lazyPlaceholder container",practices:["Bug Tracking"],children:[{type:"quick.add",printable:!1,property:"iteration",entityType:"bug",practices:["Bug Tracking"],evictProperties:["bugs","bugs-count"],label:"Add "+r.getNames("Bug")},{type:"list.editable",practices:["Bug Tracking"],itemsDataProvider:n,views:[{type:"grid.entity"}],externalRefreshEvents:["bug.items.added"],extensions:[o]}]}]}]}),this.registerPanel("Can Be Finished",{type:"iteration.canBeFinished"})},getPanelsAliases:function(){return["Look Switcher","Diagnostic","Progress Bar","Additional Info","Custom Fields","Can Be Finished"]},getActionsAliases:function(){return["Add User Story","Finish Iteration","-add-","Old Edit","Print","-----","Delete"]},getEntityQuickAddOptions:function(){return{items:[{entityType:"userstory",relationName:"userStories"},{entityType:"bug",relationName:"bugs",practices:["Bug Tracking"]}]}},getTabsAliases:function(){return["Description","User Stories","Bugs","Relations","Time","History"]},getAdditionalInfoAliases:function(){return["Project","StartDate","FinishDate","Release For Iteration","Velocity","Assigned Effort"]}})});
define('tau/configurations/teamiteration.container.config',["tau/configurations/baseContainable.container.config","tau/models/model.extensions","tau/models/dataProviders/iteration/iteration.model.provider.user_stories_bugs.items","tau/models/dataProviders/iteration/iteration.model.provider.user_stories_bugs.groups","tau/ui/extensions/list/external.refresh.extension","tau/models/dataProviders/entity/entity.model.provider.bug.items","tau/models/dataProviders/release/release.model.provider.user_stories.items","tau/ui/extensions/list/request/extension.list.entityState"],function(e,t,i,r,s,n,a,o){var l=e.extend({init:function(t){e.prototype.init.call(this,t);var i=t.context.entity,r=t.context.configurator.getUrlBuilder();this.registerAction("Finish Iteration",{label:"Finish",url:r.getRelativeBoardPageUrl("finish-teamiteration/"+i.id),className:"tau-action-finish_iteration"}),this.registerPanel("Progress Bar",{type:"teamiteration.progressBar"});var s=this;this.registerTab("User Stories",{label:"userStories",header:[{type:"label",text:s.getNames("userStory"),countFieldNames:["userStories"]}],items:[{type:"container",spinnerConfigForLazy:this.getSpinnerConfigForLazy(),children:[{type:"container",lazy:!0,name:"lazyPlaceholder container",children:[{type:"quick.add",printable:!1,property:"teamiteration",entityType:"userStory",evictProperties:["userStories","userStories-count"],label:"Add "+s.getNames("UserStory")},{type:"list.editable",externalRefreshEvents:["userStory.items.added"],itemsDataProvider:a,views:[{type:"grid.entity"}],extensions:[o]}]}]}]}),this.registerTab("Bugs",{practices:["Bug Tracking"],label:"bugs",header:[{type:"label",text:s.getNames("bug"),countFieldNames:["bugs"]}],items:[{type:"container",spinnerConfigForLazy:this.getSpinnerConfigForLazy(),practices:["Bug Tracking"],children:[{type:"container",lazy:!0,name:"lazyPlaceholder container",practices:["Bug Tracking"],children:[{type:"quick.add",printable:!1,property:"teamiteration",entityType:"bug",practices:["Bug Tracking"],evictProperties:["bugs","bugs-count"],label:"Add "+s.getNames("Bug")},{type:"list.editable",practices:["Bug Tracking"],itemsDataProvider:n,views:[{type:"grid.entity"}],externalRefreshEvents:["bug.items.added"],extensions:[o]}]}]}]}),this.registerPanel("Can Be Finished",{type:"iteration.canBeFinished"})},getPanelsAliases:function(){return["Look Switcher","Diagnostic","Progress Bar","Additional Info","Custom Fields","Can Be Finished"]},getActionsAliases:function(){return["Finish Iteration","Print","-----","Delete"]},getTabsAliases:function(){return["Description","User Stories","Bugs","Relations","History"]},getEntityQuickAddOptions:function(){return{items:[{entityType:"userstory",relationName:"userStories"},{entityType:"bug",relationName:"bugs",practices:["Bug Tracking"]}]}},getAdditionalInfoAliases:function(){return["Team","StartDate","FinishDate","Velocity","Assigned Effort"]}});return l});
define('tau/models/dataProviders/feature/feature.model.provider.user_stories.items',["Underscore","tau/models/dataProviders/model.provider.items.base"],function(t,e){return e.extend({fetch:function(t){this._fetch("userStories","userStory","priority",t)},_createDetailCommand:function(t){var e={};return e[t]=["id","name","numericPriority","tags",{priority:["id","name","importance"]},"effort","effortCompleted","effortToDo","timeSpent","timeRemain","tasks-count","tasks-effort-sum","tasks-effortToDo-sum",{project:["abbreviation"]},{entityState:this.fields.entityStateWithComment},{roleEfforts:["id","effort","effortToDo",{role:["id","name","isPair","hasEffort"]}]},{assignments:["id",{role:["id"]},{generalUser:this.fields.generalUser}]},{project:["id"]}],e},_convertData:function(t){return t=e.prototype._convertData.call(this,t),t=this._calculateEffortToMaximum(t),this._sortByPriority(t)},_convertItem:function(t){var e=this;t.project=t.project||{};var i={id:t.id,name:t.name,__type:t.__type,numericPriority:t.numericPriority,entityState:{id:t.entityState.id,name:t.entityState.name,isInitial:t.entityState.isInitial,isFinal:t.entityState.isFinal,numericPriority:t.entityState.numericPriority},tags:this._processTags(t),priority:{id:t.priority.id,name:t.priority.name,kind:e.importanceProcessor.getKind(t.priority.importance)},effort:this._getEffortData(t),assignments:this._processAssignments(t),projectId:t.project.id,project:{abbreviation:t.project.abbreviation},entitiesCount:t["tasks-count"],url:this.config.context.configurator.getUrlBuilder().getNewViewUrl(t.id,t.__type,!0)};return i.visibleEntityState=i.entityState,i}})});
define('tau/models/dataProviders/model.provider.groups.user_stories',["Underscore","tau/models/dataProviders/model.provider.groups.base"],function(e,t){return t.extend({fetch:function(t,o,r){var n=e(o).pluck("projectId"),s=this.config.store,c={fields:[{process:["id"]}],list:!0};s.get("projects",c,{scope:this,success:this.onProjects(n,t,r)}).done()},onProjects:function(t,o,r){return function(n){var s=e(n.data).chain().select(function(o){return e(t).include(o.id)}).map(function(e){return e.process.id}).uniq().value(),c=function(t){var o=(t.entityType.name||"").toLowerCase();return"userstory"===o&&e(s).include(t.process.id)};return this._fetchState(o,c,r)}},fetchForGroup:function(){},moveToGroup:function(e,t,o,r){return this._moveToGroupByState(e,t,o,r)}})});
define('tau/models/dataProviders/feature/feature.model.provider.user_stories.groups',["Underscore","tau/models/dataProviders/model.provider.groups.user_stories","tau/models/dataProviders/strategies/model.provider.groups.strategy.states","tau/utils/utils.date"],function(t,e,r){return e.extend({init:function(t){this._super(t),this.strategy=new r},moveToGroup:function(t,e,r,s){var i=this.config.store;return this.strategy.moveToGroup(i,t,e,r,s)},isAvailableForItem:function(t,e,r){return this.strategy.isAvailableForItem(t,e,r)},getCommentRequirements:function(t,e,r){return this.strategy.getCommentRequirements(t,e,r)}})});
define('tau/configurations/feature.container.config',["Underscore","jQuery","tau/configurations/baseContainable.container.config","tau/models/model.extensions","tau/components/extensions/requestsList/extensions.requestList.labelRefresher","tau/components/extensions/entity/extension.requestList.remover","tau/models/dataProviders/feature/feature.model.provider.user_stories.items","tau/models/dataProviders/feature/feature.model.provider.user_stories.groups","tau/ui/extensions/list/external.refresh.extension","tau/ui/extensions/list/request/extension.list.entityState","tau/ui/extensions/list/extension.list.refresher","tau/models/dataProviders/entity/entity.model.provider.bug.items"],function(e,t,i,r,s,n,a,o,l,d,u,p){return i.extend({init:function(e){this._super(e);var t=e.context.entity,i=e.context.configurator.getUrlBuilder();this.registerAdditionalInfoItem("PlannedStartDate",{label:{text:"Planned Start"},field:{type:"property.plannedStartDate",editable:!0}}),this.registerAdditionalInfoItem("PlannedEndDate",{label:{text:"Planned End"},field:{type:"property.plannedEndDate",editable:!0}}),this.registerAction("Add User Story",{disabledIf:{feature:"entity.quickAdd"},label:"Add "+this.getTermName("userStory"),url:i.getAddUserStoryForFeatureUrl(t.id)}),this.registerPanel("Progress Bar",{type:"progressBar"}),this.registerPanel("Total Effort",{type:"feature.totalEffort"}),this.registerPanel("Assignments",{type:"collapsible",collapsed:!1,stateName:"assignments",header:[{type:"label",text:"Assignments"}],items:[{type:"feature.assignmentList"}]});var r=this;this.registerTab("User Stories",{label:"userStories",header:[{type:"label",text:r.getNames("userStory"),countFieldNames:["userStories"]}],items:[{type:"container",spinnerConfigForLazy:this.getSpinnerConfigForLazy(),children:[{type:"container",lazy:!0,name:"lazyPlaceholder container",children:[{type:"quick.add",printable:!1,property:"feature",entityType:"userStory",evictProperties:["userStories","userStories-count"],label:"Add "+this.getNames("UserStory")},{type:"list.editable",externalRefreshEvents:["userStory.items.added"],multiprojects:!0,itemsDataProvider:a,views:[{type:"grid.entity"}],extensions:[d]}]}]}]}),this.registerTab("Bugs",{label:"bugs",practices:["Bug Tracking"],header:[{type:"label",text:r.getNames("bug"),countFieldNames:["bugs"]}],items:[{type:"container",spinnerConfigForLazy:this.getSpinnerConfigForLazy(),practices:["Bug Tracking"],children:[{type:"container",lazy:!0,name:"lazyPlaceholder container",practices:["Bug Tracking"],children:[{practices:["Bug Tracking"],type:"quick.add",printable:!1,property:"feature",entityType:"bug",evictProperties:["bugs","bugs-count"],label:"Add "+r.getNames("bug")},{type:"list.editable",extensions:[u,d],practices:["Bug Tracking"],externalRefreshEvents:["bug.items.added"],itemsDataProvider:p,multiprojects:!0,views:[{type:"grid.entity"}]}]}]}]})},getTabsAliases:function(){return["Description","User Stories","Bugs","Relations","Flow","Time","History"]},getActionsAliases:function(){return["Add User Story","Add Impediment","Attach to Request","Move or Copy","Copy to project","Convert","-----","Old Edit","Print","-----","Delete"]},getPanelsAliases:function(){return e.union(["Look Switcher","Diagnostic","Progress Bar","Requests","Impediments","Total Effort","Assignments"],["Additional Info"],!t.browser.msie||this.isIE9()?["Lead Cycle Time"]:[],["Custom Fields"])},getEntityQuickAddOptions:function(){return{items:[{entityType:"userstory",relationName:"userStories"},{entityType:"bug",relationName:"bugs",practices:["Bug Tracking"]},{entityType:"impediment",relationName:"impediments"}]}},getAdditionalInfoAliases:function(){return e.union(["Project","Team","Owner","Initial Estimate","Business Value","Release","StartDate","CompletionDate","PlannedStartDate","PlannedEndDate"],t.browser.msie&&!this.isIE9()?["CycleTime","LeadTime","CreationDate","CompletionDate"]:[])}})});
define('tau/models/dataProviders/model.provider.items.user_stories_bugs',["Underscore","tau/models/dataProviders/model.provider.items.base","tau/models/dataProviders/model.provider.items.user_stories","tau/models/dataProviders/model.provider.items.bugs"],function(t,e,i,r){return e.extend({init:function(t){this.config=t,this.providers=[new i(t)],this.config.context.isPracticeAvailable("Bug Tracking")&&this.providers.push(new r(t))},_convertData:function(t){return t=this._calculateEffortToMaximum(t),this._sortByPriority(t)},fetch:function(e){var i=this,r=function(t){var r=i._convertData(t);e(r)},o=[];t.forEach(i.providers,function(t){o.push(function(e){t.fetch(function(t){e(null,t)})})}),t.parallel(o,function(e,i){var o=t.flatten(i);r(o)})}})});
define('tau/models/dataProviders/release/release.model.provider.iterations.items',["Underscore","tau/models/dataProviders/model.provider.items.user_stories_bugs","tau/models/dataProviders/model.provider.items.user_stories","tau/models/dataProviders/model.provider.items.bugs"],function(t,e,i,r){return e.extend({init:function(t){this.config=t,t.additionalFields=["iteration"],this.providers=[new i(t)],this.config.context.isPracticeAvailable("Bug Tracking")&&this.providers.push(new r(t))},_convertData:function(i){return i=e.prototype._convertData.call(this,i),t.forEach(i,function(t){t.visibleEntityState=t.entityState}),this._sortByPriority(i)}})});
define('tau/models/dataProviders/release/release.model.provider.iterations.groups',["Underscore","tau/models/dataProviders/model.provider.groups.base","tau/utils/utils.date"],function(e,t,i){return t.extend({fetch:function(e,t,i){var n=["userstory"];return this.config.context.isPracticeAvailable("Bug Tracking")&&n.push("bug"),this._fetchIterations(e,n,i)},_fetchIterations:function(t,n,r){var o=this.config.context,a=o.entity.id,s=this.config.store,u={id:a,nested:!0,fields:[{iterations:["id","name","startDate","endDate"]}]},d="d MMM",c=this.config.context.configurator.getUrlBuilder();s=s.get("release",u),s.done({success:function(t){var n=e.pluck(t,"data")[0].iterations,o=[];n=e.sortBy(n,function(e){return-1*i.parse(e.startDate)}),e.forEach(n,function(e){var t=i.parse(e.startDate);t=i.convertToTimezone(t);var n=i.parse(e.endDate);n=i.convertToTimezone(n);var r=!0,s=!1;i.Date.today().between(t,n)&&(r=!1,s=!0);var u=t.toString(d)+" / "+n.toString(d);u=u+" ("+Math.floor((n.getTime()-t.getTime())/1e3/60/60/24+1)+" days)",s&&(u+=" (current)"),e.url=c.getNewViewUrl(e.id,e.__type,!0),e.releaseId=a,o.push({key:e.id,title:e.name,subtitle:u,collapsed:r,realGroup:e})}),o.unshift({key:null,title:"Backlog",collapsed:!0,realGroup:{id:null,releaseId:a}}),e.forEach(o,function(e){e.items=[]}),r(o)},scope:this})},moveToGroup:function(e,t,i,n){return this._moveToGroupByIteration(e,t,i,n)},_moveToGroupByIteration:function(t,i,n,r){var o=this.config.store,a=i.realGroup;if(!a||t.iteration&&a.id==t.iteration.id)return void r.call(null);var s=[],u={release:{id:a.releaseId},iteration:a.id?{id:a.id}:null};s.push(function(e){o.save(t.__type,{id:t.id,$set:u,fields:["id",{iteration:["id"]}]}).done({success:function(){e(null,arguments)}})}),s.push(function(e){o.get(t.__type,{id:t.id,fields:["id",{iteration:["id"]}]}).done({success:function(t){e(null,t[0].data)}})}),e.series(s,function(t,i){e.isFunction(r)&&r.call(null,{changed:i[1]})})}})});
define('tau/ui/extensions/list/iterations/extension.list.release_iterations',["tau/components/extensions/component.extension.base"],function(n){return n.extend({"bus preDataBind":function(n){var e=n.data;e.isEmpty=e.groups.length<=1?!0:!1}})});
define('tau/models/dataProviders/release/release.model.provider.user_stories_bugs.items',["Underscore","tau/models/dataProviders/model.provider.items.user_stories_bugs","tau/models/dataProviders/model.provider.items.user_stories","tau/models/dataProviders/model.provider.items.bugs"],function(e,i,t,r){return i.extend({init:function(e){this.config=e,e.additionalFields=["iteration"],this.providers=[new t(e)],this.config.context.isPracticeAvailable("Bug Tracking")&&this.providers.push(new r(e))},_convertData:function(e){var t=i.prototype._convertData.call(this,e);return this._sortByPriority(t)}})});
define('tau/models/dataProviders/release/release.model.provider.user_stories_bugs.groups',["Underscore","tau/models/dataProviders/model.provider.groups.base","tau/models/dataProviders/strategies/model.provider.groups.strategy.states"],function(t,e,r){return e.extend({init:function(t){this._super(t),this.strategy=new r},fetch:function(t,e,r){var s=["userstory"];return this.config.context.isPracticeAvailable("Bug Tracking")&&s.push("bug"),this._fetchState(t,s,r)},moveToGroup:function(t,e,r,s){var i=this.config.store;return this.strategy.moveToGroup(i,t,e,r,s)},isAvailableForItem:function(t,e,r){return this.strategy.isAvailableForItem(t,e,r)},getCommentRequirements:function(t,e,r){return this.strategy.getCommentRequirements(t,e,r)}})});
define('tau/models/dataProviders/release/release.model.provider.features.items',["Underscore","jQuery","tau/models/dataProviders/model.provider.items.base"],function(t,e,i){return i.extend({fetch:function(t){this._fetch("features","feature","severity",t)},_chainResponse:function(i){var r=this,n=r.config.store,o=e.Deferred();return o.pipe(function(e){var r=t(e[1].data.features).chain().map(function(t){var e=t.project||{process:{id:null}};return e.process.id}).uniq().without(null).value();if(r.length>0){var o={fields:["id",{entityStates:["id",{role:["id","name","hasEffort","isPair"]},{entityType:["id","name"]}]}],$query:{id:{$in:r}},list:!0};n.get("process",o).done(function(){i(e)})}else i(e)}),o.resolve},_createDetailCommand:function(t){var e={};return e[t]=["id","name","numericPriority","tags","effort","effortCompleted","effortToDo","timeSpent","timeRemain",{entityState:this.fields.entityStateWithComment},{roleEfforts:["id","effort","effortToDo",{role:["id","name","isPair","hasEffort"]}]},{owner:["id","firstName","lastName"]},{assignments:["id",{role:["id"]},{generalUser:this.fields.generalUser}]},{priority:["id","name","importance"]},{project:["id",{process:["id"]}]}],e},_convertData:function(t){return t=this._super(t),t=this._calculateEffortToMaximum(t),this._sortByPriority(t)},_convertItem:function(t){var e=this;t.project=t.project||{};var i={id:t.id,name:t.name,numericPriority:t.numericPriority,__type:t.__type,entityState:{id:t.entityState.id,name:t.entityState.name,isInitial:t.entityState.isInitial,isFinal:t.entityState.isFinal,numericPriority:t.entityState.numericPriority},tags:this._processTags(t),effort:this._getEffortData(t),assignments:this._processAssignments(t),priority:{id:t.priority.id,name:t.priority.name,kind:e.importanceProcessor.getKind(t.priority.importance)},projectId:t.project.id,entitiesCount:0,url:this.config.context.configurator.getUrlBuilder().getNewViewUrl(t.id,t.__type,!0)};return i.visibleEntityState=i.entityState,i}})});
define('tau/configurations/release.container.config',["tau/configurations/baseContainable.container.config","tau/models/model.extensions","tau/models/dataProviders/release/release.model.provider.iterations.items","tau/models/dataProviders/release/release.model.provider.iterations.groups","tau/ui/extensions/list/iterations/extension.list.release_iterations","tau/models/dataProviders/release/release.model.provider.user_stories_bugs.items","tau/models/dataProviders/release/release.model.provider.user_stories_bugs.groups","tau/models/dataProviders/release/release.model.provider.features.items","tau/models/dataProviders/entity/entity.model.provider.bug.items","tau/models/dataProviders/release/release.model.provider.user_stories.items","tau/ui/extensions/list/request/extension.list.entityState","tau/ui/extensions/list/external.refresh.extension"],function(e,t,r,i,s,a,n,o,l,d,u){return e.extend({init:function(e){this._super(e),this.registerPanel("Progress Bar",{type:"release.progressBar"}),this.registerTab("Iterations",{practices:["Iterations"],label:"iterations",header:[{type:"label",text:this.getNames("iteration"),countFieldNames:["iterations"]}],items:[{type:"container",spinnerConfigForLazy:this.getSpinnerConfigForLazy(),practices:["Iterations"],children:[{type:"container",lazy:!0,name:"lazyPlaceholder container",practices:["Iterations"],children:[{practices:["Iterations"],type:"list",itemsDataProvider:r,groupsDataProvider:i,groupBy:"iteration.id",extensions:[s],externalRefreshEvents:["iteration.items.added"],views:[{type:"grid.entity",group:{dataIndex:"id"}}]}]}]}]});var t=this;this.registerTab("User Stories",{label:"userStories",header:[{type:"label",text:t.getNames("userStory"),countFieldNames:["userStories"]}],items:[{type:"container",spinnerConfigForLazy:this.getSpinnerConfigForLazy(),children:[{type:"container",lazy:!0,name:"lazyPlaceholder container",children:[{type:"quick.add",printable:!1,property:"release",entityType:"userStory",evictProperties:["userStories","userStories-count"],label:"Add "+t.getNames("UserStory")},{type:"list.editable",externalRefreshEvents:["userStory.items.added"],itemsDataProvider:d,views:[{type:"grid.entity"}],extensions:[u]}]}]}]}),this.registerTab("Bugs",{practices:["Bug Tracking"],label:"bugs",header:[{type:"label",text:t.getNames("bug"),countFieldNames:["bugs"]}],items:[{type:"container",spinnerConfigForLazy:this.getSpinnerConfigForLazy(),practices:["Bug Tracking"],children:[{type:"container",lazy:!0,name:"lazyPlaceholder container",practices:["Bug Tracking"],children:[{type:"quick.add",printable:!1,property:"release",entityType:"bug",evictProperties:["bugs","bugs-count"],label:"Add "+t.getNames("Bug"),practices:["Bug Tracking"]},{type:"list.editable",itemsDataProvider:l,externalRefreshEvents:["bug.items.added"],views:[{type:"grid.entity"}],practices:["Bug Tracking"],extensions:[u]}]}]}]}),this.registerTab("Features",{practices:["Requirements"],label:"features",header:[{type:"label",text:t.getNames("feature"),countFieldNames:["features"]}],items:[{type:"container",spinnerConfigForLazy:this.getSpinnerConfigForLazy(),practices:["Requirements"],children:[{type:"container",lazy:!0,name:"lazyPlaceholder container",practices:["Requirements"],children:[{type:"quick.add",printable:!1,property:"release",entityType:"feature",evictProperties:["features","features-count"],label:"Add "+t.getNames("Feature"),practices:["Requirements"]},{practices:["Requirements"],type:"list.editable",externalRefreshEvents:["feature.items.added"],itemsDataProvider:o,views:[{type:"grid.entity"}]}]}]}]}),this.registerTab("Release Notes",{label:"notes",header:[{type:"label",text:"Notes"}],items:[{type:"container",spinnerConfigForLazy:this.getSpinnerConfigForLazy(),children:[{type:"container",lazy:!0,name:"lazyPlaceholder container",children:[{type:"releaseNotes"}]}]}]})},getAdditionalInfoAliases:function(){return["Project","StartDate","FinishDate","Release Assigned Effort"]},getPanelsAliases:function(){return["Look Switcher","Diagnostic","Progress Bar","Additional Info","Custom Fields"]},getActionsAliases:function(){return["Add Iteration","-add-","Old Edit","Print","-----","Delete"]},getEntityQuickAddOptions:function(){return{items:[{entityType:"iteration",relationName:"iterations",practices:["Iterations"]},{entityType:"feature",relationName:"features",practices:["Requirements"]},{entityType:"userstory",relationName:"userStories"},{entityType:"bug",relationName:"bugs",practices:["Bug Tracking"]}]}},getTabsAliases:function(){return["Description","Iterations","User Stories","Bugs","Features","Release Notes","Relations","Time","History"]}})});
define('tau/configurations/build.container.config',["tau/configurations/baseContainable.container.config"],function(e){var t=e.extend({init:function(e){this._super(e),this.registerAdditionalInfoItem("BuildDate",{label:{text:"Build Date"},field:{type:"property.buildDate",editable:!0}})},getTabsAliases:function(){return["Description","Relations","Time","History"]},getActionsAliases:function(){return["Old Edit","Print","-----","Delete"]},getAdditionalInfoAliases:function(){return["Project","Owner","BuildDate","Release","Iteration"]}});return t});
define('tau/configurations/impediment.container.config',["Underscore","tau/configurations/baseContainable.container.config"],function(e,n){return n.extend({getActionsAliases:function(){return["Old Edit","Print","-----","Delete"]},getTabsAliases:function(){return["Description","Relations","Time","History"]},getAdditionalInfoAliases:function(){return["Project","State","ImpedimentDate","StartDate","ResolvedOn","Business Value","Assignable","Owner","Responsible","IsPrivate","PlannedStartDate","PlannedEndDate"]}})});
define('tau/models/dataProviders/project/project.model.provider.releases.items',["Underscore","tau/models/dataProviders/model.provider.items.base","tau/utils/utils.date"],function(t,e,r){return e.extend({fetch:function(t){this._fetch("iterations","iteration",!1,t)},_createDetailCommand:function(t){var e={};return e[t]=["id","name","tags","startDate","endDate","canBeFinished",{release:["id","name"]},"bugs-effortToDo-sum","bugs-effortCompleted-sum","userStories-effortToDo-sum","userStories-effortCompleted-sum"],e},_getAssignedEffort:function(t){var e={},r=0,o=0;return r+=t["bugs-effortToDo-sum"],r+=t["userStories-effortToDo-sum"],o+=t["bugs-effortCompleted-sum"],o+=t["userStories-effortCompleted-sum"],e.value=Math.round(100*(r+o))/100,e.unit=this.config.context.getEffortPoint(t.__type),e},_convertItem:function(t){var e={id:t.id,name:t.name,__type:t.__type,tags:this._processTags(t),release:t.release,assignedEffort:this._getAssignedEffort(t),startDate:r.format.date.short(r.convertToTimezone(t.startDate)),endDate:r.format.date.short(r.convertToTimezone(t.endDate)),url:this.config.context.configurator.getUrlBuilder().getNewViewUrl(t.id,t.__type,!0)};return e},_convertData:function(t){return t=this._super(t),this._sortByStartDate(t)},_sortByStartDate:function(e){return t.sortBy(e,function(t){return-1*t.startDate})}})});
define('tau/models/dataProviders/project/project.model.provider.releases.groups',["Underscore","tau/models/dataProviders/model.provider.groups.base","tau/utils/utils.date"],function(e,t,r){return t.extend({fetch:function(e,t,r){return this._fetchReleases(e,t,r)},_fetchReleases:function(t,a,s){var n=this.config.context,o=(n.entity.entityType.name,n.entity.id),i=this.config.store,c=this,u={id:o,nested:!0,fields:[{releases:["id","name","startDate","endDate"]}]};i.get("project",u).done({success:function(t){var a=e(t).pluck("data")[0].releases;a=e.sortBy(a,function(e){return-1*r.parse(e.startDate)});var n=[];e.forEach(a,function(e){n.push(c._processRelease(e))}),e.forEach(n,function(e){e.items=[]}),s(n)}})},_processRelease:function(e){var t=r.parse(e.startDate);t=r.convertToTimezone(t);var a=r.parse(e.endDate);a=r.convertToTimezone(a);var s=!0,n=!1;r.Date.today().between(t,a)&&(s=!1,n=!0);var o="d MMM",i=r.formatAs(t,o)+" / "+r.formatAs(a,o);i=i+" ("+Math.floor((a.getTime()-t.getTime())/1e3/60/60/24+1)+" days)",n&&(i+=" (current)"),e.url=this.config.context.configurator.getUrlBuilder().getNewViewUrl(e.id,e.__type,!0);var c={key:e.id,title:e.name,subtitle:i,collapsed:s,realGroup:e};return c}})});
define('tau/models/dataProviders/project/project.model.provider.teams.items',["Underscore","tau/models/dataProviders/model.provider.items.base"],function(e,t){return t.extend({sparklineLength:16,fetch:function(e){this._fetch("teamProjects","teamProject",!1,e)},_createDetailCommand:function(e){var t={};return t[e]=["id",{team:["id","name","icon",{teamMembers:[{user:["id","firstName","lastName","avatarUri"]}]}]}],t},_fetch:function(e,t,r,a){var n=this,i=this.config.context.entity,s=this.config.context.configurator;$.ajax({url:s.getApplicationPath()+"/api/v2/TeamProject?select={"+["id","isProjectAccessed","Project.ProjectMembers.Select(User.id) as projectMembers","Project.ProjectMembers.Count() as projectMembersCount",'"TeamProject" as __type',"new("+["Team.id","Team.name","Team.icon","Team.TeamMembers.Select({User.id, User.firstName, User.lastName, User.avatarUri}) AS members",'Team.Assignables.Count(entityType.Name == "Bug" and entityState.IsFinal != true) as openBugsCount','Team.Assignables.Count(entityType.Name == "Bug" and entityState.IsFinal == true) as closedBugsCount','Team.Assignables.Count(entityType.Name == "UserStory" and entityState.IsFinal != true) as openUsCount','Team.Assignables.Count(entityType.Name == "UserStory" and entityState.IsFinal == true) as closedUsCount','Team.Assignables.Where(entityType.Name == "UserStory" and Project.id = '+i.id+").Sparkline("+this.sparklineLength+") as userStoriesSparkline",'Team.Assignables.Where(entityType.Name == "Bug" and Project.id = '+i.id+").Sparkline("+this.sparklineLength+") as bugsSparkline"].join(",")+") as team"].join(",")+"}&where=(Project.id=="+i.id+")"}).done(function(e){a(n._convertData(e.items))}).fail(function(){a(n._convertData([]))})},_convertData:function(e){return e=this._super(e),this._sortByPriority(e)},_sortByPriority:function(t){return e.sortBy(t,function(e){return-1*e.id})},_convertItem:function(t){var r=t.team.members;t.team.teamMembers=e.map(r,function(e){return e.id});var a=this.config.context.configurator.getLoggedUser(),n=e.find(r,function(e){return e.id==a.id});n&&(r=e.reject(r,function(e){return e.id==a.id}),r.unshift(n));var i=7,s=!1;r.length>i&&(s=!0,r=r.slice(0,i)),r=e.map(r,function(t){return t.name=e.trim(t.firstName+" "+t.lastName),t.uri="#user/"+t.id,t});var o=t.team.userStoriesSparkline,m=t.team.bugsSparkline,c=this.config.context.configurator.getUrlBuilder().getNewViewUrl(t.team.id,"team",!0),u={id:t.id,__type:"teamProject",isProjectAccessed:t.isProjectAccessed,projectMembers:t.projectMembers,team:t.team,members:r,membersMore:s,teamMembersCount:t.team.teamMembers.length,teamMembersInProjectCount:e.intersection(t.team.teamMembers,t.projectMembers).length,uri:c,membersUri:c+"/members",appPath:this.config.context.configurator.getApplicationPath(),userStoriesSparkline:o,bugsSparkline:m};return u}})});
define('tau/ui/extensions/list/teamprojects/ui.extension.list.teamprojects.action.detach',["tau/core/extension.base.stateful"],function(t){return t.extend({"bus afterRender":function(t){{var e=t.data.element,n=this.config.context.configurator,i=n.getStore(),s=this.config.context.entity,o=s.entityType.name,a=_.bind(function(){i.evictProperties(s.id,o,["teamProjects"]),i.get(o,{id:s.id,fields:["id",{teamProjects:["id"]}]}).done({success:function(){},failure:function(){alert("You don't have access to this "+o+"now"),n.getHistory().exclude(s.id),n.service("navigator").back()}})},this);this.bus}e.on("click",".tau-unassign",function(t){var e=$(t.currentTarget),n=_.bind(function(){var t=e.parents("[role=item]:first"),n=t.data();i.removeFromList(o,{id:s.id,$set:{teamProjects:{id:n.entityId}}}).done({success:a})},this);e.tauConfirm({content:["<h3>"+e.data("confirmMessage")+"</h3>"].join(""),callbacks:{success:n},zIndex:130}),_.delay(_.bind(e.tauConfirm,e),100,"show")})}})});
define('tau/ui/extensions/list/teamprojects/ui.extension.list.teamprojects.action.assign.base',["tau/core/extension.base.stateful"],function(e){return e.extend({"bus afterRender":function(e,t){{var r=t.element,n=_.bind(this._getTeamProject,this),i=this.config.context.configurator.getStore(),o=this.config.context.entity;this.bus}r.on("click","[role=assign-all]",function(e){e.preventDefault();var r=$(e.currentTarget),a=_.bind(function(){var e=r.parents("[role=item]:first"),a=e.data(),s=_.find(t.data.items,function(e){return e.id==a.entityId}),c=n(o,t,s),d={projectMembers:_.map(_.difference(c.team.teamMembers,c.project.projectMembers),function(e){return{user:{id:e}}})};i.save("project",{id:c.project.id,$set:d,fields:["id","name","color",{projectMembers:[{user:["id","firstName","lastName","avatarUri"]},{role:["id","name"]}]}]}).done()},this);r.tauConfirm({content:["<h3>"+r.data("confirmMessage")+"</h3>"].join(""),callbacks:{success:a},zIndex:130}),_.delay(_.bind(r.tauConfirm,r),100,"show")})},_getTeamProject:function(){throw new Error("TeamProject should be provided")}})});
define('tau/ui/extensions/list/project/ui.extension.list.project.teams.action.assign',["tau/ui/extensions/list/teamprojects/ui.extension.list.teamprojects.action.assign.base"],function(e){return e.extend({_getTeamProject:function(e,t,i){return{id:i.id,project:{id:e.id,projectMembers:i.projectMembers},team:{id:i.team.id,teamMembers:i.team.teamMembers}}}})});
define('tau/ui/extensions/list/teamprojects/ui.extension.list.teamprojects.action.access',["tau/core/extension.base.stateful"],function(e){return e.extend({"bus afterRender":function(e){{var t=e.data.element,n=this.config.context.configurator.getStore();this.config.context.entity,this.bus}t.on("click","[role=auto-assign]",function(e){var t=$(e.currentTarget),c=t.parents("[role=item]:first"),i=c.data();n.save("teamProject",{id:i.entityId,$set:{isProjectAccessed:t.is(":checked")},fields:["id"]}).done({success:function(){},failure:function(){n.get("teamProject",{id:i.entityId,fields:["id","isProjectAccessed"]}).done(function(e){t.prop("checked",e[0].data.isProjectAccessed)})}})})}})});
define('tau/ui/extensions/list/project/ui.extension.list.project.teams.refresher',["Underscore","tau/core/extension.base"],function(e,n){return n.extend({"bus beforeInit":function(e,n){var t=n.config.context.configurator,r=t.getStore(),o=this;r.unbind(this),r.on({eventName:"afterSave",type:"project",listener:this,hasChanges:["teamProjects|projectMembers"]},function(){o.fire("refresh")}),this.on("destroy",function(){r.unbind(o)})}})});
define('tau/libs/sparklines/sparklines',["tau/core/class"],function(t){return Array.prototype.map&&require(["libs/d3/d3"],function(){}),t.extend({init:function(t){this.config=_.defaults(t,{width:100,height:50,letterWidth:7.5,letterHeight:8,emptyStart:8}),this.config.padding=this.config.padding||this.config.letterHeight+1,this.config.percent=Math.ceil(this.config.height/100)},createDrawData:function(t){for(var e=t.len||15,n=t.currentWeek,a=t.opened,r=t.closed,i=[],l=n-e;n>=l;l++){var d={open:0,closed:0},u=_.find(a,function(t){return l==t.key});d.open=u?u.count:0;var c=_.find(r,function(t){return l==t.key});d.closed=c?c.count:0,i.push(d)}return i},draw:function(t,e){var n=!1;if(null===t){var a=$(e).data("source");t=this.createDrawData(a),n=$(e).is(".tau-sparkline-bugs")}var r=this.config,i=d3.select(e||$("<svg />")[0]).attr("width",r.width).attr("height",r.height),l=_.pluck(t,"open"),d=_.pluck(t,"closed"),u=Math.max.apply(null,l),c=Math.max.apply(null,d),o=Math.max.apply(null,[u,c]),s=2;t.length&&(s=Math.max.apply(null,[(""+_.last(d)).length,(""+_.last(l)).length,2]));var p=s*r.letterWidth,f=_.all(d.slice(0,this.config.emptyStart),function(t){return 0==t}),h=_.all(l.slice(0,this.config.emptyStart),function(t){return 0==t}),g=f&&h;return this.drawTop(i,{items:d,max:o,legendSpace:p,height:r.height,width:r.width,padding:r.padding,percent:r.percent,emptyStartLabel:g?n?"fixed":"done":!1}),this.drawBottom(i,{items:l,max:o,legendSpace:p,height:r.height,width:r.width,padding:r.padding,percent:r.percent,emptyStartLabel:g?"added":!1}),i[0]},drawTop:function(t,e){var n=e.items,a=e.legendSpace,r=e.max,i=e.height,l=e.width,d=e.padding,u=e.percent,c=t.append("g").attr("transform","translate(0,"+d+")"),o=null,s=null,p=null;n.length&&(o=_.reduce(n,function(t,e,n){return e>t.value?{index:n,value:e}:t},{index:0,value:n[0]}),o.index==n.length-1&&(o=null),s=_.last(n),p=_.reduce(n,function(t,e){return t?t.concat({diff:e-_.last(t).to,to:e,from:_.last(t).to}):[{diff:e,to:e,from:0}]},null));var f=_.all(n.slice(0,this.config.emptyStart),function(t){return 0==t}),h=d3.scale.ordinal().domain(_.keys(n)).rangeRoundBands([0,l-a]),g=h.rangeBand(),x=d3.scale.linear().domain([0,r]).range([i/2-d,0]),m=d3.scale.linear().domain([0,r]).range([0,i/2-d]);return 0==n.length?void this.drawAxis(c,_.extend(e,{scaleY:x})):(c.selectAll(".tau-sparkline__openbar").data(n).enter().append("rect").attr("class","tau-sparkline__openbar").attr("x",function(t,e){return h(e)}).attr("y",x).attr("height",m).attr("width",g),this.drawAxis(c,_.extend(e,{scaleY:x})),c.selectAll(".tau-sparkline__openmark").data(n).enter().append("rect").attr("class","tau-sparkline__openmark").attr("x",function(t,e){return h(e)}).attr("y",x).attr("height",function(t){return 0==t?0:u}).attr("width",g),c.selectAll(".tau-sparkline__diffmark-open").data(p).enter().append("rect").attr("class","tau-sparkline__diffmark-open").attr("x",function(t,e){return h(e)-1}).attr("y",function(t){return x(Math.max(t.from,t.to))+(t.diff>0?0:1)}).attr("height",function(t){return m(Math.abs(t.diff))}).attr("width",1),o&&c.selectAll("text").data([o]).enter().append("text").text(function(t){return t.value||""}).attr("x",function(t){return h(t.index)+(t.index?g/2:0)}).attr("y",function(t){return x(t.value)}).attr("text-anchor",function(t){return t.index?t.index==n.length-1?"right":"middle":"left"}).attr("dy",-2),c.selectAll("text.legend").data([s]).enter().append("text").attr("class","legend").text(function(t){return t}).attr("x",function(){return l-a}).attr("y",function(t){return x(t)+d/2>x(0)?x(0)-d/2:x(t)}).attr("text-anchor","right").attr("dx",u).attr("dy",(d-1)/2),void(f&&e.emptyStartLabel&&c.selectAll("text.tau-sparkline__emptylegend").data([e.emptyStartLabel]).enter().append("text").attr("class","tau-sparkline__emptylegend").text(function(t){return t||""}).attr("x",function(){return h(0)}).attr("y",function(){return x(0)-d/2-3}).attr("text-anchor","left").attr("dx",u).attr("dy",(d-1)/2)))},drawBottom:function(t,e){var n=e.items,a=e.legendSpace,r=e.max,i=e.height,l=e.width,d=e.padding,u=e.percent;if(0!=n.length){var c=t.append("g").attr("transform","translate(0,"+i/2+")"),o=_.reduce(n,function(t,e,n){return e>t.value?{index:n,value:e}:t},{index:0,value:n[0]}),s=_.last(n);o.index==n.length-1&&(o=null);var p=_.all(n.slice(0,this.config.emptyStart),function(t){return 0==t}),f=_.reduce(n,function(t,e){return t?t.concat({diff:e-_.last(t).to,to:e,from:_.last(t).to}):[{diff:e,to:e,from:0}]},null),h=d3.scale.ordinal().domain(_.keys(n)).rangeRoundBands([0,l-a]),g=h.rangeBand(),x=d3.scale.linear().domain([0,r]).range([0,i/2-d]),m=d3.scale.linear().domain([0,r]).range([0,i/2-d]);c.selectAll(".tau-sparkline__closedmark").data(n).enter().append("rect").attr("class","tau-sparkline__closedmark").attr("x",function(t,e){return h(e)}).attr("y",x).attr("height",function(t){return 0==t?0:u}).attr("width",g),c.selectAll(".tau-sparkline__diffmark-closed").data(f).enter().append("rect").attr("class","tau-sparkline__diffmark-closed").attr("x",function(t,e){return h(e)-1}).attr("y",function(t){return x(Math.min(t.from,t.to))+(t.diff>0?1:0)}).attr("height",function(t){return m(Math.abs(t.diff))}).attr("width",1),o&&c.selectAll("text").data([o]).enter().append("text").text(function(t){return t.value||""}).attr("x",function(t){return h(t.index)+(t.index?g/2:0)}).attr("y",function(t){return x(t.value)+d}).attr("text-anchor",function(t){return t.index?t.index==n.length-1?"right":"middle":"left"}),c.selectAll("text.legend").data([s]).enter().append("text").attr("class","legend").text(function(t){return t}).attr("x",function(){return l-a}).attr("y",function(t){return x(t)-d/2<x(0)?d/2:x(t)}).attr("text-anchor","right").attr("dx",u).attr("dy",(d-u)/2),p&&e.emptyStartLabel&&c.selectAll("text.tau-sparkline__emptylegend").data([e.emptyStartLabel]).enter().append("text").attr("class","tau-sparkline__emptylegend").text(function(t){return t||""}).attr("x",function(){return h(0)}).attr("y",function(){return x(0)+d/2+2}).attr("text-anchor","left").attr("dx",u).attr("dy",(d-u)/2)}},drawAxis:function(t,e){t.append("rect").attr("class","tau-sparkline__axis").attr("y",e.scaleY(0)).attr("x",0).attr("width",e.width-e.legendSpace).attr("height",e.percent)}})});
define('tau/ui/extensions/list/teamprojects/ui.extension.list.teamprojects.sparklines',["tau/core/extension.base","tau/libs/sparklines/sparklines"],function(e,n){return e.extend({"bus dataBind + afterRender":function(e,t,i){var r=i.element,a=r.find(".i-role-sparkline"),l={width:100,height:50,letterWidth:9,letterHeight:9};a.each(function(){var e=new n(l);e.draw(null,this)})}})});
define('tau/ui/templates/list_/project/ui.template.list.project.teams',["tau/core/templates-factory"],function(e){var t={name:"list.project.teams",engine:"jqote2",markup:['<div class="tau-team-control">',"<% if (this.items.length){ %>",'<table class="tau-team-info">',"<colgroup>",'<col class="tau-team">','<col class="tau-us-progress">','<col class="tau-us-total">','<col class="tau-bug-progress">','<col class="tau-bug-total">','<col class="tau-assign-info">',"</colgroup>","<thead>","<tr>","<th>Team</th>",'<th><i class="tau-entity-icon tau-userstory">U</i>User&nbsp;Stories</th>',"<th>Done / Open</th>",'<th><i class="tau-entity-icon tau-bug">B</i>Bugs</th>',"<th>Done / Open</th>","<th>Assigned People</th>","</tr>","</thead>","<tbody>","<% _.forEach(this.items, function(item){ %>",'<tr class="i-role-item" role="item" data-entity-id="<%= item.id %>">',"<td>",'<div class="tau-team">',"<h3>",'<a href="<%= item.uri %>">','<i class="tau-icon tau-icon_type_svg tau-icon_name_<%= item.team.icon || "" %>"></i>',"<%! item.team.name %>","</a>",'<span class="tau-unassign" title="Unassign team from project?" ',"data-confirm-message=\"Are you sure you want to remove team '<%! item.team.name %>' from this project?\"></span>","</h3>",'<div class="tau-team-members">',"<div>",'<a href="<%= item.membersUri %>" title="Go to team members">',"<% _.forEach(item.members, function(user){ %>",'<img src="<%= user.avatarUri %>20">',"<% }); %>","</a>","</div>","<% if (item.membersMore) { %>",'<a class="tau-more" href="<%= item.membersUri %>" title="Go to team members">','<img src="<%= item.appPath %>/JavaScript/tau/css/images/more-members.gif" class="tau-more">',"</a>","<% } %>","</div>","</div>","</td>",'<td title="User Stories sparkline provides an overview of progress over the last 16 weeks. The numbers shown are: a maximum of user stories done/added at any given week out of those 16, and done/added in the current calendar week (on the right).">',"<svg class=\"tau-sparkline i-role-sparkline\" data-source='<%= JSON.stringify(item.userStoriesSparkline) %>'></svg>","</td>","<td>",'<div class="tau-fraction tau-userstory">','<span title="done"><%= item.team.closedUsCount %></span><br>','<b title="open"><%= item.team.openUsCount %></b>',"</div>","</td>",'<td title="Bugs sparkline provides an overview of progress over the last 16 weeks. The numbers shown are: a maximum of bugs fixed/added at any given week out of those 16, and fixed/added in the current calendar week (on the right).">',"<svg class=\"tau-sparkline tau-sparkline-bugs i-role-sparkline\" data-source='<%= JSON.stringify(item.bugsSparkline) %>'></svg>","</td>","<td>",'<div class="tau-fraction tau-bug">','<span title="done"><%= item.team.closedBugsCount %></span><br>','<b title="open"><%= item.team.openBugsCount %></b>',"</div>","</td>",'<td class="tau-assign-info">','<div class="tau-count" title="<%if (item.teamMembersInProjectCount === 0){%>No<%}%><% else {%><%= item.teamMembersInProjectCount%><%}%><% if (item.teamMembersInProjectCount !== 1){%> people<%}%><% else {%> person<%}%> in this Team assigned to Project"><%= item.teamMembersInProjectCount %> of <%= item.teamMembersCount %>','<a href="" class="i-role-item" role="assign-all" title="All people in the Team will be assigned to this Project" <% if (item.teamMembersInProjectCount === item.teamMembersCount) { %>style="display: none;"<% } %> data-confirm-message="Are you sure you want to assign all people from team \'<%! item.team.name %>\' to project?">Assign all</a>',"</div>",'<div class="tau-auto-assign">','<label class="tau-checkbox" title="Any new person in the Team will be auto-assigned to this Project">','<input type="checkbox" class="i-role-item" role="auto-assign" <% if (item.isProjectAccessed) { %> checked<% } %>><i></i><span>Auto-assign new people</span>',"</label>","</div>","</td>","</tr>","<% }); %>","</tbody>","</table>","<% }else{ %>",'<div class="tau-message">This project has no teams</div>',"<% } %>","</div>"]};return e.register(t)});
define('tau/ui/extensions/list/extension.list.checkEmpty',["tau/components/extensions/component.extension.base"],function(n){return n.extend({"bus preDataBind":function(n){var e=n.data;e.isEmpty=0==e.groups.length?!0:!1}})});
define('tau/models/dataProviders/project/project.model.provider.releases_flat.items',["Underscore","tau/models/dataProviders/model.provider.items.base","tau/utils/utils.date"],function(t,e,r){return e.extend({fetch:function(t){this._fetch("releases","release",!1,t)},_createDetailCommand:function(t){var e={};return e[t]=["id","name","tags","startDate","endDate"],e},_convertItem:function(t){var e=r.parse(t.startDate),a=r.parse(t.endDate),n=!1;r.Date.today().between(e,a)&&(n=!0);var s={id:t.id,name:t.name+(n?" (current)":""),__type:t.__type,tags:this._processTags(t),startDate:r.format.date.short(t.startDate),endDate:r.format.date.short(t.endDate),url:this.config.context.configurator.getUrlBuilder().getNewViewUrl(t.id,t.__type,!0)};return s},_convertData:function(t){return t=this._super(t),this._sortByStartDate(t)},_sortByStartDate:function(e){return t.sortBy(e,function(t){return-1*t.startDate})}})});
define('tau/models/dataProviders/model.provider.members.items',["Underscore","jQuery","tau/models/dataProviders/model.provider.items.base"],function(e,t,i){return i.extend({sparklineLength:16,fetchStrategy:{project:{collectionName:"projectMembers",typeName:"projectMember"},team:{collectionName:"teamMembers",typeName:"teamMember"}},fetch:function(e){var t=(this.config.context.entity.entityType.name||"").toLowerCase(),i=this.fetchStrategy[t];if(!i)throw new Error("Unknown fetch strategy");this._fetch(i.collectionName,i.typeName,null,e)},_createDetailCommand:function(e){var t={};return t[e]=["id",{user:["id","firstName","lastName","email","avatarUri","IsAdministrator","isActive","bug-count","userStorie-count"]},{role:["id","name"]}],t},_fetch:function(e,i,r,a){var n=this,s=this.config.context.entity,o=s.entityType.name,l=this.config.context.configurator;t.ajax({url:l.getApplicationPath()+"/api/v2/"+i+"?select={"+["id",'"'+i+'" as __type',"new("+["User.id","User.firstName","User.lastName","User.email","User.avatarUri","User.isActive","User.isAdministrator",'User.Assignables.Count(entityType.Name == "Bug" AND entityState.IsFinal != true AND '+o+".id = "+s.id+") as bugsCount",'User.Assignables.Count(entityType.Name == "Task" AND entityState.IsFinal != true AND '+o+".id = "+s.id+") as tasksCount",'User.Assignables.Count(entityType.Name == "UserStory" AND entityState.IsFinal != true AND '+o+".id = "+s.id+") as userStoriesCount","User.Assignables.Where("+o+".id = "+s.id+").Sparkline("+this.sparklineLength+") as allSparkline"].join(",")+") as user","new("+["Role.id","Role.name"].join(",")+") as role "].join(",")+"}&where=("+o+".id=="+s.id+")&take=1000"}).done(function(e){a(n._convertData(e.items))}).fail(function(){a(n._convertData([]))})},_convertItem:function(t){t.user.name=e.trim(e.asString(t.user.firstName)+" "+e.asString(t.user.lastName))||"",t.user.url=this.config.context.configurator.getUrlBuilder().getNewViewUrl(t.user.id,"user",!0);var i=this.config.context.configurator,r={id:t.id,__type:t.__type,user:t.user,role:t.role,appPath:i.getApplicationPath(),doneSparkline:t.user.doneSparkline,allSparkline:t.user.allSparkline};return i.getStore().register(r),r}})});
define('tau/ui/extensions/list/members/extension.list.members.action.detach',["tau/core/extension.base.stateful"],function(e){return e.extend({"bus afterRender":function(e){var t=e.data.element,n=this.config.context.configurator.getStore(),i=this.config.context.entity,o=i.entityType.name,r=o+"Members";t.delegate("[role=action-detach]","click",function(e){var t=$(e.target),a=t.parents("[role=item]:first"),c={};c[r]={id:a.data("entityId")},n.removeFromList(o,{id:i.id,$set:c}).done({success:function(){n.evictProperties(i.id,o,[r])}})})}})});
define('tau/ui/extensions/list/members/extension.list.members.refresher',["Underscore","tau/core/extension.base"],function(e,n){return n.extend({"bus beforeInit":function(e,n){var t=n.config.context,i=t.configurator,r=t.entity,o=r.entityType.name,s=o+"Members",a=this,f=i.getStore();f.unbind(this),f.on({eventName:"afterSave",type:o,listener:this,hasChanges:[s]},function(){a.fire("refresh")})}})});
define('tau/libs/sparklines/sparklines.user',["tau/libs/sparklines/sparklines"],function(t){return t.extend({drawBottom:function(t,e){var n=e.items,a=e.legendSpace,r=e.max,l=e.height,i=e.width,d=e.padding,u=e.percent;if(0!=n.length){var c=t.append("g").attr("transform","translate(0,"+l/2+")"),s=_.reduce(n,function(t,e,n){return e>t.value?{index:n,value:e}:t},{index:0,value:n[0]}),o=_.last(n);s.index==n.length-1&&(s=null);var x=_.all(n.slice(0,this.config.emptyStart),function(t){return 0==t}),p=d3.scale.ordinal().domain(_.keys(n)).rangeRoundBands([0,i-a]),f=p.rangeBand(),g=d3.scale.linear().domain([0,r]).range([0,l/2-d]),h=d3.scale.linear().domain([0,r]).range([0,l/2-d]);c.selectAll(".tau-sparkline__closedbar").data(n).enter().append("rect").attr("class","tau-sparkline__closedbar").attr("x",function(t,e){return p(e)+f/2-.5}).attr("y",g(0)).attr("height",h).attr("width",1),s&&c.selectAll("text").data([s]).enter().append("text").text(function(t){return t.value||""}).attr("x",function(t){return p(t.index)+(t.index?f/2:0)}).attr("y",function(t){return g(t.value)+d}).attr("text-anchor",function(t){return t.index?t.index==n.length-1?"right":"middle":"left"}),c.selectAll("text.legend").data([o]).enter().append("text").attr("class","legend").text(function(t){return t}).attr("x",function(){return i-a}).attr("y",function(t){return g(t)-d/2<g(0)?d/2:g(t)}).attr("text-anchor","right").attr("dx",u).attr("dy",(d-u)/2),x&&e.emptyStartLabel&&c.selectAll("text.tau-sparkline__emptylegend").data([e.emptyStartLabel]).enter().append("text").attr("class","tau-sparkline__emptylegend").text(function(t){return t||""}).attr("x",function(){return p(0)}).attr("y",function(){return g(0)+d/2+2}).attr("text-anchor","left").attr("dx",u).attr("dy",(d-u)/2)}}})});
define('tau/ui/extensions/list/members/extension.list.members.sparklines',["tau/core/extension.base","tau/libs/sparklines/sparklines.user"],function(e,n){return e.extend({"bus dataBind + afterRender":function(e,t,i){var r=i.element,a=r.find(".i-role-sparkline"),s={width:100,height:50,letterWidth:9,letterHeight:9};a.each(function(){var e=new n(s);e.draw(null,this)})}})});
define('tau/ui/templates/list_/ui.template.list.members',["tau/core/templates-factory"],function(t){var e={name:"list.members",engine:"jqote2",markup:['<div class="tau-teamView">','<% var name = this.config&&this.config.currentView.name||"team";%>','<% var isProject = name === "project";%>',"<% if (this.items.length){ %>",'<table class="tau-table">',"<colgroup>",'<col class="tau-teamView-people">','<col class="tau-teamView-role">','<col class="tau-teamView-activity">','<col class="tau-teamView-assignments">',"<%if(isProject){%>",'<col class="tau-teamView-startDate">','<col class="tau-teamView-endDate">',"<%}%>",'<col class="tau-teamView-actions tau-nonprintable">',"</colgroup>","<thead>","<tr>","<th>People</th>","<th>Role</th>","<th>Activity</th>","<th>Assignments</th>","<%if(isProject){%>","<th>Start Date</th>","<th>End Date</th>","<%}%>",'<th class="tau-nonprintable"></th>',"</tr>","</thead>","<tbody>","<% _.forEach(this.items, function(item){ %>",'<tr class="<% if (!item.user.isActive){ %>tau-inactive-tr<% } %> i-role-item" role="item" data-entity-id="<%= item.id %>">',"<td>",'<div class="tau-user-info">','<a href="<%= item.user.url %>">','<img width="20" height="20" alt="" class="tau-avatar" src="<%= item.user.avatarUri %>20">',"</a>",'<div class="tau-user-personal-data">','<div class="tau-name"><a href="<%= item.user.url %>"><%! item.user.name %></a></div>','<div class="tau-email"><a href="<%= item.user.url %>"><%! item.user.email %></a></div>',"</div>","</div>","</td>","<td>","<div>",'<span runas="property.role.modern" data-context:general:id="<%= item.id %>" data-context:general:entity-type:name="<%=name%>Member">',"<%! item.role.name %>","</span>","</div>","<% if (item.user.isAdministrator){ %>",'<span class="tau-user-system-role">admin</span>',"<% } %>","<% if (!item.user.isActive){ %>",'<span class="tau-user-system-role tau-user-system-role-inactive">inactive</span>',"<% } %>","</td>",'<td title="Activity sparkline provides an overview of progress over the last 16 weeks. The numbers shown are: a maximum of assignments done/added at any given week out of those 16, and done/added in the current calendar week (on the right).">',"<svg class=\"tau-sparkline tau-sparkline-user i-role-sparkline\" data-source='<%= JSON.stringify(item.allSparkline) %>'></svg>","</td>","<td>",'<div class="tau-user-assignments">','<span title="open tasks"><i class="tau-entity-icon tau-task">T</i><b><%= item.user.tasksCount %></b></span>','<span title="open bugs"><i class="tau-entity-icon tau-bug">B</i><b><%= item.user.bugsCount %></b></span>','<span title="open user stories"><i class="tau-entity-icon tau-userstory">U</i><b><%= item.user.userStoriesCount %></b></span>',"</div>","</td>","<%if(isProject){%>","<td>",'<div class="tau-user-startDate">','<div runas="property.startDate.projectMember" data-context:general:id="<%= item.id %>" data-context:general:entity-type:name="<%=name%>Member">',"</div>","</div>","</td>","<td>",'<div class="tau-user-endDate">','<div runas="property.endDate.projectMember" data-context:general:id="<%= item.id %>" data-context:general:entity-type:name="<%=name%>Member">',"</div>","</div>","</td>","<%}%>",'<td class="tau-nonprintable"><button type="button" class="tau-btn tau-attention" role="action-detach">Unassign</button></td>',"</tr>","<% },this); %>","</tbody>","</table>","<% }else{ %>",'<div class="tau-message">There are no people in this <%=name%></div>',"<% }  %>","</div>"]};return t.register(e)});
define('tau/configurations/project.container.config',["tau/configurations/baseContainable.container.config","tau/models/model.extensions","tau/models/dataProviders/project/project.model.provider.releases.items","tau/models/dataProviders/project/project.model.provider.releases.groups","tau/models/dataProviders/project/project.model.provider.teams.items","tau/ui/extensions/list/teamprojects/ui.extension.list.teamprojects.action.detach","tau/ui/extensions/list/project/ui.extension.list.project.teams.action.assign","tau/ui/extensions/list/teamprojects/ui.extension.list.teamprojects.action.access","tau/ui/extensions/list/project/ui.extension.list.project.teams.refresher","tau/ui/extensions/list/teamprojects/ui.extension.list.teamprojects.sparklines","tau/ui/templates/list_/project/ui.template.list.project.teams","tau/ui/extensions/list/extension.list.checkEmpty","tau/models/dataProviders/project/project.model.provider.releases_flat.items","tau/models/dataProviders/model.provider.members.items","tau/ui/extensions/list/members/extension.list.members.action.detach","tau/ui/extensions/list/members/extension.list.members.refresher","tau/ui/extensions/list/members/extension.list.members.sparklines","tau/ui/templates/list_/ui.template.list.members"],function(e,t,i,r,s,a,o,l,n,d,p,c,m,y,b,u,f,g){var h=e.extend({colors:["#f9d9d1","#fbe9d6","#fdfadb","#e2eece","#d2ecea","#ceeefa","#d2e0ef","#dddceb","#f5d2e2","#e0e0e0"],init:function(e){this._super(e),e.context.configurator.getUrlBuilder(),this.registerAdditionalInfoItem("Owner",{label:{text:"Owner"},field:{type:"property.owner.project"}}),this.registerAdditionalInfoItem("Abbreviation",{label:{text:"Abbreviation"},field:{type:"property.abbreviation",cssClass:"abbr",editable:!0}}),this.registerAdditionalInfoItem("Color",{label:{text:"Color"},field:{type:"property.color",values:this.colors}}),this.registerAdditionalInfoItem("Reply Email",{label:{text:"Reply Email"},field:{type:"property.email",editable:!0}}),this.registerAdditionalInfoItem("IsActive",{label:{text:"Active?"},field:{type:"property.isActive",editable:!0}}),this.registerAdditionalInfoItem("IsProduct",{label:{text:"Product?"},field:{type:"property.isProduct",editable:!0}}),this.registerAdditionalInfoItem("Company",{label:{text:"Company"},field:{type:"property.company",editable:!0}}),this.registerAdditionalInfoItem("Program",{label:{text:"Program"},field:{type:"property.program",editable:!0}}),this.registerAdditionalInfoItem("Process",{label:{text:"Process"},field:{type:"property.process",editable:!0}}),this.registerAdditionalInfoItem("StartDate",{label:{text:"Start Date"},field:{type:"property.startDate.project",editable:!0}}),this.registerAdditionalInfoItem("EndDate",{label:{text:"End Date"},field:{type:"property.endDate.project",editable:!0}});var t=["board","hasTeams"];this.registerTab("Teams",{cssClass:"tau-teamsProjects-tab",label:"teams",editions:t,header:[{type:"label",text:this.getNames("team"),countFieldNames:["teamProjects"],editions:t}],items:[{type:"container",spinnerConfigForLazy:this.getSpinnerConfigForLazy(),children:[{type:"container",lazy:!0,name:"lazyPlaceholder container",editions:t,children:[{type:"container",editions:t,layout:"selectable",template:{name:"user.team.tab",markup:['<div class="tau-teamsProjects-tab" role="center"></div>']},children:[{type:"finder.team.byProject",selector:"[role=center]",printable:!1},{type:"list",selector:"[role=center]",itemsDataProvider:s,sortable:!1,extensions:[a,o,l,n,d],template:p,views:[{type:"grid.entity",emptyMessage:"No teams have been assigned",rowTemplateName:"list-grid-entity__rowteam_project"}]}]}]}]}]}),this.registerTab("People",{label:"people",header:[{type:"label",text:"People",countFieldNames:["projectMembers"]}],items:[{type:"container",spinnerConfigForLazy:this.getSpinnerConfigForLazy(),children:[{type:"container",lazy:!0,name:"lazyPlaceholder container",children:[{type:"container",layout:"selectable",template:{name:"user.project.tab",markup:['<div class="tau-teamsProjects-tab" role="center"></div>']},children:[{type:"inviter",selector:"[role=center]"},{type:"list.editable",selector:"[role=center]",itemsDataProvider:y,sortable:!1,extensions:[b,u,f],template:g,views:[{type:"grid.entity",name:"project",emptyMessage:"No teams have been assigned",rowTemplateName:"list-grid-entity__rowteam_project"}]}]}]}]}]}),this.registerTab("Releases",{practices:["Iterations"],label:"releases",header:[{type:"label",text:this.getNames("release"),countFieldNames:["releases"]}],items:[{type:"container",spinnerConfigForLazy:this.getSpinnerConfigForLazy(),practices:["Iterations"],children:[{type:"container",lazy:!0,name:"lazyPlaceholder container",practices:["Iterations"],children:[{practices:["Iterations"],type:"quick.add",printable:!1,property:"project",entityType:"release",evictProperties:["releases","releases-count"],label:"Add release"},{practices:["Iterations"],type:"list.editable",itemsDataProvider:i,groupsDataProvider:r,extensions:[c],externalRefreshEvents:["release.items.added"],groupBy:"release.id",sortable:!1,views:[{type:"grid.entity",group:{dataIndex:"id"}}]}]}]}]}),this.registerTab("Releases (flat)",{practices:["~Iterations"],label:"releases-flat",header:[{type:"label",text:this.getNames("release"),countFieldNames:["releases"]}],items:[{type:"container",spinnerConfigForLazy:this.getSpinnerConfigForLazy(),practices:["~Iterations"],children:[{type:"container",lazy:!0,name:"lazyPlaceholder container",practices:["~Iterations"],children:[{practices:["~Iterations"],type:"quick.add",printable:!1,property:"project",entityType:"release",evictProperties:["releases","releases-count"],label:"Add release"},{practices:["~Iterations"],type:"list.editable",itemsDataProvider:m,sortable:!1,externalRefreshEvents:["release.items.added"],views:[{type:"grid.entity"}]}]}]}]})},getAdditionalInfoAliases:function(){return["Abbreviation","Color","Owner","IsActive","IsProduct","Program","Company","Process","StartDate","EndDate","Reply Email"]},getActionsAliases:function(){return["Old Edit","Print","-----","Delete"]},getEntityQuickAddOptions:function(){return{items:[{entityType:"release",relationName:"releases"}]}},getTabsAliases:function(){return["Description","Teams","People","Releases","Releases (flat)","Relations","History"]}});return h});
define('tau/models/extensions/container/container.save.freezer',["Underscore","tau/core/extension.base"],function(e,n){return n.extend({init:function(e){this._super.apply(this,arguments),this.setQueueBusForComponents(e.children),this.suspendedEvents=[]},setQueueBusForComponents:function(e){for(var n=0;n<e.length;n++){var s=e[n];s["queue.bus"]=!0,this.setQueueBusForComponents(s.children||[])}},handleChildComponentCreated:function(e){e.data.on("before_save",this.onBeforeSave,this),e.data.on("childComponentCreated",this.handleChildComponentCreated,this)},"bus childComponentCreated":function(e){this.handleChildComponentCreated(e)},onBeforeSave:function(n){n.suspendMain(),this.fire("event.suspended",n),this.suspendedEvents=e.reject(this.suspendedEvents,function(e){return e.sender===n.sender}),this.suspendedEvents.push(n)},"bus resumeSave":function(){e.each(this.suspendedEvents,function(e){e.resumeMain()})}})});
define('tau/components/extensions/user.view/user.view',["Underscore","tau/components/extensions/component.extension.base"],function(n,t){return t.extend({category:"edit","bus componentsCreated":function(t){var e=n.find(t.data,function(n){return"btnUpdateSettings"==n.component.name});this.fire("update.button.found",e.component)},"bus update.button.found":function(n){n.data.on("view.button.click",this.onButtonClickHandler,this)},"bus update.button.found:last+event.suspended":function(n){n["update.button.found"].data.fire("enable")},"bus update.button.found:last+before_resumeSave":function(n){n["update.button.found"].data.fire("disable")},onButtonClickHandler:function(){this.fire("resumeSave")}})});
define('tau/models/dataProviders/user/user.model.provider.assignments.items',["Underscore","tau/models/dataProviders/model.provider.items.base"],function(t,e){return e.extend({fetch:function(e){var i=this.config.context.entity.id,n=this.config.store,r=this,a=["id",{entityType:["id","name"]},"name","numericPriority","tags","isPrivate",{entityState:this.fields.entityStateWithComment},{owner:["id","firstName","lastName","avatarUri"]},{responsible:["id","firstName","lastName","avatarUri"]},{project:["id","abbreviation"]}],s={id:i},o={fields:[{assignable:["id",{entityType:["id","name"]},"name","numericPriority","tags","effort","effortCompleted","effortToDo","timeSpent","timeRemain",{entityState:this.fields.entityStateWithComment},{roleEfforts:["id","effort","effortToDo",{role:["id","name","isPair","hasEffort"]}]},{assignments:["id",{role:["id"]},{generalUser:r.fields.generalUser}]},{project:["id","abbreviation"]}]}],$query:{assignable:{entityState:{isFinal:0},project:{isActive:1}},generalUser:s}},f=[function(e){n.find("assignment",o).done(function(i){var n=t.pluck(i[0].data,"assignable");t.map(n,function(t){t.__type="assignable"}),e(!1,n)})},function(t){n.find("impediment",{fields:a,$query:{entityState:{isFinal:0},responsible:s}}).done(function(e){t(!1,e[0].data)})}];t.series(f,function(i,n){var a=[];t.each(n,function(t){a=a.concat(t)});var n=r._convertData(a);e(n)})},_convertData:function(e){return e=this._super(e),this._calculateEffortToMaximum(t.filter(e,function(t){return"assignable"==t.__type})),e=this._removeDuplicates(e),this._sortByPriority(e)},_removeDuplicates:function(e){var i={},n=t.filter(e,function(t){var e=i.hasOwnProperty(t.id);return i[t.id]=!0,0==e});return n},_convertItem:function(e){var i={id:e.id,name:e.name,numericPriority:e.numericPriority,__type:e.entityType.name,entityState:{id:e.entityState.id,name:e.entityState.name,isInitial:e.entityState.isInitial,isFinal:e.entityState.isFinal,numericPriority:e.entityState.numericPriority},tags:this._processTags(e),projectId:e.project?e.project.id:void 0,project:e.project,entitiesCount:0,url:this.config.context.configurator.getUrlBuilder().getNewViewUrl(e.id,e.entityType.name,!0)};return"assignable"==e.__type?t.extend(i,{assignments:this._processAssignments(e),effort:this._getEffortData(e)}):"impediment"==e.__type&&t.extend(i,{responsible:e.responsible,effortMock:{}}),i.visibleEntityState=i.entityState,i}})});
define('tau/models/model.list.open.assignments',["Underscore","tau/core/model-base"],function(e,t){var n,i=0;return n=t.extend({name:"model.list.open.assignments",createSubscription:function(t,n){var a=this,r=(this.config.context.applicationContext.loggedUser,this.config.context.entity.id);a.store.on({eventName:"afterSave",type:t,listener:a},function(d){var s=d.data.id;d.data&&d.data.cmd&&"assignment"==d.data.cmd.type&&n(s)&&a.store.get(t,{id:s,fields:[{assignments:[{generalUser:["id"]}]}]}).done(function(t){var n=t[0].data.assignments,d=e.find(n,function(e){return e.generalUser.id===r});(0===n.length||void 0===d)&&(i--,0===i&&a.fire("refresh"),a.fire("model.assignment.did.removed",{id:s}))})}),a.store.on({eventName:"beforeSave",type:t,listener:a},function(e){var t=e.data.id;if(n(t)&&e.data.changes.entityState){var i=e.data.cmd,a=i.config.$include=i.config.$include||[];a.push({entityState:["id","isFinal"]})}}),a.store.on({eventName:"afterSave",type:t,listener:a},function(e){var t=e.data.id;if(n(t)){var r=e.data.changes.entityState;if(r)a.store.get("entityState",{id:r.id,fields:["isFinal"]}).done(function(e){var n=e[0].data;n.isFinal&&(i--,0===i&&a.fire("refresh"),a.fire("model.assignment.did.removed",{id:t}))});else{var d=e.data.changes.responsible;d&&(i--,0===i&&a.fire("refresh"),a.fire("model.assignment.did.removed",{id:t}))}}})},"bus afterItemsProvided":function(t){var n=this,a=t.data.data;if(i=a.length,a&&a.length){var r=function(t){return e(a).detect(function(e){return e.id==t})};e(a).chain().map(function(e){return e.__type}).unique().each(function(e){n.createSubscription(e,r)})}}})});
define('tau/ui/extensions/list/open.assignments/extension.list.open.assignments',["tau/components/extensions/component.extension.base"],function(e){return e.extend({getRowElement:function(e,t){var n=e.find(".i-item-"+t).parents(".tau-list__list__item");return n},"bus afterRender:last+model.assignment.did.removed":function(e,t,n){var i=t.element,l=this.getRowElement(i,n.id);this.fire("markElementToBeDeleted",{element:l}),l.slideUp("slow"),this.fire("deleteElement",{element:l,callback:$.noop})}})});
define('tau/ui/extensions/ui.extension.add.css',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,n,s){return s.extend({category:"edit","bus afterRender":function(e){this.config.hasOwnProperty("cssClass")&&e.data.element.addClass(this.config.cssClass)}})});
define('tau/models/dataProviders/user/user.model.provider.teams.items',["Underscore","tau/models/dataProviders/model.provider.items.base"],function(e,t){return t.extend({fetch:function(e){this._fetch("teamMembers","teamMember",null,e)},_createDetailCommand:function(e){var t={};return t[e]=["id",{team:["id","name","icon"]},{role:["id","name"]}],t},_convertData:function(t){var r=this._super(t);return e.sortBy(r,function(e){return e.team.name.toLowerCase()})},_convertItem:function(e){var t={id:e.id,__type:"teamMember",team:e.team,role:e.role,uri:this.config.context.configurator.getUrlBuilder().getNewViewUrl(e.team.id,"team",!0)};return t}})});
define('tau/ui/extensions/list/user/ui.extension.list.user.teams.refresh',["Underscore","tau/core/extension.base"],function(e,t){return t.extend({"bus beforeInit":function(e,t){var n=t.config.context.configurator,i=t.config.context.entity,o=n.getStore(),r=this;n.getGlobalBus().unbind(this),n.getGlobalBus().on("teamsAndUsers.connected",function(){o.evictProperties(i.id,i.entityType.name,["teamMembers"]),r.fire("refresh")},this),o.unbind(this);var s=function(){};o.on({eventName:"afterSave",type:"team",listener:this},s)},"bus beforeInit:last + destroy":function(e,t){var n=t.config.context.configurator;n.getGlobalBus().unbind(this),n.getStore().unbind(this)}})});
define('tau/ui/extensions/list/user/ui.extension.list.user.action.detach',["tau/core/extension.base"],function(e){return e.extend({"bus afterInit + afterRender":function(e,t,r){var n=r.element,o=t.config.context.configurator.getStore(),i=t.config.context.entity;n.delegate("[role=action-detach]","click",function(e){var t=$(e.target);if(!t.data("confirmMessage")||confirm(t.data("confirmMessage"))){var r=t.parents("[role=item]:first"),n=r.data(),a={};a[n.entityType+"s"]={id:n.entityId};var c="projectmember"==n.entityType.toLowerCase()?"project":"team";o.removeFromList(c,{id:n[c+"Id"],$set:a}).done({success:function(){r.remove(),o.evictProperties(i.id,i.entityType.name,["project"==c?"projectMembers":"teamMembers"])}})}})}})});
define('tau/ui/templates/list_/user/ui.template.list.user.teams',["tau/core/templates-factory"],function(t){var e={name:"list.user.teams",engine:"jqote2",markup:["<div>","<% if (this.items.length == 0){ %>",'<div class="tau-message">User doesn\'t belong to any team</div>',"<% } else { %>",'<div class="tau-user-team-list">','<table class="tau-table">',"<colgroup>",'<col class="tau-team-name-col">','<col class="tau-role">','<col class="tau-remove-person">',"</colgroup>","<thead>","<tr>","<th>Team</th>","<th>Role</th>","<th></th>","</tr>","</thead>","<tbody>","<% _.forEach(this.items, function(item){ %>",'<tr class="i-role-item" role="item" data-entity-id="<%= item.id %>" data-entity-type="<%= item.__type.toLowerCase() %>"  data-team-id="<%= item.team.id %>">',"<td>",'<div class="tau-team-name">','<a href="<%= item.uri %>"><i class="tau-icon tau-icon_type_svg <% if (item.team.icon){ %>tau-icon_name_<%= item.team.icon  %><% } %>"></i><span><%! item.team.name %></span></a>',"</div>","</td>","<td>",'<div class="tau-team-user-role" runas="property.role.modern" data-context:general:id="<%= item.id %>" data-context:general:entity-type:name="<%= item.__type %>">',"<%! item.role.name %>","</div>","</td>","<td>",'<button class="tau-btn tau-attention" role="action-detach" type="button">Unassign</button>',"</td>","</tr>","<% }); %>","</tbody>","</table>","</div>","<% }  %>","</div>"]};return t.register(e)});
define('tau/models/dataProviders/user/user.model.provider.projects.items',["Underscore","tau/models/dataProviders/model.provider.items.base"],function(e,r){return r.extend({fetch:function(e){this._fetch("projectMembers","projectMember",null,e)},_createDetailCommand:function(e){var r={};return r[e]=["id",{project:["id","name","color"]},{role:["id","name"]}],r},_createQuery:function(){return{project:{isActive:1}}},_convertData:function(r){var t=this._super(r);return t=e.filter(t,function(e){return e.project}),e.sortBy(t,function(e){return e.project.name.toLowerCase()})},_convertItem:function(e){var r={id:e.id,__type:"projectMember",project:e.project,role:e.role,uri:this.config.context.configurator.getUrlBuilder().getNewViewUrl(e.project.id,e.project.__type,!0)};return r}})});
define('tau/ui/extensions/list/user/ui.extension.list.user.projects.refresh',["Underscore","tau/core/extension.base"],function(e,t){return t.extend({"bus beforeInit":function(e,t){var n=t.config.context.configurator,i=t.config.context.entity,o=n.getStore(),r=this;n.getGlobalBus().unbind(this),n.getGlobalBus().on("projectsAndUsers.connected",function(){o.evictProperties(i.id,i.entityType.name,["projectMembers"]),r.fire("refresh")},this),n.getGlobalBus().on("teamsAndUsers.connected",function(){o.evictProperties(i.id,i.entityType.name,["projectMembers"]),r.fire("refresh")},this),o.unbind(this);var s=function(){};o.on({eventName:"afterSave",type:"project",listener:this},s)},"bus beforeInit:last + destroy":function(e,t){var n=t.config.context.configurator;n.getGlobalBus().unbind(this),n.getStore().unbind(this)}})});
define('tau/ui/templates/list_/user/ui.template.list.user.projects',["tau/core/templates-factory"],function(t){var e={name:"list.user.projects",engine:"jqote2",markup:["<% if (this.items.length == 0){ %>",'<div class="tau-message">User doesn\'t belong to any project</div>',"<% } else { %>",'<div class="tau-user-project-list">','<table class="tau-table">',"<colgroup>",'<col class="tau-project-name">','<col class="tau-role">','<col class="tau-user-startDate">','<col class="tau-user-endDate">','<col class="tau-remove-person">',"</colgroup>","<thead>","<tr>","<th>Project</th>","<th>Role</th>","<th>Start Date</th>","<th>End Date</th>","<th></th>","</tr>","</thead>","<tbody>","<% _.forEach(this.items, function(item) { %>",'<tr class="i-role-item" role="item" data-entity-id="<%= item.id %>" data-entity-type="<%= item.__type.toLowerCase() %>" data-project-id="<%= item.project.id %>">',"<td>",'<div class="tau-project-name">','<a href="<%= item.uri %>"><i  <% if (item.project.color){ %> style="background-color: <%= item.project.color %>; "<% } %> class="tau-icon tau-icon_type_color"></i><span title="<%! item.project.name %>"><%! item.project.name %></span></a>',"</div>","</td>","<td>",'<div class="tau-team-user-role" runas="property.role.modern" data-context:general:id="<%= item.id %>" data-context:general:entity-type:name="<%= item.__type %>">',"<%! item.role.name %>","</div>","</td>","<td>",'<div class="tau-user-startDate">','<div runas="property.startDate.projectMember" data-context:general:id="<%= item.id %>" data-context:general:entity-type:name="ProjectMember">',"</div>","</div>","</td>","<td>",'<div class="tau-user-endDate">','<div runas="property.endDate.projectMember" data-context:general:id="<%= item.id %>" data-context:general:entity-type:name="ProjectMember">',"</div>","</div>","</td>","<td>",'<button class="tau-btn tau-attention" role="action-detach" type="button">Unassign</button>',"</td>","</tr>","<% }); %>","</tbody>","</table>","</div>","<% }  %>","</div>"]};return t.register(e)});
define('tau/ui/templates/property/ui.template.property.title',["tau/core/templates-factory"],function(e){var t={name:"property.title",engine:"jqote2",markup:['<div class="user-title property-text user-title-<%! this.name %>" data-placeholder="<%! this.placeholderText %>">',"<%! _.asString(this.output) %>","</div>"]};return e.register(t)});
define('tau/configurations/user.container.config',["tau/configurations/base.container.config","tau/models/extensions/container/container.save.freezer","tau/components/extensions/user.view/user.view","tau/models/dataProviders/user/user.model.provider.assignments.items","tau/models/model.list.open.assignments","tau/ui/extensions/list/open.assignments/extension.list.open.assignments","tau/ui/extensions/list/request/extension.list.entityState","tau/ui/extensions/ui.extension.add.css","tau/core/termProcessor","tau/models/dataProviders/user/user.model.provider.teams.items","tau/ui/extensions/list/user/ui.extension.list.user.teams.refresh","tau/ui/extensions/list/user/ui.extension.list.user.action.detach","tau/ui/templates/list_/user/ui.template.list.user.teams","tau/models/dataProviders/user/user.model.provider.projects.items","tau/ui/extensions/list/user/ui.extension.list.user.projects.refresh","tau/ui/extensions/list/user/ui.extension.list.user.action.detach","tau/ui/templates/list_/user/ui.template.list.user.projects","tau/ui/templates/property/ui.template.property.title","tau/utils/utils.date"],function(e,t,s,i,a,n,r,o,l,u,c,p,m,d,y,g,h,f,x){return e.extend({init:function(e){this._super(e),this.registerTab("Assignments",{selected:!0,label:"assignments",header:[{type:"label",text:"Open Assignments"}],items:[{type:"container",spinnerConfigForLazy:this.getSpinnerConfigForLazy(),children:[{type:"container",lazy:!0,name:"lazyPlaceholder container",children:[{type:"list.editable",itemsDataProvider:i,extensions:[a,n],multiprojects:!0,views:[{type:"grid.entity"}]}]}]}]}),this.registerTab("Account Settings",{label:"accountSettings",header:[{type:"label",text:"Account Settings"}],items:[{type:"container",spinnerConfigForLazy:this.getSpinnerConfigForLazy(),children:[{type:"container",lazy:!0,name:"lazyPlaceholder container",children:[{type:"user.settings"}]}]}]}),this.registerTab("Teams and Projects",{label:"teams-projects",header:[{type:"label",text:[this.getNames("project"),this.getNames("team")]}],items:[{type:"container",spinnerConfigForLazy:this.getSpinnerConfigForLazy(),children:[{type:"container",lazy:!0,name:"lazyPlaceholder container",children:[{type:"container",layout:"selectable",template:{name:"user.teamprojects.tab",markup:['<div class="tau-teamsProjects-tab">','<div class="tau-half-col" role="left"></div>','<div class="tau-half-col tau-right"  role="right"></div>',"</div>"].join("")},children:[{type:"finder.team.byUser",selector:"[role=right]"},{selector:"[role=right]",type:"list.editable",itemsDataProvider:u,sortable:!1,extensions:[c,p],template:m},{type:"finder.project.byUser",selector:"[role=left]"},{selector:"[role=left]",type:"list.editable",itemsDataProvider:d,sortable:!1,extensions:[y,g],template:h}]}]}]}]})},getTabsAliases:function(){return["Assignments","Account Settings","Teams and Projects"]},getPanelsAliases:function(){return[]},getAdditionalInfoAliases:function(){return[]},getConfig:function(e){var t=e.context.getTerms(),s=e.context,i=s.entity.id,a=s.getLoggedUser(),n=i===a.id||a.isAdministrator;return this.termProcessor=new l(t),{children:[{type:"container",name:"main entity container",layout:"list",cssClass:"main-container tau-user-view",cellsCssClass:["general-info","additional-info"],children:[{type:"breadcrumbs"},{type:"container",layout:"table",children:[{type:"avatar",isEdit:n},{type:"container",name:"main entity container",layout:"list",children:[{type:"container",layout:"table",children:[{type:"property.text",propertyName:"firstName",restoreText:!0,editable:n,placeholderText:"first name",template:f},{type:"property.text",propertyName:"lastName",restoreText:!0,editable:n,placeholderText:"last name",template:f}]},{type:"container",layout:"table",children:[{type:"property.role",propertyName:"role",cssClass:"tau-role",extensions:[o],editable:!0},{type:"property.text",propertyName:"lastLoginDate",cssClass:"tau-last_login_date",extensions:[o],template:{name:"user.lastLoginDate",customFunctions:{format:function(e){return e?x.format.date.short(e):"unknown"}},engine:"jqote2",markup:['<div class="tau-last_login_date">','<span class="property tau-property">','<span class="property-text tau-property__value tau-property__value_margin_right">',"Last login: <%= fn.format(this.text) %>","</span>","</span>","</div>"].join("")}}]}]}]},{type:"container",name:"general info column container",children:[{type:"tabs",cssClass:"tau-tabs",stateName:"generalTab",tabs:this.getTabs(e)}]}]}]}}})});
define('tau/models/dataProviders/team/team.model.provider.projects.items',["Underscore","tau/models/dataProviders/model.provider.items.base"],function(e,t){return t.extend({sparklineLength:16,fetch:function(e){this._fetch("teamProjects","teamProject",!1,e)},_fetch:function(e,t,r,i){var o=this,n=this.config.context.entity,s=this.config.context.configurator;$.ajax({url:s.getApplicationPath()+"/api/v2/TeamProject?select={"+["id","isProjectAccessed","Team.TeamMembers.Select(User.id) as teamMembers","Team.TeamMembers.Count() as teamMembersCount",'"TeamProject" as __type',"new("+["Project.id","Project.name","Project.color","Project.ProjectMembers.Select(User.id) as projectMembers","Project.Bugs.Count(entityState.IsFinal != true AND Team.id = "+n.id+") as openBugsCount","Project.Bugs.Count(entityState.IsFinal == true AND Team.id = "+n.id+") as closedBugsCount","Project.UserStories.Count(entityState.IsFinal != true AND Team.id = "+n.id+") as openUsCount","Project.UserStories.Count(entityState.IsFinal == true AND Team.id = "+n.id+") as closedUsCount","Project.UserStories.Where(Team.id = "+n.id+").Sparkline("+this.sparklineLength+") as userStoriesSparkline","Project.Bugs.Where(Team.id = "+n.id+").Sparkline("+this.sparklineLength+") as bugsSparkline"].join(",")+") as project"].join(",")+"}&where=(Team.id=="+n.id+")"}).done(function(e){i(o._convertData(e.items))}).fail(function(){i(o._convertData([]))})},_convertData:function(e){return e=this._super(e),this._sortByPriority(e)},_sortByPriority:function(t){return e.sortBy(t,function(e){return-1*e.id})},_convertItem:function(t){var r=t.project.userStoriesSparkline,i=t.project.bugsSparkline,o={id:t.id,__type:"teamProject",teamMembers:t.teamMembers,isProjectAccessed:t.isProjectAccessed,teamMembersCount:t.teamMembers.length,teamMembersInProjectCount:e.intersection(t.teamMembers,t.project.projectMembers).length,project:t.project,uri:this.config.context.configurator.getUrlBuilder().getNewViewUrl(t.project.id,"project",!0),appPath:this.config.context.configurator.getApplicationPath(),userStoriesSparkline:r,bugsSparkline:i};return o}})});
define('tau/ui/extensions/list/team/projects/ui.extension.list.team.projects.action.assign',["tau/ui/extensions/list/teamprojects/ui.extension.list.teamprojects.action.assign.base"],function(e){return e.extend({_getTeamProject:function(e,t,i){return{id:i.id,project:{id:i.project.id,projectMembers:i.project.projectMembers},team:{id:e.id,teamMembers:i.teamMembers}}}})});
define('tau/ui/extensions/list/team/projects/ui.extension.list.team.projects.refresher',["Underscore","tau/core/extension.base"],function(e,t){return t.extend({"bus beforeInit":function(e,t){var n=t.config.context.configurator,r=n.getStore(),i=this;r.unbind(this),r.on({eventName:"afterSave",type:"team",listener:this,hasChanges:["teamProjects|teamMembers"]},function(){i.fire("refresh")}),r.on({eventName:"afterSave",type:"project",listener:this,hasChanges:["projectMembers"]},function(){i.fire("refresh")}),this.on("destroy",function(){r.unbind(i)})}})});
define('tau/ui/templates/list_/team/ui.template.list.team.projects',["tau/core/templates-factory"],function(e){var t={name:"list.team.projects",engine:"jqote2",markup:['<div class="tau-team-control">',"<% if (this.items.length){ %>",'<table class="tau-team-info">',"<colgroup>",'<col class="tau-team">','<col class="tau-us-progress">','<col class="tau-us-total">','<col class="tau-bug-progress">','<col class="tau-bug-total">','<col class="tau-assign-info">',"</colgroup>","<thead>","<tr>","<th>Project</th>",'<th><i class="tau-entity-icon tau-userstory">U</i>User&nbsp;Stories</th>',"<th>Done / Open</th>",'<th><i class="tau-entity-icon tau-bug">B</i>Bugs</th>',"<th>Done / Open</th>","<th>Assigned People</th>","</tr>","</thead>","<tbody>","<% _.forEach(this.items, function(item){ %>",'<tr class="i-role-item" role="item" data-entity-id="<%= item.id %>">',"<td>",'<div class="tau-project-name">',"<h3>",'<a href="<%= item.uri %>">','<i <% if (item.project.color) { %>style="background-color: <%= item.project.color %>;"<% } %> class="tau-icon tau-icon_type_color"></i>',"<%! item.project.name %>","</a>",'<span class="tau-unassign" title="Unassign project from this team?" ',"data-confirm-message=\"Are you sure you want to remove project '<%! item.project.name %>' from this team?\"></span>","</h3>","</div>","</td>",'<td title="User Stories sparkline provides an overview of progress over the last 16 weeks. The numbers shown are: a maximum of user stories done/added at any given week out of those 16, and done/added in the current calendar week (on the right).">',"<svg class=\"tau-sparkline i-role-sparkline\" data-source='<%= JSON.stringify(item.userStoriesSparkline) %>'></svg>","</td>","<td>",'<div class="tau-fraction tau-userstory">','<span title="done"><%= item.project.closedUsCount %></span><br>','<b title="open"><%= item.project.openUsCount %></b>',"</div>","</td>",'<td title="Bugs sparkline provides an overview of progress over the last 16 weeks. The numbers shown are: a maximum of bugs fixed/added at any given week out of those 16, and fixed/added in the current calendar week (on the right).">',"<svg class=\"tau-sparkline tau-sparkline-bugs i-role-sparkline\" data-source='<%= JSON.stringify(item.bugsSparkline) %>'></svg>","</td>","<td>",'<div class="tau-fraction tau-bug" >','<span title="done"><%= item.project.closedBugsCount %></span><br>','<b title="open"><%= item.project.openBugsCount %></b>',"</div>","</td>",'<td class="tau-assign-info">','<div class="tau-count" title="<%if (item.teamMembersInProjectCount === 0){%>No<%}%><% else {%><%= item.teamMembersInProjectCount%><%}%><% if (item.teamMembersInProjectCount !== 1){%> people<%}%><% else {%> person<%}%> in this Team assigned to Project"><%= item.teamMembersInProjectCount %> of <%= item.teamMembersCount %>','<a href="" class="i-role-item" role="assign-all" title="All people in the Team will be assigned to this Project" <% if (item.teamMembersInProjectCount === item.teamMembersCount) { %>style="display: none;"<% } %> data-confirm-message="Are you sure you want to assign all people from team to project \'<%! item.project.name %>\'?">Assign all</a>',"</div>",'<div class="tau-auto-assign">','<label class="tau-checkbox" title="Any new person in the Team will be auto-assigned to this Project">','<input type="checkbox" class="i-role-item" role="auto-assign" <% if (item.isProjectAccessed) { %> checked<% } %>><i></i><span>Auto-assign new people</span>',"</label>","</div>","</td>","</tr>","<% }); %>","</tbody>","</table>","<% }else{ %>",'<div class="tau-message">This team has no projects</div>',"<% } %>","</div>"]};return e.register(t)});
define('tau/configurations/team.container.config',["tau/configurations/baseContainable.container.config","tau/models/dataProviders/team/team.model.provider.projects.items","tau/ui/extensions/list/teamprojects/ui.extension.list.teamprojects.action.detach","tau/ui/extensions/list/team/projects/ui.extension.list.team.projects.action.assign","tau/ui/extensions/list/teamprojects/ui.extension.list.teamprojects.action.access","tau/ui/extensions/list/team/projects/ui.extension.list.team.projects.refresher","tau/ui/extensions/list/teamprojects/ui.extension.list.teamprojects.sparklines","tau/ui/templates/list_/team/ui.template.list.team.projects","tau/models/dataProviders/model.provider.members.items","tau/ui/extensions/list/members/extension.list.members.action.detach","tau/ui/extensions/list/members/extension.list.members.refresher","tau/ui/extensions/list/members/extension.list.members.sparklines","tau/ui/templates/list_/ui.template.list.members"],function(e,t,i,s,a,r,n,o,l,c,m,p,u){var d=e.extend({icons:["apple","windows","linux","chrome","firefox","internet_explorer","apache","wrench","binoculars","camcorder","camera","money","gamepad","traveler","finish","achievement","help","call_center","stethoscope","wand","horn","bug","skype","phone","pulse","thermometer","book","food","ball","gun","rabbit","airplane","truck","helicopter","spades","laugh","sunglasses","angry","skull","doctor","shamrock","sun","umbrella","knight","fish","ufo","smile","batman","superman","captain_america","flash","shield","star"],init:function(e){this._super(e),this.registerAdditionalInfoItem("Icon",{label:{text:"Icon"},field:{type:"property.icon",values:this.icons}}),this.registerAdditionalInfoItem("Abbreviation",{label:{text:"Abbreviation"},field:{type:"property.abbreviation",cssClass:"abbr",editable:!0}}),this.registerTab("Projects",{label:"projects",header:[{type:"label",text:this.getNames("project"),countFieldNames:["teamProjects"]}],items:[{type:"container",spinnerConfigForLazy:this.getSpinnerConfigForLazy(),children:[{type:"container",lazy:!0,name:"lazyPlaceholder container",children:[{type:"container",layout:"selectable",template:{name:"team.projects.tab",markup:['<div class="tau-teamsProjects-tab" role="center"></div>']},children:[{type:"finder.project.byTeam",selector:"[role=center]",printable:!1},{type:"list",itemsDataProvider:t,selector:"[role=center]",sortable:!1,extensions:[i,s,a,r,n],template:o,views:[{type:"grid.entity",emptyMessage:"No projects have been assigned",rowTemplateName:"list-grid-entity__rowproject_team"}]}]}]}]}]}),this.registerTab("People",{label:"people",header:[{type:"label",text:"People",countFieldNames:["teamMembers"]}],items:[{type:"container",spinnerConfigForLazy:this.getSpinnerConfigForLazy(),children:[{type:"container",lazy:!0,name:"lazyPlaceholder container",children:[{type:"container",layout:"selectable",template:{name:"user.team.tab",markup:['<div class="tau-teamsProjects-tab" role="center"></div>']},children:[{type:"inviter",selector:"[role=center]",printable:!1},{type:"list.editable",selector:"[role=center]",itemsDataProvider:l,sortable:!1,extensions:[c,m,p],template:u}]}]}]}]})},getAdditionalInfoAliases:function(){return["Abbreviation","Icon"]},getActionsAliases:function(){return["Print","-----","Delete"]},getTabsAliases:function(){return["Description","Projects","People","Relations"]}});return d});
define('tau/ui/templates/board.page/ui.template.board.page.container',["tau/core/templates-factory"],function(a){var e={name:"container.boardPlus",engine:"jqote2",markup:['<div role="app-body" class="tau-app-body">','    <header role="header" class="tau-app-header">',"    </header>",'    <div role="main" class="tau-app-main-pane tau-layout tau-layout-board"></div>','    <aside role="aside" class="tau-app-secondary-pane"></aside>',"</div>"],dependencies:[]};return a.register(e)});
define('tau/ui/templates/board.plus/ui.template.boardplus.container',["Underscore","tau/core/templates-factory"],function(e,a){var r={name:"boardplus.container",engine:"jqote2",markup:['<div class="tau-board tau-board_animate_false">',"</div>"],dependencies:[]};return a.register(r)});
define('tau/ui/extensions/board.page/ui.extension.board.page.collapser',["Underscore","jQuery","tau/core/extension.base"],function(e,i,t){return t.extend({configFieldName:"collapser_aside_collapsed","bus beforeInit + afterRender":function(i,t,a){var s=t.config.context.configurator,r=s.getSettingsManager(),n=a.element,o=this.configFieldName,d=n.filter("[role=app-body]:first");this.fire("$appBody.ready",d),this.fire("configurator.ready",s),r.get({fields:[o],callback:e.bind(function(e){this.fire("isCollapsed.ready",!!e[o])},this)}),r.unbind({listener:this}),r.bind({fields:[o],listener:this,callback:e.bind(function(e){this.fire("isCollapsed.ready",!!e[o])},this)})},"bus $appBody.ready:last + configurator.ready:last + isCollapsed.ready":function(e,t,a,s){var r=t.hasClass("tau-sp-collapsed");r!=s&&(t.toggleClass("tau-sp-collapsed",s),i(a.getWindow()).trigger("resize"))},"bus configurator.ready+destroy":function(e,i){var t=i.getSettingsManager();t.unbind({listener:this})}})});
define('tau/ui/extensions/board.container/ui.extension.board.container.editMode',["Underscore","jQuery","tau/core/extension.base"],function(t,e,s){return s.extend({"bus boardSettings.ready:last + destroy":function(t,e){e.boardSettings.unbind({listener:this})},"bus childrenBuses.ready + afterRender:last + boardSettings.ready:last":function(t,e,s,i){var n=this,a=e.board_editor_container;a&&(a.on("boardSettings.cardSetIsEmpty",function(){n._showEmptyCardsSetNotification(s.element.find(".tau-board-settings-cards h4"),a)}),i.boardSettings.bind({fields:["emptyCardsSet"],listener:this,callback:function(){n._showEmptyCardsSetNotification(s.element.find(".tau-board-settings-cards h4"),a)}}))},"bus beforeInit:last + boardSettings.ready:last + afterRender":function(t,e,s,i){var n=s.boardSettings,a=i.element,r=e.config.context.configurator.getLoggedUser(),o=e.config.context.configurator.getBoardAccessService();n.get({fields:["ownerIds","edit","isDraft"],callback:function(t){var e=!!t.edit;t.cells.types&&0===t.cells.types.length&&(e=!0,n.set({set:{edit:!0}})),t.isDraft&&!o.isEditable(t,r)&&(e=!1,n.set({set:{edit:!1}})),a.toggleClass("tau-settings-active",e)}}),n.unbind({listener:this}),n.bind({fields:["edit","editMore"],listener:this,callback:function(t){a.toggleClass("tau-settings-active",t.edit||!1)}})},_showEmptyCardsSetNotification:function(t,e){e.fire("tab.activate","setup"),t.addClass("tau-attention"),t.animateWithCss({cssClassName:"tau-attention-shake"})}})});
define('tau/ui/extensions/board.container/ui.extension.board.container.viewMode',["jQuery","tau/core/extension.base"],function(e,n){return n.extend({"bus afterInit + boardSettings.ready":function(e,n,i){var t=i.boardSettings,r=this;t.unbind({listener:this}),t.bind({fields:["viewMode"],listener:this,callback:function(){r.fire("refresh")}})}})});
define('tau/components/board.changelog/extensions/ui.extension.board.changelog.base',["jQuery","Underscore","tau/core/extension.base","tau/components/board.changelog/controllers/controller.board.changelog","tau/components/board.changelog/models/model.board.changelog"],function(e,n,o){return o.extend({init:function(e){this._super(e)},_afterInitialize:function(){},"bus initialize":function(e,n){this._controller=n.context.configurator.getChangelogController(),this._afterInitialize()}})});
define('tau/components/board.changelog/extensions/ui.extension.board.changelog.checker',["jQuery","Underscore","tau/components/board.changelog/extensions/ui.extension.board.changelog.base"],function(e,n,o){return o.extend({_afterInitialize:function(){this._controller.checkNewVersion(),this._super()}})});
define('tau/ui/extensions/ui.extension.board.listeners',["jQuery","tau/core/extension.base"],function(e,n){return n.extend({init:function(e){this._super(e),this.configurator=e.context.configurator,this.configurator.registerService("currentBoard",{$element:null})},"bus childComponentCreated":function(e,n){"board.plus.container"===n.name&&(n.on("childComponentCreated",function(e){e.data.on("model.sliceInfo.retrieved",function(e,n){this.configurator.service("currentBoard").sliceInfo=n},this)},this),n.on("afterRender",function(e){this.configurator.service("currentBoard").$element=e.data.element},this))}})});
define('tau/configurations/board.container.config',["Underscore","tau/core/class","tau/ui/templates/board.page/ui.template.board.page.container","tau/ui/templates/board.plus/ui.template.boardplus.container","tau/ui/extensions/board.page/ui.extension.board.page.collapser","tau/ui/extensions/board.container/ui.extension.board.container.editMode","tau/ui/extensions/board.container/ui.extension.board.container.viewMode","tau/components/board.changelog/extensions/ui.extension.board.changelog.checker","tau/components/extensions/error/extension.errorBar","tau/ui/extensions/ui.extension.board.listeners"],function(e,o,t,a,r,i,n,l,s,d){return o.extend({init:function(e){this.configurator=e},getMasterConfig:function(){var e={layout:"selectable",template:t,extensions:[r],children:[{name:"board main menu",type:"board.main.menu",selector:"[role=header]"},{type:"container",selector:"[role=header]",useAnimation:!1,extensions:[l,s]},{type:"global.context.control",selector:"[role=header]"},{type:"board.clear.sample.data",name:"board.clear.sample.data",selector:"[role=header]"},{type:"board.collapser.aside",selector:"[role=aside]"},{name:"board general quick add",type:"board.general.quick.add",selector:"[role=aside]"},{type:"board.clipboard",selector:"[role=main]",options:{refreshTimeout:300}},{type:"board.entityViewer",name:"entityViewer",selector:"[role=main]"},{type:"board.tools.container",name:"board_tools_container",selector:"[role=aside]",useAnimation:!1,layout:"selectable",children:[{name:"board_tools_tab_about",type:"bubble.container",visible:!1,spinner:!1,useAnimation:!1,selector:"[role=about]",label:"about",autoClose:!1,stackName:"boardtools",children:[{name:"board_about",type:"board.system-info"}],extensions:[]}]}]},o=this.configurator.getFeaturesService().isEnabled("new.board.menu");return o?e.children.push({type:"board.menu",selector:"[role=aside]",lazy:!0}):e.children.push({type:"board.selector",selector:"[role=aside]"},{type:"board.add",selector:"[role=aside]"}),e},getPageBoardConfig:function(){var o=this.configurator.getFeaturesService();return{type:"board.container",selector:"[role=main]",layout:"list",template:a,extensions:[i,d],children:[{type:"board.toolbar",label:"board_toolbar",min:1,max:6,defaultValue:3,extensions:[n]},{type:"board.editor.container",layout:"selectable",label:"board_editor_container",visible:!1,spinner:!1,useAnimation:!1,children:e.compact([{type:"board.owner",selector:"[role=toolbar]"},{type:"board.editor.access",visible:!1,layout:"replaceable",label:"access",selector:"[role=access]"},o.isEnabled("boardTemplates")?{name:"board_editor_tab_templates",type:"board.container",layout:"replaceable",visible:!1,spinner:!1,useAnimation:!1,selector:"[role=templates]",label:"templates",children:[{name:"board_templates",type:"board.templates.selector"}]}:!1,{name:"board_editor_tab_editor",type:"board.container",layout:"replaceable",visible:!0,spinner:!1,useAnimation:!1,selector:"[role=editor]",label:"setup",children:[{name:"board_editor",type:"board.editor"}]},{type:"board.editor.remember.context",selector:"[role=editor]",childrenContainerSelector:".i-role-output"},{name:"board_editor_tab_limits",type:"board.container",layout:"replaceable",visible:!1,spinner:!1,useAnimation:!1,selector:"[role=limits]",label:"limits",children:[{name:"board_limits",type:"board.limits"}]},{name:"board_editor_tab_prioritization",type:"board.container",layout:"replaceable",visible:!1,spinner:!1,useAnimation:!1,selector:"[role=prioritization]",label:"prioritization",children:[{name:"board_editor_prioritization",type:"board.editor.prioritization"}]},{name:"board_editor_tab_customize",type:"board.container",layout:"replaceable",visible:!1,spinner:!1,useAnimation:!1,selector:"[role=customize]",label:"customize",children:[{name:"board_editor_customize",type:"board.editor.customize"}]},{name:"board_editor_tab_encoding",type:"board.container",layout:"replaceable",visible:!1,spinner:!1,useAnimation:!1,selector:"[role=encoding]",label:"encoding",children:[{name:"board_editor_encoding",type:"board.editor.encoding"}]},{name:"board_editor_tab_timeline",type:"board.container",layout:"replaceable",visible:!1,spinner:!1,useAnimation:!1,selector:"[role=timeline]",label:"timeline",children:[{name:"board_editor_timeline",type:"board.editor.timeline"}]}])},{type:"board.plus.container",spinner:!1,children:[{name:"board_plus",viewMode:"board",type:"board.plus",options:{dragndrop:{containmentRefreshTimeout:400}}},{name:"board_plus",viewMode:"list",type:"board.plus.list",options:{dragndrop:{containmentRefreshTimeout:400}}},{name:"newlist",viewMode:"newlist",type:o.isEnabled("board.lists")?"board.new.list":"board.plus.fake-list",options:{dragndrop:{containmentRefreshTimeout:400}}},{name:"board_plus",viewMode:"timeline",type:"board.plus.timeline",options:{dragndrop:{containmentRefreshTimeout:400}}}]}]}}})});
define('tau/configurations/converters/converter.context',["Underscore"],function(e){var t=function(t,n){var i=[],r=[];e.forEach(t,function(e){"~"==e[0]?i.push(e.slice(1)):r.push(e)});var s=!0;r.length&&(s=e.intersection(n,r).length>0);var a=!1;return i.length&&(a=e.intersection(n,i).length>0),s&&!a},n=function(i,r,s){return e.forEach(i,function(a,c){if("tabs"==a.type)e.forEach(a.tabs,function(e,t){e.header=n(e.header,r,s),a.tabs[t].items=n(e.items,r,s),0==a.tabs[t].items.length&&(a.tabs[t]=!1)}),a.tabs=e.filter(a.tabs,function(e){return e!==!1}),a.tabs=n(a.tabs,r,s),a.tabs=e.filter(a.tabs,function(e){return e!==!1}),a.additionalHeaders=n(a.additionalHeaders,r,s),0==a.tabs.length&&(i[c]=!1);else if("additionalInfo"==a.type)a.children=n(a.children,r,s),0==a.children.length&&(i[c]=!1);else if("label"==a.type&&e.isArray(a.text))a.text=n(a.text,r,s),i[c]=0==a.text.length?!1:a;else if(a.practices||a.editions){var l=a.practices&&a.practices.length&&!t(a.practices,r),o=a.editions&&a.editions.length&&!t(a.editions,s);(l||o)&&(i[c]=!1)}else a.children?i[c].children=n(a.children,r,s):"undefined"!=typeof a.items?(i[c].items=n(a.items,r,s),0==a.items.length&&(i[c]=!1)):("children"==c||"items"==c)&&(i[c]=n(a,r,s))}),i=e.filter(i,function(e){return e!==!1})};return{convert:function(e,t,i){return e=n(e,t,i)}}});
define('tau/configurations/factory.container.config',["Underscore","tau/core/class","tau/core/termProcessor","tau/models/model.extensions","tau/configurations/base.container.config","tau/configurations/baseAssignable.container.config","tau/configurations/baseContainable.container.config","tau/configurations/userStory.container.config","tau/configurations/task.container.config","tau/configurations/bug.container.config","tau/configurations/request.container.config","tau/configurations/testplanrun.container.config","tau/configurations/testcase.container.config","tau/configurations/testcaserun.container.config","tau/configurations/testplan.container.config","tau/configurations/iteration.container.config","tau/configurations/teamiteration.container.config","tau/configurations/feature.container.config","tau/configurations/release.container.config","tau/configurations/build.container.config","tau/configurations/impediment.container.config","tau/configurations/project.container.config","tau/configurations/user.container.config","tau/configurations/team.container.config","tau/configurations/board.container.config","tau/configurations/converters/converter.context"],function(n,t,i,o,e,a,c,r,s,g,f,u,p,h,C,b,d,l,m,v,y,x,w,j,O,k){var A=t.extend({init:function(t,i){this.originalConfigObject=t,this.appConfig=i,this.practices=[],this.editions=[];var o=this.appConfig.context;o&&(this.practices=n(o.getPractices()).pluck("name")),o&&(this.editions=o.getEdition())},getConfig:function(){var n=this.originalConfigObject.getConfig(this.appConfig);return k.convert(n,this.practices,this.editions)},getActions:function(){var n=this.originalConfigObject.getActions(this.appConfig.context.applicationContext);return k.convert(n,this.practices,this.editions)}}),L=t.extend({init:function(){this.configs={base:e,userstory:r,task:s,bug:g,request:f,testplanrun:u,testcase:p,testplan:C,iteration:b,teamiteration:d,feature:l,release:m,build:v,impediment:y,project:x,user:w,team:j,testcaserun:h,board:O}},getConfig:function(n){var t=n.context.entity.entityType.name.toLowerCase(),i=this.configs[t]?this.configs[t]:this.configs.base,o=new i(n),e=o.getConfig(n);return e},getContextBasedConfigObject:function(n){var t=n.context.entity.entityType.name.toLowerCase(),i=this.configs[t]?this.configs[t]:this.configs.base,o=new i(n);return new A(o,n)},getConfigByType:function(n){var t=n.toLowerCase(),i=this.configs[t];if(!i)throw new Error('No config for type "'+t+'"');return i}});return new L});
define('tau/libs/inviter/inviter',["Underscore","tau/core/class"],function(e,i){return i.extend({init:function(e){this.store=e.getStore()},invite:function(i){var n=this.store,t=[];t=e.map(i,function(e){return function(i){e.id?i(!1,{success:e.id}):n.find("user",{$query:{email:e.email,deleteDate:{$isNull:!0}},fields:["id","firstName","lastName"]}).done(function(t){var s=t[0].data.length?t[0].data[0]:null;s?i(!1,{success:s.id}):n.save("user",{failureGlobal:!1,$set:{login:e.login,email:e.email,password:Math.round(1e11*Math.random())}},{success:function(e){i(!1,{success:e.data.id})},failure:function(){i(!1,{failure:e})}}).done()})}});var s=$.Deferred();return e.series(t,function(e,i){e?s.failure(e):s.resolve(i)}),s}})});
define('tau/models/board.cell.quick.add/model.board.quick.add.base',["Underscore","jQuery","tau/core/model-base","tau/configurations/factory.container.config","tau/libs/inviter/inviter"],function(t,e,i,a,n){var o="dataTemplate",r={board:"dataTemplate",list:"listDataTemplate",axis:"axisDataTemplate"},d="addData",s={board:"addData",list:"listAddData",axis:"axisAddData"};return i.extend({handleGetDataItemTemplate:function(e,i,n,d,s){var c=n.slice,f=n.types,l={$set:t.extend(t.clone(e),{dataItemType:i.name})},u=this,p=r[n.viewMode]||o;c[p](l).done(function(t){var e=t.data;if(d[i.name]={template:e,entityType:i},s.push(i),s.length==f.length){var o=a.getConfigByType("project").prototype.colors,r=a.getConfigByType("team").prototype.icons,c={projectColors:o,teamIcons:r};u.fire("model.dataItems.template.ready",{types:d}),u.fire("dataBind",{types:d,entityTypes:f,constants:c,data:n})}})},resolveSliceAddData:function(){},onInit:function(e){var i=this.resolveSliceAddData(e);i.done(t.bind(function(t){this.fire("settings.beforeReady",{settings:t,config:e}),this.prepareTemplateData(t,e),this.fire("settings.ready",t)},this)).fail(t.bind(function(t){this.fire("dataBind",t)},this))},prepareTemplateData:function(e,i){var a=e.types,n={},o=[],r=this.getDataItemTemplateParam(e),d=t.find(a,function(t){return i.defaultType&&t.name.toLowerCase()===i.defaultType.toLowerCase()});d?d.active=!0:a.length>0&&(a[0].active=!0);for(var s=0;s<a.length;s++){var c=a[s];this.handleGetDataItemTemplate(r,c,e,n,o)}var f=i.context.configurator.getSystemInfo().culture;this.fire("culture.ready",f)},getDataItemTemplateParam:function(t){var e=t.action;return"axis"===t.viewMode?{location:e.location}:{x:e.x||void 0,y:e.y||void 0}},getDoAddParams:function(t,e){var i={type:t.type,values:t.fields};return"axis"===e.viewMode?i.location=e.action.location:(i.x=e.action.x,i.y=e.action.y),i},doAdd:function(e,i,a,n){var o=n.slice,r=s[n.viewMode]||d,c=t.find(i.entityTypes,function(t){return t.name==a.type}),f=o.config.definition.global.acid,l=a.type.toLowerCase();("project"==l||"team"==l)&&(o.config.definition.global.acid=null);var u=this.getDoAddParams(a,n),p={$set:u,errorHandler:function(){return!1}},m=this.config.context.configurator;o[r](p).always(t.bind(function(t){t&&!o.config.definition.global.acid&&(m.getStore().evictCollection(l),m.getApplicationContextService().refreshChoice(),o.config.definition.global.acid=t)},this,f)).done(t.bind(function(t){var e={message:t.data[0],nameType:c,openAfter:a.openAfter};this.onAfterAddData(n,t,e)},this)).fail(t.bind(function(t){return this.fire("model.data.item.did.fail.add",t.data.responseText),!1},this))},onAfterAddData:function(t,e,i){this.fire("model.data.item.did.add",i)},inviteMembers:function(e,i,a){var o=this.config.context.configurator;new n(o).invite(i.value).done(function(e){var n=o.getLoggedUser().id,r=t.compact(t.pluck(e,"success")).filter(function(t){return t!=n}).map(function(t){return{user:{id:t}}});i.value=JSON.stringify(r),a()})},"bus dataBind:last + model.add.item + settings.ready:last":function(e,i,a,n){var o=t.find(a.fields,function(t){return t.type&&"usersinvite"===t.type.toLowerCase()});o?this.inviteMembers(a,o,function(){this.doAdd(e,i,a,n)}.bind(this)):this.doAdd(e,i,a,n)}})});
define('tau/models/board.cell.quick.add/model.board.cell.quick.add',["Underscore","jQuery","tau/models/board.cell.quick.add/model.board.quick.add.base"],function(e,d,i){return i.extend({resolveSliceAddData:function(){var e=d.Deferred(),i=this.config.options;return e.resolve({slice:i.slice,types:i.addAction.data.types,action:i.action,viewMode:i.viewMode,isGeneralAdd:!1}),e}})});
define('tau/ui/extensions/board.cell.quick.add/quick.add.error.handler',["Underscore"],function(e){var s=function(s,t){for(var n=s;n.InnerException;)n=n.InnerException;return e.isUndefined(n)||"Tp.BusinessObjects.InvalidLicenseException"!==n.Type?!1:(a(n.Message,t),!0)},t=function(s,t,a,n){if(!(s.Details&&s.Details.ServerErrorCodes&&e.contains(s.Details.ServerErrorCodes,"ProjectNotAssignedToTeam")))return!1;var r=n.getStore(),i=$('<div class="tau-message tau-danger">'+s.Message+' <a class="i-role-assign-team-to-project" href="#">Assign</a></div>'),o=s.InnerException.Details.Suggest,c=e.findWhere(o,{id:"project"}).value,d=e.findWhere(o,{id:"team"}).value;return i.find("a").on("click",function(){r.save("teamProject",{$set:{project:{id:c},team:{id:d}},fields:["id","project","team"]}).done({success:function(e){var s=e[0].data.team.name,a=e[0].data.project.name,n=$('<div class="tau-message tau-success"> Success! The '+s+" team is now assigned to the "+a+" project.</div>");t.setText(n)}})}),t.setText(i),!0},a=function(e,s){var t=$('<div class="tau-message tau-danger">Error: '+e+"</div>");s.setText(t)};return{handle:function(e,n,r,i){s(e,r)||t(e,r,n,i)||a(e.Message,r)}}});
define('tau/models/board.cell.quick.add/model.board.general.quick.add',["Underscore","jQuery","tau/models/board.cell.quick.add/model.board.quick.add.base"],function(t,e,i){return i.extend({getTypes:function(){var t=["feature","userstory","task","bug","request","testcase","testplan","impediment","release","iteration","teamiteration","build","project","team","user"];return t},getViewMode:function(){return"list"},getDefinition:function(t){var e={global:{acid:t},cells:{types:this.getTypes()}};return e},getSingleCellSliceDefinition:function(t,e){var i={global:{acid:t},cells:{types:[e]}};return i},resolveSliceAddData:function(t){var i=e.Deferred(),n=t.context.configurator;return this.context?n.getApplicationContextService().getApplicationContext(this.context).then(function(e){this.getActions(e,t,i)}.bind(this)):n.getAppStateStore().get({fields:["acid"]}).then(function(e){this.getActions(e,t,i)}.bind(this)),i},getActions:function(e,i,n){var o=e.acid,c=this.getDefinition(o),s=i.context.configurator.getSliceFactory().create({definition:c});s.listModeActionsV2().then(function(e){var c={};c.action=e.data.items[0],t.isEmpty(c.action)?this.processEmptyAddButtonAction(i,o,n):this.processAddButtonAction(c,s,n)}.bind(this))},processAddButtonAction:function(e,i,n){e.addAction=t.find(e.action.fixed.items,function(t){return"AddAction"==t.type}),n.resolve({slice:i,types:e.addAction.data.types,action:e.action,viewMode:this.getViewMode(),isGeneralAdd:!0})},processEmptyAddButtonAction:function(t,e,i){t.context.configurator.getApplicationContextService().getApplicationContext({acid:e},{success:function(t){var e={isEmpty:!0};1==t.selectedProjectIds.length&&"null"==t.selectedProjectIds[0]&&1==t.selectedTeamIds.length&&"null"==t.selectedTeamIds[0]&&(e.emptyContext=!0),i.reject(e)}})},doAdd:function(e,i,n,o){var c=t.deepClone(o);c.slice=this.buildReadyToAddSlice(o.slice,n),this._super(e,i,n,c)},buildReadyToAddSlice:function(e,i){var n=this.config.context.configurator,o=t.find(e.config.definition.cells.types,function(t){return t==i.type.toLowerCase()}),c=this.getSingleCellSliceDefinition(e.config.definition.acid,o);return n.getSliceFactory().create({definition:c})}})});
define('tau/ui/extensions/board.cell.quick.add/board.cell.quick.add.related',["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/models/board.cell.quick.add/model.board.general.quick.add"],function(e,t,n,i){var o=n.extend({"bus settings.beforeReady":function(e,t){t.settings.isGeneralAdd=!1,t.settings.isRelatedAdd=!0},"bus dataBind + afterRender":function(t,n,i){var o=i.element;o.on("click.quickAdd",".i-role-cancel",e.bind(this.onCancel,this))},onCancel:function(){this.fire("close")}});return{init:function(e){this.config=this._getExtendedConfig(e);var n=t.Deferred(),i=this._getBubbleConfig(n);return this.config.ctx.fire("initBubble",i),n},show:function(t){var n=this._getShowDelay();e.delay(function(){t.tauBubble("show")},n)},isInitialized:function(e){return!!e.data("uiTauBubble")},destroy:function(e){e.tauBubble("destroy")},_getExtendedConfig:function(t){var n=t.$element,i=n.closest(".tau-bubble__inner"),o=n.closest(".tau-entity-controls"),a=e.extend({},t,{childBuses:t.ctx.childBus,entityUniqueName:n.data("entityuniquename"),$innerBubble:i,$controlsContainer:o,$field:n.closest(".tau-field"),$selector:n.siblings(".userStorySelector"),TOP_BUBBLE_MARGIN:parseInt(i.css("margin-top"),10),LEFT_CONTROLS_PADDING:parseInt(o.css("padding-left"),10),HORIZONTAL_OFFSET:15,VERTICAL_OFFSET:12,HIDE_DURATION_IF_FINDER_DISPLAYED:400});return a},_getShowDelay:function(){return this.config.$selector.is(":visible")?0:this.config.HIDE_DURATION_IF_FINDER_DISPLAYED},_getBubbleConfig:function(e){var t=this.config.$target,n=this.config.$field,i=this._getComponentsConfig(),o={target:t,alignTo:n,applyBubbleClasses:!1,cleanupOnHide:!0,stackName:"quickAddGeneral",showOnCreation:!1,ignoreOverlap:!0,zIndex:10001,onCreate:function(){e.resolve()},onBeforeShow:function(e){var t=e.find(".tau-bubble__inner"),n=this.config.$target.closest(".tau-bubble__inner"),i=n.height(),o=t.height(),a=Math.max(i,o);t.height(a)}.bind(this),onShow:function(){t.removeClass("tau-quick-add-collapse");var e=t.tauBubble("widget");this.config.ctx.fire("relatedQuickAdd.afterShow",e)}.bind(this),onHide:function(){t.addClass("tau-quick-add-collapse"),this.config.ctx.fire("relatedQuickAdd.afterHide")}.bind(this),className:"tau-quick-add-dialog-general tau-quick-add-dialog-related",onPositionConfig:function(){var e=this.config.LEFT_CONTROLS_PADDING+this.config.HORIZONTAL_OFFSET;return{my:"left+"+e+" top-"+this.config.TOP_BUBBLE_MARGIN,at:"left top",of:this.config.$controlsContainer}}.bind(this),onArrowPositionConfig:function(e,t){var i={left:{my:"left+"+this.config.HORIZONTAL_OFFSET+" center",at:"left top+"+this.config.VERTICAL_OFFSET},right:{my:"right-"+this.config.HORIZONTAL_OFFSET+" center",at:"right top+"+this.config.VERTICAL_OFFSET}},o=i[t]||{};return o.of=n,o}.bind(this),onCurrentOrientationConfig:function(e,t){return e.left>t.left?"left":"right"},dontCloseSelectors:["#ui-datepicker-div"],componentsConfig:i};return o},_getExtension:function(){var e=this.config.entityUniqueName,t=this.config.ctx,n=this.config.childBuses,i=o.extend({"bus model.data.item.did.add":function(i,o){var a=o.message.dataItem.data;t.fire("relatedQuickAdd."+e+".added",a),n[e].fire("refresh"),this.onCancel()}});return i},_getComponentsConfig:function(){var e=this.config.$element.data("fieldname").toLowerCase(),t=this._getExtension(),n=this.config.getCurrentContext(),o={components:[{name:"board plus quick add general",type:"board.cell.quick.add",extensions:[t],QuickAddModel:i.extend({getTypes:function(){return[e]},context:n}),defaultType:e}]};return o}}});
define('libs/jquery/jquery.placeholder',["libs/jquery/jquery"],function(e){!function(e){function t(){return l&&a?this:(e(this).each(function(){s.call(this)}),this)}var l="placeholder"in document.createElement("input"),a="placeholder"in document.createElement("textarea"),s=function(){var t=e(this).nextAll(".placeholder");e(this).val()?t.removeClass("show").addClass("hide"):t.addClass("show").removeClass("hide")};e.fn.placeholder=function(i){if("refresh"==i)return t.call(this),this;i=e.extend({style:"placeholder",template:"<label></label>"},i);var n=null,r=(e(i.template).addClass(i.style),function(){var e=this;clearTimeout(n),n=setTimeout(function(){s.call(e)},0)});return l&&a?this:(e(this).each(function(){var t=e(this),l=e(i.template).addClass(i.style).addClass("placeholder").attr("for",this.id);l.appendTo(t.parent()),l.text(t.attr("placeholder")),l.click(e.proxy(function(){e(this).focus()},this)),s.call(this)}),e(this).on("keydown.placeholder keypress.placeholder input paste focus change",r),this)}}(e)});
define('libs/jquery/jquery.caret',["libs/jquery/jquery","Underscore"],function(e,t){return e.caretTo=function(e,t,n){if(e.createTextRange){var c=e.createTextRange();n&&t!=n?(c.moveStart("character",t),c.moveEnd("character",n)):c.move("character",t),c.select()}else e.setSelectionRange&&(e.focus(),e.setSelectionRange(t,n||t))},e.caretPos=function(e){if("selection"in document){var t=e.createTextRange();try{t.setEndPoint("EndToStart",document.selection.createRange())}catch(n){return 0}return t.text.length}return null!=e.selectionStart?e.selectionStart:void 0},e.fn.caret=function(t,n){return"undefined"==typeof t?e.caretPos(this.get(0)):this.queue(function(c){if(isNaN(t)){var r=e(this).val().indexOf(t);n===!0?r+=t.length:"undefined"!=typeof n&&(r+=n),e.caretTo(this,r)}else e.caretTo(this,t);c()})},e.fn.caretToStart=function(){return this.caret(0)},e.fn.caretToEnd=function(){return this.queue(function(t){e.caretTo(this,e(this).val().length),t()})},e.fn.caretAll=function(){return this.queue(function(n){e.caretTo(this,0,t.asString(e(this).val()).length),n()})},e.clearSelection=function(){document.selection&&document.selection.empty?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges()},e});
define('libs/jquery/jquery.inputMaskEditor',["libs/jquery/jquery.ui","Underscore"],function(t,e){var n="inputMaskEditor";return function(t,n){if(n in t)throw new Error('jQuery already has the "'+n+'" property.');var i=function(t){var e,n,i,s,r,o=0,a=0,c=!1;return"number"==typeof t.selectionStart&&"number"==typeof t.selectionEnd?(o=t.selectionStart,a=t.selectionEnd):(n=document.selection.createRange(),n&&n.parentElement()==t&&(s=t.value.length,e=t.value.replace(/\r\n/g,"\n"),i=t.createTextRange(),i.moveToBookmark(n.getBookmark()),r=t.createTextRange(),r.collapse(!1),i.compareEndPoints("StartToEnd",r)>-1?o=a=s:(o=-i.moveStart("character",-s),o+=e.slice(0,o).split("\n").length-1,i.compareEndPoints("EndToEnd",r)>-1?a=s:(a=-i.moveEnd("character",-s),a+=e.slice(0,a).split("\n").length-1)))),o-a!=0&&(c=!0),{start:o,end:a,statusSelection:c}},s=function(e,i,s){for(var r in s)e.on(r+"."+n,t.proxy(s[r],i))},r=function(e,i,s){for(var r in s)e.off(r+"."+n,t.proxy(s[r],i))},o=function(t,e){this.setOptions(e),this.initElement(t),this.bindEvents(e)};o.prototype={constructor:o,initElement:function(t){this.$element=t.addClass(this.className)},setOptions:function(e){e=e||{},this.onSave=t.isFunction(e.onSave)?e.onSave:t.noop,this.onEditStart=t.isFunction(e.onEditStart)?e.onEditStart:t.noop,this.onEditEnd=t.isFunction(e.onEditEnd)?e.onEditEnd:t.noop,this.maxLength=e.maxLength||255,this.mask=e.mask?new RegExp(e.mask):!1,this.restoreText="undefined"==typeof e.restoreText?!0:e.restoreText,this.className="undefined"==typeof e.className?"editableText":e.className,this.classNameActive=e.className||"active"},bindEvents:function(){var e=this;s(e.$element,e,{blur:this.onBlur,keypress:this.onKeyPress,click:this.onFocus}),t.ui.ie||t(window).blur(function(){e.$element.blur()})},unbindEvents:function(){r(this.$element,this,{blur:this.onBlur,keypress:this.onKeyPress,click:this.onFocus})},onKeyPress:function(t){if(this.mask&&!(t.ctrlKey||t.altKey||t.metaKey||t.which<32)){var e=String.fromCharCode(t.which),n=t.target.value,s=i(t.target);s.statusSelection?n=n.substring(0,s.start)+e+n.substring(s.end):n+=e,this.mask.test(n)||t.preventDefault()}},trimText:function(t){return e.trim(t)},normalizeText:function(t){var e=this.trimText(t);return 0==e.length&&this.restoreText===!0&&(e=this.getInitialText()),e}},t.fn[n]=function(e){return this.each(function(i,s){var r=t(s);r.data(n,new o(r,e))})},t[n]=function(e,i){return t(e)[n](i)}}(t,n),t.fn[n]});
define('tau/ui/extensions/board.cell.quick.add/board.cell.quick.add.config.fields',["Underscore","jQuery","tau/utils/utils.date","tau/core/class","tau/components/extensions/component.extension.base","tau/models/board.cell.quick.add/model.board.general.quick.add","tau/ui/extensions/board.cell.quick.add/board.cell.quick.add.related","libs/jquery/jquery.placeholder","libs/jquery/jquery.caret","libs/jquery/jquery.inputMaskEditor","tau/ui/extensions/inviter/jquery.tauInviter"],function(e,t,i,r,a,n,s){return r.extend({init:function(e){this.config=e},hasErrors:!1,validate:function(i){var r=!1,a=this.getFormData(i);return e.each(i,function(i){var n=t(i),s=this.getElementData(n),o=s.validateData;e.any(o.rules,function(e){var t=a[s.fieldname],i=this.typesValidate[e].validate(t,s,a),o=!1;return i.result?this.typesValidate[e].hideError?this.typesValidate[e].hideError(n):this.hideError(n):(this.typesValidate[e].showError?this.typesValidate[e].showError(n,i.message):this.showError(n,i.message),r=!0,o=!0),o},this)},this),this.hasErrors=r,!r},getValue:function(e){var t=(e.data("fieldtype")+"").toLowerCase();return this.typesValue[t]?this.typesValue[t].call(this,e):this.typesValue["default"].call(this,e)},getElementData:function(e){return{$element:e,fieldname:e.data("fieldname"),validateData:e.data("validate")}},getFormData:function(i){var r={};return e.each(i,function(e){var i=t(e),a=i.data("fieldname"),n=this.getValue(i);r[a]=n},this),r},getCfValue:function(e){var i=t(e),r=i.data("fieldtype");switch(r){case"DropDown":case"TemplatedURL":case"Number":case"Date":case"DateTime":case"Text":return i.val();case"MultipleSelectionList":return i.val()&&i.val().join(",")||"";case"CheckBox":return i.prop("checked");case"Entity":var a=i.data();return{id:a.value.id,kind:a.value.entityType.name,name:a.value.name};case"URL":var n=i.parent(),s=n.find(".cf-input-url_value").val(),o=n.find(".cf-input-url_description").val();return{url:s,label:o};default:return null}},typesValidate:{required:{validate:function(t){return{result:!e.isEmpty(t),message:"This is a required field."}}},"required-team-project":{validate:function(e,t,i){var r="project"in i,a="team"in i,n=i.project&&-1!=i.project,s=i.team&&-1!=i.team,o=n||s,l=r&&a,u=!l||o;return{result:u,message:"Either Project or Team should be selected."}}},"required-ddl":{validate:function(t){return{result:!e.isEmpty(t)&&-1!=t,message:"This is a required field."}}},text:{validate:function(){return{result:!0}}},email:{validate:function(t){return""==e.trim(t)?{result:!0}:{result:/^[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/gi.test(e.trim(t)),message:"Invalid email address."}}},number:{validate:function(t){if(""==e.trim(t))return{result:!0};t=(t+"").replace(",",".");var i,r=!0;return isNaN(t)?(r=!1,i="the value can only be a valid number, e.g. 1, 3.14 or 2010"):t>e.MAX_INT?(r=!1,i="Please, enter a reasonable number."):0>t&&(r=!1,i="Number must be greater than 0"),{result:r,message:i}}},integer:{validate:function(t){if(""==e.trim(t))return{result:!0};var i,r=!0;return isNaN(t)||!/^\d+$/.test(t)?(r=!1,i="the value can only be a integer, e.g. 1, 2, 14"):t>e.MAX_INT?(r=!1,i="Please, enter a reasonable number."):0>=t&&(r=!1,i="Number must be greater than 0"),{result:r,message:i}}},date:{validate:function(t){if(""==e.trim(t))return{result:!0};var r,a=i.parse(t),n=!0;return null===a?(r="Incorrect date format",n=!1):a<new Date(1900,0,1)&&(r="Date must be greater than 01-01-1900",n=!1),{result:n,message:r}}},entityRequired:{validate:function(t){return{result:!e.isEmpty(t)}},showError:function(e){e.closest(".tau-userStorySelector").addClass("tau-error").attr("title","This is a required field.")},hideError:function(e){e.closest(".tau-userStorySelector").removeClass("tau-error").removeAttr("title")}},checkbox:{validate:function(){return{result:!0}}},url:{validate:function(t){return""==e.trim(t)?{result:!0}:{result:/\b((?:https?|ftp|file):\/\/(?:[\-A-Z0-9.]+)(?::\d+)?(?:\/[\-A-Z0-9+&@#\/%=~_|!:,.;]*)?(?:\?[A-Z0-9+&@#\/%=~_|!:,.; ]*)?)/i.test(t),message:"Invalid url address."}}},usersinvite:{validate:function(){return{result:!0}}},teammultiselect:{validate:function(){return{result:!0}}},projectmultiselect:{validate:function(){return{result:!0}}},color:{validate:function(){return{result:!0}}},icon:{validate:function(){return{result:!0}}}},showError:function(e,t){e.addClass("tau-error").attr("title",t).nextAll(".placeholder").addClass("tau-error")},hideError:function(e){e.removeClass("tau-error").removeAttr("title").nextAll(".placeholder").removeClass("tau-error")},setBehavior:function(i){e.each(i,function(e){var i=t(e),r=(i.data("fieldtype")+"").toLowerCase();this.typesBehavior[r]&&this.typesBehavior[r].call(this,i)},this)},typesBehavior:{date:function(e){t.datepicker.parseDate=function(e,t){return i.parse(t)},t.datepicker.formatDate=function(e,t){return i.formatAs(t,e)};var r=i.getFormatData().date.short;e.datepicker({dateFormat:r})},datetime:function(e){t.datepicker.parseDate=function(e,t){return i.parse(t)},t.datepicker.formatDate=function(e,t){return i.formatAs(t,e)},t.datepicker.formatTime=function(e,t){return i.formatAs(t,e)};var r=i.getFormatData().date.short;e.datetimepicker({dateFormat:r,showButtonPanel:!1})},text:t.noop(),number:function(e){var t="^[0-9]*([\\"+this.config.culture.decimalSeparator+"][0-9]{0,2})?$";e.inputMaskEditor({mask:t})},integer:function(e){var t="^[0-9]*?$";e.inputMaskEditor({mask:t})},userstoryselector:function(e){var i=this.typesClear.entity,r=e.data("entityuniquename"),a=this._getFieldByClassFromElement(e,"project");this.entityBehavior(e),a.change(t.proxy(function(a){i(e),this.childBus[r].fire("refresh",{filter:{project:t(a.target).val()}})},this.config.self))},releaseselector:function(e){var i=this.typesClear.entity,r=e.data("entityuniquename"),a=this._getFieldByClassFromElement(e,"project");this.entityBehavior(e),a.change(t.proxy(function(a){i(e),this.childBus[r].fire("refresh",{filter:{project:t(a.target).val()}})},this.config.self))},testplanselector:function(e){var i=this.typesClear.entity,r=e.data("entityuniquename"),a=this._getFieldByClassFromElement(e,"project");this.entityBehavior(e),a.change(t.proxy(function(a){i(e),this.childBus[r].fire("refresh",{filter:{project:t(a.target).val()}})},this.config.self))},userselector:function(e){this.entityBehavior(e)},entity:function(e){this.entityBehavior(e)},usersinvite:function(e){e.parent().css({maxWidth:t(window).width()/3});var i=e.data("selected");e.tauInviter({configurator:this.config.configurator,allowEmails:!0,canDelete:function(e){return i.id!==e.id}}),i&&i.id&&e.tauInviter("setValue",[{id:i.id,type:"existing",name:i.email,avatarUri:i.avatarUri}])},teammultiselect:function(e){e.css({maxHeight:t(window).height()/3}),this.config.self.fire("adjustPosition")},projectmultiselect:function(e){e.css({maxHeight:t(window).height()/3}),this.config.self.fire("adjustPosition")},color:function(e){var t=this._initRichSelect(e,"color");t.on("change",function(e,i){t.attr("style","background-color: "+(i||"default"))}),this.config.self.fire("adjustPosition")},icon:function(e){var t=this._initRichSelect(e,"icon");t.on("change",function(e,i){var r=t.attr("data-value");t.removeClass("tau-icon_name_"+r),t.addClass("tau-icon_name_"+(i||"default"))}),this.config.self.fire("adjustPosition")}},clear:function(i){e.each(i,function(e){var i=t(e),r=(i.data("fieldtype")+"").toLowerCase();this.typesClear[r]?this.typesClear[r].call(this,i):this.typesClear["default"].call(this,i)},this)},typesClear:{"default":function(e){"Remain"!=e.data("fieldname")&&e.val("")},date:function(e){"Time"!==e.closest("form").data("type")&&e.val("")},dropdown:function(e){e.find("option").eq(0).prop("selected",!0)},entity:function(e){e.val("");var t=e.parent();t.find(".tau-linkentity__inner").text(e.attr("placeholder")).addClass("tau-linkentity__inner_placeholder"),t.find(".tau-linkentity__icon").hide()},checkbox:function(e){e.prop("checked",!1)},usersinvite:function(e){e.tauInviter("reset")},color:function(e){e.find("select[name=color]").trigger("reset")},icon:function(e){e.find("select[name=icon]").trigger("reset")},teammultiselect:function(i){var r=i.find(":checked");e.each(r,function(e){t(e).prop("disabled")||t(e).prop("checked",!1)})},projectmultiselect:function(i){var r=i.find(":checked");e.each(r,function(e){t(e).prop("disabled")||t(e).prop("checked",!1)})},userstoryselector:t.noop,testplanselector:t.noop,releaseselector:t.noop,ddl:t.noop,url:t.noop},typesValue:{"default":function(e){return e.val()},usersinvite:function(t){var i=t.data("selected"),r=t.tauInviter("getValue");return e.reject(r,function(e){return e.id&&e.id==i.id})},teammultiselect:function(i){var r=i.find(":checked").filter(function(){return!this.disabled});return JSON.stringify(e.map(r,function(e){return{team:{id:t(e).val()}}}))},projectmultiselect:function(i){var r=i.find(":checked").filter(function(){return!this.disabled});return JSON.stringify(e.map(r,function(e){return{project:{id:t(e).val()}}}))},color:function(e){return e.find("select[name=color]").val()},icon:function(e){return e.find("select[name=icon]").val()}},_getFieldByClassFromElement:function(e,t){return e.closest("form").find("."+t)},_getContextValue:function(e){return"-1"===e?"null":e},_getCurrentContext:function(e){var t=this._getFieldByClassFromElement(e,"project"),i=this._getFieldByClassFromElement(e,"team"),r=this._getContextValue(this.getValue(t)),a=this._getContextValue(this.getValue(i));return{projectIds:[r],teamIds:[a]}},_relatedAddClickHandler:function(e,t){var i=e.$target;s.isInitialized(i)&&s.destroy(i),t.stopImmediatePropagation(),s.init(e).then(function(){s.show(i)})},entityBehavior:function(e){var t=e.parent().parent().find(".i-role-related-quick-add"),i=0!==t.length;if(i){var r={namespace:".relatedQuickAdd",ctx:this.config.self,getCurrentContext:this._getCurrentContext.bind(this,e),$element:e,$target:t};t.on("click",this._relatedAddClickHandler.bind(this,r))}this.config.self.fire("applyFinder",e)},_initRichSelect:function(e,i){var r=e.find("select[name="+i+"]"),a=e.find(".i-role-currenticon");return r.on("change",function(){var e=r.val();a.trigger("change",e),a.attr("data-value",e||"default")}),e.find(".i-role-richselect .i-role-option").on("click",function(){var t=this.getAttribute("data-value");r.val(t),r.trigger("change"),e.find(":text:first").focus()}),a.parent().on("click",function(i){t(i).toggleClass("tau-active"),e.find(".i-role-richselect").css({width:e.width()}),e.find(".i-role-richselect").toggle(),this.fire("adjustPosition")}.bind(this.config.self)),e.on("reset",function(){r.val(""),r.trigger("change")}),a}})});
define('tau/ui/extensions/board.cell.quick.add/ui.extension.board.cell.quick.add',["Underscore","jQuery","tau/core/extension.base","tau/ui/extensions/board.cell.quick.add/quick.add.error.handler","tau/ui/extensions/board.cell.quick.add/board.cell.quick.add.config.fields","libs/jquery/jquery.placeholder","libs/jquery/jquery.caret"],function(e,t,a,i,r){return a.extend({init:function(t){this._super(t);var a=t.context.configurator,i=e.bind(this.fire,this,"viewerBus.ready");a.getComponentBusRegistry().getByName("entityViewer").done(i),a.getTemplateFactory().register({name:"board.cell.quick.add.success",engine:"jqote2",markup:["<h3>Success!</h3>","<p>","<%! this.type %> ","<% if (this.name && this.url) { %>",'<a class="ui-quick-add-notification-link i-role-card-view tau-entity-name" href="<%= this.url %>"><%! this.name %></a>',"<% } %>"," was added.","</p>"]})},"bus beforeInit:last + dataBind + afterRender":function(a,i,r,d){var n=this.$element=d.element,s=n.find(".tau-required-field-editor,.tau-add-item");n.find("form").on("submit.quickAdd",e.bind(this.onSubmit,this)),n.on("click.quickAdd",".i-role-add-open",e.bind(this.onAddOpen,this)),n.on("click.quickAdd",".i-role-entity-selector",e.bind(this.onTypeSelectorClick,this)),window.setTimeout(function(){n.parent().addClass("tau-bubble__inner_without_scroll"),n.find(".tau-entity-controls .tau-active input, .tau-entity-controls .tau-active select").eq(0).focus()},0);var o=this;n.find("form").each(function(){var e=t(this),a=e.find("[data-fieldname=Spent], [data-fieldname=Remain], [data-fieldname=Role]");3==a.length&&o._processTimeWidget(e,a,r)});var l=s.filter(".project"),u=s.filter(".team"),c=s.filter(".process"),f=c.add(l).add(u);0===f.length&&n.find(".cf-wrap").addClass("show").removeClass("hide");var p=e.bind(function(e,a){a=t(a?a:e.target);var i,r=a.find(":selected").data("option");a.hasClass("process")?i=r.id:a.hasClass("project")?i=r.processId:a.hasClass("team")&&0===a.closest("form").find(".project").length&&(i=r.processId),i&&this.toggleCustomFields(a,i)},this);f.change(p),f.each(p),this.fire("view.indicator.ready",n.tauProgressIndicator()),this.fire("view.editors.ready",s),this.fire("quick.add.popup.rendered",s)},toggleCustomFields:function(e,t){var a=e.closest("form").find(".cf-wrap").addClass("hide").removeClass("show");a.find(".cf-input").addClass("hide").removeClass("show"),a.filter(".cf-process_"+t).addClass("show").removeClass("hide").find(".cf-input").addClass("show").removeClass("hide"),this.fire("adjustPosition")},setHtmlForMessage:function(e,t){var a=e.find(".tau-message-pool");a.children().remove(),a.width("").width(a.width()),a.append(t)},"bus afterRender:last + model.data.item.did.add":function(e,t){var a=t.element.find(".tau-control-set.tau-active .tau-required-field-editor");this.prepareFields.clear(a),a.filter(".tau-in-text").placeholder("refresh"),window.setTimeout(function(){a.filter(":visible").eq(0).focus()},100)},_openView:function(e,t){e.fire("cardDataToShow.ready",{entityId:t.id,entityType:t.type.toLowerCase()}),this.fire("close")},"bus beforeInit:last + viewerBus.ready:last + afterRender:last + model.data.item.did.add":function(a,i,r,d,n){var s=n.message.dataItem.data,o=s.cardData||s;if(n.openAfter)r&&this._openView(r,o);else{var l;"time"!=o.type.toLowerCase()&&(l=i.config.context.configurator.getUrlBuilder().getNewViewUrl(o.id,o.type,!0));var u=i.config.context.configurator.getTemplateFactory().get("board.cell.quick.add.success").bind({},{type:n.nameType.title,name:o.name,url:l});"x"===n.message.location||"y"===n.message.location||n.openAfter||n.skipNotification||this.fire("notification",{$node:u}),r&&u.on("click",".i-role-card-view",e.bind(function(e){e.preventDefault(),this._openView(r,o)},this))}var c=t('<div class="tau-quick-add-success-message i-role-quick-add-success-message" />');c.data(o),this.setHtmlForMessage(d.element,c),this.fire("adjustPosition")},"bus afterRender:last+beforeInit:last+model.add.item:last+model.data.item.did.fail.add":function(e,t,a,r,d){var n=this;i.handle(d,r,{setText:function(e){n.setHtmlForMessage(t.element,e),n.fire("adjustPosition")}},a.config.context.configurator)},"bus afterRender:last+view.submit":function(a,i,r){var d=r.type,n=i.element.find(".tau-control-set."+d+" .tau-required-field-editor").filter(":not(.placeholder)").filter(":not(.hide)"),s=n.filter(".cf-input"),o=this.prepareFields;if(o.validate(n)){var l=e.reduce(n,function(e,a){var i=t(a),r=i.data("fieldname"),d=i.data("fieldtype"),n=o.getValue(i);return i.data("iscf")||e.push({id:r,value:n,type:d}),e},[]);if(s.length){var u=e.reduce(s,function(e,a){var i=t(a),r=i.data(),d={name:r.fieldname,type:r.fieldtype,value:o.getCfValue(a)};return d.value&&e.push(d),e},[]);l.push({id:"CustomFields",value:JSON.stringify(u)})}this.fire("model.add.item",{fields:l,type:d,openAfter:r.openAfter}),n.off(".validator")}else n.off(".validator").on("input.validator change.validator",function(){o.validate(n)})},"bus beforeInit:last + view.editors.ready + culture.ready":function(e,t,a,i){a.filter(".tau-in-text").placeholder(),this.prepareFields=new r({culture:i,self:this,configurator:t.config.context.configurator}),this.prepareFields.setBehavior(a),this.culture=i},"bus childComponentCreated":function(e,t){this.childBus[t.name]=t},childBus:{},"bus view.editors.ready:last+view.indicator.ready:last+before_model.add.item":function(e,t,a){t.filter(":not(.disabled)").prop("disabled",!0),a.tauProgressIndicator("show"),this.fire("adjustPosition")},afterDataItemAdding:function(e,t){e.filter(":not(.disabled)").prop("disabled",!1),t.data("ui-tauProgressIndicator")&&t.tauProgressIndicator("hide"),this.fire("adjustPosition")},"bus view.editors.ready:last+view.indicator.ready:last+model.data.item.did.add":function(e,t,a){this.afterDataItemAdding(t,a)},"bus view.editors.ready:last+view.indicator.ready:last+model.data.item.did.fail.add":function(e,t,a){this.afterDataItemAdding(t,a)},"bus afterRender:last+view.select.entity.editor":function(e,a,i){var r=a.element,d=r.find(".tau-control-set.tau-active .tau-required-field-editor").not(".placeholder");r.find(".tau-active").removeClass("tau-active").prop("disabled",!1),r.find(".tau-message-pool").children().remove(),r.find(".i-role-entity-selector.tau-"+i.type.toLowerCase()).addClass("tau-active").prop("disabled",!0);var n=".tau-entity-controls .tau-control-set."+i.type;r.find(n).addClass("tau-active"),window.setTimeout(function(){r.find(".tau-entity-controls .tau-active :text, .tau-entity-controls .tau-active textarea").eq(0).focus().caretToEnd()},0),d.each(function(){var e=t(this),a=e.data();if(!a.iscf){var i=".tau-control-set.tau-active .tau-required-field-editor."+t.escapeSelector(a.fieldname),d=r.find(i),n=e.val();switch(a.fieldtype){case"Text":d.filter(":not(.placeholder)").val(n),n&&d.show().filter(".placeholder").remove();break;case"DDL":d.val()!=n&&(e.hasClass("disabled")||d.find('[value="'+n+'"]').prop("selected",!0).length&&d.change());break;default:d.val(n)}}}),this.fire("adjustPosition")},onTypeSelectorClick:function(e){e.preventDefault();var a=t(e.target);if(!a.hasClass("tau-active")){var i=a.data().type;this.fire("view.select.entity.editor",{type:i})}},onSubmit:function(e){return this.fire("view.submit",{type:t(e.target).data().type}),!1},onAddOpen:function(e){return this.fire("view.submit",{type:t(e.target).closest("form").data().type,openAfter:!0}),!1},_processTimeWidget:function(a,i,r){var d=function(e){return Math.round(100*e)/100},n=e.bind(function(t){return parseFloat(e.asString(t).replace(this.culture.decimalSeparator,"."))},this),s=e.bind(function(t){return e.asString(t).replace(".",this.culture.decimalSeparator)},this),o=i.filter("[data-fieldname=Spent]"),l=i.filter("[data-fieldname=Remain]");o.attr("autocomplete","off"),l.attr("autocomplete","off");var u=t(['<div class="tau-field tau-field__time">',"<label><span></span></label>","<label><span></span></label>","</div>"].join(""));u.insertBefore(o.parent()),o.parent().detach(),u.find("label span").eq(0).text(o.attr("placeholder")),o.attr("placeholder",""),o.appendTo(u.find("label").eq(0)),l.parent().detach(),u.find("label span").eq(1).text(l.attr("placeholder")),l.attr("placeholder",""),l.appendTo(u.find("label").eq(1));var c=i.filter("[data-fieldname=Role]"),f=r.types.Time.template,p=e.find(f.items,function(e){return"Remain"==e.id}),h={};e.forEach(p.options.defaultValues,function(e){h[e.key]=e.value}),l.val(h[c.val()]);var m=h[c.val()];c.on("change",function(){m=h[c.val()],l.val(s(h[c.val()])||0),o.trigger("input")});var v="oninput"in o[0]?"input":"keyup";o.on(v,function(){var e=n(o.val())||0,t=(n(m)||0)-e;t=0>t?0:t,l.val(s(d(t))||0)}),l.on(v,function(){m=l.val()}),this.bus.on("model.data.item.did.add",function(){h[c.val()]=l.val(),m=h[c.val()]},this)},"bus relatedQuickAdd.afterShow":function(){this.$element.addClass("bg-overlay")},"bus relatedQuickAdd.afterHide":function(){this.$element.removeClass("bg-overlay")}})});
define('tau/ui/extensions/finder.entity/ui.extension.finder.entity.embedder',["Underscore","jQuery","tau/core/extension.base"],function(e,t,i){return i.extend({"bus popupResize":function(e,t){this.fire("$outerBubbled.ready",t)},"bus $outerBubbled.ready + childrenBuses.ready":function(t,i,n){var o=e.bind(this.fire,this,"adjustPosition");e.forEach(n,function(e){e.fire("$outerBubbled.ready",i),e.on("adjustPosition",o)})},findBusByName:function(t,i){return e.find(t,function(e){return e.name==i})},"bus childrenBuses.ready:last + child.shown":function(e,t,i){this.findBusByName(t,i).fire("$outerBubbled.shown")},"bus childrenBuses.ready:last + child.hidden":function(e,t,i){this.findBusByName(t,i).fire("$outerBubbled.hidden")},showFinder:function(i){var n=20;t.when(i.$selector.finish().slideUp(n),i.$holder.finish().slideDown(n),i.$relatedQuickAdd.finish().addClass("tau-within-entity-lookup",n)).done(e.bind(function(){this.fire("child.shown",i.$holder.data("name")),this.fire("adjustPosition")},this))},hideFinder:function(i,n){var o=100;t.when(i.$holder.finish().slideUp(o),i.$selector.finish().slideDown(o),i.$relatedQuickAdd.finish().removeClass("tau-within-entity-lookup",o)).done(e.bind(function(){this.fire("child.hidden",i.$holder.data("name")),n&&i.$selector.addClass("focus").focus(),this.fire("adjustPosition")},this))},selectEntity:function(e,t,i){var n=i.entity;e.$input.data("value",n).val(n.id).change();var o=e.$field.find(".tau-linkentity__icon");if(o.length&&this.showEntityType(n)){var s=o.attr("class");s=s.replace(/ui-type-icon-\S+/gi,"ui-type-icon-"+n.entityType.name.toLowerCase()),o.attr("class",s).text(n.id).show()}e.$field.find(".tau-linkentity__inner").text(this.getEntityRenderInfo(n)).removeClass("tau-linkentity__inner_placeholder"),e.alwaysVisible||this.hideFinder(e,!0)},getEntityRenderInfo:function(e){return"user"===e.entityType.name?e.fullName:e.name},showEntityType:function(e){return"user"!==e.entityType.name&&e.entityType},getFinderControls:function(e){var t=e.closest(".tau-field"),i=t.find(".tau-userStorySelector"),n=t.find(".i-role-related-quick-add");return{$input:e,$field:t,$selector:i,$holder:t.find(".tau-userStorySelector__control"),$relatedQuickAdd:n,alwaysVisible:i.hasClass("hidden")}},"bus applyFinder":function(i,n){var o=this.getFinderControls(n),s=null,d=e.bind(this.hideFinder,this,o),r=e.bind(this.showFinder,this,o),u=e.bind(this.selectEntity,this,o),a=e.bind(this._selectEntityFromItem,this,o),l=n.data("entityuniquename");this.on(l+".entitySelected",u),this.on(l+".add.entity.request",function(){d(),o.$relatedQuickAdd.click()}.bind(this)),this.on("relatedQuickAdd."+l+".added",a),o.alwaysVisible?r():(o.$selector.on({click:function(){r()},keydown:function(e){var i=t.ui.keyCode;(e.keyCode==i.DOWN||e.keyCode==i.UP)&&r()},focus:function(){o.$selector.hasClass("focus")||r()},focusout:function(){o.$selector.removeClass("focus")}}),o.$holder.on({keydown:function(e){e.keyCode==t.ui.keyCode.ESCAPE&&(d(!0),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())},focusin:function(){clearTimeout(s)},focusout:function(e){t(e.relatedTarget).is("select.tau-select")&&o.$holder.closest(".i-role-bubble").is(".i-orientation_bottom")||t(e.target).is(".tau-lookup-block .i-role-bubble input.tau-in-text")||(clearTimeout(s),s=setTimeout(d,300))}}),o.$holder.on({mousedown:function(){o.$holder.focus(10)}},".i-role-bubble"))},_selectEntityFromItem:function(e,t,i){var n=this._getEntityFromItem(i);return this.selectEntity(e,t,{entity:n})},_getEntityFromItem:function(e){var t={entityType:{name:e.type},id:e.id,name:e.name};return t}})});
define('tau/ui/extensions/container/ui.extension.container.childrenEvents',["Underscore","tau/core/extension.base"],function(e,n){return n.extend({"bus childComponentCreated":function(n){var r=n.data,t=this.bus,a=r.fire,i=r.name;r.fire=function(n,o){var u=e.toArray(arguments);a.apply(r,u),t.fire(i+"."+n,o)}}})});
define('tau/views/view.compositeControl',["Underscore","jQuery","tau/core/view-base","tau/core/event-dispatcher","tau/models/dataprocessor/model.processor.context"],function(e,n,t,i,r){var a=function(n){var t={};return e.each(n,function(e,n){for(var i=n.split(":"),r=i.pop(),a=t,o=0,s=i.length;s>o;o++){var c=i[o];a.hasOwnProperty(c)||(a[c]={}),a=a[c]}a[r]=e}),t};return t.extend({name:"view.compositeControl",init:function(e){this._loaded=!1,this._super(e),this.timeoutDescriptor=null},initialize:function(){this._super.apply(this,arguments);var n=this.config.dependencies,t=this.config.visible&&e.isArray(n)&&e.size(n)>0;if(t){var i=this.getComponentPaths(n);require(i,this.createComponentTypesCallback(n))}else this.fireDependenciesAreReady({})},getComponentPaths:function(n){return e.map(n,function(e){return"tau/components/component."+e})},createComponentTypesCallback:function(n){var t=this;return t.dependenciesHash={},function(){var i=arguments;e(n).each(function(e,n){t.dependenciesHash[e]=i[n]}),t.fireDependenciesAreReady(t.dependenciesHash)}},fireDependenciesAreReady:function(e){this.fire("dependenciesAreReady",{controlTypes:e})},"bus afterInit+dataBind":function(){},"bus afterInit+dataBind+dependenciesAreReady":function(e){var n=this,t=e.afterInit.data,i=e.dataBind.data,r=e.dependenciesAreReady.data;n.config.visible&&(n._loaded=!0),n.fireBeforeRender({data:i}),n.doRender(i,t.refreshSelector);var a=n.instantiateChildrenComponents(n.element.find("[runas]"),r.controlTypes);n.initializeChildrenComponents(a,i)},createOnAfterRenderCallback:function(e){return function(n){n.removeListener(),e.replaceWith(n.data.element)}},onDestroyCallback:function(e){var n=e.sender;delete this.children[n.uniqueId]},instantiateChildrenComponents:function(t,i){var r=this,o=[];r.children={};var s=e.bind(r.onDestroyCallback,r);return t.each(function(){var t=n(this),c=t.attr("runas"),d=i.hasOwnProperty(c);if(!d)throw"The component type ["+c+"] not found";var u=i[c],f=a(t.data()),l=u.create({disabledExtensionCategories:r.config.disabledExtensionCategories,context:r.config.context,allData:f});l.uniqueId=l.uniqueId||e.uniqueId(),l.on("afterRender",r.createOnAfterRenderCallback(t)),l.on("destroy",s);var h={instance:l,config:f};r.children[l.uniqueId]=l,o.push(h)}),o},initializeChildrenComponents:function(n,t){var i=this,r=[];e.forEach(n,function(n,t){var i=n.config,a=n.instance;e.has(i,"label")?r[i.label]=a:r[t]=a}),this.fire("childrenBuses.ready",r);var a=50,o=10,s=function(){if(n.length){for(var e=+new Date,t=n.splice(0,o),r=0,c=t.length;c>r;r++)i.fire("createComponentContext",t[r]);var d=+new Date,u=d-e,f=u/a;if(Math.abs(1-f)>.3){var l=Math.floor((o+o/f)/2);o=l||1}i.timeoutDescriptor=setTimeout(s,1)}else i.fire("component.ready")};s(),i.fireAfterRender({data:t})},"bus createComponentContext":function(e){var n=e.data,t=n.config;t.context.entity=t.context.general,t.context.applicationContext=this.config.context.applicationContext,t.context.configurator=this.config.context.configurator,r(t.context),this.fire("componentContextCreated",n)},"bus componentContextCreated":function(e){var n=e.data;this.fire("childComponentCreated",n.instance),n.instance.fire("initialize",n.config)},"bus show":function(){this._super(),this._loaded||this.fire("initialize",{})},destroyChildren:function(){var n=this;clearTimeout(n.timeoutDescriptor),n.dispatcher=null,e(n.children||{}).chain().keys().each(function(e){n.children[e].destroy()}),n.children={}},lifeCycleCleanUp:function(){this.destroyChildren(),this._super()},destroy:function(){this.destroyChildren(),this._super()}})});
define('tau/ui/templates/board.cell.quick.add/ui.customFunctions.template.board.cell.quick.add',[],function(){var e=["project","team"],t=function(e){return'["'+e.join('","')+'"]'},r={"default":{getRules:function(e,r,u){return r=r||[],e.required!==!1&&r.push(u||"required"),t(r)}},DDL:{getRules:function(r,u){return u=u||[],u.push(_.contains(e,r.id)?"required-team-project":"required-ddl"),t(u)}}},u=function(e,t,u){var n=e.type,i=r[n],d=i||r["default"],o=d.getRules(e,t,u);return o};return{getValidationRules:u}});
define('tau/ui/templates/board.cell.quick.add/ui.template.board.cell.quick.add.textField',["Underscore","tau/core/templates-factory","tau/ui/templates/board.cell.quick.add/ui.customFunctions.template.board.cell.quick.add"],function(e,i,t){var a={name:"board.cell.item.quick.add.field.Text",engine:"jqote2",customFunctions:e.defaults(t,{getFieldByType:function(i,t){return e.find(i,function(e){return e.type.toLowerCase()===t})},getColorField:function(e){return this.getFieldByType(e,"color")},getIconField:function(e){return this.getFieldByType(e,"icon")}}),markup:['<div class="tau-field">',"<% var name = this.name, field = this.field; %>","<% if (field.options && field.options.multiline) { %>",'   <textarea name="<%= field.id%>" class="tau-in-text tau-required-field-editor <%= field.id%>" ','       data-validate=\'{"caption":"<%= field.caption%>","rules":["required","<%= field.id.toLowerCase() == "email"?"email":"text"%>"]}\' ','       placeholder="<%= field.caption%>" data-fieldname="<%=field.id%>" data-fieldtype="<%=field.type%>" />','<% } else if (name.toLowerCase() == "project" && field.id.toLowerCase() == "name") { %>',"   <% var projectColors = this.constants.projectColors; %>","   <% var colorField = fn.getColorField(this.items); %>",'   <div name="<%= colorField.id%>" class="tau-required-field-editor <%= colorField.id%>" ','       data-validate=\'{"caption":"<%= colorField.caption%>","rules":<%=fn.getValidationRules(colorField, ["color"])%>}\' ','       data-fieldname="<%=colorField.id%>" data-fieldtype="<%=colorField.type%>">','       <div class="tau-new-entity-info">','           <span data-title="Select a project color" class="tau-select-team-icon tau-extension-board-tooltip">','               <i data-value="default" class="tau-icon tau-icon_type_color tau-icon_name_default i-role-currenticon"></i>',"           </span>",'           <input tabindex="0" autocomplete="off" type="text" name="<%= field.id%>"                data-validate=\'{"caption":"<%= field.caption%>","rules":["required","text"]}\' ','               class="tau-in-text tau-required-field-editor tau-new-entity-name <%= field.id%>" ','               placeholder="Enter project name here" name="name" data-fieldname="<%=field.id%>" data-fieldtype="<%=field.type%>">','           <select name="color" style="display:none;">','               <option value=""></option>',"                   <% _.each(projectColors, function(color){ %>",'                       <option value="<%= color %>"><%= color %></option>',"                   <% }); %>","           </select>","       </div>",'       <ul class="tau-teams-icon-list i-role-richselect">','           <li><i class="tau-icon tau-i-close i-role-option" data-value=""></i></li>',"           <% _.each(projectColors, function(color){ %>",'               <li><i class="tau-icon tau-icon_type_color i-role-option" style="background-color:<%= color %>;" data-value="<%= color %>"></i></li>',"           <% }); %>","       </ul>","   </div>",'<% } else if (name.toLowerCase() == "team" && field.id.toLowerCase() == "name") { %>',"   <% var teamIcons = this.constants.teamIcons; %>","   <% var iconField = fn.getIconField(this.items); %>",'   <div name="<%= iconField.id%>" class="tau-required-field-editor <%= iconField.id%>" ','       data-validate=\'{"caption":"<%= iconField.caption%>","rules":<%=fn.getValidationRules(iconField, ["icon"])%>}\' ','       data-fieldname="<%=iconField.id%>" data-fieldtype="<%=iconField.type%>">','       <div class="tau-new-entity-info">','           <span data-title="Select a team icon" class="tau-select-team-icon tau-extension-board-tooltip">','               <i class="tau-icon tau-icon_type_svg tau-icon_name_default i-role-currenticon" data-value="default"></i>',"           </span>",'           <input tabindex="0" autocomplete="off" type="text" name="<%= field.id%>"                data-validate=\'{"caption":"<%= field.caption%>","rules":["required","text"]}\' ','               class="tau-in-text tau-required-field-editor tau-new-entity-name <%= field.id%>" ','               placeholder="Enter team name here" name="name" data-fieldname="<%=field.id%>" data-fieldtype="<%=field.type%>">','           <select name="icon" style="display:none;">','               <option value=""></option>',"                   <% _.each(teamIcons, function(icon){ %>",'                       <option value="<%= icon %>"><%= icon %></option>',"                   <% }); %>","           </select>","       </div>",'       <ul class="tau-teams-icon-list i-role-richselect">','           <li><i class="tau-icon tau-i-close i-role-option" data-value=""></i></li>',"           <% _.each(teamIcons, function(icon){ %>",'               <li><i class="tau-icon tau-icon_type_svg tau-icon_name_<%= icon %> i-role-option" data-value="<%= icon %>"></i></li>',"           <% }); %>","       </ul>","   </div>","<% } else { %>",'   <input tabindex="0" autocomplete="off" type="text" name="<%= field.id%>" ','       data-validate=\'{"caption":"<%= field.caption%>","rules":["required","<%= field.id.toLowerCase() == "email"?"email":"text"%>"]}\' ','       class="tau-in-text tau-required-field-editor <%= field.id%>" placeholder="<%= field.caption%>" ','       data-fieldname="<%=field.id%>" data-fieldtype="<%=field.type%>">',"<% } %>","</div>"]};return i.register(a)});
define('tau/ui/templates/board.cell.quick.add/ui.template.board.cell.quick.add.passwordField',["Underscore","tau/core/templates-factory","tau/ui/templates/board.cell.quick.add/ui.customFunctions.template.board.cell.quick.add"],function(e,d,i){var t={name:"board.cell.item.quick.add.field.Password",engine:"jqote2",customFunctions:e.defaults(i),markup:['<div class="tau-field">',"   <% field = this.field; %>",'   <input type="password" tabindex="0" name="<%= field.id%>" class="tau-in-text tau-required-field-editor <%= field.id%>" ','       data-validate=\'{"caption":"<%= field.caption%>","rules":["text"]}\' ','       placeholder="<%= field.caption%>" data-fieldname="<%=field.id%>" data-fieldtype="<%=field.type%>">',"</div>"]};return d.register(t)});
define('tau/ui/templates/board.cell.quick.add/ui.template.board.cell.quick.add.numberField',["Underscore","tau/core/templates-factory","tau/ui/templates/board.cell.quick.add/ui.customFunctions.template.board.cell.quick.add"],function(e,i,t){var a={name:"board.cell.item.quick.add.field.Number",engine:"jqote2",customFunctions:e.defaults(t),markup:['<div class="tau-field">',"   <% field = this.field; %>",'   <input type="text" tabindex="0" name="<%= field.id%>" class="tau-in-text tau-required-field-editor <%= field.id%>" ','       data-fieldtype="number" data-fieldname="<%=field.id%>" ','       data-validate=\'{"caption":"<%= field.caption%>","rules":<%=fn.getValidationRules(field, ["number"])%>}\' ','       placeholder="<%= field.caption%>" ',"       value=\"<%= _.has(field.options, 'defaultValue') ? field.options.defaultValue : '' %>\">","</div>"]};return i.register(a)});
define('tau/ui/templates/board.cell.quick.add/ui.template.board.cell.quick.add.integerField',["Underscore","tau/core/templates-factory","tau/ui/templates/board.cell.quick.add/ui.customFunctions.template.board.cell.quick.add"],function(e,i,t){var d={name:"board.cell.item.quick.add.field.Integer",engine:"jqote2",customFunctions:e.defaults(t),markup:['<div class="tau-field">',"   <% field = this.field; %>",'   <input type="text" tabindex="0" name="<%= field.id%>" class="tau-in-text tau-required-field-editor <%= field.id%>" ','       data-validate=\'{"caption":"<%= field.caption%>","rules":<%=fn.getValidationRules(field, ["integer"])%>}\' ','       placeholder="<%= field.caption%>" data-fieldname="<%=field.id%>" data-fieldtype="integer">',"</div>"]};return i.register(d)});
define('tau/ui/templates/board.cell.quick.add/ui.template.board.cell.quick.add.dateField',["Underscore","tau/core/templates-factory","tau/utils/utils.date","tau/ui/templates/board.cell.quick.add/ui.customFunctions.template.board.cell.quick.add"],function(e,t,a,i){var d={name:"board.cell.item.quick.add.field.Date",engine:"jqote2",customFunctions:e.defaults(i,{convertToDateString:function(e){var t=a.convertToTimezone(e);return a.format.date.short(t)}}),markup:['<div class="tau-field">',"   <% field = this.field; %>",'   <input type="text" tabindex="0" name="<%= field.id%>" class="tau-in-text tau-required-field-editor <%= field.id%>" ','       data-validate=\'{"caption":"<%= field.caption%>","rules":<%=fn.getValidationRules(field, ["date"])%>}\' ','       placeholder="<%= field.caption%>" data-fieldname="<%=field.id%>" data-fieldtype="<%=field.type%>" ',"       value=\"<%= _.has(field.options, 'defaultValue') ? fn.convertToDateString(field.options.defaultValue) : ''  %>\">","</div>"]};return t.register(d)});
define('tau/ui/templates/board.cell.quick.add/ui.template.board.cell.quick.add.dateTimeField',["Underscore","tau/core/templates-factory","tau/utils/utils.date","tau/ui/templates/board.cell.quick.add/ui.customFunctions.template.board.cell.quick.add"],function(e,t,i,a){var d={name:"board.cell.item.quick.add.field.DateTime",engine:"jqote2",customFunctions:e.defaults(a,{convertToDateTimeString:function(e){var t=i.convertToTimezone(e);return i.format.datetime.short(t)}}),markup:['<div class="tau-field">',"   <% field = this.field; %>",'   <input type="text" tabindex="0" name="<%= field.id%>" class="tau-in-text tau-required-field-editor <%= field.id%>" ','       data-validate=\'{"caption":"<%= field.caption%>","rules":<%=fn.getValidationRules(field, ["date"])%>}\' ','       placeholder="<%= field.caption%>" data-fieldname="<%=field.id%>" data-fieldtype="<%=field.type%>" ',"       value=\"<%= _.has(field.options, 'defaultValue') ? fn.convertToDateTimeString(field.options.defaultValue) : ''  %>\">","</div>"]};return t.register(d)});
define('tau/ui/templates/board.cell.quick.add/ui.template.board.cell.quick.add.usersInviteField',["Underscore","tau/core/templates-factory","tau/ui/templates/board.cell.quick.add/ui.customFunctions.template.board.cell.quick.add"],function(e,t,i){var a={name:"board.cell.item.quick.add.field.UsersInvite",engine:"jqote2",customFunctions:e.defaults(i),markup:['<div class="tau-field tau-invite-widget">',"   <% field = this.field; %>",'   <textarea type="text" tabindex="0" name="<%= field.id%>" class="tau-in-text tau-required-field-editor <%= field.id%>" ','       data-validate=\'{"caption":"<%= field.caption%>","rules":<%=fn.getValidationRules(field, ["usersinvite"])%>}\' ','       placeholder="Start typing name(s) or email(s) to assign people" data-fieldname="<%=field.id%>" data-fieldtype="<%=field.type%>" data-selected="<%! JSON.stringify(field.options.selectedUser) %>" />',"</div>"]};return t.register(a)});
define('tau/ui/templates/board.context.selector/ui.template.board.context.selector.teams.list',["tau/core/templates-factory"],function(t){return t.register({name:"board.context.selector.teams.list",engine:"jqote2",customFunctions:{getTooltip:function(t){var e=-1==t.id?"Select to see work not assigned to a team":"Select to see work assigned to this team";return void 0!==t.tooltip&&(e=t.tooltip),e}},markup:['<li class="i-role-item">','<label class="tau-checkbox tau-extension-board-tooltip <% if (this.id == -1) { %> tau-null-selector <% } %>" data-title="<%=fn.getTooltip(this)%>">',"<input type=\"checkbox\" name=\"team\" id=\"content_filter_project_<%= this.id %>\" value=\"<%= this.id %>\" <%= this.selected ? 'checked' : '' %> <%= (this.disabled ? 'disabled':'')%> />","<i></i>",'<span class="tau-checkbox-label">','<i class="tau-icon tau-icon_type_svg tau-icon_name_<%= this.icon || ""  %>"></i>',"<%! this.name %>","</span>","</label>","<% if (this.isSupportView) { %>",'<i data-title="Focus on this team" class="tau-extension-board-tooltip tau-category-items-selector__selecttrigger tau-icon tau-icon_type_svg tau-icon_name_aim i-role-selecttrigger" data-entity-id="<%! this.id %>" data-entity-type="team"></i>','<i data-title="View info about this team" class="tau-extension-board-tooltip tau-category-items-selector__viewtrigger tau-icon tau-icon_type_svg tau-icon_name_newwindow i-role-viewtrigger" data-entity-id="<%! this.id %>" data-entity-type="team"></i>',"<% } %>","</li>"]})});
define('tau/ui/templates/board.cell.quick.add/ui.template.board.cell.quick.add.teamMultiSelectField',["Underscore","tau/core/templates-factory","tau/ui/templates/board.cell.quick.add/ui.customFunctions.template.board.cell.quick.add","tau/ui/templates/board.context.selector/ui.template.board.context.selector.teams.list"],function(e,t,i){var a={name:"board.cell.item.quick.add.field.TeamMultiSelect",engine:"jqote2",customFunctions:e.defaults(i,{markTeamSelected:function(t,i){var a=e.find(t,function(e){return e.id===i.id});a&&(a.selected=!0,a.disabled=!0)}}),markup:["<% if (this.field.options.teams.length > 0) { %>",'<div class="tau-field">',"   <% field = this.field; %>",'   <% if (this.name == "User") { %><div class="tau-note">Assign to Teams</div><% } %>',"   <% if (field.options.selectedTeam && field.options.selectedTeam.id) { ","       fn.markTeamSelected(field.options.teams, field.options.selectedTeam);","   }%>",'   <div class="tau-teams">','       <ul name="<%= field.id%>" class="tau-category-items-selector i-role-list tau-required-field-editor <%= field.id%>" ','               data-validate=\'{"caption":"<%= field.caption%>","rules":<%=fn.getValidationRules(field, ["teammultiselect"])%>}\' ','               data-fieldname="<%=field.id%>" data-fieldtype="<%=field.type%>">','           <%= fn.sub("board.context.selector.teams.list", field.options.teams) %>',"       </ul>","   </div>","</div>","<% } %>"]};return t.register(a)});
define('tau/ui/templates/board.context.selector/ui.template.board.context.selector.projects.list',["tau/core/templates-factory"],function(t){return t.register({name:"board.context.selector.projects.list",engine:"jqote2",customFunctions:{getTooltip:function(t){var e=-1==t.id?"Select to see work not assigned to a project":"Select to see work assigned to this project";return void 0!==t.tooltip&&(e=t.tooltip),e}},markup:['<li class="i-role-item">','<label class="tau-checkbox tau-extension-board-tooltip <% if (this.id == -1) { %> tau-null-selector <% } %>" data-title="<%=fn.getTooltip(this)%>">',"<input type=\"checkbox\" id=\"content_filter_project_<%= this.id %>\" value=\"<%= this.id %>\" <%= this.selected ? 'checked' : '' %> <%= (this.disabled ? 'disabled':'')%> />","<i></i>",'<span class="tau-checkbox-label">',"<% if (this.color) { %>",'<i class="tau-icon tau-icon_type_color" style="background-color: <%= this.color %>"></i>',"<%} else { %>",'<i class="tau-icon"></i>',"<% } %>","<%! this.name %>","</span>","</label>","<% if (this.isSupportView) { %>",'<i data-title="Focus on this project" class="tau-extension-board-tooltip tau-category-items-selector__selecttrigger tau-icon tau-icon_type_svg tau-icon_name_aim i-role-selecttrigger" data-entity-id="<%! this.id %>" data-entity-type="project"></i>','<i data-title="View info about this project" class="tau-extension-board-tooltip tau-category-items-selector__viewtrigger tau-icon tau-icon_type_svg tau-icon_name_newwindow i-role-viewtrigger" data-entity-id="<%! this.id %>" data-entity-type="project"></i>',"<% } %>","</li>"]})});
define('tau/ui/templates/board.cell.quick.add/ui.template.board.cell.quick.add.projectMultiSelectField',["Underscore","tau/core/templates-factory","tau/ui/templates/board.cell.quick.add/ui.customFunctions.template.board.cell.quick.add","tau/ui/templates/board.context.selector/ui.template.board.context.selector.projects.list"],function(e,t,i){var d={name:"board.cell.item.quick.add.field.ProjectMultiSelect",engine:"jqote2",customFunctions:e.defaults(i,{markProjectSelected:function(t,i){var d=e.find(t,function(e){return e.id===i.id});d&&(d.selected=!0,d.disabled=!0)}}),markup:["<% if (this.field.options.projects.length > 0) { %>",'<div class="tau-field">',"   <% field = this.field; %>",'   <% if (this.name == "User") { %><div class="tau-note">Assign to Projects</div><% } %>',"   <% if (field.options.selectedProject && field.options.selectedProject.id) { ","       fn.markProjectSelected(field.options.projects, field.options.selectedProject);","   }%>",'   <div class="tau-projects">','       <ul name="<%= field.id%>" class="tau-category-items-selector i-role-list tau-required-field-editor <%= field.id%>" ','               data-validate=\'{"caption":"<%= field.caption%>","rules":<%=fn.getValidationRules(field, ["projectmultiselect"])%>}\' ','               data-fieldname="<%=field.id%>" data-fieldtype="<%=field.type%>">','           <%= fn.sub("board.context.selector.projects.list", field.options.projects, field.options.selectedProject) %>',"       </ul>","   </div>","</div>","<% } %>"]};return t.register(d)});
define('tau/ui/templates/board.cell.quick.add/ui.template.board.cell.quick.add.ddlField',["Underscore","tau/core/templates-factory","tau/ui/templates/board.cell.quick.add/ui.customFunctions.template.board.cell.quick.add"],function(e,i,t){var d={name:"board.cell.item.quick.add.field.DDL",engine:"jqote2",customFunctions:e.defaults(t),markup:['<div class="tau-field">',"   <% field = this.field; %>","   <% var options = field.options.values, lengthOptions = options.length; %>",'   <select data-validate=\'{"caption":"<%= field.caption%>","rules":<%=fn.getValidationRules(field)%>}\' tabindex="0" <%if(lengthOptions == 1){%>disabled="disabled"<%}%> ','           class="tau-select <%if(lengthOptions == 1){%>disabled<%}%> tau-required-field-editor <%= field.id.toLowerCase()%> chzn-select" ','           name="<%=field.id%>" data-fieldname="<%=field.id%>" data-fieldtype="<%=field.type%>">',"       <% for (var k = 0; k < lengthOptions; k++) { %>",'           <option data-option="<%! JSON.stringify(options[k]) %>"','               <% if (field.options.selectedValue == options[k].id) { %> selected="selected" <% } %> ','                   value="<%= options[k].id %>">',"               <%! options[k].title %>","           </option>","       <% } %>","   </select>","</div>"]};return i.register(d)});
define('tau/ui/templates/board.cell.quick.add/ui.template.board.cell.quick.add.entitySelectorField',["Underscore","tau/core/templates-factory","tau/ui/templates/board.cell.quick.add/ui.customFunctions.template.board.cell.quick.add"],function(e,t,a){var i={name:"board.cell.item.quick.add.field.EntitySelector",engine:"jqote2",customFunctions:e.defaults(a,{entity:{TestPlanSelector:{uniqueName:"testplanselector",type:"testplan",placeholder:"Test Plan"},UserStorySelector:{uniqueName:"userstories",type:"userstory",placeholder:"User Story"},ReleaseSelector:{uniqueName:"releaseselector",type:"release",placeholder:"Release"},UserSelector:{uniqueName:"usersselector",type:"user",placeholder:"User",model:"user"}}}),markup:['<div class="tau-field tau-field_entity tau-related-add-present">',"   <% field = this.field; %>","   <% var entity = fn.entity[field.type]; %>",'   <div tabindex="0" class="tau-userStorySelector releaseSelector">',"       <input type=\"hidden\" data-entityuniquename='<%=entity.uniqueName%>' ",'               data-validate=\'{"caption":"<%=field.caption%>","rules":<%=fn.getValidationRules(field, [], \'entityRequired\')%>}\' ','               name="<%=field.id%>" class="tau-required-field-editor <%=field.id%>" placeholder="<%=field.caption%>" data-fieldname="<%=field.id%>" ',"               data-filter='<%=JSON.stringify(field.options.filter)%>' data-fieldtype=\"<%=field.type%>\">",'           <span class="userStorySelector ui-link">','               <em class="ui-type-icon ui-type-icon-userstory tau-linkentity__icon" style="display: none;"></em>','               <span class="tau-linkentity__inner tau-linkentity__inner_placeholder"><%=entity.placeholder%></span>',"           </span>","   </div>","   <div class=\"tau-userStorySelector__control\" data-name='<%=entity.uniqueName%>'>","       <span runas=\"finder.entity\" data-context:general='' data-name='<%=entity.uniqueName%>' ","               data-entity-type='<%=entity.type%>' data-filterenabled='true'","               data-is-add-possible='true' data-field-caption='<%=field.caption%>'","               data-filter='<%=JSON.stringify(field.options.filter)%>' data-model='<%=entity.model%>'></span>","   </div>",'   <button type="button" class="tau-btn tau-success btn-plus tau-related-quick-add i-role-related-quick-add"></button>',"</div>"]};return t.register(i)});
define('tau/ui/templates/board.cell.quick.add/ui.template.board.cell.quick.add.customField',["Underscore","tau/core/templates-factory","tau/ui/templates/board.cell.quick.add/ui.customFunctions.template.board.cell.quick.add"],function(e,i,t){var a={name:"board.cell.item.quick.add.field.CustomField",engine:"jqote2",customFunctions:e.defaults(t,{selected:function(e){return e?'selected="selected"':""}}),markup:['<% var field = this.field, className = "cf-wrap tau-field tau-custom cf-process_" + field.processId;','var defaultValue = field.config && field.config.defaultValue ? field.config.defaultValue : "";','if (field.fieldType == "Text" || field.fieldType == "Number" || field.fieldType == "Date" || field.fieldType == "TemplatedURL") {','    var rules = [], additionalClass = "";','    if (field.fieldType == "Number") {','        rules.push("number");','        additionalClass = "cf-input_number";','    } else if (field.fieldType == "Text") {','        rules.push("text");','    } else if (field.fieldType == "Date") {','        rules.push("date");','        additionalClass = "cf-input_date";',"    }","%>",'    <div class="<%=className%>">','        <input tabindex="0" autocomplete="off" type="text" data-validate=\'{"caption":"<%=field.caption%>","rules":<%=fn.getValidationRules(this.field, rules)%>}\' class="tau-in-text <%=additionalClass%> cf-input tau-required-field-editor" placeholder="<%=field.caption%>" data-iscf="true" data-fieldname="<%=field.caption%>" data-fieldtype="<%=field.fieldType%>" value="<%=defaultValue%>">',"    </div>",'<% } else if (field.fieldType == "CheckBox") { %>','    <div class="<%=className%>">','        <label class="tau-checkbox "><input tabindex="0" autocomplete="off" type="checkbox" data-validate=\'{"caption":"<%= field.caption%>","rules":<%=fn.getValidationRules(this.field, ["checkbox"])%>}\' class="tau-is-active cf-input tau-required-field-editor" data-iscf="true" data-fieldname="<%=field.caption%>" data-fieldtype="<%=field.fieldType%>"><i></i><span><%=field.caption%></span></label>',"    </div>",'<% } else if (field.fieldType == "URL") { %>','    <div class="<%=className%>">','        <input tabindex="0" autocomplete="off" type="hidden" value=\'fake\' data-validate=\'{"caption":"<%= field.caption%>","rules":<%=fn.getValidationRules(this.field)%>}\' class="tau-is-active cf-input tau-required-field-editor" data-iscf="true" data-fieldname="<%=field.caption%>" data-fieldtype="<%=field.fieldType%>">',"        <h4><%= field.caption %></h4>",'        <p class="cf-wrap-url_value">','            <input class="tau-in-text tau-is-active cf-input cf-input-url_value tau-required-field-editor" data-iscf=\'true\' data-validate=\'{"caption":"<%= field.caption%>","rules":<%=fn.getValidationRules(this.field, ["url"])%>}\' data-fieldname="<%=field.caption%>-value" type="" placeholder="URL">',"        </p>",'        <p class="cf-wrap-url_description">','            <input class="tau-in-text tau-is-active cf-input cf-input-url_description tau-required-field-editor" data-iscf=\'true\' data-validate=\'{"caption":"<%= field.caption%>","rules":<%=fn.getValidationRules(this.field)%>}\' data-fieldname="<%=field.caption%>-description" type="" placeholder="URL description">',"        </p>","    </div>",'<% } else if (field.fieldType == "DropDown") {','    var options = field.options.value && field.options.value.split("\\r\\n") || [];',"%>",'    <div class="<%=className%>">','        <select data-validate=\'{"caption":"<%=field.caption%>","rules":<%=fn.getValidationRules(this.field)%>}\' tabindex="0" data-iscf=\'true\' class="tau-select cf-input tau-required-field-editor" name="<%=field.caption%>" data-fieldname="<%=field.caption%>" data-fieldtype="<%=field.fieldType%>">','            <option value=""><%=field.caption%></option>',"            <% for (var k = 0; k < options.length; k++) { %>",'                <option value="<%!options[k]%>" <%= fn.selected(defaultValue == options[k]) %>><%!options[k]%></option>',"            <% } %>","        </select>","    </div>",'<% } else if (field.fieldType == "MultipleSelectionList") {','    var options = field.options.value && field.options.value.split("\\r\\n") || [];','    var defaultValues = defaultValue.split(",");',"%>",'    <div class="<%=className%>">',"        <h4><%= field.caption %></h4>",'        <select data-validate=\'{"caption":"<%=field.caption%>","rules":<%=fn.getValidationRules(this.field)%>}\' multiple="multiple" tabindex="0" data-iscf=\'true\' class="tau-select cf-input tau-required-field-editor" name="<%=field.caption%>" data-fieldname="<%=field.caption%>" data-fieldtype="<%=field.fieldType%>">',"            <% for (var k = 0; k < options.length; k++) { %>",'                <option value="<%!options[k]%>" <%= fn.selected(defaultValues.indexOf(options[k]) >= 0) %>><%!options[k]%></option>',"            <% } %>","        </select>","    </div>",'<% } else if (field.fieldType == "Entity") { %>','    <div class="<%=className%> tau-field_entity">','        <div tabindex="0" class="tau-userStorySelector">','            <input type="hidden" data-iscf="true" data-entityuniquename=\'entity_<%=this.type.entityType.name%>_<%=this.entityNumber%>\' data-validate=\'{"caption":"<%=field.caption%>","rules":<%=fn.getValidationRules(this.field, [], \'entityRequired\')%>}\' name="<%=field.id%>" class="cf-input tau-required-field-editor <%= field.id%>" placeholder="<%=field.caption%>" data-fieldname="<%=field.caption%>" data-filter=\'<%= JSON.stringify(field.options.filter)%>\' data-fieldtype="<%=field.fieldType%>">','            <span class="userStorySelector ui-link"><em class="ui-type-icon ui-type-icon-userstory tau-linkentity__icon" style="display: none;"></em><span class="tau-linkentity__inner tau-linkentity__inner_placeholder"><%=field.caption%></span></span>',"        </div>",'        <div class="tau-userStorySelector__control" data-name=\'entity_<%=this.type.entityType.name%>_<%=this.entityNumber%>\'><span runas="finder.entity" ',"            <% if (this.mainEntity) { %>",'            data-context:general:id="<%= this.mainEntity.id %>" ','            data-context:general:entity-type:name="<%= this.mainEntity.entityType.name %>" ',"            <% } else { %>","            data-context:general='' ","            <% } %>","            data-name='entity_<%=this.type.entityType.name%>_<%=this.entityNumber%>' ","            data-filterenabled='true' ","            data-filter='<%= JSON.stringify(field.options.filter || null) %>'></span>","        </div>","    </div>","<% } %>"]};return i.register(a)});
define('tau/ui/templates/board.cell.quick.add/ui.template.board.cell.quick.add.colorField',["Underscore","tau/core/templates-factory"],function(e,r){var a={name:"board.cell.item.quick.add.field.Color",engine:"jqote2",markup:['<div class="tau-field"/>']};return r.register(a)});
define('tau/ui/templates/board.cell.quick.add/ui.template.board.cell.quick.add.iconField',["Underscore","tau/core/templates-factory"],function(e,r){var a={name:"board.cell.item.quick.add.field.Icon",engine:"jqote2",markup:['<div class="tau-field"/>']};return r.register(a)});
define('tau/ui/templates/board.cell.quick.add/ui.template.board.cell.quick.add',["Underscore","tau/core/templates-factory","tau/ui/templates/board.cell.quick.add/ui.customFunctions.template.board.cell.quick.add","tau/ui/templates/board.cell.quick.add/ui.template.board.cell.quick.add.textField","tau/ui/templates/board.cell.quick.add/ui.template.board.cell.quick.add.passwordField","tau/ui/templates/board.cell.quick.add/ui.template.board.cell.quick.add.numberField","tau/ui/templates/board.cell.quick.add/ui.template.board.cell.quick.add.integerField","tau/ui/templates/board.cell.quick.add/ui.template.board.cell.quick.add.dateField","tau/ui/templates/board.cell.quick.add/ui.template.board.cell.quick.add.dateTimeField","tau/ui/templates/board.cell.quick.add/ui.template.board.cell.quick.add.usersInviteField","tau/ui/templates/board.cell.quick.add/ui.template.board.cell.quick.add.teamMultiSelectField","tau/ui/templates/board.cell.quick.add/ui.template.board.cell.quick.add.projectMultiSelectField","tau/ui/templates/board.cell.quick.add/ui.template.board.cell.quick.add.ddlField","tau/ui/templates/board.cell.quick.add/ui.template.board.cell.quick.add.entitySelectorField","tau/ui/templates/board.cell.quick.add/ui.template.board.cell.quick.add.customField","tau/ui/templates/board.cell.quick.add/ui.template.board.cell.quick.add.colorField","tau/ui/templates/board.cell.quick.add/ui.template.board.cell.quick.add.iconField"],function(e,t,i){var a={name:"board.cell.item.quick.add",engine:"jqote2",customFunctions:e.defaults(i,{entitySelectorTypes:["TestPlanSelector","UserStorySelector","ReleaseSelector","UserSelector"],entityTypesGroup:["project","team","user"],findAnyFromGroup:function(t){var i=e.find(t,function(t){return e.include(this.entityTypesGroup,t.name.toLowerCase())}.bind(this));return i?i.name:null},canDrawGroup:function(e){return e.length>1&&this.findAnyFromGroup(e)},fieldTemplate:function(t){return e.include(this.entitySelectorTypes,t)?"EntitySelector":t}}),markup:["<% var isRelatedAdd = this.data && this.data.isRelatedAdd; %>",'<div class="tau-quick-add-dialog">',"    <% if (this.isEmpty) { %>",'        <div class="tau-quick-add_empty">',"        <% if (this.emptyContext) { %>",'           You need to <span class="i-role-select-context-link">select a project or a team</span> to add something.',"        <% } else { %>","           You can't add anything.","        <% } %>","        </div>","    <% } else { %>","    <div class=\"tau-entity-selector <%= (isRelatedAdd ? 'hidden' : '') %>\">",'        <div class="quick-add__entity-items">',"            <% for (var i = 0, length = this.entityTypes.length; i < length; i++) { %>","                <% if (fn.canDrawGroup(this.entityTypes) && this.entityTypes[i].name === fn.findAnyFromGroup(this.entityTypes)) {%>",'                    <div class="tau-entity-group">',"                <%}%>","                <button data-index=\"<%=i%>\" data-type=\"<%= this.entityTypes[i].name%>\" class=\"i-role-entity-selector tau-btn tau-entity-type-btn tau-<%=this.entityTypes[i].name.toLowerCase()%> <%= ((this.entityTypes[i].active ? 'tau-active':'') + ' ' + this.entityTypes[i].name)%>\"  <%= (this.entityTypes[i].active ? 'disabled':'')%>>","                   <%= this.entityTypes[i].title %>","                </button>","            <% } %>","           <% if (fn.canDrawGroup(this.entityTypes)) { %>","                   </div>","           <% } %>","        </div>","    </div>",'    <div class="tau-entity-controls">',"    <% for (var i = 0, length = this.entityTypes.length; i < length; i++) { %>","       <% var name = this.entityTypes[i].name; %>","       <% var type = this.types[name]; %>","       <% var items = type.template.items; %>",'       <div class="tau-entity-fields">',"       <form class=\"tau-control-set tau-fieldset <%= ((this.entityTypes[i].active? 'tau-active':'') + ' ' + type.entityType.name )%>\" data-type=\"<%=type.entityType.name%>\">","           <% for (var j = 0; j < items.length; j++) { %>","               <% var field = items[j]; %>","               <% var fieldTemplate = fn.fieldTemplate(field.type); %>","               <% var fieldModel = {name: name, type: type, field: field, mainEntity: this.mainEntity, entityNumber: j, ","                   items: items, constants: this.constants}; %>",'               <%= fn.sub("board.cell.item.quick.add.field." + fieldTemplate, fieldModel) %>',"            <% } %>",'            <div class="tau-field">','                <button tabindex="0" type="submit" class="tau-btn tau-add-item tau-success i-role-add">Add</button>','                <% if (name != "Time" && !isRelatedAdd) { %>','                <button tabindex="0" type="button" class="tau-btn tau-add-item tau-success i-role-add-open">Add &amp; Open</button>',"                <% } %>","                <% if (isRelatedAdd) { %>",'                <button tabindex="0" type="button" class="tau-btn i-role-cancel">Cancel</button>',"                <% } %>","            </div>","        </form>","        </div>","        <%}%>",'       <div class="tau-message-pool"></div>',"    </div>","    <%}%>","</div>"]};return t.register(a)});
define('tau/components/component.board.cell.quick.add',["tau/components/component.creator","tau/models/board.cell.quick.add/model.board.cell.quick.add","tau/ui/extensions/board.cell.quick.add/ui.extension.board.cell.quick.add","tau/ui/extensions/finder.entity/ui.extension.finder.entity.embedder","tau/components/extensions/bubble/extension.bubble.creator","tau/components/extensions/component.creator.extension","tau/ui/extensions/container/ui.extension.container.childrenEvents","tau/components/extensions/error/extension.errorBar","tau/views/view.compositeControl","tau/ui/templates/board.cell.quick.add/ui.template.board.cell.quick.add"],function(e,n,t,o,i,a,r,u,d,s){return{create:function(c){var l=[c.QuickAddModel||n,t,o,i,a,r,u];c.extensions&&(l=_.union(l,c.extensions));var b={ViewType:d,name:"board cell quick add",extensions:l,template:s};return c["queue.bus"]=!0,c.dependencies=["finder.entity"],e.create(b,c)}}});
define('tau/utils/utils.sampleData',[],function(){return{buildConfirmationString:function(e){for(var n=e.ProjectNames||e.projectNames,r=e.UserNames||e.userNames,t="Sample Projects and Users will be deleted.\n\nProjects: ",s=0;s<n.length;s++)t+=n[s],s<n.length-1&&(t+=", ");t+=".\nUsers: ";for(var s=0;s<r.length;s++)t+=r[s],s<r.length-1&&(t+=", ");return t+=".\n\nDelete this data?"}}});
define('tau/components/clear.sample.data/model.clean.sample.data',["Underscore","tau/core/extension.base","tau/utils/utils.sampleData"],function(e,t,i){return t.extend({"bus beforeInit":function(e,t){this._getConfigurator(t).getSampleDataService().sampleData().done(function(e){e.isVisible=!e.isEmpty&&this._getConfigurator(t).getLoggedUser().isAdministrator,this.fire("dataBind",e)}.bind(this))},"bus beforeInit + afterRender":function(e,t,a){var n=$(a.element),r=n.find(".i-role-clear_sample_data");r.length>0&&r.click(function(){{var e=a.data;n.find(".i-role-loader")}if(confirm(i.buildConfirmationString(e))){n.addClass("active");var o=t.config.context.configurator.service("errorBar");this._getConfigurator(t).getSampleDataService().clearSampleData(e).done(function(){o.fire("notification",{message:"Sample data was cleared successfully"}),r.hide()}).fail(function(e){o.fire("error",{message:e.statusText})}).always(function(){n.removeClass("active")})}}.bind(this))},_getConfigurator:function(e){return e.config.context.configurator}})});
define('tau/components/clear.sample.data/template.clear.sample.data',["Underscore","tau/core/templates-factory"],function(a,e){var i={name:"clear.sample.data",engine:"jqote2",markup:['<div class="link-clear-simple-date">',"<% if (this.isVisible) {%>",'<a class="i-role-clear_sample_data">Clear sample data</a><span class="tau-icon-general tau-icon-loading-white i-role-loader"></span>',"<% }%>","</div>"]};return e.register(i)});
define('tau/components/component.board.clear.sample.data',["tau/components/component.creator","tau/components/clear.sample.data/model.clean.sample.data","tau/components/clear.sample.data/template.clear.sample.data"],function(e,a,t){return{create:function(n){var c={queuedBus:!0,extensions:[a],template:t};return e.create(c,n)}}});
define('tau/models/board.clipboard/model.board.clipboard.main',["Underscore","tau/core/extension.base"],function(e,i){var t=i.extend({"bus initialize":function(e,i){var t=this,n=i,a=this._extractOptions(n,{refreshTimeout:null,settingsFieldName:"board_clipboard_collapse_state"}),r=n.context.configurator;t.fire("options.ready",a),t.fire("configurator.ready",r)},"bus boardSettings.ready":function(e,i){var t=i.boardSettings,n=this;t.get({fields:["viewMode"],callback:function(e){n.fire("viewMode.ready",e.viewMode),n.fire("viewMode.ready.fromInit",e.viewMode)}}),t.unbind({listener:this}),t.bind({listener:this,fields:["viewMode"],callback:function(e){n.fire("viewMode.ready",e.viewMode),n.fire("viewMode.ready.fromBind",e.viewMode)}})},"bus afterRender":function(e,i){this.fire("$el.ready",i.element)},"bus options.ready + configurator.ready":function(i,t,n){var a=n.getSettingsManager(),r=t.settingsFieldName;a.get({fields:[r],callback:e.bind(function(e){this.fire("collapseState.updated",e[r])},this)}),a.unbind({listener:this}),a.bind({fields:[r],listener:this,callback:e.bind(function(e){this.fire("collapseState.updated",e[r])},this)})},"bus options.ready:last + configurator.ready:last + collapseState.set":function(e,i,t,n){var a=t.getSettingsManager(),r=i.settingsFieldName,s={};s[r]=n?"expanded":"collapsed",a.set({set:s,callback:function(){}})}});return t});
define('tau/utils/utils.serverErrorTranslator',["Underscore","jQuery"],function(e,r){function t(e,t,n){var o=r("<span>"+t.join(" ")+"</span>");if(e.loggedUser.isAdministrator){var s=e.getTp2Service();o.on("click","a",function(){s.showPopupToChangeProcessWorkflow(e,r(this),n.EntityType,n.Process.Id)})}return o}var n=[{name:"StateIsNotAllowedByWorkflowException",isMatch:function(r){return/BadRequestException$/i.test(r.Type)&&(e.isObject(r.Error)&&/StateIsNotAllowedByWorkflowException/i.test(r.Error.Type)||e.isObject(r.InnerException)&&/StateIsNotAllowedByWorkflowException/i.test(r.InnerException.Type))},buildError:function(e){var r=this.config.context.configurator,n=e.InnerException||e.Error,o=n.Details,s=["Possible transitions are:",o.StateName,"&rarr;",o.NextStates.join(", ")+"."];r.loggedUser.isAdministrator&&s.push("You can edit the workflow for",'<a href="#">'+o.Process.Name+"</a> process.");var i=t(r,s,o);return{message:e.Message,details:i}}},{name:"NotWellFormedLangExpressionException",isMatch:function(r){return/BadRequestException$/i.test(r.Type)&&(e.isObject(r.Error)&&/NotWellFormedLangExpressionException$/i.test(r.Error.Type)||e.isObject(r.InnerException)&&/NotWellFormedLangExpressionException$/i.test(r.InnerException.Type))},buildError:function(e){var r=e.InnerException||e.Error,t=r.Details,n=e.Message,o=t.Message;return{message:n,details:o}}},{name:"General HttpException",isMatch:function(r){return/\.HttpException$/i.test(r.Type)&&(e.isObject(r.InnerException)&&r.InnerException.Message||e.isObject(r.Error)&&r.Error.Message)},buildError:function(e){var r=e.InnerException||e.Error;return{message:e.Message,details:r.Message}}},{name:"NoStatesDefinedInProcessException",isMatch:function(r){return/BadRequestException$/i.test(r.Type)&&(e.isObject(r.InnerException)&&/NoStatesDefinedInProcessException/i.test(r.InnerException.Type)||e.isObject(r.Error)&&/NoStatesDefinedInProcessException/i.test(r.Error.Type))},buildError:function(e){var r=this.config.context.configurator,n=e.InnerException||e.Error,o=n.Details,s=[];r.loggedUser.isAdministrator&&s.push("You can add",o.StateDescription,"manually to the",o.EntityName,"workflow.","Edit the workflow for",'<a href="#">'+o.Process.Name+"</a> process.");var i=t(r,s,o);return{message:e.Message,details:i}}},{name:"HttpError",isMatch:function(r){return r.data?e.has(r.data,"response"):!1},buildError:function(e){return o.buildError(e.data.response)}}],o={name:"default",buildError:function(r){if(!r)return{};var t=r.message||"Looks like application is not available. Please check your connection or server availability";t=e.isObject(r)&&e.isString(r.Message)?r.Message:t;var n=e.isObject(r.InnerException)&&e.isString(r.InnerException.Details)?r.InnerException.Details:e.isObject(r.Error)&&e.isString(r.Error.Details)?r.Error.Details:void 0;return{message:t,details:n}}};return{translateServerError:function(r){var t=e.find(n,function(e){return e.isMatch(r)})||o;return t.buildError.call(this,r)},translateXhrError:function(e){var t;try{t=r.parseJSON(e.responseText)}catch(n){t={message:e.statusText}}return this.translateServerError(t)}}});
define('tau/models/board.customize.units/const.entity.types',["Underscore","tau/models/board.customize.units/const.entity.types.names"],function(s,t){var e=function(){this.entity={},this[t.GENERAL]={base:"entity"},this.assignable={base:t.GENERAL},this[t.US]={base:"assignable"},this[t.BUG]={base:"assignable"},this[t.FEATURE]={base:"assignable"},this[t.TASK]={base:"assignable"},this[t.REQUEST]={base:"assignable"},this[t.TEST_CASE]={base:t.GENERAL},this[t.TEST_CASE_RUN]={base:"entity"},this[t.IMPEDIMENT]={base:t.GENERAL},this[t.ASSIGNED_USER]={base:"entity"},this[t.USER]={base:"entity"},this[t.PROJECT]={base:t.GENERAL},this[t.TEAM]={base:t.GENERAL},this[t.ITERATION]={base:t.GENERAL},this[t.TEAM_ITERATION]={base:t.GENERAL},this[t.RELEASE]={base:t.GENERAL},this[t.TEST_PLAN]={base:"assignable"},this[t.TEST_PLAN_RUN]={base:"assignable"},this[t.BUILD]={base:t.GENERAL},this[t.PROJECT_MEMBER]={base:"entity"},this[t.INBOUND_RELATIONS]={base:t.GENERAL},this[t.OUTBOUND_RELATIONS]={base:t.GENERAL}};return e.prototype.isAssignable=function(s){return s&&this[s]&&("assignable"==s||this.isAssignable(this[s].base))},e.prototype.isGeneral=function(s){return s&&this[s]&&(s==t.GENERAL||this.isGeneral(this[s].base))},e.prototype.getParents=function(s){return s&&this[s]?this.getParents(this[s].base).concat([s]):[]},new e});
define('tau/models/board.customize.units/board.customize.cards.builderSelector',["Underscore","tau/core/class","tau/models/board.customize.units/const.entity.types","tau/models/board.customize.units/const.entity.types.names"],function(t,e,a,r){return e.extend({defaultSettings:{entity:"id",general:"name, type:entityType.name, projectId:project.id",user:'fullName as name,type:"user",avatarUri',assigneduser:'fullName as name,type:"user",avatarUri',project:"color",assignable:"entityState.isFinal, teamId:team.id",team:"icon",testcaserun:'name,type:"testcaserun"',impediment:"entityState.isFinal",projectmember:['type:"projectmember"',"name:user.fullName","avatarUri:user.avatarUri","color:project.color","project:{project.abbreviation,project.name}","projectId:project.id"].join(",")},createItemData:function(t,e){var a=e.unit.getModelByTypeAndSize(t);return e.unit.id+":{"+a+"}"},build:function(e,a){var r=this.createItemData.bind(this,e),n=t.flatten([this.cardsSettings[e]||'cardData:""',t.chain(a).flatten().map(r).compact().value()],!1);return"{"+t.compact(n).join(",")+"}"},init:function(){this.cardsSettings=this.generateCardsData()},generateCardsData:function(){return t.chain(r).map(function(e){var r=a.getParents(e),n=t.reduce(r,function(e,a){var r=this.defaultSettings[a];return r?t.compact([e,r]).join(","):e}.bind(this),"");return n?(n="cardData:{"+n+"}",n=t.extend(n,{type:e})):n='cardData:""',[e,n]}.bind(this)).object().value()},parseSelector:function(t){var e,a=0,r=t.indexOf("cardData:"),n="";if(-1!==r){for(var i=r,c=t.length;c>i;i++)if("{"==t[i])a+=1;else if("}"==t[i]&&(a-=1,0===a)){e=i+1;break}n=t.substring(r,e)}return t=t.replace(n,""),t=t.replace("{,","{"),{cardData:n,withoutCardData:t}},buildSelectorWithoutCardData:function(t){return this.parseSelector(t).withoutCardData}})});
define('tau/models/board.customize.units/board.customize.units.settings.default.clipboard',[],function(){"use strict";return{get:function(e){var a=[[{id:"entity_name_small_sizes",alignment:"base"}]],n={team:[[{id:"team_project_name_long",alignment:"base"}],[{id:"team_team",alignment:"base"}]],project:[[{id:"team_project_name_long",alignment:"base"}],[{id:"project_project_icon",alignment:"base"}]],user:[[{id:"user_avatar",alignment:"base"}],[{id:"user_name",alignment:"base"}]],projectmember:[[{id:"user_avatar",alignment:"base"},{id:"user_name",alignment:"base"}],[{id:"project_long",alignment:"base"}]]};return n[e]||a}}});
define('tau/models/board.clipboard/model.board.clipboard.data',["Underscore","tau/core/extension.base","tau/utils/utils.serverErrorTranslator","tau/models/board.customize.units/board.customize.cards.builderSelector","tau/services/customize/service.customize.card.layout.factory","tau/models/board.customize.units/const.card.sizes","tau/models/board.customize.units/board.customize.units.settings.default.clipboard"],function(t,e,a,r,n,i,o){var s=e.extend({"bus configurator.ready:last + options.ready:last + afterInit":function(e,a){var r=a.getClipboardManager();r.getAll(t.bind(function(t,e){this.fire("cards.get",e)},this)),a.getSliceFactory().create({}).space().done(function(t){this.fire("dataSpace",t.data)}.bind(this))},_convertDataForUnits:function(t){t=t||{};var e=t.project||{},a=t.name||"",r=a.split(" "),n=r.shift();return{entity_name_small_sizes:{name:a},team_project_name_long:{name:a},team_team:{icon:t.icon},user_avatar:{avatarUri:t.avatarUri},project_long:{project:{name:e.name,color:t.color}},project_project_icon:{color:t.color},user_name:{firstName:n,lastName:r.join(" ")}}},"bus configurator.ready:last + options.ready:last + cards.ready":function(e,a,r,n){var i=a.getClipboardManager();i.unbind(this);var o=t.bind(function(e,r){var i=!1;if(n.length===r.length){var o=t.map(n,function(t){return t.dataItem.id}),s=t.map(r,function(t){return t.id}),d=t.difference(s,o);i=d.length}else i=!0;i&&this._getLayouts(r,a).done(function(e){r=t.map(r,function(r){return t.extend(r.data,this._convertDataForUnits(r.data.cardData)),this._convertDataForTemplate(r,a,e,r._id,r.isSelected)},this),this.fire("cards.ready",r)}.bind(this)),this.fire("cards.changed")},this);r.refreshTimeout&&(o=t.debounce(o,r.refreshTimeout)),i.bind(this,o)},"bus configurator.ready:last + cards.get":function(e,a,r){var n=r.length;this._loadCardsData(a,r).always(function(e){n!=e.length&&a.getClipboardManager().set(t.map(e,function(t){return t.dataItem.data.type=t.dataItem.type.toLowerCase(),t.dataItem})),this.fire("cards.ready",e),this.fire("dataBind",{cards:e})}.bind(this))},"bus configurator.ready:last + cards.readyToClear":function(e,a,r){var n=a.getClipboardManager(),i=[];t.forEach(r,function(t){i.push({id:t.id,data:{id:t.entityId,type:t.entityType}})}),n.remove(i,function(){})},"bus configurator.ready:last + cards.update":function(e,a,r){var n=a.getClipboardManager(),i=t.map(r,function(t){return{id:t.id,isSelected:t.isSelected,data:{cardData:t.cardData,id:t.entityId,type:t.entityType}}});n.update(i,function(){})},"bus configurator.ready:last + cards.readyToRemove":function(e,r,n){var i=r.getClipboardManager(),o=r.getStore(),s=this,d=[];t.forEach(n,function(e){d.push(t.bind(function(t,e){o.remove(t.entityType,{id:t.entityId}).done({success:function(){e(!1,{item:t,error:!1})},failure:function(r){var n=r[0].data,i=404!==n.status,o=i?a.translateServerError(n.response):!1;e(!1,{item:t,error:o})}})},s,e))}),t.parallel(d,function(e,a){var r=[],n=[],o=[];t.forEach(a,function(t){if(t.error)n.push(t.item),s.fire("error",t.error);else{var e=t.item;r.push(t.item),o.push({id:e.id,data:{id:e.entityId,type:e.entityType}})}}),i.remove(o,function(){}),s.fire("cards.readyToRemove.after",{success:r,failure:n})})},_getLayouts:function(e,a){var s=t.groupByComplex(e,function(t){return t.data.type.toLowerCase()}),d=t.reduce(s,function(t,e){var a=e.key;return t.cells.types.push(a),t.cardSettings[a]={},t.cardSettings[a][i.L]=o.get(a),t},{cells:{types:[]},cardSettings:{}}),c=new r,u=new n(a,{get:function(){return $.Deferred().resolve(d)}});return u.getCardLayoutsByTypesAndSize(d.cells.types,i.L).then(function(e){return t.reduce(e,function(t,e,a){return t.types.push({type:a,data:c.build(a,e)}),t.mapLayouts[a]=e,t},{types:[],mapLayouts:{}})})},_convertDataForTemplate:function(t,e,a,r,n){t.type=t.type||t.data.type,t._id=r,t.data.cardData=t.data.cardData||{type:t.type};var i=t.type;return{dataItem:t,isSelected:n,configurator:e,layout:a.mapLayouts[i.toLowerCase()]}},getCardsDataByType:function(e,a){var r=t.map(e,function(t){return t.data.id}),n=t.reduce(e,function(t,e){return t[e.data.id]={_id:e._id,isSelected:e.isSelected},t},{}),i={cells:{}};return this._getLayouts(e,a).then(function(e){i.cells.types=e.types;var o={base64:!0,definition:i},s=a.getSliceFactory().create(o),d={$set:{CardsIds:r}};return s.cardDetails(d).then(function(r){return t.map(r.data.items,function(t){return this._convertDataForTemplate(t,a,e,n[t.data.cardData.id]._id,n[t.data.cardData.id].isSelected)},this)}.bind(this),function(){return[]})}.bind(this))},_loadCardsData:function(e,a){var r=t.groupByComplex(a,function(t){return t.data.type.toLowerCase()}),n=t.map(r,function(t){return this.getCardsDataByType(t.items,e)},this);return $.when.all(n).then(function(e){return t.flatten(e)},function(){return[]})}});return s});
define('tau/ui/templates/board.plus/customized/ui.template.boardplus.default.card.customized',["Underscore","tau/core/templates-factory","tau/ui/extensions/board.plus/ui.board.plus.cards-custom-functions","tau/ui/templates/board.plus/customized/ui.template.boardplus.card.section.customized"],function(t,a,e){var r={engine:"jqote2",customFunctions:e,name:"board.plus.default.card.customized",markup:["<%var data = this.dataItem.data, configurator = this.configurator;%>",'<div role="card" class="i-role-card i-role-<%=this.dataItem.id%> tau-card-v2 <% if(this.isSelected){%>tau-selected<%}%> tau-card-v2_type_<%=this.dataItem.type.toLowerCase()%> <%=fn.generateFinalStateClass(this.dataItem.data.cardData) %>"','  id="<%= fn.generateCardId(data.cardData) %>" ',"  <%= fn.generateDataAttributes(this.dataItem) %>",">","<% _.forEach(this.layout, function(section){%>",'   <%= fn.sub("boardplus.card.section.customized", [{section: section, data: data, configurator: configurator}]) %>',"<%});%>","</div>"]};return a.register(r)});
define('tau/ui/extensions/board.clipboard/ui.board.clipboard.helper',["Underscore","jQuery"],function(t,e){return{CLASS_MAP:{CARD_SELECTED:"tau-selected",CARD_COUNTER:"tau-selection-counter",ROLE_CARD:"i-role-card",ROLE_ACTION_CLEAR:"i-role-action-clear",ROLE_TOGGLE_ACTIONS:"i-role-toggle-actions",ROLE_COUNTER_BLOCK:"i-role-counter-block",ROLE_COLLAPSER:"i-role-collapser"},getCardsData:function(n){return t.map(n,function(t){var n=e(t),o=n.data();return o.isSelected=n.hasClass(this.CLASS_MAP.CARD_SELECTED),o}.bind(this))},getAllCards:function(t){return this.getHolderCard(t).find("."+this.CLASS_MAP.ROLE_CARD)},getHolderCard:function(t){return t.find("[role=holder]")},updateCounter:function(t,e){e=e||this.getSelectedCards(t).length;var n=t.find("."+this.CLASS_MAP.CARD_COUNTER);n.toggleClass("tau-selected",!!e),n.text(e),e?this.appendClearButton(t):this.removeClearButton(t)},removeClearButton:function(t){return this.getCounterBlock(t).find("."+this.CLASS_MAP.ROLE_ACTION_CLEAR).remove()},appendClearButton:function(t){var n=this.getCounterBlock(t),o=n.find("."+this.CLASS_MAP.ROLE_ACTION_CLEAR);return o.length||(o=e('<button class="tau-btn tau-btn-small tau-clear-selection '+this.CLASS_MAP.ROLE_ACTION_CLEAR+'"></button>').appendTo(n)),o},getActionsButton:function(t){return t.find("."+this.CLASS_MAP.ROLE_TOGGLE_ACTIONS)},toggleActionsButton:function(t,e){return this.getActionsButton(t).toggleClass("tau-boardclipboard__toggle-button_enabled",!!e)},getCounterBlock:function(t){return t.find("."+this.CLASS_MAP.ROLE_COUNTER_BLOCK)},getSelectedCards:function(t){return this.getHolderCard(t).find("."+this.CLASS_MAP.CARD_SELECTED)},getCollapseButton:function(t){return t.find("."+this.CLASS_MAP.ROLE_COLLAPSER)},animateWithClass:function(e,n){e.removeClass(n).addClass(n);var o=parseFloat(e.css("MozAnimationDuration")||e.css("WebkitAnimationDuration")||1),i=parseFloat(e.css("MozAnimationIterationCount")||e.css("WebkitAnimationIterationCount")||1),r=o*i*1e3;t.delay(t.bind(function(){this.removeClass(n)},e),r)}}});
define('tau/ui/extensions/board.clipboard/ui.extension.board.clipboard.output',["Underscore","jQuery","tau/core/extension.base","tau/ui/templates/board.plus/customized/ui.template.boardplus.default.card.customized","tau/ui/extensions/board.clipboard/ui.board.clipboard.helper"],function(e,a,t,l,d){return t.extend({"bus $el.ready:last+viewMode.ready":function(e,a,t){a.toggleClass("tau-boardclipboard_enable_true","list"!=t&&"newlist"!=t&&"timeline"!=t),this.fire("$el.readyToLayout",a)},"bus $el.ready:last + $selectable.ready:last + configurator.ready:last + cards.ready":function(t,o,r,s,u){var n=d.getAllCards(o),i=a();0===u.length?n.detach():(e.forEach(u,function(a){var t=n.filter("[data-_id="+a.dataItem._id+"]");t.length?n=n.not(t.eq(0)):(a.isSelected=!0,t=l.render(a),t.attr("id",e.uniqueId("clipboardcard_"))),t.length&&(i=i.add(t.eq(0)))}),n.detach(),i.appendTo(d.getHolderCard(o)));var c=d.getSelectedCards(o),p=c.length;d.updateCounter(o,p),d.toggleActionsButton(o,p),r.tauSelectable("select",c),this.fire("count.updated",i.length)},"bus $el.ready:last + cards.changed":function(e,a){var t=d.getSelectedCards(a);this.update(a,t)},"bus $el.ready:last + cards.drag.stopped":function(e,a,t){this.update(a,t)},update:function(e,a){var t=a.length;d.updateCounter(e,t),d.toggleActionsButton(e,t)},"bus $el.ready:last + count.updated:last + collapseState.updated:last":function(e,a,t,l){var o="collapsed"==l;d.getCollapseButton(a).toggleClass("tau-collapsed",o),a.toggleClass("tau-boardclipboard_empty_true",0===t||o),this.fire("$el.readyToLayout",a)},"bus view.dom.ready":function(e,a){var t=a.element.find(".tau-app-main-pane");this.fire("$layout.ready",t)},"bus $layout.ready:last + $el.readyToLayout":function(e,a,t){var l=t.hasClass("tau-boardclipboard_enable_true"),d=t.hasClass("tau-boardclipboard_empty_true");a.toggleClass("tau-layout-board_south-visible_true",l),a.toggleClass("tau-layout-board_south-visible_false",!l),a.toggleClass("tau-layout-board_south-expanded_false",d),a.toggleClass("tau-layout-board_south-expanded_true",!d)}})});
define('tau/components/component.factory',["Underscore","tau/core/class","tau/components/component.creator"],function(e,t,n){var r=t.extend({createAsChild:function(e,t){var n=this.create(t);return e.on("destroy",function(){n.destroy()}),n},getCreatorConfig:function(){throw"SHOULD BE OVERRIDDEN"},create:function(e){e["queue.bus"]=!0;var t=this.getCreatorConfig(e);return n.create(t,e)}});return r.define=function(e){var t=r.extend({getCreatorConfig:e});return new t},r});
define('tau/models/print.cards/model.print.cards',["Underscore","jQuery","tau/core/extension.base","tau/models/board.customize.units/board.customize.cards.builderSelector","tau/services/customize/service.customize.card.layout.factory","tau/models/board.customize.units/const.card.sizes"],function(t,e,n,r,a,u){return n.extend({"bus boardSettings.ready:last + configurator.ready:last + currentCards":function(n,r,a,u){var s=t.chain(u).map(function(t){return t.cards}).flatten().value(),i=t.groupByComplex(s,function(t){return t.type.toLowerCase()}),o=t.map(i,function(t){return this._getCardsDataByType(t.items,a,r.boardSettings)},this);e.when.all(o).then(function(e){return t.flatten(e)},function(){return[]}).then(function(e){var n=t.reduce(e,function(t,e){return t[e.dataItem.data.cardData.id]=e,t},{}),r=t.map(u,function(e){return{name:e.name,cards:t.map(e.cards,function(t){return n[t.id]})}});this.fire("renderCards",r)}.bind(this))},_getLayouts:function(e,n,s){var i=t.groupByComplex(e,function(t){return t.type.toLowerCase()}),o=t.reduce(i,function(t,e){var n=e.key;return t.cells.types.push(n),t},{cells:{types:[]},cardSettings:{}}),c=new r,d=new a(n,s);return d.getCardLayoutsByTypesAndSize(o.cells.types,u.L).then(function(e){return t.reduce(e,function(t,e,n){return t.types.push({type:n,data:c.build(n,e)}),t.mapLayouts[n]=e,t},{types:[],mapLayouts:{}})})},_getCardsDataByType:function(e,n,r){var a=t.map(e,function(t){return t.id}),u={cells:{}};return this._getLayouts(e,n,r).then(function(e){u.cells.types=e.types;var r={base64:!0,definition:u},s=n.getSliceFactory().create(r),i={$set:{CardsIds:a}};return s.cardDetails(i).then(function(r){return t.map(r.data.items,function(t){return{dataItem:t,configurator:n,layout:e.mapLayouts[t.type.toLowerCase()]}})}.bind(this),function(){return[]})}.bind(this))},"bus beforeInit":function(){this.fire("dataBind")}})});
define('tau/ui/templates/print.cards/ui.template.print.cards',["tau/core/templates-factory","tau/ui/templates/board.plus/customized/ui.template.boardplus.default.card.customized"],function(a){var r={engine:"jqote2",name:"print.cards",markup:["<%_.each(this,function(group){%>",'<h2 class="title-cards-for-print"><%!group.name%></h2>','<div class="tau-ui-size-l">',"<%_.each(group.cards,function(card){%>",'<div class="wrap-cards-for-print"><%=fn.sub("board.plus.default.card.customized",card)%></div>',"<%});%>","</div>","<%});%>"]};return a.register(r)});
define('tau/ui/extensions/print.cards/ui.extension.print.cards',["Underscore","jQuery","tau/core/extension.base","tau/ui/templates/print.cards/ui.template.print.cards","tau/core/tau"],function(t,r,i,e){return i.extend({"bus afterRender":function(t,i){i.element.on("click",".i-role-print-trigger",function(t){r(t.currentTarget).prop("disabled",!0),this.fire("getCardsData")}.bind(this))},clearPrintBlock:function(){this.$printBlock&&(this.$printBlock.remove(),r("body").css({overflow:""}))},"bus clearPrintBlock":function(){this.clearPrintBlock()},"bus destroy":function(){this.clearPrintBlock(),this._super()},"bus configurator.ready:last + renderCards + afterRender:last":function(i,n,o,d){d.element.find(".i-role-print-trigger").prop("disabled",!1);var a=r(".i-print-card");0===a.length&&(a=r('<div  class="i-print-card print-block-cards"/>').appendTo("body"),r("body").css({overflow:"hidden"})),this.$printBlock=a;var c=e.render(o);a.removeClass("print-block-cards_hide").html(c);var s=c.find(".i-role-card"),l=t.reduce(s,function(t,i){var e=r(i).height(),n=r(i).width();return t.height=e>t.height?e:t.height,t.width=e>t.width?n:t.width,t},{width:0,height:0}),h=1.92,p={width:l.width*h,height:l.height*h+35};c.find(".wrap-cards-for-print").css(p),r(window).on("afterprint",function(){this.clearPrintBlock()}.bind(this)),window.print(),window.stop&&(location.reload(),window.stop()),a.addClass("print-block-cards_hide")}})});
define('tau/core/extension.configurator',["Underscore","tau/core/extension.base"],function(e,n){return n.extend({"bus beforeInit":function(e,n){var r=n.config.context.configurator;this.fire("configurator.ready",r)}})});
define('tau/components/component.print.cards',["tau/components/component.factory","tau/models/print.cards/model.print.cards","tau/ui/extensions/print.cards/ui.extension.print.cards","tau/core/extension.configurator"],function(n,t,a,e){return n.define(function(n){var r={name:"printCards",extensions:[t,a,e].concat(n.extensions||[]),template:{engine:"jqote2",name:"printCardsButton",markup:['<span class="tau-inline-group tau-board-print">','<button class="tau-btn tau-print i-role-print-trigger">','<span class="tau-icon-general tau-icon-loading"></span>Print cards',"</button>","</span>"]}};return r})});
define('tau/ui/extensions/board.clipboard/ui.extension.board.clipboard.print',["Underscore","jQuery","tau/core/extension.base","tau/components/component.print.cards"],function(n,t,e,i){return e.extend({init:function(n){this._super(n),this.printComponent=i.createAsChild(this,{}),this.printComponent.initialize()},"bus boardSettings.ready":function(n,t){this.printComponent.fire("boardSettings.ready",t)},"bus printCards":function(n,t){this.printComponent.once("renderCards",function(){t.$button.removeClass("ui-state-disabled")}),this.printComponent.fire("currentCards",[{name:"",cards:t.cards}])},"bus clearPrintBlock":function(){this.printComponent.fire("clearPrintBlock")}})});
define('tau/ui/extensions/board.clipboard/ui.extension.board.clipboard.actions',["Underscore","jQuery","tau/core/extension.base","tau/ui/extensions/board.clipboard/ui.board.clipboard.helper"],function(t,e,a,n){return a.extend({"bus $el.ready + $selectable.ready + dataSpace":function(t,e,a,n){this.addHandlerClearClipboard(e),this.addHandlerMenuAction(e,a,n),this.addHandlerAfterRemove(e),this.addHandlerCollapse(e)},addHandlerCollapse:function(e){var a=n.getCollapseButton(e);a.on("click",t.bind(function(){this.fire("collapseState.set",a.hasClass("tau-collapsed"))},this))},addHandlerClearClipboard:function(t){var e=this;t.on("click","."+n.CLASS_MAP.ROLE_ACTION_CLEAR,function(){var a=n.getSelectedCards(t),i=n.getCardsData(a);e.fire("cards.readyToClear",i)}.bind(this))},addHandlerAfterRemove:function(a){this.on("cards.readyToRemove.after",function(i,r){var o=r.failure,d=a.find(".i-role-card"),c=t.reduce(o,function(t,e){return t.add(d.filter("[data-_id="+e._id+"]")),t},e());n.animateWithClass(c,"tau-card_failed")})},addHandlerMenuAction:function(t,e,a){var i=t.find(".clipboard__actions-list"),r=n.getActionsButton(t);r.tauBubble({onPositionConfig:function(t){return t.my="right top+2",t.at="right bottom",t},template:i,zIndex:999,onShow:function(){var e=i.find('[data-action="remove"] a'),a=i.find('[data-action="print"] a'),r=n.getSelectedCards(t).length,o=r+" card"+(r>1?"s":""),d="Delete "+o,c="Print "+o;e.text(d),a.html(c+'<span class="tau-icon-general tau-icon-loading"></span>'),i.focus()}}),i.menu({select:function(n,i){var o=i.item.data("action");this.handlersAction[o]&&this.handlersAction[o].call(this,i.item,t,r,e,a)}.bind(this)}),e.on("tauselectablechanged",function(){var e=n.getSelectedCards(t).length;n.toggleActionsButton(t,e)}),i.detach()},handlersAction:{remove:function(e,a,i,r,o){var d=t.bind(function(t){this.fire("cards.readyToRemove",t)},this);e.tauConfirm({onShow:function(r){var c=n.getSelectedCards(a),s=n.getCardsData(c),l=function(t,e){return e>1&&(t=t.replace(/y$/,"ie")+"s"),t},u=["project","team"],f=[],h=t.groupBy(s,function(t){return t.entityType});t.forEach(h,function(e,a){var n=t.find(o.cells.items,function(t){return t.id==a}).name,i=-1!==u.indexOf(a),r=e.length+" "+l(n,e.length);i&&(r='<span class="tau-clipboard__highlight-message">'+r+"</span>"),f.push(r)});var p="<h3>Are you sure you want to delete "+f.join(", ")+"?</h3>";r.find(".i-role-actioncancel").focus(),e.tauConfirm("option",{content:p,callbacks:{success:function(){d(s)},always:function(){i.tauBubble("hide")}}})},zIndex:130}),e.tauConfirm("show")},print:function(e,a,i){var r=n.getSelectedCards(a);e.addClass("ui-state-disabled"),i.one("taububblehide",function(){this.fire("clearPrintBlock")}.bind(this)),this.fire("printCards",{cards:t.pluck(n.getCardsData(r),"cardData"),$button:e})}}})});
define('tau/ui/extensions/board.clipboard/ui.extension.board.clipboard.selection',["jQuery","tau/core/extension.base","tau/ui/extensions/board.clipboard/ui.board.clipboard.helper"],function(e,t,l){return t.extend({"bus $el.ready":function(t,a){var s=l.getSelectedCards(a);a.pscroller(),a.tauSelectable({items:"."+l.CLASS_MAP.ROLE_CARD,className:l.CLASS_MAP.CARD_SELECTED,ctrl:!0,selectOnMouseup:!0,selectedItems:s,changed:function(){this.fire("cards.update",l.getCardsData(l.getAllCards(a)))}.bind(this)}),a.rselect({trigger:".tau-boardclipboard__toolbar, .tau-select-block, .tau-boardclipboard__holder",selectionClass:l.CLASS_MAP.CARD_SELECTED,selectable:"."+l.CLASS_MAP.ROLE_CARD,show:function(){e(this).pscroller("enable")},end:function(t,l){e(this).pscroller("disable"),a.tauSelectable("unselect",l.deselection),a.tauSelectable("select",l.selection),a.tauSelectable("raiseChanged",l.selection,!0,!0)}}),l.updateCounter(a),l.toggleActionsButton(a,s.length),this.fire("$selectable.ready",a)}})});
define('tau/ui/extensions/board.clipboard/ui.extension.board.clipboard.dragndrop',["jQuery","tau/core/extension.base","tau/ui/extensions/board.plus/ui.board.plus.dom.utils"],function(e,r,t){return r.extend({"bus configurator.ready + $sortable.ready":function(e,r){r.getGlobalBus().removeAllListeners(this)},"bus configurator.ready:last + destroy":function(e,r){r.getGlobalBus().removeAllListeners(this)},"bus $el.ready + $selectable.ready":function(r,a,o){var l=this,s=a,i=a.parents("[role=main]:first");s.tauSortable({groups:".tau-boardclipboard__holder, .i-role-grid .i-role-cellholder",items:".i-role-card",appendTo:s,containment:i,addClasses:!1,useSelectable:o,connectedSortable:".i-role-grid",moveInGroup:!1,createPlaceholderContent:t.createDragNDropPlaceholderContent,processToGroup:function(e,r,t){var a=t;t.is(".i-role-cellholder")&&(a=t.children(".i-role-cell")),a.data("isempty",!0),e.appendTo(a);var o=a.children().length-1;o&&a.data("isempty",!1)}}),s.bind("tausortablestart",function(e,r){r.helper&&r.helper.find(".i-role-card").removeClass("i-role-card"),r.items.removeClass("i-role-card")}),s.bind("tausortablegroupentered",function(r,t){var a=t.group,o=a.parents(".i-role-grid"),l=o.length?o:s,i=e(t.item),n=i.data("ui-draggable");n.scrollParent=l,n.overflowOffset=l.offset()}),s.bind("tausortablestop",function(e,r){r.items.addClass("i-role-card"),o.tauSelectable("select",r.items),l.fire("cards.drag.stopped",r.items)}),l.fire("$sortable.ready",s)}})});
define('tau/ui/extensions/card.viewer.progress.indicators',["Underscore","jQuery","tau/core/class"],function(n,t,i){return i.extend({init:function(){this.containers=[]},show:function(n,t){n.tauProgressIndicator(),n.tauProgressIndicator("show",t),n.on("remove",this._removeContainer.bind(this,n)),this.containers.push(n)},_removeContainer:function(t){this.containers=n.without(this.containers,t)},hideAll:function(){n.each(this.containers,function(n){n.data("ui-tauProgressIndicator")&&n.tauProgressIndicator("hide")}),this.containers.length=0}})});
define('tau/ui/extensions/board.clipboard/ui.extension.board.clipboard.viewer',["Underscore","jQuery","tau/core/extension.base","tau/ui/extensions/card.viewer.progress.indicators"],function(e,t,i,r){return i.extend({init:function(e){this.progressIndicators=new r,this._super(e)},"bus configurator.ready":function(e,t){var i=this;t.getComponentBusRegistry().getByName("entityViewer").done(function(e){i.fire("viewerBus.ready",e)})},"bus viewerBus.ready + $el.ready + configurator.ready:last":function(i,r,a,n){r.on("application.error",e.bind(function(e){this.fire("view.cardDetails.lastResult",{type:"error",data:e.data})},this)),r.on("application.contentRendered",e.bind(function(e){this.fire("view.cardDetails.lastResult",{type:"loaded",data:e.data})},this)),a.on("dblclick",".i-role-card",e.bind(function(e){var i=t(e.currentTarget),a=i.data();n.getBoardCacheService().setData(a.cardData),this.progressIndicators.show(i,{hover:!0}),r.fire("cardDataToShowSilent.ready",a)},this)),a.on("mousedown",".tau-id",function(e){e.stopPropagation()})},"bus view.cardDetails.lastResult":function(){this.progressIndicators.hideAll()}})});
define('tau/ui/templates/board.clipboard/ui.template.board.clipboard',["tau/ui/templates/board.plus/customized/ui.template.boardplus.default.card.customized"],function(){var a={name:"board.clipboard",engine:"jqote2",markup:['<div class="tau-boardclipboard',"<% if (this.cards.length == 0) { %> tau-boardclipboard_empty_true<% } %>"," tau-ui-size-clipboard i-view_grid",'">','<div class="tau-boardclipboard__toolbar">','<div class="tau-select-block">','<button class="tau-v-collapser i-role-collapser" role="collapser"></button>','<span class="tau-boardclipboard-title">Selected cards</span>','<div class="tau-inline-group tau-selection-group i-role-counter-block">','<button class="tau-btn tau-btn-small tau-selection-counter">0</button>','<button class="tau-btn tau-btn-small tau-clear-selection i-role-action-clear"></button>',"</div>","</div>",'<div class="tau-actions-block">','<button class="tau-btn tau-attention tau-boardclipboard__toggle-button i-role-toggle-actions">Actions</button>','<ul tabindex="-1" class="clipboard__actions-list">','<li class="clipboard__actions-item" data-action="remove"><a class="clipboard__action clipboard__action_delete">Delete</a></li>','<li class="clipboard__actions-item" data-action="print"><a class="clipboard__action clipboard__action_print">Print</a></li>',"</ul>","</div>","</div>",'<div role="holder" class="tau-boardclipboard__holder i-role-cell i-role-clipboard-holder" id="clipboard_holder_<%= _.uniqueId() %>" >','<%= fn.sub("board.plus.default.card.customized", this.cards) %>',"</div>","</div>"]};return a});
define('tau/components/component.board.clipboard',["Underscore","tau/components/component.creator","tau/models/board.clipboard/model.board.clipboard.main","tau/models/board.clipboard/model.board.clipboard.data","tau/ui/extensions/board.clipboard/ui.extension.board.clipboard.output","tau/ui/extensions/board.clipboard/ui.extension.board.clipboard.print","tau/ui/extensions/board.clipboard/ui.extension.board.clipboard.actions","tau/ui/extensions/board.clipboard/ui.extension.board.clipboard.selection","tau/ui/extensions/board.clipboard/ui.extension.board.clipboard.dragndrop","tau/ui/extensions/board.clipboard/ui.extension.board.clipboard.viewer","tau/components/extensions/error/extension.errorBar","tau/ui/templates/board.clipboard/ui.template.board.clipboard"],function(o,e,a,r,i,n,t,d,b,u,s,c){return{create:function(o){var p={extensions:[a,r,i,n,t,d,b,u,s],template:c};o["queue.bus"]=!0;var l=e.create(p,o);return l}}});
define('tau/ui/extensions/board.editor/ui.extension.board.clone',["Underscore","tau/core/extension.base.stateful"],function(e,t){return t.extend({"bus boardSettings.ready:last + command.clone":function(e,t){var o=this,n=this.config.context.configurator,i=t.boardSettings,a=["cells","x","y","zoomLevel","viewMode","cardSettings","timelineSettings"];n.getBoardDefinitionFactory().cloneDefinition(i.settings.id,a).done(function(e){n.getBoardApiService().createBoard(e).done(function(t){e.id=t.data.key,o.navigateToCloned(n,e)})}.bind(this))},createTooltip:function(e,t){e.tauBubble({content:t,template:['<div class="tau-bubble-board">','<div class="tau-bubble-board__arrow"  role="arrow"></div>','<div class="tau-bubble-board__inner tau-container"  role="content"></div>',"</div>"].join(""),zIndex:999,className:"tau-bubble-tooltip",showEvent:"mouseenter",hideEvent:"mouseleave",mode:"tooltip",onPositionConfig:function(e){e.at="center top",e.my="center bottom"},onShow:function(){this.adjustPosition()}})},navigateToCloned:function(e,t){var o=e.getUrlBuilder().getRelativeBoardUrl(t.id);e.getRouting().redirect(o)}})});
define('tau/components/component.board.clone',["Underscore","tau/components/component.creator","tau/ui/extensions/board.editor/ui.extension.board.clone"],function(e,n,t){return{create:function(e){var o={extensions:[t],template:{engine:"jqote2",name:"cloneBoardButton",markup:['<span class="tau-inline-group tau-board-clone">','<button class="tau-btn tau-clone i-role-clone-trigger">Clone View</button>',"</span>"]}};e["queue.bus"]=!0;var r=n.create(o,e);return r.on("afterInit",function(e){e.sender.fire("dataBind",{})}),r.on("afterRender",function(e){var n=e.data.element;n.on("click",".i-role-clone-trigger",function(){e.sender.fire("command.clone")})}),r}}});
define('tau/models/model.board.collapser.aside',["Underscore","tau/core/model-base"],function(e,t){return t.extend({configFieldName:"collapser_aside_collapsed","bus afterInit":function(e){var t=e.data.config.context.configurator,n=t.getSettingsManager(),i=this.configFieldName;n.get({fields:[i]}).then(function(e){this.fire("dataBind",{isCollapsed:!!e[i]})}.bind(this))},"bus afterInit:last+collapser.switched":function(e,t){var n=t.config.context.configurator.getSettingsManager(),i=this.configFieldName;n.get({fields:[i]}).then(function(e){var t={};return t[i]=!e[i],n.set({set:t})})}})});
define('tau/ui/extensions/board.collapser.aside/ui.extension.board.collapser.aside',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,n,t){return t.extend({"bus afterRender":function(e){var t=e.data.element,o=this;t.delegate("[role=collapser]","click",function(){n(this).toggleClass("tau-collapsed"),o.fire("collapser.switched",{})})}})});
define('tau/ui/templates/board.collapser.aside/ui.template.board.collapser.aside',["tau/core/templates-factory","tau/nls/translator"],function(e,t){var a={name:"board.collapser.aside",engine:"jqote2",markup:['<div class="tau-pane-collapser">','<button type="button" role="collapser" data-title="'+t("Hide&nbsp;menu")+'" data-title-collapsed="'+t("Show&nbsp;menu")+'" class="tau-extension-board-tooltip tau-h-collapser<% if (this.isCollapsed){ %> tau-collapsed<% } %>">',"</button>","</div>"],dependencies:[]};return e.register(a)});
define('tau/components/component.board.collapser.aside',["Underscore","tau/components/component.creator","tau/models/model.board.collapser.aside","tau/ui/extensions/board.collapser.aside/ui.extension.board.collapser.aside","tau/ui/templates/board.collapser.aside/ui.template.board.collapser.aside"],function(e,a,o,t,r){return{create:function(e){var s={extensions:[t,o],template:r};return a.create(s,e)}}});
define('tau/ui/extensions/board.container/ui.extension.board.container.events',["Underscore","tau/components/extensions/component.extension.base"],function(e,n){return n.extend({"bus boardSettings.ready > refresh":function(e,n){this.fire("boardSettings.ready",n)},"bus boardSettings.ready > initialize":function(e,n){this.fire("boardSettings.ready",n)},"bus componentsCreated:last + boardSettings.ready":function(e,n,t){for(var r=0,o=n.length;o>r;r++){var i=n[r].component;i.fire("boardSettings.ready",t)}},"bus componentsCreated:last + view.dom.ready":function(e,n,t){for(var r=0,o=n.length;o>r;r++){var i=n[r].component;i.on("afterRender",function(){this.fire("view.dom.ready",t)},i),i.fire("view.dom.ready",t)}}})});
define('tau/views/view.board.container',["Underscore","jQuery","tau/views/view.container"],function(e,i,t){return t.extend({"bus initialize":function(){},"bus initialize+boardSettings.ready":function(i){this.startLifeCycle(e.values(i)[0],e.values(i)[1].data.boardSettings)},"bus append.child.element":function(){},"bus refresh":function(){this.destroyChildren(),this.startLifeCycle()},startLifeCycle:function(i,t){t=t||this.boardSettings;var n=this;n.setDefaultConfig(),e.extend(n.config,(i||{}).data),n.boardSettings=t;var r=n.config.children;n.children=[],n.fire("beforeInit",{config:n.config});var o=e.isArray(r)&&e.size(r)>0&&n.config.visible;if(o){var s=n.config.children,a=n.config.context||{};n.fire("createComponents",{components:s,context:a})}else n.completeInitializationWithoutChildren()}})});
define('tau/components/component.board.container',["Underscore","tau/components/component.container","tau/ui/extensions/board.container/ui.extension.board.container.events","tau/views/view.board.container"],function(e,n,t,o){return{create:function(i){var r={extensions:[t].concat(i.extensions||[]),ViewType:i.ViewType||o};return n.create(e.extend(i,r))}}});
define('tau/models/board.context.output/model.board.context.output.data',["Underscore","tau/core/extension.base"],function(e,t){var i={};return t.extend({ITEM_CATEGORY:{TEAM:"Team",PROJECT:"Project"},"bus beforeInit":function(e){var t=e.data.config.context.configurator;this.fire("configurator.ready",t),this.fire("acidStore.ready",t.getAppStateStore()),this.fire("store.ready",t.getStore()),this.fire("contextStore.ready",t.getApplicationContextService())},"bus configurator.ready:last + acid.ready":function(e,t,n){t.getStateManager().unbind(i);var o=this;t.getStateManager().bind({paramId:"appConfig",fieldName:"acid",listener:i,callback:function(e){var t=e.value;n!=t&&o._refreshModel()}})},"bus acidStore.ready":function(e,t){t.get({fields:["acid"],callback:function(e){this.fire("acid.ready",e.acid||"")}.bind(this)}),t.unbind({listener:this}),t.bind({fields:["acid","appContext"],listener:this,callback:function(){this._refreshModel()}.bind(this)})},"bus configurator.ready:last + store.ready":function(e,t,i){this._setupStore(t,i)},"bus contextStore.ready":function(e,t){t.removeAllListeners(this),t.on("refreshChoice.after",function(){this._refreshModel()},this)},"bus contextStore.ready:last + acid.ready + configurator.ready:last + store.ready:last":function(e,t,i,n,o){t.getApplicationContext({acid:i},{success:function(e){n.getFeaturesService().isEnabled("context.v2")&&(n.getPrototypeContextEntityService().updateContextPrototype(e),this.fire("projects.ready",e.projects),this.fire("teams.ready",e.teams)),this.fire("context.ready",e)}.bind(this),failure:function(){this.fire("context.ready",{appContext:{teamContext:{},projectContext:{}}}),n.getFeaturesService().isEnabled("context.v2")&&(this._getProjects(o),this._getTeams(o))}.bind(this)})},prepareModel:function(t,i,n){var o=n.appContext.teamContext;o.items=n.selectedTeams;var a=this._process(t,o,this.ITEM_CATEGORY.TEAM),r=n.appContext.projectContext;r.items=n.selectedProjects;var s=this._process(i,r,this.ITEM_CATEGORY.PROJECT),c=this._getModelData(n,a,s);return this._selectedCache={projects:e.pluck(s.selection,"id"),teams:e.pluck(a.selection,"id")},c},"bus teams.ready + projects.ready + context.ready":function(e,t,i,n){var o=this.prepareModel(t,i,n);this.fire("dataBind",o),this._trackData(o)},_refreshModel:function(){this.resetSubscriptions(),this.fire("refresh")},_getProjects:function(t){t.get("project",{fields:["id","name","color","isActive","abbreviation"]}).done(function(t){var i=e.filter(t[0].data,function(e){return e.isActive});this.fire("projects.ready",i)}.bind(this))},_getTeams:function(e){e.get("team",{fields:["id","name","icon","abbreviation"]}).done(function(e){var t=e[0].data;this.fire("teams.ready",t)}.bind(this))},_setupStore:function(e,t){e.getFeaturesService().isEnabled("context.v2")||(this._getProjects(t),this._getTeams(t))},_getModelData:function(e,t,i){return{acid:e.acid,selectedTeams:t.selection,selectedTeamsCount:t.selectionLength,selectedProjects:i.selection,selectedProjectsCount:i.selectionLength,teamsCount:t.list.length}},_trackData:function(e){this.fire("application.context.data",e)},_process:function(t,i,n){var o=function(e){return("None"==e.id?"0":"1")+(e.selected?"0_":"1_")+e.name.toUpperCase()},a=n.toLowerCase(),r={id:"None",name:"No "+a,abbreviation:"No "+a,icon:null,whiteIcon:null,displayableIcon:null},s={id:"Any",name:"Any "+n,abbreviation:"Any "+n,icon:null,whiteIcon:null,displayableIcon:null},c=t;c.unshift(r);var l=i.items||[];i.no&&l.unshift(r);var d=[],u=!1;if(0===l.length)d=[s],u=!0;else if(l.length==c.length&&1==c.length)d=[r];else if(l.length>=c.length)d=[s],u=!0;else{var f=e.filter(c,function(t){return e.indexOf(e.pluck(l,"id"),t.id)>=0});d=0===f.length?[r]:f}d=e.sortBy(d,o);var h=e.pluck(d,"id");c=e.chain(c).map(function(t){return{id:t.id,name:t.name,icon:t.icon,whiteIcon:null,displayableIcon:t.icon,color:t.color,selected:!u&&e.indexOf(h,t.id)>=0,isSupportView:t.id>0}}).sortBy(o).value(),e.each(d,function(e){"None"==e.id||"Any"==e.id?(e.icon=a,e.whiteIcon=a):null!=e.icon&&(e.icon=e.icon,e.whiteIcon=e.icon+"_white"),e.displayableIcon=e.whiteIcon||e.icon});var p=d.length,g=d.slice(0,2);return d.length>1&&d[0]==r&&(r.icon=null,r.displayableIcon=null),{list:c,selection:d,selectionLength:p,selectionShow:g}}})});
define('tau/ui/templates/board.context.output/ui.template.board.context.output.selected',["tau/core/templates-factory"],function(t){var e={name:"board.context.output.selected",engine:"jqote2",markup:['<span class="tau-selected_item tau-extension-board-tooltip" data-title="<%! this.name %>" <% if (this.color != null) { %>style="color:<%! (this.color) %>"<% }%>>',"<% if (this.displayableIcon != null) { %>",'<i class="tau-icon tau-icon_type_svg tau-icon_name_<%! (this.displayableIcon) %>"></i>',"<% }%>","<%! (this.abbreviation || this.name) %>","</span>"]};return t.register(e)});
define('tau/ui/templates/board.context.output/ui.template.board.context.output',["tau/core/templates-factory","tau/ui/templates/board.context.output/ui.template.board.context.output.selected"],function(t){var e={name:"board.context.output",engine:"jqote2",markup:['<div class="tau-teams-projects">','<div class="tau-selected-projects">','<div class="tau-txt">','<%= fn.sub("board.context.output.selected", this.selectedProjects.slice(0, 3)) %>',"</div>","<% if (this.selectedProjectsCount > 3) { %>",'<b class="tau-more">+<%= this.selectedProjectsCount-3 %></b>',"<% } %>","</div>","<% if(this.teamsCount > 1) {%>",'<div class="tau-selected-teams">','<div class="tau-txt">','<%= fn.sub("board.context.output.selected", this.selectedTeams.slice(0, 3)) %>',"</div>","<% if (this.selectedTeamsCount > 3) { %>",'<b class="tau-more">+<%= this.selectedTeamsCount-3 %></b>',"<% } %>","</div>","<% } %>","</div>"]};return t.register(e)});
define('tau/components/component.board.context.output',["tau/components/component.creator","tau/models/board.context.output/model.board.context.output.data","tau/ui/templates/board.context.output/ui.template.board.context.output"],function(t,e,o){return{create:function(u){var n={queuedBus:!0,extensions:[e],template:o};return t.create(n,u)}}});
define('tau/models/board.context.selector/model.board.context.selector.data',["Underscore","tau/models/board.context.output/model.board.context.output.data"],function(t,e){return e.extend({CONVERT_MAP:{None:"null",Any:"*"},"bus beforeInit":function(t){var e=t.data.config.context.configurator;this.contextStore=e.getApplicationContextService(),this.acidStore=e.getAppStateStore(),this._super(t)},"bus model.setFilter":function(e,a){var n=this.fire.bind(this),i=a.selectedProjectsIds,c=a.selectedTeamsIds;if(this._selectedCache&&t.isEqual(this._selectedCache.teams,c)&&t.isEqual(this._selectedCache.projects,i))return void n("currentContextSelected");var o=function(t){var e=this.CONVERT_MAP[t];return e?e:t}.bind(this),s={projectIds:t.map(i,o),teamIds:t.map(c,o)};this.contextStore.getApplicationContext(s,{success:function(t){n("context.changed",t),n("application.context.data.changed",{teams:c,projects:i})}})},"bus context.changed":function(t,e){this.contextStore.markAsDirty(),this.acidStore.set({set:{acid:e.acid,appContext:e.appContext}})},_setupStore:function(t,e){this._super(t,e),e.unbind(this);var a=this.fire.bind(this);e.on({type:"project",eventName:"afterSave",listener:this},function(t){t.data.cmd&&"context"!=t.data.cmd.type&&e.get("project",{id:t.data.id,fields:["id","name","color"]}).done(function(t){a("project.add.success",t[0].data)})}),e.on({type:"team",eventName:"afterSave",listener:this},function(t){t.data.cmd&&"context"!=t.data.cmd.type&&e.get("team",{id:t.data.id,fields:["id","name","icon"]}).done(function(t){a("team.add.success",t[0].data)})})},_getModelData:function(t,e,a){return{acid:t.acid,teams:e.list,projects:a.list}},_trackData:function(){}})});
define('tau/ui/extensions/board.context.selector/ui.extension.board.context.selector.main',["Underscore","jQuery","tau/core/extension.base"],function(e,t,i){return i.extend({ANY_TEAM_OR_PROJECT:"Any",NO_TEAM_OR_PROJECT:"None","bus afterRender":function(e,t){this.fire("$el.ready",t.element)},"bus $el.ready":function(e,i){var a=this,s=i.find(".i-role-action-submit");a.fire("$submitButton.ready",s),s.on("click",function(){a.fire("filter.submitted")}),this.fire("$teamSection.ready",i.find(".tau-teams")),this.fire("$projectSection.ready",i.find(".tau-projects")),this.fire("$sections.ready",i.find(".tau-teams, .tau-projects")),this.fire("$assignSection.ready",i.find(".tau-teams-projects-updater")),i.on("click",".i-role-selecttrigger",function(e){var i=t(e.currentTarget).data(),s="team"==i.entityType?[i.entityId]:[a.ANY_TEAM_OR_PROJECT],r="project"==i.entityType?[i.entityId]:[a.ANY_TEAM_OR_PROJECT];a.fire("model.setFilter",{selectedTeamsIds:s,selectedProjectsIds:r})})},"bus $el.ready:last + filter.submitted":function(e,t){this.fire("model.setFilter",this.getCurrentState(t))},"bus $el.ready + $submitButton.ready":function(e,t,i){t.on("change",":checkbox",function(){i.hasClass("tau-teams-projects-submit_highlighted_true")||i.animateWithCss({cssClassName:"tau-teams-projects-submit_highlighted_true"})})},"bus configurator.ready:last + $teamSection.ready:last + team.add.success":function(e,t,i,a){var s=i.find(":checkbox[value="+a.id+"]").length;s||(this._addToList(i,t.getTemplateFactory().get("board.context.selector.teams.list"),a),i.removeClass("tau-managed-category_isempty_true"),this.fire("team.add.completed"))},"bus configurator.ready:last + $projectSection.ready:last + project.add.success":function(e,t,i,a){var s=i.find(":checkbox[value="+a.id+"]").length;s||(this._addToList(i,t.getTemplateFactory().get("board.context.selector.projects.list"),a),i.removeClass("tau-managed-category_isempty_true"),this.fire("project.add.completed"))},getCurrentState:function(e){var t={},i=this,a=function(){return this.value==i.NO_TEAM_OR_PROJECT?i.NO_TEAM_OR_PROJECT:parseInt(this.value,10)},s=e.find(".tau-teams .i-role-list :checked"),r=e.find(".tau-teams .i-role-list :checkbox");return t.selectedTeamsIds=!s.length||s.length>1&&s.length==r.length?[this.ANY_TEAM_OR_PROJECT]:s.map(a).toArray(),s=e.find(".tau-projects .i-role-list :checked"),r=e.find(".tau-projects .i-role-list :checkbox"),t.selectedProjectsIds=!s.length||s.length>1&&s.length==r.length?[this.ANY_TEAM_OR_PROJECT]:s.map(a).toArray(),t},_addToList:function(t,i,a){a.selected=!0,a.isSupportView=!0;var s=i.bind({},a),r=t.find(".i-role-list"),n=r.find(".i-role-item:first");n.length?n.after(s):r.append(s),r.parent().scrollTo(0,{duration:500}),s.addClass("tau-added"),e.delay(function(){s.removeClass("tau-added")},1500)}})});
define('tau/ui/extensions/board.context.selector/ui.extension.board.context.selector.filter',["Underscore","jQuery","tau/core/extension.base"],function(e,t,n){return n.extend({"bus $el.ready":function(n,a){var i=null,r=null;a.off("input.search keydown.search");var o=e.bind(function(e){clearTimeout(r);var n=t(e.currentTarget);i!=n.val()&&(r=setTimeout(function(){this.fire("filter.changed",n.val())}.bind(this),50))},this);a.on("input.search keydown.search","input[name=filter]",o),a.delegate("input[name=filter]","keydown",function(e){e.keyCode==t.ui.keyCode.ESCAPE&&e.stopPropagation(),e.which==t.ui.keyCode.ENTER&&t(this).trigger("blur")})},match:function(t,n){var a=t.toLowerCase();return 0==n.length||e.any(n,function(e){return a.indexOf(e)>=0})},"bus $sections.ready:last + filter.changed":function(n,a,i){var r=e.trim(i).toLowerCase().split(/\s+/g),o=this.match;a.each(function(){var e=t(this),n=e.find(".i-role-list"),a=n.find(".i-role-item"),i=0;a.each(function(){var e=t(this),n=e.text(),a=o(n,r);a&&(i+=1),e.toggleClass("tau-category-items-selector__item_filtered_false",!a)}),e.toggleClass("tau-managed-category_filtered_none",0==i)}),this.fire("filter.completed")},"bus $teamSection.ready:last + team.add.completed":function(e,t){t.removeClass("tau-managed-category_filtered_none")},"bus $projectSection.ready:last + project.add.completed":function(e,t){t.removeClass("tau-managed-category_filtered_none")}})});
define('tau/ui/extensions/board.context.selector/ui.extension.board.context.selector.selection',["Underscore","jQuery","tau/core/extension.base"],function(e,c,n){return n.extend({"bus $sections.ready":function(e,n){n.each(function(){var e=c(this),n=e.find("header :checkbox");n.on("change",function(){e.find(".i-role-list .i-role-item:visible :checkbox").prop("checked",n.prop("checked"))});var o=function(){var c=e.find(".i-role-list .i-role-item:visible"),o=c.find(":checkbox").not(":checked");n.prop("checked",0==o.length&&c.length)};e.on("change",".i-role-list .i-role-item",o),e.on("synccheckboxes",o)})},"bus $sections.ready:last + filter.completed":function(e,c){c.trigger("synccheckboxes")},"bus $sections.ready:last + team.add.completed":function(e,c){c.trigger("synccheckboxes")},"bus $sections.ready:last + project.add.completed":function(e,c){c.trigger("synccheckboxes")},"bus $sections.ready:last + $popup.shown":function(e,c){c.trigger("synccheckboxes")},"bus $sections.changed":function(n,o){var t=function(n,o){var t={};e.each(o,function(e){t[e.id]=e.selected}),e.each(n.find(".i-role-item :checkbox"),function(e){var n=c(e),o=n.val(),i=n.prop("checked"),s=t[o];i!==s&&n.prop("checked",s)})};t(o.projects.$optionsList,o.projects.data),t(o.teams.$optionsList,o.teams.data)}})});
define('tau/ui/extensions/board.context.selector/ui.extension.board.context.selector.viewer',["jQuery","tau/core/extension.base"],function(e,r){return r.extend({"bus configurator.ready":function(e,r){var t=this;r.getComponentBusRegistry().getByName("entityViewer").done(function(e){t.fire("viewerBus.ready",e)})},"bus viewerBus.ready + $el.ready":function(r,t,n){n.on("click",".i-role-viewtrigger",function(r){r.stopPropagation(),r.stopImmediatePropagation();var n=e(r.currentTarget).data();t.fire("cardDataToShow.ready",n)})}})});
define('tau/ui/templates/board.context.selector/ui.template.board.context.selector.lists',["tau/core/templates-factory","tau/ui/templates/board.context.selector/ui.template.board.context.selector.projects.list","tau/ui/templates/board.context.selector/ui.template.board.context.selector.teams.list"],function(t){var e={name:"board.context.selector.lists",engine:"jqote2",markup:['<div class="tau-teams-projects-manager i-role-popupcontent">',"<% var filterLimit = 1; %>","<% var hideSearch = this.showSearch === true ? false : (this.teams.length < filterLimit && this.projects.length < filterLimit); %>",'<section class="tau-teams-projects-search" <% if (hideSearch){ %>style="display:none"<% } %> >','<span class="tau-inline-group tau-search">','<input name="filter" type="text" placeholder="Search Projects and Teams" class="tau-in-text">','<button class="tau-btn tau-search" type="button"></button>',"</span>","</section>","<% if (this.showTeams !== false){ %>",'<section class="tau-managed-category <% if (this.teams.length == (this.canAddTeams === false ? 0 : 1)){ %>tau-managed-category_isempty_true tau-no-team<% } %> tau-teams i-role-section-teams">',"<header>",'<label class="tau-checkbox tau-extension-board-tooltip i-role-select-all-item" data-title="Select all teams">','<input <%if (this.checkedAllTeam) {%>checked<%}%> type="checkbox" value="">',"<i></i>",'<span class="tau-checkbox-label">Teams</span>',"</label>","<% if (this.canAddTeams !== false) { %>",'<button class="tau-add i-role-formtrigger" type="button">New team</button>',"<% } %>","</header>",'<ul class="tau-category-items-selector i-role-list">','<%= fn.sub("board.context.selector.teams.list", this.teams) %>',"</ul>","<% if (this.canAddTeams !== false) { %>",'<div class="tau-no-message">','<div class="tau-img"></div>',"<p>Team is a group of people working together toward a common vision. Teams can work on projects.</p>",'<div class="tau-btn-wrap"><button class="tau-btn tau-success i-role-formtrigger" type="button">Create team</button></div>',"</div>","<% } %>",'<div class="tau-managed-category__message tau-managed-category__message_not-found" data-text-nofound="No such team found" data-text-noitems="No available teams"></div>','<div class="tau-managed-category__message tau-managed-category__message_isempty">You need to have some teams for custom sharing.</div>',"</section>","<% }%>","<% if (this.showProjects !== false){ %>",'<section class="tau-managed-category <% if (this.projects.length == (this.canAddProjects === false ? 0 : 1)){ %>tau-managed-category_isempty_true tau-no-project<% } %> tau-projects i-role-section-projects">',"<header>",'<label class="tau-checkbox tau-extension-board-tooltip i-role-select-all-item" data-title="Select all projects">','<input <%if (this.checkedAllProject) {%>checked<%}%> type="checkbox">',"<i></i>",'<span class="tau-checkbox-label">Projects</span>',"</label>","<% if (this.canAddProjects !== false) { %>",'<button class="tau-add i-role-formtrigger" type="button">New project</button>',"<% } %>","</header>",'<ul class="tau-category-items-selector i-role-list">','<%= fn.sub("board.context.selector.projects.list", this.projects) %>',"</ul>","<% if (this.canAddProjects !== false) { %>",'<div class="tau-no-message">','<div class="tau-img"></div>',"<p>You usually need a project to deliver results. Projects hold all the work that needs to be done.</p>",'<div class="tau-btn-wrap"><button class="tau-btn tau-success i-role-formtrigger" type="submit">Create project</button></div>',"</div>","<% } %>",'<div class="tau-managed-category__message tau-managed-category__message_not-found" data-text-nofound="No such project found" data-text-noitems="No available projects"></div>','<div class="tau-managed-category__message tau-managed-category__message_isempty">You need to have some projects for custom sharing.</div>',"</section>","<% }%>","<% if (this.isEmailNotificationsEnabled){ %>",'<section class="tau-board-send-notification">','<button class="tau-btn tau-board-send-notification-submit i-role-action-bord-access-notify" role="action-bord-access-notify" type="button">Send Notification</button>',"</section>","<% } %>",'<section class="tau-teams-projects-updater <% if (this.teams.length > 1 || this.projects.length > 1){ %> tau-teams-projects-updater_state_enabled<% } %>">','<button class="tau-btn tau-primary tau-teams-projects-submit i-role-action-submit" role="action-submit" type="button">','<%= (this.submitLabel || "Show") %>',"</section>","</div>"]};return t.register(e)});
define('tau/components/component.board.context.selector',["tau/components/component.creator","tau/models/board.context.selector/model.board.context.selector.data","tau/ui/extensions/board.context.selector/ui.extension.board.context.selector.main","tau/ui/extensions/board.context.selector/ui.extension.board.context.selector.filter","tau/ui/extensions/board.context.selector/ui.extension.board.context.selector.selection","tau/ui/extensions/board.context.selector/ui.extension.board.context.selector.viewer","tau/ui/templates/board.context.selector/ui.template.board.context.selector.lists"],function(e,t,o,n,r,s,c){return{create:function(a){var i={queuedBus:!0,template:c,extensions:[t,o,n,r,s].concat(a.extensions||[])};return e.create(i,a)}}});
define('tau/libs/boardSettings/board.settings.to.definition.translator',["Underscore","tau/core/class"],function(e,t){var i=t.extend({init:function(e,t){this.boardSettings=e,this.appStateStore=t},getBoardDefinition:function(){var t=this.boardSettings.get(["x","y","cells","zoomLevel","viewMode","page","focus","selectedMarks","cardSettings","isCustomizeDisabled","user","acid","cellPaging"]),i=this.appStateStore.get({fields:["acid"]});return $.when(t,i).then(e.bind(function(e,t){var i=this.createDefinition(e);return i.global={acid:t.acid},{definition:i,configuration:e}},this))}}),n={entityState:25,effort:12},s=function(t,i){e.each(n,function(n,s){t[i]&&t[i].types&&e.any(t[i].types,function(e){return e.toLowerCase()==s.toLowerCase()})&&(t.page.size[i]=n)})},a=function(e){return Math.max(1,Math.min(6,e))};return i.prototype.createDefinition=function(t){var i={};return t.hasOwnProperty("x")&&null!==t.x&&(i.x=t.x),t.hasOwnProperty("y")&&null!==t.y&&(i.y=t.y),t.hasOwnProperty("cells")&&null!==t.cells&&(i.cells=t.cells),i.cells&&(i.cells.ordering=e.defaults(i.cells.ordering||{},{name:"Rank",direction:"Desc"})),i.zoomLevel=a(t.zoomLevel||3),i.page=e.defaults(t.page||{},{x:0,y:0,size:{x:8,y:20}}),s(i,"x"),s(i,"y"),i.focus=e.defaults(t.focus||{},{x:[],y:[]}),i.selectedMarks=e.defaults(t.selectedMarks||{},{x:[],y:[]}),i.viewMode=t.viewMode||"board",i.boardId=t.id,i.cardSettings=t.cardSettings,i.isCustomizeDisabled=t.isCustomizeDisabled,i.user=e.defaults(t.user||{},{cardsFilter:""}),i},i});
define('tau/ui/extensions/board.csv/ui.extension.board.csv',["jQuery","Underscore","tau/components/extensions/component.extension.base","tau/libs/boardSettings/board.settings.to.definition.translator","tau/slice/url.resolver","tau/slice/slice.definition.transformations","tau/core/query"],function(e,t,r,i,n,o,a){return r.extend({"bus beforeInit":function(e,t){this.formSubmitter=t.config.formSubmitter||this.formSubmitterImpl,this.fire("dataBind",{})},"bus afterRender + boardSettings.ready:last + configurator.ready:last":function(r,a,d,s){var u=d.boardSettings,f=a.view.config.context.configurator.getAppStateStore(),c=a.element,m=new n({prefix:"matrix"}),l=m.resolveUrl("csv"),v=this;c.on("click",".i-role-export-to-csv",function(){var r=e(this);new i(u,f).getBoardDefinition().then(function(e){var i=o.createSliceDefinitionFromBoardSettings(e.definition),n=t.pick(s.service("currentBoard").sliceInfo,["x","y"]);i.where=v.createWhere(n),v.fire("ready.to.submit",{$el:r,definition:i,url:l,boardName:u.settings.name,viewMode:u.settings.viewMode})})})},"bus ready.to.submit":function(e,t){this.formSubmitter(t)},createWhere:function(e){var r=e||{},i=t.reduce(r,function(e,r,i){if(r.data.length){var n=t.pluck(r.data,"id"),o=t.every(n,function(e){return void 0==e});if(o){var a=t.pluck(r.data,i);n=a}e[i]={$in:n}}return e},{});return a.render(i)},formSubmitterImpl:function(t){var r=e('<form id="csvForm" action="'+t.url+'" method="POST" target="_blank"></form>'),i=e('<input type="hidden" name="parameters"/>'),n=e('<input type="hidden" name="boardName"/>'),o=e('<input type="hidden" name="where"/>'),a=e('<input type="hidden" name="viewMode"/>');i.val(JSON.stringify(t.definition)),n.val(t.boardName),o.val(t.definition.where),a.val(t.viewMode),t.$el.wrap(r),t.$el.after(i),t.$el.after(n),t.$el.after(o),t.$el.after(a),t.$el.parent().submit(),i.remove(),n.remove(),o.remove(),a.remove(),t.$el.unwrap()}})});
define('tau/ui/templates/board.csv/ui.template.board.csv',["tau/core/templates-factory"],function(t){var e={name:"board.templates.csv",engine:"jqote2",markup:['<span class="tau-inline-group tau-board-csv"><input type="button" class="tau-btn tau-csv i-role-export-to-csv" value="Export"/></span>']};return t.register(e)});
define('tau/utils/timeline/utils.timeline.date',["Underscore","libs/date.js/build/date","tau/utils/utils.date"],function(e,t,a){var n=864e5;return{minDate:new t(-68478156e5),maxDate:new t(0xe677d17b107d),isInfinite:function(e){return e<this.minDate+n||e>this.maxDate-n},getNow:function(){return a.getServerNow()},getToday:function(){return this.getNow().clearTime()},hasEqualDates:function(t,a){var n=["hasPlanned","hasActual","inProgress","plannedStartDate","plannedEndDate","actualStartDate","forecastStartDate","forecastEndDate"];return t.inProgress===!1&&n.push("actualEndDate"),e.every(n,function(e){return t[e]&&t[e].equals?t[e].equals(a[e]):t[e]===a[e]})}}});
define('tau/utils/timeline/utils.timeline.date-range',["Underscore","tau/utils/utils.date","libs/date.js/build/date","tau/utils/utils.date/utils.date.formats","tau/utils/timeline/utils.timeline.date"],function(t,e,a,n,i){var r="—",s=function(t){return t?t.getTime():0},d=function(t){return t?new a(t):null},u=function(t,e){this.startDate=t,this.endDate=e,this.isValid=!0,this.invalidString=null};u.prototype={errorMessage:function(){return"Invalid date range"},equals:function(t){return s(this.startDate)===s(t.startDate)&&s(this.endDate)===s(t.endDate)},toString:function(){if(!this.isValid)return this.invalidString;var t=this.startDate?e.format.date.short(this.startDate):"*";return t+=" "+r+" ",t+=this.endDate?e.format.date.short(this.endDate):"*"},toISOString:function(){if(!this.isValid)return this.invalidString;var t=this.startDate?e.format.date.iso(this.startDate):"*";return t+=" "+r+" ",t+=this.endDate?e.format.date.iso(this.endDate):"*"},toFullISOString:function(){if(!this.isValid)return this.invalidString;var t=this.startDate?e.format.datetime.iso(this.startDate):"*";return t+=" "+r+" ",t+=this.endDate?e.format.datetime.iso(this.endDate):"*"},toJSON:function(){return this.isValid?{startDate:e.format.datetime.iso(this.startDate),endDate:e.format.datetime.iso(this.endDate)}:null},setStartDate:function(t){return new u(t,this.endDate)},setEndDate:function(t){return new u(this.startDate,t)},getDurationInTicks:function(){return this.endDate-this.startDate},getDurationInDays:function(){return this.startDate||this.endDate?e.getDiffInDays(this.endDate,this.startDate):Number.POSITIVE_INFINITY},scale:function(t){var e=this.startDate.clone(),n=new a(this.startDate+this.getDurationInTicks()*t);return new u(e,n)},intersects:function(t){return t.startDate&&t.startDate.valueOf()>=this.endDate.valueOf()?!1:t.endDate&&t.endDate.valueOf()<=this.startDate.valueOf()?!1:!0}};var o=function(){this.startDate=null,this.endDate=null,this.isValid=!1};return o.prototype=u.prototype,u.tryParse=function(e,i){if(e=t.trim(e),0===e.length)return u.createEmptyRange();i=i||[n.datetime.iso,n.datetime.short];var r=e.split(/ [—-] /),s=function(e,n){var i=null;return t.find(n,function(t){return i=a.parseExact(e,t),null!==i}),i},d=r[0]?s(r[0],i):null,o=r[1]?s(r[1],i):null;return null===d||r[1]?null===d||null===o||d.getTime()>o.getTime()?u.createInvalidRange(e):new u(d,o):u.createEmptyRange()},u.tryParseWithRoundedDays=function(t,e){var a=this.tryParse(t,e||[n.date.short,n.date.iso]);return!a.isValid||a.isEmpty?a:u.createWithRoundedDays(a.startDate,a.endDate)},u.createInvalidRange=function(t){var e=new u(null,null);return e.isValid=!1,e.invalidString=t,e},u.createEmptyRange=function(){return new o},u.createWithRoundedDays=function(t,e){return new u(d(t),new a(e).clone().clearTime().addDays(1).addMilliseconds(-1))},u.createDefault=function(){return u.createWithRoundedDays(i.getToday().addMonths(-1),i.getToday().addDays(2))},u.createLastWeek=function(){return u.createWithRoundedDays(i.getToday().addDays(-7).moveToDayOfWeek(0,-1),i.getToday().addDays(-7).moveToDayOfWeek(6,1))},u.createLastThirtyDays=function(){return u.createWithRoundedDays(i.getToday().addDays(-30),i.getToday())},u.createLastThreeMonths=function(){return u.createWithRoundedDays(i.getToday().addMonths(-3),i.getToday())},u.createLastYear=function(){return u.createWithRoundedDays(i.getToday().addYears(-1),i.getToday())},u});
define('tau/configurations/definitions/board.definition.factory',["Underscore","jQuery","tau/core/class","tau/utils/timeline/utils.timeline.date-range"],function(e,t,i,r){var n=i.extend({init:function(t,i){this.serviceContainer=t,this.storage=t.getRestStorage(),this.boardService=t.getBoardApiService(),this.boardAccess=t.getBoardAccessService(),this.options={groupName:"boards"},this.options=e.defaults(i||{},this.options),this.defaults={groupName:this.options.groupName,name:"New View",zoomLevel:{board:3},viewMode:"board",hierarchyMode:"inside",createdAt:null,isDraft:!0,edit:!1,ownerIds:[],isShared:!1,menuIsVisible:!0,menuNumericPriority:999999,prioritization:{mode:"shift"},cells:{types:[],filter:"",useFilter:!1},timelineSettings:{showPlannedInPast:!1,showForecast:!1}}},getLoggedUser:function(){return this.serviceContainer.getLoggedUser()},createDefault:function(){var t=new Date,i=e.cloneDeep(this.defaults);return i.createdAt=t.toGMTString(),i.menuNumericPriority=t.getTime(),i.timelineGlobalDateRange=r.createDefault().toISOString(),i},createByOwner:function(t){if(!e.isObject(t))throw new Error("Should be owner");var i=this.createDefault();return i.ownerIds=[t.id],i.edit=!0,i},createForLoggedUser:function(){return this.createByOwner(this.getLoggedUser())},createBoard:function(t){t=t||this.createForLoggedUser();var i=e.clone(t);return i.menuIsVisible=!0,this.boardService.createBoard(i).then(function(e){return t.id=e.data.key,t})},cloneDefinition:function(t,i){return this.getById(t).then(function(t){var r=["x","y","cells","limits","zoomLevel","viewMode","prioritization","cardSettings","isCustomizeDisabled","timelineLocalDateRange","timelineGlobalDateRange","timelineSettings"],n=this.createDefault(),o=e.pick(e.deepClone(t),r,i);o.isShared=!1,o.ownerIds=[this.getLoggedUser().id],o.name=t.name+" Cloned",o.edit=!0;var a=e.extend(n,o);return a}.bind(this))},findDefaultForLoggedUser:function(){return this.findDefault(this.getLoggedUser())},findDefault:function(t){return this.boardService.getBoardsForUser(t.id).then(function(t){var i=t.data||{},r=i.items||[];return e.chain(r).map(function(t){return e.extend(t,t.publicData,t.userData),e.extend(t,{id:t.key,priority:t.menuNumericPriority||0,visibility:t.menuIsVisible||0})}).sortBy(function(e){return e.visibility?e.priority-1:e.priority+99999}).first().value()})},findLast:function(e){var i=t.Deferred();return this.boardService.getBoardData(e).done(function(e){var t=e.data||{};t&&(t.id=t.key),i.resolve(t)}).fail(function(){i.resolve(null)}),i.promise()},getById:function(e){return this.boardService.getBoardData(e).then(function(e){var t=e.data||{};return t.id=t.key,t}.bind(this))}});return n});
define('tau/ui/extensions/application.generic/ui.extension.application.generic.boardSpecific',["Underscore","jQuery","tau/core/extension.base","tau/configurations/definitions/board.definition.factory"],function(e,t,r,i){return r.extend({"bus configurator.ready":function(e,t){t.getBoardDefinitionFactory=function(){return this.boardDefinitionFactory=this.boardDefinitionFactory||new i(t),this.boardDefinitionFactory}},"bus afterRender":function(t,r){this.initializeFeedback(),this.processBody(r.element).done(e.bind(function(e){this.fire("view.dom.ready",{element:e})},this))},"bus configurator.ready + application.exit":function(e,t){this.fire("initProgress"),t.getRouting().redirect(t.getUrlBuilder().getDashboardUrl())},"bus configurator.ready:last + application.navigate + controller.postExecute":function(e,t,r){var i=r.requestArgs||{},o=function(e){this.fire("boardSettings.ready",{boardSettings:e})}.bind(this),n="board"==i.entity;if(n){var a=i.id;this.processBoardSettings(a,t).done(o)}else{var s=this._createDefaultBoardSettings("none",t);s.markFieldsRetrieved(this._getDefaultBoardFields()),s.settings.viewMode="list",o(s)}},"bus controller.app.host:last + controller.app.page:last + boardSettings.ready":function(t,r,i,o){e.forEach([r,i],function(e){e.fire("boardSettings.ready",o)})},processBody:function(e){var r=t.Deferred();t(":root").addClass("tau-app-frame");var i=t("body");return i.prepend(e),r.resolve(i),r},processBoardSettings:function(e,r){var i=t.Deferred(),o=r.getBoardDefinitionFactory().createDefault();r.setBoardSettingsOptions(o);var n=r.getBoardSettingsFactory().create(e);return n.get({fields:this._getDefaultBoardFields(),callback:function(){i.resolve(n)}}),i},_createDefaultBoardSettings:function(e,t){var r=t.getBoardDefinitionFactory().createDefault();return t.setBoardSettingsOptions(r),t.getBoardSettingsFactory().create(e)},_getDefaultBoardFields:function(){return["name","x","y","cells","viewMode","zoomLevel","collapse","focus"]},initializeFeedback:function(){!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://":"http://")+"widget.uservoice.com/rywvig4l55Tifwaw7wk3Ag.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()}})});
define('tau/components/component.board.csv',["tau/components/component.creator","tau/ui/extensions/board.csv/ui.extension.board.csv","tau/ui/templates/board.csv/ui.template.board.csv","tau/ui/extensions/application.generic/ui.extension.application.generic.boardSpecific","tau/core/extension.configurator"],function(e,t,n,i,o){return{create:function(a){var c={extensions:[t,i,o],template:n};return e.create(c,a)}}});
define('tau/models/board.editor.access/model.board.editor.access',["Underscore","tau/core/model-base"],function(e,t){return t.extend({"bus beforeInit":function(e){var t=e.data.config.context.configurator;this.fire("configurator.ready",t)},getTeams:function(e){var t=$.Deferred();return e.get("team",{fields:["id","name","icon"]}).done(function(e){t.resolve(e[0].data)}),t},getProjects:function(t){var i=$.Deferred();return t.get("project",{fields:["id","name","color","isActive"]}).done(function(t){var a=e.filter(t[0].data,function(e){return e.isActive});i.resolve(a)}),i},getBoardAccess:function(e,t){var i=$.Deferred(),a=t.getLoggedUser(),n=t.getBoardAccessService();return e.get({fields:["id","ownerIds","name","isShared","customSharedData","acid"],callback:function(e){var t={isShared:e.isShared,isOwner:n.isOwner(e,a),isAdmin:a.isAdministrator,isEditable:n.isEditable(e,a),customSharedData:e.customSharedData,id:e.id,name:e.name,acid:e.acid};t.customSharedData||(t.customSharedData={isActive:!1,teamIds:[],projectIds:[]}),i.resolve(t)}.bind(this)}),i},getEmailNotificationSettings:function(e){var t=$.Deferred();return e.getGlobalSettingsService().getGlobalSettings({success:function(e){t.resolve(e.IsEmailNotificationsEnabled)},failure:function(){t.resolve(!1)}}),t},_process:function(t,i){var a=function(e){return(-1==e.id?"0":"1")+(e.selected?"0_":"1_")+e.name.toUpperCase()},n=t;return n=e.chain(n).map(function(t){return{id:t.id,name:t.name,icon:t.icon,color:t.color,selected:e.indexOf(i,t.id)>=0}}).sortBy(a).value()},"bus configurator.ready + boardSettings.ready:last":function(t,i,a){var n=i.getStore(),r=a.boardSettings;$.when(this.getTeams(n),this.getProjects(n),this.getBoardAccess(r,i),this.getEmailNotificationSettings(i)).done(function(e,t,i,a){e=this._process(e,i.customSharedData.teamIds),t=this._process(t,i.customSharedData.projectIds),this.fire("dataBind",{access:i,teams:e,projects:t,canAddTeams:!1,canAddProjects:!1,checkedAllProject:t.length==i.customSharedData.projectIds.length,checkedAllTeam:e.length==i.customSharedData.teamIds.length,showSearch:!0,submitLabel:"Share",boardId:i.id,boardName:i.name,isEmailNotificationsEnabled:a,boardAcid:i.acid})}.bind(this));var s=e.debounce(function(){this.fire("componentRefresh")}.bind(this),300);r.unbind({listener:this}),r.bind({fields:["name","acid"],listener:this,callback:s}),n.unbind(this),n.on({eventName:"afterSave",type:"team",listener:this},s),n.on({eventName:"afterRemove",type:"team",listener:this},s),n.on({eventName:"afterSave",type:"project",listener:this},s),n.on({eventName:"afterRemove",type:"project",listener:this},s)},"bus elementInsertedToContainer:last + componentRefresh":function(){this.fire("refresh")},"bus boardSettings.ready:last + form.submitted":function(e,t,i){t.boardSettings.set({set:i})},"bus destroy + boardSettings.ready:last":function(e,t,i){i.boardSettings.unbind({listener:this})}})});
define('tau/ui/extensions/board.editor.access/ui.extension.board.editor.access',["jQuery","Underscore","tau/components/extensions/component.extension.base"],function(e,t,i){return i.extend({getProjectsAndTeams:function(e){function i(e){return parseInt(e.value,10)}return t.map(e.find(".i-role-list :checked"),i)},"bus afterRender + configurator.ready":function(t,i,a){var o=i.data,s=i.element,n=s.find(".i-role-popupcontent"),r=n.find(".i-role-section-teams"),d=n.find(".i-role-section-projects");this.toggleCustomSharedPanel(s,!o.access.customSharedData.isActive),s.on("change","[role=action-share]",function(t){this.handlers[e(t.target).val()].bind(this)(s)}.bind(this));var c=s.find("[role=action-bord-access-notify]");this.getProjectsAndTeams(d).length<1&&this.getProjectsAndTeams(r).length<1&&c.prop("disabled",!0),s.on("click",".i-role-popupcontent :checkbox",function(t){var i=this.getProjectsAndTeams(r),a=this.getProjectsAndTeams(d);e(t.target).is(":checked")?c.prop("disabled",!1):i.length<1&&a.length<1&&c.prop("disabled",!0),this.fireCustomSharedData(!0,!0,i,a)}.bind(this)),this.fire("$el.ready",n),this.fire("$teamSection.ready",r),this.fire("$projectSection.ready",d),this.fire("$sections.ready",n.find(".tau-teams, .tau-projects"));var h=a.getSliceFactory().create({});c.on("click",function(){c.prop("disabled",!0);var e=this.getProjectsAndTeams(r),t=this.getProjectsAndTeams(d),i=a.getUrlBuilder().getBoardPageRelativePath()+a.getUrlBuilder().getRelativeBoardUrl(o.boardId,o.boardAcid);h.notifyBoardAccess({$set:{teamIds:e,projectIds:t,boardUrl:i,boardName:o.boardName}}).done(function(){this.fire("notification",{message:"People will be notified that you've shared a View with them.",delay:3e3})}.bind(this)).fail(function(e){this.fire("error",{message:e.data.responseText.Message,delay:3e3})}.bind(this))}.bind(this))},fireCustomSharedData:function(e,t,i,a){this.fire("form.submitted",{isShared:e,customSharedData:{isActive:t,teamIds:i||[],projectIds:a||[]}})},handlers:{"public":function(e){this.toggleCustomSharedPanel(e,!0),this.fireCustomSharedData(!0,!1)},"private":function(e){this.toggleCustomSharedPanel(e,!0),this.fireCustomSharedData(!1,!1)},custom:function(e){this.toggleCustomSharedPanel(e,!1),this.fireCustomSharedData(!0,!0)}},toggleCustomSharedPanel:function(e,t){var i=e.find(".i-role-popupcontent");i.toggleClass("tau-disabled",t),i.find("input,button:not([role=action-bord-access-notify])").prop("disabled",t),t&&i.find(":checkbox").prop("checked",!1)}})});
define('tau/ui/templates/board.context.filter/ui.template.board.context.filter.projects.list',["tau/core/templates-factory"],function(t){var e={name:"board.context.filter.projects.list",engine:"jqote2",markup:['<li class="i-role-item">','<label class="tau-checkbox  <% if (this.id == -1){ %>  tau-null-selector <% } %>">','<input type="checkbox" id="content_filter_project_<%= this.id %>" value="<%= this.id %>"',"<% if (this.selected){ %>"," checked","<% } %> ","/>","<i></i>",'<span class="tau-checkbox-label">',"<% if (this.color){ %>",'<i class="tau-icon tau-icon_type_color" style="background-color: <%= this.color %>"></i>',"<%} else { %>",'<i class="tau-icon"></i>',"<% } %>","<%! this.name %>","</span>","</label>","<% if (this.isSupportView){ %>",'<i title="Select this project only" class="tau-category-items-selector__selecttrigger tau-icon tau-icon_type_svg tau-icon_name_aim i-role-selecttrigger" data-entity-id="<%! this.id %>" data-entity-type="project"></i>','<i title="Open this project in a popup" class="tau-category-items-selector__viewtrigger tau-icon tau-icon_type_svg tau-icon_name_newwindow i-role-viewtrigger" data-entity-id="<%! this.id %>" data-entity-type="project"></i>',"<% } %>","</li>"]};return t.register(e)});
define('tau/ui/templates/finder.project/ui.template.finder.project.add.form',["tau/core/templates-factory"],function(e){var t={name:"finder.project.add.form",engine:"jqote2",markup:['<form class="tau-new-item_active_false i-role-form">','<div class="tau-new-entity-form">','<div class="tau-new-entity-info">','<span class="tau-select-team-icon">','<i class="tau-icon tau-icon_type_color tau-icon_name_default i-role-currenticon" data-value="default"></i>',"</span>",'<input name="name" type="text" placeholder="Enter project name here"  class="tau-in-text tau-new-entity-name">','<select name="color" style="display:none;">','<option value=""></option>',"<% _.each(this.colors, function(item){ %>",'<option value="<%= item %>"><%= item %></option>',"<% }); %>","</select>","</div>",'<ul class="tau-teams-icon-list i-role-richselect">','<li><i class="tau-icon tau-i-close i-role-option" data-value=""></i></li>',"<% _.each(this.colors, function(item){ %>",'<li><i class="tau-icon tau-icon_type_color i-role-option" style="background-color:<%= item %>;" data-value="<%= item %>"></i></li>',"<% }); %>","</ul>",'<div class="tau-new-entity-process">','<label><div class="tau-note">Select process</div>','<select class="tau-select" name="process">',"<% _.each(this.processes, function(item){ %>",'<option <% if (item.isDefault){ %>selected<% } %> value="<%= item.id %>"><%! item.name %></option>',"<% }); %>","</select></label>","</div>",'<div class="tau-invite-widget">','<div class="tau-note">Invite people</div>','<textarea name="users" placeholder="Start typing name(s) or email(s) to assign people to a project" />','<div class="tau-invite-footer">','<button class="tau-btn tau-success" type="submit">Create project</button>','<button class="tau-btn" type="reset">Cancel</button>',"</div>","</div>","</div>","</form>"]};return e.register(t)});
define('tau/ui/templates/board.context.filter/ui.template.board.context.filter.teams.list',["tau/core/templates-factory"],function(t){return t.register({name:"board.context.filter.teams.list",engine:"jqote2",markup:['<li class="i-role-item">','<label class="tau-checkbox <% if (this.id == -1){ %>  tau-null-selector <% } %>">','<input type="checkbox" id="content_filter_project_<%= this.id %>" value="<%= this.id %>"',"<% if (this.selected){ %>"," checked","<% } %> ","/>","<i></i>",'<span class="tau-checkbox-label">','<i class="tau-icon tau-icon_type_svg tau-icon_name_<%= this.icon || ""  %>"></i>',"<%! this.name %>","</span>","</label>","<% if (this.isSupportView){ %>",'<i title="Select this team only" class="tau-category-items-selector__selecttrigger tau-icon tau-icon_type_svg tau-icon_name_aim i-role-selecttrigger" data-entity-id="<%! this.id %>" data-entity-type="team"></i>','<i  title="Open this team in a popup" class="tau-category-items-selector__viewtrigger tau-icon tau-icon_type_svg tau-icon_name_newwindow i-role-viewtrigger" data-entity-id="<%! this.id %>" data-entity-type="team"></i>',"<% } %>","</li>"]})});
define('tau/ui/templates/finder.team/ui.template.finder.team.add.form',["tau/core/templates-factory"],function(t){var e={name:"finder.team.add.form",engine:"jqote2",markup:['<form class="tau-new-item_active_false i-role-form">','<div class="tau-new-entity-form">','<div class="tau-new-entity-info">','<span class="tau-select-team-icon">','<i class="tau-icon tau-icon_type_svg tau-icon_name_default i-role-currenticon" data-value="default"></i>',"</span>",'<input name="name" type="text" placeholder="Enter team name here"  class="tau-in-text tau-new-entity-name">','<select name="icon" style="display:none;">','<option value=""></option>',"<% _.each(this.icons, function(item){ %>",'<option value="<%= item %>"><%= item %></option>',"<% }); %>","</select>","</div>",'<ul class="tau-teams-icon-list i-role-richselect">','<li><i class="tau-icon tau-i-close i-role-option" data-value=""></i></li>',"<% _.each(this.icons, function(item){ %>",'<li><i class="tau-icon tau-icon_type_svg tau-icon_name_<%= item %> i-role-option" data-value="<%= item %>"></i></li>',"<% }); %>","</ul>",'<div class="tau-invite-widget ">','<div class="tau-note">Invite people</div>','<textarea name="users" placeholder="Start typing name(s) or email(s) to assign people to a team" />','<div class="tau-invite-footer">','<button class="tau-btn tau-success" type="submit">Create team</button>','<button class="tau-btn" type="reset">Cancel</button>',"</div>","</div>","</div>","</form>"]};return t.register(e)});
define('tau/ui/templates/board.context.filter/ui.template.board.context.filter.lists',["tau/core/templates-factory","tau/ui/templates/board.context.filter/ui.template.board.context.filter.projects.list","tau/ui/templates/finder.project/ui.template.finder.project.add.form","tau/ui/templates/board.context.filter/ui.template.board.context.filter.teams.list","tau/ui/templates/finder.team/ui.template.finder.team.add.form"],function(t){var e={name:"board.context.filter.lists",engine:"jqote2",markup:['<div class="tau-teams-projects-manager i-role-popupcontent">',"<%var hideSearch = this.showSearch === true ? false : (this.teams.length < 25 && this.projects.length < 25);%>",'<section class="tau-teams-projects-search" <% if (hideSearch){ %>style="display:none"<% } %> >','<span class="tau-inline-group tau-search">','<input name="filter" type="text" placeholder="Search Projects and Teams" class="tau-in-text">','<button class="tau-btn tau-search" type="button"></button>',"</span>","</section>","<% if (this.showTeams !== false){ %>",'<section class="tau-managed-category <% if (this.teams.length == (this.canAddTeams === false ? 0 : 1)){ %>tau-managed-category_isempty_true tau-no-team<% } %> tau-teams i-role-section-teams">',"<header>",'<label class="tau-checkbox i-role-select-all-item">','<input <%if (this.checkedAllTeam) {%>checked<%}%> type="checkbox" value="">',"<i></i>",'<span class="tau-checkbox-label">Teams</span>',"</label>","<% if (this.canAddTeams !== false) { %>",'<button class="tau-add i-role-formtrigger" type="button">New team</button>',"<% } %>","</header>","<% if (this.canAddTeams !== false) { %>",'<%= fn.sub("finder.team.add.form", this) %>',"<% } %>",'<ul class="tau-category-items-selector i-role-list">','<%= fn.sub("board.context.filter.teams.list", this.teams) %>',"</ul>","<% if (this.canAddTeams !== false) { %>",'<div class="tau-no-message">','<div class="tau-img"></div>',"<p>Team is a group of people working together toward a common vision. Teams can work on projects.</p>",'<div class="tau-btn-wrap"><button class="tau-btn tau-success i-role-formtrigger" type="button">Create team</button></div>',"</div>","<% } %>",'<div class="tau-managed-category__message tau-managed-category__message_not-found" data-text-nofound="No such team found" data-text-noitems="No available teams"></div>','<div class="tau-managed-category__message tau-managed-category__message_isempty">You need to have some teams for custom sharing.</div>',"</section>","<% }%>","<% if (this.showProjects !== false){ %>",'<section class="tau-managed-category <% if (this.projects.length == (this.canAddProjects === false ? 0 : 1)){ %>tau-managed-category_isempty_true tau-no-project<% } %> tau-projects i-role-section-projects">',"<header>",'<label class="tau-checkbox i-role-select-all-item">','<input <%if (this.checkedAllProject) {%>checked<%}%> type="checkbox">',"<i></i>",'<span class="tau-checkbox-label">Projects</span>',"</label>","<% if (this.canAddProjects !== false) { %>",'<button class="tau-add i-role-formtrigger" type="button">New project</button>',"<% } %>","</header>","<% if (this.canAddProjects !== false) { %>",'<%= fn.sub("finder.project.add.form", this) %>',"<% } %>",'<ul class="tau-category-items-selector i-role-list">','<%= fn.sub("board.context.filter.projects.list", this.projects) %>',"</ul>","<% if (this.canAddProjects !== false) { %>",'<div class="tau-no-message">','<div class="tau-img"></div>',"<p>You usually need a project to deliver results. Projects hold all the work that needs to be done.</p>",'<div class="tau-btn-wrap"><button class="tau-btn tau-success i-role-formtrigger" type="submit">Create project</button></div>',"</div>","<% } %>",'<div class="tau-managed-category__message tau-managed-category__message_not-found" data-text-nofound="No such project found" data-text-noitems="No available projects"></div>','<div class="tau-managed-category__message tau-managed-category__message_isempty">You need to have some projects for custom sharing.</div>',"</section>","<% }%>","<% if (this.isEmailNotificationsEnabled){ %>",'<section class="tau-board-send-notification">','<button class="tau-btn tau-board-send-notification-submit i-role-action-bord-access-notify" role="action-bord-access-notify" type="button">Send Notification</button>',"</section>","<% } %>",'<section class="tau-teams-projects-updater <% if (this.teams.length > 1 || this.projects.length > 1){ %> tau-teams-projects-updater_state_enabled<% } %>">','<button class="tau-btn tau-primary tau-teams-projects-submit i-role-action-submit" role="action-submit" type="button">','<%= (this.submitLabel || "Show") %>',"</section>","</div>"],dependencies:[]};return t.register(e)});
define('tau/ui/templates/board.editor.access/ui.template.board.editor.access',["tau/core/templates-factory","tau/ui/templates/board.context.filter/ui.template.board.context.filter.lists"],function(e){var a={name:"board.editor.access",engine:"jqote2",markup:['<div class="tau-access-settings">','<div class="tau-board-settings-group__help">','<span class="tau-help i-role-tooltipArticle" data-article-id="board.editor.access">',"About Access","</span>","</div>",'<div class="tau-access-type">',"<%if (this.access.isEditable) {%>",'<label class="tau-line">','<div class="tau-field">','<input role="action-share" value="private" type="radio" name="share"<% if (!this.access.isShared) { %> checked<% } %>>',"</div>",'<div class="tau-txt">',"<h3>Private</h3>","<p>Only you as the View owner can see this View. That's the default option for new Views.</p>","</div>","</label>","<% if(this.access.isAdmin) {%>",'<label class="tau-line">','<div class="tau-field">','<input role="action-share" value="public" type="radio" name="share"<% if (this.access.isShared && !this.access.customSharedData.isActive) { %> checked<% } %>>',"</div>",'<div class="tau-txt">',"<h3>Public</h3>","<p>Everyone can see this View. It will be shown in the left menu.</p>","</div>","</label>","<%}%>",'<label class="tau-line">','<div class="tau-field">','<input role="action-share" value="custom" type="radio" name="share"<% if (this.access.isShared && this.access.customSharedData.isActive) { %> checked<% } %>>',"</div>",'<div class="tau-txt">',"<h3>Custom sharing</h3>","<p>You as the View owner or admin decide which team can see and change this View.</p>","</div>","</label>","<%}%>","</div>",'<div class="tau-notification-block">','<%= fn.sub("board.context.filter.lists", this) %>',"</div>","</div>"],dependencies:[]};return e.register(a)});
define('tau/components/component.board.editor.access',["Underscore","tau/components/component.creator","tau/models/board.editor.access/model.board.editor.access","tau/ui/extensions/board.editor.access/ui.extension.board.editor.access","tau/ui/extensions/board.context.selector/ui.extension.board.context.selector.filter","tau/ui/extensions/board.context.selector/ui.extension.board.context.selector.selection","tau/components/extensions/error/extension.errorBar","tau/ui/templates/board.editor.access/ui.template.board.editor.access"],function(e,t,o,r,n,s,a,c){return{create:function(e){var i={extensions:[o,r,n,s,a],template:c};return e["queue.bus"]=!0,t.create(i,e)}}});
define('tau/ui/extensions/board.editor.container/ui.extension.board.editor.container.view',["Underscore","jQuery","tau/views/view.container"],function(i,t,e){return e.extend({"bus initialize":function(){},"bus initialize + boardSettings.ready":function(i,t,e){this.startLifeCycle(t,e.boardSettings)},"bus refresh":function(){this.startLifeCycle()},startLifeCycle:function(t,e){e=e||this.boardSettings,this.boardSettings=e;var s=i.bind(this._super,this);e.get({fields:["edit"],callback:i.bind(function(i){this.config.visible=!!i.edit,s(t,e)},this)}),e.unbind({listener:this}),e.bind({fields:["edit"],listener:this,callback:i.bind(function(i){this.config&&(this.config.visible=!!i.edit,this.fire(this.config.visible?"show":"hide"),this.config.visible&&this.fire("tab.activate","setup"))},this)})}})});
define('tau/ui/extensions/board.editor.container/ui.extension.board.editor.container.tabs',["Underscore","jQuery","tau/core/extension.base"],function(e,t,a){var s=function(e,t){this.tabHeaderClass=e,this.setStateCustomAction=t};return s.prototype.setState=function(e,t,a,s){var i=a.getBoardAccessService().isEditable(t,a.getLoggedUser());e.toggleClass(this.tabHeaderClass,!i),this.setStateCustomAction(e,t,a,s)},a.extend({resetLifecycle:!0,configTab:{limits:{isActive:function(t){return e.some([t.x,t.y],function(e){return e&&"entitystate"===e.types[0]})},setState:function(e,t){e.toggleClass("tau-disabled",!this.isActive(t))}},templates:new s("tau-disabled",t.noop),access:new s("tau-hide",t.noop),customize:new s("tau-hide",function(e,t){var a=t.cells.types.length;e.toggleClass("tau-disabled",!a)}),timeline:new s("tau-hide",function(e,t,a,s){var i=e.hasClass("tau-active"),n="timeline"!==t.viewMode;e.toggleClass("tau-hide",n),n&&i&&s.fire("tab.activate","setup")})},"bus beforeInit":function(e,t){var a=t.config.context.configurator;this.fire("configurator.ready",a)},"bus afterRender":function(e,t){var a=t.element;this.fire("$el.ready",a)},"bus $el.ready":function(e,a){var s=this;a.on("click",".i-role-tabheader:not(.tau-disabled)",function(){s.fire("tab.activate",t(this).data("label"))}),a.on("click",".tau-settings-close",function(){s.fire("settings.close",t(this).data("label"))})},"bus boardSettings.ready:last + settings.close":function(e,t){var a=this;t.boardSettings.get({fields:["edit"],callback:function(e){e.edit&&0===e.cells.types.length?a.fire("boardSettings.cardSetIsEmpty"):t.boardSettings.set({set:{edit:!1}})}})},"bus $el.ready:last + tab.activate":function(e,t,a){var s=t.find(".i-role-tab"),i=s.filter("[data-label="+a+"]:not(.tau-active)"),n=t.find(".i-role-tabheaders .i-role-tabheader"),l=n.filter("[data-label="+a+"]:not(.tau-active)");i.length&&l.length&&(s.not(i).removeClass("tau-active"),i.addClass("tau-active"),n.not(l).removeClass("tau-active"),l.addClass("tau-active"),this.fire("tab.activate.completed",a))},"bus configurator.ready + componentsCreated":function(a,s){t.when(s.getComponentBusRegistry().getByName("board_editor"),s.getComponentBusRegistry().getByName("board_templates")).done(e.bind(function(e,t,a){var s={setup:e,templates:t,limits:a};this.fire("tabBusesInternal.ready",s)},this));var i=s.getConfig("tmpBoardIsJustAdded",!1);s.setConfig("tmpBoardIsJustAdded",!1),i?(this.fire("tab.activate","templates"),this.fire("justAdded.opened")):this.fire("alreadyAdded.opened")},"bus $el.ready + tabBusesInternal.ready":function(e,t,a){a.templates.on("item.selected",function(){t.parent().toggleClass("tau-full-cell-settings",!1),a.templates.fire("external.setFocusOnSelected")}),a.templates.on("item.selected.completed",function(){a.setup.fire("refresh")});var s=this;a.templates.on("setup.pressed",function(){s.fire("tab.activate","setup")})},"bus tabBusesInternal.ready:last + tab.activate.completed + justAdded.opened":function(e,t){t.templates.once("afterRender",function(){t.templates.fire("external.selectDefault"),t.templates.fire("confirmation.toggle",!1)}),t.templates.fire("external.selectDefault"),t.templates.fire("confirmation.toggle",!1)},"bus tabBusesInternal.ready:last + tab.activate.completed":function(e,t,a){"templates"==a&&(t.templates.fire("external.selectNone"),t.templates.fire("confirmation.toggle",!0))},"bus view.dom.ready:last + $el.ready:last + childrenBuses.ready:last + tab.activate.completed + configurator.ready:last":function(e,t,a,s,i){var n=a.parent();n.toggleClass("tau-full-cell-settings","templates"==i||"encoding"==i),n.toggleClass("tau-access","access"==i),n.toggleClass("tau-customize","customize"==i),s[i].fire("show")},"bus boardSettings.ready:last + destroy":function(e,t){t.boardSettings.unbind({listener:this})},"bus configurator.ready + $el.ready + boardSettings.ready":function(a,s,i,n){var l=i.find(".i-role-tabheader"),o=e.bind(function(a){l.each(e.bind(function(e,i){var n=t(i),l=n.data("label");this.configTab[l]&&this.configTab[l].setState(n,a,s,this)},this))},this),r=n.boardSettings,d=function(){r.get({fields:["x","y","cells","ownerIds","viewMode"],callback:o})};d(),r.unbind({listener:this}),r.bind({fields:["x","y","cells","ownerIds","viewMode"],listener:this,callback:d})}})});
define('tau/ui/templates/board.editor.container/ui.template.board.editor.container',["tau/core/templates-factory","tau/nls/translator"],function(t,a){var e={name:"board.editor.container",engine:"jqote2",markup:["<% var features = this.context.configurator.getFeaturesService(); %>",'<div class="tau-board-settings" id="<%= _.uniqueId(\'boardSettings\') %>">','<div class="tau-board-settings-header i-role-tabheaders" role="toolbar">','<ul class="tau-board-settings-groups-tags i-role-tabheaders">','<% if (features.isEnabled("boardTemplates")) { %>','<li class="i-role-tabheader tau-extension-board-tooltip" data-label="templates" data-title="Create a View from template">Templates</li>',"<% } %>",'<li class="tau-active i-role-tabheader tau-extension-board-tooltip" data-label="setup" data-title="Change View setup">Setup</li>','<li class="i-role-tabheader tau-extension-board-tooltip" data-label="access" data-title="Change View permissions">Access</li>','<li class="tau-extension-board-tooltip tau-disabled tau-extension-board-tooltip i-role-tabheader"','data-label="limits" data-collapsed-selector=".i-role-tabheader:not(.tau-active)" data-expanded-selector=".i-role-tabheader.tau-disabled"','data-title-expanded="'+a("You need to set States as a horizontal or vertical lane to activate this tab")+'"','data-title-collapsed="'+a("Set limits to work in progress")+'"',">Limits</li>",'<% if (features.isEnabled("boardEditorPrioritization")) { %>','<li class="i-role-tabheader tau-extension-board-tooltip" data-label="prioritization" data-title="Turn prioritization on/off">Prioritize</li>',"<% } %>",'<li class="tau-extension-board-tooltip tau-disabled tau-extension-board-tooltip i-role-tabheader" ','data-label="customize" ','data-collapsed-selector=".i-role-tabheader:not(.tau-active)" ','data-expanded-selector=".i-role-tabheader.tau-disabled" ','data-title-collapsed="Change the look of cards in the View"','data-title-expanded="'+a("You need to make a selection of the card types to activate this tab")+'" ',">","Customize Cards","</li>",'<li class="tau-extension-board-tooltip tau-extension-board-tooltip i-role-tabheader" data-label="timeline" data-title="Set timeline options">',"Timeline","</li>","</ul>",'<button role="close-settings" class="tau-btn tau-settings-close" type="button">'+a("Finish setup")+"</button>","</div>",'<div class="i-role-tab tau-board-settings-group tau-active" role="editor" data-label="setup"></div>','<% if (features.isEnabled("boardTemplates")){ %>','<div class="i-role-tab tau-board-settings-group" role="templates" data-label="templates"></div>',"<% } %>",'<div class="i-role-tab tau-board-settings-group" role="access" data-label="access"></div>','<div class="i-role-tab tau-board-settings-group" role="limits" data-label="limits"></div>','<div class="i-role-tab tau-board-settings-group" role="prioritization" data-label="prioritization"></div>','<div class="i-role-tab tau-board-settings-group" role="customize" data-label="customize"></div>','<div class="i-role-tab tau-board-settings-group" role="encoding" data-label="encoding"></div>','<div class="i-role-tab tau-board-settings-group" role="timeline" data-label="timeline"></div>',"</div>"]};return t.register(e)});
define('tau/components/component.board.editor.container',["Underscore","tau/components/component.container","tau/ui/extensions/board.container/ui.extension.board.container.events","tau/ui/extensions/board.editor.container/ui.extension.board.editor.container.view","tau/ui/extensions/board.editor.container/ui.extension.board.editor.container.tabs","tau/core/extension.base","tau/ui/templates/board.editor.container/ui.template.board.editor.container"],function(e,n,t,o,i,r,a){return{create:function(c){var s={extensions:[t,i,r.extend({resetLifecycle:!0,"bus  childrenBuses.ready + show.completed":function(n,t){e.each(t,function(e){e.fire("elementInsertedToContainer")})}})].concat(c.extensions||[]),ViewType:o,template:a};return n.create(e.extend(c,s))}}});
define('tau/components/extensions/component.sharedBus.extension',["Underscore","tau/components/extensions/component.extension.base"],function(e,i){var n=/^(public\.|parent\.)(.+)/i,r=/^(public\.)(.+)/i;return i.extend({"bus beforeComponentsInitialize":function(i,n){var r=e.pluck(n,"component");this.wrapChildrenBuses(r),this.wrapOwnBus(r)},wrapChildrenBuses:function(i){var r=this;return e.each(i,e.bind(function(a){a.originalFire=a.fire,a.fire=function(t){var l=n.exec(t);if(null!=l)switch(l[1]){case"public.":r.fire.apply(r,arguments),e.each(i,function(e){e!==a&&e.originalFire.apply(e,arguments)});break;case"parent.":var u=Array.prototype.slice.call(arguments,0);u[0]="child."+a.name+"."+l[2],r.fire.apply(r,u)}a.originalFire.apply(a,arguments)}},this)),r},wrapOwnBus:function(i){var n=this.bus,a=n.fire;n.firePublicToChildren=function(){var n=arguments;e.each(i,function(e){e.originalFire.apply(e,n),e.firePublicToChildren&&e.firePublicToChildren.apply(e,n)})},n.fire=function(e){var i=r.exec(e);if(null!=i){var t=Array.prototype.slice.call(arguments,0);t[0]="public."+i[2],n.firePublicToChildren.apply(n,t)}a.apply(n,arguments)}}})});
define('tau/components/component.container.with-shared-events',["Underscore","tau/components/component.container","tau/components/extensions/component.sharedBus.extension"],function(n,e,t){return{create:function(o){return o.extensions=n.concat([o.extensions,t]),e.create(o)}}});
define('tau/ui/templates/board.editor.customize/ui.template.board.editor.customize.board',["tau/core/templates-factory"],function(o){var a={name:"board.editor.customize.board",engine:"jqote2",markup:['<div class="tau-board-layout-cards-module i-role-module-customize" >','<div class="tau-board-layout-compositor tau-board-layout-compositor_cards-compositor"></div>','<div class="tau-board-layout-components-set"></div>',"</div>"],dependencies:[]};return o.register(a)});
define('tau/ui/extensions/board.customize/ui.board.editor.customize.editor.helper.base',["jQuery","Underscore","tau/core/class","tau/ui/templates/board.plus/customized/ui.template.boardplus.card.section.customized"],function(t,e,i,n){var a=function(t,i,n){if(i=i.trim().toLowerCase(),0===i.length)return n;var a=i.split(/\s+/i),r=(t||"").toLowerCase();return a.length>0&&e.all(a,function(t){return r.indexOf(t)>=0})};return t.expr[":"].searchText=function(t,e,i){var n=i[3],r=t.textContent||t.innerText;return a(r,n,!0)},i.extend({MAX_SECTION:10,CLASS_MAP:{ACTIVE:"tau-is-active",DISABLED:"tau-is-disabled",DROP_ZONE:"tau-is-drop-zone",CARD:"tau-card-v2",CLOSE_BUTTON:"tau-board-layout-close",EDITOR:"tau-board-layout-customizer",NOT_DROP:"tau-not-drop",DND_IN_PROGRESS:"tau-card-v2__dnd_inprogress",CARD_SECTION:"tau-card-v2__section",CARD_SECTION_REMOVER:"tau-card-v2__section_remover",BOARD_UNIT:"tau-board-unit",BOARD_UNIT_MAX_FORMAT:"tau-board-unit_format_max",BOARD_UNIT_ALIGNMENT_BASE:"tau-board-unit_alignment_base",BOARD_UNIT_ALIGNMENT_ALT:"tau-board-unit_alignment_alt",BOARD_UNIT_ALIGNMENT_BASE_LAST:"tau-board-unit_alignment_base-last",BOARD_UNIT_ALIGNMENT_ALT_LAST:"tau-board-unit_alignment_alt-last",BOARD_UNIT_DND_SOURCE:"tau-board-unit_dnd_source",BOARD_UNIT_DND_HELPER:"tau-board-unit_dnd_helper",BOARD_UNIT_DND_PROXY:"tau-board-unit_dnd_proxy",BOARD_UNIT_DND_PROXY_HIDE:"tau-board-unit_dnd_proxy_hide",BOARD_UNIT_DND_PRE_INSERT:"tau-board-unit_dnd_pre-insert",BOARD_UNIT_MAXIMIZED:"tau-board-unit_maximized",BOARD_UNIT_DND_NOT_DROP:"tau-board-unit_dnd_not-drop",LAYOUT_ELEMENTS_LIST:"tau-board-layout-elements-list",LAYOUT_ELEMENTS_LIST_ITEM:"tau-board-layout-elements-list__item",LAYOUT_ELEMENTS_LIST_ITEM_NAME:"tau-board-layout-elements-list__item-name",LAYOUT_COMPOSITOR:"tau-board-layout-compositor",LAYOUT_COMPOSITOR_SUBJECT:"tau-board-layout-compositor__subject",LAYOUT_COMPOSITOR_CANVAS_INCREASER:"tau-board-layout-compositor_cards-compositor__card-space-increaser",LAYOUT_COMPOSITOR_CANVAS_INCREASER_DISABLED:"tau-board-layout-compositor_cards-compositor__card-space-increaser_disabled",LAYOUT_COMPONENTS_SET:"tau-board-layout-components-set",LAYOUT_COMPONENTS_SET_ITEM_LIST:"tau-board-layout-components-set__items-list",LAYOUT_COMPONENTS_SET_ITEM:"tau-board-layout-components-set__item",LAYOUT_COMPONENTS_SET_ITEM_HIDE_BY_SEARCH:"tau-item-hide-by-search",LAYOUT_COMPONENTS_SET_ITEM_NAME:"tau-board-layout-components-set__item-name"},getUnitLineNumber:function(t){return t.data("sections")},setPositionCross:function(t,e,i){t.css({left:e.left+i-3,top:e.top-4})},appendToSection:function(t,e){t.appendTo(e)},getLayoutCompositor:function(t){return t.find("."+this.CLASS_MAP.LAYOUT_COMPOSITOR)},initializeScroll:function(){},setOptionScroll:function(){},destroyScroll:function(){},addDraggableClasses:function(t){t.removeClass(this.CLASS_MAP.BOARD_UNIT_DND_SOURCE).addClass(this.CLASS_MAP.BOARD_UNIT_DND_PROXY)},getPlaceholder:function(t){return t.find("."+this.CLASS_MAP.BOARD_UNIT_DND_PROXY)},enableUnitInCard:function(t){t.removeClass(this.CLASS_MAP.BOARD_UNIT_DND_PROXY+" "+this.CLASS_MAP.BOARD_UNIT_DND_PRE_INSERT).addClass(this.CLASS_MAP.BOARD_UNIT_DND_SOURCE).show()},insertAfterUnit:function(t,e){t.after(e)},insertBeforeUnit:function(t,e){t.before(e)},getUnitHolder:function(t){return t.closest("."+this.CLASS_MAP.BOARD_UNIT)},isOverUnit:function(t){return t.hasClass(this.CLASS_MAP.BOARD_UNIT_DND_SOURCE)&&!t.hasClass(this.CLASS_MAP.BOARD_UNIT_DND_PROXY)&&!t.closest("."+this.CLASS_MAP.LAYOUT_COMPONENTS_SET).length&&!t.closest("."+this.CLASS_MAP.CARD_SECTION).hasClass(this.CLASS_MAP.NOT_DROP)},allowToDrop:function(t){return!t.hasClass(this.CLASS_MAP.NOT_DROP)&&t.parents("."+this.CLASS_MAP.LAYOUT_COMPOSITOR).length},isSectionCardElement:function(t){return t.hasClass(this.CLASS_MAP.CARD_SECTION)},getUnit:function(t){return t},isMultipleLineUnit:function(t){return t.data("sections")>1},isDoubleLineUnit:function(t){return 2==t.data("sections")},isStretchableUnit:function(t){return 1===t.data("sections")&&t.data("isStretchable")===!0},removeFromSection:function(t){this.resetSectionStyles(t.parent(),t),t.remove()},setSectionStyles:function(t,e){var i=this.getUnitLineNumber(e);2==i?t.addClass("tau-card-v2__section_double"):3==i&&t.addClass("tau-card-v2__section_triple")},resetSectionStyles:function(t,e){this.isMultipleLineUnit(e)&&t.removeClass("tau-card-v2__section_double tau-card-v2__section_triple")},insertSectionToCard:function(t){return n.get().bind({},{section:[]}).appendTo(this.getCard(t))},getIncreaser:function(t){return t.find(".i-role-increaser")},disableIncreaser:function(t){return t.addClass(this.CLASS_MAP.LAYOUT_COMPOSITOR_CANVAS_INCREASER_DISABLED)},enableIncreaser:function(t){return t.removeClass(this.CLASS_MAP.LAYOUT_COMPOSITOR_CANVAS_INCREASER_DISABLED)},getCard:function(t){return t.find("."+this.CLASS_MAP.CARD)},getSections:function(t){return t.find("."+this.CLASS_MAP.CARD_SECTION)},setAlignment:function(t,e){t.toggleClass(this.CLASS_MAP.BOARD_UNIT_ALIGNMENT_ALT,!e).toggleClass(this.CLASS_MAP.BOARD_UNIT_ALIGNMENT_BASE,e),t.data("alignment",e?"base":"alt")},isAvailableSpaceOnSection:function(e,i){if(this.isStretchableUnit(i))return this.isAvailableSpaceForStretchableUnit(e,i);if(i.hasClass(this.CLASS_MAP.BOARD_UNIT_MAX_FORMAT)){var n=this.getUnitLineNumber(i);return n>1?this.isAvailableSpaceForMultipleUnit(e,n):!e.children().filter(":not("+this.getUnitTypeSelector(i)+")").length}var a=e.width(),r=e.width(),s=i.outerWidth(!0),_=this;return e.children().filter(":not("+this.getUnitTypeSelector(i)+")").each(function(){r-=_.isStretchableUnit(t(this))?a/2:t(this).outerWidth(!0)}),r>=s},isAvailableSpaceForMultipleUnit:function(e,i){var n=e.find(".tau-board-unit:not(."+this.CLASS_MAP.BOARD_UNIT_DND_PROXY+")").length>0;if(n)return!1;var a=function(t,i){for(var n=0,a=t.call(e,"."+i.CLASS_MAP.CARD_SECTION);a.length>0&&0===a.find(".tau-board-unit:not(."+i.CLASS_MAP.BOARD_UNIT_DND_PROXY+")").length;)n++,a=t.call(a,"."+i.CLASS_MAP.CARD_SECTION);return n},r=a(t().next,this),s=a(t().prev,this);return r+s+1>=i},isAvailableSpaceForStretchableUnit:function(i,n){var a=i.width(),r=e.reduce(i.find("."+this.CLASS_MAP.BOARD_UNIT),function(e,i){var a=t(i);return a.data("unitId")==n.data("unitId")?e:e+a.outerWidth(!0)},0);return a-r>a/2},disableUnitInLibrary:function(t,e){var i=this.getUnitTypeSelector(t);i&&e.find(i).parent().addClass(this.CLASS_MAP.DISABLED).removeClass(this.CLASS_MAP.ACTIVE)},enableUnitInLibrary:function(t,e){var i=this.getUnitTypeSelector(t);i&&e.find(i).parent().removeClass(this.CLASS_MAP.DISABLED+" "+this.CLASS_MAP.ACTIVE)},activateUnitInLibrary:function(e,i){var n=this.getUnitTypeSelector(e),a=t("<div/>");return n&&(a=i.find(n).parent().removeClass(this.CLASS_MAP.DISABLED).addClass(this.CLASS_MAP.ACTIVE)),this.searchInLibrary(i),a},checkAvailableSpaceOnCard:function(i,n,a){return e.reduce(i.filter(":visible"),e.bind(function(e,i){return e||this.isAvailableSpaceOnSection(t(i),n,a)},this),!1)},getUnitTypeSelector:function(t){var e=t.data("unitId");return e&&"[data-unit-id ="+e+"]"||""},hidePlaceholder:function(t){t.hide()},showPlaceholder:function(t){t.show()},showPlaceholderOutLibrary:function(t){this.showPlaceholder(t)},getCloseCross:function(t){return t.find("."+this.CLASS_MAP.CLOSE_BUTTON)},searchInLibrary:function(t,e){if(!e){var i=t.find(".tau-in-text");e=i.val()}var n=t.find("."+this.CLASS_MAP.LAYOUT_COMPONENTS_SET_ITEM_LIST),a=t.find(".tau-empty-placeholder");t.find("."+this.CLASS_MAP.LAYOUT_COMPONENTS_SET_ITEM_NAME+":searchText("+e+")").parent().removeClass(this.CLASS_MAP.LAYOUT_COMPONENTS_SET_ITEM_HIDE_BY_SEARCH),t.find("."+this.CLASS_MAP.LAYOUT_COMPONENTS_SET_ITEM_NAME+":not(:searchText("+e+"))").parent().addClass(this.CLASS_MAP.LAYOUT_COMPONENTS_SET_ITEM_HIDE_BY_SEARCH);var r=n.find("."+this.CLASS_MAP.LAYOUT_COMPONENTS_SET_ITEM).not(".tau-item-hide-by-search").not("."+this.CLASS_MAP.DISABLED);a.toggleClass("tau-item-hide",r.length>0)},highlightUnitsOnCard:function(i,n){var r=i.find(".tau-board-unit");r.removeClass("tau-board-unit_highlighted"),e.each(r,function(e){var i=t(e);a(i.attr("title"),n)&&i.addClass("tau-board-unit_highlighted")})},preInsertUnitOnCard:function(i,n,a){var r,s=e.find(n.filter(":visible"),e.bind(function(e){return this.isAvailableSpaceOnSection(t(e),i,a)},this));if(s){var _=t(s);this.setSectionStyles(_,i),r=i.clone().addClass(this.CLASS_MAP.BOARD_UNIT_DND_PROXY+" "+this.CLASS_MAP.BOARD_UNIT_ALIGNMENT_BASE+" "+this.CLASS_MAP.BOARD_UNIT_DND_PRE_INSERT).removeClass(this.CLASS_MAP.BOARD_UNIT_DND_SOURCE),this.hidePlaceholder(r),this.setAlignment(r,!0);var A=a.find("[data-unit-id="+r.data("unitId")+"]");this.handleDragOverStretchableUnit(r,_,this.getUnitOuterWidthWithMargin(A)),_.append(r)}else r=t("<div/>").remove(),r.length=0;return r},handleDragOverStretchableUnit:function(i,n,a){var r=null,s=this.isStretchableUnit(i);if(s)r=i;else{var _=e.find(n.children(),function(e){return this.isStretchableUnit(t(e))},this);r=_?t(_):null}if(r){var A=i.parent()[0]==n[0],o=i.width()>0?this.getUnitOuterWidthWithMargin(i):a;this.setWidthForStretchable(r,n,-1*(A||s?0:o))}},getStretchableSelector:function(){return'[data-sections="1"][data-is-stretchable="true"]'},getUnitMargin:function(t){return parseInt(t.css("margin-left"))+parseInt(t.css("margin-right"))},getUnitOuterWidth:function(t){return t[0].getBoundingClientRect().width},getUnitOuterWidthWithMargin:function(t){return this.getUnitMargin(t)+this.getUnitOuterWidth(t)},fixLayoutNearStretchable:function(i){e.each(i.find("."+this.CLASS_MAP.CARD_SECTION),function(i){var n=t(i),a=n.find("."+this.CLASS_MAP.BOARD_UNIT),r=e.find(a,function(e){return this.isStretchableUnit(t(e))},this);if(r){var s=e.filter(a,function(e){var i=t(e);return!this.isStretchableUnit(i)&&i.hasClass(this.CLASS_MAP.BOARD_UNIT_ALIGNMENT_BASE)},this);if(s.length>0){var _=s[s.length-1];t(_).addClass(this.CLASS_MAP.BOARD_UNIT_ALIGNMENT_BASE_LAST)}var A=n.find("."+this.CLASS_MAP.BOARD_UNIT_ALIGNMENT_ALT+":last");A&&A.addClass(this.CLASS_MAP.BOARD_UNIT_ALIGNMENT_ALT_LAST)}},this)},freezeStretchableUnits:function(i){e.each(i.find("."+this.CLASS_MAP.BOARD_UNIT),function(e){var i=t(e);i.removeClass(this.CLASS_MAP.BOARD_UNIT_ALIGNMENT_BASE_LAST),i.removeClass(this.CLASS_MAP.BOARD_UNIT_ALIGNMENT_ALT_LAST)},this),e.each(this.getCard(i).find(this.getStretchableSelector()),function(e){var i=t(e);this.setWidthForStretchable(i,i.closest("."+this.CLASS_MAP.CARD_SECTION),0),i.removeClass(this.CLASS_MAP.BOARD_UNIT_MAX_FORMAT)},this)},setWidthForStretchable:function(i,n,a){var r=this.getUnitMargin(i)||4,s=e.reduce(n.find("."+this.CLASS_MAP.BOARD_UNIT),function(e,n){var a=t(n);return a.data("unitId")==i.data("unitId")?e:e+this.getUnitOuterWidthWithMargin(a)},0,this),_=this.getUnitOuterWidth(n)-s-r+(a?a:0);i.css({"max-width":_,width:_,"margin-left":r/2,"margin-right":r/2}),i.removeClass(this.CLASS_MAP.BOARD_UNIT_MAX_FORMAT)},unfreezeStretchableUnit:function(t){t.css({"max-width":"100%",width:"","margin-left":"","margin-right":""}),t.addClass(this.CLASS_MAP.BOARD_UNIT_MAX_FORMAT)},unfreezeStretchableUnits:function(i){e.each(i.find("."+this.CLASS_MAP.CARD).find("."+this.CLASS_MAP.CARD_SECTION),function(i){var n=t(i),a=n.find("."+this.CLASS_MAP.BOARD_UNIT),r=n.find(this.getStretchableSelector()),s=function(t){n.remove('[data-unit-id="'+t.data("unitId")+'"]')},_=function(t){s(t),n.append(t)},A=function(t){s(t),n.prepend(t)};if(r.length>0){this.unfreezeStretchableUnit(r);var o=this.getSortedUnitsInSection(a),S=e.find(o,function(t){return t.isStretchable}).order;this.appendUnitsNearStretchable(o,S,_,A),this.setClassesNearStretchable(o,S),_(r)}},this)},getSortedUnitsInSection:function(i){var n=[],a=0,r=i.length-1;return e.each(i,function(e){var i=t(e),s=this.isStretchableUnit(i);i.hasClass(this.CLASS_MAP.BOARD_UNIT_ALIGNMENT_BASE)?(n.push({align:"base",unit:i,order:a,isStretchable:s}),a++):(n.push({align:"alt",unit:i,order:r,isStretchable:s}),r--)},this),n},appendUnitsNearStretchable:function(t,i,n){e.each(e.sortBy(t,function(t){return t.order}),function(t){t.order<i&&(this.setAlignment(t.unit,!0),n(t.unit))},this),e.each(e.sortBy(t,function(t){return-1*t.order}),function(t){t.order>i&&(this.setAlignment(t.unit,!1),n(t.unit))},this)},setClassesNearStretchable:function(t,i){var n=function(n,a){var r=e.find(t,function(t){return t.order==i+n});r&&r.unit.addClass(a)};e.each(t,function(t){t.unit.removeClass(this.CLASS_MAP.BOARD_UNIT_ALIGNMENT_BASE_LAST),t.unit.removeClass(this.CLASS_MAP.BOARD_UNIT_ALIGNMENT_ALT_LAST)},this),n(-1,this.CLASS_MAP.BOARD_UNIT_ALIGNMENT_BASE_LAST),n(1,this.CLASS_MAP.BOARD_UNIT_ALIGNMENT_ALT_LAST)}})});
define('tau/ui/extensions/board.customize/ui.board.editor.customize.editor.helper',["Underscore","tau/ui/extensions/board.customize/ui.board.editor.customize.editor.helper.base"],function(e,i){return new i});
define('tau/ui/extensions/board.customize/ui.extension.board.editor.customize.dnd',["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/extensions/board.customize/ui.board.editor.customize.editor.helper"],function(e,t,n,r){return n.extend({init:function(e){this._super(e),this.helper=r},"bus afterRender:last  + child.customize.editor.ready:last + child.customize.library.ready:last":function(e,n){var r=this,i=n.element,o=this.helper,s=o.CLASS_MAP,a=function(e){var t=e.offset(),n=t.left,r=t.left+e.outerWidth(!0),i=function(e){return"."+e+":not(."+s.BOARD_UNIT_DND_PROXY+"):visible:not(."+s.BOARD_UNIT_DND_HELPER+"):last"},o=e.children().filter(i(s.BOARD_UNIT_ALIGNMENT_BASE));o.offset()&&(n=o.offset().left+o.outerWidth(!0));var a=e.children().filter(i(s.BOARD_UNIT_ALIGNMENT_ALT));return a.offset()&&(r=a.offset().left),n+(r-n)/2},l=function(e){var t=e.offset(),n=t.left,r=t.left+e.outerWidth(!0);return n+(r-n)/2},c=i.find("."+s.LAYOUT_COMPONENTS_SET),d=null,u=10,f=function(e){return e.clone().addClass(s.BOARD_UNIT_DND_HELPER).removeClass(s.BOARD_UNIT_DND_SOURCE).css({zIndex:"99999",cursor:"move",outline:"none",width:e.outerWidth(!0)}).removeAttr("title")},_=function(e,t,n){var r=e.style.display||"";document.body.style.cursor=e.style.cursor,e.style.display="none";var i=document.elementFromPoint(t,n);return e.style.display=r,i&&i!=document||(i=document.body),i},O=function(e,t,n){return setTimeout(function(){var r=e.parent(),l=o.isDoubleLineUnit(e),c=t.index()!=r.index();if(l&&c){var d;t.index()>r.index()?(d=t.prev(),d.hasClass(s.NOT_DROP)&&(d=t)):(d=t,d.next().length&&d.next().hasClass(s.NOT_DROP)&&(d=d.prev())),t=d,o.setSectionStyles(t,e)}o.appendToSection(e,t),o.handleDragOverStretchableUnit(e,t),l&&c&&o.resetSectionStyles(r,e);var u=a(t)>n;o.setAlignment(o.getPlaceholder(i),u)},u)},h=function(e,t,n){return setTimeout(function(){var r=l(o.getUnitHolder(t));t.hasClass(s.BOARD_UNIT_ALIGNMENT_BASE)?(o.setAlignment(e,!0),r>n?o.insertBeforeUnit(t,e):o.insertAfterUnit(t,e)):(o.setAlignment(e,!1),r>n?o.insertAfterUnit(t,e):o.insertBeforeUnit(t,e)),o.handleDragOverStretchableUnit(e,t.parent().eq(0))},u)},v=function(e){var t=o.activateUnitInLibrary(e,c),n=t.outerHeight();if(t.position()){var r=t.position().top,a=i.find("."+s.LAYOUT_COMPONENTS_SET_ITEM_LIST),l=a.height(),d=r+n-a.position().top<0,u=r-n>l;(d||u)&&a.scrollTo(t)}},T=function(e,n){clearTimeout(d);var r=t(_(n.helper[0],e.clientX,e.clientY)),a=o.getPlaceholder(i),l=!r.closest("."+s.NOT_DROP).length,c=t("."+s.BOARD_UNIT_DND_HELPER);c.toggleClass(s.BOARD_UNIT_DND_NOT_DROP,!l),l?c.css("cursor","move"):c.css("cursor","not-allowed");var u=r.closest("."+s.LAYOUT_COMPONENTS_SET).length;u?(v(n.helper),o.resetSectionStyles(a.parent(),a),o.hidePlaceholder(a)):(o.setSectionStyles(a.parent(),a),o.showPlaceholderOutLibrary(a));var f=o.allowToDrop(r),T=f&&o.isSectionCardElement(r);T&&(d=O(a,r,e.pageX));var D=o.getUnitHolder(r);D.length&&(r=D);var N=o.isOverUnit(r);N&&(o.showPlaceholder(a),o.setOptionScroll(i,{point:{x:e.clientX,y:e.clientY}}),d=h(a,o.getUnit(r),e.pageX))},D=function(e,t){i.removeClass(s.DND_IN_PROGRESS);var n=o.getPlaceholder(i);o.destroyScroll(i),o.getSections(i).removeClass(s.NOT_DROP),i.removeClass(s.NOT_DROP);var a=n.is(":visible");a?(o.enableUnitInCard(n),o.disableUnitInLibrary(t.helper,c)):(o.removeFromSection(n),o.enableUnitInLibrary(t.helper,c)),o.unfreezeStretchableUnits(i),r.fire("public.card.changed",o.getCard(i))},N=function(e){o.initializeScroll(i),o.freezeStretchableUnits(i),i.addClass(s.DND_IN_PROGRESS);var n=t(e.currentTarget);i.removeClass(s.NOT_DROP);var r=o.getSections(i);n.closest("."+s.CARD).length?(n.parent().removeClass(s.NOT_DROP),o.addDraggableClasses(n)):(o.checkAvailableSpaceOnCard(r,n,c)||i.addClass(s.NOT_DROP),o.preInsertUnitOnCard(n,r,c)),r.each(function(e,r){var i=t(r);i.toggleClass(s.NOT_DROP,!o.isAvailableSpaceOnSection(i,n,c))})};o.fixLayoutNearStretchable(i),i.off("mouseover.dnd"),i.on("mouseover.dnd","."+s.BOARD_UNIT_DND_SOURCE,function(e){var n=t(e.currentTarget);n.draggable({appendTo:i,addClasses:!1,containment:'[role="customize"]',helper:function(e){var n=t(e.currentTarget);return f(n)},drag:T,stop:D,start:N})})}})});
define('tau/ui/extensions/board.customize/ui.extension.board.editor.customize.dblclick-handler',["jQuery","tau/components/extensions/component.extension.base","tau/ui/extensions/board.customize/ui.board.editor.customize.editor.helper","Underscore"],function(e,t,i,n){return t.extend({init:function(e){this._super(e),this.helper=i},"bus afterRender:last + child.customize.editor.ready:last + child.customize.library.ready:last":function(t,i){var r=i.element,o=this.helper,c=o.CLASS_MAP,s=r.find("."+c.LAYOUT_COMPONENTS_SET),a=o.getCard(r),d=n.bind(function(t){var i=r.find("."+c.CARD_SECTION),n=e(t.currentTarget),d=o.preInsertUnitOnCard(n,i,s);o.unfreezeStretchableUnits(r),d.length&&(o.disableUnitInLibrary(d,s),o.enableUnitInCard(d,!0),o.getLayoutCompositor(r).scrollTo(d),this.fire("public.card.changed",a))},this),l=n.bind(function(t){var i=e(t.currentTarget);o.removeFromSection(i),o.enableUnitInLibrary(i,s),o.unfreezeStretchableUnit(i),o.getCloseCross(r).hide(),this.fire("public.card.changed",a)},this);s.off("dblclick.customize"),s.on("dblclick.customize","."+c.BOARD_UNIT_DND_SOURCE,d),a.off("dblclick.customize"),a.on("dblclick.customize","."+c.BOARD_UNIT_DND_SOURCE,l)}})});
define('tau/ui/extensions/board.customize/ui.extension.board.editor.customize.card.remove',["jQuery","tau/components/extensions/component.extension.base","tau/ui/extensions/board.customize/ui.board.editor.customize.editor.helper"],function(e,t,i){return t.extend({init:function(e){this._super(e),this.helper=i},"bus afterRender:last + child.customize.editor.ready:last + child.customize.library.ready:last":function(t,i,n,o){function a(e){var t=h.data("unit-id");return e.find('[data-unit-id="'+t+'"]')}var r=this,s=this.helper,d=n.element,u=o.element,h=s.getCloseCross(d);d.on("mouseenter",".tau-board-unit_dnd_source",function(){if(window.clearTimeout(c),!i.element.hasClass(s.CLASS_MAP.DND_IN_PROGRESS)){e(this).addClass("tau-board-unit_hovered");var t=e(this).position(),n=e(this).outerWidth();h.data("unit-id",e(this).data("unit-id")),s.setPositionCross(h,t,n),h.show()}});var c;d.on("mouseleave",".tau-board-unit_dnd_source",function(){e(this).removeClass("tau-board-unit_hovered"),c=window.setTimeout(function(){h.hide()},10)}),d.on("dragstart",".tau-board-unit_dnd_source",function(){e(this).removeClass("tau-board-unit_hovered"),h.hide()}),h.on("mouseenter",function(){var t=a(e(this).parent());t.addClass("tau-board-unit_hovered"),window.clearTimeout(c)}),h.on("mouseleave",function(){var t=a(e(this).parent());t.removeClass("tau-board-unit_hovered"),h.hide()}),h.on("click",function(){var t=a(e(this).parent());s.removeFromSection(t),a(u).parent().removeClass("tau-is-disabled"),h.hide(),r.fire("public.card.changed",s.getCard(d))})}})});
define('tau/models/board.editor.customize/model.board.editor.customize.base',["Underscore","jQuery","tau/core/extension.base","tau/ui/extensions/board.customize/ui.board.editor.customize.editor.helper"],function(t,e,i,n){return i.extend({saveSettings:function(e,i,n,s){var a=this.getType(i);return e.get({fields:["cardSettings"]}).then(function(i){var r=i.cardSettings,u=r&&r[a]&&r[a][n];if(t.isEqual(u,s))return{};var d=r||{};return s?(d[a]||(d[a]={}),d[a][n]=s):delete d[a][n],e.set({set:{cardSettings:d}})},this)},"bus public.listSizes.changed:last + public.types.changed:last + public.card.changed + boardSettings.ready:last":function(i,s,a,r,u){var d=u.boardSettings,c=this.getCustomizeSection(r),l=t.map(c,function(i){return t.map(e(i).find("."+n.CLASS_MAP.BOARD_UNIT),function(t){var i=e(t);return{id:i.data("unit-id"),alignment:i.data("alignment")}})});this.fire("public.settings.saved",this.saveSettings(d,a,s.size,l))},"bus public.listSizes.changed:last + public.types.changed:last + boardSettings.ready:last + public.resetToDefault":function(e,i,n,s){var a=s.boardSettings;this.saveSettings(a,n,i.size,null).then(t.bind(function(){this.fire("public.types.changed",n)},this))}})});
define('tau/models/board.editor.customize/model.board.editor.customize.board',["Underscore","jQuery","tau/models/board.editor.customize/model.board.editor.customize.base","tau/ui/extensions/board.customize/ui.board.editor.customize.editor.helper"],function(e,t,o,i){return o.extend({getType:function(e){return e[0]},getCustomizeSection:function(e){return e.find("."+i.CLASS_MAP.CARD_SECTION)}})});
define('tau/components/component.board.editor.customize.board',["Underscore","tau/components/component.container.with-shared-events","tau/ui/templates/board.editor.customize/ui.template.board.editor.customize.board","tau/ui/extensions/board.container/ui.extension.board.container.events","tau/ui/extensions/board.customize/ui.extension.board.editor.customize.dnd","tau/ui/extensions/board.customize/ui.extension.board.editor.customize.dblclick-handler","tau/ui/extensions/board.customize/ui.extension.board.editor.customize.card.remove","tau/models/board.editor.customize/model.board.editor.customize.board","tau/core/extension.configurator"],function(e,o,t,i,r,a,n,s,u){return{create:function(d){var c={extensions:[u,r,a,n,i,s].concat(d.extensions||[]),template:t};return c.layout="selectable",c.children=[{type:"board.editor.customize.types",name:"customize.types",selector:".tau-board-layout-compositor"},{type:"board.editor.customize.editor",name:"customize.editor",selector:".tau-board-layout-compositor"},{type:"board.editor.customize.library.board",name:"customize.library",selector:".tau-board-layout-components-set"}],o.create(e.extend(d,c))}}});
define('tau/ui/templates/board.editor.customize/ui.template.board.editor.customize.editor.section',["tau/core/templates-factory","tau/ui/extensions/board.plus/ui.board.plus.utils"],function(t,i){var e={name:"board.editor.customize.editor.section",engine:"jqote2",customFunctions:{getSectionAdditionalClass:i.getClassForCustomizeSection},markup:["<% var configurator = this.configurator; %>",'<div class="tau-card-v2__section <%=fn.getSectionAdditionalClass(this.section)%>">',"<%this.section.forEach(function(item){%>",'<%= fn.sub(item.unit.getTemplateName("card"), [{settings:item.unit.settings,data:item.unit.sampleData,configurator:configurator}])%>',"<%});%>","</div>"],dependencies:[]};return t.register(e)});
define('tau/ui/templates/board.editor.customize/ui.template.board.editor.customize.editor',["tau/core/templates-factory","tau/ui/templates/board.editor.customize/ui.template.board.editor.customize.editor.section"],function(t){var o={name:"board.editor.customize.editor",engine:"jqote2",markup:["<div>","<%if (this.size && this.type) {%>",'<div class="tau-ui-size-<%=this.size%>">','<div class="tau-board-layout-compositor__canvas">','<div class="tau-board-layout-compositor__subject tau-card-v2 tau-card-v2_type_<%=this.type%>">','<div class="tau-board-layout-close"></div>',"<% var configurator = this.configurator; %>","<% this.cardLayout.forEach(function(section) {%>",'<%= fn.sub("board.editor.customize.editor.section", {section: section, configurator: configurator}) %>',"<% }); %>","</div>","<% if(this.isShowIncreaser) {%>",'<button type="button" class="tau-board-layout-compositor_cards-compositor__card-space-increaser <%if(this.isDisabledIncreaser){%>tau-board-layout-compositor_cards-compositor__card-space-increaser_disabled<%};%> i-role-increaser">+</button>',"<% };%>","</div>","</div>",'<button style="margin-top: 20px" <%= this.isDefaultSettings?"disabled":""%> class="tau-btn  i-role-reset">Reset to default</button>',"<%};%>","</div>"],dependencies:[]};return t.register(o)});
define('tau/models/board.editor.customize/model.board.editor.customize.editor',["Underscore","tau/core/extension.base"],function(e,n){return n.extend({"bus beforeInit":function(){this.fire("dataBind",{})},"bus configurator.ready:last + layout.changed":function(e,n,t){this.refreshLayout(n,t)},refreshLayout:function(n,t){t.configurator=n,t.cardLayout=e.map(t.cardLayout,function(n){return e.map(n,function(n){var t=e.clone(n.unit);return t.settings={classes:["dnd_source","maximized"],isDesignMode:!0,metaData:{id:n.id,title:t.name,alignment:n.alignment}},n.unit=t,n})}),this.fire("refreshData",t)}})});
define('tau/models/board.editor.customize/model.board.editor.customize.settings',["Underscore","jQuery","tau/core/extension.base","tau/models/board.customize.units/const.card.sizes"],function(e,t,a,s){return a.extend({"bus public.listSizes.changed:last + public.types.changed:last + cardLayoutFactory.ready:last":function(e,t,a,s){this.layoutChanged(t.size,a,s)},"bus public.listSizes.changed:last + public.types.changed:last + cardLayoutFactory.ready:last + acidChanged":function(e,t,a,s){this.layoutChanged(t.size,a,s)},_getLayout:function(t,a,i){var n=a[0];t.getCardLayoutByTypeAndSize(n,i).done(e.bind(function(e){var t=e.length;this.fire("layout.changed",{cardLayout:e,type:n,types:a,size:i,isDefaultSettings:!e||e.isDefault,isShowIncreaser:i==s.XL||i==s.L,isDisabledIncreaser:t>=10})},this))},layoutChanged:function(e,t,a){t=t||[],s.has(e)&&t.length&&this._getLayout(a,t,e)}})});
define('tau/ui/extensions/board.customize/ui.extension.board.editor.customize.resizer-card',["jQuery","tau/components/extensions/component.extension.base","tau/ui/extensions/board.customize/ui.board.editor.customize.editor.helper"],function(e,r,n){return r.extend({"bus elementRefreshedWithData":function(r,t){var s=t.data;if(s.isShowIncreaser){var c=t.element,o=n.getIncreaser(c),a=function(){n.insertSectionToCard(c),this.fire("public.card.changed",n.getCard(c)),n.MAX_SECTION==n.getSections(c).length&&n.disableIncreaser(o)}.bind(this),i=function(r){var t=e(r.currentTarget),s=c.closest("."+n.CLASS_MAP.EDITOR);0!==t.children().length||1===n.getSections(c).length||s.hasClass(n.CLASS_MAP.DND_IN_PROGRESS)||t.addClass(n.CLASS_MAP.CARD_SECTION_REMOVER)},d=function(r){e(r.currentTarget).removeClass(n.CLASS_MAP.CARD_SECTION_REMOVER)},S=function(r){e(r.currentTarget).remove(),this.fire("public.card.changed",n.getCard(c)),n.MAX_SECTION>n.getSections(c).length&&n.enableIncreaser(o)}.bind(this),u=n.getCard(c);u.off("mouseover.decreaser"),u.off("mouseout.decreaser"),u.off("click.decreaser"),u.on("mouseover.decreaser","."+n.CLASS_MAP.CARD_SECTION,i),u.on("mouseout.decreaser","."+n.CLASS_MAP.CARD_SECTION,d),u.on("click.decreaser","."+n.CLASS_MAP.CARD_SECTION_REMOVER,S),o.off("click.increaser"),o.on("click.increaser",a)}}})});
define('tau/ui/extensions/board.customize/ui.extension.board.editor.customize.card.reset',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,n,t){return t.extend({"bus elementRefreshedWithData":function(n,t){t.element.find(".i-role-reset").click(e.bind(function(){this.fire("public.resetToDefault")},this))},"bus elementRefreshedWithData:last + public.card.changed":function(e,n){n.element.find(".i-role-reset").prop("disabled",!1)}})});
define('tau/ui/extensions/board.customize/ui.extension.board.editor.customize.editor',["jQuery","tau/components/extensions/component.extension.base","tau/ui/extensions/board.customize/ui.board.editor.customize.editor.helper"],function(e,t,n){return t.extend({"bus elementRefreshedWithData":function(e,t){this.fire("parent.ready",t)},"bus elementRefreshedWithData:last + public.searchText.changed":function(e,t,i){n.highlightUnitsOnCard(t.element,i)}})});
define('tau/ui/extensions/customizedLayout/ui.extension.customizedLayout.cardLayout.factory',["Underscore","tau/core/extension.base","tau/services/customize/service.customize.card.layout.factory"],function(e,r,t){return r.extend({"bus configurator.ready:last + boardSettings.ready":function(e,r,a){var o=new t(r,a.boardSettings);this.fire("cardLayoutFactory.ready",o)}})});
define('tau/components/component.board.editor.customize.editor',["Underscore","tau/components/component.creator","tau/ui/templates/board.editor.customize/ui.template.board.editor.customize.editor","tau/models/board.editor.customize/model.board.editor.customize.editor","tau/models/board.editor.customize/model.board.editor.customize.settings","tau/ui/extensions/board.customize/ui.extension.board.editor.customize.resizer-card","tau/ui/extensions/board.customize/ui.extension.board.editor.customize.card.reset","tau/ui/extensions/board.customize/ui.extension.board.editor.customize.editor","tau/core/extension.configurator","tau/ui/extensions/customizedLayout/ui.extension.customizedLayout.cardLayout.factory"],function(e,o,t,i,r,u,s,a,d,n){return{create:function(e){var c={name:"board.editor.customize.editor",extensions:[r,d,n,u,s,a,i],template:t};return e["queue.bus"]=!0,o.create(c,e)}}});
define('tau/ui/templates/board.editor.customize/ui.template.board.editor.customize.editor.list.unit-name',["tau/core/templates-factory"],function(t){var a={name:"board.editor.customize.editor.list.unit-name",engine:"jqote2",markup:['<div class="tau-canvas-board-unit-cell tau-canvas-board-unit-cell_not_dnd tau-canvas-name-cell">','<div class="tau-board-unit-label">','<div class="tau-entity-list">',"<% this.unit.settings.metaData.typesNames.forEach(function(type,index){%>","<% if (index > 0) { %>",'<span class="tau-cap">, </span>',"<% } %>",'<span class="tau-cap tau-<%= type.typeId%>"><%= type.long%></span>',"<%});%>","</div>","</div>",'<% this.unit.settings.classes = ["type_entity-name_list_canvas"];%>','<div class="tau-board-unit-wrap">','<%= fn.sub(this.unit.getTemplateName("card"), [{settings:this.unit.settings,data:this.unit.sampleData,configurator:this.configurator}])%>',"</div>","</div>"]};return t.register(a)});
define('tau/ui/templates/board.editor.customize/ui.template.board.editor.customize.editor.list.unit',["tau/core/templates-factory"],function(t){var a={name:"board.editor.customize.editor.list.unit",engine:"jqote2",markup:['<div data-rank="<%=this.unit.settings.metaData.rank%>" class="tau-canvas-board-unit-cell">','<div class="tau-board-unit-label">',"<%!this.unit.settings.metaData.header%>","<% this.unit.settings.metaData.typesNames.forEach(function(type, index) {%>","<% if(this.unit.settings.metaData.showTypes) {%>",' <span class="tau-entity tau-<%= type.typeId%>"><%= type.short%></span>',"<%}%>","<%}, this);%>","</div>",'<div class="tau-board-unit-wrap">','<%= fn.sub(this.unit.getTemplateName("card"), [{settings:this.unit.settings,data:this.unit.sampleData,configurator:this.configurator}])%>',"</div>","</div>"]};return t.register(a)});
define('tau/ui/templates/board.editor.customize/ui.template.board.editor.customize.editor.list',["tau/core/templates-factory","tau/ui/templates/board.editor.customize/ui.template.board.editor.customize.editor.list.unit-name","tau/ui/templates/board.editor.customize/ui.template.board.editor.customize.editor.list.unit"],function(t){var i={name:"board.editor.customize.editor.list",engine:"jqote2",markup:["<div>","<%if (this.size && this.types.length > 0) {%>",'<div class="tau-list-canvas">',"<% this.cardLayout.forEach(_.bind(function(item, index) { %>","<%if(index === 0){%>",'<%= fn.sub("board.editor.customize.editor.list.unit-name", [{unit:item.unit,configurator:this.configurator}])%>',"<%} else {%>",'<%= fn.sub("board.editor.customize.editor.list.unit", [{unit:item.unit,configurator:this.configurator}])%>',"<%}%>","<% }, this)); %>",'<div class="tau-board-layout-close"></div>',"</div>","<%};%>","</div>"],dependencies:[]};return t.register(i)});
define('tau/models/board.editor.customize/model.board.editor.customize.editor.list',["Underscore","tau/models/board.editor.customize/model.board.editor.customize.editor","tau/core/termProcessor","tau/ui/extensions/board.plus/ui.board.plus.utils","tau/utils/utils.customFields.list"],function(e,t,n,r,i){return t.extend({refreshLayout:function(t,s){s.configurator=t;var a=new n,o=r.orderListUnits(s.cardLayout);s.cardLayout=e.map(o,function(t){var n=e.clone(t.unit),r=e.intersection(s.types,e.chain(n.settings).pluck("types").flatten().value()),o=i.getListHeader(void 0!==n.header?n.header:n.name);return n.settings={classes:["dnd_source","maximized"],isDesignMode:!0,metaData:{id:t.id,rank:t.rank,title:n.name,header:o,alignment:t.alignment,typesNames:e.map(r,function(e){return{"long":a.getTerm(e,"names"),"short":a.getTerm(e,"iconSmall"),typeId:e}}),showTypes:s.types.length>r.length}},t.unit=n,t}),this.fire("refreshData",s)}})});
define('tau/models/board.editor.customize/model.board.editor.customize.settings.list',["Underscore","jQuery","tau/models/board.editor.customize/model.board.editor.customize.settings","tau/models/board.customize.units/const.card.sizes"],function(t,e,i){return i.extend({_getLayout:function(e,i,n){e.getLayoutFactory().then(function(e){var o=t.flatten(t.toArray(e(i))),u=t.chain(o).uniq(function(t){return t.id}).value();this.fire("layout.changed",{cardLayout:u,isDefaultSettings:!o||o.isDefault,types:i,size:n})}.bind(this))}})});
define('tau/services/customize/service.customize.card.layout.factory.newlist.customizeCards',["jQuery","Underscore","tau/services/customize/service.customize.card.layout.factory.newlist"],function(e,t,r){return r.extend({_replaceShortUnitsWithLong:function(e){return e}})});
define('tau/ui/extensions/board.customize/extension.new.list.cardLayout.customize',["Underscore","tau/core/extension.base","tau/services/customize/service.customize.card.layout.factory.newlist.customizeCards"],function(e,t,r){return t.extend({"bus configurator.ready:last + boardSettings.ready":function(e,t,a){this.fire("cardLayoutFactory.ready",new r(t,a.boardSettings))}})});
define('tau/components/component.board.editor.customize.editor.list',["Underscore","tau/components/component.creator","tau/ui/templates/board.editor.customize/ui.template.board.editor.customize.editor.list","tau/models/board.editor.customize/model.board.editor.customize.editor.list","tau/models/board.editor.customize/model.board.editor.customize.settings.list","tau/ui/extensions/board.customize/ui.extension.board.editor.customize.editor","tau/core/extension.configurator","tau/ui/extensions/board.customize/extension.new.list.cardLayout.customize"],function(e,t,o,i,r,s,u,d){return{create:function(e){var a={name:"board.editor.customize.editor.list",extensions:[r,u,d,s,i],template:o};return e["queue.bus"]=!0,t.create(a,e)}}});
define('tau/ui/templates/board.editor.customize/ui.template.board.editor.customize',["tau/core/templates-factory"],function(e){var t={name:"board.editor.customize",engine:"jqote2",markup:['<div class="tau-board-layout-customizer">','<div class="tau-board-layout-customize-hint"></div>',"</div>"],dependencies:[]};return e.register(t)});
define('tau/ui/extensions/board.customize/ui.extension.board.editor.customize',["jQuery","tau/components/extensions/component.extension.base"],function(e,t){return t.extend({"bus public.listSizes.changed + afterRender:last":function(e,t,i){var o=i.element;o.toggleClass("i-role-show-hint",1===t.size)},"bus componentsCreated":function(e,t){this.childrenComponents=_.reduce(t,function(e,t){return e[t.config.name]=t.component,e},{}),this.bindComponents()},bindComponents:function(){this.childrenComponents["customize.sizes"].on("public.listSizes.changed",function(e,t){this.childrenComponents["board.editor.customize.board"]&&this.childrenComponents["board.editor.customize.board"].fire("public.listSizes.changed",t),this.childrenComponents["board.editor.customize.list"]&&this.childrenComponents["board.editor.customize.list"].fire("public.listSizes.changed",t),this.fire("public.listSizes.changed",t)}.bind(this))},init:function(e){this._super(e),this.children={}},"bus afterRenderAll + configurator.ready:last":function(e,t,i){if(i.getFeaturesService().isEnabled("board.customize.list")){var o=t.element.find(".tau-board-layout-list-module"),n=t.element.find(".tau-board-layout-cards-module");o.tauCoverView(),n.addClass("tau-board-layout-hide-module")}},"bus afterRenderAll:last + public.listSizes.changed + configurator.ready:last + componentsCreated:last":function(e,t,i,o){if(o.getFeaturesService().isEnabled("board.customize.list")){var n=t.element.find(".tau-board-layout-list-module"),s=t.element.find(".tau-board-layout-cards-module");"list"===i.size?(n.tauCoverView("show"),s.addClass("tau-board-layout-hide-module")):(n.tauCoverView("hide"),s.removeClass("tau-board-layout-hide-module"))}}})});
define('tau/components/component.board.editor.customize',["Underscore","tau/components/component.container","tau/ui/templates/board.editor.customize/ui.template.board.editor.customize","tau/ui/extensions/board.container/ui.extension.board.container.events","tau/ui/extensions/board.customize/ui.extension.board.editor.customize","tau/core/extension.configurator"],function(e,t,o,i,n,r){return{create:function(s){var a=s.context.configurator,u=a.getFeaturesService().isEnabled("board.customize.list"),c={extensions:[r,n,i].concat(s.extensions||[]),template:o};return s["queue.bus"]=!0,c.children=[{type:"board.editor.customize.sizes",name:"customize.sizes"},{type:"board.editor.customize.board",name:"board.editor.customize.board"}],u&&c.children.push({type:"board.editor.customize.list",name:"board.editor.customize.list"}),t.create(e.extend(s,c))}}});
define('tau/ui/templates/board.editor.customize/ui.template.board.editor.customize.library',["tau/core/templates-factory"],function(t){var e={name:"board.editor.customize.library",engine:"jqote2",markup:['<div class="tau-customizer-library">','<div class="tau-board-layout-components-set__filter tau-searchbox">','<input type="text" class="tau-in-text" placeholder="Search" value="<%!this.search%>"><button class="tau-btn tau-search" type="button"></button>',"</div>",'<div class="tau-empty-placeholder tau-board-layout-components-set__item-name<% if (this.units.length) {%> tau-item-hide<%}%>">Nothing found</div></li>','<ul class="tau-board-layout-components-set__items-list">',"<% var configurator = this.configurator; %>","<% _.forEach(this.units, function(item){ %>","<li class=\"tau-board-layout-components-set__item <%= item.visible?'':'tau-is-disabled' %>\">",'<%= fn.sub(item.unit.getTemplateName("card"), [{settings:item.unit.settings, data:item.unit.sampleData, configurator: configurator}]) %>','<div class="tau-board-layout-components-set__item-name"><%= item.unit.name %></div>',"</li>","<% }); %>","</ul>","</div>"],dependencies:[]};return t.register(e)});
define('tau/ui/extensions/board.customize/ui.extension.board.editor.customize.library',["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/extensions/board.customize/ui.board.editor.customize.editor.helper"],function(e,t,n,a){return n.extend({_search:function(e){var t=e.val();this.fire("public.searchText.changed",t)},setSearchAndHandler:function(t){var n=this,a=null,i=null,r=t.find(".tau-in-text");r.off("input.search keydown.search");var s=e.bind(function(){clearTimeout(i),a!=r.val()&&(i=setTimeout(e.bind(n._search,this,r),50))},this);this._search(r),r.on("input.search keydown.search",s)},"bus afterRender":function(e,t){this.setSearchAndHandler(t.element)},"bus elementRefreshedWithData":function(e,t){this.setSearchAndHandler(t.element),this.fire("parent.ready",t)},"bus elementRefreshedWithData:last + public.card.changed":function(e,t){this._search(t.element.find(".tau-in-text"))},"bus elementRefreshedWithData:last + public.searchText.changed":function(e,t,n){a.searchInLibrary(t.element,n)}})});
define('tau/components/component.board.editor.customize.library.base',["Underscore","tau/components/component.creator","tau/ui/templates/board.editor.customize/ui.template.board.editor.customize.library","tau/ui/extensions/board.customize/ui.extension.board.editor.customize.library","tau/core/extension.configurator"],function(e,t,o,r,i){return{create:function(e,n){var a={name:"board.editor.customize.library",extensions:e.extensions.concat([r,i]),template:o};return n["queue.bus"]=!0,t.create(a,n)}}});
define('tau/models/board.editor.customize/model.board.editor.customize.library',["Underscore","jQuery","tau/core/extension.base","tau/core/termProcessor"],function(t,e,n,i){return n.extend({"bus beforeInit":function(n,i){var r=i.config.context.configurator,a=r.getAppStateStore();this.fire("dataBind",{units:[],search:""});var s=t.bind(function(){var n=r.getUnitsRegistry(),i=r.getCustomFieldsUnitsFactory(),a=i.getAllUnits();e.when(n.units,a).then(t.bind(function(e,n){this.fire("units.ready",t.flatten([t.values(e),n]))},this))},this);s(),a.unbind({listener:this}),a.bind({fields:["acid"],listener:this,callback:function(){this.fire("acidChanged"),s()}})},"bus configurator.ready + destroy":function(t,e){var n=e.getAppStateStore();n.unbind({listener:this})},"bus public.searchText.changed":function(t,e){this.searchText=e},"bus configurator.ready:last + units.ready:last + layout.changed:last":function(e,n,r,a){function s(e,n){return t.any(e.types,function(t){return n.isApplicableByTypeAndSize(t,e.size)})}var u=new i,o=t.chain(a.cardLayout).flatten().map(function(t){return[t.id,!0]}).object().value(),c=t.chain(r).filter(function(t){return s(a,t)}).uniq(function(t){return t.id}).sortBy(function(t){return t.name}).sortBy(function(t){return t.priority||-99999}).map(function(e){var n=t.clone(e),i=t.intersection(a.types,t.chain(n.settings).map(function(t){return t.types}).flatten().value());return n.rank=i.length,n.settings={classes:["dnd_source","maximized"],isDesignMode:!0,metaData:{rank:i.length,id:e.id,title:e.name,header:void 0!==n.header?n.header:n.name,types:i,typesNames:t.map(i,function(t){return{"long":u.getTerm(t,"names"),"short":u.getTerm(t,"iconSmall"),typeId:t}}),showTypes:a.types.length>i.length}},{unit:n,visible:!o[n.id],unitId:n.id}}).value();this.fire("public.unit.readyForLibrary",c),this.fire("refreshData",{units:c,search:this.searchText||"",configurator:n})}})});
define('tau/components/component.board.editor.customize.library.board',["tau/components/component.board.editor.customize.library.base","tau/ui/extensions/customizedLayout/ui.extension.customizedLayout.cardLayout.factory","tau/models/board.editor.customize/model.board.editor.customize.settings","tau/models/board.editor.customize/model.board.editor.customize.library"],function(o,e,t,r){return{create:function(i){var a={name:"board.editor.customize.library.board",extensions:[e,t,r].concat(i.extensions||[])};return o.create(a,i)}}});
define('tau/models/board.editor.customize/model.board.editor.customize.library.list',["Underscore","jQuery","tau/models/board.editor.customize/model.board.editor.customize.library"],function(r,e,t){return t.extend({"bus configurator.ready:last + units.ready:last + layout.changed:last":function(e,t,i,n){var o=r.filter(i,function(r){return r.hideInLibrary!==!0});this._super(e,t,o,n)}})});
define('tau/components/component.board.editor.customize.library.list',["tau/components/component.board.editor.customize.library.base","tau/ui/extensions/board.customize/extension.new.list.cardLayout.customize","tau/models/board.editor.customize/model.board.editor.customize.settings.list","tau/models/board.editor.customize/model.board.editor.customize.library.list"],function(e,t,o,i){return{create:function(r){var s={name:"board.editor.customize.library.list",extensions:[t,o,i].concat(r.extensions||[])};return e.create(s,r)}}});
define('tau/ui/templates/board.editor.customize/ui.template.board.editor.customize.list',["tau/core/templates-factory"],function(o){var t={name:"board.editor.customize.list",engine:"jqote2",markup:['<div class="tau-board-layout-list-module i-role-module-customize">','<div class="tau-shadow">','<div class="tau-customize-list-lanes-panel"></div>','<div class="tau-board-layout-compositor tau-board-layout-compositor_list-compositor">',"</div>",'<div class="tau-board-layout-components-set"></div>',"</div>","</div>"],dependencies:[]};return o.register(t)});
define('tau/ui/templates/board.editor.customize/ui.template.board.editor.customize.types.list',["tau/core/templates-factory"],function(t){var i={name:"board.editor.customize.types.list",engine:"jqote2",markup:["<div><form>","<% _.forEach(this.x, function(item){ %>",'<input type="radio" name="customize_entities" value=\'<%= JSON.stringify([item.id]) %>\' ','<% if (this.x.isDisabled) { %> disabled <% } %> class="tau-input-hidden" />','<button type="button" class="i-role-entities tau-btn tau-y-lane-value','<% if (this.x.isDisabled) { %> tau-disabled<% } %>"',"<% if (this.x.isDisabled) { %> disabled<% } %>","><%!item.name %></button>","<% }, this); %>","<% _.forEach(this.y, function(item){ %>",'<input type="radio" name="customize_entities" value=\'<%= JSON.stringify([item.id]) %>\' ','<% if (this.y.isDisabled) { %> disabled <% } %> class="tau-input-hidden" />','<button type="button" class="i-role-entities tau-btn tau-x-lane-value','<% if (this.y.isDisabled) { %> tau-disabled<% } %>"',"<% if (this.y.isDisabled) { %> disabled<% } %>","><%!item.name %></button>","<% }, this); %>",'<input type="radio" name="customize_entities" value=\'<%= JSON.stringify(_.map(this.cells,function(item){ return item.id})) %>\' ','<% if (this.defaultChecked["cells"]) { %> checked="checked" <% } %> class="tau-input-hidden" />','<button type="button" class="i-role-entities tau-btn','<% if (this.defaultChecked["cells"]) { %> tau-checked<% } %>"><%! _.map(this.cells,function(item){ return item.name}).join(", ") %>',"</button>","</form></div>"]};return t.register(i)});
define('tau/ui/extensions/board.customize/ui.board.editor.customize.editor.helper.list',["Underscore","tau/ui/extensions/board.customize/ui.board.editor.customize.editor.helper.base","tau/ui/templates/board.editor.customize/ui.template.board.editor.customize.editor.list.unit","tau/utils/utils.customFields.list"],function(t,e,n,i){var s=function(){};$.widget("tau.pscrollerForCustomize",$.ui.pscroller,{setPoint:function(t){this.__setPoint(t)}});var a=e.extend({init:function(){this.CLASS_MAP=t.defaults({CARD_SECTION:"tau-list-canvas",CARD:"tau-list-canvas"},this.CLASS_MAP)},setUnits:function(t){this.units=t},setConfigurator:function(t){this.configurator=t},getUnitLineNumber:function(){return 0},initializeScroll:function(t){this.getLayoutCompositor(t).pscrollerForCustomize().pscrollerForCustomize("enable")},setOptionScroll:function(t,e){this.getLayoutCompositor(t).pscrollerForCustomize("setPoint",e.point)},destroyScroll:function(t){this.getLayoutCompositor(t).pscrollerForCustomize("destroy")},appendToSection:function(t){this.showPlaceholder(t)},getPlaceholder:function(t){return t.find("."+this.CLASS_MAP.BOARD_UNIT_DND_PROXY).find(".tau-board-unit")},addDraggableClasses:function(t){t.closest(".tau-canvas-board-unit-cell").addClass(this.CLASS_MAP.BOARD_UNIT_DND_PROXY)},enableUnitInCard:function(t,e){t.addClass(this.CLASS_MAP.BOARD_UNIT_DND_SOURCE).closest(".tau-canvas-board-unit-cell").removeClass(this.CLASS_MAP.BOARD_UNIT_DND_PROXY+" "+this.CLASS_MAP.BOARD_UNIT_DND_PRE_INSERT).show(),e&&t.animateWithCss({cssClassName:"tau-operation_unit_added",offsetTimeout:-40})},isSectionCardElement:function(t){return this._super(t)||t.closest(".tau-canvas-board-unit-cell").hasClass("tau-canvas-board-unit-cell_not_dnd")},insertAfterUnit:function(t,e){t.closest(".tau-canvas-board-unit-cell").after(e.closest(".tau-canvas-board-unit-cell"))},insertBeforeUnit:function(t,e){t.closest(".tau-canvas-board-unit-cell").before(e.closest(".tau-canvas-board-unit-cell"))},getUnitHolder:function(t){return t.closest(".tau-canvas-board-unit-cell")},getUnit:function(t){return t.find("."+this.CLASS_MAP.BOARD_UNIT)},isOverUnit:function(t){return t.hasClass("tau-canvas-board-unit-cell")&&!t.hasClass("tau-canvas-board-unit-cell_not_dnd")&&!t.hasClass(this.CLASS_MAP.BOARD_UNIT_DND_PROXY)&&!t.closest("."+this.CLASS_MAP.LAYOUT_COMPONENTS_SET).length&&!t.closest("."+this.CLASS_MAP.CARD_SECTION).hasClass(this.CLASS_MAP.NOT_DROP)},isMultipleLineUnit:function(){return!1},isDoubleLineUnit:function(){return!1},isStretchableUnit:function(){return!1},removeFromSection:function(t){t.closest(".tau-canvas-board-unit-cell").remove()},setSectionStyles:s,resetSectionStyles:s,insertSectionToCard:s,isAvailableSpaceOnSection:function(){return!0},isAvailableSpaceForMultipleUnit:function(){return!0},isAvailableSpaceForStretchableUnit:function(){return!0},checkAvailableSpaceOnCard:function(){return!0},hidePlaceholder:function(t){t.closest(".tau-canvas-board-unit-cell").hide()},showPlaceholder:function(t){t.closest(".tau-canvas-board-unit-cell").show()},showPlaceholderOutLibrary:s,preInsertUnitOnCard:function(e,n){var s,a=n;if(a.length){this.setSectionStyles(a,e);var o=e.data("unitId"),r=t.find(this.units,function(t){return t.unitId==o}),l=this.renderUnitCell(r.unit);s=l.find(".tau-board-unit"),l.addClass(this.CLASS_MAP.BOARD_UNIT_DND_PROXY+" "+this.CLASS_MAP.BOARD_UNIT_DND_PRE_INSERT),s.addClass(this.CLASS_MAP.BOARD_UNIT_ALIGNMENT_BASE),this.hidePlaceholder(s),this.setAlignment(s,!0);var u=l.data("rank"),c=a.find("[data-rank="+u+"]");if(o.indexOf("custom_field")>=0){var d=l.find(".tau-board-unit-label");d.text(i.getListHeader(d.text()))}var h=c.last();h.length?h.after(l):a.append(l)}else s=$("<div/>").remove(),s.length=0;return s},handleDragOverStretchableUnit:s,renderUnitCell:function(t){return n.render({unit:t,configurator:this.configurator})},fixLayoutNearStretchable:s,freezeStretchableUnits:s,unfreezeStretchableUnit:s,unfreezeStretchableUnits:s});return new a});
define('tau/ui/extensions/board.customize/ui.extension.board.editor.customize.initHelperList',["tau/ui/extensions/board.customize/ui.board.editor.customize.editor.helper.list"],function(i){var t={init:function(t){this._super(t),this.helper=i},"bus public.unit.readyForLibrary":function(i,t){this.helper.setUnits(t)},"bus configurator.ready":function(i,t){this.helper.setConfigurator(t)}};return t});
define('tau/ui/extensions/board.customize/ui.extension.board.editor.customize.dnd.list',["tau/ui/extensions/board.customize/ui.extension.board.editor.customize.dnd","tau/ui/extensions/board.customize/ui.extension.board.editor.customize.initHelperList"],function(e,i){return e.extend(_.defaults({},i))});
define('tau/ui/extensions/board.customize/ui.extension.board.editor.customize.dblclick-handler.list',["tau/ui/extensions/board.customize/ui.extension.board.editor.customize.dblclick-handler","tau/ui/extensions/board.customize/ui.extension.board.editor.customize.initHelperList"],function(e,i){return e.extend(_.defaults({},i))});
define('tau/ui/extensions/board.customize/ui.extension.board.editor.customize.card.remove.list',["tau/ui/extensions/board.customize/ui.extension.board.editor.customize.card.remove","tau/ui/extensions/board.customize/ui.extension.board.editor.customize.initHelperList"],function(e,i){return e.extend(_.defaults({},i))});
define('tau/models/board.editor.customize/model.board.editor.customize.list',["Underscore","jQuery","tau/models/board.editor.customize/model.board.editor.customize.base","tau/ui/extensions/board.customize/ui.board.editor.customize.editor.helper.list","tau/ui/extensions/board.plus/ui.board.plus.utils"],function(e,t,o,i,u){return o.extend({getType:function(e){return u.getListKeyByTypes(e)},getCustomizeSection:function(e){return[e]}})});
define('tau/components/component.board.editor.customize.list',["Underscore","tau/components/component.container.with-shared-events","tau/ui/templates/board.editor.customize/ui.template.board.editor.customize.list","tau/ui/templates/board.editor.customize/ui.template.board.editor.customize.types.list","tau/ui/extensions/board.container/ui.extension.board.container.events","tau/ui/extensions/board.customize/ui.extension.board.editor.customize.dnd.list","tau/ui/extensions/board.customize/ui.extension.board.editor.customize.dblclick-handler.list","tau/ui/extensions/board.customize/ui.extension.board.editor.customize.card.remove.list","tau/models/board.editor.customize/model.board.editor.customize.list","tau/core/extension.configurator"],function(e,t,o,i,s,r,a,n,u,d){return{create:function(c){var m={extensions:[d,r,a,r,n,s,u].concat(c.extensions||[]),template:o};return m.layout="selectable",m.children=[{type:"board.editor.customize.types",name:"customize.types",template:i,selector:".tau-customize-list-lanes-panel"},{type:"board.editor.customize.editor.list",name:"customize.editor",selector:".tau-board-layout-compositor"},{type:"board.editor.customize.library.list",name:"customize.library",selector:".tau-board-layout-components-set"}],t.create(e.extend(c,m))}}});
define('tau/models/board.editor.customize/model.board.editor.customize.sizes',["Underscore","tau/core/model-base","tau/models/board.customize.units/const.card.sizes"],function(e,i,t){return i.extend({normalizeZoom:function(e){return t.zoomToSize(e)||e},"bus afterInit + configurator.ready":function(e,i,t){this.model=null,this.isDisabledList=!t.getFeaturesService().isEnabled("board.customize.list"),this.lastViewModeNotList="board",this.currentViewMove=null,this.model=null},updateLayout:function(e){this.fire("refreshData",{items:e.items})},init:function(e){this._super(e),this.timeoutId=null},renderLayout:function(e){this.fire("dataBind",{items:e.items})},updateSettings:function(e){var i=this.normalizeZoom(e.zoomLevel),t=this.createModel(i,e.viewMode);this.model?t.size!==this.model.size&&(this.updateLayout(t),this.model=t,this.fire("public.listSizes.changed",t)):(this.renderLayout(t),this.model=t,this.fire("public.listSizes.changed",t))},"bus configurator.ready + boardSettings.ready:last":function(e,i,t){var s=t.boardSettings,o=function(){s.get({fields:["zoomLevel","viewMode"],callback:function(e){"newlist"!==e.viewMode&&(this.lastViewModeNotList=e.viewMode),this.currentViewMove=e.viewMode,this.currentZoomLevel=e.zoomLevel,this.updateSettings(e)}.bind(this)})}.bind(this);o(),s.unbind({listener:this}),s.bind({fields:["zoomLevel","viewMode"],listener:this,callback:o})},createModel:function(i,s){var o={xs:" - only basic info, just one line. Could be a card name or ID.",s:" - a bit more info fits in here: two lines e.g. a card name + avatars of assigned people.",m:" - still more info: three lines. Could be a card name + tags + avatars and time spent.",l:" - this size is for the detailed info. Unlimited lines.",xl:" - a maxi stretch fit. That is how a card looks in the list-like mode."},a=e.reject(t,function(e){return"list"===e}),n=e.map(a,function(e){return{description:o[e],name:e.toUpperCase(),role:"size",data:e,classes:"tau-board-layout-elements-list__item_card-"+e,isActive:("newlist"!==s||this.isDisabledList===!0)&&e===i,isDisabled:!1}},this),l=[].concat(n);return l.push({description:" - displays maximum info in minimum space. Unlimited nested lists are allowed.",name:"List",role:"view",data:"newlist",classes:"tau-board-layout-elements-list__item_list-view",isActive:"newlist"===s&&this.isDisabledList!==!0,isDisabled:this.isDisabledList}),"newlist"===s&&this.isDisabledList!==!0&&(i="list"),{items:l,size:i,viewMode:s}},"bus size.changed.ui + boardSettings.ready:last":function(i,s,o){var a=o.boardSettings,n=t.sizeToZoom(s),l={zoomLevel:n},d=this.currentViewMove;"newlist"!==this.currentViewMove||this.isDisabledList||(l.viewMode=this.lastViewModeNotList,d=this.lastViewModeNotList),this.updateSettings({zoomLevel:n,viewMode:d}),(n||0===n)&&(clearTimeout(this.timeoutId),this.timeoutId=e.delay(function(){a.set({set:l})},300))},"bus view.changed.ui + boardSettings.ready:last":function(i,t,s){var o=s.boardSettings;this.updateSettings({zoomLevel:this.currentZoomLevel,viewMode:t}),clearTimeout(this.timeoutId),this.timeoutId=e.delay(function(){o.set({set:{viewMode:t}})},300)}})});
define('tau/ui/extensions/board.customize/ui.extension.board.editor.customize.sizes',["jQuery","Underscore","tau/components/extensions/component.extension.base"],function(e,n,t){return t.extend({"bus afterRender":function(e,n){this.addHandler(e,n)},"bus elementRefreshedWithData":function(e,n){this.addHandler(e,n)},addHandler:function(n,t){t.element.on("click",".i-role-toggle-view:not(.tau-is-disabled)",function(n){this.fire("view.changed.ui",e(n.currentTarget).data("view"))}.bind(this)),t.element.on("click",".i-role-toggle-size",function(n){this.fire("size.changed.ui",e(n.currentTarget).data("size"))}.bind(this))}})});
define('tau/ui/templates/board.editor.customize/ui.template.board.editor.customize.sizes.item',["tau/core/templates-factory"],function(e){var t={name:"board.editor.customize.sizes.item",engine:"jqote2",markup:['<li class="tau-board-layout-elements-list__item <%if(this.isActive){%>tau-is-active<%}%> <%if(this.isDisabled){%>tau-is-disabled<%}%> <%=this.classes%> i-role-toggle-<%=this.role%>" data-<%=this.role%>="<%=this.data%>"><strong class="tau-board-layout-elements-list__item-name"><%=this.name%></strong><%=this.description%></li>'],dependencies:[]};return e.register(t)});
define('tau/ui/templates/board.editor.customize/ui.template.board.editor.customize.sizes',["tau/core/templates-factory","tau/ui/templates/board.editor.customize/ui.template.board.editor.customize.sizes.item"],function(e){var t={name:"board.editor.customize.sizes",engine:"jqote2",markup:['<div class="tau-board-layout-elements-list">','<ul class="customize">','<%=fn.sub("board.editor.customize.sizes.item", this.items)%>',"</ul>","</div>"],dependencies:[]};return e.register(t)});
define('tau/components/component.board.editor.customize.sizes',["Underscore","tau/components/component.creator","tau/models/board.editor.customize/model.board.editor.customize.sizes","tau/ui/extensions/board.customize/ui.extension.board.editor.customize.sizes","tau/ui/templates/board.editor.customize/ui.template.board.editor.customize.sizes","tau/core/extension.configurator"],function(e,t,o,i,r,s){return{create:function(e){var u={name:"board.editor.customize.sizes",extensions:[o,s,i],template:r};return e["queue.bus"]=!0,t.create(u,e)}}});
define('tau/models/board.editor.customize/model.board.editor.customize.types',["Underscore","jQuery","tau/core/extension.base"],function(e,t,n){var i=n.extend({"bus beforeInit + boardSettings.ready:last":function(t,n,i){var s=i.boardSettings,r=n.config.context.configurator;s.unbind({listener:this});var a=["cells","y","x"];s.bind({fields:a,listener:this,callback:e.bind(function(){this.fire("refresh")},this)});var c=function(e){return e&&e.types||[]};s.get({fields:a,callback:e.bind(function(t){this.getEmptySpace(r).done(e.bind(function(e){this.fire("dataBind",this.getViewModel({cells:c(t.cells),x:c(t.x),y:c(t.y)},e,r.getUnitsRegistry().units))},this))},this)})},"bus + boardSettings.ready:last + destroy":function(e,t){t.boardSettings.unbind({listener:this})},getEmptySpace:function(n){return this.emptySpace?t.when(this.emptySpace):n.getSliceFactory().create({}).space().then(e.bind(function(e){return this.emptySpace={cells:e.data.cells.items,axes:e.data.axes.items},this.emptySpace},this))},getViewModel:function(t,n,i){function s(t,n){return e.chain(t).filter(function(e){return n.filter(function(t){return t==e.id}).length}).map(function(e,t){return{id:e.id,name:e.name,"default":!t}}).value()}var r=function(t,n){return e.reduce(t,function(t,i){return t&&e.find(n,function(t){return e.contains(t.types,i.id)})},!0)},a=s(n.cells,t.cells),c=s(n.axes,t.y),u=s(n.axes,t.x),l={cells:!0};return u.isDisabled=!r(u,i),c.isDisabled=!r(c,i),{cells:a,y:c,x:u,defaultChecked:l}}});return i});
define('tau/ui/templates/board.editor.customize/ui.template.board.editor.customize.types',["tau/core/templates-factory"],function(e){var t={name:"board.editor.customize.types",engine:"jqote2",markup:["<div><form>","<% _.forEach(this.cells, function(item){ %>",'<input type="radio" name="customize_entities" value=\'<%= JSON.stringify([item.id]) %>\' ','<% if (item["default"]) { %> checked="checked" <% } %> class="tau-input-hidden" />','<button type="button" class="i-role-entities tau-customize-label tau-btn tau-<%= item.id %> ',"<% if (item['default']) { %> tau-checked<% } %>\"><%= item.name %></button>","<% }); %>","</form></div>"]};return e.register(t)});
define('tau/ui/extensions/board.customize/ui.extension.board.editor.customize.types',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,n,t){return t.extend({"bus afterRender":function(e,t){var c=this,i=t.element;i.on("click",".i-role-entities",function(){var e=n(this),t=e.prev("input");i.find(".tau-btn.tau-checked").removeClass("tau-checked"),e.addClass("tau-checked"),t.trigger("click"),c.fire("public.types.changed",JSON.parse(t.val()))});var a=i.find("input:radio[checked=checked]").val();this.fire("public.types.changed",a&&JSON.parse(a))}})});
define('tau/components/component.board.editor.customize.types',["Underscore","tau/components/component.creator","tau/models/board.editor.customize/model.board.editor.customize.types","tau/ui/templates/board.editor.customize/ui.template.board.editor.customize.types","tau/ui/extensions/board.customize/ui.extension.board.editor.customize.types"],function(e,t,o,r,i){return{create:function(e){var u={name:"board.editor.customize.editor",extensions:[o,i],template:e.template||r};return e["queue.bus"]=!0,t.create(u,e)}}});
define('tau/ui/templates/board.editor.encoding/ui.template.board.editor.encoding',["tau/core/templates-factory"],function(n){var e={name:"board.editor.encoding",engine:"jqote2",markup:['<div class="tau-coming-soon"><h2><span>Visual Encoding</span></h2><h3>Highlight important things by custom rules</h3><div class="tau-bg tau-visual-encoding"></div></div>'],dependencies:[]};return n.register(e)});
define('tau/components/component.board.editor.encoding',["tau/components/component.creator","tau/ui/templates/board.editor.encoding/ui.template.board.editor.encoding"],function(e,t){return{create:function(n){var r={template:t},a=e.create(r,n);return a.fire("dataBind",{}),a}}});
define('tau/models/board.editor/board.filter.help.data',["Underscore"],function(){return{general:[{label:"has 'wow' in tags or in name",value:"?'wow' in Tags or 'wow' in Name"},{label:"created last week",value:"?CreateDate > Today - 7(days)"},{label:"entities with inbound blockers",value:"?InboundRelations.Where(RelationType is 'Blocker')"}],projectMember:[{label:"fully allocated",value:"?Allocation is 100"},{label:"partially allocated",value:"?Allocation < 100"},{label:"allocated in the future",value:"?MembershipStartDate > today"}],assignable:[{label:"not done",value:"?EntityState.IsFinal != true"},{label:"assigned to a person with last name 'Gates'",value:"?AssignedUser.Where(LastName is 'Gates')"},{label:"with some effort",value:"?Effort > 0"},{label:"assigned to me",value:"?AssignedUser.Where(it is Me)"}],feature:[{label:"assigned to release started after 04-Mar-2013",value:"?Release.StartDate > '04-Mar-2013'"},{label:"has user stories with time spent",value:"?UserStories.Where(TimeSpent > 0)"}],team:[{label:"small teams",value:"?TeamMembers.Count < 4"},{label:"teams without related projects",value:"?TeamProjects.Count is 0"}],testCase:[{label:"failed today",value:"?LastStatus is False and LastRunDate is today"},{label:"for user story 'Make us happy'",value:"?UserStory is 'Make us happy'"}],entityState:[{label:"not done",value:"?IsFinal is False"},{label:"only in progress states",value:"?IsInitial is false and IsFinal is false and IsPlanned is false"},{label:"'developer' is responsible",value:"?Role is 'Developer'"},{label:"name starts with 'in'",value:"?Name.StartsWith('in')"}],tag:[{label:"Tags with user stories from project 'Triads'",value:"?Generals.Count > 0 and Generals.Where(EntityType is 'UserStory') and Generals.Where(Project.Name is 'Triads')"},{label:"Tags that starts with 'A' or 'B'",value:"?Name.StartsWith('A') or Name.StartsWith('B')"},{label:"Tags that contains 'rest' or 'soap'",value:"?Name.Contains('rest') or Name.Contains('soap')"}],impediment:[{label:"with critical priority",value:"?Priority is 'Critical'"},{label:"resolved",value:"?EntityState.IsFinal is true"},{label:"email of responsible contains 'ted'",value:"?Responsible.Email.Contains('ted')"},{label:"related to entities with 'rest' in name",value:"?Assignable.Name.Contains('rest')"}],iteration:[{label:"started last month",value:"?StartDate > today - 30(days)"},{label:"backlog",value:"?it is None"},{label:"in releases that have 'gold' in name",value:"?Release.Name.Contains('gold')"}],time_container:[{label:"current and backlog",value:"?it is Current"},{label:"current only",value:"?it is Current and it is not none"},{label:"future and backlog",value:"?it is Future"},{label:"past and backlog",value:"?it is Past"}],release:[{label:"started last year",value:"?StartDate > today - 365(days)"},{label:"without iterations",value:"?Iterations.Count is 0"}],role:[{label:"name starts with 'dev'",value:"?Name.StartsWith('dev')"},{label:"roles with effort and for pair of people",value:"?HasEffort is True and IsPair is True"}],severity:[{label:"most severe bugs",value:"?Importance is 1"},{label:"severity contains 'cri' and ends with 'cal'",value:"?Name.Contains('cri') and Name.EndsWith('cal')"}],requestType:[{label:"types with some requests",value:"?Requests.Count > 0"},{label:"types with name 'Issue'",value:"?Name is 'Issue'"}],testPlan:[{label:"without test runs",value:"?TestPlanRuns.Count is 0"},{label:"from projects where name contains 'tp'",value:"?Project.Name.Contains('tp')"}],process:[{label:"default process",value:"?IsDefault is True"},{label:"unused process",value:"?Projects.Count is 0"}],priority:[{label:"most important",value:"?Importance is 1"},{label:"name starts with 'must'",value:"?Name.StartsWith('must')"}],teamIteration:[{label:"started last month",value:"?StartDate > today - 30(days)"},{label:"backlog",value:"?it is None"}],assignment:[{label:"developers or qa engineers",value:"?Role is 'Developer' or Role is 'QA Engineer'"},{label:"persons from Project A",value:"?It is not none and ProjectMembers.Where(Project is 'Project A')"},{label:"added this year",value:"?CreateDate > today - 365(days)"},{label:"last name starts with 'D'",value:"?LastName.StartsWith('D')"},{label:"active admins",value:"?IsActive is true and IsAdministrator is true"}],user:[{label:"developers or qa engineers",value:"?Role is 'Developer' or Role is 'QA Engineer'"},{label:"added this year",value:"?CreateDate > today - 365(days)"},{label:"last name starts with 'D'",value:"?LastName.StartsWith('D')"},{label:"active admins",value:"?IsActive is true and IsAdministrator is true"}],releasable:[{label:"belongs to the current release",value:"?Release is Current"},{label:"belongs to a future release",value:"?Release is Future"}],project:[{label:"only active projects",value:"?IsActive is True"},{label:"problematic projects",value:"?Bugs.Count > 1000"}],task:[{label:"user story contains 'zoom' in name",value:"?UserStory.Name.Contains('zoom')"}],request:[{label:"not replied or without comments",value:"?IsReplied is False or Comments.Count is 0"}],bug:[{label:"belongs to the last 3 team iterations",value:"?TeamIteration is Past(3)"},{label:"with 'Confused' severity",value:"?Severity.Name is 'Confused'"}],userStory:[{label:"belongs to the 2 future iterations",value:"?Iteration is Future(2)"},{label:"without tasks",value:"?Tasks.Count is 0"},{label:"belongs to 'Quick Add' feature ",value:"?Feature is 'Quick Add'"},{label:"belongs to the current iteration",value:"?Iteration is Current"},{label:"assigned to 'Delta' team",value:"?Team is 'Delta'"}],datetime:[{label:"10 days from the past",value:"?It >= today - 10(days)"},{label:"10 days from the future",value:"?It >= today and It <= today + 10(days)"},{label:"10 days from the past and 10 days from the future",value:"?It >= today - 10(days) and It <= today + 10(days)"},{label:"Today",value:"?It == today"}],inboundRelation:[{label:"entities with outbound blockers",value:"?OutboundRelations.Where(RelationType is 'Blocker')"},{label:"entities with more than 10 outbound relations",value:"?OutboundRelations.Count > 10"},{label:"entities with outbound bugs",value:"?OutboundRelations.Where(Outbound.EntityType is 'Bug')"}],outboundRelation:[{label:"entities with inbound blockers",value:"?InboundRelations.Where(RelationType is 'Blocker')"},{label:"entities with more than 10 inbound relations",value:"?InboundRelations.Count > 10"},{label:"entities with inbound bugs",value:"?InboundRelations.Where(Inbound.EntityType is 'Bug')"}],effort:[{label:"Fibonacci",value:"1,2,3,5,8,13,21"},{label:"Planning Poker",value:"0.5,1,2,3,5,8,13,20,40,100"},{label:"Linear",value:"1,2,3,4,5,6,7,8,9,10"}]}});
define('tau/models/board.editor/board.filter.help',["Underscore","jQuery","tau/core/class","tau/models/board.editor/board.filter.help.data","tau/store/types"],function(e,t,a,r,n){var s={},i={assigneduser:"assignment",createdate:"datetime",enddate:"datetime",startdate:"datetime"},o={userStory:["releasable"],bug:["releasable"],feature:["releasable"],task:["releasable"],iteration:["releasable","time_container"],teamIteration:["time_container"],release:["time_container"]};return a.extend({getTypes:function(e){return s.hasOwnProperty(e)||(s[e]=this._getTypes(e)),s[e]},_getTypes:function(e){var t=[];i.hasOwnProperty(e)&&(e=i[e]);var a=n.findByKeyword(e);if(a&&a.name&&o.hasOwnProperty(a.name)&&(t=t.concat(o[a.name])),a){var r=a.parent;for(t.push(a.name);r;){t.push(r);var s=n.findByKeyword(r);if(!s)break;r=s.parent}}else t.push(e);return t},get:function(a){a=a||{};var n={},s=this,i=t.Deferred();return e.each(e.keys(a),function(t){var i=(a[t]||{}).types||[];if(0!==i.length){n[t]=[];var o=[];e.each(i,function(e){o.push(s.getTypes(e))}),o=e.intersection.apply(null,o),e.each(o,function(e){var a=r[e];a&&(n[t]=n[t].concat(a))})}}),i.resolve(n),i}})});
define('tau/ui/templates/board.editor/ui.template.board.editor.filterHelp',["tau/core/templates-factory"],function(e){var t={name:"board.editor.filterHelp",engine:"jqote2",markup:['<div class="filter-help cm-s-default" role="<%= this.name%>_help">',"<table>","<tbody>","<% if (this.predefinedFilters && this.predefinedFilters.length) {%>",'<tr class="filter-help-heading">','<td colspan="3"><h2>Advanced filters <span>(type <strong>?</strong> to use them)</span></h2></td>',"</tr>","<%}%>","<% _.forEach(this.predefinedFilters, function(filter){%>",'<tr class="i-role-complex-filter-example">',"<td>",'<button type="button" class="tau-btn tau-primary i-role-predefined-filter" data-value="<%= filter.value %>">use</button>',"</td>",'<td class="filter-help-output i-role-output-filter">',"<%= filter.value %>","</td>","<td>","<%= filter.label %>","</td>","</tr>","<% }); %>","</tbody>","</table>","</div>"],dependencies:[]};return e.register(t)});
define('tau/ui/templates/board.editor/ui.template.board.editor.filter',["tau/core/templates-factory","tau/ui/templates/board.editor/ui.template.board.editor.filterHelp"],function(t){var e={name:"board.editor.filter",engine:"jqote2",markup:['<div class="tau-boardsettings__filter i-role-filter-control">','<button class="tau-btn i-role-filter-toggle tau-extension-board-tooltip" type="button" ','data-expanded-selector=".tau-checked" data-title-expanded="Turn filter off" ','data-title="Turn filter on">Filter ','<span class="tau-boardsettings__status tau-boardsettings__status_on">on </span>','<span class="tau-boardsettings__status tau-boardsettings__status_off">off</span>',"</button>",'<input type="checkbox" class="i-role-useFilter" name="<%= this.name %>_useFilter" <% if (this.useFilter) { %>checked<% } %> />','<div class="i-role-filter">','<input type="text" name="<%= this.name %>_filter" placeholder="<%= this.placeholder || \'type ? for advanced filter\' %>" spellcheck="false"',' class="i-role-filter-input tau-boardsettings__filter__input tau-in-text tau-x-large tau-filter" value="<%! this.filter %>" />','<div class="tau-boardsettings__filtertools">','<button type="button" tabindex="-1" class="tau-btn tau-boardsettings__presetstrigger i-role-help"></button>','<div class="tau-help-content i-role-help-content">','<%= fn.sub("board.editor.filterHelp", this) %>',"</div>",'<span class="tau-help i-role-tooltipArticle" data-article-id="board.editor.filter"></span>',"</div>","</div>","</div>"]};return t.register(e)});
define('tau/ui/templates/board.editor/ui.template.board.editor.ordering',["tau/core/templates-factory"],function(t){var e={name:"board.editor.ordering",engine:"jqote2",markup:['<span class="tau-inline-group tau-sorter i-role-ordering-control">','<button class="tau-btn tau-sorter-toggle i-role-sorter-toggler tau-extension-board-tooltip" type="button" data-collapsed-selector=":not(.tau-checked)" data-title-collapsed="Change sorting criteria">Sort</button>','<select class="tau-select tau-sorter-value" name="<%= this.name %>_ordering_name"></select>','<button name="<%= this.name %>_ordering_direction" class="tau-btn tau-sort-<%= this.name %> tau-sort-inc tau-sorter-dir i-role-direction-toggler tau-extension-board-tooltip" data-title="Change sorting order"></button>',"</span>"]};return t.register(e)});
define('tau/ui/templates/board.editor/ui.template.board.editor.cards',["tau/core/templates-factory","tau/ui/templates/board.editor/ui.template.board.editor.filter","tau/ui/templates/board.editor/ui.template.board.editor.ordering"],function(e){var t={name:"board.editor.cards",engine:"jqote2",markup:['<div class="tau-board-settings-cards">',"<h4>Select the cards you want to see</h4>",'<span class="tau-help i-role-tooltipArticle" data-article-id="<%= this.cardsHelpArticleId %>"></span>','<div class="tau-section-cards">',"<% _.forEach(this.space.cells.types, function(item){ %> ",'<input type="checkbox" name="cells_types" value="<%= item.id %>" class="tau-input-hidden" ','<% if (item.isSelected) { %> checked="checked" <% } %> ',"/>",'<button type="button" ',' class="i-role-cell-type tau-btn tau-<%= item.id %> <%= item.isSelected ? "tau-checked" : "" %>">',"<%= item.name %>","</button>","<% }); %>",'<button class="tau-btn tau-more hidden" type="button">more..</button>',"</div>",'<div class="tau-section">','<%= fn.sub("board.editor.ordering", this.space.cells) %>','<%= fn.sub("board.editor.filter", this.space.cells) %>',"</div>","</div>"]};return e.register(t)});
define('tau/ui/templates/board.editor/ui.template.board.editor.axisTypes',["tau/core/templates-factory"],function(e){var i={name:"board.editor.axisTypes",engine:"jqote2",markup:["<% var UIID = _.UUID();  %>","<% _.forEach(this.grouped, function(group){ %>",'<% if (group.name != "default") { %>','<option value="<%! group.name + UIID %>" disabled="">----- <%! group.name %> -----</option>',"<% } %>","<% _.forEach(group.items, function(item){ %>","<% if (item.isAvailable){ %>",'<option value="<%= item.id %>" ',"<% if (item.isSelected){ %>","selected ","<% } %> ",">","<%! item.name %>","</option>","<% } %> ","<% }); %>","<% }); %>"]};return e.register(i)});
define('tau/ui/templates/board.editor/ui.template.board.editor.stateSetup',["tau/core/templates-factory"],function(t){var e={name:"board.editor.stateSetup",engine:"jqote2",markup:['<button type="button" class="tau-btn tau-board-settings__statesetup i-role-statesetup">Set up States</button>'],dependencies:[]};return t.register(e)});
define('tau/ui/templates/board.editor/ui.template.board.editor.lanes',["tau/core/templates-factory","tau/ui/templates/board.editor/ui.template.board.editor.filter","tau/ui/templates/board.editor/ui.template.board.editor.ordering","tau/ui/templates/board.editor/ui.template.board.editor.axisTypes","tau/ui/templates/board.editor/ui.template.board.editor.stateSetup"],function(t){var e={name:"board.editor.lanes",engine:"jqote2",markup:['<div class="tau-board-settings-lanes">',"<h4><%= this.lanesHeader %></h4>",'<span class="tau-help i-role-tooltipArticle" data-article-id="<%= this.lanesHelpArticleId %>"></span>','<div class="tau-y-lane tau-section">','<select name="x_types" class="tau-select">','<option value=""><%= this.firstLaneNoValue %></option>','<%= fn.sub("board.editor.axisTypes", this.space.x) %>',"</select>",'<%= fn.sub("board.editor.ordering", this.space.x) %>','<%= fn.sub("board.editor.filter", this.space.x) %>',"<% if (this.user.isAdministrator){ %>",'<%= fn.sub("board.editor.stateSetup", {}) %>',"<% } %>","</div>",'<div class="tau-x-lane tau-section">','<select name="y_types" class="tau-select">','<option value=""><%= this.secondLaneNoValue %></option>','<%= fn.sub("board.editor.axisTypes", this.space.y) %>',"</select>",'<%= fn.sub("board.editor.ordering", this.space.y) %>','<%= fn.sub("board.editor.filter", this.space.y) %>',"<% if (this.user.isAdministrator){ %>",'<%= fn.sub("board.editor.stateSetup", {}) %>',"<% } %>","</div>",'<button type="button" class="tau-lane-switch i-role-switch-filter tau-extension-board-tooltip" data-title="Swap lanes">Swap lanes</button>',"</div>"]};return t.register(e)});
define('tau/ui/templates/board.editor/ui.template.board.editor.help',["Underscore","tau/nls/translator","tau/core/templates-factory"],function(e,t,a){var r={name:"board.editor.help",engine:"jqote2",markup:['<div class="tau-board-settings-group__help">','<span class="tau-help i-role-tooltipArticle" data-article-id="board.editor">About Setup</span>',"</div>"]};return a.register(r)});
define('tau/ui/templates/board.editor/ui.template.board.editor',["Underscore","tau/nls/translator","tau/core/templates-factory","tau/ui/templates/board.editor/ui.template.board.editor.cards","tau/ui/templates/board.editor/ui.template.board.editor.lanes","tau/ui/templates/board.editor/ui.template.board.editor.help","tau/extensions/extension.underscore"],function(e,t,a){var r={name:"board.editor",engine:"jqote2",markup:['<div class="tau-board-settings tau-boardsettings" role="form-settings" id="<%= _.uniqueId(\'boardSettings\') %>">','<%= fn.sub("board.editor.help") %>','<%= fn.sub("board.editor.cards", _.extend(this, { cardsHelpArticleId: "board.editor.selectCards" })) %>','<%= fn.sub("board.editor.lanes", _.extend(this, { lanesHelpArticleId: "board.editor.selectLanes", lanesHeader: "Set vertical and horizontal lanes", firstLaneNoValue: "No vertical lanes", secondLaneNoValue: "No horizontal lanes" })) %>',"</div>"]};return a.register(r)});
define('tau/ui/templates/board.editor/ui.template.board.editor.newlist',["Underscore","tau/nls/translator","tau/core/templates-factory","tau/ui/templates/board.editor/ui.template.board.editor.cards","tau/ui/templates/board.editor/ui.template.board.editor.lanes","tau/ui/templates/board.editor/ui.template.board.editor.help","tau/extensions/extension.underscore"],function(e,t,a){var r={name:"board.editor.new.list",engine:"jqote2",markup:['<div class="tau-board-settings tau-boardsettings tau-list-settings" role="form-settings" id="<%= _.uniqueId(\'boardSettings\') %>">','<%= fn.sub("board.editor.help") %>','<%= fn.sub("board.editor.lanes", _.extend(this, { lanesHelpArticleId: "board.editor.selectListLevels", lanesHeader: "Set 1st and 2nd hierarchy level", firstLaneNoValue: "No 1st level", secondLaneNoValue: "No 2nd level" })) %>','<%= fn.sub("board.editor.cards", _.extend(this, { cardsHelpArticleId: "board.editor.selectListCards" })) %>',"</div>"]};return a.register(r)});
define('tau/models/board.editor/model.board.editor.read',["Underscore","tau/core/extension.base","tau/models/board.editor/board.filter.help","tau/ui/templates/board.editor/ui.template.board.editor","tau/ui/templates/board.editor/ui.template.board.editor.newlist"],function(e,t,i,n,r){var s=t.extend({"bus beforeInit":function(e,t){var i=t.config.context.configurator;this.fire("configurator.ready",i)},"bus configurator.ready":function(e,t){var i=this;t.getAppStateStore().get({fields:["acid"],callback:function(e){i.fire("acid.ready",e.acid)}}),t.getAppStateStore().unbind({listener:this}),t.getAppStateStore().bind({fields:["acid"],listener:this,callback:function(){i.fire("refresh")}});var n=t.service("boardSettings");n.get({fields:["ownerIds"],callback:function(e){var n=t.getLoggedUser(),r={edit:t.getBoardAccessService().isEditable(e,n)};i.fire("accessData.ready",r)}})},"bus configurator.ready:last + acid.ready:last + accessData.ready:last + form.readyToUpdate":function(e,t,i,n){var r=t.service("boardSettings"),s=this;this.getSpaceTotal(t.getSliceFactory(),r,i,function(e){s.fire("updateData.ready",{space:e,access:n})})},"bus configurator.ready + acid.ready":function(e,t,i){var n=this,r=t.service("boardSettings");r.unbind({listener:this}),r.bind({listener:this,fields:["viewMode"],callback:function(e){this.setTemplate(e.viewMode),this.fire("refresh")}}),$.when(this.getSpaceTotal(t.getSliceFactory(),r,i),this.getViewMode(r)).done(function(e,i){n.setTemplate(i),n.fire("dataBind",{user:t.getLoggedUser(),space:e})})},getViewMode:function(e){return e.get({fields:["viewMode"]}).then(function(e){return e.viewMode})},setTemplate:function(e){var t="newlist"===e?r:n;this.fire("board.editor.setTemplate",t)},"bus configurator.ready + destroy":function(e,t){var i=t.service("boardSettings");i.unbind({listener:this})},getSpaceTotal:function(t,i,n,r){var s=this,a=$.Deferred(),c=[];return c.push(function(e){s.spaceAvailable(t,i,n,e)}),c.push(function(e){s.spaceCells(t,i,n,e)}),c.push(function(e){s.spaceAxisX(t,i,n,e)}),c.push(function(e){s.spaceAxisY(t,i,n,e)}),c.push(function(e){s.getPredefinedFilters(i,e)}),e.parallel(c,function(e,t){var i=s.processSpaces(t);r&&r(i),a.resolve(i)}),a},spaceAvailable:function(e,t,i,n){var r={global:{acid:i}},s=e.create({definition:r});s.space().done(function(e){n(!1,{space:e.data})})},spaceCells:function(e,t,i,n){t.get({fields:["name","x","y","cells","zoomLevel","hierarchyMode","viewMode","acid"],callback:function(t){var r={definition:{global:{acid:i},x:t.x,y:t.y,cells:t.cells}},s=e.create(r);s.on("error",function(){n(!1,{space:{},settings:t})}),s.space().done(function(e){n(!1,{space:e.data,settings:t})})}})},spaceAxisX:function(e,t,i,n){t.get({fields:["name","x","y","cells","zoomLevel"],callback:function(t){var r={definition:{global:{acid:i},y:t.y,cells:t.cells}},s=e.create(r);s.on("error",function(){n(!1,{space:{}})}),s.space().done(function(e){n(!1,{space:e.data})})}})},spaceAxisY:function(e,t,i,n){t.get({fields:["name","x","y","cells","zoomLevel"],callback:function(t){var r={definition:{global:{acid:i},x:t.x,cells:t.cells}},s=e.create(r);s.on("error",function(){n(!1,{space:{}})}),s.space().done(function(e){n(!1,{space:e.data})})}})},processSpaces:function(t){var i={spaceDefault:t[0].space,spaceAvailable:{cells:t[1].space.cells||[],x:t[2].space.axes||[],y:t[3].space.axes||[],hierarchyMode:"inside",viewMode:""},settingsCurrent:t[1].settings},n=t[4],r={x:{name:"x",types:[],filter:"",useFilter:!0,predefinedFilters:n.x||[],orderingName:"",orderingDirection:"Asc"},y:{name:"y",types:[],filter:"",useFilter:!0,predefinedFilters:n.y||[],orderingName:"",orderingDirection:"Asc"},cells:{name:"cells",types:[],filter:"",useFilter:!0,predefinedFilters:n.cells||[],orderingName:"",orderingDirection:"Asc"},hierarchyMode:null,viewMode:null},s=function(e){return e.toLowerCase()};r.hierarchyMode=i.settingsCurrent.hierarchyMode,r.viewMode=i.settingsCurrent.viewMode;var a=e.bind(function(t){r[t].types=e.map(i.spaceDefault.axes.items,function(n){var r={id:n.id,name:n.name,isAvailable:e.any(i.spaceAvailable[t].items,function(e){return s(e.id)===s(n.id)}),isSelected:i.settingsCurrent[t]&&e.any(i.settingsCurrent[t].types,function(e){return s(e)===s(n.id)})};return r.isAvailable=r.isSelected?!0:r.isAvailable,r.groupName=n.groupName,r}),r[t].filter=i.settingsCurrent[t]?i.settingsCurrent[t].filter||"":"",r[t].useFilter=this._isFilterEnabled(i.settingsCurrent[t]||{},r[t]);var n=e.filter(r[t].types,function(e){return e.isAvailable});r[t].grouped=e.groupBy(n,function(e){return e.groupName||"default"}),r[t].grouped=e.map(r[t].grouped,function(e,t){return{name:t,items:e}}),r[t].grouped=e.sortBy(r[t].grouped,function(e){return"default"==e.name?"AAAA":e.name});var a=i.settingsCurrent[t]?i.settingsCurrent[t].types[0]||"":"",c=e.find(i.spaceAvailable[t].items,function(e){return s(e.id)===s(a)});c||(c={});var l=i.settingsCurrent&&i.settingsCurrent[t]?i.settingsCurrent[t].ordering:{},o=l&&l.name;r[t].orderingNames=e.map(c.orderings||[],function(e){return{id:e.name,name:e.name,isSelected:e.name==o,direction:e.direction}}),r[t].orderingDirection=this.getOrderingDirection(l,c.orderings)},this);a("x"),a("y"),r.cells.types=e.map(i.spaceDefault.cells.items,function(t){var n={id:t.id,name:t.name,isAvailable:e.any(i.spaceAvailable.cells.items,function(e){return s(e.id)===s(t.id)}),isSelected:e.any(i.settingsCurrent.cells.types,function(e){return s(e)===s(t.id)})};return n.isAvailable=n.isSelected?!0:n.isAvailable,n}),r.cells.filter=i.settingsCurrent.cells.filter||"",r.cells.useFilter=this._isFilterEnabled(i.settingsCurrent.cells||{},r.cells);var c=i.settingsCurrent&&i.settingsCurrent.cells.ordering,l=c&&c.name;return r.cells.orderingDirection=this.getOrderingDirection(c,t[1].space.cells.orderings.items),r.cells.orderingNames=e.map(t[1].space.cells.orderings.items,function(e){return{id:e.name,name:e.name,isSelected:e.name==l,direction:e.direction}}),r.acid=t[1].settings.acid||"",r},_isFilterEnabled:function(e,t){var i=e.useFilter,n=null!==i&&void 0!==i;return n?e.useFilter:!!t.filter},getOrderingDirection:function(t,i){var n=i&&i[0]&&i[0].direction;if(t){if(t.direction)n=t.direction;else var r=e.find(i,function(e){return e.name==t.name});r&&(n=r.direction)}return n},getPredefinedFilters:function(e,t){e.get({fields:["x","y","cells"],callback:function(e){(new i).get({x:e.x,y:e.y,cells:e.cells}).done(function(e){t(!1,e)})}})},getSpaceEmpty:function(){var e={x:{name:"x",types:[],filter:""},y:{name:"y",types:[],filter:""},cells:{name:"cells",types:[],filter:""},hierarchyMode:null,viewMode:null};return e}});return s});
define('tau/models/board.editor/model.board.editor.write',["Underscore","tau/core/extension.base"],function(e,n){return n.extend({"bus configurator.ready:last + acid.ready:last + formData.changed":function(n,r,i,l){l.focus={x:[],y:[]},l.selectedMarks={x:[],y:[]};var s=r.service("boardSettings"),t=this,o=$.Deferred();this._getCurrent(s).done(function(n){if(e.isEqual(n.cells.types,l.cells.types)&&n.x&&e.isEqual(n.x.types,l.x.types)&&n.y&&e.isEqual(n.y.types,l.y.types))o.resolve(l);else{var s={global:{acid:i},x:l.x,y:l.y,cells:l.cells},t=r.getSliceFactory().create({definition:s});t.spaceV2().done(function(n){var r=n.data;if(l.cells.ordering&&-1==e.indexOf(e.pluck(r.cells.orderings.items,"name"),l.cells.ordering.name))if(r.cells.orderings.items.length){var i=r.cells.orderings.items[0];l.cells.ordering.name=i.name,l.cells.ordering.direction=i.direction}else l.cells.ordering.name=null,l.cells.ordering.direction=null;e.forEach(["x","y"],function(n){if(l[n].ordering){var i=e.find(r.axes.items,function(e){return e.id==l[n].types[0]});if(i){if(-1==e.indexOf(e.pluck(i.orderings,"name"),l[n].ordering.name))if(i.orderings.length){var s=i.orderings[0];l[n].ordering.name=s.name,l[n].ordering.direction=s.direction}else l[n].ordering.name=null,l[n].ordering.direction=null}else l[n].ordering.name=null,l[n].ordering.direction=null}}),o.resolve(l)})}}),o.done(function(e){s.set({set:e}).done(function(){t.fire("settings.changed",e)})})},_getCurrent:function(e){var n=$.Deferred();return e.get({fields:["cells","x","y"],callback:function(e){n.resolve(e)}}),n}})});
define('tau/models/board.editor/model.board.filter.help',["Underscore","tau/core/model-base","tau/models/board.editor/board.filter.help"],function(e,n,t){return n.extend({"bus boardSettings.ready:last + destroy":function(e,n){n.boardSettings.unbind({listener:this})},"bus boardSettings.ready":function(e,n){var r=new t,i=n.boardSettings,d=this;i.unbind({listener:d}),i.bind({fields:["cells","x","y"],listener:d,callback:function(e){r.get(e).done(function(e){d.fire("refresh.help.content",e)})}})}})});
define('tau/models/board.editor/board.filter.suggestionManager',["Underscore","jQuery","tau/core/class"],function(t,e,i){var r={};return i.extend({init:function(t){this.url=t.getApplicationPath()+"/api/v2/lang/query",this.acidStore=t.getAppStateStore(),this.ajaxService=e.ajax},get:function(i){i=t.defaults(i||{},{query:{resourceTypes:[],script:""},take:50,skip:0,options:{insertDotForObjectAttribute:!0,insertLeftBracketForObjectCollectionMethod:!0}});var a=this.url+"/suggestions",n=e.Deferred();return this.acidStore.get({fields:["acid"],callback:t.bind(function(t){i.acid=t.acid;var e=JSON.stringify(i),o=(a+"/"+e).toLowerCase(),s=r.hasOwnProperty(o)?r[o]:this.ajaxService({url:a,type:"POST",data:e,dataType:"json",contentType:"application/json; charset=utf-8"});r[o]=s,s.done(n.resolve).fail(n.fail)},this)}),n}})});
define('tau/models/board.editor/model.board.editor.autocomplete',["Underscore","tau/core/extension.base","tau/models/board.editor/board.filter.suggestionManager"],function(e,t,r){var n=t.extend({"bus configurator.ready":function(e,t){var n=new r(t);this.fire("suggestionManager.ready",n)},getTypes:function(e,t){var r=e.prop("name"),n=$.Deferred();if(!r)return n.reject(),n;var a=r.replace("_filter","");return t.get({fields:[a],callback:function(e){var t=[];e.hasOwnProperty(a)&&(t=e[a].types||[]),n.resolve(t)}}),n},"bus suggestionManager.ready:last + boardSettings.ready:last + filter.autocomplete.preload":function(t,r,n,a){var i=a.$input;this.getTypes(i,n.boardSettings).done(function(t){if(0!=t.length){var n=a.value;if(n&&0!==n.length&&"?"==n[0]){var i=[n.trim()+" ",n.trim()+"."];e.each(i,function(e){var n={query:{resourceTypes:t,script:e}};r.get(n)})}}})},"bus suggestionManager.ready:last  + boardSettings.ready:last + filter.autocomplete.resolve":function(t,r,n,a){var i=a.$input;this.getTypes(i,n.boardSettings).done(function(t){if(0==t.length)return void a.next([]);var n=a.request.term.slice(0,i[0].selectionStart),o=function(t){var r=t.Suggestions?t.Suggestions.Items:[];r=e.map(r,function(e){return e.Source=t.Source,e.Position=t.Position,e}),a.next(r)},s=function(){a.next([])},u={query:{resourceTypes:t,script:n}};r.get(u).done(o).fail(s)})}});return n});
define('tau/models/board.editor/model.board.editor.autocomplete.preloading',["Underscore","tau/core/extension.base"],function(e,t){return t.extend({"bus configurator.ready:last + suggestionManager.ready:last + preloading.execute":function(t,r,n){var i=r.service("boardSettings");i.get({fields:["x","y","cells","user"],callback:e.bind(function(t){this._preloadAll(n,t).done(e.bind(function(){this.fire("preload.complete")},this))},this)})},_preloadAll:function(e,t){var r=[];return t.x&&(r=r.concat(this._preload(t.x.types,t.x.filter,e))),t.y&&(r=r.concat(this._preload(t.y.types,t.y.filter,e))),t.cells&&(r=r.concat(this._preload(t.cells.types,t.cells.filter,e)),t.user&&(r=r.concat(this._preload(t.cells.types,t.user.cardFilter,e)))),$.whenList(r)},_preload:function(t,r,n){var i=[];if(e.isArray(t)||(t=[t]),!(t.indexOf("effort")>=0||t.indexOf("source")>=0)){e.each(t,function(t){i.push(e.isString(t)?t:t.type)}),r=r||"";var s=["?"];return r.length>1&&"?"===r[0]&&s.push(r.trim()+" "),0===i.length?[]:e.map(s,function(e){return n.get({query:{resourceTypes:i,script:e}})})}}})});
define('libs/jquery/jquery.toggleFilter',["libs/jquery/jquery","libs/jquery/jquery.caret"],function(e){e.fn.toggleFilter=function(i){var t=e.extend({expandedClass:"tau-inline-group",additionalClass:"",filterOnClass:"tau-boardsettings__filter_on",defaultExpand:!1},i),l=function(e){var i=e.find(".i-role-useFilter"),l=i.prop("checked");e.toggleClass(t.expandedClass,l),e.find(".i-role-filter-toggle").toggleClass("tau-checked",l);var n=t.filterOnClass+" i-role-filter-control_on",r=e.find(".i-role-filter-input");e.toggleClass(n,l&&!!r.val())};if("refresh"===i)return this.each(function(){l(e(this))}),this;if(this.addClass(t.additionalClass),t.defaultExpand){var n=e(this);n.find(".i-role-useFilter").prop("checked",!0),l(n)}return this.each(function(){var i=e(this),t=i.find(".i-role-filter-input"),n=i.find(".i-role-useFilter");l(i),t.on("clear autocompletechange",function(){l(i)}),n.on("click",function(){l(i),t.val()&&t.trigger("_change")}),i.on("click",".i-role-filter-toggle",function(){n.trigger("click")})}),this}});
define('libs/jquery/jquery.tau.resetableInput',["libs/jquery/jquery"],function(e){!function(e,t){if(t in e.fn)throw new Error('The "'+t+'" jQuery plugin is already defined.');var n=function(e){e.css("visibility","visible")},i=function(e){e.css("visibility","hidden")},r=function(t){var r=e(this);if(!r.is('input[type="text"]'))return e(this);t=e.extend({cssClass:"",template:'<button type="button" tabindex="-1"></button>',onAttach:function(t,n){n.css({zIndex:t.zIndex()+10});var i=e('<span class="tau-resetable-input"></span>');i.insertBefore(t),t.detach(),i.append(t).append(n)},showAlways:!1},t);var s=e(t.template).addClass(t.cssClass);i(s),t.onAttach(r,s),r.addClass("i-role-resetable-target"),s.addClass("i-role-resetable-trigger");var o=null,a=function(){r.val()?n(s):i(s)},u=function(){clearTimeout(o),o=setTimeout(a,0)};if(t.showAlways)r.on({keydown:u,input:u}),a();else{var l=function(){clearTimeout(o),i(s)},c=r.parent(),f=".i-role-resetable-target,.i-role-resetable-trigger",d={mouseenter:u,mouseleave:l},p=function(){c.on(d,f)},h=function(){c.off(d,f),c.on(d,f)},y=function(){c.off(d,f)},g=function(){u(),y()},v=function(){l(),h()};r.on({keydown:u,input:u,focus:g,blur:v}),p()}return s.on("mousedown",function(t){return 1==t.which?(i(e(this)),r.val("").focus().trigger(e.Event("keydown",{keyCode:8})).trigger(e.Event("keyup",{keyCode:8})).trigger(e.Event("keypress",{keyCode:8})).trigger("input").trigger("clear"),t.preventDefault(),!1):void 0}),e(this)};e.fn[t]=function(t){return e.browser.msie||this.each(function(){r.call(this,t)}),this}}(e,"tauResetableInput")});
define('tau/ui/extensions/board.editor/ui.extension.board.editor.form',["Underscore","jQuery","tau/core/extension.base","tau/ui/templates/board.editor/ui.template.board.editor.axisTypes","tau/ui/behaviour/overlay/ui.behaviour.overlay","libs/jquery/jquery.placeholder","libs/jquery/jquery.toggleFilter","libs/jquery/jquery.tau.resetableInput"],function(e,i,t,r){var n=null;return t.extend({resetLifecycle:!0,disableSettingsChange:!1,"bus afterRender":function(e,i){var t=i.element,r=t.find(".i-role-filter-input");r.placeholder(),t.find(".i-role-filter-control").toggleFilter(),this.fire("$el.ready",t),this.fire("$form.ready",t)},"bus $el.ready:last + error":function(e,i){i.data("ui-tauOverlay")&&i.tauOverlay("hide")},"bus $form.ready + updateData.ready":function(t,r,a){var l=this;r.on("click",".i-role-sorter-toggler",function(){i(this).toggleClass("tau-checked")});var o=a.access;if(o.edit===!1)return r.find("select, input, button").not(".i-role-filter-toggle").not(".i-role-sorter-toggler").prop("disabled",!0).addClass("permission-denied"),!1;r.find(".i-role-filter-input").tauResetableInput({showAlways:!0}),r.on("click",".i-role-switch-filter",function(){var e=r.find("[name=x_types]"),t=r.find("[name=y_types]"),n=r.find("[name=x_filter]"),a=n.parents(".i-role-filter-control:first"),o=r.find("[name=y_filter]"),d=o.parents(".i-role-filter-control:first"),s=r.find("[name=x_ordering_name]"),c=r.find("[name=x_ordering_direction]"),u=c.parents(".i-role-ordering-control:first"),f=r.find("[name=y_ordering_name]"),p=r.find("[name=y_ordering_direction]"),g=p.parents(".i-role-ordering-control:first"),m=e.val(),h=n.val(),y=s.find("option").map(function(){var e=i(this);return{id:e.attr("value"),name:e.text(),isSelected:e.prop("selected")}}),_=f.find("option").map(function(){var e=i(this);return{id:e.attr("value"),name:e.text(),isSelected:e.prop("selected")}}),v=c.data("direction");n.val(o.val()),n.trigger("input");var b=t.val(),x=e.find("option").detach(),F=t.find("option").detach();e.append(F),e.val(b),l.updateOrderingState(s,_),l.updateOrderingDirectionState(c,p.data("direction"));var S=!!u.find(".i-role-sorter-toggler.tau-checked").length,D=!!g.find(".i-role-sorter-toggler.tau-checked").length;u.find(".i-role-sorter-toggler").toggleClass("tau-checked",D),g.find(".i-role-sorter-toggler").toggleClass("tau-checked",S),o.val(h),o.trigger("input"),t.append(x),t.val(m),l.updateOrderingState(f,y),l.updateOrderingDirectionState(p,v);var k=a.find(".i-role-useFilter").prop("checked"),C=d.find(".i-role-useFilter").prop("checked");a.find(".i-role-useFilter").prop("checked",C),d.find(".i-role-useFilter").prop("checked",k),r.trigger("_submit")});var d=["[name=cells_ordering_direction]","[name=x_types]","[name=x_ordering_direction]","[name=y_types]","[name=y_ordering_direction]"].join(","),s=["[name=cells_ordering_name]","[name=x_ordering_name]","[name=y_ordering_name]"].join(",");r.on("change",s,e.bind(function(e){var t=i(e.target);this.updateOrderingDirectionState(t.next(),t.find(":selected").data("direction")),r.trigger("_submit",{$input:t,sourceEvent:e})},this)),r.on("change",d,function(e){r.trigger("_submit",{$input:i(this),sourceEvent:e})}),r.on("click",".i-role-cell-type",function(e){if(0==l.disableSettingsChange){l.disableSettingsChange=!0;var t=i(this),n=t.prev("input");t.toggleClass("tau-checked");var a=t.hasClass("tau-checked");n.prop("checked",a),a&&r.find(".tau-board-settings-cards h4").removeClass("tau-attention"),r.trigger("_submit",{$input:n,sourceEvent:e})}else e.preventDefault(),e.stopPropagation()});var c="[name=cells_filter], [name=x_filter], [name=y_filter]";r.on("_change",c,function(e){r.trigger("_submit",{$input:i(this),sourceEvent:e})}),r.on("clear",c,function(){i(this).trigger("_change")}),r.on("keydown",c,function(e){if(e.which==i.ui.keyCode.ENTER){var t=i(this);t.blur()}}),r.on("click",".i-role-direction-toggler",function(){var e=i(this);e.toggleClass("tau-sort-inc"),e.toggleClass("tau-sort-dec"),e.hasClass("tau-sort-dec")?e.data("direction","Desc"):e.data("direction","Asc"),e.trigger("change")}),r.on("_submit",function(i,t){var a=!1;t&&t.$input&&(l.resetFilters(r,t.$input),t.$input.is("[name=x_types]")&&(a="x"),t.$input.is("[name=y_types]")&&(a="y"),t.$input.is("[name=cells_types]")&&(a="cells"));var o=l.bindForm(r,a);clearTimeout(n),n=e.delay(function(){l.fire("formData.changed",o)},250)})},"bus refresh":function(){clearTimeout(n),this._super()},"bus destroy":function(){clearTimeout(n),this._super()},"bus settings.changed":function(){this.fire("form.readyToUpdate")},"bus $form.ready":function(){this.fire("form.readyToUpdate")},"bus configurator.ready:last + $form.ready:last + updateData.ready ":function(e,i,t,r){this.updateForm(i,t,r.space,r.access)},resetFilters:function(e,i){"x_types"==i.attr("name")&&e.find("[name=x_filter]").val(""),"y_types"==i.attr("name")&&e.find("[name=y_filter]").val("")},bindForm:function(t,r){r=!1;var n={x:{types:[],filter:"",useFilter:!1,ordering:{name:"",direction:"Asc"}},y:{types:[],filter:"",useFilter:!1,ordering:{name:"",direction:"Asc"}},cells:{types:[],filter:"",useFilter:!1,ordering:{name:"",direction:"Asc"}}};n.x.types=e.compact([t.find("[name=x_types]").val()]),n.x.filter=e.trim(t.find("[name=x_filter]").val()),n.x.useFilter=!!n.x.filter&&t.find("[name=x_useFilter]").prop("checked"),"x"==r?(n.x.ordering=null,n.x.direction=null):(n.x.ordering.name=e.trim(t.find("[name=x_ordering_name]").val())||null,n.x.ordering.direction=t.find("[name=x_ordering_direction]").data("direction")||null),n.y.types=e.compact([t.find("[name=y_types]").val()]),n.y.filter=e.trim(t.find("[name=y_filter]").val()),n.y.useFilter=!!n.y.filter&&t.find("[name=y_useFilter]").prop("checked"),"y"==r?(n.y.ordering=null,n.y.direction=null):(n.y.ordering.name=e.trim(t.find("[name=y_ordering_name]").val())||null,n.y.ordering.direction=t.find("[name=y_ordering_direction]").data("direction")||null),"cells"==r?(n.cells.ordering=null,n.direction.ordering=null):(n.cells.ordering.name=e.trim(t.find("[name=cells_ordering_name]").val())||null,n.cells.ordering.direction=t.find("[name=cells_ordering_direction]").data("direction")||null);var a=[];return t.find("[name=cells_types]:checked").each(function(){a.push(i(this).val())}),n.cells.types=e.compact(a),n.cells.filter=e.trim(t.find("[name=cells_filter]").val()),n.cells.useFilter=!!n.cells.filter&&t.find("[name=cells_useFilter]").prop("checked"),n},updateForm:function(t,r,n,a){var l=r.find(".i-role-filter-input");l.placeholder("refresh"),r.find(".i-role-filter-control").toggleFilter("refresh");var o=r.find("[name=cells_types]"),d=r.find("[name=x_types]"),s=r.find("[name=y_types]"),c=r.find("[name=cells_filter]"),u=r.find("[name=x_filter]"),f=r.find("[name=y_filter]"),p=r.find("[name=x_ordering_name]"),g=r.find("[name=y_ordering_name]"),m=r.find("[name=cells_ordering_name]"),h=r.find("[name=x_ordering_direction]"),y=r.find("[name=y_ordering_direction]"),_=r.find("[name=cells_ordering_direction]"),v=n.cells.types;e.forEach(v,function(e){var t=!e.isAvailable,r=o.filter(function(){return this.value==e.id||i(this).hasClass("permission-denied")}),n=r.next();r.prop("disabled",t).toggleClass("tau-disabled",t),n.prop("disabled",t).toggleClass("tau-disabled",t)});var b="remove",x={disable:e.bind(this.updateSelectByDisable,this),remove:e.bind(this.updateSelectByRemove,this)}[b];x(t,d,n.x),x(t,s,n.y),this.updateFilterState(d.val(),u),this.updateFilterState(s.val(),f),this.updateFilterState(o.filter(":checked").length,c),this.updateOrderingState(p,n.x.orderingNames),this.updateOrderingState(g,n.y.orderingNames),this.updateOrderingState(m,n.cells.orderingNames),this.updateOrderingDirectionState(h,n.x.orderingDirection),this.updateOrderingDirectionState(y,n.y.orderingDirection),this.updateOrderingDirectionState(_,n.cells.orderingDirection),this.toggleOrderingDisable(d.next(),p.find("option").length,a),this.toggleOrderingDisable(s.next(),g.find("option").length,a),this.toggleOrderingDisable(m.parent(),m.find("option").length,a),this.disableSettingsChange=!1},updateSelectByRemove:function(e,i,t){var n=e.getTemplateFactory().get(r.name).bind({},t);i.find("option:not(:first)").remove(),i.append(n)},updateSelectByDisable:function(i,t){var r=i.find("option");e.forEach(t,function(e){r.filter(function(){return this.value==e.id}).prop("disabled",!e.isAvailable)})},setFilterFieldDisabled:function(e,i){e.prop("disabled",i);var t=e.closest(".i-role-filter-control");t.find(".i-role-help").prop("disabled",i),t.find(".i-role-filter-toggle").prop("disabled",i&&!t.hasClass("i-role-filter-control_on"))},updateFilterState:function(e,i){var t=!(e&&!i.hasClass("permission-denied"));this.setFilterFieldDisabled(i,t)},updateOrderingState:function(t,r){t.find("option").remove(),e.forEach(r,function(e){var r=i('<option value="'+e.id+'"'+(e.isSelected?'selected="selected"':"")+">"+e.name+"</option>");r.data("direction",e.direction),t.append(r)})},updateOrderingDirectionState:function(e,i){e.removeData("direction"),e.data("direction",i),e.toggleClass("tau-sort-dec","Desc"==i),e.toggleClass("tau-sort-inc","Asc"==i||!i)},toggleOrderingDisable:function(e,i,t){t.edit?i>0?e.find(":input").prop("disabled",!1):e.find(":input").prop("disabled",!0):i>0?e.find("select").prop("disabled",!0):e.find(":input").prop("disabled",!0)}})});
define('tau/ui/templates/board.editor/ui.template.board.editor.autocomplete.item',["tau/core/templates-factory"],function(e){var t={name:"board.editor.autocomplete.item",engine:"jqote2",markup:['<li class="tau-autocomplete__item">','<a class="tau-autocomplete__itemtrigger tau-autocomplete__itemtrigger-',"<%! this.SuggestionType.toLowerCase() %>",' drop-down-option">',"<%! this.Value %>","</a>","</li>"]};return e.register(t)});
define('tau/ui/extensions/board.editor/ui.extension.board.editor.autocomplete',["jQuery","Underscore","tau/core/extension.base","tau/ui/templates/board.editor/ui.template.board.editor.autocomplete.item"],function(e,t,n,i){function o(e,t){null!=e&&(e.type==t?e.stopImmediatePropagation():o(e.originalEvent,t))}return n.extend({"bus configurator.ready:last + view.dom.ready:last + $form.ready":function(n,a,c,l){var u=l.find(".i-role-filter-control :text"),r=t.bind(this.fire,this);u.on("focus",function(){r("preloading.execute")}),l.delegate(".i-role-clear","click",function(){var t=e(this).parent().find(":text");t.val("")}),u.bind("click keydown keyup",function(){var t=e(this),n=t.val().length>0;t.parent().toggleClass("tau-boardsettings__filter_empty_false",n)}),u.each(function(){var n=e(this);e.browser.msie&&n.bind("keyup",function(){e(this).data("selectionEnd",this.selectionEnd)}),n.bind("keydown",function(t){switch(t.keyCode){case e.ui.keyCode.TAB:e(this).data("ui-autocomplete").menu.active&&t.preventDefault();break;case e.ui.keyCode.SPACE:t.ctrlKey&&(t.preventDefault(),e(this).autocomplete("search"));break;case e.ui.keyCode.ESCAPE:e(this).data("ui-autocomplete").menu.element.is(":visible")&&(e(this).autocomplete("close"),t.preventDefault(),t.stopPropagation())}}).bind("clear",function(){e(this).autocomplete("close")}).autocomplete({minLength:0,position:{my:"left top",at:"left bottom",collision:"flip"},source:function(t,n){r("filter.autocomplete.resolve",{$input:e(this.element),request:t,next:n})},change:function(){e(this).trigger("_change")},focus:function(){return!1},select:function(n,i){var a=e(this),c=i.item,l=a.val(),u=c.Source.slice(0,c.Position.Value);u+=c.LangValue;var s=u,d=u.length;return u+=l.slice(a[0].selectionEnd>0?a[0].selectionEnd:a.data("selectionEnd")||0),a.val(u),a[0].focus(),a[0].setSelectionRange(d,d),a.data("selectionEnd",d),t.contains(["ObjectAttribute","ObjectsCollectionAttribute","Method"],c.SuggestionType)&&setTimeout(function(){a.autocomplete("search",s)},100),r("filter.autocomplete.preload",{value:u,$input:a}),n.stopPropagation(),o(n,"keydown"),!1}});var c=a.getTemplateFactory().get(i.name),l=n.data("ui-autocomplete");l._change=function(e){this._trigger("change",e,{item:this.selectedItem})},l._renderItem=function(e,t){return c.bind({},t).data("ui-autocomplete-item",t).appendTo(e)},l._renderMenu=function(t,n){e(t).addClass("tau-autocomplete__menu drop-down-list").css({maxHeight:.4*e(window).height(),zIndex:this.element.zIndex()+10});var i=this;e.each(n,function(e,n){i._renderItem(t,n)})}})}})});
define('tau/ui/extensions/board.editor/ui.extension.board.editor.stateSetup',["Underscore","jQuery","tau/core/extension.base"],function(e,t,s){return s.extend({COUNT_OF_VISIBLE_CARDS:5,"bus configurator.ready + $el.ready":function(s,i,n){var o=n.find(".i-role-statesetup"),a=e.bind(this.fire,this);o.on("click",function(){var e=t(this);a("$stateTrigger.executed",e)}),i.getTemplateFactory().register({name:"board.editor.stateSetup.chooseProcess",engine:"jqote2",markup:["<div>","<h3>Please select processes to customize:</h3>",'<div class="tau-buttons">',"<% _.forEach(this.processes, function(v){%>",'<button type="button" class="tau-btn tau-primary" data-id="<%= v.id %>"><%! v.name %></button>',"<% }); %>","</div>","</div>"].join("")})},"bus $form.ready":function(e,s){s.find("[name=x_types], [name=y_types]").each(function(){t(this).parent().find(".i-role-statesetup").toggle("entitystate"==t(this).val().toLowerCase())}),s.on("change","[name=x_types], [name=y_types]",function(){t(this).parent().find(".i-role-statesetup").toggle("entitystate"==t(this).val().toLowerCase())}),s.on("_submit",function(){s.find("[name=x_types], [name=y_types]").each(function(){t(this).parent().find(".i-role-statesetup").toggle("entitystate"==t(this).val().toLowerCase())})})},"bus $form.ready + boardSettings.ready:last":function(e,t,s){this._hideCardsIntoMoreAction(t),s.boardSettings.unbind(this),s.boardSettings.bind({fields:["edit"],listener:this,callback:function(e){e.edit&&this._hideCardsIntoMoreAction(t)}.bind(this)})},"bus configurator.ready:last + $form.ready:last + $stateTrigger.executed":function(t,s,i,n){var o=i.find(".tau-board-settings-cards :checkbox:checked").val();o||(o="userstory"),this.fire("card.ready",o),this.getProcess(s,n).done(e.bind(function(e){this.fire("processId.ready",e)},this))},"bus configurator.ready:last + $stateTrigger.executed:last + card.ready + processId.ready":function(e,t,s,i,n){t.getTp2Service().showPopupToChangeProcessWorkflow(t,s,i,n)},getProcess:function(s,i){var n=t.Deferred();return s.getAppStateStore().get({fields:["acid"],callback:e.bind(function(t){var o=t.acid;s.getApplicationContextService().getApplicationContext({acid:o},{success:e.bind(function(e){this.chooseProcess(s,i,e.processes).done(n.resolve)},this),failure:e.bind(function(){this.chooseProcess(s,i,[]).done(n.resolve)},this)})},this)}),n},chooseProcess:function(e,s,i){var n,o=t.Deferred();return 1==i.length?(o.resolve(i[0].id),o):(n=e.getTemplateFactory().get("board.editor.stateSetup.chooseProcess").bind({},{processes:i}),s.tauBubble({template:['<div class="tau-bubble tau-warning-bubble">','<div class="tau-bubble__arrow"  role="arrow"></div>','<div class="tau-bubble__inner tau-container">','<div role="content">',"</div>","</div>","</div>"].join(""),showOnCreation:!0,content:n}),s.tauBubble("widget").on("click","button",function(){o.resolve(t(this).data("id"))}),o)},_hideCardsIntoMoreAction:function(e){var t=e.find(".tau-board-settings-cards button.i-role-cell-type").slice(this.COUNT_OF_VISIBLE_CARDS),s=e.find("button.tau-more");t.filter(":not(.tau-checked)").addClass("hidden").parent().addClass("collapsed"),s.removeClass("hidden").on("click",function(){t.removeClass("hidden").parent().removeClass("collapsed"),s.addClass("hidden")})}})});
define('tau/ui/extensions/board.editor/ui.extension.board.editor.nodata',["Underscore","jQuery","tau/core/extension.base"],function(s,t,e){return e.extend({"bus configurator.ready":function(t,e){this.messageId="board.editor.nodata",this.configFieldName="doNotShowNoCardsMessageOnBoardSetup",this.settingsManager=e.getSettingsManager(),this.settingsManager.get({fields:[this.configFieldName],callback:s.bind(function(s){this.fire("nodata.settings.ready",{messageDisabled:!!s[this.configFieldName]})},this)});var i=e.getGlobalBus();i.on("board.nodata.status.ready",s.bind(function(s,t){this.fire("nodata.status.ready",t)},this)),i.on("application.navigate",s.bind(function(){this._hideMessage()},this)),i.on("error",s.bind(function(){this.fire("globalErrorStatus",!0)},this)),i.on("clearError",s.bind(function(s,t){t&&t.id===this.messageId||this.fire("globalErrorStatus",!1)},this)),this.fire("globalErrorStatus",!1)},"bus globalErrorStatus":function(s,t){t&&this._hideMessage()},"bus nodata.settings.ready:last+nodata.status.ready+globalErrorStatus:last":function(s,t,e,i){t.messageDisabled||i||(e.noCards&&!e.noCardsSetup?this._showNoCards():e.noValuableAxis&&!e.noLanesSetup?this._showNoLanes():this._hideMessage())},_showNoCards:function(){this._show('<div><h3>Hmm... No cards on View...</h3><a href="http://guide.targetprocess.com/troubleshooting/no-cards.html" target="_blank">Find out why this happens?</a>')},_showNoLanes:function(){this._show('<div><h3>Hmm... No lanes on View...</h3><a href="http://guide.targetprocess.com/troubleshooting/no-lanes.html" target="_blank">Find out why this happens?</a>')},_show:function(e){var i={id:this.messageId,button:{caption:"Hide Forever",callback:s.bind(this._disableMessage,this)},type:"information",disableAutoClose:!0,$node:t(e)};this.fire("notification",i)},_disableMessage:function(){var s={};s[this.configFieldName]=!0,this.settingsManager.set({set:s,callback:t.proxy(function(s){this.fire("nodata.settings.ready",{messageDisabled:s[this.configFieldName]})},this)})},_hideMessage:function(){this.fire("clearError",{id:this.messageId})}})});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.errors',["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/utils/utils.serverErrorTranslator"],function(r,e,n,t){var a=function(r){var e=r.data;if(e&&e.cmd&&e.cmd.config){var n=e.cmd.config.errorHandler;if(n){var a=n(e.data);if(a===!1)return}}var o=t.translateServerError.call(this,e);this.fire("error",o)};return n.extend({init:function(){this._super.apply(this,arguments),this.generalErrorHandler=r.bind(a,this);var e=this.config.context.configurator;e.getRestStorage().on("error",this.generalErrorHandler),this.store.on({eventName:"failure",listener:this},this.generalErrorHandler)},subscribeSliceToError:function(r){r.on("error",this.generalErrorHandler)},"bus slice.ready":function(r){this.subscribeSliceToError(r.data.slice),r.data.base&&this.subscribeSliceToError(r.data.base),r.data.lazy&&this.subscribeSliceToError(r.data.lazy)},"bus report.error":function(r){this.generalErrorHandler(r)},"bus lookup.error":function(r){this.generalErrorHandler(r)},"bus dragndrop.error":function(r){this.generalErrorHandler(r)}})});
define('tp/codemirror/lib/codemirror',[],function(){var t=function(){function t(i,a){function m(t){return G&&(K&&229==t||window.opera&&197==t)||V&&K}function x(t){return t>=0&&t<Jn.size}function C(t){return f(Jn,t)}function S(t,e){oi=!0;for(var n=e-t.height,i=t;i;i=i.parent)i.height+=n}function H(t){var e={line:0,ch:0};oe(e,{line:Jn.size-1,ch:C(Jn.size-1).text.length},q(t),e,e),ti=!0}function I(){var t=[];return Jn.iter(0,Jn.size,function(e){t.push(e.text)}),t.join("\n")}function Y(t){function e(t){var n=cn(t,!0);if(n&&!z(n,l)){Un||ie(),l=n,Ae(i,n),ti=!1;var r=we();(n.line>=r.to||n.line<r.from)&&(o=setTimeout(wn(function(){e(t)}),150))}}for(var n=M(t);n!=An;n=n.parentNode)if(n.parentNode==Wn&&n!=Hn)return;for(var n=M(t);n!=An;n=n.parentNode)if(n.parentNode==Bn)return Sn.onGutterClick&&Sn.onGutterClick(Mi,W(Bn.childNodes,n)+ui,t),g(t);var i=cn(t);switch(b(t)){case 3:return void(K&&!V&&dn(t));case 2:return void(i&&Le(i.line,i.ch,!0))}if(!i)return void(M(t)==Ln&&g(t));Un||ie();var r=+new Date;if($n&&$n.time>r-400&&z($n.pos,i))return g(t),setTimeout(ye,20),Re(i.line);if(Zn&&Zn.time>r-400&&z(Zn.pos,i))return $n={time:r,pos:i},g(t),Ke(i);Zn={time:r,pos:i};var o,l=i;if(D&&!z(hi.from,hi.to)&&!A(i,hi.from)&&!A(hi.to,i)){F&&(Dn.draggable=!0);var a=k(zn,"mouseup",wn(function(e){F&&(Dn.draggable=!1),_n=!1,a(),Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)<10&&(g(e),Le(i.line,i.ch,!0),ye())}),!0);return void(_n=!0)}g(t),Le(i.line,i.ch,!0);var s=k(zn,"mousemove",wn(function(t){clearTimeout(o),g(t),e(t)}),!0),a=k(zn,"mouseup",wn(function(t){clearTimeout(o);var e=cn(t);e&&Ae(i,e),g(t),ye(),ti=!0,s(),a()}),!0)}function J(t){for(var e=M(t);e!=An;e=e.parentNode)if(e.parentNode==Bn)return g(t);var n=cn(t);n&&($n={time:+new Date,pos:n},g(t),Ke(n))}function $(t){function e(t,e){var i=new FileReader;i.onload=function(){o[e]=i.result,++l==r&&(n=He(n),wn(function(){var t=fe(o.join(""),n,n);Ae(n,t)})())},i.readAsText(t)}t.preventDefault();var n=cn(t,!0),i=t.dataTransfer.files;if(n&&!Sn.readOnly)if(i&&i.length&&window.FileReader&&window.File)for(var r=i.length,o=Array(r),l=0,a=0;r>a;++a)e(i[a],a);else try{var o=t.dataTransfer.getData("Text");if(o){var s=fe(o,n,n),h=hi.from,f=hi.to;Ae(n,s),_n&&fe("",h,f),ye()}}catch(t){}}function _(t){var e=pe();O(e),t.dataTransfer.setDragImage(X,0,0),t.dataTransfer.setData("Text",e)}function te(t){Un||ie();var e=t.keyCode;R&&27==e&&(t.returnValue=!1);var n=(V?t.metaKey:t.ctrlKey)&&!t.altKey,i=t.ctrlKey||t.altKey||t.metaKey;if(qn=16==e||t.shiftKey?qn||(hi.inverted?hi.to:hi.from):null,!Sn.onKeyEvent||!Sn.onKeyEvent(Mi,v(t))){if(33==e||34==e)return Ie(34==e),g(t);if(n&&(36==e||35==e||V&&(38==e||40==e)))return Be(36==e||38==e),g(t);if(n&&65==e)return De(),g(t);if(!Sn.readOnly){if(!i&&13==e)return;if(!i&&9==e&&Pe(t.shiftKey))return g(t);if(n&&90==e)return ae(),g(t);if(n&&(t.shiftKey&&90==e||89==e))return se(),g(t)}if(36==e&&Sn.smartHome)return je(),g(t);if(pi=(n?"c":"")+(t.altKey?"a":"")+e,hi.inverted&&U[pi]===!0){var r=Q(On);r&&(Qn={anchor:r.start},Z(On,r.start,r.start))}n||t.altKey||(pi=null),ve(pi),Sn.pollForIME&&m(e)&&(gi=50)}}function ee(t){Sn.onKeyEvent&&Sn.onKeyEvent(Mi,v(t))||(Qn&&(Qn=null,ti=!0),16==t.keyCode&&(qn=null),2e3>gi&&!xi&&(gi=2e3))}function ne(t){if(!Sn.onKeyEvent||!Sn.onKeyEvent(Mi,v(t))){if(Sn.electricChars&&Vn.electricChars){var e=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode);Vn.electricChars.indexOf(e)>-1&&setTimeout(wn(function(){Ve(hi.to.line,"smart")}),50)}var n=t.keyCode;13==n?(Sn.readOnly||Fe(),g(t)):t.ctrlKey||t.altKey||t.metaKey||9!=n||"default"==Sn.tabMode?ve(pi):g(t)}}function ie(){"nocursor"!=Sn.readOnly&&(Un||(Sn.onFocus&&Sn.onFocus(Mi),Un=!0,-1==An.className.search(/\bCodeMirror-focused\b/)&&(An.className+=" CodeMirror-focused"),ri||xe()),me(),pn())}function re(){Un&&(Sn.onBlur&&Sn.onBlur(Mi),Un=!1,An.className=An.className.replace(" CodeMirror-focused","")),clearInterval(jn),setTimeout(function(){Un||(qn=null)},150)}function oe(t,e,n,i,r){if(vi){var o=[];for(Jn.iter(t.line,e.line+1,function(t){o.push(t.text)}),vi.addChange(t.line,n.length,o);vi.done.length>Sn.undoDepth;)vi.done.shift()}he(t,e,n,i,r)}function le(t,e){var n=t.pop();if(n){var i=[],r=n.start+n.added;Jn.iter(n.start,r,function(t){i.push(t.text)}),e.push({start:n.start,added:n.old.length,old:i});var o=He({line:n.start+n.old.length-1,ch:L(i[i.length-1],n.old[n.old.length-1])});he({line:n.start,ch:0},{line:r-1,ch:C(r-1).text.length},n.old,o,o),ti=!0}}function ae(){le(vi.done,vi.undone)}function se(){le(vi.undone,vi.done)}function he(t,e,n,i,r){function o(t){return t<=Math.min(e.line,e.line+g)?t:t+g}var a=!1,s=mi.length;Sn.lineWrapping||Jn.iter(t.line,e.line,function(t){return t.text.length==s?(a=!0,!0):void 0});var h=e.line-t.line,f=C(t.line),u=C(e.line);if(f==u)if(1==n.length)f.replace(t.ch,e.ch,n[0]);else{u=f.split(e.ch,n[n.length-1]),f.replace(t.ch,null,n[0]),f.fixMarkEnds(u);for(var c=[],d=1,p=n.length-1;p>d;++d)c.push(l.inheritMarks(n[d],f));c.push(u),Jn.insert(t.line+1,c)}else if(1==n.length)f.replace(t.ch,null,n[0]),u.replace(null,e.ch,""),f.append(u),Jn.remove(t.line+1,h);else{var c=[];f.replace(t.ch,null,n[0]),u.replace(null,e.ch,n[n.length-1]),f.fixMarkEnds(u);for(var d=1,p=n.length-1;p>d;++d)c.push(l.inheritMarks(n[d],f));h>1&&Jn.remove(t.line+1,h-1),Jn.insert(t.line+1,c)}if(Sn.lineWrapping){var m=Ln.clientWidth/hn()-3;Jn.iter(t.line,t.line+n.length,function(t){if(!t.hidden){var e=Math.ceil(t.text.length/m)||1;e!=t.height&&S(t,e)}})}else Jn.iter(t.line,d+n.length,function(t){var e=t.text;e.length>s&&(mi=e,s=e.length,si=null,a=!1)}),a&&(s=0,mi="",si=null,Jn.iter(0,Jn.size,function(t){var e=t.text;e.length>s&&(s=e.length,mi=e)}));for(var v=[],g=n.length-h-1,d=0,x=Gn.length;x>d;++d){var y=Gn[d];y<t.line?v.push(y):y>e.line&&v.push(y+g)}var M=t.line+Math.min(n.length,500);xn(t.line,M),v.push(M),Gn=v,Mn(100),ei.push({from:t.line,to:e.line+1,diff:g}),ni={from:t,to:e,text:n},Ne(i,r,o(hi.from.line),o(hi.to.line)),Wn.style.height=Jn.height*sn()+2*fn()+"px"}function fe(t,e,n){function i(i){if(A(i,e))return i;if(!A(n,i))return r;var o=i.line+t.length-(n.line-e.line)-1,l=i.ch;return i.line==n.line&&(l+=t[t.length-1].length-(n.ch-(n.line==e.line?e.ch:0))),{line:o,ch:l}}e=He(e),n=n?He(n):e,t=q(t);var r;return ce(t,e,n,function(t){return r=t,{from:i(hi.from),to:i(hi.to)}}),r}function ue(t,e){ce(q(t),hi.from,hi.to,function(t){return"end"==e?{from:t,to:t}:"start"==e?{from:hi.from,to:hi.from}:{from:hi.from,to:t}})}function ce(t,e,n,i){var r=1==t.length?t[0].length+e.ch:t[t.length-1].length,o=i({line:e.line+t.length-1,ch:r});oe(e,n,t,o.from,o.to)}function de(t,e){var n=t.line,i=e.line;if(n==i)return C(n).text.slice(t.ch,e.ch);var r=[C(n).text.slice(t.ch)];return Jn.iter(n+1,i,function(t){r.push(t.text)}),r.push(C(i).text.slice(0,e.ch)),r.join("\n")}function pe(){return de(hi.from,hi.to)}function me(){bi||Yn.set(gi,function(){bn(),ge(),Un&&me(),kn()})}function ve(t){function e(){bn();var i=ge();i&&t&&("moved"==i&&null==U[t]&&(U[t]=!0),"changed"==i&&(U[t]=!1)),i||n?(bi=!1,me()):(n=!0,Yn.set(80,e)),kn()}var n=!1;bi=!0,Yn.set(20,e)}function ge(){function t(t,e){for(var i=0;;){var r=n.indexOf("\n",i);if(-1==r||("\r"==n.charAt(r-1)?r-1:r)>=t)return{line:e,ch:t-i};++e,i=r+1}}if(!ri&&Un){var e=!1,n=On.value,i=Q(On);if(!i)return!1;var e=li.text!=n,r=Qn,o=e||i.start!=li.start||i.end!=(r?li.start:li.end);if(!o&&!r)return!1;if(e&&(qn=Qn=null,Sn.readOnly))return ti=!0,"changed";var l=t(i.start,li.from),a=t(i.end,li.from);if(r){var s=i.start==r.anchor?a:l,h=qn?hi.to:i.start==r.anchor?l:a;(hi.inverted=A(s,h))?(l=s,a=h):(Qn=null,l=h,a=s)}if(l.line!=a.line||l.line!=hi.from.line||l.line!=hi.to.line||qn||(ti=!1),e){for(var f,u=0,c=n.length,d=Math.min(c,li.text.length),p=li.from,m=-1;d>u&&(f=n.charAt(u))==li.text.charAt(u);)++u,"\n"==f&&(p++,m=u);for(var v=m>-1?u-m:u,g=li.to-1,x=li.text.length;;){if(f=li.text.charAt(x),n.charAt(c)!=f){++c,++x;break}if("\n"==f&&g--,u>=x||u>=c)break;--c,--x}var m=li.text.lastIndexOf("\n",x-1),y=-1==m?x:x-m-1;oe({line:p,ch:v},{line:g,ch:y},q(n.slice(u,c)),l,a),(p!=g||l.line!=p)&&(ti=!0)}else Ne(l,a);return li.text=n,li.start=i.start,li.end=i.end,e?"changed":o?"moved":!1}}function xe(){var t=[],e=Math.max(0,hi.from.line-1),n=Math.min(Jn.size,hi.to.line+2);Jn.iter(e,n,function(e){t.push(e.text)}),t=On.value=t.join(P);var i=hi.from.ch,r=hi.to.ch;Jn.iter(e,hi.from.line,function(t){i+=P.length+t.text.length}),Jn.iter(e,hi.to.line,function(t){r+=P.length+t.text.length}),li={text:t,from:e,to:n,start:i,end:r},Z(On,i,Qn?i:r)}function ye(){"nocursor"!=Sn.readOnly&&On.focus()}function Me(){if(Rn.getBoundingClientRect){var t=Rn.getBoundingClientRect(),e=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(t.top<0||t.bottom>e)&&Rn.scrollIntoView()}}function be(){var t=on(hi.inverted?hi.from:hi.to),e=Sn.lineWrapping?Math.min(t.x,Dn.offsetWidth):t.x;return ke(e,t.y,e,t.yBot)}function ke(t,e,n,i){var r=un(),o=fn(),l=sn();e+=o,i+=o,t+=r,n+=r;var a=Ln.clientHeight,s=Ln.scrollTop,h=!1,f=!0;s>e?(Ln.scrollTop=Math.max(0,e-2*l),h=!0):i>s+a&&(Ln.scrollTop=i+l-a,h=!0);var u=Ln.clientWidth,c=Ln.scrollLeft,d=Sn.fixedGutter?In.clientWidth:0;return c+d>t?(50>t&&(t=0),Ln.scrollLeft=Math.max(0,t-10-d),h=!0):n>u+c&&(Ln.scrollLeft=n+10-u,h=!0,n>Wn.clientWidth&&(f=!1)),h&&Sn.onScroll&&Sn.onScroll(Mi),f}function we(){var t=sn(),e=Ln.scrollTop-fn(),n=Math.max(0,Math.floor(e/t)),i=Math.ceil((e+Ln.clientHeight)/t);return{from:c(Jn,n),to:c(Jn,i)}}function Ce(t){if(!Ln.clientWidth)return void(ui=ci=fi=0);var e=we();if(!(t!==!0&&0==t.length&&e.from>=ui&&e.to<=ci)){var n=Math.max(e.from-100,0),i=Math.min(Jn.size,e.to+100);n>ui&&20>n-ui&&(n=ui),ci>i&&20>ci-i&&(i=Math.min(Jn.size,ci));for(var r=t===!0?[]:Se([{from:ui,to:ci,domStart:0}],t),o=0,l=0;l<r.length;++l){var a=r[l];a.from<n&&(a.domStart+=n-a.from,a.from=n),a.to>i&&(a.to=i),a.from>=a.to?r.splice(l--,1):o+=a.to-a.from}if(o!=i-n){r.sort(function(t,e){return t.domStart-e.domStart});var s=sn(),h=In.style.display;Fn.style.display=In.style.display="none",Te(n,i,r),Fn.style.display="";var f=n!=ui||i!=ci||di!=Ln.clientHeight;if(f&&(di=Ln.clientHeight),ui=n,ci=i,fi=d(Jn,n),Hn.style.top=fi*s+"px",Wn.style.height=Jn.height*s+2*fn()+"px",Fn.childNodes.length!=ci-ui)throw new Error("BAD PATCH! "+JSON.stringify(r)+" size="+(ci-ui)+" nodes="+Fn.childNodes.length);if(Sn.lineWrapping){si=Ln.clientWidth;var u=Fn.firstChild;Jn.iter(ui,ci,function(t){if(!t.hidden){var e=Math.round(u.offsetHeight/s)||1;t.height!=e&&(S(t,e),oi=!0)}u=u.nextSibling})}else null==si&&(si=nn(mi)),si>Ln.clientWidth?(Dn.style.width=si+"px",Wn.style.width="",Wn.style.width=Ln.scrollWidth+"px"):Dn.style.width=Wn.style.width="";In.style.display=h,(f||oi)&&Ee(),ze()}}}function Se(t,e){for(var n=0,i=e.length||0;i>n;++n){for(var r=e[n],o=[],l=r.diff||0,a=0,s=t.length;s>a;++a){var h=t[a];r.to<=h.from&&r.diff?o.push({from:h.from+l,to:h.to+l,domStart:h.domStart}):r.to<=h.from||r.from>=h.to?o.push(h):(r.from>h.from&&o.push({from:h.from,to:r.from,domStart:h.domStart}),r.to<h.to&&o.push({from:r.to+l,to:h.to+l,domStart:h.domStart+(r.to-h.from)}))}t=o}return t}function Te(t,e,n){function i(t){var e=t.nextSibling;return t.parentNode.removeChild(t),e}if(n.length){for(var r=0,o=Fn.firstChild,l=0;l<n.length;++l){for(var a=n[l];a.domStart>r;)o=i(o),r++;for(var s=0,h=a.to-a.from;h>s;++s)o=o.nextSibling,r++}for(;o;)o=i(o)}else Fn.innerHTML="";var f=n.shift(),o=Fn.firstChild,s=t,u=hi.from.line,c=hi.to.line,d=t>u&&c>=t,p=zn.createElement("div");Jn.iter(t,e,function(t){var e=null,i=null;d?(e=0,c==s&&(d=!1,i=hi.to.ch)):u==s&&(c==s?(e=hi.from.ch,i=hi.to.ch):(d=!0,e=hi.from.ch)),f&&f.to==s&&(f=n.shift()),!f||f.from>s?(p.innerHTML=t.hidden?"<pre></pre>":t.getHTML(e,i,!0),Fn.insertBefore(p.firstChild,o)):o=o.nextSibling,++s})}function Ee(){if(Sn.gutter||Sn.lineNumbers){var t=Hn.offsetHeight,e=Ln.clientHeight;In.style.height=(2>t-e?e:t)+"px";var n=[],i=ui;Jn.iter(ui,Math.max(ci,ui+1),function(t){if(t.hidden)n.push("<pre></pre>");else{var e=t.gutterMarker,r=Sn.lineNumbers?i+Sn.firstLineNumber:null;e&&e.text?r=e.text.replace("%N%",null!=r?r:""):null==r&&(r=" "),n.push(e&&e.style?'<pre class="'+e.style+'">':"<pre>",r);for(var o=1;o<t.height;++o)n.push("<br>&nbsp;");n.push("</pre>")}++i}),In.style.display="none",Bn.innerHTML=n.join("");for(var r=String(Jn.size).length,o=Bn.firstChild,l=E(o),a="";l.length+a.length<r;)a+=" ";a&&o.insertBefore(zn.createTextNode(a),o.firstChild),In.style.display="",Dn.style.marginLeft=In.offsetWidth+"px",oi=!1}}function ze(){var t=hi.inverted?hi.from:hi.to,e=(sn(),on(t,!0)),n=e.y+fi*sn();Nn.style.top=Math.max(Math.min(n,Ln.offsetHeight),0)+"px",Nn.style.left=e.x-Ln.scrollLeft+"px",z(hi.from,hi.to)?(Rn.style.top=e.y+"px",Rn.style.left=(Sn.lineWrapping?Math.min(e.x,Dn.offsetWidth):e.x)+"px",Rn.style.display=""):Rn.style.display="none"}function Ae(t,e){var n=qn&&He(qn);n&&(A(n,t)?t=n:A(e,n)&&(e=n)),Ne(t,e)}function Ne(t,e,n,i){if(null==n&&(n=hi.from.line,i=hi.to.line),!z(hi.from,t)||!z(hi.to,e)){if(A(e,t)){var r=e;e=t,t=r}t.line!=n&&(t=Oe(t,n,hi.from.ch)),e.line!=i&&(e=Oe(e,i,hi.to.ch)),z(t,e)?hi.inverted=!1:z(t,hi.to)?hi.inverted=!1:z(e,hi.from)&&(hi.inverted=!0),z(t,e)?z(hi.from,hi.to)||ei.push({from:n,to:i+1}):z(hi.from,hi.to)?ei.push({from:t.line,to:e.line+1}):(z(t,hi.from)||ei.push(t.line<n?{from:t.line,to:Math.min(e.line,n)+1}:{from:n,to:Math.min(i,t.line)+1}),z(e,hi.to)||ei.push(e.line<i?{from:Math.max(n,t.line),to:i+1}:{from:Math.max(t.line,i),to:e.line+1})),hi.from=t,hi.to=e,ii=!0}}function Oe(t,e,n){function i(e){for(var i=t.line+e,r=1==e?Jn.size:-1;i!=r;){var o=C(i);if(!o.hidden){var l=t.ch;return(l>n||l>o.text.length)&&(l=o.text.length),{line:i,ch:l}}i+=e}}var r=C(t.line);return r.hidden?t.line>=e?i(1)||i(-1):i(-1)||i(1):t}function Le(t,e,n){var i=He({line:t,ch:e||0});(n?Ae:Ne)(i,i)}function We(t){return Math.max(0,Math.min(t,Jn.size-1))}function He(t){if(t.line<0)return{line:0,ch:0};if(t.line>=Jn.size)return{line:Jn.size-1,ch:C(Jn.size-1).text.length};var e=t.ch,n=C(t.line).text.length;return null==e||e>n?{line:t.line,ch:n}:0>e?{line:t.line,ch:0}:t}function Ie(t){var e=Math.floor(Ln.clientHeight/sn()),n=hi.inverted?hi.from:hi.to,i=d(Jn,n.line)+Math.max(e-1,1)*(t?1:-1);Le(c(Jn,i),n.ch,!0)}function Be(t){var e=t?{line:0,ch:0}:{line:Jn.size-1,ch:C(Jn.size-1).text.length};Ae(e,e)}function De(){var t=Jn.size-1;Ne({line:0,ch:0},{line:t,ch:C(t).text.length})}function Ke(t){for(var e=C(t.line).text,n=t.ch,i=t.ch;n>0&&/\w/.test(e.charAt(n-1));)--n;for(;i<e.length&&/\w/.test(e.charAt(i));)++i;Ae({line:t.line,ch:n},{line:t.line,ch:i})}function Re(t){Ae({line:t,ch:0},{line:t,ch:C(t).text.length})}function Fe(){ue("\n","end"),"flat"!=Sn.enterMode&&Ve(hi.from.line,"keep"==Sn.enterMode?"prev":"smart")}function Pe(t){function e(t){if(z(hi.from,hi.to))return Ve(hi.from.line,t);for(var e=hi.to.line-(hi.to.ch?0:1),n=hi.from.line;e>=n;++n)Ve(n,t)}switch(qn=null,Sn.tabMode){case"default":return!1;case"indent":e("smart");break;case"classic":if(z(hi.from,hi.to)){t?Ve(hi.from.line,"smart"):ue("	","end");break}case"shift":e(t?"subtract":"add")}return!0}function je(){var t=Math.max(0,C(hi.from.line).text.search(/\S/));Le(hi.from.line,hi.from.ch<=t&&hi.from.ch?0:t,!0)}function Ve(t,e){if("smart"==e)if(Vn.indent)var n=gn(t);else e="prev";var i,r=C(t),o=r.indentation(),l=r.text.match(/^\s*/)[0];"prev"==e?i=t?C(t-1).indentation():0:"smart"==e?i=Vn.indent(n,r.text.slice(l.length)):"add"==e?i=o+Sn.indentUnit:"subtract"==e&&(i=o-Sn.indentUnit),i=Math.max(0,i);var a=i-o;if(a){var s="",h=0;if(Sn.indentWithTabs)for(var f=Math.floor(i/j);f;--f)h+=j,s+="	";for(;i>h;)++h,s+=" "}else{if(hi.from.line!=t&&hi.to.line!=t)return;var s=l}fe(s,{line:t,ch:0},{line:t,ch:l.length})}function Ge(){Vn=t.getMode(Sn,Sn.mode),Jn.iter(0,Jn.size,function(t){t.stateAfter=null}),Gn=[0],Mn()}function Ue(){var t=Sn.gutter||Sn.lineNumbers;In.style.display=t?"":"none",t?oi=!0:Fn.parentNode.style.marginLeft=0}function Ye(){if(Sn.lineWrapping){An.className+=" CodeMirror-wrap";var t=Ln.clientWidth/hn()-3;Jn.iter(0,Jn.size,function(e){if(!e.hidden){var n=Math.ceil(e.text.length/t)||1;1!=n&&S(e,n)}}),Dn.style.width=Wn.style.width=""}else An.className=An.className.replace(" CodeMirror-wrap",""),si=null,mi="",Jn.iter(0,Jn.size,function(t){1==t.height||t.hidden||S(t,1),t.text.length>mi.length&&(mi=t.text)});ei.push({from:0,to:Jn.size})}function Xe(){this.set=[]}function Je(t,e,n){function i(t,e,n,i){mark=C(t).addMark(new r(e,n,i,o.set))}t=He(t),e=He(e);var o=new Xe;if(t.line==e.line)i(t.line,t.ch,e.ch,n);else{i(t.line,t.ch,null,n);for(var l=t.line+1,a=e.line;a>l;++l)i(l,null,null,n);i(e.line,null,e.ch,n)}return ei.push({from:t.line,to:e.line+1}),o}function qe(t){t=He(t);var e=new o(t.ch);return C(t.line).addMark(e),e}function Qe(t,e,n){return"number"==typeof t&&(t=C(We(t))),t.gutterMarker={text:e,style:n},oi=!0,t}function Ze(t){"number"==typeof t&&(t=C(We(t))),t.gutterMarker=null,oi=!0}function $e(t,e){var n=t,i=t;return"number"==typeof t?i=C(We(t)):n=u(t),null==n?null:(e(i,n)&&ei.push({from:n,to:n+1}),i)}function _e(t,e){return $e(t,function(t){return t.className!=e?(t.className=e,!0):void 0})}function tn(t,e){return $e(t,function(t,n){return t.hidden!=e?(t.hidden=e,S(t,e?0:1),!e||hi.from.line!=n&&hi.to.line!=n||Ne(Oe(hi.from,hi.from.line,hi.from.ch),Oe(hi.to,hi.to.line,hi.to.ch)),oi=!0):void 0})}function en(t){if("number"==typeof t){if(!x(t))return null;var e=t;if(t=C(t),!t)return null}else{var e=u(t);if(null==e)return null}var n=t.gutterMarker;return{line:e,handle:t,text:t.text,markerText:n&&n.text,markerClass:n&&n.style,lineClass:t.className}}function nn(t){return Kn.innerHTML="<pre><span>x</span></pre>",Kn.firstChild.firstChild.firstChild.nodeValue=t,Kn.firstChild.firstChild.offsetWidth||10}function rn(t,e){var n="";if(Sn.lineWrapping){var i=t.text.indexOf(" ",e+2);n=t.text.slice(e+1,0>i?t.text.length:i+(R?5:0))}Kn.innerHTML="<pre>"+t.getHTML(null,null,!1,e)+'<span id="CodeMirror-temp-'+Si+'">'+(t.text.charAt(e)||" ")+"</span>"+n+"</pre>";var r=document.getElementById("CodeMirror-temp-"+Si),o=r.offsetTop,l=r.offsetLeft;if(R&&e&&0==o&&0==l){var a=document.createElement("span");a.innerHTML="x",r.parentNode.insertBefore(a,r.nextSibling),o=a.offsetTop}return{top:o,left:l}}function on(t,e){var n,i=sn(),r=i*(d(Jn,t.line)-(e?fi:0));if(0==t.ch)n=0;else{var o=rn(C(t.line),t.ch);n=o.left,Sn.lineWrapping&&(r+=Math.max(0,o.top))}return{x:n,y:r,yBot:r+i}}function ln(t,e){function n(t){var e=rn(a,t);if(h){var n=Math.round(e.top/i);return Math.max(0,e.left+(n-f)*Ln.clientWidth)}return e.left}0>e&&(e=0);var i=sn(),r=hn(),o=fi+Math.floor(e/i),l=c(Jn,o);if(l>=Jn.size)return{line:Jn.size-1,ch:0};var a=C(l),s=a.text,h=Sn.lineWrapping,f=h?o-d(Jn,l):0;if(0>=t&&0==f)return{line:l,ch:0};for(var u,p=0,m=0,v=s.length,g=Math.min(v,Math.ceil((t+f*Ln.clientWidth*.9)/r));;){var x=n(g);if(!(t>=x&&v>g)){u=x,v=g;break}g=Math.min(v,Math.ceil(1.2*g))}if(t>u)return{line:l,ch:v};for(g=Math.floor(.8*v),x=n(g),t>x&&(p=g,m=x);;){if(1>=v-p)return{line:l,ch:u-t>t-m?p:v};var y=Math.ceil((p+v)/2),M=n(y);M>t?(v=y,u=M):(p=y,m=M)}}function an(t){var e=on(t,!0),n=T(Dn);return{x:n.left+e.x,y:n.top+e.y,yBot:n.top+e.yBot}}function sn(){var t=Fn.offsetHeight;return t==wi?ki:(wi=t,Kn.innerHTML="<pre>x<br>x<br>x<br>x<br>x<br>x<br>x<br>x<br>x<br>x</pre>",ki=Kn.firstChild.offsetHeight/10||1)}function hn(){return Ln.clientWidth==wi?Ci:(wi=Ln.clientWidth,Ci=nn("x"))}function fn(){return Dn.offsetTop}function un(){return Dn.offsetLeft}function cn(t,e){var n,i,r=T(Ln,!0);try{n=t.clientX,i=t.clientY}catch(t){return null}if(!e&&(n-r.left>Ln.clientWidth||i-r.top>Ln.clientHeight))return null;var o=T(Dn,!0);return ln(n-o.left,i-o.top)}function dn(t){function e(){var t=q(On.value).join("\n");t!=r&&wn(ue)(t,"end"),Nn.style.position="relative",On.style.cssText=i,ri=!1,xe(),me()}var n=cn(t);if(n&&!window.opera){(z(hi.from,hi.to)||A(n,hi.from)||!A(n,hi.to))&&wn(Le)(n.line,n.ch);var i=On.style.cssText;Nn.style.position="absolute",On.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(t.clientY-5)+"px; left: "+(t.clientX-5)+"px; z-index: 1000; background: white; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",ri=!0;var r=On.value=pe();if(ye(),Z(On,0,On.value.length),K){y(t);var o=k(window,"mouseup",function(){o(),setTimeout(e,20)},!0)}else setTimeout(e,50)}}function pn(){clearInterval(jn);var t=!0;Rn.style.visibility="",jn=setInterval(function(){Rn.style.visibility=(t=!t)?"":"hidden"},650)}function mn(t){function e(t,e,n){if(t.text)for(var i,r=t.styles,o=l?0:t.text.length-1,s=l?0:r.length-2,h=l?r.length:-2;s!=h;s+=2*a){var f=r[s];if(null==r[s+1]||r[s+1]==c){for(var u=l?0:f.length-1,m=l?f.length:-1;u!=m;u+=a,o+=a)if(o>=e&&n>o&&p.test(i=f.charAt(u))){var v=Ti[i];if(">"==v.charAt(1)==l)d.push(i);else{if(d.pop()!=v.charAt(0))return{pos:o,match:!1};if(!d.length)return{pos:o,match:!0}}}}else o+=a*f.length}}var n=hi.inverted?hi.from:hi.to,i=C(n.line),r=n.ch-1,o=r>=0&&Ti[i.text.charAt(r)]||Ti[i.text.charAt(++r)];if(o){for(var l=(o.charAt(0),">"==o.charAt(1)),a=l?1:-1,s=i.styles,h=r+1,f=0,u=s.length;u>f;f+=2)if((h-=s[f].length)<=0){var c=s[f+1];break}for(var d=[i.text.charAt(r)],p=/[(){}[\]]/,f=n.line,u=l?Math.min(f+100,Jn.size):Math.max(-1,f-100);f!=u;f+=a){var i=C(f),m=f==n.line,v=e(i,m&&l?r+1:0,m&&!l?r:i.text.length);if(v)break}v||(v={pos:null,match:!1});var c=v.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",g=Je({line:n.line,ch:r},{line:n.line,ch:r+1},c),x=null!=v.pos&&Je({line:f,ch:v.pos},{line:f,ch:v.pos+1},c),y=wn(function(){g.clear(),x&&x.clear()});t?setTimeout(y,800):ai=y}}function vn(t){for(var e,n,i=t,r=t-40;i>r;--i){if(0==i)return 0;var o=C(i-1);if(o.stateAfter)return i;var l=o.indentation();(null==n||e>l)&&(n=i-1,e=l)}return n}function gn(t){var i=vn(t),r=i&&C(i-1).stateAfter;return r=r?e(Vn,r):n(Vn),Jn.iter(i,t,function(t){t.highlight(Vn,r),t.stateAfter=e(Vn,r)}),t>i&&ei.push({from:i,to:t}),t<Jn.size&&!C(t).stateAfter&&Gn.push(t),r}function xn(t,n){var i=gn(t);Jn.iter(t,n,function(t){t.highlight(Vn,i),t.stateAfter=e(Vn,i)})}function yn(){for(var t=+new Date+Sn.workTime,i=Gn.length;Gn.length;){if(C(ui).stateAfter)var r=Gn.pop();else var r=ui;if(!(r>=Jn.size)){var o=vn(r),l=o&&C(o-1).stateAfter;l=l?e(Vn,l):n(Vn);var a=0,s=Vn.compareStates,h=!1,f=o,u=!1;if(Jn.iter(f,Jn.size,function(n){var i=n.stateAfter;if(+new Date>t)return Gn.push(f),Mn(Sn.workDelay),h&&ei.push({from:r,to:f+1}),u=!0;var o=n.highlight(Vn,l);if(o&&(h=!0),n.stateAfter=e(Vn,l),s){if(i&&s(i,l))return!0}else if(o===!1&&i){if(++a>3)return!0}else a=0;++f}),u)return;h&&ei.push({from:r,to:f+1})}}i&&Sn.onHighlightComplete&&Sn.onHighlightComplete(Mi)}function Mn(t){Gn.length&&Xn.set(t,wn(yn))}function bn(){ti=null,ei=[],ni=ii=!1}function kn(){var t=!1;ii&&(t=!be()),ei.length?Ce(ei):(ii&&ze(),oi&&Ee()),t&&be(),ii&&(Me(),pn()),Un&&!ri&&(ti===!0||ti!==!1&&ii)&&xe(),ii&&Sn.matchBrackets&&setTimeout(wn(function(){ai&&(ai(),ai=null),mn(!1)}),20);var e=ni;ii&&Sn.onCursorActivity&&Sn.onCursorActivity(Mi),e&&Sn.onChange&&Mi&&Sn.onChange(Mi,e)}function wn(t){return function(){Ei++||bn();try{var e=t.apply(this,arguments)}finally{--Ei||kn()}return e}}function Cn(t,e,n){if(this.atOccurrence=!1,null==n&&(n="string"==typeof t&&t==t.toLowerCase()),e=e&&"object"==typeof e?He(e):{line:0,ch:0},this.pos={from:e,to:e},"string"!=typeof t)this.matches=function(e,n){if(e)for(var i=C(n.line).text.slice(0,n.ch),r=i.match(t),o=0;r;){var l=i.indexOf(r[0]);o+=l,i=i.slice(l+1);var a=i.match(t);if(!a)break;r=a,o++}else var i=C(n.line).text.slice(n.ch),r=i.match(t),o=r&&n.ch+i.indexOf(r[0]);return r?{from:{line:n.line,ch:o},to:{line:n.line,ch:o+r[0].length},match:r}:void 0};else{n&&(t=t.toLowerCase());var i=n?function(t){return t.toLowerCase()}:function(t){return t},r=t.split("\n");this.matches=1==r.length?function(e,n){var r,o=i(C(n.line).text),l=t.length;return(e?n.ch>=l&&-1!=(r=o.lastIndexOf(t,n.ch-l)):-1!=(r=o.indexOf(t,n.ch)))?{from:{line:n.line,ch:r},to:{line:n.line,ch:r+l}}:void 0}:function(t,e){var n=e.line,o=t?r.length-1:0,l=r[o],a=i(C(n).text),s=t?a.indexOf(l)+l.length:a.lastIndexOf(l);if(!(t?s>=e.ch||s!=l.length:s<=e.ch||s!=a.length-l.length))for(;;){if(t?!n:n==Jn.size-1)return;if(a=i(C(n+=t?-1:1).text),l=r[t?--o:++o],!(o>0&&o<r.length-1)){var h=t?a.lastIndexOf(l):a.indexOf(l)+l.length;if(t?h!=a.length-l.length:h!=l.length)return;var f={line:e.line,ch:s},u={line:n,ch:h};return{from:t?u:f,to:t?f:u}}if(a!=l)return}}}}var Sn={},Tn=t.defaults;for(var En in Tn)Tn.hasOwnProperty(En)&&(Sn[En]=(a&&a.hasOwnProperty(En)?a:Tn)[En]);var zn=Sn.document,An=zn.createElement("div");An.className="CodeMirror"+(Sn.lineWrapping?" CodeMirror-wrap":""),An.innerHTML='<div style="overflow: hidden; position: relative; width: 1px; height: 0px;"><textarea style="position: absolute; width: 10000px;" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll cm-s-'+Sn.theme+'"><div style="position: relative"><div style="position: relative"><div class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative"><div style="position: absolute; width: 100%; height: 0; overflow: hidden; visibility: hidden"></div><pre class="CodeMirror-cursor">&#160;</pre><div></div></div></div></div></div></div>',i.appendChild?i.appendChild(An):i(An);var Nn=An.firstChild,On=Nn.firstChild,Ln=An.lastChild,Wn=Ln.firstChild,Hn=Wn.firstChild,In=Hn.firstChild,Bn=In.firstChild,Dn=In.nextSibling.firstChild,Kn=Dn.firstChild,Rn=Kn.nextSibling,Fn=Rn.nextSibling;F||(Dn.draggable=!0),null!=Sn.tabindex&&(On.tabindex=Sn.tabindex),Sn.gutter||Sn.lineNumbers||(In.style.display="none");try{nn("x")}catch(Pn){throw Pn.message.match(/unknown runtime/i)&&(Pn=new Error("A CodeMirror inside a P-style element does not work in Internet Explorer. (innerHTML bug)")),Pn}var jn,Vn,Gn,Un,Yn=new w,Xn=new w,Jn=new h([new s([new l("")])]);Ge();var qn,Qn,Zn,$n,_n,ti,ei,ni,ii,ri,oi,li,ai,si,hi={from:{line:0,ch:0},to:{line:0,ch:0},inverted:!1},fi=0,ui=0,ci=0,di=0,pi=null,mi="";wn(function(){H(Sn.value||""),ti=!1})();var vi=new p,gi=2e3,xi=!G&&!V&&(K||window.opera);Sn.pollForIME&&xi&&(gi=50),k(Ln,"mousedown",wn(Y)),k(Ln,"dblclick",wn(J)),k(Dn,"dragstart",_),k(Dn,"selectstart",g),K||k(Ln,"contextmenu",dn),k(Ln,"scroll",function(){Ce([]),Sn.fixedGutter&&(In.style.left=Ln.scrollLeft+"px"),Sn.onScroll&&Sn.onScroll(Mi)}),k(window,"resize",function(){Ce(!0)}),k(On,"keyup",wn(ee)),k(On,"input",function(){ve(pi)}),k(On,"keydown",wn(te)),k(On,"keypress",wn(ne)),k(On,"focus",ie),k(On,"blur",re),k(Ln,"dragenter",y),k(Ln,"dragover",y),k(Ln,"drop",wn($)),k(Ln,"paste",function(){ye(),ve()}),k(On,"paste",function(){ve()}),k(On,"cut",function(){ve()});var yi;try{yi=zn.activeElement==On}catch(Pn){}yi?setTimeout(ie,20):re();var Mi=An.CodeMirror={getValue:I,setValue:wn(H),getSelection:pe,replaceSelection:wn(ue),focus:function(){ye(),ie(),ve()},setOption:function(t,e){var n=Sn[t];Sn[t]=e,"mode"==t||"indentUnit"==t?Ge():"readOnly"==t&&"nocursor"==e?On.blur():"theme"==t?Ln.className=Ln.className.replace(/cm-s-\w+/,"cm-s-"+e):"lineWrapping"==t&&n!=e?wn(Ye)():"pollForIME"==t&&xi&&(gi=e?50:2e3),("lineNumbers"==t||"gutter"==t||"firstLineNumber"==t||"theme"==t)&&wn(Ue)()},getOption:function(t){return Sn[t]},undo:wn(ae),redo:wn(se),indentLine:wn(function(t,e){x(t)&&Ve(t,null==e?"smart":e?"add":"subtract")}),historySize:function(){return{undo:vi.done.length,redo:vi.undone.length}},clearHistory:function(){vi=new p},matchBrackets:wn(function(){mn(!0)}),getTokenAt:wn(function(t){return t=He(t),C(t.line).getTokenAt(Vn,gn(t.line),t.ch)}),getStateAfter:function(t){return t=We(null==t?Jn.size-1:t),gn(t+1)},cursorCoords:function(t){return null==t&&(t=hi.inverted),an(t?hi.from:hi.to)},charCoords:function(t){return an(He(t))},coordsChar:function(t){var e=T(Dn);return ln(t.x-e.left,t.y-e.top)},getSearchCursor:function(t,e,n){return new Cn(t,e,n)},markText:wn(Je),setBookmark:qe,setMarker:wn(Qe),clearMarker:wn(Ze),setLineClass:wn(_e),hideLine:wn(function(t){return tn(t,!0)}),showLine:wn(function(t){return tn(t,!1)}),lineInfo:en,addWidget:function(t,e,n,i,r){t=on(He(t));var o=t.yBot,l=t.x;if(e.style.position="absolute",Wn.appendChild(e),"over"==i)o=t.y;else if("near"==i){var a=Math.max(Ln.offsetHeight,Jn.height*sn()),s=Math.max(Wn.clientWidth,Dn.clientWidth)-un();t.yBot+e.offsetHeight>a&&t.y>e.offsetHeight&&(o=t.y-e.offsetHeight),l+e.offsetWidth>s&&(l=s-e.offsetWidth)}e.style.top=o+fn()+"px",e.style.left=e.style.right="","right"==r?(l=Wn.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==r?l=0:"middle"==r&&(l=(Wn.clientWidth-e.offsetWidth)/2),e.style.left=l+un()+"px"),n&&ke(l,o,l+e.offsetWidth,o+e.offsetHeight)},lineCount:function(){return Jn.size},getCursor:function(t){return null==t&&(t=hi.inverted),N(t?hi.from:hi.to)},somethingSelected:function(){return!z(hi.from,hi.to)},setCursor:wn(function(t,e){null==e&&"number"==typeof t.line?Le(t.line,t.ch):Le(t,e)}),setSelection:wn(function(t,e){Ne(He(t),He(e||t))}),getLine:function(t){return x(t)?C(t).text:void 0},setLine:wn(function(t,e){x(t)&&fe(e,{line:t,ch:0},{line:t,ch:C(t).text.length})}),removeLine:wn(function(t){x(t)&&fe("",{line:t,ch:0},He({line:t+1,ch:0}))}),replaceRange:wn(fe),getRange:function(t,e){return de(He(t),He(e))},coordsFromIndex:function(t){var e,n=0;return Jn.iter(0,Jn.size,function(i){var r=i.text.length+1;return r>t?(e=t,!0):(t-=r,void++n)}),He({line:n,ch:e})},operation:function(t){return wn(t)()},refresh:function(){Ce(!0)},getInputField:function(){return On},getWrapperElement:function(){return An},getScrollerElement:function(){return Ln},getGutterElement:function(){return In}},bi=!1;Xe.prototype.clear=wn(function(){for(var t=0,e=this.set.length;e>t;++t){var n=this.set[t].marked;if(n)for(var i=0;i<n.length;++i)n[i].set==this.set&&n.splice(i--,1)}ei.push({from:0,to:Jn.size})}),Xe.prototype.find=function(){for(var t,e,n=0,i=this.set.length;i>n;++n)for(var r=this.set[n],o=r.marked,l=0;l<o.length;++l){var a=o[l];if(a.set==this.set&&(null!=a.from||null!=a.to)){var s=u(r);null!=s&&(null!=a.from&&(t={line:s,ch:a.from}),null!=a.to&&(e={line:s,ch:a.to}))}}return{from:t,to:e}};var ki,wi,Ci,Si=Math.floor(16777215*Math.random()).toString(16),wi=0,Ti={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},Ei=0;Cn.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(t){function e(t){var e={line:t,ch:0};return n.pos={from:e,to:e},n.atOccurrence=!1,!1}for(var n=this,i=He(t?this.pos.from:this.pos.to);;){if(this.pos=this.matches(t,i))return this.atOccurrence=!0,this.pos.match||!0;if(t){if(!i.line)return e(0);i={line:i.line-1,ch:C(i.line-1).text.length}}else{if(i.line==Jn.size-1)return e(Jn.size);i={line:i.line+1,ch:0}}}},from:function(){return this.atOccurrence?N(this.pos.from):void 0},to:function(){return this.atOccurrence?N(this.pos.to):void 0},replace:function(t){var e=this;this.atOccurrence&&wn(function(){e.pos.to=fe(t,e.pos.from,e.pos.to)})()}};for(var zi in B)B.propertyIsEnumerable(zi)&&!Mi.propertyIsEnumerable(zi)&&(Mi[zi]=B[zi]);return Mi}function e(t,e){if(e===!0)return e;if(t.copyState)return t.copyState(e);var n={};for(var i in e){var r=e[i];r instanceof Array&&(r=r.concat([])),n[i]=r}return n}function n(t,e,n){return t.startState?t.startState(e,n):!0}function i(t){this.pos=this.start=0,this.string=t}function r(t,e,n,i){this.from=t,this.to=e,this.style=n,this.set=i}function o(t){this.from=t,this.to=t,this.line=null}function l(t,e){this.styles=e||[t,null],this.text=t,this.height=1,this.marked=this.gutterMarker=this.className=null,this.stateAfter=this.parent=this.hidden=null}function a(t,e,n,i){for(var r=0,o=0,l=0;e>o;r+=2){var a=n[r],s=o+a.length;0==l?(s>t&&i.push(a.slice(t-o,Math.min(a.length,e-o)),n[r+1]),s>=t&&(l=1)):1==l&&(s>e?i.push(a.slice(0,e-o),n[r+1]):i.push(a,n[r+1])),o=s}}function s(t){this.lines=t,this.parent=null;for(var e=0,n=t.length,i=0;n>e;++e)t[e].parent=this,i+=t[e].height;this.height=i}function h(t){this.children=t;for(var e=0,n=0,i=0,r=t.length;r>i;++i){var o=t[i];e+=o.chunkSize(),n+=o.height,o.parent=this
}this.size=e,this.height=n,this.parent=null}function f(t,e){for(;;){for(var n=0,i=t.children.length;i>n;++n){var r=t.children[n],o=r.chunkSize();if(o>e){t=r;break}e-=o}if(t.lines)return t.lines[e]}}function u(t){if(null==t.parent)return null;for(var e=t.parent,n=W(e.lines,t),i=e.parent;i;e=i,i=i.parent){var r=0;for(i.children.length;i.children[r]!=e;++r)n+=i.children[r].chunkSize()}return n}function c(t,e){var n=0;t:do{for(var i=0,r=t.children.length;r>i;++i){var o=t.children[i],l=o.height;if(l>e){t=o;continue t}e-=l,n+=o.chunkSize()}return n}while(!t.lines);for(var i=0,r=t.lines.length;r>i;++i){var a=t.lines[i],s=a.height;if(s>e)break;e-=s}return n+i}function d(t,e){var n=0;t:do{for(var i=0,r=t.children.length;r>i;++i){var o=t.children[i],l=o.chunkSize();if(l>e){t=o;continue t}e-=l,n+=o.height}return n}while(!t.lines);for(var i=0;e>i;++i)n+=t.lines[i].height;return n}function p(){this.time=0,this.done=[],this.undone=[]}function m(){y(this)}function v(t){return t.stop||(t.stop=m),t}function g(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function x(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function y(t){g(t),x(t)}function M(t){return t.target||t.srcElement}function b(t){return t.which?t.which:1&t.button?1:2&t.button?3:4&t.button?2:void 0}function k(t,e,n,i){function r(t){n(t||window.event)}if("function"==typeof t.addEventListener){if(t.addEventListener(e,r,!1),i)return function(){t.removeEventListener(e,r,!1)}}else if(t.attachEvent("on"+e,r),i)return function(){t.detachEvent("on"+e,r)}}function w(){this.id=null}function C(t,e){null==e&&(e=t.search(/[^\s\u00a0]/),-1==e&&(e=t.length));for(var n=0,i=0;e>n;++n)"	"==t.charAt(n)?i+=j-i%j:++i;return i}function S(t){return t.currentStyle?t.currentStyle:window.getComputedStyle(t,null)}function T(t,e){for(var n=t.ownerDocument.body,i=0,r=0,o=!1,l=t;l;l=l.offsetParent){var a=l.offsetLeft,s=l.offsetTop;l==n?(i+=Math.abs(a),r+=Math.abs(s)):(i+=a,r+=s),e&&"fixed"==S(l).position&&(o=!0)}for(var h=e&&!o?null:n,l=t.parentNode;l!=h;l=l.parentNode)null!=l.scrollLeft&&(i-=l.scrollLeft,r-=l.scrollTop);return{left:i,top:r}}function E(t){return t.textContent||t.innerText||t.nodeValue||""}function z(t,e){return t.line==e.line&&t.ch==e.ch}function A(t,e){return t.line<e.line||t.line==e.line&&t.ch<e.ch}function N(t){return{line:t.line,ch:t.ch}}function O(t){return J?(X.innerHTML="",X.appendChild(document.createTextNode(t))):X.textContent=t,X.innerHTML}function L(t,e){if(!e)return t?t.length:0;if(!t)return e.length;for(var n=t.length,i=e.length;n>=0&&i>=0&&t.charAt(n)==e.charAt(i);--n,--i);return i+1}function W(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,i=t.length;i>n;++n)if(t[n]==e)return n;return-1}t.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:!1,tabMode:"classic",enterMode:"indent",electricChars:!0,onKeyEvent:null,lineWrapping:!1,lineNumbers:!1,gutter:!1,fixedGutter:!1,firstLineNumber:1,readOnly:!1,smartHome:!0,onChange:null,onCursorActivity:null,onGutterClick:null,onHighlightComplete:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:!1,workTime:100,workDelay:200,undoDepth:40,tabindex:null,pollForIME:!1,document:window.document};var H={},I={};t.defineMode=function(e,n){t.defaults.mode||"null"==e||(t.defaults.mode=e),H[e]=n},t.defineMIME=function(t,e){I[t]=e},t.getMode=function(e,n){if("string"==typeof n&&I.hasOwnProperty(n)&&(n=I[n]),"string"==typeof n)var i=n,r={};else if(null!=n)var i=n.name,r=n;var o=H[i];return o?o(e,r||{}):(window.console&&console.warn("No mode "+i+" found, falling back to plain text."),t.getMode(e,"text/plain"))},t.listModes=function(){var t=[];for(var e in H)H.propertyIsEnumerable(e)&&t.push(e);return t},t.listMIMEs=function(){var t=[];for(var e in I)I.propertyIsEnumerable(e)&&t.push({mime:e,mode:I[e]});return t};var B={};t.defineExtension=function(t,e){B[t]=e},t.fromTextArea=function(e,n){function i(){e.value=a.getValue()}function r(){i(),e.form.submit=l,e.form.submit(),e.form.submit=r}if(n||(n={}),n.value=e.value,!n.tabindex&&e.tabindex&&(n.tabindex=e.tabindex),e.form){var o=k(e.form,"submit",i,!0);if("function"==typeof e.form.submit){var l=e.form.submit;e.form.submit=r}}e.style.display="none";var a=t(function(t){e.parentNode.insertBefore(t,e.nextSibling)},n);return a.save=i,a.toTextArea=function(){i(),e.parentNode.removeChild(a.getWrapperElement()),e.style.display="",e.form&&(o(),"function"==typeof e.form.submit&&(e.form.submit=l))},a},t.copyState=e,t.startState=n,i.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(t){var e=this.string.charAt(this.pos);if("string"==typeof t)var n=e==t;else var n=e&&(t.test?t.test(e):t(e));return n?(++this.pos,e):void 0},eatWhile:function(t){for(var e=this.pos;this.eat(t););return this.pos>e},eatSpace:function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},skipToEnd:function(){this.pos=this.string.length},skipTo:function(t){var e=this.string.indexOf(t,this.pos);return e>-1?(this.pos=e,!0):void 0},backUp:function(t){this.pos-=t},column:function(){return C(this.string,this.start)},indentation:function(){return C(this.string)},match:function(t,e,n){function i(t){return n?t.toLowerCase():t}if("string"!=typeof t){var r=this.string.slice(this.pos).match(t);return r&&e!==!1&&(this.pos+=r[0].length),r}return i(this.string).indexOf(i(t),this.pos)==this.pos?(e!==!1&&(this.pos+=t.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)}},t.StringStream=i,r.prototype={attach:function(t){this.set.push(t)},detach:function(t){var e=W(this.set,t);e>-1&&this.set.splice(e,1)},split:function(t,e){if(this.to<=t&&null!=this.to)return null;var n=this.from<t||null==this.from?null:this.from-t+e,i=null==this.to?null:this.to-t+e;return new r(n,i,this.style,this.set)},dup:function(){return new r(null,null,this.style,this.set)},clipTo:function(t,e,n,i,r){null!=this.from&&this.from>=e&&(this.from=Math.max(i,this.from)+r),null!=this.to&&this.to>e&&(this.to=i<this.to?this.to+r:e),t&&i>this.from&&(i<this.to||null==this.to)&&(this.from=null),n&&(e<this.to||null==this.to)&&(e>this.from||null==this.from)&&(this.to=null)},isDead:function(){return null!=this.from&&null!=this.to&&this.from>=this.to},sameSet:function(t){return this.set==t.set}},o.prototype={attach:function(t){this.line=t},detach:function(t){this.line==t&&(this.line=null)},split:function(t,e){return t<this.from?(this.from=this.to=this.from-t+e,this):void 0},isDead:function(){return this.from>this.to},clipTo:function(t,e,n,i,r){(t||e<this.from)&&(n||i>this.to)?(this.from=0,this.to=-1):this.from>e&&(this.from=this.to=Math.max(i,this.from)+r)},sameSet:function(){return!1},find:function(){return this.line&&this.line.parent?{line:u(this.line),ch:this.from}:null},clear:function(){if(this.line){var t=W(this.line.marked,this);-1!=t&&this.line.marked.splice(t,1),this.line=null}}},l.inheritMarks=function(t,e){var n=new l(t),i=e.marked;if(i)for(var r=0;r<i.length;++r)if(null==i[r].to&&i[r].style){var o=n.marked||(n.marked=[]),a=i[r],s=a.dup();o.push(s),s.attach(n)}return n},l.prototype={replace:function(t,e,n){t||null!=e&&e!=this.text.length||(this.className=this.gutterMarker=null);var i=[],r=this.marked,o=null==e?this.text.length:e;if(a(0,t,this.styles,i),n&&i.push(n,null),a(o,this.text.length,this.styles,i),this.styles=i,this.text=this.text.slice(0,t)+n+this.text.slice(o),this.stateAfter=null,r)for(var l=n.length-(o-t),s=0,h=r[s];s<r.length;++s)h.clipTo(null==t,t||0,null==e,o,l),h.isDead()&&(h.detach(this),r.splice(s--,1))},split:function(t,e){var n=[e,null],i=this.marked;a(t,this.text.length,this.styles,n);var r=new l(e+this.text.slice(t),n);if(i)for(var o=0;o<i.length;++o){var s=i[o],h=s.split(t,e.length);h&&(r.marked||(r.marked=[]),r.marked.push(h),h.attach(r))}return r},append:function(t){var e=this.text.length,n=t.marked,i=this.marked;if(this.text+=t.text,a(0,t.text.length,t.styles,this.styles),i)for(var r=0;r<i.length;++r)null==i[r].to&&(i[r].to=e);if(n&&n.length){i||(this.marked=i=[]);t:for(var r=0;r<n.length;++r){var o=n[r];if(!o.from)for(var l=0;l<i.length;++l){var s=i[l];if(s.to==e&&s.sameSet(o)){s.to=null==o.to?null:o.to+e,s.isDead()&&(s.detach(this),n.splice(r--,1));continue t}}i.push(o),o.attach(this),o.from+=e,null!=o.to&&(o.to+=e)}}},fixMarkEnds:function(t){var e=this.marked,n=t.marked;if(e)for(var i=0;i<e.length;++i){var r=e[i],o=null==r.to;if(o&&n)for(var l=0;l<n.length;++l)if(n[l].sameSet(r)){o=!1;break}o&&(r.to=this.text.length)}},addMark:function(t){t.attach(this),null==this.marked&&(this.marked=[]),this.marked.push(t),this.marked.sort(function(t,e){return(t.from||0)-(e.from||0)})},highlight:function(t,e){var n,r=new i(this.text),o=this.styles,l=0,a=!1,s=o[0];for(""==this.text&&t.blankLine&&t.blankLine(e);!r.eol();){var h=t.token(r,e),f=this.text.slice(r.start,r.pos);if(r.start=r.pos,l&&o[l-1]==h?o[l-2]+=f:f&&(!a&&(o[l+1]!=h||l&&o[l-2]!=n)&&(a=!0),o[l++]=f,o[l++]=h,n=s,s=o[l]),r.pos>5e3){o[l++]=this.text.slice(r.pos),o[l++]=null;break}}return o.length!=l&&(o.length=l,a=!0),l&&o[l-2]!=n&&(a=!0),a||(o.length<5&&this.text.length<10?null:!1)},getTokenAt:function(t,e,n){for(var r=this.text,o=new i(r);o.pos<n&&!o.eol();){o.start=o.pos;var l=t.token(o,e)}return{start:o.start,end:o.pos,string:o.current(),className:l||null,state:e}},indentation:function(){return C(this.text)},getHTML:function(t,e,n,i){function r(t,e){t&&(a&&R&&" "==t.charAt(0)&&(t=" "+t.slice(1)),a=!1,e?l.push('<span class="',e,'">',O(t),"</span>"):l.push(O(t)))}function o(){f&&(v+=1,g=v<f.length?f[v]:null)}var l=[],a=!0;n&&l.push(this.className?'<pre class="'+this.className+'">':"<pre>");var s=this.styles,h=this.text,f=this.marked;t==e&&(t=null);var u=h.length;if(null!=i&&(u=Math.min(i,u)),h||null!=i)if(f||null!=t){var c,d=0,p=0,m="",v=-1,g=null;for(o();u>d;){var x=u,y="";for(null!=t&&(t>d?x=t:(null==e||e>d)&&(y=" CodeMirror-selected",null!=e&&(x=Math.min(x,e))));g&&null!=g.to&&g.to<=d;)o();for(g&&(g.from>d?x=Math.min(x,g.from):(y+=" "+g.style,null!=g.to&&(x=Math.min(x,g.to))));;){var M=d+m.length,b=c;if(y&&(b=c?c+y:y),r(M>x?m.slice(0,x-d):m,b),M>=x){m=m.slice(x-d),d=x;break}d=M,m=s[p++],c="cm-"+s[p++]}}null!=t&&null==e&&r(" ","CodeMirror-selected")}else for(var p=0,k=0;u>k;p+=2){var w=s[p],c=s[p+1],C=w.length;k+C>u&&(w=w.slice(0,u-k)),k+=C,r(w,c&&"cm-"+c)}else r(" ",null!=t&&null==e?"CodeMirror-selected":null);return n&&l.push("</pre>"),l.join("")},cleanUp:function(){if(this.parent=null,this.marked)for(var t=0,e=this.marked.length;e>t;++t)this.marked[t].detach(this)}},s.prototype={chunkSize:function(){return this.lines.length},remove:function(t,e){for(var n=t,i=t+e;i>n;++n){var r=this.lines[n];r.cleanUp(),this.height-=r.height}this.lines.splice(t,e)},collapse:function(t){t.splice.apply(t,[t.length,0].concat(this.lines))},insertHeight:function(t,e,n){this.height+=n,this.lines.splice.apply(this.lines,[t,0].concat(e));for(var i=0,r=e.length;r>i;++i)e[i].parent=this},iterN:function(t,e,n){for(var i=t+e;i>t;++t)if(n(this.lines[t]))return!0}},h.prototype={chunkSize:function(){return this.size},remove:function(t,e){this.size-=e;for(var n=0;n<this.children.length;++n){var i=this.children[n],r=i.chunkSize();if(r>t){var o=Math.min(e,r-t),l=i.height;if(i.remove(t,o),this.height-=l-i.height,r==o&&(this.children.splice(n--,1),i.parent=null),0==(e-=o))break;t=0}else t-=r}if(this.size-e<25){var a=[];this.collapse(a),this.children=[new s(a)]}},collapse:function(t){for(var e=0,n=this.children.length;n>e;++e)this.children[e].collapse(t)},insert:function(t,e){for(var n=0,i=0,r=e.length;r>i;++i)n+=e[i].height;this.insertHeight(t,e,n)},insertHeight:function(t,e,n){this.size+=e.length,this.height+=n;for(var i=0,r=this.children.length;r>i;++i){var o=this.children[i],l=o.chunkSize();if(l>=t){if(o.insertHeight(t,e,n),o.lines&&o.lines.length>50){for(;o.lines.length>50;){var a=o.lines.splice(o.lines.length-25,25),h=new s(a);o.height-=h.height,this.children.splice(i+1,0,h),h.parent=this}this.maybeSpill()}break}t-=l}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e=t.children.splice(t.children.length-5,5),n=new h(e);if(t.parent){t.size-=n.size,t.height-=n.height;var i=W(t.parent.children,t);t.parent.children.splice(i+1,0,n)}else{var r=new h(t.children);r.parent=t,t.children=[r,n],t=r}n.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iter:function(t,e,n){this.iterN(t,e-t,n)},iterN:function(t,e,n){for(var i=0,r=this.children.length;r>i;++i){var o=this.children[i],l=o.chunkSize();if(l>t){var a=Math.min(e,l-t);if(o.iterN(t,a,n))return!0;if(0==(e-=a))break;t=0}else t-=l}}},p.prototype={addChange:function(t,e,n){this.undone.length=0;var i=+new Date,r=this.done[this.done.length-1];if(i-this.time>400||!r||r.start>t+e||r.start+r.added<t-r.added+r.old.length)this.done.push({start:t,added:e,old:n});else{var o=0;if(t<r.start){for(var l=r.start-t-1;l>=0;--l)r.old.unshift(n[l]);r.added+=r.start-t,r.start=t}else r.start<t&&(o=t-r.start,e+=o);for(var l=r.added-o,a=n.length;a>l;++l)r.old.push(n[l]);r.added<e&&(r.added=e)}this.time=i}},w.prototype={set:function(t,e){clearTimeout(this.id),this.id=setTimeout(e,t)}};var D=function(){if(/MSIE [1-8]\b/.test(navigator.userAgent))return!1;var t=document.createElement("div");return"draggable"in t}(),K=/gecko\/\d{7}/i.test(navigator.userAgent),R=/MSIE \d/.test(navigator.userAgent),F=/WebKit\//.test(navigator.userAgent),P="\n";!function(){var t=document.createElement("textarea");t.value="foo\nbar",t.value.indexOf("\r")>-1&&(P="\r\n")}();for(var j=8,V=/Mac/.test(navigator.platform),G=/Win/.test(navigator.platform),U={},Y=35;40>=Y;++Y)U[Y]=U["c"+Y]=!0;null!=document.documentElement.getBoundingClientRect&&(T=function(t,e){try{var n=t.getBoundingClientRect();n={top:n.top,left:n.left}}catch(i){n={top:0,left:0}}if(!e)if(null==window.pageYOffset){var r=document.documentElement||document.body.parentNode;null==r.scrollTop&&(r=document.body),n.top+=r.scrollTop,n.left+=r.scrollLeft}else n.top+=window.pageYOffset,n.left+=window.pageXOffset;return n});var X=document.createElement("pre"),J="	"!=O("	");t.htmlEscape=O;var q,Q,Z;return q=3!="\n\nb".split(/\n/).length?function(t){for(var e,n=0,i=[];(e=t.indexOf("\n",n))>-1;)i.push(t.slice(n,"\r"==t.charAt(e-1)?e-1:e)),n=e+1;return i.push(t.slice(n)),i}:function(t){return t.split(/\r?\n/)},t.splitLines=q,window.getSelection?(Q=function(t){try{return{start:t.selectionStart,end:t.selectionEnd}}catch(e){return null}},Z=F?function(t,e,n){e==n?t.setSelectionRange(e,n):(t.setSelectionRange(e,n-1),window.getSelection().modify("extend","forward","character"))}:function(t,e,n){try{t.setSelectionRange(e,n)}catch(i){}}):(Q=function(t){try{var e=t.ownerDocument.selection.createRange()}catch(n){return null}if(!e||e.parentElement()!=t)return null;var i=t.value,r=i.length,o=t.createTextRange();o.moveToBookmark(e.getBookmark());var l=t.createTextRange();if(l.collapse(!1),o.compareEndPoints("StartToEnd",l)>-1)return{start:r,end:r};for(var a=-o.moveStart("character",-r),s=i.indexOf("\r");s>-1&&a>s;s=i.indexOf("\r",s+1),a++);if(o.compareEndPoints("EndToEnd",l)>-1)return{start:a,end:r};for(var h=-o.moveEnd("character",-r),s=i.indexOf("\r");s>-1&&h>s;s=i.indexOf("\r",s+1),h++);return{start:a,end:h}},Z=function(t,e,n){var i=t.createTextRange();i.collapse(!0);for(var r=i.duplicate(),o=0,l=t.value,a=l.indexOf("\n");a>-1&&e>a;a=l.indexOf("\n",a+1))++o;for(i.move("character",e-o);a>-1&&n>a;a=l.indexOf("\n",a+1))++o;r.move("character",n-o),i.setEndPoint("EndToEnd",r),i.select()}),t.defineMode("null",function(){return{token:function(t){t.skipToEnd()}}}),t.defineMIME("text/plain","null"),t}();return t});
define('tp/codemirror.stylesheet',["jQuery"],function(e){e(document).ready(function(){function e(e){var t=document.createElement("link");t.type="text/css",t.rel="stylesheet",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)}e(require.toUrl("tp/codemirror/theme/default.css"))})});
define('tp/codemirror/lib/util/runmode',["../codemirror"],function(n){n.runMode=function(t,e,r){var a=n.getMode({indentUnit:2},e),o=1==r.nodeType;if(o){var s=r,i=[];r=function(t,e){i.push("\n"==t?"<br>":e?'<span class="cm-'+n.htmlEscape(e)+'">'+n.htmlEscape(t)+"</span>":n.htmlEscape(t))}}for(var c=n.splitLines(t),p=n.startState(a),f=0,l=c.length;l>f;++f){f&&r("\n");for(var d=new n.StringStream(c[f]);!d.eol();){var m=a.token(d,p);r(d.current(),m,f,d.start),d.start=d.pos}}o&&(s.innerHTML=i.join(""))}});
define('tp/codemirror/mode/python/python',["tp/codemirror/lib/codemirror"],function(e){e.defineMode("python",function(e,t){function n(e){return new RegExp("^(("+e.join(")|(")+"))\\b")}function r(e,t){if(e.sol()){var n=t.scopes[0].offset;if(e.eatSpace()){var r=e.indentation();return r>n?z="indent":n>r&&(z="dedent"),null}n>0&&a(e,t)}if(e.eatSpace())return null;var i=e.peek();if("#"===i)return e.skipToEnd(),"comment";if(e.match(/^[0-9\.]/,!1)){var s=!1;if(e.match(/^\d*\.\d+(e[\+\-]?\d+)?/i)&&(s=!0),e.match(/^\d+\.\d*/)&&(s=!0),e.match(/^\.\d+/)&&(s=!0),s)return e.eat(/J/i),"number";var y=!1;if(e.match(/^0x[0-9a-f]+/i)&&(y=!0),e.match(/^0b[01]+/i)&&(y=!0),e.match(/^0o[0-7]+/i)&&(y=!0),e.match(/^[1-9]\d*(e[\+\-]?\d+)?/)&&(e.eat(/J/i),y=!0),e.match(/^0(?![\dx])/i)&&(y=!0),y)return e.eat(/L/i),"number"}return e.match(k)?(t.tokenize=o(e.current()),t.tokenize(e,t)):e.match(d)||e.match(u)?null:e.match(p)||e.match(f)||e.match(h)?"operator":e.match(l)?null:e.match(w)?"builtin":e.match(x)?"keyword":e.match(m)?"variable":(e.next(),c)}function o(e){for(;"rub".indexOf(e.charAt(0).toLowerCase())>=0;)e=e.substr(1);var n=1==e.length,o="string";return function(i,a){for(;!i.eol();)if(i.eatWhile(/[^'"\\]/),i.eat("\\")){if(i.next(),n&&i.eol())return o}else{if(i.match(e))return a.tokenize=r,o;i.eat(/['"]/)}if(n){if(t.singleLineStringErrors)return c;a.tokenize=r}return o}}function i(t,n,r){r=r||"py";var o=0;if("py"===r){for(var i=0;i<n.scopes.length;++i)if("py"===n.scopes[i].type){o=n.scopes[i].offset+e.indentUnit;break}}else o=t.column()+t.current().length;n.scopes.unshift({offset:o,type:r})}function a(e,t){if(1!=t.scopes.length){if("py"===t.scopes[0].type){for(var n=e.indentation(),r=-1,o=0;o<t.scopes.length;++o)if(n===t.scopes[o].offset){r=o;break}if(-1===r)return!0;for(;t.scopes[0].offset!==n;)t.scopes.shift();return!1}return t.scopes.shift(),!1}}function s(e,t){z=null;var n=t.tokenize(e,t),r=e.current();if("."===r)return n=t.tokenize(e,t),r=e.current(),"variable"===n?"variable":c;if("@"===r)return n=t.tokenize(e,t),r=e.current(),"variable"===n||"@staticmethod"===r||"@classmethod"===r?"meta":c;("pass"===r||"return"===r)&&(t.dedent+=1),(":"===r&&!t.lambda&&"py"==t.scopes[0].type||"indent"===z)&&i(e,t);var o="[({".indexOf(r);return-1!==o&&i(e,t,"])}".slice(o,o+1)),"dedent"===z&&a(e,t)?c:(o="])}".indexOf(r),-1!==o&&a(e,t)?c:(t.dedent>0&&e.eol()&&"py"==t.scopes[0].type&&(t.scopes.length>1&&t.scopes.shift(),t.dedent-=1),n))}var c="error",f=new RegExp("^[\\+\\-\\*/%&|\\^~<>!]"),l=new RegExp("^[\\(\\)\\[\\]\\{\\}@,:`=;\\.]"),p=new RegExp("^((==)|(!=)|(<=)|(>=)|(<>)|(<<)|(>>)|(//)|(\\*\\*))"),u=new RegExp("^((\\+=)|(\\-=)|(\\*=)|(%=)|(/=)|(&=)|(\\|=)|(\\^=))"),d=new RegExp("^((//=)|(>>=)|(<<=)|(\\*\\*=))"),m=new RegExp("^[_A-Za-z][_A-Za-z0-9]*"),h=n(["and","or","not","is","in"]),y=["as","assert","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","lambda","pass","raise","return","try","while","with","yield"],b=["bool","classmethod","complex","dict","enumerate","float","frozenset","int","list","object","property","reversed","set","slice","staticmethod","str","super","tuple","type"],v={types:["basestring","buffer","file","long","unicode","xrange"],keywords:["exec","print"]},g={types:["bytearray","bytes","filter","map","memoryview","open","range","zip"],keywords:["nonlocal"]};if(t.version&&3===parseInt(t.version,10)){y=y.concat(g.keywords),b=b.concat(g.types);var k=new RegExp("^(([rb]|(br))?('{3}|\"{3}|['\"]))","i")}else{y=y.concat(v.keywords),b=b.concat(v.types);var k=new RegExp("^(([rub]|(ur)|(br))?('{3}|\"{3}|['\"]))","i")}var x=n(y),w=n(b),z=null,E={startState:function(e){return{tokenize:r,scopes:[{offset:e||0,type:"py"}],lastToken:null,lambda:!1,dedent:0}},token:function(e,t){var n=s(e,t);return t.lastToken={style:n,content:e.current()},e.eol()&&e.lambda&&(t.lambda=!1),n},indent:function(e){return e.tokenize!=r?0:e.scopes[0].offset}};return E}),e.defineMIME("text/x-python","python")});
define('tau/ui/extensions/board.editor/ui.extension.board.editor.help',["jQuery","Underscore","tau/components/extensions/component.extension.base","tau/ui/templates/board.editor/ui.template.board.editor.filterHelp","tp/codemirror/lib/codemirror","tp/codemirror.stylesheet","tp/codemirror/lib/util/runmode","tp/codemirror/mode/python/python"],function(e,t,n,i,r){return n.extend({"bus content.ready:last + refresh.help.content":function(e,n,r){var o=this,l=i.get();t.each(n,function(e){t.each(r,function(t,n){var i=e.find("[role="+n+"_help]");if(i.length){var r=l.bind({},{name:"rebind",predefinedFilters:t});i.find("table").remove(),i.append(r.find("table")),o.fire("content.$element.ready",i.parent())}})})},"bus afterRender:last + content.$element.ready":function(e,t,n){var i=n.find(".i-role-complex-filter-example"),r=n.find(".filter-help").attr("role")+"_button",o=t.element.find("."+r);o.toggle(i.length>0)},"bus afterRender":function(e){var n=e.data.element.find(".i-role-help"),i=t.map(n,this._initHelp.bind(this));this.fire("content.ready",i)},"bus content.$element.ready:last + destroy":function(e,t){t.off("click.helpfilter"),t=null},_initHelp:function(t){var n=e(t),i=n.parents(".i-role-filter:first").find(":text"),r=n.next(".i-role-help-content");return r.on("click.helpfilter",".i-role-predefined-filter",function(){var t=e(this).data("value");n.tauBubble("hide"),i.focus(),setTimeout(function(){i.val(t)},1)}),this.fire("content.$element.ready",r),this._initHelpBubble(n,r),r},_initHelpBubble:function(t,n){t.tauBubble({className:"i-role-taububble-ignore",content:n,template:['<div class="tau-bubble-board">','<div class="tau-bubble-board__arrow" role="arrow"></div>','<div class="tau-bubble-board__inner tau-container" role="content"></div>',"</div>"].join(""),onResize:function(e,t){var n=t.height;e.find("[role=content]").css({maxHeight:n-20,overflowY:"auto"})},onShow:function(t){this.element.toggleClass("tau-checked",!0),t.find(".i-role-output-filter").each(function(){var t=e(this);t.data("processed")||(r.runMode(t.text(),"python",this),t.data("processed",!0))})},onHide:function(){this.element.toggleClass("tau-checked",!1)}})}})});
define('tau/components/component.board.editor',["Underscore","tau/components/component.creator","tau/models/board.editor/model.board.editor.read","tau/models/board.editor/model.board.editor.write","tau/models/board.editor/model.board.filter.help","tau/models/board.editor/model.board.editor.autocomplete","tau/models/board.editor/model.board.editor.autocomplete.preloading","tau/ui/extensions/board.editor/ui.extension.board.editor.form","tau/ui/extensions/board.editor/ui.extension.board.editor.autocomplete","tau/ui/extensions/board.editor/ui.extension.board.editor.stateSetup","tau/ui/extensions/board.editor/ui.extension.board.editor.nodata","tau/ui/extensions/board.plus/ui.extension.board.plus.errors","tau/ui/extensions/board.editor/ui.extension.board.editor.help","tau/components/extensions/error/extension.errorBar","tau/ui/templates/board.editor/ui.template.board.editor","tau/core/view-base"],function(e,o,t,r,d,i,a,n,u,s,b,l,m,p,x,c){return{create:function(e){var f={extensions:[t,r,d,i,a,n,u,s,b,l,p,m],template:x,ViewType:c.extend({"bus board.editor.setTemplate":function(e,o){this.config.template=o}})};e.queuedBus=!0;var h=o.create(f,e);return h}}});
define('tau/models/board.editor.prioritization/model.board.editor.prioritization',["Underscore","tau/core/extension.base"],function(e,i){return i.extend({"bus beforeInit":function(i){var t=i.data.config.context.configurator;this.fire("configurator.ready",t);var r=$.Deferred();t.service("boardSettings").get({fields:["ownerIds","prioritization","cells"],callback:e.bind(function(i){var n=e.defaults(i.prioritization||{},{mode:"enabled"});if(t.getBoardAccessService().isEditable(i,t.getLoggedUser())){var a={definition:{cells:i.cells}},o=t.getSliceFactory().create(a);o.spaceV2().done(function(e){var i=e.data,t=i.metaInfo.isPrioritizable;r.resolve({prioritization:n,access:{edit:t}})})}else r.resolve({prioritization:n,access:{edit:!1}})},this)}),r.done(e.bind(function(e){this.fire("dataBind",e)},this)),t.service("boardSettings").unbind({listener:this}),t.service("boardSettings").bind({fields:["cells"],listener:this,callback:e.bind(function(){this.fire("refresh")},this)})},"bus configurator.ready + afterRender":function(i,t,r){var n=r.element,a=t.service("boardSettings");n.on("change",":radio",function(){var i={};e.forEach(n.find("form").serializeArray(),function(e){i[e.name]=e.value}),a.set({set:{prioritization:i}})})}})});
define('tau/ui/templates/board.editor.prioritization/ui.template.board.editor.prioritization',["tau/core/templates-factory"],function(i){var t={name:"board.editor.prioritization",engine:"jqote2",markup:['<div class="tau-access-settings tau-prioritization-settings">',"<% if (this.access.edit) { %>",'<div class="tau-board-settings-group__help">','<span class="tau-help i-role-tooltipArticle" data-article-id="board.editor.prioritization">',"About Prioritize","</span>","</div>",'<div class="tau-access-type">',"<form>",'<label class="tau-line">','<div class="tau-field">','<input value="enabled" type="radio" name="mode"<% if (this.prioritization.mode == "enabled") { %> checked<% } %>>',"</div>",'<div class="tau-txt">',"<h3>Prioritization on</h3>","</div>","</label>",'<label class="tau-line">','<div class="tau-field">','<input value="disabled" type="radio" name="mode"<% if (this.prioritization.mode == "disabled") { %> checked<% } %>>',"</div>",'<div class="tau-txt">',"<h3>Prioritization off</h3>","<p> You won't be able to prioritize cards by drag and drop on this View. This option is recommended if you want to lock priorities. </p>","</div>","</label>",'<label class="tau-line tau-line-img">','<div class="tau-field">','<input value="shift" type="radio" name="mode"<% if (this.prioritization.mode == "shift") { %> checked<% } %>>',"</div>",'<div class="tau-txt">',"<h3>Prioritize only if the Shift key is pressed</h3>","<p>You won't be able to prioritize unless the Shift key is pressed.</p>","</div>","</label>","</form>","</div>","<% } %>","<% if (!this.access.edit) { %>",'<div class="tau-prioritization-text tau-bubble-tooltipArticle">',"<p>The current View settings do not allow prioritization.<p>","<p>It&#39;s either the cards cannot be prioritized together, or ranking is not applicable to them.</p>",'<p><a target="_blank"  href="http://guide.targetprocess.com/troubleshooting/cannot-prioritize-cards-on-a-board.html">Read more...</a></p>',"</div>","<% } %>","</div>"],dependencies:[]};return i.register(t)});
define('tau/components/component.board.editor.prioritization',["Underscore","tau/components/component.creator","tau/models/board.editor.prioritization/model.board.editor.prioritization","tau/ui/templates/board.editor.prioritization/ui.template.board.editor.prioritization"],function(t,e,o,r){return{create:function(t){var i={extensions:[o],template:r};return t["queue.bus"]=!0,e.create(i,t)}}});
define('tau/ui/extensions/board.context.container/ui.extension.board.context.container.tabs',["Underscore","jQuery","tau/core/extension.base"],function(e,t,o){return o.extend({resetLifecycle:!0,"bus initialize":function(){this.activeTab="selector"},"bus beforeInit":function(e,t){var o=t.config.context.configurator;this.fire("configurator.ready",o)},"bus show":function(){"selector"!=this.activeTab?this.fire("tab.activate","selector"):this.fire("tab.activate.completed","selector")},"bus $el.ready":function(e,t){var o=this;t.on("click",".i-role-section-teams .i-role-formtrigger",function(){o.fire("tab.activate","team.formAdd")}),t.on("click",".i-role-section-projects .i-role-formtrigger",function(){o.fire("tab.activate","project.formAdd")}),t.on("click","[type=reset]",function(){o.fire("tab.activate","selector")})},"bus configurator.ready":function(e,t){var o=this;t.getComponentBusRegistry().getByName("team_form_add").done(function(e){o.fire("teamFormAddBus.ready",e),e.on("entity.add.completed",function(){o.fire("tab.activate","selector")})}),t.getComponentBusRegistry().getByName("project_form_add").done(function(e){o.fire("projectFormAddBus.ready",e),e.on("entity.add.completed",function(){o.fire("tab.activate","selector")})}),t.getComponentBusRegistry().getByName("board_context_selector").done(function(e){o.fire("selectorBus.ready",e)})},"bus $bubbled.ready:last + $el.ready:last + childrenBuses.ready:last + tab.activate":function(o,i,r,c,a){t("body").data("contextOverflow",t("body").css("overflow")),t("body").css("overflow","hidden"),r.css("visibility","hidden"),r.css("overflow","hidden"),r.css("width",r.width()+"px"),r.css("height",r.height()+"px");var s;e.forEach(c,function(e,t){t!=a?e.fire("hide"):s=e}),s&&(s.once("show.completed",function(e,o){o.length&&(r.css("width","auto"),r.css("height","auto"),r.css("overflow","visible")),i.tauBubble("adjust"),r.css("visibility","visible"),t("body").css("overflow",t("body").data("contextOverflow"))},this),s.fire("show"),this.fire("tab.activate.completed",a),this.activeTab=a)},"bus teamFormAddBus.ready:last + tab.activate.completed":function(e,t,o){"team.formAdd"==o&&t.fire("show.completed")},"bus projectFormAddBus.ready:last + tab.activate.completed":function(e,t,o){"project.formAdd"==o&&t.fire("show.completed")}})});
define('tau/ui/extensions/board.context.container/ui.extension.board.context.container.bubble',["Underscore","jQuery","tau/core/extension.base"],function(e,t,i){return i.extend({"bus $bubbled.ready":function(t,i){i.tauBubble("option",{template:['<div class="tau-bubble-board tau-teams-projects-manager-wrapper">','<div class="tau-bubble-board__arrow" role="arrow"></div>','<div class="tau-bubble-board__inner tau-container" role="content"></div>',"</div>"].join(""),dontCloseSelectors:[".ui-autocomplete",".tau-invite-widget-tooltip"],onArrowPositionConfig:function(e){e.at="left+26 bottom"},stackName:"contextcontainer",onResize:function(e,t){var i=t.height;e.find(".tau-managed-category .i-role-list").css({maxHeight:i-e.find(".tau-teams-projects-search").height()-e.find(".tau-teams-projects-updater").height()-200,overflowY:"auto"}),e.find(".tau-projects .i-role-form .i-role-list").css({maxHeight:i-500,overflowY:"auto"}),e.find(".tau-teams .i-role-form .i-role-list").css({maxHeight:i-400,overflowY:"auto"})},onPositionConfig:function(e){e.collision="flipfit flipfit"},show:function(){var e=i.tauBubble("widget").find(".tau-search input");e.length&&e.is(":visible")&&e.focus()}}),i.on("taububblehide.ctx",e.bind(function(e,t){t.silent||this.fire("$popup.hidden")},this)),i.on("taububbleshow",e.bind(function(){this.fire("$popup.shown"),i.tauBubble("widget").one("click",".i-role-popupcontent .i-role-action-submit",function(){i.tauBubble("hide")}),i.tauBubble("widget").one("click",".i-role-popupcontent .i-role-selecttrigger",function(){i.tauBubble("hide",{silent:!0})})},this))},"bus $bubbled.ready + afterRender":function(e,t){t.tauBubble("adjust")},"bus selectorBus.ready:last + tab.activate.completed:last + $popup.hidden":function(e,t,i){t.fire("selector"==i?"filter.submitted":"refresh")}})});
define('tau/ui/extensions/board.context.container/ui.extension.board.context.container.board',["jQuery","tau/core/extension.base"],function(e,t){return t.extend({SUBMIT_BUTTON_TEXT:"Set","bus afterRender + childrenBuses.ready + boardSettings.ready":function(t,n,i,s){var d=i[0],a=i[1],o=n.element.find(".i-role-output");this._bs=s.boardSettings,a.fire("$trigger.ready",o),d.on("refresh",function(){a.fire("hide",{silent:!0})}),o.on("click",function(t){var n=e(t.target),i=n.closest(".tau-context");(!i.closest(".tau-context").length||i.is(":disabled"))&&(a.fire("hide",{silent:!0}),n.hasClass("tau-remove-selected-context")&&!n.is(":disabled")&&(o.find(".tau-line-group").removeClass("hidden"),o.find(".tau-inline-group").addClass("hidden"),s.boardSettings.set({set:{acid:""}})))}),a.on("show.completed",function(e,t){t.find("button.tau-teams-projects-submit").text(this.SUBMIT_BUTTON_TEXT)}.bind(this)),this._bs.bind({fields:["acid"],listener:this,callback:function(e){""!==e.acid&&(o.find(".tau-line-group").addClass("hidden"),o.find(".tau-inline-group").removeClass("hidden"))}}),a.on("show",function(){o.find(".tau-context").addClass("tau-checked")}),a.on("hide",function(){o.find(".tau-context").removeClass("tau-checked")})},"bus destroy":function(){this._bs.unbind(this)}})});
define('tau/ui/extensions/board.context.container/ui.extension.board.context.container.acid',["jQuery","tau/core/extension.base"],function(t,e){return e.extend({"bus boardSettings.ready:last + context.changed":function(t,e,n){e.boardSettings.set({set:{acid:n.acid}})},"bus boardSettings.ready:last + context.ready:last + currentContextSelected":function(t,e,n){e.boardSettings.set({set:{acid:n.acid}})}})});
define('tau/ui/templates/board.context.output/ui.template.board.remember.context.wrapper.output',["tau/core/templates-factory"],function(e){var t={name:"board.editor.remember.context.wrapper.output",engine:"jqote2",markup:['<div class="tau-board-settings-context">',"<h4>Set default projects and teams",'<span class="tau-help i-role-tooltipArticle" data-article-id="board.editor.saveContext"></span>',"</h4>",'<div class="i-role-output">',"</div>","</div>"],dependencies:[]};return e.register(t)});
define('tau/components/component.board.editor.remember.context',["Underscore","tau/components/component.container","tau/ui/extensions/board.context.container/ui.extension.board.context.container.tabs","tau/ui/extensions/board.context.container/ui.extension.board.context.container.bubble","tau/ui/extensions/board.container/ui.extension.board.container.events","tau/ui/extensions/board.context.container/ui.extension.board.context.container.board","tau/ui/extensions/board.context.container/ui.extension.board.context.container.acid","tau/ui/templates/board.context.output/ui.template.board.remember.context.wrapper.output"],function(e,t,n,o,a,r,i,s){return{create:function(e){var c={extensions:[a,r],children:[{type:"board.editor.remember.context.output",name:"board.editor.remember.context.output"},{type:"bubble.container",cssClass:"tau-teams-projects-manager-holder",visible:!1,useAnimation:!1,extensions:[n,a,o],children:[{type:"container",label:"team.formAdd",visible:!1,useAnimation:!1,cssClass:"tau-teams-projects-manager",children:[{name:"team_form_add",type:"team.formAdd"}]},{type:"container",label:"project.formAdd",cssClass:"tau-teams-projects-manager",visible:!1,useAnimation:!1,children:[{name:"project_form_add",type:"project.formAdd"}]},{type:"container",label:"selector",visible:!0,useAnimation:!1,extensions:[a],children:[{name:"board_context_selector",type:"board.context.selector",extensions:[i]}]}]}],template:s};return t.create(c,e)}}});
define('tau/models/board.editor.remember.context/model.board.editor.remember.output',["Underscore","tau/models/board.context.output/model.board.context.output.data"],function(t,e){return e.extend({"bus beforeInit + boardSettings.ready:last":function(t,e,i){var a=i.boardSettings,d=function(t){this.savedAcid=t.acid}.bind(this);a.get({fields:["acid"],callback:d}),a.bind({fields:["acid"],listener:this,callback:d}),a.get({fields:["ownerIds"],callback:function(t){var e=this.configurator.getLoggedUser();this.editable=this.configurator.getBoardAccessService().isEditable(t,e)}.bind(this)})},"bus teams.ready + projects.ready + context.ready":function(t,e,i,a){var d=this.prepareModel(e,i,a);d.savedAcid=this.savedAcid,d.editable=this.editable,this.fire("dataBind",d),this._trackData(d)},"bus configurator.ready":function(t,e){this.configurator=e},"bus boardSettings.ready:last + destroy":function(t,e){e.boardSettings.unbind(this)}})});
define('tau/ui/templates/board.context.output/ui.template.board.context.output.selected.button',["tau/core/templates-factory"],function(t){var o={name:"board.context.output.selected.button",engine:"jqote2",markup:['<span class="tau-context-button-item',"<% if (this.color != null) { %>"," tau-icon_type_color","<% }%>",'"',"<% if (this.color != null) { %>",'style="background-color:<%! (this.color) %>"',"<% }%>>","<% if (this.icon != null) { %>",'<i class="tau-icon tau-icon_type_svg tau-icon-no-checked tau-icon_name_',"<%! (this.icon) %>",'"></i>','<i class="tau-icon tau-icon_type_svg tau-icon-checked tau-icon_name_',"<%! (this.whiteIcon) %>",'"></i>',"<% }%>","<%! (this.abbreviation || this.name) %>","</span>"]};return t.register(o)});
define('tau/ui/templates/board.context.output/ui.template.board.remember.context.output',["tau/core/templates-factory","tau/ui/templates/board.context.output/ui.template.board.context.output.selected.button"],function(t){var e={name:"board.context.remember.output",engine:"jqote2",markup:["<div>",'<span class="tau-inline-group',"<% if (!this.savedAcid){%> hidden<%}%>",'">','<button class="tau-btn tau-context"<% if (!this.editable){%> disabled<%}%>>','<%= fn.sub("board.context.output.selected.button", this.selectedProjects.slice(0, 3)) %>',"<% if (this.selectedProjectsCount > 3) { %>",'<span class="tau-more">+<%= this.selectedProjectsCount-3 %></span>',"<% } %>",'<span class="tau-context-button-item tau-teams-projects-splitter"></span>','<%= fn.sub("board.context.output.selected.button", this.selectedTeams.slice(0, 3)) %>',"<% if (this.selectedTeamsCount > 3) { %>",'<span class="tau-more">+<%= this.selectedTeamsCount-3 %></span>',"<% } %>","</button>",'<button type="button" name="remove_context" role="action-remove-selected-context"',' data-title="Remove&nbsp;selected&nbsp;context" ','class="tau-extension-board-tooltip tau-btn tau-close tau-remove-selected-context"',"<% if (!this.editable){%> disabled<%}%>></button>","</span>",'<span class="tau-line-group<% if (this.savedAcid){%> hidden<%}%>','">','<button class="tau-btn tau-context"<% if (!this.editable){%> disabled<%}%>>Not specified</button>','<span class="tau-context-label">Projects-Teams context from the top menu will be used</span>',"</span>","</div>"]};return t.register(e)});
define('tau/components/component.board.editor.remember.context.output',["tau/components/component.creator","tau/models/board.editor.remember.context/model.board.editor.remember.output","tau/ui/templates/board.context.output/ui.template.board.remember.context.output"],function(e,t,o){return{create:function(r){var u={queuedBus:!0,extensions:[t],template:o};return e.create(u,r)}}});
define('tau/models/board.editor.timeline/model.board.editor.timeline',["Underscore","tau/core/extension.base"],function(e,n){return n.extend({"bus beforeInit + boardSettings.ready:last":function(n,t,i){var s=t.config.context.configurator,o=i.boardSettings;o.get({fields:["timelineSettings","ownerIds"]}).done(function(n){var t=s.getLoggedUser(),i=e.defaults(n.timelineSettings||{},{showPlannedInPast:!1,showForecast:!1,editable:s.getBoardAccessService().isEditable(n,t)});this.fire("dataBind",i)}.bind(this)),this.on("destroy",function(){o.unbind({listener:this})}),o.unbind({listener:this}),o.bind({fields:["timelineSettings"],listener:this,callback:function(){this.fire("refresh")}.bind(this)})},"bus boardSettings.ready:last + afterRender":function(e,n,t){var i=t.element,s=t.view.config.context.configurator;s.getFeaturesService().isEnabled("board.timeline.forecast")||i.find("[name=showForecast]").parents("li:eq(0)").css("display","none");var o=n.boardSettings;i.on("change",":checkbox",function(){var e={showPlannedInPast:i.find("[name=showPlannedInPast]").prop("checked"),showForecast:i.find("[name=showForecast]").prop("checked")};o.set({set:{timelineSettings:e}})})}})});
define('tau/ui/templates/board.editor.timeline/ui.template.board.editor.timeline',["tau/core/templates-factory"],function(e){var a={name:"board.editor.timeline",engine:"jqote2",markup:["<div>","<h4>Show on cards</h4>",'<ul class="tau-timelines-cards-features">',"<li>",'<label class="tau-checkbox tau-planned-in-past"><input type="checkbox" name="showPlannedInPast"<% if (this.showPlannedInPast) { %> checked<% } if (!this.editable) {%> disabled class="permission-denied"<% } %>><i></i>',"<span>Planned for Done</span>","</label>",'<span class="tau-help i-role-tooltipArticle" data-article-id="timeline.options.plannedInPast"></span>',"</li>","<li>",'<label class="tau-checkbox tau-forecast"><input type="checkbox" name="showForecast"<% if (this.showForecast) { %> checked<% } if (!this.editable) {%> disabled class="permission-denied"<% } %>><i></i>',"<span>Forecast</span>","</label>",'<span class="tau-help i-role-tooltipArticle" data-article-id="timeline.options.showForecast"></span>',"</li>","</ul>","</div>"],dependencies:[]};return e.register(a)});
define('tau/components/component.board.editor.timeline',["Underscore","tau/components/component.creator","tau/models/board.editor.timeline/model.board.editor.timeline","tau/ui/templates/board.editor.timeline/ui.template.board.editor.timeline"],function(e,t,o,r){return{create:function(e){var i={extensions:[o],template:r};return e["queue.bus"]=!0,t.create(i,e)}}});
define('tau/models/board.entityViewer/model.board.entityViewer',["jQuery","tau/core/extension.base"],function(e,n){return n.extend({"bus beforeInit":function(e,n){var t=n.config.context.configurator;this.fire("configurator.ready",t),this.fire("dataBind",{})}})});
define('tau/ui/extensions/board.entityViewer/ui.extension.board.entityViewer',["Underscore","jQuery","tau/core/extension.base"],function(e,t,a){return a.extend({"bus configurator.ready":function(t,a){var r=this,n=a.getRequireLoader();n(["all.components"],function(){n(["tau/components/component.application"],function(t){var n=a.createChild();n._id=e.uniqueId("board_entityViewer_"),n.isBoardEdition=!0,r.fire("appData.ready",{component:t,configurator:n})})})},"bus afterRender":function(){var e=t("body");e.tauProgressIndicator(),this.fire("$progressIndicator.ready",e)},"bus appData.ready":function(e,t){var a=t.configurator,r=t.component;a.getHashService().setFakeWindow();var n=this,i={name:"viewer",context:{configurator:a},options:{applicationId:"boardEntityViewerPopup",integration:{showInCoverView:!0,keepAlive:!0},routing:{silent:!0,executeOnStart:!1},comet:{enabled:!0}}},o=r.create(i);o.on("application.error",function(e){n.fire("error",e.data),n.fire("application.error",e.data)}),o.on("contentRendered",function(e){n.fire("application.contentRendered",e.data)}),o.initialize(i),n.fire("appBus.ready",o)},"bus appData.ready:last + appBus.ready:last + cardDataToShowSilent.ready":function(e,t,a,r){this.showCard(t,a,r,"silent")},"bus appData.ready:last + appBus.ready:last + cardDataToShow.ready":function(e,t,a,r){this.showCard(t,a,r)},"bus appBus.error":function(e,t){this.fire("error",t)},"bus appBus.ready + destroy":function(e,t){t.destroy()},showCard:function(e,t,a,r){var n=e.configurator;return a.entityId&&a.entityType?(this.cleanupStore(n),t.fire("history.reset"),void t.fire("application.navigate.entity",{id:a.entityId,entity:a.entityType,action:r})):void console.error("bad data for viewer",a)},cleanupStore:function(e){e.getStore().evictData()}})});
define('tau/components/component.board.entityViewer',["tau/components/component.creator","tau/models/board.entityViewer/model.board.entityViewer","tau/ui/extensions/board.entityViewer/ui.extension.board.entityViewer","tau/components/extensions/error/extension.errorBar"],function(e,n,t,r){return{create:function(o){o["queue.bus"]=!0;var i={"queue.bus":!0,extensions:[n,t,r],template:{name:"board.entityViewer",engine:"jqote2",markup:'<div style="display:none;"></div>'}};return e.create(i,o)}}});
define('tau/models/board.flowHelp/model.board.flowHelp',["Underscore","jQuery","tau/core/extension.base"],function(e,t,r){return r.extend({init:function(t){var r=this;if(r._super.apply(r,arguments),r.flowHelpService=t.context.configurator.getHelpScenarioService(),r.flowHelpService.on("next.section",e.bind(r.fire,r,"next.section")),r.flowHelpService.on("done.scenario",e.bind(r.fire,r,"done.section")),r.flowHelpService.getState()===r.flowHelpService.stateTypes.ToBeStarted){var n=r.flowHelpService.getCurrentFlow();r.flowHelpService.run(n)}},isInProgress:function(t){var r=t.getState(),n=t.stateTypes;return!e.contains([n.Aborted,n.Done,n.Stopped],r)},"bus beforeInit":function(){var e=this.getFlowData();this.fire("dataBind",e)},"bus next.section":function(){var e=this.getFlowData();this.fireStatsData(e),this.fire("update",e)},fireStatsData:function(t){var r=e.clone(t),n=": "+t.currentState;t.progress.done===t.progress.total&&(n="is COMPLETED"),r.name=t.name+" ("+(t.progress.done+1)+" of "+t.progress.total+") "+n,r.tags=[t.name],this.fire("help.flow.action",r)},getFlowData:function(){var t=this.flowHelpService,r=t.getCurrentFlow(),n=t.getScenarioById(r),o=t.getSubFlows(r),a="ready to start/replay",i=0;e.each(o||[],function(e){"active"==e.state&&(a=e.name),"done"==e.state&&i++});var s=(o||[]).length;i===s&&(a="COMPLETED");var c={name:n.name,currentState:a,subFlows:o,progress:{total:s,done:i}};return c}})});
define('tau/ui/extensions/board.flowHelp/ui.extension.board.flowHelp',["jQuery","Underscore","tau/core/extension.base"],function(e,t,o){return o.extend({init:function(e){var t=this;t._super.apply(t,arguments),t.flowHelpService=e.context.configurator.getHelpScenarioService(),t.config=e},"bus afterRender":function(e,t){var o=this,n=t.element,r=o.flowHelpService;n.on("click",".i-role-flowhelp-stop-flow",function(){r.abort(),o.fire("help.flow.action",{name:"stop"})});var i={target:n,className:"tau-bubble-flow",stackName:"helpFlowStep",applyBubbleClasses:!1,zIndex:10,componentsConfig:{components:[{type:"board.flowHelp.popup"}],context:this.config.context},onPositionConfig:function(e){e.at="center bottom-6",e.my="center top"},onBeforeShow:function(){return n.parent().hasClass("tau-flow-started")},showArrow:!1,showCloseButton:!1};this.fire("initBubble",i)},"bus afterRender:last + update":function(e,t,o){var n=t.element;n.find(".i-role-step").text(o.progress.done+1+"/"+o.progress.total),n.find(".i-role-step_name").text(o.currentState)}})});
define('tau/ui/templates/board.flowHelp/ui.template.board.flowHelp',["tau/core/templates-factory"],function(e){var t={name:"board.flowHelp",engine:"jqote2",markup:['<div class="tau-flow-info-panel i-role-flowhelp-toggle-steps">','<div class="tau-steps">','<span class="tau-step i-role-step"><%= this.progress.done+1 %>/<%= this.progress.total %></span>','<span class="tau-step-name i-role-step_name"><%= this.currentState %></span>',"</div>",'<button class="tau-btn tau-stop-flow i-role-flowhelp-stop-flow">Stop Tour</button>',"</div>"],dependencies:[]};return e.register(t)});
define('tau/components/component.board.flowHelp',["Underscore","tau/components/component.creator","tau/models/board.flowHelp/model.board.flowHelp","tau/ui/extensions/board.flowHelp/ui.extension.board.flowHelp","tau/ui/templates/board.flowHelp/ui.template.board.flowHelp","tau/components/extensions/bubble/extension.bubble.creator","tau/components/extensions/component.creator.extension"],function(e,o,n,t,a,r,l){return{create:function(e){var s={extensions:[n,t,r,l],template:a,name:"board.main.menu.item.helpFlow"};return o.create(s,e)}}});
define('tau/ui/extensions/board.flowHelp/ui.extension.board.flowHelp.popup',["jQuery","Underscore","tau/core/extension.base"],function(e,n,r){return r.extend({init:function(){var e=this;e._super.apply(e,arguments)},"bus afterRender:last + update":function(e,n,r){this.fire("refresh",r)}})});
define('tau/ui/templates/board.flowHelp/ui.template.board.flowHelp.popup',["tau/core/templates-factory"],function(t){var e={name:"board.flowHelp.popup",engine:"jqote2",markup:['<div class="tau-flow-steps">',"<% for (var i = 0; i < this.subFlows.length; i++) { %>","    <% var sf = this.subFlows[i]; %>",'    <% var attr = ""; %>','    <% attr += (sf.state === "done")   ? " tau-step-done"   : ""; %>','    <% attr += (sf.state === "active") ? " tau-step-current": ""; %>','    <div class="tau-step <%= attr %>"><%= sf.name %></div>',"<% } %>","</div>"],dependencies:[]};return t.register(e)});
define('tau/components/component.board.flowHelp.popup',["Underscore","tau/components/component.creator","tau/models/board.flowHelp/model.board.flowHelp","tau/ui/extensions/board.flowHelp/ui.extension.board.flowHelp.popup","tau/ui/templates/board.flowHelp/ui.template.board.flowHelp.popup"],function(e,o,t,p,a){return{create:function(e){var l={extensions:[t,p],template:a,name:"board.helpFlow.popup"};return o.create(l,e)}}});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.quick.add.general',["jQuery","tau/components/extensions/component.extension.base","tau/models/board.cell.quick.add/model.board.general.quick.add"],function(e,n,t){return n.extend({resetLifecycle:!0,"bus afterRender:last + boardSettings.ready":function(e,n,t){var i=n.element,o=t.boardSettings,a=function(e){var n=e.cells&&e.cells.types||[];this.appendQuickAddPopup(i.find("[role=action-quick-add]"),n)}.bind(this);o.get({fields:["cells"]}).done(a),o.unbind(this),o.bind({fields:["cells"],listener:this,callback:a})},"bus boardSettings.ready:last + destroy":function(e,n){n.boardSettings.unbind(this)},appendQuickAddPopup:function(e,i){var o={target:e,applyBubbleClasses:!1,cleanupOnHide:!0,stackName:"quickAddGeneral",showArrow:!0,showOnCreation:!1,zIndex:1e4,onShow:function(){e.removeClass("tau-quick-add-collapse")},onHide:function(){e.addClass("tau-quick-add-collapse")},className:"tau-quick-add-dialog-general",onPositionConfig:function(){return{of:e,collision:"none none",my:"left top",at:"left-12 bottom+1"}},dontCloseSelectors:["#ui-datepicker-div"],componentsConfig:{components:[{name:"board plus quick add general",type:"board.cell.quick.add",extensions:n.extend({"bus beforeInit:last + afterRender":function(e,n,t){var i=t.element,o=t.data;if(o.isEmpty){var a=n.config.context.configurator.getGlobalBus();a.fire("general.quick.add.empty"),i.find(".i-role-select-context-link").on("click",function(){a.fire("select.context.link.click"),this.fire("close")}.bind(this)).addClass("ui-link")}}}),QuickAddModel:t,defaultType:i[0]}]}};this.fire("initBubble",o)}})});
define('tau/models/model.board.quick.add',["Underscore","tau/core/model-base"],function(e,n){return n.extend({"bus afterInit":function(){this.fire("dataBind",{})}})});
define('tau/ui/templates/board.general.quick.add/ui.template.board.general.quick.add',["tau/core/templates-factory","tau/nls/translator"],function(a,t){var d={name:"board.general.quick.add",engine:"jqote2",markup:['<div class="tau-btn-add-bg">','<div role="action-quick-add" class="tau-btn tau-btn-big tau-quick-add-collapse tau-success tau-add tau-quick-add tau-extension-board-tooltip" data-title="'+t("Quick add work and people")+'">',"<span>Add</span>","</div>","</div>"]};return a.register(d)});
define('tau/components/component.board.general.quick.add',["Underscore","tau/components/component.creator","tau/ui/extensions/board.plus/ui.extension.board.plus.quick.add.general","tau/models/model.board.quick.add","tau/components/extensions/bubble/extension.bubble.creator","tau/components/extensions/component.creator.extension","tau/ui/templates/board.general.quick.add/ui.template.board.general.quick.add"],function(e,n,t,o,a,r,u){return{create:function(e){var s={extensions:[t,o,a,r],template:u};return n.create(s,e)}}});
define('tau/models/board.limits/model.board.limits',["Underscore","tau/core/model-base"],function(t,e){return e.extend({INITIAL_STATE:"b64_X0luaXRpYWw_2_",FINAL_STATE:"b64_X0ZpbmFs_",ENTITY_STATE:"entitystate","bus afterInit":function(t){this.fire("dataBind",{});var e=t.data.config.context.configurator;this.fire("configurator.ready",e)},getSlice:function(e,i){var n=$.Deferred();return this.getDefinition(i).done(t.bind(function(i){e.getAppStateStore().get({fields:["acid"],callback:function(r){var s={};s.global={acid:r.acid},s=t.extend(s,i);var a=e.getSliceFactory().create({definition:s});n.resolve(a)}})},this)),n},getDefinition:function(t){var e=$.Deferred();return t.get({fields:["cells","x","y"],callback:function(t){e.resolve({cells:t.cells,x:t.x,y:t.y})}}),e},getLimitFields:function(e,i){var n=$.Deferred();return this.getSlice(e,i).done(t.bind(function(t){var e,i=t.config.definition;i.y&&i.y.types&&i.y.types[0]==this.ENTITY_STATE&&(e="y"),i.x&&i.x.types&&i.x.types[0]==this.ENTITY_STATE&&(e="x"),e?t[e]({$take:999}).done(function(t){n.resolve(t.data.items)}):n.reject()},this)),n},limitValues:function(e){var i=$.Deferred();return e.get({fields:["limits"],callback:t.bind(function(t){i.resolve(t.limits&&t.limits[this.ENTITY_STATE]||{})},this)}),i},getAccess:function(t,e){var i=$.Deferred(),n=t.getLoggedUser(),r=t.getBoardAccessService();return e.get({fields:["ownerIds"],callback:function(t){return i.resolve({edit:r.isEditable(t,n)})}}),i},getData:function(e,i){return $.when(this.getLimitFields(e,i),this.limitValues(i),this.getAccess(e,i)).then(t.bind(function(e,i,n){return e=t.reduce(e,function(e,n){var r="y";if(n.x&&(r="x"),n[r].toString()!==this.INITIAL_STATE&&n[r].toString()!==this.FINAL_STATE){var s=i[n[r]];(!t.isNumber(s)||t.isNaN(s))&&(s=""),n.dynamic.items[0].value=s,e.push(n.dynamic.items[0])}return e},[],this),{fields:e,access:n,values:i}},this))},loadData:function(e,i){return t.bind(function(){this.getData(e,i).done(t.bind(function(t){this.fire("dataLimits.ready",t)},this)).fail(t.bind(function(){this.fire("dataLimits.ready",{fields:[],access:{edit:!1}})},this))},this)},"bus configurator.ready + boardSettings.ready":function(t,e,i){i=i.boardSettings;var n=this.loadData(e,i);n(),e.getAppStateStore().unbind({listener:this}),e.getAppStateStore().bind({fields:["acid"],listener:this,callback:n}),i.unbind({listener:this}),i.bind({fields:["x","y","cells"],listener:this,callback:n})},"bus configurator.ready + boardSettings.ready + destroy":function(t,e,i){e.getAppStateStore().unbind({listener:this}),i.boardSettings.unbind({listener:this})}})});
define('tau/ui/templates/board.limits/ui.template.board.limit-item',["tau/core/templates-factory"],function(t){var i={name:"board.limit-item",engine:"jqote2",markup:['<div class="tau-limiter">',"<h4>Limits for States</h4>",'<div class="tau-limit-matrix">',"<%if(this.fields.length){%>","<form>","<table>","<% _.forEach(this.fields,_.bind(function(item) {%>","<tr>","<th><%=item.data.name%></th>",'<td><input class="tau-in-text <%if(!this.access.edit){%>tau-disabled<%}%>" <%if(!this.access.edit){%>disabled<%}%> name="<%=item.id%>" min="0" max="999" value="<%=item.value%>" type="number"></td>',"</tr>","<%},this));%>","</table>","</form>","<%}else{%>",'<div class="tau-empty-limit-text">There\'s no work in progress.</div>',"<%}%>","</div>","</div>"]};return t.register(i)});
define('tau/ui/extensions/board.limits/ui.extension.board.limits',["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/templates/board.limits/ui.template.board.limit-item","libs/jquery/jquery.inputMaskEditor"],function(t,e,i){return i.extend({temp:{},"bus afterRender:last + dataLimits.ready + configurator.ready:last + boardSettings.ready:last":function(e,i,n,a,s){var r=i.element;r.html(""),this.temp=t.extend(this.temp,n.values),r.append(a.getTemplateFactory().get("board.limit-item").bind({},n)),this.setHandler(r,s.boardSettings)},setHandler:function(i,n){var a=i.find("input"),s=/^\d+$/i;a.closest("form").on("submit",function(){return!1});var r=t.debounce(t.bind(function(i){var a=e(i.target);s.test(a.val())||a.val("");var r=a.closest("form").serializeArray();r=t.reduce(r,function(t,e){return t[e.name]=parseInt(e.value,10),t},{}),this.temp=t.extend(this.temp,r),n.set({set:{limits:{entitystate:this.temp}},callback:e.noop}),this.fire("changeLimits",this.temp)},this),100);a.on("input keydown",r),a.inputMaskEditor({mask:s})}})});
define('tau/ui/templates/board.limits/ui.template.board.limits',["tau/core/templates-factory"],function(e){var i={name:"board.limit",engine:"jqote2",markup:['<div class="i-role-limit-list" >',"</div>"]};return e.register(i)});
define('tau/components/component.board.limits',["Underscore","tau/components/component.creator","tau/models/board.limits/model.board.limits","tau/ui/extensions/board.limits/ui.extension.board.limits","tau/ui/templates/board.limits/ui.template.board.limits"],function(t,e,i,o,n){return{create:function(t){var a={extensions:[o,i],template:n};return e.create(a,t)}}});
define('tau/ui/extensions/board.user-help/ui.extension.board.user-help',["jQuery","Underscore","tau/core/extension.base"],function(e,n,i){return i.extend({init:function(e){this._super(e),this.flowHelpService=e.context.configurator.getHelpScenarioService()},"bus initialize:last + afterRender":function(n,i,t){var r=this.flowHelpService,o=t.element,l=o.find(".i-role-flowhelp-flow");l.change(function(){var n=e(this),t=n.val();t&&(r.abort(),r.setCurrentFlow(t),r.run(t)),i.hidePopup()})}})});
define('tau/models/board.user-help/model.board.user-help',["Underscore","jQuery","tau/core/extension.base"],function(e,t,n){return n.extend({"bus afterInit":function(n,r){var i=r.config.context.configurator,c=i.getHelpScenarioService(),o=c.getScenarios(),s=t.Deferred();i.getApplicationContextService().getApplicationContext({projectIds:e.compact(e.pluck(o,"requiredProject")),teamIds:[]},{success:s.resolve}),s.done(e.bind(function(t){var n=e.filter(o,function(e){return c.checkScenarioPrerequisites(t,e)});this.fire("dataBind",{flows:n})},this))}})});
define('tau/components/component.board.user-help',["jQuery","tau/components/component.factory","tau/ui/extensions/board.user-help/ui.extension.board.user-help","tau/models/board.user-help/model.board.user-help"],function(e,a,t,s){return a.define(function(){var e={name:"board.user-help",engine:"jqote2",markup:['<div class="tau-container">','<div class="tau-help-header">','<span class="tau-help-txt">Take a 5-min Tour</span>','<select class="tau-select i-role-flowhelp-flow">',"<% for (var i = 0; i < this.flows.length; i++) { %>","<% var f = this.flows[i]; %>",'<option value="<%= f.id %>"><%= f.name %></option>',"<% } %>","</select>",'<span class="tau-help-follow">and follow the blue dot<span class="tau-help-attention-attractor"></span></span>','<a href="//guide.targetprocess.com" target="_blank" class="tau-help-site-link">Open Help in a New Window</a>',"</div>",'<div class="tau-help-frame">','<iframe src="//guide.targetprocess.com" height="100%" width="982"></iframe>',"</div>","</div>"]};return{extensions:[t,s],template:e}})});
define('tau/ui/extensions/board.main.menu/ui.extension.board.main.menu.item.help',["jQuery","Underscore","tau/core/extension.base","tau/components/component.board.user-help"],function(n,e,t,o){return t.extend({"bus afterRender + afterInit":function(n,t,i){var p=t.element,u=p.find(".tau-popup-link");u.on("click",e.bind(function(){this.component?this.component.fire("refresh"):(this.component=o.create({context:i.config.context}),this.component.on("afterRender",function(n,e){var t=e.element;u.tauPopup({className:"tau-help-popup",hideOnEscape:!0,show:function(){u.tauPopup("setContent",t)},hide:function(){u.tauPopup("clearContent")}}),u.tauPopup("show")}),this.component.initialize({hidePopup:function(){u.tauPopup("hide")}}))},this))},destroy:function(){this.component&&(this.component.fire("destroy"),this.component=null),this._super()}})});
define('tau/components/component.board.main.menu.item.help',["jQuery","tau/components/component.creator","tau/ui/extensions/board.main.menu/ui.extension.board.main.menu.item.help"],function(e,n,t){return{create:function(e){var a={name:"board.main.menu.item.help",engine:"jqote2",markup:['<div class="tau-menu-item tau-menu-items-help tau-user-menu">','<span class="tau-popup-link"><%!fn.T("User Guide")%></span>',"</div>"]},u={extensions:[t],template:a},i=n.create(u,e);return i.fire("dataBind",{}),i}}});
define('tau/ui/extensions/board.main.menu/ui.extension.board.main.menu.item.social-share',["jQuery","tau/core/extension.base"],function(e,n){return n.extend({"bus afterRender":function(e,n){var t=n.element,o=t.find(".tau-menu-icon"),i=t.find(".tau-social-share-popup");i.detach(),o.tauBubble({content:i,target:o,alignTo:t,zIndex:999,show:function(){t.addClass("tau-active")},hide:function(){t.removeClass("tau-active")}})},destroy:function(){this.component&&(this.component.fire("destroy"),this.component=null),this._super()}})});
define('tau/components/component.board.main.menu.item.social-share',["jQuery","tau/components/component.creator","tau/ui/extensions/board.main.menu/ui.extension.board.main.menu.item.social-share"],function(a,e,t){return{create:function(a){var s={name:"board.main.menu.item.promo-social-share",engine:"jqote2",markup:['<div class="tau-menu-item tau-social-share">','   <span class="tau-menu-icon tau-icon-social-share"></span>','   <div class="tau-social-share-popup">',"       <span>Like new Targetprocess?</span>","       <br>","       <span>Spread the word!</span>",'       <ul class="tau-share-links">','           <li class="tau-share-link">','               <a class="tau-btn tau-facebook" href="//www.facebook.com/TargetProcess" title="Like Targetprocess on Facebook" target="_blank">Facebook</a>','           <li class="tau-share-link">','               <a class="tau-btn tau-google-plus" href="//plus.google.com/106458767326839109835/posts" title="Follow Targetprocess on Google+" target="_blank">Google+</a>','           <li class="tau-share-link">','               <a class="tau-btn tau-twitter" href="https://twitter.com/intent/tweet?url=http%3A%2F%2Ftargetprocess.com%2F3&text=Try%20TargetProcess3%20%E2%80%94%20fascinating%20agile%20project%20management%20software&hashtags=targetprocess,kanban,scrum&related=Targetprocess" title="Share on Twitter" target="_blank">Twitter</a>',"       </ul>","   </div>","</div>"]},o={extensions:[t],template:s},r=e.create(o,a);return r.fire("dataBind",{}),r}}});
define('tau/ui/extensions/board.main.menu/ui.extension.board.main.toggle-help-flow',["jQuery","tau/core/extension.base"],function(e,n){return n.extend({"bus beforeInit + afterRender":function(e,n,t){var o=t.element,a=this.showPanel.bind(this,o),i=this.hidePanel.bind(this,o),r=n.config.context.configurator.getHelpScenarioService();r.on("run.scenario",a),r.on("abort.scenario",i),r.on("done.scenario",i),r.getState()===r.stateTypes.InProgress&&a()},hidePanel:function(e){e.removeClass("tau-flow-started tau-flow-info")},showPanel:function(e){e.addClass("tau-flow-started tau-flow-info")}})});
define('tau/ui/templates/board.main.menu/ui.template.board.main.menu',["tau/core/templates-factory"],function(e){var n={name:"board.main.menu",engine:"jqote2",markup:['<div class="tau-main-menu">',"</div>"].join(""),dependencies:[]};return e.register(n)});
define('tau/ui/templates/board.main.menu/ui.template.board.main.menu.section',["tau/core/templates-factory"],function(e){var n={name:"board.main.menu.section",engine:"jqote2",markup:['<div class="tau-menu-section">',"</div>"].join(""),dependencies:[]};return e.register(n)});
define('tau/components/component.board.main.menu',["Underscore","tau/components/component.container","tau/ui/extensions/board.main.menu/ui.extension.board.main.toggle-help-flow","tau/ui/templates/board.main.menu/ui.template.board.main.menu","tau/ui/templates/board.main.menu/ui.template.board.main.menu.section"],function(e,t,n,a,i){return{create:function(o){var r={extensions:[].concat(o.extensions||[]),template:a,name:"board.main.menu",children:[{type:"container",template:i,children:[{type:"reports"},{type:"time-sheet"}]},{type:"container",template:i,extensions:[n],children:[{type:"tp-buy"},{type:"board.main.menu.item.help"},{type:"board.flowHelp"},{type:"support-block"},{type:"board.main.menu.item.social-share"}]},{type:"container",template:i,children:[{type:"current-user"},{type:"tp-settings"}]}]};o["queue.bus"]=!0;var m=t.create(e.extend(o,r));return m}}});
define('tau/components/board.menu/templates/board.menu.template',["tau/core/templates-factory"],function(e){var r={name:"board.menu",engine:"jqote2",markup:['<div class="i-role-views-navigator"><div>']};return e.register(r)});
!function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define('react',t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.React=t()}}(function(){return function t(e,n,o){function r(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+a+"'")}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return r(n?n:t)},c,c.exports,t,e,n,o)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<o.length;a++)r(o[a]);return r}({1:[function(t,e){"use strict";var n=t("./focusNode"),o={componentDidMount:function(){this.props.autoFocus&&n(this.getDOMNode())}};e.exports=o},{"./focusNode":110}],2:[function(t,e){var n=t("./invariant"),o={addClass:function(t,e){return n(!/\s/.test(e)),e&&(t.classList?t.classList.add(e):o.hasClass(t,e)||(t.className=t.className+" "+e)),t},removeClass:function(t,e){return n(!/\s/.test(e)),e&&(t.classList?t.classList.remove(e):o.hasClass(t,e)&&(t.className=t.className.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,""))),t},conditionClass:function(t,e,n){return(n?o.addClass:o.removeClass)(t,e)},hasClass:function(t,e){return n(!/\s/.test(e)),t.classList?!!e&&t.classList.contains(e):(" "+t.className+" ").indexOf(" "+e+" ")>-1}};e.exports=o},{"./invariant":122}],3:[function(t,e){"use strict";function n(t,e){return t+e.charAt(0).toUpperCase()+e.substring(1)}var o={columnCount:!0,fillOpacity:!0,flex:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},r=["Webkit","ms","Moz","O"];Object.keys(o).forEach(function(t){r.forEach(function(e){o[n(e,t)]=o[t]})});var i={background:{backgroundImage:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundColor:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0}},a={isUnitlessNumber:o,shorthandPropertyExpansions:i};e.exports=a},{}],4:[function(t,e){"use strict";var n=t("./CSSProperty"),o=t("./dangerousStyleValue"),r=t("./escapeTextForBrowser"),i=t("./hyphenate"),a=t("./memoizeStringOnly"),s=a(function(t){return r(i(t))}),u={createMarkupForStyles:function(t){var e="";for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];null!=r&&(e+=s(n)+":",e+=o(n,r)+";")}return e||null},setValueForStyles:function(t,e){var r=t.style;for(var i in e)if(e.hasOwnProperty(i)){var a=o(i,e[i]);if(a)r[i]=a;else{var s=n.shorthandPropertyExpansions[i];if(s)for(var u in s)r[u]="";else r[i]=""}}}};e.exports=u},{"./CSSProperty":3,"./dangerousStyleValue":105,"./escapeTextForBrowser":108,"./hyphenate":120,"./memoizeStringOnly":130}],5:[function(t,e){"use strict";function n(t){return"SELECT"===t.nodeName||"INPUT"===t.nodeName&&"file"===t.type}function o(t){var e=M.getPooled(b.change,S,t);C.accumulateTwoPhaseDispatches(e),R.batchedUpdates(r,e)}function r(t){y.enqueueEvents(t),y.processEventQueue()}function i(t,e){O=t,S=e,O.attachEvent("onchange",o)}function a(){O&&(O.detachEvent("onchange",o),O=null,S=null)}function s(t,e,n){return t===T.topChange?n:void 0}function u(t,e,n){t===T.topFocus?(a(),i(e,n)):t===T.topBlur&&a()}function c(t,e){O=t,S=e,N=t.value,I=Object.getOwnPropertyDescriptor(t.constructor.prototype,"value"),Object.defineProperty(O,"value",A),O.attachEvent("onpropertychange",p)}function l(){O&&(delete O.value,O.detachEvent("onpropertychange",p),O=null,S=null,N=null,I=null)}function p(t){if("value"===t.propertyName){var e=t.srcElement.value;e!==N&&(N=e,o(t))}}function d(t,e,n){return t===T.topInput?n:void 0}function h(t,e,n){t===T.topFocus?(l(),c(e,n)):t===T.topBlur&&l()}function f(t){return t!==T.topSelectionChange&&t!==T.topKeyUp&&t!==T.topKeyDown||!O||O.value===N?void 0:(N=O.value,S)}function m(t){return"INPUT"===t.nodeName&&("checkbox"===t.type||"radio"===t.type)}function v(t,e,n){return t===T.topClick?n:void 0}var g=t("./EventConstants"),y=t("./EventPluginHub"),C=t("./EventPropagators"),E=t("./ExecutionEnvironment"),R=t("./ReactUpdates"),M=t("./SyntheticEvent"),D=t("./isEventSupported"),x=t("./isTextInputElement"),P=t("./keyOf"),T=g.topLevelTypes,b={change:{phasedRegistrationNames:{bubbled:P({onChange:null}),captured:P({onChangeCapture:null})},dependencies:[T.topBlur,T.topChange,T.topClick,T.topFocus,T.topInput,T.topKeyDown,T.topKeyUp,T.topSelectionChange]}},O=null,S=null,N=null,I=null,_=!1;E.canUseDOM&&(_=D("change")&&(!("documentMode"in document)||document.documentMode>8));var w=!1;E.canUseDOM&&(w=D("input")&&(!("documentMode"in document)||document.documentMode>9));var A={get:function(){return I.get.call(this)},set:function(t){N=""+t,I.set.call(this,t)}},k={eventTypes:b,extractEvents:function(t,e,o,r){var i,a;if(n(e)?_?i=s:a=u:x(e)?w?i=d:(i=f,a=h):m(e)&&(i=v),i){var c=i(t,e,o);if(c){var l=M.getPooled(b.change,c,r);return C.accumulateTwoPhaseDispatches(l),l}}a&&a(t,e,o)}};e.exports=k},{"./EventConstants":15,"./EventPluginHub":17,"./EventPropagators":20,"./ExecutionEnvironment":21,"./ReactUpdates":78,"./SyntheticEvent":86,"./isEventSupported":123,"./isTextInputElement":125,"./keyOf":129}],6:[function(t,e){"use strict";var n=0,o={createReactRootIndex:function(){return n++}};e.exports=o},{}],7:[function(t,e){"use strict";function n(t){switch(t){case g.topCompositionStart:return C.compositionStart;case g.topCompositionEnd:return C.compositionEnd;case g.topCompositionUpdate:return C.compositionUpdate}}function o(t,e){return t===g.topKeyDown&&e.keyCode===f}function r(t,e){switch(t){case g.topKeyUp:return-1!==h.indexOf(e.keyCode);case g.topKeyDown:return e.keyCode!==f;case g.topKeyPress:case g.topMouseDown:case g.topBlur:return!0;default:return!1}}function i(t){this.root=t,this.startSelection=c.getSelection(t),this.startValue=this.getText()}var a=t("./EventConstants"),s=t("./EventPropagators"),u=t("./ExecutionEnvironment"),c=t("./ReactInputSelection"),l=t("./SyntheticCompositionEvent"),p=t("./getTextContentAccessor"),d=t("./keyOf"),h=[9,13,27,32],f=229,m=u.canUseDOM&&"CompositionEvent"in window,v=!m||"documentMode"in document&&document.documentMode>8,g=a.topLevelTypes,y=null,C={compositionEnd:{phasedRegistrationNames:{bubbled:d({onCompositionEnd:null}),captured:d({onCompositionEndCapture:null})},dependencies:[g.topBlur,g.topCompositionEnd,g.topKeyDown,g.topKeyPress,g.topKeyUp,g.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:d({onCompositionStart:null}),captured:d({onCompositionStartCapture:null})},dependencies:[g.topBlur,g.topCompositionStart,g.topKeyDown,g.topKeyPress,g.topKeyUp,g.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:d({onCompositionUpdate:null}),captured:d({onCompositionUpdateCapture:null})},dependencies:[g.topBlur,g.topCompositionUpdate,g.topKeyDown,g.topKeyPress,g.topKeyUp,g.topMouseDown]}};i.prototype.getText=function(){return this.root.value||this.root[p()]},i.prototype.getData=function(){var t=this.getText(),e=this.startSelection.start,n=this.startValue.length-this.startSelection.end;return t.substr(e,t.length-n-e)};var E={eventTypes:C,extractEvents:function(t,e,a,u){var c,p;if(m?c=n(t):y?r(t,u)&&(c=C.compositionEnd):o(t,u)&&(c=C.compositionStart),v&&(y||c!==C.compositionStart?c===C.compositionEnd&&y&&(p=y.getData(),y=null):y=new i(e)),c){var d=l.getPooled(c,a,u);return p&&(d.data=p),s.accumulateTwoPhaseDispatches(d),d}}};e.exports=E},{"./EventConstants":15,"./EventPropagators":20,"./ExecutionEnvironment":21,"./ReactInputSelection":54,"./SyntheticCompositionEvent":84,"./getTextContentAccessor":118,"./keyOf":129}],8:[function(t,e){"use strict";function n(t,e,n){var o=t.childNodes;o[n]!==e&&(e.parentNode===t&&t.removeChild(e),n>=o.length?t.appendChild(e):t.insertBefore(e,o[n]))}var o,r=t("./Danger"),i=t("./ReactMultiChildUpdateTypes"),a=t("./getTextContentAccessor"),s=a();o="textContent"===s?function(t,e){t.textContent=e}:function(t,e){for(;t.firstChild;)t.removeChild(t.firstChild);if(e){var n=t.ownerDocument||document;t.appendChild(n.createTextNode(e))}};var u={dangerouslyReplaceNodeWithMarkup:r.dangerouslyReplaceNodeWithMarkup,updateTextContent:o,processUpdates:function(t,e){for(var a,s=null,u=null,c=0;a=t[c];c++)if(a.type===i.MOVE_EXISTING||a.type===i.REMOVE_NODE){var l=a.fromIndex,p=a.parentNode.childNodes[l],d=a.parentID;s=s||{},s[d]=s[d]||[],s[d][l]=p,u=u||[],u.push(p)}var h=r.dangerouslyRenderMarkup(e);if(u)for(var f=0;f<u.length;f++)u[f].parentNode.removeChild(u[f]);for(var m=0;a=t[m];m++)switch(a.type){case i.INSERT_MARKUP:n(a.parentNode,h[a.markupIndex],a.toIndex);break;case i.MOVE_EXISTING:n(a.parentNode,s[a.parentID][a.fromIndex],a.toIndex);break;case i.TEXT_CONTENT:o(a.parentNode,a.textContent);break;case i.REMOVE_NODE:}}};e.exports=u},{"./Danger":11,"./ReactMultiChildUpdateTypes":61,"./getTextContentAccessor":118}],9:[function(t,e){"use strict";var n=t("./invariant"),o={MUST_USE_ATTRIBUTE:1,MUST_USE_PROPERTY:2,HAS_SIDE_EFFECTS:4,HAS_BOOLEAN_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:16,injectDOMPropertyConfig:function(t){var e=t.Properties||{},r=t.DOMAttributeNames||{},a=t.DOMPropertyNames||{},s=t.DOMMutationMethods||{};t.isCustomAttribute&&i._isCustomAttributeFunctions.push(t.isCustomAttribute);for(var u in e){n(!i.isStandardName[u]),i.isStandardName[u]=!0;var c=u.toLowerCase();i.getPossibleStandardName[c]=u;var l=r[u];l&&(i.getPossibleStandardName[l]=u),i.getAttributeName[u]=l||c,i.getPropertyName[u]=a[u]||u;var p=s[u];p&&(i.getMutationMethod[u]=p);var d=e[u];i.mustUseAttribute[u]=d&o.MUST_USE_ATTRIBUTE,i.mustUseProperty[u]=d&o.MUST_USE_PROPERTY,i.hasSideEffects[u]=d&o.HAS_SIDE_EFFECTS,i.hasBooleanValue[u]=d&o.HAS_BOOLEAN_VALUE,i.hasPositiveNumericValue[u]=d&o.HAS_POSITIVE_NUMERIC_VALUE,n(!i.mustUseAttribute[u]||!i.mustUseProperty[u]),n(i.mustUseProperty[u]||!i.hasSideEffects[u]),n(!i.hasBooleanValue[u]||!i.hasPositiveNumericValue[u])}}},r={},i={ID_ATTRIBUTE_NAME:"data-reactid",isStandardName:{},getPossibleStandardName:{},getAttributeName:{},getPropertyName:{},getMutationMethod:{},mustUseAttribute:{},mustUseProperty:{},hasSideEffects:{},hasBooleanValue:{},hasPositiveNumericValue:{},_isCustomAttributeFunctions:[],isCustomAttribute:function(t){for(var e=0;e<i._isCustomAttributeFunctions.length;e++){var n=i._isCustomAttributeFunctions[e];if(n(t))return!0}return!1},getDefaultValueForProperty:function(t,e){var n,o=r[t];return o||(r[t]=o={}),e in o||(n=document.createElement(t),o[e]=n[e]),o[e]},injection:o};e.exports=i},{"./invariant":122}],10:[function(t,e){"use strict";function n(t,e){return null==e||o.hasBooleanValue[t]&&!e||o.hasPositiveNumericValue[t]&&(isNaN(e)||1>e)}var o=t("./DOMProperty"),r=t("./escapeTextForBrowser"),i=t("./memoizeStringOnly"),a=(t("./warning"),i(function(t){return r(t)+'="'})),s={createMarkupForID:function(t){return a(o.ID_ATTRIBUTE_NAME)+r(t)+'"'},createMarkupForProperty:function(t,e){if(o.isStandardName[t]){if(n(t,e))return"";var i=o.getAttributeName[t];return o.hasBooleanValue[t]?r(i):a(i)+r(e)+'"'}return o.isCustomAttribute(t)?null==e?"":a(t)+r(e)+'"':null},setValueForProperty:function(t,e,r){if(o.isStandardName[e]){var i=o.getMutationMethod[e];if(i)i(t,r);else if(n(e,r))this.deleteValueForProperty(t,e);else if(o.mustUseAttribute[e])t.setAttribute(o.getAttributeName[e],""+r);else{var a=o.getPropertyName[e];o.hasSideEffects[e]&&t[a]===r||(t[a]=r)}}else o.isCustomAttribute(e)&&(null==r?t.removeAttribute(o.getAttributeName[e]):t.setAttribute(e,""+r))},deleteValueForProperty:function(t,e){if(o.isStandardName[e]){var n=o.getMutationMethod[e];if(n)n(t,void 0);else if(o.mustUseAttribute[e])t.removeAttribute(o.getAttributeName[e]);else{var r=o.getPropertyName[e],i=o.getDefaultValueForProperty(t.nodeName,r);o.hasSideEffects[e]&&t[r]===i||(t[r]=i)}}else o.isCustomAttribute(e)&&t.removeAttribute(e)}};e.exports=s},{"./DOMProperty":9,"./escapeTextForBrowser":108,"./memoizeStringOnly":130,"./warning":144}],11:[function(t,e){"use strict";function n(t){return t.substring(1,t.indexOf(" "))}var o=t("./ExecutionEnvironment"),r=t("./createNodesFromMarkup"),i=t("./emptyFunction"),a=t("./getMarkupWrap"),s=t("./invariant"),u=/^(<[^ \/>]+)/,c="data-danger-index",l={dangerouslyRenderMarkup:function(t){s(o.canUseDOM);for(var e,l={},p=0;p<t.length;p++)s(t[p]),e=n(t[p]),e=a(e)?e:"*",l[e]=l[e]||[],l[e][p]=t[p];var d=[],h=0;for(e in l)if(l.hasOwnProperty(e)){var f=l[e];for(var m in f)if(f.hasOwnProperty(m)){var v=f[m];f[m]=v.replace(u,"$1 "+c+'="'+m+'" ')}var g=r(f.join(""),i);for(p=0;p<g.length;++p){var y=g[p];y.hasAttribute&&y.hasAttribute(c)&&(m=+y.getAttribute(c),y.removeAttribute(c),s(!d.hasOwnProperty(m)),d[m]=y,h+=1)}}return s(h===d.length),s(d.length===t.length),d},dangerouslyReplaceNodeWithMarkup:function(t,e){s(o.canUseDOM),s(e),s("html"!==t.tagName.toLowerCase());var n=r(e,i)[0];t.parentNode.replaceChild(n,t)}};e.exports=l},{"./ExecutionEnvironment":21,"./createNodesFromMarkup":102,"./emptyFunction":106,"./getMarkupWrap":115,"./invariant":122}],12:[function(t,e){"use strict";var n=t("./DOMProperty"),o=n.injection.MUST_USE_ATTRIBUTE,r=n.injection.MUST_USE_PROPERTY,i=n.injection.HAS_BOOLEAN_VALUE,a=n.injection.HAS_SIDE_EFFECTS,s=n.injection.HAS_POSITIVE_NUMERIC_VALUE,u={isCustomAttribute:RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/),Properties:{accept:null,accessKey:null,action:null,allowFullScreen:o|i,allowTransparency:o,alt:null,async:i,autoComplete:null,autoPlay:i,cellPadding:null,cellSpacing:null,charSet:o,checked:r|i,className:r,cols:o|s,colSpan:null,content:null,contentEditable:null,contextMenu:o,controls:r|i,crossOrigin:null,data:null,dateTime:o,defer:i,dir:null,disabled:o|i,download:null,draggable:null,encType:null,form:o,formNoValidate:i,frameBorder:o,height:o,hidden:o|i,href:null,hrefLang:null,htmlFor:null,httpEquiv:null,icon:null,id:r,label:null,lang:null,list:null,loop:r|i,max:null,maxLength:o,mediaGroup:null,method:null,min:null,multiple:r|i,muted:r|i,name:null,noValidate:i,pattern:null,placeholder:null,poster:null,preload:null,radioGroup:null,readOnly:r|i,rel:null,required:i,role:o,rows:o|s,rowSpan:null,sandbox:null,scope:null,scrollLeft:r,scrollTop:r,seamless:o|i,selected:r|i,size:o|s,span:s,spellCheck:null,src:null,srcDoc:r,srcSet:null,step:null,style:null,tabIndex:null,target:null,title:null,type:null,value:r|a,width:o,wmode:o,autoCapitalize:null,autoCorrect:null,property:null,cx:o,cy:o,d:o,fill:o,fx:o,fy:o,gradientTransform:o,gradientUnits:o,offset:o,points:o,r:o,rx:o,ry:o,spreadMethod:o,stopColor:o,stopOpacity:o,stroke:o,strokeLinecap:o,strokeWidth:o,textAnchor:o,transform:o,version:o,viewBox:o,x1:o,x2:o,x:o,y1:o,y2:o,y:o},DOMAttributeNames:{className:"class",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",htmlFor:"for",spreadMethod:"spreadMethod",stopColor:"stop-color",stopOpacity:"stop-opacity",strokeLinecap:"stroke-linecap",strokeWidth:"stroke-width",textAnchor:"text-anchor",viewBox:"viewBox"},DOMPropertyNames:{autoCapitalize:"autocapitalize",autoComplete:"autocomplete",autoCorrect:"autocorrect",autoFocus:"autofocus",autoPlay:"autoplay",encType:"enctype",hrefLang:"hreflang",radioGroup:"radiogroup",spellCheck:"spellcheck",srcDoc:"srcdoc",srcSet:"srcset"}};e.exports=u},{"./DOMProperty":9}],13:[function(t,e){"use strict";var n=t("./keyOf"),o=[n({ResponderEventPlugin:null}),n({SimpleEventPlugin:null}),n({TapEventPlugin:null}),n({EnterLeaveEventPlugin:null}),n({ChangeEventPlugin:null}),n({SelectEventPlugin:null}),n({CompositionEventPlugin:null}),n({AnalyticsEventPlugin:null}),n({MobileSafariClickEventPlugin:null})];e.exports=o},{"./keyOf":129}],14:[function(t,e){"use strict";var n=t("./EventConstants"),o=t("./EventPropagators"),r=t("./SyntheticMouseEvent"),i=t("./ReactMount"),a=t("./keyOf"),s=n.topLevelTypes,u=i.getFirstReactDOM,c={mouseEnter:{registrationName:a({onMouseEnter:null}),dependencies:[s.topMouseOut,s.topMouseOver]},mouseLeave:{registrationName:a({onMouseLeave:null}),dependencies:[s.topMouseOut,s.topMouseOver]}},l=[null,null],p={eventTypes:c,extractEvents:function(t,e,n,a){if(t===s.topMouseOver&&(a.relatedTarget||a.fromElement))return null;if(t!==s.topMouseOut&&t!==s.topMouseOver)return null;var p;if(e.window===e)p=e;else{var d=e.ownerDocument;p=d?d.defaultView||d.parentWindow:window}var h,f;if(t===s.topMouseOut?(h=e,f=u(a.relatedTarget||a.toElement)||p):(h=p,f=e),h===f)return null;var m=h?i.getID(h):"",v=f?i.getID(f):"",g=r.getPooled(c.mouseLeave,m,a);g.type="mouseleave",g.target=h,g.relatedTarget=f;var y=r.getPooled(c.mouseEnter,v,a);return y.type="mouseenter",y.target=f,y.relatedTarget=h,o.accumulateEnterLeaveDispatches(g,y,m,v),l[0]=g,l[1]=y,l}};e.exports=p},{"./EventConstants":15,"./EventPropagators":20,"./ReactMount":58,"./SyntheticMouseEvent":89,"./keyOf":129}],15:[function(t,e){"use strict";var n=t("./keyMirror"),o=n({bubbled:null,captured:null}),r=n({topBlur:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topError:null,topFocus:null,topInput:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topReset:null,topScroll:null,topSelectionChange:null,topSubmit:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topWheel:null}),i={topLevelTypes:r,PropagationPhases:o};e.exports=i},{"./keyMirror":128}],16:[function(t,e){var n=t("./emptyFunction"),o={listen:function(t,e,n){return t.addEventListener?(t.addEventListener(e,n,!1),{remove:function(){t.removeEventListener(e,n,!1)}}):t.attachEvent?(t.attachEvent("on"+e,n),{remove:function(){t.detachEvent(e,n)}}):void 0},capture:function(t,e,o){return t.addEventListener?(t.addEventListener(e,o,!0),{remove:function(){t.removeEventListener(e,o,!0)}}):{remove:n}}};e.exports=o},{"./emptyFunction":106}],17:[function(t,e){"use strict";var n=t("./EventPluginRegistry"),o=t("./EventPluginUtils"),r=t("./ExecutionEnvironment"),i=t("./accumulate"),a=t("./forEachAccumulated"),s=t("./invariant"),u=(t("./isEventSupported"),t("./monitorCodeUse"),{}),c=null,l=function(t){if(t){var e=o.executeDispatch,r=n.getPluginModuleForEvent(t);r&&r.executeDispatch&&(e=r.executeDispatch),o.executeDispatchesInOrder(t,e),t.isPersistent()||t.constructor.release(t)}},p=null,d={injection:{injectMount:o.injection.injectMount,injectInstanceHandle:function(t){p=t},getInstanceHandle:function(){return p},injectEventPluginOrder:n.injectEventPluginOrder,injectEventPluginsByName:n.injectEventPluginsByName},eventNameDispatchConfigs:n.eventNameDispatchConfigs,registrationNameModules:n.registrationNameModules,putListener:function(t,e,n){s(r.canUseDOM),s(!n||"function"==typeof n);var o=u[e]||(u[e]={});o[t]=n},getListener:function(t,e){var n=u[e];return n&&n[t]},deleteListener:function(t,e){var n=u[e];n&&delete n[t]},deleteAllListeners:function(t){for(var e in u)delete u[e][t]},extractEvents:function(t,e,o,r){for(var a,s=n.plugins,u=0,c=s.length;c>u;u++){var l=s[u];if(l){var p=l.extractEvents(t,e,o,r);p&&(a=i(a,p))}}return a},enqueueEvents:function(t){t&&(c=i(c,t))},processEventQueue:function(){var t=c;c=null,a(t,l),s(!c)},__purge:function(){u={}},__getListenerBank:function(){return u}};e.exports=d},{"./EventPluginRegistry":18,"./EventPluginUtils":19,"./ExecutionEnvironment":21,"./accumulate":95,"./forEachAccumulated":111,"./invariant":122,"./isEventSupported":123,"./monitorCodeUse":135}],18:[function(t,e){"use strict";function n(){if(a)for(var t in s){var e=s[t],n=a.indexOf(t);if(i(n>-1),!u.plugins[n]){i(e.extractEvents),u.plugins[n]=e;var r=e.eventTypes;for(var c in r)i(o(r[c],e,c))}}}function o(t,e,n){i(!u.eventNameDispatchConfigs[n]),u.eventNameDispatchConfigs[n]=t;var o=t.phasedRegistrationNames;if(o){for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];r(s,e,n)}return!0}return t.registrationName?(r(t.registrationName,e,n),!0):!1}function r(t,e,n){i(!u.registrationNameModules[t]),u.registrationNameModules[t]=e,u.registrationNameDependencies[t]=e.eventTypes[n].dependencies}var i=t("./invariant"),a=null,s={},u={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},injectEventPluginOrder:function(t){i(!a),a=Array.prototype.slice.call(t),n()},injectEventPluginsByName:function(t){var e=!1;for(var o in t)if(t.hasOwnProperty(o)){var r=t[o];s[o]!==r&&(i(!s[o]),s[o]=r,e=!0)}e&&n()},getPluginModuleForEvent:function(t){var e=t.dispatchConfig;if(e.registrationName)return u.registrationNameModules[e.registrationName]||null;for(var n in e.phasedRegistrationNames)if(e.phasedRegistrationNames.hasOwnProperty(n)){var o=u.registrationNameModules[e.phasedRegistrationNames[n]];if(o)return o}return null},_resetEventPlugins:function(){a=null;for(var t in s)s.hasOwnProperty(t)&&delete s[t];u.plugins.length=0;var e=u.eventNameDispatchConfigs;for(var n in e)e.hasOwnProperty(n)&&delete e[n];var o=u.registrationNameModules;for(var r in o)o.hasOwnProperty(r)&&delete o[r]}};e.exports=u},{"./invariant":122}],19:[function(t,e){"use strict";function n(t){return t===f.topMouseUp||t===f.topTouchEnd||t===f.topTouchCancel}function o(t){return t===f.topMouseMove||t===f.topTouchMove}function r(t){return t===f.topMouseDown||t===f.topTouchStart}function i(t,e){var n=t._dispatchListeners,o=t._dispatchIDs;if(Array.isArray(n))for(var r=0;r<n.length&&!t.isPropagationStopped();r++)e(t,n[r],o[r]);else n&&e(t,n,o)}function a(t,e,n){t.currentTarget=h.Mount.getNode(n);var o=e(t,n);return t.currentTarget=null,o}function s(t,e){i(t,e),t._dispatchListeners=null,t._dispatchIDs=null}function u(t){var e=t._dispatchListeners,n=t._dispatchIDs;if(Array.isArray(e)){for(var o=0;o<e.length&&!t.isPropagationStopped();o++)if(e[o](t,n[o]))return n[o]}else if(e&&e(t,n))return n;return null}function c(t){var e=t._dispatchListeners,n=t._dispatchIDs;d(!Array.isArray(e));var o=e?e(t,n):null;return t._dispatchListeners=null,t._dispatchIDs=null,o}function l(t){return!!t._dispatchListeners}var p=t("./EventConstants"),d=t("./invariant"),h={Mount:null,injectMount:function(t){h.Mount=t}},f=p.topLevelTypes,m={isEndish:n,isMoveish:o,isStartish:r,executeDirectDispatch:c,executeDispatch:a,executeDispatchesInOrder:s,executeDispatchesInOrderStopAtTrue:u,hasDispatches:l,injection:h,useTouchEvents:!1};e.exports=m},{"./EventConstants":15,"./invariant":122}],20:[function(t,e){"use strict";function n(t,e,n){var o=e.dispatchConfig.phasedRegistrationNames[n];return m(t,o)}function o(t,e,o){var r=e?f.bubbled:f.captured,i=n(t,o,r);i&&(o._dispatchListeners=d(o._dispatchListeners,i),o._dispatchIDs=d(o._dispatchIDs,t))}function r(t){t&&t.dispatchConfig.phasedRegistrationNames&&p.injection.getInstanceHandle().traverseTwoPhase(t.dispatchMarker,o,t)}function i(t,e,n){if(n&&n.dispatchConfig.registrationName){var o=n.dispatchConfig.registrationName,r=m(t,o);r&&(n._dispatchListeners=d(n._dispatchListeners,r),n._dispatchIDs=d(n._dispatchIDs,t))}}function a(t){t&&t.dispatchConfig.registrationName&&i(t.dispatchMarker,null,t)}function s(t){h(t,r)}function u(t,e,n,o){p.injection.getInstanceHandle().traverseEnterLeave(n,o,i,t,e)}function c(t){h(t,a)}var l=t("./EventConstants"),p=t("./EventPluginHub"),d=t("./accumulate"),h=t("./forEachAccumulated"),f=l.PropagationPhases,m=p.getListener,v={accumulateTwoPhaseDispatches:s,accumulateDirectDispatches:c,accumulateEnterLeaveDispatches:u};e.exports=v},{"./EventConstants":15,"./EventPluginHub":17,"./accumulate":95,"./forEachAccumulated":111}],21:[function(t,e){"use strict";var n="undefined"!=typeof window,o={canUseDOM:n,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:n&&(window.addEventListener||window.attachEvent),isInWorker:!n};e.exports=o},{}],22:[function(t,e){"use strict";var n=t("./ReactLink"),o=t("./ReactStateSetters"),r={linkState:function(t){return new n(this.state[t],o.createStateKeySetter(this,t))}};e.exports=r},{"./ReactLink":56,"./ReactStateSetters":73}],23:[function(t,e){"use strict";function n(t){u(null==t.props.checkedLink||null==t.props.valueLink)}function o(t){n(t),u(null==t.props.value&&null==t.props.onChange)}function r(t){n(t),u(null==t.props.checked&&null==t.props.onChange)}function i(t){this.props.valueLink.requestChange(t.target.value)}function a(t){this.props.checkedLink.requestChange(t.target.checked)}var s=t("./ReactPropTypes"),u=t("./invariant"),c=(t("./warning"),{Mixin:{propTypes:{value:function(){},checked:function(){},onChange:s.func}},getValue:function(t){return t.props.valueLink?(o(t),t.props.valueLink.value):t.props.value},getChecked:function(t){return t.props.checkedLink?(r(t),t.props.checkedLink.value):t.props.checked},getOnChange:function(t){return t.props.valueLink?(o(t),i):t.props.checkedLink?(r(t),a):t.props.onChange}});e.exports=c},{"./ReactPropTypes":67,"./invariant":122,"./warning":144}],24:[function(t,e){"use strict";var n=t("./EventConstants"),o=t("./emptyFunction"),r=n.topLevelTypes,i={eventTypes:null,extractEvents:function(t,e,n,i){if(t===r.topTouchStart){var a=i.target;a&&!a.onclick&&(a.onclick=o)}}};e.exports=i},{"./EventConstants":15,"./emptyFunction":106}],25:[function(t,e){"use strict";var n=t("./invariant"),o=function(t){var e=this;if(e.instancePool.length){var n=e.instancePool.pop();return e.call(n,t),n}return new e(t)},r=function(t,e){var n=this;if(n.instancePool.length){var o=n.instancePool.pop();return n.call(o,t,e),o}return new n(t,e)},i=function(t,e,n){var o=this;if(o.instancePool.length){var r=o.instancePool.pop();return o.call(r,t,e,n),r}return new o(t,e,n)},a=function(t,e,n,o,r){var i=this;if(i.instancePool.length){var a=i.instancePool.pop();return i.call(a,t,e,n,o,r),a}return new i(t,e,n,o,r)},s=function(t){var e=this;n(t instanceof e),t.destructor&&t.destructor(),e.instancePool.length<e.poolSize&&e.instancePool.push(t)},u=10,c=o,l=function(t,e){var n=t;return n.instancePool=[],n.getPooled=e||c,n.poolSize||(n.poolSize=u),n.release=s,n},p={addPoolingTo:l,oneArgumentPooler:o,twoArgumentPooler:r,threeArgumentPooler:i,fiveArgumentPooler:a};e.exports=p},{"./invariant":122}],26:[function(t,e){"use strict";var n=t("./DOMPropertyOperations"),o=t("./EventPluginUtils"),r=t("./ReactChildren"),i=t("./ReactComponent"),a=t("./ReactCompositeComponent"),s=t("./ReactContext"),u=t("./ReactCurrentOwner"),c=t("./ReactDOM"),l=t("./ReactDOMComponent"),p=t("./ReactDefaultInjection"),d=t("./ReactInstanceHandles"),h=t("./ReactMount"),f=t("./ReactMultiChild"),m=t("./ReactPerf"),v=t("./ReactPropTypes"),g=t("./ReactServerRendering"),y=t("./ReactTextComponent"),C=t("./onlyChild");p.inject();var E={Children:{map:r.map,forEach:r.forEach,only:C},DOM:c,PropTypes:v,initializeTouchEvents:function(t){o.useTouchEvents=t},createClass:a.createClass,constructAndRenderComponent:h.constructAndRenderComponent,constructAndRenderComponentByID:h.constructAndRenderComponentByID,renderComponent:m.measure("React","renderComponent",h.renderComponent),renderComponentToString:g.renderComponentToString,renderComponentToStaticMarkup:g.renderComponentToStaticMarkup,unmountComponentAtNode:h.unmountComponentAtNode,isValidClass:a.isValidClass,isValidComponent:i.isValidComponent,withContext:s.withContext,__internals:{Component:i,CurrentOwner:u,DOMComponent:l,DOMPropertyOperations:n,InstanceHandles:d,Mount:h,MultiChild:f,TextComponent:y}};E.version="0.10.0",e.exports=E},{"./DOMPropertyOperations":10,"./EventPluginUtils":19,"./ReactChildren":30,"./ReactComponent":31,"./ReactCompositeComponent":33,"./ReactContext":34,"./ReactCurrentOwner":35,"./ReactDOM":36,"./ReactDOMComponent":38,"./ReactDefaultInjection":48,"./ReactInstanceHandles":55,"./ReactMount":58,"./ReactMultiChild":60,"./ReactPerf":63,"./ReactPropTypes":67,"./ReactServerRendering":71,"./ReactTextComponent":74,"./onlyChild":138}],27:[function(t,e){"use strict";var n=t("./ReactMount"),o=t("./invariant"),r={getDOMNode:function(){return o(this.isMounted()),n.getNode(this._rootNodeID)}};e.exports=r},{"./ReactMount":58,"./invariant":122}],28:[function(t,e){"use strict";var n=t("./React"),o=t("./ReactTransitionGroup"),r=t("./ReactCSSTransitionGroupChild"),i=n.createClass({propTypes:{transitionName:n.PropTypes.string.isRequired,transitionEnter:n.PropTypes.bool,transitionLeave:n.PropTypes.bool},getDefaultProps:function(){return{transitionEnter:!0,transitionLeave:!0}},_wrapChild:function(t){return r({name:this.props.transitionName,enter:this.props.transitionEnter,leave:this.props.transitionLeave},t)},render:function(){return this.transferPropsTo(o({childFactory:this._wrapChild},this.props.children))}});e.exports=i},{"./React":26,"./ReactCSSTransitionGroupChild":29,"./ReactTransitionGroup":77}],29:[function(t,e){"use strict";var n=t("./React"),o=t("./CSSCore"),r=t("./ReactTransitionEvents"),i=t("./onlyChild"),a=17,s=n.createClass({transition:function(t,e){var n=this.getDOMNode(),i=this.props.name+"-"+t,a=i+"-active",s=function(){o.removeClass(n,i),o.removeClass(n,a),r.removeEndEventListener(n,s),e&&e()};r.addEndEventListener(n,s),o.addClass(n,i),this.queueClass(a)},queueClass:function(t){return this.classNameQueue.push(t),this.props.runNextTick?void this.props.runNextTick(this.flushClassNameQueue):void(this.timeout||(this.timeout=setTimeout(this.flushClassNameQueue,a)))},flushClassNameQueue:function(){this.isMounted()&&this.classNameQueue.forEach(o.addClass.bind(o,this.getDOMNode())),this.classNameQueue.length=0,this.timeout=null},componentWillMount:function(){this.classNameQueue=[]},componentWillUnmount:function(){this.timeout&&clearTimeout(this.timeout)},componentWillEnter:function(t){this.props.enter?this.transition("enter",t):t()},componentWillLeave:function(t){this.props.leave?this.transition("leave",t):t()},render:function(){return i(this.props.children)}});e.exports=s},{"./CSSCore":2,"./React":26,"./ReactTransitionEvents":76,"./onlyChild":138}],30:[function(t,e){"use strict";function n(t,e){this.forEachFunction=t,this.forEachContext=e}function o(t,e,n,o){var r=t;r.forEachFunction.call(r.forEachContext,e,o)}function r(t,e,r){if(null==t)return t;var i=n.getPooled(e,r);l(t,o,i),n.release(i)}function i(t,e,n){this.mapResult=t,this.mapFunction=e,this.mapContext=n}function a(t,e,n,o){var r=t,i=r.mapResult,a=r.mapFunction.call(r.mapContext,e,o);c(!i.hasOwnProperty(n)),i[n]=a}function s(t,e,n){if(null==t)return t;var o={},r=i.getPooled(o,e,n);return l(t,a,r),i.release(r),o}var u=t("./PooledClass"),c=t("./invariant"),l=t("./traverseAllChildren"),p=u.twoArgumentPooler,d=u.threeArgumentPooler;u.addPoolingTo(n,p),u.addPoolingTo(i,d);var h={forEach:r,map:s};e.exports=h},{"./PooledClass":25,"./invariant":122,"./traverseAllChildren":142}],31:[function(t,e){"use strict";var n=t("./ReactCurrentOwner"),o=t("./ReactOwner"),r=t("./ReactUpdates"),i=t("./invariant"),a=t("./keyMirror"),s=t("./merge"),u=(t("./monitorCodeUse"),a({MOUNTED:null,UNMOUNTED:null})),c=!1,l=null,p=null,d={injection:{injectEnvironment:function(t){i(!c),p=t.mountImageIntoNode,l=t.unmountIDFromEnvironment,d.BackendIDOperations=t.BackendIDOperations,d.ReactReconcileTransaction=t.ReactReconcileTransaction,c=!0}},isValidComponent:function(t){if(!t||!t.type||!t.type.prototype)return!1;var e=t.type.prototype;return"function"==typeof e.mountComponentIntoNode&&"function"==typeof e.receiveComponent},LifeCycle:u,BackendIDOperations:null,ReactReconcileTransaction:null,Mixin:{isMounted:function(){return this._lifeCycleState===u.MOUNTED},setProps:function(t,e){this.replaceProps(s(this._pendingProps||this.props,t),e)},replaceProps:function(t,e){i(this.isMounted()),i(0===this._mountDepth),this._pendingProps=t,r.enqueueUpdate(this,e)
},construct:function(t,e){this.props=t||{},this._owner=n.current,this._lifeCycleState=u.UNMOUNTED,this._pendingProps=null,this._pendingCallbacks=null,this._pendingOwner=this._owner;var o=arguments.length-1;if(1===o)this.props.children=e;else if(o>1){for(var r=Array(o),i=0;o>i;i++)r[i]=arguments[i+1];this.props.children=r}},mountComponent:function(t,e,n){i(!this.isMounted());var r=this.props;null!=r.ref&&o.addComponentAsRefTo(this,r.ref,this._owner),this._rootNodeID=t,this._lifeCycleState=u.MOUNTED,this._mountDepth=n},unmountComponent:function(){i(this.isMounted());var t=this.props;null!=t.ref&&o.removeComponentAsRefFrom(this,t.ref,this._owner),l(this._rootNodeID),this._rootNodeID=null,this._lifeCycleState=u.UNMOUNTED},receiveComponent:function(t,e){i(this.isMounted()),this._pendingOwner=t._owner,this._pendingProps=t.props,this._performUpdateIfNecessary(e)},performUpdateIfNecessary:function(){var t=d.ReactReconcileTransaction.getPooled();t.perform(this._performUpdateIfNecessary,this,t),d.ReactReconcileTransaction.release(t)},_performUpdateIfNecessary:function(t){if(null!=this._pendingProps){var e=this.props,n=this._owner;this.props=this._pendingProps,this._owner=this._pendingOwner,this._pendingProps=null,this.updateComponent(t,e,n)}},updateComponent:function(t,e,n){var r=this.props;(this._owner!==n||r.ref!==e.ref)&&(null!=e.ref&&o.removeComponentAsRefFrom(this,e.ref,n),null!=r.ref&&o.addComponentAsRefTo(this,r.ref,this._owner))},mountComponentIntoNode:function(t,e,n){var o=d.ReactReconcileTransaction.getPooled();o.perform(this._mountComponentIntoNode,this,t,e,o,n),d.ReactReconcileTransaction.release(o)},_mountComponentIntoNode:function(t,e,n,o){var r=this.mountComponent(t,n,0);p(r,e,o)},isOwnedBy:function(t){return this._owner===t},getSiblingByRef:function(t){var e=this._owner;return e&&e.refs?e.refs[t]:null}}};e.exports=d},{"./ReactCurrentOwner":35,"./ReactOwner":62,"./ReactUpdates":78,"./invariant":122,"./keyMirror":128,"./merge":131,"./monitorCodeUse":135}],32:[function(t,e){"use strict";var n=t("./ReactDOMIDOperations"),o=t("./ReactMarkupChecksum"),r=t("./ReactMount"),i=t("./ReactPerf"),a=t("./ReactReconcileTransaction"),s=t("./getReactRootElementInContainer"),u=t("./invariant"),c=1,l=9,p={ReactReconcileTransaction:a,BackendIDOperations:n,unmountIDFromEnvironment:function(t){r.purgeID(t)},mountImageIntoNode:i.measure("ReactComponentBrowserEnvironment","mountImageIntoNode",function(t,e,n){if(u(e&&(e.nodeType===c||e.nodeType===l)),n){if(o.canReuseMarkup(t,s(e)))return;u(e.nodeType!==l)}u(e.nodeType!==l),e.innerHTML=t})};e.exports=p},{"./ReactDOMIDOperations":40,"./ReactMarkupChecksum":57,"./ReactMount":58,"./ReactPerf":63,"./ReactReconcileTransaction":69,"./getReactRootElementInContainer":117,"./invariant":122}],33:[function(t,e){"use strict";function n(t,e){for(var n in e)e.hasOwnProperty(n)&&R("function"==typeof e[n])}function o(t,e){var n=S[e];_.hasOwnProperty(e)&&R(n===b.OVERRIDE_BASE),t.hasOwnProperty(e)&&R(n===b.DEFINE_MANY||n===b.DEFINE_MANY_MERGED)}function r(t){var e=t._compositeLifeCycleState;R(t.isMounted()||e===I.MOUNTING),R(e!==I.RECEIVING_STATE),R(e!==I.UNMOUNTING)}function i(t,e){R(!l(e)),R(!p.isValidComponent(e));var n=t.componentConstructor,r=n.prototype;for(var i in e){var a=e[i];if(e.hasOwnProperty(i))if(o(r,i),N.hasOwnProperty(i))N[i](t,a);else{var s=i in S,d=i in r,h=a&&a.__reactDontBind,f="function"==typeof a,m=f&&!s&&!d&&!h;m?(r.__reactAutoBindMap||(r.__reactAutoBindMap={}),r.__reactAutoBindMap[i]=a,r[i]=a):r[i]=d?S[i]===b.DEFINE_MANY_MERGED?u(r[i],a):c(r[i],a):a}}}function a(t,e){if(e)for(var n in e){var o=e[n];if(!e.hasOwnProperty(n))return;var r=n in t,i=o;if(r){var a=t[n],s=typeof a,u=typeof o;R("function"===s&&"function"===u),i=c(a,o)}t[n]=i,t.componentConstructor[n]=i}}function s(t,e){return R(t&&e&&"object"==typeof t&&"object"==typeof e),P(e,function(e,n){R(void 0===t[n]),t[n]=e}),t}function u(t,e){return function(){var n=t.apply(this,arguments),o=e.apply(this,arguments);return null==n?o:null==o?n:s(n,o)}}function c(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function l(t){return t instanceof Function&&"componentConstructor"in t&&t.componentConstructor instanceof Function}var p=t("./ReactComponent"),d=t("./ReactContext"),h=t("./ReactCurrentOwner"),f=t("./ReactErrorUtils"),m=t("./ReactOwner"),v=t("./ReactPerf"),g=t("./ReactPropTransferer"),y=t("./ReactPropTypeLocations"),C=(t("./ReactPropTypeLocationNames"),t("./ReactUpdates")),E=t("./instantiateReactComponent"),R=t("./invariant"),M=t("./keyMirror"),D=t("./merge"),x=t("./mixInto"),P=(t("./monitorCodeUse"),t("./objMap")),T=t("./shouldUpdateReactComponent"),b=(t("./warning"),M({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null})),O=[],S={mixins:b.DEFINE_MANY,statics:b.DEFINE_MANY,propTypes:b.DEFINE_MANY,contextTypes:b.DEFINE_MANY,childContextTypes:b.DEFINE_MANY,getDefaultProps:b.DEFINE_MANY_MERGED,getInitialState:b.DEFINE_MANY_MERGED,getChildContext:b.DEFINE_MANY_MERGED,render:b.DEFINE_ONCE,componentWillMount:b.DEFINE_MANY,componentDidMount:b.DEFINE_MANY,componentWillReceiveProps:b.DEFINE_MANY,shouldComponentUpdate:b.DEFINE_ONCE,componentWillUpdate:b.DEFINE_MANY,componentDidUpdate:b.DEFINE_MANY,componentWillUnmount:b.DEFINE_MANY,updateComponent:b.OVERRIDE_BASE},N={displayName:function(t,e){t.componentConstructor.displayName=e},mixins:function(t,e){if(e)for(var n=0;n<e.length;n++)i(t,e[n])},childContextTypes:function(t,e){var o=t.componentConstructor;n(o,e,y.childContext),o.childContextTypes=D(o.childContextTypes,e)},contextTypes:function(t,e){var o=t.componentConstructor;n(o,e,y.context),o.contextTypes=D(o.contextTypes,e)},propTypes:function(t,e){var o=t.componentConstructor;n(o,e,y.prop),o.propTypes=D(o.propTypes,e)},statics:function(t,e){a(t,e)}},I=M({MOUNTING:null,UNMOUNTING:null,RECEIVING_PROPS:null,RECEIVING_STATE:null}),_={construct:function(){p.Mixin.construct.apply(this,arguments),m.Mixin.construct.apply(this,arguments),this.state=null,this._pendingState=null,this.context=null,this._currentContext=d.current,this._pendingContext=null,this._descriptor=null,this._compositeLifeCycleState=null},toJSON:function(){return{type:this.type,props:this.props}},isMounted:function(){return p.Mixin.isMounted.call(this)&&this._compositeLifeCycleState!==I.MOUNTING},mountComponent:v.measure("ReactCompositeComponent","mountComponent",function(t,e,n){p.Mixin.mountComponent.call(this,t,e,n),this._compositeLifeCycleState=I.MOUNTING,this.context=this._processContext(this._currentContext),this._defaultProps=this.getDefaultProps?this.getDefaultProps():null,this.props=this._processProps(this.props),this.__reactAutoBindMap&&this._bindAutoBindMethods(),this.state=this.getInitialState?this.getInitialState():null,R("object"==typeof this.state&&!Array.isArray(this.state)),this._pendingState=null,this._pendingForceUpdate=!1,this.componentWillMount&&(this.componentWillMount(),this._pendingState&&(this.state=this._pendingState,this._pendingState=null)),this._renderedComponent=E(this._renderValidatedComponent()),this._compositeLifeCycleState=null;var o=this._renderedComponent.mountComponent(t,e,n+1);return this.componentDidMount&&e.getReactMountReady().enqueue(this,this.componentDidMount),o}),unmountComponent:function(){this._compositeLifeCycleState=I.UNMOUNTING,this.componentWillUnmount&&this.componentWillUnmount(),this._compositeLifeCycleState=null,this._defaultProps=null,this._renderedComponent.unmountComponent(),this._renderedComponent=null,p.Mixin.unmountComponent.call(this)},setState:function(t,e){R("object"==typeof t||null==t),this.replaceState(D(this._pendingState||this.state,t),e)},replaceState:function(t,e){r(this),this._pendingState=t,C.enqueueUpdate(this,e)},_processContext:function(t){var e=null,n=this.constructor.contextTypes;if(n){e={};for(var o in n)e[o]=t[o]}return e},_processChildContext:function(t){var e=this.getChildContext&&this.getChildContext();if(this.constructor.displayName||"ReactCompositeComponent",e){R("object"==typeof this.constructor.childContextTypes);for(var n in e)R(n in this.constructor.childContextTypes);return D(t,e)}return t},_processProps:function(t){var e=D(t),n=this._defaultProps;for(var o in n)"undefined"==typeof e[o]&&(e[o]=n[o]);return e},_checkPropTypes:function(t,e,n){var o=this.constructor.displayName;for(var r in t)t.hasOwnProperty(r)&&t[r](e,r,o,n)},performUpdateIfNecessary:function(){var t=this._compositeLifeCycleState;t!==I.MOUNTING&&t!==I.RECEIVING_PROPS&&p.Mixin.performUpdateIfNecessary.call(this)},_performUpdateIfNecessary:function(t){if(null!=this._pendingProps||null!=this._pendingState||null!=this._pendingContext||this._pendingForceUpdate){var e=this._pendingContext||this._currentContext,n=this._processContext(e);this._pendingContext=null;var o=this.props;null!=this._pendingProps&&(o=this._processProps(this._pendingProps),this._pendingProps=null,this._compositeLifeCycleState=I.RECEIVING_PROPS,this.componentWillReceiveProps&&this.componentWillReceiveProps(o,n)),this._compositeLifeCycleState=I.RECEIVING_STATE;var r=this._pendingOwner,i=this._pendingState||this.state;this._pendingState=null;try{this._pendingForceUpdate||!this.shouldComponentUpdate||this.shouldComponentUpdate(o,i,n)?(this._pendingForceUpdate=!1,this._performComponentUpdate(o,r,i,e,n,t)):(this.props=o,this._owner=r,this.state=i,this._currentContext=e,this.context=n)}finally{this._compositeLifeCycleState=null}}},_performComponentUpdate:function(t,e,n,o,r,i){var a=this.props,s=this._owner,u=this.state,c=this.context;this.componentWillUpdate&&this.componentWillUpdate(t,n,r),this.props=t,this._owner=e,this.state=n,this._currentContext=o,this.context=r,this.updateComponent(i,a,s,u,c),this.componentDidUpdate&&i.getReactMountReady().enqueue(this,this.componentDidUpdate.bind(this,a,u,c))},receiveComponent:function(t,e){t!==this._descriptor&&(this._descriptor=t,this._pendingContext=t._currentContext,p.Mixin.receiveComponent.call(this,t,e))},updateComponent:v.measure("ReactCompositeComponent","updateComponent",function(t,e,n){p.Mixin.updateComponent.call(this,t,e,n);var o=this._renderedComponent,r=this._renderValidatedComponent();if(T(o,r))o.receiveComponent(r,t);else{var i=this._rootNodeID,a=o._rootNodeID;o.unmountComponent(),this._renderedComponent=E(r);var s=this._renderedComponent.mountComponent(i,t,this._mountDepth+1);p.BackendIDOperations.dangerouslyReplaceNodeWithMarkupByID(a,s)}}),forceUpdate:function(t){var e=this._compositeLifeCycleState;R(this.isMounted()||e===I.MOUNTING),R(e!==I.RECEIVING_STATE&&e!==I.UNMOUNTING),this._pendingForceUpdate=!0,C.enqueueUpdate(this,t)},_renderValidatedComponent:v.measure("ReactCompositeComponent","_renderValidatedComponent",function(){var t,e=d.current;d.current=this._processChildContext(this._currentContext),h.current=this;try{t=this.render()}finally{d.current=e,h.current=null}return R(p.isValidComponent(t)),t}),_bindAutoBindMethods:function(){for(var t in this.__reactAutoBindMap)if(this.__reactAutoBindMap.hasOwnProperty(t)){var e=this.__reactAutoBindMap[t];this[t]=this._bindAutoBindMethod(f.guard(e,this.constructor.displayName+"."+t))}},_bindAutoBindMethod:function(t){var e=this,n=function(){return t.apply(e,arguments)};return n}},w=function(){};x(w,p.Mixin),x(w,m.Mixin),x(w,g.Mixin),x(w,_);var A={LifeCycle:I,Base:w,createClass:function(t){var e=function(){};e.prototype=new w,e.prototype.constructor=e;var n=e,o=function(){var t=new n;return t.construct.apply(t,arguments),t};o.componentConstructor=e,e.ConvenienceConstructor=o,o.originalSpec=t,O.forEach(i.bind(null,o)),i(o,t),R(e.prototype.render),o.type=e,e.prototype.type=e;for(var r in S)e.prototype[r]||(e.prototype[r]=null);return o},isValidClass:l,injection:{injectMixin:function(t){O.push(t)}}};e.exports=A},{"./ReactComponent":31,"./ReactContext":34,"./ReactCurrentOwner":35,"./ReactErrorUtils":49,"./ReactOwner":62,"./ReactPerf":63,"./ReactPropTransferer":64,"./ReactPropTypeLocationNames":65,"./ReactPropTypeLocations":66,"./ReactUpdates":78,"./instantiateReactComponent":121,"./invariant":122,"./keyMirror":128,"./merge":131,"./mixInto":134,"./monitorCodeUse":135,"./objMap":136,"./shouldUpdateReactComponent":140,"./warning":144}],34:[function(t,e){"use strict";var n=t("./merge"),o={current:{},withContext:function(t,e){var r,i=o.current;o.current=n(i,t);try{r=e()}finally{o.current=i}return r}};e.exports=o},{"./merge":131}],35:[function(t,e){"use strict";var n={current:null};e.exports=n},{}],36:[function(t,e){"use strict";function n(t,e){var n=function(){};n.prototype=new o(t,e),n.prototype.constructor=n,n.displayName=t;var r=function(){var t=new n;return t.construct.apply(t,arguments),t};return r.type=n,n.prototype.type=n,n.ConvenienceConstructor=r,r.componentConstructor=n,r}var o=t("./ReactDOMComponent"),r=t("./mergeInto"),i=t("./objMapKeyVal"),a=i({a:!1,abbr:!1,address:!1,area:!0,article:!1,aside:!1,audio:!1,b:!1,base:!0,bdi:!1,bdo:!1,big:!1,blockquote:!1,body:!1,br:!0,button:!1,canvas:!1,caption:!1,cite:!1,code:!1,col:!0,colgroup:!1,data:!1,datalist:!1,dd:!1,del:!1,details:!1,dfn:!1,div:!1,dl:!1,dt:!1,em:!1,embed:!0,fieldset:!1,figcaption:!1,figure:!1,footer:!1,form:!1,h1:!1,h2:!1,h3:!1,h4:!1,h5:!1,h6:!1,head:!1,header:!1,hr:!0,html:!1,i:!1,iframe:!1,img:!0,input:!0,ins:!1,kbd:!1,keygen:!0,label:!1,legend:!1,li:!1,link:!0,main:!1,map:!1,mark:!1,menu:!1,menuitem:!1,meta:!0,meter:!1,nav:!1,noscript:!1,object:!1,ol:!1,optgroup:!1,option:!1,output:!1,p:!1,param:!0,pre:!1,progress:!1,q:!1,rp:!1,rt:!1,ruby:!1,s:!1,samp:!1,script:!1,section:!1,select:!1,small:!1,source:!0,span:!1,strong:!1,style:!1,sub:!1,summary:!1,sup:!1,table:!1,tbody:!1,td:!1,textarea:!1,tfoot:!1,th:!1,thead:!1,time:!1,title:!1,tr:!1,track:!0,u:!1,ul:!1,"var":!1,video:!1,wbr:!0,circle:!1,defs:!1,g:!1,line:!1,linearGradient:!1,path:!1,polygon:!1,polyline:!1,radialGradient:!1,rect:!1,stop:!1,svg:!1,text:!1},n),s={injectComponentClasses:function(t){r(a,t)}};a.injection=s,e.exports=a},{"./ReactDOMComponent":38,"./mergeInto":133,"./objMapKeyVal":137}],37:[function(t,e){"use strict";var n=t("./AutoFocusMixin"),o=t("./ReactBrowserComponentMixin"),r=t("./ReactCompositeComponent"),i=t("./ReactDOM"),a=t("./keyMirror"),s=i.button,u=a({onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0}),c=r.createClass({displayName:"ReactDOMButton",mixins:[n,o],render:function(){var t={};for(var e in this.props)!this.props.hasOwnProperty(e)||this.props.disabled&&u[e]||(t[e]=this.props[e]);return s(t,this.props.children)}});e.exports=c},{"./AutoFocusMixin":1,"./ReactBrowserComponentMixin":27,"./ReactCompositeComponent":33,"./ReactDOM":36,"./keyMirror":128}],38:[function(t,e){"use strict";function n(t){t&&(m(null==t.children||null==t.dangerouslySetInnerHTML),m(null==t.style||"object"==typeof t.style))}function o(t,e,n,o){var r=p.findReactContainerForID(t);if(r){var i=r.nodeType===x?r.ownerDocument:r;E(e,i)}o.getPutListenerQueue().enqueuePutListener(t,e,n)}function r(t,e){this._tagOpen="<"+t,this._tagClose=e?"":"</"+t+">",this.tagName=t.toUpperCase()}var i=t("./CSSPropertyOperations"),a=t("./DOMProperty"),s=t("./DOMPropertyOperations"),u=t("./ReactBrowserComponentMixin"),c=t("./ReactComponent"),l=t("./ReactEventEmitter"),p=t("./ReactMount"),d=t("./ReactMultiChild"),h=t("./ReactPerf"),f=t("./escapeTextForBrowser"),m=t("./invariant"),v=t("./keyOf"),g=t("./merge"),y=t("./mixInto"),C=l.deleteListener,E=l.listenTo,R=l.registrationNameModules,M={string:!0,number:!0},D=v({style:null}),x=1;r.Mixin={mountComponent:h.measure("ReactDOMComponent","mountComponent",function(t,e,o){return c.Mixin.mountComponent.call(this,t,e,o),n(this.props),this._createOpenTagMarkupAndPutListeners(e)+this._createContentMarkup(e)+this._tagClose}),_createOpenTagMarkupAndPutListeners:function(t){var e=this.props,n=this._tagOpen;for(var r in e)if(e.hasOwnProperty(r)){var a=e[r];if(null!=a)if(R[r])o(this._rootNodeID,r,a,t);else{r===D&&(a&&(a=e.style=g(e.style)),a=i.createMarkupForStyles(a));var u=s.createMarkupForProperty(r,a);u&&(n+=" "+u)}}if(t.renderToStaticMarkup)return n+">";var c=s.createMarkupForID(this._rootNodeID);return n+" "+c+">"},_createContentMarkup:function(t){var e=this.props.dangerouslySetInnerHTML;if(null!=e){if(null!=e.__html)return e.__html}else{var n=M[typeof this.props.children]?this.props.children:null,o=null!=n?null:this.props.children;if(null!=n)return f(n);if(null!=o){var r=this.mountChildren(o,t);return r.join("")}}return""},receiveComponent:function(t,e){t!==this&&(n(t.props),c.Mixin.receiveComponent.call(this,t,e))},updateComponent:h.measure("ReactDOMComponent","updateComponent",function(t,e,n){c.Mixin.updateComponent.call(this,t,e,n),this._updateDOMProperties(e,t),this._updateDOMChildren(e,t)}),_updateDOMProperties:function(t,e){var n,r,i,s=this.props;for(n in t)if(!s.hasOwnProperty(n)&&t.hasOwnProperty(n))if(n===D){var u=t[n];for(r in u)u.hasOwnProperty(r)&&(i=i||{},i[r]="")}else R[n]?C(this._rootNodeID,n):(a.isStandardName[n]||a.isCustomAttribute(n))&&c.BackendIDOperations.deletePropertyByID(this._rootNodeID,n);for(n in s){var l=s[n],p=t[n];if(s.hasOwnProperty(n)&&l!==p)if(n===D)if(l&&(l=s.style=g(l)),p){for(r in p)p.hasOwnProperty(r)&&!l.hasOwnProperty(r)&&(i=i||{},i[r]="");for(r in l)l.hasOwnProperty(r)&&p[r]!==l[r]&&(i=i||{},i[r]=l[r])}else i=l;else R[n]?o(this._rootNodeID,n,l,e):(a.isStandardName[n]||a.isCustomAttribute(n))&&c.BackendIDOperations.updatePropertyByID(this._rootNodeID,n,l)}i&&c.BackendIDOperations.updateStylesByID(this._rootNodeID,i)},_updateDOMChildren:function(t,e){var n=this.props,o=M[typeof t.children]?t.children:null,r=M[typeof n.children]?n.children:null,i=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,a=n.dangerouslySetInnerHTML&&n.dangerouslySetInnerHTML.__html,s=null!=o?null:t.children,u=null!=r?null:n.children,l=null!=o||null!=i,p=null!=r||null!=a;null!=s&&null==u?this.updateChildren(null,e):l&&!p&&this.updateTextContent(""),null!=r?o!==r&&this.updateTextContent(""+r):null!=a?i!==a&&c.BackendIDOperations.updateInnerHTMLByID(this._rootNodeID,a):null!=u&&this.updateChildren(u,e)},unmountComponent:function(){this.unmountChildren(),l.deleteAllListeners(this._rootNodeID),c.Mixin.unmountComponent.call(this)}},y(r,c.Mixin),y(r,r.Mixin),y(r,d.Mixin),y(r,u),e.exports=r},{"./CSSPropertyOperations":4,"./DOMProperty":9,"./DOMPropertyOperations":10,"./ReactBrowserComponentMixin":27,"./ReactComponent":31,"./ReactEventEmitter":50,"./ReactMount":58,"./ReactMultiChild":60,"./ReactPerf":63,"./escapeTextForBrowser":108,"./invariant":122,"./keyOf":129,"./merge":131,"./mixInto":134}],39:[function(t,e){"use strict";var n=t("./ReactBrowserComponentMixin"),o=t("./ReactCompositeComponent"),r=t("./ReactDOM"),i=t("./ReactEventEmitter"),a=t("./EventConstants"),s=r.form,u=o.createClass({displayName:"ReactDOMForm",mixins:[n],render:function(){return this.transferPropsTo(s(null,this.props.children))},componentDidMount:function(){i.trapBubbledEvent(a.topLevelTypes.topReset,"reset",this.getDOMNode()),i.trapBubbledEvent(a.topLevelTypes.topSubmit,"submit",this.getDOMNode())}});e.exports=u},{"./EventConstants":15,"./ReactBrowserComponentMixin":27,"./ReactCompositeComponent":33,"./ReactDOM":36,"./ReactEventEmitter":50}],40:[function(t,e){"use strict";var n,o=t("./CSSPropertyOperations"),r=t("./DOMChildrenOperations"),i=t("./DOMPropertyOperations"),a=t("./ReactMount"),s=t("./ReactPerf"),u=t("./invariant"),c={dangerouslySetInnerHTML:"`dangerouslySetInnerHTML` must be set using `updateInnerHTMLByID()`.",style:"`style` must be set using `updateStylesByID()`."},l={updatePropertyByID:s.measure("ReactDOMIDOperations","updatePropertyByID",function(t,e,n){var o=a.getNode(t);u(!c.hasOwnProperty(e)),null!=n?i.setValueForProperty(o,e,n):i.deleteValueForProperty(o,e)}),deletePropertyByID:s.measure("ReactDOMIDOperations","deletePropertyByID",function(t,e,n){var o=a.getNode(t);u(!c.hasOwnProperty(e)),i.deleteValueForProperty(o,e,n)}),updateStylesByID:s.measure("ReactDOMIDOperations","updateStylesByID",function(t,e){var n=a.getNode(t);o.setValueForStyles(n,e)}),updateInnerHTMLByID:s.measure("ReactDOMIDOperations","updateInnerHTMLByID",function(t,e){var o=a.getNode(t);if(void 0===n){var r=document.createElement("div");r.innerHTML=" ",n=""===r.innerHTML}n&&o.parentNode.replaceChild(o,o),n&&e.match(/^[ \r\n\t\f]/)?(o.innerHTML=""+e,o.firstChild.deleteData(0,1)):o.innerHTML=e}),updateTextContentByID:s.measure("ReactDOMIDOperations","updateTextContentByID",function(t,e){var n=a.getNode(t);r.updateTextContent(n,e)}),dangerouslyReplaceNodeWithMarkupByID:s.measure("ReactDOMIDOperations","dangerouslyReplaceNodeWithMarkupByID",function(t,e){var n=a.getNode(t);r.dangerouslyReplaceNodeWithMarkup(n,e)}),dangerouslyProcessChildrenUpdates:s.measure("ReactDOMIDOperations","dangerouslyProcessChildrenUpdates",function(t,e){for(var n=0;n<t.length;n++)t[n].parentNode=a.getNode(t[n].parentID);r.processUpdates(t,e)})};e.exports=l},{"./CSSPropertyOperations":4,"./DOMChildrenOperations":8,"./DOMPropertyOperations":10,"./ReactMount":58,"./ReactPerf":63,"./invariant":122}],41:[function(t,e){"use strict";var n=t("./ReactBrowserComponentMixin"),o=t("./ReactCompositeComponent"),r=t("./ReactDOM"),i=t("./ReactEventEmitter"),a=t("./EventConstants"),s=r.img,u=o.createClass({displayName:"ReactDOMImg",tagName:"IMG",mixins:[n],render:function(){return s(this.props)},componentDidMount:function(){var t=this.getDOMNode();i.trapBubbledEvent(a.topLevelTypes.topLoad,"load",t),i.trapBubbledEvent(a.topLevelTypes.topError,"error",t)}});e.exports=u},{"./EventConstants":15,"./ReactBrowserComponentMixin":27,"./ReactCompositeComponent":33,"./ReactDOM":36,"./ReactEventEmitter":50}],42:[function(t,e){"use strict";var n=t("./AutoFocusMixin"),o=t("./DOMPropertyOperations"),r=t("./LinkedValueUtils"),i=t("./ReactBrowserComponentMixin"),a=t("./ReactCompositeComponent"),s=t("./ReactDOM"),u=t("./ReactMount"),c=t("./invariant"),l=t("./merge"),p=s.input,d={},h=a.createClass({displayName:"ReactDOMInput",mixins:[n,r.Mixin,i],getInitialState:function(){var t=this.props.defaultValue;return{checked:this.props.defaultChecked||!1,value:null!=t?t:null}},shouldComponentUpdate:function(){return!this._isChanging},render:function(){var t=l(this.props);t.defaultChecked=null,t.defaultValue=null;var e=r.getValue(this);t.value=null!=e?e:this.state.value;var n=r.getChecked(this);return t.checked=null!=n?n:this.state.checked,t.onChange=this._handleChange,p(t,this.props.children)},componentDidMount:function(){var t=u.getID(this.getDOMNode());d[t]=this},componentWillUnmount:function(){var t=this.getDOMNode(),e=u.getID(t);delete d[e]},componentDidUpdate:function(){var t=this.getDOMNode();null!=this.props.checked&&o.setValueForProperty(t,"checked",this.props.checked||!1);var e=r.getValue(this);null!=e&&o.setValueForProperty(t,"value",""+e)},_handleChange:function(t){var e,n=r.getOnChange(this);n&&(this._isChanging=!0,e=n.call(this,t),this._isChanging=!1),this.setState({checked:t.target.checked,value:t.target.value});var o=this.props.name;if("radio"===this.props.type&&null!=o){for(var i=this.getDOMNode(),a=i;a.parentNode;)a=a.parentNode;for(var s=a.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),l=0,p=s.length;p>l;l++){var h=s[l];if(h!==i&&h.form===i.form){var f=u.getID(h);c(f);var m=d[f];c(m),m.setState({checked:!1})}}}return e}});e.exports=h},{"./AutoFocusMixin":1,"./DOMPropertyOperations":10,"./LinkedValueUtils":23,"./ReactBrowserComponentMixin":27,"./ReactCompositeComponent":33,"./ReactDOM":36,"./ReactMount":58,"./invariant":122,"./merge":131}],43:[function(t,e){"use strict";var n=t("./ReactBrowserComponentMixin"),o=t("./ReactCompositeComponent"),r=t("./ReactDOM"),i=(t("./warning"),r.option),a=o.createClass({displayName:"ReactDOMOption",mixins:[n],componentWillMount:function(){},render:function(){return i(this.props,this.props.children)}});e.exports=a},{"./ReactBrowserComponentMixin":27,"./ReactCompositeComponent":33,"./ReactDOM":36,"./warning":144}],44:[function(t,e){"use strict";function n(t,e){null!=t[e]&&c(t.multiple?Array.isArray(t[e]):!Array.isArray(t[e]))}function o(t,e){var n,o,r,i=t.props.multiple,a=null!=e?e:t.state.value,s=t.getDOMNode().options;if(i)for(n={},o=0,r=a.length;r>o;++o)n[""+a[o]]=!0;else n=""+a;for(o=0,r=s.length;r>o;o++){var u=i?n.hasOwnProperty(s[o].value):s[o].value===n;u!==s[o].selected&&(s[o].selected=u)}}var r=t("./AutoFocusMixin"),i=t("./LinkedValueUtils"),a=t("./ReactBrowserComponentMixin"),s=t("./ReactCompositeComponent"),u=t("./ReactDOM"),c=t("./invariant"),l=t("./merge"),p=u.select,d=s.createClass({displayName:"ReactDOMSelect",mixins:[r,i.Mixin,a],propTypes:{defaultValue:n,value:n},getInitialState:function(){return{value:this.props.defaultValue||(this.props.multiple?[]:"")}},componentWillReceiveProps:function(t){!this.props.multiple&&t.multiple?this.setState({value:[this.state.value]}):this.props.multiple&&!t.multiple&&this.setState({value:this.state.value[0]})},shouldComponentUpdate:function(){return!this._isChanging},render:function(){var t=l(this.props);return t.onChange=this._handleChange,t.value=null,p(t,this.props.children)},componentDidMount:function(){o(this,i.getValue(this))},componentDidUpdate:function(){var t=i.getValue(this);null!=t&&o(this,t)},_handleChange:function(t){var e,n=i.getOnChange(this);n&&(this._isChanging=!0,e=n.call(this,t),this._isChanging=!1);var o;if(this.props.multiple){o=[];for(var r=t.target.options,a=0,s=r.length;s>a;a++)r[a].selected&&o.push(r[a].value)}else o=t.target.value;return this.setState({value:o}),e}});e.exports=d},{"./AutoFocusMixin":1,"./LinkedValueUtils":23,"./ReactBrowserComponentMixin":27,"./ReactCompositeComponent":33,"./ReactDOM":36,"./invariant":122,"./merge":131}],45:[function(t,e){"use strict";function n(t){var e=document.selection,n=e.createRange(),o=n.text.length,r=n.duplicate();r.moveToElementText(t),r.setEndPoint("EndToStart",n);var i=r.text.length,a=i+o;return{start:i,end:a}}function o(t){var e=window.getSelection();if(0===e.rangeCount)return null;var n=e.anchorNode,o=e.anchorOffset,r=e.focusNode,i=e.focusOffset,a=e.getRangeAt(0),s=a.toString().length,u=a.cloneRange();u.selectNodeContents(t),u.setEnd(a.startContainer,a.startOffset);var c=u.toString().length,l=c+s,p=document.createRange();p.setStart(n,o),p.setEnd(r,i);var d=p.collapsed;return p.detach(),{start:d?l:c,end:d?c:l}}function r(t,e){var n,o,r=document.selection.createRange().duplicate();"undefined"==typeof e.end?(n=e.start,o=n):e.start>e.end?(n=e.end,o=e.start):(n=e.start,o=e.end),r.moveToElementText(t),r.moveStart("character",n),r.setEndPoint("EndToStart",r),r.moveEnd("character",o-n),r.select()}function i(t,e){var n=window.getSelection(),o=t[s()].length,r=Math.min(e.start,o),i="undefined"==typeof e.end?r:Math.min(e.end,o);if(!n.extend&&r>i){var u=i;i=r,r=u}var c=a(t,r),l=a(t,i);if(c&&l){var p=document.createRange();p.setStart(c.node,c.offset),n.removeAllRanges(),r>i?(n.addRange(p),n.extend(l.node,l.offset)):(p.setEnd(l.node,l.offset),n.addRange(p)),p.detach()}}var a=t("./getNodeForCharacterOffset"),s=t("./getTextContentAccessor"),u={getOffsets:function(t){var e=document.selection?n:o;return e(t)},setOffsets:function(t,e){var n=document.selection?r:i;n(t,e)}};e.exports=u},{"./getNodeForCharacterOffset":116,"./getTextContentAccessor":118}],46:[function(t,e){"use strict";var n=t("./AutoFocusMixin"),o=t("./DOMPropertyOperations"),r=t("./LinkedValueUtils"),i=t("./ReactBrowserComponentMixin"),a=t("./ReactCompositeComponent"),s=t("./ReactDOM"),u=t("./invariant"),c=t("./merge"),l=(t("./warning"),s.textarea),p=a.createClass({displayName:"ReactDOMTextarea",mixins:[n,r.Mixin,i],getInitialState:function(){var t=this.props.defaultValue,e=this.props.children;null!=e&&(u(null==t),Array.isArray(e)&&(u(e.length<=1),e=e[0]),t=""+e),null==t&&(t="");var n=r.getValue(this);return{initialValue:""+(null!=n?n:t),value:t}},shouldComponentUpdate:function(){return!this._isChanging},render:function(){var t=c(this.props),e=r.getValue(this);return u(null==t.dangerouslySetInnerHTML),t.defaultValue=null,t.value=null!=e?e:this.state.value,t.onChange=this._handleChange,l(t,this.state.initialValue)},componentDidUpdate:function(){var t=r.getValue(this);if(null!=t){var e=this.getDOMNode();o.setValueForProperty(e,"value",""+t)}},_handleChange:function(t){var e,n=r.getOnChange(this);return n&&(this._isChanging=!0,e=n.call(this,t),this._isChanging=!1),this.setState({value:t.target.value}),e}});e.exports=p},{"./AutoFocusMixin":1,"./DOMPropertyOperations":10,"./LinkedValueUtils":23,"./ReactBrowserComponentMixin":27,"./ReactCompositeComponent":33,"./ReactDOM":36,"./invariant":122,"./merge":131,"./warning":144}],47:[function(t,e){"use strict";function n(){this.reinitializeTransaction()}var o=t("./ReactUpdates"),r=t("./Transaction"),i=t("./emptyFunction"),a=t("./mixInto"),s={initialize:i,close:function(){p.isBatchingUpdates=!1}},u={initialize:i,close:o.flushBatchedUpdates.bind(o)},c=[u,s];a(n,r.Mixin),a(n,{getTransactionWrappers:function(){return c}});var l=new n,p={isBatchingUpdates:!1,batchedUpdates:function(t,e){var n=p.isBatchingUpdates;p.isBatchingUpdates=!0,n?t(e):l.perform(t,null,e)}};e.exports=p},{"./ReactUpdates":78,"./Transaction":93,"./emptyFunction":106,"./mixInto":134}],48:[function(t,e){"use strict";function n(){o.EventEmitter.injectTopLevelCallbackCreator(f),o.EventPluginHub.injectEventPluginOrder(c),o.EventPluginHub.injectInstanceHandle(D),o.EventPluginHub.injectMount(x),o.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:b,EnterLeaveEventPlugin:l,ChangeEventPlugin:a,CompositionEventPlugin:u,MobileSafariClickEventPlugin:p,SelectEventPlugin:P}),o.DOM.injectComponentClasses({button:v,form:g,img:y,input:C,option:E,select:R,textarea:M,html:S(m.html),head:S(m.head),title:S(m.title),body:S(m.body)}),o.CompositeComponent.injectMixin(d),o.DOMProperty.injectDOMPropertyConfig(i),o.Updates.injectBatchingStrategy(O),o.RootIndex.injectCreateReactRootIndex(r.canUseDOM?s.createReactRootIndex:T.createReactRootIndex),o.Component.injectEnvironment(h)}var o=t("./ReactInjection"),r=t("./ExecutionEnvironment"),i=t("./DefaultDOMPropertyConfig"),a=t("./ChangeEventPlugin"),s=t("./ClientReactRootIndex"),u=t("./CompositionEventPlugin"),c=t("./DefaultEventPluginOrder"),l=t("./EnterLeaveEventPlugin"),p=t("./MobileSafariClickEventPlugin"),d=t("./ReactBrowserComponentMixin"),h=t("./ReactComponentBrowserEnvironment"),f=t("./ReactEventTopLevelCallback"),m=t("./ReactDOM"),v=t("./ReactDOMButton"),g=t("./ReactDOMForm"),y=t("./ReactDOMImg"),C=t("./ReactDOMInput"),E=t("./ReactDOMOption"),R=t("./ReactDOMSelect"),M=t("./ReactDOMTextarea"),D=t("./ReactInstanceHandles"),x=t("./ReactMount"),P=t("./SelectEventPlugin"),T=t("./ServerReactRootIndex"),b=t("./SimpleEventPlugin"),O=t("./ReactDefaultBatchingStrategy"),S=t("./createFullPageComponent");e.exports={inject:n}},{"./ChangeEventPlugin":5,"./ClientReactRootIndex":6,"./CompositionEventPlugin":7,"./DefaultDOMPropertyConfig":12,"./DefaultEventPluginOrder":13,"./EnterLeaveEventPlugin":14,"./ExecutionEnvironment":21,"./MobileSafariClickEventPlugin":24,"./ReactBrowserComponentMixin":27,"./ReactComponentBrowserEnvironment":32,"./ReactDOM":36,"./ReactDOMButton":37,"./ReactDOMForm":39,"./ReactDOMImg":41,"./ReactDOMInput":42,"./ReactDOMOption":43,"./ReactDOMSelect":44,"./ReactDOMTextarea":46,"./ReactDefaultBatchingStrategy":47,"./ReactEventTopLevelCallback":52,"./ReactInjection":53,"./ReactInstanceHandles":55,"./ReactMount":58,"./SelectEventPlugin":80,"./ServerReactRootIndex":81,"./SimpleEventPlugin":82,"./createFullPageComponent":101}],49:[function(t,e){"use strict";var n={guard:function(t){return t}};e.exports=n},{}],50:[function(t,e){"use strict";function n(t){return null==t[C]&&(t[C]=g++,m[t[C]]={}),m[t[C]]}function o(t,e,n){a.listen(n,e,E.TopLevelCallbackCreator.createTopLevelCallback(t))}function r(t,e,n){a.capture(n,e,E.TopLevelCallbackCreator.createTopLevelCallback(t))}var i=t("./EventConstants"),a=t("./EventListener"),s=t("./EventPluginHub"),u=t("./EventPluginRegistry"),c=t("./ExecutionEnvironment"),l=t("./ReactEventEmitterMixin"),p=t("./ViewportMetrics"),d=t("./invariant"),h=t("./isEventSupported"),f=t("./merge"),m={},v=!1,g=0,y={topBlur:"blur",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topScroll:"scroll",topSelectionChange:"selectionchange",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topWheel:"wheel"},C="_reactListenersID"+String(Math.random()).slice(2),E=f(l,{TopLevelCallbackCreator:null,injection:{injectTopLevelCallbackCreator:function(t){E.TopLevelCallbackCreator=t
}},setEnabled:function(t){d(c.canUseDOM),E.TopLevelCallbackCreator&&E.TopLevelCallbackCreator.setEnabled(t)},isEnabled:function(){return!(!E.TopLevelCallbackCreator||!E.TopLevelCallbackCreator.isEnabled())},listenTo:function(t,e){for(var a=e,s=n(a),c=u.registrationNameDependencies[t],l=i.topLevelTypes,p=0,d=c.length;d>p;p++){var f=c[p];if(!s[f]){var m=l[f];m===l.topWheel?h("wheel")?o(l.topWheel,"wheel",a):h("mousewheel")?o(l.topWheel,"mousewheel",a):o(l.topWheel,"DOMMouseScroll",a):m===l.topScroll?h("scroll",!0)?r(l.topScroll,"scroll",a):o(l.topScroll,"scroll",window):m===l.topFocus||m===l.topBlur?(h("focus",!0)?(r(l.topFocus,"focus",a),r(l.topBlur,"blur",a)):h("focusin")&&(o(l.topFocus,"focusin",a),o(l.topBlur,"focusout",a)),s[l.topBlur]=!0,s[l.topFocus]=!0):y[f]&&o(m,y[f],a),s[f]=!0}}},ensureScrollValueMonitoring:function(){if(!v){var t=p.refreshScrollValues;a.listen(window,"scroll",t),a.listen(window,"resize",t),v=!0}},eventNameDispatchConfigs:s.eventNameDispatchConfigs,registrationNameModules:s.registrationNameModules,putListener:s.putListener,getListener:s.getListener,deleteListener:s.deleteListener,deleteAllListeners:s.deleteAllListeners,trapBubbledEvent:o,trapCapturedEvent:r});e.exports=E},{"./EventConstants":15,"./EventListener":16,"./EventPluginHub":17,"./EventPluginRegistry":18,"./ExecutionEnvironment":21,"./ReactEventEmitterMixin":51,"./ViewportMetrics":94,"./invariant":122,"./isEventSupported":123,"./merge":131}],51:[function(t,e){"use strict";function n(t){o.enqueueEvents(t),o.processEventQueue()}var o=t("./EventPluginHub"),r=t("./ReactUpdates"),i={handleTopLevel:function(t,e,i,a){var s=o.extractEvents(t,e,i,a);r.batchedUpdates(n,s)}};e.exports=i},{"./EventPluginHub":17,"./ReactUpdates":78}],52:[function(t,e){"use strict";function n(t){var e=u.getID(t),n=s.getReactRootIDFromNodeID(e),o=u.findReactContainerForID(n),r=u.getFirstReactDOM(o);return r}function o(t,e,o){for(var r=u.getFirstReactDOM(c(e))||window,i=r;i;)o.ancestors.push(i),i=n(i);for(var s=0,l=o.ancestors.length;l>s;s++){r=o.ancestors[s];var p=u.getID(r)||"";a.handleTopLevel(t,r,p,e)}}function r(){this.ancestors=[]}var i=t("./PooledClass"),a=t("./ReactEventEmitter"),s=t("./ReactInstanceHandles"),u=t("./ReactMount"),c=t("./getEventTarget"),l=t("./mixInto"),p=!0;l(r,{destructor:function(){this.ancestors.length=0}}),i.addPoolingTo(r);var d={setEnabled:function(t){p=!!t},isEnabled:function(){return p},createTopLevelCallback:function(t){return function(e){if(p){var n=r.getPooled();try{o(t,e,n)}finally{r.release(n)}}}}};e.exports=d},{"./PooledClass":25,"./ReactEventEmitter":50,"./ReactInstanceHandles":55,"./ReactMount":58,"./getEventTarget":114,"./mixInto":134}],53:[function(t,e){"use strict";var n=t("./DOMProperty"),o=t("./EventPluginHub"),r=t("./ReactComponent"),i=t("./ReactCompositeComponent"),a=t("./ReactDOM"),s=t("./ReactEventEmitter"),u=t("./ReactPerf"),c=t("./ReactRootIndex"),l=t("./ReactUpdates"),p={Component:r.injection,CompositeComponent:i.injection,DOMProperty:n.injection,EventPluginHub:o.injection,DOM:a.injection,EventEmitter:s.injection,Perf:u.injection,RootIndex:c.injection,Updates:l.injection};e.exports=p},{"./DOMProperty":9,"./EventPluginHub":17,"./ReactComponent":31,"./ReactCompositeComponent":33,"./ReactDOM":36,"./ReactEventEmitter":50,"./ReactPerf":63,"./ReactRootIndex":70,"./ReactUpdates":78}],54:[function(t,e){"use strict";function n(t){return r(document.documentElement,t)}var o=t("./ReactDOMSelection"),r=t("./containsNode"),i=t("./focusNode"),a=t("./getActiveElement"),s={hasSelectionCapabilities:function(t){return t&&("INPUT"===t.nodeName&&"text"===t.type||"TEXTAREA"===t.nodeName||"true"===t.contentEditable)},getSelectionInformation:function(){var t=a();return{focusedElem:t,selectionRange:s.hasSelectionCapabilities(t)?s.getSelection(t):null}},restoreSelection:function(t){var e=a(),o=t.focusedElem,r=t.selectionRange;e!==o&&n(o)&&(s.hasSelectionCapabilities(o)&&s.setSelection(o,r),i(o))},getSelection:function(t){var e;if("selectionStart"in t)e={start:t.selectionStart,end:t.selectionEnd};else if(document.selection&&"INPUT"===t.nodeName){var n=document.selection.createRange();n.parentElement()===t&&(e={start:-n.moveStart("character",-t.value.length),end:-n.moveEnd("character",-t.value.length)})}else e=o.getOffsets(t);return e||{start:0,end:0}},setSelection:function(t,e){var n=e.start,r=e.end;if("undefined"==typeof r&&(r=n),"selectionStart"in t)t.selectionStart=n,t.selectionEnd=Math.min(r,t.value.length);else if(document.selection&&"INPUT"===t.nodeName){var i=t.createTextRange();i.collapse(!0),i.moveStart("character",n),i.moveEnd("character",r-n),i.select()}else o.setOffsets(t,e)}};e.exports=s},{"./ReactDOMSelection":45,"./containsNode":98,"./focusNode":110,"./getActiveElement":112}],55:[function(t,e){"use strict";function n(t){return d+t.toString(36)}function o(t,e){return t.charAt(e)===d||e===t.length}function r(t){return""===t||t.charAt(0)===d&&t.charAt(t.length-1)!==d}function i(t,e){return 0===e.indexOf(t)&&o(e,t.length)}function a(t){return t?t.substr(0,t.lastIndexOf(d)):""}function s(t,e){if(p(r(t)&&r(e)),p(i(t,e)),t===e)return t;for(var n=t.length+h,a=n;a<e.length&&!o(e,a);a++);return e.substr(0,a)}function u(t,e){var n=Math.min(t.length,e.length);if(0===n)return"";for(var i=0,a=0;n>=a;a++)if(o(t,a)&&o(e,a))i=a;else if(t.charAt(a)!==e.charAt(a))break;var s=t.substr(0,i);return p(r(s)),s}function c(t,e,n,o,r,u){t=t||"",e=e||"",p(t!==e);var c=i(e,t);p(c||i(t,e));for(var l=0,d=c?a:s,h=t;;h=d(h,e)){var m;if(r&&h===t||u&&h===e||(m=n(h,c,o)),m===!1||h===e)break;p(l++<f)}}var l=t("./ReactRootIndex"),p=t("./invariant"),d=".",h=d.length,f=100,m={createReactRootID:function(){return n(l.createReactRootIndex())},createReactID:function(t,e){return t+e},getReactRootIDFromNodeID:function(t){if(t&&t.charAt(0)===d&&t.length>1){var e=t.indexOf(d,1);return e>-1?t.substr(0,e):t}return null},traverseEnterLeave:function(t,e,n,o,r){var i=u(t,e);i!==t&&c(t,i,n,o,!1,!0),i!==e&&c(i,e,n,r,!0,!1)},traverseTwoPhase:function(t,e,n){t&&(c("",t,e,n,!0,!1),c(t,"",e,n,!1,!0))},traverseAncestors:function(t,e,n){c("",t,e,n,!0,!1)},_getFirstCommonAncestorID:u,_getNextDescendantID:s,isAncestorIDOf:i,SEPARATOR:d};e.exports=m},{"./ReactRootIndex":70,"./invariant":122}],56:[function(t,e){"use strict";function n(t,e){this.value=t,this.requestChange=e}e.exports=n},{}],57:[function(t,e){"use strict";var n=t("./adler32"),o={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(t){var e=n(t);return t.replace(">"," "+o.CHECKSUM_ATTR_NAME+'="'+e+'">')},canReuseMarkup:function(t,e){var r=e.getAttribute(o.CHECKSUM_ATTR_NAME);r=r&&parseInt(r,10);var i=n(t);return i===r}};e.exports=o},{"./adler32":96}],58:[function(t,e){"use strict";function n(t){var e=v(t);return e&&S.getID(e)}function o(t){var e=r(t);if(e)if(M.hasOwnProperty(e)){var n=M[e];n!==t&&(y(!s(n,e)),M[e]=t)}else M[e]=t;return e}function r(t){return t&&t.getAttribute&&t.getAttribute(R)||""}function i(t,e){var n=r(t);n!==e&&delete M[n],t.setAttribute(R,e),M[e]=t}function a(t){return M.hasOwnProperty(t)&&s(M[t],t)||(M[t]=S.findReactNodeByID(t)),M[t]}function s(t,e){if(t){y(r(t)===e);var n=S.findReactContainerForID(e);if(n&&m(n,t))return!0}return!1}function u(t){delete M[t]}function c(t){var e=M[t];return e&&s(e,t)?void(O=e):!1}function l(t){O=null,h.traverseAncestors(t,c);var e=O;return O=null,e}var p=t("./DOMProperty"),d=t("./ReactEventEmitter"),h=t("./ReactInstanceHandles"),f=t("./ReactPerf"),m=t("./containsNode"),v=t("./getReactRootElementInContainer"),g=t("./instantiateReactComponent"),y=t("./invariant"),C=t("./shouldUpdateReactComponent"),E=h.SEPARATOR,R=p.ID_ATTRIBUTE_NAME,M={},D=1,x=9,P={},T={},b=[],O=null,S={totalInstantiationTime:0,totalInjectionTime:0,useTouchEvents:!1,_instancesByReactRootID:P,scrollMonitor:function(t,e){e()},_updateRootComponent:function(t,e,n,o){var r=e.props;return S.scrollMonitor(n,function(){t.replaceProps(r,o)}),t},_registerComponent:function(t,e){y(e&&(e.nodeType===D||e.nodeType===x)),d.ensureScrollValueMonitoring();var n=S.registerContainer(e);return P[n]=t,n},_renderNewRootComponent:f.measure("ReactMount","_renderNewRootComponent",function(t,e,n){var o=g(t),r=S._registerComponent(o,e);return o.mountComponentIntoNode(r,e,n),o}),renderComponent:function(t,e,o){var r=P[n(e)];if(r){if(C(r,t))return S._updateRootComponent(r,t,e,o);S.unmountComponentAtNode(e)}var i=v(e),a=i&&S.isRenderedByReact(i),s=a&&!r,u=S._renderNewRootComponent(t,e,s);return o&&o.call(u),u},constructAndRenderComponent:function(t,e,n){return S.renderComponent(t(e),n)},constructAndRenderComponentByID:function(t,e,n){var o=document.getElementById(n);return y(o),S.constructAndRenderComponent(t,e,o)},registerContainer:function(t){var e=n(t);return e&&(e=h.getReactRootIDFromNodeID(e)),e||(e=h.createReactRootID()),T[e]=t,e},unmountComponentAtNode:function(t){var e=n(t),o=P[e];return o?(S.unmountComponentFromNode(o,t),delete P[e],delete T[e],!0):!1},unmountComponentFromNode:function(t,e){for(t.unmountComponent(),e.nodeType===x&&(e=e.documentElement);e.lastChild;)e.removeChild(e.lastChild)},findReactContainerForID:function(t){var e=h.getReactRootIDFromNodeID(t),n=T[e];return n},findReactNodeByID:function(t){var e=S.findReactContainerForID(t);return S.findComponentRoot(e,t)},isRenderedByReact:function(t){if(1!==t.nodeType)return!1;var e=S.getID(t);return e?e.charAt(0)===E:!1},getFirstReactDOM:function(t){for(var e=t;e&&e.parentNode!==e;){if(S.isRenderedByReact(e))return e;e=e.parentNode}return null},findComponentRoot:function(t,e){var n=b,o=0,r=l(e)||t;for(n[0]=r.firstChild,n.length=1;o<n.length;){for(var i,a=n[o++];a;){var s=S.getID(a);s?e===s?i=a:h.isAncestorIDOf(s,e)&&(n.length=o=0,n.push(a.firstChild)):n.push(a.firstChild),a=a.nextSibling}if(i)return n.length=0,i}n.length=0,y(!1)},getReactRootID:n,getID:o,setID:i,getNode:a,purgeID:u};e.exports=S},{"./DOMProperty":9,"./ReactEventEmitter":50,"./ReactInstanceHandles":55,"./ReactPerf":63,"./containsNode":98,"./getReactRootElementInContainer":117,"./instantiateReactComponent":121,"./invariant":122,"./shouldUpdateReactComponent":140}],59:[function(t,e){"use strict";function n(t){this._queue=t||null}var o=t("./PooledClass"),r=t("./mixInto");r(n,{enqueue:function(t,e){this._queue=this._queue||[],this._queue.push({component:t,callback:e})},notifyAll:function(){var t=this._queue;if(t){this._queue=null;for(var e=0,n=t.length;n>e;e++){var o=t[e].component,r=t[e].callback;r.call(o)}t.length=0}},reset:function(){this._queue=null},destructor:function(){this.reset()}}),o.addPoolingTo(n),e.exports=n},{"./PooledClass":25,"./mixInto":134}],60:[function(t,e){"use strict";function n(t,e,n){f.push({parentID:t,parentNode:null,type:c.INSERT_MARKUP,markupIndex:m.push(e)-1,textContent:null,fromIndex:null,toIndex:n})}function o(t,e,n){f.push({parentID:t,parentNode:null,type:c.MOVE_EXISTING,markupIndex:null,textContent:null,fromIndex:e,toIndex:n})}function r(t,e){f.push({parentID:t,parentNode:null,type:c.REMOVE_NODE,markupIndex:null,textContent:null,fromIndex:e,toIndex:null})}function i(t,e){f.push({parentID:t,parentNode:null,type:c.TEXT_CONTENT,markupIndex:null,textContent:e,fromIndex:null,toIndex:null})}function a(){f.length&&(u.BackendIDOperations.dangerouslyProcessChildrenUpdates(f,m),s())}function s(){f.length=0,m.length=0}var u=t("./ReactComponent"),c=t("./ReactMultiChildUpdateTypes"),l=t("./flattenChildren"),p=t("./instantiateReactComponent"),d=t("./shouldUpdateReactComponent"),h=0,f=[],m=[],v={Mixin:{mountChildren:function(t,e){var n=l(t),o=[],r=0;this._renderedChildren=n;for(var i in n){var a=n[i];if(n.hasOwnProperty(i)){var s=p(a);n[i]=s;var u=this._rootNodeID+i,c=s.mountComponent(u,e,this._mountDepth+1);s._mountIndex=r,o.push(c),r++}}return o},updateTextContent:function(t){h++;var e=!0;try{var n=this._renderedChildren;for(var o in n)n.hasOwnProperty(o)&&this._unmountChildByName(n[o],o);this.setTextContent(t),e=!1}finally{h--,h||(e?s():a())}},updateChildren:function(t,e){h++;var n=!0;try{this._updateChildren(t,e),n=!1}finally{h--,h||(n?s():a())}},_updateChildren:function(t,e){var n=l(t),o=this._renderedChildren;if(n||o){var r,i=0,a=0;for(r in n)if(n.hasOwnProperty(r)){var s=o&&o[r],u=n[r];if(d(s,u))this.moveChild(s,a,i),i=Math.max(s._mountIndex,i),s.receiveComponent(u,e),s._mountIndex=a;else{s&&(i=Math.max(s._mountIndex,i),this._unmountChildByName(s,r));var c=p(u);this._mountChildByNameAtIndex(c,r,a,e)}a++}for(r in o)!o.hasOwnProperty(r)||n&&n[r]||this._unmountChildByName(o[r],r)}},unmountChildren:function(){var t=this._renderedChildren;for(var e in t){var n=t[e];n.unmountComponent&&n.unmountComponent()}this._renderedChildren=null},moveChild:function(t,e,n){t._mountIndex<n&&o(this._rootNodeID,t._mountIndex,e)},createChild:function(t,e){n(this._rootNodeID,e,t._mountIndex)},removeChild:function(t){r(this._rootNodeID,t._mountIndex)},setTextContent:function(t){i(this._rootNodeID,t)},_mountChildByNameAtIndex:function(t,e,n,o){var r=this._rootNodeID+e,i=t.mountComponent(r,o,this._mountDepth+1);t._mountIndex=n,this.createChild(t,i),this._renderedChildren=this._renderedChildren||{},this._renderedChildren[e]=t},_unmountChildByName:function(t,e){u.isValidComponent(t)&&(this.removeChild(t),t._mountIndex=null,t.unmountComponent(),delete this._renderedChildren[e])}}};e.exports=v},{"./ReactComponent":31,"./ReactMultiChildUpdateTypes":61,"./flattenChildren":109,"./instantiateReactComponent":121,"./shouldUpdateReactComponent":140}],61:[function(t,e){"use strict";var n=t("./keyMirror"),o=n({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,TEXT_CONTENT:null});e.exports=o},{"./keyMirror":128}],62:[function(t,e){"use strict";var n=t("./emptyObject"),o=t("./invariant"),r={isValidOwner:function(t){return!(!t||"function"!=typeof t.attachRef||"function"!=typeof t.detachRef)},addComponentAsRefTo:function(t,e,n){o(r.isValidOwner(n)),n.attachRef(e,t)},removeComponentAsRefFrom:function(t,e,n){o(r.isValidOwner(n)),n.refs[e]===t&&n.detachRef(e)},Mixin:{construct:function(){this.refs=n},attachRef:function(t,e){o(e.isOwnedBy(this));var r=this.refs===n?this.refs={}:this.refs;r[t]=e},detachRef:function(t){delete this.refs[t]}}};e.exports=r},{"./emptyObject":107,"./invariant":122}],63:[function(t,e){"use strict";function n(t,e,n){return n}var o={enableMeasure:!1,storedMeasure:n,measure:function(t,e,n){return n},injection:{injectMeasure:function(t){o.storedMeasure=t}}};e.exports=o},{}],64:[function(t,e){"use strict";function n(t){return function(e,n,o){e[n]=e.hasOwnProperty(n)?t(e[n],o):o}}var o=t("./emptyFunction"),r=t("./invariant"),i=t("./joinClasses"),a=t("./merge"),s={children:o,className:n(i),key:o,ref:o,style:n(a)},u={TransferStrategies:s,mergeProps:function(t,e){var n=a(t);for(var o in e)if(e.hasOwnProperty(o)){var r=s[o];r&&s.hasOwnProperty(o)?r(n,o,e[o]):n.hasOwnProperty(o)||(n[o]=e[o])}return n},Mixin:{transferPropsTo:function(t){return r(t._owner===this),t.props=u.mergeProps(t.props,this.props),t}}};e.exports=u},{"./emptyFunction":106,"./invariant":122,"./joinClasses":127,"./merge":131}],65:[function(t,e){"use strict";var n={};e.exports=n},{}],66:[function(t,e){"use strict";var n=t("./keyMirror"),o=n({prop:null,context:null,childContext:null});e.exports=o},{"./keyMirror":128}],67:[function(t,e){"use strict";function n(t){switch(typeof t){case"number":case"string":return!0;case"object":if(Array.isArray(t))return t.every(n);if(f.isValidComponent(t))return!0;for(var e in t)if(!n(t[e]))return!1;return!0;default:return!1}}function o(t){var e=typeof t;return"object"===e&&Array.isArray(t)?"array":e}function r(){function t(){return!0}return h(t)}function i(t){function e(e,n){var r=o(n),i=r===t;return i}return h(e)}function a(t){function e(t,e){var o=n[e];return o}var n=m(t);return h(e)}function s(t){function e(e,n,r,i,a){var s=o(n),u="object"===s;if(u)for(var c in t){var l=t[c];if(l&&!l(n,c,i,a))return!1}return u}return h(e)}function u(t){function e(e,n){var o=n instanceof t;return o}return h(e)}function c(t){function e(e,n,o,r,i){var a=Array.isArray(n);if(a)for(var s=0;s<n.length;s++)if(!t(n,s,r,i))return!1;return a}return h(e)}function l(){function t(t,e){var o=n(e);return o}return h(t)}function p(){function t(t,e){var n=f.isValidComponent(e);return n}return h(t)}function d(t){return function(e,n,o,r){for(var i=!1,a=0;a<t.length;a++){var s=t[a];if("function"==typeof s.weak&&(s=s.weak),s(e,n,o,r)){i=!0;break}}return i}}function h(t){function e(e,n,o,r,i,a){var s=o[r];if(null!=s)return t(n,s,r,i||g,a);var u=!e;return u}var n=e.bind(null,!1,!0);return n.weak=e.bind(null,!1,!1),n.isRequired=e.bind(null,!0,!0),n.weak.isRequired=e.bind(null,!0,!1),n.isRequired.weak=n.weak.isRequired,n}var f=t("./ReactComponent"),m=(t("./ReactPropTypeLocationNames"),t("./warning"),t("./createObjectFrom")),v={array:i("array"),bool:i("boolean"),func:i("function"),number:i("number"),object:i("object"),string:i("string"),shape:s,oneOf:a,oneOfType:d,arrayOf:c,instanceOf:u,renderable:l(),component:p(),any:r()},g="<<anonymous>>";e.exports=v},{"./ReactComponent":31,"./ReactPropTypeLocationNames":65,"./createObjectFrom":103,"./warning":144}],68:[function(t,e){"use strict";function n(){this.listenersToPut=[]}var o=t("./PooledClass"),r=t("./ReactEventEmitter"),i=t("./mixInto");i(n,{enqueuePutListener:function(t,e,n){this.listenersToPut.push({rootNodeID:t,propKey:e,propValue:n})},putListeners:function(){for(var t=0;t<this.listenersToPut.length;t++){var e=this.listenersToPut[t];r.putListener(e.rootNodeID,e.propKey,e.propValue)}},reset:function(){this.listenersToPut.length=0},destructor:function(){this.reset()}}),o.addPoolingTo(n),e.exports=n},{"./PooledClass":25,"./ReactEventEmitter":50,"./mixInto":134}],69:[function(t,e){"use strict";function n(){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=a.getPooled(null),this.putListenerQueue=s.getPooled()}var o=t("./PooledClass"),r=t("./ReactEventEmitter"),i=t("./ReactInputSelection"),a=t("./ReactMountReady"),s=t("./ReactPutListenerQueue"),u=t("./Transaction"),c=t("./mixInto"),l={initialize:i.getSelectionInformation,close:i.restoreSelection},p={initialize:function(){var t=r.isEnabled();return r.setEnabled(!1),t},close:function(t){r.setEnabled(t)}},d={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},h={initialize:function(){this.putListenerQueue.reset()},close:function(){this.putListenerQueue.putListeners()}},f=[h,l,p,d],m={getTransactionWrappers:function(){return f},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){a.release(this.reactMountReady),this.reactMountReady=null,s.release(this.putListenerQueue),this.putListenerQueue=null}};c(n,u.Mixin),c(n,m),o.addPoolingTo(n),e.exports=n},{"./PooledClass":25,"./ReactEventEmitter":50,"./ReactInputSelection":54,"./ReactMountReady":59,"./ReactPutListenerQueue":68,"./Transaction":93,"./mixInto":134}],70:[function(t,e){"use strict";var n={injectCreateReactRootIndex:function(t){o.createReactRootIndex=t}},o={createReactRootIndex:null,injection:n};e.exports=o},{}],71:[function(t,e){"use strict";function n(t){c(r.isValidComponent(t)),c(!(2===arguments.length&&"function"==typeof arguments[1]));var e;try{var n=i.createReactRootID();return e=s.getPooled(!1),e.perform(function(){var o=u(t),r=o.mountComponent(n,e,0);return a.addChecksumToMarkup(r)},null)}finally{s.release(e)}}function o(t){c(r.isValidComponent(t));var e;try{var n=i.createReactRootID();return e=s.getPooled(!0),e.perform(function(){var o=u(t);return o.mountComponent(n,e,0)},null)}finally{s.release(e)}}var r=t("./ReactComponent"),i=t("./ReactInstanceHandles"),a=t("./ReactMarkupChecksum"),s=t("./ReactServerRenderingTransaction"),u=t("./instantiateReactComponent"),c=t("./invariant");e.exports={renderComponentToString:n,renderComponentToStaticMarkup:o}},{"./ReactComponent":31,"./ReactInstanceHandles":55,"./ReactMarkupChecksum":57,"./ReactServerRenderingTransaction":72,"./instantiateReactComponent":121,"./invariant":122}],72:[function(t,e){"use strict";function n(t){this.reinitializeTransaction(),this.renderToStaticMarkup=t,this.reactMountReady=r.getPooled(null),this.putListenerQueue=i.getPooled()}var o=t("./PooledClass"),r=t("./ReactMountReady"),i=t("./ReactPutListenerQueue"),a=t("./Transaction"),s=t("./emptyFunction"),u=t("./mixInto"),c={initialize:function(){this.reactMountReady.reset()},close:s},l={initialize:function(){this.putListenerQueue.reset()},close:s},p=[l,c],d={getTransactionWrappers:function(){return p},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){r.release(this.reactMountReady),this.reactMountReady=null,i.release(this.putListenerQueue),this.putListenerQueue=null}};u(n,a.Mixin),u(n,d),o.addPoolingTo(n),e.exports=n},{"./PooledClass":25,"./ReactMountReady":59,"./ReactPutListenerQueue":68,"./Transaction":93,"./emptyFunction":106,"./mixInto":134}],73:[function(t,e){"use strict";function n(t,e){var n={};return function(o){n[e]=o,t.setState(n)}}var o={createStateSetter:function(t,e){return function(n,o,r,i,a,s){var u=e.call(t,n,o,r,i,a,s);u&&t.setState(u)}},createStateKeySetter:function(t,e){var o=t.__keySetters||(t.__keySetters={});return o[e]||(o[e]=n(t,e))}};o.Mixin={createStateSetter:function(t){return o.createStateSetter(this,t)},createStateKeySetter:function(t){return o.createStateKeySetter(this,t)}},e.exports=o},{}],74:[function(t,e){"use strict";var n=t("./DOMPropertyOperations"),o=t("./ReactBrowserComponentMixin"),r=t("./ReactComponent"),i=t("./escapeTextForBrowser"),a=t("./mixInto"),s=function(t){this.construct({text:t})};s.ConvenienceConstructor=function(t){return new s(t.text)},a(s,r.Mixin),a(s,o),a(s,{mountComponent:function(t,e,o){r.Mixin.mountComponent.call(this,t,e,o);var a=i(this.props.text);return e.renderToStaticMarkup?a:"<span "+n.createMarkupForID(t)+">"+a+"</span>"},receiveComponent:function(t){var e=t.props;e.text!==this.props.text&&(this.props.text=e.text,r.BackendIDOperations.updateTextContentByID(this._rootNodeID,e.text))}}),s.type=s,s.prototype.type=s,e.exports=s},{"./DOMPropertyOperations":10,"./ReactBrowserComponentMixin":27,"./ReactComponent":31,"./escapeTextForBrowser":108,"./mixInto":134}],75:[function(t,e){"use strict";var n=t("./ReactChildren"),o={getChildMapping:function(t){return n.map(t,function(t){return t})},mergeChildMappings:function(t,e){function n(n){return e.hasOwnProperty(n)?e[n]:t[n]}t=t||{},e=e||{};var o={},r=[];for(var i in t)e[i]?r.length&&(o[i]=r,r=[]):r.push(i);var a,s={};for(var u in e){if(o[u])for(a=0;a<o[u].length;a++){var c=o[u][a];s[o[u][a]]=n(c)}s[u]=n(u)}for(a=0;a<r.length;a++)s[r[a]]=n(r[a]);return s}};e.exports=o},{"./ReactChildren":30}],76:[function(t,e){"use strict";function n(){var t=document.createElement("div"),e=t.style;for(var n in a){var o=a[n];for(var r in o)if(r in e){s.push(o[r]);break}}}function o(t,e,n){t.addEventListener(e,n,!1)}function r(t,e,n){t.removeEventListener(e,n,!1)}var i=t("./ExecutionEnvironment"),a={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},s=[];i.canUseDOM&&n();var u={addEndEventListener:function(t,e){return 0===s.length?void window.setTimeout(e,0):void s.forEach(function(n){o(t,n,e)})},removeEndEventListener:function(t,e){0!==s.length&&s.forEach(function(n){r(t,n,e)})}};e.exports=u},{"./ExecutionEnvironment":21}],77:[function(t,e){"use strict";var n=t("./React"),o=t("./ReactTransitionChildMapping"),r=t("./cloneWithProps"),i=t("./emptyFunction"),a=t("./merge"),s=n.createClass({propTypes:{component:n.PropTypes.func,childFactory:n.PropTypes.func},getDefaultProps:function(){return{component:n.DOM.span,childFactory:i.thatReturnsArgument}},getInitialState:function(){return{children:o.getChildMapping(this.props.children)}},componentWillReceiveProps:function(t){var e=o.getChildMapping(t.children),n=this.state.children;this.setState({children:o.mergeChildMappings(n,e)});var r;for(r in e)n.hasOwnProperty(r)||this.currentlyTransitioningKeys[r]||this.keysToEnter.push(r);for(r in n)e.hasOwnProperty(r)||this.currentlyTransitioningKeys[r]||this.keysToLeave.push(r)},componentWillMount:function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},componentDidUpdate:function(){var t=this.keysToEnter;this.keysToEnter=[],t.forEach(this.performEnter);var e=this.keysToLeave;this.keysToLeave=[],e.forEach(this.performLeave)},performEnter:function(t){this.currentlyTransitioningKeys[t]=!0;var e=this.refs[t];e.componentWillEnter?e.componentWillEnter(this._handleDoneEntering.bind(this,t)):this._handleDoneEntering(t)},_handleDoneEntering:function(t){var e=this.refs[t];e.componentDidEnter&&e.componentDidEnter(),delete this.currentlyTransitioningKeys[t];var n=o.getChildMapping(this.props.children);n.hasOwnProperty(t)||this.performLeave(t)},performLeave:function(t){this.currentlyTransitioningKeys[t]=!0;var e=this.refs[t];e.componentWillLeave?e.componentWillLeave(this._handleDoneLeaving.bind(this,t)):this._handleDoneLeaving(t)},_handleDoneLeaving:function(t){var e=this.refs[t];e.componentDidLeave&&e.componentDidLeave(),delete this.currentlyTransitioningKeys[t];var n=o.getChildMapping(this.props.children);if(n.hasOwnProperty(t))this.performEnter(t);else{var r=a(this.state.children);delete r[t],this.setState({children:r})}},render:function(){var t={};for(var e in this.state.children){var n=this.state.children[e];n&&(t[e]=r(this.props.childFactory(n),{ref:e}))}return this.transferPropsTo(this.props.component(null,t))}});e.exports=s},{"./React":26,"./ReactTransitionChildMapping":75,"./cloneWithProps":97,"./emptyFunction":106,"./merge":131}],78:[function(t,e){"use strict";function n(){c(p)}function o(t,e){n(),p.batchedUpdates(t,e)}function r(t,e){return t._mountDepth-e._mountDepth}function i(){l.sort(r);for(var t=0;t<l.length;t++){var e=l[t];if(e.isMounted()){var n=e._pendingCallbacks;if(e._pendingCallbacks=null,e.performUpdateIfNecessary(),n)for(var o=0;o<n.length;o++)n[o].call(e)}}}function a(){l.length=0}function s(t,e){return c(!e||"function"==typeof e),n(),p.isBatchingUpdates?(l.push(t),void(e&&(t._pendingCallbacks?t._pendingCallbacks.push(e):t._pendingCallbacks=[e]))):(t.performUpdateIfNecessary(),void(e&&e.call(t)))}var u=t("./ReactPerf"),c=t("./invariant"),l=[],p=null,d=u.measure("ReactUpdates","flushBatchedUpdates",function(){try{i()}finally{a()}}),h={injectBatchingStrategy:function(t){c(t),c("function"==typeof t.batchedUpdates),c("boolean"==typeof t.isBatchingUpdates),p=t}},f={batchedUpdates:o,enqueueUpdate:s,flushBatchedUpdates:d,injection:h};e.exports=f},{"./ReactPerf":63,"./invariant":122}],79:[function(t,e){"use strict";var n=t("./LinkedStateMixin"),o=t("./React"),r=t("./ReactCSSTransitionGroup"),i=t("./ReactTransitionGroup"),r=t("./ReactCSSTransitionGroup"),a=t("./cx"),s=t("./cloneWithProps"),u=t("./update");o.addons={LinkedStateMixin:n,CSSTransitionGroup:r,TransitionGroup:i,classSet:a,cloneWithProps:s,update:u},e.exports=o},{"./LinkedStateMixin":22,"./React":26,"./ReactCSSTransitionGroup":28,"./ReactTransitionGroup":77,"./cloneWithProps":97,"./cx":104,"./update":143}],80:[function(t,e){"use strict";function n(t){if("selectionStart"in t&&a.hasSelectionCapabilities(t))return{start:t.selectionStart,end:t.selectionEnd};if(document.selection){var e=document.selection.createRange();return{parentElement:e.parentElement(),text:e.text,top:e.boundingTop,left:e.boundingLeft}}var n=window.getSelection();return{anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}}function o(t){if(!g&&null!=f&&f==u()){var e=n(f);if(!v||!p(v,e)){v=e;var o=s.getPooled(h.select,m,t);return o.type="select",o.target=f,i.accumulateTwoPhaseDispatches(o),o}}}var r=t("./EventConstants"),i=t("./EventPropagators"),a=t("./ReactInputSelection"),s=t("./SyntheticEvent"),u=t("./getActiveElement"),c=t("./isTextInputElement"),l=t("./keyOf"),p=t("./shallowEqual"),d=r.topLevelTypes,h={select:{phasedRegistrationNames:{bubbled:l({onSelect:null}),captured:l({onSelectCapture:null})},dependencies:[d.topBlur,d.topContextMenu,d.topFocus,d.topKeyDown,d.topMouseDown,d.topMouseUp,d.topSelectionChange]}},f=null,m=null,v=null,g=!1,y={eventTypes:h,extractEvents:function(t,e,n,r){switch(t){case d.topFocus:(c(e)||"true"===e.contentEditable)&&(f=e,m=n,v=null);break;case d.topBlur:f=null,m=null,v=null;break;case d.topMouseDown:g=!0;break;case d.topContextMenu:case d.topMouseUp:return g=!1,o(r);case d.topSelectionChange:case d.topKeyDown:case d.topKeyUp:return o(r)}}};e.exports=y},{"./EventConstants":15,"./EventPropagators":20,"./ReactInputSelection":54,"./SyntheticEvent":86,"./getActiveElement":112,"./isTextInputElement":125,"./keyOf":129,"./shallowEqual":139}],81:[function(t,e){"use strict";var n=Math.pow(2,53),o={createReactRootIndex:function(){return Math.ceil(Math.random()*n)}};e.exports=o},{}],82:[function(t,e){"use strict";var n=t("./EventConstants"),o=t("./EventPluginUtils"),r=t("./EventPropagators"),i=t("./SyntheticClipboardEvent"),a=t("./SyntheticEvent"),s=t("./SyntheticFocusEvent"),u=t("./SyntheticKeyboardEvent"),c=t("./SyntheticMouseEvent"),l=t("./SyntheticDragEvent"),p=t("./SyntheticTouchEvent"),d=t("./SyntheticUIEvent"),h=t("./SyntheticWheelEvent"),f=t("./invariant"),m=t("./keyOf"),v=n.topLevelTypes,g={blur:{phasedRegistrationNames:{bubbled:m({onBlur:!0}),captured:m({onBlurCapture:!0})}},click:{phasedRegistrationNames:{bubbled:m({onClick:!0}),captured:m({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:m({onContextMenu:!0}),captured:m({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:m({onCopy:!0}),captured:m({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:m({onCut:!0}),captured:m({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:m({onDoubleClick:!0}),captured:m({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:m({onDrag:!0}),captured:m({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:m({onDragEnd:!0}),captured:m({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:m({onDragEnter:!0}),captured:m({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:m({onDragExit:!0}),captured:m({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:m({onDragLeave:!0}),captured:m({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:m({onDragOver:!0}),captured:m({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:m({onDragStart:!0}),captured:m({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:m({onDrop:!0}),captured:m({onDropCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:m({onFocus:!0}),captured:m({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:m({onInput:!0}),captured:m({onInputCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:m({onKeyDown:!0}),captured:m({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:m({onKeyPress:!0}),captured:m({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:m({onKeyUp:!0}),captured:m({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:m({onLoad:!0}),captured:m({onLoadCapture:!0})}},error:{phasedRegistrationNames:{bubbled:m({onError:!0}),captured:m({onErrorCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:m({onMouseDown:!0}),captured:m({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:m({onMouseMove:!0}),captured:m({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:m({onMouseOut:!0}),captured:m({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:m({onMouseOver:!0}),captured:m({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:m({onMouseUp:!0}),captured:m({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:m({onPaste:!0}),captured:m({onPasteCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:m({onReset:!0}),captured:m({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:m({onScroll:!0}),captured:m({onScrollCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:m({onSubmit:!0}),captured:m({onSubmitCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:m({onTouchCancel:!0}),captured:m({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:m({onTouchEnd:!0}),captured:m({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:m({onTouchMove:!0}),captured:m({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:m({onTouchStart:!0}),captured:m({onTouchStartCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:m({onWheel:!0}),captured:m({onWheelCapture:!0})}}},y={topBlur:g.blur,topClick:g.click,topContextMenu:g.contextMenu,topCopy:g.copy,topCut:g.cut,topDoubleClick:g.doubleClick,topDrag:g.drag,topDragEnd:g.dragEnd,topDragEnter:g.dragEnter,topDragExit:g.dragExit,topDragLeave:g.dragLeave,topDragOver:g.dragOver,topDragStart:g.dragStart,topDrop:g.drop,topError:g.error,topFocus:g.focus,topInput:g.input,topKeyDown:g.keyDown,topKeyPress:g.keyPress,topKeyUp:g.keyUp,topLoad:g.load,topMouseDown:g.mouseDown,topMouseMove:g.mouseMove,topMouseOut:g.mouseOut,topMouseOver:g.mouseOver,topMouseUp:g.mouseUp,topPaste:g.paste,topReset:g.reset,topScroll:g.scroll,topSubmit:g.submit,topTouchCancel:g.touchCancel,topTouchEnd:g.touchEnd,topTouchMove:g.touchMove,topTouchStart:g.touchStart,topWheel:g.wheel};
for(var C in y)y[C].dependencies=[C];var E={eventTypes:g,executeDispatch:function(t,e,n){var r=o.executeDispatch(t,e,n);r===!1&&(t.stopPropagation(),t.preventDefault())},extractEvents:function(t,e,n,o){var m=y[t];if(!m)return null;var g;switch(t){case v.topInput:case v.topLoad:case v.topError:case v.topReset:case v.topSubmit:g=a;break;case v.topKeyDown:case v.topKeyPress:case v.topKeyUp:g=u;break;case v.topBlur:case v.topFocus:g=s;break;case v.topClick:if(2===o.button)return null;case v.topContextMenu:case v.topDoubleClick:case v.topMouseDown:case v.topMouseMove:case v.topMouseOut:case v.topMouseOver:case v.topMouseUp:g=c;break;case v.topDrag:case v.topDragEnd:case v.topDragEnter:case v.topDragExit:case v.topDragLeave:case v.topDragOver:case v.topDragStart:case v.topDrop:g=l;break;case v.topTouchCancel:case v.topTouchEnd:case v.topTouchMove:case v.topTouchStart:g=p;break;case v.topScroll:g=d;break;case v.topWheel:g=h;break;case v.topCopy:case v.topCut:case v.topPaste:g=i}f(g);var C=g.getPooled(m,n,o);return r.accumulateTwoPhaseDispatches(C),C}};e.exports=E},{"./EventConstants":15,"./EventPluginUtils":19,"./EventPropagators":20,"./SyntheticClipboardEvent":83,"./SyntheticDragEvent":85,"./SyntheticEvent":86,"./SyntheticFocusEvent":87,"./SyntheticKeyboardEvent":88,"./SyntheticMouseEvent":89,"./SyntheticTouchEvent":90,"./SyntheticUIEvent":91,"./SyntheticWheelEvent":92,"./invariant":122,"./keyOf":129}],83:[function(t,e){"use strict";function n(t,e,n){o.call(this,t,e,n)}var o=t("./SyntheticEvent"),r={clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}};o.augmentClass(n,r),e.exports=n},{"./SyntheticEvent":86}],84:[function(t,e){"use strict";function n(t,e,n){o.call(this,t,e,n)}var o=t("./SyntheticEvent"),r={data:null};o.augmentClass(n,r),e.exports=n},{"./SyntheticEvent":86}],85:[function(t,e){"use strict";function n(t,e,n){o.call(this,t,e,n)}var o=t("./SyntheticMouseEvent"),r={dataTransfer:null};o.augmentClass(n,r),e.exports=n},{"./SyntheticMouseEvent":89}],86:[function(t,e){"use strict";function n(t,e,n){this.dispatchConfig=t,this.dispatchMarker=e,this.nativeEvent=n;var o=this.constructor.Interface;for(var i in o)if(o.hasOwnProperty(i)){var a=o[i];this[i]=a?a(n):n[i]}var s=null!=n.defaultPrevented?n.defaultPrevented:n.returnValue===!1;this.isDefaultPrevented=s?r.thatReturnsTrue:r.thatReturnsFalse,this.isPropagationStopped=r.thatReturnsFalse}var o=t("./PooledClass"),r=t("./emptyFunction"),i=t("./getEventTarget"),a=t("./merge"),s=t("./mergeInto"),u={type:null,target:i,currentTarget:r.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};s(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t.preventDefault?t.preventDefault():t.returnValue=!1,this.isDefaultPrevented=r.thatReturnsTrue},stopPropagation:function(){var t=this.nativeEvent;t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,this.isPropagationStopped=r.thatReturnsTrue},persist:function(){this.isPersistent=r.thatReturnsTrue},isPersistent:r.thatReturnsFalse,destructor:function(){var t=this.constructor.Interface;for(var e in t)this[e]=null;this.dispatchConfig=null,this.dispatchMarker=null,this.nativeEvent=null}}),n.Interface=u,n.augmentClass=function(t,e){var n=this,r=Object.create(n.prototype);s(r,t.prototype),t.prototype=r,t.prototype.constructor=t,t.Interface=a(n.Interface,e),t.augmentClass=n.augmentClass,o.addPoolingTo(t,o.threeArgumentPooler)},o.addPoolingTo(n,o.threeArgumentPooler),e.exports=n},{"./PooledClass":25,"./emptyFunction":106,"./getEventTarget":114,"./merge":131,"./mergeInto":133}],87:[function(t,e){"use strict";function n(t,e,n){o.call(this,t,e,n)}var o=t("./SyntheticUIEvent"),r={relatedTarget:null};o.augmentClass(n,r),e.exports=n},{"./SyntheticUIEvent":91}],88:[function(t,e){"use strict";function n(t,e,n){o.call(this,t,e,n)}var o=t("./SyntheticUIEvent"),r=t("./getEventKey"),i={key:r,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,"char":null,charCode:null,keyCode:null,which:null};o.augmentClass(n,i),e.exports=n},{"./SyntheticUIEvent":91,"./getEventKey":113}],89:[function(t,e){"use strict";function n(t,e,n){o.call(this,t,e,n)}var o=t("./SyntheticUIEvent"),r=t("./ViewportMetrics"),i={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,button:function(t){var e=t.button;return"which"in t?e:2===e?2:4===e?1:0},buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},pageX:function(t){return"pageX"in t?t.pageX:t.clientX+r.currentScrollLeft},pageY:function(t){return"pageY"in t?t.pageY:t.clientY+r.currentScrollTop}};o.augmentClass(n,i),e.exports=n},{"./SyntheticUIEvent":91,"./ViewportMetrics":94}],90:[function(t,e){"use strict";function n(t,e,n){o.call(this,t,e,n)}var o=t("./SyntheticUIEvent"),r={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null};o.augmentClass(n,r),e.exports=n},{"./SyntheticUIEvent":91}],91:[function(t,e){"use strict";function n(t,e,n){o.call(this,t,e,n)}var o=t("./SyntheticEvent"),r={view:null,detail:null};o.augmentClass(n,r),e.exports=n},{"./SyntheticEvent":86}],92:[function(t,e){"use strict";function n(t,e,n){o.call(this,t,e,n)}var o=t("./SyntheticMouseEvent"),r={deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null};o.augmentClass(n,r),e.exports=n},{"./SyntheticMouseEvent":89}],93:[function(t,e){"use strict";var n=t("./invariant"),o={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this.timingMetrics||(this.timingMetrics={}),this.timingMetrics.methodInvocationTime=0,this.timingMetrics.wrapperInitTimes?this.timingMetrics.wrapperInitTimes.length=0:this.timingMetrics.wrapperInitTimes=[],this.timingMetrics.wrapperCloseTimes?this.timingMetrics.wrapperCloseTimes.length=0:this.timingMetrics.wrapperCloseTimes=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(t,e,o,r,i,a,s,u){n(!this.isInTransaction());var c,l,p=Date.now();try{this._isInTransaction=!0,c=!0,this.initializeAll(0),l=t.call(e,o,r,i,a,s,u),c=!1}finally{var d=Date.now();this.methodInvocationTime+=d-p;try{if(c)try{this.closeAll(0)}catch(h){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return l},initializeAll:function(t){for(var e=this.transactionWrappers,n=this.timingMetrics.wrapperInitTimes,o=t;o<e.length;o++){var i=Date.now(),a=e[o];try{this.wrapperInitData[o]=r.OBSERVED_ERROR,this.wrapperInitData[o]=a.initialize?a.initialize.call(this):null}finally{var s=n[o],u=Date.now();if(n[o]=(s||0)+(u-i),this.wrapperInitData[o]===r.OBSERVED_ERROR)try{this.initializeAll(o+1)}catch(c){}}}},closeAll:function(t){n(this.isInTransaction());for(var e=this.transactionWrappers,o=this.timingMetrics.wrapperCloseTimes,i=t;i<e.length;i++){var a,s=e[i],u=Date.now(),c=this.wrapperInitData[i];try{a=!0,c!==r.OBSERVED_ERROR&&s.close&&s.close.call(this,c),a=!1}finally{var l=Date.now(),p=o[i];if(o[i]=(p||0)+(l-u),a)try{this.closeAll(i+1)}catch(d){}}}this.wrapperInitData.length=0}},r={Mixin:o,OBSERVED_ERROR:{}};e.exports=r},{"./invariant":122}],94:[function(t,e){"use strict";var n=t("./getUnboundedScrollPosition"),o={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(){var t=n(window);o.currentScrollLeft=t.x,o.currentScrollTop=t.y}};e.exports=o},{"./getUnboundedScrollPosition":119}],95:[function(t,e){"use strict";function n(t,e){if(o(null!=e),null==t)return e;var n=Array.isArray(t),r=Array.isArray(e);return n?t.concat(e):r?[t].concat(e):[t,e]}var o=t("./invariant");e.exports=n},{"./invariant":122}],96:[function(t,e){"use strict";function n(t){for(var e=1,n=0,r=0;r<t.length;r++)e=(e+t.charCodeAt(r))%o,n=(n+e)%o;return e|n<<16}var o=65521;e.exports=n},{}],97:[function(t,e){"use strict";function n(t,e){var n=o.mergeProps(e,t.props);return!n.hasOwnProperty(i)&&t.props.hasOwnProperty(i)&&(n.children=t.props.children),t.constructor.ConvenienceConstructor(n)}var o=t("./ReactPropTransferer"),r=t("./keyOf"),i=(t("./warning"),r({children:null}));e.exports=n},{"./ReactPropTransferer":64,"./keyOf":129,"./warning":144}],98:[function(t,e){function n(t,e){return t&&e?t===e?!0:o(t)?!1:o(e)?n(t,e.parentNode):t.contains?t.contains(e):t.compareDocumentPosition?!!(16&t.compareDocumentPosition(e)):!1:!1}var o=t("./isTextNode");e.exports=n},{"./isTextNode":126}],99:[function(t,e){function n(t,e,n,o,r,i){t=t||{};for(var a,s=[e,n,o,r,i],u=0;s[u];){a=s[u++];for(var c in a)t[c]=a[c];a.hasOwnProperty&&a.hasOwnProperty("toString")&&"undefined"!=typeof a.toString&&t.toString!==a.toString&&(t.toString=a.toString)}return t}e.exports=n},{}],100:[function(t,e){function n(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"length"in t&&!("setInterval"in t)&&"number"!=typeof t.nodeType&&(Array.isArray(t)||"callee"in t||"item"in t)}function o(t){return n(t)?Array.isArray(t)?t.slice():r(t):[t]}var r=t("./toArray");e.exports=o},{"./toArray":141}],101:[function(t,e){"use strict";function n(t){var e=o.createClass({displayName:"ReactFullPageComponent"+(t.componentConstructor.displayName||""),componentWillUnmount:function(){r(!1)},render:function(){return this.transferPropsTo(t(null,this.props.children))}});return e}var o=t("./ReactCompositeComponent"),r=t("./invariant");e.exports=n},{"./ReactCompositeComponent":33,"./invariant":122}],102:[function(t,e){function n(t){var e=t.match(c);return e&&e[1].toLowerCase()}function o(t,e){var o=u;s(!!u);var r=n(t),c=r&&a(r);if(c){o.innerHTML=c[1]+t+c[2];for(var l=c[0];l--;)o=o.lastChild}else o.innerHTML=t;var p=o.getElementsByTagName("script");p.length&&(s(e),i(p).forEach(e));for(var d=i(o.childNodes);o.lastChild;)o.removeChild(o.lastChild);return d}var r=t("./ExecutionEnvironment"),i=t("./createArrayFrom"),a=t("./getMarkupWrap"),s=t("./invariant"),u=r.canUseDOM?document.createElement("div"):null,c=/^\s*<(\w+)/;e.exports=o},{"./ExecutionEnvironment":21,"./createArrayFrom":100,"./getMarkupWrap":115,"./invariant":122}],103:[function(t,e){function n(t,e){var n={},o=Array.isArray(e);"undefined"==typeof e&&(e=!0);for(var r=t.length;r--;)n[t[r]]=o?e[r]:e;return n}e.exports=n},{}],104:[function(t,e){function n(t){return"object"==typeof t?Object.keys(t).filter(function(e){return t[e]}).join(" "):Array.prototype.join.call(arguments," ")}e.exports=n},{}],105:[function(t,e){"use strict";function n(t,e){var n=null==e||"boolean"==typeof e||""===e;if(n)return"";var r=isNaN(e);return r||0===e||o.isUnitlessNumber[t]?""+e:e+"px"}var o=t("./CSSProperty");e.exports=n},{"./CSSProperty":3}],106:[function(t,e){function n(t){return function(){return t}}function o(){}var r=t("./copyProperties");r(o,{thatReturns:n,thatReturnsFalse:n(!1),thatReturnsTrue:n(!0),thatReturnsNull:n(null),thatReturnsThis:function(){return this},thatReturnsArgument:function(t){return t}}),e.exports=o},{"./copyProperties":99}],107:[function(t,e){"use strict";var n={};e.exports=n},{}],108:[function(t,e){"use strict";function n(t){return r[t]}function o(t){return(""+t).replace(i,n)}var r={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;","/":"&#x2f;"},i=/[&><"'\/]/g;e.exports=o},{}],109:[function(t,e){"use strict";function n(t,e,n){var o=t;r(!o.hasOwnProperty(n)),null!=e&&(o[n]=e)}function o(t){if(null==t)return t;var e={};return i(t,n,e),e}var r=t("./invariant"),i=t("./traverseAllChildren");e.exports=o},{"./invariant":122,"./traverseAllChildren":142}],110:[function(t,e){"use strict";function n(t){t.disabled||t.focus()}e.exports=n},{}],111:[function(t,e){"use strict";var n=function(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)};e.exports=n},{}],112:[function(t,e){function n(){try{return document.activeElement||document.body}catch(t){return document.body}}e.exports=n},{}],113:[function(t,e){"use strict";function n(t){return"key"in t?o[t.key]||t.key:r[t.which||t.keyCode]||"Unidentified"}var o={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},r={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};e.exports=n},{}],114:[function(t,e){"use strict";function n(t){var e=t.target||t.srcElement||window;return 3===e.nodeType?e.parentNode:e}e.exports=n},{}],115:[function(t,e){function n(t){return r(!!i),p.hasOwnProperty(t)||(t="*"),a.hasOwnProperty(t)||(i.innerHTML="*"===t?"<link />":"<"+t+"></"+t+">",a[t]=!i.firstChild),a[t]?p[t]:null}var o=t("./ExecutionEnvironment"),r=t("./invariant"),i=o.canUseDOM?document.createElement("div"):null,a={circle:!0,defs:!0,g:!0,line:!0,linearGradient:!0,path:!0,polygon:!0,polyline:!0,radialGradient:!0,rect:!0,stop:!0,text:!0},s=[1,'<select multiple="true">',"</select>"],u=[1,"<table>","</table>"],c=[3,"<table><tbody><tr>","</tr></tbody></table>"],l=[1,"<svg>","</svg>"],p={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:s,option:s,caption:u,colgroup:u,tbody:u,tfoot:u,thead:u,td:c,th:c,circle:l,defs:l,g:l,line:l,linearGradient:l,path:l,polygon:l,polyline:l,radialGradient:l,rect:l,stop:l,text:l};e.exports=n},{"./ExecutionEnvironment":21,"./invariant":122}],116:[function(t,e){"use strict";function n(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function o(t){for(;t;){if(t.nextSibling)return t.nextSibling;t=t.parentNode}}function r(t,e){for(var r=n(t),i=0,a=0;r;){if(3==r.nodeType){if(a=i+r.textContent.length,e>=i&&a>=e)return{node:r,offset:e-i};i=a}r=n(o(r))}}e.exports=r},{}],117:[function(t,e){"use strict";function n(t){return t?t.nodeType===o?t.documentElement:t.firstChild:null}var o=9;e.exports=n},{}],118:[function(t,e){"use strict";function n(){return!r&&o.canUseDOM&&(r="textContent"in document.createElement("div")?"textContent":"innerText"),r}var o=t("./ExecutionEnvironment"),r=null;e.exports=n},{"./ExecutionEnvironment":21}],119:[function(t,e){"use strict";function n(t){return t===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:t.scrollLeft,y:t.scrollTop}}e.exports=n},{}],120:[function(t,e){function n(t){return t.replace(o,"-$1").toLowerCase()}var o=/([A-Z])/g;e.exports=n},{}],121:[function(t,e){"use strict";function n(t){return t._descriptor=t,t}t("./warning"),e.exports=n},{"./warning":144}],122:[function(t,e){"use strict";var n=function(t){if(!t){var e=new Error("Minified exception occured; use the non-minified dev environment for the full error message and additional helpful warnings.");throw e.framesToPop=1,e}};e.exports=n},{}],123:[function(t,e){"use strict";function n(t,e){if(!r.canUseDOM||e&&!("addEventListener"in document))return!1;var n="on"+t,i=n in document;if(!i){var a=document.createElement("div");a.setAttribute(n,"return;"),i="function"==typeof a[n]}return!i&&o&&"wheel"===t&&(i=document.implementation.hasFeature("Events.wheel","3.0")),i}var o,r=t("./ExecutionEnvironment");r.canUseDOM&&(o=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),e.exports=n},{"./ExecutionEnvironment":21}],124:[function(t,e){function n(t){return!(!t||!("function"==typeof Node?t instanceof Node:"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName))}e.exports=n},{}],125:[function(t,e){"use strict";function n(t){return t&&("INPUT"===t.nodeName&&o[t.type]||"TEXTAREA"===t.nodeName)}var o={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};e.exports=n},{}],126:[function(t,e){function n(t){return o(t)&&3==t.nodeType}var o=t("./isNode");e.exports=n},{"./isNode":124}],127:[function(t,e){"use strict";function n(t){t||(t="");var e,n=arguments.length;if(n>1)for(var o=1;n>o;o++)e=arguments[o],e&&(t+=" "+e);return t}e.exports=n},{}],128:[function(t,e){"use strict";var n=t("./invariant"),o=function(t){var e,o={};n(t instanceof Object&&!Array.isArray(t));for(e in t)t.hasOwnProperty(e)&&(o[e]=e);return o};e.exports=o},{"./invariant":122}],129:[function(t,e){var n=function(t){var e;for(e in t)if(t.hasOwnProperty(e))return e;return null};e.exports=n},{}],130:[function(t,e){"use strict";function n(t){var e={};return function(n){return e.hasOwnProperty(n)?e[n]:e[n]=t.call(this,n)}}e.exports=n},{}],131:[function(t,e){"use strict";var n=t("./mergeInto"),o=function(t,e){var o={};return n(o,t),n(o,e),o};e.exports=o},{"./mergeInto":133}],132:[function(t,e){"use strict";var n=t("./invariant"),o=t("./keyMirror"),r=36,i=function(t){return"object"!=typeof t||null===t},a={MAX_MERGE_DEPTH:r,isTerminal:i,normalizeMergeArg:function(t){return void 0===t||null===t?{}:t},checkMergeArrayArgs:function(t,e){n(Array.isArray(t)&&Array.isArray(e))},checkMergeObjectArgs:function(t,e){a.checkMergeObjectArg(t),a.checkMergeObjectArg(e)},checkMergeObjectArg:function(t){n(!i(t)&&!Array.isArray(t))},checkMergeLevel:function(t){n(r>t)},checkArrayStrategy:function(t){n(void 0===t||t in a.ArrayStrategies)},ArrayStrategies:o({Clobber:!0,IndexByIndex:!0})};e.exports=a},{"./invariant":122,"./keyMirror":128}],133:[function(t,e){"use strict";function n(t,e){if(r(t),null!=e){r(e);for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}}var o=t("./mergeHelpers"),r=o.checkMergeObjectArg;e.exports=n},{"./mergeHelpers":132}],134:[function(t,e){"use strict";var n=function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&(t.prototype[n]=e[n])};e.exports=n},{}],135:[function(t,e){"use strict";function n(t){o(t&&!/[^a-z0-9_]/.test(t))}var o=t("./invariant");e.exports=n},{"./invariant":122}],136:[function(t,e){"use strict";function n(t,e,n){if(!t)return null;var o=0,r={};for(var i in t)t.hasOwnProperty(i)&&(r[i]=e.call(n,t[i],i,o++));return r}e.exports=n},{}],137:[function(t,e){"use strict";function n(t,e,n){if(!t)return null;var o=0,r={};for(var i in t)t.hasOwnProperty(i)&&(r[i]=e.call(n,i,t[i],o++));return r}e.exports=n},{}],138:[function(t,e){"use strict";function n(t){return r(o.isValidComponent(t)),t}var o=t("./ReactComponent"),r=t("./invariant");e.exports=n},{"./ReactComponent":31,"./invariant":122}],139:[function(t,e){"use strict";function n(t,e){if(t===e)return!0;var n;for(n in t)if(t.hasOwnProperty(n)&&(!e.hasOwnProperty(n)||t[n]!==e[n]))return!1;for(n in e)if(e.hasOwnProperty(n)&&!t.hasOwnProperty(n))return!1;return!0}e.exports=n},{}],140:[function(t,e){"use strict";function n(t,e){return t&&e&&t.constructor===e.constructor&&(t.props&&t.props.key)===(e.props&&e.props.key)&&t._owner===e._owner?!0:!1}e.exports=n},{}],141:[function(t,e){function n(t){var e=t.length;if(o(!Array.isArray(t)&&("object"==typeof t||"function"==typeof t)),o("number"==typeof e),o(0===e||e-1 in t),t.hasOwnProperty)try{return Array.prototype.slice.call(t)}catch(n){}for(var r=Array(e),i=0;e>i;i++)r[i]=t[i];return r}var o=t("./invariant");e.exports=n},{"./invariant":122}],142:[function(t,e){"use strict";function n(t){return d[t]}function o(t,e){return t&&t.props&&null!=t.props.key?i(t.props.key):e.toString(36)}function r(t){return(""+t).replace(h,n)}function i(t){return"$"+r(t)}function a(t,e,n){null!==t&&void 0!==t&&f(t,"",0,e,n)}var s=t("./ReactInstanceHandles"),u=t("./ReactTextComponent"),c=t("./invariant"),l=s.SEPARATOR,p=":",d={"=":"=0",".":"=1",":":"=2"},h=/[=.:]/g,f=function(t,e,n,r,a){var s=0;if(Array.isArray(t))for(var d=0;d<t.length;d++){var h=t[d],m=e+(e?p:l)+o(h,d),v=n+s;s+=f(h,m,v,r,a)}else{var g=typeof t,y=""===e,C=y?l+o(t,0):e;if(null==t||"boolean"===g)r(a,null,C,n),s=1;else if(t.type&&t.type.prototype&&t.type.prototype.mountComponentIntoNode)r(a,t,C,n),s=1;else if("object"===g){c(!t||1!==t.nodeType);for(var E in t)t.hasOwnProperty(E)&&(s+=f(t[E],e+(e?p:l)+i(E)+p+o(t[E],0),n+s,r,a))}else if("string"===g){var R=new u(t);r(a,R,C,n),s+=1}else if("number"===g){var M=new u(""+t);r(a,M,C,n),s+=1}}return s};e.exports=a},{"./ReactInstanceHandles":55,"./ReactTextComponent":74,"./invariant":122}],143:[function(t,e){"use strict";function n(t){return Array.isArray(t)?t.concat():t&&"object"==typeof t?i(new t.constructor,t):t}function o(t,e,n){s(Array.isArray(t));var o=e[n];s(Array.isArray(o))}function r(t,e){if(s("object"==typeof e),e.hasOwnProperty(p))return s(1===Object.keys(e).length),e[p];var a=n(t);if(e.hasOwnProperty(d)){var h=e[d];s(h&&"object"==typeof h),s(a&&"object"==typeof a),i(a,e[d])}e.hasOwnProperty(u)&&(o(t,e,u),e[u].forEach(function(t){a.push(t)})),e.hasOwnProperty(c)&&(o(t,e,c),e[c].forEach(function(t){a.unshift(t)})),e.hasOwnProperty(l)&&(s(Array.isArray(t)),s(Array.isArray(e[l])),e[l].forEach(function(t){s(Array.isArray(t)),a.splice.apply(a,t)}));for(var m in e)f[m]||(a[m]=r(t[m],e[m]));return a}var i=t("./copyProperties"),a=t("./keyOf"),s=t("./invariant"),u=a({$push:null}),c=a({$unshift:null}),l=a({$splice:null}),p=a({$set:null}),d=a({$merge:null}),h=[u,c,l,p,d],f={};h.forEach(function(t){f[t]=!0}),e.exports=r},{"./copyProperties":99,"./invariant":122,"./keyOf":129}],144:[function(t,e){"use strict";var n=t("./emptyFunction"),o=n;e.exports=o},{"./emptyFunction":106}]},{},[79])(79)});
define('tau/core/injector',["require","Underscore","tau/core/class","tau/utils/utils.debug"],function(e){var r=e("Underscore"),s=e("tau/core/class"),t=e("tau/utils/utils.debug"),i=s.extend({init:function(){this._services={}},register:function(e,s){t.assertError(r.isString(e),"Service name should be a string"),t.assertError(""!==e,"Service error should not be empty"),t.assertWarn(function(){return!r.has(this._services,e)}.bind(this),'Re-assigning the service value for "'+e+'" service name could be an error'),t.assertError(void 0!=s,"Service should not be null or undefined"),this._services[e]=s},resolve:function(e){var r=this._services[e];if(!r)throw new Error('Service "'+e+'" is not registered');return r},release:function(e){t.assertWarn(function(){return r.has(this._services,e)}.bind(this),'Attempting to release an unregistered service by name "'+e+'".'),delete this._services[e]},releaseAll:function(){this._services={}},createModule:function(e){var s=e.__injectorDependencies,t=r.map(s,this.resolve,this);return e.apply(this,t)}});return i.defineModule=function(e,s){var t=function(){return s.apply(this,r.toArray(arguments))};return t.__injectorDependencies=r.toArray(e),t},i});
define('libs/react/react-ex',["require","Underscore","react","tau/core/injector"],function(e){var r=e("Underscore"),t=e("react"),n=e("tau/core/injector");return Object.create(t,{defineClass:{value:function(e,a){return n.defineModule(e,function(){var e=a.apply(null,r.toArray(arguments));return t.createClass(e)})},writable:!1},resolveClass:{value:function(e,r,t){return e.createModule(r)(t)},writable:!1}})});
define('tau/components/board.menu/services/board.menu.acid.listener',["require","Underscore","jQuery"],function(e){var r=e("Underscore"),i=e("jQuery");return{getAcidTokenStream:function(e){var n,a={},t=r.Callbacks(),c=i.Deferred(),d={callback:t,getPromise:function(){return c.promise()},getValue:function(){if(!n)throw new Error("Acid value is not available yet");return n.value}},l=function(e,r){var a={id:e,acid:r};n={value:a},"pending"==c.state()?c.resolve(a):c=i.Deferred().resolve(a),t.fire(a)};return e.get({fields:["acid"],callback:function(e){l(e.id,e.acid)}}),e.unbind({listener:a}),e.bind({listener:a,fields:["acid"],callback:function(r){l(e.settings.id,r.acid)}}),d}}});
define('tau/components/board.menu/models/board.menu.model',["require","jQuery","tau/core/class","./../services/board.menu.acid.listener"],function(e){var r=e("jQuery"),t=e("tau/core/class"),i=e("./../services/board.menu.acid.listener");return t.extend({init:function(e,r){this._componentBus=r,this._configurator=e,this._boardApiService=e.getBoardApiService(),this._loggedUser=e.getLoggedUser(),this._urlBuilder=e.getUrlBuilder(),this._acidStream=i.getAcidTokenStream(e.getAppStateStore()),this.acidUpdated=this._acidStream.callback},loadBoards:function(){return r.when(this._acidStream.getPromise(),this._boardApiService.getBoardsForUser(this._loggedUser.id)).then(function(e,r){return r.data})},getBoardLink:function(e){return this._urlBuilder.getRelativeBoardUrl(e,this._acidStream.getValue())},createBoard:function(){var e=r.Deferred();return this._configurator.getBoardDefinitionFactory().createBoard().done(function(r){this._componentBus.fire("add.board",{board:{id:r.id}}),this._configurator.setConfig("tmpBoardIsJustAdded",!0),e.resolve(r)}.bind(this)),e},redirectToBoard:function(e){var r=this._urlBuilder.getRelativeBoardUrl(e);this._configurator.getRouting().redirect(r)}})});
define('tau/components/board.menu/models/board.menu.list.model',["require","Underscore"],function(e){var r=e("Underscore");return{applyBoardFilter:function(e,n){return n&&n.length?(n=n.toLowerCase(),r.filter(e,function(e){return e.name.toLowerCase().indexOf(n)>=0})):e},filterHiddenBoards:function(e,n){return r.filter(e,function(e){return e.menuIsVisible===!0||e.boardId===n})}}});

/** @jsx React.DOM */
define('tau/components/board.menu/views/board.menu.view',['require','Underscore','libs/react/react-ex','./../models/board.menu.list.model'],function(require) {
    var _ = require('Underscore');

    var React = require('libs/react/react-ex');

    var listModel = require('./../models/board.menu.list.model');

    var dependencies = [
        'boardMenuListView',
        'boardMenuActionsView',
        'boardMenuSearchView',
        'boardSettingsService'
    ];

    return React.defineClass(dependencies, function(ListView, ActionsView, SearchView, boardSettingsService) {

        return {
            getInitialState: function() {
                return {
                    allBoards: [],
                    filterText: '',
                    currentBoardId: '',
                    showHidden: false,
                    focusedBoardId: '',
                    isLoading: false
                };
            },

            componentWillMount: function() {
                this.setState({currentBoardId: boardSettingsService.getCurrentSettings().id});

                this.props.model.acidUpdated.add(this._onAcidUpdated, this);
                boardSettingsService.settingsUpdated.add(this._onBoardSettingsUpdated, this);
            },

            componentWillUnmount: function() {
                this.props.model.acidUpdated.remove(this);
                boardSettingsService.settingsUpdated.remove(this);
            },

            componentDidMount: function() {
                this.setState({isLoading: true});

                this.props.model.loadBoards()
                    .done(this._whenBoardsLoaded)
                    .fail(this._whenBoardLoadingFailed);
            },

            _whenBoardsLoaded: function(data) {
                var boards = _.map(data.items, this._createBoardItem);
                this.setState({
                    isLoading: false,
                    allBoards: boards
                });
            },

            _whenBoardLoadingFailed: function() {
                this.setState({
                    isLoading: false,
                    allBoards: []
                });
            },

            _createBoardItem: function(boardData) {
                // TODO: perhaps create and return React component here?
                // TODO: or maybe a board view model wrapper?
                var boardId = boardData.key || boardData.id;

                return {
                    boardId: boardId,
                    link: this.props.model.getBoardLink(boardId),
                    name: boardData.name || boardId,
                    viewMode: boardData.viewMode,
                    isShared: boardData.isShared,
                    menuIsVisible: boardData.menuIsVisible,
                    edit: !!boardData.edit
                };
            },

            _onAcidUpdated: function() {
                _.each(this.state.allBoards, function(board) {
                    board.link = this.props.model.getBoardLink(board.boardId);
                }, this);

                this.setState({allBoards: this.state.allBoards});
            },

            _onBoardSettingsUpdated: function(newSettings) {
                var newBoardId = boardSettingsService.getCurrentSettings().id;
                this.setState({currentBoardId: newBoardId});

                var currentBoard = _.find(this.state.allBoards, function(board) {
                    return board.boardId === newBoardId;
                });

                if (currentBoard) {
                    // FIXME: looks ugly
                    _.each(newSettings, function(v, k) {
                        if (_.has(currentBoard, k)) {
                            currentBoard[k] = v;
                        }
                    });

                    this.setState({allBoards: this.state.allBoards});
                }
            },

            _getVisibleBoards: function() {
                var filteredBoards = listModel.applyBoardFilter(this.state.allBoards, this.state.filterText);
                if (this.state.showHidden) {
                    return filteredBoards;
                }

                return listModel.filterHiddenBoards(filteredBoards, this.state.currentBoardId);
            },

            _hasHiddenBoards: function() {
                return _.some(this.state.allBoards, function(board) {
                    return board.menuIsVisible === false; // board is visible if true or not present
                });
            },

            _createBoard: function() {
                this.props.model.createBoard().done(function(boardDefinition) {
                    var boardItem = this._createBoardItem(boardDefinition);
                    this.state.allBoards.push(boardItem);
                    this.setState({allBoards: this.state.allBoards});

                    this.props.model.redirectToBoard(boardDefinition.id);
                }.bind(this));
            },

            render: function() {
                if (this.state.isLoading) {
                    return React.DOM.div( {className:"t3-views-navigator"});
                }

                var visibleBoards = this._getVisibleBoards();

                return (
                    React.DOM.div( {className:"t3-views-navigator"}, 
                        SearchView(
                            {boards:visibleBoards,
                            searchTerm:this.state.filterText,
                            currentBoardId:this.state.currentBoardId,
                            focusedBoardId:this.state.focusedBoardId,
                            model:this.props.model}),
                        ListView(
                            {boards:visibleBoards,
                            currentBoardId:this.state.currentBoardId,
                            focusedBoardId:this.state.focusedBoardId}),
                        ActionsView(
                            {hasHiddenBoards:this._hasHiddenBoards(),
                            showHidden:this.state.showHidden,
                            createBoard:this._createBoard} )
                    )
                    );
            }
        }
    });
});

define('tau/components/board.menu/extensions/board.menu.extension',["require","tau/core/extension.base","libs/react/react-ex","./../models/board.menu.model","./../views/board.menu.view"],function(e){var n=e("tau/core/extension.base"),r=e("libs/react/react-ex"),i=e("./../models/board.menu.model"),o=e("./../views/board.menu.view");return n.extend({"bus afterInit":function(){this.fire("dataBind")},"bus board.menu.config.ready":function(e,n){var a=new i(n.configurator,this.bus),s=r.resolveClass(n.serviceScope,o,{model:a}),t=r.renderComponent(s,n.element);this.fire("_board.menu.main.view",t)}})});
define('tau/components/board.menu/board.menu.config',[],function(){return{watchedBoardSettingsFields:["name","isShared","viewMode","acid","menuIsVisible","menuNumericPriority","edit"]}});
define('tau/components/board.menu/services/board.menu.board.settings.service',["require","Underscore","tau/core/class","./../board.menu.config"],function(i){var t=i("Underscore"),s=i("tau/core/class"),e=i("./../board.menu.config");return s.extend({init:function(i){this.settingsUpdated=t.Callbacks(),this._service=i,this._initSubscriptions()},getCurrentSettings:function(){return this._service.settings},getCurrentService:function(){return this._service},setNewBoardSettingsService:function(i){var t=this._service;t!==i&&(this._disposeSubscriptions(),this._service=i,this._initSubscriptions(),this.settingsUpdated.fire(i.settings))},_initSubscriptions:function(){this._service.bind({listener:this,fields:e.watchedBoardSettingsFields,callback:function(){this.settingsUpdated.fire(this._service.settings)}.bind(this)})},_disposeSubscriptions:function(){this._service.unbind({listener:this})},destroy:function(){this._disposeSubscriptions()}})});
define('tau/components/board.menu/models/board.menu.operations.model',["require","Underscore"],function(e){var t=e("Underscore");return{toggleBoardEditMode:function(e){var n=e.getCurrentService();return n.get({fields:["edit"]}).then(function(e){var r,i,s=e.edit&&e.cells&&0===e.cells.types.length;return s?(r={emptyCardsSet:new Date},i=!0):(r={edit:!e.edit},i=r.edit),n.set({set:r}).then(t.constant(i))})},toggleBoardVisibility:function(e){var n=e.getCurrentService();return n.get({fields:["menuIsVisible"]}).then(function(e){var r={menuIsVisible:!e.menuIsVisible},i=r.menuIsVisible;return n.set({set:r}).then(t.constant(i))})}}});
define('tau/components/board.menu/templates/board.menu.context.menu.template',["tau/core/templates-factory"],function(o){var i={name:"board.menu.context.menu",engine:"jqote2",markup:['<div class="ui-drop-down t3-views-navigator-context-menu">','    <div role="list" class="drop-down-list">','        <div class="drop-down-list__inner i-inner">','            <div role="option" class="i-role-menu-action-setup drop-down-option"><%= this.isCurrentBoard && this.board.edit ? "Finish setup" : "Set up"%></div>','            <div role="option" class="drop-down-separator"></div>','            <div role="option" class="i-role-menu-action-share drop-down-option">Share...</div>','            <div role="option" class="i-role-menu-action-rename drop-down-option">Rename</div>','            <div role="option" class="i-role-menu-action-favorites drop-down-option">Add to Favorites</div>','            <div role="option" class="i-role-menu-action-hide drop-down-option"><%= this.board.menuIsVisible ? "Hide" : "Show"%></div>','            <div role="option" class="drop-down-separator"></div>','            <div role="option" class="i-role-menu-action-remove drop-down-option">Remove</div>',"        </div>","    </div>","</div>"]};return o.register(i)});
define('tau/components/board.menu/services/board.menu.context.menu.service',["require","tau/core/class","./../models/board.menu.operations.model","../templates/board.menu.context.menu.template"],function(e){var t=e("tau/core/class"),i=e("./../models/board.menu.operations.model"),o=e("../templates/board.menu.context.menu.template");return t.extend({init:function(e,t,i,o,n,r){this.bus=r,this.templateFactory=e,this.boardSettingsService=t,this.boardApiService=i,this.urlBuilder=o,this.routingService=n},showMenu:function(e,t){var i=e.parents(".i-role-views-navigator"),o=function(){e.parent().removeClass("t3-opened"),e.data("ui-tauBubble")&&e.tauBubble("destroy")};o(),e.tauBubble({appendTo:i,showArrow:!1,content:this._getMenuContent(t),onPositionConfig:function(e){e.my="left top",e.at="left bottom"},onShow:function(){e.parent().addClass("t3-opened")},onHide:function(){o()},template:['<div class="tau-bubble t3-views-navigator-bubble">','    <div class="tau-bubble__inner" role="content"></div>',"</div>"].join("")}),e.tauBubble("show");var n=i.find(".tau-bubble");n.on("click",".i-role-menu-action-setup",function(){this._toggleEditSettings(t),o()}.bind(this)),n.on("click",".i-role-menu-action-hide",function(){this._toggleVisibility(t),o()}.bind(this))},_getMenuContent:function(e){var t=this.templateFactory.get(o.name);return t.bindPure({},e)},_toggleEditSettings:function(e){if(e.isCurrentBoard)i.toggleBoardEditMode(this.boardSettingsService);else{var t=function(){this.boardSettingsService.settingsUpdated.remove(t),setTimeout(function(){i.toggleBoardEditMode(this.boardSettingsService)}.bind(this),0)}.bind(this);this.boardSettingsService.settingsUpdated.add(t);var o=this.urlBuilder.getRelativeBoardUrl(e.board.boardId);this.routingService.redirect(o)}},_toggleVisibility:function(e){e.isCurrentBoard?i.toggleBoardVisibility(this.boardSettingsService):(this.boardApiService.setBoardData(e.board.boardId,{menuIsVisible:!e.board.menuIsVisible}),e.board.menuIsVisible=!e.board.menuIsVisible,this.bus.fire("board.menu.update.board",e.board))}})});
define('tau/components/board.menu/services/board.menu.settings.service',["require","tau/core/class"],function(e){var n=e("tau/core/class"),t="boardMenuShowHiddenBoards";return n.extend({init:function(e){this._settingsManager=e},getShowHiddenBoards:function(){return this._settingsManager.get({fields:[t]}).then(function(e){return!!e[t]})},setShowHiddenBoards:function(e){var n={};return n[t]=!!e,this._settingsManager.set({set:n})}})});

/** @jsx React.DOM */
define('tau/components/board.menu/views/board.menu.list.item.view',['require','jQuery','react'],function(require) {
    var $ = require('jQuery');

    var React = require('react');

    return React.createClass({
        render: function() {
            var board = this.props.board;

            return (
                React.DOM.li(null, 
                    React.DOM.a( {href:board.link}, 
                        React.DOM.div( {className:this._getClassName()}, 
                            React.DOM.div( {className:"t3-name"}, board.name),
                            React.DOM.div( {className:"t3-actions-trigger", onClick:this._showContextMenu})
                        )
                    )
                )
                );
        },

        _showContextMenu: function(event) {
            this.props.showContextMenu && this.props.showContextMenu(this.props.board, $(event.target));

            event.stopPropagation();
            event.preventDefault();
        },

        _getClassName: function() {
            var isVisible = this.props.board.menuIsVisible;
            var classes = {
                't3-view': true,
                't3-private': !this.props.board.isShared,
                't3-active': this.props.isCurrentBoard,
                't3-focused': this.props.isFocusedBoard,
                't3-hidden': isVisible === false
            };

            var viewModeName = (this.props.board.viewMode || '').toLowerCase();
            var viewModeClass = this._viewModeClassNames[viewModeName] || this._defaultViewModeClassName;
            classes[viewModeClass] = true;

            return React.addons.classSet(classes);
        },

        _viewModeClassNames: {
            'list': 't3-detailed-view',
            'newlist': 't3-list-view',
            'timeline': 't3-timeline-view'
        },

        _defaultViewModeClassName: 't3-grid-view'
    });
});


/** @jsx React.DOM */
define('tau/components/board.menu/views/board.menu.list.view',['require','libs/react/react-ex','./board.menu.list.item.view'],function(require) {
    var React = require('libs/react/react-ex');

    var ListItemView = require('./board.menu.list.item.view');

    return React.defineClass(
        ['boardMenuBus', 'boardContextMenuService'],
        function(bus, contextMenuService) {

            return {
                render: function() {
                    var boardItems = this.props.boards.map(function(board) {
                        return ListItemView({
                            board: board,
                            key: board.boardId,
                            isCurrentBoard: board.boardId === this.props.currentBoardId,
                            isFocusedBoard: board.boardId === this.props.focusedBoardId,
                            showContextMenu: this._showContextMenu
                        });
                     }.bind(this));

                    return React.DOM.ul( {className:"t3-views-list"}, boardItems);
                },

                _showContextMenu: function(board, $target) {
                    var templateConfig = {
                        board: board,
                        isCurrentBoard: board.boardId === this.props.currentBoardId
                    };

                    contextMenuService.showMenu($target, templateConfig);
                }
            }
        });
});


/** @jsx React.DOM */
define('tau/components/board.menu/views/board.menu.actions.view',['require','libs/react/react-ex'],function(require) {
    var React = require('libs/react/react-ex');

    return React.defineClass(['boardMenuBus', 'settingsService'], function(bus, settingsService) {
        return {
            componentDidMount: function() {
                settingsService.getShowHiddenBoards().then(this._setShowHidden);
            },

            render: function() {
                var toggleHiddenButton = this.props.hasHiddenBoards ?
                    React.DOM.div( {className:this._getToggleHiddenBoardsButtonClassName(), onClick:this._onToggleHiddenBoards}) :
                    null;

                return (
                    React.DOM.div( {className:"t3-controls"}, 
                        React.DOM.div( {className:"t3-control t3-add-view-trigger", onClick:this._onCreateBoard}),
                        toggleHiddenButton
                    )
                    );
            },

            _getToggleHiddenBoardsButtonClassName: function() {
                var cx = React.addons.classSet;
                var classes = {
                    't3-control': true,
                    't3-show-hidden-views-trigger': true,
                    't3-active': this.props.showHidden
                };

                return cx(classes);
            },

            _onToggleHiddenBoards: function() {
                var newValue = !this.props.showHidden;
                this._setShowHidden(newValue);
                settingsService.setShowHiddenBoards(newValue);
            },

            _onCreateBoard: function() {
                this.props.createBoard && this.props.createBoard();
            },

            _setShowHidden: function(show) {
                bus.fire('board.menu.toggle.hidden', show);
            }
        }
    });
});


/** @jsx React.DOM */
define('tau/components/board.menu/views/board.menu.search.view',['require','jQuery','libs/react/react-ex'],function(require) {
    var $ = require('jQuery');
    var React = require('libs/react/react-ex');

    return React.defineClass(['boardMenuBus'], function(bus) {
        return {
            getInitialState: function() {
                return {
                    isFocused: false
                };
            },

            render: function() {
                var className = [
                    't3-search',
                    this.state.isFocused ? 't3-active' : null
                ].join(' ');

                return (
                    React.DOM.div( {className:className}, 
                        React.DOM.input(
                            {className:"i-role-views-list-search",
                            type:"text",
                            value:this.props.searchTerm,
                            onChange:this._onSearchTermChanged,
                            onKeyDown:this._onKeyDown,
                            onFocus:this._onFocus,
                            onBlur:this._onBlur})
                    )
                    );
            },

            _onSearchTermChanged: function(e) {
                var filter = e.target.value;
                bus.fire('board.menu.update.search.filter', filter);
            },

            _onKeyDown: function(e) {
                var handler = this._getOperationForKey(e.keyCode);
                if (handler) {
                    handler();
                    e.preventDefault();
                }
            },

            _getOperationForKey: function(keyCode) {
                switch (keyCode) {
                    case $.ui.keyCode.DOWN:
                        return this._tryFocusNextBoard;
                    case $.ui.keyCode.UP:
                        return this._tryFocusPrevBoard;
                    case $.ui.keyCode.ENTER:
                        return this._trySwitchToFocusedBoard;
                }
            },

            _tryFocusNextBoard: function() {
                this._tryFocusWith(function(focusedIndex, boardCount) {
                    return focusedIndex < boardCount - 1 ? focusedIndex + 1 : 0;
                });
            },

            _tryFocusPrevBoard: function() {
                this._tryFocusWith(function(focusedIndex, boardCount) {
                    return focusedIndex > 0 ? focusedIndex - 1 : boardCount - 1;
                });
            },

            _tryFocusWith: function(getNextIndex) {
                if (this.props.boards.length > 0) {
                    var focusedIndex = this._getFocusedBoardIndex();
                    var nextIndex = getNextIndex(focusedIndex, this.props.boards.length);
                    var nextBoardId = this.props.boards[nextIndex].boardId;
                    bus.fire('board.menu.focus.board', nextBoardId);
                }
            },

            _trySwitchToFocusedBoard: function() {
                var focusedId = this.props.focusedBoardId;

                if (focusedId) {
                    // TODO: check that the board exists?
                    bus.fire('board.menu.switch.board', focusedId);
                    window.location.href = this.props.model.getBoardLink(focusedId);
                }
            },

            _getFocusedBoardIndex: function() {
                var focusedBoardId = this.props.focusedBoardId;
                return _.findIndex(this.props.boards, function(board) {
                    return board.boardId === focusedBoardId;
                });
            },

            _onFocus: function() {
                this.setState({isFocused: true});
            },

            _onBlur: function() {
                this.setState({isFocused: false});
            }
        }
    });
});

define('tau/components/board.menu/extensions/board.menu.config.extension',["require","./../board.menu.config","tau/core/extension.base","tau/core/injector","./../services/board.menu.board.settings.service","./../services/board.menu.context.menu.service","./../services/board.menu.settings.service","./../views/board.menu.list.view","./../views/board.menu.actions.view","./../views/board.menu.search.view"],function(e){var r=e("./../board.menu.config"),i=e("tau/core/extension.base"),t=e("tau/core/injector"),s=e("./../services/board.menu.board.settings.service"),n=e("./../services/board.menu.context.menu.service"),o=e("./../services/board.menu.settings.service"),a=e("./../views/board.menu.list.view"),d=e("./../views/board.menu.actions.view"),c=e("./../views/board.menu.search.view");return i.extend({"bus boardSettings.ready":function(e,i){i.boardSettings.get({fields:r.watchedBoardSettingsFields}).then(function(){this._boardSettingsService?this._boardSettingsService.setNewBoardSettingsService(i.boardSettings):(this._boardSettingsService=new s(i.boardSettings),this.fire("board.menu.board.settings.ready",this._boardSettingsService))}.bind(this))},"bus afterRender + initialize + board.menu.board.settings.ready":function(e,r,i,s){var u=i.context.configurator,b=this.bus,g=new t;g.register("boardMenuBus",b),g.register("boardSettingsService",s),g.register("settingsService",new o(u.getSettingsManager())),g.register("boardContextMenuService",new n(u.getTemplateFactory(),s,u.getBoardApiService(),u.getUrlBuilder(),u.getRouting(),b)),g.register("boardMenuListView",g.createModule(a)),g.register("boardMenuActionsView",g.createModule(d)),g.register("boardMenuSearchView",g.createModule(c));var v={configurator:u,element:r.element[0],serviceScope:g};this.fire("board.menu.config.ready",v)},destroy:function(){this._boardSettingsService&&this._boardSettingsService.destroy(),this._super()}})});
define('tau/components/board.menu/extensions/board.menu.dispatcher.extension',["require","tau/core/extension.base"],function(t){var e=t("tau/core/extension.base");return e.extend({"bus _board.menu.main.view":function(t,e){this._view=e},"bus board.menu.update.search.filter":function(t,e){this._setState({filterText:e})},"bus board.menu.toggle.hidden":function(t,e){this._setState({showHidden:e})},"bus board.menu.update.board":function(){this._setState({allBoards:this._view.state.allBoards})},"bus board.menu.focus.board":function(t,e){this._setState({focusedBoardId:e})},"bus board.menu.switch.board":function(t,e){this._setState({currentBoardId:e})},_setState:function(t){this._view&&this._view.setState(t)}})});
define('tau/components/component.board.menu',["require","Underscore","tau/components/component.creator","tau/components/board.menu/templates/board.menu.template","tau/components/board.menu/extensions/board.menu.extension","tau/components/board.menu/extensions/board.menu.config.extension","tau/components/board.menu/extensions/board.menu.dispatcher.extension"],function(e){var n=(e("Underscore"),e("tau/components/component.creator")),o=e("tau/components/board.menu/templates/board.menu.template"),t=e("tau/components/board.menu/extensions/board.menu.extension"),a=e("tau/components/board.menu/extensions/board.menu.config.extension"),r=e("tau/components/board.menu/extensions/board.menu.dispatcher.extension");return{create:function(e){e=e||{};var s={extensions:[t,a,r],template:o};return n.create(s,e)}}});
define('tau/core/bus.profiler',["Underscore","tau/core/class"],function(t,e){var n=e.extend({init:function(t){var e=this;e.stream=[],e.stopped=!1;var n=t.fire;t.fire=function(){var t=arguments;!e.stopped&&e.registerEvent(t),n.apply(this,t)}},stop:function(){this.stopped=!0},registerEvent:function(t){var e=+new Date,n={tick:e,name:t[0],data:t[1]||{}};this.stream.push(n)},data:function(){return this.stream}});return n});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.view',["Underscore","jQuery","tau/core/extension.base.stateful","tau/ui/extensions/board.plus/ui.board.plus.utils"],function(e,t,l,n){var i=l.extend({name:"view.board.plus","bus view.build.skeleton":function(e){n.resetCardIds();var t=e.data;this.fire("template.bind",{name:"boardplus.skeleton",data:t})},getCoords:function(e){var t={};return e.hasAttribute("data-x")&&(t.x=e.getAttribute("data-x")),e.hasAttribute("data-y")&&(t.y=e.getAttribute("data-y")),t},bound:function(e){var t=this,l=e.data.element;this.fire("view.skeleton.built",{element:l});var n=l.find(".i-role-cell");t.fire("view.cellSlot.built.start",{cells:n}),n.each(function(e,l){var n=t.getCoords(l);t.fire("view.cellSlot.built",{element:this,data:n,id:this.id})}),t.fire("view.cellSlot.built.end",{cells:n})},"bus template.boardplus.skeleton.bound":function(e){this.bound(e)},"bus template.boardplus.skeleton.customized.bound":function(e){this.bound(e)},createFireBindTemplateHandler:function(){return e.bind(function(e){this.fire("template.bind",e)},this)},buildCellSkeleton:function(e,l,n){t.when(this.getCellTemplateConfig(e,l,n)).then(this.createFireBindTemplateHandler())},"bus configurator.ready:last + cardLayoutFactory.ready:last + view.build.cell.skeleton + view.skeleton.built:last":function(e,t,l,n,i){this.buildCellSkeleton(t,l,n,i)},buildAxisSkeleton:function(e,l,n){t.when(this.getAxisTemplateConfig(e,l,n)).then(this.createFireBindTemplateHandler())},"bus configurator.ready:last + cardLayoutFactory.ready:last + view.build.axis.skeleton + view.skeleton.built:last":function(e,t,l,n,i){this.buildAxisSkeleton(t,l,n,i)},getAxisTemplateConfig:function(e,t,l){return{name:"boardplus.cell.axis.skeleton",data:n.convertCellAxisData(l)}},getCellTemplateConfig:function(l,n,i){var a="boardplus.cell.grid.skeleton",o=t.Deferred();return n.getLayoutFactory().done(function(t){var n=e.extend({getLayout:t,configurator:l},i);o.resolve({name:a+".customized",data:n})}),o},getCellElement:function(e,t){var l=n.generateId(e),i=t.find("#"+l);return i},appendCellToBoardSkeleton:function(e,t){var l=e.data,n=e.element,i=this.getCellElement(l,t),a={cell:i,content:n};this.fire("view.cell.skeleton.element.beforeUpdate",a),i.append(n),this.fire("view.cell.skeleton.element.afterUpdate",a),this.fireCellSkeletonBuilt({element:i,data:l})},fireCellSkeletonBuilt:function(e){this.fire("view.cell.skeleton.built",e)},"bus view.skeleton.built:last + template.boardplus.cell.grid.skeleton.customized.bound":function(e){var t=e["view.skeleton.built"].data.element,l=e["template.boardplus.cell.grid.skeleton.customized.bound"].data;this.appendCellToBoardSkeleton(l,t)},"bus view.skeleton.built:last+template.boardplus.cell.axis.skeleton.bound":function(e){var t=e["view.skeleton.built"].data.element,l=e["template.boardplus.cell.axis.skeleton.bound"].data;this.appendCellToBoardSkeleton(l,t)},"bus view.cell.skeleton.built":function(e){var l=this,n=e.data,i=n.data,a=i.hasOwnProperty("x"),o=i.hasOwnProperty("y");if(a&&o){var r=n.element;r.find(".i-role-card").each(function(){var e=t(this);l.fire("view.card.skeleton.built",{element:e,data:{id:e.attr("data-id"),type:e.attr("data-type")}})})}}});return i});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.controller',["Underscore","jQuery","tau/core/extension.base"],function(e,t,i){var r=function(e,t){var i=this;e.refActualCellsCount+=1,e.refActualCellsData.push(t),e.refActualCellsCount===e.expectedCellsCount&&i.fire("overview.cells.skeletons.ready",{cells:e.refActualCellsData,cardGroups:e.refActualCellsCardsGroupedHash})};return i.extend({init:function(e){this._super(e),this.config=e},"bus initialize":function(e,t){var i=this._extractOptions(t.options||this.config.options,{dragndrop:{containmentRefreshTimeout:null},clipboard:{processTimeout:null},paging:{0:[100,100,100],1:[100,50,25],2:[50,25,25]}});this.fire("options.ready",i),this.fire("configurator.ready",e.data.context.configurator),this.fire("board.configurator.initialized",{configurator:e.data.context.configurator}),this.startLifeCycle(e.data)},"bus refresh":function(){this.startLifeCycle(this.config)},"bus configurator.ready > refresh":function(e,t){this.fire("configurator.ready",t)},"bus options.ready > refresh":function(e,t){this.fire("options.ready",t)},startLifeCycle:function(e){this.fire("start.lifecycle",e)},"bus start.lifecycle":function(){this.fire("afterInit",{})},"bus pastElement:last + afterRender":function(e,t,i){var r=i.element,s=t.element;s!==r&&this.fire("board.element.updated",{newElement:r,oldElement:s})},"bus view.skeleton.built":function(e){this.fire("afterRender",e.data),this.fire("pastElement",e.data)},"bus afterRender":function(e){var t=e.data.element,i=t.find(".i-role-grid");this.fire("$el.ready",t),this.fire("$grid.ready",i)},"bus model.sliceInfo.retrieved":function(e,t){this.fire("view.build.skeleton",t);var i=t.x.onPage,r=t.y.onPage,s=i||1,n=r||1,l=s*n+i+r;this.fire("metaInfo",{expectedCellsCount:l,refActualCellsCount:0,refActualCellsData:[]})},"bus model.cell.basicInfo.retrieved":function(t,i){var r=e.has(i,"x"),s=e.has(i,"y");r&&s?this.fire("view.build.cell.skeleton",i):this.fire("view.build.axis.skeleton",i)},"bus view.cellSlot.built.start":function(){this.fire("model.get.cell.basicInfo.start",{})},"bus view.cellSlot.built.end":function(){this.fire("model.get.cell.basicInfo.end",{})},fireOverviewCardsReady:function(e){this.fire("overview.cards.ready",{cards:e.refActualCellsCardsHash,cardGroups:e.refActualCellsCardsGroupedHash})},"bus metaInfo":function(){this.onViewCellSkeletonBuiltTick=r},"bus overview.cells.skeletons.ready":function(){this.onViewCellSkeletonBuiltTick=t.noop},"bus metaInfo:last + view.cell.skeleton.built":function(e,t,i){this.onViewCellSkeletonBuiltTick(t,i)},"bus metaInfo + view.cards.update.complete":function(e,t){this.fireOverviewCardsReady(t)},"bus view.skeleton.built + overview.cells.skeletons.ready":function(e){var t=e["view.skeleton.built"].data.element,i=e["overview.cells.skeletons.ready"].data.cells;this.fire("overview.board.ready",{element:t,cells:i})}})});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.templateBinder',["Underscore","jQuery","tau/core/extension.base"],function(e,t,a){return a.extend({"bus configurator.ready:last + template.bind":function(e,t,a){var n=a.name,r=a.data,i=a.config||{};a.element=t.getTemplateFactory().get(n).bind(i,r),this.fire("template."+n+".bound",a)},"bus configurator.ready:last + template.pure.bind":function(e,t,a){var n=a.name,r=a.data,i=a.config||{};a.html=t.getTemplateFactory().get(n).bindPure(i,r),this.fire("template."+n+".pure.bound",a)},"bus configurator.ready:last + template.multiply.pure.bind":function(t,a,n){var r=n.name,i=n.arrayData,u=n.config||{},o={},l=a.getTemplateFactory().get(r);o.items=e.map(i,function(e){return{html:l.bindPure(u,e),data:e}}),this.fire("template.multiply."+r+".pure.bound",o)}})});
define('tau/ui/extensions/ui.context-menu',["jQuery","Underscore","tau/core/class"],function(t,n,e){return e.extend({cardContextMenuCssClass:"tau-context-menu-selected",init:function(t){this.handlers=t.handlers,this.showSelectors=t.showSelectors,this.skipShowSelectors=t.skipShowSelectors,this.onShow=t.onShow,this.onHide=t.onHide},initContextMenu:function(){t.contextMenu("destroy"),t.contextMenu({selector:this.showSelectors.join(", "),skipShowSelector:this.skipShowSelectors.join(", "),callback:this.onContextMenuClick.bind(this),items:this.filterActions(this.handlers),events:{show:this.onContextMenuShow.bind(this),hide:this.onContextMenuHide.bind(this)},animation:{duration:0},zIndex:9999})},onContextMenuClick:function(t,n){this.trackContextMenuClick(t);var e=this.find(t,this.handlers),i=this.find(t,n.items);return e.itemClickCallback&&e.itemClickCallback(n,i)},trackContextMenuClick:function(t){taus.track({action:"click context menu",name:t,tags:["context menu",t,"click"]})},onContextMenuShow:function(t){this.onShow&&this.onShow(t);var e=t.$trigger;e.addClass(this.cardContextMenuCssClass),e.attr("data-card-selector","#"+e.parent().uniqueId().attr("id")+' .i-role-card[data-entity-id="'+e.data("entityId")+'"]'),n.each(this.flatten(this.handlers),function(n,e){var i=this.find(e,t.items);n.onShow&&n.onShow(t,i)},this)},onContextMenuHide:function(e){this.onHide&&this.onHide(e),t(".i-role-card").removeClass(this.cardContextMenuCssClass),n.each(this.flatten(this.handlers),function(t,n){var i=this.find(n,e.items);t.onHide&&t.onHide(i,e)},this)},find:function(t,n){var e=this.flatten(n);return e[t]},flatten:function(t){var e=function(t,n,i,s){return t[i]=n,null!==n&&n.hasOwnProperty("items")?s(n.items,e,t):t},i=function(t,e,i){return n.reduce(t,e,i,t)};return i(t,function(t,n,s){return e(t,n,s,i)},{})},filterActions:function(t){for(var n in t)if(t.hasOwnProperty(n)){var e=t[n];e.hasOwnProperty("isDisabled")&&e.isDisabled&&delete t[n]}return t},destroy:function(){t.contextMenu("destroy")}})});
define('tau/utils/utils.sliceApi',["Underscore"],function(n){var e={convertCellsResponseToComet:function(e){return n.flatten(n(e.data.items).map(function(e){return n(e.dynamic.items).map(function(n){return{x:e.x,y:e.y,data:n}})}))}};return e});
define('tau/ui/extensions/board.plus/card-context-menu/menu-action-item-base',["jQuery","Underscore","tau/core/class","tau/utils/utils.sliceApi","tau/utils/utils.serverErrorTranslator"],function(e,t,i,n){return i.extend({init:function(e){if(!(e.bus&&e.configurator&&e.sliceReady))throw new Error("action-base : required parameters are missing");this.settings=e},deleteCard:function(e,t){var i=[{location:"card",data:{id:e.id,data:{id:e.entityId,type:e.entityType}}}];t.fire("operation.execute",{name:"deleted",items:i})},updateCard:function(i,r,s){var a=this,d=a.settings.bus,o=a.settings.sliceReady,u=e.Deferred();if(r&&(t.has(r,"x")||t.has(r,"y"))){u.done(function(e){var t=n.convertCellsResponseToComet(e);0===t.length?a.deleteCard(s,d):d.fire("operation.execute",{name:"updated",items:t})});var l={dataItem:{id:{$eq:i.toString()}}};o.slice.cell(l).done(u.resolve)}return u},disabled:function(e,i){var n=this,r=n.data("entityType"),s=i.items[e],a=s.getSupportedEntityTypes();return null===a||t.contains(a,r)?t.contains(s.getDisabledEntityTypes(),r):!0},getSupportedEntityTypes:function(){return null},getDisabledEntityTypes:function(){}})});
define('tau/ui/extensions/board.plus/card-context-menu/menu-action-open-new-tab',["jQuery","Underscore","tau/ui/extensions/board.plus/card-context-menu/menu-action-item-base"],function(e,t,n){var r=n.extend({name:"Open in new tab",className:"i-role-card-context-menu-open-new-tab",init:function(e){this.configurator=e.configurator},itemClickCallback:function(e){var t=e.$trigger.data(),n=this.configurator.getUrlBuilder().getNewViewUrl(t.entityId,t.entityType,!0),r=this.getOpenStrategy();r(n)},getDisabledEntityTypes:function(){return["projectmember"]}}),i=function(e){window.open(e,"_blank")},o=function(e){var t=document.createElement("a");document.body.appendChild(t),t.href=e;var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!0,!1,!1,!0,0,null),t.dispatchEvent(n),t.parentNode.removeChild(t)};return r.prototype.getOpenStrategy=function(){var t=e.browser;return t.webkit?o:i},r});
define('tau/ui/behaviour/common/ui.behaviour.editableText',["Underscore","jQuery"],function(t,e){e.widget("ui.editableText",{_create:function(){this.element.textEditor(this.options)},enable:function(){this.element.data("textEditor").enable()},disable:function(){this.element.data("textEditor").disable()},activate:function(){var t=this.element.data("textEditor");t.isActive()?t.onBlur():t.onFocus()},setValidationErrors:function(e){this.element.addClass("ui-validationerror"),t.isString(e)&&this.element.attr("title",e)},resetValidationErrors:function(t){this.element.removeClass("ui-validationerror"),this.element.removeAttr("title",t)},setValue:function(t){this.element.text(t),this.element.data("textEditor").setInitialText(t)},destroy:function(){this._super()}})});
define('tau/ui/extensions/board.plus/card-context-menu/menu-action-item-rename',["jQuery","Underscore","tau/core/class","tau/ui/extensions/board.plus/card-context-menu/menu-action-item-base","tau/utils/utils.serverErrorTranslator","tau/ui/behaviour/common/ui.behaviour.editableText"],function(e,t,a,n){var i=a.extend({init:function(e,a){var n=this;n.$card=e,n.d=e.data(),n.c=e.closest(".i-role-cellholder").data(),n.externalSettings=a;var i=n.d.entityType,r=n.d.cardData;if(r.hasOwnProperty("name")){var d=t.extend({},r,{__type:i});a.configurator.getStore().register(d)}},fetchFormData:function(){var t=this,a=e.Deferred(),n=t.d.entityType,i=t.d.cardData;return t.externalSettings.configurator.getStore().get(n,{id:i.id,fields:["name"]},{success:a.resolve}).done(),a},saveAndUpdate:function(t){var a=this,n=a.d,i=a.c,r=(a.externalSettings.bus,a.externalSettings.configurator),d=e.Deferred();return d.done(function(){var e=a.$card.find(".i-role-name");e.text(t);var r=a.$card.data("cardData")||{};r.name=t,a.$card.data("cardData",r),a.externalSettings.updateCardAction(n.entityId,i,a.$card.data())}),r.getStore().save(n.entityType,{$set:{id:n.entityId,name:t}}).done({success:d.resolve}),d},suppressDblClick:function(e){e.on("dblclick.contextmenu",function(e){e.preventDefault(),e.stopPropagation()})},cancelSuppressDblClick:function(e){e.off("dblclick.contextmenu")}}),r=i.extend({getEditableCardStyle:function(){return["tau-card"]},getEditableCardInlineStyle:function(){return"font-size:0.813em;min-height:4em;height:4em;overflow:hidden;"},prepareEditableCard:function(){},getBubbleClassname:function(e){return["tau-cardtooltip","tau-cardtooltip_type_"+e]},create:function(){var a=this,n=a.$card,i=a.externalSettings.domWrapper;a.$destroyDefer=e.Deferred(),a.$bubbleShow=e.Deferred(),a.$dataReady=e.Deferred(),e.when(a.$bubbleShow,a.$dataReady).done(function(e,t){t.editableText("activate")});var r=a.d.entityType.toLowerCase(),d=this.getEditableCardStyle(r).join(" "),o=this.getEditableCardInlineStyle(),l=e(['<div class="'+d+'" style="padding: 0 !important;">','   <div style="display:none;"></div>','   <div style="display:none;"></div>','   <div style="padding: 8px 4px 8px 10px">','       <div class="i-role-name" style="'+o+'">Loading...</div>',"   </div>","</div>"].join(""));this.prepareEditableCard(n,l);var s="team"===r||"project"===r?"":"tau-"+r;l.addClass(s).addClass(a.externalSettings.activationCssClass);var c=a;a.fetchFormData().done(function(e){var n=l.find(".i-role-name"),i=t.bind(a.saveAndUpdate,a);n.editableText({enabled:!1,restoreText:!0,onSave:function(e){i(e).fail(t.bind(this.restoreInitialText,this))},onEditEnd:t.bind(function(){var e=this;e.$destroyDefer.resolve()},a)}),n.editableText("setValue",e.data.name),a.suppressDblClick(n),t.defer(function(){n.editableText("enable")}),a.$dataReady.resolve(n)});var u={className:this.getBubbleClassname(r).join(" "),template:['<div class="tau-bubble-board">','<div class="tau-bubble-board__inner tau-container" role="content" style="margin:0 0 0 0;"></div>',"</div>"].join(""),alignTo:n,within:i.board,showEvent:"",hideEvent:"",stackName:"context-menu-action",content:l,onPositionConfig:function(e){return e.my="left top-5",e.at="left top",e.collision="flipfit",e},onShow:a.$bubbleShow.resolve,onHide:function(e){n.css("opacity","");var t=e.find(".i-role-name");c.cancelSuppressDblClick(t),t.data("textEditor").onBlur(),t.editableText("disable")}};a.$bubbleShow.done(function(){n.css("opacity",0)});var b=e(".i-role-card-context-rename-holder");b=b.length?b:e('<div class="i-role-card-context-rename-holder"></div>').appendTo("body"),a.$destroyDefer.done(function(){b.tauBubble("hide")}),e(window).on("scroll",a.$destroyDefer.resolve),i.getGrid().on("scroll",a.$destroyDefer.resolve),b.tauBubble(u).tauBubble("show")}}),d=r.extend({getEditableCardStyle:function(e){return["tau-card-v2","tau-card-v2_type_"+e]},prepareEditableCard:function(e,t){var a=Math.max(e.height(),14),n=Math.max(e.width(),240);t.find(".i-role-name").css({height:a,"min-height":a}),t.css({width:n,"min-width":n})},getEditableCardInlineStyle:function(){return"font-size:0.813em;min-height:10em;height:10em;overflow:hidden;max-width:500px"},getBubbleClassname:function(){return["tau-ui-size-l"]}}),o=function(e,t){var a=t?"enable":"disable";e.data("uiDraggable")&&e.draggable(a)},l=i.extend({create:function(){var a,n=this;o(n.$card,!1),n.fetchFormData().done(t.bind(function(n){var i=this;i.$card.addClass(i.externalSettings.activationCssClass);var r=i.$card.find(".i-role-name");0===r.length&&(r.text(n.data.name),a=e('<div class="tau-card-title-container"><div class="tau-name i-role-name">'+n.data.name+"</div></div>"),i.$card.append(a),r=i.$card.find(".i-role-name")),r=r.eq(0),i.suppressDblClick(r);var d=this,l=t.bind(i.saveAndUpdate,i);r.editableText({enabled:!1,restoreText:!0,onSave:function(e){l(e).fail(t.bind(this.restoreInitialText,this))},onEditEnd:function(){d.cancelSuppressDblClick(r),r.editableText("disable"),r.css("background-color",r.data("color")),i.$card.removeClass(i.externalSettings.activationCssClass),a&&setTimeout(function(){a.remove()},1),o(i.$card,!0)}}),r.editableText("setValue",n.data.name),r.css("background-color",""),t.defer(function(){r.editableText("enable").editableText("activate")})},n))}}),s=["user","project","team","projectmember"];return n.extend({name:"Rename",className:"i-role-card-context-menu-rename",getDisabledEntityTypes:function(){return s},itemClickCallback:function(e){var a=this.settings,n=e.$trigger;a.updateCardAction=t.bind(this.updateCard,this);var i=n.closest(".i-role-cell").hasClass("i-role-clipboard-holder"),r=this.createRenameForm({vm:a.viewMode,zl:a.zoomLevelData.zoomLevel,isInClipboard:i,isCardCollapsed:!i&&n.closest(".i-role-cellholder").hasClass("tau-collapsed")},n,a);r.create()},createRenameForm:function(e,t,a){return e.isInClipboard?new l(t,a):"board"===e.vm&&e.isCardCollapsed?new r(t,a):"timeline"===e.vm?new d(t,a):"board"===e.vm&&e.zl<4||"list"===e.vm&&e.zl<3?new r(t,a):new l(t,a)}})});
define('tau/utils/utils.boardCard',["Underscore"],function(){var n={convertToEntity:function(n){return{entityType:{name:n.entityType},id:n.entityId}}};return n});
define('tau/ui/extensions/board.plus/card-context-menu/menu-bubbleCreator',["jQuery","Underscore","tau/utils/utils.boardCard","tau/core/class"],function(t,e,i,r){return r.extend({targetMarkerClass:"i-role-context-menu-bubble",init:function(r,a){this.$trigger=r,this.activationCssClass=a.settings.activationCssClass,this.propertiesToEvict=a.settings.propertiesToEvict,this.bus=a.settings.bus,this.configurator=a.settings.configurator,this.updateCardAction=e.bind(a.updateCard,a),this.cardData=r.data(),this.entity=i.convertToEntity(this.cardData),this.cardSelector='.i-role-permanent-card-is-editing.i-role-card[data-entity-id="'+this.entity.id+'"]',this.coords=r.closest(".i-role-cellholder").data(),t("."+this.targetMarkerClass).remove()},getAlignTo:function(e){var i=t(this.cardSelector),r=e.settings.viewMode;return"timeline"==r&&i.parent().is(".i-role-timeline-card-holder,.i-role-timeline-planner-card-holder")?i.parent():(0===i.length&&this.$trigger&&(i=t(this.$trigger.data("card-selector"))),i)},getTarget:function(){var e=t("."+this.targetMarkerClass);return 0===e.length&&(e=t("<div></div>").addClass(this.targetMarkerClass).appendTo("body")),e},createBubble:function(i){var r=this;if(this.$trigger.addClass("i-role-permanent-card-is-editing"),0===i.alignTo().length)return void this.$trigger.removeClass("i-role-permanent-card-is-editing");var a=this.getTarget(),n={cleanupOnHide:!0,target:a,showEvent:"",zIndex:99999},s=e.extend(n,i);r.propertiesToEvict.length>0&&r.configurator.getStore().evictProperties(r.entity.id,r.entity.entityType.name,r.propertiesToEvict),s.onShow=function(){t(r.cardSelector).addClass(r.activationCssClass),r.configurator.getStore().on({eventName:"afterSave",type:r.entity.entityType.name,listener:this,filter:{id:r.entity.id},changes:i.entitySubscriptionChanges},e.bind(function(t){var e=i.skipUpdateEntity&&i.skipUpdateEntity(t.data.cmd);if(!e){var n=r.updateCardAction(r.entity.id,r.coords,r.cardData);n.done(function(){var t=a.tauBubble("getAlignTo"),e=t.is(a)?"hide":"adjust";a.tauBubble(e)})}},this)),i.onBubbleShow&&i.onBubbleShow()},s.onHide=function(){t(r.cardSelector).removeClass(r.activationCssClass).removeClass("i-role-permanent-card-is-editing"),r.configurator.getStore().unbind(this),i.onBubbleHide&&i.onBubbleHide()},this.bus.fire("initBubble",s),a.tauBubble("show")}})});
define('tau/ui/extensions/board.plus/card-context-menu/menu-action-item-change-tags',["jQuery","Underscore","tau/ui/extensions/board.plus/card-context-menu/menu-action-item-base","tau/ui/extensions/board.plus/card-context-menu/menu-bubbleCreator"],function(t,e,n,o){return n.extend({name:"Change Tags",className:"i-role-card-context-menu-changeTags",getDisabledEntityTypes:function(){return["user","projectmember"]},getAlignTo:function(t){var e=t.getAlignTo(this);if(e.is(".i-role-timeline-card-holder,.i-role-timeline-planner-card-holder"))return e;var n=e.find(".tau-card-tags:visible");return n.length?n:e},itemClickCallback:function(n){var i=new o(n.$trigger,this),r=function(){var e=t(i.cardSelector).find(".tau-card-tags");return 0!==e.length&&e.is(":visible")?"left+20":"center"},a={context:{entity:i.entity},alignTo:e.bind(this.getAlignTo,this,i),stackName:"tagsContextMenu",dontCloseSelectors:[".tau-autocomplete__menu__tags"],skipUpdateEntity:function(t){return!(t&&t.config.$set&&e.has(t.config.$set,"tags"))},onPositionConfig:function(t){t.my="center bottom",t.at=r()+" top"},onArrowPositionConfig:function(t,e){"bottom"===e?(t.my="center bottom",t.at=r()+" top"):(t.my="center top",t.at=r()+" bottom")},componentsConfig:{components:[{type:"tags",selector:".i-role-tagslistcontainer",alwaysShowTagsEditField:!0,renderEditorFirst:!0}]}};i.createBubble(a)}})});
define('tau/ui/extensions/board.plus/card-context-menu/menu-action-item-add',["jQuery","Underscore","tau/ui/extensions/board.plus/card-context-menu/menu-action-item-base","tau/configurations/factory.container.config","tau/ui/extensions/board.plus/card-context-menu/menu-bubbleCreator","tau/models/page.entity/entity.context.factory"],function(t,e,n,o,i,a){return n.extend({name:"Add",className:"i-role-card-context-menu-add",getDisabledEntityTypes:function(){return["user","impediment","team","build","testcase","projectmember"]},itemClickCallback:function(t){var n=new i(t.$trigger,this);a.create(n.entity,this.settings.configurator).done(e.bind(function(t){this.createBubble(n,t)},this))},createBubble:function(e,n){var i=o.getConfigByType(e.entity.entityType.name),a=i.prototype.getEntityQuickAddOptions(),r={alignTo:e.getAlignTo.bind(e,this),appendMethod:"appendTo",stackName:"quickAddGeneral",className:"tau-quick-add-dialog-general tau-quick-add-dialog-entity",hideOnScroll:!1,dontCloseSelectors:["#ui-datepicker-div"],context:n,onPositionConfig:function(n){n.my="center top",n.at="center bottom",n.collision="fit none";var o=t(e.cardSelector);if(0===o.length)return n;var i=o.offset().top,a=t(window).height()-o.offset().top-o.height();return e.getTarget().tauBubble("widget").height()<i&&e.getTarget().tauBubble("widget").height()>a&&(n.my="center bottom",n.at="center top"),n},onArrowPositionConfig:function(t,e){return t.collision="fit none","bottom"===e?(t.my="center bottom",t.at="center top"):(t.my="center top",t.at="center bottom"),t},componentsConfig:{components:[{name:"entity quick add",type:"entity.quickAdd",options:a,useGlobalEntityViewer:!0}]}};e.createBubble(r)}})});
define('tau/ui/extensions/board.plus/card-context-menu/menu-action-item-assignments',["jQuery","Underscore","tau/ui/extensions/board.plus/card-context-menu/menu-action-item-base","tau/ui/extensions/board.plus/card-context-menu/menu-bubbleCreator","tau/utils/utils.boardCard","tau/configurations/factory.container.config","tau/models/page.entity/entity.context.factory"],function(e,t,n,r,i,a,o){return n.extend({name:"Change Assignment and Effort",className:"i-role-card-context-menu-change-assignments",getDisabledEntityTypes:function(){return["user","project","program","release","iteration","teamiteration","testcase","team","build","impediment","projectmember"]},itemClickCallback:function(e){var n=new r(e.$trigger,this),a=i.convertToEntity(e.$trigger.data());o.create(a,this.settings.configurator).done(t.bind(this.createBubble,this,n,e.$trigger,a))},createBubble:function(n,r,i,a){var o=function(){if("timeline"===this.settings.viewMode){var r=e(n.cardSelector),i=r.parent(".i-role-timeline-card-holder,.i-role-timeline-planner-card-holder");return i.length?i:r}var a=[n.cardSelector+" .tau-people:visible",n.cardSelector+" .tau-effort:visible",n.cardSelector],o=n.$trigger.data("card-selector");o&&a.push(o);var s;return t.find(a,function(t){return s=e(t),s.length>0}),s},s={context:a,className:"tau-context-menu-assignments",alignTo:t.bind(o,this),entitySubscriptionChanges:["effort","assignments"],closeOnStoreActions:!1,stackName:"assignmentsContextMenu",componentsConfig:{components:[{type:"assignmentsList",onBeforeInitializeComponent:function(e){e.on("afterRender",function(){t.defer(function(){n.getTarget().tauBubble("adjust")})})}}]}};n.createBubble(s)}})});
define('tau/ui/extensions/board.plus/card-context-menu/menu-action-item-delete',["jQuery","Underscore","tau/ui/extensions/board.plus/card-context-menu/menu-action-item-base","tau/utils/utils.serverErrorTranslator"],function(e,t,n){return n.extend({name:"Delete",className:"tau-context-menu-delete i-role-card-context-menu-delete",itemClickCallback:function(e,n){var i=n.$node;return i.tauConfirm({showEvent:null,content:["<h3>Are you sure?</h3>"].join(""),className:"context-menu-do-not-hide",callbacks:{success:t.bind(function(e,n,i,r){var o=n.$trigger.data();n.$menu.trigger("contextmenu:hide"),e.getStore().remove(o.entityType,{id:o.entityId}).done({success:t.bind(function(e,t,n,i){this.deleteCard(n,i)},this,e,i,o,r)})},this,this.settings.configurator,e,this.settings.domWrapper,this.settings.bus)}}),t.delay(t.bind(i.tauConfirm,i),100,"show"),!1},onHide:function(e){var t=e.$node;t.data("ui-tauConfirm")&&t.tauConfirm("hide")}})});
define('tau/models/finder.entity/queryBuilder',["Underscore","tau/core/class"],function(e,t){var r=t.extend({_collection:null,_orderBy:null,_orderDir:"asc",_page:1,_onPage:10,init:function(){this._parameters=[],this._values={},this._fields=[]},setFields:function(e){this._fields=e},setCollection:function(e){this._collection=e},registerParameters:function(t){this._parameters=e.toArray(t)},setParameter:function(t,r){if(!e.include(this._parameters,t))throw new Error('No "'+t+'" parameter for query');this._values[t]=r},unsetParameter:function(e){delete this._values[e]},setOnPage:function(e){this._onPage=e},setPage:function(e){this._page=e||1},setOrderBy:function(e){this._orderBy=e},setOrderDir:function(e){this._orderDir=e},create:function(){var e={fields:this._fields,$query:this.createWhere()},t=this.createPaging();e.$skip=t.skip,e.$limit=t.limit;var r="asc"===this._orderDir?"$orderBy":"$orderByDesc";return e[r]=this.createOrderBy(),{collection:this.createCollection(),request:e}},createCollection:function(){return this._collection},createWhere:function(){var t={};return e.each(this._values,function(e,r){t[r]=e}),t},createOrderBy:function(){return this._orderBy||"id"},createPaging:function(){return{limit:this._onPage,skip:(this._page-1)*this._onPage}}});return r});
define('tau/models/finder.entity/sliceQueryBuilder',["Underscore","./queryBuilder"],function(e,t){return t.extend({setAcid:function(e){this._acid=e},create:function(){var t=this._extractFields();if(0==e.values(t).length)return!1;var i=this._values,n={global:{acid:this._acid},cells:{filter:this.createFilter(i),types:e.map(t,e.bind(function(e,t){return{type:t,data:this.convertFields("",e)}},this)),ordering:{name:this._orderBy,direction:"asc"===this._orderDir?"Asc":"Desc"}},user:{cardFilter:i.user_dsl_filter}};return{collection:this.createCollection(),request:n,command:{$take:this._onPage,$skip:(this._page>0?this._page-1:0)*this._onPage}}},createFilter:function(t){var i=e.map(t,function(e,t){switch(t){case"_id":return"id == "+e;case"init_dsl":return e;case"user_dsl_filter":return null;case"firstName":case"lastName":case"email":case"name":return'"'+e+'" in '+t;case"entityState.name":return t+' is "'+e+'"';case"entityType.name":return null;case"project.id":case"_project.id":return-1==e?"project is None":"project.id == "+e;case"team.id":return-1==e?"team is None":t+" == "+e;case"release.id":return-1==e||null===e?"release is None":t+" == "+e;case"iteration.id":return-1==e||null===e?"iteration is None":t+" == "+e;default:return null}});return i=e.compact(i),i=e.map(i,function(e){return"("+e+")"}),"?"+i.join(" and ")},convertWhere:function(t,i){var n=e.map(i,e.bind(function(i,n){var r;if(!e.startsWith(i,"$"))return e.isObject(n)?this.convertWhere(t,n):n;switch(i){case"$and":return r=this.convertWhere(t,n),r.join(" AND ");case"$or":return r=this.convertWhere(t,n),r.join(" OR ")}},this));return e.compact(["?"+n.join(" AND "),t]).join(" AS ")},convertFields:function(t,i){var n=e.map(i,e.bind(function(i){if(e.isObject(i)&&!e.isArray(i)){var n=e.keys(i)[0];return this.convertFields(n,i[n])}return e.compact([t,i]).join(".")},this));return e.compact(["{"+n.join(",")+"}",t]).join(" AS ")},_extractFields:function(){var t=e.clone(this._fields),i=e.without(e.keys(this._values),"user_dsl_filter","init_dsl");return this._values["entityType.name"]&&(t=e.pick(t,this._values["entityType.name"])),i.length&&(e.indexOf(i,"entityState.name")>=0&&(t.impediment&&e.keys(t).length>1&&delete t.impediment,e.forEach(t,e.bind(function(i,n){var r=e.find(i,function(e){return"entityState"==e});r||delete t[n]},this))),e.indexOf(i,"team.id")>=0&&(delete t.teamiteration,e.forEach(t,e.bind(function(i,n){var r=e.find(i,function(t){return e.isObject(t)&&"team"==e.keys(t)[0]});r||delete t[n]},this))),(e.indexOf(i,"iteration.id")>=0||e.indexOf(i,"release.id")>=0)&&(delete t.iteration,delete t.testplanrun,delete t.build,e.forEach(t,e.bind(function(i,n){var r=e.find(i,function(t){return e.isObject(t)&&("release"==e.keys(t)[0]||"iteration"==e.keys(t)[0])});r||delete t[n]},this)))),t}})});
define('tau/models/finder.entity/sliceSearchResult',["tau/core/class"],function(t){var i=t.extend({init:function(t){var i=t.data.dynamic.items,e=i.length,a=t.data.fixed.items.length?!!t.data.fixed.items[0]:!1,n=t.command;this.items=i,this.paging={start:n.$skip||0,end:(n.$skip||0)+e,count:e,hasNext:a}}});return i});
define('tau/models/finder.entity/model.finder.entity.data',["Underscore","tau/core/extension.base","./sliceQueryBuilder","./sliceSearchResult"],function(e,t,i,r){return t.extend({"bus beforeInit":function(t,i){var r=i.config.context.configurator,n=i.config;n.acid=i.config.context.acid;var a=e.bind(this.fire,this);a("configurator.ready",r),this.createContext(r).then(e.bind(function(e){return n.acid=e.acid,this.processOptions(n,r)},this)).then(function(e){return e.allData=e.allData||{},a("options.ready",e),a("dataBind",{isAddPossible:e.allData.isAddPossible,fieldCaption:e.allData.fieldCaption,filter:e.filter,filterValues:e.filterValues,filterDisabled:e.filterDisabled,columnsDisabled:e.columnsDisabled,result:null}),a("types.ready",e.entityType),e}).then(e.bind(function(e){return this.createBuilder(e,r).done(function(e){a("builder.ready",e)}),e},this)).then(e.bind(function(e){return this.buildInitialParameters(e,r).done(function(e){a("search.parametersBound",e)})},this))},"bus builder.ready:last + search.parametersBound":function(t,i,r){e.forEach(r,function(t,r){e.isUndefined(t)||""===t?i.unsetParameter(r):i.setParameter(r,t)}),i.setPage(0),this.fire("search.readyToExecute")},"bus builder.ready:last + search.pagingBound":function(e,t){t.setPage(t._page+1),this.fire("search.readyToExecute")},"bus builder.ready:last + search.orderBound":function(e,t,i){t.setOrderBy(i.value),t.setOrderDir(i.dir),t.setPage(0),this.fire("search.readyToExecute")},"bus beforeInit:last + configurator.ready:last + builder.ready:last + search.readyToExecute":function(t,i,r,n){this.doSearch(n,r).then(e.bind(this.processResult,this)).done(e.bind(function(e){this.fire("search.completed",{result:e})},this)).fail(e.bind(function(e){this.fire("search.completed",{result:e})},this))},"bus search.completed":function(e,t){this.fire("result.ready",t.result)},createContext:function(e){var t=$.Deferred();return e.getApplicationContextService().getApplicationContext({projectIds:"*",teamIds:"*"},{success:function(e){t.resolve(e)}}),t.promise()},processOptions:function(t,i){var r=$.Deferred(),n=["feature","userstory","task","bug","testplanrun","request"],a=e.defaults(t,{filter:{entityType:["program","release","iteration","teamiteration","testcase","testplan","build","impediment","feature","userstory","task","bug","testplanrun","request"]},filterValues:{},filterDisabled:[],fields:[],parameters:["_id","name","entityType.name","entityState.name","project.id","team.id","_project.id","release.id","iteration.id","user_dsl_filter","init_dsl","dsl"],onPage:15,ordering:{name:"Creation Date",dir:"desc"},columnsDisabled:{}});a.propertyName&&(a.entityType=a.propertyName.toLowerCase(),"assignable"==a.entityType&&(a.entityType=n)),a.entityType&&(a.entityType=e.isArray(a.entityType)?a.entityType:[a.entityType],a.filter.entityType=a.entityType),a.filter.entityType&&e.has(a.filter.entityType,"$in")?i.getStore().find("entityType",{fields:["id","name"],$query:{id:{$in:a.filter.entityType.$in}}}).done(function(t){a.entityType=e.map(e.pluck(t[0].data,"name"),function(e){return e.toLowerCase()}),r.resolve(a)}):(a.filter.entityType&&(a.entityType=a.filter.entityType),r.resolve(a));var s=r.then(function(t){t.entityType&&t.filter.entityType&&(delete t.filter.entityType,t.filterValues.entityType=t.filterValues.entityType||{},t.filterValues.entityType.name={$in:t.entityType},t.filterValues.entityState=t.filterValues.entityState||{},t.filterValues.entityState["entityType.name"]={$in:t.entityType}),e.each(["project","team","release","iteration"],function(i){e.isUndefined(t.filter[i])||(t.filter[i+".id"]=t.filter[i],delete t.filter[i])}),1==t.entityType.length&&t.filterDisabled.push("entityType.name");var r=["project","release","iteration","team","entityState","firstName","lastName","avatarUri","email"];e.each(t.entityType,function(n){var a=i.getStore().config.proxy.getProperties(n);"feature"==n&&(a=e.without(a,"iteration")),"request"==n&&(a=e.without(a,"release","iteration")),e.contains(["team","teamiteration","project","program"],n)&&(a=e.without(a,"project")),i.isBoardEdition||t.context.hasEdition&&!t.context.hasEdition("hasTeams")&&(a=e.without(a,"team")),r=e.difference(r,a)});var n={};return e.forEach(r,function(i){n[i]=!0,t.parameters=e.without(t.parameters,i,i+".id")}),t.columnsDisabled=e.extend(t.columnsDisabled,n),t}).then(e.bind(this.processInitDsl,this,a,i)).then(function(t){var r=t.context.entity;if(!r)return t;var n=$.Deferred(),a=i.getStore(),s=a.config.proxy.getProperties(r.entityType.name),o=[];return e.indexOf(s,"project")>=0&&o.push({project:["id"]}),e.indexOf(s,"team")>=0&&o.push({team:["id"]}),i.getStore().get(r.entityType.name,{id:r.id,fields:o}).done({success:function(i){var r=i[0].data;r.project&&r.project.id&&e.contains(t.parameters,"project.id")&&(t.filter["project.id"]=r.project.id),n.resolve(t)},failure:function(){n.resolve(t)}}),n});return s.promise()},processInitDsl:function(t,i){var r=$.Deferred();if(t.propertyName){var n=t.context.entity,a=[{}];a[0][t.propertyName]=["id"],i.getStore().get(n.entityType.name,{id:n.id,fields:a}).done({success:function(i){var n=i[0].data,a=n[t.propertyName];if(a&&a.id){var s=[t.filter.init_dsl,e.sprintf("id != %d",a.id)];t.filter.init_dsl=e.compact(s).join(" and ")}r.resolve(t)},failure:function(){r.resolve(t)}})}else r.resolve(t);return r},createBuilder:function(t,r){var n=$.Deferred(),a={};e.forEach(t.entityType,function(i){var n,s={name:"name",entityState:"entityState",project:{project:["id","name","abbreviation","color"]},team:{team:["id","name","abbreviation","icon"]},release:{release:["id","name"]},iteration:{iteration:["id","name"]}};if(t.fields.length)n=["id"].concat(t.fields);else{var o=r.getStore().config.proxy.getProperties(i);n=["id","entityType"],e.each(s,function(i,r){e.contains(o,r)&&!t.columnsDisabled[r]&&n.push(i)})}a[i]=n});var s=new i;return s.registerParameters(t.parameters),s.setOnPage(t.onPage),s.setFields(a),s.setAcid(t.acid),t.ordering&&(s.setOrderBy(t.ordering.name),s.setOrderDir(t.ordering.dir)),n.resolve(s)},buildInitialParameters:function(t){var i=$.Deferred(),r=e.reduce(t.filter||{},function(t,i,r){return e.isUndefined(i)||(t[r]=i),t},{});return i.resolve(r)},doSearch:function(t,i){var n=t.create();if(!n)return $.Deferred().reject(new r({data:{dynamic:{items:[]},fixed:{items:[]}},command:{}}));var a=i.getSliceFactory().create({definition:n.request});a.on("error",e.bind(function(e){this.fire("lookup.error",e.data)},this));var s=this;return a.list(n.command).then(function(e){return new r({data:e.data.items[0],command:e.command.config})},function(){return new r({data:{dynamic:{items:[]},fixed:{items:[]}},command:{}})}).then(function(e){return s.processSearchResults(e)})},processSearchResults:function(e){return e},processResult:function(t){return t.items=e.map(t.items,function(e){var t=e.data;if(t.entityType){var i=t.entityType.name;t.className="tau-"+i.toLowerCase()}return t}),t}})});
define('tau/models/finder.entity/model.finder.entity.data.relation',["Underscore","tau/models/finder.entity/model.finder.entity.data"],function(e,n){return n.extend({processInitDsl:function(n,t){var i=n.context.entity,d=$.Deferred(),r=n.dependencyType;return t.getStore().get(i.entityType.name,{id:i.id,fields:[{masterRelations:[{master:["id"]}]},{slaveRelations:[{slave:["id"]}]}]}).done(function(t){var a=e.pluck(e.pluck(t[0].data[r+"Relations"],r),"id");a.push(i.id);var s=e.map(a,function(n){return e.sprintf("id != %d",n)});n.filter.init_dsl=s.join(" and "),d.resolve(n)}),d.promise()}})});
define('tau/models/finder.entity/model.finder.entity.data.user',["Underscore","./model.finder.entity.data"],function(e,t){return t.extend({processOptions:function(t,i){var a=e.defaults(t,{filter:{entityType:"user"},filterValues:{},filterDisabled:[],fields:["id","fullname","firstName","lastName","email","avatarUri"],parameters:["_id","name","email","firstName","lastName","entityType.name","entityState.name","project.id","team.id","_project.id","release.id","iteration.id","user_dsl_filter","init_dsl","dsl"],onPage:15,ordering:{name:"Creation Date",dir:"desc"},columnsDisabled:{name:!0,entityType:!0}});return a.filter.init_dsl="isActive is true",this._super(a,i)},processSearchResults:function(t){return e.each(t.items,function(e){e.data.entityType={name:"user"}}),t}})});
define('tau/models/finder.entity/model.finder.entity.editable',["Underscore","tau/core/extension.base"],function(t,e){return e.extend({"bus result.ready":function(t,e){this.totalResult=(this.totalResult||[]).concat(e.items)},"bus item.selected":function(e,n){var i=t.find(this.totalResult,function(t){return t.id==n});this.fire("entitySelected",{entity:i})}})});
define('tau/models/finder.entity/model.finder.entity.editable.property',["Underscore","tau/core/model.editable.base"],function(e,i){return i.extend({"bus entitySelected":function(e,i){var t=this.config.propertyName;if(t){var n={};n[t]=null;var r=i.entity;r&&r.id&&(n[t]={id:r.id});var a=["id","name"],d={};d[t]=["id","name",{entityType:["id","name"]}],a.push(d);var o=this.config.context.entity;this.config.store.evictProperties(o.id,o.entityType.name,[t]),this.fire("save",{$set:n,$include:a})}}})});
define('tau/models/finder.entity/model.finder.entity.autocomplete',["Underscore","tau/core/extension.base","tau/models/board.editor/board.filter.suggestionManager"],function(e,t,r){return t.extend({"bus configurator.ready":function(e,t){var n=new r(t);this.fire("suggestionManager.ready",n)},"bus suggestionManager.ready:last + types.ready:last + filter.autocomplete.preload":function(t,r,n,o){var s=o.value;if(s&&0!==s.length&&"?"==s[0]){var a=[s.trim()+" ",s.trim()+"."];e.each(a,function(e){var t={query:{resourceTypes:n,script:e}};r.get(t)})}},"bus suggestionManager.ready:last + types.ready:last + filter.autocomplete.resolve":function(t,r,n,o){var s=o.request.term.slice(0,o.$input[0].selectionStart),a=function(t){var r=t.Suggestions?t.Suggestions.Items:[];r=e.map(r,function(e){return e.Source=t.Source,e.Position=t.Position,e}),o.next(r)},i=function(){o.next([])},u={query:{resourceTypes:n,script:s}};r.get(u).done(a).fail(i)}})});
define('tau/models/finder.entity/model.finder.entity.help',["Underscore","tau/core/model-base","tau/models/board.editor/board.filter.help"],function(e,r,t){return r.extend({"bus types.ready":function(e,r){var n=this;(new t).get({user_dsl:{types:r}}).done(function(e){n.fire("refresh.help.content",e)})}})});
define('tau/ui/extensions/finder.entity/ui.extension.finder.entity.list',["Underscore","jQuery","tau/core/extension.base"],function(e,t,i){return i.extend({init:function(e){this._super(e),this.config=e},"bus afterRender":function(i,a){this.toggleScroll(!1);var l=a.element;this.fire("$el.ready",l);var s=l.find("[role=list]"),r=l.find(".i-role-listholder");this.fire("$listholder.ready",r);var o=e.bind(this.fire,this);s.on("click",".i-role-option",function(e){o("item.selected",t(e.currentTarget).data("id"))});var n=e.throttle(function(){o("paging.tryNext")},100);r.on("scroll.finder",function(e){e.preventDefault(),e.stopPropagation(),n()}),this.toggleScroll(!0),this.fire("$list.ready",s);var d=l.find(".i-role-header");if(this.fire("$header.ready",d),this.config.allData&&this.config.allData.isAddPossible){var c=l.find(".i-role-add-entity");c.on("click",function(){this.fire("add.entity.request")}.bind(this))}this.fire("view.dom.ready")},"bus beforeInit + $el.ready + $list.ready + $listholder.ready":function(e,t,i,a,l){l.listSelectable({items:".i-role-option",className:"hover",saveScroll:!0,keyboardManager:t.config.context.configurator.getKeyBoardManager(),inner:a}),this.fire("$listSelectable.ready",l)},"bus $listSelectable.ready:last + $outerBubbled.shown":function(t,i){i.on("focus",function(){e.delay(function(){if(i.length&&i.data("ui-listSelectable")){i.listSelectable("enable",{saveScroll:!0});var e=0;i.data("ui-listSelectable")._index=e,i.data("ui-listSelectable").$items.eq(e).addClass("hover")}},100)}),i.on("blur",function(){i.length&&i.data("ui-listSelectable")&&(i.listSelectable("disable"),i.data("ui-listSelectable").$items&&i.data("ui-listSelectable").$items.removeClass("hover"))})},"bus $listSelectable.ready:last + $outerBubbled.hidden":function(e,t){t.length&&t.data("ui-listSelectable")&&t.data("ui-listSelectable").$items&&(t.listSelectable("disable"),t.data("ui-listSelectable").$items.removeClass("hover"))},"bus beforeInit:last + options.ready:last + $el.ready:last + $list.ready:last + $listSelectable.ready:last + $header.ready:last + result.ready":function(t,i,a,l,s,r,o,n){var d=0===n.paging.start;if(d){var c=e.isFunction(a.allowToReset)?a.allowToReset(a.context.entity):a.allowToReset;c&&a.data&&a.data.id&&n.items.splice(0,0,{isAction:!0,name:a.clearValueLabel})}var u=i.config.templateList,f=u.get().bind({},{columnsDisabled:a.columnsDisabled,result:n});d&&s.data("tryNext",!0).empty(),this.toggleScroll(!1),f.appendTo(s),this.toggleScroll(!0),this.fire("result.rendered",n),d&&l.toggleClass("tau-lookup-body_state_empty",0===n.paging.count),e.delay(e.bind(this.fire,this,"headers.toSync"),200),n.paging.hasNext?this.fire("paging.tryNext"):s.data("tryNext",!1),e.delay(e.bind(function(){if(r.is(":focus")){var e=r.data("ui-listSelectable")._index;0>e&&(e=-1),r.listSelectable("reset",{saveScroll:!0}),r.data("ui-listSelectable")._index=e,e>=0&&r.data("ui-listSelectable").$items.eq(e).addClass("hover")}},this),100)},"bus $el.ready:last + $list.ready:last + $header.ready:last + headers.toSync":function(e,t){var i=t.find("table");i.eq(0).width(i.eq(1).width()),this.fire("adjustPosition")},"bus $el.ready:last + $list.ready:last + $listholder.ready:last + paging.tryNext":function(e,t,i,a){if(this.scrollAvailable&&i.data("tryNext")&&t.is(":visible")){var l=i[0].getBoundingClientRect(),s=a[0].getBoundingClientRect();l.bottom<=s.bottom+50&&this.fire("search.pagingBound")}},"bus $form.ready:last + search.readyToExecute":function(e,t){var i=t.find(".i-role-listholder");i.tauProgressIndicator(),i.tauProgressIndicator("show",{hover:!0})},"bus $form.ready:last + search.completed":function(e,t){var i=t.find(".i-role-listholder");i.data("ui-tauProgressIndicator")&&i.tauProgressIndicator("hide")},toggleScroll:function(e){this.scrollAvailable=e}})});
define('tau/ui/extensions/finder.entity/widgets/template.widget.base.output',["tau/core/templates-factory"],function(e){return e.register({name:"finder.entity.filter.output",engine:"jqote2",markup:['<span class="tau-cell-content">','<input type="text" name="<%= this.name %>" value="<%= this.value || \'\' %>" />','<span class="tau-bubble-target"><em class="i-role-trigger"><%! this.label || "filter" %></em></span>',"</span>","<% if (this.value){ %>",'<span class="tau-clear-filter i-role-reset"></span>',"<% } %>"]})});
define('tau/ui/extensions/finder.entity/widgets/widget.base',["Underscore","jQuery","tau/core/class","./template.widget.base.output"],function(e,t,i,n){return i.extend({init:function(i,r,s){this.$el=i,this.configurator=r,s=e.defaults(s||{},{name:"field",value:null,templates:{output:n},onEditStart:t.noop,onRender:t.noop,editable:!0}),this.name=s.name,this.value=s.value,this.options=s},setup:function(){},refresh:function(t){return this.options=e.defaults(t,this.options),this.$bubbled&&this.$bubbled.remove(),this.$bubbled=null,this.render()},render:function(){return this.renderOutput().then(e.bind(function(e){return this.$el.html(e),this.$input=this.$el.find("input[name]"),this.$el},this)).then(e.bind(this.renderReset,this)).then(this.options.editable?e.bind(this.renderEdit,this):t.noop).then(e.bind(this.options.onRender,this,this))},getTemplate:function(e){return this.configurator.getTemplateFactory().get(e)},getOutputTemplate:function(){return this.getTemplate(this.options.templates.output.name)},renderOutputTemplate:function(e){return this.getOutputTemplate().bind({},e)},renderOutput:function(){var e=t.Deferred(),i=this.renderOutputTemplate({name:this.name,value:this.value,label:this.value,editable:this.options.editable});return e.resolve(i),e.promise()},renderReset:function(){var i=t.Deferred();return this.$el.off("click",".i-role-reset"),this.$el.on("click",".i-role-reset",e.bind(this.applyValue,this,"")),i.resolve(),i.promise()},applyValue:function(t){this.value=t,this.render().then(e.bind(function(){this.$input.trigger("change")},this))}})});
define('tau/ui/extensions/finder.entity/widgets/widget.text',["Underscore","jQuery","./widget.base"],function(e,t,i){return i.extend({renderEdit:function(){var i=t.Deferred();return this.$bubbled=this.$el.find(".i-role-trigger").tauBubble({className:this.options.bubbleClassName,onShow:e.bind(function(){this.renderEditField().then(e.bind(function(i){this.$bubbled.tauBubble("option","content",i);var n=i.find("input");n.val("").off("keypress").on("keypress",e.bind(function(i){i.keyCode===t.ui.keyCode.ENTER&&this.applyValue(e.trim(n.val()))},this)).focus(100)},this))},this)}),i.resolve(),i},renderEditField:function(){var e=t.Deferred(),i=t('<div class="drop-down-list"><div class="drop-down-option"><input class="tau-in-text" type="text" /></div></div>');return i.find("input").attr("placeholder",this.options.placeholder||""),e.resolve(i)}})});
define('tau/ui/extensions/finder.entity/widgets/template.widget.select.option',["tau/core/templates-factory"],function(e){return e.register({name:"finder.entity.select.option",engine:"jqote2",markup:["<% _.forEach(this.items, function(v){ %>",'<div class="drop-down-option i-role-option" data-value="<%! v.value %>">',"<%! v.label %>","</div>","<% }); %>"]})});
define('tau/ui/extensions/finder.entity/widgets/widget.select',["Underscore","jQuery","./widget.base","./template.widget.select.option"],function(t,e,i,n){return i.extend({init:function(e,i,o){this._super(e,i,o),this.options=t.defaults(this.options,{query:null,fields:["id","name"]}),this.options.templates.option=n},renderOutput:function(){if(!this.value)return this._super();var i=e.Deferred();return this.getCurrentData().then(t.bind(this.getCurrentOption,this)).then(t.bind(function(t){var e=this.renderOutputTemplate({name:this.name,value:this.value,label:t.label,editable:this.options.editable});i.resolve(e)},this)),i.promise()},getCurrentData:function(){var i=e.Deferred();return this.configurator.getStore().get(this.options.collectionName,{id:this.value,fields:this.options.fields}).done(t.bind(function(t){var e=t[0].data;i.resolve(e)},this)),i.promise()},getCurrentOption:function(t){return{value:t.id,label:t.name}},renderEdit:function(){var i=e.Deferred(),n=this.$el.find(".i-role-trigger");return n.tauBubble({className:this.options.bubbleClassName,onPositionConfig:function(t){return t.my="center top",t.at="center bottom",t},onShow:t.bind(function(){this.renderEditList().then(t.bind(function(e){n.tauBubble("option","content",e.text()?e:'<div class="ui-drop-down__message">Nothing found</div>');var i={items:".drop-down-option:visible",className:"drop-down-option_hover",keyboardManager:this.configurator.getKeyBoardManager(),onSelect:t.bind(function(t){this.applyOption(t)},this)};e.listSelectable(i).listSelectable("enable"),this.options.onEditStart(this)},this))},this)}),this.$bubbled=n,i.resolve(),i},renderEditList:function(){return this.renderEditOptions().then(function(t){return e('<div class="drop-down-list tau-filter-drop-down-list"/>').append(t)})},renderEditOptions:function(){return this.getEditData().then(t.bind(this.getEditOptions,this)).then(t.bind(function(t){return this.getTemplate(this.options.templates.option.name).bind({},{items:t})},this))},getEditData:function(){var t,i=e.Deferred(),n=this.configurator.getStore();return t=this.options.query||this.options.orderBy?n.find(this.options.collectionName,{fields:this.options.fields,$query:this.options.query,$orderBy:this.options.orderBy}):n.get(this.options.collectionName,{fields:this.options.fields}),t.done(function(t){i.resolve(t[0].data)}),i.promise()},getEditOptions:function(e){return t.map(e,function(t){return{value:t.id,label:t.name}})},applyOption:function(t){var e=t.data("value");this.applyValue(e)}})});
define('tau/ui/extensions/finder.entity/widgets/widget.entityState',["Underscore","jQuery","./widget.select"],function(e,t,n){return n.extend({init:function(e,t,n){this._super(e,t,n),this.options.collectionName="entityState"},renderOutput:function(){this.value||this._super();var n=t.Deferred();return this.configurator.getStore().get(this.options.collectionName,{fields:["id","name"]}).done(e.bind(function(t){var i=e.map(t[0].data,function(e){return{value:e.name.toLowerCase(),label:e.name}}),r=this.value,a=e.find(i,function(e){return e.value==r});a||(a={label:this.value});var u=this.renderOutputTemplate({name:this.name,value:this.value,label:a.label});n.resolve(u)},this)),n.promise()},getEditOptions:function(t){return t=e.unique(t,function(e){return e.name.toLowerCase()}),t=e.sortBy(t,function(e){return e.name.toLowerCase()}),e.map(t,function(e){return{value:e.name.toLowerCase(),label:e.name}})}})});
define('tau/ui/extensions/finder.entity/widgets/template.widget.entityType.output',["tau/core/templates-factory"],function(e){return e.register({name:"finder.entity.entityType.output",engine:"jqote2",markup:['<input type="text" name="<%= this.name %>" value="<%= (this.label || {type: \'\'}).type %>" />','<span class="tau-bubble-target">',"<% if (this.label){ %>",'<em class="i-role-trigger tau-noborder" title="<%! fn.term(this.label.name, \'name\') %>">','<i class="tau-entity-icon tau-<%! this.label.type %>">','<%= fn.term(this.label.type, "iconSmall") %>',"</i>","</em>","<% } else if (this.editable) { %>",'<em class="i-role-trigger">',"filter","</em>","<% } %>","</span>","<% if (this.value){ %>",'<span class="tau-clear-filter i-role-reset"></span>',"<% } %>"]})});
define('tau/ui/extensions/finder.entity/widgets/template.widget.entityType.option',["tau/core/templates-factory"],function(e){return e.register({name:"finder.entity.entityType.option",engine:"jqote2",markup:["<% _.forEach(this.items, function(v){ %>",'<div class="drop-down-option i-role-option" data-value="<%! v.value %>">','<i class="tau-entity-icon tau-<%! v.label.type %>">','<%= fn.term(v.label.type, "iconSmall") %>',"</i>",'<span class="tau-bubble-txt">','<%= fn.term(v.label.type, "name") %>',"</span>","</div>","<% }); %>"]})});
define('tau/ui/extensions/finder.entity/widgets/widget.entityType',["Underscore","jQuery","./widget.select","./template.widget.entityType.output","./template.widget.entityType.option"],function(t,e,n,i,o){return n.extend({init:function(t,e,n){this._super(t,e,n),this.options.collectionName="entityType",this.options.templates.output=i,this.options.templates.option=o},_value:function(t){return{value:t.id,label:{type:t.name.toLowerCase()}}},getCurrentOption:function(t){return this._value(t)},getEditOptions:function(e){return t.map(e,this._value)}})});
define('tau/ui/extensions/finder.entity/widgets/template.widget.releaseIteration.output',["tau/core/templates-factory"],function(e){return e.register({name:"finder.entity.releaseIteration.output",engine:"jqote2",markup:['<input type="text" name="_project.id" value="<%= this.value[\'_project.id\'] || \'\' %>" />','<input type="text" name="release.id" value="<%= this.value[\'release.id\'] || \'\' %>" />','<input type="text" name="iteration.id" value="<%= this.value[\'iteration.id\'] || \'\' %>" />','<span class="tau-bubble-target">','<em class="i-role-trigger" title="<%! this.label.fullName %>"><%! this.label.name || "filter" %></em>',"</span>","<% if (_.compact(_.values(this.value)).length) { %>",'<span class="tau-clear-filter i-role-reset"></span>',"<% } %>"]})});
define('tau/ui/extensions/finder.entity/widgets/template.widget.releaseIteration.option',["tau/core/templates-factory"],function(e){return e.register({name:"finder.entity.releaseIteration.option",engine:"jqote2",markup:["<% _.forEach(this.items, function(releases, projectName){ %>",'<div class="drop-down-group">',"<div><%! projectName %></div>","<% _.forEach(releases, function(release){ %>",'<div class="drop-down-option i-role-option"  data-type="release" data-project-id="<%=release.project.id %>" data-value="<%=release.value %>">','<i class="tau-entity-icon tau-release"><%= fn.term("Release", "iconSmall") %></i>','<span class="tau-bubble-txt"><%! release.label %></span>',"</div>",'<div class="drop-down-group">',"<% _.forEach(release.iterations, function(item){ %>",'<div class="drop-down-option i-role-option" data-type="iteration"  data-project-id="<%=item.project.id %>" data-release-id="<%=release.value %>"  data-value="<%= item.value %>">',"<% if (item.value != -1){ %>",'<i class="tau-entity-icon tau-iteration"><%= fn.term("Iteration", "iconSmall") %></i>',"<% } %>",'<span class="tau-bubble-txt"><%! item.label %></span>',"</div>","<% }); %>","</div>","<% }); %>","</div>","<% }); %>"]})});
define('tau/ui/extensions/finder.entity/widgets/widget.releaseIteration',["Underscore","jQuery","./widget.select","./template.widget.releaseIteration.output","./template.widget.releaseIteration.option"],function(e,t,i,n,a){return i.extend({init:function(e,t,i){this._super(e,t,i),this.setup()},setup:function(){this.options.templates.output=n,this.options.templates.option=a,this.options.onlyReleases=this.options.onlyReleases||!1,this.options.fields=["id","name",{iterations:["id","name"]},{project:["id","name","isActive"]}],this.iterationBacklog={id:-1,name:"Backlog"},this.releaseBacklog={id:-1,name:"Backlog",iterations:[]}},loadSelectedRelease:function(e){var t=this.value["release.id"];t>0?this.configurator.getStore().get("release",{id:t,fields:["id","name"]}).done(function(t){e(!1,t[0].data)}):t==this.releaseBacklog.id?e(!1,this.releaseBacklog):e(!1,null)},loadSelectedIteration:function(e){var t=this.value["iteration.id"];t>0?this.configurator.getStore().get("iteration",{id:t,fields:["id","name",{release:["id","name"]}]}).done(function(t){e(!1,t[0].data)}):t==this.iterationBacklog.id?e(!1,this.iterationBacklog):e(!1,null)},_renderOutput:function(e,t){return this.renderOutputTemplate({name:this.name,value:this.value,label:{name:e,fullName:t},editable:this.options.editable})},renderOutput:function(){var i=t.Deferred();if(!e.compact(e.values(this.value)).length){var n=this._renderOutput("","");return i.resolve(n),i.promise()}var a=[e.bind(this.loadSelectedRelease,this),e.bind(this.loadSelectedIteration,this)];return e.parallel(a,e.bind(function(t,n){var a=n[1]||n[0],o=e.map(e.compact(n),function(e){return e.name}).join(", "),r=this._renderOutput(a.name,o);i.resolve(r)},this)),i.promise()},getEditOptions:function(t){var i=e.uniq(e.pluck(t,"project"),function(e){return e.id}),n=e.map(i,e.bind(function(t){var i=e.clone(this.releaseBacklog);return i.project=t,i},this));return t=e.filter(t,function(e){return e.project.isActive}),t=e.sortBy(t,function(e){return e.project.name+" "+e.name}),t=e.map(t.concat(n),e.bind(function(t){var i={value:t.id,label:t.name,project:t.project};return this.options.onlyReleases?i.iterations=[]:(i.iterations=e.sortBy(t.iterations,function(e){return e.name}),i.iterations=e.map(i.iterations.length?[this.iterationBacklog].concat(i.iterations):i.iterations,function(e){return{value:e.id,label:e.name,project:t.project}})),i},this)),t=e.groupBy(t,function(e){return e.project.name})},applyOption:function(e){var t,i=e.data();t="iteration"===i.type?{"iteration.id":i.value,"release.id":i.releaseId,"_project.id":i.projectId}:{"iteration.id":null,"release.id":i.value,"_project.id":i.projectId},this.applyValue(t)}})});
define('tau/ui/extensions/finder.entity/widgets/template.widget.project.output',["tau/core/templates-factory"],function(e){return e.register({name:"finder.entity.project.output",engine:"jqote2",markup:['<input type="text" name="<%= this.name %>" value="<%= this.value || \'\' %>" />','<span class="tau-bubble-target">',"<% if (this.label) { %>",'<em class="i-role-trigger <% if (this.value >= 0) { %>tau-noborder<% } %>">',"<% if (this.value >= 0) { %>",'<span class="tau-project-name" style="background-color: <%= this.label.color %>" title="<%! this.label.name %>">',"<%= this.label.abbreviation %>","</span>","<% } else { %>","<%= this.label.abbreviation %>","<% } %>","</em>","<% } else { %>",'<em class="i-role-trigger">',"filter","</em>","<% } %>","</span>","<% if (this.value) { %>",'<span class="tau-clear-filter i-role-reset"></span>',"<% } %>"]})});
define('tau/ui/extensions/finder.entity/widgets/template.widget.project.option',["tau/core/templates-factory"],function(o){return o.register({name:"finder.entity.project.option",engine:"jqote2",markup:["<% _.forEach(this.items, function(v){ %>",'<div class="drop-down-option i-role-option" data-value="<%! v.value %>">','<% var color = v.label.color || "transparent"; %>','<i class="tau-icon tau-icon_type_color" style="background-color: <%= color %>"></i>','<span class="tau-bubble-txt"><%! v.label.name %></span>',"</div>","<% }); %>"]})});
define('tau/ui/extensions/finder.entity/widgets/widget.project',["Underscore","jQuery","./widget.select","./template.widget.project.output","./template.widget.project.option"],function(t,e,i,o,r){return i.extend({init:function(t,e,i){this._super(t,e,i),this.options.collectionName="project",this.options.templates.output=o,this.options.templates.option=r,this.options.fields=["id","name","color","abbreviation","isActive"],this.options.query={isActive:1},this.options.orderBy="name",this.zero={id:-1,color:"",abbreviation:"No project",name:"No project"}},getCurrentOption:function(t){return{value:t.id,label:t}},getCurrentData:function(){var i=t.bind(this._super,this);if(this.value==this.zero.id){var o=e.Deferred();return o.resolve(this.zero).promise()}return i()},getEditOptions:function(e){return t.map([this.zero].concat(e),function(t){return{value:t.id,label:t}})}})});
define('tau/ui/extensions/finder.entity/widgets/template.widget.team.output',["tau/core/templates-factory"],function(e){return e.register({name:"finder.entity.team.output",engine:"jqote2",markup:['<input type="text" name="<%= this.name %>" value="<%= this.value || \'\' %>" />','<span class="tau-bubble-target">',"<% if (this.label){ %>",'<em class="i-role-trigger <% if (this.value >= 0){ %>tau-noborder<% } %>">',"<% if (this.value >=0){ %>",'<span class="tau-team-name" title="<%! this.label.name %>">','<span class="tau-icon tau-icon_type_svg tau-icon_name_<%= this.label.icon %>"></span>',"<i><%= this.label.abbreviation %></i>","</span>","<% } else { %>","<%= this.label.abbreviation %>","<% } %>","</em>","<% } else { %>",'<em class="i-role-trigger">',"filter","</em>","<% } %>","</span>","<% if (this.value){ %>",'<span class="tau-clear-filter i-role-reset"></span>',"<% } %>"]})});
define('tau/ui/extensions/finder.entity/widgets/template.widget.team.option',["tau/core/templates-factory"],function(e){return e.register({name:"finder.entity.team.option",engine:"jqote2",markup:["<% _.forEach(this.items, function(v){ %>",'<div class="drop-down-option i-role-option" data-value="<%! v.value %>">','<i class="tau-icon tau-icon_type_svg tau-icon_name_<%= v.label.icon %>"></i>','<span class="tau-bubble-txt"><%! v.label.name %></span>',"</div>","<% }); %>"]})});
define('tau/ui/extensions/finder.entity/widgets/widget.team',["Underscore","jQuery","./widget.select","./template.widget.team.output","./template.widget.team.option"],function(t,e,i,n,o){return i.extend({init:function(t,e,i){this._super(t,e,i),this.options.templates.output=n,this.options.templates.option=o,this.options.fields=["id","name","icon","abbreviation"],this.options.orderBy="name",this.zero={id:-1,color:"",abbreviation:"No team",name:"No team"}},getCurrentOption:function(t){return{value:t.id,label:t}},getCurrentData:function(){var i=t.bind(this._super,this);if(this.value==this.zero.id){var n=e.Deferred();return n.resolve(this.zero).promise()}return i()},getEditOptions:function(e){return t.map([this.zero].concat(e),function(t){return{value:t.id,label:t}})}})});
define('tau/ui/extensions/finder.entity/ui.extension.finder.entity.filter',["Underscore","jQuery","tau/core/extension.base","tau/ui/extensions/finder.entity/widgets/widget.text","tau/ui/extensions/finder.entity/widgets/widget.select","tau/ui/extensions/finder.entity/widgets/widget.entityState","tau/ui/extensions/finder.entity/widgets/widget.entityType","tau/ui/extensions/finder.entity/widgets/widget.releaseIteration","tau/ui/extensions/finder.entity/widgets/widget.project","tau/ui/extensions/finder.entity/widgets/widget.team"],function(e,t,i,a,n,r,l,u,o,d){return i.extend({"bus beforeInit + afterRender + dataBind":function(i,n,f,s){var m=e.bind(this.fire,this),b=n.config.context.configurator,c=f.element,p=c.find("form");p.find(".i-role-filter-input").tauResetableInput().placeholder();var y=p.find(".tau-filter-line"),h={_id:new a(y.filter("[data-filter-name=_id]"),b,{name:"_id",value:s.filter._id,placeholder:"id",bubbleClassName:"tau-bubble-lookup-id tau-bubble-auto-width"}),"entityType.name":new l(y.filter('[data-filter-name="entityType.name"]'),b,{name:"entityType.name",value:s.filter["entityType.name"],query:s.filterValues.entityType,editable:e.indexOf(s.filterDisabled,"entityType.name")<0}),name:new a(y.filter("[data-filter-name=name]"),b,{name:"name",value:s.filter.name,placeholder:"Name",bubbleClassName:"tau-bubble-lookup-name"}),firstName:new a(y.filter("[data-filter-name=firstName]"),b,{name:"firstName",value:s.filter.firstName,placeholder:"First Name",bubbleClassName:"tau-bubble-lookup-name"}),lastName:new a(y.filter("[data-filter-name=lastName]"),b,{name:"lastName",value:s.filter.lastName,placeholder:"Last Name",bubbleClassName:"tau-bubble-lookup-name"}),email:new a(y.filter("[data-filter-name=email]"),b,{name:"email",value:s.filter.email,placeholder:"Email",bubbleClassName:"tau-bubble-lookup-name"}),"entityState.name":new r(y.filter('[data-filter-name="entityState.name"]'),b,{name:"entityState.name",value:s.filter["entityState.name"],query:s.filterValues.entityState,bubbleClassName:"tau-bubble-auto-width"}),"project.id":new o(y.filter('[data-filter-name="project.id"]'),b,{name:"project.id",value:s.filter["project.id"],query:s.filterValues["project.id"],bubbleClassName:"tau-bubble-lookup-project"}),"release.id":new u(y.filter('[data-filter-name="release.id"]'),b,{onlyReleases:!0,name:"release_iteration",collectionName:"release",value:{"release.id":s.filter["release.id"],"iteration.id":s.filter["iteration.id"]},query:s.filterValues.releaseIteration}),"iteration.id":new u(y.filter('[data-filter-name="iteration.id"]'),b,{name:"release_iteration",collectionName:"release",value:{"release.id":s.filter["release.id"],"iteration.id":s.filter["iteration.id"]},query:s.filterValues.releaseIteration}),"team.id":new d(y.filter('[data-filter-name="team.id"]'),b,{name:"team.id",value:s.filter["team.id"],query:s.filterValues["team.id"],collectionName:"team",bubbleClassName:"tau-bubble-lookup-team"})};e.forEach(h,function(e){e.options.onEditStart=function(e){m("$filter.loaded",e)},e.options.onRender=function(e){e.$bubbled&&e.$bubbled.tauBubble("option","appendTo",p)}});var g=e.throttle(function(e){m("search.parametersBound",e)},200),w=p.serialize();t.whenList(e.map(h,function(e){return e.render()})).done(function(){w=p.serialize(),m("$filters.rendered",p)}),this.fire("widgets.ready",h),p.off(".filter").on("submit.filter",function(e){e.preventDefault(),e.stopPropagation()}).on("input.filter",".i-role-filter-input",function(e){var i=e.currentTarget;i.value||t(i).trigger("specialChange")}).on("keydown.filter",".i-role-filter-input",function(e){if(e.keyCode==t.ui.keyCode.ENTER){var i=t(this);i.trigger("specialChange")}}).on("keyup.filter",".i-role-filter-input",function(i){var a=i.keyCode;if(16!=a&&17!=a&&18!=a){var n=t(this),r=n.val();e.startsWith(e.trim(r),"?")||n.trigger("specialChange")}}).on("change.filter _change.filter specialChange.filter",function(){var i=p.serializeArray(),a=t.param(i);if(w!==a){w=a;var n={};e.each(i,function(e){n[e.name]=e.value}),g(n)}}),this.fire("$form.ready",p)},"bus widgets.ready:last + search.parametersBound":function(e,t,i){var a=i["entityType.name"];t["entityState.name"].refresh(a?{query:{"entityType.name":a}}:{query:null});var n=i["project.id"];n?(t["release.id"].refresh({editable:-1!=n,query:{"project.id":n}}),t["iteration.id"].refresh({editable:-1!=n,query:{"project.id":n}})):(t["release.id"].refresh({editable:!0,query:!1}),t["iteration.id"].refresh({editable:!0,query:!1}))},"bus $form.ready + $listholder.ready + content.ready":function(e,t){var i=t.find(".i-role-filter-input"),a=t.find(".i-role-help");a.data("ui-tauBubble")&&a.tauBubble("option","content").on("click",function(){i.focus()});var n=i.data("ui-autocomplete");delete n._change}})});
define('tau/ui/extensions/finder.entity/ui.extension.finder.entity.bubble',["Underscore","jQuery","tau/core/extension.base"],function(e,t,i){return i.extend({"bus $outerBubbled.ready":function(t,i){i.on("taububbleshow",e.bind(this.fire,this,"$outerBubbled.shown")),i.on("taububblehide",e.bind(this.fire,this,"$outerBubbled.hidden"))},"bus $el.ready:last + $listholder.ready:last + $outerBubbled.shown":function(e,i,s){s.css("max-height",t(window).height()/3),t.browser.safari&&i.width(t(window).width()/3),this.fire("paging.tryNext"),i.find(":text").focus(),this.fire("headers.toSync")},"bus $outerBubbled.ready:last + $el.ready:last + result.rendered":function(e,t,i){i.is(":visible")&&this.fire("headers.toSync"),this.fire("headers.toSync"),this.fire("adjustPosition")},"bus $outerBubbled.ready:last + headers.toSync":function(){this.fire("adjustPosition")}})});
define('tau/ui/templates/finder.entity/ui.template.finder.entity.list.row',["tau/core/templates-factory"],function(a){var e={name:"finder.entity.list.row",engine:"jqote2",markup:["<% var columnsDisabled = this.columnsDisabled; %>","<% var items = (this.result && this.result.items) ? this.result.items : []; %>","<% _.forEach(items, function(v){ %>",'<tr role="option" class="i-role-option <%= v.isAction ? "action" : "" %>" data-id="<%! v.id %>">','<td class="tau-cell-id">','<span class="tau-cell-content"><%! v.id %></span>',"</td>","<% if (!columnsDisabled.entityType){ %>",'<td class="tau-cell-type">',"<% if (v.entityType){ %>",'<span class="tau-cell-content" title="<%! fn.term(v.entityType.name, "name") %>">','<i class="tau-entity-icon <%! v.className %>">','<%! fn.term(v.entityType.name, "iconSmall") %>',"</i>","</span>","<% } %>","</td>","<% } %>","<% if (!columnsDisabled.avatarUri){ %>",'<td class="tau-cell-avatar">','<img class="tau-cell-content" src="<%=v.avatarUri + 20%>" title="<%=_.escape(_.trim(v.fullName) || v.email)%>"/>',"</td>","<% } %>","<% if (!columnsDisabled.name){ %>",'<td class="tau-cell-name">','<span class="tau-cell-content">',"<%! v.name %>","</span>","</td>","<% } %>","<% if (!columnsDisabled.firstName){ %>",'<td class="tau-cell-name">','<span class="tau-cell-content">',"<%! v.firstName %>","</span>","</td>","<% } %>","<% if (!columnsDisabled.lastName){ %>",'<td class="tau-cell-name">','<span class="tau-cell-content">',"<%! v.lastName %>","</span>","</td>","<% } %>","<% if (!columnsDisabled.email){ %>",'<td class="tau-cell-name">','<span class="tau-cell-content">',"<%! v.email %>","</span>","</td>","<% } %>","<% if (!columnsDisabled.entityState){ %>",'<td class="tau-cell-state">','<span class="tau-cell-content">',"<% if (v.entityState){ %>","<%! v.entityState.name %>","<% } %>","</span>","</td>","<% } %>","<% if (!columnsDisabled.project){ %>",'<td class="tau-cell-project">','<span class="tau-cell-content">',"<% if (v.project){ %>",'<span style="background-color:<%! v.project.color %>;" class="tau-project-name">',"<%! v.project.abbreviation %>","</span>","<% } %>","</span>","</td>","<% } %>","<% if (!columnsDisabled.release || !columnsDisabled.iteration){ %>",'<td class="tau-cell-release">','<span class="tau-cell-content">',"<% if (v.release && v.release.name){ %>","<% if (v.iteration && v.iteration.name){ %>",'<span class="tau-release-name" title="<%! v.iteration.name %>, <%! v.release.name %>">',"<%! v.iteration.name %>, <%! v.release.name %>","</span>","<% }else{ %>",'<span class="tau-release-name">',"<%! v.release.name %>","</span>","<% } %>","<% } %>","</span>","</td>","<% } %>","<% if (!columnsDisabled.team){ %>",'<td class="tau-cell-team">','<span class="tau-cell-content">',"<% if (v.team){ %>",'<div class="tau-team-name">','<span class="tau-icon tau-icon_type_svg tau-icon_name_<%! v.team.icon %>"></span>',"<i><%! v.team.abbreviation %></i>","</div>","<% } %>","</span>","</td>","<% } %>","</tr>","<% }); %>"]};return a.register(e)});
define('tau/ui/templates/finder.entity/ui.template.finder.entity.list',["tau/core/templates-factory","tau/ui/templates/finder.entity/ui.template.finder.entity.list.row"],function(a){var e={name:"finder.entity.list",engine:"jqote2",markup:['<div class="tau-lookup-body">','<table class="i-role-header">',"<thead>","<tr>",'<th class="tau-cell-id">','<div class="tau-col-header">ID</div>','<div class="tau-filter-line" data-filter-name="_id"></div>',"</th>","<% if (!this.columnsDisabled.entityType){ %>",'<th class="tau-cell-type">','<div class="tau-col-header">Type</div>','<div class="tau-filter-line" data-filter-name="entityType.name"></div>',"</th>","<% } %>","<% if (!this.columnsDisabled.avatarUri){ %>",'<th class="tau-cell-avatar">','<div class="tau-col-header">Avatar</div>','<div class="tau-filter-line" data-filter-name="avatarUri"></div>',"</th>","<% } %>","<% if (!this.columnsDisabled.name){ %>",'<th class="tau-cell-name">','<div class="tau-col-header">Name</div>','<div class="tau-filter-line" data-filter-name="name"></div>',"</th>","<% } %>","<% if (!this.columnsDisabled.firstName){ %>",'<th class="tau-cell-name">','<div class="tau-col-header">First Name</div>','<div class="tau-filter-line" data-filter-name="firstName"></div>',"</th>","<% } %>","<% if (!this.columnsDisabled.lastName){ %>",'<th class="tau-cell-name">','<div class="tau-col-header">Last Name</div>','<div class="tau-filter-line" data-filter-name="lastName"></div>',"</th>","<% } %>","<% if (!this.columnsDisabled.email){ %>",'<th class="tau-cell-name">','<div class="tau-col-header">Email</div>','<div class="tau-filter-line" data-filter-name="email"></div>',"</th>","<% } %>","<% if (!this.columnsDisabled.entityState){ %>",'<th class="tau-cell-state">','<div class="tau-col-header">State</div>','<div class="tau-filter-line" data-filter-name="entityState.name"></div>',"</th>","<% } %>","<% if (!this.columnsDisabled.project){ %>",'<th class="tau-cell-project">','<div class="tau-col-header">Project</div>','<div class="tau-filter-line" data-filter-name="project.id"></div>',"</th>","<% } %>","<% if (!this.columnsDisabled.release && this.columnsDisabled.iteration){ %>",'<th class="tau-cell-release">','<div class="tau-col-header"><%= fn.term("release") %></div>','<div class="tau-filter-line" data-filter-name="release.id"></div>',"</th>","<% } %>","<% if (!this.columnsDisabled.iteration){ %>",'<th class="tau-cell-release">','<div class="tau-col-header"><%= fn.term("release") %>, <%= fn.term("iteration") %></div>','<div class="tau-filter-line" data-filter-name="iteration.id"></div>',"</th>","<% } %>","<% if (!this.columnsDisabled.team){ %>",'<th class="tau-cell-team">','<div class="tau-col-header">Team</div>','<div class="tau-filter-line" data-filter-name="team.id"></div>',"</th>","<% } %>","</tr>","</thead>","</table>",'<div class="tau-lookup-block__listholder i-role-listholder" tabindex="0">',"<table>",'<tbody role="list">','<%= fn.sub("finder.entity.list.row", this) %>',"</tbody>","</table>","</div>","<% if (this.isAddPossible === true) { %>",'<div class="tau-lookup-body__message">Nothing found. You need to <span class="i-role-add-entity ui-link">create <%= this.fieldCaption %></span> first.</div>',"<% } else { %>",'<div class="tau-lookup-body__message">Nothing found</div>',"<% }%>","</div>"]};return a.register(e)});
define('tau/ui/templates/finder.entity/ui.template.finder.entity',["tau/core/templates-factory","tau/ui/templates/finder.entity/ui.template.finder.entity.list","tau/ui/templates/board.editor/ui.template.board.editor.filter"],function(e){var t={name:"finder.entity",engine:"jqote2",markup:['<div class="tau-lookup-block" tabindex="1" >','<form class="i-role-form">','<div class="tau-lookup-header">','<%= fn.sub("board.editor.filter", {name: "user_dsl", placeholder: "ID, Name or type ? for advanced filter"}) %>',"</div>",'<%= fn.sub("finder.entity.list", this) %>',"</form>","</div>"]};return e.register(t)});
define('tau/components/component.finder.entity',["tau/components/component.factory","tau/models/finder.entity/model.finder.entity.data","tau/models/finder.entity/model.finder.entity.data.relation","tau/models/finder.entity/model.finder.entity.data.user","tau/models/finder.entity/model.finder.entity.editable","tau/models/finder.entity/model.finder.entity.editable.property","tau/models/finder.entity/model.finder.entity.autocomplete","tau/models/finder.entity/model.finder.entity.help","tau/ui/extensions/finder.entity/ui.extension.finder.entity.list","tau/ui/extensions/finder.entity/ui.extension.finder.entity.filter","tau/ui/extensions/board.editor/ui.extension.board.editor.autocomplete","tau/ui/extensions/finder.entity/ui.extension.finder.entity.bubble","tau/ui/extensions/board.editor/ui.extension.board.editor.help","tau/components/extensions/error/extension.errorBar","tau/ui/extensions/board.plus/ui.extension.board.plus.errors","tau/ui/templates/finder.entity/ui.template.finder.entity","tau/ui/templates/finder.entity/ui.template.finder.entity.list.row","libs/jquery/jquery.placeholder","libs/jquery/jquery.tau.resetableInput"],function(e,t,i,n,a,r,o,d,l,u,s,f,m,y,p,b,x){return e.define(function(e){e.templateList=x;var c={relation:i,user:n},D=e.allData&&e.allData.model?c[e.allData.model]||t:e.model||t,j={name:e.allData&&e.allData.name||"finder",extensions:[D,a,e.modelEditable||r,o,d,l,u,s,y,p,f,m],template:b};return j})});
define('tau/ui/extensions/board.plus/card-context-menu/menu-action-item-convert',["jQuery","Underscore","tau/components/component.finder.entity","tau/utils/utils.boardCard","tau/models/page.entity/entity.context.factory","tau/core/termProcessor","tau/ui/extensions/board.plus/card-context-menu/menu-action-item-base","tau/utils/utils.serverErrorTranslator"],function(e,t,n,o,i,r,a,u){var c=!1,s="entityTypesToConvertInto",d="i-role-card-context-menu-convert",l={entityTypes:["request","feature","bug","userstory","task"],allowedFor:function(e){return t.contains(this.entityTypes,e)}},f=function(e){return"Do you really want to convert "+e.srcEntityType.term+" to "+e.dstEntityType.term+"?"},b=function(e){var t=27===e.keyCode;return t},m={setup:function(n,o,i,r,a,u){var c=e("<div/>").append(o.element),s=e.Deferred(),d=c.append(['<div class="i-role-confirmation-content" style="display: none">',"<h3>"+f(u)+"</h3>",'<div class="tau-buttons">','<button type="button" class="tau-btn tau-primary i-role-actionok">Yes, I\'m sure</button>','<button type="button" class="tau-btn i-role-actioncancel">No</button>',"</div>","</div>"].join("")),l="hideSubmenu",m=r.tauBubble({alignTo:r,template:['<div class="tau-bubble">','<div class="tau-bubble__arrow" role="arrow"></div>','<div class="tau-bubble__inner tau-container" role="content"></div>',"</div>"].join(""),content:d,onPositionConfig:function(e){return e.my="center top",e.at="center bottom",e.collision="fit flip",e},onArrowPositionConfig:function(e,t){return"bottom"===t?(e.my="center bottom",e.at="center top"):(e.my="center top",e.at="center bottom"),e},onHide:function(){u.configurator.getKeyBoardManager().popHandler(),y(n,l)},onShow:function(){e.contextMenu.op.registerKeyHandlerFilter(b),u.configurator.getKeyBoardManager().pushHandler({});var t=m.tauBubble("widget");t.find(".tau-lookup-block").show(),t.find(".i-role-confirmation-content").hide(),t.removeClass("tau-warning-bubble"),t.find(".filter-field").focus(),t.unbind("click"),r.tauBubble("adjustPosition"),t.one("click",".i-role-actioncancel",function(){m.tauBubble("hide"),s.reject()}),t.one("click",".i-role-actionok",function(){m.tauBubble("hide");var e=a.data();s.resolve(e.entityId)})},zIndex:99999});return m.tauBubble("show"),i.fire("$outerBubbled.shown",m),n.push({hide:t.bind(m.tauBubble,m,"hide"),name:l}),s},run:function(t,o,i,r,a,u,c,d){var l=n.create({entityType:"userstory"}),f=this,b=e.Deferred();l.on("afterRender",function(n,m){var y=f.setup(t,m,l,i,o,a);e.when(b,y).done(function(e,t){a.configurator.getActionsService().convertGeneralToTask(t,e).done(function(e){r.$menu.trigger("contextmenu:hide"),c.notifyAboutSuccess(a.srcEntityType,a.dstEntityType,e.d);var t=o.data();delete t[s],u(t)}).fail(d)})}),l.on("entitySelected",function(e,t){var n=i.tauBubble("widget");n.find(".tau-lookup-block").hide(),n.find(".i-role-confirmation-content").show(),n.addClass("tau-warning-bubble"),i.tauBubble("adjustPosition"),b.resolve(t.entity.id)}),l.on("result.ready",function(){i.tauBubble("adjustPosition")}),l.initialize({context:a.appContext})}},y=function(e,n){if(null!==n){var o=t.findWhere(e,{name:n});if(o){var i=e.indexOf(o);e.splice(i,1)}}};return{createMenuItem:function(n){var b=new a(n),p=function(){var o="board.cell.convert.success",i=n.configurator,r=n.bus,a=e.Deferred();return n.configurator.getComponentBusRegistry().getByName("entityViewer").done(a.resolve),i.getTemplateFactory().register({name:o,engine:"jqote2",markup:["<h3>","Success!","</h3>","<p>","<%! this.srcType %> ","<%! this.name %> "," has been converted to ","<%! this.dstType %> ",'<a class="ui-quick-add-notification-link i-role-card-view tau-entity-name" href="<%= this.url %>">',"<%! this.name %>","</a>",". ","</p>"]}),{createNodeMessage:function(e,t,n){var r=i.getUrlBuilder().getNewViewUrl(n.ID,t.name,!0),a=i.getTemplateFactory().get(o).bind({},{srcType:e.term,dstType:t.term,name:n.Name,url:r});return a},notifyAboutSuccess:function(e,n,o){var i=this.createNodeMessage(e,n,o);a.then(function(e){i.on("click",".i-role-card-view",t.bind(function(t){t.preventDefault(),e.fire("cardDataToShow.ready",{entityId:o.ID,entityType:n.name.toLowerCase()}),this.fire("close")},r)),r.fire("notification",{$node:i})})}}}(),v=function(e){b.deleteCard(e,n.bus)},h=function(e){var t=JSON.parse(e.responseText)||{Message:"Server is not available"},o=u.translateServerError.call(this,t);n.bus.fire("error",o)},g=function(e,o,i,r){var a=i.$trigger.data(),u=a.entityId,c=r.$node,d="confirm";c.tauConfirm({showEvent:null,content:["<h3>"+f(o)+"</h3>"].join(""),className:"context-menu-do-not-hide i-role-taububble-ignore",callbacks:{success:t.bind(function(e){e.$menu.trigger("contextmenu:hide");var t=o.dstEntityType.id;o.configurator.getActionsService().convertGeneralToType(u,t).done(function(e){p.notifyAboutSuccess(o.srcEntityType,o.dstEntityType,e.d),delete a[s],v(a)}).fail(h)},n.bus,i)},onHide:function(){y(e,d)}}),t.defer(t.bind(c.tauConfirm,c),"show"),e.push({hide:t.bind(c.tauConfirm,c,"hide"),name:d})},T=function(e,t,n,o){m.run(e,n.$trigger,o.$node,n,t,v,p,h)},w=function(t){var o=t.data();return o.hasOwnProperty(s)?e.Deferred().resolve(o[s]):c?e.Deferred().resolve([]):n.configurator.getActionsService().getEntityTypesToConvert(o.entityId).done(function(e){t.data(s,e)}).fail(h)},C=[],k=function(){t.each(C,function(e){e.hide()}),C=[]},B=function(e){return"task"===e.name.toLowerCase()},x=function(a,u){var c=e("<div>Loading&hellip;</div>"),s="submenu",d={template:['<div class="tau-bubble-board">','<div class="tau-bubble-board__inner tau-container convert-menu-items" role="content" ></div>',"</div>"].join(""),showEvent:"",hideEvent:"",stackName:"context-menu-convert-action",content:c,onPositionConfig:function(e){return e.my="left center",e.at="right center",e.collision="flipfit",e},onHide:function(){y(C,s)}},l=u.$node.tauBubble(d);l.tauBubble("show"),C.push({hide:t.bind(l.tauBubble,l,"hide"),name:s});var f=a.$trigger,b=o.convertToEntity(f.data()),m=i.create(b,n.configurator),p=w(f);e.when(m,p).then(function(o,i){var u=f.data("entityType"),s=new r(o.getTerms()),d=s.getTerms(u),l={name:u,term:d.name};c.empty();var b=e("<div></div>");t.chain(i).sortBy(function(e){return B(e)?1:0}).each(function(i){var r=B(i)?i.term+"...":i.term,u=s.getTerms(i.name),c={srcEntityType:l,dstEntityType:i,appContext:o,configurator:n.configurator},d=B(i)?t.partial(T,C,c):t.partial(g,C,c),f=e('<div class="custom-context-menu-item" data='+i.term.toLowerCase()+"></div>"),m=e('<span><i class="tau-entity-icon tau-'+i.name.toLowerCase()+'">'+u.iconSmall+"</i>"+r+"</span>");f.append(m),f.click(function(t){d(a,{$node:e(this)}),t.stopPropagation()}),f.mouseenter(function(t){e(t.currentTarget).addClass("hover")}),f.mouseleave(function(t){e(t.currentTarget).removeClass("hover")}),b.append(f)}),c.append(b)})};return{name:"Convert to...",className:d,isDisabled:c,onHide:function(){k()},disabled:function(){var e=this,t=e.data("entityType");return!l.allowedFor(t)},itemClickCallback:function(e,t){return x(e,t),!1}}}}});
define('tau/models/choice/model.choice.base',["Underscore","tau/core/model.editable.base"],function(t,e){return e.extend({getAssignable:function(t){var e=this.config.context.entity,i=e.entityType.name,n=e.id,a={id:n,fields:this.getRequiredFields()};return this.store.get(i,a).done({success:t}),this},sortProjects:function(e){var i=this.config.context.applicationContext,n=t.pluck(i.selectedProjects,"id"),a=e.sort(function(e,i){var a=t.indexOf(n,e.id),r=t.indexOf(n,i.id);return a>=0&&r>=0||0>a&&0>r?e.id-i.id:-1*a+r});return a},getCurrentEntityId:function(){var t=this.config.data;return t?t.id?t.id:t.value&&t.value.id?t.value.id:null:null},getRequiredFields:function(){return["id"]},onDataRetrieved:function(e){var i=t.pluck(e,"data");this.processData.apply(this,i)},"bus updateState":function(t,e){var i=null;e&&e.id&&(i={id:e.id});var n={};n[this.propertyType]=i;var a={$set:n,additionalData:e};this.fire("save",a)},isNullableValue:function(){return this.config.data&&t.has(this.config.data,"hasValue")?this.config.data.hasValue:null!==this.getCurrentEntityId()}})});
define('tau/models/choice/model.choice.project',["Underscore","./model.choice.base"],function(e,t){var i={bug:["Bug Tracking"],feature:["Requirements"],release:["Requirements"],testcase:["Test Cases"],testplan:["Test Cases"],iteration:["Iterations"],request:["Help Desk"]};return t.extend({propertyType:"project",init:function(e,t){this._super(e),this.showCurrentProject=!!t},"bus beforeInit":function(t,i){var n=i.config.context.entity,r=i.config.context.configurator,o=r.getStore(),s=e.bind(this.fire,this),a={fields:["id","name","color","isActive",{process:["id",{practices:["id","name"]}]}]},c={id:n.id,fields:["id",{project:["id"]}]};o.get("project",a).done(function(e){s("items.ready",e[0].data)}),o.get(n.entityType.name,c).done(function(e){s("currentItem.ready",e[0].data.project||{})})},"bus beforeInit:last + items.ready + currentItem.ready":function(t,n,r,o){var s=n.config,a=n.config.context.entity.entityType.name.toLowerCase(),c=i[a]||[],u=o&&o.id;r=e.filter(r,function(t){var i=!0;if(c.length&&t.isActive){var n=e.pluck(t.process.practices,"name");i=e.any(n,function(t){return e.indexOf(c,t)>=0})}return t.isActive&&i}),r=e.sortBy(r,function(e){return e.name.toLowerCase()}),!this.showCurrentProject&&u&&(r=e.reject(r,function(e){return e.id===o.id}));var d={states:r,completed:!0,nullableValue:this.isNullableValue(),templateOption:s.templateOption};this.fire("dataBind",d)}})});
define('tau/models/choice/model.choice.copy.to.project',["tau/models/choice/model.choice.project","tau/utils/utils.serverErrorTranslator"],function(e,t){return e.extend({init:function(e){this._super(e,!0)},handleSave:function(e,t){var i=e.$set||e,a=i.project.id,n=t.id,r=this.config.context.configurator,o=r.getActionsService();this.fire("beforeSave",e.additionalData),o.copyGeneralToProject(n,a,this._saveCompleted.bind(this,e.additionalData),this._saveFailed.bind(this,e.additionalData))},_saveCompleted:function(e,t){var i=t.d,a=i.EntityTypeName.split("."),n=a[a.length-1],r={entityId:i.GeneralID,entityType:n,selectedProjectData:e};this.fire("afterSave",r)},_saveFailed:function(e,i){var a=t.translateXhrError(i);a.data=e,this.fire("saveFailed",a)}})});
define('tau/ui/extensions/choice/ui.extension.choice.copy.to.project',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,t,n){return n.extend({"bus afterRender:last + beforeSave":function(e,t,n){this._toggleProgressIndicator(t.element,n.id,!0)},"bus afterRender:last + afterSave":function(e,t,n){this._toggleProgressIndicator(t.element,n.id,!1)},"bus afterRender:last + saveFailed":function(e,t,n){this._toggleProgressIndicator(t.element,n.data.id,!1)},_toggleProgressIndicator:function(e,t,n){var r=e.find("[data-id="+t+"]");n?(r.tauProgressIndicator(),r.tauProgressIndicator("show",{hover:!0})):r.tauProgressIndicator("hide")}})});
define('tau/ui/templates/choice/project/ui.template.choice.project.option',["tau/core/templates-factory"],function(o){var t={name:"state.project.option",engine:"jqote2",markup:['<div role="option" data-id="<%! this.id %>" data-project-name="<%! this.name %>" class="drop-down-option drop-down-option-project  i-role-option" <% if (this.description) { %> title=<%! this.description %> <% } %> >','<span class="drop-down-option__prefix">',"<% if (this.color) { %>",'<i style="background-color: <%! this.color %>;" class="tau-icon tau-icon_type_color"></i>',"<% } else { %>",'<i class="tau-icon tau-icon_type_color tau-icon_name_empty "></i>',"<% } %>","</span>",'<span class="drop-down-option__text i-role-optiontext"><%! this.name %></span>',"</div>"]};return o.register(t)});
define('tau/services/entities/service.entities.copy-to-project',["tau/core/class","tau/models/page.entity/entity.context.factory","tau/models/choice/model.choice.copy.to.project","tau/ui/extensions/choice/ui.extension.choice.copy.to.project","tau/ui/templates/choice/project/ui.template.choice.project.option","tau/core/termProcessor"],function(e,o,t,n,i,c){return e.extend({createCopyToProjectBubbleConfig:function(e){var o=e.applicationContext,s=e.subscribeToComponentEvents,r=e.navigateToEntityDetails,a=e.eventBus,p=new c(o.getTerms());return{destroyExistingBubble:!0,onPositionConfig:this._getPositionConfig,onArrowPositionConfig:this._getArrowPositionConfig,applyBubbleClasses:!1,closeOnStoreActions:!1,className:"tau-lookup-styled-drop-down i-role-card-context-menu-copyToProject",stackName:"entity.menu.copy.to.project",showEvent:"__show__empty",hideEvent:"__hide__empty",cleanupOnHide:!0,zIndex:99999,context:o,componentsConfig:{components:[{type:"choice",filter:!0,filterPlaceholder:"Search Project",templateOption:i.name,model:t,extensions:[n],handleComponentEvents:function(e,o){e("afterSave",function(e,t){this._onCopyCompleted(a,o,p,r,t)}.bind(this)),e("saveFailed",function(e,o){a.fire("error",o)}),s&&s(e)}.bind(this)}]}}},_onCopyCompleted:function(e,o,t,n,i){o.destroyBubble();var c=t.getTerm(i.entityType),s=i.selectedProjectData,r=s?s.projectName:"",a=["<h3>Success!</h3>","<p>",c,' copied to project "',r,'"</p>'].join("");e.fire("notification",{id:"entity.copied.to.project",$node:$(a),type:"success",delay:5e3,disableAutoClose:!1}),n&&n(i)}})});
define('tau/ui/extensions/board.plus/card-context-menu/menu-action-item-copy-to-project',["Underscore","jQuery","tau/models/page.entity/entity.context.factory","tau/ui/extensions/board.plus/card-context-menu/menu-bubbleCreator","tau/ui/extensions/board.plus/card-context-menu/menu-action-item-base","tau/services/entities/service.entities.copy-to-project"],function(e,t,n,i,o,r){return o.extend({name:"Copy to project&hellip;",className:"i-role-card-context-menu-copyToProject",itemClickCallback:function(e){var t=new i(e.$trigger,this);n.create(t.entity,this.settings.configurator).done(this._createBubble.bind(this,t))},_createBubble:function(e,n){var i=new r,o=this.settings.configurator,a=function(e){var t=o.getComponentBusRegistry().getByName("entityViewer");t.done(function(t){t.fire("cardDataToShow.ready",e)}.bind(this))}.bind(this),c=function(t){t("choice.editable.filter.changed",function(){e.getTarget().tauBubble("adjust")})},s=i.createCopyToProjectBubbleConfig({applicationContext:n,navigateToEntityDetails:a,subscribeToComponentEvents:c,eventBus:this.settings.bus});s.alignTo=function(){var n=t(e.cardSelector);return 0===n.length&&(n=t(e.$trigger.data("card-selector"))),n},e.createBubble(s)},getSupportedEntityTypes:function(){return["feature","userstory","bug","testcase","testplan","request"]}})});
define('tau/ui/extensions/board.plus/card-context-menu/menu-timeline-action-item-base',["jQuery","Underscore","tau/ui/extensions/board.plus/card-context-menu/menu-action-item-base"],function(e,t,n){var r=n.extend({disabled:function(e,t){var n=Boolean(t.$trigger.closest(".i-role-cellholder").data("istimeline"));return!n||this._super.apply(this,arguments)},_getPlannableTypes:function(){return["feature","userstory","task","bug","request","testplan","testplanrun","project","impediment"]}});return r});
define('tau/ui/extensions/board.plus/card-context-menu/menu-action-item-plan',["jQuery","Underscore","tau/ui/extensions/board.plus/card-context-menu/menu-timeline-action-item-base","tau/utils/utils.date"],function(e,t,a,n){var i=a.extend({name:"Plan",className:"i-role-card-context-menu-plan",itemClickCallback:function(e){var t=e.$trigger.data("data-item"),a={itemId:t.id,position:{plannedStartDate:this._serializeDate(t.actualStartDate),plannedEndDate:this._serializeDate(t.actualEndDate)}},n=this.settings.sliceReady.slice;n.movePlannedDatesBatch({$set:{items:[a]}})},disabled:function(e,a){var n=a.$trigger.data("data-item"),i=!t.isUndefined(n.plannedStartDate)||!t.isUndefined(n.plannedEndDate);return i||this._super.apply(this,arguments)},getSupportedEntityTypes:function(){return this._getPlannableTypes()},_serializeDate:function(e){return n.format.datetime.short(n.convertToTimezone(new Date(e)))}});return i});
define('tau/ui/extensions/board.plus/card-context-menu/menu-action-item-unplan',["jQuery","Underscore","tau/ui/extensions/board.plus/card-context-menu/menu-timeline-action-item-base"],function(e,t,n){var a=n.extend({name:"Unplan",className:"i-role-card-context-menu-unplan",itemClickCallback:function(e){var t={itemId:e.$trigger.data("id"),position:{plannedStartDate:null,plannedEndDate:null}},n=this.settings.sliceReady.slice;n.movePlannedDatesBatch({$set:{items:[t]}})},disabled:function(e,t){var n=t.$trigger.data("data-item");return!n.showPlanned||this._super.apply(this,arguments)},getSupportedEntityTypes:function(){return this._getPlannableTypes()}});return a});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.card-context-menu',["jQuery","Underscore","tau/core/extension.base","tau/ui/extensions/ui.context-menu","tau/ui/extensions/board.plus/card-context-menu/menu-action-open-new-tab","tau/ui/extensions/board.plus/card-context-menu/menu-action-item-rename","tau/ui/extensions/board.plus/card-context-menu/menu-action-item-change-tags","tau/ui/extensions/board.plus/card-context-menu/menu-action-item-add","tau/ui/extensions/board.plus/card-context-menu/menu-action-item-assignments","tau/ui/extensions/board.plus/card-context-menu/menu-action-item-delete","tau/ui/extensions/board.plus/card-context-menu/menu-action-item-convert","tau/ui/extensions/board.plus/card-context-menu/menu-action-item-copy-to-project","tau/ui/extensions/board.plus/card-context-menu/menu-action-item-plan","tau/ui/extensions/board.plus/card-context-menu/menu-action-item-unplan","tau/ui/behaviour/common/ui.behaviour.editableText"],function(e,t,n,a,i,s,o,r,u,c,d,l,m,p){return n.extend({resetLifecycle:!0,cardMenuActionActivatedCssClass:"i-role-permanent-context-menu-action-activated","bus slice.ready + configurator.ready:last + domWrapper.ready:last + viewMode.ready:last + model.zoomLevelChanged:last + boardSettings.ready:last + cardLayoutFactory.ready:last":function(e,t,n,g,x,h,b,v){this.options={bus:this,sliceReady:t,configurator:n,domWrapper:g,viewMode:x,zoomLevelData:h,boardSettings:b,layout:v,activationCssClass:this.cardMenuActionActivatedCssClass,propertiesToEvict:[]};var S={handlers:{open:new i(this.getSettings()),rename:new s(this.getSettings()),changeTagsAction:new o(this.getSettings({propertiesToEvict:["tags"],activationCssClass:["i-role-permanent-context-menu-tags",this.cardMenuActionActivatedCssClass].join(" ")})),assignments:new u(this.getSettings({propertiesToEvict:["entityState","assignments","roleEfforts"],activationCssClass:["i-role-permanent-context-menu-assignments",this.cardMenuActionActivatedCssClass].join(" ")})),addAction:new r(this.getSettings()),convert:d.createMenuItem(this.getSettings()),copyToProject:new l(this.getSettings()),plan:new m(this.getSettings()),sep1:"---------",unplan:new p(this.getSettings()),del:new c(this.getSettings())},showSelectors:[".tau-board .i-role-card",".tau-boardclipboard .i-role-card"],skipShowSelectors:[".tau-id"]};"timeline"!==this.options.viewMode&&(delete S.handlers.plan,delete S.handlers.unplan);var w=new a(S);w.initContextMenu()},getSettings:function(e){return t.extend(this.options,e)}})});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.requestIndicator',["jQuery","app.path","tau/components/extensions/component.extension.base"],function(e,t,a){return a.extend({"bus afterRender":function(){this.fire("template.bind",{name:"boardplus.request.indicator",data:{imageSrc:t.get()+"/JavaScript/tau/css/images/loader-yellow.gif"}})},"bus template.boardplus.request.indicator.bound+afterRender":function(e){var t=e["template.boardplus.request.indicator.bound"].data.element;e.afterRender.data.element.append(t)},"bus template.boardplus.request.indicator.bound:last+model.requestBegin":function(e){var t=e["template.boardplus.request.indicator.bound"].data.element;t.show()},"bus template.boardplus.request.indicator.bound:last+model.requestCompleted":function(e){var t=e["template.boardplus.request.indicator.bound"].data.element;t.hide()}})});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.cardsUpdater',["Underscore","jQuery","tau/core/extension.base","tau/models/board.customize.units/const.card.sizes"],function(e,o,t,a){var i=function(e){return"tau-ui-size-"+(a.zoomToSize(e)||"min")};return t.extend({"bus view.skeleton.built":function(){this.fire("view.cards.update.complete")},"bus view.skeleton.built:last + model.zoomLevelChanged":function(e){var o=e["view.skeleton.built"].data.element,t=o.children(),n=t.data("zoomLevel"),d=e["model.zoomLevelChanged"].data.zoomLevel;n==d||o.hasClass("tau-board-becomes-old")||(t.data("zoomLevel",d),t.data("zoomSize",a.zoomToSize(d)),o.find(".i-role-card").length<=150&&!o.find(".tau-board-timeline-view").length&&(t.removeClass(i(n)),t.addClass(i(d))))}})});
define('tau/models/board.plus/model.board.plus.refresher',["Underscore","tau/core/extension.base"],function(e,t){return t.extend({"bus boardSettings.ready:last + refresh":function(e,t){this.fire("boardSettings.ready",t)},"bus configurator.ready":function(t,i){var n=i.getAppStateStore();n.unbind({listener:this}),n.bind({fields:["acid"],listener:this,callback:e.bind(function(){e.delay(e.bind(this.fire,this,"refresh"),100)},this)})},"bus configurator.ready > destroy":function(e,t){var i=t.getAppStateStore();i.unbind({listener:this})},bindBoardSettings:function(t,i){var n=i.boardSettings;n.unbind({listener:this}),n.get({fields:["viewMode"],callback:function(t){var i=["x","y","cells","focus","user","cardSettings","timelineGlobalDateRange","timelineSettings"];"timeline"==t.viewMode&&i.push("zoomLevel"),n.bind({fields:i,listener:this,callback:e.bind(function(){this.fire("refresh")},this)})}.bind(this)})},"bus configurator.ready:last + boardSettings.ready + overview.board.ready":function(e,t,i){this.bindBoardSettings(t,i)},"bus configurator.ready:last + boardSettings.ready + no.data.in.slice":function(e,t,i){this.bindBoardSettings(t,i)},"bus boardSettings.ready > destroy":function(e,t){var i=t.boardSettings;i.unbind({listener:this})}})});
define('tau/models/board.plus/model.board.slice.metaInfo',["Underscore","tau/core/extension.base"],function(e,n){return n.extend({"bus model.cells.content.loaded":function(e){var n=e.data.metaInfo||e.data.data.metaInfo||{};this.fire("model.cells.metaInfo.ready",n)}})});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.external.api',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,n,t){return t.extend({"bus slice.ready:last + external.api.get.slice":function(e,n){this.fire("external.api.slice.ready",n)}})});
define('application.creator',["jQuery"],function(n){return{create:function(o){var t=n.Deferred(),i=require;return i(["all.components"],function(){i(["tau/components/component.application.generic"],function(n){o.options=o.options||{},o.options.applicationId=o.options.applicationId||o.applicationId,o.options.integration=o.options.integration||o.integration,o.context=o.context||{},o.context.configurator=o.context.configurator||o.configurator;var i=n.create(o);t.resolve(i)})}),t}}});
define('tp/reports/service.chart.size',["tau/core/class","tau/core/event"],function(e,t){var n=e.extend({size:function(){return{width:.85*$(window).width(),height:.7*$(window).height()}}});return t.implementOn(n.prototype),n});
define('tp/reports/tp.application.reports',["Underscore","jQuery","application.creator","tau/services/service.navigator","tp/reports/service.chart.size"],function(e,t,n,r,o){var a="appReports",i=function(r){r._id=e.uniqueId("report_charts_viewer"),r.isBoardEdition=!0;var o=[{pattern:/reports$/,adapter:function(){this.resolve({id:null,entity:"reports"})},type:"tau/components/component.page.reports",host:"tau/components/component.master.empty"},{pattern:/reports\/(\w+)/,adapter:function(e){this.resolve({id:null,entity:"reports",reportType:e})},type:"tau/components/component.page.reports",host:"tau/components/component.master.empty"},{pattern:/(\w+)\/([0-9]+)($|\s|&)/,adapter:function(e,t){this.resolve({id:parseInt(t,10),entity:e,action:"show"})},type:"tau/components/component.page.entity",host:"tau/components/component.master.empty"},{pattern:/(\w+)\/([0-9]+)\/(\w+)[&|]*.*/,adapter:function(e,t,n){this.resolve({id:parseInt(t,10),entity:e,action:n})},type:"tau/components/component.page.entity",host:"tau/components/component.master.empty"}],i={name:"application charts",applicationId:a,routes:o,configurator:r,options:{routing:{silent:!0}},integration:{disableProgressIndicator:!0,showInPopup:!0,keepAlive:!1}};return n.create(i).then(function(e){var n=t.Deferred();return e.on("innerContentRendered",function(e,t){{var n=t.element;n.parents(".i-role-application")}}),e.initialize(i),n.resolve(e),n})},p=function(e,t){var n=e.createChild();n.getExternal().setFakeWindow(),n.registerService("chart.size",new o),n.registerService("navigator",new r(n,{parameterName:a})),n.service("navigator").to("reports/"+t.active),i(n)};return{initialize:p}});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.burnDown',["jQuery","tau/components/extensions/component.extension.base","Underscore","tp/reports/tp.application.reports"],function(n,e,t,a){return e.extend({"bus configurator.ready:last + domWrapper.ready":function(e,t,o){o.board.off("click",".tau-label__burnDown"),o.board.on("click",".tau-label__burnDown",function(){var e=t.getRestStorage();n.when(e.data("burnDownVer2Filter","setting",{scope:"Public",userData:{burnDownType:n(this).data("entity-type"),plannableId:n(this).data("entity-id")}})).done(function(){a.initialize(t,{active:"burnDown"})})})}})});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.finish.iteration',["jQuery","Underscore","tau/components/extensions/component.extension.base"],function(e,t,n){return n.extend({"bus configurator.ready:last + domWrapper.ready":function(t,n,o){o.board.on("click",".tau-label__finish",function(t){t.stopPropagation(),t.stopImmediatePropagation();var o=e(t.currentTarget).data();n.getComponentBusRegistry().getByName("entityViewer").done(function(e){e.fire("cardDataToShow.ready",{entityId:o.entityId,entityType:"finish-"+o.entityType})})})}})});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.teamProject.batchMove',["Underscore","jQuery","tau/core/extension.base","tau/libs/store2/store2","tau/utils/utils.serverErrorTranslator"],function(e,t,r,i,n){return r.extend({resetLifecycle:!0,init:function(e){this._super(e);var t=e.context.configurator;this.confirmTemplate=t.getTemplateFactory().register({name:"board.plus.teamProject.batchMove.confirm",engine:"jqote2",markup:['<div class="tau-system-message-body-inner">',"<h3>Please, confirm</h3>",'<p><a class="tau-target-link i-role-actionassign"">Assign</a>  all people from <%! this.teamTerm %> to <%! this.projectTerm %>?<p>',"</div>"]}),this.successTemplate=t.getTemplateFactory().register({name:"board.plus.teamProject.batchMove.success",engine:"jqote2",markup:['<div class="tau-system-message-body-inner">',"<h3>Success!</h3>","<p><%! this.count %> new <% if (this.count !== 1){%>people<%}%><% else {%>person<%}%> from <%! this.teamTerm %> assigned to <%! this.projectTerm %><p>","</div>"]})},"bus slice.ready + configurator.ready:last + domWrapper.ready:last":function(t,r,i,n){var o=r.full?r.full.config.definition:{},a=e.chain(o.cells?o.cells.types:[]).reject(function(e){return"project"!==e.type&&"team"!==e.type}).value();if(1===a.length){var s,c=e.intersection(o.x?o.x.types:[],["project","team"]);1===c.length?s="x":(c=e.intersection(o.y?o.y.types:[],["project","team"]),1===c.length&&(s="y")),s&&1===c.length&&(r.full.on("after.moveBatch",function(e,t){this._afterBatchMove(t,s,c,i,n)}.bind(this)),r.full.on("after.moveAndPrioritizeBatch",function(e,t){this._afterBatchMove(t,s,c,i,n)}.bind(this)))}},_afterBatchMove:function(t,r,i,n,o){var a=t.command.config.$set.items[0];if(a.oldX!=a.x||a.oldY!=a.y){var s={};s[r]=a[r];var c=o.getAxisCellByCoordinate(s),m=c.find("[data-id="+s[r]+"]"),l=0===m.length;if(l)return;var d=m.data("entity-id");if(d){var u=e.map(t.result.items,function(e){return e.items[0].dataItem.data.cardData.id}),f=n.getTemplateFactory().termProcessor,p=f.getTerm("team","project"===i[0]&&u.length>1?"names":"name"),h=f.getTerm("project","team"===i[0]&&u.length>1?"names":"name"),j=this.confirmTemplate.get().bind({},{teamTerm:p,projectTerm:h});j.on("click",".i-role-actionassign",function(e){e.preventDefault(),"project"===i[0]?this._assignAllPeopleFromTeamsToProject(n,d,u,h,p):"team"===i[0]&&this._assignAllPeopleFromTeamToProjects(n,d,u,f.getTerm("project","name"),p)}.bind(this)),this.fire("notification",{$node:j,disableAutoClose:!0})}}},_assignAllPeopleFromTeamsToProject:function(t,r,o,a,s){var c=new i(t);c.findAll("user?select={id}&where=(ProjectMembers.Count(Project.Id="+r+") = 0 and TeamMembers.Count(Team.Id in ["+o.join(",")+"]) > 0)&take=9999").done(function(i){if(i.length>0){var n=[];n.push({projectId:r,set:{projectMembers:e.map(i,function(e){return{user:{id:e.id}}})}}),this._addProjectMembers(t,n,a,s)}else{var o=this.successTemplate.get().bind({},{count:"No",projectTerm:a,teamTerm:s});this.fire("notification",{$node:o})}}.bind(this)).fail(function(e){var t=n.translateXhrError(e);this.fire("error",t)}.bind(this))},_assignAllPeopleFromTeamToProjects:function(t,r,o,a,s){var c=new i(t);c.findAll("TeamProject?select={"+["id","Team.TeamMembers.Select(User.id) as teamMembers","Team.TeamMembers.Count() as teamMembersCount","new("+["Project.id","Project.ProjectMembers.Select(User.id) as projectMembers"].join(",")+") as project"].join(",")+"}&where=(Project.id in ["+o.join(",")+"] and Team.id="+r+")&take=9999").done(function(r){var i=[];if(e.forEach(r,function(t){var r=e.difference(t.teamMembers,t.project.projectMembers);r.length>0&&i.push({projectId:t.project.id,set:{projectMembers:e.map(r,function(e){return{user:{id:e}}})}})}),i.length>0)this._addProjectMembers(t,i,a,s);else{var n=this.successTemplate.get().bind({},{count:"No",projectTerm:a,teamTerm:s});this.fire("notification",{$node:n})}}.bind(this)).fail(function(e){var t=n.translateXhrError(e);this.fire("error",t)}.bind(this))},_addProjectMembers:function(t,r,i,n){var o=t.getStore(),a=[],s=[];e.forEach(r,function(t){s.push(function(r){o.save("project",{id:t.projectId,$set:t.set,fields:["id","name","color",{projectMembers:[{user:["id","firstName","lastName","avatarUri"]},{role:["id","name"]}]}]}).done({success:function(i){a=a.concat(e.difference(e.map(t.set.projectMembers,function(e){return e.user.id}),a)),r(!1,i[0].data)}})})}),e.parallel(s,function(e,t){if(t.length){var r=this.successTemplate.get().bind({},{projectTerm:i,teamTerm:n,count:a.length});this.fire("notification",{$node:r})}}.bind(this))}})});
define('tau/ui/templates/board.plus/ui.template.boardplus.skeleton.board',["Underscore","tau/core/templates-factory","tau/ui/extensions/board.plus/ui.board.plus.utils"],function(e,a,i){var l={name:"boardplus.skeleton.board",engine:"jqote2",customFunctions:{generateId:i.generateId,generateCellData:i.generateElementData,hasAdditionalInfo:function(a,i,l){return e.any(a,function(a){return l&&(a=a[l]),e.contains(i,a)})}},markup:["<% var hasX = !this.x.isNull; %>","<% var hasY = !this.y.isNull; %>",'<% var xcols = hasX ? this.x.data : [{x:"null"}]; %>','<% var yrows = hasY ? this.y.data : [{y:"null"}]; %>','<% var xColsAdditionalInfo = fn.hasAdditionalInfo(this.definition.x&&this.definition.x.types,["release","iteration","teamiteration"]); %>','<% var yRowsAdditionalInfo = fn.hasAdditionalInfo(this.definition.y&&this.definition.y.types,["release","iteration","teamiteration"]); %>','<% var yRowsUserAvatar = fn.hasAdditionalInfo(this.definition.y&&this.definition.y.types,["team"])&&!fn.hasAdditionalInfo(this.definition.cells&&this.definition.cells.types,["user"],"type"); %>',"<% var additionalClasses = []; %>",'<% this.cardSize && additionalClasses.push("tau-ui-size-" + this.cardSize); %>','<% !hasX && additionalClasses.push("tau-no-cols"); %>','<% !hasY && additionalClasses.push("tau-no-rows"); %>','<div id="<%=_.uniqueId(\'board\')%>" class="tau-board-body <%=xColsAdditionalInfo?"additional-info_x":""%> <%=yRowsUserAvatar?"additional-info_avatar":""%> <%=yRowsAdditionalInfo?"additional-info_y":""%> ">',"<div class=\"i-role-board-body-holder tau-board-view tau-board-table-view tau-board-grid-view <%= additionalClasses.join(' ') %>\" ",'data-zoom-level="<%= this.zoomLevel%>" data-zoom-size="<%=this.cardSize%>"',">",'<div role="board-body" class="i-role-board-body" id="<%=_.uniqueId(\'boardBody\')%>">',"<% if (hasX && hasY) { %>",'<div class="tau-x-header">','<div class="tau-cell">','<div class="tau-collapser">','<button class="tau-h-collapser i-role-collapser"></button>',"</div>",'<div class="tau-label">',"<%= this.y.title %>"," / ","<%= this.x.title %>","</div>","</div>","</div>","<% } %>","<% if (hasY) { %>",'<div role="header" data-dimension="y" class="i-role-header tau-rows-header tau-header-<%= this.definition.y.types[0].toLowerCase() %>">',"<ul>","<% for (var i = 0; i < this.y.data.length; i++) { %>","<% var m = this.y.data[i]; %>",'<li role="cellholder" class="i-role-cellholder tau-cellholder" id="ch_<%= fn.generateId(m) %>" <%= fn.generateCellData({y:m.y}) %>>','<div role="cell" class="i-role-cell tau-cell" id="<%= fn.generateId(m) %>" <%= fn.generateCellData({y:m.y}) %>>',"</div>","</li>","<% } %>","</ul>","</div>","<% } %>","<% if (hasX) { %>",'<div role="header" data-dimension="x" class="i-role-header tau-cols-header tau-header-<%= this.definition.x.types[0].toLowerCase() %>">',"<ul>","<% for (var i = 0; i < this.x.data.length; i++) { %>","<% var m = this.x.data[i]; %>",'<li role="cellholder" class="i-role-cellholder tau-cellholder" id="ch_<%= fn.generateId(m) %>" <%= fn.generateCellData({x:m.x}) %>>','<div role="cell" class="i-role-cell tau-cell" id="<%= fn.generateId(m) %>" <%= fn.generateCellData({x:m.x}) %>>',"</div>","</li>","<% } %>","</ul>","</div>","<% } %>",'<div role="grid" class="i-role-grid tau-grid <% if (!hasX){ %>tau-grid_x_false<% } %> <% if (!hasY){ %>tau-grid_y_false<% } %>" id="grid_<%= _.uniqueId() %>">','<table cellpadding="0" cellspacing="0">',"<tbody>","<% for (var y = 0; y < yrows.length; y++) { %>","<tr>","<% for (var x = 0; x < xcols.length; x++) { %>","<% var coords = { x: xcols[x].x, y: yrows[y].y }; %>",'<td role="cellholder" class="i-role-cellholder tau-cellholder" id="ch_<%= fn.generateId(coords) %>" <%= fn.generateCellData(coords) %> >','<div role="cell" class="i-role-cell tau-cell" id="<%= fn.generateId(coords) %>" <%= fn.generateCellData(coords) %>>',"</div>","</td>","<% } %>","</tr>","<% } %>","</tbody>","</table>","</div>","</div>","</div>","</div>"],dependencies:[]};return a.register(l)});
define('tau/ui/templates/board.plus/ui.template.boardplus.skeleton.list',["Underscore","tau/core/templates-factory","tau/ui/extensions/board.plus/ui.board.plus.utils"],function(e,a,d){var i={name:"boardplus.skeleton.list",engine:"jqote2",customFunctions:{generateId:d.generateId,generateCellData:d.generateElementData},markup:['<% var coords = { x: "null", y: "null" }; %>',"<% var additionalClasses = []; %>",'<% this.cardSize && additionalClasses.push(" tau-ui-size-" + this.cardSize); %>','<div class="tau-board-body" id="<%=_.uniqueId(\'boardBody\')%>">','<div role="board-body" class="i-role-board-body tau-board-view tau-board-composite-view <%= additionalClasses.join(" ") %>" data-zoom-size="<%=this.cardSize%>" data-zoom-level="<%=this.zoomLevel%>">','<div role="grid" class="i-role-grid tau-entity-list">','<div role="cellholder" class="i-role-cellholder" <%= fn.generateCellData(coords) %> id="ch_<%= fn.generateId(coords) %>">','<div role="cell" class="i-role-cell" id="<%= fn.generateId(coords) %>" <%= fn.generateCellData(coords) %>></div>',"</div>","</div>",'<div role="card-details-holder" class="i-card-details-holder tau-entity-data tau-page-entity"></div>',"</div>","</div>"],dependencies:[]};return a.register(i)});
define('tau/ui/templates/board.plus/ui.template.boardplus.skeleton.timeline',["Underscore","tau/core/templates-factory","tau/ui/extensions/board.plus/ui.board.plus.utils"],function(e,l,i){var a={name:"boardplus.skeleton.timeline",engine:"jqote2",customFunctions:{generateId:i.generateId,generateCellData:function(e,l){var a=i.generateElementData(e);return l&&(a+=' data-istimeline="true"'),a},hasAdditionalInfo:function(l,i,a){return e.any(l,function(l){return a&&(l=l[a]),e.contains(i,l)})},getBacklogCol:function(l){return e.find(l.data,function(l){return null!=e.find(l.dynamic.items,function(e){return e.data.isBacklog})}).x},getTimelineCol:function(l){var i=this.getBacklogCol(l),a=e.find(l.data,function(e){return e.x!=i});return a.x}},markup:["<% var hasX = !this.x.isNull; %>","<% var hasY = !this.y.isNull; %>","<% var hasAxis = this.x.data.length > 0; %>",'<% var yrows = hasY ? this.y.data : [{y:"null"}]; %>','<% var yRowsAdditionalInfo = fn.hasAdditionalInfo(this.definition.y&&this.definition.y.types,["release","iteration","teamiteration"]); %>','<% var yRowsUserAvatar = fn.hasAdditionalInfo(this.definition.y&&this.definition.y.types,["team"])&&!fn.hasAdditionalInfo(this.definition.cells&&this.definition.cells.types,["user"],"type"); %>',"<% var additionalClasses = []; %>",'<% this.cardSize && additionalClasses.push(" tau-ui-size-" + this.cardSize); %>','<% !hasX && additionalClasses.push(" tau-no-cols"); %>','<% !hasY && additionalClasses.push(" tau-no-rows"); %>','<div id="<%=_.uniqueId(\'boardBody\')%>" class="tau-board-body <%=yRowsUserAvatar?"additional-info_avatar":""%> <%=yRowsAdditionalInfo?"additional-info_y":""%> ">',"<div class=\"i-role-board-body-holder tau-board-view tau-board-timeline-view tau-board-grid-view<%= additionalClasses.join('') %>\" ",'data-zoom-level="<%=this.zoomLevel%>" data-zoom-size="<%=this.cardSize%>"',">",'<div role="board-body" class="i-role-board-body i-role-bubble-holder">',"<% if (hasAxis) { %>","<% if (hasX && hasY) { %>",'<div class="tau-x-header">','<div class="tau-cell">','<div class="tau-collapser">','<button class="tau-h-collapser i-role-collapser"></button>',"</div>",'<div class="tau-label">',"<%= this.y.title %>"," / ","Timeline","</div>","</div>","</div>","<% } %>","<% if (hasY) { %>",'<div role="header" data-dimension="y" class="i-role-header tau-rows-header tau-header-<%= this.definition.y.types[0].toLowerCase() %>">',"<ul>","<% for (var i = 0; i < this.y.data.length; i++) { %>","<% var m = this.y.data[i]; %>",'<li role="cellholder" class="i-role-cellholder tau-cellholder" id="ch_<%= fn.generateId(m) %>" <%= fn.generateCellData({y:m.y}) %>>','<div role="cell" class="i-role-cell tau-cell" id="<%= fn.generateId(m) %>" <%= fn.generateCellData({y:m.y}) %>>',"</div>","<% if (i === this.y.data.length - 1) { %>",'<div class="footer-pillow"></div>',"<% } %>","</li>","<% } %>","</ul>","</div>","<% } %>","<% if (hasX) { %>",'<div role="header" data-dimension="x" class="i-role-header tau-cols-header tau-header">',"<ul>",'<li role="cellholder" class="i-role-cellholder tau-cellholder i-role-timeline-header-cellholder" <%= fn.generateCellData({ x: fn.getBacklogCol(this.x), isBacklog: true }) %>>','<div  class="i-role-cell tau-cell i-role-timeline-header-cell" <%= fn.generateCellData({ x: fn.getBacklogCol(this.x), isBacklog: true }) %>>','<div class="tau-collapser">','<button class="tau-v-collapser i-role-collapser"></button>',"</div>",'<div class="tau-label">Backlog</div>',"</div>","</li>",'<li style="position:absolute" role="cellholder" class="i-role-cellholder tau-cellholder i-role-timeline-header-cellholder" <%= fn.generateCellData({ x: fn.getTimelineCol(this.x), isBacklog: false }) %>>','<div class="tau-timeline-scale i-role-timeline-header-cell i-role-cell" <%= fn.generateCellData({ x:fn.getTimelineCol(this.x), isBacklog:false }) %>>','<div class="tau-scale-ruler">',"</div>","</div>","</li>","</ul>","</div>","<% } %>",'<div role="grid" class="i-role-grid tau-timeline-grid <% if (!hasX){ %>tau-grid_x_false<% } %> <% if (!hasY){ %>tau-grid_y_false<% } %>" id="grid_<%= _.uniqueId() %>">','<div class="tau-backlog i-role-timeline-column i-role-timeline-column-dynamic-width">','<div class="tau-backlog-body">',"<ul>","<% for (var y = 0; y < yrows.length; y++) { %>","<% var coords = { x: fn.getBacklogCol(this.x), y: yrows[y].y }; %>",'<li role="cellholder" class="i-role-cellholder tau-cellholder" id="ch_<%= fn.generateId(coords) %>" <%= fn.generateCellData(coords, false) %> >','<div role="cell" class="i-role-cell tau-cell" id="<%= fn.generateId(coords) %>" <%= fn.generateCellData(coords, false) %> >',"</div>","<% if (y ===  yrows.length - 1) { %>",'<div class="footer-pillow"></div>',"<% } %>","</li>","<% } %>","</ul>","</div>","</div>",'<div class="tau-timeline i-role-timeline-column">','<div class="tau-timeline-canvas">','<div class="tau-timeline-flow">',"<% for (var y = 0; y < yrows.length; y++) { %>","<% var coords = { x: fn.getTimelineCol(this.x), y: yrows[y].y }; %>",'<div role="cellholder" class="i-role-cellholder tau-cellholder" id="ch_<%= fn.generateId(coords) %>" <%= fn.generateCellData(coords, true) %> >','<div role="cell" class="i-role-cell tau-cell" id="<%= fn.generateId(coords) %>" <%= fn.generateCellData(coords, true) %> >',"</div>","<% if (y === yrows.length - 1) { %>",'<div class="footer-pillow"></div>',"<% } %>","</div>","<% } %>","</div>","</div>","</div>","</div>",'<div class="_tc-timeline-navigator"></div>',"<% } %>","</div>","</div>","</div>"],dependencies:[]};return l.register(a)});
define('tau/ui/templates/board.plus/ui.template.boardplus.skeleton',["Underscore","tau/core/templates-factory","tau/ui/extensions/board.plus/ui.board.plus.utils","tau/ui/templates/board.plus/ui.template.boardplus.skeleton.board","tau/ui/templates/board.plus/ui.template.boardplus.skeleton.list","tau/components/board.new.list/templates/template.new.list","tau/ui/templates/board.plus/ui.template.boardplus.skeleton.timeline"],function(e,t,a){var s={name:"boardplus.skeleton",engine:"jqote2",customFunctions:{generateId:a.generateId,generateCellData:a.generateElementData},markup:["<% var viewMode = this.viewMode; %>",'<%= fn.sub("boardplus.skeleton." + viewMode, this) %>'],dependencies:[]};return t.register(s)});
define('tau/ui/templates/board.plus/ui.template.boardplus.card.assignedUsers',["tau/core/templates-factory"],function(t){var e={name:"boardplus.card.assignedUsers",engine:"jqote2",customFunctions:{name:function(t){return _.trim(_.asString(t.firstName)+" "+_.asString(t.lastName))||_.asString(t.email)},isNotCurrentStateResponsible:function(t,e){return!_.contains(e,t.id)}},markup:["<%_.forEach(this.items,function(item){%>",'<span class="tau-avatar tau-avatar_<%= item.id %> <%if(this.viewTrigger){%>i-role-cellaxis-viewtrigger<%}%> ','<%if(fn.isNotCurrentStateResponsible(item, this.currentStateResponsiblePersons)){%>tau-avatar-not-currentResponsible<%}%>" data-entity-id="<%= item.id %>" data-entity-type="user">',"<% var name = fn.name(item); %>",'<img  alt="<%! name %>" title="<%! name %>" src="<%= item.avatarUri%>24" />',"</span>","<%},this);%>","<%if(this.count>0) { %>",'<span class="count-users">+<%=this.count%></span>',"<%}%>"]};return t.register(e)});
define('tau/ui/templates/board.plus/ui.template.boardplus.cell.axis.item',["Underscore","tau/core/templates-factory","tau/ui/extensions/board.plus/ui.board.plus.utils","tau/utils/utils.date","tau/utils/utils.translation","tau/ui/templates/board.plus/ui.template.boardplus.card.assignedUsers"],function(t,e,i,a,s){var n={name:"boardplus.cell.axis.item",engine:"jqote2",customFunctions:{generateCardData:i.generateElementData,generateFinishButtonOnDemand:function(e){var i="",a=["iteration","teamiteration"];return e&&e.canBeFinished&&t.contains(a,e.type.toLocaleLowerCase())&&(i=[' <span class="i-role-finish-iteration tau-label__finish tau-linkentity__inner" data-entity-id="',e.id,'" data-entity-type="',e.type,'">Finish</span>'].join("")),i},processDates:function(t,e,i,n){function r(t,e){t=a.parse(t),e=a.parse(e);var i=Math.floor((e-t)/36e5),n=Math.ceil(i/24);return n?n+" "+s.pluralize("day|days",n)+" left":i+" "+s.pluralize("hour|hours",i)+" left"}var l=a.convertToTimezone(t),o=a.convertToTimezone(e),u=i?"tau-label__date_current":"",c=i?' <span class="time-left">'+r(new Date,o)+"</span>":"",p=l.getYear()==o.getYear()?"d-MMM":a.getFormatData().date.short;return'<span class="tau-label tau-label__date '+u+'">'+a.formatAs(l,p)+" &mdash; "+a.formatAs(o,p)+c+this.generateFinishButtonOnDemand(n)+"</span>"},velocity:function(t){var e=t.units||"",i=t.effortSum||0;i=Math.round(i);var a=Math.round(t.velocity),s="tau-label__velocity_perfect",n="Perfect match!",r=a-i;if(0!==a&&0!==r){var l=100*Math.abs(r)/a;r>0&&(n="left."),0>r&&(n="overhead."),5>l?s="tau-label__velocity_warning":0>r&&(s="tau-label__velocity_overhead")}else 0!==r&&(r>0&&(n="left."),0>r&&(n="overhead."),0>r&&(s="tau-label__velocity_overhead"));var o="";return!t.id||"Iteration"!=t.type&&"TeamIteration"!=t.type||(o=this.burnDownIcon(t)),r=Math.abs(r),r=r?r+" "+e+" ":"",'<span class="tau-label tau-label__text tau-label__velocity">'+o+'<span class="tau-label_mark">'+i+'</span> of <span class="tau-label_mark">'+a+" "+e+'</span> assigned. <span class="'+s+'">'+r+n+"</span></span>"},effort:function(t){var e="",i=" done.",a="";(!t.effortCompleted&&t.isCurrent||t.isPrevious||t.effortCompleted)&&(a='<span class="tau-label_mark">'+t.effortCompleted+"</span> of "),t.isCurrent&&(e="tau-label__effort_current"),t.isNext&&(e="tau-label__effort_next",t.effortCompleted||(i=" assigned.")),t.isPrevious&&(e="tau-label__effort_previous",t.effortCompleted==t.effortTotal&&(a=""));var s="";return"Release"==t.type&&t.id&&(s=this.burnDownIcon(t)),'<span class="tau-label tau-label__effort '+e+'">'+s+a+'<span class="tau-label_mark">'+t.effortTotal+" "+t.units+"</span>"+i+"</span>"},burnDownIcon:function(t){return'<span class="tau-icon tau-icon_type_svg tau-icon_name_burn-down tau-label__burnDown" data-entity-id="'+t.id+'" data-entity-type="'+t.type.toLowerCase()+'"></span>'},processTags:function(e){return t.compact(t.asString(e).split(","))}},markup:['<% var axis = this.itemData.hasOwnProperty("effort") ? "Y" : "X"; %>','<% if (this.entity.type == "user"){ %>','<div class="i-role-axis-item tau-axiscell__item tau-label i-role-focustrigger">',"<% if (this.isSupportView){ %>",'<span <% if (this.isSupportView){ %> class="i-role-cellaxis-viewtrigger" <% } %> <%= fn.generateCardData({ id: this.id, "entity-id": this.entity.id, "entity-type": this.entity.type}) %>>',"<% if (this.itemData.avatarUri){ %>",'<span class="tau-avatar tau-avatar_<%= this.entity.id %>" >','<img src="<%= this.itemData.avatarUri %>24" />',"</span>","<% } %>",'<span class="tau-label__text tau-name i-role-name"><%! this.name %></span>',"</span>","<% } else { %>",'<span class="i-role-name tau-name"><%! this.name %></span>',"<% } %>","</div>",'<% } else if (axis == "Y" && (this.entity.type == "userstory" || this.entity.type == "feature") && this.itemData.id){ %>','<div class="i-role-axis-item tau-axiscell__item tau-label i-role-focustrigger">',"<% var item = this.itemData; %>",'<% if (item.hasOwnProperty("id")) { %>','<span class="<% if (this.isSupportView){ %>i-role-cellaxis-viewtrigger <% } %>ui-type-icon ui-type-icon-<%= this.entity.type %>" <%= fn.generateCardData({ id: this.id, "entity-id": this.entity.id, "entity-type": this.entity.type}) %>>',"<%= item.id %>","</span>","<% } %>",'<div class="tau-state"><%! item.entityState.name %></div>','<div class="<% if (this.isSupportView){ %>i-role-cellaxis-viewtrigger <% } %> tau-name  i-role-name"  <%= fn.generateCardData({ id: this.id, "entity-id": this.entity.id, "entity-type": this.entity.type}) %>><%! this.name %></div>',"<% if (item.project && item.project.abbreviation) {%>",'<div <% if (item.project.color){ %> style="background-color: <%= item.project.color %>;"<% } %> ','class="tau-project-abbr" title="<%! item.project.name %>"',">","<%! item.project.abbreviation %>","</div>","<% } %>","<% var usersCount = item.assignedUsers.length - 2;%>",'<%if (item.hasOwnProperty("assignedUsers")) {%>','<div class="tau-people">','<%= fn.sub("boardplus.card.assignedUsers",{count:usersCount,items:item.assignedUsers.slice(0,2),viewTrigger:true}) %>',"</div>","<% } %>",'<% if (item.hasOwnProperty("effort")){ %>','<div class="tau-effort">',"<%= item.effort %>",'<%= item.units || "pt" %>',"</div>","<% } %>","</div>",'<% } else if (this.entity.type === "entitystate" || this.entity.type === "priority") { %>','<div class="i-role-axis-item">','<div class="tau-axiscell__item tau-label i-role-focustrigger">',"<% if (this.isSupportView){ %>",'<span class="i-role-cellaxis-viewtrigger" <%= fn.generateCardData({ id: this.id, "entity-id": this.entity.id, "entity-type": this.entity.type}) %> >','<% if (this.entity.type == "team"){ %>',"<span>","<% if (this.itemData.icon){ %>","<i class=\"tau-icon tau-icon_type_svg tau-icon_name_<%= this.itemData.icon || '' %>\"></i>","<% } else { %>",'<i class="tau-icon tau-icon_type_svg tau-icon_name_trihead"></i>',"<% } %>","</span>",'<% } else if (this.entity.type == "project") { %>',"<% if (this.itemData.color){ %>",'<i class="tau-icon tau-icon_type_color ui-type-icon-project" style="background-color: <%= this.itemData.color %>;"></i>',"<%} else {%>",'<i class="tau-icon tau-icon_type_color ui-type-icon-project tau-icon_name_empty"></i>',"<%}%>","<% } else { %>",'<span class="ui-type-icon ui-type-icon-<%= this.entity.type %>" >',"<%= this.entity.id %>","</span>","<% } %>",'<span class="tau-label__text  i-role-name"><%! this.name %><%if(this.itemData.isCurrent){%> <span class="tau-label__text_current">(Current)</span><%}%></span></span>',"<% } else { %>",'<span class="i-role-name" <%= fn.generateCardData({ids: this.itemData.ids}) %>><%! this.name %><%if(this.itemData.isCurrent){%> <span class="tau-label__text_current">(Current)</span><%}%></span>',"<% } %>","</div>","<% } else { %>",'<div class="i-role-axis-item">','<div class="tau-axiscell__item tau-label i-role-focustrigger">',"<% if (this.isSupportView){ %>",'<span class="i-role-cellaxis-viewtrigger" <%= fn.generateCardData({ id: this.id, "entity-id": this.entity.id, "entity-type": this.entity.type}) %> >','<% if (this.entity.type == "team"){ %>',"<span>","<% if (this.itemData.icon){ %>","<i class=\"tau-icon tau-icon_type_svg tau-icon_name_<%= this.itemData.icon || '' %>\"></i>","<% } else { %>",'<i class="tau-icon tau-icon_type_svg tau-icon_name_trihead"></i>',"<% } %>","</span>",'<% } else if (this.entity.type == "project") { %>',"<% if (this.itemData.color){ %>",'<i class="tau-icon tau-icon_type_color ui-type-icon-project" style="background-color: <%= this.itemData.color %>;"></i>',"<%} else {%>",'<i class="tau-icon tau-icon_type_color ui-type-icon-project tau-icon_name_empty"></i>',"<%}%>","<% } else { %>",'<span class="ui-type-icon ui-type-icon-<%= this.entity.type %>" >',"<%= this.entity.id %>","</span>","<% } %>",'<span class="tau-label__text  i-role-name"><%! this.name %><%if(this.itemData.isCurrent){%> <span class="tau-label__text_current">(Current)</span><%}%></span></span>',"<% } else { %>",'<span class="i-role-name"><%! this.name %><%if(this.itemData.isCurrent){%> <span class="tau-label__text_current">(Current)</span><%}%></span>',"<% } %>","</div>",'<% if (this.entity.type == "team"){ %>','<div class="tau-team-members">',"<% var users = this.itemData.users || []; _.forEach(users, function(user,index,users){ %>","<%if(index < 7){%>",'<span class="tau-avatar i-role-cellaxis-viewtrigger" <%= fn.generateCardData({ id: user.id, "entity-id": user.id, "entity-type": "user"}) %> ><img title="<%= user.name %>" src="<%= user.avatarUri %>24" /></span>',"<%}%>","<%if(index == 7){%>",'<span class="count-users">+ <%=users.length - index%></span>',"<%}%>","<% });  %>","</div>","<% } %>","<% if (this.itemData.startDate && this.itemData.endDate){ %>","<%= fn.processDates(this.itemData.startDate, this.itemData.endDate, this.itemData.isCurrent, {id:this.entity.id, type:this.entity.type, canBeFinished:this.itemData.canBeFinished})%>","<% } %>","<% if (this.itemData.velocity !== undefined){%>","<%= fn.velocity(this.itemData)%>","<%}%>","<% if (this.itemData.effortCompleted !== undefined && this.itemData.effortTotal !== undefined){%>","<%= fn.effort(this.itemData)%>","<%}%>","</div>","<% } %>"],dependencies:[]};return e.register(n)});
define('tau/ui/templates/board.plus/ui.template.boardplus.cell.axis.skeleton',["tau/core/templates-factory","tau/ui/templates/board.plus/ui.template.boardplus.cell.axis.item"],function(e){var l={name:"boardplus.cell.axis.skeleton",engine:"jqote2",markup:["<% if (this.dynamic) { %>",'<%= fn.sub("boardplus.cell.axis.item", this) %>','<div class="i-role-axis-mark-collapser tau-axiscell__item tau-collapser">','<button role="collapser" class="i-role-collapser tau-v-collapser"></button>',"</div>",'<label class="i-role-axis-mark-selector tau-axiscell__item tau-selector">','<input type="checkbox" name="focus" />',"</label>","<% } %>"]};return e.register(l)});
define('tau/ui/templates/board.plus/customized/ui.template.boardplus.cell.grid.skeleton.customized',["tau/core/templates-factory","tau/ui/templates/board.plus/customized/ui.template.boardplus.default.card.customized"],function(t){var e={name:"boardplus.cell.grid.skeleton.customized",engine:"jqote2",markup:[["<% for(var itemIndex = 0; itemIndex < this.dynamic.items.length; itemIndex++) { %>","<% var dataItem = this.dynamic.items[itemIndex]; %>","<% var type = dataItem.type.toLowerCase(); %>",'<%= fn.sub("board.plus.default.card.customized", {dataItem:dataItem, layout:this.getLayout(type), configurator: this.configurator}) %>',"<% } %>"].join("")]};return t.register(e)});
define('tau/ui/templates/board.plus/ui.template.boardplus.request.indicator',["tau/core/templates-factory"],function(a){var i={name:"boardplus.request.indicator",engine:"jqote2",markup:['<div style="display:none;" role="status" aria-hidden="true">','<div class="loadBar" id="loadDiv">','<img class="icon" src="<%= this.imageSrc %>">&nbsp;<span>Loading</span>',"</div>","</div>"].join("")};return a.register(i)});
define('tau/components/component.board.plus.base',["Underscore","tau/core/bus.profiler","tau/components/component.creator","tau/ui/extensions/board.plus/ui.extension.board.plus.view","tau/ui/extensions/board.plus/ui.extension.board.plus.controller","tau/ui/extensions/board.plus/ui.extension.board.plus.templateBinder","tau/ui/extensions/board.plus/ui.extension.board.plus.card-context-menu","tau/ui/extensions/board.plus/ui.extension.board.plus.requestIndicator","tau/ui/extensions/board.plus/ui.extension.board.plus.cardsUpdater","tau/models/board.plus/model.board.plus.refresher","tau/models/board.plus/model.board.slice.metaInfo","tau/ui/extensions/board.plus/ui.extension.board.plus.errors","tau/components/extensions/error/extension.errorBar","tau/ui/extensions/board.plus/ui.extension.board.plus.external.api","tau/components/extensions/bubble/extension.bubble.creator","tau/components/extensions/component.creator.extension","tau/ui/extensions/board.plus/ui.extension.board.plus.burnDown","tau/ui/extensions/board.plus/ui.extension.board.plus.finish.iteration","tau/ui/extensions/board.plus/ui.extension.board.plus.teamProject.batchMove","tau/ui/templates/board.plus/ui.template.boardplus.skeleton","tau/ui/templates/board.plus/ui.template.boardplus.cell.axis.skeleton","tau/ui/templates/board.plus/customized/ui.template.boardplus.cell.grid.skeleton.customized","tau/ui/templates/board.plus/ui.template.boardplus.request.indicator"],function(e,o,t,s,u,n,a,r,i,l,p,d,b,x,c,m,f,q,v){return{create:function(e,o){var w={ViewType:e.ViewType||s,"queue.bus":!0,extensions:e.extensions.concat([e.controller||u,n,r,p,d,b,i,l,x,c,m,f,a,q,v])};o["queue.bus"]=!0;var h=t.create(w,o);return h}}});
define('tau/components/board.new.list/destroyable',["Underscore","tau/core/class"],function(e,s){return s.extend({_addChildDestroyable:function(e){this._childDestroyables||(this._childDestroyables=[]),this._childDestroyables.push(e)},destroy:function(){e.invoke(this._childDestroyables,"destroy"),this._childDestroyables=[]}})});
define('tau/core/controller.base',["Underscore","tau/components/board.new.list/destroyable"],function(e,n){return n.extend({})});
define('tau/components/board.new.list/controllers/controller.new.list.paging',["Underscore","tau/core/controller.base"],function(e,i){return i.extend({init:function(i,n){this._treeModel=n,this._treeModel.pagingUpdated.add(function(){i.update(n)}),this._treeModel.pagingLoadingStarted.add(function(){i.showProgress()}),this._pagingView=i;var t=function(i,t){taus.track({action:t+" page",cardTypes:e.map(n.hierarchyMetaInfo.cardTypes,function(e){return e.typeName}),pageSize:n.pagingModel.pageSize,pagingType:i,skip:n.pagingModel.getSkip(),cardCount:n.nodes.items.length,tags:["newlist"]})};this._pagingView.nextPageClicked.add(function(e){n.goToNextPage().then(function(){t(e.pagingType,e.direction)})}),this._pagingView.prevPageClicked.add(function(e){n.goToPreviousPage().then(function(){t(e.pagingType,e.direction)})}),this._pagingView.lastPageClicked&&this._pagingView.lastPageClicked.add(function(e){n.goToLastPage().then(function(){t(e.pagingType,e.direction)})}),this._pagingView.firstPageClicked&&this._pagingView.firstPageClicked.add(function(e){n.goToFirstPage().then(function(){t(e.pagingType,e.direction)})}),this._pagingView.pageSizeChanged.add(e.bind(this._pageSizeChangedHandler,this))},startLifeCycle:function(){this._pagingView.render(this._treeModel)},_pageSizeChangedHandler:function(e){this._treeModel.setPageSize(e),taus.track({action:"page size",pageSize:e,tags:["newlist"]})}})});
define('tau/components/board.new.list/controllers/controller.new.list.editor',["Underscore","jQuery","tau/core/controller.base"],function(i,t,n){var e=n.extend({init:function(i,t,n,e){this._view=i,this._treeNodeModel=t,this.configurator=e,this._editorComponentBuilder=n,this._initSubscriptions()},startLifeCycle:function(){this._view.startListen()},_initSubscriptions:function(){this._view.unitClicked.add(this._onUnitClicked.bind(this))},_onUnitClicked:function(t){var n=this.configurator.getUnitsRegistry().getUnitById(t.unitId),e=this._treeNodeModel.hierarchy.findChildByCardId(t.cardId).card,o=n&&e&&n.editorConfig;if(o){var d=null;d=i.delay(function(){this._view.toggleUnitBusyIndicator(t.$unit,!0)}.bind(this),200),this._createEditorComponent(e,n,t.$card,t.$unit).then(function(){clearTimeout(d),this._view.toggleUnitBusyIndicator(t.$unit,!1)}.bind(this)),taus.track({action:"open editor",unit:n.name,cardType:e.type,tags:["newlist"]})}},_createEditorComponent:function(i,t,n,e){return this._editorComponentBuilder.createEditorView(i,t,n,e).then(this._initEditorViewSubscriptions.bind(this,i,t))},_initEditorViewSubscriptions:function(i,t,n){n.toggleFocus(!0),n.unitEditorUpdating.add(function(){n.toggleBusyIndicator(!0)}),n.unitEditorUpdated.add(function(i){this._treeNodeModel.loadCard(i.cardId,i.cardType).always(function(){n.toggleBusyIndicator(!1)})}.bind(this)),n.unitEditFinished.add(function(){n.toggleFocus(!1)}.bind(this))}});return e});
define('tau/components/board.new.list/controllers/controller.new.list.tree.node.collection',["jQuery","Underscore","tau/core/controller.base","tau/components/board.new.list/controllers/controller.new.list.paging","tau/components/board.new.list/controllers/controller.new.list.editor"],function(e,t,i,d,n){var o=i.extend({init:function(e,t,i,d,n,o,a,s){this._model=e,this._treeModel=i,this._view=t,this._eventAggregator=d,this._editorComponentBuilder=n,this._quickAddComponentBuilder=o,this._configurator=a,this._modelSettings=s,this._initSubscriptions(this._model,this._view)},_initSubscriptions:function(e,i){e.applyAndObserve(function(e){e.nodeCollectionCreated.add(function(){this._addChildCollectionController(e)}.bind(this)),e.modelReset.add(function(){this._view.removeChildTreeNodeView(e.card.id),this._view.updateHeaderExpansionState()}.bind(this))}.bind(this)),e.duplicateNodesRemoved.add(function(e){this._view.removeCardsSilent(e)}.bind(this)),e.nodesAdded.add(function(e){i.appendNodes(e)}),e.cardUpdated.add(function(e){t.each(e.properties,function(t,d){i.updateCardUnit(e.card,d,t)}),i.updateCardFinalState(e.card.id,e.card.entity.isFinal)}),e.cardDeleted.add(function(e){i.removeCard(e.card),this._eventAggregator.cardRemoved.fire(e)}.bind(this)),e.cardMoved.add(function(e){i.moveCard(e.card,e.index)}),e.cardAdded.add(function(t){i.addCard(e,t.card,t.index)}),e.cardAdded.once(function(){i.calculateColumnWidths()}),i.expansionStateToggled.add(this._onExpansionStateToggled.bind(this)),i.collapseAllClicked.add(this._onCollapseAllClicked.bind(this)),i.openCardDetailsClicked.add(this._onOpenCardDetailsClicked.bind(this))},startLifeCycle:function(){return this._view.renderTree().then(this._onNodeExpanded.bind(this,{node:this._treeModel})).then(this._initChildControllers.bind(this)).then(function(){var e=new d(this._view.createPagingView(),this._treeModel,this._configurator);e.startLifeCycle();var t=new n(this._view.createEditorView(),this._treeModel,this._editorComponentBuilder,this._configurator);t.startLifeCycle(),this._view.createCountsView(this._treeModel.countsModel),this._view.createQuickAddView(this._treeModel.quickAddModel),this._view.quickAddView.showQuickAddClicked.add(this._onShowQuickAddClicked.bind(this))}.bind(this))},_initChildControllers:function(){var i=t.reduce(this._model.items,function(e,t){return t.getIsExpanded()&&e.push(this._addChildCollectionController(t)),e},[],this);return e.when.all(i)},_onOpenCardDetailsClicked:function(e){this._eventAggregator.entityDetailsViewRequested.fire(e)},_onShowQuickAddClicked:function(e){this._quickAddComponentBuilder.createQuickAddComponent(e.target,this._treeModel)},_onExpansionStateToggled:function(e){var t,i,d=this._treeModel.hierarchy.findChildByCardId(e);d.getIsExpanded()?(t=this._collapseNode,i="collapse"):(t=this._expandNode,i="expand"),t.call(this,d),taus.track({action:i,cardType:d.card.type,tags:["newlist"]})},_expandNode:function(e){var i=function(t){t.isLoading||e.loadingStatusChanged.remove(i),this._view.toggleNodeExpansionProgress(e.card.id,t.isLoading)}.bind(this);e.loadingStatusChanged.add(i);var d=t.uniqueId("statistics_newlist_expand");taus.start("statistics_newlist_expand",{},d),this._calculateColumnWidthsWhenNodeIsExpanded(e),e.expand().then(function(){taus.stop(d,{cardType:e.card.type,cardsCount:e.getCardsCount(),levelType:e.parent.hierarchyMetaInfo.levelType})}.bind(this))},_calculateColumnWidthsWhenNodeIsExpanded:function(e){e.nodeCollectionCreated.once(function(){var i=t.range(e.level+1,e.hierarchyMetaInfo.totalLevelCount);this._view.skeleton.calculateColumnWidthsForMultipleLevels(i,!0)},this)},_onCollapseAllClicked:function(){var e=t.filter(this._model.items,function(e){return e.getIsExpanded()});t.each(e,this._collapseNode,this),taus.track({action:"collapseAll",tags:["newlist"]})},_collapseNode:function(e){this.removeNode(e),this._modelSettings.listSettings.apiService.treeViewCollapse({$set:{path:e.hierarchy.getPath()}})},removeNode:function(e){e.collapse(),e.pagingModel.reset(),this._view.removeChildTreeNodeView(e.card.id),this._view.updateHeaderExpansionState()},_onNodeExpanded:function(e){e.node.card&&this._view.parentView.setExpandedStateForCardId(e.node.card.id),this._view.parentView&&this._view.parentView.updateHeaderExpansionState()},_addChildCollectionController:function(e){var t=new o(e.nodes,this._view.createTreeView(e.nodes),e,this._eventAggregator,this._editorComponentBuilder,this._quickAddComponentBuilder,this._configurator,this._modelSettings);return t.startLifeCycle()}});return o});
define('tau/components/board.new.list/controllers/controller.new.list.tree.root',["Underscore","tau/core/controller.base","./controller.new.list.tree.node.collection"],function(t,e,i){return e.extend({init:function(t,e,i,s,o,n,r){this._model=t,this._viewBuilder=e,this._eventAggregator=i,this._configurator=n,this._editorComponentBuilder=s,this._quickAddComponentBuilder=o,this._modelSettings=r,this._model.nodeCollectionCreated.add(this._whenLoaded.bind(this)),this._model.loadingStatusChanged.add(this._onLoadingStatusChanged.bind(this))},startLifeCycle:function(){this._model.loadTreeData().then(function(){taus.stop("statistics_newlist_cardLoad",{"@":"--save-statistics_newlist_cardLoad",cardsCount:this._model.getCardsCount()}),taus.track("statistics",{"@":["--restore-statistics_newlist_cardLoad","--cast-statistics_newlist_cardLoad-to-statistics","--exclude-board-context"]})}.bind(this))},_whenLoaded:function(){var t=taus.start("statistics_newlist_initialRender",{});this._destroyTreeView();var e=this._model.nodes;this._rootTreeView=this._viewBuilder.createTreeView(e);var s=new i(e,this._rootTreeView,this._model,this._eventAggregator,this._editorComponentBuilder,this._quickAddComponentBuilder,this._configurator,this._modelSettings);this._addChildDestroyable(s),s.startLifeCycle().then(this._whenInitialListIsRendered.bind(this)).then(t.stop.bind(t)),this._eventAggregator.cellModelLoaded.fire(e)},_whenInitialListIsRendered:function(){this._viewBuilder.appendRoot(),this._viewBuilder.updateEmptyListMessage();var e=this._rootTreeView.$treeContainer;t.defer(function(){this._eventAggregator.treeRendered.fire(e)}.bind(this))},_onLoadingStatusChanged:function(t){this._viewBuilder.toggleProgress(t.isLoading)},destroy:function(){this._destroyTreeView(),this._super()},_destroyTreeView:function(){this._rootTreeView&&(this._rootTreeView.destroy(),this._rootTreeView=null)}})});
define('tau/models/board.plus/augmenter/board.plus.augmenter',["Underscore","tau/core/class"],function(e,t){var a="id,name,entityType.name as type",s=[a,"tags,effort"].join(","),n="entityState.IsFinal as isFinalState",r="assignedUser.Select({id,firstName,lastName,email,avatarUri}) as assignedUsers",i="units",o="tasks.Count() as allTasks,tasks.Count(entityState.IsFinal != true) as openTasks",u="bugs.Count() as allBugs, bugs.Count(entityState.IsFinal != true) as openBugs",l="userStories.Count() as userStoriesCount, userStories.Count(entityState.IsFinal != true) as openUserStoriesCount",d="features.Count() as featuresCount, features.Count(entityState.IsFinal != true) as openFeaturesCount",y='firstName+ " " +LastName as name',m="login as login",p="role.Name as roleName",f="requesters.Count() as votes",c="TeamMembers.Count() as teamCount",C="comments.Count() as commentsCount",S="CurrentAllocation",b="Assignables.Count(entityState.IsFinal != true) as relatedEntitiesCount",T="lastCommentedUser",g="severity.name as severityName",v="{Project.id, Project.name, Project.abbreviation, Project.color} as Project",A="{Release.name} as release",U="{Team.id, Team.name, Team.icon, Team.abbreviation} as Team",P="CurrentStateResponsiblePersons as CurrentStateResponsiblePersons",D="{slaveRelations.ActiveSlaveRelationsCount() as activeSlaveCount, masterRelations.ActiveMasterRelationsCount() as activeMasterCount} as relations",R={user:{type:"user",data:["id",'"user" as type',"modifyDate","avatarUri",y,m,p,c,S,b]},userstory:{type:"userstory",data:[i,s,r,o,u,n,v,U,P],lazy:["id",D]},bug:{type:"bug",data:[i,s,r,g,n,v,U,P],lazy:["id",D]},feature:{type:"feature",data:[i,s,r,l,n,v,U,P],lazy:["id",D]},request:{type:"request",data:[i,s,r,f,"createDate",C,T,n,v,U,P],lazy:["id",D]},task:{type:"task",data:[i,s,r,n,v,U,P],lazy:["id",D]},impediment:{type:"impediment",data:[a,"{responsible.avatarUri as avatarURI,responsible.lastName,responsible.firstName,responsible.id} as responsible","createDate","priority.name as priorityName",n,v],lazy:["id",D]},testcase:{type:"testcase",data:[a,"tags","lastStatus","lastRunDate",v],lazy:["id",D]},testplan:{type:"testplan",data:[a,"tags","testCases.Count as testCaseCount","testPlanRuns.Count as testRunCount","LastCompletedTestPlanRun.Id as lastRunId","LastCompletedTestPlanRun.PassedCount as lastRunPassedCount","LastCompletedTestPlanRun.FailedCount as lastRunFailedCount","LastCompletedTestPlanRun.EndDate as lastRunEndDate",v],lazy:["id",D]},testplanrun:{type:"testplanrun",data:[a,"tags",v,U,r,n,P,"build","notRunCount","failedCount","passedCount"],lazy:["id",D]},project:{type:"project",data:["id","name","entityType.name AS type","color","tags","teamProjects.Count() AS teamProjectsCount","teamProjects.Select({Team.id, Team.name, Team.icon}) AS Teams"],lazy:["id",D,"{ userStories.Sparkline(16) AS userStories, bugs.Sparkline(16) AS bugs } as sparklines"]},release:{type:"release",data:[a,i,u,l,d,v,"startDate","endDate","isCurrent","EffortCompleted() as effortCompleted","EffortTotal() as effortTotal","units"],lazy:["id",D]},iteration:{type:"iteration",data:[a,"id","name",u,l,v,A,"startDate","endDate","isCurrent","canBeFinished","entityType.name AS type","EffortCompleted() as effortCompleted","EffortTotal() as effortTotal","units"]},teamiteration:{type:"teamiteration",data:[a,"id","name",u,l,U,"startDate","endDate","isCurrent","canBeFinished","entityType.name AS type","EffortCompleted() as effortCompleted","EffortTotal() as effortTotal","units"]},team:{type:"team",data:["id","name","entityType.name AS type","icon","tags","teamMembers.Count() AS teamMembersCount",'teamMembers.Select({User.id, User.firstName+ " " + User.lastName as name, User.avatarUri}) AS Members'],lazy:["id",D,'{ Assignables.Where(EntityType.name == "UserStory").Sparkline(16) AS userStories, Assignables.Where(EntityType.name == "Bug").Sparkline(16) AS bugs } as sparklines']},build:{type:"build",data:[a,"tags",v,"buildDate"],lazy:["id",D]},projectmember:{type:"projectmember",data:["id",'"projectmember" as type',v,"membershipStartDate as startDate","membershipEndDate as endDate","{User.fullName, User.avatarUri} as user","allocation"]}},h=["id","name","isCurrent","EffortCompleted() as effortCompleted","EffortTotal() as effortTotal","isNext","isPrevious","startDate","endDate","units","entityType.name AS type"],j=["id","name","isCurrent","canBeFinished","startDate","EffortSum() as effortSum","velocity","endDate","units","entityType.name AS type"],N=["id","firstName",'"user" as type',"lastName","email","avatarUri","isActive"],z=["id","name","entityType.name AS type"],E=e.without(j,"units"),F={team:{type:"team",data:["id","name","entityType.name AS type","icon"]},release:{type:"release",data:h},iteration:{type:"iteration",data:j},teamiteration:{type:"teamiteration",data:E},assigneduser:{type:"assigneduser",data:N},project:{type:"release",data:["id","name","entityType.name AS type","color"]},inboundrelations:{type:"inboundrelations",data:z},outboundrelations:{type:"outboundrelations",data:z}},k={team:{type:"team",data:["id","name","entityType.name AS type","icon","teamMembers.Select({User.id, User.firstName, User.lastName, User.email, User.avatarUri}) AS users"]},userstory:{type:"userstory",data:["id","name","entityType.name AS type","entityType","{entityState.name} as entityState","effort","units",r,v]},feature:{type:"feature",data:["id","name","entityType.name AS type","entityType","{entityState.name} as entityState","effort","units",r,v]},release:{type:"release",data:h},iteration:{type:"iteration",data:j},teamiteration:{type:"teamiteration",data:E},assigneduser:{type:"assignedUser",data:N},project:{type:"release",data:["id","name","entityType.name AS type","color"]},inboundrelations:{type:"inboundrelations",data:z},outboundrelations:{type:"outboundrelations",data:z}},I=function(t,a){var s=R[t],n=[];return e.each(a,function(t){var a=s[t]||[];n=e.union(n,a)}),{type:s.type,data:"{"+e.compact(n).join(",")+"}"}};return e.each(k,function(t,a){k[a].data="{"+e.compact(t.data).join(",")+"}"}),e.each(F,function(t,a){F[a].data="{"+e.compact(t.data).join(",")+"}"}),t.extend({augmentCells:function(t,a){a=a||["data","lazy"];var s=t.types;return e.each(s,function(e,t){e=e.toLowerCase(),R.hasOwnProperty(e)&&(s[t]=I(e,a))}),t},augmentAxisY:function(e){if(e.types&&e.types.length){var t=e.types[0].toLowerCase();k.hasOwnProperty(t)&&(e.data=k[t].data)}return e},augmentAxisX:function(e){if(e.types&&e.types.length){var t=e.types[0].toLowerCase();F.hasOwnProperty(t)&&(e.data=F[t].data)}return e},augmentCellsLazyInfo:function(t){var a=e.deepClone(t),s=a.cells.types;return e.each(s,function(e,t){var a=e.type.toLowerCase();R.hasOwnProperty(a)&&(s[t]=I(a,["lazy"]))}),a}})});
define('tau/models/board.customize.units/board.customize.cards.builderSelector.lazyAware',["Underscore","tau/models/board.customize.units/board.customize.cards.builderSelector"],function(e,t){return t.extend({createItemData:function(e,t){if(this.suit(t.unit)){var i=t.unit.getModelByTypeAndSize(e);return t.unit.id+":{"+i+"}"}},suit:function(){throw new Error("Method suit() should be overridden")}})});
define('tau/models/board.customize.units/board.customize.cards.builderSelector.base',["Underscore","tau/models/board.customize.units/board.customize.cards.builderSelector.lazyAware"],function(e,r){return r.extend({suit:function(e){return e.lazy!==!0}})});
define('tau/models/board.customize.units/board.customize.cards.builderSelector.lazy',["Underscore","tau/models/board.customize.units/board.customize.cards.builderSelector.lazyAware"],function(e,r){return r.extend({suit:function(e){return e.lazy===!0}})});
define('tau/models/board.plus/model.board.slice.extender',["Underscore","jQuery","tau/core/class","tau/models/board.customize.units/const.card.sizes","tau/models/board.customize.units/board.customize.units.settings.default","tau/models/board.plus/augmenter/board.plus.augmenter","tau/models/board.customize.units/board.customize.cards.builderSelector","tau/models/board.customize.units/board.customize.cards.builderSelector.base","tau/models/board.customize.units/board.customize.cards.builderSelector.lazy"],function(e,t,s,a,i,n,u,y,l){return s.extend({extend:function(s,a){var i=s.slice.config.definition,n=i.cells,u=n.types;return e.isArray(n)&&(u=n),t.when(a.getCardLayoutsByTypesAndSize(u),a.getCardLayoutsByTypesAndSize(i.x?i.x.types:[]),a.getCardLayoutsByTypesAndSize(i.y?i.y.types:[])).then(this._createTypes.bind(this)).then(this._extendSliceDataUsingTypes.bind(this,s))},_createTypes:function(e,t,s){return{cellTypes:this._createTypesFromLayouts(e),xTypes:this._createTypesFromLayouts(t),yTypes:this._createTypesFromLayouts(s)}},_createTypesFromLayouts:function(t){var s={fullTypes:new u,baseTypes:new y,lazyTypes:new l};return e.reduce(t,function(t,a,i){return e.each(t,function(e,t){e.push({type:i,data:s[t].build(i,a)})}),t},{fullTypes:[],baseTypes:[],lazyTypes:[]})},_augmentAxisData:function(e){return e.data?e.data.substr(0,e.data.length-1)+","+e.data+" as cardData}":e.data},_augment:function(e,t){e.x&&(e.x=t.augmentAxisX(e.x),e.x.data=this._augmentAxisData(e.x)),e.y&&(e.y=t.augmentAxisY(e.y),e.y.data=this._augmentAxisData(e.y))},_extendSliceDataUsingTypes:function(e,t){var s=e.slice,a=e.slice.clone(),i=e.slice.clone(),u=s.config.definition,y=a.config.definition,l=i.config.definition;if(u.cells.types=t.cellTypes.fullTypes,y.cells.types=t.cellTypes.baseTypes,l.cells.types=t.cellTypes.lazyTypes,"newlist"===e.slice.config.definition.viewMode)u.x&&t.xTypes.fullTypes.length&&(u.x.data=t.xTypes.fullTypes[0].data),u.y&&t.yTypes.fullTypes.length&&(u.y.data=t.yTypes.fullTypes[0].data);else{var o=new n;this._augment(u,o),this._augment(y,o)}return e.slice=s,e.full=s,e.base=a,e.lazy=i,e}})});
define('tau/components/board.new.list/models/card',["Underscore","tau/core/class"],function(t,e){return e.extend({init:function(e){t.each(e,function(t,e){this[e]=t},this),this.entity=t.extend(e.data.cardData||{},{entityType:{name:e.type}})},getCardProperties:function(){return t.chain(t.keys(this)).filter(function(e){return!t.isObject(this[e])},this).map(function(t){return{key:t,propertyName:t,getValue:function(e){return e[t]},setValue:function(e,n){e[t]=n}}},this).union(t.map(this.data,function(t,e){return{key:"data__"+e,propertyName:e,getValue:function(t){return t.data[e]},setValue:function(t,n){t.data[e]=n}}},this)).value()},getDiff:function(e){var n=this,a=e.getCardProperties();return t.chain(this.getCardProperties()).map(function(i){var r=t.find(a,function(t){return i.key==t.key});if(!r)return null;var u=t.isEqual(r.getValue(e),i.getValue(n));return u?null:r}).compact().value()},getId:function(){return this.data.cardData.id},getEncodedId:function(){return this.id},getEntityType:function(){return this.data.cardData.type},isNoValueCard:function(){return!!this.data.empty}})});
define('tau/components/board.new.list/models/model.new.list.node.collection',["Underscore","tau/core/class","./card"],function(e,i,t){return i.extend({hierarchy:null,pagingModel:null,init:function(i,t,r,n,a,d,s){this.items=i||[],this.cardId=t,this.level=r,this.hierarchyMetaInfo=n||{},this.hierarchy=a,this.isPrioritizable=this.hierarchyMetaInfo.isPrioritizable,this.ordering=this._getDefaultOrdering(),this.pagingModel=d,this.createChildNode=s,this._itemSubscriptions=[],this.nodesAdded=e.Callbacks(),this.duplicateNodesRemoved=e.Callbacks(),this.cardDeleted=e.Callbacks(),this.cardAdded=e.Callbacks(),this.cardUpdated=e.Callbacks(),this.cardMoved=e.Callbacks(),this._initSubscriptions()},_initSubscriptions:function(){var i=function(i){e.each(this._itemSubscriptions,function(e){e(i)})}.bind(this);this.nodesAdded.add(function(t){e.each(t,i)}),this.cardAdded.add(function(e){i(e.nodeModel)})},createCard:function(e){return new t(e)},applyAndObserve:function(i){e.each(this.items,function(e){i(e)}),this._itemSubscriptions.push(i)},getLevelKey:function(){var e=this.hierarchyMetaInfo.parentEntityType;return e?this.level+"_"+e.toLowerCase():this.level.toString()},getCardTypes:function(){return this.hierarchyMetaInfo.cardTypes||[]},isEmpty:function(){return 0===this.items.length||1===this.items.length&&this.items[0].hasNoValueCard()},isCellLevel:function(){return"cells"===this.hierarchyMetaInfo.levelType},isInnerCollectionsLevel:function(){return"innerCollections"===this.hierarchyMetaInfo.levelType},canExpandCard:function(i){var t=this.hierarchyMetaInfo.levelType;if("x"==t||"y"==t)return this.hierarchyMetaInfo.hasNextLevel();if(i){var r=this.hierarchyMetaInfo.findCardTypeByValueType(i);return r&&r.canExpand}return e.any(this.hierarchyMetaInfo.cardTypes,function(e){return e.canExpand})},removeDuplicatesWith:function(i){var t=e.filter(this.items,function(e){return this._findCardIndex(i,e.card.id)>=0},this);return this.items=e.without(this.items,t),this.duplicateNodesRemoved.fire(t),t},addNewItems:function(i){this.items=e.union(this.items,i),this.nodesAdded.fire(i)},removeNodeItemByCard:function(e){var i=this.findCardIndex(e);return i>=0?this.items.splice(i,1)[0]:null},findCardIndex:function(e){return this._findCardIndex(this.items,e.id)},_findCardIndex:function(i,t){return e.findIndex(i,function(e){return e.card.id===t})},sortCards:function(){if("Rank"==this.ordering.name){var e="Asc"==this.ordering.direction?-1:1;this.items.sort(function(i,t){return e*(i.card.orderingValue-t.card.orderingValue)})}},deleteCard:function(e){var i=this._tryRemoveCard(e);i&&this.cardDeleted.fire({card:e})},updateCardWith:function(i,t,r){var n=r&&i.orderingValue!==t.orderingValue,a=e.object(e.map(t.getDiff(i),function(e){var r=e.getValue(i);return e.setValue(t,r),[e.propertyName,r]},this));t.entity.isFinal=i.entity.isFinal,this.cardUpdated.fire({card:t,properties:a}),n&&(this.sortCards(),this.cardMoved.fire({card:t,index:this.findCardIndex(t)}))},removeCardFromView:function(e){var i=this._tryRemoveCard(e);i&&this.cardMoved.fire({card:e,index:null})},_tryRemoveCard:function(e){return null!==this.removeNodeItemByCard(e)},setCustomOrdering:function(e){this.ordering=e||this._getDefaultOrdering()},_getDefaultOrdering:function(){return e.defaults(this.hierarchyMetaInfo.ordering||{},{name:"",direction:""})}})});
define('tau/components/board.new.list/models/hierarchy.structure',["Underscore","tau/core/class"],function(n,e){return e.extend({init:function(n){this._node=n},getExpandedModelsAtLevel:function(e){if(0===e)return[this._node];var t=n.filter(this._node.nodes.items,function(n){return n.nodes});return n.flatMap(t,function(n){return n.hierarchy.getExpandedModelsAtLevel(e-1)})},accept:function(e){e.visit(this._node),this._node.nodes&&n.each(this._node.nodes.items,function(n){n.hierarchy.accept(e)})},getAllNodesAtLevel:function(e){if(0===e)return[this._node];var t=this._node.nodes.items;return n.flatMap(t,function(n){return n.hierarchy.getAllNodesAtLevel(e-1)})},findNodeByPath:function(n){return this._findNodeByPathInternal(this._node,n,function(n,e){return n.hierarchy.findChildByCardId(e)})},findRawNodeByPath:function(e,t){return this._findNodeByPathInternal(e,t,function(e,t){return n.find(e.nodes.items,function(n){return n.dataItem.id==t})})},_findNodeByPathInternal:function(e,t,r){if(!t.length)return e;var d=r(e,t[0]);return d?this._findNodeByPathInternal(d,n.rest(t),r):null},findChildByCardId:function(e){return this._node.nodes?n.find(this._node.nodes.items,this._getCardIdComparison(e)):null},findAllDescendantNodesByCardIdAndType:function(e,t){var r=this._getCardIdComparison(e),d=function(e,i){return i.nodes?(t=t.toLowerCase(),n.each(i.nodes.items,function(n){r(n)&&n.getCardType().toLowerCase()===t&&e.push(n),d(e,n)}),e):e};return d([],this._node)},getPath:function(){for(var n=[],e=this._node;e&&e.card;)n.unshift(e.card.id.toString()),e=e.parent;return n},_getCardIdComparison:function(e){if(n.isString(e)&&0===e.indexOf("b64_"))return function(n){return n.card&&n.card.getEncodedId()===e};var t=parseFloat(e);return n.isNaN(t)?function(n){return n.card&&n.card.getId()===e}:function(n){return n.card&&n.card.getId()===t}}})});
define('tau/components/board.new.list/models/hierarchy.meta',["Underscore","tau/core/class","tau/utils/utils.debug"],function(e,t,r){return t.extend({init:function(t){this._globalMeta=t,r.assertWarn(e.isArray(t),"Global meta should be an array"),e.each(t,this._extendMetaForLevel.bind(this))},getMetaForLevelAndType:function(t,n){var a=this._globalMeta[t];return a?a.groups?(r.assertError(e.isString(n),"Parent entity type should be specified for entities at inner levels"),a.groups[n.toLowerCase()]):a:null},getMetaForCells:function(){var t=e.find(this._globalMeta,function(e){return"cells"==e.levelType});return t?(r.assertError(e.isUndefined(t.groups),"Cell level meta should not contain entity groups"),t):null},_extendMetaForLevel:function(t,r,n){var a={levelType:t.levelType,totalLevelCount:n.length,findCardTypeByValueType:function(t){return t=t.toLowerCase(),e.find(this.cardTypes,function(e){return e.valueType.toLowerCase()===t})},hasNextLevel:function(){var e=n[r+1];return e&&("cells"!==e.levelType||e.cardTypes.length>0)}};t.groups?t.groups=this._createExtendedLevelMetaGroups(t.groups,a):e.defaults(t,a)},_createExtendedLevelMetaGroups:function(t,r){return e.reduce(t,function(t,n,a){var l=a.toLowerCase();return t[l]=e.defaults(n,r,{parentEntityType:l}),t},{})},_getCardTypesForLevel:function(t){return t.groups?e.flatMap(t.groups,function(e){return e.cardTypes}):t.cardTypes}})});
define('tau/components/board.new.list/models/model.new.list.tree.data',["jQuery","Underscore","tau/core/class"],function(t,a,e){return e.extend({init:function(t,e){this.treeModel=t,this.slice=e,this.data=null,this.dataLoaded=a.Callbacks()},loadData:function(){if(this._isSupported()){var t=this._getParamsForLoadData();return this._loadData(t).done(this._handleDataResponse.bind(this))}},_loadData:function(){},_getParamsForLoadData:function(){return{$set:{path:this.treeModel.hierarchy.getPath(),expansionState:this.getExpansionStateForLoadData()}}},getExpansionStateForLoadData:function(){},_handleDataResponse:function(t){this._bindData(t.data)},_bindData:function(t){t.dataItem.dataItem.data&&(this.data=t.dataItem.dataItem.data),this.dataLoaded.fire(),a.each(t.nodes.items,function(t){var a=this.treeModel.hierarchy.findChildByCardId(t.dataItem.nodeId);this._getDataModelFromNodeModel(a)&&this._getDataModelFromNodeModel(a)._bindData(t)},this)},_bindSparseData:function(t){t.dataItem.dataItem&&(this.data=t.dataItem.dataItem.data,this.dataLoaded.fire()),a.each(t.nodes.items,function(t){var a=this.treeModel.hierarchy.findChildByCardId(t.dataItem.nodeId);a&&this._getDataModelFromNodeModel(a)&&this._getDataModelFromNodeModel(a)._bindSparseData(t)},this)},setSparseData:function(t){this._bindSparseData(t)},collapse:function(){this.data=null},_getDataModelFromNodeModel:function(){},_isSupported:function(){return!this.treeModel.nodes.isInnerCollectionsLevel()}})});
define('tau/components/board.new.list/models/model.new.list.tree.quickAdd',["jQuery","Underscore","tau/components/board.new.list/models/model.new.list.tree.data"],function(e,t,n){return n.extend({_loadData:function(e){return this.slice.treeViewPossibleActions(e)},getExpansionStateForLoadData:function(){return this.treeModel.getExpansionState()},_getDataModelFromNodeModel:function(e){return e.quickAddModel}})});
define('tau/components/board.new.list/models/model.new.list.tree.counts',["jQuery","Underscore","tau/components/board.new.list/models/model.new.list.tree.data"],function(t,e,a){return a.extend({init:function(t,e){this._super(t,e),this.data=this._getInitialDataValue(),this.treeModel.nodeCollectionCreated.add(this._onNodeCollectionCreated.bind(this))},_getInitialDataValue:function(){return{types:[]}},_onNodeCollectionCreated:function(t){var e=t.nodes;e.cardAdded.add(function(t){this._onCardAdded(t.card)},this),e.cardDeleted.add(function(t){this._onCardDeleted(t.card)},this)},_loadData:function(t){return this.slice.treeViewCounts(t)},getExpansionStateForLoadData:function(){return this.treeModel.getNodesPaths()},_bindData:function(t){this._resetCounts(),t.dataItem.dataItem.data&&e.each(t.dataItem.dataItem.data.types,function(t){var e=this._getTypeCount(t.type);e&&(e.count=t.count)},this),this.dataLoaded.fire(),e.each(t.nodes.items,function(t){var e=this.treeModel.hierarchy.findChildByCardId(t.dataItem.nodeId);e&&this._getDataModelFromNodeModel(e)&&this._getDataModelFromNodeModel(e)._bindData(t)},this)},_initializeCountsIfRequired:function(){this.data.types.length||(this.data.types=e.map(this.treeModel.hierarchyMetaInfo.cardTypes,function(t){return{type:t.valueType,typeName:t.typeName,count:0}}))},_resetCounts:function(){this.data=this._getInitialDataValue(),this._initializeCountsIfRequired()},_onCardAdded:function(t){this.increaseCount(t.type)},increaseCount:function(t){this._initializeCountsIfRequired();var e=this._getTypeCount(t);e&&(e.count+=1),this.dataLoaded.fire()},_onCardDeleted:function(t){var e=this._getTypeCount(t.type);e&&(e.count-=1),this.dataLoaded.fire()},_getTypeCount:function(t){return e.find(this.data.types,function(e){return e.type.toLowerCase()===t.toLowerCase()})},getAllCount:function(){var t=0;return e.each(this.data.types,function(e){t+=e.count}),t},getPagesCount:function(){return Math.ceil(this.getAllCount()/this.treeModel.pagingModel.getTake())},_getDataModelFromNodeModel:function(t){return t.countsModel},collapse:function(){this.data=this._getInitialDataValue()}})});
define('tau/components/board.new.list/models/model.new.list.tree.base',["jQuery","Underscore","tau/core/class","./card","./model.new.list.node.collection","./hierarchy.structure","./hierarchy.meta","./node.modification.strategies","./model.new.list.tree.quickAdd","./model.new.list.tree.counts"],function(t,e,i,a,n,s,d,r,o,h){return i.extend({init:function(t,i,a,n,d){this._modelSettings=t,this._listSettings=t.listSettings,this._apiService=this._listSettings.apiService,this.card=i||null,this.nodes=a||null,this.level=e.isNumber(n)?n:-1,this.parent=d,this.nodeCollectionCreated=e.Callbacks(),this.loadingStatusChanged=e.Callbacks(),this.hierarchy=new s(this),this.pagingModel=this._createPaging(),this.pagingUpdated=e.Callbacks(),this.pagingLoadingStarted=e.Callbacks(),this.quickAddModel=new o(this,this._apiService),this.countsModel=new h(this,this._apiService),this.modelReset=e.Callbacks()},hasNoValueCard:function(){return this.card.isNoValueCard()},resetModel:function(){},updateChildrenNodes:function(t,e){this.resetModel(),this._handleTreeResponse(t,e),this.pagingModel.reset(),this._updatePagingState()},getIsExpanded:function(){return!!this.nodes},_executeTreeDataWorkflow:function(e){return this.loadingStatusChanged.fire({isLoading:!0}),t.when(e.call(this,this._apiService)).then(function(t){var e=this.card?this.card.type:void 0;return this._handleTreeResponse(t.data.nodes,t.data.meta,e)}.bind(this),this._handleFailedTreeResponse.bind(this)).always(function(){this.loadingStatusChanged.fire({isLoading:!1}),this._updatePagingState()}.bind(this)).fail(function(t){if(t)throw t}).done(this.countsModel.loadData.bind(this.countsModel)).done(this.quickAddModel.loadData.bind(this.quickAddModel))},_handleTreeResponse:function(e,i,a){try{var n=new d(i);this._populateTreeNodeWith(e,n,this.level,!0,a)}catch(s){return t.Deferred().reject(s)}},_populateTreeNodeWith:function(t,e,i,a,n){this.hierarchyMetaInfo=e.getMetaForLevelAndType(i+1,n),this.nodes=this._createNodeCollectionModel(t,e,i,a,n),this.pagingModel.updateWithResponseData(t),this.nodes&&(this.nodes.cardAdded.add(this._updatePagingState,this),this.nodes.cardMoved.add(this._updatePagingState,this),this.nodes.cardDeleted.add(this._updatePagingState,this),this.nodeCollectionCreated.fire({nodes:this.nodes}))},_createNodeCollectionModel:function(t,i,s,d,r){var o=this,h=o.card;if(t.items.length||d){var l=o._getNodeConstructor(),c=e.map(t.items,function(t){var e=new l(o._modelSettings,new a(t.dataItem),null,s+1,o);return e._populateTreeNodeWith(t.nodes,i,s+1,!1,t.dataItem.type),e},this),u=h?h.id:null;return new n(c,u,s+1,i.getMetaForLevelAndType(s+1,r),o.hierarchy,o.pagingModel,function(t){return new l(o._modelSettings,new a(t),null,o.level+1,o)}.bind(this))}return null},_handleFailedTreeResponse:function(){},_updatePagingState:function(){var t=this.nodes||{items:[]};this.pagingModel.isEnabled=!!t.items.length,this.pagingModel.actualPageSize=t.items.length,this.pagingUpdated.fire()},getRoot:function(){return this.parent?this.parent.getRoot():this},getExpansionState:function(){return this._getNodesPaths(this.nodes.items,!0)},getNodesPaths:function(){return this._getNodesPaths(this.nodes.items)},_getNodesPaths:function(t,i){var a=[];return e.each(t,function(t){t.nodes&&t.nodes.items.length>0?(a.push(t.hierarchy.getPath()),a=a.concat(this._getNodesPaths(t.nodes.items,i))):i||a.push(t.hierarchy.getPath())},this),a},getCardsCount:function(){var t={count:0,visit:function(t){t.nodes&&(this.count+=t.nodes.items.length)}};return this.hierarchy.accept(t),t.count},loadCard:function(t,i){var a=this.getRoot().hierarchy.findAllDescendantNodesByCardIdAndType(t,i),n=e.map(a,function(e){return{cardId:t,pathToParent:e.parent?e.parent.hierarchy.getPath():[]}});return this._apiService.treeViewCards({$set:{cards:n}}).then(this.applyCardsChanges.bind(this,r.regular,a))},applyCardsChanges:function(t,i,a){var n=e.compact(e.map(a.data,function(t){return t.dataItem&&t.dataItem.data&&!t.dataItem.data.empty?{card:t.dataItem,path:t.path,fullPath:t.path.join(",")+","+t.dataItem.id}:void 0}));this.getRoot().addOrUpdateCards(n,t);var s=e.map(i,function(t){var e=t.parent?t.parent.hierarchy.getPath():[];return{card:t.card,path:e,fullPath:e.join(",")+","+t.card.id}}),d=e.filter(s,function(t){return!e.some(n,function(e){return e.fullPath===t.fullPath})});this.getRoot().deleteCards(d)}})});
define('tau/components/board.new.list/models/showMorePaging',["tau/core/class"],function(e){return e.extend({_currentPage:0,pageSize:25,hasPrev:!1,hasNext:!1,nextOrderingValue:null,prevOrderingValue:null,updateWithResponseData:function(e){this.hasNext=e.hasNextPage,this.nextOrderingValue=e.nextOrderingValue},getSkip:function(){return 0},getTake:function(){return(this._currentPage+1)*this.pageSize},goToNextPage:function(){this._currentPage+=1},reset:function(){this._currentPage=0}})});
define('tau/components/board.new.list/models/model.new.list.tree.node',["Underscore","jQuery","tau/core/class","tau/ui/extensions/board.plus/ui.board.plus.utils","./model.new.list.tree.base","./hierarchy.meta","./card","./showMorePaging"],function(e,t,i,n,s,a,r,o){var d=s.extend({_createPaging:function(){return new o},_getNodeConstructor:function(){return d},resetModel:function(){this.collapse(),this.pagingModel.reset(),this.modelReset.fire()},expand:function(){var e=this._createTreeViewRequestArguments(0);return this._executeTreeDataWorkflow(function(t){return t.treeViewExpand(e)})},collapse:function(){this.nodes=null},goToNextPage:function(){if(!this.pagingModel.hasNext)return t.Deferred().resolve();this.pagingLoadingStarted.fire();var i=this.nodes.items.length<this.pagingModel.getTake()?this.nodes.items.length:this.pagingModel.getTake();return this._apiService.treeView(this._createTreeViewRequestArguments(i)).done(e.bind(function(e){var t=this.card?this.card.type:void 0,i=this._createNodeCollectionModel(e.data.nodes,new a(e.data.meta),this.level,!1,t),n=i&&i.items&&i.items.length;if(n){var s=i.items;this.nodes.removeDuplicatesWith(s),this.nodes.addNewItems(s)}this.pagingModel.updateWithResponseData(e.data.nodes),this.pagingModel.goToNextPage(),this.pagingUpdated.fire()},this)).done(this.countsModel.loadData.bind(this.countsModel)).fail(this._handleFailedTreeResponse.bind(this))},getCardId:function(){return this.card?this.card.getId():null},getCardType:function(){return this.card?this.card.getEntityType():null},_createTreeViewRequestArguments:function(e){var t=this.hierarchy.getPath();return{$skip:e,$take:this.pagingModel.getTake(),$set:{path:t}}}});return d});
define('tau/components/board.new.list/models/paging',["tau/core/class"],function(e){return e.extend({_currentPage:0,isEnabled:!1,pageSize:50,actualPageSize:0,hasPrev:!1,hasNext:!1,availablePageSizes:[20,50,100],nextOrderingValue:null,prevOrderingValue:null,totalCount:null,setCurrentPage:function(e){this._currentPage=e,this.hasPrev=this._currentPage>0},updateWithResponseData:function(e){this.hasNext=e.hasNextPage,this.nextOrderingValue=e.nextOrderingValue,this.prevOrderingValue=e.prevOrderingValue},getCurrentPage:function(){return this._currentPage},goToPreviousPage:function(){this.setCurrentPage(this._currentPage-1)},goToNextPage:function(){this.setCurrentPage(this._currentPage+1)},getSkip:function(){return this._currentPage*this.pageSize},getTake:function(){return this.pageSize},getFrom:function(){return this.getSkip()+1},getTo:function(){return this.getSkip()+this.actualPageSize},reset:function(){this.setCurrentPage(0)}})});
define('tau/components/board.new.list/models/hierarchy.innerLevels',["jQuery","Underscore","tau/models/board.customize.units/board.customize.cards.builderSelector","tau/models/board.customize.units/const.card.sizes"],function(e,n,t,r){return{getInnerTypes:function(e){return e.innerLevels?n.flatMap(e.innerLevels.items,function(e){return n.flatMap(e.items,function(e){return n.map(e.items,function(e){return e.id})})}):[]},createInnerLevelsDefinition:function(t,r){var i=t.getMetaForCells()||{},u=n.chain(i.cardTypes).map(function(e){return e.canExpand?this._getCardDataForInnerTypes(e.innerTypes,r).then(function(n){return{parentEntityType:e.valueType,items:n}}):null},this).compact().value();return e.when.all(u).then(function(e){return{items:[{items:e}]}})},_getCardDataForInnerTypes:function(i,u){if(!i||!i.length)return e.Deferred().resolve();i=n.map(i,function(e){return e.toLowerCase()});var a=new t;return u.getCardLayoutsByTypesAndSize(i,r.LIST).then(function(e){return n.map(e,function(e,n){return{id:n,data:a.build(n,e)}})})}}});
define('tau/components/board.new.list/models/model.new.list.tree.root',["jQuery","Underscore","./model.new.list.tree.base","./model.new.list.tree.node","./paging","./hierarchy.meta","./hierarchy.innerLevels","tau/services/customize/service.customize.card.layout.factory.newlist"],function(e,t,n,i,a,r,d,o){return n.extend({init:function(e,t,n,i,a){this._super(e,t,n,i,a),this.countsModel.dataLoaded.add(function(){this.pagingModel.totalCount=this.countsModel.getAllCount(),this.pagingUpdated.fire()},this)},_createPaging:function(){var e=new a,t=this._modelSettings.paging;return e.pageSize=t?t.onPage:50,e},_getNodeConstructor:function(){return i},loadTreeData:function(){return this._loadTreeDataInternal(this.pagingModel.getSkip(),this.pagingModel.getTake()).then(function(){var t=new o(this._listSettings.serviceContainer,this._listSettings.boardSettingsService);return e.when(d.createInnerLevelsDefinition(this._globalMeta,t)).then(this._apiService.setInnerLevelsDefinition.bind(this._apiService))}.bind(this)).then(this._updatePagingState.bind(this))},_loadTreeDataInternal:function(e,t){var n={$skip:e,$take:t};return this._executeTreeDataWorkflow(function(e){return e.treeView(n)})},_handleTreeResponse:function(e,t){return this._globalMeta=new r(t),this._super(e,t)},goToPage:function(e){var t=e*this.pagingModel.getTake();return this._loadTreeDataInternal(t,this.pagingModel.getTake()).done(function(){this.pagingModel.setCurrentPage(e),this._updatePagingState()}.bind(this))},goToNextPage:function(){return this.pagingModel.hasNext?this.goToPage(this.pagingModel.getCurrentPage()+1):e.Deferred().resolve()},goToPreviousPage:function(){return this.pagingModel.hasPrev?this.goToPage(this.pagingModel.getCurrentPage()-1):e.Deferred().resolve()},goToLastPage:function(){return this.goToPage(this.countsModel.getPagesCount()-1)},goToFirstPage:function(){return this.goToPage(0)},setPageSize:function(e){this._modelSettings.listSettings.boardSettingsService.set({set:{cellPaging:{onPage:e}},callback:function(){var t=e;this._loadTreeDataInternal(0,t).done(function(){this.pagingModel.pageSize=t,this.pagingModel.setCurrentPage(0),this._updatePagingState()}.bind(this))}.bind(this)})},addOrUpdateCards:function(e,n){t.each(e,function(e){var t=e.card,i=this.hierarchy.findNodeByPath(e.path);if(i&&i.nodes){var a=i.hierarchy.findChildByCardId(t.id);a?n.updateCard(i.nodes,a,t):n.addCard(i,t)}},this)},deleteCards:function(e){t.each(e,function(e){var t=e.card,n=this.hierarchy.findNodeByPath(e.path);if(n&&n.nodes){var i=n.hierarchy.findChildByCardId(t.id);i&&n.nodes.deleteCard(t)}},this)},deleteDescendantsByCardIdAndType:function(e,n){var i=this.hierarchy.findAllDescendantNodesByCardIdAndType(e,n);t.each(i,function(e){e.parent.nodes.deleteCard(e.card)})},refreshDescendantsByCardIdAndType:function(e,n){var i=this.hierarchy.findAllDescendantNodesByCardIdAndType(e,n);t.each(i,this._refreshNode,this)},_refreshNode:function(e){var n=t.object(t.map(e.card.getCardProperties(),function(t){return[t.propertyName,t.getValue(e.card)]}));e.parent.nodes.cardUpdated.fire({card:e.card,properties:n})}})});
define('tau/components/board.new.list/views/view.new.list.tree.dragndrop',["Underscore","jQuery","tau/core/class","tau/ui/extensions/board.plus/ui.board.plus.dom.utils"],function(t,i,e,s){return e.extend({PRIORITIZATION_OPTIONS:{enabled:{prioritizationPossible:!0,content:"Prioritization on",isMovedWithPrioritization:function(){return!0}},disabled:{prioritizationPossible:!1,content:"Prioritization off",isMovedWithPrioritization:function(){return!1}},shift:{prioritizationPossible:!0,content:'Hold <span class="shiftButton"></span> to prioritize',isMovedWithPrioritization:function(t){return t.shiftKey}}},options:{},init:function(t,i){this.$treeContainer=t.$treeContainer,this.treeModel=t.treeModel,this.dndOptions=i.dndOptions,this.applyDndMove=i.applyDndMove.bind(i),this.containment=i.skeletonView.$el.find(".tau-board-list-view__inner"),this.level=this.treeModel.level,this.isDataPrioritizable()&&this._makeSortable()},_makeSortable:function(){var t=this.isDndPossible(),i=this.treeModel.level;this.$scrollParent=this.$treeContainer.scrollParent(),this.$treeContainer.toggleClass("tau-sortable",t).sortable({disabled:!t,items:"> .i-role-card:not(.tau-axis-card-no-value), > .tau-list-level",handle:".tau-drag-handler-enabled.tau-drag-handler-level-"+i,axis:"y",opacity:.8,containment:this.containment,scrollSensitivity:33,placeholder:this._createPlaceholder(),helper:this._createHelper.bind(this),create:function(){var t=this._getSortableInstance();this._fixWidgetIntersectionLogic(t),this._fixWidgetScrollLogic(t),this._fixWidgetContainmentLogic(t)}.bind(this),start:function(t,i){var e=i.item;e.hasClass("tau-list-entity-open")&&this._refreshPositions(),e.data("list-startCoordinates",this._getCoordinates(e))}.bind(this),stop:function(t,i){this.$treeContainer.find(".tau-list-sortable-placeholder-fixed").remove(),this._moveCardWithSubTree(i.item)}.bind(this)})},_getSortableInstance:function(){return this.$treeContainer.data("ui-sortable")},_getPrioritizationOptions:function(){return this.PRIORITIZATION_OPTIONS[this.dndOptions.prioritization]},_createPlaceholderElement:function(i){var e=this._getPrioritizationOptions().content,s=t.compact(["i-role-card","tau-list-entity",i]);return'<div class="'+s.join(" ")+'"><div class="tau-list-line"><div class="tau-elems-table tau-sortable__placeholder-inner">'+e+"</div></div></div>"},_createPlaceholder:function(){return{element:function(t){return t.before(this._createPlaceholderElement("tau-list-sortable-placeholder-fixed")),this._createPlaceholderElement("tau-list-sortable-placeholder-float")}.bind(this),update:function(){this._restoreScrollPosition(),this._refreshPositions()}.bind(this)}},_createHelper:function(t,i){this._saveScrollPosition();var e=i.next(".tau-list-level");return e.length?(e.slideUp(this._refreshPositions.bind(this)),i.data("list-subtree",e)):i.data("list-subtree",null),i},isDataPrioritizable:function(){return this.treeModel.hierarchyMetaInfo.isPrioritizable},isDndPossible:function(){return this.isDataPrioritizable()&&this._getPrioritizationOptions().prioritizationPossible},isMovedWithPrioritization:function(){return this._getPrioritizationOptions().isMovedWithPrioritization(this.dndOptions)},_refreshPositions:function(){this.$treeContainer.sortable("refreshPositions")},_saveScrollPosition:function(){this.scrollTop=this.$scrollParent[0].scrollTop},_restoreScrollPosition:function(){this.$scrollParent[0].scrollTop=this.scrollTop},_fixWidgetIntersectionLogic:function(i){i._intersectsWithPointer=t.wrap(i._intersectsWithPointer.bind(i),function(t,i){var e=t(i);return e&&(i.item.hasClass("tau-list-entity-open")?e=1:i.item.hasClass("tau-list-level")&&(e=2)),e})},_fixWidgetContainmentLogic:function(i){i._generatePosition=t.wrap(i._generatePosition.bind(i),function(t,i){if(this.containment){var e=this.containment[3]+this.offset.click.top-11;i.pageY>e&&(i.pageY=e)}return t(i)})},_fixWidgetScrollLogic:function(t){t._mouseDrag=function(t){var e,s,o,r,n=this.options,l=!1;if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var a=this.scrollParent[0];if(a!==document&&"HTML"!==a.tagName){if(this.overflowOffset.top+a.offsetHeight-t.pageY<n.scrollSensitivity){var h=this.items[this.items.length-1];h.item[0]===this.currentItem[0]&&(h=this.items[this.items.length-2]);var c=h?h.top+h.height:0,d=c-this.positionAbs.top;d>0&&(a.scrollTop=l=a.scrollTop+Math.min(n.scrollSpeed,d))}else t.pageY-this.overflowOffset.top<n.scrollSensitivity&&(a.scrollTop=l=a.scrollTop-n.scrollSpeed);this.overflowOffset.left+a.offsetWidth-t.pageX<n.scrollSensitivity?a.scrollLeft=l=a.scrollLeft+n.scrollSpeed:t.pageX-this.overflowOffset.left<n.scrollSensitivity&&(a.scrollLeft=l=a.scrollLeft-n.scrollSpeed)}else{var f=i(document);t.pageY-f.scrollTop()<n.scrollSensitivity?l=f.scrollTop(f.scrollTop()-n.scrollSpeed):i(window).height()-(t.pageY-f.scrollTop())<n.scrollSensitivity&&(l=f.scrollTop(f.scrollTop()+n.scrollSpeed)),t.pageX-f.scrollLeft()<n.scrollSensitivity?l=f.scrollLeft(f.scrollLeft()-n.scrollSpeed):i(window).width()-(t.pageX-f.scrollLeft())<n.scrollSensitivity&&(l=f.scrollLeft(f.scrollLeft()+n.scrollSpeed))}l!==!1&&i.ui.ddmanager&&!n.dropBehaviour&&i.ui.ddmanager.prepareOffsets(this,t),l!==!1&&this.refreshPositions(!0)}for(this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e=this.items.length-1;e>=0;e--)if(s=this.items[e],o=s.item[0],r=this._intersectsWithPointer(s),r&&s.instance===this.currentContainer&&o!==this.currentItem[0]&&this.placeholder[1===r?"next":"prev"]()[0]!==o&&!i.contains(this.placeholder[0],o)&&("semi-dynamic"===this.options.type?!i.contains(this.element[0],o):!0)){if(this.direction=1===r?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),i.ui.ddmanager&&i.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1}},_findSibling:function(t,i){var e=t;do e=e[i]();while(e.length&&!e.is(".i-role-card[id]"));return e},_getCoordinates:function(t){var i=t.closest(".tau-list-level");return{itemId:t.data("id").toString(),parentId:i.data("listParentId"),itemBefore:this._findSibling(t,"prev"),itemAfter:this._findSibling(t,"next")}},_moveCardWithSubTree:function(t){var e=i.Deferred(),o=t.data("list-startCoordinates"),r=this._getCoordinates(t);if(r.itemBefore[0]===o.itemBefore[0]&&r.itemAfter[0]===o.itemAfter[0])return this._showSubTree(t),e.resolve();e.fail(function(){this._moveCardToCoordinates(t,o),this._showSubTree(t),s.animated(t,"tau-card_dnd_failed")}.bind(this));var n={item:t,treeModel:this.treeModel};return this.isMovedWithPrioritization()?(n.itemBefore=r.itemBefore,n.itemAfter=r.itemAfter,this.applyDndMove(n).then(function(){e.resolve()}.bind(this),function(){e.reject()}.bind(this)),this._showSubTree(t),e):(this._restoreScrollPosition(),e.reject())},_moveCardToCoordinates:function(t,i){if(i.itemBefore.length){var e=i.itemBefore,s=e.next(".tau-list-level");t.insertAfter(s.length?s:e)}else i.itemAfter.length?t.insertBefore(i.itemAfter):console.error("Move card after d&d: cannot find position in DOM",i)},_showSubTree:function(t){var i=t.data("list-subtree");i&&i.length&&i.insertAfter(t).slideDown()},setDndOptions:function(t){this.dndOptions=t;var i=this.isDndPossible();this.$treeContainer.toggleClass("tau-sortable",i).sortable({disabled:!i})}})});
define('tau/components/board.new.list/views/dragndropBehavior',["Underscore","tau/core/class","tau/utils/utils.debug","tau/components/board.new.list/views/view.new.list.tree.dragndrop"],function(t,i,e,n){return i.extend({_eventNamespace:".newlist-dragndrop-behavior",_fields:["prioritization"],init:function(t,i,e,n,s){this._eventAggregator=t,this.skeletonView=i,this._boardSettingsService=e,this._apiService=n,this._configurator=s,this.dndOptions={}},attach:function(){$(this._configurator.getWindow()).on("keydown"+this._eventNamespace,this._trackShiftKeyState.bind(this)).on("keyup"+this._eventNamespace,this._trackShiftKeyState.bind(this)),this._eventAggregator.treeRendered.once(this._onInitialTreeRendered,this),this._boardSettingsService.get(this._fields).then(function(t){this._setPrioritization(t.prioritization)}.bind(this)),this._boardSettingsService.bind({fields:this._fields,listener:this,callback:function(t){this._setPrioritization(t.prioritization)}.bind(this)})},_onInitialTreeRendered:function(){t.each(this.skeletonView.getAllTreeViews(),this._onTreeViewCreated,this),this.skeletonView.treeViewCreated.add(this._onTreeViewCreated,this)},_setPrioritization:function(i){i=t.defaults({},i,{mode:"enabled"}),this.dndOptions.prioritization!==i.mode&&(this.dndOptions.prioritization=i.mode,this.setDndOptions())},_trackShiftKeyState:function(t){this.dndOptions.shiftKey!==t.shiftKey&&(this.dndOptions.shiftKey=t.shiftKey,this.setDndOptions())},setDndOptions:function(){this.skeletonView.$el.toggleClass("tau-list-prioritization-enabled","enabled"===this.dndOptions.prioritization).toggleClass("tau-list-prioritization-shiftDown","shift"===this.dndOptions.prioritization&&!!this.dndOptions.shiftKey),this.setDndOptionsForView(this.skeletonView._rootView)},setDndOptionsForView:function(i){i&&(i.dndView&&i.dndView.setDndOptions(this.dndOptions),t.each(i.subViews,this.setDndOptionsForView,this))},_onTreeViewCreated:function(t){t.dndView=new n(t,this)},applyDndMove:function(i){var n={itemId:i.item.data("id"),beforeItemId:i.itemBefore.data("id"),afterItemId:i.itemAfter.data("id"),path:i.treeModel.hierarchy.getPath()};return this._apiService.treeViewPrioritizeBatch({$set:{items:[n]}}).done(function(s){taus.track({action:"drag and drop(prioritize)",cardTypes:t.map(i.treeModel.hierarchyMetaInfo.cardTypes,function(t){return t.typeName}),tags:["newlist"]});var r=i.treeModel;t.each(s.data,function(t){var i=r.hierarchy.findChildByCardId(t.dataItem.id);i?i.card.orderingValue=t.dataItem.orderingValue:e.assertError(!1,"Update card after d&d: cannot find node in model",n)}),r.sortCards()}.bind(this))},destroy:function(){$(this._configurator.getWindow()).off(this._eventNamespace),this._boardSettingsService.unbind({listener:this})}})});
define('tau/components/board.new.list/views/sortingBehavior',["Underscore","tau/core/class","tau/components/board.new.list/views/sortingItem"],function(e,t,n){return t.extend({STAT_KEY:"statistics_newlist_sort",init:function(e,t,n){this._skeletonView=e,this._rootController=t,this._modelSettings=n},attach:function(){this._skeletonView.treeViewCreated.add(this._onTreeViewCreated.bind(this))},sort:function(t){var n=t.getOrdering(),i=0===t.nodeCollection.level?[this._rootController._model]:this._rootController._model.hierarchy.getExpandedModelsAtLevel(t.nodeCollection.level);e.each(i,function(e){e.nodes.setCustomOrdering(n)});var o=e.map(i,function(e){return e.hierarchy.getPath()}),r=this.STAT_KEY,s=this._skeletonView;taus.start(r,{}),this._treeViewByLevel(o,t).done(this._updateNodes.bind(this,i)).done(this._updateQuickAdd.bind(this,i)).done(this._updateCounts.bind(this,i)).done(this._recalculateColumnWidthsForLevel.bind(this,i)).always(function(){s.toggleProgress(!1),taus.stop(r,{ordering:n,types:t.nodeCollection.hierarchyMetaInfo.cardTypes,requestState:this.state()})})},_updateNodes:function(t,n){e.each(t,function(e){var t=e.hierarchy.getPath(),i=e.hierarchy.findRawNodeByPath(n.data,t);e.updateChildrenNodes(i.nodes,n.data.meta)},this)},_recalculateColumnWidthsForLevel:function(e){e.length>0&&this._skeletonView.calculateColumnWidthsForLevel(e[0].level+1)},_treeViewByLevel:function(e,t){var n=t.nodeCollection,i=n.pagingModel.getTake(),o=n.hierarchyMetaInfo.levelType.toLowerCase(),r={$skip:0,$take:i,$set:{expansionState:e,level:n.level,orderingConfig:{levelType:o,ordering:t.getOrdering()}}};return this._modelSettings.listSettings.apiService.treeViewByLevel(r)},_onTreeViewCreated:function(e){var t=e.findHeaderHolder(),i=e.treeModel;t.on("click.newlist",".i-role-card-sorting",function(e){var t=$(e.currentTarget);if(0===t.closest(".tau-list-level-empty").length){var o=new n(t,i);this.sort(o),this._skeletonView.toggleProgress(!0)}}.bind(this))},_updateData:function(t,n,i){var o=e.flatMap(t,function(e){return n(e).getExpansionStateForLoadData()});if(o.length){var r={$set:{expansionState:o}};i(this._modelSettings.listSettings.apiService,r).done(function(e){var t=this._rootController._model;n(t).setSparseData(e.data)}.bind(this))}},_updateCounts:function(e){this._updateData(e,function(e){return e.countsModel},function(e,t){return e.treeViewCountsSparse(t)})},_updateQuickAdd:function(e){this._updateData(e,function(e){return e.quickAddModel},function(e,t){return e.treeViewPossibleActionsSparse(t)})},destroy:function(){}})});
define('tau/components/board.new.list/views/resizableBehavior',["Underscore","tau/core/class","tau/components/board.new.list/views/units/nameUnit"],function(t,e,i){return e.extend({init:function(t,e,i){this._eventAggregator=t,this._columnWidthService=e,this._$el=i},getResizeControl:function(){return this._$el.find(".tau-board-list-view-resizer")},attach:function(){this._eventAggregator.treeRendered.once(this.attachHandlerResizable.bind(this))},attachHandlerResizable:function(){var t=this._$el;t.find(".i-role-list-root-container").css("position","relative");var e=this.getResizeControl(),n=t.find(".tau-list-collapser-cell").width()||0,a=Math.ceil(e.width()/2),o=t.find(".tau-drag-handler-cell").width()||0,r=n+o-a,s=this._columnWidthService.layout.name||i.prototype.MIN_UNIT_WIDTH,l=s+r;e.css({left:l,right:0}),e.draggable({helper:function(){return e.clone().addClass("tau-list-caption-cell__resizable-helper")},start:function(){var t=e.parent().offset().left+i.prototype.MIN_UNIT_WIDTH+r;e.data("ui-draggable").containment=[t],e.draggable("option","containment",[t])},stop:function(t,i){var n=i.position.left-r;this._columnWidthService.setNameWidth(n,this._$el).then(function(){e.css({left:i.position.left})}.bind(this)).then(function(){taus.track({action:"name column resize",columnSize:n,tags:["newlist"]})})}.bind(this),appendTo:"parent",axis:"x"})},destroy:function(){var t=this.getResizeControl();t.data("ui-draggable")&&t.draggable("destroy")}})});
define('tau/components/board.new.list/storeListenerBehavior',["Underscore","tau/core/class","./models/hierarchy.innerLevels"],function(e,t,i){return t.extend({init:function(e,t,i,s){this._newListModel=e,this._definition=t,this._store=s,this._apiService=i},attach:function(){this._apiService.innerLevelsDefinitionChanged.add(this._subscribeToStore,this),this._subscribeToStore()},_getTypesToSubscribeTo:function(t){var s=e.pluck(t.cells.types,"type"),n=t.x?t.x.types:[],r=t.y?t.y.types:[],o=i.getInnerTypes(t);return e.union(s,n,r,o)},_subscribeToStore:function(){this._unsubscribeFromStore();var t=this._getTypesToSubscribeTo(this._definition);e.forEach(t,e.bind(function(t){this._store.on({eventName:"afterRemove",type:t,listener:this},e.bind(function(e){this._newListModel.deleteCard(e.data.id,e.data.type)},this));var i=this._store.getEvictedPropertiesByType(t);e.forEach(i,function(e){this._store.on({eventName:"afterSave",type:t,listener:this,hasChanges:[e]},function(e){this._store.evictPersistedObject(e.data.id,e.data.type)}.bind(this))},this)},this)),this._store.on({eventName:"failure",listener:this},e.bind(function(i){var s=e.complexKey(i||{},"data.cmd");if(e.isObject(s)&&e.contains(t,s.type.toLowerCase())){var n=s.config.id;n&&e.contains(["save","remove"],s.name)&&this._newListModel.refreshCard(n,s.type)}},this))},destroy:function(){this._unsubscribeFromStore(),this._apiService.innerLevelsDefinitionChanged.remove(this)},_unsubscribeFromStore:function(){this._store.unbind(this)}})});
define('tau/components/board.new.list/templates/template.new.list.stickyHeader',["tau/core/templates-factory"],function(t){var e={name:"new.list.stickyHeader",engine:"jqote2",markup:['<style id="<%=this.id%>">',"#<%= this.containerId %> .tau-board-list-sticky-header {","position: fixed;","width: 100%;","z-index: 22;","top: <%=this.top%>px;","}","#<%= this.containerId %> .tau-board-list-sticky-header + .i-role-cardsholder {","margin-top: 27px;","}","</style>"]};return t.register(e)});
define('tau/components/board.new.list/views/stickyHeaderBehavior',["jQuery","Underscore","tau/core/class","tau/components/board.new.list/templates/template.new.list.stickyHeader","tau/components/board.new.list/views/units/nameUnit"],function(t,e,i,s,n){return i.extend({CLASS_MAP:{headerHolder:"i-role-headerholder",stickyHeader:"tau-board-list-sticky-header"},_$currentLevel:null,init:function(t,e,i,s){this._headerHolderSelector="."+this.CLASS_MAP.headerHolder,this._eventAggregator=t,this._skeletonView=e,this._boardSettings=i,this._$el=e.$el,this._$container=this._$el.find(".tau-board-list-view__inner"),this._containerId=this._$el.attr("id"),this._styleId="stickyListStyles-"+this._containerId,this._currentOffsets={innerContainer:{},container:{}},s.getGlobalBus().on("tab.activate.completed",this._adjustStickyHeader,this)},_appendStyle:function(t){this._$el.append(s.render(t))},_removeStyle:function(){this._$el.find("#"+this._styleId).remove()},_findHeaderHolders:function(t){return t=t||this._$el,t.find(this._headerHolderSelector)},_unStickHeader:function(){this._$currentLevel=null,this._findHeaderHolders().removeClass(this.CLASS_MAP.stickyHeader).css("visibility","")},_stickHeader:function(e){var i=e||this._currentOffsets.container,s=i.left+this._pointFirstCard.left,n=i.top+this._pointFirstCard.top,r=document.elementFromPoint(Math.ceil(s),Math.ceil(n)),o=t(r);if(!o.closest(this._headerHolderSelector).length){var d=o.closest(".tau-list-level");d!==this._$currentLevel&&(this._unStickHeader(),this._$currentLevel=d,this._findHeaderHolders(d).eq(0).addClass(this.CLASS_MAP.stickyHeader).css("visibility",""),this._currentOffsets.container.top!==i.top&&(this._currentOffsets.container=i,this._removeStyle(),this._appendStyle({id:this._styleId,containerId:this._containerId,top:this._currentOffsets.innerContainer.top})))}},_toggleStickHeader:function(){this._$container[0].scrollTop&&0===this._$container[0].scrollLeft?this._stickHeader():this._unStickHeader()},_attachStickyHeader:function(){var t=this._findHeaderHolders().find(".tau-name-cell")[0];if(t){var i=t.getBoundingClientRect();this._pointFirstCard={top:i.bottom-this._$el.offset().top+10,left:i.left+n.prototype.MIN_UNIT_WIDTH-20},this._setupOffset();var s=this._toggleStickHeader.bind(this);this._skeletonView.treeViewCreated.add(function(){e.defer(s)}.bind(this)),this._boardSettings.unbind(this),this._boardSettings.bind({fields:["edit"],listener:this,callback:this._adjustStickyHeader.bind(this)}),this._$container.on("scroll",e.throttle(s,100))}},_adjustStickyHeader:function(){this._findHeaderHolders().filter("."+this.CLASS_MAP.stickyHeader).css("visibility","hidden"),e.delay(this._setupOffset.bind(this),300)},_setupOffset:function(){this._currentOffsets.innerContainer=this._$container.offset(),this._stickHeader(this._$el.offset()),this._toggleStickHeader()},attach:function(){this._eventAggregator.treeRendered.once(this._attachStickyHeader,this)},destroy:function(){this._boardSettings.unbind(this),this._removeStyle()}})});
define('tau/components/board.new.list/views/contextMenuBehavior',["jQuery","Underscore","tau/core/class","tau/ui/extensions/ui.context-menu","tau/ui/extensions/board.plus/card-context-menu/menu-action-open-new-tab","tau/ui/extensions/board.plus/card-context-menu/menu-action-item-delete"],function(t,e,n,o,i,s){return n.extend({cardMenuActionActivatedCssClass:"i-role-permanent-context-menu-action-activated",init:function(t,e,n){this.options={bus:t,sliceReady:e,configurator:n,activationCssClass:this.cardMenuActionActivatedCssClass,propertiesToEvict:[]}},attach:function(){var t={handlers:{open:new i(this.options),sep1:"---------",del:new s(this.options)},showSelectors:[".tau-board .i-role-card:not(.tau-axis-card-no-value, .tau-axis-card-no-view, .tau-elems-cell-no-value)"],skipShowSelectors:[".tau-id",".tau-bubble *"],onShow:function(t){t.$menu.addClass("tau-newlist-context-menu")}};this.contextMenu=new o(t),this.contextMenu.initContextMenu()},destroy:function(){this.contextMenu.destroy()}})});
define('tau/components/board.new.list/controllers/controller.new.list',["require","Underscore","tau/core/controller.base","./controller.new.list.tree.root","tau/models/board.plus/model.board.slice.extender","../models/model.new.list.tree.root","../views/dragndropBehavior","../views/sortingBehavior","../views/resizableBehavior","../storeListenerBehavior","../views/stickyHeaderBehavior","../views/contextMenuBehavior","tau/libs/boardSettings/board.settings.to.definition.translator"],function(e){var i=e("Underscore"),t=e("tau/core/controller.base"),o=e("./controller.new.list.tree.root"),r=e("tau/models/board.plus/model.board.slice.extender"),n=e("../models/model.new.list.tree.root"),s=e("../views/dragndropBehavior"),a=e("../views/sortingBehavior"),d=e("../views/resizableBehavior"),l=e("../storeListenerBehavior"),c=e("../views/stickyHeaderBehavior"),g=e("../views/contextMenuBehavior"),h=e("tau/libs/boardSettings/board.settings.to.definition.translator");return t.extend({_lastRenderedElement:null,init:function(e,i,t,o,r,n,s,a){this._skeletonView=e,this._listModel=i,this._eventAggregator=t,this._configurator=n,this._editorComponentBuilder=o,this._quickAddComponentBuilder=r,this._sliceFactory=s,this._componentBus=a},startLifeCycle:function(e,i){taus.start("statistics_newlist_cardLoad",{},"statistics_newlist_cardLoad");var t=new h(e,this._configurator.getAppStateStore());t.getBoardDefinition().then(function(e){var t=e.definition,o=e.configuration;this._eventAggregator.acidRetrieved.fire(t.global.acid),this._eventAggregator.boardSettingsRetrieved.fire(o),this._eventAggregator.definitionReady.fire(t,o);var n={definition:t},s=this._sliceFactory.create(n),a=new r;a.extend({slice:s},i).then(function(e){this._eventAggregator.sliceServiceCreated.fire({service:e.slice,definition:t})}.bind(this))}.bind(this))},buildSkeleton:function(e,i){var t=this._listModel.getEmptyModelInfoArgs(e.config.definition);this._eventAggregator.sliceInfoRetrieved.fire(t),this._skeletonView.buildSkeleton(e.config.definition,t,i)},render:function(e,t){var r=t.config.definition;e.get(["cellPaging"]).then(i.bind(function(s){var a={paging:s.cellPaging,boardId:e.settings.id,listSettings:{apiService:t,boardSettingsService:e,serviceContainer:this._configurator}},d=new n(a);if(this._listModel.setup(d,r),this._listModel.isNotConfigured())this._skeletonView.showNotConfiguredMessage();else{var l=new o(d,this._skeletonView,this._eventAggregator,this._editorComponentBuilder,this._quickAddComponentBuilder,this._configurator,a);l.startLifeCycle(),this._addChildDestroyable(l),i.each(this._createBehaviors(a,l),function(e){this._addChildDestroyable(e),e.attach()},this)}},this))},_createBehaviors:function(e,i){var t=e.listSettings;return[new s(this._eventAggregator,this._skeletonView,t.boardSettingsService,t.apiService,this._configurator),new d(this._eventAggregator,this._skeletonView.columnWidthService,this._skeletonView.$el),new c(this._eventAggregator,this._skeletonView,t.boardSettingsService,this._configurator),new g(this._componentBus,t.apiService,this._configurator),new a(this._skeletonView,i,e),new l(this._listModel,t.apiService.config.definition,t.apiService,this._configurator.getStore())]}})});
define('tau/components/board.new.list/views/editors/view.new.list.editor.unit',["Underscore","tau/components/board.new.list/destroyable","tau/components/board.new.list/views/editors/editor.utils"],function(t,i,n){return i.extend({init:function(i,n,d,e,s){this._card=i,this._$card=d,this._$unit=e,this.unitEditorUpdating=t.Callbacks(),this.unitEditorUpdated=t.Callbacks(),this.unitEditFinished=t.Callbacks(),this._initEditorComponentSubscriptions(s)},_initEditorComponentSubscriptions:function(t){var i=function(i,n){t[i].add(function(){this[n].fire({cardId:this._card.getId(),cardType:this._card.getEntityType()})}.bind(this))}.bind(this);i("editorSaving","unitEditorUpdating"),i("editorSaved","unitEditorUpdated"),i("editFinished","unitEditFinished"),t.cleanedUp.add(this._cleanUp.bind(this))},toggleFocus:function(t){this._$card.toggleClass("tau-card_focusedit_true",t)},toggleBusyIndicator:function(t){n.toggleElementBusyIndicator(this._$unit,t)},_cleanUp:function(){this.unitEditorUpdating.empty(),this.unitEditorUpdated.empty(),this.unitEditFinished.empty()}})});
define('tau/components/board.new.list/views/editors/editor.workflow',["Underscore","tau/core/class"],function(i,e){return e.extend({init:function(i,e,s,t){this._finishedEvent=s.finishedEvent,this._savingEvent=s.savingEvent,this._savedEvent=s.savedEvent,this._saveFailedEvent=s.saveFailedEvent,this._$bubbled=i,this._editorBus=e,this._events=t,this._shouldFinishOnFirstSave=this._finishedEvent===this._savedEvent},start:function(){var i=this._editorBus,e={isFinished:!1,isSaving:!1,isCleanedUp:!1};this._savedEvent?this._savingEvent?(i.on(this._savingEvent,this._onSaving.bind(this,e),this),i.on(this._savedEvent,this._onSaved.bind(this,e),this),i.on(this._saveFailedEvent,this._onSaveFailed.bind(this,e),this)):(console.warn('"savedEvent" was specified without the matching "savingEvent". This will probably cause card update issues when bubble is closed when saving is in progress'),i.on(this._savedEvent,function(){this._onSaving(e),this._onSaved(e)}.bind(this),this),i.on(this._saveFailedEvent,function(){this._onSaving(e),this._onSaveFailed(e)}.bind(this),this)):(this._saveFailedEvent&&console.error('"saveFailedEvent" was specified without matching "savedEvent"'),this._savingEvent&&console.error('"savingEvent" was specified without matching "savedEvent"')),this._finishedEvent&&i.once(this._finishedEvent,this.onFinished.bind(this,e),this),i.once("destroy",this.onFinished.bind(this,e),this),this._$bubbled.one("taububblehide.adapterDefault",function(){this.onFinished(e)}.bind(this))},onFinished:function(i){i.isFinished||(i.isFinished=!0,this._events.editFinished.fire());var e=!i.isCleanedUp&&i.isFinished&&!i.isSaving;e&&(i.isCleanedUp=!0,this._editorBus.removeAllListeners(this),this._$bubbled.off(".adapterDefault"),this._tryDestroyBubble(this._$bubbled),this._events.cleanedUp.fire())},_onSaving:function(i){i.isSaving=!0,this._events.editorSaving.fire(),this._shouldFinishOnFirstSave&&this._$bubbled.tauBubble("hide")},_onSaved:function(i){i.isSaving=!1,this._events.editorSaved.fire(),(this._shouldFinishOnFirstSave||i.isFinished)&&this.onFinished(i)},_onSaveFailed:function(i){this._onSaved(i)},_tryDestroyBubble:function(i){i&&i.data("ui-tauBubble")&&i.tauBubble("destroy")}})});
define('tau/components/board.new.list/views/editors/editor.adapter.default',["Underscore","jQuery","tau/core/class","./editor.workflow"],function(e,t,i,n){return i.extend({init:function(){this.editorSaving=e.Callbacks(),this.editorSaved=e.Callbacks(),this.editFinished=e.Callbacks(),this.cleanedUp=e.Callbacks()},adaptEditorData:function(t,i){return e.cloneDeep(i)},createEditableElement:function(e){return this._editableDeferred||(this._editorBus=e,this._editableDeferred=t.Deferred(),this._getEditable(this._editorBus,this._editableDeferred)),this._editableDeferred},startEdit:function(e,i){t.when(this._editableDeferred).then(function(t){this._initEditor(t,e,i)}.bind(this))},_getEditable:function(e,t){e.on("afterRender",function(e,i){t.resolve(i.element)})},_initEditor:function(e,t,i){t.tauBubble("adjust");var d=new n(t,this._editorBus,i,this);d.start()},_enableBubbleAdjustOnKeydown:function(t,i){i.on("keydown",e.throttle(function(){t.data("ui-tauBubble")&&t.tauBubble("adjust")},400))},_focusOnText:function(e){e.find(":text").focus(1)}})});
define('tau/components/board.new.list/views/editors/editor.adapter.title',["Underscore","jQuery","./editor.adapter.default"],function(e,t,n){return n.extend({_getEditable:function(e,t){e.on("$editable.ready",function(e,n){t.resolve(n)})},_initEditor:function(e,t){this._super(e,t,{savingEvent:"beforeSave",savedEvent:"afterSave",finishedEvent:"afterSave"}),e.on("blur",function(){t.tauBubble("hide")}),this._enableBubbleAdjustOnKeydown(t,e),e.editableText("activate"),this._focusOnText(e)}})});
define('tau/components/board.new.list/views/editors/editor.adapter.assignments',["Underscore","jQuery","./editor.adapter.default"],function(e,t,n){return n.extend({_initEditor:function(t,n){this._super(t,n,{savingEvent:"assignment.editor.saving",savedEvent:"assignment.editor.saved"}),e.delay(function(){t.toggleClass("tau-assignments_state_loaded",!0),this._focusOnText(t)}.bind(this),200)}})});
define('tau/components/board.new.list/views/editors/editor.adapter.tags',["Underscore","jQuery","./editor.adapter.default"],function(n,e,i){return i.extend({_initEditor:function(n,e){this._super(n,e,{savingEvent:"tags.inline.changing",savedEvent:"tags.inline.changed",finishedEvent:"tags.inline.edit.finished"}),this._focusOnText(n)}})});
define('tau/components/board.new.list/views/editors/editor.adapter.choice',["Underscore","jQuery","./editor.adapter.default"],function(e,t,a){return a.extend({adaptEditorData:function(e,t){var a=this._super(e,t);return e.hideIf&&(a.hasValue=!e.hideIf(t)),a},_initEditor:function(e,t){this._super(e,t,{savingEvent:"beforeSave",savedEvent:"afterSave",saveFailedEvent:"saveFailed",finishedEvent:"afterSave"})}})});
define('tau/components/board.new.list/new.list.editor.component.builder',["Underscore","jQuery","tau/core/class","./views/editors/view.new.list.editor.unit","./views/editors/editor.adapter.default","./views/editors/editor.adapter.title","./views/editors/editor.adapter.assignments","./views/editors/editor.adapter.tags","./views/editors/editor.adapter.choice"],function(e,t,i,n,r,a,o,s,d){return i.extend({configsByEditor:{defaults:{maxWidth:!1,minWidth:!0,className:null,positionVertical:"center",adapter:r},title:{maxWidth:!0,minWidth:!0,adapter:a},choice:{minWidth:!0,positionVertical:"top",adapter:d},tags:{className:"tau-bubble-newlist-editor-tags-inline",adapter:s},assignments:{minWidth:!1,className:"tau-bubble-newlist-editor-assignments",positionVertical:"top",adapter:o},"finder.entity":{adapterConfig:{savingEvent:"beforeSave",savedEvent:"afterSave",saveFailedEvent:"saveFailed",finishedEvent:"afterSave"}},effort:{minWidth:!1,className:"tau-bubble-newlist-editor-effort",positionVertical:"top",adapterConfig:{savingEvent:"effort.editor.saving",savedEvent:"effort.editor.saved",saveFailedEvent:"effort.editor.saveFailed",finishedEvent:"effort.editor.finished"}}},init:function(e,t,i,n){this._bus=e,this._configurator=t,this._eventAggregator=i,this._viewContainer=n},createEditorView:function(e,i,a,o){var s={configurator:this._configurator,entity:e.entity},d=i.editorConfig,f=this._getEditorConfig(d.type),l=f.adapter||r,c=new l,u=c.adaptEditorData(i,e.data[i.id]),v=this._createComponentConfig(d,f,a,o,s,u),h=this._configurator.getComponentBuilder();return h.createAsChild(v,this._bus).then(function(e){var i,n=t.Deferred(),r=t.Deferred();return e.once("childrenBuses.ready",function(e,t){i=t[0],c.createEditableElement(i).then(function(){r.resolve(c)})}),e.once("$bubbled.ready",function(e,t){i.fire("$outerBubbled.ready",t),n.resolve(t)}),e.initialize({context:s}),e.fire("view.dom.ready"),e.fire("$trigger.ready",o),t.when(n,r)}).then(function(t,r){return r.startEdit(t,f.adapterConfig),new n(e,i,a,o,r)})},_getEditorConfig:function(t){var i=e.find(this.configsByEditor,function(i,n){return e.startsWith(t,n)});return e.extend({},this.configsByEditor.defaults,i)},_createComponentConfig:function(t,i,n,r,a,o){var s=r,d=this._viewContainer.findBoardContainer(),f=e.extend({},t,{context:a,extensions:[],data:o,$within:d});return{type:"bubble.container",visible:!0,children:[f],extensions:[],options:{appendTo:n,within:d,className:i.className,showArrow:!1,template:['<div class="tau-bubble tau-bubble-newlist-editor" style="',i.maxWidth?" max-width: "+s.width()+"px;":"",i.minWidth?" min-width: "+s.outerWidth()+"px;":"",'">','<div class="tau-bubble__inner" role="content"></div>',"</div>"].join(""),onPositionConfig:function(e){e.my="left "+i.positionVertical,e.at="left "+i.positionVertical,e.collision="flipfit flipfit"}}}}})});
define('tau/components/board.new.list/extension.base.new.list',["Underscore","jQuery","tau/core/extension.base","tau/components/board.new.list/controllers/controller.new.list","tau/components/board.new.list/new.list.editor.component.builder"],function(e,t,i,n,r){return i.extend({_lastRenderedElement:null,init:function(e,t,i,n,o){this._super(e),this.config=e,this._listModel=t,this._skeletonView=i,this._eventAggregator=n,this.configurator=e.context.configurator,this._editorComponentBuilder=new r(e.bus,e.context.configurator,this._eventAggregator,i),this._quickAddComponentBuilder=o,this._initControllerSubscriptions(this._eventAggregator),this._initViewSubscriptions(this._eventAggregator)},_initControllerSubscriptions:function(e){var t=this.fire.bind(this);e.definitionReady.add(function(e){t("definition.ready",e)}),e.sliceServiceCreated.add(function(e){t("slice.ready",{slice:e.service})}),e.cellModelLoaded.add(function(e){t("model.cells.content.loaded",{metaInfo:e.hierarchyMetaInfo})}),e.sliceInfoRetrieved.add(function(e){t("model.sliceInfo.retrieved",e),t("board.paging.settings",e);var i=e.x.onPage,n=e.y.onPage,r=i||1,o=n||1,s=r*o+i+n;t("metaInfo",{expectedCellsCount:s,refActualCellsCount:0,refActualCellsData:[]})}),e.cardRemoved.add(function(e){t("card.removed",e)}),e.itemAddedToContext.add(function(e){t("newlist.highlightItem",e)})},_initViewSubscriptions:function(e){var t=this.fire.bind(this);e.skeletonBuilt.add(function(e){t("view.skeleton.built",{element:e})}),e.treeRendered.add(function(e){t("view.cell.skeleton.built",e)}),e.entityDetailsViewRequested.add(function(e){t("new.list.open.card.details.view",e)})},"bus initialize":function(e,t){var i=this._extractOptions(t.options||this.config.options,{dragndrop:{containmentRefreshTimeout:null},clipboard:{processTimeout:null}});this.fire("options.ready",i),this.fire("configurator.ready",e.data.context.configurator),this.fire("board.configurator.initialized",{configurator:e.data.context.configurator}),this.fire("start.lifecycle",e.data)},"bus refresh":function(){this._super(),this.fire("start.lifecycle",this.config)},"bus configurator.ready > refresh":function(e,t){this.fire("configurator.ready",t)},"bus options.ready > refresh":function(e,t){this.fire("options.ready",t)},"bus newlist.highlightItem > model.cells.content.loaded":function(e,t){var i=this._skeletonView.findView(t.hierarchyPath);i&&i.highlightCard(t.cardId)},"bus boardSettings.ready:last + sliceFactory.ready:last + cardLayoutFactory.ready:last + start.lifecycle":function(e,t,i,r){this.fire("afterInit",{}),this._skeletonView.cleanup(),this._skeletonView.setCardLayoutFactory(r),this._newListController&&this._newListController.destroy(),this._newListController=new n(this._skeletonView,this._listModel,this._eventAggregator,this._editorComponentBuilder,this._quickAddComponentBuilder,this.configurator,i,this.config.bus),this._newListController.startLifeCycle(t.boardSettings,r)},"bus boardSettings.ready:last + slice.ready":function(e,t,i){this._newListController.buildSkeleton(i.slice,t.boardSettings)},"bus boardSettings.ready:last + view.dom.ready + slice.ready":function(e,t,i,n){this._newListController.render(t.boardSettings,n.slice)},"bus view.skeleton.built":function(e){this.fire("afterRender",e.data)},"bus afterRender":function(e){var t=e.data.element;this._lastRenderedElement&&this._lastRenderedElement!==t&&this.fire("element.updated",{newElement:t,oldElement:this._lastRenderedElement}),this._lastRenderedElement=e.data.element;var i=t.find(".i-role-grid");this.fire("$el.ready",t),this.fire("$grid.ready",i)},"bus metaInfo":function(){this.onViewCellSkeletonBuiltTick=this._onViewCellSkeletonBuiltTickHandler},"bus overview.cells.skeletons.ready":function(){this.onViewCellSkeletonBuiltTick=t.noop},"bus metaInfo:last + view.cell.skeleton.built":function(e,t,i){this.onViewCellSkeletonBuiltTick(t,i)},"bus metaInfo + view.cards.update.complete":function(e,t){this.fire("overview.cards.ready",{cards:t.refActualCellsCardsHash,cardGroups:t.refActualCellsCardsGroupedHash})},"bus view.skeleton.built + overview.cells.skeletons.ready":function(e,t,i){this.fire("overview.board.ready",{element:t.element,cells:i.cells})},"bus slice.ready:last + before_destroy":function(e,t){this.fire("clearError"),t.slice.abort()},"bus slice.ready:last + before_refresh":function(e,t){this.fire("clearError"),t.slice.abort()},destroy:function(){this._newListController&&this._newListController.destroy(),this._skeletonView&&this._skeletonView.destroy(),this._super()},_onViewCellSkeletonBuiltTickHandler:function(e,t){e.refActualCellsCount+=1,e.refActualCellsData.push(t),e.refActualCellsCount===e.expectedCellsCount&&this.fire("overview.cells.skeletons.ready",{cells:e.refActualCellsData,cardGroups:e.refActualCellsCardsGroupedHash})}})});
define('tau/slice/api.new.list',["Underscore","jQuery","tau/slice/slice.space.cached","tau/models/board.customize.units/board.customize.cards.builderSelector","tau/services/customize/service.customize.card.layout.factory.newlist","tau/models/board.customize.units/const.card.sizes"],function(e,r,i){return i.extend({init:function(r,i,t){this._super(r,i),this._newListSliceOptions=t,this.innerLevelsDefinitionChanged=e.Callbacks()},getSliceParams:function(){var r=this._super();return e.extend(r,{boardId:this._newListSliceOptions.boardId}),r},setInnerLevelsDefinition:function(e){this.config.definition.innerLevels=e,this.innerLevelsDefinitionChanged.fire(e)},treeView:function(e){return this.resolveDeferred("treeView",e)},treeViewPossibleActions:function(e){return this.resolveDeferred("treePossibleActions",e)},treeViewPossibleActionsSparse:function(e){return this.resolveDeferred("treePossibleActionsSparse",e)},treeViewCounts:function(e){return this.resolveDeferred("counts",e)},treeViewCountsSparse:function(e){return this.resolveDeferred("countsSparse",e)},treeViewCards:function(e){return this.resolveDeferred("cards",e)},treeViewExpand:function(e){return this.resolveDeferred("expand",e)},treeViewCollapse:function(e){return this.resolveDeferred("collapse",e)},treeViewPrioritizeBatch:function(e){return this.resolveDeferred("prioritizeBatch",e)},treeViewByLevel:function(e){return this.resolveDeferred("sort",e)},resolveDeferred:function(e,r){var i=this._prepareCommand({method:e,config:r});return this._super(i.method,i.config)},_createApiRequestConfig:function(e,r){var i=this._super(e,r);return i.parameters.definition.innerLevels=this.config.definition.innerLevels,i},_prepareCommand:function(e){return e.config=r.extend(!0,e.config,{$set:{boardId:this._newListSliceOptions.boardId}}),e}})});
define('tau/slice/new.list.factory',["Underscore","tau/core/class","tau/slice/api.new.list","tau/slice/url.resolver"],function(e,i,t,n){var s=i.extend({init:function(e,i){this.defaults=e||{},this._newListSliceOptions=i},create:function(i){return e.defaults(i,this.defaults),this._createSlice(i,new n({prefix:this._newListSliceOptions.prefix||"TreeView"}))},_createSlice:function(e,i){return new t(e,i,this._newListSliceOptions)}});return s});
define('tau/components/board.new.list/extensions/model.new.list.quick.add',["Underscore","jQuery","tau/models/board.cell.quick.add/model.board.quick.add.base"],function(t,e,a){return a.extend({resolveSliceAddData:function(){var t=this.config.options;return e.Deferred().resolve({slice:t.slice,types:t.types,path:t.path,expansionState:t.expansionState,onAfterAdd:t.onAfterAdd,shouldSkipNotification:t.shouldSkipNotification})},getDataItemTemplateParam:function(t){return{path:t.path}},getDoAddParams:function(t,e){var a={path:e.path,expansionState:e.expansionState,type:t.type,values:t.fields};return a},onAfterAddData:function(t,e,a){taus.track({action:"quick add entity",entityType:e.data[0].dataItem.type.toLowerCase(),tags:["newlist"]}),t.shouldSkipNotification(e.data[0])&&(a.skipNotification=!0),this._super(t,e,a),t.onAfterAdd(e)}})});
define('tau/components/board.new.list/new.list.quickAdd.component.builder',["Underscore","jQuery","tau/core/class","tau/components/board.new.list/extensions/model.new.list.quick.add","tau/components/board.new.list/models/node.modification.strategies"],function(t,e,i,o,n){return i.extend({_optionDefaults:{positionConfig:{collision:"fit flipfit"}},init:function(e,i,o,n){this._bus=e,this._configurator=i,this._eventAggregator=o,this._options=t.defaults(n||{},this._optionDefaults)},createQuickAddComponent:function(t,e){var i=t,n=e.getRoot().getExpansionState(),a=this.onAfterAdd.bind(this,e),d={type:"board.cell.quick.add",QuickAddModel:o,options:{slice:e._apiService,path:e.hierarchy.getPath(),types:e.quickAddModel.data.types,expansionState:n,onAfterAdd:a,shouldSkipNotification:this._isContextEntity.bind(this,e)}},r={type:"bubble.container",visible:!0,children:[d],options:{target:i,stackName:"quickAdd",within:i.closest(".i-role-board-body"),dontCloseSelectors:["#ui-datepicker-div"],onShow:function(){i.parent().addClass("tau-quick-add_expand")},onHide:function(){i.parent().removeClass("tau-quick-add_expand"),i.tauBubble("destroy")},onPositionConfig:function(t){var e=i.tauBubble("widget").height()<i.offset().top;return{my:e?"left bottom":"left top",at:e?"left-30 top":"left-30 bottom",of:i,within:t.within,collision:this._options.positionConfig.collision}}.bind(this),onArrowPositionConfig:function(t,e){var o={my:"center top",at:"center bottom",of:i,within:t.within,collision:"fit flipfit"};return"bottom"===e&&(o.my="center bottom",o.at="center top"),o}.bind(this)},componentsConfig:{components:[d]}};this._configurator.getComponentBuilder().createAsChild(r,this._bus).then(function(t){t.fire("initialize",{context:{configurator:this._configurator}}),t.fire("view.dom.ready"),t.fire("$trigger.ready",i)}.bind(this))},onAfterAdd:function(e,i){t.each(i.data,function(t){if(this._isContextEntity(e,t))this._updateContext(t.path,t.dataItem);else{var i=this._getNodeModelByPath(e,t.path);i&&i.nodes&&n.regular.addCard(i,t.dataItem)}},this)},_getNodeModelByPath:function(t,e){var i=t.getRoot();return i.hierarchy.findNodeByPath(e)},_isContextEntity:function(t,e){var i=this._getNodeModelByPath(t,e.path);if(!i||!i.nodes)return!1;var o=e.dataItem.type;return!i.nodes.isCellLevel()&&("Project"===o||"Team"===o)},_updateContext:function(t,e){var i=this._configurator.getAppStateStore(),o=this._configurator.getApplicationContextService();o.appendToContext(e.type,[e.data.cardData.id],i).then(function(){this._eventAggregator.itemAddedToContext.fire({cardId:e.id,hierarchyPath:t})}.bind(this))}})});
define('tau/components/board.new.list/extension.new.list',["tau/components/board.new.list/extension.base.new.list","tau/slice/new.list.factory","tau/components/board.new.list/new.list.quickAdd.component.builder"],function(t,i,e){return t.extend({init:function(t,i,n,o){var a=new e(t.bus,t.context.configurator,o);this._super(t,i,n,o,a)},"bus configurator.ready + boardSettings.ready":function(t,e,n){var o={boardId:n.boardSettings.settings.id},a=new i(e.getSliceFactoryOptions(),o);this.fire("sliceFactory.ready",a)},_initControllerSubscriptions:function(t){this._super(t),t.acidRetrieved.add(function(t){this.fire("acid.ready",t)},this),t.boardSettingsRetrieved.add(function(t){this.fire("board.configuration.ready",t),this.fire("viewMode.ready",t.viewMode)},this),t.definitionReady.add(function(t,i){taus.track({"@":["open-board-action"],boardSettings:i,definition:t})},this)},_initViewSubscriptions:function(t){this._super(t),t.hasDataInSliceChanged.add(function(t){this.fire("board.nodata.status.ready",this._listModel.getIsEmptyObject(t))},this)}})});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.cardsViewer.base',["Underscore","jQuery","tau/ui/behaviour/common/ui.behaviour.progressIndicator","tau/ui/extensions/board.plus/ui.board.plus.utils","tau/components/extensions/component.extension.base"],function(e,t,i,o,n){return n.extend({appOptions:{},requireApplicationComponent:function(e){var t=this.config.context.configurator.require;t(["all.components"],function(){t(["tau/components/component.application"],e)})},loadCardDetails:function(e){this.fire("view.load.cardDetails",e)},isSupportedCardForView:function(e){return o.isSupportedCardForView(e)},cleanupStore:function(e){e.configurator.getStore().evictData()},"bus start.lifecycle":function(){var e=this;e.requireApplicationComponent(function(t){e.fire("applicationComponent.ready",{component:t})})},"bus start.lifecycle+applicationComponent.ready":function(t,i,o){var n=i.context.configurator.createChild();n._id=e.uniqueId("board_cardView_"),n.isBoardEdition=!0,n.getHashService().setFakeWindow();var a={context:{configurator:n},options:this.appOptions};a.options.comet.enabled=!0;var r=o.component.create(a),s=e.bind(this.fire,this);this.fire("viewerBus.ready",r),r.on("afterRender",function(e){s("viewPort.afterRender",e.data)}),r.on("application.error",function(e){s("view.cardDetails.lastResult",{type:"error",data:e.data})}),r.on("application.navigate",function(){s("view.cardDetails.routing")}),r.on("contentRendered",function(e){s("view.cardDetails.loaded",e.data),s("view.cardDetails.lastResult",{type:"loaded",data:e.data})}),r.initialize(a),this.fire("viewPort.created",{application:r,configurator:n})},"bus view.cardDetails.lastResult":function(e){var t=e.data;"error"===t.type&&this.fire("error",t.data)},"bus view.skeleton.built":function(e){var t=e.data.element;t.on("mousedown",".tau-id",function(e){e.stopPropagation()}),this.subscribe(t)},"bus refresh + viewerBus.ready":function(e,t,i){i.destroy()},"bus destroy + viewerBus.ready":function(e,t,i){i.destroy()}})});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.cardsViewer.board',["Underscore","jQuery","tau/ui/extensions/board.plus/ui.extension.board.plus.cardsViewer.base","tau/ui/extensions/card.viewer.progress.indicators"],function(i,e,t,n){return t.extend({appOptions:{applicationId:"boardPopup",integration:{showInCoverView:!0,keepAlive:!0},routing:{silent:!0,executeOnStart:!1},comet:{enabled:!1}},init:function(i){this.progressIndicators=new n,this._super(i)},subscribe:function(t){var n=i.debounce(function(i,t,n){var r=e(i.currentTarget).data();this._openCardDetails(r,t,n)}.bind(this),500,!0);this._subscribeWithClickHandler(t,n)},_subscribeWithClickHandler:function(i,t){i.on("dblclick",".i-role-card",function(i){t(i,e(i.currentTarget),{hover:!0})}),i.on("click",".i-role-cellaxis-viewtrigger",function(i){t(i,e("body"))}),this._subscribeToIdUnitClicks(i,t)},_subscribeToIdUnitClicks:function(i,t){i.on("click",".tau-id",function(i){i.ctrlKey||(i.stopPropagation(),i.preventDefault(),t(i,e("body")))})},_openCardDetails:function(i,e,t){this.progressIndicators.show(e,t),this.loadCardDetails(i)},"bus view.cardDetails.lastResult":function(){this.progressIndicators.hideAll()},"bus acid.ready:last + viewPort.created:last + view.load.cardDetails":function(i,e,t,n){this.cleanupStore(t),t.configurator.getBoardCacheService().setData(n.cardData),t.application.fire("history.reset"),t.application.fire("application.navigate.entity",{id:n.entityId,type:n.entityType,acid:e,action:"silent"})}})});
define('tau/components/board.new.list/extensions/extension.new.list.cards.viewer',["tau/ui/extensions/board.plus/ui.extension.board.plus.cardsViewer.board"],function(i){return i.extend({_subscribeWithClickHandler:function(i,e){this._subscribeToIdUnitClicks(i,e)},"bus new.list.open.card.details.view":function(i,e){this._openCardDetails(e.cardData,e.$card)}})});
define('tau/components/component.board.new.list',["tau/components/component.board.plus.base","tau/components/component.base.new.list","tau/components/board.new.list/extension.new.list","tau/components/board.new.list/extensions/extension.new.list.cards.viewer"],function(e,n,t,o){return{create:function(s){var i={newListRegistry:{baseComponent:e,LifeCycleExtension:t},extensions:[o]};return n.createNewList(i,s)}}});
define('tau/models/board.overview/model.board.overview',["Underscore","tau/core/extension.base"],function(e,r){var i=r.extend({"bus beforeInit":function(r,i){this.fire("dataBind",{viewMode:"board"});var o=i.config.context.configurator,t=e.defaults(i.config,{boardName:"board_plus"});this.fire("options.ready",t),this.fire("configurator.ready",o)},"bus options.ready:last + configurator.ready:last + boardSettings.ready":function(r,i,o){o.getComponentBusRegistry().getByName(i.boardName,e.bind(function(e){this.fire("boardBus.ready",e)},this))},"bus boardBus.ready":function(e,r){var i=this;r.removeAllListeners(this),r.on("overview.board.retrieved",function(e,r){i.fire("$boardEl.ready",r),i.fire("$boardGrid.ready",r.find(".i-role-grid"))},this),r.on("overview.board.updated",function(e,r){i.fire("$boardEl.ready",r),i.fire("$boardGrid.ready",r.find(".i-role-grid"))},this),r.fire("overview.board.retrieve")},"bus boardBus.ready > destroy":function(e,r){r.removeAllListeners(this)}});return i});
define('tau/ui/extensions/board.overview/ui.extension.board.overview',["Underscore","jQuery","tau/core/extension.base"],function(t,e,i){return i.extend({"bus beforeInit + view.dom.ready":function(){var t=e('<div style="overflow:scroll;width:30px;">s g s e l e m e n t s f s e </div>');e("body").append(t),this.scrollWidth=t.width()-t[0].clientWidth,t.remove();var i=this;Array.prototype.map?require(["libs/d3/d3"],function(t){i.fire("draw.ready",t)}):i.fire("draw.ready",!1)},"bus $boardGrid.ready":function(e,i){i.unbind("scroll.overview"),i.bind("scroll.overview",t.bind(function(){this.fire("visiblerPosition.update")},this))},"bus $el.ready:last + $boardGrid.ready:last + svg.ready:last + visiblerPosition.update":function(t,e,i){var r={x:i.scrollLeft(),y:i.scrollTop()},o=Math.max(0,Math.min(this.maxVisiblerOrigin.x,r.x/this.verticalProportion)),h=Math.max(0,Math.min(this.maxVisiblerOrigin.y,r.y/this.horizontalProportion));e.find(".tau-boardoverview__visibler").attr("x",o).attr("y",h).data([{x:o,y:h}])},"bus afterRender":function(t,e){this.fire("$el.ready",e.element)},"bus options.ready:last + draw.ready:last + $el.ready:last + $boardEl.ready":function(e,i,r,o,h){if(r){var a={width:i.width,height:i.height,$boardElement:h},n=o.find("[role=holder]");this.drawOverview(n,a).done(t.bind(function(t){this.fire("svg.ready",t)},this))}},drawOverview:function(i,r){var o=e.Deferred(),h=i.find("svg");i.toggleClass("tau-boardoverview__holder_state_redraw",!0);var a=t.defaults(r,{width:e.browser.msie?206:207,height:400}),n=this.draw(i,a)[0];return i.toggleClass("tau-boardoverview__holder_state_redraw",!1),h.remove(),o.resolve(n)},getGridMetrics:function(t){var i=e(t).find("table"),r=i[0],o={w:i.width(),h:i.height()},h={contentSize:{width:o.w,height:o.h},clientSize:{width:Math.min(t.clientWidth,r.clientWidth),height:Math.min(t.clientHeight,r.clientHeight)}};return h},getViewMetrics:function(t,e){var i={w:t.width,h:t.height},r=i.w,o=this.getGridMetrics(e),h=this.verticalProportion=this.horizontalProportion=o.contentSize.width/r,a=Math.ceil(o.contentSize.height/h),n={clientSize:{width:t.width,height:Math.min(t.height,a)},contentSize:{width:Math.ceil(o.contentSize.width/h),height:a},selectorSize:{width:Math.ceil(o.clientSize.width/h),height:Math.ceil(o.clientSize.height/h)}};return{width:r,verticalProportion:h,horizontalProportion:h,overviewMetrics:n}},getFitsViewMetrics:function(e,i){var r=this.getGridMetrics(i);this.horizontalProportion=r.contentSize.width/e.width,this.veticalProportion=r.contentSize.height/e.height;var o={clientSize:t.clone(e),contentSize:t.clone(e),selectorSize:{width:Math.ceil(r.clientSize.width/this.horizontalProportion),height:Math.ceil(r.clientSize.height/this.veticalProportion)}};return{width:e.width,verticalProportion:this.veticalProportion,horizontalProportion:this.horizontalProportion,overviewMetrics:o}},draw:function(i,r){{var o=r.$boardElement,h=o.find(".i-role-grid"),a=h[0],n=h.find("table");n[0]}if(n=n.length?n:h.children().eq(0),!n.length)return!1;r=t.clone(r);var s=this.scrollWidth,d=this.getViewMetrics(r,a),l=d.overviewMetrics.clientSize.height,c=l>=d.overviewMetrics.contentSize.height;0==c?(r.width-=s+(s>0?1:0),d=this.getViewMetrics(r,a),l>d.overviewMetrics.clientSize.height&&(r.width+=s,d=this.getFitsViewMetrics(r,a),s=0)):s=0,l=d.overviewMetrics.clientSize.height;var w=this.getData(o),v=(d.width,d.verticalProportion),f=d.horizontalProportion,g=d.overviewMetrics,u=g.selectorSize;i.parent().width(r.width+s+(e.browser.msie?1:0)),i.width(g.clientSize.width),i.parent().height(l+2);var p=function(e){return t.isNaN(e)?0:e},y=d3.select(i[0]).append("svg").attr("class","tau-boardoverview__chart").attr("width",p(g.clientSize.width)).attr("height",p(g.contentSize.height)),b=0,m=0,z=0,M=this.maxVisiblerOrigin={x:g.contentSize.width-u.width,y:g.contentSize.height-u.height};t.forEach(w.rows,function(e){var i=e.height/v;b=0,t.forEach(e.cells,function(e){var r=e.width/f;y.append("rect").attr("class","tau-boardoverview__cell").attr("width",p(r)).attr("height",p(i)).attr("x",p(b)).attr("y",p(m)),t.forEach(e.cards,function(t){{var e="tau-boardoverview__card-"+t.type.toLowerCase(),i=t.width/f,r=t.height/v;y.append("rect").attr("class","tau-boardoverview__card "+e).attr("width",p(i)).attr("height",p(r)).attr("x",p(t.offsetLeft/f)).attr("y",p(t.offsetTop/v))}}),b+=r}),z+=e.height,m=z/v});var x={x:a.scrollLeft/f,y:a.scrollTop/v},S=y.append("rect").data([{x:x.x,y:x.y}]).attr("class","tau-boardoverview__visibler").attr("width",p(g.selectorSize.width)).attr("height",p(g.selectorSize.height)).attr("x",function(t){return p(t.x)}).attr("y",function(t){return p(t.y)}),P=function(){var t=d3.mouse(y[0][0]),e=Math.max(0,Math.min(M.x,t[0]-u.width/2)),i=Math.max(0,Math.min(M.y,t[1]-u.height/2));S.attr("x",p(e)).attr("y",p(i)).data([{x:e,y:i}]);var r=e*f,o=i*v;a.scrollLeft=r,a.scrollTop=o};y.on("click",P);var _=function(t){var e=Math.max(0,Math.min(M.x,d3.event.x)),i=Math.max(0,Math.min(M.y,d3.event.y));S.attr("x",t.x=p(e)).attr("y",t.y=p(i))},L=function(){var t=S.attr("x"),e=S.attr("y"),i=t*f,r=e*v;a.scrollLeft=i,a.scrollTop=r},N=d3.behavior.drag().origin(Object).on("drag",_).on("dragend",L);return S.call(N),y},getData:function(i){var r=function(e,i){var r=getComputedStyle(e)[i];return t.isNaN(r)?0:parseInt(getComputedStyle(e)[i],10)},o={rows:[],colNum:0,rowNum:0},h=i.find(".i-role-grid"),a=h.find("tr");return a=a.length?a:h.find(".i-role-cellholder"),a.each(function(){var t={height:this.clientHeight||e(this).height(),cells:[]};o.rows.push(t);var i=e(".i-role-cellholder",this);i=i.length?i:e(this),i.each(function(){if(!this.getAttribute("data-is-hidden")){var i=r(this,"width");if("none"!=e(this).css("display")){var o={width:i,cards:[]};t.cells.push(o),e(".i-role-card",this).each(function(){o.cards.push({id:this.id,type:this.getAttribute("data-entity-type").toLowerCase(),offsetLeft:this.offsetLeft+(this.offsetParent?this.offsetParent.offsetLeft:0),offsetTop:this.offsetTop+(this.offsetParent?this.offsetParent.offsetTop:0),width:r(this,"width"),height:r(this,"height")})})}}})}),o.rows.length&&(o.colNum=i.find(".i-role-header[data-dimension=x] .i-role-cellholder:not([data-is-hidden=1])").length,o.rowNum=i.find(".i-role-header[data-dimension=y] .i-role-cellholder:not([data-is-hidden=1])").length),o}})});
define('tau/ui/templates/board.overview/ui.template.board.overview',["tau/core/templates-factory"],function(e){var i={name:"board.overview",engine:"jqote2",markup:['<% if (this.viewMode == "board"){ %>','<div class="tau-boardoverview <% if (this.isCollapsed == false) { %>tau-boardoverview_active_true<% } %>">','<div role="holder" class="tau-boardoverview__holder">',"</div>","</div>","<% } else { %>","<div></div>","<% } %>"],dependencies:[]};return e.register(i)});
define('tau/components/component.board.overview',["Underscore","tau/components/component.creator","tau/models/board.overview/model.board.overview","tau/ui/extensions/board.overview/ui.extension.board.overview","tau/ui/templates/board.overview/ui.template.board.overview"],function(e,o,r,t,n){return{create:function(e){var a={extensions:[r,t],template:n};return o.create(a,e)}}});
define('tau/models/board.owner/model.board.owner',["Underscore","tau/core/extension.base"],function(e,i){return i.extend({"bus afterInit":function(e,i){this.fire("configurator.ready",i.config.context.configurator)},"bus boardSettings.ready:last + configurator.ready":function(i,t){t.boardSettings.get({fields:["ownerIds"],callback:e.bind(function(e){this.fire("ownerIds.ready",{ownerIds:e.ownerIds})},this)})},"bus configurator.ready:last + ownerIds.ready":function(i,t,n){t.getStore().find("user",{$query:{id:{$in:n.ownerIds},deleteDate:{$isNull:!0}},fields:["id","firstName","lastName","avatarUri","email"]}).done({success:e.bind(function(e){var i=e[0].data;this._dataBind(i,n,t)},this),failure:e.bind(function(){this._dataBind([],n,t)},this)})},_dataBind:function(e,i,t){var n=this._createViewModel(e,i.ownerIds,t.getLoggedUser());this.fire("dataBind",n)},_createViewModel:function(i,t,n){var r=e.bind(function(e,i){return i==e},this,n.id),a=1===i.length,d=n.isAdministrator||e.some(t,r),s=e.map(i,function(i){return{displayName:(e.trim([i.firstName,i.lastName].join(" "))||i.email).replace(/\s/g,"&nbsp;"),avatarUri:i.avatarUri,canBeDeleted:d&&!r(i.id)&&!a,userId:i.id}});return{canBeAdded:d,owners:e.sortBy(s,function(i){return e.indexOf(t,i.userId)})}}})});
define('tau/ui/extensions/board.owner/ui.extension.board.owner',["tau/components/extensions/component.extension.base"],function(e){return e.extend({"bus boardSettings.ready + afterRender":function(e,n,t){var o=this._getBubbleConfig(t.element,n);this.fire("initBubble",o)},"bus initBubble:last + afterRender":function(e,n,t){t.element.tauBubble("adjust")},_getBubbleConfig:function(e,n){var t=function(){e.toggleClass("tau-checked")};return{target:e,alignTo:e.find(".i-role-owners-wrap"),applyBubbleClasses:!1,zIndex:999,componentsConfig:{components:[{type:"board.owner.list",data:{boardSettingsArg:n}}],context:this.config.context},onShow:t,onHide:t,className:"tau-owners-bubble",stackName:"boardOwnerList"}}})});
define('tau/ui/extensions/board.owner/ui.extension.board.owner.refresher',["Underscore","tau/components/extensions/component.extension.base"],function(e,n){return n.extend({"bus boardSettings.ready":function(n,t){var s=t.boardSettings;s.unbind({listener:this}),s.bind({listener:this,fields:["ownerIds"],callback:e.bind(function(){this.fire("refresh",{refreshSelector:".i-role-owners"})},this)})},"bus boardSettings.ready:last + destroy":function(e,n){n.boardSettings.unbind({listener:this})}})});
define('tau/ui/extensions/board.tooltip/ui.extension.board.tooltip',["jQuery","tau/components/extensions/component.extension.base"],function(t,o){return t.widget("ui.tauBubbleTooltip",t.ui.tauBubble,{}),o.extend({_initTooltip:function(t){t.tauBubbleTooltip({content:"<span>"+t.data("title")+"</span>",zIndex:999,template:['<div class="tau-bubble-board">','<div class="tau-bubble-board__arrow" role="arrow"></div>','<div class="tau-bubble-board__inner tau-container" role="content"></div>',"</div>"].join(""),className:"tau-bubble-tooltip",showEvent:"mouseenter",hideEvent:"mouseleave mousedown",mode:"tooltip",stackName:"tooltip",delay:500,onPositionConfig:this._tooltipPositionConfig,onArrowPositionConfig:this._tooltipPositionConfig,onBeforeShow:this._tooltipBeforeShow})},_tooltipPositionConfig:function(t){t.at="center bottom-1",t.my="center top"},_tooltipBeforeShow:function(){var t=this.$target,o=t.data("title"),e=t.data("collapsed-selector")||".tau-collapsed";if(t.is(e)){var n=t.data("title-collapsed");n&&(o=n)}var i=t.data("expanded-selector")||".tau-expanded";if(t.is(i)){var a=t.data("title-expanded");a&&(o=a)}return o?void this.option("content","<span>"+o+"</span>"):!1},"bus afterRender":function(){var o=this,e=function(e){var n=t(e.currentTarget);n.data("ui-tauBubbleTooltip")||(o._initTooltip(n),n.trigger("mouseenter"))};t(document).on("mouseenter.tooltip",".tau-extension-board-tooltip",e);var n=function(o){t(o.currentTarget).closest(".tau-template-item__inner").trigger("mouseleave")};t(document).on("mouseenter.tooltip",".tau-extension-board-tooltip-inner",n);var i=function(o){t(o.currentTarget).closest(".tau-template-item__inner").trigger("mouseenter")};t(document).on("mouseleave.tooltip",".tau-extension-board-tooltip-inner",i),this.on("destroy",function(){t(document).on("mouseenter.tooltip",".tau-extension-board-tooltip",e),t(document).off("mouseenter.tooltip",".tau-extension-board-tooltip-inner",n),t(document).off("mouseleave.tooltip",".tau-extension-board-tooltip-inner",i)})}})});
define('tau/ui/templates/board.owner/ui.template.board.owner',["tau/core/templates-factory"],function(a){var e={name:"board.owner",engine:"jqote2",markup:['<button class="tau-btn tau-board-owner">','<span class="tau-label">View owners</span>','<span class="tau-owners-wrap i-role-owners-wrap">','<span class="i-role-owners">',"<% _.each(_.first(this.owners, 3), function(owner) { %>",'<img src="<%! owner.avatarUri %>20" class="tau-extension-board-tooltip" data-title="<%! owner.displayName %>" />',"<% }); %>","</span>","</span>","</button>"],dependencies:[]};return a.register(e)});
define('tau/components/component.board.owner',["Underscore","tau/components/component.creator","tau/models/board.owner/model.board.owner","tau/ui/extensions/board.owner/ui.extension.board.owner","tau/ui/extensions/board.owner/ui.extension.board.owner.refresher","tau/ui/extensions/board.tooltip/ui.extension.board.tooltip","tau/components/extensions/bubble/extension.bubble.creator","tau/components/extensions/component.creator.extension","tau/ui/templates/board.owner/ui.template.board.owner"],function(e,o,n,t,r,a,i,s,u){return{create:function(e){var b={extensions:[n,t,r,a,i,s],template:u};return o.create(b,e)}}});
define('tau/models/board.owner/model.board.owner.list',["tau/models/board.owner/model.board.owner"],function(e){return e.extend({"bus afterInit":function(e,t){this._super(e,t),this.fire("boardSettings.ready",t.config.data.boardSettingsArg)}})});
define('tau/ui/extensions/board.owner/ui.extension.board.owner.list',["Underscore","jQuery","tau/core/extension.base","tau/libs/store2/store2","tau/ui/extensions/user/jquery.tauUserAutocomplete"],function(e,t,n,r){return n.extend({"bus ownerIds.ready":function(e,t){this.ownerIds=t.ownerIds},"bus configurator.ready:last + boardSettings.ready:last + afterRender":function(e,t,n,r){var o=n.boardSettings;this._bindDelete(o,r.element),this._bindAdd(t,o,r.element)},_bindDelete:function(n,r){r.filter(":not(.i-role-delete-bound)").on("click",".i-role-delete",e.bind(function(r){var o=t(r.target).data("userid");this._updateOwners(n,function(t){return e.without(t,o)})},this)).addClass("i-role-delete-bound")},_bindAdd:function(t,n,o){var i=o.find(".i-role-add");i.data("tauuserautocomplete")||i.tauUserAutocomplete({position:{my:"right top",at:"right bottom+5",collision:"none"},store2:new r(t),rejectUserIdsGetter:e.bind(this._rejectUserIdsGetter,this),open:function(){t.getKeyBoardManager().pushHandler({})},close:function(){t.getKeyBoardManager().popHandler()},select:e.bind(function(e,t){this._updateOwners(n,function(e){return e.push(t.item.id),e})},this)})},_updateOwners:function(t,n){t.get({fields:["ownerIds"],callback:e.bind(function(e){t.set({set:{ownerIds:n(e.ownerIds)}})},this)})},_rejectUserIdsGetter:function(){return this.ownerIds}})});
define('tau/ui/templates/board.owner/ui.template.board.owner.list',["tau/core/templates-factory"],function(e){var a={name:"board.owner.list",engine:"jqote2",markup:["<div>",'<ul class="tau-owners i-role-owners">',"<% _.each(this.owners, function(owner) { %>",'<li class="tau-menu-item">','<img src="<%! owner.avatarUri %>20" class="tau-extension-board-tooltip" data-title="<%! owner.displayName %>" />',"<span><%! owner.displayName %></span>","<% if (owner.canBeDeleted) { %>",'<i class="tau-delete i-role-delete" data-userId="<%! owner.userId %>"><!-- --></i>',"<% } %>","</li>","<% }); %>","</ul>","<% if (this.canBeAdded) { %>",'<div class="tau-invite-wrap i-role-add-wrap">','<input type="text" class="tau-in-text i-role-add" placeholder="Add owner">',"</div>","<% } %>","</div>"],dependencies:[]};return e.register(a)});
define('tau/components/component.board.owner.list',["tau/components/component.creator","tau/models/board.owner/model.board.owner.list","tau/ui/extensions/board.owner/ui.extension.board.owner.list","tau/ui/extensions/board.owner/ui.extension.board.owner.refresher","tau/ui/extensions/board.tooltip/ui.extension.board.tooltip","tau/ui/templates/board.owner/ui.template.board.owner.list"],function(e,o,t,n,r,a){return{create:function(i){var s={extensions:[o,t,n,r],template:a};return e.create(s,i)}}});
define('tau/models/board.paging/model.board.paging',["Underscore","tau/core/model-base"],function(e,a){var t=a.extend({"bus afterInit":function(a,t){var i=t.config,r=t.config.context.configurator;this.fire("configurator.ready",r),r.getComponentBusRegistry().getByName(i.boardName).done(e.bind(function(e){this.fire("boardBus.ready",e)},this))},"bus boardBus.ready":function(a,t){var i=e.bind(this.fire,this),r=function(e){return function(a){i(e||a.name,a.data)}};t.removeAllListeners(this),t.on("board.paging.settings",r("pagingData.ready"),this),t.on("board.paging.settings.retrieved",r("pagingData.retrieved"),this),t.on("page.move.to",r("refresh"),this),t.fire("board.paging.settings.retrieve",{})},"bus pagingData.retrieved":function(e,a){var t=this._calculatePaging(a);this.fire("dataBind",t),this.fire("paging.ready",t)},"bus paging.ready:last + pagingData.ready":function(e,a,t){var i=this._calculatePaging(t);(a.pagesX!=i.pagesX||a.pagesY!=i.pagesY)&&this.fire("refresh")},"bus boardBus.ready:last+page.switched":function(e,a,t){a.fire("page.switched",t)},"bus boardBus.ready+destroy":function(e,a){a.removeAllListeners(this)},_calculatePaging:function(e){var a={pagesX:e.x.totalPages||1,pagesY:e.y.totalPages||1,current:e.page};return a}});return t});
define('tau/ui/extensions/board.paging/ui.extension.board.paging',["Underscore","jQuery","tau/core/extension.base"],function(e,a,r){return r.extend({"bus afterRender":function(e){var r=e.data.element,t=this;r.delegate(".i-role-page","click",function(){var e=a(this),n=e.data(),i={x:n.x,y:n.y};r.find(".i-role-page").removeClass("tau-boardpaging__page_current_true"),e.addClass("tau-boardpaging__page_current_true"),t.fire("page.switched",i)})}})});
define('tau/ui/templates/board.paging/ui.template.board.paging',["tau/core/templates-factory"],function(a){var e={name:"board.paging",engine:"jqote2",markup:['<div class="tau-boardpaging">','<div class="tau-boardpaging__holder">',"<% if (this.pagesY > 1 || this.pagesX > 1){ %>","<table>","<% for (var y=0; y<this.pagesY; y++){ %>","<tr>","<% for (var x=0; x<this.pagesX; x++){ %>",'<td class="tau-boardpaging__page i-role-page',"<% if (this.current.x == x && this.current.y == y){ %>"," tau-boardpaging__page_current_true","<% } %>",'" data-x="<%= x %>" data-y="<%= y %>">',"</td>","<% } %>","</tr>","<% } %>","</table>","<% } %>","</div>","</div>"],dependencies:[]};return a.register(e)});
define('tau/components/component.board.paging',["Underscore","tau/components/component.creator","tau/models/board.paging/model.board.paging","tau/ui/extensions/board.paging/ui.extension.board.paging","tau/ui/templates/board.paging/ui.template.board.paging"],function(e,n,a,t,o){return{create:function(e){var r={extensions:[a,t],template:o};return n.create(r,e)}}});
define('tau/ui/extensions/board.plus.container/ui.extension.board.plus.container.view',["Underscore","jQuery","tau/views/view.container"],function(i,t,e){return e.extend({"bus initialize":function(i,t){this.fire("configurator.ready",t.context.configurator)},"bus initialize + boardSettings.ready + configurator.ready":function(i,t,e,n){this.startLifeCycle(t,e.boardSettings,n)},"bus refresh":function(){this.destroyChildren(),this.startLifeCycle()},"bus beforeInit + boardSettings.ready":function(t,e,n){var r=n.boardSettings;r.unbind({listener:this}),r.bind({fields:["viewMode","isCustomizeDisabled"],listener:this,callback:i.bind(this.fire,this,"refresh")})},startLifeCycle:function(t,e,n){e=e||this.boardSettings,n=n||this.configurator,this.setDefaultConfig(),i.extend(this.config,(t||{}).data),this.boardSettings=e,this.configurator=n,this.children=[],e.get({fields:["viewMode"],callback:i.bind(function(t){var e=t.viewMode,n=i.filter(this.config.children,function(i){return i.viewMode==e});this.fire("beforeInit",{config:this.config});var r=i.isArray(n)&&i.size(n)>0&&this.config.visible;if(r){var s=this.config.context||{};this.fire("createComponents",{components:n,context:s})}else this.completeInitializationWithoutChildren()},this)})}})});
define('tau/components/component.board.plus.container',["Underscore","tau/components/component.container","tau/ui/extensions/board.container/ui.extension.board.container.events","tau/ui/extensions/board.plus.container/ui.extension.board.plus.container.view"],function(e,n,t,o){return{create:function(a){a.queuedBus=!1;var r={extensions:[t],ViewType:o,template:{engine:"jqote2",name:"board.plus.container",markup:'<div class="tau-board-body-wrapper"></div>'}};return n.create(e.extend(a,r))}}});
define('tau/components/board.new.list/templates/ui.template.fake-list',["tau/core/templates-factory"],function(a){var i={name:"fake-list",engine:"jqote2",markup:['<div class="tau-board-body">','   <div class="tau-coming-soon">',"       <h2><span>List</span></h2>","       <h3>Deep hierarchy. Full inline edit. Drag and drop actions </h3>",'       <div class="tau-bg tau-list-view"></div>',"   </div>","</div>"]};return a.register(i)});
define('tau/components/component.board.plus.fake-list',["tau/components/component.creator","tau/components/board.new.list/templates/ui.template.fake-list"],function(e,t){return{create:function(n){var a={template:t},r=e.create(a,n);return r.fire("dataBind",{}),r}}});
define('tau/ui/extensions/board.plus/ui.board.plus.domWrapper.collapser',["Underscore","jQuery","tau/ui/extensions/board.plus/ui.board.plus.utils","tau/nls/translator"],function(e,a){var l={__getAxisCellHolderSelectors:function(){return[".i-role-header .i-role-cellholder"]},__getXHeaderCollapserSelector:function(){return".tau-x-header .i-role-collapser"},__getAxisCollapserSelector:function(){return".i-role-header .i-role-collapser"},__getParentCellHolder:function(e){return e.closest(".i-role-cellholder")},iterateHeadersItems:function(e){var l=this.__getAxisCellHolderSelectors().join(","),s=this.board.find(l);s.each(function(){var l=a(this),s=l.attr("data-x")?"x":"y",t=l.attr("data-"+s);e({dimension:s,value:t})})},subscribeToAxisCollapser:function(e){var l=this,s=this.board,t=this.__getAxisCollapserSelector();s.on("click",t,function(){var s=l.__getParentCellHolder(a(this)),t=s.attr("data-x")?"x":"y",o=s.attr("data-"+t),i=s.hasClass("tau-collapsed")?"expand":"collapse",r={dimension:t,dimensionId:o,action:i};e(r)})},subscribeToXHeaderCollapser:function(e){var l=this.board;l.on("click",this.__getXHeaderCollapserSelector(),function(){var l=a(this),s=l.hasClass("tau-collapsed")?"expand":"collapse",t={dimension:"axisY",dimensionId:0,action:s};e(t)})},toggleHeaderCollapsing:function(){var e=this.board.find(this.__getXHeaderCollapserSelector());e.toggleClass("tau-collapsed").closest(".i-role-board-body-holder").toggleClass("rows-h-collapsed")},expandAxis:function(e){var l=e.x?"x":"y",s=this.getCellHoldersAxisLineBySliceCoordinates(e);s.removeClass("tau-collapsed_"+l),s.each(function(){var e=a(this);e.hasClass("tau-collapsed_x")||e.hasClass("tau-collapsed_y")||e.removeClass("tau-collapsed")})},collapseAxis:function(e){var a=e.x?"x":"y",l=this.getCellHoldersAxisLineBySliceCoordinates(e);l.addClass("tau-collapsed_"+a),l.addClass("tau-collapsed")},expandCell:function(e,a,l){e.fire("view.axis.collapser.executed.before"),a&&this.expandAxis({x:a}),l&&this.expandAxis({y:l}),e.fire("view.axis.collapser.executed.after");var s="expand",t="board.save.header.collapsing.settings";a&&e.fire(t,{id:a,dimension:"x",setting:s}),l&&e.fire(t,{id:l,dimension:"y",setting:s})}};return l});
define('tau/ui/extensions/board.plus/ui.board.plus.domWrapper',["Underscore","jQuery","tau/core/class","tau/core/event","tau/ui/extensions/board.plus/ui.board.plus.utils","tau/ui/extensions/board.plus/ui.board.plus.domWrapper.collapser","tau/ui/extensions/board.plus/ui.board.plus.dom.utils","tau/core/termProcessor"],function(e,t,a,r,n,i,o,d){var s={cardLayoutFactory:null,cardTemplateName:"board.plus.default.card.customized",init:function(e,t,a,r){this.$el=e,this.board=e,this.urlBuilder=r.getUrlBuilder(),this.templateFactory=r.getTemplateFactory(),this.featuresService=r.getFeaturesService(),this.configurator=r,this.termProcessor=new d,this.definition=t,this.metainfo=a},ANIMATION_CARD_UPDATED:"tau-operation_card_updated",animateWithClass:function(e,t){return o.animated(t,e)},getCellPagingMore:function(e){return e.siblings(".i-role-cell-paging-more")},executeAxisLineUpdate:function(e,t){for(var a=t.suspendAnimation?"":"tau-operation_axis_updated",r=0,n=e.length;n>r;r++){var i=e[r],o=i.$cardEx,d=i.$cardNV;o.replaceWith(d),this.animateWithClass(a,d)}},executeAxisLineRemove:function(e,a){if(e.length){var r=e.find("*");r.each(function(){var e=t(this);e.removeProp("checked"),e.prop("disabled",!0);var a=e.attr("class")||"",r=a.replace(/i-role-/gi,"i-disabled-role-");e.attr("class",r)}),this.getCellPagingMore(a).remove(),a.find(".i-role-card").remove();var n=e.add(a);n.each(function(){var e=t(this),a=e.attr("class")||"";a=a.replace(/i-role-(?!cell\b)/gi,"tau-disabled-role-"),e.attr("class",a).addClass("tau-cellaxis__removed").css("opacity",.3);var r=e.parent(".i-role-cellholder"),n=r.attr("class")||"";n=n.replace(/i-role-(?!cellholder\b)/gi,"tau-disabled-role-").replace(/tau-selected/gi,"tau-disabled-selected"),r.attr("class",n)})}},executeRemove:function(e,a){var r=this,n=t.Deferred();if(e.length){var i=a.suspendAnimation?"":"tau-operation_card_deleted";e.removeClass("i-role-card"),this.animateWithClass(i,e).done(function(){r.executeClear(e),n.resolve()})}else n.reject();return n},executeClear:function(e){this.fire("beforeRemoveCards",e),e.remove()},executeUpdate:function(t,a){return e.map(t,e.bind(function(e){var t=e.$cardEx,r=e.$cardNV;return this.fire("beforeRemoveCards",t),t.replaceWith(r),a.suspendAnimation||t.text()===r.text()||this.animateWithClass(this.ANIMATION_CARD_UPDATED,r),r},this))},replaceCardsFastMethod:function(e,t,a){var r,n=t.first().prev();if(n.size()>0)r=function(){n.after(a)};else{var i=t.last().next();r=i.size()>0?function(){i.before(a)}:function(){e.append(a)}}t.remove(),r()},compareOrderings:function(e,t){if(!this.metainfo.isPrioritizable)return 0;var a=parseFloat(e),r=parseFloat(t),n=this.definition.cells.ordering,i=n&&n.direction&&n.direction.toLowerCase()||"desc";return"desc"===i?a-r:r-a},insert$cardTo$cell:function(e,t,a){var r=e.data("orderingValue"),n=this.getCellPagingMore(t);if(n.size()>0){var i=n.data("nextOrderingValue");if(this.compareOrderings(r,i)>0)return a?(e.appendTo(n),e):null}var o=this.findPriorityPredecessor(r,t);return o.before(e),e},executeAppend:function(e,t){for(var a=t.suspendAnimation?"":"tau-operation_card_added",r=[],n=0,i=e.length;i>n;n++){var o=e[n],d=o.$card,s=this.insert$cardTo$cell(d,o.$cell,t.forceAppend);s&&r.push(s),this.animateWithClass(a,d)}return r},findPriorityPredecessor:function(a,r){var n={stub:!0,before:function(e){r.append(e)}},i=r.find(".i-role-card");return e.chain(i).map(function(e){return t(e)}).filter(e.bind(function(e){return this.compareOrderings(a,e.data("orderingValue"))<0},this)).first().value()||n},isListMode:function(){return this.isNewListMode()||"list"==this.definition.viewMode},isNewListMode:function(){return"newlist"==this.definition.viewMode},cellHasCards:function(e){var a=t(e).find(".i-role-card");return a.length>0},getCellsEmptyStatuses:function(a){var r=this,n=e.reduce(t(a),function(e,t){return e.push({$cell:t,emptyBeforeAdd:!r.cellHasCards(t)}),e},[]);return n},getCardBySliceId:function(e){return this.getCardBySliceIdInTarget(e,this.board)},getCardBySliceIdInTarget:function(e,t){return t.find(".i-role-card[data-id="+e+"]")},getCellHoldersBySliceCoordinatesInTarget:function(t,a){var r=e.map(t,function(e,t){return"[data-"+t+"="+e+"]"});return a.find(".i-role-cellholder"+r.join(""))},getCellHoldersAxisLineBySliceCoordinates:function(e){return this.getCellHoldersBySliceCoordinatesInTarget(e,this.board)},getCellsBySliceCoordinatesInTarget:function(t,a){var r=e.map(t,function(e,t){return"[data-"+t+"="+e+"]"});return a.find(".i-role-cell"+r.join(""))},getCellsAxisLineBySliceCoordinates:function(e){return this.getCellsBySliceCoordinatesInTarget(e,this.board)},getAxesHeaders:function(e){var t=".i-role-header";return e&&(t+="[data-dimension="+e+"]"),this.board.find(t)},getAxesCells:function(){return this.board.find(".i-role-header .i-role-cell")},updateAxisCellMetaInfo:function(e,a,r){var n=e.children(".tau-cards-count"),i=a.limit,o=a.count,d=a.title,s=a.dimension,l="";i==o&&(l="tau-axis-limit_warning_"+s),o>i&&(l="tau-axis-limit_overhead_"+s),""===i&&(l="tau-axis-limit_"+s);var c=r.closest(".i-role-cellholder");c.removeClass("tau-axis-limit_"+s+" tau-axis-limit_warning_"+s+" tau-axis-limit_overhead_"+s),c.addClass(l);var u;n.length?u=n.text():(n=t('<div class="tau-axiscell__item tau-cards-count"></div>'),e.append(n),u="");var f=""===i?"":" of "+i,h=o+f;return h!=u&&n.html("<span>"+h+"</span>"),n.attr("title",d),n},updateAxesMetaInfo:function(a,r){var n=function(t){var n=e.find(a,function(e){return e.x==t.x&&e.y==t.y}),i=e.reduce(r,function(a,r){var n=parseInt(r[t.x],10),i=parseInt(r[t.y],10);return a="",e.isNumber(n)&&!e.isNaN(n)?a=n:e.isNumber(i)&&!e.isNaN(i)&&(a=i),a},""),o={count:0,title:"",limit:i,dimension:t.x&&"x"||t.y&&"y"};return n&&(o=e.reduce(n.counts,function(e,t){e.count+=t.count;var a=e.title?" / ":"";return e.title+=a+this.termProcessor.getTerm(t.type,"names")+": "+t.count,e}.bind(this),o)),o}.bind(this),i=this.getAxesCells();e.each(i,function(a){var r=t(a),i=e.pick(r.data(),"x","y"),o=n(i),d=this.getCellsAxisLineBySliceCoordinates(i),s=this.updateAxisCellMetaInfo(r,o,d);s.toggle(o.count>0||""!==o.limit)},this)},getCardByPositionOrLast:function(e){var t=this.board.find(".i-role-card");return e<t.size()?t.eq(e):t.last()},getGrid:function(){return this.board.find(".i-role-grid")},getCards:function(){return this.getGrid().find(".i-role-card")},hasDataItemInCoordinates:function(e,t){var a=this.getCellHolderByCoordinates(t),r=this.getCardBySliceIdInTarget(e.id,a);return 0!==r.size()},applyCellPagingUpdate:function(e){for(var a=this,r=a.getAppendedCardsForCell(e.$cell),n=t(),i=r.size(),o=0;i>o;o++){var d=r.eq(o),s=d.data("id"),l=e.$cards.is(".i-role-card[data-id="+s+"]");l&&(n=n.add(d))}n.remove()},getAppendedCardsForCell:function(e){return this.getCellPagingMore(e).find(".i-role-card")},getAxisCellByCoordinate:function(e){return this.board.find("#"+n.generateId(e))},getCellByCoordinate:function(t){var a=this.isListMode(),r=a?{x:"null",y:"null"}:e.clone(t);return r.x=r.x||"null",r.y=r.y||"null",this.board.find("#"+n.generateId(r))},getCellHolderByCoordinates:function(e){return this.getCellByCoordinate(e).parent()},renderCardWithLayout:function(e,t){var a=this.templateFactory.get(this.cardTemplateName);return a.bindPure({},n.getCardRenderData(e,t,this.configurator))},renderCardAsText:function(e,a){return t.when(a||this.getCardLayout(e)).then(this.renderCardWithLayout.bind(this,e))},renderCardAsHtml:function(e){return t.when(this.renderCardAsText(e)).then(t)},$createAxisMark:function(e){var t=this.templateFactory.get("boardplus.cell.axis.item"),a=n.convertCellAxisData({dynamic:{items:[e]}});return a.dynamic=!0,t.bind({},a)},applyCardsBatchAdd:function(a){var r=this;a=e.defaults(a,{options:{forceAppend:!1},items:[]});var n=a.options,i=a.items,o=e.chain(i).map(function(e){return{item:e,coordinates:{x:e.x,y:e.y}}}).filter(function(e){return!r.hasDataItemInCoordinates(e.item.data,e.coordinates)}).map(function(e){var t=e.item;return r.renderCardAsHtml(t.data).then(function(a){return{affectedDataItem:t.data.data,cell:r.getCellByCoordinate(e.coordinates),card:a}})}).value();return t.whenList(o).then(function(){var a=e.chain(arguments),i=a.map(function(e){return e.cell}).filter(function(e){return e.length}).compact().value(),o=a.map(function(e){return e.affectedDataItem}).unique(function(e){return e.id+e.type}).value(),d=a.map(function(e){return{$card:e.card,$cell:e.cell}}).value();return t.when(r.executeAppend(d,n)).then(function(e){return{$affectedCells:i,cards:e,affectedDataItems:o}})})},applyCardsBatchRemove:function(a){for(var r=a.options,n=a.items,i={},o=[],d=n.length,s=t(),l=0;d>l;l++){var c=n[l],u=c.data.data;i[u.id+u.type]=u;var f=this.getCardBySliceId(c.data.id);s=s.add(f)}return s.each(function(e,a){var r=t(a).closest(".i-role-cell");r.length&&o.push(r)}),t.when(this.executeRemove(s,r)).then(function(){return{$affectedCells:o,affectedDataItems:e.values(i)}})},applyCardsBatchUpdate:function(a){var r="tauselectable",n=this;a=e.defaults(a,{options:{forceAppend:!1},items:[]});var i=a.options,o=a.items,d=o[0].data.id,s=this.getCardBySliceId(d),l=this.isListMode()?[o[0]]:o,c=e.filter(l,function(e){return!e.notInSlice}),u=e.any(c.slice(1),function(e){return d!==e.data.id});if(u)throw new Error("DEBUG INFO: Multiple IDs in batch update are not supported");var f=e.map(c,function(a){return t.when(n.renderCardAsHtml(a.data)).then(function(i){var o={x:a.x,y:a.y},s=n.getCellByCoordinate(o),l=n.getCellHolderByCoordinates(o),c=n.getCardBySliceIdInTarget(d,l);i.data(r,t.extend({},c.data(r)));var u=c.attr("class")&&c.attr("class").split(/\s+/),f=e.filter(u,function(e){return 0===e.indexOf("i-role-permanent-")});e.each(f,function(e){i.addClass(e)});var h=0,p=0,m=a.data.hasOwnProperty("orderingValue");m&&(h=a.data.orderingValue,p=c.data("orderingValue"));var g={cell:s,affectedDataItem:a.data.data};return c.size()>0&&0===n.compareOrderings(p,h)?(g.cardToDelete=c.eq(0),g.cardToUpdate={$cardNV:i,$cardEx:c}):g.cardToAdd={$card:i,$cell:s},g})});return t.whenList(f).then(function(){var a=[],r=[],o=[],d=[];e.each(arguments,function(e){r.push(e.affectedDataItem),e.cell&&a.push(e.cell),e.cardToDelete&&(s=s.not(e.cardToDelete)),e.cardToUpdate&&o.push(e.cardToUpdate),e.cardToAdd&&d.push(e.cardToAdd)}),r=e.unique(r,function(e){return e.id+e.type});var l=n.executeClear(s),c=n.executeUpdate(o,i),u=n.executeAppend(d,i);return t.when(l,c,u).then(function(t,n,i){return{$affectedCells:a,cards:e.union(n,i),affectedDataItems:r}})}).then(e.bind(function(e){return this.fire("afterUpdateCards",e),e},this))},applyAxisBatchAdd:function(a){a=e.defaults(a,{options:{force:!1},items:[]});for(var r=a.items,n=[],i={},o=r.length,d=0;o>d;d++){var s=r[d],l=s.data.data;i[l.id+l.type]=l;var c=t("<div/>");c.data(s.data),n.push(c)}return{$affectedCells:n,affectedDataItems:e.values(i)}},applyAxisBatchUpdate:function(a){var r=this;a=e.defaults(a,{options:{forceAppend:!1},items:[]});for(var n,i=a.options,o=a.items,d=[],s={},l=[],c=function(e,t){if(0===t)n=e;else if(n!==e)throw new Error("DEBUG INFO: Multiply IDs in batch update are not supported")},u=r.isListMode()?0:o.length,f=[],h=0;u>h;h++){var p=o[h];c(p.data.id,h);var m=p.data.data;s[m.id+m.type]=m;var g=p.location.toLowerCase().charAt(0),v={};v[g]=p[g];var C=r.getAxisCellByCoordinate(v);f.push(C);var y=C.find(".i-role-axis-item"),x=r.$createAxisMark(p.data);d.push({$cardNV:x,$cardEx:y}),l.push(x)}return t.when(this.executeAxisLineUpdate(d,i)).then(function(){return{$affectedCells:f,cards:l,affectedDataItems:e.values(s)}})},_getAffectedCellsForItemDuringBatchRemoveAxis:function(a){var r=a.location.toLowerCase().charAt(0),n=this.getGrid(),i=this,o=function(a,r,n){var o=e.filter(i.board.find(".i-role-cell"),function(r){return e.chain(a.data.data.ids).map(function(e){return'[data-ids*="'+e+'"]'}).filter(function(e){return t(r).find(e).length}).value().length}),d=e.chain(o).map(function(e){return t(e).data(r)}).map(function(e){return n.find('[role="i-role-cell",data-'+r+'="'+e+'"]')}).flatten().value();return{$axisCell:t(o),$cells:t(d)}},d=function(e,t,a){var r={};return r[t]=e.data.id,{$axisCell:this.getAxisCellByCoordinate(r),$cells:this.getCellsBySliceCoordinatesInTarget(r,a)}},s={entitystate:e.bind(o,this),priority:e.bind(o,this),"default":e.bind(d,this)},l=s[a.data.type.toLowerCase()]||s["default"];return l(a,r,n)},applyAxisBatchRemove:function(a){a=e.defaults(a,{options:{},items:[]});var r=a.items,n=this,i=e.chain(r).map(function(e){var t=e.data.data;return{itemData:t,uniqueKey:t.id+t.type,affectedCells:n._getAffectedCellsForItemDuringBatchRemoveAxis(e)}}),o=i.map(function(t){return e.flatten(t.affectedCells.$cells)}).flatten().value(),d=i.map(function(t){return e.flatten(t.affectedCells.$axisCell)}).flatten().value(),s=e.map(o,function(e){return t(e)}),l=i.map(function(e){return e.itemData}).value();return t.when(this.executeAxisLineRemove(t(d),t(o))).then(function(){return{$affectedCells:s,affectedDataItems:l}})},highlightAxesLines:function(e){for(var a=t(),r=t(),n=this,i=0,o=e.length;o>i;i++){var d=e[i],s={};s[d.location.charAt(0).toLowerCase()]=d.data.id;var l=this.getAxisCellByCoordinate(s);if(1===l.length){a=a.add(l);var c=this.getCellHoldersAxisLineBySliceCoordinates(s);r=r.add(c)}}a.length&&t.scrollTo(a.eq(0),{onAfter:function(){n.animateWithClass("tau-axis_highlighted",r)}})},applyCardsBatchMove:function(a){var r=t.Deferred(),i=this;if(!a.targetCellCoordinates)throw new Error("Target cell coordinates are not provided for move operation");a=e.defaults(a,{options:{forceAppend:!1},items:[]});var o=a.targetCellCoordinates,d=a.options,s=[],l=[];e.each(a.items,function(e){1===e.length&&e[0].x==o.x&&e[0].y==o.y?s.push(e[0]):l.push(e)});var c=e.sortBy(s,function(e){return e.data.orderingValue||0}),u=[],f=[],h=[],p="",m=t(),g={},v="tauselectable";return t.whenList(e.map(c,function(e){return i.renderCardAsText(e.data).then(function(a){var r=e.data.data.cardData.id,o=n.getLatestCardId(r);f.push(o),e.domId=o;var d=i.getCardBySliceId(e.data.id);return d.size()&&(m=m.add(d),g[o]=t.extend({},d.data(v))),a})})).done(function(){if(e.each(arguments,function(e){p+=e}),c.length){var o=e.pick(c[0],"x","y"),s=i.getCellByCoordinate(o);s.size()&&(u=[s],i.replaceCardsFastMethod(s,m,p))}t.whenList(e.map(f,function(a){var r=n.getDomNodeByIdFast(u[0],a),o=t.Deferred();if(r)o.resolve(t(r));else{var d=e.find(c,function(e){return e.domId===a});o=i.renderCardAsHtml(d.data)}return o.done(function(e){e.data(v,g[a]),h.push(e)}),o})).done(function(){var n=e.map(l,function(){return t.Deferred()});t.whenList(n).then(function(){var t=e.toArray(arguments),a=u,n=h;e.each(t,function(e){a=a.concat(e.$affectedCells),n=n.concat(e.cards)}),d.suspendAnimation||e.each(n,e.bind(i.animateWithClass,i,i.ANIMATION_CARD_UPDATED)),r.resolve({$affectedCells:a,cards:n})}),e.each(l,function(e,t){i.applyCardsBatchUpdate({items:e,layout:a.layout}).then(n[t].resolve)})})}),r},getUnsortedCardsHolder:function(e){return e.next(".i-role-cell-paging-more")},createUnsortedCardsHolder:function(){return t(['<div class="i-role-cell-paging-more tau-cell-paging-more">','<div class="i-role-cell-paging-more-link tau-cell-paging-more-link">show more&hellip;</div>',"</div>"].join(""))},getCardLayout:function(e){return this.isNewListMode()&&console.warn("Getting card layout via DomWrapper.getListLayout is not supported anymore"),this.cardLayoutFactory.getCardLayoutByType(e.type.toLowerCase())},findCellById:function(e){return this.$el.find(".i-role-cell#"+e)}};return e.extend(s,i),r.extend(a.extend(s))});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.operations.strategies',["Underscore","jQuery","tau/slice/api.cache.axes.instance"],function(e,t,i){var a={user:"assigneduser"},n={applyCompleteHandler:function(e,t,i){var a=i.operation,r=a.options||{},o=a.location;if(n.evictCache(a),"card"!==o)if(r.force)"added"===a.name?n.highlight(i,t,e,a):n.refresh(e);else if(i.affected$CellsArray.length>0)switch(a.name){case"added":n.generateNotificationMessage(e,a.items);break;case"notinslice":case"deleted":n.generateNotificationMessage(e,null)}},highlight:function(t,i,a,r){var o=t.dataItems;if(e.isArray(o)&&o[0]&&e.contains(["project","team"],o[0].type.toLowerCase())){var s=i.getAppStateStore(),c=i.getApplicationContextService();c.appendToContext(o[0].type.toLowerCase(),e.pluck(o,"id"),s).then(function(){a.fire("operation.highlightItems",r.items)})}else n.refresh(a,r.items)},refresh:function(e,t){t&&e.fire("operation.highlightItems",t),e.fire("refresh")},generateNotificationMessage:function(i,a){var n=this,r=t(["<h3>","Attention","</h3>","<p>","The lanes have been updated, please, ",'<a href="#" class="i-role-refresh-action">refresh the View.</a>.',"</p>"].join(""));r.delegate(".i-role-refresh-action","click",e.bind(function(e){var t=this;return e.preventDefault(),n.refresh(t,a),!1},i)),i.fire("notification",{$node:r,type:"warning"})},evictCache:function(t){e.forEach(t.items,function(e){var t=(e.data.type||e.data.data.type).toLowerCase(),n=a[t]||t;i.evict(n)})}};return n});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.operations',["Underscore","jQuery","tau/core/extension.base","tau/ui/extensions/board.plus/ui.board.plus.domWrapper","tau/ui/extensions/board.plus/ui.extension.board.plus.operations.strategies","tau/ui/extensions/board.plus/ui.board.plus.utils"],function(e,t,a,o,i,n){var r={added:"Add",updated:"Update",cascade:"Update",deleted:"Remove",notinslice:"Remove"};return a.extend({resetLifecycle:!0,locationNamesMap:{card:"Cards",x:"Axis",y:"Axis"},operationNamesMap:r,allowedOperationNames:e.keys(r),createDomWrapper:function(){throw new Error("Create [DomWrapper] instance in component according to view mode specific")},"bus configurator.ready + definition.ready + model.cells.metaInfo.ready + view.skeleton.built + board.paging.settings + cardLayoutFactory.ready":function(e,t,a,o,i,n,r){var s=this.createDomWrapper(i.element,t,a,o);s.getPagingSettings=function(){return n},s.cardLayoutFactory=r,this.fire("domWrapper.ready",s)},"bus domWrapper.ready:last > view.cell.skeleton.element.beforeUpdate":function(e,a,o){a.applyCellPagingUpdate({$cell:o.cell,$cards:t(o.content)})},"bus domWrapper.ready:last + comet.tick":function(e,t,a){this.fire("operation.execute",a.data)},"bus domWrapper.ready:last + operation.execute":function(e,t,a){this.executeCometOperation(t,a)},"bus configurator.ready:last + operation.execute.done":function(e,t,a){this._onOperationExecuted(t,a)},executeCometOperation:function(e,t){var a=this.createOperation(t);this.isAllowedToExecute(a)&&this.executeOperation(e,a)},createOperation:function(t){var a=t.items,o=e.first(a);return{name:(t.name||o.modification).toLowerCase(),location:this.createLocation(o),items:a,options:t.options||{}}},createLocation:function(e){return e.location?e.location.toLowerCase().replace(/^(\w)axis$/,"$1"):"card"},isAllowedToExecute:function(t){return e.contains(this.allowedOperationNames,t.name)},executeOperation:function(a,o){return this.fire("operation."+o.name,o),o=e.defaults(o,{options:{}}),"cascade"===o.name&&(o.options.suspendAnimation=!0),t.when(e.bind(this.performOperation,this,a,o)()).then(e.bind(this.completeOperation,this,a,o))},performOperation:function(e,t){return e[this.createMethodName(t)](t)},completeOperation:function(e,t,a){var o={operation:t,dataItems:a.affectedDataItems,affected$CellsArray:a.$affectedCells,cards:a.cards||[]};this.notifyUpdatedCells(o),this.reapplySelection(o,e),this.notifyUpdatedCards(o),this.fire("operation.execute.done",o)},_onOperationExecuted:function(e,t){i.applyCompleteHandler(this,e,t)},createMethodName:function(e){return["apply",this.locationNamesMap[e.location],"Batch",this.operationNamesMap[e.name]].join("")},notifyUpdatedCells:function(e){for(var t=e.affected$CellsArray,a=t.length,o=0;a>o;o++){var i=t[o];this.fire("view.cell.skeleton.updated",{element:i})}},reapplySelection:function(e,t){t.isListMode()&&"deleted"===e.operation.name?this._debounceSelectionReapply():this.fire("selection.reapply",{})},notifyUpdatedCards:function(t){this.isCardReBuildOperation(t.operation)&&e.forEach(t.cards,function(e){var t=e.data();this.fire("view.card.skeleton.built",{element:e,data:{id:t.id,type:t.type}})},this)},isCardReBuildOperation:function(e){return n.isCardReBuildOperation(e)},_debounceSelectionReapply:e.debounce(function(){this.fire("selection.reapply",{})},500)})});
define('tau/models/board.plus/model.board.base',["Underscore","tau/components/board.core/models/model.board.core","tau/core/extension.base"],function(e,n,o){return o.extend({init:function(e,o){this._model=o||new n,this._super.apply(this,arguments)},getModel:function(){return this._model}})});
define('tau/components/board.core/models/model.board.plus',["Underscore","jQuery","tau/components/board.core/models/model.board.core","tau/models/board.plus/model.board.slice.extender","tau/services/customize/service.customize.card.layout.factory","tau/models/board.customize.units/const.card.sizes","tau/libs/boardSettings/board.settings.to.definition.translator"],function(e,i,t,o,n,a,s){return t.extend({init:function(){this._super.apply(this,arguments),this.onZoomLevelChanged=e.Callbacks(),this.onPageChanged=e.Callbacks(),this.onSliceInfoRetrieved=e.Callbacks(),this.onBoardPagingSettingsRetrieved=e.Callbacks(),this.onAcidReady=e.Callbacks(),this.onBoardConfigurationReady=e.Callbacks(),this.onViewModeReady=e.Callbacks(),this.onDefinitionReady=e.Callbacks(),this.onPageReady=e.Callbacks(),this.onSliceReady=e.Callbacks(),this.onCardLayoutFactoryReady=e.Callbacks(),this.onBoardDefinitionReady=e.Callbacks(),this.onCacheInvalidated=e.Callbacks(),this._getSliceDeferred=i.Deferred()},_zoomToSize:function(e){var i=a.zoomToSize(e.zoomLevel);return i||1!==e.zoomLevel||(i="min"),i},startLifeCycle:function(e,t){this.updateBoardSettings(t),this._layoutFactory=new n(e,this.getBoardSettings()),this._configurator=e,this.onCardLayoutFactoryReady.fire(this._layoutFactory);var o=i.Deferred();e.getAppStateStore().get({fields:["acid"],callback:function(e){this.onAcidReady.fire(e.acid),o.resolve(e.acid)}.bind(this)});var a=i.Deferred();this.getBoardSettings().get({fields:["x","y","cells","zoomLevel","viewMode","page","focus","selectedMarks","cardSettings","isCustomizeDisabled","user","acid","timelineLocalDateRange","timelineGlobalDateRange","timelineSettings"]}).then(function(e){this.onBoardConfigurationReady.fire(e),this.onViewModeReady.fire(e.viewMode),a.resolve(e)}.bind(this)),i.when(o,a).then(this._boardConfigReady.bind(this))},_boardConfigReady:function(i,t){this._acid=i,this._boardConfig=t,this._updateSlice(),this.onZoomLevelChanged.fire(e.pick(t,"zoomLevel"))},_updateSlice:function(i){this.abortCurrentSlice();var t=this._updateDefinition(i),n={definition:e.deepClone(t)};n.definition.global={acid:this._acid},this._sliceData={slice:this.getSliceFactory().create(n)};var a=new o;a.extend(this._sliceData,this._layoutFactory).done(function(e){this._sliceData=e,this.onSliceReady.fire(e)}.bind(this)),this._getSliceDeferred.resolve(function(){return this._sliceData.slice}.bind(this))},getSliceFactory:function(){return this.getConfigurator().getSliceFactory()},getConfigurator:function(){return this._configurator},_updateDefinition:function(i){var t=this.createDefinition();return this.onDefinitionReady.fire(t),this.onPageReady.fire(e.deepClone(t.page)),this.onBoardDefinitionReady.fire(t,this._boardConfig),i&&i.zoomLevel&&(t.zoomLevel=i.zoomLevel),t},createDefinition:function(){return s.prototype.createDefinition(this._boardConfig)},unbindBoardSettings:function(){this.getBoardSettings()&&this.getBoardSettings().unbind({listener:this})},abortCurrentSlice:function(){this._sliceData&&e.each(this._sliceData,function(e){e.abort()})},getBoardSettings:function(){return this._boardSettings},updateBoardSettings:function(e){this.unbindBoardSettings(),this._boardSettings=e,this._boardSettings.bind({fields:["zoomLevel"],listener:this,callback:this._onZoomLevelChanged.bind(this)}),this._boardSettings.bind({fields:["page"],listener:this,callback:this.onPageChanged.fire.bind(this.onPageChanged)})},onGetSliceInfo:function(){},_onZoomLevelChanged:function(i){i.name||(this.onZoomLevelChanged.fire(e.pick(i,"zoomLevel")),this._boardConfig&&this._forceUpdateSliceOnZoomLevelChanged())},_forceUpdateSliceOnZoomLevelChanged:function(){this._updateSlice()}})});
define('tau/models/board.plus/model.board.plus',["Underscore","tau/models/board.plus/model.board.base","tau/components/board.core/models/model.board.plus","tau/services/customize/service.customize.card.layout.factory","tau/models/board.plus/model.board.slice.extender","tau/ui/extensions/board.plus/ui.extension.board.plus.operations.strategies"],function(e,i,d,t,a,o){return i.extend({init:function(i,t){var a=t||new d;a.onZoomLevelChanged.add(this.fire.bind(this,"model.zoomLevelChanged")),a.onPageChanged.add(function(i){this.fire("page.changed",e.deepClone(i.page))}.bind(this)),a.onSliceInfoRetrieved.add(this.fire.bind(this,"model.sliceInfo.retrieved")),a.onBoardPagingSettingsRetrieved.add(this.fire.bind(this,"board.paging.settings")),a.onAcidReady.add(this.fire.bind(this,"acid.ready")),a.onBoardConfigurationReady.add(this.fire.bind(this,"board.configuration.ready")),a.onViewModeReady.add(this.fire.bind(this,"viewMode.ready")),a.onDefinitionReady.add(this.fire.bind(this,"definition.ready")),a.onPageReady.add(this.fire.bind(this,"page.ready")),a.onBoardDefinitionReady.add(this.fire.bind(this,"board.definition.ready")),a.onBoardDefinitionReady.add(function(e,i){taus.track({"@":["open-board-action"],boardSettings:i,definition:e})}),a.onSliceReady.add(this.fire.bind(this,"slice.ready")),a.onCardLayoutFactoryReady.add(this.fire.bind(this,"cardLayoutFactory.ready")),a.onCacheInvalidated.add(function(){o.generateNotificationMessage(this,[])}.bind(this)),this._super(i,a)},destroy:function(){this.getModel().unbindBoardSettings(),this._super()},"bus configurator.ready:last + boardSettings.ready + start.lifecycle":function(e,i,d){this.getModel().startLifeCycle(i,d.boardSettings)},"bus configurator.ready > slice.ready":function(e,i,d){this.getModel().onGetSliceInfo(d.base,i)},"bus slice.ready:last + before_destroy":function(){this.fire("clearError"),this.getModel().abortCurrentSlice()},"bus slice.ready:last + before_refresh":function(){this.fire("clearError"),this.getModel().abortCurrentSlice()}})});
define('tau/components/board.core/models/model.board.plus.grid',["Underscore","jQuery","tau/components/board.core/models/model.board.plus"],function(e,t,i){var n=i.extend({getViewMode:function(){return"board"},boardSettingsSilentSet:function(t){this.getBoardSettings().get({fields:["page","focus"],callback:function(i){var n=i.page||{},o=i.focus||{},a={page:n,focus:o};e.extend(n,t.page),e.extend(o,t.focus),this.getBoardSettings().set({set:a,isSilent:!0})}.bind(this)})},onGetSliceInfo:function(i){var n=e.deepClone(i.config.definition),o=this.requestSize(i),a=this.requestMarks("x",n,i),s=this.requestMarks("y",n,i);t.when(a,s).done(function(t,i){var a={viewMode:this.getViewMode(),definition:n,zoomLevel:n.zoomLevel||3};a.cardSize=this._zoomToSize(a),a.titleX=t.title,a.titleY=i.title;var s=this.publishSliceInfoEvent(a,t,i);o.done(function(t){e.each(["x","y"],function(e){s[e].isFocus&&(t[e]=s[e].onPage)}),this.publishBoardPagingSettingsEvent(t,s)}.bind(this))}.bind(this))},requestSize:function(i){var n=t.Deferred(),o=function(t){var i=t?t.data:{x:0,y:0};n.resolve(e.deepClone(i))};return i.size().done(o).fail(o),n},_getPageMoveStrategies:function(e){return{page:e,up:function(){this.page.y--},down:function(){this.page.y++},left:function(){this.page.x--},right:function(){this.page.x++}}},moveToPage:function(e,t,i){var n=this._getPageMoveStrategies(e);n[t](),i.boardSettings.set({set:{page:e}})},setPage:function(e,t){e.set({set:{page:t}})},requestMarks:function(i,n,o){var a=function(){this.publishCacheInvalidated(i)}.bind(this),s=this,r=t.Deferred(),u=n.page,c=function(e,t,n){var o={},a=t?s.getAxisPagingObject(i,e.items,u):s.getAxisNullPagingObject();a.isNull=!t,a.isFocus=!!n,o[i]=a,o["marks"+i.toUpperCase()]=a.data,o.title=e.metaInfo?e.metaInfo.name:null,r.resolve(o)}.bind(this),g=function(){var e=s.getSlicePagingArgs(i,u);return n.focus[i].length>0&&(e={id:{$in:n.focus[i]}},u[i]=0),o[i](e,a).fail(function(){c({items:[]},!1,!1)})},f=function(t,a){var r=!o.isUndefinedAxis(i);if(a&&t&&t.items){var d={};e.each(t.items,function(t){e.each(n.focus[i],function(e){e.toLowerCase()==t[i].toLowerCase()&&(d[e.toLowerCase()]=t)})}),t.items=e.values(d),t.items.length&&(u.size[i]=t.items.length)}var l=t.items&&0!==t.items.length,h=u[i]>0||a;if(r&&!l&&h){var v={page:{},focus:{}};return u[i]=0,v.page[i]=0,a&&(v.focus[i]=[],n.focus[i]=[]),g().done(function(e){f(e.data)}),s.boardSettingsSilentSet(v),!1}c(t,r,a)};return g().done(function(e){var t=!1;e&&e.command&&e.command.config&&(t=e.command.config.hasOwnProperty("id")),f(e.data,t)}),r},publishSliceInfoEvent:function(t,i,n){e.extend(t,i),e.extend(t,n);var o={up:t.y.hasPrev,down:t.y.hasNext,left:t.x.hasPrev,right:t.x.hasNext};return t=e.extend(t,{availableDirections:o,page:{x:t.x.currentPage,y:t.y.currentPage}}),t.x.title=t.titleX,t.y.title=t.titleY,this.onSliceInfoRetrieved.fire(t),t},publishCacheInvalidated:function(e){this.onCacheInvalidated.fire(e)},publishBoardPagingSettingsEvent:function(t,i){var n=this;e.each(["x","y"],function(e){if(t[e]){var o=i[e];o.total=t[e],o.totalPages=n.getPagesCountForAxis(t[e],o.maxOnPage)}}),this.onBoardPagingSettingsRetrieved.fire(i)}});return n});
define('tau/models/board.plus/model.board.plus.grid',["Underscore","jQuery","tau/models/board.plus/model.board.plus","tau/components/board.core/models/model.board.plus.grid","tau/models/board.customize.units/const.card.sizes"],function(e,t,s,o){return s.extend({init:function(e,t){var s=t||new o;this._super(e,s)},"bus board.paging.settings:last + board.paging.settings.retrieve":function(e,t){this.fire("board.paging.settings.retrieved",t)},"bus page.move.to + board.paging.settings:last + boardSettings.ready:last":function(e,t,s,o){this.getModel().moveToPage(s.page,t.direction,o)},"bus boardSettings.ready:last + page.switched":function(e,t,s){this.getModel().setPage(t.boardSettings,s)}})});
define('tau/models/board.plus/model.board.cell',["Underscore","jQuery","tau/core/extension.base"],function(e,t,n){return n.extend({"bus slice.ready:last+model.get.cell.content":function(e,t,n){var i=t.base;this.onGetCellContent(i,n)},onGetCellContent:function(e,t){var n=this,i=t.from,r=t.to-t.from+1,a={$take:n.generateExcessTake(r),$skip:i};"null"!==t.x&&(a.x=t.x),"null"!==t.y&&(a.y=t.y),e.cell(a).done(function(e){var i=e.data.items.length>0?e.data.items[0]:{},r=n.preProcessCellResponse(i,t);n.fireCellBasicInfoRetrieved(r)})},"bus model.get.cell.basicInfo":function(e){var t=this,n=e.data;n.x=n.x||null,n.y=n.y||null,n.x&&n.y?(n.x=n.x.toString(),n.y=n.y.toString(),t.fire("model.get.cell.content",n)):t.fire("model.get.axisCell.basicInfo",n)},"bus model.sliceInfo.retrieved:last+model.get.axisCell.basicInfo":function(t){var n=t["model.get.axisCell.basicInfo"].data,i=t["model.sliceInfo.retrieved"].data,r=(n.hasOwnProperty("x"),n.hasOwnProperty("y"),n.x?"X":"Y"),a=i["marks"+r],o=e(a).find(function(e){var t=r.toLowerCase();return e[t]==n[t]});this.fireCellBasicInfoRetrieved({dataItem:o,coords:n})},fireCellBasicInfoRetrieved:function(t){var n=t.dataItem;n.paging=e(t.coords).pick("from","to"),this.fire("model.cell.basicInfo.retrieved",n)},"bus configurator.ready:last + acid.ready:last + before_model.cell.basicInfo.retrieved":function(t,n,i,r){var a=n.getUrlBuilder();e.forEach(r.dynamic.items,function(t){var n=t.data;n.entityRef=a.getNewViewUrl(e.asString(n.id),e.asString(n.type),i)})},fireCardsDataReady:function(e){this.fire("model.cards.data.ready",{cards:e})},preProcessCellResponse:function(t,n){var i=e.defaults(t||{},{dynamic:{items:[]},fixed:{items:[]},x:n.x,y:n.y}),r=e(i.fixed.items).find(function(e){return"cellpaging"===e.type});if(r){var a=n.to-n.from+1,o=i.dynamic.items;i.dynamic.items=o.slice(0,a),r.data=r.data||{},r.data.nextOrderingValue=this.getNextOrderingValue(a,o)}else n.to=n.from+(i.dynamic.items.length-1);return{dataItem:i,coords:n}},getNextOrderingValue:function(e,t){if(e>=t.length)throw"DEBUG: index is out of range. To implement cell paging logic we must query more card items then show to user";return t[e].orderingValue},generateExcessTake:function(e){return e+Math.round(e/4)}})});
define('tau/models/board.plus/model.board.cell.freezable',["Underscore","jQuery","./model.board.cell"],function(e,t,l){return l.extend({"bus start.lifecycle":function(){this.onGetCellContent=t.noop,this.fire("model.get.cell.basicInfo.dump",{dump:{}})},preProcessAggregatedCellItem:function(t){var l=t.coords,n=t.dataItem,a=l.to-l.from+1,s=n.dynamic.items.length;if(a>=s)return t;var o=e(n.fixed.items).find(function(e){return"cellpaging"===e.type});return o?t=this.preProcessCellResponse(n,l):t},processResponse:function(t,l,n){for(var a=t.data.items,s=0,o=a.length;o>s;s++){var i=a[s],d=this.getKey(i);if(l.hasOwnProperty(d)){var c=l[d].dataItem;i.dynamic.items=c.dynamic.items.concat(i.dynamic.items),i.fixed.items=c.fixed.items.concat(i.fixed.items),e.extend(l[d].dataItem,i)}}for(var r=[],u=0;u<n.length;u++){var m=this.preProcessAggregatedCellItem(n[u]),f=this.fireCellBasicInfoRetrieved(m);r=r.concat(f)}this.fireCardsDataReady(r)},getKey:function(e){var t=e.x||"null",l=e.y||"null";return t+"_"+l},"bus model.cells.content.loaded+model.cards.data.ready":function(){var e=this;delete e.onGetCellContent},"bus model.cells.content.loaded+model.get.cell.basicInfo.dump:last+model.get.cell.basicInfo.end":function(t){var l=t["model.get.cell.basicInfo.dump"].data.dump,n=e.values(l),a=t["model.cells.content.loaded"].data;this.processResponse(a,l,n)},"bus slice.ready:last+model.get.cell.basicInfo.dump:last+model.get.cell.basicInfo.end":function(t){var l=t["model.get.cell.basicInfo.dump"].data.dump,n=e.values(l),a=this,s={},o={},i=0;e.each(n,function(e){var t=e.coords.to-e.coords.from+1;t>i&&(i=t);var l=e.dataItem;l.x&&"null"!=l.x&&(s[l.x]=1),l.y&&"null"!=l.y&&(o[l.y]=1)}),s=e.keys(s),o=e.keys(o);var d={};s.length&&(d.x={$in:s}),o.length&&(d.y={$in:o}),d.$skip=0,d.$take=a.generateExcessTake(i),a.fire("model.execute.cell.query",{query:d})},skipQueryCells:function(){this.fire("model.cells.content.loaded",{data:{items:[]}})},queryCells:function(e,t){e.cell(t).done(function(e){this.fire("model.cells.content.loaded",e)}.bind(this)).fail(this.skipQueryCells.bind(this))},"bus slice.ready:last+model.execute.cell.query":function(e,t,l){var n=t.base,a=l.query;this.queryCells(n,a)},generateDefaultContent:function(e){var t={x:e.x.toString(),y:e.y.toString(),dynamic:{items:[]},fixed:{items:[]}};return t},"bus model.get.cell.basicInfo.dump:last+model.get.cell.basicInfo":function(e){var t=e["model.get.cell.basicInfo.dump"].data.dump,l=e["model.get.cell.basicInfo"].data;if(l.x&&l.y){var n=this.generateDefaultContent(l);t[this.getKey(n)]={dataItem:n,coords:l}}}})});
define('tau/ui/templates/board.plus/ui.template.boardplus.show-more',["tau/core/templates-factory","tau/nls/translator"],function(e,t){var a={name:"boardplus.show-more",engine:"jqote2",markup:['<div class="i-role-tau-always-last i-role-cell-paging-stack tau-show-more-cards-trigger"><button>'+t("show more&hellip;")+"</button></div>"],dependencies:[]};return e.register(a)});
define('tau/ui/extensions/board.plus/cells.paging.size.config',[],function(){return{0:[100,100,100],1:[100,50,25],2:[50,25,25]}});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.cells.paging',["Underscore","jQuery","tau/core/class","tau/core/extension.base","tau/ui/behaviour/common/ui.behaviour.progressIndicator","tau/nls/translator","tau/ui/templates/board.plus/ui.template.boardplus.show-more","tau/ui/extensions/board.plus/cells.paging.size.config"],function(e,i,t,l,n,a,s,r){var o=function(e,i){var t=0;return i>1&&5>i?t=1:i>=5&&(t=2),r[e][t]},c=function(){return r[0][0]},g=function(e,t){var l=e.clone().attr("id",!1),n=i('<div style="visibility: hidden; display: block; position: absolute;" class="tau-ui-size-'+t+'"/>');l.appendTo(n),i("body").append(n);var a=l.outerHeight(),s=l.outerWidth();return n.remove(),{height:a,width:s}},u=t.extend({init:function(e){this.template=s,this.$cellHolder=e.parent(),this.alreadyBuiltIn=this.getTrack().length>0,this.showPagingTriggerInTrack=!0},getTrack:function(){return this.$cellHolder.children(".i-role-cell-paging-more")},getTrigger:function(){return this.$cellHolder.find(".i-role-cell-paging-stack")},isEnabled:function(){return this.alreadyBuiltIn},disable:function(){this.getTrack().css("visibility","hidden"),this.getTrigger().css("visibility","hidden")},remove:function(){this.getTrack().remove(),this.getTrigger().remove()},enable:function(e){var t=this.$cellHolder,l=this.getTrack();if(0===l.length){var n=this.showPagingTriggerInTrack?'<div class="i-role-cell-paging-more-link tau-cell-paging-more-link">'+a("show more&hellip;")+"</div>":"";l=i(['<div class="i-role-cell-paging-more tau-cell-paging-more">',n,"</div>"].join("")).data(e).appendTo(t)}var s=this.getTrigger();0===s.length&&(s=this.template.get().bind({},{}).appendTo(i(".i-role-cell",t))),s.css("visibility","visible"),l.css("visibility","visible")}}),d=u.extend({init:function(e){this._super(e),this.template=s,this.showPagingTriggerInTrack=!1},setShowMoreTriggerDimensions:function(e){var i=e.closest(".i-role-board-body-holder");if(i.hasClass("i-role-board-body-holder")){var t=i.hasClass("tau-ui-size-min"),l=!t&&i.hasClass("tau-ui-size-xl");if(!t&&!l){var n=i.data("zoomSize"),a=e.parent().find(".i-role-card").last();a.length&&e.css(g(a,n))}}},enable:function(e){this._super(e),this.setShowMoreTriggerDimensions(this.getTrigger())}}),f=d,h=function(e,i){var t=e[i];return t&&t.types&&t.types.length>0};return l.extend({lifeCycleCleanUp:function(){this.resetSubscriptions()},fireModelGetCellBasicInfo:function(i){var t=e.deepClone(i);e.has(t,"x")&&(t.x=null===t.x?"null":t.x),e.has(t,"y")&&(t.y=null===t.y?"null":t.y),this.fire("model.get.cell.basicInfo",t)},"bus boardSettings.ready":function(i){var t=this,l=i.data.boardSettings;l.get({fields:["x","y","zoomLevel","viewMode","collapse"],callback:function(i){var l=0;"list"!==i.viewMode&&(h(i,"x")&&++l,h(i,"y")&&++l);var n=i.zoomLevel,a=i.collapse||{x:[],y:[]},s=o(l,n);t.fire("cell.paging.settings",{amountOfAxes:l,zoomLevel:n,pageSize:s,maxPageSize:c(),collapse:a,getPageSize:function(i){var t=this.pageSize;return(-1!==e(this.collapse.x).indexOf(i.x)||-1!==e(this.collapse.y).indexOf(i.y))&&(t=this.maxPageSize),t}})}})},"bus overview.cells.skeletons.ready:last > view.cell.skeleton.updated":function(e,i,t){this._moveAlwaysVisibleToEnd(t.element)},"bus view.card.batch.move.$successCards":function(e,i){if(i.length>0){i[0].parent()}},"bus overview.board.ready + cell.paging.settings":function(e,i,t){t.pageSize=c(),this.fire("cell.paging.settings",t)},"bus overview.cells.skeletons.ready:last+cell.paging.settings:last+cell.paging.byFilter":function(e,i,t,l){var n=this;n.triggerPagingOnCells(l.filter,i.cells,t)},triggerPagingOnCells:function(i,t,l){var n=this,a=e(t).filter(function(e){var t=e.element,l=t.data();return l.hasOwnProperty("x")&&l.hasOwnProperty("y")&&i(l)});e(a).each(function(e){var i=e.element,t=i.data(),a=l.getPageSize({x:t.x,y:t.y}),s=i.find(".i-role-card").size(),r=new f(i),o=r.isEnabled();if(o&&a>s){var c={x:t.x,y:t.y,from:s,to:a};r.disable(),n.fireModelGetCellBasicInfo(c)}})},"bus cell.paging.settings:last+view.cellSlot.built":function(e,i,t){var l=t.data;l.from=0,l.to=i.getPageSize(l)-1,this.fireModelGetCellBasicInfo(l)},"bus view.cell.skeleton.built":function(i){var t=i.data,l=t.data,n=t.element,a=e(l.fixed.items).find(function(e){var i=e.type||"";return"cellpaging"===i.toLowerCase()}),s=new f(n);a?s.enable(a.data):s.remove()},"bus view.skeleton.built:last + cardsFullyLoaded":function(e,t){var l=t.element.find(".i-role-cell");l.each(function(){var e=i(this),t=new f(e);t.setShowMoreTriggerDimensions(t.getTrigger())})},"bus cell.paging.settings:last + view.skeleton.built":function(e,t,l){var a=this,s=l.element,r=function(e){a.fire("paging.cell.show.more",{});var i=e.data(),l=e.children(".i-role-card").size();new f(e).disable(),n.get(e).show(),e.parent().css("opacity",.5),a.fireModelGetCellBasicInfo({x:i.x,y:i.y,from:l,to:l+(t.getPageSize(i)-1)})},o=function(){var e=i(this).parent(".i-role-cell-paging-more").siblings(".i-role-cell");r(e)},c=function(){var e=i(this).parent(".i-role-cell");r(e)};s.delegate(".i-role-cell-paging-more-link","click",o),s.delegate(".i-role-cell-paging-stack","click",c)},"bus overview.board.ready:last > view.cell.skeleton.built":function(e,i,t){n.get(t.element).hide(),t.element.parent().css("opacity",1),this.fire("view.cell.skeleton.updated",t)},"bus overview.board.ready:last > view.cell.skeleton.element.beforeUpdate":function(e,i,t){t.content.css("opacity",.15)},"bus scrollManager.ready:last > overview.board.ready:last > view.cell.skeleton.element.afterUpdate":function(i,t,l,n){var a=n.content;a.size()>0&&e.defer(function(){t.scrollToVisibility(a.last(),{axis:"y",duration:1e3,easing:"easeInSine",offset:{top:20},onAfter:function(){a.animate({opacity:1},"slow","easeOutBounce")}})})},_moveAlwaysVisibleToEnd:function(e){var t=i(".i-role-tau-always-last",e).detach();e.append(t)}})});
define('tau/ui/extensions/board.plus/layout/size.calculator-board',["Underscore","jQuery"],function(e,t){return{initializeHeaderCells:function(e){var i=e.model,a=e.$element,r=[],n=function(e){var a="x"===e?"cols":"rows",n="x"===e?"width":"height";return function(){var l=t(this);if(!l.parent().attr("data-is-hidden")){var d=l.data(),h=d[e],c={$el:l,data:d,syncItem:i[a][h],syncSize:n};r.push(c)}}},l=a.find(".i-role-header");return l.filter("[data-dimension=x]").find(".i-role-cell").each(n("x")),l.filter("[data-dimension=y]").find(".i-role-cell").each(n("y")),r},calculateHeight:function(i){var a=i.row,r=a.items[0].$el.parent(),n=r.parent(),l=t.browser.msie?n[0].clientHeight-1:r[0].clientHeight;if(t.browser.msie&&0>l){var d=n.children(),h=e.map(d,function(e){return parseFloat(getComputedStyle(e,null).height)});l=Math.max.apply(null,h)}return l},applyHeight:function(e,t){var i=t.headerCell;i&&i.lastHeight!==e&&(i.lastHeight=e,i.$el.height(e))},calculateWidth:function(e){var t=e.ctx,i=e.col.cardsInRow,a=e.col.extraWidth,r=t.getCardWidth(e.col);return i*r+a},applyWidth:function(e,t){var i=t.headerCell;i&&i.lastWidth!==e&&(i.lastWidth=e,i.$el.width(e))}}});
define('tau/ui/extensions/board.plus/layout/ui.board.plus.layout',["Underscore","jQuery","tau/core/class","tau/ui/extensions/board.plus/layout/size.calculator-board"],function(t,e,i,n){var s=i.extend({init:function(t){this.sizeCalculator=t||n},setConfig:function(e){this.config=e,t.defaults(this.config,{useFixedColumnSizes:!1,columnSizes:{}}),this.setSizes(e.sizes)},isColumnCollapsed:function(t){return this.cols[t].isCollapsed},setFixedColumnSize:function(e){var i=this;t.extend(this.config.columnSizes,e),t(e).chain().keys().each(function(t){var e=i.cols[t];e.extraWidth=0})},getFixedColumnSize:function(t){return!this.config.useFixedColumnSizes||this.isColumnCollapsed(t)?null:this.config.columnSizes[t]||null},resolveColumnSize:function(t){var e=this.getFixedColumnSize(t);if(!e){var i=this.cols[t],n=i.items[0].$el,s=this.getItemZoomLevelOrDefault(i.isCollapsed),r=this.getSizeInfo(s).width;e=n.width()/r}return Math.floor(e)},setSizes:function(e){t.forEach(e,function(e){t.defaults(e,{cardsInRowMin:0,cardsInRowMax:99999,clientColsMin:99999,clientRowsMin:99999})}),this.config.sizes=e},getSizeInfo:function(t){return this.config.sizes[t]},setCurrentZoomLevel:function(t){return t=t||this.currentZoom||1,t in this.config.sizes||(t=5),this.currentZoom=t,this.currentZoom},getCurrentZoomLevel:function(){return this.currentZoom||1},getColumnsCount:function(){return t.keys(this.cols).length},getItemZoomLevelOrDefault:function(t){return t?"collapsed":this.getCurrentZoomLevel()},setElement:function(t){this.$el=t,this.$grid=t.find(".i-role-grid"),this.cells=[],this.rows={},this.cols={},this.headerCells=[];var e=0;this.padding=2*this.config.padding||14,this.scrollWidth=e+this.padding,this.cellBorderWidth=0,this.initializeGridModel()},refreshElement:function(){this.setElement(this.$el)},initializeGridModel:function(){var i=this.$grid.find(".i-role-cell"),n=this;i.each(function(){var t=e(this),i=t.parent();if("none"!==i.css("display")){var s=i.hasClass("tau-collapsed_x"),r=i.hasClass("tau-collapsed_y"),o=t.data(),a={$el:t,cardsNum:t.find(".i-role-card").length,isCollapsed:s,data:o,width:null,height:null,isHidden:!1},l=n.cols[o.x];n.cols[o.x]=l?l:{x:o.x,items:[],_sizes:[],cardsNum:0,extraWidth:0,isCollapsed:s};var h=n.rows[o.y];n.rows[o.y]=h?h:{y:o.y,items:[],height:null,_sizes:[],cardsNum:0,isCollapsed:r},n.cols[o.x].cardsNum+=a.cardsNum,n.cols[o.x].items.push(a),n.rows[o.y].cardsNum+=a.cardsNum,n.rows[o.y].items.push(a),n.cells.push(a)}}),n.headerCells=n.sizeCalculator.initializeHeaderCells({$element:n.$el,model:t.pick(n,"cols","rows")})},updateSize:function(){this.calculateOptimalSize(),this.justifyWidth(),this.justifyHeight(),this.justifyHeightByHeader(),this.updateCells(),this.updateHeaders()},calculateOptimalSize:function(){var e=this,i=e.getCurrentZoomLevel(),n=this.$grid[0].clientWidth||this.$grid.width(),s=this.$grid[0].clientHeight||this.$grid.height(),r=e.getSizeInfo(i),o=r.width,a=r.height,l=this.scrollWidth,h=this.cellBorderWidth,c=t.values(this.rows).length||1,u=t.values(this.cols).length||1,d=n/Math.min(r.clientColsMin,u)-l,f=Math.floor((d-l-h)/o)||1,g=s/Math.min(r.clientRowsMin,c),m=Math.floor(g/a),C=3,v=this.cells;t.each(v,function(t){var i=e.getSizeInfo(e.getItemZoomLevelOrDefault(t.isCollapsed)),n=e.getCellResizeInfo(t,C,f,m,i);t.height=n.height,t.cardsInCol=n.cardsInCol,t.cardsInRow=n.cardsInRow}),t.each(e.rows,function(e){e.height=t.max(e.items,function(t){return t.height}).height,e.cardsInCol=t(e.items).chain().pluck("cardsInCol").max().value()}),t.each(e.cols,function(e){e.extraWidth=0,e.cardsInRow=t(e.items).chain().pluck("cardsInRow").max().value()}),t.each(v,function(t){t.cardsInRow=e.cols[t.data.x].cardsInRow,t.height=e.rows[t.data.y].height,t.cardsInCol=e.rows[t.data.y].cardsInCol})},beforeRowsHeightRecalculation:function(){},afterRowsHeightRecalculation:function(){},getCellResizeInfo:function(e,i,n,s,r){var o=e.cardsNum,a=r.width,l=r.height,h=a*l,c=o||1,u=Math.sqrt(c*h/i),d=null,f=this.getFixedColumnSize(e.data.x);f?d=f:6!==this.getCurrentZoomLevel()||this.isColumnCollapsed(e.data.x)?(d=t.min([Math.ceil(u/a),n,r.cardsInRowMax]),d=t.max([d,r.cardsInRowMin])):d=1;var g=Math.ceil(c/d);return{height:g*l,cardsInCol:g,cardsInRow:d}},getActualTableWidth:function(){var e=this;return 1+t.reduce(e.cols,t.bind(function(t,e){var i=this,n=i.calculateColumnWidth(e);return t+n+1},e),0)},getTargetColumns:function(e){var i=this,n=t.filter(e,function(t){return!i.getFixedColumnSize(t.x)}),s=t.filter(n,function(t){return!t.isCollapsed});return s.length?s:n},getZoomLevelCardWidth:function(e,i){var n=t.some(i,function(t){return!t.isCollapsed}),s=n?e:"collapsed",r=this.getSizeInfo(s);return r.width},justifyWidth:function(){var e=this,i=e.getCurrentZoomLevel();if(0!=t.values(this.rows).length){var n=this.$grid[0].clientWidth||this.$grid.width(),s=e.getActualTableWidth(),r=n-s;if(!(0>=r)){var o=e.getTargetColumns(e.cols);if(0!==o.length){var a=e.getZoomLevelCardWidth(i,o),l=Math.floor(r/a);if(l>0){var h=e.distributionByCardsCount(o),c=e.translateKoefsToAbsoluteIncrementors(o,h,l);o=e.distributeCardsIncrementation(o,c)}var u=n-e.getActualTableWidth();e.distributeExtraWidthToColumns(o,u)}}}},distributeCardsIncrementation:function(e,i){return t.each(e,function(e,n){var s=i[n];t.each(e.items,function(t){var i=t.cardsInRow+s;t.cardsInRow=i,e.cardsInRow=i})}),e},translateKoefsToAbsoluteIncrementors:function(e,i,n){var s=this,r=[],o=n;for(t(e.length).times(function(t){r[t]=0});o>0;){i=s._normalize(i);var a=o;t.each(i,function(t,e){var i=Math.min(o,Math.round(a*t));r[e]+=i,o-=i}),i.pop()}return r},distributionByCardsCount:function(e){var i=t.reduce(e,function(t,e){return t+e.cardsNum},0);i=i||1;var n=!0,s=t.map(e,function(e){var s=e.cardsNum>0?t(e.items).chain().pluck("cardsNum").max().value()/i:0;return 0!=s&&(n=!1),s});if(n){var r=1/s.length;s=t.map(s,function(){return r})}return s},distributeExtraWidthToColumns:function(e,i){var n=this;if(i>0){var s=e.length||1,r=n._distribute(i,s,Math.floor);t.each(e,function(t,e){t.extraWidth=r[e]})}return e},justifyHeight:function(){var e=this.getCurrentZoomLevel(),i=this.getSizeInfo(e),n=i.height,s=this;t.forEach(this.rows,function(t){t._sizes=[]}),t.forEach(this.cells,function(t){var e=t.cardsInCol,i=Math.ceil(t.cardsNum/t.cardsInRow)||1;if(e>=i){var r=n*i;t.cardsInCol=i,t.height=r}s.rows[t.data.y]._sizes.push(t.height)}),t.forEach(this.rows,function(t){t.height=Math.max.apply(null,t._sizes)}),t.forEach(this.cells,function(t){t.height=s.rows[t.data.y].height})},justifyHeightByHeader:function(){var e=this;t.forEach(this.rows,function(i,n){i.minHeight=null;var s=t.find(e.headerCells,function(t){return t.data.y==n});s&&!s.isCollapsed&&(i.minHeight=s.$el.children().height())}),t.forEach(this.cells,function(t){t.minHeight=e.rows[t.data.y].minHeight})},updateCells:function(){t.each(this.cells,this.iteratorUpdateCell.bind(this))},iteratorUpdateCell:function(t){var e=t.$el,i=this.calculateCellWidth(t);e.css("width",i),t.minHeight&&e.css("min-height",t.minHeight)},calculateCellWidth:function(t){return this.calculateColumnWidth(this.cols[t.data.x])},calculateColumnWidth:function(t){var e=t.cardsInRow,i=t.extraWidth,n=this.scrollWidth,s=this._getCardWidthByColumn(t);return e*s+i+n},_getCardWidthByColumn:function(t){var e=this.getItemZoomLevelOrDefault(t.isCollapsed);return this.getSizeInfo(e).width},updateHeaders:function(){var e=this,i=e.sizeCalculator,n=function(i,n){var s=null===n?"null":n;return t.find(e.headerCells,function(t){return t.data[i]==s})};this.beforeRowsHeightRecalculation(),t.each(e.rows,function(t){var e=i.calculateHeight({row:t}),s=n("y",t.y);i.applyHeight(e,{headerCell:s,row:t})}),this.afterRowsHeightRecalculation(),t.each(e.cols,function(t){var s=i.calculateWidth({col:t,ctx:{getCardWidth:e._getCardWidthByColumn.bind(e)},zoomLevel:e.getCurrentZoomLevel()}),r=n("x",t.x);i.applyWidth(s,{headerCell:r,col:t})})},_distribute:function(t,e,i){var n=[],s=t;i=i||Math.round;for(var r=i(t/e),o=0;e>o;o++)n[o]=s?r:0,s-=r;return n[n.length-1]+=s,n},_normalize:function(e){var i=1/t.reduce(e,function(t,e){return t+e},0);return t.map(e,function(t){return t*i})}});return s});
define('tau/ui/extensions/board.plus/ui.board.plus.decorator.columns-resize',["Underscore","jQuery"],function(e,t){return function(i,s){e.defaults(s,{onResize:t.noop,resetTrigger:t.Deferred});var r=150,o=150,n=150,_=!1,a={__$decreaser:t('<button type="button" class="tau-board-grid-resize-controls__btn tau-board-grid-resize-controls__decreaser">-</button>'),__$increaser:t('<button type="button" class="tau-board-grid-resize-controls__btn tau-board-grid-resize-controls__increaser">+</button>'),__$element:t('<div class="tau-board-grid-resize-controls tau-board-grid-resize-controls_trigger-type-"/>'),__onControlClick:function(e){this.__deactivate(),this.hide(!0),_=!0,this.__$decreaser.is(e.target)&&!this.__$decreaser.is(":disabled")?l.decreaseColSize(this.__showConfig.colIndex):this.__$increaser.is(e.target)&&!this.__$increaser.is(":disabled")&&l.increaseColSize(this.__showConfig.colIndex),setTimeout(function(){_=!1},n)},__onMouseEnter:function(){this.__$element.removeClass("tau-board-grid-resize-controls_hiding"),this.__hideTimeoutId&&(clearTimeout(this.__hideTimeoutId),this.__hideTimeoutId=null)},__onMouseLeave:function(){this.__$element.addClass("tau-board-grid-resize-controls_hiding"),this.hide()},__activate:function(){this.__isActive||(this.__isActive=!0,this.__$element.addClass("tau-active"))},__deactivate:function(){this.__isActive&&(this.__isActive=!1,this.__$element.removeClass("tau-active"))},__setControlsPosition:function(){var e=this.__showConfig.cursorY-this.__$element[0].getBoundingClientRect().top;this.__$element.children().css("top",e)},show:function(e){this.__showConfig=e,this.__$decreaser.attr("disabled",null).removeClass("tau-board-grid-resize-controls__btn__disabled"),this.__$increaser.attr("disabled",null).removeClass("tau-board-grid-resize-controls__btn__disabled"),s.decreaserEnabled(e.x)||(this.__$decreaser.attr("disabled","disabled"),this.__$decreaser.addClass("tau-board-grid-resize-controls__btn__disabled")),s.increaserEnabled(e.x)||(this.__$increaser.attr("disabled","disabled"),this.__$increaser.addClass("tau-board-grid-resize-controls__btn__disabled")),this.__$element.attr("class",function(t,i){return i.replace(/(tau-board-grid-resize-controls_trigger-type-)\w*/g,"$1"+e.triggerType)}),l.showResizer(this.__$element,e.position),this.__setControlsPosition(),this.__activateTimeoutId||(this.__activateTimeoutId=setTimeout(this.__getActivateTimeoutProxy(),r))},__activateTimeout:function(){this.__activateTimeoutId=null,this.__activate()},__getActivateTimeoutProxy:function(){return this.__showTimeoutProxy||(this.__showTimeoutProxy=t.proxy(this,"__activateTimeout")),this.__showTimeoutProxy},hide:function(t){this.__activateTimeoutId?(clearTimeout(this.__activateTimeoutId),this.__activateTimeoutId=null,this.__hideTimeout()):t?this.__hideTimeout():this.__hideTimeoutId||(this.__hideTimeoutId=setTimeout(e.bind(this.__hideTimeout,this),o))},__hideTimeout:function(){this.__hideTimeoutId=null,this.__deactivate(),l.hideResizer(this.__$element)},tryHide:function(e){e(this.__$element)&&this.hide()},destroy:function(){this.__$element.off(".resizer"),this.__$decreaser.remove(),this.__$increaser.remove(),this.__$element.remove()},init:function(){return this.__$element.append(this.__$decreaser,this.__$increaser),this.__$element.on({"click.resizer":e.bind(this.__onControlClick,this),"mouseenter.resizer":e.bind(this.__onMouseEnter,this),"mouseleave.resizer":e.bind(this.__onMouseLeave,this)}),this}}.init(),d={__$element:t('<span class="tau-board-grid-resize-trigger"></span>'),__$triggerA:t('<div class="tau-board-grid-resize-trigger__a"/>'),__$triggerB:t('<div class="tau-board-grid-resize-trigger__b"/>'),__getResizerConfigInternal:function(e,t,i){return{x:e.data("x"),position:t[0].getBoundingClientRect().left,colIndex:e.index(),triggerType:i}},__getResizerConfig:function(e){var t=null,i=e.target,s=this.__$element.closest(".i-role-cellholder"),r=s.data("x"),o=s.closest(".i-role-board-body"),n=o.find('.i-role-header[data-dimension="x"] .i-role-cellholder[data-x="'+r+'"]');if(this.__$triggerA.is(i)){var _=n.prev(".i-role-cellholder");t=this.__getResizerConfigInternal(_,this.__$triggerA,"a")}else this.__$triggerB.is(i)&&(t=this.__getResizerConfigInternal(n,this.__$triggerB,"b"));return t.cursorY=e.clientY,t},__onMouseEnter:function(e){_||a.show(this.__getResizerConfig(e))},__onMouseLeave:function(e){_||a.tryHide(function(i){return t(e.relatedTarget).closest(i).length<=0})},attachTo:function(i){if(this.__$element[0].parentNode!==i){this.__$element.on({"mouseenter.resizer":e.bind(this.__onMouseEnter,this),"mouseleave.resizer":e.bind(this.__onMouseLeave,this)}),a.hide();var r=t(i).closest(".i-role-cellholder"),o=s.getLRVisibilityOptions(r),n=this.__$triggerA,_=this.__$triggerB;o.hideL?n.hide():n.show(),o.hideR?_.hide():_.show();var d=r.height();n.height(d),_.height(d),t(i).css("position","relative"),this.__$element.prependTo(i)}},detach:function(){a.hide(),this.__$element.closest(".i-role-cell").css("position",""),this.__$element.detach(),this.__$element.off(".resizer")},destroy:function(){this.__$element.remove(),this.__$triggerA.remove(),this.__$triggerB.remove()},init:function(){return this.__$element.append(this.__$triggerA,this.__$triggerB),this}}.init(),l={__toGridCoordinates:function(e){var t=this.__$element.find(".i-role-grid"),i=e-this.__$element[0].getBoundingClientRect().left,s=t.position(),r=s.left,o=t[0].clientWidth||t.width(),n=r+o-8,_=20,a=0;return Math.abs(r-i)<_?a=1:Math.abs(n-i)<_&&(a=-1),{coordinate:i,shift:a}},increaseColSize:function(e){var t=this.__$element.find(".tau-cols-header, .tau-grid").find(".tau-cellholder:nth-child("+(e+1)+") .tau-cell").eq(0);s.onResize({type:"+",x:t.data("x")})},decreaseColSize:function(e){var t=this.__$element.find(".tau-cols-header, .tau-grid").find(".tau-cellholder:nth-child("+(e+1)+") .tau-cell").eq(0);s.onResize({type:"-",x:t.data("x")})},showResizer:function(e,t){var i=this.__toGridCoordinates(t),s=i.coordinate,r={0:"",1:"tau-board-grid-resize-controls__btn__right-shift","-1":"tau-board-grid-resize-controls__btn__left-shift"};e.removeClass(r[1]).removeClass(r[-1]).addClass(r[i.shift]),e.css("left",s).appendTo(this.__$element.find(".i-role-board-body"))},hideResizer:function(e){e.detach()},init:function(e){return this.__$element=e.find(".i-role-board-body-holder"),this.__$element.find(".i-role-grid").on({"mouseenter.resizer":function(){if(s.isAvailable()){var e=t(this),i=e.find(".i-role-cell");d.attachTo(i.get(0))}else d.detach()}},".i-role-cellholder"),e.on("remove",function(){this.__$element.find(".i-role-grid").off(".resizer"),d.destroy(),a.destroy()}.bind(this)),s.resetTrigger.progress(function(){d.detach()}),this}}.init(i)}});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.layout',["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/extensions/board.plus/layout/ui.board.plus.layout","tau/ui/extensions/board.plus/ui.board.plus.decorator.columns-resize","tau/models/board.customize.units/const.card.sizes","tau/ui/extensions/board.plus/ui.board.plus.utils"],function(e,i,t,s,r,n,o){return t.extend({init:function(i){this._triggerResizeDelayed=e.throttle(this.triggerResize.bind(this),100),this._super(i)},resetLifecycle:!0,isFixedSizeApplicable:function(e){var i=e.getCurrentZoomLevel(),t=e.getColumnsCount();return i>1&&6>i&&t>1},updateFixedColumnSize:function(i,t,s){i.get({fields:["columnSizes"],callback:function(r){e.defaults(r,{columnSizes:{}}),r.columnSizes[t.x]=t.size,s({col:t.x,size:t.size}),i.set({set:{columnSizes:r.columnSizes}})}})},getResizeDecoratorSettings:function(e,i,t){var s=this;return{resetTrigger:e,isAvailable:function(){return s.isFixedSizeApplicable(i)},resolveColumnSize:function(e){return i.resolveColumnSize(e)},decreaserEnabled:function(e){var t=i.resolveColumnSize(e);return t>1},increaserEnabled:function(){return!0},onResize:function(e){var r=this.resolveColumnSize(e.x),n=e.type;"+"===n&&++r,"-"===n&&--r,e.size=r,s.updateFixedColumnSize(t,e,function(e){var t={};t[e.col]=e.size,i.setFixedColumnSize(t)})},getLRVisibilityOptions:function(e){var i="tau-collapsed_x",t=!1,s=!1;e.hasClass(i)&&(s=!0);var r=e.index();if(0===r)t=!0;else if(r>0){var n=e.parent(),o=n.children().eq(r-1);o.hasClass(i)&&(t=!0)}return{hideL:t,hideR:s}}}},applyColumnResizeDecorator:function(e,t,s,n){var o=this,a=i.Deferred();o.on("resize.executed",a.notify);var l=r(e,o.getResizeDecoratorSettings(a,t,n));return n.bind({fields:["columnSizes"],listener:o,callback:function(){o.triggerResize({})}}),l},createBoardLayout:function(){return new s},"bus cardsFullyLoaded":function(){this.triggerResize({})},"bus start.lifecycle + boardSettings.ready + overview.board.ready + view.dom.ready":function(e,i,t,s){var r=this,n=this.boardSettings=t.boardSettings,o=s.element,a=o.css("fontSize")||16,l=parseFloat(a),u=this.px=function(e){var i=Math.round(l);return e*i},d=u(.5),c=r.createBoardLayout();n.get({fields:["focus","zoomLevel","cells","columnSizes"],callback:function(e){var i=e.focus||{},t=i.x&&i.x.length>0,s=t?{}:e.columnSizes;c.setConfig({columnSizes:s,sizes:r._getSizes(u,e.cells.types),padding:d,scrollY:!1}),c.setElement(o),c.setCurrentZoomLevel(e.zoomLevel),t||r.applyColumnResizeDecorator(o,c,e,n),r.fire("boardLayout.ready",c),r.triggerResize({refreshElement:!0})}})},triggerResize:function(e){this.fire("resize.executed",e)},"bus initialize":function(t){var s=t.data.context.configurator;this._getSizes=this._getSizesV2;var r=e.throttle(e.bind(this.triggerResize,this,{}),250);i(s.getWindow()).on("resize.board",r)},"bus configurator.ready:last + boardSettings.ready":function(e,i,t){var s=t.boardSettings,r=this;s.unbind({listener:r}),s.bind({fields:["zoomLevel"],listener:this,callback:function(e){r.triggerResize({zoomLevel:e.zoomLevel})}}),s.bind({fields:["edit"],listener:this,callback:function(){r.fire("view.edit.applied")}}),s.bind({fields:["cells"],listener:this,callback:function(){r.fire("cells.changed")}})},"bus view.edit.applied":function(){var e=this;setTimeout(function(){e.triggerResize({})},1)},"bus view.card.batch.move.completed":function(){this.triggerResize({onlyHeaders:!0})},"bus view.card.batch.move":function(){this.triggerResize({onlyHeaders:!0})},"bus view.card.order.changed":function(){},"bus view.card.group.changed":function(){this.triggerResize({onlyHeaders:!0})},"bus view.axis.collapser.executed.after":function(){this.triggerResize({refreshElement:!0})},"bus view.cell.skeleton.updated":function(){this._triggerResizeDelayed({})},"bus operation.execute.done":function(e,i){i&&i.operation&&"deleted"==i.operation.name&&this.triggerResize({refreshElement:!0})},"bus boardLayout.ready:last > resize.executed":function(i,t,s){var r=e.clone(s);t.setSizes(this._getSizes(this.px,this.boardSettings.settings.cells.types)),e.defaults(r,{onlyHeaders:!1,refreshElement:!1,zoomLevel:t.getCurrentZoomLevel()}),t.setCurrentZoomLevel(r.zoomLevel),t.config.useFixedColumnSizes=this.isFixedSizeApplicable(t),r.refreshElement&&t.refreshElement(),r.onlyHeaders?t.updateHeaders():(t.updateSize(),this.fire("board.size.updated",{element:t.$el}),this.fire("board.layout.updated",{element:t.$el})),this.fire("resize.completed",r),this.fire("overview.board.updated",t.$el)},"bus overview.board.ready:last+overview.board.retrieve":function(i){var t=e.values(i)[0].data.element;this.fire("overview.board.retrieved",t)},"bus boardSettings.ready:last+destroy":function(i){var t=e.values(i)[0].data.boardSettings;t.unbind({listener:this})},"bus initialize:last+destroy":function(t){var s=e.values(t)[0].data.context.configurator;i(s.getWindow()).off("resize.board")},_getSizesV2:function(e,i){for(var t,s={collapsed:{width:12,height:12,cardsInRowMax:5,cardsInRowMin:5},1:{width:24,height:24,cardsInRowMax:3,cardsInRowMin:3,clientColsMin:5,clientRowsMin:5}},r=i[0],a=8,l=2;6>=l;l++)t=o.getCardSize(r,n.zoomToSize(l),a),s[l]={width:t.width,height:t.height,clientColsMin:2,clientRowsMin:2};return s}})});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.dom.updater.board',["jQuery","Underscore","tau/components/extensions/component.extension.base"],function(e,n,o){return o.extend({hideRawSkeleton:function(e){e.children().css({opacity:0})},showRawSkeleton:function(e){e.children().animate({opacity:1})},"bus view.skeleton.built":function(e,n){this.hideRawSkeleton(n.element)},"bus view.skeleton.built > board.size.updated":function(e,n){this.showRawSkeleton(n.element)},"bus view.skeleton.built > no.data.in.slice":function(e,n){this.showRawSkeleton(n.element)},"bus page.ready > page.changed":function(e,n,o){var t=this.getDirection(n,o);this.fire("refresh",{page:{from:n,to:o,direction:t}})},"bus refresh > board.element.updated":function(n,o,t){var i=o||{},r=t.oldElement,a=t.newElement,d=r.parent();d.append(a);var s=e.Deferred(),l=null;l=i.page&&i.page.direction?function(){this.swap(r,a,i.page.direction)}.bind(this):function(){r.hide().removeClass("tau-board-becomes-old").replaceWith(a)},s.done(l).fail(function(){r.hide().remove()}),this.fire("board.reload",s)},"bus afterRender:last > refresh":function(e,n,o){o&&o.page&&o.page.direction||n.element.addClass("tau-board-becomes-old")},"bus board.reload > refresh":function(e,n){n.reject()},"bus board.reload > no.data.in.slice":function(e,n){n.resolve()},"bus board.reload > overview.board.ready > board.size.updated":function(e,n){n.resolve()},"bus operation.highlightItems > domWrapper.ready":function(e,n,o){o.highlightAxesLines(n)},swap:function(e,n,o){var t=this.directionToProperty(o),i={};e.find(".i-role-grid").css("overflow","hidden"),n.find(".i-role-grid").css("overflow","hidden"),i[t]="+=100%",n.css(t,"-100%"),e.add(n).animate(i,{duration:750,complete:function(){n.css(t,""),n.find(".i-role-grid").css("overflow",""),setTimeout(function(){e.remove()},50)}})},getDirection:function(e,n){var o=null;return e.x==n.x?e.y-n.y==1?o="up":e.y-n.y==-1&&(o="down"):e.y==n.y&&(e.x-n.x==1?o="left":e.x-n.x==-1&&(o="right")),o},directionToProperty:function(e){return{up:"top",down:"bottom",left:"left",right:"right"}[e]}})});
define('tau/models/board.plus/model.board.dragndrop',["Underscore","jQuery","tau/core/extension.base"],function(e,t,i){var r=i.extend({resetLifecycle:!0,defaultOptions:{simpleCommands:{move:!0}},_onBoardSettingsReady:function(e){var t=this.fire.bind(this,"dndOptions.refresh");e.get(["prioritization"]).then(t),e.unbind({listener:this}),e.bind({fields:["prioritization"],listener:this,callback:t})},"bus configurator.ready":function(e,t){this._onBoardSettingsReady(t.service("boardSettings"))},"bus configurator.ready:last + model.cells.metaInfo.ready:last + dndOptions.refresh":function(i,r,n){var s=e.pick(n,"isPrioritizable");t.when(this._prepareOptionsOnInit(s,r)).then(e.bind(function(e){r.getGlobalBus().fire("isPrioritizable.ready",e.isPrioritizable),this.fire("dndOptions.ready",e||{})},this))},"bus model.sliceInfo.retrieved":function(t,i){var r={};e.forEach(["x","y"],function(t){r[t]=e.map(i[t].data,function(e){return e[t]})}),this.fire("conditions.ready",r)},"bus conditions.ready:last + dndOptions.ready:last + slice.ready:last + shift.isPressed + view.card.batch.move":function(i,r,n,s,a,o){t.when(this._prepareOptionsOnExecute(n,a)).then(e.bind(function(e){return this.fire("shift.isPressed",a),this._prepareCommand(s.slice,o,e,r)},this)).then(function(e){return e()}).always(this._afterCardBatchMove.bind(this,o))},_afterCardBatchMove:function(e,t){this.fire("view.card.batch.move.after",t)},_prepareOptionsOnInit:function(t,i){var r=i.service("boardSettings");return r.get(["cells","prioritization"]).then(e.bind(function(i){var r=e.defaults(i.cells.ordering||{},{direction:"Desc"}),n=e.defaults(i.prioritization||{},{mode:"enabled"});return t=e.clone(t),t=e.defaults(t,e.deepClone(this.defaultOptions),{isPrioritizable:!0,simpleCommands:{},prioritizationSettings:n}),t.sortAfter=t.isPrioritizable,t.sortAfterDir=r.direction.toLowerCase(),"disabled"==t.prioritizationSettings.mode&&(t.isPrioritizable=!1),t.isPrioritizable&&(t.simpleCommands.prioritize=!0),t.enable=this._hasCommands(t),t.isPrioritizable&&"shift"===t.prioritizationSettings.mode&&(t.isPrioritizable="shift"),t},this))},_hasCommands:function(t){return e.any(t.simpleCommands)},_prepareCommandName:function(t){var i;return this._hasCommands(t)&&(i=e.keys(t.simpleCommands).sort(),i=e.camelize(i.join(" and "))+"Batch"),i},_prepareOptionsOnExecute:function(e,t){return e.isPrioritizable&&"shift"===e.prioritizationSettings.mode&&(e.simpleCommands.prioritize=t),e},_prepareParameters:function(t,i,r){var n=e.map(t,function(t){var r=t.source,n=t.target,s={itemId:r.entityId};return i.simpleCommands.move&&(s=e.extend(s,{oldX:r.x,oldY:r.y,x:n.x,y:n.y,type:r.entityType})),i.simpleCommands.prioritize&&(s=e.extend(s,{beforeItemId:n.beforeEntityId||null,afterItemId:n.afterEntityId||null})),s}),s={$set:{items:n}};return r.x.length&&(s.x={$in:r.x}),r.y.length&&(s.y={$in:r.y}),s},_createResponseItems:function(t,i){var r=e.unique(t,!1,function(e){return e.sliceId}),n=e.map(i,function(t){var i=e.find(r,function(e){if(!t.items||0===t.items.length)return null;var i=t.items[0];return i.dataItem.id===e.sliceId});return{srcItem:i,responseItem:t}}),s=e.filter(n,function(e){return e.srcItem}),a=e.filter(n,function(e){return!e.srcItem&&e.responseItem.items&&0!==e.responseItem.items.length}),o=e.map(a,function(e){var t=e.responseItem.items[0],i={sliceId:t.dataItem.id,targetX:t.x,targetY:t.y,entityType:t.dataItem.type,entityId:t.dataItem.id,commands:[{moveAndPrioritizeBatch:{executed:!1,error:!1,result:[]}}]};return{srcItem:i,responseItem:e.responseItem}});return e.union(s,o)},_successMoveHandler:function(t,i,r){var n=this._createResponseItems(t,r.data.items),s=this._prepareCommandName(i);return e.map(n,function(t){var r=t.srcItem,n=t.responseItem.items;0===n.length&&n.push({x:"__x_not_in_slice__",y:"__y_not_in_slice__",dataItem:{id:r.sliceId,type:r.entityType,data:{id:r.entityId,type:r.entityType,name:""}},notInSlice:!0});var a=e.map(n,function(e){var t={dataItem:e.dataItem,notInSlice:e.notInSlice};return i.simpleCommands.move&&(t.x=e.x,t.y=e.y),t});return r.commands[s]={executed:!0,error:!1,result:a},r})},_failureMoveHandler:function(t,i,r){var n=this._prepareCommandName(i),s=this._getError(r);return e.forEach(t,function(e){e.commands[n]={executed:!0,error:s,result:[]}}),t},_getError:function(e){return e?e.data?e.data.responseText:{message:e.response.Message}:{message:"Error"}},_generateDefaultOutput:function(t,i){var r=this._prepareCommandName(i);return e.map(t,function(e){var t=e.uid,i=e.source,n=e.target,s={sliceId:i.sliceId,targetX:n.x,targetY:n.y,entityType:i.entityType,entityId:i.entityId,elementId:i.elementId,uid:t,commands:{}};return s.commands[r]={executed:!1,error:!1,result:[]},s})},_command:function(i,r,n,s){var a=this._generateDefaultOutput(r,n),o=this._prepareParameters(r,n,s),d=this._prepareCommandName(n);return d?t.when(d,o).then(function(e,t){return i[e](t)}).then(this._successMoveHandler.bind(this,a,n),this._failureMoveHandler.bind(this,a,n)):(e.each(a,function(e){e.commands={moveAndPrioritizeBatch:{error:{isCanceled:!0}}}}),t.Deferred().resolve(a))},_prepareCommand:function(t,i,r,n){return i=e.filter(i,function(e){return e.source.sliceId}),e.bind(this._command,this,t,i,r,n)}});return r});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.dragndrop.base',["Underscore","jQuery","tau/core/extension.base","tau/ui/extensions/board.plus/ui.board.plus.dom.utils"],function(e,t,r,a){return r.extend({resetLifecycle:!0,_eventNameSpace:".dragndrop",_groups:".i-role-grid .i-role-cellholder",_items:".i-role-card","bus $el.ready":function(r,a){var n=a.find(".i-role-header[data-dimension=x]"),i=a.find(".i-role-header[data-dimension=y]");this.fire("$headerX.ready",n),this.fire("$headerY.ready",i);var o=e.bind(this.fire,this,"shift.isPressed");o(!1);var s=function(e){this.isShiftPressed=!0,e.shiftKey&&o(this.isShiftPressed)},l=function(){this.isShiftPressed=!1,o(this.isShiftPressed)};t(document).on("keydown"+this._eventNameSpace,s).on("keyup"+this._eventNameSpace,l)},"bus $selectable.ready":function(e,t){this._$selectable=t},destroy:function(){t(document).off(this._eventNameSpace),this._$selectable=null,this._super()},_$containment:function(e,t){return e.find("newlist"===t?".i-role-cellholder":"list"===t?".i-role-cellholder":"table")},_$sortable:function(e,t,r){return"newlist"===r?t.find(".i-role-cell"):"list"===r?t.find(".i-role-board-body"):e},_get$_selectable:function(){return this._$selectable},_get$selectable:function(e){return e},"bus $el.ready:last + $grid.ready:last + viewMode.ready:last + dndOptions.ready + configurator.ready:last":function(e,t,r,a,n){var i=this._$containment(r,a),o=this.$sortable=this._$sortable(r,t,a);this.dndOptions=n,o.data("ui-tauSortable")&&(o.tauSortable("destroy"),o.off(".board")),("newlist"!==a||"disabled"!=n.prioritizationSettings.mode)&&n.enable&&(o.tauSortable({groups:this._groups,items:this._items,appendTo:r,containment:i,addClasses:!1,useSelectable:this._get$selectable(r),createPlaceholderContent:this._getPlaceholderContentCreator.bind(this)(),moveInGroup:n.isPrioritizable,processToGroup:this._processToGroup.bind(this)}),this.fire("$sortable.ready",o))},_getPlaceholderContentCreator:function(){return a.createDragNDropPlaceholderContent},_processToGroup:function(e,t,r){if(!t.is(r)){var a=r;r.is(".i-role-cellholder")&&(a=r.children(".i-role-cell")),t.is(a)||(a.data("emptyBeforeDrop",!this.cellHasCards(a)),e.appendTo(a))}},"bus $sortable.ready":function(){this.onSortableReady()},onSortableReady:function(){this.$sortable.on("tausortablestart.board",function(e,t){t.helper&&t.helper.find(".i-role-card").addClass("tau-card-v2_dnd_helper").removeClass("i-role-card"),t.items.removeClass("i-role-card"),this.fire("sort.started",[e,t])}.bind(this)),this.$sortable.on("tausortablechanged.board",function(e,t){this.fire("sort.changed",[e,t])}.bind(this)),this.$sortable.on("tausortablegroupentered.board",function(e,t){this.fire("sort.groupentered",[e,t])}.bind(this)),this.$sortable.on("tausortablegroupleft.board",function(e,t){this.fire("sort.groupleft",[e,t])}.bind(this)),this.$sortable.on("tausortablegroupchanged.board",function(e,t){this.fire("sort.groupchanged",[e,t])}.bind(this)),this.$sortable.on("tausortablestop.board",function(e,t){t.items.addClass("i-role-card"),this.fire("sort.stopped",[e,t])}.bind(this))},"bus options.ready:last+sort.started":function(r,a,n){if(a.dragndrop.containmentRefreshTimeout){var i=n[1],o=t(i.item);e.delay(function(e){e&&e.data("ui-draggable")&&e.data("ui-draggable")._setContainment()},a.dragndrop.containmentRefreshTimeout,o)}},"bus $sortable.ready:last+sort.changed":function(){this.fire("view.card.order.changed")},"bus $sortable.ready:last+$headerX.ready:last+$headerY.ready:last+sort.groupentered":function(e,t,r,a,n){var i=n[1];i&&i.group&&this.highlightTarget(t,i.group,r,a),this.fire("view.card.group.changed")},"bus $sortable.ready:last+$headerX.ready:last+$headerY.ready:last+sort.groupleft":function(e,t,r,a,n){var i=n[1];i&&i.group&&this.unhighlightTarget(t,i.group,r,a),this.fire("view.card.group.changed")},"bus $sortable.ready:last+$headerX.ready:last+$headerY.ready:last+sort.stopped":function(e,t,r,a,n){var i=n[1];i&&i.group&&this.unhighlightTarget(t,i.group,r,a)},"bus sort.stopped":function(r,a){var n=a[1];if(n.item){var i=e.compact(e.map(n.items,function(e){return t.data(e,"boardDnd")}));if(i=e.sortBy(i,function(e){return e.order}),n.isReverted){var o=e.map(i,function(t){var r=e.pick(t.source,"elementId","entityId","entityType","sliceId");return r.commands={moveAndPrioritizeBatch:{error:{isCanceled:!0}}},r});this.fire("view.card.batch.move.after",o)}else this.fire("view.card.batch.move",i)}},_highlightDroppedCards:function(t,r,a){var n=t.getSliceFactoryOptions().options.DnDTurnOffCometWhenItemsCountExceed,i=a.cards||[];return i.length>n&&e.each(i,e.bind(r,null,"tau-card_highlighted")),a},_expandEmptyCollapsedCells:function(r,a){return e.each(a.$affectedCells,e.bind(function(e){var a=t(e);a.data("emptyBeforeDrop")&&a.parent().hasClass("tau-collapsed")&&r.expandCell(this,a.data("x"),a.data("y"))},this)),a},_orderingValue:function(e){return parseFloat(e.data("orderingValue"))},"bus configurator.ready:last + cardLayoutFactory.ready:last + domWrapper.ready:last + dndOptions.ready:last + view.card.batch.move.after":function(r,a,n,i,o,s){var l=this,d=l.unpackMovementResponse(s,i),c={x:s.length>0?s[0].targetX:null,y:s.length>0?s[0].targetY:null},u=t();e.each(d.error,e.bind(function(e){u=u.add(e.$card),i.animateWithClass("tau-card_failed",e.$card),e.error.isCanceled||l.fire("dragndrop.error",e.error)}),this);var h=e.map(u.toArray(),function(e){var r=t(e),a=r.data("boardDnd");return{$card:r,source:a.source||{},target:a.target||{}}});this.restoreErrorCardsPositions(h).then(e.bind(this.processCardsPositions,this,d,c,i,a,n)).then(e.bind(this._highlightDroppedCards,this,a,i.animateWithClass)).then(e.bind(this._expandEmptyCollapsedCells,this,i)).then(e.bind(function(r){if(o.sortAfter){var a="asc"==o.sortAfterDir?function(e,t){return e>t}:function(e,t){return t>e};e.each(r.cards,function(e){var r=l._orderingValue(e),n=e.parents(".i-role-cell:first"),o=n.children(".i-role-card").not(e);if(a(l._orderingValue(o.last()),r)){var s=i.getUnsortedCardsHolder(n);s.length||(s=n.find(".i-role-cell-paging-stack").length?i.createUnsortedCardsHolder().appendTo(n):n),s.append(e)}else{var d=o.filter(function(e,n){return a(l._orderingValue(t(n)),r)});if(d.length){var c=d.last();c.next().is(e)||(i.animateWithClass(i.ANIMATION_CARD_UPDATED,e),c.after(e))}else e.prependTo(n)}})}else e.each(r.cards,function(e){var t=e.parents(".i-role-cell:first"),r=i.getUnsortedCardsHolder(t);r.length||(r=t),e.prev(".i-role-card").length||e.next(".i-role-card").length||r.append(e)});return r.cards||[]},this)).done(e.bind(function(e){this.completeEventsProtocol(e),this.fire("view.card.batch.move.finished",{})},this))},_cardBatchMoveVisualEffects:function(e){return e.getFeaturesService().isEnabled("board.cardBatchMoveVisualEffects")},"bus configurator.ready:last + domWrapper.ready:last + view.card.batch.move":function(t,r,a,n){this._cardBatchMoveVisualEffects(r)&&e.each(n,function(e){a.getCardBySliceId(e.target.sliceId).tauProgressIndicator().tauProgressIndicator("show",{hover:!0})})},"bus configurator.ready:last + domWrapper.ready:last + view.card.batch.move.after":function(t,r,a,n){this._cardBatchMoveVisualEffects(r)&&e.each(n,function(e){a.getCardBySliceId(e.sliceId).tauProgressIndicator().tauProgressIndicator("hide")})},"bus configurator.ready:last + view.card.batch.move.$successCards":function(e,t,r){var a=t.getSliceFactoryOptions().options.DnDTurnOffCometWhenItemsCountExceed;r.length>a&&this.fire("refresh")},processCardsPositions:function(e,t,r,a,n){var i=e.success;if(!i.length)return{};var o=this.extractBatchesUpdates(i);return r.applyCardsBatchMove({targetCellCoordinates:t,options:this._getAnimationOptions(a,i),layout:n,items:o})},_getAnimationOptions:function(e,t){return{suspendAnimation:!this._shouldShowAnimation(e,t)}},_shouldShowAnimation:function(e,t){return this._cardsAreBelowAnimationLimit(e,t)&&this._cardBatchMoveVisualEffects(e)},_cardsAreBelowAnimationLimit:function(e,t){return t.length<=e.getSliceFactoryOptions().options.DnDTurnOffCometWhenItemsCountExceed},extractBatchesUpdates:function(t){for(var r=[],a=function(e){return{x:e.x,y:e.y,data:e.dataItem,notInSlice:e.notInSlice}},n=0,i=t.length;i>n;n++){var o=t[n],s=e.map(o.moves,a);s.length&&s[0].data.data&&r.push(s)}return r},completeEventsProtocol:function(e){this.fire("view.card.batch.move.$successCards",e),this.fire("view.card.batch.move.completed",e),e.length&&this.fire("selection.reapply",{})},restoreErrorCardsPositions:function(r){var a=t.Deferred(),n=this;r=e.sortBy(r,function(e){return e.source.index});var i=e.map(r,function(e){return function(a){var i=e.$card,o=e.source,s=t("#"+o.cellElementId);if(o.beforeElementId){var l=s.find("#"+o.beforeElementId);l.length?i.insertAfter(l):i.prependTo(s)}else i.prependTo(s);n._get$_selectable(i).tauSelectable("option","fireEvents",!1),n._get$_selectable(i).tauSelectable("select",i),n._get$_selectable(i).tauSelectable("option","fireEvents",!0),1==r.length&&n._get$_selectable(i).tauSelectable("raiseChanged",i,!0,!0),a()}});return i=e.map(i,function(e){return function(t){e(t)}}),e.series(i,function(){a.resolve()}),a},toggleTarget:function(e,t,r,a,n){var i="tau-cellholder_dndtarget_true",o="tau-cellholder_dndcrossing_true";if(e.find(t).length){var s=t.index()+1,l=e.find("tr > .i-role-cellholder:nth-child("+s+")").not(t),d=t.siblings();d.length>0&&(l.toggleClass(o,n),r.length&&r.find(".i-role-cellholder:nth-child("+s+")").toggleClass(o,n)),l.length>0&&(d.toggleClass(o,n),a.length&&a.find(".i-role-cellholder[data-y="+t.data("y")+"]").toggleClass(o,n));var c=d.length>0,u=l.length>0;c&&u?t.toggleClass(i,n):(c||u)&&t.toggleClass(o,n)}},cellHasCards:function(e){var r=t(e).children(".i-role-card");return r.length>0},highlightTarget:function(e,t,r,a){this.toggleTarget(e,t,r,a,!0)},unhighlightTarget:function(e,t,r,a){this.toggleTarget(e,t,r,a,!1)},assignResponseItemUID:function(t){var r=t.uid;return e.forEach(t.commands,function(t){t.result=e.map(t.result,function(e){return e.uid=r,e})}),t},unpackMovementResponse:function(t,r){for(var a=r.getCards(),n={error:[],success:[]},i=0,o=t.length;o>i;i++){var s=t[i];s=this.assignResponseItemUID(s);var l=e.chain(e.values(s.commands));s.error=l.pluck("error").concat().compact().value()[0]||null,s.moves=l.pluck("result").concat().compact().value()||[];var d=s.error?"error":"success";s.$card=a.filter("#"+s.elementId),n[d].push(s)}return n}})});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.dragndrop',["Underscore","jQuery","tau/ui/extensions/board.plus/ui.extension.board.plus.dragndrop.base","tau/ui/behaviour/common/ui.behaviour.progressIndicator"],function(e,r,i){return i.extend({_appendToGroupDelay:500,_addCardToGroup:function(e,r){e.appendTo(r),this.fire("view.card.group.changed")},_resetAppendToGroupTimer:function(){clearTimeout(this._appendToGroupTimer),this._appendToGroupTimer=null},_processToGroup:function(e,r,i){if(!r.is(i)){var o=i;if(i.is(".i-role-cellholder")&&(o=i.children(".i-role-cell")),!r.is(o)){o.data("emptyBeforeDrop",!this.cellHasCards(o));var t=this.dndOptions.isPrioritizable,s=t===!0||"shift"===t&&this.isShiftPressed,n=s||this._isDragBeingStopped;n?e.appendTo(o):(this._$currentGroup=o,this._$draggedItem=e,this._appendToGroupTimer=setTimeout(function(){this._addCardToGroup(e,o)}.bind(this),this._appendToGroupDelay))}}},onSortableReady:function(){this._super(),this.$sortable.on("tausortablestart.board",function(){this._isDragBeingStopped=!1}.bind(this)),this.$sortable.on("tausortablebeforegroupentered.board",function(e,r){var i=r.group.is(this._$currentGroup);!i&&this._appendToGroupTimer&&this._resetAppendToGroupTimer()}.bind(this)),this.$sortable.on("tausortablebeforestop.board",function(){this._appendToGroupTimer&&(this._resetAppendToGroupTimer(),this._$draggedItem.appendTo(this._$currentGroup)),this._isDragBeingStopped=!0}.bind(this))}})});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.selection.board',["Underscore","jQuery","tau/core/extension.base"],function(e,t,a){return a.extend({resetLifecycle:!0,createSelectableContainers:function(e){return[{element:e[0]}]},"bus configurator.ready":function(e,t){var a=t.getClipboardManager();a.getAll(function(e,t){this.fire("cardsData.ready",{cards:t,isInitial:!0})}.bind(this)),a.unbind(this),a.bind(this,function(e,t){this.fire("cardsData.ready",{cards:t,isInitial:!1})}.bind(this))},"bus configurator.ready+options.ready":function(t,a,i){var l=e.bind(function(e,t,a){e[t](a)},this,a.getClipboardManager());i.clipboard.processTimeout&&(l=e.debounce(l,i.clipboard.processTimeout)),this.fire("clipboardProcess.ready",l)},"bus configurator.ready:last + $grid.ready":function(t,a,i){var l=this.createSelectableContainers(i);e.each(l,e.bind(this._configureSelectableItem,this,a,l))},"bus scrollManager.ready:last+$selectable.ready:last+view.card.selected":function(t,a,i,l){var r=i.closest(".tau-app-main-pane"),c=!r.hasClass("tau-layout-board_south-expanded_true"),n=l.element;c&&l.selected&&e.delay(function(){var e=r.hasClass("tau-layout-board_south-expanded_true");e&&1==n.length&&a.scrollToVisibility(n)},1e3)},"bus view.cell.skeleton.updated":function(e,t){this.fire("$selectionScope.ready",t.element.parents(".i-role-grid:first"))},"bus overview.board.ready":function(e,t){this.fire("$selectionScope.ready",t.element.find(".i-role-grid"))},"bus $selectable.ready:last+$selectionScope.ready:last+cardsData.ready:last":function(e,t,a,i){this._applySelection(t,a,i.cards,i.isInitial)},"bus $selectable.ready:last+$selectionScope.ready:last+cardsData.ready:last + selection.reapply":function(e,t,a,i){this._applySelection(t,a,i.cards,i.isInitial)},"bus configurator.ready:last + $selectable.ready:last+clipboardProcess.ready:last+view.card.selected":function(e,a,i,l,r){var c=r.element,n=r.selected,s=[],o=[],d=i.tauSelectable("getSelected").not(c);c.each(function(){var e=t(this),a=e.data(),i=d.filter(function(){var i=t(this),l=i.data();return a.id==l.id&&a.entityType.toLowerCase()==l.entityType.toLowerCase()&&i.attr("id")!=e.attr("id")});if(!i.length){var l;l={id:a.id,isSelected:!0,data:{cardData:a.cardData,id:a.entityId,type:a.entityType}},n?s.push(l):o.push(l)}}),l("add",s),l("remove",o)},"bus $selectable.ready:last + sort.stopped":function(e,a,i){var l=i[1],r=l.items||t();a.tauSelectable("option","fireEvents",!1),a.tauSelectable("reset",r),a.tauSelectable("option","fireEvents",!0)},"bus clipboardProcess.ready:last+view.card.batch.move.$successCards":function(t,a,i){var l=[];e(i).each(function(e){var t=e.data(),a={id:t.id,data:{cardData:t.cardData,id:t.entityId,type:t.entityType}};l.push(a)}),a("remove",l)},"bus clipboardProcess.ready:last + operation.notinslice":function(e,t,a){this._cometRemove(t,a.items)},"bus clipboardProcess.ready:last + operation.deleted":function(e,t,a){this._cometRemove(t,a.items)},_cometRemove:function(t,a){var i=e.map(a,function(e){var t=e.data;return{id:t.id,data:{type:t.type}}});t("remove",i)},_configureSelectableItem:function(e,a,i){var l="tau-selected",r=".tau-cellholder .tau-card-v2",c=":not(.tau-board-unit-not-selectable,[contenteditable=true])",n=".i-role-cellholder, .i-role-cell",s=t(i.element);s.tauSelectable({items:".i-role-card",triggerSelector:c,ctrl:!0,selectOnMouseup:!0,className:l,changed:function(e,t){var i=t.item,l=t.selected;this.fire("view.card.selected",{element:i,selected:l}),l&&this._clearSelectionExcept(a,s[0])}.bind(this)}),this.fire("$selectable.ready",s),s.pscroller({getScrollHeight:i.getScrollHeight,applyVerticalScrollOffset:i.applyVerticalScrollOffset}),s.rselect({getVerticalScrollPosition:i.getVerticalScrollPosition,clipHorizontal:i.clipHorizontal,clipVertical:i.clipVertical,trigger:this._concatSelectors([n,i.rectSelectTriggers]),selectionClass:l,selectable:r,show:function(e){t(e.target).pscroller("enable")},end:function(e,i){t(e.target).pscroller("disable"),s.tauSelectable("option","fireEvents",!1),s.tauSelectable("select",t(i.selection)),s.tauSelectable("option","fireEvents",!0),this.fire("view.card.selected",{element:t(i.selection),selected:!0}),this.fire("view.card.selected",{element:t(i.deselection),selected:!1}),this._clearSelectionExcept(a,s[0])}.bind(this)})},_applySelection:function(a,i,l,r){var c="tau-is-selected-duplicate",n=a.tauSelectable("getSelected").filter(function(){return t(this).parents().is(i)}),s=t(),o=i.find(".i-role-card");o.removeClass(c),e(l).each(function(e){var a=o.filter(function(){var a=t(this).data();return e.data.id==a.entityId&&e.data.type.toLowerCase()==a.entityType.toLowerCase()});a.length>1&&a.addClass(c);var i=a.filter(function(){return n.is(this)});i.length&&(a=i),r&&(a=a.eq(0)),s=s.add(a)});var d=n.not(s);a.tauSelectable("option","fireEvents",!1),a.tauSelectable("reset",d),a.tauSelectable("select",s),a.tauSelectable("option","fireEvents",!0)},_clearSelectionExcept:function(a,i){e.each(a,function(e){if(i!==e.element){var a=t(e.element);a.rselect("clearSelection"),a.tauSelectable("clearSelection")}})},_concatSelectors:function(t){return e.compact(t).join(", ")}})});
define('tau/ui/extensions/board.plus/ui.board.plus.scrollManager',["jQuery","tau/core/class"],function(e,t){var l=t.extend({init:function(){this.$element=null},setElement:function(t){this.$element=e(t)},getScrollableElement:function(){return this.$element},getScrollableChild:function(e){return e.children("table")},scrollToVisibility:function(e,t){var l=this.getScrollableElement(),n=this.getScrollableChild(l);t=t||!1;var i=l[0].getBoundingClientRect(),o=e[0].getBoundingClientRect();if(o.bottom>=i.bottom)if(t)l.scrollTo(e,t);else if(n.length){var c=n[0].getBoundingClientRect();l[0].scrollTop=Math.ceil(o.top)-Math.ceil(c.top)-Math.ceil(i.height)+Math.ceil(o.height)+20}t&&t.onAfter&&t.onAfter.call()}});return l});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.scrollManager',["jQuery","tau/core/extension.base"],function(e,n){return n.extend({init:function(e,n){this._super(e),this.scrollManagerInstance=n},getScrollManager:function(){return this.scrollManagerInstance},"bus $el.ready+$grid.ready":function(e,n,r){var t=this.getScrollManager();t.setElement(r),this.fire("scrollManager.ready",t)}})});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.scroll',["Underscore","jQuery","tau/core/extension.base"],function(t,e,o){return o.extend({"bus $el.ready:last + $grid.ready:last + view.axis.collapser.executed.before":function(o,n,i){var l,r,f=i[0].getBoundingClientRect(),a=i.find(".tau-cell");if(a.each(function(){var t=e(this),o=this.getBoundingClientRect();return o.left=o.left-1,o.top>=f.top&&o.top<=f.bottom&&o.left>=f.left&&o.left<=f.right?(r=t,!1):void 0}),r||a.each(function(){var t=e(this),o=this.getBoundingClientRect();return o.left=o.left-1,o.top<=f.top&&o.bottom>=f.top&&o.left>=f.left&&o.left<=f.right?(r=t,!1):void 0}),r||a.each(function(){var t=e(this),o=this.getBoundingClientRect();return o.left=o.left-1,o.top>=f.top&&o.top<=f.bottom&&o.left<=f.left&&o.right>=f.left?(r=t,!1):void 0}),r||a.each(function(){var t=e(this),o=this.getBoundingClientRect();return o.left=o.left-1,o.top<=f.top&&o.bottom>=f.top&&o.left<=f.left&&o.right>=f.left?(r=t,!1):void 0}),l=r,l&&l.length){var p=l.position();p.top<0&&(p.top=0),p.left<0&&(p.left=0);var c=this,u=t.bind(c.propScroll,c,i,l,p);c.fire("propScroll.ready",u)}},"bus propScroll.ready > view.axis.collapser.executed.after > resize.completed":function(t,e){e()},propScroll:function(t,e,o){var n=e[0].getBoundingClientRect(),i=t.find("table:first")[0].getBoundingClientRect(),l={top:n.top-i.top,left:n.left-i.left},r=0;t.parents(".i-browser_engine_ie").length&&(r=-1);var f={top:Math.round(l.top)-Math.round(o.top)+r,left:Math.round(l.left)-Math.round(o.left)};t.scrollTo(f)}})});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.sync-scroll',["Underscore","jQuery","tau/core/extension.base"],function(e,r,n){var l=function(e,r){r()};return n.extend({"bus $el.ready+$grid.ready":function(r,n,l){var o=this,s=n.find(".i-role-header[data-dimension=x]"),c=s.find("ul"),a=n.find(".i-role-header[data-dimension=y]"),i=a.find("ul"),d=e.bind(o.syncScroll,o,l,c,i),t=function(){d(),l.trigger("sync-scroll")};l.on({scroll:t});var u=60,y={mousewheel:function(e,r){var n=-l.scrollTop()+Math.round(r*u);l.scrollTop(-n),t()}};a.on(y),s.on(y),o.fire("syncScroll.ready",d)},"bus syncScroll.ready:last + view.dom.ready":l,"bus syncScroll.ready:last + view.axis.collapser.executed.after":l,"bus syncScroll.ready:last + resize.completed":l,syncScroll:function(e,r,n){var l={x:e.scrollLeft(),y:e.scrollTop()};r.length&&r.css("margin-left",-1*l.x),n.length&&n.css("margin-top",-1*l.y)}})});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.hints',["Underscore","jQuery","tau/core/extension.base","tau/models/board.customize.units/board.customize.cards.builderSelector","tau/models/board.customize.units/const.card.sizes","tau/ui/templates/board.plus/customized/ui.template.boardplus.default.card.customized"],function(t,e,a,i,n){return a.extend({init:function(t){this._super(t),this.builderCardHint=e.Deferred(),this.configurator=t.context.configurator},"bus boardSettings.ready":function(e,a){var i=a.boardSettings;i.get({fields:["zoomLevel"],callback:t.bind(function(t){this.fire("zoomLevel.ready",t.zoomLevel)},this)}),i.unbind({listener:this}),i.bind({fields:["zoomLevel"],listener:this,callback:t.bind(function(t){this.fire("zoomLevel.ready",t.zoomLevel)},this)})},buildCard:function(){},"bus configurator.ready:last + cardLayoutFactory.ready:last + definition.ready + acid.ready:last":function(e,a,o,r,d){var s=new i,u=t.cloneDeep(r);o.getCardLayoutsByTypesAndSize(u.cells.types,n.L).then(function(e){return t.reduce(e,function(t,e,a){return t.types.push({type:a,data:s.build(a,e)}),t.mapLayouts[a]=e,t},{types:[],mapLayouts:{}})}).done(function(t){u.cells.types=t.types,u.global={acid:d};var e={definition:u},i=a.getSliceFactory().create(e),n=a.getTemplateFactory().get("board.plus.default.card.customized");this.buildCard=function(e,o){e.on("close",function(){i.abort()});var r=o.data("cardData"),d=o.data("entityType"),s={dataItem:{id:o.data("id"),orderingValue:o.data("orderingValue"),type:d,data:{cardData:r}},configurator:a,layout:t.mapLayouts[d]};if(e.data("ui-tauBubble")){e.tauBubble("option",{alignTo:this.alignTo(o),className:"tau-ui-size-l",content:n.bind({},s)}),e.tauBubble("show");var u=e.tauBubble("widget");u.addClass("tau-board-lazy-animation"),u.toggleClass("tau-card-v2_final-state",!!r.isFinal);var l={$set:{CardsIds:[r.id]}};i.cardDetails(l).done(function(t){s.dataItem=t.data.items[0];var a=n.bind({},s);e.tauBubble("option",{content:a}),u.removeClass("tau-board-lazy-animation"),this.fire("showHint",{$card:a})}.bind(this))}},this.builderCardHint.resolve()}.bind(this))},"bus configurator.ready:last + $grid.ready":function(t,e,a){a.tauBubble({className:"tau-cardtooltip",showEvent:"nothing",template:['<div class="tau-bubble-board">','<div class="tau-bubble-board__arrow" role="arrow"></div>','<div class="tau-bubble-board__inner tau-container" role="content"></div>',"</div>"].join(""),zIndex:100}),this.fire("$bubbled.ready",a),this.fire("hint.enable",a)},"bus $bubbled.ready:last + sort.started":function(t,e){this._disableHints(e)},"bus configurator.ready:last + $bubbled.ready:last + view.card.batch.move.after":function(e,a,i){t.delay(t.bind(this.fire,this,"hint.enable",i),100)},"bus zoomLevel.ready:last + hint.enable":function(t,e,a){this._enableHints(a,e)},"bus zoomLevel.ready + hint.enable:last":function(t,e,a){this._enableHints(a,e)},"bus hint.enable:last + hint.hide":function(t,e){this._hideHandler(e)},alignTo:function(t){return t},_getCard:function(t){return t},_showHint:function(t,e){var a=this._getCard(e);this.builderCardHint.done(function(){this.buildCard(t,a)}.bind(this))},_showHandler:function(a,i){var n=e(i.currentTarget);clearTimeout(this.timeout),this.timeout=setTimeout(t.bind(this._showHint,this,a,n),750)},_hideHandler:function(t){clearTimeout(this.timeout),t.data("ui-tauBubble")&&t.tauBubble("hide")},_enableHints:function(e,a){this._disableHints(e);var i=this._getHolderClass(a),n=t.bind(this._hideHandler,this,e);e.on("mouseenter.cardHint",i,t.bind(this._showHandler,this,e)),e.on("mouseleave.cardHint",i,n),e.on("mousedown.cardHint",i,function(t){2===t.button&&n()})},_getHolderClass:function(t){var e=".i-role-card";return 5===t&&(e=".i-role-cellholder.tau-collapsed .i-role-card"),e},_disableHints:function(t){this._hideHandler(t),t.off(".cardHint")}})});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.hintsHeader',["Underscore","jQuery","tau/core/extension.base"],function(e,t,a){return a.extend({"bus $el.ready":function(e,t){var a=t.find(".i-role-header");a.length&&this.fire("$headers.ready",a)},"bus $headers.ready":function(e,t){var a=function(e){e.my="center top",e.at="center-1 bottom+5"};t.tauBubble({className:"tau-cardtooltip tau-cardtooltip-header",showEvent:"nothing",template:['<div class="tau-bubble-board">','<div class="tau-bubble-board__arrow" role="arrow"></div>','<div class="tau-bubble-board__inner tau-container" role="content"></div>',"</div>"].join(""),zIndex:1e3,onPositionConfig:a,onArrowPositionConfig:a}),this.fire("$bubbledHeader.ready",t),this.fire("hintHeader.enable",t)},"bus $bubbledHeader.ready:last + sort.started":function(e,t){this._disableHints(t)},"bus $bubbledHeader.ready:last + view.card.batch.move.after":function(t,a){e.delay(e.bind(this.fire,this,"hintHeader.enable",a),100)},"bus hintHeader.enable":function(e,t){this._enableHints(t)},destroy:function(){clearTimeout(this.timeout),this._super()},_showHint:function(e,a){var i=a.find(".i-role-cellaxis-viewtrigger"),n=i.data("entityType");if(n){var d=e.tauBubble("widget");d.length&&n!=d.data("entityType")&&(d.removeClass("tau-cardtooltip-header-"+d.data("entityType")),d.data("entityType",n),d.addClass("tau-cardtooltip-header-"+n)),"y"==e.data("dimension")&&i.children().length&&(i=i.children().first());var r=a.find(".i-role-name").text(),o=['<div class="tau-card-v2  tau-card-v2_type_'+n+'">','<div class="tau-card-v2__section tau-card-v2__section_double">','<div class="tau-board-unit tau-board-unit_format_max tau-board-unit_alignment_base tau-board-unit_type_entity-name-extended">','<div class="tau-board-unit__value tau-name">'+r+"</div>","</div>","</div>",'<div class="tau-card-v2__section"></div>',"</div>"].join(""),s={content:t(o),alignTo:i};d.length||(s.className="tau-cardtooltip tau-cardtooltip-header tau-cardtooltip-header-"+n),e.tauBubble("option",s),e.tauBubble("show")}},_showHandler:function(a,i){var n=t(i.currentTarget);if("y"==a.data("dimension")){if(!a.parents(".rows-h-collapsed:first").length)return void a.tauBubble("disable");a.tauBubble("enable")}else{if(!n.parents(".i-role-cellholder:first").hasClass("tau-collapsed"))return void a.tauBubble("disable");a.tauBubble("enable")}clearTimeout(this.timeout),this.timeout=setTimeout(e.bind(this._showHint,this,a,n),500)},_hideHandler:function(e){clearTimeout(this.timeout),e.data("ui-tauBubble")&&e.tauBubble("hide")},_enableHints:function(t){this._disableHints(t);var a=".tau-label";t.on("mouseenter.headerHint",a,e.bind(this._showHandler,this,t)),t.on("mouseleave.headerHint",a,e.bind(this._hideHandler,this,t))},_disableHints:function(e){this._hideHandler(e),e.off(".headerHint")}})});
define('tau/libs/working-queue',["Underscore"],function(t){var e=function(e){var n=this;n.queue=[],n.interval=e.interval,n.iterator=e.iterator,n.proceed=t.bind(n.proceed,n),n.start=t.bind(n.start,n)};return e.prototype={tick:function(){return+new Date},clean:function(){this.queue=[]},start:function(){var t=this;t.lastResume=t.tick(),t.next()},next:function(){var e=this;e.queue.length>0&&t.defer(e.proceed)},push:function(t){var e=this;e.queue.push(t),1===e.queue.length&&e.start()},proceed:function(){var t=this;if(0!==t.queue.length){t.iterator(t.queue.shift());var e=t.tick()-t.lastResume;e>t.interval?t.wait():t.next()}},wait:function(){var e=this;t.delay(e.start,e.interval)}},e});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.cardsSparklines',["jQuery","tau/core/extension.base","tau/libs/working-queue","tau/libs/sparklines/sparklines","Underscore"],function(e,i,n,r,t){function a(i){var n={width:100,height:50,letterWidth:9,letterHeight:9},t=new r(n);t.draw(null,i),e(i).parent().removeClass(s)}var s="tau-sparkline-loading";return i.extend({init:function(){this.sparklineDrawQueue=new n({interval:150,iterator:a}),this._super.apply(this,arguments)},"bus showHint":function(e,i){var n=i.$card.find(".i-role-sparkline");n.each(function(){a(this)})},"bus overview.board.ready:last + cardsFullyLoaded":function(i,n,r){if(r.isRunAdditionalAction){this.sparklineDrawQueue.clean();var a=n.element;t.each(a.find(".i-role-card"),function(i){var n=e(i).find(".i-role-sparkline");n.children().length||this._pushToDrawingQueue(n)},this)}},"bus overview.board.ready:last + operation.execute.done":function(e,i){var n=i.element,r=this._extractEmptySparkline(n);this._pushToDrawingQueue(r)},"bus overview.board.ready:last + view.card.batch.move.finished":function(e,i){var n=i.element,r=this._extractEmptySparkline(n);this._pushToDrawingQueue(r)},_extractEmptySparkline:function(e){return e.find(".i-role-card .i-role-sparkline:empty")},_pushToDrawingQueue:function(e){var i=this;e.parent().addClass(s),e.each(function(){i.sparklineDrawQueue.push(this)})}})});
define('tau/models/board.plus/model.board.collapse',["Underscore","jQuery","tau/core/extension.base"],function(e,s,t){return t.extend({"bus boardSettings.ready":function(e,s){var t=this;s.boardSettings.get({fields:["collapse"],callback:function(e){t.fire("settings.collapse.provided",e.collapse)}})},"bus settings.collapse.provided":function(e){var s=e.data||{x:[],y:[]};this.fire("view.collapsed.axis",s)},"bus boardSettings.ready:last + board.save.header.collapsing.settings":function(e,s,t){var n=this,a=s.boardSettings;a.get({fields:["collapse"],callback:function(e){a.set({set:{collapse:n.toggleCollapsedId(e.collapse,t)}})}})},toggleCollapsedId:function(s,t){var n={collapse:"union",expand:"without"};return s=s||{x:[],y:[]},s[t.dimension]=e[n[t.setting]](s[t.dimension],t.id),s}})});
define('tau/models/board.plus/model.board.collapse.empty',["Underscore","./model.board.collapse"],function(e,t){return t.extend({_isAxisValueEmpty:function(e){return 0===e.length},"bus model.sliceInfo.retrieved + model.cells.content.loaded":function(t){var a=t["model.cells.content.loaded"].data,i=t["model.sliceInfo.retrieved"].data,o=this,n=function(t){var n=[],d=i["marks"+t.toUpperCase()]||[];return e.each(d,function(i){var d=i[t],s=e.filter(a.data.items,function(e){return e[t]==d&&e.dynamic.items.length>0});o._isAxisValueEmpty(s,i)&&n.push(d)}),n},d=n("x"),s=n("y");this.fire("model.empty.data.ready",{x:d,y:s})},"bus settings.collapse.provided + model.empty.data.ready":function(t){var a=t["model.empty.data.ready"].data,i=t.data||{x:[],y:[]},o={x:e.without(a.x,e.keys(i.x)),y:e.without(a.y,e.keys(i.y))};this.fire("model.empty.axis.info",o)},"bus settings.collapse.provided":function(){},_fireCollapsedDataEvent:function(t){var a=t["settings.collapse.provided"]||t["board.empty.collapsed.changed"],i=e.cloneDeep(a.data||{x:[],y:[]}),o=t["model.empty.axis.info"].data;i.x=e.union(i.x,o.x),i.y=e.union(i.y,o.y),this.fire("view.collapsed.axis",i)},"bus settings.collapse.provided + model.empty.axis.info":function(e){this._fireCollapsedDataEvent(e)}})});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.collapse',["jQuery","Underscore","tau/components/extensions/component.extension.base"],function(e,i,n){return n.extend({"bus domWrapper.ready + view.collapsed.axis":function(e,i,n){this.applyCollapseSettingsOnInit(i,n)},"bus domWrapper.ready":function(e,i){var n=this;i.subscribeToAxisCollapser(function(e){n.fire("view.axis.collapser.executed.before");var s={};s[e.dimension]=e.dimensionId;var a={collapse:"collapseAxis",expand:"expandAxis"};i[a[e.action]](s),n.fire("view.axis.collapser.executed.after"),n.fire("board.save.header.collapsing.settings",{id:e.dimensionId,dimension:e.dimension,setting:e.action})}),i.subscribeToXHeaderCollapser(function(e){i.toggleHeaderCollapsing(),n.fire("view.axis.collapser.executed.after"),n.fire("board.save.header.collapsing.settings",{id:0,dimension:"axisY",setting:e.action})})},applyCollapseSettingsOnInit:function(e,n){var s=this,a=function(e,s){return i.contains(n[e],s)};e.iterateHeadersItems(function(i){if(a(i.dimension,i.value)){var n={};n[i.dimension]=i.value,e.collapseAxis(n)}}),a("axisY",0)&&e.toggleHeaderCollapsing(),s.fire("view.axis.collapser.executed.after")},"bus view.cell.skeleton.element.afterUpdate":function(i,n){var s=n.cell,a=s.find(".more-collapsed");a.length||(a=e('<span class="more-collapsed">&#8230;</span>')),s.find(".i-role-card:last").after(a)}})});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.focus',["jQuery","tau/components/extensions/component.extension.base","tau/ui/extensions/board.plus/ui.board.plus.utils","Underscore"],function(e,s,a,t){return s.extend({focusCells:function(s,t){var n=t.closest(".i-role-cellholder"),d=n.closest(".i-role-header").data("dimension"),i=a.dimension(s,n).add(n);return i.toggleClass("tau-selected_"+d),i.each(function(){var s=e(this);s.toggleClass("tau-selected",s.hasClass("tau-selected_x")||s.hasClass("tau-selected_y"))}),{cell:n,dimension:d}},_processSelectedMarks:function(s,n,d,i){var r=this;t.each(n,function(t){var n={};n[s]=t;var o=a.generateId(n),l=e("#"+o,d).find("[name=focus]");l.prop("checked",!0),r.focusCells(i,l)})},"bus board.selection.defaults.process":function(e){var s=this,a=t.defaults(e.data.selectedMarks||{},{x:[],y:[]}),n=e.data.element,d=n.find(".i-role-grid");t.each(["x","y"],function(e){s._processSelectedMarks(e,a[e],n,d)}),s.fire("board.selection.defaults.ready",e.data)},"bus board.selection.saveChanges":function(e){var s=e.data.mark,a=e.data.boardSettings,n=t.defaults(e.data.selectedMarks||{},{x:[],y:[]});s.checked?n[s.dimension].push(s.value):n[s.dimension]=t.without(n[s.dimension],s.value),a.set({set:{selectedMarks:n}})},"bus board.selection.defaults.ready":function(s){var a=s.data.boardSettings,t=s.data.element,n=this,d=t.find(".i-role-grid"),i=t.find(".i-role-header");i.delegate("[name=focus]","change",function(){var s=e(this),t=n.focusCells(d,s),i=t.dimension,r={checked:s.prop("checked"),dimension:i,value:t.cell.attr("data-"+i)};a.get({fields:["selectedMarks"],callback:function(e){var s={selectedMarks:e.selectedMarks,boardSettings:a,mark:r};n.fire("board.selection.saveChanges",s)}})})},"bus boardSettings.ready:last+overview.board.ready":function(e){var s=t.values(e)[0].data.boardSettings,a=t.values(e)[1].data.element,n=this;s.get({fields:["selectedMarks"],callback:function(e){n.fire("board.selection.defaults.process",{selectedMarks:e.selectedMarks,element:a,boardSettings:s})}})},"bus boardSettings.ready:last+destroy":function(e){var s=t.values(e)[0].data.boardSettings;s.unbind({listener:this})}})});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.paging',["jQuery","Underscore","tau/components/extensions/component.extension.base","tau/ui/extensions/board.plus/ui.board.plus.utils"],function(t,a,e){return e.extend({init:function(t){this._super(t),this.buttons={up:{className:"tau-nav-up",data:"up",code:"&uarr;"},right:{className:"tau-nav-right",data:"right",code:"&rarr;"},down:{className:"tau-nav-down",data:"down",code:"&darr;"},left:{className:"tau-nav-left",data:"left",code:"&larr;"}}},"bus afterRender + board.paging.settings":function(e){var n=e.afterRender.data.element,i=t(".i-role-board-body-holder",n),o=e["board.paging.settings"].data,u=this;a.each(o.availableDirections,function(t,a){t&&u.getNavigationButton(u.buttons[a]).appendTo(i)});var r=function(){i.undelegate(".tau-page-navigation-button","click",r),t(".tau-page-navigation-button",i).hide(),u.fire("page.move.to",{direction:t(this).data("direction"),element:n})};i.on("click",".tau-page-navigation-button",r),u.fire("ui.board.paging.ready",{element:n})},getNavigationButton:function(a){return t('<button class="'+a.className+' tau-page-navigation-button" data-direction="'+a.data+'">'+a.code+"</button>")}})});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.full-counts.base',["jQuery","Underscore","tau/components/extensions/component.extension.base"],function(e,t,i){return i.extend({resetLifecycle:!0,init:function(e){this._super(e),this._updateMetaInfoDebouncedHandler=t.debounce(this.updateMetaInfoAsync,500)},updateMetaInfoAsync:function(e,i,s,n){var a=this;a._request&&a._request.reject({data:{status:0}});var d=t.pluck(e.x.data,"x"),o=t.pluck(e.y.data,"y"),r={$whereX:d.length?{x:{$in:d}}:void 0,$whereY:o.length?{y:{$in:o}}:void 0};(r.$whereX||r.$whereY)&&(a._request=i.axesCounts(r).done(function(e){a._request=null,a.postUpdateAxesMetaInfo(e.data.items,s,n)}))},postUpdateAxesMetaInfo:function(e,t,i){i.updateAxesMetaInfo(e,t),this.fire("view.axes.counters.updated")},"bus boardSettings.ready":function(e,i){i=i.boardSettings;var s=t.bind(function(e){this.fire("boardSettings.limitsReady",e.limits||{})},this);i.get({fields:["limits"],listener:this,callback:s}),i.bind({fields:["limits"],listener:this,callback:s})},"bus model.sliceInfo.retrieved + slice.ready + domWrapper.ready + boardSettings.limitsReady":function(e,t,i,s,n){this._updateMetaInfoDebouncedHandler(t,i.slice,n,s)},"bus boardSettings.limitsReady:last > model.sliceInfo.retrieved:last > slice.ready:last > domWrapper.ready:last >  view.card.batch.move.completed":function(e,t,i,s,n){this._updateMetaInfoDebouncedHandler(i,s.slice,t,n)},"bus model.sliceInfo.retrieved:last > slice.ready:last > domWrapper.ready:last > boardSettings.limitsReady":function(e,t,i,s,n){this._updateMetaInfoDebouncedHandler(t,i.slice,n,s)}})});
define('tau/models/board.plus/model.counts',["tau/core/event"],function(t){return Object.create(new t,{data:{value:{counts:[],limits:{}},writable:!0},update:{value:function(t){this.data=t,this.fire("update",t)},writable:!1},get:{value:function(){return this.data},writable:!1},clear:{value:function(){this.data={counts:[],limits:{}}},writable:!1}})});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.full-counts.client',["jQuery","Underscore","tau/ui/extensions/board.plus/ui.extension.board.plus.full-counts.base","tau/models/board.plus/model.counts"],function(t,e,n,o){var i=function(t,e,n){t[e]=t[e]?t[e].concat(n):[].concat(n)},s=function(t,e){return t=t||"null",e=e||"null",t+"-"+e};return n.extend({init:function(e){this._super(e),this.countsModel=Object.create(o),this.boardModel={},this.on("refresh",function(){this.countsModel&&this.countsModel.clear(),this.boardModel={}}.bind(this)),this.domWrapper=t.Deferred(),this.on("domWrapper.ready",function(e,n){this.domWrapper=t.Deferred().resolve(n)}.bind(this)),this.countsModel.on("update",function(t,e){this.domWrapper.done(function(t){t.updateAxesMetaInfo(e.counts,e.limits),this.fire("view.axes.counters.updated")}.bind(this))}.bind(this))},postUpdateAxesMetaInfo:function(t,e){this.countsModel&&this.countsModel.update({counts:t,limits:e})},updateCount:function(t){var n=this.countsModel.get(),o=function(t){return{count:1,type:t}}.bind(this),i=function(t,i,s,d){var u=e.find(n.counts,function(e){return e[i]==t});if(u){var a=e.find(u.counts,function(t){return t.type.toLowerCase()==d.toLowerCase()});a?a.count+=s:u.counts.push(o(d))}else if("null"!==t){var c={counts:[o(d)]};c[i]=t,n.counts.push(c)}},s=function(t,n){e.each(t,function(t,o){o=o.split("-"),e.each(t,function(t){i(o[0],"x",n,t.type),i(o[1],"y",n,t.type)})})};s(t.added,1),s(t.removed,-1),this.countsModel.update(n)},updateModel:function(t,n){var o=e.reduce(n,function(t,e){return t.push(s(e.x,e.y)),t},[]),d={removed:{},added:{}};return e.each(n,function(n){var u=s(n.x,n.y),a=t[u]||{},c=n.dataItem,r=c.id,l=a[r];l||(t[u]=a,i(d.added,u,c),t[u][r]=c),e.each(t,function(t,n){t[r]&&(e.contains(o,n)||(i(d.removed,n,c),delete t[r]))})},this),d},processBatchComet:function(t){return e.reduce(t,function(t,e){return e.location&&"card"===e.location.toLowerCase()&&t.push({dataItem:e.data,x:e.x,y:e.y}),t},[])},"bus comet.batch":function(t,n){var o={removed:{},added:{}};e.each(n.items,function(t){var n=this.updateModel(this.boardModel,this.processBatchComet(t.items));e.each(n.removed,function(t,e){i(o.removed,e,t)}),e.each(n.added,function(t,e){i(o.added,e,t)})},this),this.updateCount(o)},"bus boardSettings.limitsReady:last > model.sliceInfo.retrieved:last > slice.ready:last > domWrapper.ready:last > after.slice.cells.updated":function(t,e,n,o,i){this._updateMetaInfoDebouncedHandler(n,o.slice,e,i)},"bus slice.ready":function(t,n){n.base.on("after.cells",function(t,n){e.each(n.result&&n.result.items||[],function(t){var n=s(t.x,t.y);this.boardModel[n]=this.boardModel[n]||{},e.each(t.dynamic.items||[],function(t){this.boardModel[n][t.id]=t},this)},this),this.fire("after.slice.cells.updated")}.bind(this));var o=function(t,n){e.each(n.result.items,function(t){this.updateModel(this.boardModel,t.items)},this)}.bind(this);n.full.on("after.moveBatch",o),n.full.on("after.moveAndPrioritizeBatch",o)}})});
define('tau/ui/extensions/board.plus/ui.extension.full-counts',["jQuery","Underscore","tau/components/extensions/component.extension.base"],function(e,t,a){return a.extend({resetLifecycle:!0,init:function(){var e=this;e._super.apply(e,arguments),e._updateMetaInfoDebouncedHandler=t.debounce(e.updateMetaInfoAsync,500)},updateMetaInfoAsync:function(e,a,i,s){var n=this;n._request&&n._request.reject({data:{status:0}});var d=t.pluck(e.x.data,"x"),r=t.pluck(e.y.data,"y"),o={$whereX:d.length?{x:{$in:d}}:void 0,$whereY:r.length?{y:{$in:r}}:void 0};(o.$whereX||o.$whereY)&&(n._request=a.axesCounts(o).done(function(e){n._request=null,s.updateAxesMetaInfo(e.data.items,i),n.fire("view.axes.counters.updated")}))},"bus boardSettings.ready":function(e,a){a=a.boardSettings;var i=t.bind(function(e){this.fire("boardSettings.limitsReady",e.limits||{})},this);a.get({fields:["limits"],listener:this,callback:i}),a.bind({fields:["limits"],listener:this,callback:i})},"bus model.sliceInfo.retrieved + slice.ready + domWrapper.ready + boardSettings.limitsReady":function(e,t,a,i,s){this._updateMetaInfoDebouncedHandler(t,a.slice,s,i)},"bus boardSettings.limitsReady:last > model.sliceInfo.retrieved:last > slice.ready:last > domWrapper.ready:last >  view.card.batch.move.completed":function(e,t,a,i,s){this._updateMetaInfoDebouncedHandler(a,i.slice,t,s)},"bus boardSettings.limitsReady:last > model.sliceInfo.retrieved:last > slice.ready:last > domWrapper.ready:last > boardSettings.limitsReady:last > operation.execute.done":function(e,t,a,i,s){this._updateMetaInfoDebouncedHandler(a,i.slice,t,s)},"bus model.sliceInfo.retrieved:last > slice.ready:last > domWrapper.ready:last > boardSettings.limitsReady":function(e,t,a,i,s){this._updateMetaInfoDebouncedHandler(t,a.slice,s,i)}})});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.full-counts',["jQuery","Underscore","tau/ui/extensions/board.plus/ui.extension.full-counts"],function(e,t,n){return n.extend({"bus boardSettings.limitsReady:last > model.sliceInfo.retrieved:last > slice.ready:last > domWrapper.ready:last > view.cell.skeleton.updated":function(e,t,n,s,d){this._updateMetaInfoDebouncedHandler(n,s.slice,t,d)}})});
define('tau/models/board.plus/model.board.plus.quick.add.axes',["Underscore","tau/core/extension.base"],function(e,i){return i.extend({"bus overview.board.ready":function(){var i=e.bind(this.fire,this,"axesActions.init");e.delay(i,500)},"bus configurator.ready + slice.ready + axesActions.init":function(e,i,n){var t=n.slice.clone();this.fire("slice.axes.quickadd.api.ready",t)},"bus slice.ready + model.sliceInfo.retrieved + axesActions.init":function(e,i,n){var t=this;n.definition.x&&n.definition.x.types.length||n.definition.y&&n.definition.y.types.length?i.slice.axesActions().done(function(e){t.fire("model.axesActions.ready",e.data)}):t.fire("model.axesActions.ready",{items:[]})}})});
define('tau/ui/extensions/board.plus/ui.board.plus.decorator.quick-add.base',["Underscore","jQuery","tau/core/class"],function(t,n,i){return i.extend({isActivated:!1,element:null,init:function(t,n){this.settings=n,this.findElements(t),this.attachEvents()},createQuickAddPanel:function(){return n('<div class="tau-quick-add" style="display: none; position: absolute;"><button class="tau-btn tau-btn-big tau-add tau-success"></button></div>')},findElements:function(){throw new Error("Abstract method call")},attachEvents:function(){throw new Error("Abstract method call")},matchLocation:function(t,n){return n.x==t.x&&n.y==t.y},predicateAddAction:function(n){var i=this.matchLocation;return t.find(this.settings.items,function(e){if(i(n,e)){var a=t.find(e.fixed.items,function(t){return"AddAction"===t.type});if(a)return!0}return!1})},deactivate:function(){this.isActivated=!1},destroy:function(){this.$buttonPanel&&this.$buttonPanel.remove(),this.detachEvents()},detachEvents:function(){},activate:function(t,n){this.isActivated=!0,this.activatedOn=t,this.settings.onActivate({target:this.activatedOn,data:n,deactivate:this.deactivate.bind(this)})}})});
define('tau/ui/extensions/board.plus/ui.board.plus.decorator.quick-add-axes',["Underscore","jQuery","tau/ui/extensions/board.plus/ui.board.plus.decorator.quick-add.base"],function(t,e,i){var n=2,s=i.extend({activatedScope:null,lastScope:null,sharedState:null,findElements:function(t){this.element=t.getAxesHeaders(),this.$buttonPanel=this.createQuickAddPanel(),this.$button=this.$buttonPanel.find(".tau-btn")},matchLocation:function(t,e){return e.location.toLowerCase()===t.dimension.toLowerCase()},deactivate:function(){this.isActivated=!1,this.activatedScope!==this.lastScope&&this.$buttonPanel.hide()},setPosition:function(t){this.$buttonPanel.appendTo(t);var e=t.data("dimension"),i=t.width()-this.$buttonPanel.width()-2*n;"y"===e?this.$buttonPanel.css({top:t.height()-this.$buttonPanel.height()-2*n,left:i}):"x"===e&&this.$buttonPanel.css({top:n,left:i}),this.$buttonPanel.show()},showButton:t.throttle(function(t){this.sharedState&&this.setPosition(t)},500),hideButton:function(){this.$buttonPanel.hide()},onClick:function(){this.sharedState&&(this.activatedScope=this.lastScope,this.activate(this.$button,this.sharedState))},onDblClick:t.debounce(function(t){var i=e(t.target);(i.hasClass("i-role-cellholder")||i.hasClass("i-role-cell")||i.hasClass("footer-pillow"))&&this.onMouseEnter(t).actionAllowed&&this.$button.click()},300),onMouseEnter:function(t){var i=e(t.delegateTarget),n=this.getCellData(i);if(this.lastScope="enter_"+n.dimension,!this.isActivated){var s=this.predicateAddAction(n);if(s)return this.sharedState={actionItems:s},this.showButton(i),{actionAllowed:!0}}return{}},onMouseLeave:function(t){var i=e(t.delegateTarget),n=this.getCellData(i);if(this.lastScope="leave_"+n.dimension,!this.isActivated){var s=this.predicateAddAction(n);s&&(this.sharedState=null,this.hideButton())}},attachEvents:function(){this.$button.on("click",this.onClick.bind(this)),this.element.on({dblclick:this.onDblClick.bind(this),mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)})},getCellData:function(t){return t.data()}});return s});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.quick.add.axes',["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/extensions/board.plus/ui.board.plus.decorator.quick-add-axes"],function(t,e,o,i){return o.extend({resetLifecycle:!0,"bus slice.axes.quickadd.api.ready:last + domWrapper.ready:last + model.axesActions.ready":function(e,o,n,a){o.on("after.addAxisData",t.bind(this.onAfterAddData,this)),this.decorator=new i(n,{items:a.items,onActivate:t.bind(this.showQuickAddPopup,this,o,n)})},onAfterAddData:function(t){var e=t.data.result,o=e[0];this.itemsToAdd.push({data:o.dataItem,location:o.location})},setupBatchAddOperation:function(){this.itemsToAdd=[]},triggerBatchAddOperation:function(){0!==this.itemsToAdd.length&&this.fire("operation.execute",{name:"added",options:{force:!0},items:this.itemsToAdd})},showQuickAddPopup:function(e,o,i){var n=this,a=i.target,d=i.data.actionItems,s=t.find(d.fixed.items,function(t){return"AddAction"===t.type}),r="axis",c=o.getGrid().parents(".i-role-board-body-holder,.tau-entity-list"),u="x"===(d.location||"").toLowerCase(),p=function(t){t=!!t,c.prop("disabled",t),a.parent().toggleClass("tau-quick-add_expand",t)},f={target:a,cleanupOnHide:!0,stackName:"quickAdd",showOnCreation:!0,zIndex:1e4,onShow:function(){p(!0),n.setupBatchAddOperation()},onHide:function(){p(!1),n.triggerBatchAddOperation(),i.deactivate()},onPositionConfig:function(){return{my:u?"left top":"left bottom",at:u?"left-30 bottom":"left-30 top",of:a,collision:"fit flip"}},onArrowPositionConfig:function(t){u&&(t.offset="-5 0")},dontCloseSelectors:["#ui-datepicker-div"],componentsConfig:{components:[{name:"board axis quick add",type:"board.cell.quick.add",options:{slice:e,action:d,addAction:s,viewMode:r}}]}};n.fire("initBubble",f)}})});
define('tau/models/board.plus/nodata/nodata-strategies',["Underscore","tau/utils/timeline/utils.timeline.date-range"],function(n,e){var t=function(n,e){var t=n[e].data;if(0===t.length)return!0;if(1!==t.length)return!1;var a=t[0].dynamic.items;return 1===a.length&&a[0].data.empty};return{board:{isEmpty:function(e,a,s){var i={isEmpty:!1,noCards:!1,noValuableAxis:!1,noCardsSetup:!1,noLanesSetup:!1,noSetup:!1},u=e.x.data||[],o=e.y.data||[],l=!e.x.isNull,r=!e.y.isNull,d=a.data.items;return i.noCards=0===d.length||0===d[0].dynamic.items.length,i.isEmpty=(0===u.length||r&&0===o.length)&&(0===o.length||l&&0===u.length)&&i.noCards,i.noLanesSetup=!n.any([s.x,s.y],this.isConfigured.bind(this)),i.noCardsSetup=!this.isConfigured(s.cells),i.noSetup=i.noLanesSetup&&i.noCardsSetup,i.noValuableAxis=!i.noLanesSetup&&n.every(["x","y"],t.bind(null,e)),i}},list:{isEmpty:function(e,t,a){var s={isEmpty:!1,noCards:!1,noValuableAxis:!1,noCardsSetup:!1,noLanesSetup:!1,noSetup:!1},i=t.data.items;return s.isEmpty=0===i.length||0===i[0].dynamic.items.length,s.noCards=s.isEmpty,s.noLanesSetup=!n.any([a.x,a.y],this.isConfigured.bind(this)),s.noCardsSetup=!this.isConfigured(a.cells),s.noSetup=s.noLanesSetup&&s.noCardsSetup,s}},timeline:{isEmpty:function(a,s,i){var u={noCards:!1,noValuableAxis:!1,noCardsSetup:!1,noLanesSetup:!1},o=a.y.data||[],l=!a.y.isNull,r=0==a.x.data.length,d=s.data.items;return u.noCards=0===d.length||0===d[0].dynamic.items.length,u.noCardsSetup=!this.isConfigured(i.cells),u.noLanesSetup=!this.isConfigured(i.y),u.noSetup=u.noLanesSetup&&u.noCardsSetup,u.isEmpty=r||u.noSetup||!e.tryParseWithRoundedDays(i.timelineGlobalDateRange).isValid||l&&0===o.length,u.noValuableAxis=!u.noLanesSetup&&n.every(["y"],t.bind(null,a)),u}}}});
define('tau/components/board.core/models/model.nodata',["Underscore","tau/components/board.core/models/model.board.core"],function(e,t){return t.extend({init:function(e,t){if(this._super(e),!t)throw new Error("[model.board.nodata] configure empty checker");this._emptyChecker=t},createEmptyChecker:function(){return this._emptyChecker},isEmpty:function(e,t,r){return this.createEmptyChecker().isEmpty.apply(this,[e,t,r])}})});
define('tau/models/board.plus/model.board.nodata',["Underscore","./model.board.base","tau/components/board.core/models/model.nodata"],function(e,t,n){return t.extend({init:function(e,t){var o=new n(e,t);this._super(e,o)},"bus model.sliceInfo.retrieved + model.cells.content.loaded + definition.ready:last":function(e,t,n,o){var i=this.getModel().isEmpty(t,n,o);i.isEmpty?this.fire("no.data.in.slice",{reason:{noData:i.isEmpty,noSetup:i.noSetup},type:i.noSetup?"notConfigured":"isEmpty"}):this.fire("has.data.in.slice",{}),this.fire("board.nodata.status.ready",i)}})});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.empty.data',["jQuery","tau/core/extension.base","tau/ui/templates/board.plus/ui.template.board.plus.emptyMessage"],function(e,t,s){return t.extend({init:function(e,t){if(this._super(e),!t)throw new Error('[ui.extension.board.plus.empty.data] configure "no data" message');this._message=t},"bus configurator.ready:last + view.skeleton.built:last + no.data.in.slice":function(e,t,n,a){a.message=a.reason.noSetup?this.getNoSetupMessage():"Yikes...! Nothing in there :-|";var i=t.getTemplateFactory().get(s.name).bind({},a),o=n.element;o.toggleClass("no-data-in-slice-container",!0),this.preProcessSkeleton(o),this.removeEmptyMessage(o),o.find(".i-role-board-body").append(i)},getNoSetupMessage:function(){return this._message},preProcessSkeleton:function(){},"bus view.skeleton.built:last + has.data.in.slice":function(e,t){var s=t.element;this.removeEmptyMessage(s),s.toggleClass("no-data-in-slice-container",!1)},"bus operation.added":function(){this.fire("has.data.in.slice")},removeEmptyMessage:function(e){e.find(".i-role-empty-message").remove()}})});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.cards-lazy-loading.customized',["Underscore","jQuery","tau/core/extension.base","tau/models/board.customize.units/board.customize.cards.builderSelector"],function(e,t,a,i){var r=function(e){return e.data&&e.data.cardData&&e.data.cardData.id},n=a.extend({resetLifecycle:!0,init:function(e){this.cards={},this.forceRefresh=!1,this._super(e)},getZoomControl:function(){return t('.tau-board-header [role="zoomer"]')},disableZoomControl:function(){var e=this.getZoomControl();e.data("ui-slider")&&e.slider("disable")},enableZoomControl:function(){var e=this.getZoomControl();e.data("ui-slider")&&e.slider("enable")},reset:function(){this.cards={},this.enableZoomControl()},"bus before_destroy":function(){this.reset()},"bus before_refresh":function(){this.reset()},handlerSliceFail:function(e){var t=function(e,t){this.forceRefresh&&this.fire("refresh");var a=t.command.method;"cardsDetails"==a&&this.fire("lazy.cards.ready",this.cards)}.bind(this);e.lazy.on("abort",function(){this.fire("refresh")}.bind(this)),e.base.on("abort",function(e,a){this.fire("refresh"),t(e,a)}.bind(this)),e.slice.on("abort",t)},"bus afterInit":function(){this.disableZoomControl()},"bus domWrapper.ready":function(){this.enableZoomControl()},"bus slice.ready":function(t,a){this.getCards(a).done(function(e){this.isNeedLazy(a.lazy.config.definition)||this.fire("lazy.cards.ready",e)}.bind(this)),a.slice.on("after.cells",function(t,a){var i=this.readCardsCells(a);e.each(i,function(e,t){this.removeFromCache(t)},this)}.bind(this)),this.handlerSliceFail(a)},"bus operation.execute":function(t,a){e.each(a.items,function(e){this.removeFromCache(r(e.data))},this)},removeFromCache:function(e){delete this.cards[e]},"bus domWrapper.ready:last + lazy.cards.ready":function(e,t,a){this.updateCards(a,t,!0)},redrawCards:function(a,i,r){var n=i.getCards();if(e.each(n,e.bind(function(e){var a=t(e),i=a.data("entityId");this.cards[i]||(this.cards[i]={id:a.data("id"),orderingValue:a.data("orderingValue"),type:a.data("entityType"),data:{cardData:a.data("cardData")}})},this)),this.forceRefresh=!1,n.length>150)return this.forceRefresh=!0,void this.fire("refresh");this.fire("startLazyLoadCard"),i.getGrid().removeClass("tau-board-lazy-animation_unit"),i.getGrid().addClass("tau-board-lazy-animation_unit"),this.updateCards(this.cards,i);var s=[];this.cards=e.reduce(this.cards,function(a,i,r){return e.each(n,function(e){t(e).data("entityId")==r&&(a[r]=i)}),a},{}),this.isNeedLazy(r.slice.config.definition)&&(s=e.keys(this.cards)),this.getCardDetails(s,r.slice,{}).done(function(t){e.mergeDeep(this.cards,t),this.fire("lazy.cards.ready",t)}.bind(this)).fail(function(){this.fire("lazy.cards.ready",this.cards)}.bind(this))},"bus lazy.cards.ready > domWrapper.ready:last > slice.ready":function(e,t,a,i){this.redrawCards(t,a,i)},updateCards:function(a,i,r){var n=this,s=e.size(a),d=0,o=function(){n.fire("cardsFullyLoaded",{isRunAdditionalAction:!!r}),i.getGrid().removeClass("tau-board-lazy-animation_unit")};e.each(a,function(a){i.renderCardAsHtml(a).done(function(r){var n=a.id,c=i.getCardBySliceId(n),u=c.length;0===c.length?(s-=1,s==d&&o()):d++,e.each(c,function(e,a){t(e).html(r.html()),s==d&&u-1==a&&o()})})})},"bus view.skeleton.built:last + startLazyLoadCard":function(e,t){this.startAnimate(t)},"bus view.skeleton.built:last + lazy.cards.ready":function(e,t){this.stopAnimate(t)},startAnimate:function(e){e.element.addClass("tau-board-lazy-animation")},stopAnimate:function(e){e.element.removeClass("tau-board-lazy-animation")},isNeedLazy:function(t){var a=new i;return e.reduce(t.cells&&t.cells.types||[],function(e,t){return e||"{}"!==a.buildSelectorWithoutCardData(t.data||"")},!1)},getCardDetails:function(a,i,n){var s={$set:{CardsIds:a}};return i.cardDetails(s).then(function(t){var a=t.data.items;return e.reduce(a,function(t,a){var i=r(a),n=e.deepClone(t[i]&&t[i].data||{});return n=e.mergeDeep(n,a.data),t[i]=e.mergeDeep(t[i]||{},a),t[i].data=n,t},n)},function(){return t.Deferred().reject()})},readCardsCells:function(t){var a=t.result.items;return e.reduce(a,function(t,a){return e(a.dynamic.items).each(function(e){t[r(e)]=e}),t},{})},getCards:function(a){var i=t.Deferred(),r=function(t,r){var n=this.readCardsCells(r);this.cards=e.mergeDeep(this.cards,n),this.isNeedLazy(a.lazy.config.definition)&&(this.fire("startLazyLoadCard"),this.getCardDetails(e.keys(n),a.lazy,n).done(function(e){this.fire("lazy.cards.ready",e)}.bind(this)).fail(function(){this.fire("lazy.cards.ready",n)}.bind(this))),i.resolve(n)}.bind(this);return a.base.on("after.cells",r),a.base.on("after.list",r),i}});return n});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.progress',["Underscore","jQuery","tau/core/extension.base"],function(e,r,s){return s.extend({"bus initialize + $el.ready":function(e,r,s){s.tauProgressIndicator(),s.tauProgressIndicator("show")},"bus initialize + $el.ready + overview.board.ready":function(e,r,s){s.data("ui-tauProgressIndicator")&&(s.tauProgressIndicator("hide"),s.tauProgressIndicator("destroy"))},"bus initialize + $el.ready + no.data.in.slice":function(e,r,s){s.data("ui-tauProgressIndicator")&&(s.tauProgressIndicator("hide"),s.tauProgressIndicator("destroy"))},"bus initialize + $el.ready + view.dom.ready":function(e,r,s){var t=s.parent().tauProgressIndicator(),o=function(e){t.data("ui-tauProgressIndicator")&&t.tauProgressIndicator(e)};this.fire("progressProcess.ready",o)},"bus progressProcess.ready:last + before_refresh":function(e,r){this.timeout=setTimeout(function(){r("show")},500)},"bus progressProcess.ready:last + overview.board.ready":function(e,r){clearTimeout(this.timeout),r("hide")},"bus progressProcess.ready:last + no.data.in.slice":function(e,r){clearTimeout(this.timeout),r("hide")},"bus progressProcess.ready:last + destroy":function(e,r){r("destroy")}})});
define('tau/ui/extensions/board.plus/ui.board.plus.decorator.quick-add-cells',["Underscore","jQuery","tau/ui/extensions/board.plus/ui.board.plus.decorator.quick-add.base"],function(t,e,i){e.expr.cacheLength=1;var n=2,o=i.extend({activatedScope:null,lastScope:null,sharedState:null,findElements:function(t){this.element=t.getGrid(),this.$buttonPanel=this.createQuickAddPanel(),this.$buttonPanel.css({top:0,left:0}).appendTo(this.element),this.buttonPanelHeight=this.$buttonPanel.height(),this.buttonPanelWidth=this.$buttonPanel.width(),this.$button=this.$buttonPanel.find(".tau-btn"),this.element.find(".i-role-cellholder").addClass("i-role-ch-quickadd-target")},deactivate:function(){this.isActivated=!1,this.activatedScope!==this.lastScope&&this.$buttonPanel.hide()},setPosition:function(i){var o=this.element,s=e(i.currentTarget),h=s.position(),a=s.height(),l=s.width(),c=s.offset(),u=o.offset(),r=o[0],d=r.offsetHeight-r.clientHeight,f=r.offsetWidth-r.clientWidth,b=a-this.buttonPanelHeight,v=h.top+b+o.scrollTop()-1.5*n,p=u.top+o.height()-d,g=c.top+a,P=t.max([0,g-p]);v-=P;var S=t.max([0,this.buttonPanelHeight+2*n-(a-P)]);v+=S;var k=l-this.buttonPanelWidth,m=h.left+k+o.scrollLeft()-n,$=u.left+o.width()-f,A=c.left+l,C=t.min([0,$-A]);m+=C;var M=t.max([0,this.buttonPanelWidth-(l-C)-n]);m+=M,this.$buttonPanel.css({top:v,left:m}).appendTo(s)},showButton:t.throttle(function(t){this.sharedState&&(this.setPosition(t),this.$buttonPanel.show())},500),hideButton:function(){this.$buttonPanel.hide()},onClick:function(){this.sharedState&&!this.isActivated&&(this.activatedScope=this.lastScope,this.activate(this.$button,this.sharedState))},onDblClick:t.debounce(function(t){var i=e(t.target);(i.hasClass("i-role-ch-quickadd-target")||i.hasClass("i-role-cell")||i.hasClass("footer-pillow"))&&this.onMouseEnter(t).actionAllowed&&this.$button.click()},300),onMouseEnter:function(t){var i=this.getCellData(e(t.currentTarget));if(this.lastScope="enter_"+i.x+"_"+i.y,!this.isActivated){var n=this.predicateAddAction(i);if(n)return this.sharedState={actionItems:n},this.showButton(t),{actionAllowed:!0}}return{}},onMouseLeave:function(t){var i=this.getCellData(e(t.currentTarget));if(this.lastScope="leave_"+i.x+"_"+i.y,!this.isActivated){var n=this.predicateAddAction(i);n&&(this.sharedState=null,this.hideButton())}},onScroll:t.throttle(function(){var t=this.$buttonPanel.closest(".i-role-ch-quickadd-target");t.length&&this.setPosition({currentTarget:t})},150),attachEvents:function(){this.$button.on("click",this.onClick.bind(this)),this.onScrollBound=this.onScroll.bind(this),this.element.on("sync-scroll",this.onScrollBound),this.onDblclickBound=this.onDblClick.bind(this),this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.element.on({dblclick:this.onDblclickBound,mouseenter:this.onMouseEnter,mouseleave:this.onMouseLeave},".i-role-ch-quickadd-target")},detachEvents:function(){this.element.off("sync-scroll",this.onScrollBound),this.element.off({dblclick:this.onDblclickBound,mouseenter:this.onMouseEnter,mouseleave:this.onMouseLeave},".i-role-ch-quickadd-target")},getCellData:function(t){return t.data()}});return o});
define('tau/ui/extensions/board.plus/ui.board.plus.decorator.quick-add-list',["Underscore","jQuery","tau/ui/extensions/board.plus/ui.board.plus.decorator.quick-add.base"],function(t,e,i){var n=2,s=32,o=i.extend({activatedScope:null,lastScope:null,sharedState:null,findElements:function(t){this.element=t.getGrid().parent(".i-role-board-body"),this.$buttonPanel=this.createQuickAddPanel(),this.$button=this.$buttonPanel.find(".tau-btn"),this.$buttonPanel.css({bottom:n}).addClass("i-role-quick-add-decorator-list").appendTo(this.element)},deactivate:function(){this.isActivated=!1,this.activatedScope!==this.lastScope&&this.$buttonPanel.hide()},setPosition:function(){var t=this.element.find(".i-role-cellholder").width();this.$buttonPanel.css({left:t-s-n})},showButton:function(){this.sharedState&&(this.setPosition(),this.$buttonPanel.show())},hideButton:function(){this.$buttonPanel.hide()},onClick:function(){this.sharedState&&(this.activatedScope=this.lastScope,this.activate(this.$button,this.sharedState))},onDblClick:t.debounce(function(t){var i=e(t.target);i.hasClass("i-role-cellholder")&&this.$button.is(":visible")&&this.$button.click()},300),onMouseEnter:function(t){var i=this.getCellData(e(t.delegateTarget));if(this.lastScope="enter_"+i.x+"_"+i.y,!this.isActivated){var n=this.predicateAddAction(i);n&&(this.sharedState={actionItems:n},this.showButton())}},onMouseLeave:function(){this.lastScope=null,this.isActivated||(this.sharedState=null,this.hideButton())},attachEvents:function(){this.$button.on("click",this.onClick.bind(this)),this.element.on({dblclick:this.onDblClick.bind(this),mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)},".i-role-grid,.i-role-quick-add-decorator-list")},getCellData:function(t){var e=t.find(".i-role-cellholder");return e.data()}});return o});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.quick.add.cells',["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/extensions/board.plus/ui.board.plus.decorator.quick-add-cells","tau/ui/extensions/board.plus/ui.board.plus.decorator.quick-add-list"],function(t,e,o,i,a){return o.extend({resetLifecycle:!0,"bus cardLayoutFactory.ready:last + slice.cells.quickadd.api.ready:last + model.cellActions.ready":function(e,o,i){i.on(["after.addData","after.listAddData"],t.bind(this.onAfterAddData,this,o))},"bus slice.cells.quickadd.api.ready:last + domWrapper.ready:last + model.cellActions.ready":function(e,o,n,d){var r;switch(n.definition.viewMode){case"list":r=a;break;default:r=i}this.decorator&&this.decorator.destroy(),this.decorator=new r(n,{items:d.items,onActivate:t.bind(this.showQuickAddPopup,this,o,n)})},onAfterAddData:function(t,e){var o=e.data.result,i=o[0];this.fire("operation.execute",{name:"added",options:{forceAppend:!0},items:[{data:i.dataItem,x:i.x,y:i.y}],layout:t})},showQuickAddPopup:function(o,i,a){var n=this,d=a.target,r=a.data.actionItems,s=t.find(r.fixed.items,function(t){return"AddAction"===t.type}),c=i.getCellByCoordinate(r),l=i.getCellsEmptyStatuses(c),u=i.isListMode()?"list":"board",f=i.getGrid().parents(".i-role-board-body-holder,.tau-entity-list"),p=function(t){t=!!t,f.prop("disabled",t),d.parent().toggleClass("tau-quick-add_expand",t),n.decorator&&(n.decorator.isActivated=t)},m={target:d,cleanupOnHide:!0,stackName:"quickAdd",showOnCreation:!0,zIndex:1e4,within:this.decorator.element,onShow:function(){p(!0)},onHide:function(){p(!1),a.deactivate(),t.each(l,function(t){t.emptyBeforeAdd&&i.cellHasCards(t.$cell)&&i.expandCell(n,e(t.$cell).attr("data-x"),e(t.$cell).attr("data-y"))})},onPositionConfig:function(t){var e=d.tauBubble("widget").height()<d.offset().top,o={my:e?"left bottom":"left top",at:e?"left-30 top":"left-30 bottom",of:d,within:t.within,collision:"fit flipfit"};return o},onArrowPositionConfig:function(t,e){var o={my:"center top",at:"center bottom",of:d,within:t.within,collision:"fit flipfit"};return"bottom"===e&&(o.my="center bottom",o.at="center top"),o},dontCloseSelectors:["#ui-datepicker-div"],componentsConfig:{components:[{name:"board plus quick add cells",type:"board.cell.quick.add",options:{slice:o,action:r,addAction:s,viewMode:u}}]}};this.fire("initBubble",m)}})});
define('tau/models/board.plus/model.board.plus.quick.add.cells',["Underscore","tau/core/extension.base"],function(e,i){return i.extend({resetLifecycle:!0,"bus overview.board.ready":function(){var i=e.bind(this.fire,this,"cellActions.init");e.delay(i,500)},"bus configurator.ready:last + slice.ready + cellActions.init:last":function(e,i,t){this.slice&&this.slice.abort();var l=t.slice.clone();this.slice=l,this.fire("slice.cells.quickadd.api.ready",l)},"bus  model.sliceInfo.retrieved:last > slice.cells.quickadd.api.ready":function(i,t,l){if(t.definition.cells&&0===t.definition.cells.types.length)return void this.fire("model.cellActions.ready",{items:[]});var s,c=e.pluck(t.x.data,"x"),n=e.pluck(t.y.data,"y"),a={$whereX:c.length?{x:{$in:c}}:void 0,$whereY:n.length?{y:{$in:n}}:void 0};switch(t.viewMode){case"board":s=l.cellActionsV2(a);break;case"timeline":s=l.cellActionsV2(a);break;default:s=l.listModeActionsV2(a)}s.done(e.bind(function(e){this.fire("model.cellActions.ready",e.data)},this))}})});
define('tau/components/component.board.plus',["tau/components/component.board.plus.base","tau/models/board.plus/model.board.slice.comet","tau/ui/extensions/board.plus/ui.board.plus.domWrapper","tau/ui/extensions/board.plus/ui.extension.board.plus.operations","tau/models/board.plus/model.board.plus.grid","tau/models/board.plus/model.board.cell.freezable","tau/ui/extensions/board.plus/ui.extension.board.plus.cells.paging","tau/ui/extensions/board.plus/ui.extension.board.plus.layout","tau/ui/extensions/board.plus/ui.extension.board.plus.dom.updater.board","tau/models/board.plus/model.board.dragndrop","tau/ui/extensions/board.plus/ui.extension.board.plus.dragndrop","tau/ui/extensions/board.plus/ui.extension.board.plus.selection.board","tau/ui/extensions/board.plus/ui.board.plus.scrollManager","tau/ui/extensions/board.plus/ui.extension.board.plus.scrollManager","tau/ui/extensions/board.plus/ui.extension.board.plus.scroll","tau/ui/extensions/board.plus/ui.extension.board.plus.sync-scroll","tau/ui/extensions/board.plus/ui.extension.board.plus.hints","tau/ui/extensions/board.plus/ui.extension.board.plus.hintsHeader","tau/ui/extensions/board.plus/ui.extension.board.plus.cardsSparklines","tau/models/board.plus/model.board.collapse","tau/models/board.plus/model.board.collapse.empty","tau/ui/extensions/board.plus/ui.extension.board.plus.collapse","tau/ui/extensions/board.plus/ui.extension.board.plus.focus","tau/ui/extensions/board.plus/ui.extension.board.plus.paging","tau/ui/extensions/board.plus/ui.extension.board.plus.full-counts.client","tau/ui/extensions/board.plus/ui.extension.board.plus.full-counts","tau/ui/extensions/board.plus/ui.extension.board.plus.cardsViewer.board","tau/models/board.plus/model.board.plus.quick.add.axes","tau/ui/extensions/board.plus/ui.extension.board.plus.quick.add.axes","tau/models/board.plus/nodata/nodata-strategies","tau/models/board.plus/model.board.nodata","tau/ui/extensions/board.plus/ui.extension.board.plus.empty.data","tau/ui/extensions/board.plus/ui.extension.board.plus.cards-lazy-loading.customized","tau/ui/extensions/board.plus/ui.extension.board.plus.progress","tau/ui/extensions/board.plus/ui.extension.board.plus.quick.add.cells","tau/models/board.plus/model.board.plus.quick.add.cells"],function(s,e,o,u,a,n,t,i,d,r,l,p,b,x,c,m,g,f,y,k,q,h,w,E,T,v,z,S,M,V,W,D,F,H,j,A){return{create:function(k){var B=k.context.configurator.getFeaturesService();u=u.extend({createDomWrapper:function(s,e,u,a){return new o(s,u,a,e)}});var C={extensions:[a,n,t,d,i,r,l,p,{extType:x,args:[new b]},c,m,g,f,y,q,h,w,E,z,F,{extType:W,args:[V.board]},{extType:D,args:["Set up your board View"]},u,H].concat(k.extensions||[])};return B.isEnabled("quick.add")&&(C.extensions=C.extensions.concat([j,A])),B.isEnabled("axes.quick.add")&&(C.extensions=C.extensions.concat([S,M])),C.extensions.push(B.isEnabled("full.counts")?T:v),B.isEnabled("comet.notifications")&&C.extensions.push({extType:e,args:[k.context.configurator]}),s.create(C,k)}}});
define('tau/components/board.core/models/model.board.plus.list',["Underscore","tau/components/board.core/models/model.board.plus"],function(e,i){return i.extend({init:function(){this._super()},onGetSliceInfo:function(e){var i=e.config.definition,o=this.getEmptyModelInfoArgs(i);o.viewMode="list",o.cardSize=this._zoomToSize(o),this.onSliceInfoRetrieved.fire(o),this.onBoardPagingSettingsRetrieved.fire(o)}})});
define('tau/models/board.plus/model.board.plus.list',["Underscore","tau/models/board.plus/model.board.plus","tau/components/board.core/models/model.board.plus.list"],function(e,o,n){return o.extend({init:function(e){var o=new n;this._super(e,o)}})});
define('tau/models/board.plus/model.board.cell.list',["Underscore","tau/models/board.plus/model.board.cell"],function(e,t){return t.extend({onGetCellContent:function(e,t){var a=this,d=t.from,n=t.to-t.from+1,i={$take:a.generateExcessTake(n),$skip:d},s=function(e){e.data.items=0!==e.data.items.length?e.data.items:[{}];var d=a.preProcessCellResponse(e.data.items[0],t);e.data.items[0]=d.dataItem,a.fire("model.cells.content.loaded",e),a.fireCellBasicInfoRetrieved(d),a.fireCardsDataReady(d.dataItem.dynamic.items)};e.list(i).done(s).fail(function(){s({data:{items:[]}})})}})});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.dom.updater.list',["jQuery","tau/components/extensions/component.extension.base"],function(e,n){return n.extend({"bus view.skeleton.built":function(e){e.data.element.children().css({opacity:0})},"bus board.element.updated":function(e){var n=e.data,t=n.oldElement,a=n.newElement;t.replaceWith(a)},"bus overview.board.ready":function(e){var n=e.data.element;n.children().css({opacity:1})}})});
define('tau/models/board.plus/model.board.dragndrop.list',["Underscore","./model.board.dragndrop"],function(e,d){return d.extend({defaultOptions:{simpleCommands:{}}})});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.selection.list',["jQuery","Underscore","tau/core/extension.base"],function(e,t,a){return a.extend({init:function(){this._super.apply(this,arguments),this.fire("view.card.selection.ref",{last:{position:-1},stack:[]})},"bus configurator.ready:last + view.card.selection.ref:last + domWrapper.ready":function(e,a,s,i){var l=this,c="tau-selected",r=i.getGrid();r.tauSelectable({items:".i-role-card",triggerSelector:":not([contenteditable=true])",ctrl:!0,forceSelection:!0,className:c,changed:function(e,a){var i=a.item,c=a.selected,r=i.data();if(c)s.last.position=i.index(),s.stack[s.stack.length-1]!==r.id&&s.stack.push(r.id);else{var n=t.indexOf(s.stack,r.id);s.stack.splice(n,1)}l.fire("view.card.selected",{element:i,selected:c})}}),l.fire("$selectable.ready",r)},"bus $selectable.ready + domWrapper.ready + overview.board.ready":function(e,t,a){var s=a.getCardByPositionOrLast(0);t.tauSelectable("select",s)},"bus domWrapper.ready:last + $selectable.ready:last + view.card.selection.ref:last + selection.reapply":function(a,s,i,l){var c=i.tauSelectable("getSelected");i.tauSelectable("option","fireEvents",!1),i.tauSelectable("select",c),i.tauSelectable("option","fireEvents",!0);var r=[];c.each(function(){r.push(e(this).data("id"))}),l.stack=t.intersection(l.stack,r);var n=null;if(0===l.stack.length)n=s.getCardByPositionOrLast(l.last.position),n.size()>0?i.tauSelectable("select",n):this.fire("view.empty.cardDetails");else{var o=l.stack[l.stack.length-1];n=s.getCardBySliceId(o),l.last.position=n.index()}},"bus $selectable.ready:last + view.card.selected":function(e,t,a){t.tauSelectable("option","fireEvents",!1),t.tauSelectable(a.selected?"select":"reset",a.element),t.tauSelectable("option","fireEvents",!0)}})});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.cardsViewer.list',["jQuery","tau/ui/behaviour/common/ui.behaviour.progressIndicator","tau/ui/extensions/board.plus/ui.board.plus.utils","tau/ui/extensions/board.plus/ui.extension.board.plus.cardsViewer.base"],function(e,t,i,a){return a.extend({resetLifecycle:!0,appOptions:{applicationId:"listPopup",turnOffLoadingIndicator:!0,integration:{showInPopup:!1},routing:{silent:!0,executeOnStart:!1},comet:{enabled:!1}},"bus viewerBus.ready + view.skeleton.built + viewPort.afterRender":function(e,t){var i=e["view.skeleton.built"].data.element,a=e["viewPort.afterRender"].data.element;i.find(".i-card-details-holder").append(a),t.fire("view.dom.ready")},subscribe:function(t){this._viewCardSelectedHandler&&this.bus.removeListener("view.card.selected",this._viewCardSelectedHandler,this.bus),this._viewCardSelectedHandler=function(e){if(e.data.selected){var t=e.data.element.data();this.isSupportedCardForView(t)&&this.loadCardDetails(t)}}.bind(this),t.on("click",".tau-id",function(t){t.ctrlKey||(t.stopPropagation(),t.preventDefault(),e(this).closest(".tau-card").trigger("mousedown"))}),this.on("view.card.selected",this._viewCardSelectedHandler)},"bus acid.ready:last + viewPort.created:last + view.load.cardDetails":function(e,t,i,a){this.fire("has.data.in.slice"),i.configurator.getBoardCacheService().setData(a.cardData),i.application.fire("history.reset"),i.application.fire("application.navigate.entity",{id:a.entityId,entity:a.entityType,acid:t})},"bus viewPort.created:last + view.empty.cardDetails":function(e,t){t.application.fire("application.exit"),this.fire("no.data.in.slice",{type:"isEmpty",reason:{noData:!0,noSetup:!1}})},"bus view.skeleton.built:last + view.cardDetails.routing":function(e,t){var i=t.element;this.showProgress(i)},"bus view.skeleton.built:last + view.cardDetails.lastResult":function(e,t){var i=t.element;this.removeProgress(i)},"bus view.skeleton.built:last + view.empty.cardDetails":function(e,t){var i=t.element;this.removeProgress(i)},"bus view.card.batch.move.completed":function(){this.fire("view.card.batch.move.completed.spec.cardsViewer")},"bus view.skeleton.built:last + refresh":function(e,t){var i=t.element;this.removeProgress(i)},"bus view.skeleton.built:last + destroy":function(e,t){var i=t.element;this.removeProgress(i)},toggleProgress:function(e,i){var a=e.find(".i-card-details-holder"),s=t.get(a);i?s.show():s.hide()},showProgress:function(e){this.toggleProgress(e,!0)},removeProgress:function(e){this.toggleProgress(e,!1)}})});
define('tau/components/component.board.plus.list',["tau/components/component.board.plus.base","tau/models/board.plus/model.board.slice.comet","tau/ui/extensions/board.plus/ui.board.plus.domWrapper","tau/ui/extensions/board.plus/ui.extension.board.plus.operations","tau/models/board.plus/model.board.plus.list","tau/models/board.plus/model.board.cell.list","tau/ui/extensions/board.plus/ui.extension.board.plus.dom.updater.list","tau/ui/extensions/board.plus/ui.extension.board.plus.cells.paging","tau/models/board.plus/model.board.dragndrop.list","tau/ui/extensions/board.plus/ui.extension.board.plus.dragndrop.base","tau/ui/extensions/board.plus/ui.extension.board.plus.selection.list","tau/ui/extensions/board.plus/ui.board.plus.scrollManager","tau/ui/extensions/board.plus/ui.extension.board.plus.scrollManager","tau/ui/extensions/board.plus/ui.extension.board.plus.cardsViewer.list","tau/ui/extensions/board.plus/ui.extension.board.plus.cardsSparklines","tau/models/board.plus/nodata/nodata-strategies","tau/models/board.plus/model.board.nodata","tau/ui/extensions/board.plus/ui.extension.board.plus.empty.data","tau/ui/extensions/board.plus/ui.extension.board.plus.cards-lazy-loading.customized","tau/ui/extensions/board.plus/ui.extension.board.plus.progress","tau/ui/extensions/board.plus/ui.extension.board.plus.quick.add.cells","tau/models/board.plus/model.board.plus.quick.add.cells"],function(e,s,o,a,u,t,n,i,r,d,l,p,b,c,x,m,g,f,y,k,w,S){return{create:function(T){var q=T.context.configurator.getFeaturesService();a=a.extend({createDomWrapper:function(e,s,a,u){return new o(e,a,u,s)}}),f=f.extend({preProcessSkeleton:function(e){e.children().css({opacity:1})}});var v={extensions:[u,t,n,i,r,d,l,{extType:b,args:[new p]},c,x,y,a,{extType:g,args:[m.list]},{extType:f,args:["Set up your details View"]},k]};return q.isEnabled("quick.add")&&(v.extensions=v.extensions.concat([w,S])),q.isEnabled("comet.notifications")&&v.extensions.push({extType:s,args:[T.context.configurator]}),e.create(v,T)}}});
define('tau/components/board.timeline/views/card/view.card-base',["Underscore","jQuery","tau/core/class","tau/ui/extensions/board.plus/ui.board.plus.dom.utils"],function(e,t,n,i){var r=n.extend({init:function(t){this._setModel(t),this.onCleared=e.Callbacks()},$dom:function(){return this._$dom},_setModel:function(e){this._model=e,this.id=this._model.id,this._$dom=this._$render()},_$render:function(){throw new Error("_$render method is not implemented in CardViewBase")},insertAt:function(){throw new Error("insertAt method is not implemented in CardViewBase")},appendTo:function(e){e.append(this._$dom)},remove:function(){this._isPlaceholder()||this._$dom.remove()},clear:function(){return this._isPlaceholder()?void 0:(this.remove(),this.onCleared.fire(this),!0)},clearArtifacts:function(){throw new Error("clearArtifacts method is not implemented in CardViewBase")},markAsChanged:function(){this._changed=!0},markAsNotChanged:function(){this._changed=!1},animateAdd:function(e){return this.whenAnimated("tau-operation_card_added",e.suspendAnimation)},animateUpdate:function(e){var t=e.suspendAnimation||!this._changed;return this.markAsNotChanged(),this.whenAnimated("tau-operation_card_updated",t)},animateRemove:function(e){return this.whenAnimated("tau-operation_card_deleted",e.suspendAnimation)},whenAnimated:function(e,n){return t.when(n?!0:i.animated(this._$dom,n?"":e))},_isPlaceholder:function(){return this._$dom.is(".tau-sortable__placeholder")}});return r});
define('tau/components/board.timeline/views/card/view.board.card',["Underscore","jQuery","tau/components/board.timeline/views/card/view.card-base","tau/ui/extensions/board.plus/ui.board.plus.dom.utils","tau/ui/templates/board.plus/customized/ui.template.boardplus.default.card.customized"],function(t,e,i,r,o){var s=i.extend({init:function(t,e,i){this._configurator=e,this._layoutFactory=i,this._super(t)},_$render:function(){var t=this._model.cardData(),e={configurator:this._configurator,dataItem:t,lazy:t.lazy,layout:this._layoutFactory(t.type.toLowerCase())};return o.render(e)},insertAt:function(t,e){this._$dom.insertAt(t,e,".i-role-card")},clearArtifacts:function(){this._$dom=e()},update:function(e){if(!this._isPlaceholder()){var i=this._$dom,r=t.filter(i.classes(),function(t){return 0===t.indexOf("i-role-permanent-")});this._setModel(e),this._$dom.addClass(r.join(" ")),i.replaceWith(this._$dom),this._$dom.text()!==i.text()&&this.markAsChanged()}},index:function(){return this._$dom.index()},isPromise:function(){return this._model.isPromise}});return s});
define('tau/components/board.timeline/views/card/view.board.existing-card',["Underscore","jQuery","tau/components/board.timeline/views/card/view.board.card"],function(e,n,r){var i=r.extend({init:function(e,n,r,i){this._$dom=e,this._super(n,r,i)},_$render:function(){return this._$dom}});return i});
define('tau/components/board.timeline/views/card/view.board.null-card',["Underscore","jQuery","tau/core/class"],function(n,e,t){var c=t.extend({init:function(n){this._id=n},clearArtifacts:function(){},clear:function(){}});return c});
define('tau/components/board.timeline/models/card/model.board.card',["Underscore","tau/core/class"],function(t,a){var n=a.extend({init:function(t){this.id=t.id,this.update(t)},update:function(t){return this._cardData=t,this},cardData:function(){return this._cardData},augment:function(a){t.extend(this._cardData.data,a),this._cardData.lazy=!1}});return n});
define('tau/components/board.timeline/view/view.cell.base',["Underscore","jQuery","tau/core/class","tau/components/board.timeline/views/card/view.board.card","tau/components/board.timeline/views/card/view.board.existing-card","tau/components/board.timeline/views/card/view.board.null-card","tau/components/board.timeline/models/card/model.board.card"],function(t,e,a,d,r,n){var i=a.extend({init:function(e,a,d,r,n){this._cellModel=e,e.onCardsAdded.add(this._addCards.bind(this)),e.onCardsUpdated.add(this._updateCards.bind(this)),e.onCardsCleared.add(this._clearCards.bind(this)),e.onCardRemoved.add(this._removeCard.bind(this)),e.onRefresh.add(this.refresh.bind(this)),this.onViewUpdated=t.Callbacks(),this._$cell=a,this._configurator=r,this._layoutFactory=d,this._renderConfig=t.defaults(n,{beforeInsert:t.identity,afterInsert:t.identity}),this._cards={}},render:function(){var t=this._createCellContent();this._appendCellContent(t)},refresh:function(){var t=this._createCellContent();this._$cell.empty(),this._appendCellContent(t)},moveCardIn:function(t,e){t.detach();var a=t.data("data-item");a.data={cardData:t.data("card-data")};var d=this._cellModel.moveCardIn(a);this._addCardToDom(this._createCardFromDom(d,t),e)},moveCardOut:function(t){this._clearCards([t.data("id")])},clearCardArtifacts:function(t){delete this._cards[t.data("id")]},_appendCellContent:function(t,e){var a=this._renderConfig,d={cell:this._$cell,content:t,dataItem:this._cellModel.dataItem,scrollToTarget:e};a.beforeInsert(d),this._$cell.append(t),a.afterInsert(d)},_convertCardsToCellContent:function(t){var e=new o;return t.forEach(function(t){this._createCard(t).appendTo(e)},this),e.children()},_createCellContent:function(){return this._convertCardsToCellContent(this._cellModel.getCardModels().range())},_createCard:function(t){return this._cards[t.id]=new d(t,this._configurator,this._layoutFactory),this._cards[t.id]},_createCardFromDom:function(t,e){return this._cards[t.id]=new r(e,t,this._configurator,this._layoutFactory),this._cards[t.id]},_getCard:function(t){return this._cards[t]||new n(t)},_clearCards:function(e){t.each(e,this._clearCard.bind(this))},_clearCard:function(t){var e=this._getCard(t);e.clear()&&delete this._cards[t]},_removeCard:function(t,e){var a=this._getCard(t.id);return a.$dom().removeClass("i-role-card"),a.animateRemove(e).then(this._clearCard.bind(this,t.id)).then(this._fireOnViewUpdated.bind(this,"deleted",[],[t.cardData()]))},_addCardToDom:function(t,e){t.insertAt(this._$cell,e.index)},_updateCardDom:function(t,e,a){a.metricsOnly?t.updateMetrics(e):t.update(e)},_updateCards:function(e,a){var d=t.map(e,function(t){t.cardData().lazy=!1;var e=this._cards[t.id];return e?this._updateCardDom(e,t,a):(e=this._createCard(t),e.markAsChanged(),this._addCardToDom(e,a)),{$dom:e.$dom(),cardData:t.cardData(),hasAnimated:e.animateUpdate(a)}},this);return this._completeUpdateOperation(d)},_addCards:function(e,a){var d=t.map(e,function(t){t.cardData().lazy=!1;var e=this._createCard(t);return this._addCardToDom(e,a),{$dom:e.$dom(),cardData:t.cardData(),hasAnimated:e.animateAdd(a)}},this);return this._completeUpdateOperation(d)},_completeUpdateOperation:function(a){return this._fireOnViewUpdated("updated",t.pluck(a,"$dom"),t.pluck(a,"cardData")),e.when.apply(e,t.pluck(a,"hasAnimated"))},_fireOnViewUpdated:function(t,e,a){this.onViewUpdated.fire({name:t,location:"card"},{$cell:this._$cell,cards:e||[],dataItems:a})}}),o=a.extend({init:function(){this._children=[]},append:function(t){this._children.push(t[0])},children:function(){return e(this._children)}});return i});
define('tau/components/board.timeline/models/cell/collection.cards',["Underscore","tau/core/class"],function(r,t){var e={id:function(r){return function(t){return t.id===r}}},n=t.extend({init:function(r,t){this._cards=r,this._ordering=t},actualCount:function(){return r.reject(this._cards,r.property("isPromise")).length},insert:function(r){var t=null;return this._ordering.isImplemented?(t=this._getSortedIndex(r),this._cards.splice(t,0,r)):(t=this._cards.length,this._cards.push(r)),t},sort:function(r){return this._ordering.isImplemented?(this.remove(r.id),this.insert(r)):this._cards.indexOf(r)},get:function(t){return r.find(this._cards,e.id(t))},range:function(r,t){return r=r||0,t=t||this._cards.length-1,this._cards.slice(r,t+1)},has:function(t){return r.any(this._cards,e.id(t))},remove:function(t){this._cards=r.reject(this._cards,e.id(t))},_getSortedIndex:function(t){return r.chain(this._cards).pluck("_cardData").pluck("orderingValue").sortedIndex(t.cardData().orderingValue,this._ordering.predicate).value()}});return n});
define('tau/components/board.timeline/models/cell/model.cell-paging.extension',["Underscore","jQuery","tau/core/class","tau/ui/extensions/board.plus/cells.paging.size.config"],function(e,n,t,i){return t.extend({getPageSize:function(e,n){var t=0;return n>1&&5>n?t=1:n>=5&&(t=2),i[e][t]},isAxisExist:function(e,n){var t=e[n];return t&&t.types&&t.types.length>0},getMaxPageSize:function(){return i[0][0]}})});
define('tau/components/board.timeline/models/cell/model.cell.base',["Underscore","tau/core/class","tau/components/board.timeline/models/cell/collection.cards","tau/components/board.timeline/models/cell/model.cell-paging.extension","tau/components/board.timeline/models/card/model.board.card"],function(e,t,i,n,d){var r=t.extend({init:function(t,i){this.definition=t,this._cardModels=null,this._setDataItem(i),this.onRefresh=e.Callbacks(),this.modelCellPagingExtension=new n;var d=0;this.modelCellPagingExtension.isAxisExist(this.definition,"y")&&++d,this.pageSize=this.modelCellPagingExtension.getPageSize(d,this.definition.zoomLevel),this.onCardRemoved=e.Callbacks(),this.onCardsAdded=e.Callbacks(),this.onCardsUpdated=e.Callbacks(),this.onCardsCleared=e.Callbacks()},processRawCardItem:e.identity,triggerRefresh:function(e){this._setDataItem(e),this.onRefresh.fire()},getCardModels:function(){return this._cardModels},_createCardModel:function(e){return new d(e)},_setDataItem:function(e){this.dataItem=e,this._cardModels=new i(this._convertCardItemsToModels(this.dataItem.dynamic.items),this._getOrdering())},_convertCardItemsToModels:function(t){return e.chain(t).unique(e.property("id")).map(this.processRawCardItem.bind(this)).map(this._createCardModel.bind(this)).value()},_removeCardById:function(e){var t=this._cardModels.get(e);return this._cardModels.remove(e),t},hasCoords:function(e){return this.dataItem.x===e.x&&this.dataItem.y===e.y},addCard:function(){throw new Error("addCard should be implemented in derived class")},updateCard:function(){throw new Error("updateCard should be implemented in derived class")},clearCard:function(e){this._cardModels.has(e)&&(this._cardModels.remove(e),this.onCardsCleared.fire([e]))},removeCard:function(e,t){var i=this._removeCardById(e);i&&this.onCardRemoved.fire(i,t)},_checkIfCardCanBeAdded:function(e){return!this._cardModels.has(e.id)},augmentCards:function(t){e.each(t,function(e){var t=this._cardModels.get(e.id);t&&t.augment(e.data)},this)},_getOrdering:function(){var t=e.defaults(e.pick(this.definition.cells.ordering,"name","direction"),{name:"Rank",direction:"Desc",isImplemented:!1,predicate:function(){throw new Error(this.name+" sort is not implemented")}});return"Rank"===t.name&&(t.isImplemented=!0,t.predicate="Desc"===t.direction?function(e){return e}:function(e){return-e}),t}});return r});
define('tau/ui/templates/timeline/ui.template.timeline.card-holder',["tau/core/templates-factory"],function(a){var e={name:"timeline.card-holder",engine:"jqote2",customFunctions:{plannedCardClass:function(a){return a.hasActual?"tau-card-planner-has-actual":""}},markup:['<div class="tau-timeline-card i-role-timeline-card">','<div class="tau-card-planner i-role-card-planner <%= fn.plannedCardClass(this.card) %> <%=this.card.fixedDatePlan ? "tau-planned-fixed-date": ""%>">','<div class="tau-start-date i-role-range-editor">','<div class="tau-start-date-arrow"></div>','<div class="ui-resizable-handle ui-resizable-w"></div>',"</div>",'<div class="tau-end-date i-role-range-editor">','<div class="tau-end-date-arrow"></div>','<div class="ui-resizable-handle ui-resizable-e"></div>',"</div>",'<div class="tau-card-holder i-role-timeline-planner-card-holder">','<div class="i-role-card-placeholder"></div>',"</div>","</div>",'<div class="i-role-timeline-card-holder tau-card-holder <%=this.card.showForecast ? "tau-card-has-forecast": ""%>">','<div class="i-role-card-placeholder"></div>',"</div>",'<div class="i-role-card-predictor tau-card-predictor"></div>',"</div>"]};return a.register(e)});
define('tau/utils/timeline/utils.timeline.relative.position.calculator',[],function(){return{cutToViewport:function(t,n){return 0>t&&(n+=t,t=0),t+n>1&&(n=1-t),{left:t,width:n}}}});
define('tau/components/board.timeline/views/card/view.timeline.card.section-base',["Underscore","jQuery","tau/core/class","tau/utils/timeline/utils.timeline.relative.position.calculator"],function(i,t,e,n){var s=e.extend({init:function(i,t){this._model=i,this._$section=t},$section:function(){return this._$section},setPosition:function(){this._prepareSection(this._$section);var i=this._isVisible();if(this._$section.visibility(i),i){var t=this._metrics(),e=n.cutToViewport(t.left,t.width);this._$section.css({left:-1===t.left?"":this._toCssPercent(e.left),width:""===t.width?"":this._toCssPercent(e.width)})}},_metrics:function(){throw new Error("_metrics is not implemented in SectionBase")},_isVisible:function(){throw new Error("_isVisible is not implemented in SectionBase")},_prepareSection:function(){},_toCssPercent:function(i){return 100*i+"%"},_zeroIfNaN:function(t){return i.isNaN(t)?0:t}});return s});
define('tau/components/board.timeline/views/card/view.timeline.card.actual-section',["Underscore","jQuery","tau/components/board.timeline/views/card/view.timeline.card.section-base"],function(t,e,i){var s=i.extend({init:function(t,e,i){this._super(t,e),this._$section.find(".i-role-card-placeholder").replaceWith(i)},setContent:function(t){this._$section.find(".i-role-card").replaceWith(t)},_prepareSection:function(t){t.css({left:"",width:0}).mousedown(function(t){var i=e(this).offset();taus.track("action",{name:"timeline-actual-part-click",width:e(this).width(),height:e(this).height(),offsetX:t.pageX-i.left,offsetY:t.pageY-i.top})})},_isVisible:function(){return this._model.showActual?!0:this._model.showForecast&&this._model.hasActual?!0:this._model.showForecast&&this._model.hasPlanned&&!this._model.hasActual},_metrics:function(){return{left:this._zeroIfNaN(this._getLeft()),width:this._width()}},_getLeft:function(){return this._model.showActual?this._model.actualLeft:this._model.showForecast&&this._model.hasPlanned&&!this._model.hasActual?this._model.plannedLeft:this._model.forecastLeft},_width:function(){var t,e;return this._model.showForecast&&this._model.hasPlanned&&!this._model.hasActual?(t=this._model.forecastLeft-this._zeroIfNaN(this._model.plannedLeft),e=this._model.forecastWidth):(t=this._model.actualWidth,e=this._model.showForecast?this._model.forecastWidth:0),this._zeroIfNaN(t)+Math.max(e,0)}});return s});
define('tau/components/board.timeline/views/card/view.timeline.card.forecast-section',["Underscore","jQuery","tau/components/board.timeline/views/card/view.timeline.card.section-base"],function(e,t,i){var n=i.extend({_isVisible:function(){return this._model.showForecast&&(this._model.hasActual||this._model.hasPlanned)},_metrics:function(){return{left:this._model.forecastLeft,width:Math.max(this._model.forecastWidth,0)}}});return n});
define('tau/components/board.timeline/views/timeline.card-metrics-editor',["Underscore","tau/core/class"],function(i,t){var e=t.extend({init:function(i){this._model=i},commit:function(){this._model.commitEdit()},resize:function(){throw new Error("Resize should be implemented in derived class")},drag:function(){throw new Error("Drag should be implemented in derived class")},leftResizeAvailable:function(){return!0},rightResizeAvailable:function(){return!0}}),n=e.extend({begin:function(){this._initial={left:this._model.plannedLeft,width:this._model.plannedWidth},this.drag(0)},drag:function(i){var t=-(this._model.plannedWidth+this._initial.left),e=1-this._initial.left;this._model.applyEdit(a(i,t,e),0)},resize:function(i,t){i==-t?this._resizeLeft(i):this._resizeRight(t)},leftResizeAvailable:function(){return this._model.plannedLeft>=0},rightResizeAvailable:function(){return this._model.plannedLeft+this._model.plannedWidth<=1},_resizeLeft:function(i){var t=-this._initial.left,e=Math.min(this._initial.width,1-this._initial.left);i=a(i,t,e),this._model.applyEdit(i,-i)},_resizeRight:function(i){var t=-this._initial.width,e=1-(this._model.plannedLeft+this._initial.width);this._model.applyEdit(0,a(i,t,e))}}),l=e.extend({begin:function(){this._initialLeft=this._model.fixedLeft},drag:function(i){this._model.applyEdit(a(i,-this._initialLeft,-this._initialLeft+1),0)},leftResizeAvailable:function(){return!1},rightResizeAvailable:function(){return!1}}),a=function(i,t,e){return Math.max(t,Math.min(e,i))},d={fixed:l,durable:n};return{createFor:function(i){return new d[i.type](i)}}});
define('tau/components/board.timeline/views/card/view.timeline.card.tooltip',["Underscore","jQuery","tau/core/class","tau/utils/utils.date"],function(t,o,e,i){var n=e.extend({init:function(t){this._$dom=this._render(),this._model=t,this._model.onMetricsUpdating.add(this._update,this),this._model.onMetricsUpdated.add(this._hide,this),this._$dom.on("remove",this._destroy.bind(this))},appendTo:function(t){this._$dom.appendTo(t)},_render:function(){return o('<div class="tau-timeline-card-tooltip" style="width:100%;"></div>').tauBubble({zIndex:999,template:['<div class="tau-bubble-board">','<div class="tau-bubble-board__arrow" role="arrow"></div>','<div class="tau-bubble-board__inner tau-container" role="content"></div>',"</div>"].join(""),className:"tau-bubble-tooltip",mode:"tooltip",showEvent:"none",stackName:"tooltip",delay:500,onPositionConfig:this._tooltipPositionConfig,onArrowPositionConfig:this._tooltipPositionConfig})},_tooltipPositionConfig:function(t){t.at="center bottom-1",t.my="center top"},_update:function(){var t=this._$dom.closest(".i-role-bubble-holder");this._$dom.tauBubble("option","appendTo",t),this._$dom.tauBubble("show").tauBubble("setContent",d[this._model.type](this._model.plannedDateRange())).tauBubble("adjust")},_hide:function(){this._$dom.tauBubble("hide")},_destroy:function(){this._model.onMetricsUpdating.remove(this),this._model.onMetricsUpdated.remove(this)}}),d={fixed:function(t){return s(t.startDate)},durable:function(t){return r(t)}},s=function(t){return i.format.datetime.short(i.convertToTimezone(t))},a=function(t){return null===t?"-&infin;":i.format.date.short(i.convertToTimezone(t))},r=function(t){return a(t.startDate)+"&nbsp;—&nbsp;"+a(t.endDate)};return n});
define('tau/components/board.timeline/views/card/view.timeline.card.planned-section',["Underscore","jQuery","tau/components/board.timeline/views/card/view.timeline.card.section-base","tau/components/board.timeline/views/timeline.card-metrics-editor","tau/ui/extensions/board.plus/ui.board.plus.dom.utils","tau/components/board.timeline/views/card/view.timeline.card.tooltip"],function(i,t,e,s,o,n){var r=e.extend({init:function(t,e,r,d){this._super(t,e),this._$section.find(".i-role-card-placeholder").replaceWith(r),this._cardMetricsEditor=s.createFor(t),this._cardMetricsConverter=d,this.onEditStarted=i.Callbacks(),this.onEditStopped=i.Callbacks(),this._$section.find(".i-role-range-editor").on("dblclick mouseenter mousemove mouseleave",o.redirectEvent.bind(this,r)),this._$section.resizable({handles:{w:this._$section.find(".ui-resizable-w"),e:this._$section.find(".ui-resizable-e")},minWidth:3,resize:this._onResize.bind(this),start:this._onEditStart.bind(this),stop:this._onEditStop.bind(this)}).draggable({axis:"x",scroll:!1,drag:this._onDrag.bind(this),start:this._onEditStart.bind(this),stop:this._onEditStop.bind(this)}).css("position","absolute"),new n(t).appendTo(this._$section)},_prepareSection:function(i){i.css({left:"",width:0})},_isVisible:function(){return this._model.showPlanned||this._model.showFixed},_metrics:function(){return this._model.convertPlannedMetrics(this._model.plannedRange())},setPosition:function(){if(this._super(),this._model.showPlanned&&this._model.showForecast&&!this._model.hasActual){var t=this._$section.find(".i-role-card");if(this._model.plannedLeft<this._model.forecastLeft)t.hide();else{var e=this._model._cardData.data.cardData.type.toLowerCase();t.removeClass("tau-card-v2_type_"+e)}}var s=this._model.plannedRange();this._$section.find(".tau-start-date").toggle(s.from>=0),this._$section.find(".tau-end-date").toggle(!i.isNull(s.to)&&s.to<=1),this._$section.find(".ui-resizable-w").toggle(this._cardMetricsEditor.leftResizeAvailable()),this._$section.find(".ui-resizable-e").toggle(this._cardMetricsEditor.rightResizeAvailable())},_onResize:function(i,t){var e=this._cardMetricsConverter.toRelative(t.position.left-t.originalPosition.left),s=this._cardMetricsConverter.toRelative(t.size.width-t.originalSize.width);this._cardMetricsEditor.resize(e,s)},_onDrag:function(i,t){var e=this._cardMetricsConverter.toRelative(t.position.left-t.originalPosition.left);this._cardMetricsEditor.drag(e),t.position.left=this._$section.position().left},_onEditStart:function(){this._cardMetricsEditor.begin(),this.onEditStarted.fire(this._model)},_onEditStop:function(){this._cardMetricsEditor.commit(),this.onEditStopped.fire(this._model)}});return r});
define('tau/components/board.timeline/views/card/view.timeline.card',["Underscore","jQuery","tau/components/board.timeline/views/card/view.card-base","tau/components/board.timeline/models/cell/model.cell.base","tau/ui/templates/timeline/ui.template.timeline.card-holder","tau/ui/extensions/board.plus/ui.board.plus.dom.utils","tau/components/board.timeline/views/card/view.timeline.card.actual-section","tau/components/board.timeline/views/card/view.timeline.card.forecast-section","tau/components/board.timeline/views/card/view.timeline.card.planned-section"],function(e,t,i,d,a,n,s,o,r){var c=i.extend({init:function(t,i,d){this._boardCardView=i,this._cardMetricsConverter=d,this.onEditStarted=e.Callbacks(),this.onEditStopped=e.Callbacks(),this._super(t),this._updateCardHolderGeometry(),this._model.onMetricsUpdating.add(this._updateCardHolderGeometry.bind(this))},insertAt:function(e,t){this._$dom.insertAt(e,t)},_updateCardHolderGeometry:function(){this._sections.actual.setPosition(),this._sections.planned.setPosition(),this._sections.forecast.setPosition()},_$render:function(){var e=a.render({card:this._model.cardData()}),t=this._boardCardView.$dom();return this._sections={planned:new r(this._model,e.find(".i-role-card-planner"),t,this._cardMetricsConverter),actual:new s(this._model,e.find(".i-role-timeline-card-holder"),t.clone(!0)),forecast:new o(this._model,e.find(".i-role-card-predictor"))},this._sections.planned.onEditStarted.add(this.onEditStarted.fire.bind(this.onEditStarted)),this._sections.planned.onEditStopped.add(this.onEditStopped.fire.bind(this.onEditStopped)),this._sections.planned.onEditStopped.add(this.markAsNotChanged.bind(this)),this._sections.forecast.$section().on("contextmenu mouseup mousedown dblclick click mouseenter mouseleave",function(e){n.redirectEvent(this._sections.actual.$section().find(".i-role-card"),e)}.bind(this)),e.data("visualMetrics",this._model.metrics()),e},update:function(e){this._model.update(e.cardData()),this._updateCardHolderGeometry(),this._boardCardView.update(this._model),this._sections.actual.setContent(this._boardCardView.$dom().clone(!0));var t=this._model.metrics();this._checkVisualMetricsChanged(t)},updateMetrics:function(e){this._model.update(e.cardData()),this._updateCardHolderGeometry()},remove:function(){this._$dom.remove()},$dom:function(){return this._$dom.find(".i-role-card")},clearArtifacts:function(){this.remove(),this.onCleared.fire(this)},animateUpdate:function(e){return this._changed&&(this._boardCardView.markAsChanged(),this.markAsNotChanged()),this._boardCardView.animateUpdate(e)},whenAnimated:function(e,t){return this._boardCardView.whenAnimated(e,t)},_checkVisualMetricsChanged:function(){var t=this._$dom.data("visualMetrics"),i=this._model.metrics();e.isEqual(t,i)||(this.markAsChanged(),this._$dom.data("visualMetrics",i))}});return c});
define('tp/jquery.utils',["jQuery"],function(){!function(t){t.fn.right=function(){return this.offset().left+this.width()},t.fn.bottom=function(){return this.offset().top+this.height()},t.fn.id=function(){return this.attr("id")},t.fn.visibility=function(t){t?"hidden"===this.css("visibility")&&this.css("visibility","visible"):this.css("visibility","hidden")},t.fn.selectClass=function(t,e,i){t?(this.removeClass(i),this.addClass(e)):(this.removeClass(e),this.addClass(i))},t.fn.stretch=function(){var e=t("html");this.height(e.height()),this.width(e.width())},t.fn.outerclick=function(e){function i(t,e){return t[0]==e[0]?!0:t.has(e).length>0}function n(n){i(this,t(n.target))||e.call(this,n)}t("body").click(t.proxy(n,this))},t.widget("ui.modal",{overlay:null,resizeHandler:null,_create:function(){this.overlay=this._createOverlay(),this.resizeHandler=t.proxy(this._onResize,this)},_createOverlay:function(){var e=t('<div class = "modalBackground" style="position:absolute; left:0px; top:0px;"/>');return e.attr("disabled","disabled"),e.zIndex(this.element.zIndex()-1),e},_onResize:function(){this.overlay.stretch()},show:function(){this._onResize(),t(window).bind("resize",this.resizeHandler),this.overlay.appendTo("body"),this.element.show()},hide:function(){t(window).unbind("resize",this.resizeHandler),this.overlay.remove(),this.element.hide()}});var e=function(t,e,i){var n={complete:i,duration:300,queue:!0};t.animate(e,n)};t.fn.minimizeTo=function(t){var i=this,n=t.target,s=t.callback,a=i.offset(),h={left:a.left,top:a.top,width:i.width(),height:i.height()};i.data(h);var r=n.offset(),l={left:r.left,top:r.top,width:0,height:0},o=function(){i.hide(),s&&s()};e(i,l,o)},t.fn.maximizeFrom=function(i){var n=this,s=i.target,a=i.callback,h=i.settings||{},r=s.offset(),l=n.data(),o=["left","top","width","height"];t.each(o,function(t,e){l.hasOwnProperty(e)&&(h[e]=l[e])}),n.hide(),n.width(0),n.height(0),n.css("left",r.left),n.css("top",r.top),n.show();var d=function(){a&&a()};e(n,h,d)},t.fn.enabled=function(e){var i={getEnable:function(t){return!t.hasClass("disabled")},setEnabled:function(t,e){e?t.removeClass("disabled"):t.addClass("disabled")}},n={getEnable:function(t){return t.is(":enabled")},setEnabled:function(t,e){e?t.removeAttr("disabled"):t.attr("disabled","disabled")}},s=n;return t(this).is("a")&&(s=i),null==e?s.getEnable(t(this)):void s.setEnabled(t(this),e)},t.repeat=function(t,e){for(var i=[],n=0;e>n;n++)i.push(t);return i},t.fn.serializeObject=function(){var e={},i=this.serializeArray();return t.each(i,function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e},t.fn.insertAt=function(t,e,i){this.detach();var n=t.children(i);if(n.length&&e){var s=Math.min(n.length,e);this.insertAfter(n.eq(s-1))}else this.prependTo(t)},t.fn.classes=function(){return(this.attr("class")||"").split(/\s+/).filter(function(t){return 0!==t.length})}}(jQuery)});
define('tau/components/board.timeline/views/timeline.card-placement-strategy',["Underscore","tau/core/class"],function(t,i){var n=i.extend({_minimumCardWidth:3,init:function(t){this._tracks=[],this._minWidthInPercent=this._minimumCardWidth/t,this._lockedCards=[]},lockCard:function(t){this._lockedCards.push(t)},unlockCard:function(i){this._lockedCards=t.without(this._lockedCards,i)},unlockAllCards:function(){this._lockedCards=[]},updatePositions:function(){var i=this._tracks;this._tracks=t.map(i,function(i,n){return{index:n,cards:t.intersection(i.cards,this._lockedCards)}},this);var n={tracksChanges:[],inTrackChanges:[]};return i.forEach(function(i){var r=t.difference(i.cards,this._lockedCards);t.each(r,function(t){var r=this.addCard(t);(i.index!==r.track||i.cards.indexOf(t)!==r.index)&&n.tracksChanges.push({cardId:t.id,position:r})},this)},this),0===this._lockedCards.length?n.tracksChanges:(i.forEach(function(i){var r=t.intersection(i.cards,this._lockedCards);t.each(r,function(t){var r=i.cards.indexOf(t),e=this._tracks[i.index].cards,a=e.indexOf(t);if(a!==r){var s,c,d;for(a>r?(s=0,c=e.length,d=1):(s=e.length-1,c=-1,d=-1);s!==c;){if(s!==a){var o=e[s].id,h={track:i.index,index:s};n.inTrackChanges.push({cardId:o,position:h})}s+=d}}},this)},this),n.tracksChanges.concat(n.inTrackChanges))},removeCard:function(i){this._tracks.forEach(function(n){n.cards=t.filter(n.cards,function(t){return t.id!==i})})},_getEffectiveCardPosition:function(t){return t._effectiveCardPosition=t._effectiveCardPosition||this._calculateEffectiveCardPosition(t),t._effectiveCardPosition},_calculateEffectiveCardPosition:function(i){var n=[i.actualLeft,i.plannedLeft,i.fixedLeft],r=[i.actualLeft+Math.max(i.actualWidth,this._minWidthInPercent),i.plannedLeft+Math.max(i.plannedWidth,this._minWidthInPercent),i.fixedLeft+2*this._minWidthInPercent];return(i.showActual||(i.hasActual||i.hasPlanned)&&i.showForecast)&&(n.push(i.forecastLeft),r.push(i.forecastLeft+Math.max(i.forecastWidth,this._minWidthInPercent))),{from:t.min(n,function(i){return t.isNaN(i)?1/0:i}),to:t.max(r,function(i){return t.isNaN(i)?-1/0:i})}},_doesNotIntersect:function(t,i){var n=this._getEffectiveCardPosition(t),r=this._getEffectiveCardPosition(i),e=1e-10;return n.from+e>r.to||n.to<r.from+e},_findTrackFor:function(i){return t.find(this._tracks,function(n){return t.every(n.cards,this._doesNotIntersect.bind(this,i),this)},this)},_getTrack:function(t){return this._tracks[t]},addCard:function(i,n){return t.isUndefined(n)?this._addCard(i,this._findTrackFor(i)):(this.lockCard(i),this._addCard(i,this._getTrack(n)))},_addCard:function(t,i){return i||(i={cards:[],index:this._tracks.length},this._tracks.push(i)),i.cards.push(t),i.cards.sort(function(t,i){return this._getEffectiveCardPosition(t).from-this._getEffectiveCardPosition(i).from}.bind(this)),{track:i.index,index:i.cards.indexOf(t)}},getMinWidthInPercent:function(){return this._minWidthInPercent}});return n});
define('tau/ui/templates/timeline/ui.template.timeline.track',["tau/core/templates-factory"],function(e){var t={name:"timeline.track",engine:"jqote2",markup:['<div class="<%= this.roleCssClass %> tau-timeline-track"></div>']};return e.register(t)});
define('tau/components/board.timeline/views/timeline.track-view-creation-strategies',["Underscore","tau/core/class","tau/ui/templates/timeline/ui.template.timeline.track"],function(t,n,e){var i="i-role-timeline-track",r=n.extend({_createDom:function(){return e.render({roleCssClass:i})},init:function(){this._$dom=this._createDom()},appendTo:function(t){this._$dom.appendTo(t)}}),o=n.extend({init:function(){this._tracks=[]},get:function(t){for(;!this._tracks[t];)this._tracks.push(new r);return this._tracks[t]._$dom},$content:function(){return t.map(this._tracks,function(t){return t._$dom})}}),c=n.extend({init:function(t){this._$dom=t},get:function(t){for(;0===this.$content().eq(t).length;)(new r).appendTo(this._$dom);return this.$content().eq(t)},$content:function(){return this._$dom.find("."+i)}}),s={InMemory:function(){return new o},InDom:function(t){return new c(t)}};return s});
define('tau/components/board.timeline/views/view.timeline.cell.tracks',["Underscore","jQuery","tp/jquery.utils","tau/core/class","tau/components/board.timeline/views/timeline.card-placement-strategy","tau/components/board.timeline/views/timeline.track-view-creation-strategies"],function(t,e,a,n,i,r){var s=n.extend({init:function(e){this.onTracksCountChanged=t.Callbacks(),this._cardPlacementStrategy=new i(e),this._tracks=r.InMemory(),this._cards={}},_onCardCleared:function(t){this.removeCard(t.id),this.updateCardCascade()},addCard:function(e,a){e.onEditStarted.add(this._cardPlacementStrategy.lockCard.bind(this._cardPlacementStrategy)),e.onEditStopped.add(this._cardPlacementStrategy.unlockCard.bind(this._cardPlacementStrategy)),e.onCleared.add(this._onCardCleared.bind(this));var n=this._cardPlacementStrategy.addCard(e._model,a.track);this._storeTracksCount(),this._setCardPosition(e,n),this._cards[e.id]=e,t.isUndefined(a.track)||(this._updatePositions(),a.forceUnlock&&this._cardPlacementStrategy.unlockCard(e._model)),this._checkTracksCountChanged()},unlockAllCards:function(){this._cardPlacementStrategy.unlockAllCards()},_setCardPosition:function(t,e){t.insertAt(this._tracks.get(e.track),e.index)},removeCard:function(t){this._cardPlacementStrategy.removeCard(t),this._cards[t]&&(this._cards[t].remove(),delete this._cards[t])},updateCardCascade:function(){this._storeTracksCount(),this._updatePositions(),this._checkTracksCountChanged()},setContainer:function(t){this._tracks=r.InDom(t)},$content:function(){return this._tracks.$content()},_updatePositions:function(){var e=this._cardPlacementStrategy.updatePositions();t.each(e,function(t){t.position?this._setCardPosition(this._cards[t.cardId],t.position):this.removeCard(t.cardId)},this),this.$content().filter(":empty").remove()},_storeTracksCount:function(){this._storedTracksCount=this.$content().length},_checkTracksCountChanged:function(){this.$content().length!=this._storedTracksCount&&this.onTracksCountChanged.fire()}});return s});
define('tau/components/board.timeline/views/view.timeline.cell.axisDates',["Underscore","jQuery","tp/jquery.utils","tau/core/class","tau/utils/timeline/utils.timeline.relative.position.calculator"],function(e,t,i,l,n){var r=l.extend({init:function(){},render:function(i){return this._$cellPlanner=t('<div class="tau-cell-planner i-role-cell-planner"></div>'),i&&this._$cellPlanner.attr("title","planned start/end dates of "+e.escape(i)),this._$cellPlanner},setCoords:function(e,t){var i=n.cutToViewport(e,t);return i.width?void this._$cellPlanner.css({left:100*Math.max(0,i.left)+"%",width:100*i.width+"%",visibility:"visible"}):void this._$cellPlanner.css({visibility:"hidden"})}});return r});
define('tau/components/board.timeline/view/view.cell.timeline',["Underscore","jQuery","tau/core/class","tau/components/board.timeline/view/view.cell.base","tau/components/board.timeline/views/card/view.timeline.card","tau/components/board.timeline/views/view.timeline.cell.tracks","tau/components/board.timeline/views/view.timeline.cell.axisDates"],function(t,e,i,a,n,r,d){function s(t){return"cell-view-"+t.dataItem.x+t.dataItem.y}var c=a.extend({init:function(e,i,a,n,s){this.onOpenCardViewRequired=t.Callbacks(),this.onCardMetricsEdit=t.Callbacks(),this.onCardMetricsEdited=t.Callbacks(),this.onTracksCountChanged=t.Callbacks(),e.onYAxisUpdated.add(this._updateAxisPlannerPosition,this),this._cellPlanner=new d,this._tracks=new r(s.timelineWidth),this._tracks.onTracksCountChanged.add(this.onTracksCountChanged.fire.bind(this.onTracksCountChanged)),this._cardMetricsConverter=new o(i),this._super(e,i,a,n,s)},refresh:function(){this._tracks=new r(this._renderConfig.timelineWidth),this._super()},_createTimelineCard:function(t,e){return t.onMetricsUpdating.add(this.onCardMetricsEdit.fire.bind(this.onCardMetricsEdit)),t.onMetricsUpdated.add(this._cellModel.movePlannedDates.bind(this._cellModel)),t.onMetricsUpdating.add(this._tracks.updateCardCascade.bind(this._tracks)),t.onMetricsUpdated.add(function(){this.onCardMetricsEdited.fire(e.$dom())}.bind(this)),new n(t,e,this._cardMetricsConverter)},_createCard:function(t){return this._cards[t.id]=this._createTimelineCard(t,this._super(t)),this._cards[t.id]},_createCardFromDom:function(t,e){return this._cards[t.id]=this._createTimelineCard(t,this._super(t,e)),this._cards[t.id]},_createCellContent:function(){t.each(this._cellModel.getVisibleCardModels(),function(t){var e=this._createCard(t);this._addCardToDom(e,{})},this);var e=this._tracks.$content();this._tracks.setContainer(this._$cell);var i=this._cellModel.getYAxisDataRange();return e.push(this._cellPlanner.render(i.data?i.data.name:null)),this._updateAxisPlannerPosition(i),e},_addCardToDom:function(t,e){this._tracks.addCard(t,e)},_completeUpdateOperation:function(t){return this._tracks.updateCardCascade(),this._super(t)},_clearCards:function(t){this._super(t),this._tracks.updateCardCascade()},moveCardIn:function(t,e){if(!this._cards[t.data("id")]){t.detach();var i=t.data("data-item");i.data={cardData:t.data("card-data")};var a=this._cellModel.moveCardIn(i),n=new l(this._$cell),r=new h(a,n,e.at),d=this._createCardFromDom(a,t);this._addCardToDom(d,e),r.edit({pageX:e.at.x}),t.on("drag."+s(this._cellModel),r.edit.bind(r))}},clearCardArtifacts:function(t){var e=t.data("id");this._getCard(e).clearArtifacts(),delete this._cards[e],this._cellModel.moveCardOut(e),t.off("."+s(this._cellModel))},moveCardOut:function(t){this.clearCardArtifacts(t)},unlockAllTrackCards:function(){this._tracks.unlockAllCards()},_updateAxisPlannerPosition:function(t){this._cellPlanner.setCoords(t.plannedLeft,t.plannedWidth)},createPlaceholderContent:e.noop}),o=i.extend({init:function(t){this._$container=t},toRelative:function(t){return t/this._$container.width()}}),l=i.extend({init:function(t){this._$container=t,this._offset=this._$container.offset(),this._maxOffset={left:t.outerWidth()-3,top:t.outerHeight()}},toRelative:function(t){return Math.min(t-this._offset.left,this._maxOffset.left)/this._$container.width()}}),h=i.extend({init:function(t,e,i){this._cardModel=t,this._cardMetricsConverter=e,this._cardModel.applyEdit(this._cardMetricsConverter.toRelative(i.x),0)},edit:function(t){var e=this._cardMetricsConverter.toRelative(t.pageX);this._cardModel.applyEdit(e,0)}});return c});
define('tau/ui/templates/board.plus/ui.template.boardplus.cell-paging-track',["tau/core/templates-factory","tau/nls/translator"],function(e){var a={name:"boardplus.cell-paging-track",engine:"jqote2",markup:['<div class="i-role-cell-paging-more tau-cell-paging-more"></div>'],dependencies:[]};return e.register(a)});
define('tau/components/board.timeline/view/view.cell.board',["Underscore","tau/core/class","jQuery","tau/components/board.timeline/view/view.cell.base","tau/ui/extensions/board.plus/ui.board.plus.dom.utils","tau/ui/templates/board.plus/ui.template.boardplus.show-more","tau/ui/templates/board.plus/ui.template.boardplus.cell-paging-track","tau/ui/behaviour/common/ui.behaviour.progressIndicator"],function(e,i,t,n,r,s,a,o){var l=i.extend({init:function(){this.onClick=e.Callbacks()},render:function(){return s.get().bind({},{}).on("click",this.onClick.fire.bind(this.onClick))}}),d=i.extend({render:function(){return a.get().bind({},{})}}),g=n.extend({init:function(i,t,n,r,s){this._pagingTriggerView=new l,this._pagingTriggerView.onClick.add(this.processPagingInCell.bind(this)),this._tempCardsTrackView=new d,this._getCellPagingTrigger=e.once(this._pagingTriggerView.render.bind(this._pagingTriggerView)),this._getTempCardsTrack=e.once(this._tempCardsTrackView.render.bind(this._tempCardsTrackView)),this._super(i,t,n,r,s),i.onDonePaging.add(this.renderRange.bind(this))},processPagingInCell:function(){this._showProgress(),this._cellModel.doPaging()},renderRange:function(e){var i=this._createContentRange(e);this._appendCellContent(i,!0)},_createContentRange:function(e){return this._convertCardsToCellContent(this._cellModel.getCardModels().range(e.from,e.to))},_appendCellContent:function(e,i){var t=this._getCellPagingTrigger(),n=this._getTempCardsTrack();this._super(e,i),this._cellModel.hasPaging?(this._adjustCellPagingTrigger(t),this._$cell.append(t).append(n)):(t.detach(),n.detach()),this._hideProgress()},_showProgress:function(){o.get(this._$cell).show(),this._$cell.parent().css("opacity",.5)},_hideProgress:function(){o.get(this._$cell).hide(),this._$cell.parent().css("opacity",1)},_adjustCellPagingTrigger:function(e){var i=this._$cell.closest(".i-role-board-body-holder"),t=i.hasClass("tau-ui-size-min"),n=!t&&i.hasClass("tau-ui-size-xl");if(!t&&!n){var r=this._$cell.find(".i-role-card:eq(0)");e.css({height:r.outerHeight(),width:r.outerWidth()})}},_addCardToDom:function(e,i){e.isPromise()?e.appendTo(this._getTempCardsTrack()):this._super(e,i)},_updateCardDom:function(i,t,n){e.isUndefined(n.index)||n.index!==i.index()&&(i.markAsChanged(),i.insertAt(this._$cell,n.index)),this._super(i,t,n)},createPlaceholderContent:r.createDragNDropPlaceholderContent});return g});
define('tau/components/board.timeline/view/view.axis-cell.board',["Underscore","jQuery","tau/core/class","tau/ui/extensions/board.plus/ui.board.plus.dom.utils","tau/ui/extensions/board.plus/ui.board.plus.utils"],function(e,t,i,a,d){return i.extend({init:function(i,a,d,s,r){this._$axisCell=a,this._model=i,this._template=s.getTemplateFactory().get("boardplus.cell.axis.skeleton"),this._renderConfig=e.defaults(r,{beforeInsert:e.identity,afterInsert:e.identity}),this.onViewUpdated=t.Callbacks(),i.onAxisUpdated.add(this._updateCard.bind(this)),i.onAxisRemoved.add(this._removeCard.bind(this))},_$createAxisItem:function(e){var t=d.convertCellAxisData({dynamic:{items:[e]}});return t.dynamic=!0,this._template.bind({},t)},render:function(){var e={cell:this._$axisCell,content:t(),dataItem:this._model.dataItem};this._renderConfig.beforeInsert(e),this._$axisCell.append(this._$createAxisItem(this._model.dataItem.dynamic.items[0])),this._renderConfig.afterInsert(e)},_fireOnViewUpdated:function(e,t,i){this.onViewUpdated.fire({name:e,location:"axis"},{$cell:this._$axisCell,cards:t||[],dataItems:i})},_updateCard:function(e){var i=e.card.data,d=this._$createAxisItem(i);this._$axisCell.empty().append(d),t.when(a.animated(d,"tau-operation_axis_updated")).then(t.noop),this._fireOnViewUpdated("updated",[d],[i])},_removeCard:function(i){var a=this._$axisCell,d=function(t,i){var a=t.attr("class")||"",d=e.reduce(i,function(e,t){return e.replace(t.key,t.val)},a);return t.attr("class",d),t},s=function(){var e=[{key:/i-role-/gi,val:"i-disabled-role-"}];d(t(this),e).removeProp("checked").prop("disabled",!0)},r=function(){var e=t(this);d(e,[{key:/i-role-(?!cell\b)/gi,val:"tau-disabled-role-"}]).addClass("tau-cellaxis__removed").css("opacity",.3),d(e.parent(".i-role-cellholder"),[{key:/i-role-(?!cellholder\b)/gi,val:"tau-disabled-role-"},{key:/tau-selected/gi,val:"tau-disabled-selected"}])};a.find("*").each(s),a.each(r),this._fireOnViewUpdated("deleted",[],[i])}})});
define('tau/components/board.timeline/view/view.timeline.registry',["Underscore","jQuery","tau/core/class","tau/ui/extensions/board.plus/ui.board.plus.utils","tau/components/board.timeline/view/view.cell.timeline","tau/components/board.timeline/view/view.cell.board","tau/components/board.timeline/view/view.axis-cell.board"],function(e,t,i,n,l,r,d){var a=i.extend({init:function(t){this._timelineRangeModel=t,this.onBeforeUpdateCell=e.Callbacks(),this.onAfterUpdateCell=e.Callbacks(),this.cellsRegistry=[],this.onCellUpdated=e.Callbacks(),this.onAxisUpdated=e.Callbacks(),this.onOpenCardViewRequired=e.Callbacks()},renderCell:function(e,t,i,n,l){return i.isTimeline?this._renderTimelineCell(l,e,t,i,n):this._renderBoardCell(e,t,i,n)},renderAxisCell:function(e,t,i,n){this._renderCell(d,e,t,i,n).done(this.addAxisCellToRegistry.bind(this))},addCellToRegistry:function(e){return e.onViewUpdated.add(function(t,i){this.onCellUpdated.fire({target:e,operation:t,result:i})}.bind(this)),this.cellsRegistry.push(e),e},addAxisCellToRegistry:function(e){return e.onViewUpdated.add(function(t,i){this.onAxisUpdated.fire({target:e,operation:t,result:i})}.bind(this)),this.cellsRegistry.push(e),e},axisCellAdded:function(e,i){this.onAxisUpdated.fire({operation:{name:"added",location:"axis",items:[e],options:i},result:{cards:[],dataItems:[e.data],$cell:t("<div></div>").data(e.data)},target:null})},moveCard:function(e,t,i,n){this.moveCardToCell(e,i,n),this.clearCardFromCell(e,t)},clearCardArtifacts:function(e,t){this._getCellViewByCoords(t).clearCardArtifacts(e)},moveCardToCell:function(e,t,i){this._getCellViewByCoords(t).moveCardIn(e,i)},clearCardFromCell:function(e,t){this._getCellViewByCoords(t).moveCardOut(e)},unlockAllTrackCards:function(){e.each(this.cellsRegistry,function(e){e.unlockAllTrackCards&&e.unlockAllTrackCards()})},_getCellViewByCoords:function(t){return t=e.defaults(t,{x:null,y:null}),e.chain(this.cellsRegistry).filter(function(e){var i=e._$cell?e._$cell.data():{};return i.x===t.x&&i.y===t.y}).last().value()||new o},_getCellElement:function(e,t){var i=n.generateId(e);return t.find("#"+i)},_renderTimelineCell:function(e,t,i,n,r){return e.then(function(e){return this._renderCell(l,t,i,n,r,{timelineWidth:e})}.bind(this)).then(this.addCellToRegistry.bind(this))},_renderBoardCell:function(e,t,i,n){return this._renderCell(r,e,t,i,n).then(this.addCellToRegistry.bind(this))},_renderCell:function(t,i,n,l,r,d){var a=this._getCellElement(l.dataItem,r);return d=e.extend({beforeInsert:this.onBeforeUpdateCell.fire.bind(this.onBeforeUpdateCell),afterInsert:this.onAfterUpdateCell.fire.bind(this.onAfterUpdateCell)},d),n.getLayoutFactory().then(function(e){var n=new t(l,a,e,i,d,this._timelineRangeModel);return n.onOpenCardViewRequired&&n.onOpenCardViewRequired.add(this.onOpenCardViewRequired.fire.bind(this.onOpenCardViewRequired)),n.render(),n}.bind(this))}}),o=i.extend({init:function(){},_$cell:t(),moveCardIn:t.noop,clearCardArtifacts:t.noop,createPlaceholderContent:t.noop});return a});
define('tau/ui/extensions/timeline/dom-wrapper/timeline.dom-wrapper',["Underscore","jQuery","tau/ui/extensions/board.plus/ui.board.plus.domWrapper","tau/ui/extensions/board.plus/ui.board.plus.utils"],function(e,r,t){return t.extend({executeClear:function(){throw new Error("Invalid usage")},insert$cardTo$cell:function(){throw new Error("Invalid usage")},getCellsEmptyStatuses:function(e){var t=this.getCellsAxisLineBySliceCoordinates({y:r(e).attr("data-y")});return this._super(t)}})});
define('tau/ui/extensions/timeline/ui.extension.timeline.view',["Underscore","jQuery","tau/ui/extensions/board.plus/ui.extension.board.plus.view","tau/ui/extensions/timeline/dom-wrapper/timeline.dom-wrapper","tau/ui/extensions/board.plus/ui.extension.board.plus.operations.strategies","tau/components/board.timeline/models/cell/model.cell-paging.extension"],function(e,t,i,n,o,l){var a=i.extend({resetLifecycle:!0,init:function(e){this._timelineWidthDeferred=t.Deferred(),this.modelCellPagingExtension=new l,this._super(e)},_getCustomizedBacklogTemplateConfig:function(i,n,o){var l=t.Deferred();return n.getLayoutFactory().done(function(t){var n=e.extend({getLayout:t,configurator:i},o);l.resolve({name:"boardplus.cell.grid.skeleton.customized",data:n})}),l},buildCellSkeleton:function(e,t,i,n){this.fire("build.timeline.cell.skeleton",{configurator:e,boardLayout:t,buildCellCommand:i,boardSkeleton:n,timelineWidthDeferred:this._timelineWidthDeferred})},buildAxisSkeleton:function(e,t,i,n){this.fire("build.timeline.axis.skeleton",{configurator:e,boardLayout:t,buildAxisCellCommand:i,boardSkeleton:n})},getCellTemplateConfig:function(e,t,i){return this._getCustomizedBacklogTemplateConfig(e,t,i)},getCoords:function(e){var t=this._super(e);return e.hasAttribute("data-istimeline")&&(t.isTimeline="true"===e.getAttribute("data-istimeline")),t},createDomWrapper:function(e,t,i,o){return new n(e,i,o,t)},"bus configurator.ready + definition.ready + model.cells.metaInfo.ready + view.skeleton.built + board.paging.settings + cardLayoutFactory.ready":function(e,t,i,n,o,l,a){var r=this.createDomWrapper(o.element,t,i,n);r.getPagingSettings=function(){return l},r.cardLayoutFactory=a,this.fire("domWrapper.ready",r)},"bus configurator.ready:last + operation.execute.done":function(e,t,i){o.applyCompleteHandler(this,t,i)},fireModelGetCellBasicInfo:function(t){var i=e.deepClone(t);e.has(i,"x")&&(i.x=null===i.x?"null":i.x),e.has(i,"y")&&(i.y=null===i.y?"null":i.y),this.fire("model.get.cell.basicInfo",i)},"bus definition.ready:last + boardSettings.ready:last + view.cellSlot.built":function(t,i,n,o){var l,a=n.boardSettings.settings.collapse||{x:[],y:[]};if(-1!==e(a.x).indexOf(o.data.x)||-1!==e(a.y).indexOf(o.data.y))l=this.modelCellPagingExtension.getMaxPageSize();else{var r=0;this.modelCellPagingExtension.isAxisExist(i,"y")&&++r,l=this.modelCellPagingExtension.getPageSize(r,i.zoomLevel)}var s=o.data;s.from=0,s.to=l-1,this.fireModelGetCellBasicInfo(s)},"bus overview.board.ready:last > view.cell.skeleton.built":function(e,t,i){this.fire("view.cell.skeleton.updated",i)},"bus overview.board.ready:last > view.cell.skeleton.element.beforeUpdate":function(e,t,i){i.scrollToTarget&&i.content.css("opacity",.15)},"bus scrollManager.ready:last > view.cell.skeleton.element.afterUpdate > resize.completed":function(t,i,n){var o=n.content;n.scrollToTarget&&o.size()>0&&e.defer(function(){i.scrollToVisibility(o.last(),{axis:"y",duration:1e3,easing:"easeInSine",offset:{top:20},onAfter:function(){o.animate({opacity:1},"slow","easeOutBounce")}})})},"bus view.skeleton.built + view.dom.ready:last":function(e,t){var i=t.element.find(".tau-timeline-flow").width();this._timelineWidthDeferred.resolve(i)}});return a});
define('tau/components/board.timeline/models/model.timeline.slice.comet',["Underscore","tau/models/board.plus/model.board.slice.comet"],function(e,o){return o.extend({fireCometTick:function(e){this.fire("operation.execute",e.data)}})});
define('tau/ui/extensions/timeline/ui.extension.timeline.operations',["Underscore","tau/core/class","tau/core/extension.base"],function(e,t,i){var n=t.extend({init:function(e,t){this._timelineCellModelRegistry=e,this._timelineAxesModelRegistry=t},getHandler:function(e,t){var i="_"+e+"_"+t;if(!this[i])throw new Error("Comet operation ["+i+"] is not supported");return this[i].bind(this)},_card_notinslice:function(e,t){this._timelineCellModelRegistry.removeCards(e,t)},_card_deleted:function(e,t){this._timelineCellModelRegistry.removeCards(e,t)},_card_updated:function(e,t){this._timelineCellModelRegistry.updateCards(e,t)},_card_cascade:function(e,t){t.suspendAnimation=!0,this._timelineCellModelRegistry.updateCards(e,t)},_card_added:function(e,t){this._timelineCellModelRegistry.addCards(e,t)},_axis_notinslice:function(e,t){this._timelineAxesModelRegistry.removeAxes(e,t)},_axis_deleted:function(e,t){this._timelineAxesModelRegistry.removeAxes(e,t)},_axis_updated:function(e,t){this._timelineAxesModelRegistry.updateAxes(e,t)},_axis_cascade:function(e,t){t.suspendAnimation=!0,this._timelineAxesModelRegistry.updateAxes(e,t)},_axis_added:function(e,t){this._timelineAxesModelRegistry.addAxes(e,t)}});return i.extend({init:function(e,t,i){this._operationsMap=new n(t,i),this._super(e)},"bus operation.highlightItems > domWrapper.ready":function(e,t,i){i.highlightAxesLines(t)},"bus operation.execute":function(e,t){var i=this.createOperation(t);this.executeOperation(i),this.fire("operation.execute.comet.done")},createOperation:function(t){var i=t.items,n=e.first(i);return{name:(t.name||n.modification).toLowerCase(),location:this._extractLocation(n.location),items:i,options:t.options||{}}},executeOperation:function(t){t=e.defaults(t,{options:{}}),this.fire("operation."+t.name,t),"cascade"===t.name&&(t.options.suspendAnimation=!0),this.handleOperationItems(t.items,t.location,t.name,t.options)},handleOperationItems:function(e,t,i,n){this._operationsMap.getHandler(t,i)(e,n)},_extractLocation:function(e){var t=(e||"card").toLowerCase();return"card"===t?"card":"axis"}})});
define('tau/utils/timeline/utils.timeline.date.position.calculator',["tau/utils/utils.date","libs/date.js/build/date"],function(t,e){return function(r){var a=t.getDiff(r.endDate,r.startDate);if(0>=a)throw new Error("End date should be greater or equal to start date.");var n=r.startDate;return{getRelativeDatePosition:function(e){var n=t.getDiff(e,r.startDate);return n/a},getCorrespondingDate:function(t){return new e(n+a*t)}}}});
define('tau/components/board.timeline/models/model.timeline.date-range',["Underscore","tau/core/class","tau/utils/timeline/utils.timeline.date.position.calculator","tau/utils/utils.date","tau/utils/timeline/utils.timeline.date-range"],function(t,e,i,n,o){var a=e.extend({init:function(){this._dateRange=null},setDateRange:function(t){this._dateRange=t,this.positionCalculator=i(t)},getDateRange:function(){return this._dateRange},getDateRelativeOffset:function(e){var i=t.isString(e)?n._convertToServerTime(n.parse(e)):e;return this.positionCalculator.getRelativeDatePosition(i)},getRelativeNowOffset:function(){return this.positionCalculator.getRelativeDatePosition(this.getNow())},getNow:function(){return n.getServerNow()},getCorrespondingDateRange:function(t){return new o(null===t.from?null:this.positionCalculator.getCorrespondingDate(t.from),null===t.to?null:this.positionCalculator.getCorrespondingDate(t.to))},serializeAsDate:function(t){var e=this.positionCalculator.getCorrespondingDate(t);return n.format.datetime.short(n.convertToTimezone(e))},getRelativeOffsetAndDuration:function(t,e){var i=this.getDateRelativeOffset(t),n=this.getDateRelativeOffset(e);return{offset:i,duration:n-i}}});return a});
define('tau/slice/timeline.factory',["Underscore","tau/core/class","tau/slice/slice.space.cached","tau/slice/url.resolver"],function(e,n,t,i){return n.extend({init:function(e){this.defaults=e||{}},create:function(n){e.defaults(n,this.defaults);var s=t.extend({isUndefinedAxis:function(e){return"x"===e?!1:this._super(e)}});return new s(n,new i({prefix:"timeline"}))}})});
define('tau/utils/timeline/utils.timeline.local-period-calculator',["tau/core/class","tau/utils/timeline/utils.timeline.date-range","libs/date.js/build/date","tau/utils/utils.date"],function(e,t,a,n){return e.extend({DEFAULT_LOCAL_DATE_RANGE_IN_PERCENT:.3,MIN_LOCAL_DATE_RANGE_IN_PERCENT:.1,MAX_LOCAL_DATE_RANGE_IN_PERCENT:.9,_setLocalDateRangeCloseToDate:function(e,n,_){var s=e.getDurationInTicks(),e=new t(new a(_-s/2),new a(_+s/2));return e.startDate.getTime()<n.startDate.getTime()?e=new t(n.startDate.clone(),new a(n.startDate+s)):e.endDate.getTime()>n.endDate.getTime()&&(e=new t(new a(n.endDate-s),n.endDate.clone())),e},scaleLocalDateRangeProportionally:function(e,n,_){var s,i=t.tryParseWithRoundedDays(n),E=t.tryParse(e),D=E.getDurationInTicks();i.isValid?s=D/i.getDurationInTicks():(s=D/_.getDurationInTicks(),s<this.MIN_LOCAL_DATE_RANGE_IN_PERCENT?s=this.MIN_LOCAL_DATE_RANGE_IN_PERCENT:s>this.MAX_LOCAL_DATE_RANGE_IN_PERCENT&&(s=this.MAX_LOCAL_DATE_RANGE_IN_PERCENT));var r=new a(E.startDate+D/2);return this._setLocalDateRangeCloseToDate(_.scale(s),_,r)},setLocalDateRangeCloseToNow:function(e){var t=n.getServerNow();return this._setLocalDateRangeCloseToDate(e.scale(this.DEFAULT_LOCAL_DATE_RANGE_IN_PERCENT),e,t)}})});
define('tau/components/board.core/models/model.board.plus.timeline',["require","Underscore","jQuery","tau/components/board.core/models/model.board.plus.grid","tau/utils/timeline/utils.timeline.date-range","tau/slice/timeline.factory","tau/utils/timeline/utils.timeline.local-period-calculator"],function(e){var t=e("Underscore"),n=e("jQuery"),i=e("tau/components/board.core/models/model.board.plus.grid"),a=e("tau/utils/timeline/utils.timeline.date-range"),l=e("tau/slice/timeline.factory"),o=e("tau/utils/timeline/utils.timeline.local-period-calculator"),r=i.extend({init:function(e){this.timelineRangeModel=e,this.onTimelineError=t.Callbacks(),this.onTimelineLocalDateRangeChanged=t.Callbacks(),this.onTimelineGlobalDateRangeChanged=t.Callbacks(),this.localRangeCalculator=new o,this._super(e)},setDateRange:function(e){this.timelineRangeModel.setDateRange(e)},startLifeCycle:function(e,t){this._queryDeferred=n.Deferred(),this._super(e,t)},getViewMode:function(){return"timeline"},getSliceFactory:function(){var e=this.getConfigurator().getSliceFactoryOptions();return new l(e)},createDefinition:function(){var e=this._super(),t=this._boardConfig.timelineGlobalDateRange;return e.timelineGlobalDateRange=t,e.user.globalDateRange=a.tryParseWithRoundedDays(t).toJSON(),e.user.plannedInPast=this._boardConfig.timelineSettings.showPlannedInPast,e.user.showForecast=this._boardConfig.timelineSettings.showForecast,e},updateBoardSettings:function(e){this._super(e),e.bind({fields:["timelineLocalDateRange"],listener:this,callback:this._onTimelineLocalDateRangeChanged.bind(this)}),e.bind({fields:["timelineGlobalDateRange"],listener:this,callback:this._onTimelineGlobalDateRangeChanged.bind(this)})},_boardConfigReady:function(e,t){this._super(e,t),this._onTimelineGlobalDateRangeChanged(t),this._onTimelineLocalDateRangeChanged(t)},_getDefaultTimelineLocaDateRange:function(e){return this.localRangeCalculator.setLocalDateRangeCloseToNow(e)},_onTimelineLocalDateRangeChanged:function(e){var t=a.tryParse(e.timelineLocalDateRange);if(!t.isValid){var n=a.tryParseWithRoundedDays(e.timelineGlobalDateRange);if(!n.isValid)return;t=this._getDefaultTimelineLocaDateRange(n),e.timelineLocalDateRange=t.toFullISOString(),this.setTimelineLocalDateRange(t)}this.timelineRangeModel.setDateRange(t),this.onTimelineLocalDateRangeChanged.fire(t)},_onTimelineGlobalDateRangeChanged:function(e){var t=a.tryParseWithRoundedDays(e.timelineGlobalDateRange);this.onTimelineGlobalDateRangeChanged.fire(t)},setQuery:function(e){this._queryDeferred.resolve(e)},queryCells:function(e){return this._getSliceDeferred.then(function(t){return t().cell(e)})},queryDensity:function(e){var i={$set:{BucketsCount:e}};return n.when(this._getSliceDeferred,this._queryDeferred).then(function(e,n){return e().density(t.extend(i,n))}.bind(this))},movePlannedDates:function(e){var i={itemId:e.id,position:{plannedStartDate:e.plannedStartDate?e.plannedStartDate:null,plannedEndDate:e.plannedEndDate?e.plannedEndDate:null}},a={$set:{items:[i]}};return n.when(this._getSliceDeferred).then(function(n){return n().movePlannedDatesBatch(a).fail(e.onError.bind(e)).done(function(n){var i=t.find(n.data.items[0].items,function(t){return t.dataItem.id==e.id});t.extend(e,i.dataItem),e.onSuccess()})})},setTimelineLocalDateRange:function(e){this.getBoardSettings().set({set:{timelineLocalDateRange:e.toFullISOString()}})},requestMarks:function(e,n,i){var a=t.clone(n);return n.focus.x=[],this._super(e,a,i)},_forceUpdateSliceOnZoomLevelChanged:function(){}});return r});
define('tau/components/board.timeline/models/timeline.model.board.cell.freezable',["Underscore","jQuery","tau/models/board.plus/model.board.cell.freezable"],function(e,i,t){return t.extend({init:function(e,i,t){this.timelineCellModelRegistry=i,this.timelineAxesModelRegistry=t,this._super(e),this.on("refresh",function(){this.timelineCellModelRegistry.clear(),this.timelineAxesModelRegistry.clear()}.bind(this)),this.on("definition.ready",function(e){var i=e.data;this.timelineCellModelRegistry.setDefinition(i)}.bind(this))},_isCell:function(e){var i=e.coords;return i.x&&i.y},fireModelGetCellBasicInfo:function(i){var t=e.deepClone(i);e.has(t,"x")&&(t.x=null===t.x?"null":t.x),e.has(t,"y")&&(t.y=null===t.y?"null":t.y),this.fire("model.get.cell.basicInfo",t)},_registerCell:function(e,i){var t=this.timelineCellModelRegistry.registerCell(e.dataItem,e.coords,i);t.onDoPaging&&t.onDoPaging.add(function(e){this.fire("paging.cell.show.more",{}),this.fireModelGetCellBasicInfo(e)}.bind(this))},_initializeCells:function(e){this._isCell(e)?"null"!=e.coords.y?this.timelineAxesModelRegistry.getAxes({y:e.coords.y}).done(this._registerCell.bind(this,e)):this._registerCell(e):this.timelineAxesModelRegistry.registerAxisCell(e.dataItem,e.coords)},_updateCellsPaging:function(i){this._isCell(i)&&this.timelineCellModelRegistry.whenCellRegistered(i.coords).then(function(t){var l=e(i.coords).pick("from","to");l.dataItem=i.dataItem,t.triggerPaging(l)})},fireCellBasicInfoRetrieved:function(e){0===e.coords.from?this._initializeCells(e):this._updateCellsPaging(e),this._super(e)},"bus slice.ready":function(e,i){i.lazy.on("after.cardsDetails",function(e){this.timelineCellModelRegistry.registerLazyData(e.data.result.items)}.bind(this))},queryCells:function(e,i){var t=e.config.definition;t.user.globalDateRange?this._super(e,i):this.skipQueryCells()}})});
define('tau/components/board.timeline/models/card/model.timeline.card',["Underscore","tau/core/class","tau/components/board.timeline/models/card/model.board.card"],function(t,e,n){var i=n.extend({type:"base",init:function(e,n){if(t.isUndefined(n))throw new Error("dateRangeModel should be defined");this._isDirty=!1,this.onMetricsUpdating=t.Callbacks(),this.onMetricsUpdated=t.Callbacks(),this._dateRangeModel=n,this.id=e.id,this.update(e)},update:function(t){this._isDirty||this._updateCore(t)},_updateCore:function(e){if(e.showActual&&!e.hasActual)throw new Error("Actual inconsistency");if(e.showPlanned&&!e.hasPlanned)throw new Error("Planned inconsistency");if(e.fixedDatePlan&&e.showPlanned)throw new Error("Planned and Fixed inconsistency");if(e.showForecast&&!e.hasForecast)throw new Error("Forecast inconsistency");t.extend(this,this._extractMetrics(e)),this._cardData=e,this._validState=t.clone(e),this._clearCache()},isUnfinished:function(){return this._cardData.hasActual&&this._cardData.inProgress},metrics:function(){return this._extractMetrics(this)},_extractMetrics:function(){return{}},plannedRange:function(){throw new Error("plannedRange should be implemented in derived classes")},plannedDateRange:function(){return this._dateRangeModel.getCorrespondingDateRange(this.plannedRange())},convertPlannedMetrics:function(){throw new Error("convertPlannedMetrics should be implemented in derived classes")},applyEdit:function(){this._isDirty=!0,this._clearCache(),this.onMetricsUpdating.fire(this)},commitEdit:function(){this._isDirty=!1,this.onMetricsUpdated.fire(this)},rollbackEdit:function(){this.update(this._validState),this.onMetricsUpdating.fire(this)},_clearCache:function(){this._effectiveCardPosition=null}});return i});
define('tau/components/board.timeline/models/card/model.timeline.durable-card',["Underscore","tau/core/class","tau/utils/timeline/utils.timeline.date","tau/components/board.timeline/models/card/model.timeline.card"],function(t,e,n,a){var i=a.extend({type:"durable",_updateCore:function(t){this.isStartDateInfinite=n.isInfinite(t.plannedStartDate),this.isEndDateInfinite=n.isInfinite(t.plannedEndDate),this._super(t)},_extractMetrics:function(t){return{showPlanned:t.showPlanned,showActual:t.showActual,showFixed:t.showFixed,showForecast:t.showForecast,hasActual:t.hasActual,hasForecast:t.hasForecast,hasPlanned:t.hasPlanned,plannedLeft:t.plannedLeft,plannedWidth:t.plannedWidth,actualLeft:t.actualLeft,actualWidth:t.actualWidth,forecastLeft:t.forecastLeft,forecastWidth:t.forecastWidth}},plannedRange:function(){return{from:this.isStartDateInfinite?null:this.plannedLeft,to:this.isEndDateInfinite?null:this.plannedLeft+this.plannedWidth}},convertPlannedMetrics:function(e){return{left:e.from,width:t.isNull(e.to)?1-e.from:e.to-e.from}},applyEdit:function(t,e){this.plannedLeft=this._cardData.plannedLeft+t,this.plannedWidth=this._cardData.plannedWidth+e,this._super(t,e)},commitEdit:function(){this._cardData.plannedLeft=this.plannedLeft,this._cardData.plannedWidth=this.plannedWidth,this._super()}});return i});
define('tau/components/board.timeline/models/card/model.timeline.fixed-card',["Underscore","tau/core/class","tau/components/board.timeline/models/card/model.timeline.card"],function(e,t,i){var n=i.extend({type:"fixed",_extractMetrics:function(e){return{showFixed:e.showFixed,fixedDatePlan:e.fixedDatePlan,fixedLeft:e.fixedLeft}},plannedRange:function(){return{from:this.fixedLeft,to:null}},convertPlannedMetrics:function(t){return{left:t.from,width:e.isNull(t.to)||e.isNull(t.to)?"":t.to-t.from}},applyEdit:function(e,t){if(0!==t)throw new Error("Cannot change fixed card width");this.fixedLeft=this._cardData.fixedLeft+e,this._super(e,t)},commitEdit:function(){this._cardData.fixedLeft=this.fixedLeft,this._super()}});return n});
define('tau/components/board.timeline/models/cell/model.cell.timeline',["Underscore","jQuery","tau/components/board.timeline/models/cell/model.cell.base","tau/utils/utils.date","tau/utils/timeline/utils.timeline.date-range","tau/components/board.timeline/models/card/model.timeline.durable-card","tau/components/board.timeline/models/card/model.timeline.fixed-card"],function(e,t,a,i,n,d,s){var r=a.extend({init:function(t,a,i,n){if(!t)throw new Error("definition is not defined");if(!a)throw new Error("dataItem is not defined");if(!i)throw new Error("timelineRangeModel is not defined");this.onYAxisUpdated=e.Callbacks(),this._yAxisModel=n||l,this._yAxisModel.onAxisUpdated.add(this._fireYAxisDataUpdated,this),this.isTimeline=!0,this.timelineRangeModel=i,this.onMovePlannedDates=e.Callbacks(),this._super(t,a)},_createCardModel:function(e){return e.fixedDatePlan?new s(e,this.timelineRangeModel):new d(e,this.timelineRangeModel)},_fireYAxisDataUpdated:function(e){this.onYAxisUpdated.fire(this.processRawCardItem(e.card.data))},getYAxisDataRange:function(){return this.processRawCardItem(this._yAxisModel.getAxisCellItem(this.dataItem.y))},_processFixedSection:function(e){e.fixedDate=o(e.plannedStartDate),this._isInTimelineRange(e.fixedDate,e.fixedDate)&&(e.fixedLeft=this.timelineRangeModel.getDateRelativeOffset(e.fixedDate),e.showFixed=!0,e.isVisible=!0)},_processActualSection:function(e){e.inProgress=e.inProgress||!e.actualEndDate,e.actualEndDate=o(e.actualEndDate,i.getServerNow(),e.inProgress),e.actualStartDate=o(e.actualStartDate,e.actualEndDate);var t=e.actualStartDateBoundToPlannedStartDate?e.actualStartDate<e.actualEndDate:!0;if(this._isInTimelineRange(e.actualStartDate,e.actualEndDate)&&t){var a=this.timelineRangeModel.getRelativeOffsetAndDuration(e.actualStartDate,e.actualEndDate);e.actualLeft=a.offset,e.actualWidth=a.duration,e.showActual=!0,e.isVisible=!0}},_processPlannedSection:function(e){if(e.plannedEndDate=o(e.plannedEndDate),e.plannedStartDate=o(e.plannedStartDate),this._isInTimelineRange(e.plannedStartDate,e.plannedEndDate)){var t=this.timelineRangeModel.getRelativeOffsetAndDuration(e.plannedStartDate,e.plannedEndDate);e.plannedLeft=t.offset,e.plannedWidth=t.duration,e.showPlanned=!0,e.isVisible=!0}},_processForecastSection:function(e){e.hasForecast=!0,e.forecastStartDate=i.getServerNow(),e.forecastEndDate=o(e.forecastEndDate,i.getServerNow());var t=e.hasActual&&e.hasPlanned&&e.plannedEndDate<e.forecastStartDate;if(t||this._isInTimelineRange(e.forecastStartDate,e.forecastEndDate)){var a=this.timelineRangeModel.getRelativeOffsetAndDuration(e.forecastStartDate,e.forecastEndDate);e.forecastLeft=a.offset,e.forecastWidth=a.duration,e.showForecast=!0,e.isVisible=!0}},processRawCardItem:function(t){return e.extend(t,{actualLeft:0/0,actualWidth:0/0,showActual:!1,plannedLeft:0/0,plannedWidth:0/0,showPlanned:!1,forecastLeft:0/0,forecastWidth:0/0,showForecast:!1,fixedLeft:0/0,showFixed:!1,isVisible:!1}),t.fixedDatePlan&&t.plannedStartDate&&this._processFixedSection(t),t.hasActual&&(t.actualStartDate||t.actualEndDate)&&this._processActualSection(t),t.hasPlanned&&t.plannedStartDate&&t.plannedEndDate&&this._processPlannedSection(t),t.forecastEndDate&&this._processForecastSection(t),t},extendUnfinishedCardsToNow:function(t){return e.chain(this.getVisibleCardModels()).filter(function(e){return e.isUnfinished()}).each(this._reprocessCardModel.bind(this)).tap(function(e){!t&&e.length&&this.onCardsUpdated.fire(e,{suspendAnimation:!0,metricsOnly:!0})}.bind(this)).value()},updateCardsPositions:function(){var t=this.getVisibleCardModels();e.each(this.getCardModels().range(),this._reprocessCardModel.bind(this));var a=this.getVisibleCardModels(),i=e.difference(a,t),n=e.difference(t,a);this.extendUnfinishedCardsToNow(!0),this.onCardsCleared.fire(e.pluck(n,"id")),this.onCardsAdded.fire(i,{suspendAnimation:!0}),this.onCardsUpdated.fire(a,{suspendAnimation:!0,metricsOnly:!0}),this.onYAxisUpdated.fire(this.getYAxisDataRange())},addCard:function(e,t){e=this.processRawCardItem(e);var a=this._createCardModel(e);this._checkIfCardCanBeAdded(a)&&(this._cardModels.insert(a),e.isVisible&&(this.extendUnfinishedCardsToNow(!0),this.onCardsAdded.fire([a],t)))},_reprocessCardModel:function(e){var t=this.processRawCardItem(e.cardData());e.update(t)},getVisibleCardModels:function(){return e.filter(this._cardModels.range(),function(e){return e._cardData.isVisible})},updateCard:function(e,t){e=this.processRawCardItem(e);var a=this._cardModels.get(e.id);a?a.update(e):this._cardModels.insert(this._createCardModel(e)),e.isVisible?(this.extendUnfinishedCardsToNow(!0),this.onCardsUpdated.fire([this._cardModels.get(e.id)],t)):this.onCardsCleared.fire([e.id])},movePlannedDates:function(t){var a=this,i={id:t.id,onError:function(){t.rollbackEdit()},onSuccess:function(){var i=e.pick(this,"plannedStartDate","plannedEndDate");a.updateCard(e.extend({},t.cardData(),i),{suspendAnimation:!0})}},n=t.plannedRange();null!==n.from&&(i.plannedStartDate=this.timelineRangeModel.serializeAsDate(n.from)),null!==n.to&&(i.plannedEndDate=this.timelineRangeModel.serializeAsDate(n.to)),this.onMovePlannedDates.fire(i)},_checkIfCardCanBeAdded:function(e){var t=e._cardData;return(this._isInTimelineRange(t.actualStartDate,t.actualEndDate)||this._isInTimelineRange(t.plannedStartDate,t.plannedEndDate))&&this._super(e)},_isInTimelineRange:function(e,t){return this.timelineRangeModel.getDateRange().intersects(new n(e,t))},getMoveParameters:function(e){return e.forEach(function(e){if(this._cardBeingEdited){var t=this._cardBeingEdited.plannedRange();e.position={plannedStartDate:this.timelineRangeModel.serializeAsDate(t.from),plannedEndDate:this.timelineRangeModel.serializeAsDate(t.to)}}}.bind(this)),e},moveCardIn:function(t){var a={isVisible:!0,showPlanned:!0,plannedLeft:0,plannedWidth:.3};return this._cardBeingEdited=this._createCardModel(e.extend(a,t)),this._cardBeingEdited},moveCardOut:function(){this._cardBeingEdited=null}}),o=function(t,a,n){return t=n?a:t||a,e.isString(t)?i._convertToServerTime(i.parse(t)):t},l={onAxisUpdated:e.Callbacks(),getAxisCellItem:function(){return{}}};return r});
define('tau/components/board.timeline/models/cell/model.cell.board',["Underscore","jQuery","tau/components/board.timeline/models/cell/model.cell.base"],function(e,i,t){var a={type:function(e){return function(i){return i.type===e}}},s=t.extend({init:function(i,t){this._super(i,t),this.isTimeline=!1,this.onDoPaging=e.Callbacks(),this.onDonePaging=e.Callbacks(),this.processPaging(this.dataItem.fixed.items)},processPaging:function(i){var t=e.find(i,a.type("cellpaging"));t?(this.hasPaging=!0,this.nextOrderingValue=t.data.nextOrderingValue):(this.hasPaging=!1,this.nextOrderingValue=e.MAX_INT)},doPaging:function(){var e=this.getCardModels().actualCount();this.onDoPaging.fire({x:this.dataItem.x,y:this.dataItem.y,from:e,to:e+this.pageSize-1})},triggerPaging:function(i){var t=this._convertCardItemsToModels(i.dataItem.dynamic.items),a=e.pluck(t,"id"),s=e.filter(a,this._cardModels.has.bind(this._cardModels));e.each(s,this.clearCard,this),e.each(t,this._cardModels.insert.bind(this._cardModels)),this.processPaging(i.dataItem.fixed.items);var r=e.pick(i,"from","to");this.onDonePaging.fire(r)},_isInCellPaging:function(e){if(!this.hasPaging)return!1;var i=this._getOrdering();return i.isImplemented&&i.predicate(e.orderingValue)>=this.nextOrderingValue},updateCard:function(e,i){e=this.processRawCardItem(e);var t=this._cardModels.get(e.id);(t||!this._isInCellPaging(e))&&(t?(t.update(e),i.index=this._cardModels.sort(t)):i.index=this._cardModels.insert(this._createCardModel(e)),this.onCardsUpdated.fire([this._cardModels.get(e.id)],i))},addCard:function(e,i){e=this.processRawCardItem(e);var t=this._isInCellPaging(e);if(!t||i.forceAppend){var a=this._createCardModel(e);t?(a.isPromise=!0,this._cardModels.insert(a),this.onCardsAdded.fire([a],i)):this._checkIfCardCanBeAdded(a)&&(i.index=this._cardModels.insert(a),this.onCardsAdded.fire([a],i))}},moveCardIn:function(e){return this._createCardModel(e)},getMoveParameters:e.identity});return s});
define('tau/components/board.timeline/models/model.timeline.cells.registry',["Underscore","jQuery","tau/core/class","tau/components/board.timeline/models/cell/model.cell.timeline","tau/components/board.timeline/models/cell/model.cell.board"],function(e,n,t,i,r){return t.extend({init:function(e){this.timelineRangeModel=e,this.clear()},setDefinition:function(e){this.definition=e},_getSliceItemDeferred:function(t,i,r){var a=e.find(t,function(e){return e.x===i.x&&e.y===i.y});if(a&&r){var l=t.indexOf(a);t.splice(l,1),a=null}return a||(a={x:i.x,y:i.y,value:n.Deferred()},t.push(a)),a},_getCellDeferred:function(e,n){return this._getSliceItemDeferred(this.cellDeferreds,e,n)},registerCell:function(n,t,a){var l=this._getCellDeferred(t,!0),o=e.find(n.fixed.items,function(e){return"timeline"===e.type}),d=o?new i(this.definition,n,this.timelineRangeModel,a):new r(this.definition,n,a);return l.value.resolve(d),d},clear:function(){this.cellDeferreds=[]},whenCellRegistered:function(e){var n=this._extractCellCoords(e);return this._getCellDeferred(n).value.promise()},broadcastCells:function(n){e.each(this.cellDeferreds,function(e){e.value.done(n)})},extendUnfinishedCardsToNow:function(){var n=function(e){e.isTimeline&&e.extendUnfinishedCardsToNow(!1)};e.each(this.cellDeferreds,function(e){e.value.done(n)})},updateCardsPositions:function(){var n=function(e){e.isTimeline&&e.updateCardsPositions()};e.each(this.cellDeferreds,function(e){e.value.done(n)})},getRelativeNowOffset:function(){return this.timelineRangeModel.getRelativeNowOffset()},addCards:function(n,t){var i=function(e,n){n.addCard(e.data,t)};e.each(n,function(n){this.whenCellRegistered(n).done(e.bind(i,null,n))},this)},removeCards:function(n,t){var i=function(e,n){n.removeCard(e,t)};e.each(n,function(n){this.broadcastCells(e.bind(i,null,n.data.id))},this)},updateCards:function(n,t){var i=function(e,n){n.clearCard(e)},r=function(e,n){n.updateCard(e.data,t)},a=e.map(n,function(n){return this.whenCellRegistered(n).done(e.bind(r,null,n)),this._extractCellCoords(n)},this);e(n).chain().map(function(e){return e.data.id}).uniq().each(function(n){this.broadcastCells(function(t){e.any(a,t.hasCoords.bind(t))||i(n,t)})}.bind(this)).value()},moveCards:function(n,t){e.each(n,function(e){this.broadcastCells(function(n){n.clearCard(e.dataItem.id)})},this),e.each(n,function(n){this.whenCellRegistered(n).then(function(i){i.updateCard(n.dataItem,e.extend(e.pick(n,"track"),t,{forceUnlock:!0}))})},this)},_extractCellCoords:function(n){return e(n).chain().pick("x","y").defaults({x:"null",y:"null"}).value()},registerLazyData:function(e){this.broadcastCells(function(n){n.augmentCards(e)})}})});
define('tau/components/board.timeline/models/cell/model.cell.timeline.axes',["Underscore","jQuery","tau/core/class"],function(t,e,i){return i.extend({init:function(e){this.isAxis=!0,this.dataItem=e,this.onAxisRemoved=t.Callbacks(),this.onAxisUpdated=t.Callbacks()},_findItemById:function(e,i){return t.find(e,function(t){return t.id===i})},_removeAxisCellItemById:function(e){var i=this.getAxisCellItems(),n=this._findItemById(i,e);if(n){var s=t.indexOf(i,n);i.splice(s,1)}return n},getAxisCellItem:function(e){return t.find(this.getAxisCellItems(),function(t){return t.id==e})},getAxisCellItems:function(){return this.dataItem.dynamic.items},removeAxis:function(t){var e=this._removeAxisCellItemById(t);e&&this.onAxisRemoved.fire(e)},updateAxis:function(e){var i=this.getAxisCellItems(),n=this._findItemById(i,e.data.id);n?t.extend(n,{plannedStartDate:null,plannedEndDate:null},e.data):i.push(e.data),this.onAxisUpdated.fire({card:e,diff:[]})}})});
define('tau/components/board.timeline/models/model.timeline.axes.registry',["Underscore","jQuery","tau/core/class","tau/components/board.timeline/models/cell/model.cell.timeline.axes"],function(e,i,t,n){return t.extend({init:function(i){this.timelineRangeModel=i,this.onAxisCellAdded=e.Callbacks(),this.clear()},_getSliceItemDeferred:function(t,n,r){var s=e.find(t,function(e){return e.x===n.x&&e.y===n.y});if(s&&r){var d=t.indexOf(s);t.splice(d,1),s=null}return s||(s={x:n.x,y:n.y,value:i.Deferred()},t.push(s)),s},_getAxisDeferred:function(e,i){return this._getSliceItemDeferred(this.axesDeferreds,e,i)},registerAxisCell:function(e,i){null==i.x&&delete i.x,null==i.y&&delete i.y;var t=this._getAxisDeferred(i,!0),r=new n(e);return t.value.resolve(r),this},getAxes:function(e){return this._getAxisDeferred(e,!1).value},clear:function(){this.axesDeferreds=[]},whenAxisRegistered:function(e){return this._getAxisDeferred(e).value.promise()},broadcastAxes:function(i){e.each(this.axesDeferreds,function(e){e.value.done(i)})},_extractAxisCoords:function(i){return e.pick(i,"x","y")},updateAxes:function(i){var t=function(e,i){i.updateAxis(e)};e(i).chain().reduce(function(i,n){var r=this._extractAxisCoords(n);return this.whenAxisRegistered(r).done(e.bind(t,null,n)),i.push(r),i}.bind(this),[]).value()},removeAxes:function(i){var t=function(e,i){i.removeAxis(e)};e.each(i,function(i){this.broadcastAxes(e.bind(t,null,i.data.id))},this)},addAxes:function(i,t){var n=function(e){this.onAxisCellAdded.fire(e,t)};e.each(i,function(i){var t=this._extractAxisCoords(i),r=e(i).chain().pick("x","y").defaults({fixed:{items:[]},dynamic:{items:[i.data]}}).value();this.registerAxisCell(r,t).whenAxisRegistered(t).done(e.bind(n,this,i))},this)}})});
define('tau/ui/extensions/board.plus/layout/size.calculator-timeline',["Underscore","jQuery"],function(e,t){return{initializeHeaderCells:function(e){var i=e.model,a=e.$element,n=[],l=function(e){var a="x"===e?"cols":"rows",l="x"===e?"width":"height";return function(){var r=t(this);if(!r.parent().attr("data-is-hidden")){var s=r.data(),c=s[e],d={$el:r,data:s,syncItem:i[a][c],syncSize:l};n.push(d)}}},r=a.find(".i-role-header");return r.filter("[data-dimension=x]").find(".i-role-cell").each(l("x")),r.filter("[data-dimension=y]").find(".i-role-cell").each(l("y")),n},calculateHeight:function(t){var i=t.row,a=i.items[0].$el,n=i.items[1].$el;a.add(n).css({height:"","min-height":""});var l=[a[0].clientHeight,n[0].clientHeight,i.minHeight];return e.max(l)},applyHeight:function(t,i){var a=i.headerCell,n=i.row;a&&a.lastHeight!==t&&(a.lastHeight=t,a.$el.css({height:t,"min-height":t})),e(n.items).each(function(e){e.$el.css({height:t})})},getCardsInRow:function(e,t){return e.isCollapsed?e.cardsInRow:6==t?1:e.cardsInRow},calculateWidth:function(e){var t=e.ctx,i=this.getCardsInRow(e.col,e.zoomLevel),a=e.col.extraWidth,n=t.getCardWidth(e.col);return i*n+a},applyWidth:function(e,t){var i=t.headerCell,a=i.$el.data(),n=a.isbacklog?0:1,l=".i-role-timeline-column",r=i.$el.closest(".i-role-board-body").find(l).eq(n);if(a.isbacklog&&i.lastWidth!==e){i.lastWidth=e;var s=parseInt(i.$el.css("padding-left"),10),c=2*s+e;i.$el.css({width:c});var d=parseInt(r.css("left"),10);r.css({width:c}).next(l).css({left:d+c})}}}});
define('tau/ui/extensions/board.plus/layout/ui.timeline.layout',["Underscore","jQuery","tau/ui/extensions/board.plus/layout/ui.board.plus.layout","tau/ui/extensions/board.plus/layout/size.calculator-timeline"],function(e,t,i,l){return i.extend({init:function(){this._super(l),this.scrollKeeperClass="i-role-scroll-keeper",this.scrollKeeperSelector="."+this.scrollKeeperClass},getFixedColumnSize:function(e){var t=this._super(e),i=this.isColumnCollapsed(e);if(!t&&!i){var l=this.getBacklogColumnId();if(l&&e==l)return 2}return t},iteratorUpdateCell:function(e){e.data.x===this.getBacklogColumnId()&&this._super(e)},beforeRowsHeightRecalculation:function(){var e=this.$el.find(".tau-timeline-flow");this.$el.find(this.scrollKeeperSelector).remove(),t("<div></div>").addClass(this.scrollKeeperClass).css({height:e[0].scrollHeight,position:"absolute",width:"1px"}).prependTo(e)},afterRowsHeightRecalculation:function(){this.lastRowHeightCalculation(),this.$el.find(this.scrollKeeperSelector).remove()},lastRowHeightCalculation:function(){var e=this.$el.find(".tau-timeline-canvas"),t=this.$el.find(".tau-timeline-flow"),i=t.last().offset(),l=this.$el.find(".footer-pillow"),o=l.last().offset(),s=e.outerHeight(),r=this.$el.find(".i-role-cell").last(),a=r.find(".i-role-cell-planner");if(o.top-i.top<s){var n=s-(o.top-i.top);a.height(n+r.outerHeight()),l.height(n)}else a.css("height",""),l.height(0)},calculateColumnWidth:function(e){var t=this.sizeCalculator.calculateWidth({col:e,ctx:{getCardWidth:this._getCardWidthByColumn.bind(this)},zoomLevel:this.getCurrentZoomLevel()});return t+this.scrollWidth},getBacklogColumnId:e.memoize(function(){var t=e.find(this.headerCells,function(e){return e.data.isbacklog});return t.data.x})})});
define('tau/ui/extensions/timeline/ui.extension.timeline.layout',["Underscore","tau/ui/extensions/board.plus/ui.extension.board.plus.layout","tau/ui/extensions/board.plus/layout/ui.timeline.layout"],function(e,n,t){return n.extend({createBoardLayout:function(){return new t},getResizeDecoratorSettings:function(n,t,i){var u=this._super(n,t,i),o={increaserEnabled:function(e){var n=!1;if(t.getBacklogColumnId()===e){var i=t.resolveColumnSize(e);n=5>i}return n},getLRVisibilityOptions:function(e){var n=!0,i=!0,u=t.getBacklogColumnId(),o=e.data("x"),r=t.isColumnCollapsed(u);return o===u?i=r:n=r,{hideL:n,hideR:i}}};return e.extend({},u,o)},"bus view.timeline.tracks.count.changed":function(){this._triggerResizeDelayed({})}})});
define('tau/models/timeline/model.timeline.dragndrop',["Underscore","tau/models/board.plus/model.board.dragndrop","tau/utils/utils.date"],function(e,t){var r=t.extend({init:function(e,t){this._super(e),this._timelineCellModelRegistry=t},_onBoardSettingsReady:function(e){this._super(e);var t=this.fire.bind(this,"ordering.refresh");e.get(["cells"]).then(t),e.bind({fields:["cells"],listener:this,callback:t})},"bus conditions.ready:last + dndOptions.ready:last + slice.ready:last + shift.isPressed + view.card.batch.move":function(e,t,r,s,i,n){this._super(e,t,r,s,i,n)},_afterCardBatchMove:function(t,r){r.forEach(function(r){var s=e.find(t,function(e){return r.entityId===e.source.entityId});s?(r.track=s.target.track,r.sourceX=s.source.x,r.sourceY=s.source.y):(r.sourceX=r.targetX,r.sourceY=r.targetY)}),this._super(t,r)},_prepareParameters:function(e,t,r){var s=this._super(e,t,r),i=this._timelineCellModelRegistry.whenCellRegistered(e[0].target);return $.when(s,i).then(function(e,t){return e.$set.items=t.getMoveParameters(e.$set.items),e})}});return r});
define('tau/ui/extensions/timeline/ui.extension.timeline.dragndrop',["Underscore","jQuery","tau/ui/extensions/board.plus/ui.extension.board.plus.dragndrop.base"],function(e,t,r){var i=function(){return!t(this).parent().is(".i-role-timeline-card-holder")},n=function(e){for(var t=e.currentGroup.find(".i-role-timeline-track"),r=0,i=t.length;i>r;r++){var n=t.eq(r);if(e._within(n,e.cursorPosition))return r}return void 0},s=function(e){return function(t){return e.$card=t,e}},a=function(e){return t(e).data("uiTauSortable")},o=r.extend({init:function(e,t){this._timelineViewRegistry=t,this._super(e)},_$containment:function(e){return e},_$sortable:function(e){return e.find(".tau-backlog-body .i-role-cellholder")},_getPlaceholderContentCreator:function(){return function(e,t){return this._timelineViewRegistry._getCellViewByCoords(t.data()).createPlaceholderContent(e)}.bind(this)},unpackMovementResponse:function(t,r){var n=this._super.apply(this,arguments),s=r.getCards();return e.each(n.success,function(e){e.$card=e.$card.add(s.filter('[data-id="'+e.entityId+'"]'))}),e.each(t,function(e){e.$card=e.$card.filter(i),e.moves.forEach(function(t){t.track=e.track})}),n},completeEventsProtocol:function(){this._super(this._$successCardsArray)},_expandEmptyCollapsedCells:function(e,t){return t.$affectedCells=this._$affectedCells,this._super(e,t)},_restoreErrorCardPosition:function(e){this._timelineViewRegistry.clearCardArtifacts(e.$card,e.target)},restoreErrorCardsPositions:function(t){return this._super(t).then(e.each(t,this._restoreErrorCardPosition,this))},_processSuccessCardsPositions:function(r){var i=e.toArray(arguments).slice(1);this._$affectedCells=t();var n=e.filter(i,function(t){var r={x:t.sourceX,y:t.sourceY},i={x:t.targetX,y:t.targetY};return!e.isEqual(r,i)});return n.forEach(function(e){e.$card.each(function(e,i){t(i).detach(),this._timelineViewRegistry.clearCardArtifacts(t(i),r)}.bind(this)),e.moves.forEach(function(e){this._$affectedCells=this._$affectedCells.add(this._timelineViewRegistry._getCellViewByCoords(e)._$cell)}.bind(this))}.bind(this)),this._$successCardsArray=e.pluck(i,"$card"),n},processCardsPositions:function(r,i,n,a,o){var c=r.success,u=e.map(c,function(e){return t.when(e.$card.length?e.$card:n.renderCardAsHtml(e.moves[0].dataItem)).then(s(e))});return t.when.apply(t,u).then(this._processSuccessCardsPositions.bind(this,i)).then(function(e){var t=this._getAnimationOptions(a,c);"Rank"!=this._ordering&&(r.success=e),this.fire("timeline.card.batch.move.after",{items:r.success,options:t}),r.success=[]}.bind(this)).then(function(){return this._super(r,i,n,a,o)}.bind(this))},_get$selectable:function(e){return e.find(".i-role-selectable")},_get$_selectable:function(e){return e.parents(".i-role-selectable")},"bus ordering.refresh":function(e,t){this._ordering=t.cells.ordering?t.cells.ordering.name:null},"bus sort.started:last + sort.groupchanged":function(t,r,i){var s=i[1],o=a(r[1].sender),c=n(o);e.isUndefined(c)?s.item.removeData("track"):s.item.data("track",c);var u={track:c,at:o.cursorPosition};this._timelineViewRegistry.moveCard(s.item,s.groupFrom.data(),s.groupTo.data(),u),this.fire("view.card.group.changed")},"bus sort.changed":function(e,r){var i=r[1],n=a(r[1].sender),s=t(i.item),o={index:i.index,track:t(i.item).data("track"),at:n.cursorPosition};n.currentGroup.find(".i-role-timeline-planner-card-holder:empty").append(s),this._timelineViewRegistry.moveCardToCell(s,n.currentGroup.data(),o)},"bus sort.stopped":function(e,r){var n=r[1];t(n.item).off("drag"),n.isReverted&&n.items.each(function(e,r){var i=t(r),s=i.data("boardDnd")||{};s.target=a(n.sender).currentGroup.data(),i.data("boardDnd",s)});var s=n.items.last().data("track");n.items.filter(i).each(function(e,r){t(r).data("boardDnd").target.track=s}.bind(this)),this._timelineViewRegistry.unlockAllTrackCards(),this._super(e,r)},"bus sort.started":function(e,r){var i=r[1],n=i.helper.parent().find(".tau-timeline-canvas");i.items.filter(function(){return t(this).data("uiDraggable")}).each(function(){t(this).data("uiDraggable").scrollParent=n,t(this).data("ui-draggable").overflowOffset=n.offset()})}});return o});
define('tau/ui/extensions/timeline/ui.extension.timeline.selection.board',["jQuery","tau/ui/extensions/board.plus/ui.extension.board.plus.selection.board"],function(e,t){var l=function(e){return e.find(".tau-timeline-canvas")[0]};return t.extend({createSelectableContainers:function(e){var t=function(){return l(e).scrollHeight},i=function(){return l(e).scrollTop},n=function(t){l(e).scrollTop+=t},r=[{element:e.find(".tau-backlog-body")[0],getScrollHeight:t,applyVerticalScrollOffset:n,getVerticalScrollPosition:i,clipVertical:!1,rectSelectTriggers:".footer-pillow"},{element:e.find(".tau-timeline-canvas")[0],rectSelectTriggers:".tau-timeline-flow, .i-role-timeline-track, .i-role-timeline-card-holder, .footer-pillow"}];return r},"bus $selectable.ready:last + card.unselect":function(e,t,l){t.tauSelectable("reset",l)},"bus $selectable.ready:last+$selectionScope.ready:last+cardsData.ready:last":function(t,l,i,n){i.find(".i-role-selectable").each(function(t,l){this._applySelection(e(l),i,n.cards,n.isInitial)}.bind(this))}})});
define('tau/ui/extensions/timeline/ui.timeline.scrollManager',["jQuery","tau/core/class","tau/ui/extensions/board.plus/ui.board.plus.scrollManager"],function(e,n,t){var r=t.extend({getScrollableElement:function(){return this.$element.find(".tau-timeline-canvas")},getScrollableChild:function(e){return e.children().first()}});return r});
define('tau/ui/extensions/timeline/ui.extension.timeline.sync-scroll',["Underscore","jQuery","tau/core/extension.base"],function(e,r,l){var n=function(e,r){r()};return l.extend({"bus $el.ready+$grid.ready":function(r,l,n){var o=this,c=l.find(".tau-rows-header > ul, .tau-backlog-body ul"),s=n.find(".tau-timeline-canvas"),a=e.bind(o.syncScroll,o,s,c),t=function(){a(),n.trigger("sync-scroll")};s.on({scroll:t});var i=60;c.on({mousewheel:function(e,r){var l=-s.scrollTop()+Math.round(r*i);s.scrollTop(-l),t()}}),o.fire("syncScroll.ready",a)},"bus syncScroll.ready:last + view.dom.ready":n,"bus syncScroll.ready:last + view.axis.collapser.executed.after":n,"bus syncScroll.ready:last + resize.completed":n,syncScroll:function(e,r){var l={x:e.scrollLeft(),y:e.scrollTop()};r.length&&r.css("margin-top",-l.y)}})});
define('tau/components/board.timeline/views/board.timeline.view.now-marker',["Underscore","jQuery","tau/core/class"],function(e,t,r){return r.extend({init:function(e){if(!e)throw new Error("getNowOffsetStrategy is not defined");this._getNowOffsetStrategy=e},render:function(e,r){e.find(".tau-timeline-now-marker").remove(),this._marker=t('<div class="tau-timeline-now-marker"></div>').prependTo(e),this.updatePosition(r)},isRendered:function(){return!!this._marker},updatePosition:function(e){var t=this._getNowOffsetStrategy(),r=t>0&&1>t;this.isRendered()&&this._marker.css("left",e?e*t+"px":100*t+"%").toggle(r)}})});
define('tau/ui/templates/board.timeline/ui.template.board.timeline.ruler10',["tau/core/templates-factory"],function(e){var t={name:"board.templates.timeline.ruler",engine:"jqote2",customFunctions:{segmentClass:function(e,t){var n=["tau-ruler-segment"];return e.isPeriodStart&&n.push("tau-is-period-start"),0===t&&n.push("tau-ruler-segment-first"),e.partStart&&n.push("tau-ruler-segment-part"),n.join(" ")},segmentStyle:function(e){var t=[];return t.push("width: "+(100*e.width).toFixed(12)+"%"),t.push("left: "+(100*e.left).toFixed(12)+"%"),t.join("; ")}},markup:["<% fn._.each(this, function(segment, i) { %>",'<div class="<%= fn.segmentClass(segment, i) %>" style="<%= fn.segmentStyle(segment) %>">',"<% if (!segment.partStart) { %>","<% if (segment.label) { %>",'<div class="tau-notch-label"><%= segment.label %></div>',"<% } %>",'<%= segment.content || "" %>',"<% } else if (segment.displayPartContent) { %>",'<%= segment.content || "" %>',"<% } %>","</div>","<% }.bind(this)); %>"]};return e.register(t)});
define('tau/components/board.timeline/views/ruler/scale',["Underscore","tau/core/class","tau/utils/utils.date","libs/date.js/build/date","tau/utils/timeline/utils.timeline.date.position.calculator"],function(t,e,n,i,a){var s={isMonthFirstMonday:function(t){return t.getDate()<8},isJanuary:function(t){return 0===t.getMonth()},isMonthFirstDay:function(t){return 1===t.getDate()},isYearFirstDay:function(t){return this.isJanuary(t)&&this.isMonthFirstDay(t)},moveToBeginningOfDay:function(t){return t.setHours(0).setMinutes(0).setSeconds(0).setMilliseconds(0)}},r={year:function(t){return n.formatAs(t,"yyyy")},monthAndYear:function(t){return n.formatAs(t,"MMM yyyy")},month:function(t){return n.formatAs(t,"MMM")},fullDate:function(t){return n.formatAs(t,"d MMM yyyy")},shortDate:function(t){return n.formatAs(t,"d MMM")},date:function(t){return s.isYearFirstDay(t)?this.fullDate(t):this.shortDate(t)},monday:function(t){return s.isMonthFirstMonday(t)?s.isJanuary(t)?this.fullDate(t):this.shortDate(t):t.getDate().toString()},time:function(t){return n.formatAs(t,"H:mm")}},o=e.extend({_spaceBetweenLabels:20,init:function(t,e){this._dateRange=t,this._globalWidth=e},setFirstLabelFormat:function(t){this._firstLabelFormat=t},isFirstLabelSpaceAvailable:function(t,e,n,i,a){var s=this._globalWidth*t.originalWidth*(i-e)+this._globalWidth*t.width-a/2;return s>=n+this._spaceBetweenLabels},setSegmentFirstLabel:function(t,e,n,i,a){if(this.isFirstLabelSpaceAvailable(t,e,n,i,a)){t.label=void 0;var s=t.start<this._dateRange.startDate?this._dateRange.startDate:t.start;t.firstLabel=this._firstLabelFormat(s)}},checkFirstLabel:function(e,n){var i=t.find(e,function(e){return!t.isUndefined(e.firstLabel)});if(t.isUndefined(i)){var a;for(a=0;a<e.length;a++)if(e[a].label&&!e[a].partStart&&n(e[a])){e[a].label=this._firstLabelFormat(e[a].start);break}}},isPartContentAvailable:function(t,e){return this._globalWidth*t>=e}}),h=e.extend({init:function(t,e){this._dateRange=t,this._positionCalculator=a(t),this._firstLabelBuilder=e,this._firstLabelBuilder.setFirstLabelFormat(this._firstLabelFormat)},_minSegmentWidth:30,_minSegmentFirstLabelWidth:45,_minLabelWidth:24,_emptySegmentsCount:10,_firstLabelFormat:r.fullDate,getFirstLabelFormat:function(){return this._firstLabelFormat},isOkForWidth:function(t){return t/(this._dateRange.getDurationInDays()*this._segmentsInDay)>=this._minSegmentWidth},segments:function(){throw new Error("'segments' method not implemented")},_getRawSegments:function(t,e,n){for(var i=[],a=t.clone();e>a;a.add(n)){var s={start:a.clone(),end:a.clone().add(n)};s.start<this._dateRange.startDate?(s.width=this._getWidthForRange(this._dateRange.startDate,s.end),s.originalWidth=this._getWidthForRange(s.start,s.end),s.partStart=!0,s.left=0):(s.left=this._getWidthForRange(this._dateRange.startDate,s.start),s.end>this._dateRange.endDate?(s.width=this._getWidthForRange(s.start,this._dateRange.endDate),s.originalWidth=this._getWidthForRange(s.start,s.end)):(s.width=this._getWidthForRange(s.start,s.end),s.start.getTime()==this._dateRange.startDate.getTime()&&(s.originalWidth=s.width))),s.width>=0&&i.push(s)}return i},_getCurrentSegmentAndSegmentsCount:function(t,e,n){for(var i=t.start.clone(),a=0;!e(i);)i=i.addDays(-n),a++;var s=0;for(i=i.addDays(n);!e(i);)i=i.addDays(n),s++;return{emptySegmentsCount:s,currentSegmentIndex:a}},_getWidthForRange:function(t,e){return parseFloat((this._positionCalculator.getRelativeDatePosition(e)-this._positionCalculator.getRelativeDatePosition(t)).toFixed(12))}}),g=h.extend({_segmentsInDay:24,_emptySegmentsCount:23,_minLabelWidth:30,_minSegmentFirstLabelWidth:70,segments:function(){var e=s.moveToBeginningOfDay(this._dateRange.startDate.clone()),n=this._getRawSegments(e,this._dateRange.endDate,{hours:1});return t.each(n,function(t,e){var n=0===t.start.getHours(),i=t.start.getHours()%4!==0;i||(t.isPeriodStart=n,t.label=n?r.date(t.start):r.time(t.start)),0==e&&this._firstLabelBuilder.setSegmentFirstLabel(t,t.start.getHours(),this._minSegmentFirstLabelWidth,this._emptySegmentsCount,this._minLabelWidth)}.bind(this)),this._firstLabelBuilder.checkFirstLabel(n,function(t){return 0===t.start.getHours()}),n}}),m=h.extend({_segmentsInDay:6,_minSegmentWidth:45,_emptySegmentsCount:5,_minLabelWidth:30,_minSegmentFirstLabelWidth:70,segments:function(){var e=s.moveToBeginningOfDay(this._dateRange.startDate.clone()),n=this._getRawSegments(e,this._dateRange.endDate,{hours:4});return t.each(n,function(t,e){var n=0===t.start.getHours();t.label=n?r.date(t.start):r.time(t.start),t.isPeriodStart=n,0==e&&this._firstLabelBuilder.setSegmentFirstLabel(t,t.start.getHours()/4,this._minSegmentFirstLabelWidth,this._emptySegmentsCount,this._minLabelWidth)}.bind(this)),this._firstLabelBuilder.checkFirstLabel(n,function(t){return 0===t.start.getHours()}),n}}),d=h.extend({_minSegmentWidth:45,_minSegmentFirstLabelWidth:70,_segmentsInDay:3,_minLabelWidth:30,_emptySegmentsCount:2,segments:function(){var e=s.moveToBeginningOfDay(this._dateRange.startDate.clone()),n=this._getRawSegments(e,this._dateRange.endDate,{hours:8});return t.each(n,function(t,e){var n=0===t.start.getHours();t.label=n?r.date(t.start):r.time(t.start),t.isPeriodStart=n,0==e&&this._firstLabelBuilder.setSegmentFirstLabel(t,t.start.getHours()/8,this._minSegmentFirstLabelWidth,this._emptySegmentsCount,this._minLabelWidth)}.bind(this)),this._firstLabelBuilder.checkFirstLabel(n,function(t){return 0===t.start.getHours()}),n}}),l=h.extend({_segmentsInDay:3,_minLabelWidth:30,_emptySegmentsCount:2,_minSegmentFirstLabelWidth:70,segments:function(){var e=s.moveToBeginningOfDay(this._dateRange.startDate.clone()),n=this._getRawSegments(e,this._dateRange.endDate,{hours:8});return t.each(n,function(t,e){var n=0!==t.start.getHours();n||(t.label=r.date(t.start),t.isPeriodStart=!0),0==e&&this._firstLabelBuilder.setSegmentFirstLabel(t,t.start.getHours()/8,this._minSegmentFirstLabelWidth,this._emptySegmentsCount,this._minLabelWidth)}.bind(this)),this._firstLabelBuilder.checkFirstLabel(n,function(t){return 0===t.start.getHours()}),n}}),u=h.extend({_minSegmentWidth:45,_minSegmentFirstLabelWidth:55,_minLabelWidth:45,_segmentsInDay:1,_emptySegmentsCount:5,_firstLabelFormat:r.monthAndYear,segments:function(){var e=s.moveToBeginningOfDay(this._dateRange.startDate.clone()),n=this._getRawSegments(e,this._dateRange.endDate,{days:1});return t.each(n,function(t,e){var n=s.isMonthFirstDay(t.start);t.label=n?r.monthAndYear(t.start):"",t.content=t.start.getDate().toString(),t.isPeriodStart=n,0==e&&(this._emptySegmentsCount=t.start.getDaysInMonth()-1,this._firstLabelBuilder.setSegmentFirstLabel(t,t.start.getDate()-1,this._minSegmentFirstLabelWidth,this._emptySegmentsCount,this._minLabelWidth))}.bind(this)),n}}),_=h.extend({_minSegmentWidth:150,_segmentsInDay:1/7,_minSegmentFirstLabelWidth:60,_minLabelWidth:54,_firstLabelFormat:r.monthAndYear,segments:function(){var e=s.moveToBeginningOfDay(this._dateRange.startDate.clone()),n=this._getRawSegments(e,this._dateRange.endDate,{days:1});return t.each(n,function(t,e){if(1==t.start.getDay()&&(t.label=r.monday(t.start),t.isPeriodStart=s.isMonthFirstMonday(t.start)),0==e){var n=this._getCurrentSegmentAndSegmentsCount(t,function(t){return 1==t.getDay()&&s.isMonthFirstMonday(t)},1),i=n.currentSegmentIndex;this._emptySegmentsCount=n.emptySegmentsCount,this._firstLabelBuilder.setSegmentFirstLabel(t,i,this._minSegmentFirstLabelWidth,this._emptySegmentsCount,this._minLabelWidth)}}.bind(this)),this._firstLabelBuilder.checkFirstLabel(n,function(t){return s.isMonthFirstMonday(t.start)}),n}}),f=h.extend({_minSegmentWidth:50,_segmentsInDay:1/7,_minSegmentFirstLabelWidth:60,_minLabelWidth:54,_firstLabelFormat:r.monthAndYear,_moveBackToMonday:function(t){var e=0===t.getDay(),n=e?-6:1-t.getDay();return s.moveToBeginningOfDay(t.addDays(n))},segments:function(){var e=this._moveBackToMonday(this._dateRange.startDate.clone()),n=this._getRawSegments(e,this._dateRange.endDate,{days:7});return t.each(n,function(t,e){if(t.label=r.monday(t.start),t.isPeriodStart=s.isMonthFirstMonday(t.start),0==e){var n=this._getCurrentSegmentAndSegmentsCount(t,s.isMonthFirstMonday,7),i=n.currentSegmentIndex;this._emptySegmentsCount=n.emptySegmentsCount,this._firstLabelBuilder.setSegmentFirstLabel(t,i,this._minSegmentFirstLabelWidth,this._emptySegmentsCount,this._minLabelWidth)}}.bind(this)),this._firstLabelBuilder.checkFirstLabel(n,function(t){return s.isMonthFirstMonday(t.start)}),n}}),b=h.extend({_segmentsInDay:1/30,_minSegmentWidth:45,_emptySegmentsCount:11,_firstLabelFormat:r.year,segments:function(){var e=s.moveToBeginningOfDay(this._dateRange.startDate.clone().moveToFirstDayOfMonth()),n=this._getRawSegments(e,this._dateRange.endDate,{months:1});return t.each(n,function(t,e){t.label=s.isJanuary(t.start)?r.year(t.start):void 0,t.content=r.month(t.start),t.isPeriodStart=s.isJanuary(t.start),0==e&&this._firstLabelBuilder.setSegmentFirstLabel(t,t.start.getMonth(),this._minSegmentFirstLabelWidth,this._emptySegmentsCount,this._minLabelWidth)}.bind(this)),n}}),c=h.extend({_segmentsInDay:4/365,_minSegmentWidth:55,_emptySegmentsCount:11,_firstLabelFormat:r.year,segments:function(){var e=s.moveToBeginningOfDay(this._dateRange.startDate.clone().moveToFirstDayOfMonth()),n=this._getRawSegments(e,this._dateRange.endDate,{months:1});return t.each(n,function(t,e){var n=t.start.getMonth();n%4===0&&(t.label=s.isJanuary(t.start)?r.year(t.start):r.month(t.start),t.isPeriodStart=s.isJanuary(t.start)),0==e&&this._firstLabelBuilder.setSegmentFirstLabel(t,n,this._minSegmentFirstLabelWidth,this._emptySegmentsCount,this._minLabelWidth)}.bind(this)),n}}),y=h.extend({_segmentsInDay:2/365,_minSegmentWidth:60,_emptySegmentsCount:1,_firstLabelFormat:r.year,_getFirstDayOfHalfYear:function(t){var e=t.getFullYear(),n=new i(e,0,1),a=new i(e,6,1);return t>=a?a:n},segments:function(){var e=this._getFirstDayOfHalfYear(this._dateRange.startDate),n=this._getRawSegments(e,this._dateRange.endDate,{months:6});return t.each(n,function(t,e){var n=t.start.getMonth(),i=0===n?0:1;0===n&&(t.label=r.year(t.start),t.isPeriodStart=!0),0==e&&this._firstLabelBuilder.setSegmentFirstLabel(t,i,this._minSegmentFirstLabelWidth,this._emptySegmentsCount,this._minLabelWidth)}.bind(this)),n}}),S=h.extend({_segmentsInDay:1/365,_getFirstDayOfYear:function(t){return new i(t,0,1)},segments:function(){var e=this._getFirstDayOfYear(this._dateRange.startDate.getFullYear()),n=this._getRawSegments(e,this._dateRange.endDate,{years:1});return t.each(n,function(t){t.content=r.year(t.start),t.isPeriodStart=!0,t.partStart&&(t.displayPartContent=this._firstLabelBuilder.isPartContentAvailable(t.width,this._minSegmentWidth))}.bind(this)),n}}),L=h.extend({_segmentsInDay:10/365,_emptySegmentsCount:9,_firstLabelFormat:r.year,_getFirstDayOfYear:function(t){return new i(t,0,1)},segments:function(){var e=this._getFirstDayOfYear(this._dateRange.startDate.getFullYear()),n=this._getRawSegments(e,this._dateRange.endDate,{years:1});return t.each(n,function(t,e){var n=t.start,i=n.getYear()%10,a=0===i;t.label=a?r.year(n):"",t.isPeriodStart=a,0==e&&this._firstLabelBuilder.setSegmentFirstLabel(t,i,this._minSegmentFirstLabelWidth,this._emptySegmentsCount,this._minLabelWidth)}.bind(this)),n}}),F=[g,m,d,l,u,_,f,b,c,y,S,L];return{createFor:function(e,n){var i=new o(n,e),a=t.find(F,function(t){return new t(n,i).isOkForWidth(e)}.bind(this))||t.last(F);return new a(n,i)}}});
define('tau/components/board.timeline/views/board.timeline.view.first-label',["Underscore","jQuery","tau/core/class"],function(e,t,i){return i.extend({init:function(){this._firstLabel=""},render:function(e){e.parent().find(".tau-period-label").remove(),t('<div class="tau-period-label"></div>').html(this._firstLabel).insertBefore(e)},setLabel:function(e){this._firstLabel=e||""},isEmpty:function(){return""===this._firstLabel}})});
define('tau/components/board.timeline/views/ruler/board.timeline.view.ruler',["Underscore","jQuery","tau/core/class","tau/ui/templates/board.timeline/ui.template.board.timeline.ruler10","tau/components/board.timeline/views/ruler/scale","tau/components/board.timeline/views/board.timeline.view.now-marker","tau/components/board.timeline/views/board.timeline.view.first-label","tau/utils/timeline/utils.timeline.date.position.calculator","tau/utils/utils.date"],function(e,t,i,n,a,l,r,s,o){var d=i.extend({init:function(){this._$placeholder=null,this._dateRange=null,this._nowMarker=new l(this._getNowOffset.bind(this)),this._firstLabel=new r},_html:function(e){var t=a.createFor(this._$placeholder.width(),e).segments();return this._firstLabel.setLabel(t[0].firstLabel),n.get().bind({},t)},bind:function(e){this._dateRange=e,this._positionCalculator=new s(e),this._$placeholder&&this._doRender()},_getNowOffset:function(){return this._positionCalculator.getRelativeDatePosition(o.getServerNow())},renderTo:function(e){this._$placeholder=e.find(".tau-scale-ruler"),this._$placeholder.width(e.find(".tau-timeline-flow").width()),this._dateRange&&this._doRender()},_doRender:function(){if(this._$placeholder.html(this._html(this._dateRange)),this._nowMarker.render(this._$placeholder),this._firstLabel.isEmpty()){var e=this._$placeholder.find(".tau-ruler-segment.tau-is-period-start").first(),t=e.position(),i=e.find(".tau-notch-label");i.length>0&&i.width()/2>t.left&&(this._firstLabel.setLabel(i.html()),i.empty())}this._firstLabel.render(this._$placeholder)},updateNowPosition:function(){this._nowMarker.updatePosition()}});return d});
define('tau/components/board.timeline/templates/template.timeline.navigator',["tau/core/templates-factory"],function(t){var e={name:"board.templates.timeline.navigator",engine:"jqote2",customFunctions:{},markup:['<div class="tc-histogram <%= this.buckets.length == 0 ? "tc-histogram-empty": ""%>">',"<% var width = 100 / this.buckets.length; %>","<% var left = 0; %>","<% _.each(this.buckets, function(item){ %>",'<div class="tc-item" style="left: <%= left%>%; width: <%= width %>%">',"<% left += width; %>","<% _.each(item, function(value, key){ %>",'<div class="tc-meter tc-<%= key.toLowerCase()%>" style="height:<%=value%>px;"></div>',"<% }); %>","</div>","<% }); %>","</div>","<% if (this.buckets.length > 0){ %>",'<div class="tc-focus-range" data-range-min="0" data-range-max="<%= this.buckets.length - 1 %>">','<div class="tc-start"></div>','<div class="tc-end"></div>','<div class="tc-space"></div>',"</div>","<% }; %>",'<button class="tau-btn refresh-histogram tau-extension-board-tooltip" data-title="Refresh navigator"></button>']};return t.register(e)});
define('tau/components/board.timeline/views/timeline.navigator.histogram',["Underscore","tau/core/class"],function(n,e){function t(e,t){return n.chain(e).keys().reduce(function(n,u){return n[u]=t(e[u]),n},{}).value()}var u=function(e){return n.sum(n.values(e))};return e.extend({_items:null,init:function(n){this._items=n},gerRenderData:function(e){var r=n.reduce(this._items,function(e,t,u){return n.each(t,function(n,t){e[t]=e[t]||{},e[t][u]=n}),e},[]),i=n.chain(r).map(u).max().value(),c=e/i;return n.map(r,function(n){return t(n,function(n){return Math.round(n*c)})})}})});
define('tau/components/board.timeline/views/view.timeline.navigator',["Underscore","jQuery","tau/core/class","tau/components/board.timeline/templates/template.timeline.navigator","tau/components/board.timeline/views/timeline.navigator.histogram","tau/components/board.timeline/views/board.timeline.view.now-marker"],function(e,t,i,n,a,r){var h=4,l=1;return i.extend({init:function(t){this._model=t,this.bucketWidth=h+l,this.onDateRangeChanged=e.Callbacks(),this._nowMarker=new r(t.getRelativeNowOffset.bind(t))},_getBucketsCount:function(){return Math.floor(this._containerBaseWidth/this.bucketWidth)},_refreshDensity:function(){return t.when(this._model.queryDensity(this._getBucketsCount())).then(this._render.bind(this))},renderTo:function(e){this._$placeholder&&this._$placeholder[0]==e[0]||(this._$placeholder=e,this._$placeholder.tauProgressIndicator(),this._containerBaseWidth=this._$placeholder.outerWidth(),this._model.globalDateRangeIsDefined()&&this._refreshDensity())},_alignRange:function(e,t,i){var n=i.position().left+i.outerWidth()-t.position().left;e.css("width",(100*n/this._$placeholder.outerWidth()).toFixed(2)+"%")},_render:function(e){var t=new a(e),i=t.gerRenderData(this._$placeholder.height());if(this._$placeholder.html(this._html(i)),i.length>0){var n=this._model.getRelativeSelectedRange(),r=Math.round(n.start*i.length),h=Math.round(n.end*i.length),l=this._$placeholder.find(".tc-item"),o=this._$placeholder.find(".tc-focus-range");this._alignRange(o,l.eq(r),l.eq(h-1)),this._$placeholder.tauSlider({grid:l,value:r,handle:o,selectionWidth:h-r,min:o.data("range-min"),max:o.data("range-max"),animate:!0,slide:function(e,t){var n=t.value,a=n+this._$placeholder.tauSlider("option","selectionWidth");this.onDateRangeChanged.fire(this._model.convertToDateRange(n/i.length,a/i.length))}.bind(this),change:function(e,t){var n=this._$placeholder.tauSlider("option","selectionWidth"),a=t.value+n-1;o.tauResizable("option",{startValue:t.value,endValue:a}),this._model.setRelativeSelectedRange(t.value/i.length,(a+1)/i.length)}.bind(this)}),o.tauResizable({gridContainment:l,handles:{e:".ui-resizable-e",w:".ui-resizable-w"},startValue:r,endValue:h-1,resize:function(e,t){this.onDateRangeChanged.fire(this._model.convertToDateRange(t.startValue/i.length,(t.endValue+1)/i.length))}.bind(this),stop:function(e,t){this._$placeholder.tauSlider("option",{selectionWidth:t.endValue-t.startValue+1}),this._$placeholder.tauSlider("setValueWithoutEvents",t.startValue);var n=100*t.size.width/this._$placeholder.outerWidth();o.css("width",n+"%"),this._model.setRelativeSelectedRange(t.startValue/i.length,(t.endValue+1)/i.length)}.bind(this)}),this._$placeholder.find(".refresh-histogram").on("click",function(){this._$placeholder.tauSlider("destroy")}.bind(this))}this._renderNowMarker(l),this._$placeholder.find(".refresh-histogram").on("click",this._refresh.bind(this))},_refresh:function(){taus.track("action",{name:"timeline-navigator-refresh"}),this._$placeholder.tauProgressIndicator("show",{hover:!0}),this._refreshDensity().then(function(){this._$placeholder.tauProgressIndicator("hide")}.bind(this))},_html:function(e){return n.get().bind({},{buckets:e})},_getGridWidth:function(e){if(e&&e.length>0)var t=e.last(),i=t.position().left+t.outerWidth();return i},_renderNowMarker:function(e){var t=this._getGridWidth(e);this._nowMarker.render(this._$placeholder,t)},updateNowPosition:function(){if(this._$placeholder&&this._model.globalDateRangeIsDefined()){var e=this._$placeholder.find(".tc-item");if(0!==e.length){var t=this._getGridWidth(e);this._nowMarker.updatePosition(t)}}}})});
define('tau/components/board.timeline/models/model.timeline.navigator',["require","jQuery","tau/core/class","tau/utils/timeline/utils.timeline.date-range","tau/utils/timeline/utils.timeline.date.position.calculator","tau/utils/utils.date"],function(t){var e=t("jQuery"),a=t("tau/core/class"),i=t("tau/utils/timeline/utils.timeline.date-range"),n=t("tau/utils/timeline/utils.timeline.date.position.calculator"),o=t("tau/utils/utils.date");return a.extend({init:function(t){this._dataProvider=t,this._dataProvider.onTimelineLocalDateRangeChanged.add(this.onLocalDataRangeChanged.bind(this)),this._dataProvider.onTimelineGlobalDateRangeChanged.add(this.onGlobalDataRangeChanged.bind(this)),this._positionCalculator=null,this._localDateRange=null},onLocalDataRangeChanged:function(t){this._localDateRange=t},onGlobalDataRangeChanged:function(t){this._positionCalculator=t.isValid?n(t):null},globalDateRangeIsDefined:function(){return!!this._positionCalculator},getRelativeNowOffset:function(){return this._positionCalculator.getRelativeDatePosition(this.getNow())},getRelativeSelectedRange:function(){return{start:this._positionCalculator.getRelativeDatePosition(this._localDateRange.startDate),end:this._positionCalculator.getRelativeDatePosition(this._localDateRange.endDate)}},getNow:function(){return o.getServerNow()},convertToDateRange:function(t,e){var a=this._positionCalculator.getCorrespondingDate(t),n=this._positionCalculator.getCorrespondingDate(e);return new i(a,n)},setRelativeSelectedRange:function(t,e){this._localDateRange=this.convertToDateRange(t,e),this._dataProvider.setTimelineLocalDateRange(this._localDateRange)},queryDensity:function(t){return this._positionCalculator?e.when(this._dataProvider.queryDensity(t)).then(function(t){return t.data}):[]}})});
define('tau/components/board.timeline/controllers/controller.timeline',["Underscore","jQuery","tau/core/class","tau/components/board.timeline/views/board.timeline.view.now-marker","tau/components/board.timeline/views/ruler/board.timeline.view.ruler","tau/components/board.timeline/views/view.timeline.navigator","tau/components/board.timeline/models/model.timeline.navigator"],function(e,i,t,n,s,l,o){var r=6e4,d=200,a=t.extend({init:function(i){this._interval=i,this._timerId=null,this.onTick=e.Callbacks()},start:function(){this._timerId=setInterval(this.onTick.fire.bind(this.onTick),this._interval)},stop:function(){clearInterval(this._timerId),this._timerId=null}}),h=t.extend({init:function(i,t){this.rendered=e.Callbacks(),this.error=e.Callbacks(),this.hintHide=e.Callbacks(),this.cardUnselect=e.Callbacks(),this.viewTimelineTracksCountChanged=e.Callbacks(),this._timelineViewRegistry=t.view,this._timelineCellModelRegistry=t.cellModel,this._timelineAxesModelRegistry=t.axesModel,this._timelineModel=i,this._timelineModel.onTimelineError.add(this.error.fire.bind(this.error)),this._timelineModel.onTimelineLocalDateRangeChanged.add(this._onTimelineLocalDateRangeChanged.bind(this)),this._timelineAxesModelRegistry.onAxisCellAdded.add(function(e,i){this._timelineViewRegistry.axisCellAdded(e,i)},this),this._timer=new a(r),this._timer.onTick.add(this._updateNowPositions,this);var d=this._timelineCellModelRegistry.getRelativeNowOffset.bind(this._timelineCellModelRegistry);this._rulerView=new s(d),this._nowMarker=new n(d),this._navigatorModel=new o(this._timelineModel),this._navigatorView=new l(this._navigatorModel),this._navigatorView.onDateRangeChanged.add(this._updateLocalDateRange.bind(this))},destructor:function(){this._timer.onTick.removeAll(),this._timer.stop(),this._timelineModel.unbindBoardSettings()},_onTimelineLocalDateRangeChanged:function(e){this._rulerView.bind(e),this._updateNowMarkers()},_updateNowMarkers:function(){this._rulerView.updateNowPosition(),this._nowMarker.updatePosition(),this._navigatorView.updateNowPosition()},_updateNowPositions:function(){this._updateNowMarkers(),this._timelineCellModelRegistry.extendUnfinishedCardsToNow()},resize:function(i){var t=i.find(".tau-timeline-flow"),n={width:t.outerWidth(),height:t.outerHeight()};e.isEqual(this._size,n)||this.render(i)},render:function(e){this._navigatorView.renderTo(e.find("._tc-timeline-navigator"));var i=e.find(".tau-timeline-flow");this._size={width:i.outerWidth(),height:i.outerHeight()},this._rulerView.renderTo(e),this._nowMarker.render(e.find(".tau-timeline-flow")),this._timer.stop(),this._updateNowMarkers(),this._timer.start(),this.rendered.fire()},_updateLocalDateRange:function(e){this._rulerView.bind(e),this._applyLocalDateToTimelineCards(e)},_applyLocalDateToTimelineCards:e.throttle(function(e){this._timelineModel.setDateRange(e),this._timelineCellModelRegistry.updateCardsPositions(),this._updateNowMarkers()},d),onCellsContentLoaded:function(){this._timelineCellModelRegistry.broadcastCells(function(e){e.isTimeline&&e.onMovePlannedDates.add(this._timelineModel.movePlannedDates.bind(this._timelineModel))}.bind(this))},onCardsMoved:function(e,i){this._timelineCellModelRegistry.moveCards(e,i)},onBuildCellSkeleton:function(e,t,n,s,l){0===n.paging.from&&this._timelineCellModelRegistry.whenCellRegistered(n).then(function(n){return i.when(n,this._timelineViewRegistry.renderCell(e,t,n,s.element,l))}.bind(this)).then(function(e,i){e.isTimeline&&(i.onCardMetricsEdit.add(this.hintHide.fire.bind(this.hintHide)),i.onCardMetricsEdited.add(this.cardUnselect.fire.bind(this.cardUnselect)),i.onTracksCountChanged.add(this.viewTimelineTracksCountChanged.fire.bind(this.viewTimelineTracksCountChanged)))}.bind(this))},onBuildAxisSkeleton:function(e,i,t,n){this._timelineAxesModelRegistry.whenAxisRegistered(t).then(function(t){this._timelineViewRegistry.renderAxisCell(e,i,t,n.element)}.bind(this))}});return h});
define('tau/ui/extensions/timeline/ui.extension.timeline',["Underscore","tau/components/board.timeline/controllers/controller.timeline","tau/core/extension.base"],function(e,i,t){return t.extend({resetLifecycle:!0,init:function(t,n,d){this._super.apply(this,arguments),this._model=n,this._timelineAxesModelRegistry=d.axesModel,this._timelineViewRegistry=d.view,this._model.onPageChanged.add(function(i){this.fire("page.changed",e.deepClone(i.page))}.bind(this)),this._model.onZoomLevelChanged.add(this.fire.bind(this,"model.zoomLevelChanged")),this._model.onSliceInfoRetrieved.add(this.fire.bind(this,"model.sliceInfo.retrieved")),this._model.onBoardPagingSettingsRetrieved.add(this.fire.bind(this,"board.paging.settings")),this._model.onAcidReady.add(this.fire.bind(this,"acid.ready")),this._model.onBoardConfigurationReady.add(this.fire.bind(this,"board.configuration.ready")),this._model.onViewModeReady.add(this.fire.bind(this,"viewMode.ready")),this._model.onDefinitionReady.add(this.fire.bind(this,"definition.ready")),this._model.onPageReady.add(this.fire.bind(this,"page.ready")),this._model.onBoardDefinitionReady.add(this.fire.bind(this,"board.definition.ready")),this._model.onBoardDefinitionReady.add(function(e,i){taus.track({"@":["open-board-action"],boardSettings:i,definition:e})}),this._model.onSliceReady.add(this.fire.bind(this,"slice.ready")),this._model.onCardLayoutFactoryReady.add(this.fire.bind(this,"cardLayoutFactory.ready")),this._timelineViewRegistry.onOpenCardViewRequired.add(function(e){this.fire("view.load.cardDetails",e)}.bind(this)),this._timelineViewRegistry.onBeforeUpdateCell.add(function(e){this.fire("view.cell.skeleton.element.beforeUpdate",e)}.bind(this)),this._timelineViewRegistry.onAfterUpdateCell.add(function(e){this.fire("view.cell.skeleton.element.afterUpdate",e),this.fire("view.cell.skeleton.built",{element:e.cell,data:e.dataItem})}.bind(this)),this._translateViewEvents(),this._timelineController=new i(n,d),this._timelineController.rendered.add(this.fire.bind(this,"ruler.view.afterRender")),this._timelineController.error.add(this.fire.bind(this,"error")),this._timelineController.hintHide.add(this.fire.bind(this,"hint.hide")),this._timelineController.cardUnselect.add(this.fire.bind(this,"card.unselect")),this._timelineController.viewTimelineTracksCountChanged.add(this.fire.bind(this,"view.timeline.tracks.count.changed"))},_translateEvent:function(i,t){var n=i.result;n.$cell.data("istimeline")||this.fire("view.cell.skeleton.updated",{element:n.$cell}),this.fire("selection.reapply",{}),e.each(n.cards,function(e,i){var t=n.dataItems[i];this.fire("view.card.skeleton.built",{element:e,data:{id:t.id,type:t.type}})}.bind(this));var d=t();this.fire("operation.execute.done",{operation:i.operation,dataItems:e.pluck(n.dataItems,"data"),affected$CellsArray:d,cards:n.cards})},_translateViewEvents:function(){this._timelineViewRegistry.onCellUpdated.add(function(e){this._translateEvent(e,function(){return[e.result.$cell]})}.bind(this)),this._timelineViewRegistry.onAxisUpdated.add(function(i){this._translateEvent(i,function(){var t=i.result.$cell,n=t.data("y"),d=[];if("added"===i.operation.name)d.push(t);else{var r=t.closest(".i-role-board-body").find(".i-role-grid .i-role-cell").filter(function(e,i){var t=$(i);return t.data("y")===n});d=e.map(r.toArray(),$)}return d})}.bind(this))},destroy:function(){this._timelineController.destructor()},"bus $el.ready:last + view.dom.ready:last + resize.completed":function(e,i){this._timelineController.resize(i)},"bus $el.ready:last + view.dom.ready":function(e,i){this._timelineController.render(i)},"bus model.execute.cell.query":function(e,i){this._model.setQuery(i.query)},"bus board.paging.settings:last + board.paging.settings.retrieve":function(e,i){this.fire("board.paging.settings.retrieved",i)},"bus page.move.to + board.paging.settings:last + boardSettings.ready:last":function(e,i,t,n){this._model.moveToPage(t.page,i.direction,n)},"bus boardSettings.ready:last + page.switched":function(e,i,t){this._model.setPage(i.boardSettings,t)},"bus configurator.ready:last + boardSettings.ready + start.lifecycle":function(e,i,t){this._model.startLifeCycle(i,t.boardSettings)},"bus configurator.ready > slice.ready":function(e,i,t){this._model.onGetSliceInfo(t.slice,i)},"bus slice.ready:last + before_destroy":function(){this.fire("clearError"),this._model.abortCurrentSlice()},"bus slice.ready:last + before_refresh":function(){this.fire("clearError"),this._model.abortCurrentSlice()},"bus model.cells.content.loaded":function(){this._timelineController.onCellsContentLoaded()},"bus build.timeline.cell.skeleton":function(e,i){this._timelineController.onBuildCellSkeleton(i.configurator,i.boardLayout,i.buildCellCommand,i.boardSkeleton,i.timelineWidthDeferred)},"bus build.timeline.axis.skeleton":function(e,i){this._timelineController.onBuildAxisSkeleton(i.configurator,i.boardLayout,i.buildAxisCellCommand,i.boardSkeleton)},"bus timeline.card.batch.move.after":function(i,t){var n=e.chain(t.items).pluck("moves").flatten().value();this._timelineController.onCardsMoved(n,t.options)}})});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.hints.timeline',["tau/ui/extensions/board.plus/ui.extension.board.plus.hints"],function(e){return e.extend({alignTo:function(e){return e.parent().is(".i-role-timeline-card-holder,.i-role-timeline-planner-card-holder")?e.parent():e},_getHolderClass:function(){return".i-role-card,.i-role-timeline-card-holder,.i-role-timeline-planner-card-holder"},_getCard:function(e){return e.is(".i-role-card")?e:e.find(".i-role-card")}})});
define('tau/models/board.plus/model.board.collapse.timeline.empty',["Underscore","tau/models/board.plus/model.board.collapse.empty"],function(e,a){return a.extend({_isAxisValueEmpty:function(a,s){var t=s.dynamic.items[0].data||{},n=e.has(s,"x")&&!t.isBacklog;return this._super(a,s)&&!n}})});
define('tau/ui/extensions/timeline/ui.extension.timeline.full-counts',["tau/ui/extensions/board.plus/ui.extension.full-counts"],function(e){return e.extend({"bus boardSettings.limitsReady:last > model.sliceInfo.retrieved:last > slice.ready:last > domWrapper.ready:last > operation.execute.comet.done":function(e,t,a,n,s){this._updateMetaInfoDebouncedHandler(a,n.slice,t,s)},updateMetaInfoAsync:function(e,t,a,n){var s=e.definition;s.user.globalDateRange&&s.user.globalDateRange.startDate&&s.user.globalDateRange.endDate&&this._super(e,t,a,n)}})});
define('tau/ui/extensions/board.plus/ui.extension.board.plus.cards-lazy-loading.timeline.customized',["tau/ui/extensions/board.plus/ui.extension.board.plus.cards-lazy-loading.customized"],function(n){var e=n.extend({handlerSliceFail:function(){},redrawCards:function(){}});return e});
define('tau/components/component.board.plus.timeline',["Underscore","tau/components/extensions/error/extension.errorBar","tau/components/component.creator","tau/components/component.board.plus.base","tau/components/board.timeline/view/view.timeline.registry","tau/ui/extensions/timeline/ui.extension.timeline.view","tau/components/board.timeline/models/model.timeline.slice.comet","tau/ui/extensions/timeline/ui.extension.timeline.operations","tau/components/board.timeline/models/model.timeline.date-range","tau/components/board.core/models/model.board.plus.timeline","tau/components/board.timeline/models/timeline.model.board.cell.freezable","tau/components/board.timeline/models/model.timeline.cells.registry","tau/components/board.timeline/models/model.timeline.axes.registry","tau/ui/extensions/timeline/ui.extension.timeline.layout","tau/ui/extensions/board.plus/ui.extension.board.plus.dom.updater.board","tau/models/timeline/model.timeline.dragndrop","tau/ui/extensions/timeline/ui.extension.timeline.dragndrop","tau/ui/extensions/timeline/ui.extension.timeline.selection.board","tau/ui/extensions/board.plus/ui.extension.board.plus.scrollManager","tau/ui/extensions/timeline/ui.timeline.scrollManager","tau/ui/extensions/board.plus/ui.extension.board.plus.scroll","tau/ui/extensions/timeline/ui.extension.timeline.sync-scroll","tau/ui/extensions/timeline/ui.extension.timeline","tau/ui/extensions/board.plus/ui.extension.board.plus.hints.timeline","tau/ui/extensions/board.plus/ui.extension.board.plus.hintsHeader","tau/ui/extensions/board.plus/ui.extension.board.plus.cardsSparklines","tau/models/board.plus/model.board.collapse","tau/models/board.plus/model.board.collapse.timeline.empty","tau/ui/extensions/board.plus/ui.extension.board.plus.collapse","tau/ui/extensions/board.plus/ui.extension.board.plus.focus","tau/ui/extensions/board.plus/ui.extension.board.plus.paging","tau/ui/extensions/timeline/ui.extension.timeline.full-counts","tau/ui/extensions/board.plus/ui.extension.board.plus.cardsViewer.board","tau/models/board.plus/model.board.plus.quick.add.axes","tau/ui/extensions/board.plus/ui.extension.board.plus.quick.add.axes","tau/models/board.plus/nodata/nodata-strategies","tau/models/board.plus/model.board.nodata","tau/ui/extensions/board.plus/ui.extension.board.plus.empty.data","tau/ui/extensions/board.plus/ui.extension.board.plus.progress","tau/ui/extensions/board.plus/ui.extension.board.plus.cards-lazy-loading.timeline.customized","tau/ui/extensions/board.plus/ui.extension.board.plus.quick.add.cells","tau/models/board.plus/model.board.plus.quick.add.cells"],function(e,i,n,t,s,o,a,u,l,r,d,m,p,x,c,b,g,y,w,f,T,v,k,h,q,M,z,E,S,V,B,C,D,F,H,U,_,j,A,G,I,J){return{create:function(e){var i=e.context.configurator.getFeaturesService(),n=new l,T=new m(n),z=new p(n),K=new r(n),L=new s(n);d=d.extend({generateDefaultContent:function(e){var i=this._super(e);return e.isTimeline&&i.fixed.items.push({id:"timeline",type:"timeline"}),i}});var N={ViewType:o,extensions:[{extType:d,args:[T,z]},{extType:b,args:[T]},{extType:g,args:[L]},c,x,y,{extType:w,args:[new f]},v,G,{extType:k,args:[K,{cellModel:T,axesModel:z,view:L}]},h,q,M,E,S,V,B,D,{extType:_,args:[U.timeline]},{extType:j,args:["Set up your timeline View"]},{extType:u,args:[T,z]},A].concat(e.extensions||[])};i.isEnabled("quick.add")&&(N.extensions=N.extensions.concat([I,J]));var O=i.isEnabled("axes.quick.add");return O&&(N.extensions=N.extensions.concat([F,H])),N.extensions.push(C),i.isEnabled("comet.notifications")&&N.extensions.push({extType:a,args:[e.context.configurator,"slice-timeline"]}),t.create(N,e)}}});
define('tau/ui/extensions/board.toolbar/ui.extension.board.toolbar.remove',["Underscore","jQuery","app.path","tau/core/extension.base.stateful","tau/utils/utils.api","tau/utils/utils.serverErrorTranslator"],function(e,t,r,a,i,o){return a.extend({"bus board.deleted + configurator.ready:last":function(e,r,a){var i=r.boardData,o=t("<div><h3>View '"+i.name+'\' has been deleted.</h3><p><a class="i-role-undo" style="text-decoration: underline">Undelete</a></p><div>');o.on("click",".i-role-undo",function(){var e=a.getBoardApiService();e.setBoardData(r.id,i).done(function(){var e=a.getUrlBuilder().getRelativeBoardUrl(r.id);a.getRouting().redirect(e)})}.bind(this)),this.fire("notification",{id:"board.removed",className:"tau-system-message-success",$node:o,delay:1e4,disableAutoClose:!1})},"bus boardSettings.ready:last + afterRender":function(t){var r=this.config.context.configurator,a=t["boardSettings.ready"].data.boardSettings,i=t.afterRender.data.element,o=i.find("[role=action-remove]");o.tauConfirm({content:["<h3>"+o.data("confirmMessage")+"</h3>"].join(""),callbacks:{success:e.bind(function(){var t=r.getBoardApiService(),i=a.settings.id;t.getBoardData(i).done(e.bind(function(a){var o=a.data;this._removeBoard(i,t).done(e.bind(function(){this.fire("remove.board",{board:{id:i}}),r.getHistory().exclude(i);var e=(r.getHistory().pop(),"current");r.getRouting().redirect(r.getUrlBuilder().getRelativeBoardUrl(e)),this.fire("board.deleted",{boardData:o,id:i})},this))},this))},this)},zIndex:130})},_removeBoard:function(e,t){return t.removeBoard(e).fail(function(e){this.fire("error",o.translateXhrError(e))}.bind(this))}})});
define('tau/components/component.board.remove',["Underscore","tau/components/component.creator","tau/ui/extensions/board.toolbar/ui.extension.board.toolbar.remove","tau/components/extensions/error/extension.errorBar","tau/core/extension.configurator"],function(e,t,o,n,r){return{create:function(e){var a={extensions:[o,n,r],template:{engine:"jqote2",name:"removeBoardButton",markup:['<span class="tau-inline-group tau-board-remove">','<button data-confirm-message="Do you really want to delete this View?" class="tau-btn tau-board-terminator" role="action-remove" type="button">Remove View</button>',"</span>"]}};e["queue.bus"]=!0;var u=t.create(a,e);return u.on("afterInit",function(e){e.sender.fire("dataBind",{})}),u}}});
define('tau/models/board.selector/model.board.selector',["Underscore","jQuery","tau/core/extension.base","tau/core/bus","tau/core/templates-factory"],function(e,i,t,r,n){var s=r.extend({init:function(e){this.id=null,this.boardSettings=null,this.bus=e,this.bus.unbind(this),this.bus.on("boardSettings.ready",function(e){var i=e.data.boardSettings,t=i.settings.id;"none"===t&&this.id||(t&&this.id&&t!=this.id?(this.id=t,this.boardSettings=i,this.fire("changed",{entity:{id:t,type:"board"},boardSettings:i})):(this.id=t,this.boardSettings=i,this.fire("ready",{entity:{id:t,type:"board"},boardSettings:i})))},this)},reset:function(){this.id=null,this.boardSettings=null},getCurrent:function(e){e({entity:{id:this.id,type:"board"},boardSettings:this.boardSettings})}}),a={init:function(){this.template=n.get("board.selector.item")},getItemData:function(e,i){var t=e.key,r={key:t,ownerIds:e.ownerIds,name:e.name||t,isShared:e.isShared===!0,acid:e.acid||"",menuIsVisible:e.menuIsVisible,priority:e.menuNumericPriority||999999,viewMode:e.viewMode||"board"};return r.isActive=i,r.menuNumericPriority=r.priority,r},renderItem:function(e){return this.template.bind({},e)}};return t.extend({resetLifecycle:!0,init:function(e){this._super(e),this.bsService=new s(e.bus),this.bsService.on("ready",function(e){this.fire("bsServiceData.ready",e)},this),this.boardItemService=a,this.boardItemService.init(),this.fire("boardItemService.ready",a)},"bus refresh":function(){this.bsService.unbind(this)},"bus bsServiceData.ready:last + beforeInit":function(i,t,r){var n=r.config.context.configurator;this.bsService.unbind(this),this.bsService.on("changed",function(e,i){this.fire("_boardSettings.ready",i.boardSettings),this.fire("currentBoard.changed",i.entity),this.fire("currentBoard.ready",i.entity)},this),this.bsService.getCurrent(e.bind(function(e){var i=e.boardSettings;this.fire("_boardSettings.ready",e.boardSettings);var t=i.getGroupName();this.fire("storageConfig.ready",{groupName:t}),this.fire("currentBoard.ready",e.entity)},this)),this.fire("configurator.ready",n)},subscribeToBoardServiceChanges:function(e){e.removeAllListeners(this),e.on("service.boards.api.board.created",function(){this.fire("refresh")}.bind(this),this),e.on("service.boards.api.board.removed",function(e,i){this.fire("board.removed",{id:i})}.bind(this),this)},"bus board.removed > currentBoard.changed":function(){this.fire("refresh")},"bus _boardSettings.ready:last + boards.ready:last":function(i,t,r){var n=e.bind(this.fire,this);t.unbind({listener:this}),t.bind({fields:["name","isShared","viewMode","acid"],listener:this,callback:function(i){var s=e.find(r,function(e){return e.key===t.settings.id});e.extend(s,i),setTimeout(function(){n("boardUpdated",s)},1e3)}})},getBoardsByUser:function(e,i){return e.getBoardsForUser(i.id).then(function(e){return e.data.items})},"bus configurator.ready + storageConfig.ready":function(e,i){var t=i.getLoggedUser(),r=i.getBoardApiService();this.getBoardsByUser(r,t).then(function(e){i.getFeaturesService().isEnabled("boardSettings.cache")&&r.setBoardsCache(e),this.fire("boards.ready",e)}.bind(this)),this.subscribeToBoardServiceChanges(r)},"bus currentBoard.ready > boards.ready":function(i,t,r){var n=e.bind(this.fire,this),s=this,a=e(r).chain().map(function(e){return s.boardItemService.getItemData(e,e.key===t.id)}).sortBy(function(e){return e.priority}).value(),o=e.groupBy(a,function(e){return e.menuIsVisible?"menu":"more"}),d=o.more||[];t=e.find(d,function(e){return e.isActive});var u=o.more||[],c={items:o.menu||[],itemsMore:u,currentItem:t};n("dataBind",c)}})});
define('tau/ui/extensions/board.selector/ui.extension.board.selector.main',["Underscore","jQuery","tau/core/extension.base"],function(e,t,i){return i.extend({_fireItemsReady:function(e){this.fire("$items.ready",e.find(".i-role-item")),this.fire("$links.ready",e.find(".i-role-item a"))},"bus afterRender":function(e,t){var i=t.element.find(".tau-boardselector__group");this._fireItemsReady(i),this.fire("$groups.ready",i),this.fire("$el.ready",t.element)},"bus view.dom.ready + $el.ready + $items.ready":function(e,t,i){setTimeout(function(){var e=i.find(".tau-boardselector__item_active_true");if(0!==e.length){var t=i.find(".i-role-list");if(e.offset().top>t[0].scrollTop+i.innerHeight()){var a=e.offset().top+e.innerHeight()-t.innerHeight();t[0].scrollTop=a}}},0)},"bus $el.ready:last + $bubbled.ready:last + $items.ready:last + board.removed":function(e,t,i,a,r){var s=a.filter("[data-id="+r.id+"]");s.remove(),this.fire("refresh")},"bus $el.ready:last + $bubbled.ready:last + $items.ready:last + currentBoard.changed":function(e,t,i,a,r){var s=a.filter("[data-id="+r.id+"]"),d="tau-boardselector__item_active_true";s.length?(s.hasClass(d)||(a.removeClass(d),s.addClass(d)),i.tauBubble("hide"),this._updateShowMore(t)):this.fire("refresh")},"bus $el.ready:last + edit.completed":function(e,t){this._updateShowMore(t)},_updateShowMore:function(e){var t=e.find(".i-role-action-showmore"),i=t.tauBubble("widget").find(".tau-boardselector__item_active_true");t.find("span:first").text(i.length?i.text():""),t.parent().toggleClass("tau-boardselector__headermenu__item_focused_true",i.length>0)},"bus boardUpdated + boardItemService.ready:last + currentBoard.ready:last + $groups.ready:last + $el.ready:last":function(t,i,a,r,s,d){var n=e.defaults(a.getItemData(i,r.id===i.key),i),o=s.find("li[data-id="+n.key+"]");n.edit=o.find(".tau-board-settings-toggle").hasClass("tau-checked");var l=a.renderItem(n);l.insertAfter(o),o.remove(),this._fireItemsReady(s),this._updateShowMore(d)},"bus $el.ready:last + _boardSettings.ready":function(e,t,i){this._bindToggleSettingsButton(t,i)},"bus afterRender + _boardSettings.ready":function(e,t,i){this._bindToggleSettingsButton(t.element,i)},_bindToggleSettingsButton:function(e,t){var i=function(t){e.find(".tau-board-settings-toggle").toggleClass("tau-checked",!!t.edit)};e.off("click.toggleSettings",".tau-board-settings-toggle"),e.on("click.toggleSettings",".tau-board-settings-toggle",function(){e.find(".tau-boardselector__action-more").tauBubble("hide"),t.get({fields:["edit"],callback:function(e){t.set(e.edit&&e.cells&&0===e.cells.types.length?{set:{emptyCardsSet:+new Date}}:{set:{edit:!e.edit}})}})}),t.unbind({listener:this}),t.bind({fields:["edit"],listener:this,callback:i}),t.get({fields:["edit"],callback:i})}})});
define('tau/ui/extensions/board.selector/ui.extension.board.selector.linkupdater',["Underscore","jQuery","tau/core/extension.base"],function(a,t,e){return e.extend({resetLifecycle:!0,"bus configurator.ready":function(a,t){var e=this,i=t.getAppStateStore();i.get({fields:["acid"],callback:function(a){e.fire("acidData.ready",{id:a.id,acid:a.acid})}}),i.unbind({listener:this}),i.bind({listener:e,fields:["acid"],callback:function(a){e.fire("acidData.ready",{id:i.settings.id,acid:a.acid})}})},"bus configurator.ready:last + $links.ready:last + acidData.ready:last":function(e,i,r,d){r.each(function(){var e=t(this),r=a.clone(d),n=e.attr("data-id"),c=a.trim(e.attr("data-acid"));r.acid=c||d.acid;var s=i.getUrlBuilder().getRelativeBoardUrl(n,r);e.attr("href",s)}),this.fire("linksUpdated")},"bus configurator.ready:last + destroy":function(a,t){var e=t.getAppStateStore();e.unbind({listener:this})}})});
define('tau/ui/extensions/board.selector/ui.extension.board.selector.help',["jQuery","tau/core/extension.base"],function(e,t){return t.extend({configFieldName:"collapser_aside_collapsed","bus afterInit":function(e){var t=e.data.config.context.configurator,n=t.getSettingsManager(),i=this.configFieldName,a=this;n.get({fields:[i],callback:function(e){a.fire("hintsEnable.ready",!!e[i])}}),n.unbind({listener:this}),n.bind({listener:this,fields:[i],callback:function(e){a.fire("hintsEnable.ready",!!e[i])}})},"bus afterRender":function(t,n){var i=n.element,a=i.find(".i-role-item");a.each(function(){var t=e(this),n="<span>"+t.text()+"</span>";t.tauBubble({content:n,template:['<div class="tau-bubble-board">','<div class="tau-bubble-board__arrow"  role="arrow"></div>','<div class="tau-bubble-board__inner tau-container"  role="content"></div>',"</div>"].join(""),zIndex:999,className:"tau-bubble-tooltip",showEvent:"mouseenter",hideEvent:"mouseleave",mode:"tooltip",onPositionConfig:function(e){e.at="right center",e.my="left center"}})}),this.fire("$hinted.ready",a)},"bus $hinted.ready:last+hintsEnable.ready:last":function(e,t,n){t.tauBubble(),t.tauBubble(n?"enable":"disable")}})});
define('tau/ui/extensions/board.selector/ui.extension.board.selector.editable',["Underscore","jQuery","tau/core/extension.base","tau/ui/extensions/board.plus/ui.board.plus.dom.utils"],function(e,t,i,o){return i.extend({"bus $el.ready + $groups.ready":function(i,r,a){var n=this;this.editMode=!1;var d=r.find(".i-role-list"),s=r.find(".i-role-moreitems").detach(),u=r.find(".i-role-action-showmore");d.delegate(".i-role-item a","click",function(e){t(this).closest(".tau-boardselector__group_mode_configure").length&&e.preventDefault()}),u.bind("click",function(e){t(this).closest(".tau-boardselector__group_mode_configure").length&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())});var l=e.bind(this._setLayout,this,s);l(),u.tauBubble({alignTo:r,content:s,showEvent:"click",appendTo:r,onShow:function(){l(),r.addClass("tau-boardselector_expanded_true"),t(window).bind("resize.boardselector",e.throttle(l,200)),t(window).trigger("resize.boardadd")},onHide:function(){r.removeClass("tau-boardselector_expanded_true"),t(window).unbind("resize.boardselector")},onPositionConfig:function(e){e.my="left top",e.at="right top"},template:['<div class="tau-bubble-board tau-boardselector__bubble">','<div class="tau-bubble-board__inner tau-container" role="content"></div>',"</div>"].join("")}),this.fire("$bubbled.ready",u);var c=e.bind(u.data("ui-tauBubble").hide,u.data("ui-tauBubble"));u.data("ui-tauBubble").hide=e.bind(function(e){this.editMode||e()},this,c),t("body").find(".tau-boardselector__overlay").remove(),s.delegate(".i-role-action-configure","click",e.bind(function(){this.editMode=!0,a.addClass("tau-boardselector__group_mode_configure"),t("body").append('<div class="ui-popup-overlay ui-popup-overlay_active_true tau-boardselector__overlay"></div>'),r.addClass("tau-boardselector_mode_configure"),r.tauSortable({groups:d,items:a.find(".i-role-item"),zIndex:300,distance:5,appendTo:r.parent(),createPlaceholderContent:o.createDragNDropPlaceholderContent,processToGroup:function(e,t,i){e.appendTo(i)},helper:function(){return t(this).clone().addClass("tau-view-ghost")},stop:l})},this)),s.delegate(".i-role-action-done, .i-role-action-collapse","click",e.bind(function(){r.hasClass("tau-boardselector_mode_configure")&&(this.editMode=!1,a.removeClass("tau-boardselector__group_mode_configure"),t("body").find(".tau-boardselector__overlay").remove(),r.removeClass("tau-boardselector_mode_configure"),n.fire("edit.done"),r.tauSortable("destroy"),this._setHeight(a,"redraw")),u.tauBubble("hide")},this)),r.bind("tausortablestop",function(e,t){n.fire("sort.stopped",[e,t]),n.fire("dragndrop.completed")})},"bus configurator.ready:last + $groups.ready:last + storageConfig.ready:last + edit.done":function(i,o,r,a){var n=this,d=o.getRestStorage(),s=[],u=1,l=r.eq(0);l.find(".i-role-item").each(function(){var i=t(this),o={id:i.attr("data-id"),menuIsVisible:1,menuNumericPriority:u++};s.push(e.bind(function(e,t){d.data(a.groupName,e.id,{scope:"Public",userData:{menuIsVisible:e.menuIsVisible,menuNumericPriority:e.menuNumericPriority}}).done(function(){t(!1)})},this,o))});var c=r.eq(1);c.find(".i-role-item").each(function(){var i=t(this),o={id:i.attr("data-id"),menuIsVisible:0,menuNumericPriority:u++};s.push(e.bind(function(e,t){d.data(a.groupName,e.id,{scope:"Public",userData:{menuIsVisible:e.menuIsVisible,menuNumericPriority:e.menuNumericPriority}}).done(function(){t(!1)})},this,o))}),e.series(s,function(){n.fire("edit.completed")})},_setLayout:function(e){var i=0,o=0,r=e.find(".i-role-item").length;if(r){var a=t(window).height(),n=t(window).width();o=Math.round(a/47/3),i=Math.floor(r/o);var d=Math.floor(n/220)-1,s=Math.floor(r/5);e.find(".i-role-list").parent().css("maxWidth",13.75*(Math.min(s,d,i)||1)+"rem")}},_setHeight:function(e,i){var o=99,r={redraw:{"max-height":t(window).height()-e[0].getBoundingClientRect().top-o,height:""},edit:{height:t(window).height()-e[0].getBoundingClientRect().top,"max-height":""}};e.eq(0).find(".i-role-list").css(r[i]||{})},destroy:function(){t(window).off("resize.boardadd"),this._super()},"bus $el.ready + view.dom.ready:last":function(i,o){var r=e.bind(this._setHeight,this,o,"redraw");r(),t(window).off("resize.boardadd"),t(window).on("resize.boardadd",e.throttle(r,250))}})});
define('tau/ui/templates/board.selector/ui.template.board.selector.item',["tau/core/templates-factory"],function(t){var e={name:"board.selector.item",engine:"jqote2",markup:['<li class="tau-boardselector__item tau-boardselector__item_type_<%= this.viewMode %> i-role-item',"<% if (this.isActive){ %> tau-boardselector__item_active_true<% } %> ","<% if (this.isShared){ %> tau-boardselector__item_access_public <% } else { %> tau-boardselector__item_access_private <% } %> ",'" ','data-id="<%= this.key %>" data-acid="<%= this.acid %>" data-menu-numeric-priority="<%= this.menuNumericPriority %>" >','<a class="tau-boardselector__link" href="#page=board/<%= this.key %>" data-id="<%= this.key %>" data-acid="<%= this.acid %>"><span><%! this.name %></span></a>','<button type="button" data-title-collapsed="Hide&nbsp;View&nbsp;setup" data-title="Show&nbsp;View&nbsp;setup" data-collapsed-selector=".tau-checked" class="tau-btn tau-options tau-board-settings-toggle ',"<% if (this.edit){ %>tau-checked<% } %> ",' tau-extension-board-tooltip" role="action-toggle-editor">',"</button>","</li>"],dependencies:[]};return t.register(e)});
define('tau/ui/templates/board.selector/ui.template.board.selector',["tau/core/templates-factory","tau/nls/translator","tau/ui/templates/board.selector/ui.template.board.selector.item"],function(e,t){var a={name:"board.selector",engine:"jqote2",markup:['<div class="tau-boardselector">','<div class="tau-boardselector__group  tau-boardselector__group-main i-role-group">','<div class="tau-boardselector__groupheader">','<ul class="tau-boardselector__headermenu">','<li class="tau-boardselector__headermenu__item tau-boardselector__headermenu__item-title">',"<span>Views</span>","</li>",'<li class="tau-boardselector__headermenu__item <%= (this.currentItem ? "tau-boardselector__headermenu__item_focused_true" : "") %> tau-boardselector__headermenu__item-more">','<span class="tau-button-link tau-boardselector__action tau-boardselector__action-more i-role-action-showmore">','<span class="tau-boardselector__moreboard i-role-info tau-extension-board-tooltip" data-title="'+t("See&nbsp;all&nbsp;Views")+'"><%! (this.currentItem ? this.currentItem.name : "") %></span> ','<span class="tau-boardselector__moretext tau-extension-board-tooltip" data-title="'+t("See&nbsp;all&nbsp;Views")+'">More</span>',"</span>","</li>","</ul>","</div>",'<ul class="tau-boardselector__list i-role-list" data-type="main">','<%= fn.sub("board.selector.item", this.items) %>',"</ul>","</div>",'<div class="tau-boardselector__group tau-boardselector__group-more i-role-moreitems  i-role-group">','<div class="tau-boardselector__groupheader">','<ul class="tau-boardselector__headermenu">','<li class="tau-boardselector__headermenu__item tau-boardselector__headermenu__item-collapse">','<button class="tau-button-link tau-boardselector__action tau-boardselector__action-collapse tau-extension-board-tooltip i-role-action-collapse">'+t("Hide")+"</button>&nbsp;","</li>",'<li class="tau-boardselector__headermenu__item tau-boardselector__headermenu__item-configure">','<button class="tau-button-link tau-boardselector__action tau-boardselector__action-configure  i-role-action-configure">Customize menu</button>',"</li>",'<li class="tau-boardselector__headermenu__item tau-boardselector__headermenu__item-done">','<button class="tau-button-link tau-boardselector__action tau-boardselector__action-done  i-role-action-done">Finish</button>',"</li>","</ul>","</div>",'<ul class="tau-boardselector__list i-role-list" data-type="more" data-emptyplaceholder="">','<%= fn.sub("board.selector.item", this.itemsMore) %>',"</ul>",'<div class="tau-boardselector__listemptyplaceholder">','<p class="tau-boardselector__listemptyplaceholder__arrow"></p>','<p class="tau-boardselector__listemptyplaceholder__default">Use this space to store the Views you use rarely.</p>','<p class="tau-boardselector__listemptyplaceholder__default">Click <strong>Customize Menu</strong> to drag the Views here, or to change their order.</p>','<p class="tau-boardselector__listemptyplaceholder__edit">Click <strong>Finish</strong> when done.</p>',"</div>","</div>","</div>"],dependencies:[]};return e.register(a)});
define('tau/components/component.board.selector',["Underscore","tau/components/component.creator","tau/models/board.selector/model.board.selector","tau/ui/extensions/board.selector/ui.extension.board.selector.main","tau/ui/extensions/board.selector/ui.extension.board.selector.linkupdater","tau/ui/extensions/board.selector/ui.extension.board.selector.help","tau/ui/extensions/board.selector/ui.extension.board.selector.editable","tau/ui/templates/board.selector/ui.template.board.selector"],function(e,t,o,r,n,s,a,i){return{create:function(e){e=e||{},e["queue.bus"]=!0;var u={extensions:[o,r,n,s,a],template:i};return t.create(u,e)}}});
define('tau/models/board.startScreen/model.board.startScreen',["Underscore","jQuery","tau/core/extension.base"],function(e,t,r){return r.extend({"bus beforeInit":function(r,o){var a=o.config.context.configurator;this.fire("configurator.ready",a);var i=e.defaults(o.config.options||{},{boardTemplatesGroupName:"boardTemplates",boardTemplateGroupsGroupName:"boardTemplateGroups",boardsGroupName:"boards"});this.fire("options.ready",i);var n=t.Deferred();a.getLoggedUser().isAdministrator?a.getRestStorage().select(i.boardsGroupName,{$where:'(publicData.isShared == "true")',$fields:["key"]}).done(function(e){var t=e.data||[];0===t.length?n.resolve():n.reject()}):n.reject(),n.done(e.bind(function(){this.fire("dataBind",{})},this)).fail(function(){a.getRouting().redirect(a.getUrlBuilder().getRelativeBoardUrl("current"))})},"bus configurator.ready:last + options.ready:last + boardsSet.selected":function(r,o,a,i){var n=t.Deferred(),s=o.getHelpScenarioService(),d=s.getScenarioById(i),c=d.requiredProject;c?o.getApplicationContextService().getApplicationContext({projectIds:[c],teamIds:[]},{success:n.resolve}):n.resolve({acid:void 0});var l=t.Deferred(),u=this;t.post(o.getApplicationPath()+"/board/generate/"+i).fail(function(e){console.log("ERROR: "+e.responseText)}).done(function(){u.fire("boardsSet.applied"),l.resolve()}),t.when(n,l).done(e.bind(function(e){var t=s.checkScenarioPrerequisites(e,d)?i:"scratch";s.setCurrentFlow(t),s.setState(s.stateTypes.ToBeStarted),o.getRouting().redirect(o.getUrlBuilder().getRelativeBoardUrl("current",e.acid)),this.fire("helpFlow.activated")},this))}})});
define('tau/ui/extensions/board.startScreen/ui.extension.board.startScreen',["jQuery","tau/core/extension.base"],function(e,t){return t.extend({"bus afterRender":function(t,r){var i=r.element;i.on("click",".i-role-trigger",_.bind(function(t){var r=e(t.currentTarget);i.children().css("visibility","hidden"),i.tauProgressIndicator({className:"tau-start"}),i.tauProgressIndicator("show"),this.fire("boardsSet.selected",r.data("type"))},this))}})});
define('tau/ui/templates/board.startScreen/ui.template.board.startScreen',["tau/core/templates-factory"],function(e){var t={name:"board.startScreen",engine:"jqote2",markup:['<div class="tau-start-screen">','<div class="tau-start-screen__invitation">',"<h1>targetprocess<sup>3</sup></h1>","<h2>Start Your Experiments!</h2>",'<ul class="tau-start-screen__menu">','<li class="tau-start-screen__menu-item-scrum">','<a class="i-role-trigger" data-type="scrum">',"<h3>Scrum</h3>","<p>","Iterate as needed","<br>","until the distillate is clear.","</p>","</a>","</li>",'<li class="tau-start-screen__menu-item-kanban">','<a class="i-role-trigger" data-type="kanban">',"<h3>Kanban</h3>","<p>","Want to keep the flow going?","<br>","Heat to increase throughput.","</p>","</a>","</li>",'<li class="tau-start-screen__menu-item-from-scratch">','<a class="i-role-trigger" data-type="scratch">',"<h3>From Scratch</h3>","<p>","Whip up a custom process.","<br>","Alchemists are welcome!","<br>","(advanced mode)","</p>","</a>","</li>","</ul>","</div>","</div>"]};return e.register(t)});
define('tau/components/component.board.startScreen',["Underscore","tau/components/component.creator","tau/models/board.startScreen/model.board.startScreen","tau/ui/extensions/board.startScreen/ui.extension.board.startScreen","tau/ui/templates/board.startScreen/ui.template.board.startScreen"],function(e,t,r,n,a){return{create:function(e){var o={extensions:[r,n],template:a};return t.create(o,e)}}});
define('tau/ui/extensions/board.main.menu/ui.extension.board.system-info',["jQuery","Underscore","tau/core/extension.base"],function(t,e,i){function n(t){return 10>t?"< 0.01 s":t/1e3+" s"}return i.extend({init:function(t){this.globalBus=t.bus.globalBus,this._super(t)},"bus initialize:last + afterRender:last":function(t,e,i){this.configurator=e.context.configurator,this.diagnostics=e.context.configurator.getDiagnosticsService();var r=i.element.find(".tau-changelog-link"),a=this.configurator.getChangelogController();r.click(a.show.bind(a));var o=i.element.find(".tau-system-info"),s=o.find(".tau-server-time"),c=o.find(".tau-client-time"),u=this.configurator.getDiagnosticsService(),l=u.get("page");l&&(s.html(n(l.server)),c.html(n(l.client)));var d=function(t){var e=t.data;if(e){var i=o.find(".tau-board-server-time"),r=o.find(".tau-board-client-time");i.html(n(e.server)),r.html(n(e.client)),o.find(".tau-board-time").show()}};u.on("board",d),d({data:this.diagnostics.get("board")})}})});
define('tau/ui/templates/board.main.menu/ui.template.board.system-diagnostics',["tau/core/templates-factory"],function(e){var t={name:"board.system-diagnostics",engine:"jqote2",markup:['<div class="diagnostic-report">','<div class="diagnostic-report_body">','<div class="diagnostic-report_title">Diagnostic report</div>','<div class="tau-txt i-role-diagnostics-description">',"<p>This performance diagnostic report will help us improve the performance.</p>","</div>",'<div class="i-role-loader tau-txt" style="display: none;">','<a href="#"><span class="tau-icon-general tau-icon-loading"></span>Report in progress</a>',"</div>",'<div class="tau-txt i-role-see-full-report" style="display: none;">','<a href="#">See full report</a>',"</div>",'<div class="i-role-report-body diagnostic-report_result" style="display: none;"></div>','<div class="diagnostic-report_wrap-btn diagnostic-report_bottom diagnostic-report_bottom--scroll">','<button class="tau-btn tau-primary tau-btn-large i-role-send-button" disabled="disabled" onclick="return false;">Send report</button>','<div class="wrap-textarea">','<textarea class="i-role-comment" placeholder="Share more details"></textarea>',"</div>","</div>","</div>","</div>"],dependencies:[]};return e.register(t)});
define('tau/ui/templates/board.main.menu/ui.template.board.system-diagnostics.full-report',["tau/core/templates-factory","tau/utils/utils.date"],function(s,i){var t={name:"board.system-diagnostics.full-report",engine:"jqote2",customFunctions:{formatDate:function(s){return i.formatAs(s,"dd MMM yyyy")},formatTime:function(s){return i.formatAs(s,"hh:mm:ss tt")},formatDuration:function(s){return i.getAge(s,new Date)},jsonStringify:function(s){return JSON.stringify(s,null,4)}},markup:['<div class="diagnostic-report_result_colom">','<div class="diagnostic-report_result_item">','<div class="diagnostic-report_result_table">','<div class="diagnostic-report_result_row">','<div class="diagnostic-report_result_th"><%=fn.formatDate(this.page.now)%><br/><%=fn.formatTime(this.page.now)%></div>','<div class="diagnostic-report_result_td">','<div class="diagnostic-report_result_table">','<div class="diagnostic-report_result_row">','<div class="diagnostic-report_result_td">User</div>','<div class="diagnostic-report_result_td">#<%= this.user.id %> <%= this.user.name %></div>',"</div>",'<div class="diagnostic-report_result_row">','<div class="diagnostic-report_result_td"></div>','<div class="diagnostic-report_result_td"><%= this.user.email %></div>',"</div>",'<div class="diagnostic-report_result_row">','<div class="diagnostic-report_result_td"></div>','<div class="diagnostic-report_result_td">',"<% if (!this.user.isAdministrator) { %><strike><% } %>Administrator <% if (!this.user.isAdministrator) { %></strike><% } %>","<% if (!this.user.isObserver) { %><strike><% } %>Observer<% if (!this.user.isObserver) { %></strike><% } %>","</div>","</div>",'<div class="diagnostic-report_result_row space">','<div class="diagnostic-report_result_td">Account</div>','<div class="diagnostic-report_result_td" title="<%= this.account.name %>"><span class="txt"><%= this.account.name %></span><i class="tau-version tau-version--pro"><%= this.account.edition %></i></div>',"</div>",'<div class="diagnostic-report_result_row">','<div class="diagnostic-report_result_td">Created</div>','<div class="diagnostic-report_result_td"><%= fn.formatDuration(this.page.age) %></div>',"</div>","</div>","</div>","</div>","</div>","</div>",'<div class="diagnostic-report_result_item">','<div class="diagnostic-report_result_title">','<% if (this.layout.viewMode) { %><span class="tau-icon-general tau-icon-<%= this.layout.viewMode %>"></span><% } %><%= this.layout.pageType %> view',"</div>","<% if (this.board.timing) {%>",'<div class="diagnostic-report_result_table">','<div class="diagnostic-report_result_row">','<div class="diagnostic-report_result_th">Load</div>','<div class="diagnostic-report_result_td"><%= this.board.timing.network %> ms</div>',"</div>",'<div class="diagnostic-report_result_row">','<div class="diagnostic-report_result_th">Processing</div>','<div class="diagnostic-report_result_td"><%= this.board.timing.processing %> ms</div>',"</div>",'<div class="diagnostic-report_result_row">','<div class="diagnostic-report_result_th">Context</div>','<div class="diagnostic-report_result_td"><%= this.context.selectedProjects %> project(s)</div>',"</div>",'<div class="diagnostic-report_result_row">','<div class="diagnostic-report_result_th"></div>','<div class="diagnostic-report_result_td"><%= this.context.selectedTeams %> team(s)</div>',"</div>","<% if (this.layout.cards) { %>",'<div class="diagnostic-report_result_row">','<div class="diagnostic-report_result_th"></div>','<div class="diagnostic-report_result_td"><%= this.layout.cards %> card(s)</div>',"</div>","<%}%>","</div>","<% } %>",'<div class="diagnostic-report_result_link">','<a href="<%= this.page.location %>"><%= this.page.location %></a>',"</div>",'<div class="diagnostic-report_result_table">',"<% if (this.board.boardDefinition) {%>",'<div class="diagnostic-report_result_row">','<div class="diagnostic-report_result_th">Settings</div>','<div class="diagnostic-report_result_td"><pre class="diagnostic-report_result_row_json"><%= fn.jsonStringify(this.board.boardDefinition) %></pre></div>',"</div>","<% };%>","<% _.forEach(this.board.cardsData, function(data) {%>",'<div class="diagnostic-report_result_row">','<div class="diagnostic-report_result_th"><%= data.typeName %> card</div>','<div class="diagnostic-report_result_td"><%= data.data %></div>',"</div>","<% });%>","</div>","</div>","</div>",'<div class="diagnostic-report_result_colom">',"<% if (this.serverUsage) {%>",'<div class="diagnostic-report_result_item">','<div class="diagnostic-report_result_table">','<div class="diagnostic-report_result_row space">','<div class="diagnostic-report_result_th">Server configuration</div>','<div class="diagnostic-report_result_td"><%= this.os.VersionString %></div>',"</div>",'<div class="diagnostic-report_result_row">','<div class="diagnostic-report_result_th"></div>','<div class="diagnostic-report_result_td">','<div class="diagnostic-report_result_table">','<div class="diagnostic-report_result_row">','<div class="diagnostic-report_result_td" style="width: 100px">Available RAM:</div>','<div class="diagnostic-report_result_td"><%= this.serverUsage.availableRam.toFixed(2) %> <span class="tau-text_type_gray">of <%= this.serverUsage.totalRam.toFixed(2) %> GB</span></div>',"</div>",'<div class="diagnostic-report_result_row">','<div class="diagnostic-report_result_td">CPU usage:</div>','<div class="diagnostic-report_result_td"><%= this.serverUsage.cpu.toFixed(2) %>%</div>',"</div>",'<div class="diagnostic-report_result_row">','<div class="diagnostic-report_result_td">Free disk space:</div>','<div class="diagnostic-report_result_td"><%= this.serverUsage.diskFreeSpace.toFixed(2) %> <span class="tau-text_type_gray">of <%= this.serverUsage.diskSize.toFixed(2) %> GB</span></div>',"</div>","</div>","</div>","</div>","</div>","</div>","<% }%>",'<div class="diagnostic-report_result_item">','<div class="diagnostic-report_result_table">','<div class="diagnostic-report_result_row">','<div class="diagnostic-report_result_th">Network</div>','<div class="diagnostic-report_result_td">','<div class="diagnostic-report_result_table">',"<% if (this.browser.timing && this.browser.timing.network) { %>",'<div class="diagnostic-report_result_row">','<div class="diagnostic-report_result_td">Page load</div>','<div class="diagnostic-report_result_td"><%= this.browser.timing.network %> ms</div>',"</div>","<% } %>",'<div class="diagnostic-report_result_row">','<div class="diagnostic-report_result_td">Latency</div>','<div class="diagnostic-report_result_td"><%= this.network.latency.toFixed(0) %> ms</div>',"</div>",'<div class="diagnostic-report_result_row">','<div class="diagnostic-report_result_td">Speed benchmark</div>','<div class="diagnostic-report_result_td"><%= this.network.speed %> ms</div>',"</div>","</div>","</div>","</div>","</div>","</div>",'<div class="diagnostic-report_result_item">','<div class="diagnostic-report_result_table">','<div class="diagnostic-report_result_row space">','<div class="diagnostic-report_result_th">Browser</div>','<div class="diagnostic-report_result_td"><%= this.browser.userAgent %></div>',"</div>",'<div class="diagnostic-report_result_row space">','<div class="diagnostic-report_result_th"></div>','<div class="diagnostic-report_result_td"><%= this.browser.platform %>, <%= this.browser.language %></div>',"</div>",'<div class="diagnostic-report_result_row space">','<div class="diagnostic-report_result_th">Performance</div>','<div class="diagnostic-report_result_td">','<div class="diagnostic-report_result_table">',"<% if (this.browser.timing && this.browser.timing.processing) { %>",'<div class="diagnostic-report_result_row">','<div class="diagnostic-report_result_td">Page processing</div>','<div class="diagnostic-report_result_td"><%= this.browser.timing.processing %> ms</div>',"</div>","<% } %>",'<div class="diagnostic-report_result_row">','<div class="diagnostic-report_result_td">JS benchmark</div>','<div class="diagnostic-report_result_td"><%= this.browser.benchmark %> ms</div>',"</div>","</div>","</div>","</div>","<% if (this.browser.memory) { %>",'<div class="diagnostic-report_result_row space">','<div class="diagnostic-report_result_th">Memory</div>','<div class="diagnostic-report_result_td">','<div class="diagnostic-report_result_table">','<div class="diagnostic-report_result_row">','<div class="diagnostic-report_result_td">Heap size limit</div>','<div class="diagnostic-report_result_td"><%= this.browser.memory.jsHeapSizeLimit.toFixed(2) %> MB</div>',"</div>",'<div class="diagnostic-report_result_row">','<div class="diagnostic-report_result_td">Used heap size</div>','<div class="diagnostic-report_result_td"><%= this.browser.memory.usedJSHeapSize.toFixed(2) %> MB</div>',"</div>",'<div class="diagnostic-report_result_row">','<div class="diagnostic-report_result_td">Total heap size</div>','<div class="diagnostic-report_result_td"><%= this.browser.memory.totalJSHeapSize.toFixed(2) %> MB</div>',"</div>","</div>","</div>","</div>","<% } %>","</div>","</div>",'<div class="diagnostic-report_result_item">','<div class="diagnostic-report_result_table">','<div class="diagnostic-report_result_row space">','<div class="diagnostic-report_result_th"><%= this.mashups.length%> mashups</div>','<div class="diagnostic-report_result_td">',"<% _.forEach(this.mashups, function(mashup) {%>","<%= mashup %><br>","<% });%>","</div>","</div>","</div>","</div>","<% if (this.errors.length > 0) {%>",'<div class="diagnostic-report_result_item">','<div class="diagnostic-report_result_title">Activity log</div>','<div class="diagnostic-report_result_table diagnostic-report_activity-log">',"<%  _.each(this.errors, function(day) { %>","<%  _.each(day.errors, function(error, index) { %>",'<div class="diagnostic-report_result_row">','<div class="diagnostic-report_result_td"><%= index === 0 ? fn.formatDate(day.date) : "" %></div>','<div class="diagnostic-report_result_td">','<span class="tau-text_type_gray"><%= fn.formatTime(error.timestamp) %></span>',"</div>",'<div class="diagnostic-report_result_td">error: <%= error.message %><br><%= error.uri %>:<%= error.line %><br><%= error.page %></div>',"</div>","<% }); %>","<% }); %>","</div>","</div>","<% } %>","</div>"],dependencies:[]};return s.register(t)});
define('tau/ui/extensions/board.main.menu/ui.extension.board.system-diagnostics',["jQuery","Underscore","tau/core/extension.base","tp/mashups","tau/ui/templates/board.main.menu/ui.template.board.system-diagnostics","tau/ui/templates/board.main.menu/ui.template.board.system-diagnostics.full-report","app.path","tau/models/board.customize.units/board.customize.cards.builderSelector","tau/services/customize/service.customize.card.layout.factory","tau/models/board.customize.units/const.card.sizes"],function(t,e,i,s,n,r,o,a,d,c){return i.extend({init:function(t){this._super(t),this.initialized=!1},"bus afterRender:last + initialize:last + boardSettings.ready":function(t,e,i,s){this._configurator=i.context.configurator,this.diagnostics=this._configurator.getDiagnosticsService(),this._window=this._configurator.getWindow(),this._$systemInfo=e.element.find(".tau-system-info"),this._layoutFactory=new d(this._configurator,s.boardSettings),this.initialized||(this._$systemInfo.find(".i-role-diagnostic").click(this._collectDiagnosticData.bind(this)),this.initialized=!0),this._boardSettings=s.boardSettings.settings,this.fire("system.diagnostics.report.initialized")},_collectDiagnosticData:function(){var e=n.render(),i=e.find(".i-role-see-full-report"),s=function(e){i.click(function(){e.find(".i-role-report-body").show(),t(this).hide(),t(".i-role-diagnostics-description").hide()})};s(e);var o=e.find(".i-role-loader");o.show();var a=e.find(".i-role-report-body"),d=t.when(this.diagnostics.networkLatency(),this.diagnostics.networkSpeed(),this._urlContext(),this._boardDefinition(),this.diagnostics.serverUsage(),this._cardsSettings());d.then(function(t,s,n,d,c,l){var u=this._configurator.getLoggedUser(),h={id:u.id,name:u.name,email:u.email,isAdministrator:u.isAdministrator||!1,isObserver:u.isObserver||!1},p={name:this._window.location.host,edition:this._window.tauSystemInfo.edition},g={location:this._window.location.href,timestamp:t.timestamp,age:this._window.tauServerInfo.created,now:new Date},f={latency:t.latency,speed:s.speed},m="context"===n.__type?{processes:n.processes.length,projects:n.projectIdsAvailable.length,selectedProjects:n.selectedProjects.length,teams:n.teamIdsAvailable.length,selectedTeams:n.selectedTeams.length}:"Couldn't get context",b=this.diagnostics.get("board"),_={boardDefinition:d.data,cardsData:l?this._adaptCardsData(l):null,timing:b?{network:b.server,processing:b.client}:null},y={page:g,network:f,context:m,board:_,os:this._window.tauSystemInfo.os,serverUsage:c,mashups:this._listInstalledMashups(),browser:this.diagnostics.browser(),user:h,account:p,layout:this._pageTypeInfo(),errors:this._getErrors()},w=r.render(y);a.html(w);var v=e.find(".i-role-send-button");v.removeAttr("disabled").click({data:y,popup:e},this._sendReport.bind(this)),o.hide(),i.show(),this.fire("system.diagnostics.report.rendered",{element:e})}.bind(this)),this._renderReport(e)},_getErrors:function(){var t=this._window.getJavascriptErrors?this._window.getJavascriptErrors():[];return e.chain(t.reverse()).groupBy(function(t){var e=new Date(Date.parse(t.timestamp));return new Date(e.getFullYear(),e.getMonth(),e.getDate())}).map(function(t,e){return{date:new Date(e),errors:t}}).value()},_adaptCardsData:function(t){var i=new a,s=function(t){return e.map(e.keys(t),function(e){return{typeName:e,data:i.build(e,t[e])}})};return t.length?e.flatMap(t,function(t){return s(t)}):s(t)},_cardsSettings:function(){var e=[],i=function(t,i){t.length>0&&e.push(this._layoutFactory.getCardLayoutsByTypesAndSize(t,i))}.bind(this);return"newlist"===this._boardSettings.viewMode?(i(this._boardSettings.cells.types,"list"),i(this._boardSettings.x.types,"list"),i(this._boardSettings.y.types,"list")):i(this._boardSettings.cells.types,c.zoomToSize(this._boardSettings.zoomLevel)),t.when.apply(this,e)},_sendReport:function(t){var e=t.data.popup,i=e.find(".i-role-comment"),s=e.find(".i-role-send-button"),n=t.data.data;n.comment=i.val(),s.text("Sending..."),this.diagnostics.sendReport(n).done(function(){s.text("Sent").attr("disabled","disabled"),i.attr("disabled","disabled"),this.fire("notification",{$node:"<h3>Report sent successfully</h3>"}),this.fire("system.diagnostics.report.sent")}.bind(this)).fail(function(){s.text("Send report"),this.fire("error",{$node:"<h3>There was an error sending report</h3>"}),this.fire("system.diagnostics.report.failed")}.bind(this))},_renderReport:function(t){t.tauPopup({className:"ui-popup_gray",hideOnEscape:!0,popupContent:t}),t.tauPopup("show")},_listInstalledMashups:function(){var t=new s,i=t.getRegisteredMashups();return e.map(e.keys(i),function(t){var e=t.split("/");return e[e.length-2]})},_urlContext:function(){var t=this._configurator.getAppStateStore().settings.acid;return this._configurator.getApplicationContextService().getApplicationContext({acid:t})},_boardDefinition:function(){var e=/(?:=board\/(\d+))/.exec(location.hash),i=e&&e[1];return i?this._configurator.getBoardDefinitionFactory().boardService.getBoardData(i):t.Deferred().resolve({data:null})},_pageTypeInfo:function(){if("none"===this._boardSettings.id)return{pageType:"Entity"};var e=t("body").find(".i-role-board-body"),i={board:"Board",list:"Details",timeline:"Timeline",newlist:"List"};return{viewMode:this._boardSettings.viewMode,pageType:i[this._boardSettings.viewMode],cards:e.find(".i-role-card").length}}})});
define('tau/components/component.board.system-info',["tau/components/component.creator","jQuery","tau/utils/utils.date","tau/ui/extensions/board.main.menu/ui.extension.board.system-info","tau/ui/extensions/board.main.menu/ui.extension.board.system-diagnostics","tau/components/extensions/error/extension.errorBar"],function(t,e,a,s,n,i){return{create:function(e){var o={name:"board.system-info",engine:"jqote2",customFunctions:{dateToString:function(t){return a.format.date.short(t)}},markup:['<ul class="tau-user-submenu">','<li class="tau-system-info">','<table class="tau-system-info_table">',"<tr>","<th><b>Load time</b>, s</th>","<th>server</th>","<th>client</th>","</tr>","<tr>","<td>Page</td>",'<td><span class="tau-server-time">...</span></td>','<td><span class="tau-client-time">...</span></td>',"</tr>","<tr>","<td>View</td>",'<td><span class="tau-board-server-time">...</span></td>','<td><span class="tau-board-client-time">...</span></td>',"</tr>","</table>",'<div class="tau-txt">Too slow?</div>','<button class="tau-btn i-role-diagnostic" onclick="return false;">Get diagnostic report</button>','<div class="tau-line">','<span class="tau-version">Version <%= window.tauSystemInfo.version %></span>'," ",'<span class="tau-date">of <%= fn.dateToString(window.tauSystemInfo.date) %></span><br>','<a class="tau-changelog-link" href="#">',"What is new?","</a>","</div>","</li>","</ul>"]},r={extensions:[s,n,i],template:o},u=t.create(r,e);return u.fire("dataBind",{}),u}}});
define('tau/models/tags/tagsProcessor',["tau/core/class"],function(n){return n.extend({init:function(){},asArray:function(n){return this._process(n)},asString:function(n){var t=this._process(n);return t.join(", ")},_process:function(n){return _.isString(n)&&(n=n.split(",")),n=_.map(n,function(n){return _.trim(n)}),n=_.compact(n),n=_.uniq(n,!1,function(n){return n.toLowerCase()})}})});
define('tau/models/board.templates.editor/model.board.templates.editor',["Underscore","tau/core/extension.base","tau/models/tags/tagsProcessor"],function(e,t,i){return t.extend({fieldsToClone:["cells","x","y","zoomLevel","viewMode","cardSettings","timelineSettings"],"bus beforeInit":function(t,a){var o=a.config.context.configurator;this.fire("configurator.ready",o),this.fire("dataBind",{}),this.fire("tagsProcessor.ready",new i);var r=e.defaults(a.config.options||{},{groupName:"boardTemplates"});this.fire("options.ready",r)},"bus boardSettings.ready:last + form.submitted":function(t,i){var a=i.boardSettings;a.get({fields:this.fieldsToClone,callback:e.bind(function(e){this.fire("boardData.ready",e)},this)})},"bus options.ready:last + configurator.ready:last + tagsProcessor.ready:last + boardData.ready + form.submitted":function(t,i,a,o,r,s){var n=a.getRestStorage(),d={name:e.asString(s.name).trim().slice(0,50),description:e.asString(s.description).trim().slice(0,255),tags:o.asArray(o.asArray(s.tags).concat(["custom"])),definition:e.pick(r,this.fieldsToClone),numericPriority:(new Date).getTime()};d.name.length?n.data(i.groupName,void 0,{scope:"Public",publicData:d}).done(e.bind(function(e){this.fire("form.processed",e)},this)):this.fire("form.failed",{name:"Should not be empty"})}})});
define('tau/ui/extensions/board.templates.editor/ui.extension.board.templates.editor',["Underscore","jQuery","tau/core/extension.base","libs/jquery/jquery.placeholder"],function(e,r,t){return t.extend({"bus afterRender":function(e,r){var t=r.element;this.fire("$el.ready",t)},"bus boardSettings.ready + $el.ready":function(r,t,i){var n=t.boardSettings,a=i.find(".i-role-formtrigger"),f=i.find("form"),o=i.find(".i-role-formholder").detach();a.tauBubble({zIndex:120,content:o,onShow:function(){f.find(":text:first").focus(),n.get({fields:["name"],callback:function(r){f.find("[name=name]").val(e.asString(r.name))}})}}),this.fire("$form.ready",f),this.fire("$bubbled.ready",a)},"bus $form.ready":function(t,i){i.placeholder(),i.on("submit",e.bind(function(e){e.preventDefault();var t={};r(e.currentTarget).find(":input").each(function(){t[this.name]=this.value}),this.fire("form.submitted",t)},this))},"bus $bubbled.ready:last + $form.ready:last + form.processed":function(e,r,t){this.fire("notification",{message:"View template was added"}),r.tauBubble("hide"),t.trigger("reset")},"bus $bubbled.ready:last + $form.ready:last + form.failed":function(r,t,i,n){var a=i.find(":input");a.removeClass("tau-error"),e.forEach(n,e.bind(function(e,r){a.filter("[name="+r+"]").addClass("tau-error"),this.fire("error",{message:e})},this)),a.filter(".tau-error:first").focus()}})});
define('tau/ui/templates/board.templates.editor/ui.template.board.templates.editor',["tau/core/templates-factory"],function(t){var e={name:"board.templates.editor",engine:"jqote2",markup:['<div class="tau-inline-group tau-board-save-template">',"<div>",'<button type="button" class="tau-btn tau-save-template i-role-formtrigger">Save as Template</button>',"</div>",'<div class="tau-save-template-form i-role-formholder">',"<form>",'<div class="tau-field"><input type="text" class="tau-in-text" placeholder="Name" name="name"></div>','<div class="tau-field"><textarea placeholder="Description" class="tau-in-text" name="description"></textarea></div>','<div class="tau-field"><input type="text" class="tau-in-text" placeholder="Tags, comma separated" name="tags"></div>','<div class="tau-field"><button class="tau-btn" type="submit">Save</button></div>',"</form>","</div>","</div>"]};return t.register(e)});
define('tau/components/component.board.templates.editor',["Underscore","tau/components/component.creator","tau/models/board.templates.editor/model.board.templates.editor","tau/ui/extensions/board.templates.editor/ui.extension.board.templates.editor","tau/components/extensions/error/extension.errorBar","tau/ui/templates/board.templates.editor/ui.template.board.templates.editor"],function(e,t,o,r,a,n){return{create:function(e){var s={extensions:[o,r,a],template:n},i=t.create(s,e);return i}}});
define('tau/models/board.templates.selector/model.board.templates.selector',["Underscore","tau/core/extension.base"],function(e,t){return t.extend({"bus beforeInit":function(t,i){var r=i.config.context.configurator,n=e.defaults(i.config.options||{},{groupName:"boardTemplates",sliceTagsAt:!1});this.fire("configurator.ready",r),this.fire("options.ready",n),this.fire("itemsDefault.ready",[])},"bus options.ready + configurator.ready":function(t,i,r){var n=r.getRestStorage();n.removeAllListeners(this),n.on("afterInsert",function(e){e.data.$group==i.groupName&&this.fire("refresh")},this),n.on("afterRemove",function(e){e.data.$group==i.groupName&&this.fire("item.remove.completed",e.data.id)},this),n.select(i.groupName,{$fields:["key","publicData.name","publicData.description","publicData.tags","publicData.definition","publicData.numericPriority","publicData.previewName"],$limit:{start:0,max:10}}).done(e.bind(function(e){this.fire("itemsCustom.ready",e.data)},this))},"bus itemsDefault.ready + itemsCustom.ready":function(t,i,r){var n=i.concat(r);e.each(n,function(e,t){e.id=t}),this.fire("items.ready",n)},"bus configurator.ready + options.ready + items.ready":function(t,i,r,n){var a=[{name:"All",count:99999,isSelected:!0},{name:"Scrum",count:99998},{name:"Kanban",count:99997},{name:"Custom",count:99996}],o=e.reduce(n,function(e,t){return e.concat(t.tags||[])},[]);o=e.groupBy(o,function(e){return e.toLowerCase()}),o=e.map(o,function(e){return{name:e[0],count:e.length}}),a=a.concat(o),a=e.uniq(a,!1,function(e){return e.name.toLowerCase()}),a=e.sortBy(a,function(e){return-e.count});var s=e.reduce(a,function(e,t,i){return e[i+1]=(e.length?e[i]:0)+t.name.length+5,e},[0]),u=($("body").width()-600)/10,c=e.find(s,function(e){return e>u}),d=e.indexOf(s,c),f=r.sliceTagsAt||(0>d?s.length:d),m=i.getApplicationPath(),l=i.getLoggedUser();n=e.sortBy(n,"numericPriority"),n=e.map(n,function(e,t){return{id:e.id,name:e.name,description:e.description||"",previewSrc:m+"/JavaScript/tau/css/images/board_templates/"+(e.previewName||"default.png"),access:{remove:t>0&&l.isAdministrator?!0:!1}}});var g=a.slice(f);g=e.sortBy(g,function(e){return e.name.toLowerCase()}),this.fire("dataBind",{items:n,tags:a.slice(0,f),moreTags:g})},"bus boardSettings.ready:last + items.ready:last + item.selected":function(t,i,r,n){var a=i.boardSettings,o=r[n];if(o){var s=o.definition;s.name=o.name,s.viewMode=s.viewMode||"board",e.forEach(["cells","x","y"],function(t){s[t]=s[t]||{types:[]},s[t]&&(s[t]=e.defaults(s[t],{types:[],ordering:null,filter:""}))}),s&&a.setDef({set:s}).done(e.bind(function(){this.fire("board.template.selected",s),this.fire("item.selected.completed",n)},this))}},"bus configurator.ready:last + options.ready:last + items.ready:last + item.remove":function(t,i,r,n,a){var o=e.find(n,function(e){return e.id==a});if(o){var s=i.getRestStorage();s.remove(r.groupName,{id:o.id,$key:o.key}).done()}},"bus configurator.ready > destroy":function(e,t){var i=t.getRestStorage();i.removeAllListeners(this)}})});
define('tau/ui/extensions/board.templates.selector/ui.extension.board.templates.selector.main',["jQuery","tau/core/extension.base"],function(e,t){return t.extend({resetLifecycle:!0,"bus afterRender":function(e,t){var a=t.element;this.fire("confirmation.toggle",!0),this.fire("$el.ready",a),this.fire("$list.ready",a.find(".tau-templates-body")),this.fire("$items.ready",a.find(".i-role-item"))},"bus $items.ready":function(e,t){var a=this;t.find(".i-role-tabheader").on("click",function(e){e.stopPropagation(),a.fire("setup.pressed")})},"bus $el.ready:last + $items.ready:last + confirmation.toggle":function(t,a,i,n){var l=this,o=a.data("confirmation");o!=n&&(i.each(function(){var t=e(this),a=t.data("id"),n=t.tauBubble({template:['<div class="tau-bubble tau-warning-bubble">','<div class="tau-bubble__inner tau-container"  role="content"></div>',"</div>"].join(""),content:["<h3>This View settings will be reset and new template will be applied. Do you want to do that?</h3>",'<div class="tau-buttons">','<button class="tau-btn tau-attention i-role-actionok">Ok</button>','<button class="tau-btn i-role-actioncancel">Cancel</button>',"</div>"].join(""),onPositionConfig:function(e){e.my="center center",e.at="center center"},onBeforeShow:function(){return t.hasClass("tau-template-item-checked")?!1:void 0},onHide:function(){t.toggleClass("tau-template-item_hover",!1)},onShow:function(){t.toggleClass("tau-template-item_hover",!0);var e=n.tauBubble("widget");e.unbind("click"),e.one("click",".i-role-actioncancel",function(){n.tauBubble("hide")}),e.one("click",".i-role-actionok",function(){i.not(t).removeClass("tau-template-item-checked"),t.toggleClass("tau-template-item-checked",!0),n.tauBubble("hide"),l.fire("item.selected",a)})},zIndex:130})}),n?(i.tauBubble("enable"),i.unbind("click.boardTemplates")):(i.tauBubble("disable"),i.on("click.boardTemplates",function(){var t=e(this),a=t.data("id");i.not(t).removeClass("tau-template-item-checked"),t.toggleClass("tau-template-item-checked",!0),l.fire("item.selected",a)})),a.data("confirmation",!!n))},"bus $el.ready:last + $list.ready:last + $items.ready:last + external.setFocusOnSelected":function(e,t,a,i){var n=i.filter(".tau-template-item-checked");n.length&&a.scrollTo(n)},"bus $el.ready:last + $list.ready:last + $items.ready:last + external.selectDefault":function(e,t,a,i){var n=i.first().toggleClass("tau-template-item-checked",!0);n.length&&a.scrollTo(n)},"bus $el.ready:last + $list.ready:last + $items.ready:last + external.selectNone":function(e,t,a,i){i.filter(".tau-template-item-checked").toggleClass("tau-template-item-checked",!1)}})});
define('tau/ui/extensions/board.templates.selector/ui.extension.board.templates.selector.filter',["Underscore","jQuery","tau/core/extension.base"],function(t,e,a){return a.extend({"bus $el.ready":function(t,a){var i=this,n=a.find("form.i-role-filterform"),s=n.find("[name=tag]");n.on("submit",function(t){t.preventDefault(),i.fire("filter.submitted",e(this).serializeArray())}),a.delegate("input[name=name]","keyup",function(){n.submit()}),a.delegate("input[name=name]","keydown",function(t){t.keyCode==e.ui.keyCode.ESCAPE&&t.stopPropagation(),t.which==e.ui.keyCode.ENTER&&e(this).trigger("blur")});var l=a.find(".i-role-moretagstrigger"),r=a.find(".i-role-moretagslist").detach();a.on("click",".i-role-tag",function(){var t=e(this);a.find(".i-role-tag.tau-active").not(this).toggleClass("tau-active",!1),t.toggleClass("tau-active",!0),s.val(t.text()),n.submit()}),l.length&&(a.on("click",".i-role-tag",function(){l.toggleClass("tau-active",!1),l.text(l.data("labelText"))}),l.tauBubble({zIndex:130,content:r}),r.find("ul").css("maxHeight",.4*e(window).height()),r.on("click",".i-role-tag",function(){a.find(".i-role-tag.tau-active").not(this).toggleClass("tau-active",!1);var t=e(this),i=t.text();l.toggleClass("tau-active",!0),l.text(i),l.tauBubble("hide"),s.val(t.text()),n.submit()}))},matchName:function(e,a){var i=e.toLowerCase();return 0==a.length||t.any(a,function(t){return i.indexOf(t)>=0})},matchTag:function(e,a){var i=e.toLowerCase();return 0==a.length||t.any(a,function(t){return i==t})},"bus $el.ready:last + items.ready:last + filter.submitted":function(e,a,i,n){var s={};t.forEach(n,function(t){s[t.name]=t.value});var l={name:t.compact(t.trim(s.name).toLowerCase().split(/\s+/g)),tag:t.compact("all"!=t.trim(s.tag).toLowerCase()?[t.trim(s.tag).toLowerCase()]:[])},r={name:this.matchName,tag:this.matchTag},o=a.find(".i-role-item"),g=0;t.any(l,function(t){return t.length>0})?(t.forEach(i,function(e){var a=0==e.tags.length&&0==l.tag.length||t.any(e.tags||[],function(t){return r.tag(t,l.tag)}),i=r.name(e.name,l.name)||r.name(e.description,l.name),n=a&&i,s=o.filter("[data-id="+e.id+"]");n&&s.length&&(g+=1),s.toggleClass("tau-templates-settings__item_filtered_false",!n),s.toggleClass("tau-templates-settings__item_filtered_true",n)}),a.toggleClass("tau-templates-settings_filtered_none",0==g)):(a.toggleClass("tau-templates-settings_filtered_none",!1),o.toggleClass("tau-templates-settings__item_filtered_false",!1),o.toggleClass("tau-templates-settings__item_filtered_true",!1)),this.fire("filter.completed")}})});
define('tau/ui/extensions/board.templates.selector/ui.extension.board.templates.selector.remove',["jQuery","tau/core/extension.base"],function(e,t){return t.extend({"bus $items.ready":function(t,n){var i=this;n.each(function(){var t=e(this),n=t.find(".i-role-actionremove"),o=n.parents(".i-role-item:first").data("id"),a=n.tauBubble({template:['<div class="tau-bubble tau-warning-bubble">','<div class="tau-bubble__arrow"  role="arrow"></div>','<div class="tau-bubble__inner tau-container"  role="content"></div>',"</div>"].join(""),content:["<h3>Do you really want to delete this template?</h3>",'<div class="tau-buttons">','<button class="tau-btn tau-danger i-role-actionok">Delete</button>','<button class="tau-btn i-role-actioncancel">Cancel</button>',"</div>"].join(""),onPositionConfig:function(e){e.my="center top",e.at="center-70 bottom"},onHide:function(){t.toggleClass("tau-template-item_hover",!1)},onShow:function(){t.toggleClass("tau-template-item_hover",!0);var e=a.tauBubble("widget");e.unbind("click"),e.one("click",".i-role-actioncancel",function(){a.tauBubble("hide")}),e.one("click",".i-role-actionok",function(){a.tauBubble("hide"),i.fire("item.remove",o)})},zIndex:130})})},"bus $el.ready:last + item.remove.completed":function(e,t,n){t.find(".i-role-item[data-id="+n+"]").remove(),t.find("form.i-role-filterform").submit()}})});
define('tau/ui/templates/board.templates.selector/ui.template.board.templates.selector',["tau/core/templates-factory"],function(t){var e={name:"board.templates.selector",engine:"jqote2",markup:['<div class="tau-templates-settings">','<div class="tau-board-settings-group__help">','<span class="tau-help i-role-tooltipArticle" data-article-id="board.templates">',"About Templates","</span>","</div>",'<div class="tau-templates-header">','<form class="i-role-filterform">','<span class="tau-inline-group tau-search">','<input type="text" name="name" placeholder="Search templates" class="tau-in-text">','<input type="hidden" name="tag" />','<button type="submit" class="tau-btn tau-search"></button>',"</span>",'<div class="tau-templates-tags">','<ul class="i-role-tagslist">',"<% _.forEach(this.tags, function(item) { %>",'<li class="i-role-tag <% if (item.isSelected) { %>tau-active<% } %> tau-extension-board-tooltip" data-title="Browse template categories">',"<span><%! item.name %></span>","</li>","<% }); %>","<% if (this.moreTags.length) { %>",'<li class="tau-more i-role-moretagstrigger tau-extension-board-tooltip" data-title="Browse template categories" data-label-text="more"><span>more</span></li>',"<% } %>","</ul>","</div>","<% if (this.moreTags.length) { %>",'<div class="tau-template-tags-list  i-role-moretagslist">','<ul class="tau-templates-tags">',"<% _.forEach(this.moreTags, function(item){ %>",'<li class="i-role-tag">',"<span><%! item.name %></span>","</li>","<% }); %>","</ul>","</div>","<% } %>","</form>","</div>",'<div class="tau-templates-body">',"<% _.forEach(this.items, function(item, k) { %>",'<div class="tau-template-item i-role-item" data-id="<%= item.id %>">','<div class="tau-template-item__inner tau-extension-board-tooltip" data-title="Click to apply a template">',"<% if (item.access.remove) { %>",'<button type="button" data-title="Delete template" class="tau-button-link tau-delete i-role-actionremove tau-extension-board-tooltip tau-extension-board-tooltip-inner"></button>',"<% } %>",'<div class="tau-template-preview">','<img height="50" width="83" alt="" src="<%= item.previewSrc %>">','<button type="button" class="tau-btn tau-primary i-role-tabheader" data-label="setup">Setup</button>',"</div>",'<div class="tau-template-name"><%! item.name %></div>','<div class="tau-template-desc"><%! item.description %></div>',"</div>","</div>","<% }); %>","</div>",'<div class="tau-templates-settings__message" data-text-nofound="No such template found" data-text-noitems="No available templates"></div>',"</div>"]};return t.register(e)});
define('tau/components/component.board.templates.selector',["Underscore","tau/components/component.creator","tau/models/board.templates.selector/model.board.templates.selector","tau/ui/extensions/board.templates.selector/ui.extension.board.templates.selector.main","tau/ui/extensions/board.templates.selector/ui.extension.board.templates.selector.filter","tau/ui/extensions/board.templates.selector/ui.extension.board.templates.selector.remove","tau/ui/templates/board.templates.selector/ui.template.board.templates.selector"],function(e,t,o,s,a,r,n){return{create:function(e){var l={extensions:[o,s,a,r],template:n},i=t.create(l,e);return i}}});
define('tau/models/const.view.modes',{LIST:"newlist",BOARD:"board",DETAILS:"list",TIMELINE:"timeline"});
define('tau/models/board.toolbar/model.board.toolbar',["Underscore","tau/core/model-base","tau/models/board.editor/board.filter.help","tau/models/const.view.modes"],function(e,t,i,r){return t.extend({"bus beforeInit":function(e){var t=e.data.config.context.configurator;this.fire("configurator.ready",t)},"bus afterInit + boardSettings.ready:last + configurator.ready:last":function(t,s,n){var o=n.boardSettings,a=this.config.context.configurator.getLoggedUser(),l=this.config.context.configurator.getBoardAccessService(),d=e.bind(function(e,t){var i=e.cells||{types:[]};i.name="cells",i.filter=e.user&&e.user.cardFilter?e.user.cardFilter:"";var n=e.viewMode,o=n===r.BOARD||n===r.DETAILS;i.predefinedFilters=t,this.fire("cell.types",i.types),this.fire("dataBind",{name:e.name,isShared:e.isShared,viewMode:e.viewMode,isPrintable:o,cells:i,zoom:{value:e.zoomLevel,min:s.config.min,max:s.config.max},isEditable:l.isEditable(e,a)})},this);o.get({fields:["ownerIds","user","id","name","isShared","viewMode","zoomLevel","cells"],callback:function(e){(new i).get({cells:e.cells}).done(function(t){d(e,t.cells||[])})}}),o.unbind({listener:this}),o.bind({fields:["cells"],listener:this,callback:e.bind(function(e){this.fire("cell.types",e.cells.types)},this)})},"bus configurator.ready:last + user.filter.changed":function(e,t,i){t.service("boardSettings").set({set:{user:{cardFilter:i}}})},"bus boardSettings.ready:last + destroy":function(e,t){t.boardSettings.unbind({listener:this})}})});
define('tau/ui/extensions/board.toolbar/ui.extension.board.toolbar.focus',["jQuery","tau/components/extensions/component.extension.base","tau/ui/extensions/board.plus/ui.board.plus.utils","Underscore"],function(e,t,s,n){return t.extend({"bus boardSettings.ready:last + destroy":function(e,t){t.boardSettings.unbind({listener:this})},"bus boardSettings.ready:last + afterRender":function(t){var s=n.values(t)[0].data.boardSettings,a=n.values(t)[1].data.element,i=a.find("[role=action-focus]"),l=a.find("[role=action-unfocus]"),c=function(e,t){e.removeClass("tau-btn-active-highlight"),t&&e.addClass("tau-btn-active-highlight")},r=function(){s.get({fields:["focus","selectedMarks"],callback:function(e){var t=n.defaults(e.selectedMarks||{},{x:[],y:[]}),s=!(!t.x.length&&!t.y.length);i.prop("disabled",!s),c(i,s);var a=n.defaults(e.focus||{},{x:[],y:[]}),r=!(!a.x.length&&!a.y.length);l.prop("disabled",!r),c(l,r)}})};s.unbind({listener:this}),s.bind({fields:["focus","selectedMarks"],skipSilentCallsFiltering:!0,listener:this,callback:r}),s.get({fields:["focus","selectedMarks"],callback:r});var o=function(e){s.get({fields:["focus","selectedMarks"],callback:function(t){var n=t.focus||{x:[],y:[]},a=t.selectedMarks||{x:[],y:[]};e?(a.x.length>0&&(n.x=a.x),a.y.length>0&&(n.y=a.y)):n={x:[],y:[]},s.set({set:{focus:n,selectedMarks:{x:[],y:[]}}})}})};i.on("click",function(){var t=o(!0);return e(this).blur(),t}),l.on("click",function(){var t=o(!1);return e(this).blur(),t})}})});
define('tau/models/board.toolbar/model.board.toolbar.zoom',["Underscore","tau/core/model-base"],function(i,e){var t=e.extend({"bus boardSettings.ready":function(e,t){var n=t.boardSettings;n.unbind({listener:this}),n.bind({fields:["zoomLevel"],listener:this,callback:i.bind(this.onZoomLevelUpdated,this)}),n.get({fields:["zoomLevel"],callback:i.bind(this.onDataReady,this)})},onDataReady:function(i){var e=this.normalize(i.zoomLevel,this.config);this.isValid(e,this.config)&&this.fire("zoom.provided",{value:e})},onZoomLevelUpdated:function(i){var e=this.normalize(i.zoomLevel,this.config);this.isValid(e,this.config)&&this.fire("zoom.provided",{value:e})},"bus boardSettings.ready:last + zoom.updated":function(i,e,t){var n=e.boardSettings,o=this.normalize(t.value,this.config);this.isValid(o,this.config)&&n.get({fields:["zoomLevel"],callback:function(i){i.zoomLevel!=o&&n.set({set:{zoomLevel:o}})}})},"bus boardSettings.ready + destroy":function(i,e){this.onDataReady=function(){};var t=e.boardSettings;t.unbind({listener:this})},isValid:function(i,e){return e.hasOwnProperty("min")&&i<e.min?!1:e.hasOwnProperty("max")&&i>e.max?!1:void 0!=i},normalize:function(i,e){if(e.hasOwnProperty("min")&&e.hasOwnProperty("max")){if(void 0==i)return e.defaultValue;if(i<e.min)return this.config.min;if(i>e.max)return e.max}return i}});return t});
define('tau/ui/extensions/board.toolbar/ui.extension.board.toolbar.zoom',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,n,a){return a.extend({"bus afterRender":function(n){var a=n.data.element,i=a.find("[role=zoomer]"),o={max:i.data("zoomMax"),min:i.data("zoomMin"),animate:!0,slide:e.bind(this.onSliderSlide,this),change:e.bind(this.onSliderChange,this),value:i.data("zoomValue")};i.slider(o)},onSliderSlide:function(e){n(e.target).slider("option","disabled")&&e.preventDefault()},onSliderChange:function(e,n){var a=this;a.bus.fire("zoom.updated",{value:n.value})},"bus afterRender:last+zoom.provided":function(n){var a=e.values(n)[0].data.element,i=e.values(n)[1].data,o=a.find("[role=zoomer]"),t=o.slider("value");t!=i.value&&o.slider("value",i.value)}})});
define('tau/ui/extensions/board.toolbar/ui.extension.board.toolbar.userFilter',["Underscore","jQuery","tau/ui/extensions/board.editor/ui.extension.board.editor.autocomplete","tau/ui/extensions/board.plus/ui.board.plus.utils","libs/jquery/jquery.placeholder","libs/jquery/jquery.tau.resetableInput","libs/jquery/jquery.toggleFilter"],function(e,t,i){return i.extend({SHORT_PLACEHOLDER:"filter off","bus afterRender":function(e,t){var i=t.element,l=i.find(".i-role-filter-input");this.defaultPlaceholder=l.attr("placeholder"),l.attr("placeholder",this.SHORT_PLACEHOLDER),l.tauResetableInput({showAlways:!0}).placeholder(),i.find(".i-role-filter-control").toggleFilter({additionalClass:"tau-boardsettings__filter_hide-toggle",defaultExpand:!0}),this.fire("$form.ready",i),this.fire("$el.ready",i)},"bus $el.ready":function(e,i){var l=this.$filter=i.find("[name=cells_filter]");this.$filterControl=i.find(".i-role-filter-control"),l.on("focus",function(){this.fire("preloading.execute"),this.expandFilter()}.bind(this)),l.on("_change clear",function(){var e=l.val();this.updateFilterState(e),this.fire("user.filter.changed",e)}.bind(this)),i.on("keydown","[name=cells_filter]",function(e){e.which==t.ui.keyCode.ENTER&&t(e.target).blur(),(e.which==t.ui.keyCode.ENTER||e.which==t.ui.keyCode.TAB)&&this.shrinkFilter()}.bind(this)),this.updateFilterState()},"bus cell.types + afterRender:last + view.dom.ready:last":function(e,i,l){t("[name=cells_filter]",l.element).prop("disabled",0===i.length),t(".i-role-help",l.element).prop("disabled",0===i.length)},expandFilter:function(){this.$filterControl.addClass("active"),this.$filter.attr("placeholder",this.defaultPlaceholder),t(document).off("mousedown.expandFilter").on("mousedown.expandFilter",e.bind(this.onDocumentClick,this))},shrinkFilter:function(){this.$filterControl.removeClass("active"),this.$filter.attr("placeholder",this.SHORT_PLACEHOLDER),t(document).off("mousedown.expandFilter")},onDocumentClick:function(e){t.contains(this.$filterControl[0],e.target)||t(e.target).closest(".filter-help,.tau-bubble-tooltipArticle,.tau-autocomplete__menu").length||this.shrinkFilter()},updateFilterState:function(e){e=e||this.$filter.val()||"",this.$filter.toggleClass("full tau-extension-board-tooltip",!!e).data("title",e)}})});
define('tau/ui/extensions/board.toolbar/ui.extension.board.toolbar.viewMode',["jQuery","Underscore","tau/components/extensions/component.extension.base"],function(e,t,n){return n.extend({"bus boardSettings.ready:last + configurator.ready:last + afterRender":function(t,n,o,s){var i=n.boardSettings,r=s.element;r.on("click","[role=action-toggle-viewMode]",function(){i.set({set:{viewMode:e(this).val()}})})},"bus boardSettings.ready:last + destroy":function(e,t){t.boardSettings.unbind({listener:this})}})});
define('tau/ui/extensions/board.toolbar/ui.extension.board.toolbar.name',["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/behaviour/common/ui.behaviour.editableText"],function(e,t,i){return i.extend({"bus boardSettings.ready:last + destroy":function(e,t){t.boardSettings.unbind({listener:this})},"bus boardSettings.ready:last + dataBind:last + afterRender":function(t,i,n,a){function s(e){var t=window.getSelection(),i=document.createRange();i.selectNodeContents(e),t.removeAllRanges(),t.addRange(i)}var l=i.boardSettings,d=a.element,o=d.find("[role=name]"),r=d.find("[role=name_output]");if(this.fire("$nameEl.ready",o),this.fire("$nameOutputEl.ready",r),1===o.size()){o.editableText({enabled:!1,restoreText:!0,className:" ",classNameActive:" ",maxLength:40,onSave:function(t){var i=e.trim(t.slice(0,40));this.$element.editableText("setValue",i),this.$element.prev().text(i),l.set({set:{name:i},callback:function(){}})}}),o.editableText("disable");var u=function(e){var t=e.edit&&n.isEditable;return this._toggleEditorVisibility(o,r,t),t}.bind(this);l.get({fields:["edit","isDraft"],callback:function(e){var t=u(e);t&&setTimeout(function(){o.click(),e.isDraft&&s(o[0])},1e3)}.bind(this)}),l.unbind({listener:this}),l.bind({fields:["edit"],listener:this,callback:function(e){var t=u(e);t&&o.click()}})}},"bus $nameEl.ready:last + name.provided":function(e,t,i){t.text(i.value)},"bus $nameOutputEl.ready:last + name.provided":function(e,t,i){t.text(i.value)},_toggleEditorVisibility:function(e,t,i){t.toggle(!i),e.toggle(i),e.editableText(i?"enable":"disable")}})});
define('template',["text"],function(e){var n={},t={version:"0.0.1",_parseHeader:function(e,n){var t=n.match(/^<!--\s*name:\s*([-\w\.]+)(?:,\s*fn:\s*([-\w\./]+))?\s*-->/)||[];return{name:t[1]||e.replace(/^.+\//,"").replace(/^(?:ui\.)?template\./,""),fn:t[2]}},_createDependencies:function(e){var n=["tau/core/templates-factory"];return e.fn&&n.push(e.fn),JSON.stringify(n)},load:function(r,a,o,i){var c=".html",s=r+c,f=function(e){try{var a=t._parseHeader(r,e);e=["define("+t._createDependencies(a)+", function(templates, fn) {","var config = {",'name: "'+a.name+'", ','engine: "jqote2", ',"customFunctions: fn, ","markup: "+JSON.stringify(e),"};","return templates.register(config);","});"].join(i.isBuild?"":"\n")}catch(c){o.error(c)}i.isBuild?n[r]=e:e=e+"\n//# sourceURL="+location.protocol+"//"+location.hostname+i.baseUrl+s,o.fromText(e)};e.load(s,a,f,i)},write:function(e,t,r){if(Object.prototype.hasOwnProperty.call(n,t)){var a=n[t];r.asModule(t,a)}}};return t});

define('tau/ui/templates/board.toolbar/ui.template.board.toolbar.feedback',["tau/core/templates-factory"], function(templates, fn) {var config = {name: "board.toolbar.feedback", engine: "jqote2", customFunctions: fn, markup: "<!-- name: board.toolbar.feedback -->\n<div class=\"give-feedback\">\n    <div class=\"give-feedback__header\">\n        What do you think about <span class=\"give-feedback__title\"><%= this.title %></span>?\n    </div>\n    <textarea class=\"give-feedback__textarea\"><%= this.text %></textarea>\n    <button type=\"button\" class=\"tau-btn tau-btn-big i-role-actionok give-feedback__btn\">\n        Send feedback\n    </button>\n</div>\n"};return templates.register(config);});
define('tau/ui/extensions/board.toolbar/ui.extension.board.toolbar.feedback',["jQuery","Underscore","tau/components/extensions/component.extension.base","tau/utils/utils.serverErrorTranslator","tau/ui/templates/board.toolbar/ui.template.board.toolbar.feedback"],function(e,t,n,i,a){return n.extend({TEXT_TEMPLATE:["Like","----------------------","","","Miss","----------------------","","","Improve (your ideas)","----------------------","",""],FEATURE_TITLE:{timeline:"timelines",newlist:"new lists","default":"this feature"},"bus configurator.ready:last + dataBind + afterRender":function(e,t,n,i){var r=i.element.find(".i-role-feedback-btn");if(r.length){var s=this._getFeatureTitle(n.viewMode),o=a.render({title:s,text:this.TEXT_TEMPLATE.join("\n")}).on("click",".i-role-actionok",function(){var e=o.find("textarea");r.tauBubble("hide"),t.getActionsService().sendFeedback(s,e.val()).then(function(t){return e.val(""),t}).done(this._handleSuccess.bind(this)).fail(this._handleError.bind(this))}.bind(this));r.tauBubble({content:o,zIndex:2,onShow:function(){r.addClass("tau-checked"),o.find("textarea").focus()},onHide:function(){r.removeClass("tau-checked")}})}},_handleSuccess:function(){this.fire("notification",{message:"Feedback sent.",delay:500})},_handleError:function(e){var t=JSON.parse(e.responseText)||{Message:"Server is not available"},n=i.translateServerError.call(this,t);this.fire("error",n)},_getFeatureTitle:function(e){return this.FEATURE_TITLE[e]||this.FEATURE_TITLE["default"]}})});
define('tau/ui/templates/board.toolbar/ui.template.board.toolbar',["tau/nls/translator","tau/core/templates-factory","tau/ui/templates/board.editor/ui.template.board.editor.filter"],function(t,e){var a={name:"board.toolbar",engine:"jqote2",markup:['<% var isBoard = this.viewMode === "board", isTimeline = this.viewMode === "timeline"; %>','<% var isList = this.viewMode === "list", isNewList = this.viewMode === "newlist"; %>','<div class="tau-board-header" id="<%=fn.uid(\'boardHeader\')%>">','<div role="name_output" class="i-role-name_output tau-board-name"><%! this.name %></div>','<div role="name" class="<% if (!this.isEditable) { %>disabled<% } %> i-role-name tau-board-name-editor tau-extension-board-tooltip" data-title="Rename"><%! this.name %></div>','<%= fn.sub("board.editor.filter", this.cells) %>',"<% if (isTimeline) { %>",'<div class="i-role-timeline-period-selector tau-inline-group" />',"<% } %>",'<button role="actions-button" class="tau-btn tau-actions-btn" data-collapsed-selector=".tau-checked" type="button">'+t("Actions")+"</button>",'<span class="tau-inline-group tau-board-view-switch">','<button type="button" role="action-toggle-viewMode" value="board"',' class="tau-btn tau-extension-board-tooltip tau-btn-board-view <% if (isBoard) {%>tau-checked <% } %>" data-title="View cards on a board"></button>','<button type="button" role="action-toggle-viewMode" value="list"',' class="tau-btn tau-extension-board-tooltip tau-btn-view-view <% if (isList) {%>tau-checked <% } %>" data-title="View cards one by one"></button>','<button type="button" role="action-toggle-viewMode" value="newlist"',' class="tau-btn tau-extension-board-tooltip tau-btn-list-view tau-board-customize-beta <% if (isNewList) {%>tau-checked <% } %>" data-title="View cards as a list"></button>','<button type="button" role="action-toggle-viewMode" value="timeline"',' class="tau-btn tau-extension-board-tooltip tau-btn-timeline-view <% if (isTimeline) {%>tau-checked <% } %>" data-title="View cards on a timeline"></button>',"</span>","<% if (isNewList || isTimeline) { %>",'<button type="button" class="tau-btn tau-primary tau-extension-board-tooltip tau-feedback-btn i-role-feedback-btn"',' data-collapsed-selector=":not(.tau-checked)" data-title-collapsed="Give feedback about this view mode"',' data-expanded-selector=".tau-checked" data-title-expanded=""',">Give feedback</button>","<% } %>","<% if (isBoard || isTimeline) { %>",'<span class="tau-inline-group tau-focuser">','<button type="button" role="action-focus" class="tau-extension-board-tooltip tau-btn tau-focus-in"',' data-title="'+t("Show&nbsp;only&nbsp;highlighted&nbsp;lanes")+'" disabled="">focus</button>','<button type="button" role="action-unfocus" class="tau-extension-board-tooltip tau-btn tau-close tau-focus-out"',' data-title="'+t("See&nbsp;all&nbsp;lanes")+'" disabled=""></button>',"</span>","<% } %>","<% if (!isNewList) { %>",'<span role="zoomer" class="tau-zoomer ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all"',' data-zoom-value="<%= this.zoom.value %>" ',' data-zoom-min="<%= this.zoom.min || 1 %>" ',' data-zoom-max="<%= this.zoom.max || 6 %>" ',">",'<a href="#" class="ui-slider-handle ui-state-default ui-corner-all tau-extension-board-tooltip" data-title="'+t("Zoom&nbsp;in/out&nbsp;on&nbsp;cards")+'" style="left: 100%;"></a>',"</span>","<% } %>","</div>"]};return e.register(a)});
define('tau/components/period-selector/models/model.period-selector',["tau/core/class","tau/utils/timeline/utils.timeline.date-range","tau/utils/timeline/utils.timeline.local-period-calculator"],function(e,t,a){return e.extend({init:function(e){this.boardSettings=e,this.localRangeCalculator=new a},lastDateRange:null,save:function(e){var t=e.toISOString();return this.lastDateRange==t?null:(this.lastDateRange=t,this.boardSettings.get({fields:["timelineGlobalDateRange","timelineLocalDateRange"]}).then(function(a){var i={timelineGlobalDateRange:t};if(e&&e.isValid){var n=this.localRangeCalculator.scaleLocalDateRangeProportionally(a.timelineLocalDateRange,a.timelineGlobalDateRange,e);i.timelineLocalDateRange=n.toFullISOString()}this.boardSettings.set({set:i})}.bind(this)))},load:function(){return this.boardSettings.get({fields:["timelineGlobalDateRange"]}).then(function(e){var a=e.timelineGlobalDateRange,i="string"==typeof a;if(!i)throw new Error("The old version of board definition");return t.tryParseWithRoundedDays(a)})}})});
define('tau/components/period-selector/templates/template.period-selector',["Underscore","tau/core/templates-factory"],function(e,t){var n={name:"timeline-period-selector",engine:"jqote2",markup:['<span class="tau-inline-group">','<span class="tau-inline-group">','<input type="text" class="i-role-timeline-period-choice ui-dateeditor-source tau-in-text" />','<button type="button" class="i-role-timeline-period tau-btn tau-date-range-options"></button>',"</span>","</span>"]};return t.register(n)});
define('tau/ui/behaviour/date/ui.behaviour.dateRangeEditor',["Underscore","jQuery","libs/date.js/build/date","tau/utils/utils.date","tau/utils/timeline/utils.timeline.date-range"],function(e,t,n,a,i){t.widget("ui.dateRangeEditor",{options:{onSave:t.noop,onDateRangeUpdated:t.noop,validation:{required:!1},dateFormat:"m/dd/yy",showOnInit:!1,targetStyleName:null,initialDateRange:null,onHide:t.noop,onCancel:t.noop},_create:function(){this.init()},init:function(){var e=this.element.addClass("ui-dateeditor-source");this.options.showOnInit?this.showEditor():e.click(t.proxy(this.showEditor,this))},activate:function(){this._justActivated=!0,this.showEditor(),this.$editor.focus()},_attachKeyBoardHandling:function(){this.handleKeyDown||(this.handleKeyDown=e.bind(this.mapKeys,this),this.options.keyboardManager.pushHandler(this))},_detachKeyboardHandling:function(){this.handleKeyDown&&(this.options.keyboardManager.popHandler(),delete this.handleKeyDown)},_createEditors:function(){var n=this,a=null,o=null,s=this._createEditor(function(t){a&&a.setMinDate(t),o&&(n.options.onDateRangeUpdated(o.getDateRange().setStartDate(t)),e.defer(function(){o.setSelection(o.getDateRange())}))},function(t){o&&e.defer(function(){o.setSelection(i.createWithRoundedDays(t,o.getDateRange().endDate),s)})},this.startDateSelectedDayCalculator);a=this._createEditor(function(t){s.setMaxDate(t),o&&(n.options.onDateRangeUpdated(o.getDateRange().setEndDate(t)),e.defer(function(){o.setSelection(o.getDateRange())}))},function(t){o&&e.defer(function(){o.setSelection(i.createWithRoundedDays(o.getDateRange().startDate,t),a)})},this.endDateSelectedDayCalculator),o={focus:function(){s.focus()},show:function(){e.each(this.$nodes,function(e){e.show()})},hide:function(){e.each(this.$nodes,function(e){e.hide()})},destroy:function(){s.destroy(),a.destroy()},setSelection:function(e,t){if(!t)return s.selection.set(s,e),void a.selection.set(a,e);var n=t===s?s:a;n.selection.set(n,e)},setDateRange:function(e){s.setMaxDate(null),a.setMinDate(null),s.setDate(e.startDate),a.setDate(e.endDate),s.setMaxDate(e.endDate),a.setMinDate(e.startDate),this.setSelection(e)},getDateRange:function(){return i.createWithRoundedDays(s.getDate(),a.getDate())},appendTo:function(t,n){var i=[s,a,this._createPredefinedDateRangesSelector(),this._createControls()];this.$nodes=i,e.each(i,function(e){e.appendTo(n)})},remove:function(){e.each(this.$nodes,function(e){e.remove()})},_createPredefinedDateRangesSelector:function(){var n="ui-daterangepicker-predefined-range",a=this,o=function(e,t,n,i){e[t]={text:n,go:function(){var e=i();a.setDateRange(e)}}},s={};o(s,"ui-daterangepicker-predefined-lastweek-range","last week",i.createLastWeek),o(s,"ui-daterangepicker-predefined-thirtydays-range","30 days",i.createLastThirtyDays),o(s,"ui-daterangepicker-predefined-threemonths-range","3 months",i.createLastThreeMonths),o(s,"ui-daterangepicker-predefined-year-range","1 year",i.createLastYear);var r=e.map(s,function(e,a){return t('<li> <span class = "'+a+" "+n+'">'+e.text+"</span> </li>")}),d=t('<ul class = "ui-daterangepicker-predefined-ranges"></ul>');return e.each(r,function(e){d.append(e)}),d.on("click","."+n,function(n){var a=t(n.currentTarget).attr("class").split(" "),i=e.find(a,function(t){return e.has(s,t)});null!=i&&s[i].go()}),t("<div></div>").append(t('<div class="ui-daterangepicker-predefined-ranges-title">Select:</div>')).append(d)},_createControls:function(){var e=t('<button class="tau-btn tau-primary i-role-action-submit" role="action-submit" type="button">Show</button>');return e.on("click",function(){taus.track({action:"click show button for global date range editor",tags:["timeline"]}),n._onSave()}),t('<div class="ui-daterangepicker-controls"></div>').append(e)}};var r=this.options.initialDateRange?this.options.initialDateRange:i.createDefault();return o.setDateRange(r),o.appendTo(this.options,this.element),o},showEditor:function(){this._editorIsVisible||(this.$editor||(this.$editor=this._createEditors()),this._attachKeyBoardHandling(),this._editorIsVisible=!0,this.$editor.show())},hideEditor:function(){this._detachKeyboardHandling(),this._editorIsVisible=!1,this.$editor&&this.$editor.hide()},startDateSelectedDayCalculator:{calculateSelectedDay:function(e,t){return e.getFullYear()<t.getFullYear()?{days:"*"}:e.getFullYear()===t.getFullYear()&&e.getMonth()<t.getMonth()?{days:"*"}:e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()<=t.getDate()?{days:t.getDate().toString()}:{days:null}}},endDateSelectedDayCalculator:{calculateSelectedDay:function(e,t){return e.getFullYear()>t.getFullYear()?{days:"*"}:e.getFullYear()===t.getFullYear()&&e.getMonth()>t.getMonth()?{days:"*"}:e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()>=t.getDate()?{days:t.getDate().toString()}:{days:null}}},_createEditor:function(a,i,o){var s=this.options.dateFormat,r=t('<span class="ui-dateeditor"></span>');r.datepicker({showButtonPanel:!1,dateFormat:s,onSelect:function(){a(t(this).datepicker("getDate"))},onChangeMonthYear:function(e,t,a){i(new n(a.selectedYear,a.selectedMonth,a.selectedDay))}});var d={selectionCss:"ui-daterange-region",set:function(t,n){this.remove(t);var a=this._findDayNodes(t,n),i=this;e.each(a,function(e){e.addClass(i.selectionCss)})},remove:function(n){var a=this;e.each(this._getDayNodes(n),function(e){t(e).removeClass(a.selectionCss)})},_findDayNodes:function(n,a){var i=o.calculateSelectedDay(n.getDate(),a.startDate),s=o.calculateSelectedDay(n.getDate(),a.endDate);if(i.days&&s.days){for(var r=e.toArray(this._getDayNodes(n)),d=this._findDayNode(r,i.days),c=this._findDayNode(r,s.days),l=r.indexOf(d.dayNode),u=r.indexOf(c.dayNode),h=-1===l?0:l,g=-1===u?r.length-1:u,f=[],D=h;g>=D;++D)f.push(r[D]);return e.map(f,function(e){return t(e)})}},_findDayNode:function(n,a){var i=e.find(n,function(e){return t(e).children().eq(0).html()==a});return{dayNode:i}},_getDayNodes:function(e){return e.$editor.find("td").not(".ui-datepicker-other-month").not(".ui-datepicker-unselectable")}};return{$editor:r,selection:d,setMinDate:function(e){this._setThreshold("minDate",e)},setMaxDate:function(e){this._setThreshold("maxDate",e)},setDate:function(e){this.$editor.datepicker("setDate",e),a(e)},getDate:function(){return this.$editor.datepicker("getDate")},_setThreshold:function(e,t){this.$editor.datepicker("option",e,t)},focus:function(){this.$editor.focus()},show:function(){this.$editor.show()},hide:function(){this.$editor.hide()},destroy:function(){this.$editor.datepicker("destroy")},appendTo:function(e){e.append(this.$editor)},remove:function(){this.$editor.remove()}}},_onSave:function(){this.options.onSave()},_onCancel:function(){this.options.initialDateRange&&this.$editor.setDateRange(this.options.initialDateRange),this.options.onCancel&&this.options.onCancel(this.options.initialDateRange)},isDateRangeChanged:function(){var e=this.options.initialDateRange,t=this.getDateRange();return null===e&&null===t?!1:null===e||null===t?!0:!this.options.initialDateRange.equals(this.getDateRange())},getDateRange:function(){return this.$editor.getDateRange()},destroy:function(){this.hideEditor();var e=this.$editor;e&&(e.destroy(),e.remove())},mapKeys:function(e){switch(e.which){case 13:e.preventDefault(),this._onSave();break;case 27:e.preventDefault(),this._onCancel()}}})});
define('tau/components/period-selector/views/view.period-selector',["Underscore","tau/core/class","tau/components/period-selector/templates/template.period-selector","tau/utils/timeline/utils.timeline.date-range","tau/ui/behaviour/date/ui.behaviour.dateRangeEditor","tau/utils/utils.date/utils.date.formats"],function(e,t,i,n,a,o){var d=function(e){13===e.which&&(e.stopPropagation(),$(this).trigger("blur"))},r="i-role-timeline-period-host",s="i-role-timeline-period",u="i-role-date-range-loading",l="tau-checked";return t.extend({init:function(t,n,a){this.dateRangeChanged=e.Callbacks();var o=i.get().bind({},{});t.replaceWith(o),this.$choiceTextbox=o.find(".i-role-timeline-period-choice"),this.$choiceTextbox.keypress(d),this.$choiceTextbox.change(this._onChoiceTextChanged.bind(this)),this.$periodButton=o.find("."+s),this.$periodButton.click(this._onPeriodButtonClicked.bind(this,n)),this._bindDateRange(a)},_onChoiceTextChanged:function(e){e.preventDefault(),e.stopPropagation(),this.dateRangeChanged.fire(this._getDateRange())},_onPeriodButtonClicked:function(e,t){if(this.$periodButton.hasClass(l))return void this.$periodButton.removeClass(l);this.$periodButton.addClass(l),t.preventDefault(),t.stopPropagation();var i=this._initBubble(e);i.tauBubble("show")},_bindDateRange:function(e){this.$choiceTextbox.val(e.toString())},_getDateRange:function(){var e=this.$choiceTextbox.val();return n.tryParseWithRoundedDays(e)},_createBubbleContent:function(){return $(['<div class="tau-date-range-selector">',"<div class="+r+"></div>","<div class="+u+">Loading...</div>","</div>"].join(""))},_createBubbleTemplate:function(){return['<div class="tau-bubble">','<div class="tau-bubble__arrow" role="arrow"></div>','<div class="tau-bubble__inner tau-container" role="content"></div>',"</div>"].join("")},_initBubble:function(e){var t=this.$periodButton.tauBubble({alignTo:this.$periodButton,template:this._createBubbleTemplate(),content:this._createBubbleContent(),onShow:function(i){var n=this._getDateRange();i.find("."+u).hide();var a=i.find("."+r);a.dateRangeEditor({targetStyleName:s,showOnInit:!0,dateFormat:o.date.short,keyboardManager:e,onDateRangeUpdated:this._bindDateRange.bind(this),initialDateRange:n.isValid?n:null,onSave:function(){t.tauBubble("hide")},onCancel:function(e){null!==e&&this._bindDateRange(e)}.bind(this)})}.bind(this),onHide:function(e){this.$periodButton.removeClass(l);var t=e.find("."+r);if(t.dateRangeEditor("hideEditor"),t.dateRangeEditor("isDateRangeChanged")){var i=t.dateRangeEditor("getDateRange");this.dateRangeChanged.fire(i)}}.bind(this),zIndex:999});return t}})});
define('tau/components/period-selector/controllers/controller.period-selector',["Underscore","tau/core/class","tau/components/period-selector/models/model.period-selector","tau/components/period-selector/views/view.period-selector"],function(e,n,i,t){return n.extend({init:function(){this.onInvalidDateRange=e.Callbacks()},startLifeCycle:function(e,n,t){0!==t.length&&(this.model=new i(e),this.model.load().done(this._onDateRangeLoaded.bind(this,t,n)))},_onDateRangeChanged:function(e){this.model.save(e),e.isValid||this.onInvalidDateRange.fire(e)},_onDateRangeLoaded:function(e,n,i){this.view=new t(e,n,i),this.view.dateRangeChanged.add(this._onDateRangeChanged.bind(this)),i.isValid||this.onInvalidDateRange.fire(i)}})});
define('tau/ui/extensions/timeline/ui.extension.timeline.period-selector',["jQuery","Underscore","tau/components/extensions/component.extension.base","tau/components/period-selector/controllers/controller.period-selector"],function(e,t,r,n){return r.extend({"bus boardSettings.ready:last + destroy":function(e,t){t.boardSettings.unbind({listener:this})},init:function(){this.controllerPeriodSelector=new n,this.controllerPeriodSelector.onInvalidDateRange.add(function(e){this.fire("error",{message:e.errorMessage()})}.bind(this)),this._super.apply(this,arguments)},"bus boardSettings.ready:last + configurator.ready:last + afterRender":function(e,t,r,n){this.controllerPeriodSelector.startLifeCycle(t.boardSettings,r.getKeyBoardManager(),n.element.find(".i-role-timeline-period-selector"))}})});
define('tau/ui/templates/board.toolbar/ui.template.board.actions.menu',["tau/nls/translator","tau/core/templates-factory"],function(t,a){var s={name:"actions-button-menu",engine:"jqote2",markup:['<div class="actions-menu-items i-role-bubble-holder">','<div class="tau-board-actions-item"><span class="options-button"></span>','<button role="action-toggle-editor" class="tau-btn tau-btn-settings tau-board-settings-toggle" type="button">'+t("Set up View")+"</button>",'<div class="tau-txt">'+t("Go to View settings.")+"</div>","</div>",'<div class="tau-board-actions-item"><span class="clone-board-button"></span><div class="tau-txt">Make a copy of this View.</div></div>',"<% if (this.boardTemplatesEnabled) { %>",'<div class="tau-board-actions-item"><span class="save-template-button"></span><div class="tau-txt">This View will appear in the Templates tab as a new template.</div></div>',"<% } %>",'<div class="tau-board-actions-item"><span class="tau-csv"></span><div class="tau-txt">Export all the cards from this View to a .CSV file</div></div>',"<% if (this.model.isEditable) { %>",'<div class="tau-board-actions-item"><span class="remove-board-button"></span><div class="tau-txt">Only this View as a configurable view will be removed. The data will remain safe.</div></div>',"<% } %>","<% if (this.model.isPrintable) { %>",'<div class="tau-board-actions-item"><span class="print-board-button"></span><div class="tau-txt">Print all visible cards from this View</div></div>',"<% } %>","</div>"]};return a.register(s)});
define('tau/models/print.cards/model.print.cards.board',["jQuery","Underscore","tau/core/extension.base"],function(e,a,r){return r.extend({"bus configurator.ready:last + getCardsData":function(r,n){var t=n.service("currentBoard").$element,i=t.find(".i-role-header"),d=function(r){var n=[];return a.each(i.find(".i-role-cellholder"),function(i){var d=e(i),c=d.data(r),o=".i-role-grid .i-role-cell[data-"+r+"="+c+"] .i-role-card",l=a.chain(t.find(o)).map(function(a){return e(a).data("cardData")}).value();l.length&&n.push({name:d.find(".i-role-name").text(),cards:l})}),n},c=[],o=i.length;switch(o){case 1:var l=i.data("dimension");c=d(l);break;case 2:c=d("x");break;default:var u=a.map(t.find(".i-role-card"),function(a){return e(a).data("cardData")});u.length&&(c=[{name:"",cards:u}])}this.fire("currentCards",c)}})});
define('tau/ui/extensions/board.toolbar/ui.extension.board.actions',["jQuery","Underscore","tau/components/extensions/component.extension.base","tau/ui/templates/board.toolbar/ui.template.board.actions.menu","tau/models/print.cards/model.print.cards.board","tau/models/const.view.modes"],function(e,t,n,o,a){return n.extend({"bus boardSettings.ready:last + configurator.ready:last + afterRender":function(e,s,i,r){var d=i.getFeaturesService(),c=i.getLoggedUser(),b=d.isEnabled("boardTemplates")&&c.isAdministrator,l=r.element.find("[role=actions-button]"),u={target:l,cleanupOnHide:!0,className:"tau-board-actions-bubble",stackName:"actionsBoard",showOnCreation:!0,zIndex:42,componentsConfig:{components:[{name:"actions-bubble",layout:"selectable",model:r.data,boardTemplatesEnabled:b,extensions:[n.extend({"bus childComponentCreated":function(e,t){t.fire("boardSettings.ready",s)}})],type:"container",template:o,children:t.compact([r.data.isEditable?{selector:".remove-board-button",type:"board.remove"}:!1,{selector:".clone-board-button",type:"board.clone"},r.data.isPrintable?{selector:".print-board-button",type:"print.cards",extensions:[a,n.extend({init:function(e){this._super(e),l.one("taububblehide",function(){this.fire("clearPrintBlock")}.bind(this))}})]}:!1,{selector:".tau-csv",type:"board.csv"},b?{selector:".save-template-button",type:"board.templates.editor"}:!1])}]},onShow:function(e){l.addClass("tau-checked"),e.on("click.settings",".tau-btn-settings",function(){l.tauBubble("hide"),s.boardSettings.set({set:{edit:!0}})})},onHide:function(e){e.off("click.settings",".tau-btn-settings"),l.removeClass("tau-checked")}};l.on("click",function(){this.fire("initBubble",u)}.bind(this))}})});
define('tau/components/component.board.toolbar',["tau/components/component.creator","tau/models/board.toolbar/model.board.toolbar","tau/ui/extensions/board.toolbar/ui.extension.board.toolbar.focus","tau/models/board.toolbar/model.board.toolbar.zoom","tau/models/board.editor/model.board.filter.help","tau/models/board.editor/model.board.editor.autocomplete","tau/models/board.editor/model.board.editor.autocomplete.preloading","tau/ui/extensions/board.toolbar/ui.extension.board.toolbar.zoom","tau/ui/extensions/board.toolbar/ui.extension.board.toolbar.userFilter","tau/ui/extensions/board.toolbar/ui.extension.board.toolbar.viewMode","tau/ui/extensions/board.toolbar/ui.extension.board.toolbar.name","tau/ui/extensions/board.toolbar/ui.extension.board.toolbar.remove","tau/ui/extensions/board.toolbar/ui.extension.board.toolbar.feedback","tau/ui/extensions/board.editor/ui.extension.board.editor.help","tau/components/extensions/error/extension.errorBar","tau/ui/templates/board.toolbar/ui.template.board.toolbar","tau/ui/extensions/timeline/ui.extension.timeline.period-selector","tau/components/extensions/bubble/extension.bubble.creator","tau/components/extensions/component.creator.extension","tau/ui/extensions/board.toolbar/ui.extension.board.actions"],function(o,e,t,a,r,n,i,b,s,d,u,l,x,m,c,p,f,v,h,z){return{create:function(g){var k={template:p,extensions:[e,t,b,a,r,n,i,s,d,u,l,x,m,c,f,v,h,z].concat(g.extensions||[])};return o.create(k,g)}}});
define('tau/ui/extensions/board.tools.container/ui.extension.board.tools.container.view',["Underscore","jQuery","tau/views/view.container"],function(i,e,t){return t.extend({"bus initialize":function(){},"bus initialize + boardSettings.ready":function(i,e,t){this.startLifeCycle(e,t.boardSettings)},"bus refresh":function(){this.startLifeCycle()},startLifeCycle:function(e,t){t=t||this.boardSettings,this.boardSettings=t;var n=this._super;t.get({fields:["viewMode"],callback:i.bind(function(i){this.fire("toggleOverview","board"==i.viewMode),n.call(this,e,t)},this)}),t.unbind({listener:this}),t.bind({fields:["viewMode"],listener:this,callback:i.bind(function(i){this.config&&this.fire("toggleOverview","board"==i.viewMode)},this)})}})});
define('tau/ui/extensions/board.tools.container/ui.extension.board.tools.container.tabs',["Underscore","jQuery","tau/core/extension.base","tau/core/event-dispatcher"],function(e,t,a,i){return a.extend({resetLifecycle:!0,"bus beforeInit":function(e,t){this.config=t.config;var a=t.config.context.configurator;this.fire("configurator.ready",a)},"bus show.completed":function(e,t){this.fire("$el.ready",t)},"bus $el.ready + hide":function(e,a){var i=a.find(".i-role-tabheaders .i-role-tabheader");i.each(function(){t(this).tauBubble("hide")})},"bus $el.ready:last + toggleOverview":function(e,t,a){var i=t.find(".i-role-tabheader-overviews");a?i.removeAttr("disabled"):i.attr("disabled","disabled")},"bus $el.ready + childrenBuses.ready":function(a,o,n){var r=this,d=o.find(".i-role-tabheaders .i-role-tabheader");o.on("click",".i-role-tabheader:not(.tau-disabled)",function(){r.fire("tab.activate",t(this).data("label"))});var s=new i(n);this.on("destroy",function(){s=null}),s.listen("$bubbled.ready",function(){var a={collision:"fit none",my:"right bottom",at:"right top"};d.each(function(){var i=t(this),o=i.data("label");i.bind("taububbleshow",function(){i.toggleClass("tau-checked",!0),r.fire("tab.activate.completed",o)}),i.bind("taububblehide",function(){i.toggleClass("tau-checked",!1)});var n={className:"tau-tools-popup",onPositionConfig:function(t){return e.extend(t,a)}};"overviews"==o&&(n.className+=" tau-tools-board-map"),i.tauBubble("option",n)})}),d.each(function(){var e=t(this),a=e.data("label");n[a].fire("$trigger.ready",e)})}})});
define('tau/ui/templates/board.tools.container/ui.template.board.tools.container',["tau/core/templates-factory"],function(a){var e={name:"board.tools.container",engine:"jqote2",markup:['<div class="tau-boardtools">','<div class="tau-inline-group tau-boardtools__buttonsholder i-role-tabheaders">','<button class="tau-btn tau-boardtools__switcher i-role-tabheader i-role-tabheader-about" data-label="about">About</button>',"</div>",'<div class="i-role-tab" role="about" data-label="about"></div>','<div class="i-role-tab" role="overviews" data-label="overviews"></div>',"</div>"],dependencies:[]};return a.register(e)});
define('tau/components/component.board.tools.container',["Underscore","tau/components/component.container","tau/ui/extensions/board.container/ui.extension.board.container.events","tau/ui/extensions/board.tools.container/ui.extension.board.tools.container.view","tau/ui/extensions/board.tools.container/ui.extension.board.tools.container.tabs","tau/ui/templates/board.tools.container/ui.template.board.tools.container"],function(e,n,t,o,a,i){return{create:function(r){var s={extensions:[t,a].concat(r.extensions||[]),ViewType:o,template:i};return n.create(e.extend(r,s))}}});
define('tau/models/breadcrumbs/model.breadcrumbs',["Underscore","tau/core/extension.base"],function(e,t){return t.extend({"bus beforeInit":function(t,i){var n=i.config.context.configurator.getHistory();n.removeAllListeners(this),n.on("changed",e.bind(this.fire,this,"refresh"),this),this.fire("dataBind",{items:n.getFlatStack().slice(-3)})},"bus beforeInit + destroy":function(e,t){var i=t.config.context.configurator.getHistory();i.removeAllListeners(this)}})});
define('tau/ui/templates/breadcrumbs/ui.template.breadcrumbs',["tau/core/templates-factory"],function(e){return e.register({name:"breadcrumbs",engine:"jqote2",markup:["<% if (this.items.length){ %>",'<ul class="ui-breadcrumbs">',"<% _.forEach(this.items, function(item){ %>",'<li class="ui-breadcrumbs__item"><a href="<%= item.url %>"><%! item.title %></a></li>',"<% }); %>","</ul>","<% } %>"]})});
define('tau/components/component.breadcrumbs',["tau/components/component.creator","tau/models/breadcrumbs/model.breadcrumbs","tau/ui/templates/breadcrumbs/ui.template.breadcrumbs"],function(e,t,r){return{create:function(a){var n={extensions:[t],template:r};return e.create(n,a)}}});
define('tau/ui/extensions/bubble.container/ui.extension.bubble.container',["Underscore","jQuery","tau/core/extension.base.stateful"],function(e,t,u){return u.extend({"bus afterRender":function(e,t){var u=t.element;this.fire("$el.ready",u)},"bus beforeInit + $el.ready + $trigger.ready":function(t,u,b,i){i.data("ui-tauBubble")&&i.tauBubble("destroy");var n={content:b,zIndex:"",onShow:e.bind(function(){this.fire("show")},this),onHide:e.bind(function(){this.fire("hide")},this)};this.config.autoClose===!1&&(n.stackName="bubble"+e.uniqueId(),n.dontCloseSelectors=["body"]),this.config.stackName&&(n.stackName=this.config.stackName),i.tauBubble(e.defaults(u.config.options||{},n)),this.fire("$bubbled.ready",i)},"bus view.dom.ready + $bubbled.ready":function(t,u,b){b.on("taububbledestroy",e.bind(function(){this.isDestroyed||this.fire("destroy")},this))},"bus $bubbled.ready:last + hide":function(e,t,u){t.tauBubble("hide",u||{})},"bus $bubbled.ready + componentsCreated":function(t,u,b){var i=!1,n=e.bind(function(e){var t=e.data("ui-tauBubble");this.config.visible&&!i&&(!t||t.$popup&&t.$popup.is(":visible")||e.tauBubble("show"),i=!0),e.data("ui-tauBubble")&&e.tauBubble("isVisible")&&e.tauBubble("adjust")},this,u);e.forEach(b,function(t){var b=t.component;u.on("taububbleshow",e.bind(b.fire,b,"$outerBubbled.shown")),u.on("taububblehide",e.bind(b.fire,b,"$outerBubbled.hidden")),b.on("afterRender",n),b.on("dom.modified",n),b.on("svg.ready",n),b.on("adjustPosition",n)}),n()},"bus $bubbled.ready:last + $el.ready:last + show.completed":function(e,t){t.tauBubble("adjust")},"bus $bubbled.ready:last + destroy":function(e,t){this.isDestroyed=!0,t.data("ui-tauBubble")&&t.tauBubble("destroy")}})});
define('tau/components/component.bubble.container',["Underscore","tau/components/component.container","tau/ui/extensions/board.container/ui.extension.board.container.events","tau/ui/extensions/bubble.container/ui.extension.bubble.container","tau/views/view.container"],function(e,n,t,i,o){return{create:function(r){var a={extensions:[t,i].concat(r.extensions||[]),ViewType:r.ViewType||o};return n.create(e.extend(r,a))}}});
define('tau/models/model.button',["tau/core/model.editable.base","app.path"],function(e){return e.extend({onInit:function(){this.fire("dataBind",{label:this.config.label,disabled:this.config.disabled})}})});
define('tau/ui/tags/ui.tag.implode',["Underscore"],function(n){return{register:function(r,t){t.$tau=t.$tau||{},t.$tau.text_implode=function(r){if(n.isString(r))return r;if(n.isArray(r)){var t=n.clone(r),e=t.pop();return n.filter([t.join(", "),e],function(n){return 0!=n}).join(" &amp; ")}return new String(r)}}}});
define('tau/ui/templates/button/ui.template.button',["tau/core/templates-factory","tau/ui/tags/ui.tag.implode"],function(t,e){var a={name:"button",tags:[e],markup:['<div><button class="tau-btn {{if cssClass}} ${cssClass}{{/if}}" type="button" {{if disabled}}disabled="disabled"{{/if}}>${label}</button></div>'],dependencies:[]};return t.register(a)});
define('tau/ui/extensions/button/ui.extension.button',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(t,n,e){return e.extend({init:function(){this._super.apply(this,arguments),this.onButtonClickProxy=t.bind(this.onButtonClick,this)},"bus afterRender":function(t){t.data.element.find(".ui-button").click(this.onButtonClickProxy)},"bus afterRender:last+enable":function(t){t.afterRender.data.element.find("button").prop("disabled",!1)},"bus afterRender:last+disable":function(t){t.afterRender.data.element.find("button").prop("disabled",!0)},onButtonClick:function(){this.fire("view.button.click")},destroy:function(){this._super.apply(this,arguments),delete this.onButtonClickProxy}})});
define('tau/components/component.button',["Underscore","tau/components/component.creator","tau/models/model.button","tau/ui/templates/button/ui.template.button","tau/ui/extensions/button/ui.extension.button"],function(t,e,n,o,u){return{create:function(t){var s={ModelType:n,template:o,extensions:t.extensions||[]};return s.extensions=s.extensions.concat([u]),e.create(s,t)}}});
define('tau/models/model.buttonGroup',["Underscore","jQuery","tau/core/model-base"],function(e,t,i){return i.extend({"bus afterInit":function(){this.items=this.config.items,this.useMultipleSelection="multiple"===this.config.selectionMode,this.fire("dataBind",{items:this.items})},"bus afterRender":function(i,n){var s=n.element,c=this;s.on("click",function(i){i.preventDefault();var n=t(i.target).data();e.each(c.items,function(e){e.id===n.id&&e.name==n.name?e.isSelected=!0:c.useMultipleSelection||(e.isSelected=!1)}),c.fire("buttonGroup.selectionChanged",{selectedItems:e.select(c.items,function(e){return e.isSelected===!0})}),c.fire("refresh")})}})});
define('tau/ui/templates/ui.template.buttonGroup',["tau/core/templates-factory"],function(t){var e={name:"buttonGroup",engine:"jqote2",markup:["<% for(var i=0; i<this.items.length; i++){%>",'<button data-id="<%= this.items[i].id %>" data-name="<%= this.items[i].name%>"','class="i-role-selector tau-btn tau-<%=this.items[i].name.toLowerCase()%> <%= (this.items[i].isSelected ? "tau-checked" : "")%>">',"<%= this.items[i].label %>","</button>","<%}%>"]};return t.register(e)});
define('tau/components/component.buttonGroup',["Underscore","tau/components/component.creator","tau/models/model.buttonGroup","tau/ui/templates/ui.template.buttonGroup"],function(e,t,n,o){return{create:function(r){var u={ModelType:n,template:o,extensions:e.clone(r.extensions||[])};return t.create(u,r)}}});
define('tau/models/choice/model.choice.entityState',["Underscore","./model.choice.base"],function(e,t){return t.extend({propertyType:"entityState",onInit:function(){this.getAssignable(e.bind(function(t){var i=t[0].data;this.store.get(this.propertyType,this.createGetStateForAssignableCommand(i)).done({success:e.bind(this.onDataRetrieved,this)})},this))},getRequiredFields:function(){return[{entityState:["id"]}]},createGetStateForAssignableCommand:function(e){return{id:e.entityState.id,fields:["id","name","isCommentRequired",{nextStates:["id","name","isCommentRequired","numericPriority"]}]}},processData:function(t){var i=[];t.nextStates=e.sortBy(t.nextStates,function(e){return e.numericPriority}),e.each(t.nextStates,function(e){i.push({id:e.id,name:e.name,isCommentRequired:e.isCommentRequired})}),this.fire("dataBind",{states:i,completed:!0})}})});
define('tau/utils/utils.textsearch',["Underscore","tau/core/class"],function(a,e){var t=e.extend({data:[],load:function(e){var t=this;a.forEach(e,function(a){a.normalizeData=t._normalize(a.data)}),this.data=e},_createRegex:function(e){var t=a.trim(e);t=t.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&"),t=t.replace(/[ ]+/g,"([-[\\]{}()*+?.,\\\\^$|#:;! ]+|\\s+|\\s+[ \\S]*?\\s+)");var r=new RegExp(t,"i");return r},_normalize:function(e){return a.trim(e)},search:function(e){var t=[],r=this._createRegex(e);return a.forEach(this.data,function(a){var e=a.normalizeData,n=e.match(r);if(n){var i={_id:a._id,data:a.data,entry:{from:n.index,len:n[0].length}};t.push(i)}}),t},match:function(a,e){var t=null,r=this._normalize(a).match(this._createRegex(e));return r&&(t={from:r.index,len:r[0].length}),t}});return t});
define('tau/ui/behaviour/common/ui.behaviour.listSelectable',["Underscore","jQuery"],function(e,t){t.widget("ui.listSelectable",{_create:function(){},_handler:function(){},enable:function(i){if(i=e.defaults(i||this.options,{saveScroll:!1,onSelect:t.noop}),!this._enabled){this._enabled=!0;var s=this.element.parents(".ui-drop-down:first").find(".filter-field-wrapper :text");s.length&&s.focus();var n=this;this.reset(i),this.$items.on("click",function(){i.onSelect(t(this))});var o=function(e){return e++,e>=n._max?0:e},r=function(e){return e--,0>e?n._max-1:e},a=this.options.className;this.options.keyboardManager.pushHandler({handleKeyDown:function(e){var i=n._index;switch(e.keyCode){case t.ui.keyCode.DOWN:e.preventDefault(),i=o(i);break;case t.ui.keyCode.UP:e.preventDefault(),i=r(i);break;case t.ui.keyCode.ENTER:if(e.preventDefault(),0>i)return;n.$items.eq(i).trigger("click");break;default:return}n._index=i,n.$items.removeClass(a),i>=0&&n.$items.eq(i).addClass(a),n.$list.animate({scrollTop:n._getOffset(i)},{duration:0})}})}},_getOffset:function(e){var t=this.$items.eq(e);if(!t.length)return 0;var i=t.position().top;this.$inner.length&&(i-=this.$inner.position().top);var s=t.parent("i-group");return s.length&&(i+=s.position().top),i-this.$list.height()/2},reset:function(t){t=e.defaults(t||{},{saveScroll:!1}),this.$list=this.element,this.$items=this.$list.find(this.options.items).filter(":visible"),this.$inner=this.$list.find(this.options.inner||".i-inner"),t.saveScroll||this.$list.scrollTop(0),this.step=.5*this.$items.eq(0).height(),this._index=-1,this._max=this.$items.length,t.saveScroll||this.$items.removeClass(this.options.className)},disable:function(){this._enabled&&(this._enabled=!1,this.options.keyboardManager.popHandler())},destroy:function(){this.disable()}})});
define('tau/ui/extensions/choice/ui.extension.choice.editable',["Underscore","jQuery","tau/utils/utils.textsearch","tau/components/extensions/component.extension.base","tau/ui/behaviour/common/ui.behaviour.listSelectable"],function(e,t,i,s){return s.extend({"bus dataBind+afterRender":function(i){this.searchIndex=null;var s=this.config,a=this.element=i.afterRender.data.element,l=this.dataToBind=i.dataBind.data,n=0;e.forEach(l.states,function(e){e.items?n+=e.items.length:n++}),this.$list=a.find(".drop-down-list"),this.$options=this.$list.find(".i-role-option"),this.$list.on("click",".i-role-option:not(:has(.tau-loader))",e.bind(this.onItemSelected,this)),s.hasOwnProperty("maxHeight")&&this.$list.css({"max-height":s.maxHeight,"overflow-y":"auto"});var o=t("<div class='drop-down-actions' role='actions' />"),r=!1;if(l.hasOwnProperty("defaultValue")&&!this.config.hideDefaultValue){r=!0;var d=this.config.defaultValueLabel||"default";t("<span class='action-link default'>"+d+"</span>").click(e.bind(this.defaultValue,this)).appendTo(o)}if(this.config.allowToReset=!!this.config.allowToReset,l.nullableValue&&this.config.allowToReset){r=!0;var h=this.config.clearValueLabel||"reset";t("<span class='action-link clear' role='action-reset'>"+h+"</span>").click(e.bind(this.clearValue,this)).appendTo(o)}if(r&&o.insertBefore(this.$list),0===l.states.length&&l.completed){var c=s.emptyDataMessage||"None";this.$list.append("<span class='empty-message'>"+c+"</span>")}if(s.filter&&n>3){this.filterField=t("<input type='text' class='filter-field' />").keyup(e.bind(this._filterDelegate,this)),s.filterPlaceholder&&"string"==typeof s.filterPlaceholder&&this.filterField.attr("placeholder",s.filterPlaceholder);var u=t("<div class='filter-field-wrapper'></div>").append(this.filterField);u.insertBefore("top"===this.config.filterPosition&&r?o:this.$list)}if(s.expandable&&!l.completed){var f=s.mode||"short";if("full"!==f){var p=t("<div class='drop-down-footer'></div>"),b=this.config.fullModeLabel||"more...";this.$mode=t("<div class='action-link more'>"+b+"</div>").click(e.bind(this._toggleMode,this)).appendTo(p),p.insertAfter(this.$list)}}this.bus.fire("dataRendered",{element:a})},"bus $outerBubbled.ready:last+dataRendered:last":function(){this._createSelectable(),this.bus.fire("focus")},"bus $outerBubbled.show:last":function(){this.bus.fire("focus")},_createSelectable:function(){this.$list.listSelectable({items:".drop-down-option:visible",className:"drop-down-option_hover",keyboardManager:this.config.context.configurator.getKeyBoardManager()}),this.$list.addClass("tau-dropdownlist_selectable_true")},_enableSelectable:function(){this.$list.hasClass("tau-dropdownlist_selectable_true")&&this.$list.data("ui-listSelectable")&&this.$list.listSelectable("enable")},_disableSelectable:function(){this.$list.hasClass("tau-dropdownlist_selectable_true")&&this.$list.data("ui-listSelectable")&&this.$list.listSelectable("disable")},"bus dataRendered:last+focus":function(){this._enableSelectable()},"bus dataRendered:last+refresh":function(){this._enableSelectable()},"bus dataRendered:last+blur":function(){this._disableSelectable()},_toggleMode:function(e){e.stopPropagation();var t="full"===this.config.mode?"short":"full";this.fire("refresh",{mode:t})},clearValue:function(e){e.stopPropagation(),this._updateState(null)},defaultValue:function(e){e.stopPropagation(),this._updateState(this.dataToBind.defaultValue)},onItemSelected:function(e){var i=t(e.currentTarget).data();this._updateState(i.id,i)},_updateState:function(t,i){var s=!0;if(this.config.confirmation&&window.confirm&&(s=window.confirm(this.config.confirmation)),s){var a=i?e.clone(i):{};a.id=t,this.fire("updateState",a)}},_resetList:function(){this.$options.show()},_noResults:function(e){e='"'+e+'" not found',this.$noResults?this.$noResults.text(e):this.$noResults=t("<div class='not-found' />").text(e).insertBefore(this.$list),this.$noResults.show()},_clearNoResults:function(){this.$noResults&&this.$noResults.hide()},_filterDelegate:function(s){var a=s.keyCode;if(a!=jQuery.ui.keyCode.DOWN&&a!=jQuery.ui.keyCode.UP&&a!=jQuery.ui.keyCode.ENTER&&a!=jQuery.ui.keyCode.ESCAPE){if(!this.searchIndex){var l=[];this.searchIndex=new i,this.$options.each(function(e,i){l.push({_id:e,data:t(i).text()}),t(this).data("text",t(i).text())}),this.searchIndex.load(l)}var n=this.filterField.val(),o=this.searchIndex.search(n);this.$options.hide();var r=this.$options;e.forEach(o,function(e){var t=r.eq(e._id),i=t.data("text")+"";i=i.substr(0,e.entry.from)+"<em>"+i.substr(e.entry.from,e.entry.len)+"</em>"+i.substr(e.entry.from+e.entry.len,i.length);var s=t.find(".i-role-optiontext");s.length?s.html(i):t.html(i),t.show(),t.parent().show()}),r.filter(":hidden").parent().not(r.filter(":visible").parent()).hide(),n.length?o.length?this._clearNoResults():this._noResults(n):(this._clearNoResults(),this._resetList()),this.$list.data("ui-listSelectable")&&this.$list.listSelectable("reset"),this.fire("choice.editable.filter.changed",{filter:n})}}})});
define('tau/ui/extensions/choice/ui.extension.choice.editable.entityState',["Underscore","jQuery","tau/ui/extensions/choice/ui.extension.choice.editable"],function(i,e,n){return n.extend({_updateState:function(i){var e=!0;this.config.confirmation&&window.confirm&&(e=window.confirm(this.config.confirmation)),e&&this.fire("entityState.selected",{id:i})}})});
define('tau/ui/templates/choice.entityState/ui.template.choice.entityState.commentForm',["tau/core/templates-factory"],function(t){return t.register({name:"choice.entityState.commentForm",engine:"jqote2",markup:['<div class="ui-entity-state-comment">','<div class="ui-state-comment-header">Please, provide comment</div>','<div class="ui-state-comment-field-container">','<textarea rows="5" class="ui-state-comment-field"></textarea>',"</div>",'<div class="button-group">','<button type="button" class="save button">Save</button>','<button type="button" class="cancel button">Cancel</button>',"</div>","</div>"]})});
define('tau/utils/utils.textConverter',["Underscore","tau/core/class"],function(n,r){var e=r.extend({convert:function(n,r){var e=n;if(r===!0){for(var p=$("<span></span>"),t=e.split(/\r\n|\r|\n/),a=0;a<t.length;a++)t[a]=p.text(t[a]).html();e=t.join("\r\n")}return e=e.replace(/([^\r])\n/gi,"$1<br />\n"),e=e.replace(/\r\n/gi,"<br />\r\n"),e=e.replace(/  /gi,"&nbsp;&nbsp;"),e=e.replace(/&nbsp; /gi,"&nbsp;&nbsp;")}});return e});
define('tau/ui/extensions/choice.entityState/ui.extension.choice.entityState.commentByPractice',["Underscore","jQuery","tau/core/extension.base","tau/ui/templates/choice.entityState/ui.template.choice.entityState.commentForm","tau/utils/utils.textConverter","tau/ui/behaviour/common/ui.behaviour.listSelectable"],function(e,t,i,a,n){return i.extend({init:function(e,t){this.configurator=t,this.template=a,this.textConverter=new n,this._super(e)},"bus afterRender:last + focus.before":function(e,t){t.element.find(".ui-entity-state-comment").remove()},"bus afterRender:last + dataBind:last + entityState.selected":function(t,i,a,n){var s=i.element,o=e.findWhere(a.states,{id:n.id}),l=o&&o.isCommentRequired;if(!l)return void this.fire("updateState",n);if(s.find(".ui-entity-state-comment").length>0)return void s.find("textarea").focus();var r=s.find(".drop-down-list");r.data("ui-listSelectable")&&(r.find(".i-role-option[data-id="+o.id+"]").addClass(r.listSelectable("option","className")),r.listSelectable("disable"));var d=this.configurator.getTemplateFactory().get(this.template.name).bind();d.appendTo(s);var c=d.find("textarea").focus(),u=d.find(".save");u.click(e.bind(this._save,this,o,s,r,d));var f=d.find(".cancel");f.click(e.bind(this._cancel,this,o,s,r,d));var m=function(){window.setTimeout(function(){var t=c.val()||"",i=0===e.trim(t).length;i?u.attr("disabled","disabled"):u.attr("disabled")&&u.removeAttr("disabled"),u.toggleClass("disable",i)},50)};m(),u.bind("focus",m),c.bind("change keyup click propertychange paste",m)},_save:function(e,t,i,a,n){n.stopPropagation();var s=this.textConverter.convert(a.find("textarea").val(),!0);this.fire("save",{$set:{entityState:{id:e.id},comments:[{description:s}]},$include:[{comments:["id","description"]}]})},_cancel:function(e,t,i,a,n){n.stopPropagation(),a.remove(),i.data("ui-listSelectable")&&(i.find(".i-role-option[data-id="+e.id+"]").toggleClass(i.listSelectable("option","className"),!1),i.listSelectable("enable"))}})});
define('tau/ui/extensions/bubble/ui.extension.bubble.listResizer',["Underscore","jQuery","tau/core/extension.base"],function(e,i,t){return t.extend({"bus afterRender:last + popupResize:last":function(e,i,t){this._resize(i.element,t,{})},_resize:function(t,a,n){n=e.defaults(n||{},{list:"[role=list]",additionalHeight:0});var o=a.data("ui-tauBubble").options,s=t.find(n.list),d=o.within,h=100;d||(d=o.application||i(window)),n.additionalHeight||(s.css("height",1),s.css("maxHeight",1),n.additionalHeight=t.outerHeight(!0)+150),d.length&&(h=.6*d.height()-n.additionalHeight);var l={maxHeight:h,overflowY:"auto",overflowX:"hidden",height:"auto"};s.css(l)}})});
define('tau/ui/templates/choice/ui.template.choice.option',["tau/core/templates-factory"],function(i){var t={name:"state.option",engine:"jqote2",markup:["<% if (this.items) { %>",'<div class="drop-down-group i-group">','<span class="i-group-name"><%! this.name %></span>','<%= fn.sub("state.option", this.items) %>',"</div>","<% } else { %>",'<div role="option" data-id="<%! this.id %>" class="i-role-option drop-down-option" <% if (this.description) { %> title="<%! this.description %>" <% } %> >',"<% if (this.asHtml) { %>","<%= this.name %>","<% } else { %>","<%! this.name %>","<% } %>","<% if (this.isCurrent) { %>",'<label class="drop-down-option__current">(current)</label>',"<% } %>","</div>","<% } %>"]};return i.register(t)});
define('tau/ui/templates/choice/ui.template.choice.list',["tau/core/templates-factory","tau/ui/templates/choice/ui.template.choice.option"],function(t){var i={name:"state.list",engine:"jqote2",markup:['<div class="ui-drop-down">','<div role="list" class="drop-down-list">','<div class="drop-down-list__inner i-inner">','<%= fn.sub(this.templateOption || "state.option", this.states) %>',"</div>","</div>","</div>"]};return t.register(i)});
define('tau/components/component.choice.entityState',["tau/components/component.creator","tau/models/choice/model.choice.entityState","tau/ui/extensions/choice/ui.extension.choice.editable.entityState","tau/ui/extensions/choice.entityState/ui.extension.choice.entityState.commentByPractice","tau/ui/extensions/bubble/ui.extension.bubble.listResizer","tau/ui/templates/choice/ui.template.choice.list"],function(e,t,i,n,c,o){return{create:function(a){var u={extensions:[t,i,{extType:n,args:[a.context.configurator]},c],template:o};return e.create(u,a)}}});
define('tau/models/choice/model.choice.default',["Underscore","./model.choice.base"],function(e,t){return t.extend({onInit:function(){var t=this.config,i=this.config.context.entity;this.propertyType=t.listType,this.store.get(t.listType,{fields:["id","name"]}).get(i.entityType.name,{id:i.id,fields:["id",t.listType]}).done({success:e.bind(this.onDataRetrieved,this)})},onDataRetrieved:function(t){var i=t[0].data,n=this.config.data,d={states:e.reject(i,function(e){return n&&e.id===n.id}),completed:!0};this.fire("dataBind",d)}})});
define('tau/models/choice/model.choice.static',["Underscore","./model.choice.base"],function(t,e){return e.extend({onInit:function(){var e=this,i=this.config,n=this.config.context.entity;e.store.get(n.entityType.name,{id:n.id,fields:["id",i.data.name]}).done({success:t.bind(e.onDataRetrieved,e)})},onDataRetrieved:function(e){var i=e[0].data,n=i[this.config.data.name],a=this.config.values;t.forEach(a,function(e,i){t.isObject(e)||(a[i]={id:e,name:e})});var d={states:t.reject(a,function(t){return n&&t.id==n}),completed:!0};this.fire("dataBind",d)},"bus updateState":function(t){var e={},i=null;t.data&&t.data.id&&(i=t.data.id),e[this.config.data.name]=i,this.fire("save",e)}})});
define('tau/models/choice/model.choice.priority',["Underscore","./model.choice.base"],function(e,t){return t.extend({name:"priority-list-model",propertyType:"priority",onInit:function(){var t=this,i=function(i){var n=i[0].data;t.assignable=n,t.store.get(t.propertyType,t.createGetPrioritiesCommand()).done({success:e.bind(t.onDataRetrieved,t)})};this.getAssignable(i)},getRequiredFields:function(){return[{entityType:["id"]}]},createGetPrioritiesCommand:function(){return{fields:["id","name","importance",{entityType:["id"]}]}},processData:function(t){var i=this.getCurrentEntityId(),n=this.assignable.entityType.id,r=[];e.each(t,function(e){e.id!==i&&e.entityType.id===n&&r.push({id:e.id,name:e.name,importance:e.importance||0})}),r.sort(function(e,t){return e.importance-t.importance}),this.fire("dataBind",{states:r,completed:!0})}})});
define('tau/ui/templates/choice/relationType/ui.template.choice.relationType.option',["tau/core/templates-factory"],function(t){var e={name:"state.relationType.option",engine:"jqote2",markup:['<div data-id="<%! this.id %>" role="option" class="drop-down-option i-role-option">','<span class="tau-relation-icon tau-<%! this.name.toLowerCase() %>"></span>','<span class="tau-bubble-txt i-role-relation-type"><%! this.name %></span>',"</div>"]};return t.register(e)});
define('tau/models/choice/model.choice.relationType',["Underscore","./model.choice.base","tau/ui/templates/choice/relationType/ui.template.choice.relationType.option"],function(e,t,n){return t.extend({name:"relationType-list-model",propertyType:"relationType",onInit:function(){var t=this,n=function(n){t.assignable=n[0].data,t.store.get(t.propertyType,t.createGetRelationTypesCommand()).done({success:e.bind(t.onDataRetrieved,t)})};this.getAssignable(n)},getRequiredFields:function(){return[{relationType:["id"]}]},createGetRelationTypesCommand:function(){return{fields:["id","name"]}},processData:function(t){var i=this.assignable.relationType.id;this.fire("dataBind",{states:e.select(t,function(e){return e.id!==i}),completed:!0,templateOption:n.name})}})});
define('tau/models/choice/model.choice.severity',["Underscore","./model.choice.base"],function(e,t){return t.extend({propertyType:"severity",onInit:function(){this.store.get("bug",{id:this.config.context.entity.id,fields:[{severity:["id"]}]}).get(this.propertyType,{fields:["id","name","importance"]}).done({success:e.bind(this.onDataRetrieved,this)})},processData:function(t,i){var n=this.getCurrentEntityId(),r=[];e.each(i,function(e){e.id!==n&&r.push({id:e.id,name:e.name,importance:e.importance})}),r.sort(function(e,t){return e.importance-t.importance}),this.fire("dataBind",{states:r,completed:!0})}})});
define('tau/models/choice/model.choice.role',["Underscore","./model.choice.base"],function(e,t){return t.extend({onInit:function(){var t=this,i=this.config,n=this.config.context.entity;this.propertyType=i.listType,t.store.get("role",{fields:["id","name"]}).get(n.entityType.name,{id:n.id,fields:["id",{role:["id","name"]}]}).done({success:e.bind(t.onDataRetrieved,t)})},onDataRetrieved:function(t){var i=t[0].data,n=this.config.data,d={states:e.reject(i,function(e){return n&&e.id===n.id}),completed:!0};this.fire("dataBind",d)}})});
define('tau/models/choice/model.choice.release',["Underscore","./model.choice.base","tau/store/types","tau/utils/utils.date"],function(e,t,n,i){return t.extend({name:"release-list",propertyType:"release",onInit:function(){var t=this.config.context.entity,n=this;this.store.get(t.entityType.name,{id:t.id,fields:["id",{project:["id",{releases:["id","name","isCurrent","startDate","endDate"]}]}]}).done({success:function(t){t[0].data.project=t[0].data.project||{};var i=e.defaults(t[0].data.project,{releases:[]});n.processData(i)}})},"bus beforeSave":function(e){var t=e.data.cmd;t.fields=t.fields||[],this.entityContainIteration()&&t.fields.push({iteration:["id","name"]})},entityContainIteration:function(){var e=n.findByKeyword(this.config.context.entity.entityType.name);return e.refs.hasOwnProperty("iteration")},getRequiredFields:function(){return[{entityState:["id"]}]},convertReleaseToDto:function(e){return{id:e.id,name:e.name,description:"From "+i.format.date.short(e.startDate)+" to "+i.format.date.short(e.endDate),isCurrent:e.isCurrent}},isOldRelease:function(e){var t=this.config.context.configurator.getCurrentDate();return e.endDate<t},isCurrentRelease:function(e){return e.isCurrent},isCurrentOrFeatureRelease:function(e){return!this.isOldRelease(e)},selectOldReleases:function(){return e.select(this.projectReleaseList,this.isOldRelease,this)},selectCurrentAndFeatureReleases:function(){return e.select(this.projectReleaseList,this.isCurrentOrFeatureRelease,this)},getCurrentRelease:function(){return e.detect(this.projectReleaseList,this.isCurrentRelease,this)},initProjectReleaseList:function(t){var n=this.getCurrentEntityId(),s=e.select(t.releases,function(e){return e.id!=n});e.each(s,function(e){e.startDate=i.convertToTimezone(e.startDate),e.endDate=i.convertToTimezone(e.endDate)}),this.projectReleaseList=s},processData:function(t){this.initProjectReleaseList(t);var n=this.config,i=n.mode||"short",s=this.selectCurrentAndFeatureReleases(),r=[],a=this.selectOldReleases(),o=0===a.length;"short"==i&&s.length>0?r=s:(r=r.concat(a,s),o=!0),r=e.map(r,this.convertReleaseToDto,this);var u=this.getCurrentRelease(),l={nullableValue:this.isNullableValue(),states:r,completed:o};u&&(l.defaultValue=u.id),this.fire("dataBind",l)},isNullableValue:function(){return this._super()&&"iteration"!==this.config.context.entity.entityType.name.toLowerCase()}})});
define('tau/models/choice/model.choice.iteration',["Underscore","./model.choice.base","tau/utils/utils.date"],function(e,t,i){return t.extend({name:"iteration-list",propertyType:"iteration",onInit:function(){var t=this.config.context.entity,i=this;this.store.get(t.entityType.name,{id:t.id,fields:["id",{project:["id",{iterations:["id","name","startDate","endDate","isCurrent",{release:["id","name"]}]}]}]}).done({success:function(t){t[0].data.project=t[0].data.project||{};var n=e.defaults(t[0].data.project,{iterations:[]});i.processData.call(i,n)}})},getRequiredFields:function(){return[{entityState:["id"]}]},"bus beforeSave":function(e){var t=e.data.cmd.fields=e.data.cmd.fields||[];t.push({release:["id","name"]})},convertIterationToDto:function(e){var t=i.convertToTimezone(e.startDate),n=i.convertToTimezone(e.endDate);return{id:e.id,name:e.name,description:"From "+i.format.date.short(t)+" to "+i.format.date.short(n),isCurrent:e.isCurrent}},processData:function(t){var n=this.config,a=this.getCurrentEntityId(),r=[],o=n.mode||"short",s=null,d=null,c=this.config.context.configurator.getCurrentDate(),u=function(e){e.id!==a&&r.push(e)};s="full"===o?u:function(e){var t=i.convertToTimezone(e.startDate),n=i.convertToTimezone(e.endDate);e.id!==a&&(t>=c||n>=c)&&r.push(e)},e.each(t.iterations,s),0===r.length&&(s=u,e.each(t.iterations,s));var l=[],f={};e.each(r,function(e){var t=f[e.release.id]||{id:e.release.id,name:e.release.name};t.items=t.items||[],e.isCurrent&&(d=e),t.items.push(this.convertIterationToDto(e)),f[t.id]||(l.push(t),f[t.id]=t)},this);var h=t.iterations.length,m=a&&h>0?h-1:h,p={nullableValue:this.isNullableValue(),states:l,completed:r.length-m==0};d&&(p.defaultValue=d.id),this.fire("dataBind",p)}})});
define('tau/models/choice/model.choice.teamIteration',["Underscore","./model.choice.base","tau/utils/utils.date"],function(t,e,a){return e.extend({name:"team-iteration-list",propertyType:"teamIteration",onInit:function(){var e=this.config.context.entity,a=this;this.store.get(e.entityType.name,{id:e.id,fields:["id",{team:["id",{teamIterations:["id","name","startDate","endDate","isCurrent"]}]}]}).done({success:function(e){e[0].data.team=e[0].data.team||{};var n=t.defaults(e[0].data.team,{teamIterations:[]});a.processData.call(a,n)}})},convertTeamIterationToDto:function(t){var e=a.convertToTimezone(t.startDate),n=a.convertToTimezone(t.endDate);return{id:t.id,name:t.name,description:"From "+a.format.date.short(e)+" to "+a.format.date.short(n),isCurrent:t.isCurrent}},processData:function(e){var n=this.config,i=this.getCurrentEntityId(),o=[],r=n.mode||"short",s=null,u=null,c=this.config.context.configurator.getCurrentDate(),d=function(t){t.id!==i&&o.push(t)};s="full"===r?d:function(t){var e=a.convertToTimezone(t.startDate),n=a.convertToTimezone(t.endDate);t.id!==i&&(e>=c||n>=c)&&o.push(t)},t.each(e.teamIterations,s),0===o.length&&(s=d,t.each(e.teamIterations,s));var l=[];t(o).each(function(t){!u&&t.isCurrent&&(u=t),l.push(this.convertTeamIterationToDto(t))},this);var m=e.teamIterations.length,h=i?m-1:m,f={nullableValue:this.isNullableValue(),states:l,completed:0===l.length-h};u&&(f.defaultValue=u.id),this.fire("dataBind",f)}})});
define('tau/models/choice/model.choice.userStory',["Underscore","./model.choice.base"],function(e,t){return t.extend({name:"userStory-list",propertyType:"userStory",onInit:function(){var t=this,r=function(){t.store.get("userStory",{fields:["id","name",{project:["id","name"]}]}).done({success:e.bind(t.onDataRetrieved,t)})};r()},processData:function(t){var r=this.getCurrentEntityId(),o={};e.each(t,function(e){e.project=e.project||{},e.id!=r&&(o.hasOwnProperty(e.project.id)||(o[e.project.id]=e.project,o[e.project.id].items=[]),o[e.project.id].items.push(e))});var i={states:this.sortProjects(e.values(o)),completed:!0};this.fire("dataBind",i)}})});
define('tau/models/choice/model.choice.feature',["Underscore","./model.choice.base"],function(e,t){return t.extend({name:"release-list",propertyType:"feature",onInit:function(){var t=this;t.store.get("project",{fields:["id","name",{process:["id"]},{features:["id","name"]}]},{success:e.bind(t.onProjectRetrieved,t)}).get("feature",{fields:["id","name",{project:["id"]}]},{success:e.bind(t.onFeatureRetrieved,t)}).get("process",{fields:["id",{practices:["name"]}]},{success:e.bind(t.onProcessesRetrieved,t)}).done({success:e.bind(t.onDataRetrieved,t)})},onFeatureRetrieved:function(e){this.featureList=e.data},onProjectRetrieved:function(e){this.projectList=e.data},onProcessesRetrieved:function(e){this.processList=e.data},getFeaturesForProject:function(t){var s=this.getCurrentEntityId(),i=function(e){e.id!==s&&this.push(e)},r=[];return this.projectHasRequirementsPractice(t)&&e.each(t.features,i,r),r},onDataRetrieved:function(){this.processData(this.projectList,this.processList)},projectHasRequirementsPractice:function(t){var s=t.process.id,i=e.detect(this.processList,function(e){return e.id==s}),r=e.detect(i.practices,function(e){return"Requirements"==e.name});return!e.isEmpty(r)},processData:function(t,s){var i=[];this.processList=s,e.each(this.sortProjects(t),function(t){var s=this.getFeaturesForProject(t);e.isEmpty(s)||i.push({id:t.id,name:t.name,items:s})},this);var r={states:i,completed:!0};this.fire("dataBind",r)}})});
define('tau/models/choice/model.choice.team',["Underscore","./model.choice.base"],function(e,t){return t.extend({propertyType:"team","bus beforeInit":function(t,n){var i=n.config.context.entity,a=n.config.context.configurator,r=a.getStore(),o=e.bind(this.fire,this);r.get("team",{fields:["id","name","icon"]}).done(function(e){o("items.ready",e[0].data)}),r.get(i.entityType.name,{id:i.id,fields:["id",{team:["id"]}]}).done(function(e){o("currentItem.ready",e[0].data.team||{})})},"bus beforeInit:last + items.ready + currentItem.ready":function(t,n,i,a){var r=n.config;i=e.sortBy(i,function(e){return e.name.toLowerCase()});var o={states:e.reject(i,function(e){return a&&e.id===a.id}),completed:!0,nullableValue:this.isNullableValue(),templateOption:r.templateOption};this.fire("dataBind",o)}})});
define('tau/components/component.choice',["tau/components/component.creator","tau/models/choice/model.choice.default","tau/models/choice/model.choice.static","tau/models/choice/model.choice.entityState","tau/models/choice/model.choice.priority","tau/models/choice/model.choice.relationType","tau/models/choice/model.choice.severity","tau/models/choice/model.choice.role","tau/models/choice/model.choice.release","tau/models/choice/model.choice.iteration","tau/models/choice/model.choice.teamIteration","tau/models/choice/model.choice.userStory","tau/models/choice/model.choice.feature","tau/models/choice/model.choice.project","tau/models/choice/model.choice.team","tau/ui/extensions/choice/ui.extension.choice.editable","tau/ui/extensions/bubble/ui.extension.bubble.listResizer","tau/ui/templates/choice/ui.template.choice.list"],function(e,o,t,c,i,a,l,s,m,r,u,n,d,h,p,y,b,f){var x={entityState:c,priority:i,severity:l,relationType:a,role:s,release:m,iteration:r,teamIteration:u,userStory:n,feature:d,project:h,team:p,"static":t};return{create:function(o){var t=this._getModel(o),c=[t,y,b].concat(o.extensions||[]),i={extensions:c,template:f};return e.create(i,o)},_getModel:function(e){return e.model||x[e.listType]||o}}});
define('tau/views/view.collapsible',["tau/views/view.container"],function(e){var n=e.extend({"bus beforeInit":function(e){var n=e.data.config,d=n.collapsed,i=this.bus.name||"unknown";n.children=[{id:"header",type:"collapsibleHeader",name:i+" header",collapsed:d,children:n.header||[]},{id:"inners",type:"container",name:i+" inner",visible:!d,children:n.items||[]}]},"bus childrenRendered":function(e){var n=e.data.children,d=n[0],i=n[1];d.on("expanded",function(){i.fire("show")}),d.on("collapsed",function(){i.fire("hide")})},"bus expand+childrenRendered:last":function(e){var n=e.childrenRendered.data.children;n[0].fire("expand")},"bus collapse+childrenRendered:last":function(e){var n=e.childrenRendered.data.children;n[0].fire("collapse")}});return n});
define('tau/ui/extensions/collapsible/ui.extension.collapsible',["tau/components/extensions/component.extension.base"],function(e){return e.extend({"bus afterRender":function(e){this.element=e.data.element,e.data.data.collapsed&&this._collapse()},"bus expand":function(){this._expand()},"bus collapse":function(){this._collapse()},_collapse:function(){this.element.addClass("closed")},_expand:function(){this.element.removeClass("closed")}})});
define('tau/ui/extensions/collapsible/ui.extension.collapsible.state',["tau/components/extensions/component.extension.base"],function(t){return t.extend({"bus beforeInit":function(t){var e=this.config=t.data.config;if(e.hasOwnProperty("stateName")){var n=e[e.stateName];if(_.isNull(n)||_.isUndefined(n))return;var i="true"==n.toString().toLowerCase();e.collapsed=i,this.collapsed=i}},getStateName:function(){return this.config.stateName},onStateChanged:function(t){var e=t[this.getStateName()];(_.isNull(e)||_.isUndefined(e))&&(e=this.collapsed);var n="true"==e.toString().toLowerCase(),i=n?"collapse":"expand",a=this.config;a.collapsed=n;var s=a.stateName;s&&(a[s]=n),this.fire(i)},"bus childrenRendered":function(t){var e=t.data.children,n=e[0];n.on("expanded",this.onExpanded,this),n.on("collapsed",this.onCollapsed,this)},onCollapsed:function(){this.saveState(!0)},onExpanded:function(){this.saveState(!1)},saveState:function(t){var e=this.getStateName();if(e&&this.config[e]!=t){var n=this,i=n.config.context.componentSettings;if(i){var a={};a[e]=t,i.set({set:a})}}},destroy:function(){var t=this,e=t.config.context.componentSettings;e&&e.unbind({listener:t}),this._super()},"bus initialize":function(){var t=this,e=t.config.context.componentSettings;e&&e.bind({fields:[this.getStateName()],listener:t,callback:t.onStateChanged})}})});
define('tau/components/component.collapsible',["Underscore","tau/core/component-base","tau/views/view.collapsible","tau/components/extensions/component.creator.extension","tau/ui/extensions/collapsible/ui.extension.collapsible","tau/ui/extensions/collapsible/ui.extension.collapsible.state","tau/ui/extensions/layout/ui.extension.layout","tau/ui/templates/container/ui.template.container.list"],function(t,e,a,n,o,s,i,l){return{create:function(c){var u=t.clone(c)||{};t.defaults(u,{store:u.context.configurator.getStore(),template:l,cssClass:"ui-collapsible",layout:"list",collapsed:!0});var r=new e(u);return t.isArray(u.extensions)&&t.each(u.extensions,function(t){r.attach(t)}),r.attach(n).attach(o).attach(i).attach(s).attach(a).bus}}});
define('tau/ui/extensions/collapsibleHeader/ui.extension.collapsibleHeader',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,n,a){return a.extend({"bus afterRender":function(e){var a=this;a.element=e.data.element;var l=e.data.data,d=l.collapsed;a.collapsed=d;var s=d?"collapsed":"expanded";a.element.addClass(s),a.element.bind("click",n.proxy(a._onClickHandler,a))},"bus collapse":function(){var e=this;e.collapsed||e._onClickHandler()},"bus expand":function(){var e=this;e.collapsed&&e._onClickHandler()},_onClickHandler:function(){var e=this;e.collapsed=!e.collapsed;var n=e.collapsed,a=n?"expanded":"collapsed",l=n?"collapsed":"expanded",d=e.element;d.removeClass(a),d.addClass(l),this.fire(l)}})});
define('tau/ui/templates/collapsibleHeader/ui.template.collapsibleHeader',["tau/core/templates-factory"],function(e){var a={name:"collapsibleHeader",markup:['<div class="ui-collapsible-header">','    <div class="ui-children-container"></div>',"</div>"]};return e.register(a)});
define('tau/components/component.collapsibleHeader',["Underscore","tau/core/component-base","tau/views/view.container","tau/components/extensions/component.creator.extension","tau/ui/extensions/layout/ui.extension.layout","tau/ui/extensions/collapsibleHeader/ui.extension.collapsibleHeader","tau/ui/templates/collapsibleHeader/ui.template.collapsibleHeader"],function(e,t,a,n,i,o,l){return{create:function(s){return s=s||{},e.defaults(s,{template:l,cssClass:"ui-collapsible-header",childrenContainerSelector:".ui-children-container"}),new t(s).attach(n).attach(i).attach(o).attach(a).bus}}});
define('tau/utils/utils.htmlConverter',["tau/configurator","Underscore"],function(r,e){return{fromSourceToHtml:function(n){var t=r.getApplicationPath()+"/",i=n||"",a=/(?:<img(?=\s)(?:[^>"']|"[^"]*"|'[^']*')*?\s)src\s*=\s*("~\/([^"]*)"|'~\/([^']*)')(?:[^>]*>)/gi;i=i.replace(a,function(r,e,n,i){var a=n||i,c=e[0];return r.replace(e,function(){return c+t+a+c})});for(var c,u=/<[^<]+?>/g,l=[];null!=(c=u.exec(i));)l.push({left:c.index,right:c.index+c[0].length});return i.replace(/\w[\xa0]+\w/g,function(r,n){return e.find(l,function(r){return r.left<=n&&r.right>=n})?r:r.replace(/[\xa0]/g," ")})},fromHtmlToSource:function(e){var n=r.getApplicationPath(),t=e||"",i='(?:<img(?=\\s)(?:[^>"\']|"[^"]*"|\'[^\']*\')*?\\s)src\\s*=\\s*("'+n+'/([^"]*)"|\''+n+"/([^']*)')(?:[^>]*>)",a=new RegExp(i,"gi");return t=t.replace(a,function(r,e,n,t){var i=n||t,a=e[0];return r.replace(e,function(){return a+"~/"+i+a})})},replacePlainTextUrlWithHTML:function(r,n){var t=$("<div/>");t.html(r),n=e.isUndefined(n)?!0:n;var i=[];t.find("a, img").each(function(r,e){var n=$(e),t="_link_"+r;i.push({origin:n,placeholderId:t}),n.replaceWith($('<div id="'+t+'" />'))});var a=t.html();a=a.replace(/\b(((http|ftp)[s]?):\/\/)([0-9a-z-?!(){}\[\]^|$,"*\.@;&:%_\/\\\\+~#=`]+)/gi,function(r){var e=r.split("?")[0],n=arguments[arguments.length-2],t=arguments[arguments.length-1],i=function(r,e){for(var n="",t="";r>1;){var i=e.substring(r-1,r);if(i.search(/\S/)>-1)if(""==t)t=i;else if(""==n){n=i;break}r-=1}return"="==t||"="==n&&'"'==t||"="==n&&"'"==t};return i(n,t)?r:e&&e.search(/\.(jpg|gif|png|jpeg)$/)>-1?"<img style='max-width: 600px' src='"+r+"'>":"<a href='"+r+"' target='_blank'>"+r+"</a>"}),t.html(a),$.each(i,function(r,e){t.find("#"+e.placeholderId).replaceWith(e.origin)});var c=t.html();return n&&(c=c.replace(/&amp;/g,"&")),c}}});
define('tau/models/dataprocessor/model.processor.comment',["Underscore","tau/utils/utils.htmlConverter","tau/utils/utils.date"],function(t,e,r){var n=function(t){this.configurator=t};return n.prototype={destroy:function(){this.context=null},convertDTO:function(t){var n=this,i="DELETED"===t.description,o=r.convertToTimezone(t.createDate),a={id:t.id,parentId:t.parentId,avatar:[t.owner.avatarUri,"32"].join(""),name:n.getName(t.owner),fullName:n.getFullName(t.owner),description:e.fromSourceToHtml(t.description),age:this.getAge(o),createDate:r.format.datetime.short(o),comments:[],deleted:i,isRequester:t.owner.kind&&"requester"===t.owner.kind.toString().toLowerCase()};return this.configurator&&this.configurator.getLoggedUser().id==t.owner.id&&(a.isOwnerComment=!0),a.actions={edit:!i,reply:i,"delete":i},a},getName:function(e){var r=e.firstName||"",n=e.lastName||"",i="";return(r.length>0||n.length>0)&&(i=[r," ",t.trim(n).substring(0,1),"."].join("")),i},getFullName:function(e){var r=e.firstName||"",n=e.lastName||"";return t.trim([t.trim(r)," ",t.trim(n)].join(""))},getAge:function(t){if(!t)return"Draft";var e=r.getAge(t,this.configurator.getCurrentDate());return e.isZero?"Just added":e.toString()}},n});
define('tau/models/model.comment.editable',["Underscore","tau/core/model.editable.base","tau/models/dataprocessor/model.processor.comment"],function(e,t,i){var n=t.extend({name:"Editable Comments","bus applyTo":function(e){var t=this.bindedData=e.data.data;this.authorizate(t)},authorizate:function(){var e=this.bindedData.deleted,t={editable:!e,deletable:!0};this.fire("permissionsReady",t)},_convertDTO:function(t){var n=this.config,a=n.parentCommentId,d=new i(n.context.configurator),o=d.convertDTO(e.extend({},t));return o.parentId=a,o},"bus afterInit":function(t,i){this.config=i.config;var n=i.config.context.configurator,a=n.getLoggedUser(),d=n.getStore();d.get("user",{id:a.id,fields:["id","firstName","lastName","kind","avatarUri"]}).done(e.bind(function(e){var t={id:null,description:"",owner:e[0].data},i=this._convertDTO(t);this.bindedData=i,this.fire("dataBind",i)},this))},_fireUpdate:function(e,t){e||(t.owner={id:this.config.context.configurator.getLoggedUser().id}),t.general={id:this.config.context.entity.id},this.fire("save",{id:e,typeName:"comment",$set:t,$include:["id","description","createDate","parentId",{owner:["id","firstName","lastName","kind","avatarUri"]}]})},"bus saveComment":function(e){var t=this,i=e.data,n=this.bindedData.id;t._fireUpdate(n,i)},"bus replyToComment":function(e){var t=this,i=e.data;t._fireUpdate(null,i)},"bus deleteComment":function(){var e=this.bindedData,t=e.id;e.comments&&e.comments.length>0?this._fireUpdate(t,{description:"DELETED"}):this.fire("remove",{id:t,typeName:"comment"})}});return n});
define('tau/ui/behaviour/common/ui.behaviour.richeditor',["Underscore","jQuery"],function(t,e){var i={};e.widget("ui.richeditor",{$target:null,$editor:null,$input:null,editor:null,ckConfig:{toolbar:"Basic",toolbarStartupExpanded:!0,toolbarCanCollapse:!1,autoGrow_maxHeight:8e3,startupFocus:!0},options:{executionGroupName:null,settings:{},saveAction:{checkChanges:!0,disableIfEmpty:!1,available:!0,text:"Done"},cancelAction:{available:!1,text:"Cancel"},onCreate:function(){},onSave:function(){},onCancel:function(){},onHide:function(){}},EXCLUDED_ELEMENTS:["head","base","basefont","meta","link","title","style","script","input","isindex","textarea","button","option","select","frameset","frame","iframe","object","embed","applet","bgsound","marque","blink"],hasText:function(){return this.editor?this.editor.getData().length>0:!1},getText:function(){return this.editor?this.editor.getData():null},setText:function(t){this.editor&&this.editor.setData(t)},setStatus:function(t){this.$status.text(t)},getStatus:function(){return this.$status.text()},getTools:function(){return this.$tools},toggleSaveButton:function(t){this._getSaveButton().prop("disabled",!t)},disableSaveButton:function(){this.toggleSaveButton(!1)},enableSaveButton:function(){this.toggleSaveButton(!0)},setValidationErrors:function(e){this.element.addClass("ui-validationerror"),t.isString(e)&&this.element.attr("title",e)},resetValidationErrors:function(){this.element.removeClass("ui-validationerror"),this.element.removeAttr("title")},setValue:function(t){this.setText(t)},_getSaveButton:function(){return this.$tools.find(".i-role-actionsave")},_create:function(){var i=e(this.element);i.addClass("editable"),this.$target=i,i.attr("id",t.uniqueId("richeditor_")),this.ckConfig.contentsCss=this.options.ckPath+"/new/custom/content.css";var n={};e.extend(!0,n,this.ckConfig,this.options.settings),this.options.settings=n,this.options.ckConfig=n,i.on("dblclick",t.bind(function(t){e.clearSelection(),"a"!=t.target.tagName.toLowerCase()&&this.show()},this)),i.one("mouseenter",t.bind(this.loadScripts,this))},show:function(){if(!this._visible){this._visible=!0;var n=this.$target,o=this.options,s=o.saveAction,a=o.cancelAction;this.$tools=e(['<div class="ui-richeditor__controls button-group">',s.available?'<button class="i-role-actionsave tau-btn" type="button">'+s.text+"</button>":"",a.available?'<button class="i-role-actioncancel tau-btn" type="button">'+a.text+"</button>":"",'<div class="i-role-statusmessage ui-richeditor__controls__status_message"></div>',"</div>"].join(""));var r=this.$tools;this.$status=r.find(".i-role-statusmessage"),e.when(this.loadScripts()).then(function(){var t=e.Deferred();if(n.parents("body").length)t.resolve();else var i=window.setInterval(function(){n.parents("body").length&&(t.resolve(),window.clearInterval(i))},10);return t}).then(t.bind(function(){var t,i=e.Deferred();try{t=CKEDITOR.replace(n.attr("id"),o.ckConfig),CKFinder.SetupCKEditor(t,o.ckPath+"/new/ckfinder/")}catch(s){i.reject(s)}return this.editor=t,t.on("instanceReady",function(e){e.editor.dataProcessor.writer.lineBreakChars="\r\n",o.text&&t.setData(o.text),i.resolve(t)}),i},this)).then(t.bind(function(n){this._configureHtmlOutput(n);var a=o.executionGroupName;a&&i[a]&&(i[a].options.onCancel(),i[a]=null),i[a]=this;var c=["change"];if(t.forEach(c,function(e){n.on(e,t.bind(function(){this._trigger("change")},this))},this),e(n.container.$).after(r),r.on("click.richeditor",".i-role-actionsave",t.bind(function(){o.onSave(this.getText())},this)),r.on("click.richeditor",".i-role-actioncancel",t.bind(function(){o.onCancel(this.getText())},this)),s.available&&s.disableIfEmpty){var l=r.find(".i-role-actionsave");l.prop("disabled",!this.hasText()),this.element.on("richeditorchange",t.debounce(t.bind(function(){l.prop("disabled",!this.hasText())},this),500))}o.onCreate(this),this._trigger("create")},this)).done()}},hide:function(t){if(this._visible=!1,this.editor)try{this.editor.focusManager.blur(),this.editor.destroy(!t),this.editor=null}catch(e){}this.$tools&&this.$tools.remove();var n=this.options.executionGroupName;n&&i[n]&&i[n]===this&&(i[n]=null),this.options.onHide()},destroy:function(){this._super(),this.hide()},loadScripts:function(){var t=e.Deferred(),i=this.options.ckPath,n=i+"/new/ckeditor/ckeditor.js",o=i+"/new/ckfinder/ckfinder.js";return require([n],function(){CKEDITOR.disableAutoInline=!0,require([o],t.resolve)}),t},_configureHtmlOutput:function(e){var i=this.EXCLUDED_ELEMENTS,n={elements:{$:function(e){return t.indexOf(i,e.name)>0?!1:(t.each(["class","id","role"],function(t){e.attributes[t]&&delete e.attributes[t]}),e)},a:function(e){return t.trim(e.attributes.href).match(/^javascript:/gi)&&(delete e.attributes.href,delete e.attributes["data-cke-saved-href"]),e},style:function(){return!1},script:function(){return!1}},attributeNames:[[/^on/,"no"]]},o=e.dataProcessor;o.htmlFilter.addRules(n),o.dataFilter.addRules(n)}})});
define('tau/ui/extensions/comment.add/ui.extension.comment.add',["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/behaviour/common/ui.behaviour.richeditor"],function(e,t,i){var n=i.extend({category:"edit","bus afterRender":function(e){this.element=e.data.element,this.initializeEditor()},onSave:function(e){this.fire("editorSave"),this.fire("saveComment",{description:e}),this.closeEditor()},onCancel:function(){this.closeEditor()},closeEditor:function(){this.fire("destroy")},initializeEditor:function(){var i=this.element,n=i,o=n.find(".ui-comment-text"),r="richeditor";o.data("ui-richeditor")||(o=o[r]({ckPath:this.config.context.configurator.getCkPath(),text:"",settings:{toolbar:"Basic",removePlugins:"autogrow,magicline",allowedContent:!0,height:200},executionGroupName:"comments",onSave:e.bind(this.onSave,this),onCancel:e.bind(this.onCancel,this),onCreate:e.bind(function(){var e=i.parents(".ui-popup-content:first");0==e.size()&&(e=t(window)),e.scrollTo(o.parent(),100),this.fire("$editor.ready",o),this.fire("$editorHolder.ready",n)},this),saveAction:{text:"Add comment",disableIfEmpty:!0},cancelAction:{available:!0}})),o[r]("show")}});return n});
define('tau/ui/templates/comment.add/ui.template.comment.notifications',["tau/core/templates-factory"],function(e){var t={name:"comment.notifications",engine:"jqote2",markup:['<div class="tau-notification-practices-settings">','<span class="prompt">Notify by email: </span>',"<% if (this.owner){ %>",'<label><input type="checkbox" value="Owner" />Owner</label>',"<% } %>","<% if (this.assigned){ %>",'<label><input type="checkbox" value="Assigned" />Assigned people</label>',"<% } %>","<% if (this.requesters){ %>",'<label><input type="checkbox" value="Requesters" />Requester(s)</label>',"<% } %>","<% if (this.team){ %>",'<label><input type="checkbox" value="Team" />Project Team</label>',"<% } %>","</div>"]};return e.register(t)});
define('tau/ui/extensions/comments/ui.extension.comment.practices.notification',["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/templates/comment.add/ui.template.comment.notifications"],function(e,t,n,i){var o=n.extend({category:"edit","bus editorSave":function(){if(this.globalSettings.IsEmailNotificationsEnabled){var e=this;e.config.store.on({eventName:"beforeSave",type:"comment",listener:e},function(t){var n=t.data;e.beforeSaveComment(n)})}},"bus $editorHolder.ready":function(e,t){var n={config:this.config};this.globalSettings=n.config.context.applicationContext.globalSettings||{};var o=n.config.context.configurator,a=n.config.context.entity,s=a.entityType.name.toLowerCase();if(this.globalSettings.IsEmailNotificationsEnabled){var c=o.getTemplateFactory().get(i.name).bind({},{owner:!0,assigned:!0,requesters:"request"==s,team:"request"!==s});c.prependTo(t.find(".ui-richeditor__controls")),this.placeHolder=c}},"bus destroy":function(){this.config.store.unbind(this),this._super.apply(this,arguments)},beforeSaveComment:function(e){var n=this.placeHolder.find('input[type="checkbox"]'),i={};n.each(function(e,n){var o=t(n);o.attr("checked")&&(i[o.val()]=!0)}),e.cmd["comment-practices-notification-opts"]=i}});return o});
define('tau/ui/templates/comment.add/ui.template.comment.add',["tau/core/templates-factory"],function(e){var t={name:"comment.add",engine:"jqote2",markup:['<div class="ui-comment-new">','<div class="ui-comment-heading">','<img class="ui-comment-avatar" src="<%= this.avatar %>" title="<%! this.fullName %>" />',"</div>",'<div class="ui-comment-editor-placeholder tau-clientinput">','<div class="ui-comment-text"></div>',"</div>","</div>"]};return e.register(t)});
define('tau/components/component.comment.add',["tau/components/component.creator","tau/models/model.comment.editable","tau/ui/extensions/comment.add/ui.extension.comment.add","tau/ui/extensions/comments/ui.extension.comment.practices.notification","tau/components/extensions/component.creator.extension","tau/ui/templates/comment.add/ui.template.comment.add"],function(e,t,n,o,m,a){return{create:function(i){var c={extensions:[t,n,o,m],template:a};return e.create(c,i)}}});
define('tau/ui/templates/comments/ui.template.comments.actions',["tau/core/templates-factory"],function(e){var a={name:"comments.actions",engine:"jqote2",markup:['<li class="ui-comment-menu button-group">',"<% if (this.editable){ %>",'<a class="reply button small"><span class="icon"></span>reply</a>','<a class="edit button small"><span class="icon"></span>edit</a>',"<% } %>","<% if (this.deletable){ %>",'<a class="delete button danger small"><span class="icon"></span>delete</a>',"<% } %>","</li>","<% if (this.editable){ %>",'<div class="ui-comment-reply tau-clientinput">','<div class="ui-editor-placeholder" style="display: none;"></div>',"</div>","<% } %>"]};return e.register(a)});
define('tau/ui/extensions/comment/ui.extension.comment.editable',["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/templates/comments/ui.template.comments.actions","tau/ui/behaviour/common/ui.behaviour.richeditor"],function(e,t,n,i){return n.extend({category:"edit",destroy:function(){this.destroyDynamicComponents(),this._super()},lifeCycleCleanUp:function(){this.destroyDynamicComponents(),this._super()},destroyDynamicComponents:function(){var e=this;e.componentList&&(e.componentList.destroy(),delete e.componentList)},"bus applyTo + permissionsReady":function(e){var t=e.applyTo.data,n=e.permissionsReady.data;this.applyPermissions(t.config,t.data,t.element,n)},"bus applyTo":function(e,t){this.comment=t.data},applyPermissions:function(t,n,o,s){var a=this.config=e.extend({},t,{comment:n}),c=this.element=o,r=c.children(".ui-comment-body"),d=this.config.context.configurator.getTemplateFactory().get(i.name).bind({},s);r.children(".ui-comment-heading").append(d.eq(0)),r.append(d.eq(1)),s.editable&&r.addClass("editable"),s.deletable&&r.addClass("deletable"),d.on("click",".reply",e.bind(this.onReply,this)),d.on("click",".edit",e.bind(this.onEdit,this)),d.on("click",".delete",e.bind(this.onDelete,this));var m=c.children(".ui-comments"),l={components:[{type:"commentList"}],context:a.context};this.componentList||this.createComponents(l,e.bind(function(t){var i=t[0],o={element:m,data:{comments:n.comments||[]},config:e.extend({},i.config,{commentId:this.config.comment.id})};this.componentList=i.component,i.component.fire("applyTo",o)},this))},showEditorForEdit:function(){var t=this.element.find("> .ui-comment-body > .ui-comment-text"),n=this.comment;this.showEditor({element:t,text:n.description,checkChanges:!1,saveHandler:e.bind(function(e){this.fire("saveComment",{description:e})},this)})},showEditorForReply:function(){var e=this,t=this.element.find("> .ui-comment-body > .ui-comment-reply > .ui-editor-placeholder"),n=this.comment;e.showEditor({element:t,text:"",hideTarget:!1,saveText:"Add Reply",saveHandler:function(t){e.fire("replyToComment",{description:t,parentId:n.id})}})},showEditor:function(n){var i=n.element,o="richeditor",s=i.parent(),a=i;a.data("ui-richeditor")||(a=a[o]({ckPath:this.config.context.configurator.getCkPath(),text:n.text,settings:{toolbar:"Basic",removePlugins:"autogrow,magicline",allowedContent:!0,height:200},executionGroupName:"comments",onSave:e.bind(function(e){this.fire("editorSave"),a[o]("hide"),n.saveHandler.call(this,e)},this),onCancel:function(){a[o]("hide")},onCreate:e.bind(function(){var e=i.parents(".ui-popup-content:first");0==e.size()&&(e=t(window)),e.scrollTo(a.parent(),100),this.fire("$editor.ready",a),this.fire("$editorHolder.ready",s)},this),saveAction:{text:n.saveText||"Save",disableIfEmpty:!0,checkChanges:n.checkChanges},cancelAction:{available:!0}})),a[o]("show")},onReply:function(e){e.stopPropagation(),e.preventDefault(),this.showEditorForReply()},onEdit:function(e){e.stopPropagation(),e.preventDefault(),this.showEditorForEdit()},onDelete:function(){var t=this.element.find("> .ui-comment-body");t.confirmation({message:"Delete comment?",ok:e.bind(this.onConfirmDelete,this),cancel:e.bind(this.onCancelDelete,this)}),t.confirmation("show")},onCancelDelete:function(e){e.stopPropagation(),e.preventDefault(),this.element.find("> .ui-comment-body").confirmation("hide")},onConfirmDelete:function(e){e.stopPropagation(),e.preventDefault(),this.fire("deleteComment")}})});
define('tau/ui/templates/comments/ui.template.comments.comment',["tau/core/templates-factory"],function(t){var e={name:"comments.comment",engine:"jqote2",markup:['<div class="ui-comment comment-id-<%= this.id %> i-role-comment" data-id="<%= this.id %>">','<div class="ui-comment-body',"<% if (this.isOwnerComment){ %> ui-commets-comment-owner<% } %>","<% if (this.isRequester){ %> tau-comments-requester<% } %>",'">',"<% if (this.deleted){ %>","DELETED","<% } else { %>",'<div class="ui-comment-heading">','<img class="ui-comment-avatar" src="<%= this.avatar %>" title="<%! this.fullName %>" />','<span class="ui-comment-name"><%! this.fullName %></span>','<span class="ui-comment-ago"><span title="<%= this.createDate %>">(<%! this.age %>)</span></span>',"</div>",'<div class="ui-comment-text tau-clientinput"><%= this.description %></div>',"<% } %>","</div>",'<div class="ui-comments">',"<% if (this.comments){ %>",'<%= fn.sub("comments.comment", this.comments) %>',"<% } %>","</div>","</div>"]};return t.register(e)});
define('tau/components/component.comment',["tau/components/component.creator","tau/models/model.comment.editable","tau/ui/extensions/comment/ui.extension.comment.editable","tau/ui/extensions/comments/ui.extension.comment.practices.notification","tau/components/extensions/component.creator.extension","tau/ui/templates/comments/ui.template.comments.comment"],function(e,t,n,o,m,i){return{create:function(c){var s={extensions:[t,n,o,m],template:i};return e.create(s,c)}}});
define('tau/ui/extensions/comments/ui.extension.commentList.editable',["tau/components/extensions/component.extension.base"],function(n){var e=n.extend({destroy:function(){this.destroyDynamicComponents(),this._super()},lifeCycleCleanUp:function(){this.destroyDynamicComponents(),this._super()},destroyDynamicComponents:function(){var n=this;if(n.dynamicComponents&&n.dynamicComponents.length)for(var e=null;e=n.dynamicComponents.pop();)e.destroy()},"bus applyTo":function(n){var e=this;e.dynamicComponents=[];var o=n.data,t=o.data.comments;this.element=o.element;var i=o.element.children(".ui-comment");this.config=o.config;var c=o.config.context,s={components:[],context:c};i.each(function(){s.components.push({type:"comment"})}),e.createComponents(s,function(n){for(var o=0,c=n.length;c>o;o++){var s=n[o],m={element:i.eq(o),data:t[o],config:s.config};s.component.fire("applyTo",m),e.dynamicComponents.push(s.component)}})}});return e});
define('tau/components/component.commentList',["tau/components/component.creator","tau/components/extensions/component.creator.extension","tau/ui/extensions/comments/ui.extension.commentList.editable"],function(e,n,t){return{create:function(o){var c={extensions:[n,t]};return o.name="comment.commentList",e.create(c,o)}}});
define('tau/ui/extensions/baseList/ui.extension.baseList',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(t,e,n){return n.extend({"bus beforeInit":function(t){var e=t.data.config;this.options={emptyDataMessage:e.emptyDataMessage||"No data",contentSelector:e.contentSelector||null,emptyElementCssClass:e.emptyElementCssClass||"ui-empty-data-msg"}},"bus dataBind+afterRender":function(t){this.element=t.afterRender.data.element,0===t.dataBind.data.items.length&&this._applyToggleNoData(!0)},"bus hideListContent":function(){this._applyToggleNoData(!0)},"bus showListContent":function(){this._applyToggleNoData(!1)},_applyToggleNoData:function(t){this._toggleNoData(t)},_getVisibilityMethodName:function(t){return t?"show":"hide"},_toggleNoData:function(t){var e=this._getVisibilityMethodName(!t),n=this._getVisibilityMethodName(t),a=this.element,s=this.options;a.find(s.contentSelector)[e](),this._getNoDataMessageElement(a,s)[n]()},_getNoDataMessageElement:function(t,n){var a=t.find("."+n.emptyElementCssClass);return 0===a.length&&(a=e(['<span class="',n.emptyElementCssClass,'">',n.emptyDataMessage,"</span>"].join("")).appendTo(t)),a}})});
define('tau/components/component.list.creator',["tau/components/component.creator","tau/ui/extensions/baseList/ui.extension.baseList"],function(e,t){return{create:function(n,s){return s.emptyDataMessage=n.message,s.contentSelector=n.template.options.contentSelector,n.showEmptyMessage!==!1&&(n.extensions=n.extensions||[],n.extensions.push(t)),e.create(n,s)}}});
define('tau/models/model.comments',["Underscore","tau/core/model-base","tau/models/dataprocessor/model.processor.comment"],function(e,t,n){return t.extend({name:"Comments",FIELDS:["id",{comments:["id","description","createDate","parentId",{owner:["id","firstName","lastName","kind","avatarUri"]}],list:!0}],onInit:function(){this.converter=new n(this.config.context.configurator),this._requestAssignable()},"bus createDTO":function(e){var t=this.converter.convertDTO(e.data);t.comments=[],this.fire("DTOCreated",t)},_requestAssignable:function(){var e=this.config.context.entity,t={id:e.id,fields:this.FIELDS},n={success:this.safeCallback(this._onAssignableRetrieved)};this.store.get(e.entityType.name,t,n).done()},_onAssignableRetrieved:function(t){this.assignable=t.data;var n=t.data.comments,r=e.sortBy(n,function(e){return e.id});this._convertDTO(r);var s=this._convertToTree(null);this.bus.fire("dataBind",{items:s})},_convertDTO:function(t){return this.convertedComments=e.map(t,function(e){return this.converter.convertDTO(e)},this),this},_convertToTree:function(e){for(var t=[],n=this.convertedComments,r=0,s=n.length;s>r;r++){var i=n[r];i.parentId==e&&(t.push(i),i.comments=this._convertToTree(i.id))}return t},destroy:function(){this.converter.destroy(),this.converter=null,this._super()}})});
define('tau/models/model.comments.editable',["Underscore","tau/core/model.editable.base"],function(e,t){var n=t.extend({name:"Editable Comments",_signUpEventsIfRequired:function(){var e=this;if(!e._signedUp){e._signedUp=!0;var t=function(t){t.data.cmd.guid=+new Date,e.fire("prepareUpdate",t.data)},n=function(t){e.fire("applyUpdate",t.data)},a=function(t){t.data.cmd.guid=+new Date,e.fire("prepareRemove",t.data)},i=function(t){var n=t.data.obj.parentId,a=e.getComment(n);a&&a.deleted&&1===a.comments.length?e.store.remove("comment",{id:n}).done():e.fire("applyRemove",t.data)};e.store.unbind(e),e.store.on({eventName:"beforeSave",type:"comment",listener:e},t).on({eventName:"afterSave",type:"comment",listener:e},n).on({eventName:"beforeRemove",type:"comment",listener:e},a).on({eventName:"afterRemove",type:"comment",listener:e},i)}},"bus dataBind":function(t){var n=t.data.items;this.commentsList=this.getPlainList(n);var a=e(this.commentsList).pluck("id"),i={editable:!0,editableItems:a,deletable:!0,deletableItems:a},r=this;r._signUpEventsIfRequired(),r.fire("permissionsReady",i)},getComment:function(t){var n=t?e(this.commentsList).detect(function(e){return e.id===t}):null;return n},getPlainList:function(e){for(var t=[],n=0,a=e.length;a>n;n++){var i=e[n];t.push(i);var r=arguments.callee.call(this,e[n].comments);t=t.concat(r)}return t}});return n});
define('tau/ui/extensions/comments/ui.extension.comments.editable',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,t,n){var i=n.extend({category:"edit",destroy:function(){var e=this;e.destroyDynamicComponents(),e._super()},destroyDynamicComponents:function(){var e=this;e.commentListComponent&&(e.commentListComponent.destroy(),delete e.commentListComponent)},"bus dataBind+afterRender":function(e){var t=this;t.destroyDynamicComponents();var n={comments:e.dataBind.data.items},i=this.element=e.afterRender.data.element,o=".ui-all-comments",m=i.find(o),s={components:{type:"commentList"},context:this.config.context};t.createComponents(s,function(e){t.commentListComponent=e[0].component;var i={element:m,data:n,config:s};t.commentListComponent.fire("applyTo",i)})},getGUIDSelector:function(e){return"guid-comment-"+e},getCommentIdClass:function(e){return"comment-id-"+e},"bus prepareUpdate":function(e){var n=e.data.cmd,i=null,o=n.config.$set.parentId,m=".ui-all-comments"+(o?" ."+this.getCommentIdClass(o)+" .ui-comments":""),s=this.getGUIDSelector(n.guid);if(n.config.id){var a=this.getCommentIdClass(n.config.id);i=this.element.find(".ui-all-comments ."+a)}else i=t("<div class='ui-comment "+s+"'><div class='ui-comment-body'>Adding new comment. Please wait...</div></div>").appendTo(this.element.find(m));this.fire("markElementToBeUpdated",{element:i})},"bus applyUpdate":function(e){var t=this,n=e.data.cmd,i=n.guid,o=this.getCommentIdClass(e.data.id);if(!n.config.id){var m=this.getGUIDSelector(i),s=this.element.find(".ui-all-comments").find("."+m);s.addClass(o).removeClass(m)}this.on("afterRender",function(e){e.removeListener();var n=e.data.element,i=n.find("."+o+" > .ui-comment-body");t.fire("updateElement",{element:i})}),this.fire("refresh")},"bus prepareRemove":function(e){var t=e.data.cmd,n=this.getCommentIdClass(t.config.id),i=this.element.find(".ui-all-comments ."+n);this.fire("markElementToBeDeleted",{element:i})},"bus applyRemove":function(e){var t=this,n=e.data.cmd,i=this.getCommentIdClass(n.config.id),o=this.element.find(".ui-all-comments ."+i);this.fire("deleteElement",{element:o,callback:function(){t.fire("refresh")}})}});return i});
define('tau/ui/extensions/comments/ui.extension.comments.add',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(n,t,e){return e.extend({category:"edit",destroy:function(){this.destroyDynamicComponents(),this._super()},lifeCycleCleanUp:function(){this.destroyDynamicComponents(),this._super()},destroyDynamicComponents:function(){this.commentNewEditorComponent&&(this.commentNewEditorComponent.destroy(),delete this.commentNewEditorComponent)},"bus initialize":function(n){this.config=n.data},"bus afterRender + permissionsReady + dataBind":function(n,t,e,i){this.element=t.element,this.data=i,this.initializeAddCommentLink()},initializeAddCommentLink:function(){this.$addLink=t("<span class='ui-comments-add-link i-role-actionadd'>Add Comment</span>").click(t.proxy(this.addNewComment,this)).insertAfter(this.element.find(".ui-all-comments"))},onCloseEditor:function(){this.$addLink.show()},addNewComment:function(){this.$addLink.hide();var t={components:[{name:"comment.add",type:"comment.add"}],context:this.config.context};this.createComponents(t,n.bind(function(t){var e=this.commentNewEditorComponent=t[0].component;e.on("afterRender",n.bind(function(n,t){t.element.insertAfter(this.$addLink)},this)),e.on("$editor.ready",n.bind(function(n,t){this.fire("comment.add.$editor.ready",t)},this)),e.on("destroy",n.bind(this.onCloseEditor,this)),e.initialize()},this))}})});
define('tau/ui/extensions/comments/ui.extension.comments.refresher',["tau/components/extensions/component.extension.base"],function(t){return t.extend({init:function(){this._super.apply(this,arguments),this.bus.getGlobalBus().on("bugWasMarkedAsDuplicate",this.onBugWasMarkedAsDuplicate,this)},destroy:function(){this.bus.getGlobalBus().removeListener("bugWasMarkedAsDuplicate",this.onBugWasMarkedAsDuplicate,this),this._super.apply(this,arguments)},refresh:function(){var t=this.config.context.entity;this.config.store.evictProperties(t.id,t.entityType.name,["comments"]),this.fire("refresh")},onBugWasMarkedAsDuplicate:function(t){var e=this.config.context.entity.id;(e===t.data.bugId||e===t.data.duplicateBugId)&&this.refresh()}})});
define('tau/ui/extensions/content/ui.extension.content.shortcutProcessor',["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/utils/utils.htmlConverter","tau/core/termProcessor"],function(t,e,n,r,i){return n.extend({FIELDS:["id","name",{entityType:["id","name"]}],"bus beforeInit + afterRender":function(n,r,i){var s=r.config.shortcutProcessorTarget,a=i.element.find(s);e.when(this.processShortcuts(a,r.config.context)).then(t.bind(this.fire,this,"shortcuts.completed",{}))},processShortcuts:function(n,r){var i=t.values(this._replaceEntityIds(n)),s=e.Deferred();return t.any(i)?r.configurator.getStore().find("general",{fields:this.FIELDS,$query:{id:{$in:i}}}).done({success:this.safeCallback(function(t){this._replaceShortcutsWithLink(i,t[0].data,n,r),s.resolve()})}):s.resolve(),s},_replaceEntityIds:function(t){var n=/\b(?:id):(?:\W|&nbsp;){0,5}(\d{1,9})\b/gi,i={};return t.each(function(t,s){var a=e(s),o=!1,c=a.html().replace(n,function(){o=!0;var t=arguments[1];return i[t]=t,'<span class="tau-shortcut tau-shortcut_state_loading" data-entity-id="'+t+'">id:'+t+"</span>"}),u=r.replacePlainTextUrlWithHTML(c,!1);c!=u&&(c=u,o=!0),o&&a.html(c)}),i},_replaceShortcutsWithLink:function(e,n,r,s){this.urlBuilder=s.configurator.getUrlBuilder();var a=s.getTerms?s.getTerms():[];this.processor=new i(a),t.forEach(e,function(e){var i=t.find(n,function(t){return t.id==e}),s=r.find(".tau-shortcut[data-entity-id="+e+"]");i?this._replaceShortcutWithLink(s,i):this._replaceNotFoundShortcutWithLink(s,{id:e})},this)},_replaceNotFoundShortcutWithLink:function(t,n){t.each(function(){e(this).toggleClass("tau-shortcut_state_loading",!1).toggleClass("tau-shortcut_state_failure",!0).attr("title","Entity with id "+n.id+" is not found")})},_replaceShortcutWithLink:function(t,n){var r=this.urlBuilder.getNewViewUrl(n.id,n.entityType.name,!0),i="#"+n.id+"&nbsp;"+e.jqotenc(n.name),s=this.processor.getTerm(n.entityType.name)+" #"+n.id+" "+n.name;t.each(function(){var t=e('<a class="tau-shortcut"></a>');t.replaceAll(e(this)).attr("href",r).html(i).attr("title",s).toggleClass("tau-shortcut_state_loading",!1).toggleClass("tau-shortcut_state_success",!0)})}})});
define('tau/ui/extensions/content/ui.extension.content.imagePreview',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,t,i){return i.extend({category:"edit","bus beforeInit + afterRender":function(i,n,r){var a=r.element,o=this.config.imagePreviewContentSelector,s=a.find(o).find("img");if(s.size()>0)var d=setInterval(e.bind(function(){t.contains(document.body,a[0])&&(clearInterval(d),this.fire("view.dom.ready"))},this),1e3);n.config.context.configurator.getComponentBusRegistry().getByName("imagePreview").done(e.bind(function(e){this.fire("previewBus.ready",e)},this))},"bus afterRender + view.dom.ready":function(e,i){var n=i.element,r=this.config.imagePreviewContentSelector,a=n.find(r).find("img"),o=n.width(),s=t('<div class="tau-lightbox-container" />'),d=t('<a target="_blank" class="i-role-fullview tau-lightbox-full-size">View Full Size</a>'),f=a.filter(function(){return parseInt(this.naturalWidth,10)>o});f.each(function(e){var i=t(this);i.data("id",e),i.wrap(s).after(d.clone().attr("href",i.attr("src")).data("id",e))}),this.fire("$imagesToPreview.ready",a)},"bus previewBus.ready + afterRender + $imagesToPreview.ready":function(e,i,n,r){var a=n.element;a.on("click",".i-role-fullview",function(e){e.preventDefault(),i.fire("refresh",{items:r.map(function(){var e=t(this);return{id:e.data("id"),uri:e.attr("src"),thumbnailUri:e.attr("src")}}),selectedId:t(this).data("id")})})}})});
define('tau/ui/templates/comments/ui.template.comments',["tau/core/templates-factory","tau/ui/templates/comments/ui.template.comments.comment"],function(t){var e={name:"comments",engine:"jqote2",options:{contentSelector:".ui-comments-content"},markup:['<div class="box ui-comments-control">','<div class="ui-all-comments ui-comments-content">','<%= fn.sub("comments.comment", this.items) %>',"</div>","</div>"]};return t.register(e)});
define('tau/components/component.comments',["Underscore","tau/components/component.list.creator","tau/components/extensions/component.creator.extension","tau/models/model.comments","tau/models/model.comments.editable","tau/ui/extensions/comments/ui.extension.comments.editable","tau/ui/extensions/comments/ui.extension.comments.add","tau/ui/extensions/comments/ui.extension.comments.refresher","tau/ui/extensions/content/ui.extension.content.shortcutProcessor","tau/ui/extensions/content/ui.extension.content.imagePreview","tau/ui/templates/comments/ui.template.comments"],function(e,t,n,o,s,i,m,c,u,a,r){return{create:function(x){var l={extensions:e.concat([o,s,i,m,n,c,u,a,x.extensions||[]]),template:r,showEmptyMessage:!1};return x.shortcutProcessorTarget=".ui-comment-text",x.imagePreviewContentSelector=".ui-comment-text",t.create(l,x)}}});
define('tau/models/current-user/model.current-user',["tau/core/extension.base"],function(e){return e.extend({"bus beforeInit":function(e,t){this.fire("configurator.ready",t.config.context.configurator)},"bus afterInit":function(e,t){var r=t.config.context.configurator,a=r.getLoggedUser(),i=r.getStore(),n=this;r.getFeaturesService().isEnabled("context.v2")?n.fire("dataBind",{userAvatarURI:a.avatarUri+"24",userId:a.id,logoutUrl:r.getUrlBuilder().getLogoutUrl(),userName:a.name}):i.get("user",{id:a.id,fields:["avatarUri","firstName","lastName"]}).done({success:function(e){var t=e[0].data;n.fire("dataBind",{userAvatarURI:t.avatarUri+"24",userId:t.id,logoutUrl:r.getUrlBuilder().getLogoutUrl(),userName:[t.firstName,t.lastName].join(" ")})}}),i.unbind(this),i.on({eventName:"afterSave",type:"user",listener:n},function(e){e.data.id==a.id&&n.fire("refresh")})}})});
define('tau/ui/extensions/board.main.menu/ui.extention.board.main.menu.submenu',[],function(){return{createSubMenu:function(e,n){var u=e.element,t=u.find(".tau-user-submenu");n.fire("subMenu.ready",t),t.detach(),u.tauBubble({content:t,target:u,alignTo:u,zIndex:999})}}});
define('tau/ui/extensions/board.main.menu/ui.extension.board.main.menu',["jQuery","tau/core/extension.base","tau/ui/extensions/board.main.menu/ui.extention.board.main.menu.submenu"],function(e,n,u){return n.extend({"bus afterRender":function(e,n){u.createSubMenu(n,this.bus)}})});
define('tau/ui/extensions/current-user/ui.extension.current-user.viewer',["Underscore","jQuery","tau/core/extension.base"],function(e,n,t){return t.extend({"bus beforeInit":function(e,n){var t=this,i=n.config.context.configurator;i.getComponentBusRegistry().getByName("entityViewer").done(function(e){t.fire("viewerBus.ready",e)})},"bus subMenu.ready":function(n,t){t.find(".tau-user-menu-profile").on("click",e.bind(function(){this.fire("show.user.profile")},this))},"bus viewerBus.ready:last + dataBind:last + show.user.profile":function(e,n,t){n.fire("cardDataToShow.ready",{entityType:"user",entityId:t.userId})}})});
define('tau/components/component.current-user',["tau/components/component.creator","tau/models/current-user/model.current-user","tau/ui/extensions/board.main.menu/ui.extension.board.main.menu","tau/ui/extensions/current-user/ui.extension.current-user.viewer"],function(e,u,t,a){return{create:function(n){var r={name:"current-user",engine:"jqote2",markup:['<div class="tau-menu-item tau-menu-item-avatar tau-user-menu">','    <img data-title="<%!this.userName%>" class="tau-user-avatar tau-extension-board-tooltip" src="<%=this.userAvatarURI%>" />','    <ul class="tau-user-submenu">','        <li class="tau-menu-item tau-user-name"><%!this.userName%></li>','        <li class="tau-menu-item tau-user-menu-profile"><span>My Profile</span></li>','        <li class="tau-menu-item tau-user-menu-logout"><a href="<%=this.logoutUrl%>">Logout</a></li>',"    </ul>","</div>"]},s={extensions:[u,t,a],template:r};return e.create(s,n)}}});
define('tau/models/customField/model.customField',["Underscore","tau/core/model-base","tau/utils/utils.htmlConverter","tau/utils/utils.date"],function(e,t,u,n){var i=t.extend({_customFieldProcessors:{RichText:function(e){return e.value=u.fromSourceToHtml(e.value),e},Date:function(e){return e.value=n.format.date.short(n.convertToTimezone(e.value)),e.output=e.value,e},DropDown:function(t){return t.options=this._getOptions(t),t.value=e.asString(t.value),t.output=e.asString(t.value),t},Entity:function(t,u){return t.value=t.value||{},t.options=this._getOptions(t),t.value=e.defaults(t.value,{id:null,name:"",kind:null}),t.value.__type=t.value.kind,t.value.url=t.value.__type?u.configurator.getUrlBuilder().getNewViewUrl(t.value.id,t.value.__type,!0):null,t.output=t.value.name+"",t},MultipleSelectionList:function(t){return t.options=this._getOptions(t),t.value?(t.value=e.asString(t.value).split(","),t.output=t.value.join(", ")):(t.value=null,t.output=""),t},Number:function(t,u){return t.value=(t.value||e.isNumber(t.value)?parseFloat(t.value)+"":"").replace(".",u.applicationContext.culture.decimalSeparator),t.output=t.value,t},URL:function(t){return t.value=t.value||{},e.defaults(t.value,{url:"",title:""}),t.options=null,t},TemplatedURL:function(t){t.value=t.value||"",t.isEmpty=""===t.value;var u=e.compact(t.value.split(/\s*,\s*/g)),n=t.options||"";return u=e.map(u,function(e){return{title:e,url:n.replace("{0}",e)}}),t.output=u,t},_getOptions:function(t){return t.options?e.asString(t.options).split("\r\n"):[]}},_process:function(e,t){return e.type in this._customFieldProcessors&&(e=this._customFieldProcessors[e.type](e,t.context)),e},createConfiguration:function(t,u,n,i,o){var a=(t.type||"").toLowerCase(),r=e.find(n,function(e){return e.type.toLowerCase()==a&&e.name==t.name}),l=e.find(i,function(e){return e.type.toLowerCase()==a&&e.name==t.name}),s={};if(r&&l)s={name:l.name,type:l.type,required:r.required,listed:r.listed,value:l.value,options:r.value,actionReset:{enable:l.value&&!r.required},output:l.value};else{if(!r||l)throw new Error('No valid configuration for field "'+t.name+'"');s={name:r.name,type:r.type,required:r.required,listed:r.listed,value:null,options:r.value,output:null}}return s=this._process(s,o)},"bus configurationProvided":function(t){var u=t.data;e.isEmpty(u)||this.fire("dataBind",u),this.configuration=u},"bus beforeInit":function(e){var t=e.data.config;this.store=t.store||this.store;var u=t.context.entity,n=t.context.getCustomFields(),i=t.customField||t.data,o=this,a={name:i.name,type:i.type};this.store.get(u.entityType.name,{id:u.id,fields:["id","customFields"]}).done({success:function(e){var i=e[0].data.customFields,r=o.createConfiguration(a,u,n,i,t);o.fire("configurationProvided",r)}})}});return i});
define('tau/models/customField/model.customField.editable',["Underscore","tau/core/model.editable.base"],function(e,t){var i=t.extend({category:"edit",name:"Editable custom field","bus dataBind":function(){this.fire("permissionsReady",{editable:!0,deletable:!0})},"bus beforeSave":function(e,t){var i=t.cmd.$set.customFields[0].value;t.cmd.$set.customFields[0].value=i?i:null,"URL"==t.cmd.$set.customFields[0].type&&null==i.label&&null==i.url&&(t.cmd.$set.customFields[0].value=null)},"bus beforeInit + configurationProvided":function(t,i,a){var n=i.config.context.entity,s=i.config.context.configurator.getStore();this.configuration=a,s.unbind(this),this.beforeSaveHandler=e.bind(this._beforeSave,this),s.on({eventName:"beforeSave",type:n.entityType.name,listener:this,hasChanges:["customFields"],filter:{id:n.id}},this.beforeSaveHandler),this.afterSaveHandler=e.bind(this._afterSave,this),s.on({eventName:"afterSave",type:n.entityType.name,listener:this,hasChanges:["customFields"],filter:{id:n.id}},this.afterSaveHandler)},"bus beforeInit:last + destroy":function(e,t){var i=t.config.context.configurator.getStore();i.unbind(this)},_beforeSave:function(t){var i=t.data.changes.customFields[0];e.mergeFields(t.data.cmd.config.fields,["customFields"]);var a=this.configuration;i.name==a.name&&i.type==a.type&&this.fire("preRefreshRow",{data:i})},_afterSave:function(e){for(var t=this.configuration,i=0;i<e.data.changes.customFields.length;i++){var a=e.data.changes.customFields[i];a.name==t.name&&a.type==t.type&&this.fire("refreshRow",{data:a})}}});return i});
define('tau/core/tau-widget',["Underscore","jQuery","tau/core/event"],function(e,t,n){var i=function(i,s){var u=s._create||function(){};s._create=function(){u.apply(this,arguments),this.bus=this.options.bus||this.element.data("bus"),n.subscribeOn(this)},e.extend(s,{_fire:function(){this.bus.fire.apply(this.bus,arguments)}}),t.widget(i,s)};return{widget:i}});
define('tau/ui/behaviour/checkbox/ui.behaviour.checkboxToggle',["jQuery","tau/core/tau-widget"],function(e,t){t.widget("ui.checkboxToggle",{options:{onSave:function(){},classNames:{checked:"checked",unchecked:"unchecked"}},_create:function(){this.init()},init:function(){var t=this.element;this.toggleProxy=e.proxy(this.onClick,this),t.click(this.toggleProxy)},activate:function(){var e=this.options.classNames;this._toggle(this.element,e.checked,e.unchecked),this.options.onSave(this.element.hasClass(e.checked))},onClick:function(e){e.stopPropagation(),this.toggle()},toggle:function(){var e=this.element,t=this.options.classNames;this._toggle(e,t.checked,t.unchecked),this.options.onSave(e.hasClass(t.checked))},_toggle:function(e,t,s){var o=e;o.hasClass(t)?(o.removeClass(t),o.addClass(s)):o.hasClass(s)?(o.removeClass(s),o.addClass(t)):o.addClass(t)},destroy:function(){delete this.toggleProxy}})});
define('tau/ui/behaviour/customField/ui.behaviour.customField.row',["Underscore","jQuery"],function(t,e){e.widget("ui.behaviourCustomFieldRow",{options:{onActivate:e.noop},_create:function(){var t=this.element;this.$element=t;var e=this;t.click(function(t){t.preventDefault(),e.options.onActivate.call(this,t)})},setValidationErrors:function(e){var i=this.$element;t.each(e,function(t,e){i.find("[name="+e+"]").addClass("ui-editableText-validationerror").attr("title",t)})},resetValidationErrors:function(){this.$element.find(":text").removeClass("ui-editableText-validationerror").attr("title",null)},setValue:function(e){var i=this.$element;t.each(e,function(t,e){i.find("[name="+e+"]").val(t)})},destroy:function(){}})});
define('tau/components/extensions/customField/extension.customField.checkbox.editable',["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/behaviour/checkbox/ui.behaviour.checkboxToggle","tau/ui/behaviour/customField/ui.behaviour.customField.row"],function(e,a,t){return t.extend({category:"edit","bus permissionsReady+afterRender":function(e){var t=this,i=e.afterRender.data.data,o=e.permissionsReady.data;if(o.editable){var u=e.afterRender.data.element,s=u.find(".ui-customfield__value");s.checkboxToggle({classNames:{checked:"ui-customfield__value_checked",unchecked:"ui-customfield__value_unchecked"},onSave:function(e){s.removeClass("ui-validationerror"),t.bus.fire("elementUpdated"),t.bus.fire("save",{customFields:[{name:i.name,type:i.type,value:e}]})}}),u.behaviourCustomFieldRow({onActivate:function(e){e.stopPropagation(),0==a(e.target).hasClass("ui-customfield__value")&&s.checkboxToggle("activate")}}),u.addClass("ui-customfield_editable_true")}}})});
define('tau/ui/extensions/customField/ui.extension.customField.required',["Underscore","tau/components/extensions/component.extension.base"],function(e,t){var a=t.extend({category:"view",name:"Required custom field","bus afterRender+beforeInit+dataBind":function(t){var a=t.dataBind.data;if(t.beforeInit.data.config.customField&&t.beforeInit.data.config.customField.required){var n=a.value;n&&(n.hasOwnProperty("url")?n=n.url:n.hasOwnProperty("id")&&(n=n.id)),e.isBoolean(n)||e.isNumber(n)||!e.isEmpty(n)||(t.afterRender.data.element.find(".ui-customfield__value").addClass("ui-validationerror"),t.afterRender.data.element.attr("title","Required field"))}}});return a});
define('tau/ui/templates/customField/ui.template.customField.checkbox',["tau/core/templates-factory"],function(e){var t={name:"customField-checkbox",markup:['<div class="ui-customfield ui-customfield-checkbox">',"   <table>","   <tbody>","   <tr>",'       <td class="ui-customfield__label">${name}</td>','       <td class="ui_custom_field_value_container"><div class="ui-customfield__value ui-customfield__value_{{if value}}checked{{else}}unchecked{{/if}}">&nbsp;</div></td>',"   </tr>","   </tbody>","   </table>","</div>"]};return e.register(t)});
define('tau/ui/extensions/customField/ui.extension.customField.editable',["Underscore","tau/components/extensions/component.extension.base","tau/ui/behaviour/overlay/ui.behaviour.overlay"],function(e,t){var n=t.extend({"bus afterRender":function(e){this.element=e.data.element},_markElementAsUpdate:function(){this.element.tauOverlay(),this.fire("markElementToBeUpdated",{element:this.element})},"bus preRefreshRow":function(){this._markElementAsUpdate()},_refreshElement:function(){this.element.parents(".tmpl-container-list:first").tauOverlay("hide");var e=this;this.on("afterRender",function(t){t.removeListener(),e.fire("updateElement",{element:e.element})}),this.fire("refresh")},"bus refreshRow":function(){this._refreshElement()}});return n});
define('tau/ui/extensions/customField/ui.extension.customField.editable.checkbox',["Underscore","tau/ui/extensions/customField/ui.extension.customField.editable"],function(e,n){var i=n.extend({"bus preRefreshRow":function(){}});return i});
define('tau/components/component.customField.checkbox',["tau/components/component.creator","tau/models/customField/model.customField","tau/models/customField/model.customField.editable","tau/components/extensions/customField/extension.customField.checkbox.editable","tau/ui/extensions/customField/ui.extension.customField.required","tau/ui/templates/customField/ui.template.customField.checkbox","tau/ui/extensions/customField/ui.extension.customField.editable.checkbox"],function(e,t,o,i,u,s,n){return{create:function(c){var l={ModelType:t,template:s,extensions:[o,u,i,n]};return e.create(l,c)}}});
define('libs/schema.js/lib/objecttools',["require","exports","module"],function(e,n,r){"undefined"==typeof global&&"object"==typeof window&&(window.global=window),Object.keys||(Object.keys=function(e){if(e!==Object(e))throw new TypeError("Invalid object");var n=[];for(var r in e)e.hasOwnProperty.call(e,r)&&(n[n.length]=r);return n});{var t=0,o=["$ref","$refs","$$refs"],f={},i=f.find=function(e,n){for(var r,t=e,o=n.length,f=0;o>f&&void 0!==(r=n[f]);f++){if(!((t instanceof Object||t instanceof Array)&&r in t))return;t=t[r]}return t},s=f.id=function(e){return e instanceof Object?(e.hasOwnProperty("__id")||(e.__id=t++),e.__id):void 0},c=f.resetRefs=function(e){if(!(e instanceof Object))return null;var n=a(e);return n?(n.splice(0),n):(n=[],e instanceof Array?e.push({$$refs:n}):e.$refs=n,n)},a=f.getRefs=function(e){return e instanceof Object?e instanceof Array&&e[e.length-1]&&e[e.length-1].$$refs instanceof Array?e[e.length-1].$$refs:e.hasOwnProperty("$refs")?e.$refs:null:null};f.addRef=function(e,n,r){var t=a(e);if(!t)throw new Error("You need to call resetRefs(object) first!");return t.push(n),t.push(r),t},f.findRefs=function(e){var n={},r=[],t=c(e),f=function(i){if(i instanceof Object){var c=s(i);if(void 0!==n[c])return t.push([].concat(r)),void t.push(n[c]);if(n[c]=["#"].concat(r),e instanceof Array)for(var a=e.length,u=0;a>u;u++)r.push(u),f(i[u]),r.pop();else for(var l,p=Object.keys(i),a=p.length,u=0;l=p[u],a>u;u++)o.indexOf(l)>-1||(r.push(l),f(i[l]),r.pop())}};return f(e),e},f.resolveRefs=function(e,n){var r,t=e instanceof Array;if(t){var o=e[e.length-1];o instanceof Object&&o.$refs instanceof Array&&(r=o.$refs)}else e instanceof Object&&e.$refs instanceof Array&&(r=e.$refs);if(!r)return e;for(var f,s,c,a,u,l=r.length,p=0;l>p;p+=2)f=[].concat(r[p]),c=[].concat(r[p+1]),s=f.pop(),a=c.shift(),void 0!==s&&void 0!==a&&(u=i(e,f),u&&("#"!==a&&c.unshift(a),("#"===a||n)&&(u[s]=i("#"===a?e:global,c),r.splice(p,2),p-=2,l-=2)));return e}}r.exports={},"object"==typeof r&&r.exports&&(r.exports=f)});
define('libs/schema.js/lib/utils',["require","exports","module"],function(r,e){var t=Array.prototype.slice,n=Object.hasOwnProperty;Object.keys||(Object.keys=function(r){if(r!==Object(r))throw new Error("Invalid object");var e=[];for(var t in r)n.call(r,t)&&(e[e.length]=t);return e}),e.extend=function(r){for(var e,n=t.call(arguments,1),o=0,i=n.length;i>o;o++){e=n[o];for(var a in e)r[a]=e[a]}return r},e.locale=function(r,e){if(!(r instanceof Object))return r;if(e=""+e||"en",void 0!==r[e])return r[e];for(parts=e.split("_");parts.pop();)if(e=parts.join("_"),void 0!==r[e])return r[e];return r.en}});
define('libs/schema.js/lib/schema',["require","exports","module","./utils","./objecttools"],function(t,e,i){var n=t("./utils"),s=t("./objecttools");i.exports=function(){var t=this,e=this.Schema=function(t){return"string"==typeof t&&(t=JSON.parse(t)),t instanceof e?t:(n.extend(this,t),void 0===this.id&&(this.id=""+e._id++),void(e.instances[this.id]=this))};n.extend(e.prototype,{validate:function(e,i){var n=new t.Validation(this,e,i);return n.instance&&delete n.instance.__id,n},setFallbacks:function(e){return this.fallbacks="string"==typeof e?t.Validation[e]:void 0===e?t.fallbacks:n.extend({},t.fallbacks,e),this}}),n.extend(e,{_id:1,create:function(e){if("string"==typeof e)var e=JSON.parse(e);var i=t.schemaSchema.validate(e);if(i.isError())throw console.log(i.getError()),i.getError();return i.instance},createSeveral:function(t){for(var e in t)void 0===t[e].id&&(t[e].id=e),t[e]=this.create(t[e]);return t},instances:{},resolveRefs:function(){for(var t in this.instances)s.resolveRefs(this.instances[t],!0)}})}});
define('libs/schema.js/lib/validation',["require","exports","module","./utils","./objecttools"],function(t,r,i){var s=t("./utils"),e=t("./objecttools"),n=s.locale,h=Array.prototype.slice;i.exports=function(){var r=this,i=this.detectRecursion,o=this.Validation=function(t,e,h){h=h||{},this._flags={},this._errors={},this._wasError=0,this._stack=[],this.path=[],this.id=o._id++,this.schema,this.push(t),this.instance=e,this.locale=r.locale||"en",this.detectRecursion=h.detectRecursion||i,this.errors=[];var a=this,c=this.Error=function(t,r,i){this.schema=a.schema,this.path=a.path?[].concat(a.path):[],this.attribute=t||"",this.description="object"==typeof r?n(r,a.locale)(this):r||"",i&&s.extend(this,i),a._errors[this.id()]||(a._errors[this.id()]=!0,a.errors.push(this)),a._wasError++};c.prototype.toJSON=function(){return{path:this.path,name:this.attribute,description:this.description}},c.prototype.id=function(){return[this.path,void 0,this.attribute]+""},this.instance=this.start(e),delete this._flags,this._errors,this._wasError,this._stack,this.path,this.id};s.extend(o.prototype,{isError:function(){return this.errors.length>0},getError:function(){if(0===this.errors.length)return null;var t=new Error(n(r.i18n("validation_error"),this.locale)(this));return t.errors=this.errors,t.toJSON=function(){return{message:this.message,errors:this.errors}},t},wasError:function(){var t=this._wasError;return this._wasError=0,t},push:function(t,r){this.schema=t,this._stack.push(t),void 0!==r&&this.path.push(r)},pop:function(t){var r=[this._stack.pop(),t?void 0:this.path.pop()],i=this._stack.length;return this.schema=i?this._stack[i-1]:null,r},getFlag:function(t){return e.id(t)+"_"+this.schema.id},flagObject:function(t){return this._flags[this.getFlag(t)]=!0,t},isObjectFlagged:function(t){return this.getFlag(t)in this._flags},callPlugin:function(t,r){var i=arguments.length>2?h.call(arguments,1):[r];return"function"!=typeof t&&(t=o.plugins[t]||o.plugins.addError),t.apply(this,i)}}),s.extend(o,{_id:1,registerPlugins:function(t){s.extend(o.plugins,t)},plugins:{addError:function(t,i){return new this.Error(i,r.i18n["validation_error_"+i]),t}}}),t("./"+this.v+"/validation").call(this)}});
define('libs/schema.js/lib/environment',["require","exports","module","./objecttools","./utils","./schema","./validation"],function(e,t,a){var i=(e("./objecttools"),e("./utils")),n=Array.prototype.slice,r=i.extend,c=(i.locale,function(t,a){var i;if("object"==typeof t)a=t;else{if(c.instances[t])return c.instances[t];i=this,this.id=t,c.instances[t]=this}a=a||{};var n=a.i18n||["../i18n/default"];n instanceof Array||(n=[n]);for(var o,s=this.i18n=function(e){return s[e]||{en:function(){return""}}},l=0,h=n.length;h>l;l++)o=n[l],"object"==typeof o?r(s,o):r(s,e(o));delete a.i18n,this.locale=a.locale||"en",delete a.locale,this.v="draft-02",delete a.v,this.detectRecursion=void 0===a.detectRecursion?!0:a.detectRecursion,delete a.detectRecursion,e("./schema").call(this);var u=this.Schema;u.v=this.v,e("./validation").call(this);var f=this.Validation,d=a.fallbacks||"TOLERANT_FALLBACKS";this.fallbacks="object"==typeof d?r(f.STRICT_FALLBACKS,d):f[d],delete a.fallbacks,r(this,a),e("./"+this.v+"/setupSchemaSchema").call(this);var v=this.schemaSchema.validate(this.schemaSchema,{detectRecursion:!0});if(v.isError())throw console.log("The core schema is not valid!"),v.getError()});r(c.prototype,{validateCall:function(e,t){if(!(e.SCHEMA instanceof this.Schema))throw"No SCHEMA defined";var a=e.SCHEMA.validate(n.call(arguments,2)),i=a.instance;if(a.isError())throw a.getError();return e.apply(t,i)},validateCallAsync:function(e,t){if(!(e.SCHEMA instanceof this.Schema))throw"No SCHEMA defined";var a=n.call(arguments,2),i=a.pop(),r=e.SCHEMA.validate(a),a=r.instance;return r.isError()?i(r.getError()):(a.push(i),void e.apply(t,a))},f:function(e,t,a,i){var r=n.call(arguments),i=r.pop();if(0===r.length)return i.IS_ASYNC=!1,i;if(e instanceof Object){var c,o,t=!!r[1],e=this.Schema.create(e),a=!!r[2],s=this;return c=a?function(){return s.validateCallAsync.apply(s,[i,this].concat(n.call(arguments)))}:function(){return s.validateCall.apply(s,[i,this].concat(n.call(arguments)))},i.SCHEMA=e,i.IS_VALIDATING=t,i.IS_ASYNC=a,c.SCHEMA=e,c.IS_VALIDATING=t,c.IS_ASYNC=a,o=t?c:i,t||(o.validate=c),o}return i.IS_ASYNC=!!r[0],i}}),c.instances={};var o=function(e,t){return new c(e,t)};return a.exports={},"object"==typeof a&&a.exports?a.exports=o:window.createEnvironment=o,a.exports});
define('libs/schema.js/i18n/default',["require","exports","module"],function(n,e,r){r.exports={validation_error:{de:function(){return"Diese Instanz ist nicht gültig"},en:function(){return"This instance is not valid"}},validation_error_type:{de:function(){return"Ungültiger Typ"},en:function(){return"Invalid type"}},validation_error_minLength:{de:function(n){return"Der Text muss mindestens "+n.schema.minLength+" Zeichen haben."},en:function(n){return"Text must be longer than "+n.schema.minLength+" symbols"}},validation_error_maxLength:{en:function(n){return"Text must be shorter than "+n.schema.maxLength+" symbols"}},validation_error_minimum:{en:function(n){return"Number must be greater than "+n.schema.minimum}},validation_error_maximum:{en:function(){return"Please, enter a reasonable number."}},validation_error_pattern:{en:function(){return"Incorrect value"}},validation_error_optional:{en:function(){return"Required field"}}}});
define('libs/schema.js/lib/draft-02/validation',["require","exports","module","Underscore","../utils","../objecttools"],function(t,i,e){var r=t("Underscore"),s=t("../utils"),a=t("../objecttools");e.exports=function(){var t=this,i=this.Schema;s.extend(this.Validation.prototype,{start:function(t){if(this.detectRecursion&&t instanceof Object){if(this.isObjectFlagged(t))return t;this.flagObject(t)}return t=this["extends"](t),this.wasError()?t:(t=this.adapters(t,"pre"),this.wasError()?t:(t=this.optional(t),this.wasError()||void 0===t?t:(t=this.empty(t),this.wasError()||""===t||null===t?t:(t=this.type(t),this.wasError()?t:(t=this.requires(t),this.wasError()?t:t=this.adapters(t,"post"))))))},"extends":function(t){return this.schema["extends"]?(this.push(this.schema["extends"]),t=this.start(t),this.pop(!0),t):t},optional:function(t){return this.schema.optional||void 0!==t?t:this.callPlugin(this.schema.fallbacks.optional,t,"optional")},empty:function(t){return this.schema.empty||void 0!==t&&""!==t&&null!==t?t:this.callPlugin(this.schema.fallbacks.optional,t,"empty")},adapters:function(t,i){if(!this.schema[i])return t;var e=this.schema[i];e instanceof Array||(e=[e]);for(var r,s=this.errors.length,a=e.length,n=0;a>n;n++)if(r=e[n],t=this.callPlugin(r,t),this.errors.length>s)return t;return t},type:function(t,i,e){e=e===!1?!1:!0;var r=i||this.schema.type;if(!(r instanceof Array)){var s=typeof t,a=function(){return"any"===r?!0:"null"===r?null===t:"array"===r?t instanceof Array:"object"===r?t instanceof Object&&!(t instanceof Array):"number"===r?"number"===s:"integer"===r?"number"===s&&Math.round(t)===t:"string"===r?"string"===s:"boolean"===r?"boolean"===s:void 0}();if(!a&&(t=this.callPlugin(this.schema.fallbacks.type,t,"type"),this.wasError()))return t;var i=typeof t;return"number"===i?(t=this.minimum(t),this.wasError()?t:(t=this.maximum(t),this.wasError()?t:(t=this.maxDecimal(t),this.wasError()?t:(e&&(t=this["enum"](t)),t)))):"string"===i?(t=this.pattern(t),this.wasError()?t:(t=this.minLength(t),this.wasError()?t:(t=this.maxLength(t),this.wasError()?t:(e&&(t=this["enum"](t)),t)))):t instanceof Array?(t=this.minItems(t),this.wasError()?t:(t=this.maxItems(t),this.wasError()?t:(t=this.items(t),this.wasError()?t:(t=this.additionalProperties(t),this.wasError()?t:(e&&(t=this["enum"](t)),t))))):t instanceof Object?(t=this.properties(t),t=this.additionalProperties(t),this.wasError()?t:(e&&(t=this["enum"](t)),t)):t}for(var n,h=this.errors.length,o=r.length,m=0;o>m;m++){if(n=this.type(t,r[m],0===m),this.errors.length===h){t=n;break}o>m+1&&(this.errors.splice(h,1),this.wasError())}return t},"enum":function(t){return"enum"in this.schema?r.indexOf(this.schema["enum"],t)>-1?t:this.callPlugin(this.schema.fallbacks["enum"],t,"enum"):t},requires:function(t){if(void 0!==this.schema.requires&&this.parentInstance){var e;"string"==typeof this.schema.requires?(e={properties:{}},e.properties[this.schema.requires]={type:"any"}):e={properties:this.schema.requires},e=i.create(e);var r=this.pop();this.push(e),this.properties(this.parentInstance),this.pop(!0),this.push.apply(this,r)}return t},properties:function(t){if("properties"in this.schema){var i,e=this.schema.properties;this.parentInstance=t;var r,i;for(var s in e)this.push(e[s],s),r=s in t,"__id"!=s?i=this.start(t[s]):(i=void 0,r=!1),(r||void 0!==i)&&(t[s]=i),this.pop();this.parentInstance=null}return this.wasError(),t},additionalProperties:function(t){if("additionalProperties"in this.schema)if(t instanceof Object&&!(t instanceof Array)){var i=this.schema.properties||{};if(this.schema.additionalProperties){if(this.schema.additionalProperties!==!0)for(var e,r=Object.keys(t),s=r.length,a=0;e=r[a],s>a;a++)e in i||(this.push(this.schema.additionalProperties,e),"__id"!==e&&(t[e]=this.start(t[e])),this.pop())}else for(var e,r=Object.keys(t),s=r.length,a=0;e=r[a],s>a;a++)if(!(e in i)&&"__id"!=e)return this.callPlugin(this.schema.fallbacks.additionalProperties,t,"additionalProperties")}else if(this.schema.items instanceof Array)if(this.schema.additionalProperties){if(this.schema.additionalProperties!==!0)for(var s=t.length,a=this.schema.items.length;s>a;a++)this.push(this.schema.additionalProperties,a),t[a]=this.start(t[a]),this.pop()}else if(t.length>this.schema.items.length)return this.callPlugin(this.schema.fallbacks.additionalProperties,t,"additionalProperties");return t},items:function(t){if("items"in this.schema)if(this.schema.items instanceof Array)for(var i,e,r=this.schema.items.length,s=0;r>s;s++)this.push(this.schema.items[s],s),i=s in t,"__id"!=s?e=this.start(t[s]):(i=!1,e=void 0),(i||void 0!==e)&&(t[s]=e),this.pop();else for(var r=t.length,s=0;r>s;s++)this.push(this.schema.items,s),"__id"!=s&&(t[s]=this.start(t[s])),this.pop();return t},maxItems:function(t){return this.schema.maxItems&&t.length>this.schema.maxItems?this.callPlugin(this.schema.fallbacks.maxItems,t,"maxItems"):t},minItems:function(t){return this.schema.minItems&&t.length<this.schema.minItems?this.callPlugin(this.schema.fallbacks.minItems,t,"minItems"):t},minimum:function(t){if(!("minimum"in this.schema))return t;var i="minimumCanEqual"in this.schema?this.schema.minimumCanEqual:!0;return(i?t>=this.schema.minimum:t>this.schema.minimum)?t:this.callPlugin(this.schema.fallbacks.minimum,t,"minimum")},maximum:function(t){if(!("maximum"in this.schema))return t;var i="maximumCanEqual"in this.schema?this.schema.maximumCanEqual:!0;return(i?t<=this.schema.maximum:t<this.schema.maximum)?t:this.callPlugin(this.schema.fallbacks.maximum,t,"maximum")},maxDecimal:function(t){if("maxDecimal"in this.schema){var i=Math.pow(10,this.schema.maxDecimal);return Math.round(t*i)/i===t?t:this.callPlugin(this.schema.fallbacks.maxDecimal,t,"maxDecimal")}return t},pattern:function(t){return this.schema.pattern?this.schema.pattern.test(t)?t:this.callPlugin(this.schema.fallbacks.pattern,t,"pattern"):t},minLength:function(t){return void 0===this.schema.minLength?t:t.length>=this.schema.minLength?t:this.callPlugin(this.schema.fallbacks.minLength,t,"minLength")},maxLength:function(t){return void 0===this.schema.maxLength?t:t.length<=this.schema.maxLength?t:this.callPlugin(this.schema.fallbacks.maxLength,t,"maxLength")}}),s.extend(this.Validation,{TOLERANT_FALLBACKS:{optional:"setDefault",type:"castTolerantlyToType","enum":"setDefault",requires:"addError",additionalProperties:"removeAdditionalProperties",maxItems:"sliceToMaxItems",minItems:"addError",maximum:"setMaximum",minimum:"setMinimum",maxDecimal:"roundToMaxDecimal",pattern:"addError",minLength:"addError",maxLength:"addError"},STRICT_FALLBACKS:{optional:"addError",type:"addError","enum":"addError",requires:"addError",additionalProperties:"addError",maxItems:"addError",minItems:"addError",maximum:"addError",minimum:"addError",maxDecimal:"addError",pattern:"addError",minLength:"addError",maxLength:"addError"}}),this.Validation.registerPlugins({addToRefs:function(t){if(t instanceof Object&&!(t instanceof Array)&&"string"==typeof t.$ref){var i=this.path,e=t.$ref.split(".");a.addRef(this.instance,[].concat(i),"#"===e[0]?[].concat(e):["#","constructor","instances"].concat(e))}return t},instantiateSchema:function(t){if(!(t instanceof Object)||t instanceof Array)return t;var e=t===this.instance;if(t instanceof i||(t=new i(t)),e&&(this.instance=t),t.properties instanceof Object){var r=t.properties||{};for(var s in r)r[s]instanceof Object&&!(r[s]instanceof i)&&(r[s]=new i(r[s]))}if(t.items instanceof Array)for(var n=t.items,h=n.length,o=0;h>o;o++)n[o]instanceof Object&&!(n[o]instanceof i)&&(n[o]=new i(n[o]));else t.items instanceof Object&&(t.items instanceof i||(t.items=new i(t.items)));if(t.requires&&t.requires instanceof Object&&!(t.requires instanceof Array)){var r=t.requires;for(var s in r)r[s]=new i(r[s])}return t.additionalProperties instanceof Object&&!(t.additionalProperties instanceof i)&&(t.additionalProperties=new i(t.additionalProperties)),t["extends"]instanceof Object&&(t["extends"]instanceof i||(t["extends"]=new i(t["extends"]))),t.setFallbacks(t.fallbacks),a.resetRefs(t),t},castTolerantlyToType:function(i,e){e=e||"type";var r,s=this.schema.type,a=typeof i;if("string"===s)return"object"===a?null!==i&&"function"==typeof i.toString&&i.toString!==Object.prototype.toString&&i.toString!==Array.prototype.toString?""+i:(new this.Error(e,t.i18n["validation_error_"+e]),i):""+i;if("number"===s){if("boolean"!==a)return r=parseFloat(i),isNaN(r)&&0!=i?(new this.Error(e,t.i18n["validation_error_"+e]?t.i18n["validation_error_"+e]:"validation_error_"+e),i):isNaN(r)?i:r;if(i===!1)return 0;if(i===!0)return 1}if("integer"===s){if("boolean"!==a)return r=parseInt(i,10),isNaN(r)?(new this.Error(e,t.i18n["validation_error_"+e]),i):r;if(i===!1)return 0;if(i===!0)return 1}if("boolean"===s)return"string"===a?"false"===i.trim().toLowerCase()?!1:(r=parseFloat(i),isNaN(r)?!0:!!r):!!i;if("object"===s)return i instanceof Array&&0===i.length?{}:(("object"!==a||null===i||i instanceof Array)&&new this.Error(e,t.i18n["validation_error_"+e]),i);if("array"===s){if(!i)return[];if(i instanceof Object){var n,r=[],h=!0;if(0===Object.keys(i).length)return r;for(var o in i){n=parseInt(o,10),""+n===o?r[n]=i[o]:h=!1;break}}return new this.Error(e,t.i18n["validation_error_"+e]),i}return"null"===s?(new this.Error(e,t.i18n["validation_error_"+e]),i):void 0},roundToMaxDecimal:function(i,e){if(void 0===this.schema.maxDecimal)return new this.Error(e,t.i18n["validation_error_"+e]),i;var r=Math.pow(10,this.schema.maxDecimal);return Math[0>i?"ceil":"floor"](i*r)/r},setMinimum:function(i,e){return void 0===this.schema.minimum?(new this.Error(e,t.i18n["validation_error_"+e]),i):this.schema.minimum},setMaximum:function(i,e){return void 0===this.schema.maximum?(new this.Error(e,t.i18n["validation_error_"+e]),i):this.schema.maximum},truncateToMaxLength:function(i,e){return void 0===this.schema.maxLength?(new this.Error(e,t.i18n["validation_error_"+e]),i):i.substr(0,this.schema.maxLength)},setDefault:function(i,e){return"default"in this.schema?this.schema["default"]:void new this.Error(e,t.i18n["validation_error_"+e])},removeAdditionalProperties:function(t){if("object"===this.schema.type){for(var i,e=this.schema.properties||{},r=Object.keys(t),s=r.length,a=0;i=r[a],s>a;a++)void 0===e[i]&&delete t[i];return t}if(this.schema.items&&this.schema.items instanceof Array)for(var s=t.length,a=this.schema.items.length;s>a;a++)delete t[a];return t},sliceToMaxItems:function(i,e){return void 0!==this.schema.maxItems?i.length>this.schema.maxItems&&i.splice(this.schema.maxItems):new this.Error(e,t.i18n["validation_error_"+e]),i},deleteInstance:function(){return void 0}})}});
define('libs/schema.js/lib/draft-02/setupSchemaSchema',["require","exports","module"],function(e,t,i){i.exports=function(){var e=this.Schema,t=this.Validation,i={id:"jsonSchemaCore",title:"JSON Schema Core Schema",description:"This is the JSON Schema for JSON Schemas.",type:"object",properties:{type:{type:["string","array"],items:{type:"string","enum":{$ref:"#.properties.type.enum"}},uniqueItems:!0,description:"This is a type definition value. This can be a simple type, or a union type","enum":["string","object","array","boolean","number","integer","null","any"],minItems:2,optional:!0,"default":"any",pre:"addToRefs",labels:{de:{string:"Text",object:"Objekt",array:"Liste","boolean":"wahr/falsch",number:"Zahl",integer:"ganze Zahl","null":"undefiniert"},en:{}}},id:{type:"string",optional:!0,minLength:1,pattern:"[^\\.#]",description:"A globally unique ID for this schema. It can be used to reference the schema from another one."},optional:{type:"boolean",description:"This indicates that the instance property in the instance object is not required.",optional:!0,"default":!1,pre:"addToRefs"},empty:{type:"boolean",description:"This indicates that the instance property in the instance object can be empty.",optional:!0,"default":!1,pre:"addToRefs"},"enum":{type:"array",optional:!0,description:"This provides an enumeration of possible values that are valid for the instance property. It goes only for the first type, if type is an array of types.",minItems:1,uniqueItems:!0},description:{type:"string",optional:!0,description:"This provides a description of the purpose the instance property. The value can be a string or it can be an object with properties corresponding to various different instance languages (with an optional default property indicating the default description).",pre:"addToRefs"},title:{type:"string",optional:!0,description:"This provides the title of the property",pre:"addToRefs"},"default":{type:"any",optional:!0,description:"This indicates the default for the instance property.",pre:"addToRefs"},options:{type:"array",optional:!0,items:{type:"object",properties:{label:{type:"string",optional:!0},value:{type:"any"}}},pre:"addToRefs"},"extends":{type:"object",optional:!0,pre:"addToRefs"},requires:{type:["string","object"],additionalProperties:{$ref:"#"},optional:!0,description:"indicates a required property or a schema that must be validated if this property is present",pre:"addToRefs"},nonStandard:{type:"boolean",optional:!0,"default":!1,nonStandard:!0},pre:{type:["string","array","any"],items:{type:["string","any"]},optional:!0,description:"One or several prefix adapters identified by plugin IDs",nonStandard:!0,pre:"addToRefs"},post:{type:["string","array","any"],items:{type:["string","any"]},optional:!0,description:"One or several postfix adapters identified by plugin IDs",nonStandard:!0,pre:"addToRefs"},fallbacks:{type:"object",additionalProperties:{type:["string","object"],description:"Identifier for a adapter function that will be executed if a constraint is violated"},description:"Fallback object, with property names = schema property names",nonStandard:!0,pre:"addToRefs"},properties:{type:"object",additionalProperties:{$ref:"#"},description:"This is a definition for the properties of an object value",optional:!0,"default":{},pre:"addToRefs"},items:{type:["object","array"],properties:{$ref:"#.properties"},items:{$ref:"#"},description:"When the value is an array, this indicates the schema to use to validate each item in an array",optional:!0,pre:["instantiateSchema","addToRefs"]},maxItems:{type:"integer",optional:!0,description:"When the instance value is an array, this indicates maximum number of items.",minimum:0,pre:"addToRefs"},minItems:{type:"integer",optional:!0,description:"When the instance value is an array, this indicates minimum number of items.",minimum:0,pre:"addToRefs"},additionalProperties:{type:["boolean","object"],properties:{$ref:"#.properties"},description:"This provides a default property definition for all properties that are not explicitly defined in an object type definition.",optional:!0,"default":!0,pre:["instantiateSchema","addToRefs"]},minimum:{type:"number",optional:!0,description:"This indicates the minimum value for the instance property when the type of the instance value is a number.",pre:"addToRefs"},minimumCanEqual:{type:"boolean",optional:!0,description:"If the minimum is defined, this indicates whether or not the instance property value can equal the minimum.","default":!0,pre:"addToRefs"},maximum:{type:"number",optional:!0,description:"This indicates the maximum value for the instance property when the type of the instance value is a number.",pre:"addToRefs"},maximumCanEqual:{type:"boolean",optional:!0,description:"If the maximum is defined, this indicates whether or not the instance property value can equal the maximum.","default":!0,pre:"addToRefs"},maxDecimal:{type:"integer",optional:!0,description:"This indicates the maximum number of decimal places in a floating point number.",pre:"addToRefs"},pattern:{type:["string","object"],format:"regex",description:"When the instance value is a string, this provides a regular expression that a instance string value should match in order to be valid.",optional:!0,pre:["addToRefs",function(e){return e instanceof RegExp?e:"string"==typeof e?new RegExp(e):e}]},maxLength:{type:"number",optional:!0,description:"When the instance value is a string, this indicates maximum length of the string.",pre:"addToRefs"},minLength:{type:"number",optional:!0,description:"When the instance value is a string, this indicates minimum length of the string.",pre:"addToRefs"},format:{type:"string",optional:!0,description:"This indicates what format the data is among some predefined formats which may include:\n\ndate - a string following the ISO format \naddress \nschema - a schema definition object \nperson \npage \nhtml - a string representing HTML",pre:"addToRefs"}},pre:["instantiateSchema","addToRefs"]};(jsonSchemaCore=new e(i)).setFallbacks(t.STRICT_FALLBACKS);for(var a in jsonSchemaCore.properties)(jsonSchemaCore.properties[a]=new e(jsonSchemaCore.properties[a])).setFallbacks(t.STRICT_FALLBACKS);(jsonSchemaCore.properties.type.items=new e(jsonSchemaCore.properties.type.items)).setFallbacks(t.STRICT_FALLBACKS),jsonSchemaCore.properties.type.items["enum"]=jsonSchemaCore.properties.type["enum"],jsonSchemaCore.properties.id.pattern=new RegExp(jsonSchemaCore.properties.id.pattern),(jsonSchemaCore.properties.options.items=new e(jsonSchemaCore.properties.options.items)).setFallbacks(t.STRICT_FALLBACKS),jsonSchemaCore.properties.requires.additionalProperties=jsonSchemaCore,(jsonSchemaCore.properties.pre.items=new e(jsonSchemaCore.properties.pre.items)).setFallbacks(t.STRICT_FALLBACKS),(jsonSchemaCore.properties.post.items=new e(jsonSchemaCore.properties.post.items)).setFallbacks(t.STRICT_FALLBACKS),(jsonSchemaCore.properties.fallbacks.additionalProperties=new e(jsonSchemaCore.properties.fallbacks.additionalProperties)).setFallbacks(t.STRICT_FALLBACKS),jsonSchemaCore.properties.properties.additionalProperties=jsonSchemaCore,jsonSchemaCore.properties.items.properties=jsonSchemaCore.properties,jsonSchemaCore.properties.items.items=jsonSchemaCore,jsonSchemaCore.properties.additionalProperties.properties=jsonSchemaCore.properties,this.schemaSchema=jsonSchemaCore}});
define('tau/utils/utils.jsonSchema',["Underscore","jQuery","libs/schema.js/lib/environment","libs/schema.js/lib/utils","libs/schema.js/lib/objecttools","libs/schema.js/lib/schema","libs/schema.js/i18n/default","libs/schema.js/lib/draft-02/validation","libs/schema.js/lib/draft-02/setupSchemaSchema"],function(i,s,l){var a=l("prod",{fallbacks:"STRICT_FALLBACKS"});return a.PATTERN_DATE=/^([0-1]{0,1}[0-9]{1})\/([0-3]{0,1}[0-9]{1})\/([0-9]{4})$/,a.PATTERN_URL=/^([a-z]+?)\:\/\/.+?$/,a.Validation.registerPlugins({trim:function(i){return s.trim(i)}}),a.Validation.prototype.optional=function(i){return this.schema.optional||void 0!==i&&null!==i&&""!==i?i:this.callPlugin(this.schema.fallbacks.optional,i,"optional")},a});
define('tau/models/customField/model.customField.date.editable',["tau/models/customField/model.customField.editable","tau/utils/utils.jsonSchema","tau/utils/utils.date"],function(t,e,a){var i=t.extend({category:"edit",name:"Editable custom field",schema:e.Schema.create({type:"object",properties:{value:{type:"string",optional:!1,post:function(t){if(0==this.wasError()){var e=a.parse(t);null==e?new this.Error("Date","Incorrect date format"):e<new Date(1900,0,1)?new this.Error("Date","Date must be greater than 01-01-1900"):t=a.format.date.short(e)}return t},additionalProperties:{dateFormat:a.getFormatData().date.short}}}}),"bus validate":function(t){var e=t.data,a=e.cmd.$set.customFields[0];this.schema.properties.value.optional=!this.config.customField.required,this.schema.properties.value.empty=!this.config.customField.required,e.validation=this.schema.validate(a)}});return i});
define('tau/ui/behaviour/date/ui.behaviour.dateEditor',["Underscore","jQuery"],function(t,i){i.widget("ui.dateEditor",{options:{widgetName:"datepicker",onSave:function(){},validation:{required:!1},dateFormat:"m/dd/yy",delayedSave:!0},errors:[],_create:function(){this.init()},init:function(){this.element.addClass("ui-dateeditor-source").click(i.proxy(this.showEditor,this))},setValidationErrors:function(i){this.element.addClass("ui-validationerror"),t.isString(i)&&this.element.attr("title",i)},resetValidationErrors:function(t){this.element.removeClass("ui-validationerror").removeAttr("title",t)},activate:function(){this.showEditor(),this.$editor.find(":text").focus()},_attachKeyBoardHandling:function(){this.handleKeyDown||(this.handleKeyDown=t.bind(this.mapKeys,this),this.options.keyboardManager.pushHandler(this))},_detachKeyboardHandling:function(){this.handleKeyDown&&(this.options.keyboardManager.popHandler(),delete this.handleKeyDown)},attachBlurHandler:function(t,e){var n=null,o=!1;this.$editor.find(".ui-datepicker-trigger").mousedown(function(){o=!0}).mouseup(function(){o=!1}),i(".ui-datepicker.ui-widget").mousedown(function(){o=!0}).mouseup(function(){o=!1});var s=this.options.delayedSave;t.blur(function(){return s?void(o||(n=setTimeout(e,100))):void e()}).focus(function(){clearTimeout(n)})},showEditor:function(){if(!this._editorIsVisible){if(this.$editor||(this.$editor=this._createEditor()),this._attachKeyBoardHandling(),!this._attachedSaveHandler){this._attachedSaveHandler=!0;var t=this.$editor.find(".hasDatepicker");this.attachBlurHandler(t,this._onBlur.bind(this))}this.element.hide(),this._editorIsVisible=!0,this.$editor.show().find(":text").val(this.getValue())}},_createEditor:function(){var t=i('<span class="ui-dateeditor"><input type="text" maxlength="20" /></span>'),e=t.find(":text");return e.focus(),e[this.options.widgetName]({showButtonPanel:!1,dateFormat:this.options.dateFormat,buttonText:"choose",showOn:"button",onSelect:function(){e.focus()}}),t.insertAfter(this.element),t},trimString:function(i){return t.trim(i||"")},_getDefaultValue:function(){return this.options.date||this.getValue()},_onSave:function(){var t=this.$editor.find(":text").val(),i={value:t};this.options.beforeChange&&this.options.beforeChange(i),t=i.value||"",this.hideEditor(),this.element.show();var e=this._getDefaultValue();this.trimString(e)!=this.trimString(t)&&this.options.onSave(t),this.setValue(t)},_onCancel:function(){this.hideEditor(),this.element.show(),this.options.onCancel&&this.options.onCancel()},hideEditor:function(){this.$editor&&this._editorIsVisible&&(this.$editor.hide(),this._editorIsVisible=!1),this._detachKeyboardHandling()},_onBlur:function(){this._editorIsVisible&&(this._onSave(),this.hideEditor())},destroy:function(){this.hideEditor();var t=this.$editor;if(t){var i=t.find(":text");i[this.options.widgetName]("destroy"),t.remove()}},mapKeys:function(t){switch(t.which){case 13:t.preventDefault(),this._onSave();break;case 27:t.preventDefault(),this._onCancel()}},setValue:function(t){this.element.text(t)},getValue:function(){return this.element.text()}})});
define('tau/components/extensions/customField/extension.customField.date.editable',["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/utils/utils.date","tau/ui/behaviour/date/ui.behaviour.dateEditor","tau/ui/behaviour/customField/ui.behaviour.customField.row"],function(e,t,a,i){return a.extend({category:"edit","bus permissionsReady+afterRender":function(a){var d=this,o=a.afterRender.data.data,r=a.permissionsReady.data;if(r.editable){var n=a.afterRender.data.element,s=n.find(".ui-customfield__value");s.addClass("editableText"),this.$widget=s,t.datepicker.parseDate=function(e,t){return i.parse(t)},t.datepicker.formatDate=function(e,t){return i.formatAs(t,e)};var u=i.getFormatData().date.short;s.dateEditor({dateFormat:u,delayedSave:e.has(this.config,"delayedDateSave")?this.config.delayedDateSave:!0,keyboardManager:this.config.context.configurator.getKeyBoardManager(),onSave:function(e){d.bus.fire("save",{customFields:[{name:o.name,type:o.type,value:e}]})}}),n.behaviourCustomFieldRow({onActivate:function(){s.dateEditor("activate"),s.focus()}}),n.addClass("ui-customfield_editable_true")}},"bus validate":function(){this.$widget.dateEditor("resetValidationErrors")},"bus afterValidate":function(e){this.$widget.dateEditor("setValue",e.data.validation.instance.value)},"bus validationFailed":function(e){this.$widget.dateEditor("setValidationErrors",e.data.validation.errors[0].description)}})});
define('tau/ui/templates/customField/ui.template.customField.date',["tau/core/templates-factory"],function(t){var e={name:"customField-date",markup:['<div class="ui-customfield {{if !output}}ui-customfield_empty_true{{/if}}">',"   <table>","   <tbody>","   <tr>",'<td class="ui-customfield__label">${name}</td>','<td class="ui_custom_field_value_container">','<div class="ui-customfield__value">${output}</div>',"</td>","   </tr>","   </tbody>","   </table>","</div>"]};return t.register(e)});
define('tau/components/component.customField.date',["tau/components/component.creator","tau/models/customField/model.customField","tau/models/customField/model.customField.date.editable","tau/ui/extensions/customField/ui.extension.customField.required","tau/components/extensions/customField/extension.customField.date.editable","tau/ui/extensions/customField/ui.extension.customField.editable","tau/ui/templates/customField/ui.template.customField.date"],function(e,t,o,i,u,s,n){return{create:function(d){var l={ModelType:t,template:n,extensions:[o,i,u,s]};return e.create(l,d)}}});
define('tau/models/customField/model.customField.dropdown.editable',["Underscore","tau/models/customField/model.customField.editable"],function(t,e){var i=e.extend({"bus beforeInit":function(e){if(this.store=e.data.config.store,this.config.data){var i=this.config.data.value,a=[];t.map(this.config.data.options,function(t){i!==t&&a.push({id:t,name:t})}),this.fire("dataBind",{states:a})}},"bus beforeInit:last + updateState":function(t,e,i){var a=null;i&&i.id&&(a=i.id);var n={customFields:[{name:e.config.customField.name,type:e.config.customField.type,value:a}]};this.fire("save",n)}});return i});
define('tau/components/extensions/customField/extension.customField.url.editable',["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/behaviour/customField/ui.behaviour.customField.row"],function(e,i,t){return t.extend({category:"edit","bus permissionsReady+afterRender":function(e){var i=(e.afterRender.data.data,e.permissionsReady.data);if(i.editable){var t=e.afterRender.data.element,a=t.find(".ui-customfield__value");this.$widget=a,t.find(".ui-customfield__label").behaviourCustomFieldRow({}),t.addClass("ui-customfield_editable_true")}}})});
define('tau/models/customField/model.customField.entity.editable',["Underscore","tau/models/customField/model.customField.editable"],function(e,t){return t.extend({"bus beforeInit:last + entitySelected":function(e,t,n){var i={},d={name:t.config.customField.name,type:"Entity",value:null};i.customFields=[d];var a=n.entity;a&&a.id&&(d.value={id:a.id,kind:a.entityType.name,name:a.name}),this.fire("save",{$set:i})}})});
define('tau/models/finder.entity/model.finder.entity.data.customField.entity',["Underscore","tau/models/finder.entity/model.finder.entity.data"],function(t,e){return e.extend({processOptions:function(e,n){var i=$.Deferred(),r=e.customField,s=t.map(t.clone(r.options),function(t){return parseInt(t,10)}),o=t.bind(this._super,this);return n.getStore().get("entityType",{fields:["id","name"]}).done({success:t.bind(function(r){var u=r[0].data,d=t.pluck(t.filter(u,function(e){return t.indexOf(s,e.id)>=0}),"name");e.entityType=d.length?t.map(d,function(t){return t.toLowerCase()}):null,o(e,n).then(function(t){i.resolve(t)})},this)}),i.promise()},processInitDsl:function(e,n){var i=e.customField,r=e.context.entity,s=$.Deferred();return n.getStore().get(r.entityType.name,{id:r.id,fields:["customFields"]}).done(t.bind(function(t){var n=this.getCustomFieldByName(t[0].data.customFields,i.name);e=this.setOptionsInitDslFromCustomFieldValue(e,n.value),s.resolve(e)},this)),s.promise()},setOptionsInitDslFromCustomFieldValue:function(t,e){var n=[];return e&&n.push(e.id),t.filter.init_dsl=this.updateInitDslWithIds(t.filter.init_dsl,n),t},getCustomFieldByName:function(e,n){return t.find(e,function(t){return t.name===n})},updateInitDslWithIds:function(e,n){var i=t.map(n,function(e){return t.sprintf("id != %d",e)});return e&&i.unshift(e),e=i.join(" and ")}})});
define('tau/ui/extensions/customField/ui.extension.customField.editable.dropdown',["Underscore","tau/core/extension.base","tau/models/customField/model.customField.entity.editable","tau/models/finder.entity/model.finder.entity.data.customField.entity"],function(e,t){return t.extend({"bus beforeInit + configurationProvided + afterRender":function(t,n,i,o){var r=n.customField,d=o.element.find("tr"),a=e.deepClone(i),u=o.view,c=this._createFinderConfig(a,r,i);this._initBubbleWithFinder(d,u,c),d.on("click",".i-role-reset",e.bind(function(){return this.fire("updateState",{}),!1},this))},_createFinderConfig:function(e){return{type:"customField.dropdown.list",customField:e,data:e}},_initBubbleWithFinder:function(e,t,n){e.addClass("tau-bubble-target ui-customfield_editable_true");var i={target:e,alignTo:e.find(".entity-custom-field-link"),onShow:function(){t.config.context.configurator.getKeyBoardManager().pushHandler({})},onHide:function(){t.config.context.configurator.getKeyBoardManager().popHandler()},componentsConfig:{components:[n]}};this.fire("initBubble",i)}})});
define('tau/ui/templates/customField/ui.template.customField.dropdown',["tau/core/templates-factory"],function(e){var t={name:"customField-dropdown",engine:"jqote2",markup:['<% var className = this.value ? "" : "ui-customfield_empty_true"; %>','<div class="ui-customfield ui-customfield-dropdown <%= className %>">',"<table>","<tbody>","<tr>",'<td class="ui-customfield__label"><%= this.name %></td>','<td class="ui_custom_field_value_container">','<div class="ui-customfield__value ui-customfield__value_margin_right"><%! this.value %></div>',"<% if (this.actionReset && this.actionReset.enable) { %>",'<% var title = this.actionReset.label || "reset"; %>','<span class="i-role-reset tau-clear-filter tau-clear-filter_margin_left" title="<%! title %>"></span>',"<% } %>","</td>","</tr>","</tbody>","</table>","</div>"]};return e.register(t)});
define('tau/components/component.customField.dropdown',["Underscore","tau/components/component.creator","tau/models/customField/model.customField","tau/models/customField/model.customField.dropdown.editable","tau/ui/extensions/customField/ui.extension.customField.required","tau/components/extensions/bubble/extension.bubble.creator","tau/components/extensions/component.creator.extension","tau/components/extensions/customField/extension.customField.url.editable","tau/ui/extensions/customField/ui.extension.customField.editable","tau/ui/extensions/customField/ui.extension.customField.editable.dropdown","tau/ui/templates/customField/ui.template.customField.dropdown"],function(e,t,o,n,i,s,u,d,l,c,m){return{create:function(e){var a={ModelType:o,extensions:[n,i,d,l,u,s,c],template:m};return t.create(a,e)}}});
define('tau/ui/templates/choice/ui.template.choice.list.dropdown',["tau/core/templates-factory","tau/ui/templates/choice/ui.template.choice.option"],function(e){var i={name:"state.list.dropdown",engine:"jqote2",markup:['<div class="ui-drop-down">',"<% if (this.states.length) { %>",'<div role="list" class="drop-down-list">','<div class="drop-down-list__inner i-inner">','<%= fn.sub("state.option", this.states) %>',"</div>","</div>","<% } else { %>",'<div class="drop-down-list">','<div role="placeholder-empty">No items found</div>',"</div>","<% } %>","</div>"]};return e.register(i)});
define('tau/components/component.customField.dropdown.list',["tau/components/component.creator","tau/core/model-base","tau/models/customField/model.customField.dropdown.editable","tau/ui/extensions/choice/ui.extension.choice.editable","tau/ui/extensions/bubble/ui.extension.bubble.listResizer","tau/ui/templates/choice/ui.template.choice.list.dropdown"],function(e,t,o,i,n,u){return{create:function(c){var s={ModelType:t,extensions:[o,i,n],template:u};return e.create(s,c)}}});
define('tau/components/extensions/customField/extension.customField.entity.finder',["Underscore","tau/core/extension.base","tau/models/customField/model.customField.entity.editable","tau/models/finder.entity/model.finder.entity.data.customField.entity"],function(e,t,i,n){return t.extend({"bus beforeInit + configurationProvided + afterRender":function(t,i,n,o){var d=i.customField,r=o.element.find("tr"),l=e.deepClone(n),f=o.view,u=this._createFinderConfig(l,d,n);this._initBubbleWithFinder(r,f,u),r.on("click",".i-role-reset",e.bind(function(){return this.fire("entitySelected",{entity:null}),!1},this))},_createFinderConfig:function(e){return{type:"finder.entity",model:n,modelEditable:i,customField:e}},_initBubbleWithFinder:function(e,t,i){e.addClass("tau-bubble-target ui-customfield_editable_true");var n={target:e,alignTo:e.find(".entity-custom-field-link"),onShow:function(){t.config.context.configurator.getKeyBoardManager().pushHandler({})},onHide:function(){t.config.context.configurator.getKeyBoardManager().popHandler()},componentsConfig:{components:[i]},onPositionConfig:function(e){e.collision="flipfit flipfit",e.at="left middle",e.my="right middle"}};this.fire("initBubble",n)}})});
define('tau/ui/templates/common/ui.template.entityLink.full',["tau/core/templates-factory"],function(e){var t={name:"entity-link-full",markup:['<a href="${url}" class="tau-linkentity tau-linkentity_type_full">','<em class="ui-type-icon ui-type-icon-${__type.toLowerCase()} tau-linkentity__icon">${id}</em>','<span class="tau-linkentity__inner">',"{{if text}}${text}{{else}}${name}{{/if}}","</span>","</a>"],dependencies:[]};return e.register(t)});
define('tau/ui/templates/customField/ui.template.customField.entity',["tau/core/templates-factory","tau/ui/templates/common/ui.template.entityLink.full"],function(t){var e={name:"customField-entity",engine:"jqote2",markup:['<div class="ui-customfield">',"<table>","<tbody>",'<% var className = this.value.id ? "" : "ui-customfield_empty_true"; %>','<tr class="<%= className %>">','<td class="ui-customfield__label"><%= this.name %></td>','<td class="ui_custom_field_value_container">',"<% if (this.value.id) { %>",'<span class="ui-customfield__value ui-customfield__value_margin_right"><%= fn.sub("entity-link-full", this.value) %></span>',"<% } else { %>",'<span class="entity-custom-field-link property-text ui-customfield__value ui-customfield__value_margin_right"><%! this.value.name %></span>',"<% } %>","<% if (this.actionReset && this.actionReset.enable) { %>",'<% var title = this.actionReset.label || "reset"; %>','<span class="i-role-reset tau-clear-filter tau-clear-filter_margin_left" title="<%! title %>"></span>',"<% } %>","</td>","</tr>","</tbody>","</table>","</div>"]};return t.register(e)});
define('tau/components/component.customField.entity',["Underscore","tau/components/component.creator","tau/models/customField/model.customField","tau/models/customField/model.customField.entity.editable","tau/components/extensions/component.creator.extension","tau/components/extensions/bubble/extension.bubble.creator","tau/ui/extensions/customField/ui.extension.customField.editable","tau/ui/extensions/customField/ui.extension.customField.required","tau/components/extensions/customField/extension.customField.entity.finder","tau/ui/templates/customField/ui.template.customField.entity"],function(e,t,n,o,i,s,u,c,m,l){return{create:function(e){var d={template:l,extensions:[n,o,i,s,u,c,m]};return t.create(d,e)}}});
define('tau/models/finder.entity/model.finder.entity.data.customField.multipleEntities',["Underscore","tau/models/finder.entity/model.finder.entity.data.customField.entity"],function(t,i){return i.extend({"bus afterInit":function(i,e){var s=e.config,n=s.context.configurator.getStore(),a=s.context.entity;n.unbind(this),n.on({eventName:"afterSave",type:a.entityType.name,listener:this,filter:{id:a.id},hasChanges:["customFields"]},t.bind(function(t){var i=this.getCustomFieldByName(t.data.changes.customFields,s.customField.name);if(i){var e=this.getIdsFromCustomFieldValue(i.value);this.fire("updateInitialDsl",{actualIds:e})}},this))},"bus options.ready:last + builder.ready:last + initialDsl.ready:last + updateInitialDsl":function(t,i,e,s,n){i.filter.init_dsl=this.updateInitDslWithIds(s,n.actualIds),this.fire("options.ready",i),e.setParameter("init_dsl",i.filter.init_dsl),this.fire("builder.ready",e),this.fire("search.readyToExecute")},setOptionsInitDslFromCustomFieldValue:function(t,i){var e=t.filter.init_dsl;this.fire("initialDsl.ready",e);var s=this.getIdsFromCustomFieldValue(i);return t.filter.init_dsl=this.updateInitDslWithIds(e,s),t},getIdsFromCustomFieldValue:function(i){var e=[],s=t.compact(t.asString(i).split(","));return e=t.map(s,function(t){return parseInt(t.split(" ")[0],10)})}})});
define('tau/models/finder.entity/model.finder.entity.data.customField.multipleEntities.editable',["Underscore","tau/core/extension.base"],function(e,t){return t.extend({"bus afterInit:last + entitySelected":function(t,n){var i=n.config.customField,o=n.config.context.entity,a=n.config.context.configurator.getStore();a.get(o.entityType.name,{id:o.id,fields:["customFields"]}).done(e.bind(function(t){var n=e.find(t[0].data.customFields,function(e){return e.name===i.name}),o=null!=n.value?n.value.split(","):[];this.fire("prevValues.ready",o)},this))},"bus afterInit:last + entitySelected + prevValues.ready":function(t,n,i,o){var a=i.entity,c=n.config.customField,s=n.config.context.entity,d=n.config.context.configurator.getStore(),u=a.id+" "+a.entityType.name.toLowerCase(),r=e.uniq(o.concat(u)).join(",");d.save(s.entityType.name,{id:s.id,$set:{customFields:[{name:c.name,value:r}]},fields:["id","customFields"]}).done()}})});
define('tau/ui/extensions/customField/ui.extension.customField.multipleEntities.add.trigger',["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/models/finder.entity/model.finder.entity.data.customField.multipleEntities","tau/models/finder.entity/model.finder.entity.data.customField.multipleEntities.editable"],function(e,t,i,n,o){return i.extend({"bus afterInit":function(){this.fire("dataBind")},"bus beforeInit + afterRender":function(e,t,i){this.customField=t.config.customField,this.fire("customField.ready",this.customField),this._initFinder(i.element,this.customField)},_initFinder:function(t,i){i.options=(i.value||"").split("\n");var s={actionOnBlur:"destroy",target:t,className:"tau-bubble-lookup",componentsConfig:{components:[{type:"finder.entity",model:n,modelEditable:o,customField:i}]}};i.value&&(s.componentsConfig.components[0].$query={entityType:{id:{$in:e.asString(i.value).split("\r\n").join(",")}}}),this.fire("initBubble",s)}})});
define('tau/components/component.customField.multipleEntities.container',["Underscore","tau/components/component.container","tau/components/extensions/component.creator.extension","tau/components/extensions/bubble/extension.bubble.creator","tau/ui/extensions/customField/ui.extension.customField.multipleEntities.add.trigger"],function(e,t,i,n,o){return{create:function(l){var s={template:{name:"customField.multipleEntities.container",markup:['<div class="tau-container tau-list tau-list__group_flat_true">','<div class="ui-quick-add i-role-add-holder">',"</div>",'<div class="i-role-list-holder">',"</div>","</div>"]},layout:"selectable",children:[{type:"creator",selector:".i-role-add-holder",template:{name:"customField.multipleEntities.add.trigger",markup:['<span class="ui-link ui-quick-add-link i-role-add">Add Item</span>']},extensions:[i,n,o],customField:l.customField},{type:"customField.multipleEntities",selector:".i-role-list-holder",customField:l.customField}]};return t.create(e.extend(l,s))}}});
define('tau/ui/extensions/list/extension.list.prioritize',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(t,e,i){return i.extend({name:"extension.list.prioritize",category:"edit","bus afterRender":function(t){var i=t.data.element,a=this;this.$el=i,i.addClass("tau-list__sortable__true");var r=i.find("[role=group]");r.addClass("tau-list__group_sortable_true");var s={sensitivity:7,speed:12};this.config.context.configurator.getConfig("isPopup",!1)&&(s={sensitivity:20,speed:30}),r.addClass("tau-list__group_available_true"),r.sortable({scroll:!0,scrollSensitivity:s.sensitivity,scrollSpeed:s.speed,cursor:"move",connectWith:".tau-list__group_available_true[role=group]",items:".tau-list__list [role=item]",dropOnEmpty:!0,handle:"[role=sortable-handler]",forcePlaceholderSize:!0,placeholder:{element:function(){var t=e('<li class="tau-list__list__item tau-list__sortable-placeholder ui-sortable-placeholder"></li>');return t.height(50),t},update:function(){}},helper:function(t,e){var i=e;return i}});var l=function(){e(this).data("ui-sortable").refreshPositions()};i.mousedown(function(){r.bind("mousemove",l)}),i.mouseup(function(){r.unbind("mousemove",l)}),r.bind("sortstart",function(t,i){a.started=!0;var r=i.item,s=r.data("tmplItem").data||{},l=e(t.currentTarget);l.addClass("tau-list__group_sortover_true"),a.$group=l;var o=l.data("tmplItem")?l.data("tmplItem").data:{};a.fire("prioritize.start",{item:s,group:o})}),r.bind("sortstop",function(){r.addClass("tau-list__group_available_true"),r.removeClass("tau-list__group_available_false"),r.removeClass("tau-list__group_sortover_true")}),r.bind("sortupdate",function(t,i){if(a.started){a.started=!1;var r=i.item,s=r.prev("[role=item]"),l=r.next("[role=item]"),o=r.data("tmplItem").data||{},n=s.length?s.data("tmplItem").data:{},u=l.length?l.data("tmplItem").data:{},d=r.parents("[role=group]:first"),p=d.data("tmplItem")||null;p=p?p.data:null;var _=d.hasClass("tau-list__group_collapsed_true");d.addClass("i-target");var f=e(this),c=f.data("tmplItem")||null;c=c?c.data:null,a.fire("prioritize.checkAvailability",{$item:r,$prevGroup:f,$targetGroup:d,item:o,prev:n,next:u,group:p,prevGroup:c,isCollapsed:_})}}),r.bind("sortchange",function(){var t=r.find(".tau-list__sortable-placeholder").parents("[role=group]:first");1==t.length&&0==t.hasClass("tau-list__group_sortover_true")&&(r.removeClass("tau-list__group_sortover_true"),t.addClass("tau-list__group_sortover_true"))});var o=function(t,i,a,r){a?e(a[0]).find(".tau-list__list").append(this.placeholder[0]):i.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?i.item[0]:i.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var s=this,l=this.counter;window.setTimeout(function(){l==s.counter&&s.refreshPositions(!r)},0)};r.each(function(){var t=e(this);t.data("ui-sortable")._rearrange=o})},"bus prioritize.checkAvailability":function(){this.bus.fire("prioritize.isAvailable.default",{})},"bus prioritize.checkAvailability+prioritize.isNotAvailable":function(){this.bus.fire("refresh")},"bus prioritize.checkAvailability+prioritize.isAvailable.default+prioritize.isAvailable.comment":function(t){var e=t["prioritize.checkAvailability"].data;this.fire("positionUpdated",e)},"bus prioritize.updateGroupsAvailability":function(i){var a=i.data,r=a.groups,s=this.$el.find("[role=group]");if(s.length<=1||s.length==r.length)return s.addClass("tau-list__group_available_true").removeClass("tau-list__group_available_false"),void this.$group.sortable("refresh");var l=t.filter(s.toArray(),function(i){var a=e(i).data("tmplItem").data;return t.any(r,function(t){return a===t})}),o=e(l);s.addClass("tau-list__group_available_false").removeClass("tau-list__group_available_true"),o.removeClass("tau-list__group_available_false").addClass("tau-list__group_available_true"),this.$group.sortable("refresh")},"bus beforeUpdate":function(){this.$el.find(".i-target [role=counter]").css("backgroundColor","#ffefd5")},"bus afterUpdate":function(i){this.$el.find("[role=group]").each(function(){e(this).find("[role=counter]").text(e(this).find("[role=item]").length)}),this.$el.find(".i-target [role=counter]").animate({backgroundColor:"#ffffff"},200),this.$el.find(".i-target").removeClass("i-target");var a=i.data.changedItem,r=this.$el.find(".i-item-"+a.id),s=r.parents("[role=item]:first"),l=s.data("tmplItem").data;if(t.extend(l,a),this.$el.find("[role=group]").length>1){var o="tau-list__table__row_isfinalstate_true";l.entityState&&r.toggleClass(o,!!l.entityState.isFinal)}}})});
define('tau/ui/extensions/list/extension.list.prioritize.comment',["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/utils/utils.textConverter"],function(e,t,i,a){return i.extend({name:"extension.list.prioritize.comment","bus afterRender":function(e){this.$root=e.data.element,this.$el=e.data.element.find("[role=comment-form]")},"bus prioritize.updateGroupsCommentRequirements":function(t){var i=t.data.groups,a=this.$root.find("[role=group]");a.data("isCommentRequired",!1),e.forEach(i,function(e,t){a.eq(t).data("isCommentRequired",e.isCommentRequired)})},"bus prioritize.checkAvailability":function(t){var i=t.data.$targetGroup,a=t.data.$prevGroup;if(!i.data("isCommentRequired")||i[0]===a[0])return void this.fire("prioritize.isAvailable.comment");var n=t.data.$item;this.$item=n,this.item=t.data.item;var r=this.$el;r.removeClass("updating");var o=t.data.isCollapsed,s=!1;s=0==o?n.find("[role=sortable-handler]"):i.find("[role=title]"),n.tauBubble({showOnCreation:!0,alignTo:s}),r.detach(),n.tauBubble("widget").find("[role=content]").append(r),r.show(),n.tauBubble("show");var d=r.find("textarea");d.val("").focus();var l=r.find(":button"),u=l.eq(0);u.bind("click",e.bind(this._save,this));var c=l.eq(1);c.bind("click",e.bind(this._cancel,this)),n.bind("externalClose",e.bind(this._cancel,this));var m=function(){window.setTimeout(function(){var t=d.val()||"",i=0===e.trim(t).length;i?u.attr("disabled","disabled"):u.attr("disabled")&&u.removeAttr("disabled"),i?u.addClass("disable"):u.removeClass("disable")},50)};m(),u.bind("focus",m),d.bind("change keyup click propertychange paste",m)},_save:function(e){e.stopPropagation();var t=this,i=this.$el,n=new a,r=n.convert(i.find("textarea").val(),!0),o=t.config.store,s=t.item;i.addClass("updating"),o.save("comment",{$set:{description:r,general:{id:s.id}},$include:["id","description","createDate","parentId",{owner:["id","firstName","lastName"]}]}).done({success:function(){i.removeClass("updating"),t.fire("prioritize.isAvailable.comment"),t.$item.tauBubble("destroy")},failure:function(){t.fire("prioritize.isNotAvailable")}})},_cancel:function(){var e=this;this.$el.addClass("updating");var i=function(){e.fire("prioritize.isNotAvailable",{$item:e.$item}),e.$item.data("ui-tauBubble")&&e.$item.tauBubble("destroy")};t.fx.off===!0?i():setTimeout(i,50)}})});
define('tau/ui/templates/list_/ui.template.list',["tau/core/templates-factory"],function(t){var e={name:"list",markup:['<div class="tau-list">',"</div>"]};return t.register(e)});
define('tau/ui/extensions/list/extension.list.groups',["jQuery","tau/components/extensions/component.extension.base","tau/ui/templates/list_/ui.template.list"],function(e,t){return t.extend({name:"extension.list.groups","bus afterRender":function(t){var n=this,a=t.data.element;a.delegate("[role=expander]","click",function(t){var a=e(t.target);if(!a.is("a")&&!a.parent("a").length){var s=a.parents("[role=group]:first");s.toggleClass("tau-list__group_collapsed_true"),n.bus.fire("toggled")}})}})});
define('tau/ui/extensions/list/extension.list.overlay',["tau/components/extensions/component.extension.base","tau/ui/behaviour/overlay/ui.behaviour.overlay"],function(e){return e.extend({name:"extension.list.overlay",showOverlay:function(){if(this.element&&this.element.length){var e=this.element.data("ui-tau-overlay"),t=e?e.overlayCount||1:0;1>t&&(t=0,this.element.tauOverlay(),e=this.element.data("ui-tau-overlay")),e.overlayCount=++t}},hideOverlay:function(){if(this.element&&this.element.length){var e=this.element.data("ui-tau-overlay").overlayCount||1;1>=e?this.element.tauOverlay("hide"):this.element.data("ui-tau-overlay").overlayCount=--e}},"bus dataBind + afterRender":function(e,t,n){this.element=n.element.parent()},"bus beforeInit":function(){this.showOverlay()},"bus afterRender":function(){this.hideOverlay()}})});
define('tau/ui/extensions/list/extension.list.state',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(t,e,n){return n.extend({name:"extension.list.state",initialState:{},"bus beforeInit":function(){},"bus preDataBind":function(e){var n=e.data,a=this.stateManager=this.config.context.componentSettings||this.config.context.configurator.getStateManager(),i={};a.get({id:"list",fields:["state"],callback:function(t){i=t.state||{}}});var s=this;t.forEach(n.groups,function(e){var n=t.asString(e.key);s.initialState[n]=e.collapsed,t.isUndefined(i[n])||(e.collapsed=i[n])})},"bus afterInit+afterRender":function(t){this.$el=t.afterRender.data.element},"bus toggled":function(){var n=this.$el.find("[role=group]"),a={},i=this;n.each(function(){var n=e(this),s=n.hasClass("tau-list__group_collapsed_true"),o=n.data("tmplItem").data,r=t.asString(o.key);t.isUndefined(i.initialState[r])||i.initialState[r]===s||(a[r]=s)});{var s=this.stateManager;this.config.context.configurator}s.set({id:"list",set:{state:a},callback:function(){}})}})});
define('tau/ui/extensions/list/extension.list.handleAction',["Underscore","tau/components/extensions/component.extension.base"],function(e,t){return t.extend({name:"extension.list.handleAction",getRowElement:function(e,t){var n=e.find(".i-item-"+t);return n},"bus afterItemsProvided+afterRender+handleGlobalAction":function(t){var n=t.afterItemsProvided.data.data,a=t.handleGlobalAction.data.id,r=e(n).detect(function(e){return e.id==a});if(r){var i=t.afterRender.data.element,d=this.getRowElement(i,a);this.fire("markElementToBeUpdated",{element:d}),this.fire("updateElement",{element:d}),this.fire("refreshMainEntity")}},"bus afterRender+beforeDeleteRow":function(e){var t=e.afterRender.data.element,n=e.beforeDeleteRow.data.id,a=this.getRowElement(t,n);this.fire("markElementToBeDeleted",{element:a}),this.fire("deleteElement",{element:a,callback:$.noop})},"bus afterRender+afterDeleteRow":function(e){var t=this,n=e.afterRender.data.element,a=e.afterDeleteRow.data.id,r=this.getRowElement(n,a);this.fire("deleteElement",{element:r,callback:function(){t.fire("refresh")}})}})});
define('tau/ui/extensions/list/extension.list.handleAction.generator',["Underscore","tau/components/extensions/component.extension.base"],function(n,t){var e=function(t,e){var i=e.split(":"),o=t;return n(i).each(function(n){o=o[n]}),o};return function(n,i){return t.extend({name:"extension.list.handleAction.generator/"+n,init:function(){this._super.apply(this,arguments),this.bus.getGlobalBus().on(n,this.onGlobalAction,this)},destroy:function(){this.bus.getGlobalBus().removeListener(n,this.onGlobalAction,this),this._super.apply(this,arguments)},onGlobalAction:function(n){var t=e(n.data,i);this.fire("handleGlobalAction",{id:t})}})}});
define('tau/models/dataProviders/model.provider.groups.default',["Underscore","tau/models/dataProviders/model.provider.groups.base"],function(e,r){return r.extend({fetch:function(r,n,o){var t=[];return r?(e.forEach(n,function(n){var o=e.complexKey(n,r),d=e(t).any(function(e){return e.key===o});d||t.push({key:o,items:[]})}),void o(t)):void o(!1)}})});
define('tau/models/model.list',["Underscore","tau/core/model-base","tau/models/dataProviders/model.provider.groups.default"],function(e,t,i){var r=t.extend({name:"model.list",onInit:function(){var e=this;e.store.unbind(this);var t=new this.config.itemsDataProvider(this.config);t.fetch(function(t){e.fire("afterItemsProvided",{data:t})})},"bus afterItemsProvided":function(t){var r=this,o=null;o=this.config.groupsDataProvider?this.config.groupsDataProvider:i;var a=t.data.data,n=e.isArray(this.config.groupBy)?this.config.groupBy[0]:this.config.groupBy,s=new o(this.config);s.fetch(n,a,function(e){r.fireAfterGroupsProvided(e)})},fireAfterGroupsProvided:function(e){this.fire("afterGroupsProvided",{data:e})},createSubscription:function(e,t){var i=this;i.store.on({eventName:"beforeRemove",type:e,listener:i},function(e){var r=e.data.id;t(r)&&i.fire("beforeDeleteRow",{id:r})}),i.store.on({eventName:"afterRemove",type:e,listener:i},function(e){var r=e.data.id;t(r)&&i.fire("afterDeleteRow",{id:r})})},"bus afterItemsProvided+afterGroupsProvided":function(t){var i=this,r=t.afterItemsProvided.data.data,o=t.afterGroupsProvided.data.data;if(r&&r.length){var a=function(t){return e(r).detect(function(e){return e.id==t})};e(r).chain().map(function(e){return e.__type}).unique().each(function(e){i.createSubscription(e,a)})}var n={items:[],groups:[],isEmpty:r.length?!1:!0};o!==!1?n.groups=this.innerGroupBy(r,o):n.items=r,this.data=n,i.fire("afterDataProvided",{data:n})},"bus afterDataProvided":function(e){var t=this.preProcess(e.data.data);this.fire("preDataBind",t),this.fire("dataBind",t)},preProcess:function(t){var i=this.config.views[0];return e.forEach(t.groups,function(t){t.title||(t.title=e.isObject(t.key)?e.complexKey(t.key,i.group.dataIndex):t.key)}),t.config={views:this.config.views,currentView:i},t},innerGroupBy:function(t,i){var r=this.config.groupBy;return r=e.isArray(r)?r[0]:r,e.forEach(i,function(i){e.forEach(t,function(t){var o=e.complexKey(t,r);e.isArray(i.key)&&e.indexOf(i.key,o)>-1?i.items.push(t):e.isEqual(i.key,o)&&i.items.push(t)})}),i},"bus prioritize.start":function(t){var r=t.data.item,o=t.data.group,a=null;a=this.config.groupsDataProvider?this.config.groupsDataProvider:i;var n=new a(this.config),s=e.filter(this.data.groups,function(e){return n.isAvailableForItem(r,e,o)});this.fire("prioritize.updateGroupsAvailability",{groups:s});var u=n.getCommentRequirements(r,this.data.groups,o);this.fire("prioritize.updateGroupsCommentRequirements",{groups:u})}});return r});
define('tau/models/model.list.editable',["Underscore","tau/core/model.editable.base"],function(e,n){var i=n.extend({name:"model.list.editable",category:"edit","bus dataBind":function(){this.bus.fire("permissionsReady",{editable:!0,deletable:!0})},"bus positionUpdated":function(n){var i=n.data,t=this,a=[];0==i.isCollapsed&&a.push(function(e){var n=new t.config.itemsDataProvider(t.config);n.changePriority(i.item,i.prev,i.next,function(n){e(null,n)})}),i.group&&a.push(function(e){var n=new t.config.groupsDataProvider(t.config);n.moveToGroup(i.item,i.group,i.prevGroup,function(n){e(null,n)})}),t.fire("beforeUpdate"),1==i.isCollapsed?e.parallel(a,function(){t.fire("refresh")}):e.parallel(a,function(n,i){var a={};e.forEach(i,function(n){n&&e.extend(a,n.changed||{})}),t.fire("afterUpdate",{changedItem:a})})}});return i});
define('tau/views/view.list',["tau/core/view-base"],function(e){return e.extend({name:"view.list","bus initialize":function(e){var t=this.config.views[0];t.type=t.type||"grid";var i=["tau/ui/templates/list_/",t.type,"/ui.template.list.",t.type].join(""),n=this;requireSync([i],function(t){n.config.template=t,n.startLifeCycle(e)})}})});
define('tau/components/component.list',["Underscore","tau/components/component.creator","tau/ui/extensions/list/extension.list.prioritize","tau/ui/extensions/list/extension.list.prioritize.comment","tau/ui/extensions/list/extension.list.groups","tau/ui/extensions/list/extension.list.overlay","tau/ui/extensions/list/extension.list.state","tau/ui/extensions/ui.extension.tooltip","tau/ui/extensions/list/extension.list.handleAction","tau/ui/extensions/list/extension.list.handleAction.generator","tau/models/model.list","tau/models/model.list.editable","tau/views/view.list","tau/ui/extensions/list/external.refresh.extension"],function(e,t,i,s,n,o,a,l,u,r,c,p,m,x){return{create:function(d){d=d||{},d.views=d.views||[{}],e(d.views).each(function(e){e.emptyMessage=e.emptyMessage||"No items found",e.rowTemplateName=e.rowTemplateName||"list-grid-entity__row"});var y=d.views[0];y.type=y.type||"grid",d.multiprojects&&(y.multiprojects=d.multiprojects),y.timeTrackingPolicies=d.context.getTimeTrackingPolicies();var g=[p,n,o,a,l,x,u,r("bugWasMarkedAsDuplicate","duplicateBugId"),r("entityWasMovedToProject","entity:id"),r("entityWasCopiedToProject","entity:id")];d.sortable!==!1&&(g.push(i),g.push(s));var v={extensions:g.concat(d.extensions||[]),ModelType:c,ViewType:d.ViewType||m};return d.template&&(v.template=d.template),t.create(v,d)}}});
define('tau/models/dataProviders/customField/customField.multipleEntities.model.provider.entities.items',["Underscore","tau/models/dataProviders/model.provider.items.base"],function(e,t){return t.extend({fetch:function(t){var n=this.config.context.entity.id,i=this.config.context.entity.entityType.name.toLowerCase(),a=this.config.customField,r=this.config.store,s=this;r.get(i,{id:n,fields:["customFields"]}).done(function(n){var i=e.find(n[0].data.customFields,function(e){return e.name==a.name});if(null==i.value)return void t([]);var c=i.value.split(","),u=e.map(c,function(e){var t=e.split(" ");return{id:t[0],type:t[1]}}),o=e.uniq(e.map(u,function(e){return e.type})),d=e.uniq(e.map(u,function(e){return e.id})),f=e.map(o,function(e){return function(t){r.find(e,{fields:s._getFieldsForEntity(e),$query:{id:{$in:d}}}).done({success:function(e){t(!1,e[0].data)}})}});e.parallel(f,function(n,i){var a=[];e.reduce(i,function(e,t){return t.length>0&&e.push({type:t[0].__type,items:t}),e},a),a=e.sortBy(a,function(e){return e.items.length>0&&e.items[0].entityType.id}),t(s.transform(a))})})},_getFieldsForEntity:function(e){var t=["id","name",{entityType:["name"]},{project:["abbreviation"]}];switch(e.toLowerCase()){case"userstory":case"bug":case"feature":case"task":case"testplanrun":case"testcaserun":case"request":return t.concat([{entityState:["name","isFinal"]},{release:["name"]},{iteration:["name"]}]);case"project":case"release":case"program":return t.concat(["startDate","endDate"]);case"iteration":return t.concat(["startDate","endDate",{release:["name"]}]);case"build":return t.concat(["buildDate",{release:["name"]},{iteration:["name"]}]);case"impediment":return t.concat([{entityState:["name","isFinal"]}]);case"testcase":return t.concat(["lastStatus"]);default:return t}},transform:function(t){var n=[],i=0;e.reduce(t,function(t,n){return e.forEach(n.items,function(e){t.push(e),e.entityType.id>i&&(i=e.entityType.id)},this),t},n,this);var a=this;return n=e.map(n,function(e){return e.url=a.config.context.configurator.getUrlBuilder().getNewViewUrl(e.id,e.entityType.name,!0),e}),e.sortBy(n,function(e){return e.entityState&&e.entityState.isFinal?i+e.entityType.id:e.entityType.id})}})});
define('tau/ui/extensions/list.customField.multipleEntities/ui.extension.list.customField.multipleEntities',["Underscore","tau/core/extension.base"],function(e,t){return t.extend({"bus afterInit":function(e,t){this.store=t.config.context.configurator.getStore(),this.entity=t.config.context.entity,this._registerRefreshHandler(this.store,this.entity)},"bus afterInit + afterRender":function(e,t){this.customField=t.config.customField,this.fire("customField.ready",this.customField)},"bus afterInit:last + customField.ready + afterRender":function(e,t,i,n){var s=this;this._retrieveIdsForField(this.store,this.entity.id,this.entity.entityType.name,this.customField.name,function(e){var t=n.element.find(".i-role-remove");t.on("click",function(t){s._doDetach(t,e,s.store,s.customField,s.entity)})})},_doDetach:function(t,i,n,s,r){var o=$(t.currentTarget).attr("data-entity-id"),a=$(t.currentTarget).attr("data-entity-type").toLowerCase(),i=i;i=e.reject(i,function(e){return e==o+" "+a}).join(","),this._saveIds(n,r.id,r.entityType.name,s.name,i,function(){})},_saveIds:function(e,t,i,n,s,r){e.save(i,{id:t,$set:{customFields:[{name:n,value:s}]},fields:["id","customFields"]}).done(function(e){r&&r(e)})},_registerRefreshHandler:function(t,i){var n=this;t.unbind(this),t.on({eventName:"afterSave",type:i.entityType.name,listener:this,filter:{id:i.id},hasChanges:["customFields"]},function(t){var i=e.find(t.data.changes.customFields,function(e){return e.name==n.customField.name});i&&n.fire("refresh")})},_retrieveIdsForField:function(t,i,n,s,r){t.get(n,{id:i,fields:["customFields"]}).done(function(t){var i=e.find(t[0].data.customFields,function(e){return e.name==s}),n=null!=i.value?i.value.split(","):[];r(n)})}})});
define('tau/ui/templates/list_/customField.multipleEntities/ui.template.list.customField.multipleEntities',["tau/core/templates-factory","tau/utils/utils.date"],function(t,e){var i={name:"list.customField.multipleEntities",engine:"jqote2",customFunctions:{dateToString:function(t){return e.format.date.short(e.convertToTimezone(t))}},markup:["<% if (this.items.length == 0) { %>",'<div class="tau-list__empty-message">No items.</div>',"<% } else { %>",'<table class="tau-list__table tau-list__list" role="list">',"<tbody>","<% _.forEach(this.items, function(item) { %>",'<tr class="i-item-<%= item.id %> tau-list__table__row<% if (item.entityState && item.entityState.isFinal) { %> tau-list__table__row_isfinalstate_true<% }; %>" role="item">','<td class="tau-list__table__cell tau-list__table__cell-id tau-list__list__item" >','<a href="<%= item.url %>"><em class="ui-type-icon ui-type-icon-<%= item.__type.toLowerCase() %>"><%= item.id %></em></a>',"</td>",'<td class="tau-list__table__cell tau-list__table__cell-name tau-list__table__cell-padding  tau-list__list__item" width="30%"><%= item.name %></td>','<td class="tau-list__table__cell tau-list__list__item"><%= item.project ? item.project.abbreviation : "" %></td>','<td class="tau-list__table__cell tau-list__list__item">',"<% if (item.entityState) { %>",'<div runas="property.entityState" data-context:general:id="<%= item.id %>" data-context:general:entity-type:name="<%=item.__type %>"><%= item.entityState.name %></div>','<% } else if (item.hasOwnProperty("lastStatus")) { %>','<div runas="property.lastStatus" data-context:general:id="<%= item.id%>" data-context:general:entity-type:name="<%= item.__type %>"><%= item.lastStatus %></div>',"<% }; %>","</td>",'<td class="tau-list__table__cell tau-list__list__item"><%= item.release ? item.release.name : "" %></td>','<td class="tau-list__table__cell tau-list__list__item"><%= item.iteration ? item.iteration.name : "" %></td>','<td class="tau-list__table__cell tau-list__list__item"><%= item.buildDate ? fn.dateToString(item.buildDate) : fn.dateToString(item.startDate) %></td>','<td class="tau-list__table__cell tau-list__list__item"><%= fn.dateToString(item.endDate) %></td>','<td class="tau-list__table__cell tau-list__list__item">',"<% if (item.assignments && item.assignments.length) { _.forEach(item.assignments, function(assignment){ %>",'<span class="ui-assignment__group__users">','<span class="ui-assignment__user user tau-avatar_<%= assignment.generalUser.id %> tau-bubble-target" userid="<%= assignment.generalUser.id %>">','<img class="user-name ui-link" title="<%= assignment.generalUser.firstName %> <%= assignment.generalUser.lastName %>" alt="<%= assignment.generalUser.firstName %> <%= assignment.generalUser.lastName %>" style="width:24px; height:24px;" src="<%= assignment.generalUser.avatarUri %>32">',"</span>","</span>","<% }); } %>","</td>",'<td class="tau-list__table__cell tau-list__table__cell-remove tau-list__list__item">','<button type="button" class="tau-btn tau-attention i-role-remove" data-entity-type="<%= item.__type.toLowerCase() %>" data-entity-id="<%= item.id %>">Remove</button>',"</td>",'<td width="1"></td>',"</tr>","<% }); %>","</tbody>","</table>","<% } %>"]};return t.register(i)});
define('tau/components/component.customField.multipleEntities',["Underscore","tau/components/component.list","tau/views/view.compositeControl","tau/models/dataProviders/customField/customField.multipleEntities.model.provider.entities.items","tau/ui/extensions/list/request/extension.list.entityState","tau/ui/extensions/list.customField.multipleEntities/ui.extension.list.customField.multipleEntities","tau/ui/templates/list_/customField.multipleEntities/ui.template.list.customField.multipleEntities"],function(t,e,i,s,n,l,o){return{create:function(u){return u=t.extend(u,{itemsDataProvider:s,extensions:[n,l],template:o,ViewType:i,dependencies:["property.lastStatus","property.entityState"]}),e.create(u)}}});
define('tau/models/customField/model.customField.multiselect.editable',["Underscore","tau/models/customField/model.customField.editable"],function(e,t){var i=t.extend({onInit:function(){if(this.config.data){var t=this.config.data.value,i=[];e.map(this.config.data.options,function(n){i.push({id:n,name:n,selected:e.include(t,n)})}),this.fire("dataBind",{states:i})}},"bus beforeInit:last + updateState":function(t,i,n){var a=null;n&&n.id&&(a=n.id);var o={customFields:[{name:i.config.customField.name,type:i.config.customField.type,value:e.toArray(a).join(",")}]};this.fire("save",o)}});return i});
define('tau/components/extensions/customField/extension.customField.multiselect.editable',["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/behaviour/customField/ui.behaviour.customField.row"],function(e,i,t){return t.extend({category:"edit","bus permissionsReady+afterRender":function(e){var i=(e.afterRender.data.data,e.permissionsReady.data);if(i.editable){var t=e.afterRender.data.element,a=t.find(".ui-customfield__value");this.$widget=a,t.find(".ui-customfield__label").behaviourCustomFieldRow({}),t.addClass("ui-customfield_editable_true")}}})});
define('tau/ui/extensions/customField/ui.extension.customField.editable.multiselect',["Underscore","tau/core/extension.base","tau/models/customField/model.customField.entity.editable","tau/models/finder.entity/model.finder.entity.data.customField.entity"],function(e,t){return t.extend({"bus beforeInit + configurationProvided + afterRender":function(t,i,n,o){var r=i.customField,d=o.element.find("tr"),u=e.deepClone(n),a=o.view,c=this._createFinderConfig(u,r,n);this._initBubbleWithFinder(d,a,c),d.on("click",".i-role-reset",e.bind(function(){return this.fire("updateState",{}),!1},this))},_createFinderConfig:function(e){return{type:"customField.multiselect.list",customField:e,data:e}},_initBubbleWithFinder:function(e,t,i){e.addClass("tau-bubble-target ui-customfield_editable_true");var n={target:e,alignTo:e.find(".ui-customfield__valuelink"),onShow:function(){t.config.context.configurator.getKeyBoardManager().pushHandler({})},onHide:function(){t.config.context.configurator.getKeyBoardManager().popHandler()},componentsConfig:{components:[i]}};this.fire("initBubble",n)}})});
define('tau/ui/templates/customField/ui.template.customField.multiselect',["tau/core/templates-factory"],function(t){var e={name:"customField-multiselect",engine:"jqote2",markup:['<% var className = this.output ? "" : "ui-customfield_empty_true"; %>','<div class="ui-customfield ui-customfield-multiselect <%= className %>">',"<table>","<tbody>","<tr>",'<td class="ui-customfield__label"><%= this.name %></td>','<td class="ui_custom_field_value_container">','<div class="ui-customfield__value ui-customfield__value_margin_right"><%! this.output %></div>',"<% if (this.actionReset && this.actionReset.enable) { %>",'<% var title = this.actionReset.label || "reset"; %>','<span class="i-role-reset tau-clear-filter tau-clear-filter_margin_left" title="<%! title %>"></span>',"<% } %>","</td>","</tr>","</tbody>","</table>","</div>"]};return t.register(e)});
define('tau/components/component.customField.multiselect',["Underscore","tau/components/component.creator","tau/models/customField/model.customField","tau/models/customField/model.customField.editable","tau/models/customField/model.customField.multiselect.editable","tau/ui/extensions/customField/ui.extension.customField.required","tau/components/extensions/bubble/extension.bubble.creator","tau/components/extensions/component.creator.extension","tau/components/extensions/customField/extension.customField.multiselect.editable","tau/ui/extensions/customField/ui.extension.customField.editable","tau/ui/extensions/customField/ui.extension.customField.editable.multiselect","tau/ui/templates/customField/ui.template.customField.multiselect"],function(e,t,o,i,s,n,u,l,m,c,d,a){return{create:function(e){var i={ModelType:o,extensions:[s,n,m,c,l,u,d],template:a};return t.create(i,e)}}});
define('tau/ui/extensions/choice/ui.extension.choice.editable.multiselect',["Underscore","jQuery","tau/ui/extensions/choice/ui.extension.choice.editable"],function(e,t,i){return i.extend({"bus dataBind+afterRender":function(i){this._super(i);var a=i.afterRender.data.element;this.$el=a,this.field=this.config.data,this._updateSave();var n=a.find("[role=action-save]"),d=this;n.click(function(){var i=a.find("[role=option].tau-option_selected_true"),n=[];e.forEach(i,function(e){n.push(t(e).tmplItem().data.id)}),d._updateState(n)});var s=a.find("[role=action-cancel]");s.click(function(){d.fire("close")})},"bus blur":function(){this.bus.fire("close")},onItemSelected:function(e){var i=t(e.target);i.toggleClass("tau-option_selected_true"),this._updateSave()},_updateSave:function(){if(1==this.field.required){this.enabled=this.enabled||null;var e=this.$el.find("[role=option].tau-option_selected_true"),t=this.$el.find("[role=action-save]");e.length?(t.removeClass("disable"),t.removeAttr("disabled")):(t.addClass("disable"),t.attr("disabled","disabled"))}}})});
define('tau/ui/templates/choice/ui.template.choice.option.multiselect',["tau/core/templates-factory"],function(t){var e={name:"state.option.multiselect",markup:["{{if items}}",'<div class="drop-down-group i-group">','<span class="i-group-name">${name}</span>','{{tmpl(items) "state.option.multiselect"}}',"</div>","{{else}}",'<div role="option" data-id="${id}" class="i-role-option drop-down-option tau-option{{if selected}} tau-option_selected_true{{/if}}" {{if description}}title="${description}"{{/if}}>',"${name}","</div>","{{/if}}"]};return t.register(e)});
define('tau/ui/templates/choice/ui.template.choice.list.multiselect',["tau/core/templates-factory","tau/ui/templates/choice/ui.template.choice.option.multiselect"],function(t){var e={name:"state.list.multiselect",markup:['<div class="ui-drop-down">',"{{if states.length}}",'<div role="list" class="drop-down-list drop-down-list_type_multiselect">','<div class="drop-down-list__inner i-inner">','{{tmpl(states) "state.option.multiselect"}}',"</div>","</div>",'<div class="ui-drop-down__actions ui-form__row ui-form__row-controls button-group">','<input type="button" role="action-save" class="button" value="Save" />','<input type="button" role="action-cancel" class="button" value="Cancel" />',"</div>","{{else}}",'<div class="drop-down-list drop-down-list_type_multiselect">','<div role="placeholder-empty">No items found</div>',"</div>","{{/if}}","</div>"]};return t.register(e)});
define('tau/components/component.customField.multiselect.list',["tau/components/component.creator","tau/models/customField/model.customField","tau/models/customField/model.customField.multiselect.editable","tau/ui/extensions/choice/ui.extension.choice.editable.multiselect","tau/ui/extensions/bubble/ui.extension.bubble.listResizer","tau/ui/templates/choice/ui.template.choice.list.multiselect"],function(e,t,i,u,o,l){return{create:function(c){var s={extensions:[t,i,u,o],template:l};return e.create(s,c)}}});
define('tau/models/customField/model.customField.number.editable',["Underscore","tau/models/customField/model.customField.editable","tau/utils/utils.jsonSchema"],function(e,t,a){var i=t.extend({category:"edit",name:"Editable custom field",schema:a.Schema.create({type:"object",properties:{value:{type:"number",optional:!1,minimum:0,maximum:e.MAX_INT,minimumCanEqual:!0,pre:["trim","castTolerantlyToType"],"default":0,fallbacks:{type:"setDefault"}}}}),"bus validate":function(e){{var t=e.data,a=t.cmd.$set.customFields[0];a.value+"",this.config.context.applicationContext.culture.decimalSeparator}a.value=a.value.toString().replace(",","."),this.schema.properties.value.optional=!this.config.customField.required,this.schema.properties.value.empty=!this.config.customField.empty,t.validation=this.schema.validate(a)},"bus beforeSave":function(t){var a=t.data.cmd.$set.customFields[0].value;t.data.cmd.$set.customFields[0].value=e.isNumber(a)?a:null}});return i});
define('tau/components/extensions/customField/extension.customField.number.editable',["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/behaviour/common/ui.behaviour.editableText","tau/ui/behaviour/customField/ui.behaviour.customField.row"],function(e,t,a){return a.extend({category:"edit",$widget:null,fieldData:null,"bus permissionsReady+afterRender":function(e){var t=this.config.context.applicationContext.culture.decimalSeparator,a=this,i=e.afterRender.data.data,n=e.permissionsReady.data;if(n.editable){var o=e.afterRender.data.element,d=o.find(".ui-customfield__value");a.$widget=d;var u="^[0-9]*(["+t+"][0-9]{0,2})?$";d.editableText({mask:u,restoreText:!1,onSave:function(e){a.bus.fire("save",{customFields:[{name:i.name,type:i.type,value:e.replace(",",".")}]})}}),o.behaviourCustomFieldRow({onActivate:function(){d.editableText("activate"),d.focus()}}),o.addClass("ui-customfield_editable_true")}},"bus validate":function(){this.$widget.editableText("resetValidationErrors")},"bus afterValidate":function(e){this.$widget.editableText("setValue",e.data.validation.instance.value)},"bus validationFailed":function(e){this.$widget.editableText("setValidationErrors",e.data.validation.errors[0].description)}})});
define('tau/ui/templates/customField/ui.template.customField.text',["tau/core/templates-factory"],function(t){var e={name:"customField-text",markup:['<div class="ui-customfield  {{if !value}}ui-customfield_empty_true{{/if}}">',"   <table>","   <tbody>","   <tr>",'       <td class="ui-customfield__label">${name}</td>','       <td class="ui_custom_field_value_container"><div class="ui-customfield__value">${value}</div></td>',"   </tr>","   </tbody>","   </table>","</div>"]};return t.register(e)});
define('tau/components/component.customField.number',["tau/components/component.creator","tau/models/customField/model.customField","tau/models/customField/model.customField.number.editable","tau/ui/extensions/customField/ui.extension.customField.required","tau/components/extensions/customField/extension.customField.number.editable","tau/ui/extensions/customField/ui.extension.customField.editable","tau/ui/templates/customField/ui.template.customField.text"],function(e,t,o,i,u,n,s){return{create:function(m){var l={ModelType:t,template:s,extensions:[o,u,i,n]};return e.create(l,m)}}});
define('tau/models/customField/model.customField.richtext.editable',["tau/models/customField/model.customField.editable","tau/utils/utils.jsonSchema","tau/utils/utils.htmlConverter"],function(e,t,i){var a=e.extend({category:"edit",name:"Editable custom field",schema:t.Schema.create({type:"object",properties:{value:{optional:!0,empty:!0,maxLength:4e3,type:"string",pre:["trim"]}}}),"bus save":function(e){var t=this,a=t.config.context?t.config.context.entity:{},o=e.data||{},r=o.$set||o,d=o.$include,n=o.hasOwnProperty("id")?o.id:a.id,s=o.typeName||a.entityType.name,l={$set:r,fields:d};n&&(l.id=n);var c={type:s,cmd:l,validation:{isValid:!0,isError:function(){return!1}}},m=c.cmd.$set.customFields[0];if(c.validation=this.schema.validate(m),t.fire("afterValidate",c),c.validation.isValid===!1||c.validation.isError&&1==c.validation.isError())return void this.fire("validationFailed",c);t.fire("beforeSave",c);var u=c.cmd.$set,f=u.customFields[0];f.value=i.fromHtmlToSource(f.value),t.store.save(s,l,{success:function(e){t.fire("afterSave",{type:e.command.type,cmd:l})},failure:function(e){t.fire("saveFailed",{data:e,type:e.command.type,cmd:l})}}).done()}});return a});
define('tau/components/extensions/customField/extension.customField.richtext.editable',["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/behaviour/common/ui.behaviour.richeditor"],function(e,t,i){return i.extend({category:"edit",resetLifecycle:!0,"bus beforeInit:last + dataBind:last + submitted":function(e,t,i,n){var o=t.config.context.entity;t.config.context.configurator.getStore().evictProperties(o.id,o.entityType.name,["customFields"]);var a={customFields:[{name:i.name,type:i.type,value:n}]};this.fire("save",a),this.fire("allow.close.editor")},"bus beforeInit + permissionsReady + dataBind + afterRender":function(t,i,n,o,a){if(n.editable){var r=i.config.context.configurator,c=a.element,s=c.find(".i-role-property");s.attr("data-placeholder","Double-click to add content..."),this.$widget=s;var d=e.bind(this.fire,this),u="richeditor";s[u]({ckPath:r.getCkPath(),text:o.value,settings:{toolbar:"Full",extraPlugins:"charcount",charcount_limit:4e3,height:"auto",maxHeight:8e3},onCreate:function(){this.active=!0,d("$editor.ready",s)},onHide:function(){this.active=!1},onCancel:function(){s[u]("hide"),d("allow.close.editor")},onSave:function(e){d("submitted",e)}})}}})});
define('tau/ui/extensions/customField/ui.extension.customField.richText.editable',["./ui.extension.customField.editable"],function(e){var t=e.extend({"bus preRefreshRow + allow.close.editor":function(){this._markElementAsUpdate()},"bus preRefreshRow":function(){},"bus allow.close.editor > afterSave":function(){this._refreshElement()},"bus refreshRow":function(){this.element.find(".i-role-property").richeditor("option","active")||this._refreshElement()}});return t});
define('tau/components/extensions/property/extension.property.richtext.autosave',["Underscore","jQuery","tau/core/extension.base"],function(e,t,a){var i="Saving...";return a.extend({category:"edit",resetLifecycle:!0,autoSaveDelay:5e3,"bus beforeInit":function(e,t){this.fire("options.ready",this._extractOptions(t.config.options,{richeditor:"richeditor"}))},"bus options.ready:last + $editor.ready":function(t,a,o){var s=a.richeditor;o[s]("setStatus",""),o[s]("enableSaveButton"),o.on(s.toLowerCase()+"change.autosave",function(){o[s]("getStatus")!=i&&o[s]("setStatus","")}),o.on(s.toLowerCase()+"change.autosave",e.debounce(e.bind(function(){if(o.data("ui-"+s)){var e=o[s]("getText");"string"==typeof e&&(o[s]("setStatus",i),o[s]("disableSaveButton"),this.fire("submitted.auto",e))}},this),this.autoSaveDelay))},"bus beforeInit:last + submitted.auto":function(e,t,a){var i={};if(t.config.fieldName)i[t.config.fieldName]=a;else{var o=t.config.customField;i={customFields:[{name:o.name,type:o.type,value:a}]}}this.fire("save",i)},"bus submitted.auto > afterSave":function(){this.fire("autosave.completed")},"bus submitted.auto > validationFailed":function(e,t,a){this.fire("autosave.failed",a.validation.errors[0].description)},"bus options.ready:last + $editor.ready:last + autosave.completed":function(e,t,a){var i=t.richeditor;a[i]("setStatus","All changes saved"),a[i]("enableSaveButton")},"bus options.ready:last + $editor.ready:last + autosave.failed":function(e,t,a,i){var o=t.richeditor;a[o]("setStatus",i),a[o]("disableSaveButton")}})});
define('tau/ui/templates/property/ui.template.property.richtext',["tau/core/templates-factory"],function(e){var i={name:"property.richtext",engine:"jqote2",markup:['<div class="ui-description tau-clientinput <% if (!this.value){ %>ui-field_empty_true<% } %>">','<div class="ui-description__inner i-role-property" data-placeholder="Double-click to add description...">',"<%= this.value %>","</div>","</div>"]};return e.register(i)});
define('tau/components/component.customField.richtext',["tau/components/component.creator","tau/models/customField/model.customField","tau/models/customField/model.customField.richtext.editable","tau/components/extensions/customField/extension.customField.richtext.editable","tau/ui/extensions/customField/ui.extension.customField.richText.editable","tau/components/extensions/property/extension.property.richtext.autosave","tau/ui/extensions/content/ui.extension.content.shortcutProcessor","tau/ui/extensions/content/ui.extension.content.imagePreview","tau/ui/templates/property/ui.template.property.richtext"],function(e,t,o,n,i,s,r,u,c){return{create:function(a){a=a||{},a.queuedBus=!0;var l={queuedBus:!0,extensions:[t,o,n,i,s,r,u],template:c};return a.shortcutProcessorTarget=".i-role-property",a.imagePreviewContentSelector=".i-role-property",e.create(l,a)}}});
define('tau/models/customField/model.customField.templatedurl.editable',["tau/models/customField/model.customField.editable","tau/utils/utils.jsonSchema"],function(e,t){var i=e.extend({category:"edit",name:"Editable custom field",schema:t.Schema.create({type:"object",properties:{value:{type:"string",optional:!0,maxLength:4e3,minLength:0,pre:["trim"]}}}),"bus validate":function(e){var t=e.data,i=t.cmd.$set.customFields[0];this.schema.properties.value.optional=!this.config.customField.required,this.schema.properties.value.empty=!this.config.customField.required,t.validation=this.schema.validate(i)}});return i});
define('tau/components/extensions/customField/extension.customField.templatedurl.editable',["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/behaviour/common/ui.behaviour.editableText","tau/ui/behaviour/customField/ui.behaviour.customField.row"],function(e,t,i){return i.extend({category:"edit","bus permissionsReady+afterRender":function(e){var t=this,i=e.afterRender.data.data,a=e.permissionsReady.data;if(a.editable){var n=e.afterRender.data.element,o=n.find(".ui-customfield__value");t.$widget=o;var d;o.editableText({onEditStart:function(){d=o.children().detach(),o.text(""),o.hasClass("ui-validationerror")||o.text(o.data("textEdit"))},onEditEnd:function(){o.hasClass("ui-validationerror")||o.html(d)},restoreText:!1,onSave:function(e){t.bus.fire("save",{customFields:[{name:i.name,type:i.type,value:e}]})}}),o.on("click","a",function(e){e.stopImmediatePropagation()}),n.behaviourCustomFieldRow({onActivate:function(){o.editableText("activate"),o.focus()}}),n.addClass("ui-customfield_editable_true")}},"bus validate":function(){this.$widget.editableText("resetValidationErrors")},"bus afterValidate":function(e){this.$widget.editableText("setValue",e.data.validation.instance.value)},"bus validationFailed":function(e){this.$widget.editableText("setValidationErrors",e.data.validation.errors[0].description)}})});
define('tau/ui/templates/customField/ui.template.customField.templatedurl',["tau/core/templates-factory"],function(t){var e={name:"customField-templatedUrl",engine:"jqote2",markup:['<div class="ui-customfield ui-customfield-templatedUrl <% if (this.isEmpty){ %>ui-customfield_empty_true<% } %>">',"<table>","<tbody>","<tr>",'<td class="ui-customfield__label"><%! this.name %></td>','<td class="ui_custom_field_value_container">','<div class="ui-customfield__value" data-text-edit="<%= this.value %>">',"<% _.forEach(this.output, function(v, i){ %>",'<a class="tau-linkentity tau-linkentity_type_full" title="<%! v.title %>" href="<%= v.url %>" target="_blank">','<span class="tau-linkentity__inner"><%! v.title %></span>','<span class="external-view"></span>',"</a>","<% }); %>","</div>","</td>","</tr>","</tbody>","</table>","</div>"]};return t.register(e)});
define('tau/components/component.customField.templatedurl',["Underscore","tau/components/component.creator","tau/models/customField/model.customField","tau/models/customField/model.customField.templatedurl.editable","tau/ui/extensions/customField/ui.extension.customField.editable","tau/ui/extensions/customField/ui.extension.customField.required","tau/components/extensions/customField/extension.customField.templatedurl.editable","tau/ui/templates/customField/ui.template.customField.templatedurl"],function(e,t,o,u,i,s,l,n){return{create:function(e){var d={extensions:[o,u,i,s,l],template:n};return t.create(d,e)}}});
define('tau/models/customField/model.customField.text.editable',["tau/models/customField/model.customField.editable","tau/utils/utils.jsonSchema"],function(e,t){var i=e.extend({category:"edit",name:"Editable custom field",schema:t.Schema.create({type:"object",properties:{value:{type:"string",optional:!0,maxLength:4e3,minLength:0,pre:["trim"]}}}),"bus validate":function(e){var t=e.data,i=t.cmd.$set.customFields[0];this.schema.properties.value.optional=!this.config.customField.required,this.schema.properties.value.empty=!this.config.customField.required,t.validation=this.schema.validate(i)}});return i});
define('tau/components/extensions/customField/extension.customField.text.editable',["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/behaviour/common/ui.behaviour.editableText","tau/ui/behaviour/customField/ui.behaviour.customField.row"],function(e,t,i){return i.extend({category:"edit","bus permissionsReady+afterRender":function(e){var t=this,i=e.afterRender.data.data,a=e.permissionsReady.data;if(a.editable){var n=e.afterRender.data.element,d=n.find(".ui-customfield__value");t.$widget=d,d.editableText({restoreText:!1,onSave:function(e){t.bus.fire("save",{customFields:[{name:i.name,type:i.type,value:e}]})}}),n.behaviourCustomFieldRow({onActivate:function(){d.editableText("activate"),d.focus()}}),n.addClass("ui-customfield_editable_true")}},"bus validate":function(){this.$widget.editableText("resetValidationErrors")},"bus afterValidate":function(e){this.$widget.editableText("setValue",e.data.validation.instance.value)},"bus validationFailed":function(e){this.$widget.editableText("setValidationErrors",e.data.validation.errors[0].description)}})});
define('tau/components/component.customField.text',["tau/components/component.creator","tau/models/customField/model.customField","tau/models/customField/model.customField.text.editable","tau/ui/extensions/customField/ui.extension.customField.required","tau/components/extensions/customField/extension.customField.text.editable","tau/ui/extensions/customField/ui.extension.customField.editable","tau/ui/templates/customField/ui.template.customField.text"],function(e,t,o,i,u,s,n){return{create:function(l){var d={ModelType:t,template:n,extensions:[o,i,u,s]};return e.create(d,l)}}});
define('tau/models/customField/model.customField.url.editable',["tau/models/customField/model.customField.editable","tau/utils/utils.jsonSchema"],function(e,t){var i=e.extend({category:"edit",name:"Editable custom field",schema:t.Schema.create({type:"object",properties:{value:{type:"object",optional:!1,pre:function(e){var t=!!_.trim(e.label)||!!_.trim(e.url);return this.schema.properties.label.optional=this.schema.properties.label.optional&&!t,this.schema.properties.label.empty=this.schema.properties.label.empty&&!t,this.schema.properties.url.optional=this.schema.properties.url.optional&&!t,this.schema.properties.url.empty=this.schema.properties.url.empty&&!t,e},properties:{label:{type:"string",optional:!0,maxLength:30,pre:["trim"]},url:{type:"string",optional:!0,pattern:t.PATTERN_URL,pre:["trim",function(e){return 0==e.length&&this.schema.optional&&(this._wasError=1),e}]}},post:function(e){return e.label||e.url||(e={label:null,url:null}),e}}}}),"bus validate":function(e){var t=e.data,i=t.cmd.$set.customFields[0],r=this.config.customField||this.config.data;this.schema.properties.value.properties.label.optional=!r.required,this.schema.properties.value.properties.label.empty=!r.required,this.schema.properties.value.properties.url.optional=!r.required,this.schema.properties.value.properties.url.empty=!r.required,t.validation=this.schema.validate(i),delete t.validation.instance.value.__id}});return i});
define('tau/models/customField/model.customField.url.editable.editor',["tau/models/customField/model.customField.url.editable"],function(e){var t=e.extend({onInit:function(){this.beforeSaveHandler=!0,this.afterSaveHandler=!0,this.config.data&&this.fire("dataBind",this.config.data)}});return t});
define('tau/ui/behaviour/customField/ui.behaviour.customField.url.editor',["Underscore","jQuery"],function(e,n){n.widget("ui.behaviourUrlEditor",{options:{onSave:n.noop},_create:function(){var n=this.element;this.$element=n;var t=this;n.find(":button:first").click(function(n){n.preventDefault(),e.bind(t._save,t)()}),n.find(":input").keyup(function(n){n.keyCode==jQuery.ui.keyCode.ENTER&&(n.preventDefault(),e.bind(t._save,t)())})},_save:function(){var e=this.element;this.options.onSave({url:e.find("[name=url]").val(),label:e.find("[name=label]").val()})},setValidationErrors:function(n){var t=this.$element;e.each(n,function(e,n){t.find("[name="+n+"]").addClass("ui-validationerror").attr("title",e)})},resetValidationErrors:function(){this.$element.find(":text").removeClass("ui-validationerror").attr("title",null)},setValue:function(n){var t=this.$element;e.each(n,function(e,n){t.find("[name="+n+"]").val(e)})},destroy:function(){}})});
define('tau/components/extensions/customField/extension.customField.url.editor',["Underscore","jQuery","tau/core/extension.base","tau/ui/behaviour/customField/ui.behaviour.customField.url.editor"],function(e,a,i){return i.extend({category:"edit","bus dataBind+afterRender":function(e){var a=this,i=e.dataBind.data,t=e.afterRender.data.element;this.$widget=t,t.find("[name=url]").val(i.value.url),t.find("[name=label]").val(i.value.label),t.behaviourUrlEditor({onSave:function(e){a.bus.fire("save",{customFields:[{name:i.name,type:"URL",value:e}]})}}),t.find(":button:eq(1)").click(function(){a.bus.fire("close")})},"bus validate":function(){this.$widget.behaviourUrlEditor("resetValidationErrors")},"bus afterValidate":function(e){this.$widget.behaviourUrlEditor("setValue",e.data.validation.instance.value)},"bus validationFailed":function(a){var i={};e.each(a.data.validation.errors,function(a){e.each(["url","label"],function(t){-1!==e.indexOf(a.path,t)&&(i[t]=a.description)})}),this.$widget.behaviourUrlEditor("setValidationErrors",i)}})});
define('tau/ui/templates/customField/ui.template.customField.url.editor',["tau/core/templates-factory"],function(t){var e={name:"customField-url-editor",markup:['<div class="ui-form">','   <div class="ui-form__row"><label for="url">Url</label><input type="text" name="url" /></div>','   <div class="ui-form__row"><label for="label">Description</label><input type="text" name="label" /></div>','   <div class="ui-form__row ui-form__row-controls button-group"><input type="button" value="save" class="button" /><input type="button" value="cancel" class="button" /></div>',"</div>"]};return t.register(e)});
define('tau/components/component.customField.url.editor',["tau/components/component.creator","tau/models/customField/model.customField","tau/models/customField/model.customField.url.editable.editor","tau/components/extensions/customField/extension.customField.url.editor","tau/ui/templates/customField/ui.template.customField.url.editor"],function(e,t,o,u,i){return{create:function(l){var n={extensions:[t,o,u],template:i};return e.create(n,l)}}});
define('tau/models/customField/model.customField.url.editable.row',["tau/models/customField/model.customField.url.editable"],function(e){var t=e.extend({onInit:function(){{var e=this.config.context;e.entity.entityType.name}},"bus afterSaveToStore":function(){this.bus.fire("refreshRow",{})}});return t});
define('tau/ui/templates/customField/ui.template.customField.url',["tau/core/templates-factory"],function(e){var l={name:"customField-url",markup:['<div class="ui-customfield ui-customfield-url {{if !value.url}}ui-customfield_empty_true{{/if}}">',"   <table>","   <tbody>","   <tr>",'       <td class="ui-customfield__label">${name}</td>','       <td class="ui_custom_field_value_container">',"       {{if value.label}}",'           <a class="tau-linkentity tau-linkentity_type_full" href="${value.url}" title="${value.label}" target="_blank">','               <span class="tau-linkentity__inner">${value.label}</span>','               <span class="external-view"></span>',"           </a>","      {{/if}}","       </td>","   </tr>","   </tbody>","   </table>","</div>"]};return e.register(l)});
define('tau/components/component.customField.url',["Underscore","tau/components/component.creator","tau/models/customField/model.customField","tau/ui/extensions/customField/ui.extension.customField.required","tau/models/customField/model.customField.url.editable.row","tau/components/extensions/customField/extension.customField.url.editable","tau/ui/extensions/customField/ui.extension.customField.editable","tau/components/extensions/bubble/extension.bubble.creator.direct","tau/components/extensions/component.creator.extension","tau/ui/templates/customField/ui.template.customField.url"],function(e,t,o,n,i,u,s,c,l,m){return{create:function(e){var r={extensions:[o,n,i,u,s,l,{type:c,config:{popupEditorContainer:[{target:"tr",alignTo:".ui-customfield__value",componentsConfig:{components:[{type:"customField.url.editor"}]}}]}}],template:m};return t.create(r,e)}}});
define('tau/models/model.property.richtext',["Underscore","tau/core/extension.base.stateful","tau/utils/utils.htmlConverter"],function(e,t,n){var i=t.extend({onInit:function(t){var i=this,a=t.context.entity,r=this.store,s=t.fieldName,o=a.entityType.name,d=a.id;r.unbind(i);var f=function(e,t){if(t.data.id==d){var n=t.data.changes;n.hasOwnProperty(s)&&i.fire(e,n)}};r.on({eventName:"beforeSave",type:o,listener:this},e.bind(f,this,"prepareChanges")).on({eventName:"afterSave",type:o,listener:this},e.bind(f,this,"applyChanges")),r.get(o,{id:d,fields:["id",s]}).done(function(e){var t=e[0].data;i.fire("dataBind",{value:n.fromSourceToHtml(t[s])})})}});return i});
define('tau/models/model.property.richtext.editable',["tau/core/model.editable.base","tau/utils/utils.htmlConverter","tau/utils/utils.jsonSchema"],function(e,t,i){var a=e.extend({category:"edit",name:"model.property.richtext.editable",schema:null,init:function(e){this._super.apply(this,arguments);var t={type:"object",properties:{}};this.fieldName=e.fieldName,t.properties[this.fieldName]={optional:!0,empty:!0,type:"string"},this.schema=i.Schema.create(t)},"bus dataBind":function(){this.bus.fire("permissionsReady",{editable:this.config.editable===!0||void 0===this.config.editable,deletable:!0})},"bus beforeSave":function(e){var i=e.data.cmd.$set;i[this.fieldName]=t.fromHtmlToSource(i[this.fieldName])},"bus validate":function(e){var t=e.data,i=t.cmd.$set;t.validation=this.schema.validate(i)}});return a});
define('tau/components/extensions/property/extension.property.richtext.editable',["Underscore","jQuery","tau/core/extension.base","tau/ui/behaviour/common/ui.behaviour.richeditor"],function(e,i,t){return t.extend({category:"edit",resetLifecycle:!0,editorIsActive:!1,"bus applyChanges":function(){this.editorIsActive||this.fire("refresh")},"bus beforeInit:last + submitted":function(e,i,t){var n=i.config.context.entity;i.config.context.configurator.getStore().evictProperties(n.id,n.entityType.name,[i.config.fieldName]);var o={};o[i.config.fieldName]=t,this.fire("save",o)},"bus beforeInit + dataBind + permissionsReady + afterRender":function(i,t,n,o,r){var c=r.element;if(o.editable)var a=c.find(".i-role-property"),s=t.config.context.configurator,d=e.bind(this.fire,this),f=t.config.richediitor?t.config.richediitor:"richeditor",u=a[f]({ckPath:s.getCkPath(),text:n.value,settings:{toolbar:"Full",height:"auto"},onCreate:e.bind(function(){this.editorIsActive=!0,d("$editor.ready",u)},this),onHide:e.bind(function(){this.editorIsActive=!1},this),onSave:function(e){a[f]("hide"),d("submitted",e)},onCancel:function(){a[f]("hide")}})}})});
define('tau/components/component.property.richtext',["tau/components/component.creator","tau/models/model.property.richtext","tau/models/model.property.richtext.editable","tau/components/extensions/property/extension.property.richtext.editable","tau/components/extensions/property/extension.property.richtext.autosave","tau/ui/extensions/content/ui.extension.content.shortcutProcessor","tau/ui/extensions/content/ui.extension.content.imagePreview","tau/ui/templates/property/ui.template.property.richtext"],function(e,t,o,r,n,i,s,u){return{create:function(p){p.queuedBus=!0;var a={queuedBus:!0,extensions:_.compact([t,o,r,p.disableAutoSave?null:n,i,s]),template:u};return p.shortcutProcessorTarget=".i-role-property",p.imagePreviewContentSelector=".i-role-property",e.create(a,p)}}});
define('tau/components/component.description',["tau/components/component.property.richtext"],function(e){return{create:function(t){return t=t||{},t.fieldName="description",e.create(t)}}});
define('tau/ui/templates/diagnostics/ui.template.diagnostics.globalListeners.details',["tau/core/templates-factory"],function(a){var e={name:"diagnostics.globalListeners.details",markup:['<span class="tau-global-listener ui-link" data-details="${item.fn.toString()}">${name}</span><br/>']};return a.register(e)});
define('tau/ui/templates/diagnostics/ui.template.diagnostics.globalListeners',["tau/core/templates-factory","tau/ui/templates/diagnostics/ui.template.diagnostics.globalListeners.details"],function(t){var e={name:"diagnostics.globalListeners",dependencies:["diagnostics.globalListeners.details"],markup:['<div class="tau-diagnostics-globalListeners">',"<table>","{{each data}}",'<tr class="tau-diagnostics-row">','<td>${count}</td><td>${name}</td><td>{{tmpl(listeners) "diagnostics.globalListeners.details"}}</td>',"</tr>","{{/each}}","</table>","</div>"]};return t.register(e)});
define('tau/components/extensions/diagnostics/extension.diagnostics.base',["jQuery","Underscore","tau/configurator","tau/core/bus.reg","tau/components/extensions/component.extension.base"],function(t,e,n,i,s){var r=s.extend({init:function(t){this._super(t)},_getData:function(){var t=0,s=e.values(n.getProxy().__subscriptions);return e.each(s,function(n){if(e.isObject(n)){var i=e.values(n);e.each(i,function(n){e.isObject(n)&&(t+=e(n).values().length)})}}),{countOfBuses:i.count(),globalBusListeners:n.getGlobalBus().getListenersCount(),storeListeners:t}},"bus beforeInit":function(){this.fire("dataBind",this._getData())},signUp:function(){var t=["create","destroy"],s=["initialize","refresh","afterStoreOn","afterStoreUnbind","afterRender"],r=e.throttle(this.refreshStats.bind(this),100);e.each(t,function(t){i.on(t,r,this)},this);var o=n.getGlobalBus();e.each(s,function(t){o.on(t,r,this,null,1e3)},this)},startMonitoringWithOutRefresh:function(){this.monitoringStarted||(this.monitoringStarted=!0,this.signUp())},startMonitoring:function(){this.startMonitoringWithOutRefresh(),this.refreshStats()},"bus afterRender":function(){var t=this,i=this.config.startMonitoringConfig||{name:/(application|entity component)/,events:["afterRender"]},s=n.getGlobalBus(),r=function(n){n.caller.name.match(i.name)&&(e.each(i.events,function(){s.removeAllListeners(t)}),t.startMonitoring())};e.each(i.events,function(e){s.on(e,r,t)})},refreshStats:function(){this.fire("refreshData",this._getData())},"bus destroy":function(){n.getGlobalBus().removeAllListeners(this),i.removeAllListeners(this)}});return r});
define('tau/components/component.diagnostics.globalListeners',["jQuery","Underscore","tau/configurator","tau/core/bus.reg","tau/components/component.creator","tau/ui/templates/diagnostics/ui.template.diagnostics.globalListeners","tau/components/extensions/diagnostics/extension.diagnostics.base"],function(t,e,n,a,i,s,o){return{create:function(e){var a=o.extend({_getData:function(){return this.startMonitoringWithOutRefresh(),{data:n.getGlobalBus().getListeners()}},_onDetailsClick:function(e){var n=t(e.target);console.log(n.data("details"))},_signUpOnClick:function(e){var n=t(e.data.element);n.data("tau-global-listener")||n.on("click.tau-global-listener",".tau-global-listener",this._onDetailsClick).data("tau-global-listener",!0)},"bus elementRefreshedWithData":function(t){this._signUpOnClick(t)},"bus afterRender":function(t){this._signUpOnClick(t)}}),r={extensions:[a],template:s};return i.create(r,e)}}});
define('tau/ui/templates/diagnostics/ui.template.diagnostics',["tau/core/templates-factory"],function(s){var a={name:"diagnostics",markup:['<div class="tau-diagnostics-box">','<span class="ui-diag-label">Buses</span><span class="ui-diag-quantity">${countOfBuses}</span>','<span class="ui-diag-label">GB</span><span class="ui-diag-quantity">${globalBusListeners}</span>','<span class="ui-diag-label">Store</span><span class="ui-diag-quantity">${storeListeners}</span>',"</div>"]};return s.register(a)});
define('tau/components/component.diagnostics',["tau/components/component.creator","tau/ui/templates/diagnostics/ui.template.diagnostics","tau/components/extensions/diagnostics/extension.diagnostics.base"],function(t,e,n){return{create:function(s){var i={extensions:[n],template:e};return t.create(i,s)}}});
define('tau/ui/templates/diagnostics/ui.template.diagnostics.storeListeners.details',["tau/core/templates-factory"],function(a){var e={name:"diagnostics.storeListeners.details",markup:['<span class="tau-store-listener ui-link" data-details="${sub.callback.toString()}">${name}</span><br/>']};return a.register(e)});
define('tau/ui/templates/diagnostics/ui.template.diagnostics.store',["tau/core/templates-factory","tau/ui/templates/diagnostics/ui.template.diagnostics.storeListeners.details"],function(t){var e={name:"diagnostics.storeListeners",dependencies:["diagnostics.storeListeners.details"],markup:['<div class="tau-diagnostics-storeListeners">',"<table>","{{each data}}",'<tr class="tau-diagnostics-row">','<td>${items.length}</td><td>${name}</td><td>{{tmpl(items) "diagnostics.storeListeners.details"}}</td>',"</tr>","{{/each}}","</table>","</div>"]};return t.register(e)});
define('tau/components/component.diagnostics.store',["jQuery","Underscore","tau/configurator","tau/core/bus.reg","tau/components/component.creator","tau/ui/templates/diagnostics/ui.template.diagnostics.store","tau/components/extensions/diagnostics/extension.diagnostics.base"],function(e,t,n,s,i,a,r){return{create:function(s){var o=r.extend({_getData:function(){this.startMonitoringWithOutRefresh(),this.listeners={},t.each(t.values(n.getProxy().__subscriptions),function(e){t.isObject(e)&&t.each(e,function(e){t.isObject(e)&&t.each(e,this._addListener,this)},this)},this);var e=t.values(this.listeners);return this.listeners=null,{data:e}},_addListener:function(e){var n=e.config.eventName+"["+e.config.type+"]";t.has(this.listeners,n)||(this.listeners[n]={name:n,items:[]}),this.listeners[n].items.push({name:this._getListenerName(e.config.listener),sub:e})},_getListenerName:function(e){return e&&e.bus&&e.bus.name?e.bus.name:e&&e.name?e.name:"unknown"},_onDetailsClick:function(t){var n=e(t.target);console.log(n.data("details"))},_signUpOnClick:function(t){var n=e(t.data.element);n.data("tau-store-listener")||n.on("click.tau-store-listener",".tau-store-listener",this._onDetailsClick).data("tau-store-listener",!0)},"bus elementRefreshedWithData":function(e){this._signUpOnClick(e)},"bus afterRender":function(e){this._signUpOnClick(e)}}),u={extensions:[o],template:a};return i.create(u,s)}}});
define('tau/models/baseInfoList/extension.model.entityIdRetriever',["tau/models/extension.model.base"],function(e){var t=e.extend({"bus registerStoreRequest":function(e){var t=this.config.context.entity||e.data.entity||{entityType:{}},i={};i[this.config.propertyName]=["id"];var n=[i];this.fire("get",{type:t.entityType.name,query:{id:t.id,fields:n},callback:{success:this.onEntityRetrieved,scope:this}})},onEntityRetrieved:function(e){if(this.config){var t=e.data[this.config.propertyName];this.fire("entityIdsRetrieved",t)}}});return t});
define('tau/models/baseInfoList/extension.model.additionalInfoEntityRetriever',["Underscore","tau/models/extension.model.base"],function(e,t){var i=t.extend({"bus entityIdsRetrieved":function(e){for(var t=e.data,i=t.length,n=0;i>n;n++){var r={id:t[n].id,fields:["id","name",{entityState:["name"]}]};this.fire("extendGetEntityQuery",r),this.fire("get",{type:this.config.typeName,query:r})}this.fire("commitTransaction",{scope:this,success:this.onEntitiesRetrieved})},convertServerDataModelData:function(e){e=e;var t=this.config.context.configurator.getUrlBuilder();return{__type:e.__type,id:e.id,name:e.name,state:{name:e.entityState.name},url:t.getNewViewUrl(e.id,e.__type,!0)}},onEntitiesRetrieved:function(t){var i={entities:e.pluck(t,"data")};this.fire("filterEntities",i),t=i.entities;var n=e.map(t,this.convertServerDataModelData,this);n=e.compact(n),this.fire("entitiesRetrieved",n)}});return i});
define('tau/models/model.list.baseInfo',["tau/core/model-base","tau/models/baseInfoList/extension.model.entityIdRetriever","tau/models/baseInfoList/extension.model.additionalInfoEntityRetriever"],function(t,e,i){var n=t.extend({init:function(t){this._super.apply(this,arguments),this.propertyName=t.propertyName,this.typeName=t.typeName,new e(t),new i(t)},onInit:function(){this.config.disableModel||(this.fire("registerStoreRequest",{entity:this.config.context.entity}),this.fire("commitTransaction",{entity:this.config.context.entity}))},"bus entitiesRetrieved":function(t){var e={items:t.data};this.bus.fire("dataBind",e)},"bus evictProperty":function(){var t=this.config.context.entity;this.store.evictProperties(t.id,t.entityType.name,[this.propertyName])}});return n});
define('tau/ui/templates/common/ui.template.entityLink.icon',["tau/core/templates-factory"],function(e){var t={name:"entity-link-icon",markup:['<a href="${url}" class="tau-linkentity tau-linkentity_type_icon">','<em class="ui-type-icon ui-type-icon-${__type.toLowerCase()} ui-link-entity__icon">${id}</em>',"</a>"],dependencies:[]};return e.register(t)});
define('tau/ui/templates/common/ui.template.entityLink.text',["tau/core/templates-factory"],function(e){var t={name:"entity-link-text",markup:['<a href="${url}" class="tau-linkentity tau-linkentity_type_text">','<span class="tau-linkentity__inner">',"{{if text}}","${text}","{{else}}","${name}","{{/if}}","</span>","</a>"],dependencies:[]};return e.register(t)});
define('tau/ui/templates/list/ui.template.list.baseInfo.item',["tau/core/templates-factory","tau/ui/templates/common/ui.template.entityLink.icon","tau/ui/templates/common/ui.template.entityLink.text"],function(t){var e={name:"list-base-info-item",markup:['<tr class="{{if $item.index %2 != 0}}alternative-row{{/if}}">','<td class="entity-type tau-list__table__cell-id">{{tmpl($data) "entity-link-icon"}}</td>','<td class="name">{{tmpl($data) "entity-link-text"}}</td>','<td class="state">${state.name}</td>',"</tr>"].join(""),dependencies:["entity-link-icon","entity-link-text"]};return t.register(e)});
define('tau/ui/templates/list/ui.template.list.baseInfo',["tau/core/templates-factory","tau/ui/templates/list/ui.template.list.baseInfo.item"],function(e){var t={name:"request-list",options:{contentSelector:".request-list"},markup:['<div class="ui-base-info-list-content">','<table class="ui-table base-info-list" cellpadding="4" cellspacing="0" {{if items.length === 0}}style="display:none"{{/if}}>',"<tbody>","{{each items}}",'    {{tmpl($value, {index:$index}) "list-base-info-item"}}',"{{/each}}","</tbody>","</table>","</div>"].join(""),dependencies:["list-base-info-item"]};return e.register(t)});
define('tau/components/component.list.baseInfo',["Underscore","tau/components/component.list.creator","tau/models/model.list.baseInfo","tau/models/assignmentsList/extension.model.store.operations","tau/ui/templates/list/ui.template.list.baseInfo","tau/core/termProcessor"],function(e,t,o,n,s,a){return{create:function(r,m){var i=new a(r.context.getTerms());return m=m||{},m.extensions=e.compact(e.union(m.extensions,[n])),e.extend(m,{message:"No "+i.getTerms(r.typeName).names.toLowerCase()+" found",ModelType:r.ModelType||o,template:s}),t.create(m,r)}}});
define('tau/components/component.duplicateBugList',["Underscore","tau/components/component.list.baseInfo","tau/models/model.duplicateBugList","tau/models/model.duplicateBugRetriever"],function(e,t,n,o){return{create:function(e){return e.ModelType=n,e.typeName="bug",t.create(e,{extensions:[o]})}}});
define('tau/ui/extensions/ui.extensions.onMarkAsDuplicate',["tau/components/extensions/component.extension.base"],function(t){return t.extend({"bus beforeInit":function(t){this.config=t.data.config,this.bus.getGlobalBus().on("bugWasMarkedAsDuplicate",this.onBugWasMarkedAsDuplicate,this)},destroy:function(){this.bus.getGlobalBus().removeListener("bugWasMarkedAsDuplicate",this.onBugWasMarkedAsDuplicate,this),this._super.apply(this,arguments)},onBugWasMarkedAsDuplicate:function(t){var e=this.config?this.config.context.entity.id:null;(e==t.data.duplicateBugId||e==t.data.bugId)&&(this.fire("evict"),this.fire("refresh"))}})});
define('tau/components/component.duplicateBugListPanel',["Underscore","tau/components/component.collapsible","tau/components/extensions/duplicateBugList/extension.duplicateBugList.visibilityController","tau/models/model.duplicateBugCountCalculator","tau/models/model.duplicateBugRetriever","tau/models/model.extensions","tau/models/assignmentsList/extension.model.store.operations","tau/ui/extensions/ui.extensions.onMarkAsDuplicate","tau/core/termProcessor"],function(e,t,s,n,o,i,a,u,l){return{create:function(s){var n=new l(s.context.getTerms());return s=s||{},e.extend(s,{collapsed:!0,header:[{type:"label",text:n.getTerms("Bug").name+" Duplicates",quantityCssClass:s.quantityCssClass||"ui-gray-quantity"}],items:[{type:"duplicateBugList"}],extensions:[o,a,u]}),t.create(s)}}});
define('libs/amanda/amanda',[],function(){return function(){var t=function(t){return"[object Object]"===Object.prototype.toString.call(t)},r=function(t){return"[object Array]"===Object.prototype.toString.call(t)},e=function(e){if(r(e)||"string"==typeof e)return 0===e.length;if(t(e))for(var n in e)if(e.hasOwnProperty(n))return!1;return!0},n=function(t,r){for(var e in r)r.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&(t[e]=r[e]);return t},o=function(n,o,i){var a=function(n,o){if(r(n)&&!e(n))for(var i=0,a=n.length;a>i;i++)o.apply(n,[i,n[i]]);if(t(n)&&!e(n))for(var u in n)n.hasOwnProperty(u)&&o.apply(n,[u,n[u]])},u=function(n,o,i){var a=[],u=function(t,r){var e=a.length+1;a.push(function(){var n=function(t){var r=a[e];return!t&&r?r():t||r?i(t):i()};return o(t,r,n)})};if(r(n)&&!e(n))for(var p=0,f=n.length;f>p;p++)u(p,n[p]);else{if(!t(n)||e(n))return i();for(var s in n)n.hasOwnProperty(s)&&u(s,n[s])}return a[0]()};return"undefined"==typeof i?a.apply(this,arguments):u.apply(this,arguments)},i=function(t,r){for(var e=[],n=0,o=t.length;o>n;n++){var i=t[n][r];-1===e.indexOf(i)&&e.push(i)}return e},a=function(){this.length=0};a.prototype.addError=function(t){this[this.length]=t,this.length++},o({getProperties:"property",getMessages:"message"},function(t,r){a.prototype[t]=function(){return i(this,r)}});var u={required:"The ‘{{property}}’ property is required.",minLength:"The ‘{{property}}’ property must be at least {{validator}} characters.",maxLength:"The ‘{{property}}’ property must not exceed {{validator}} characters.",length:"The ‘{{property}}’ property must be exactly {{validator}} characters.",format:"The ‘{{property}}’ property must be a/an {{validator}}.",type:"The ‘{{property}}’ property must be a/an {{validator}}.",except:"The ‘{{property}}’ property must not be {{propertyValue}}",minimum:"The minimum value of the ‘{{property}}’ must be {{validator}}",maximum:"The maximum value of the ‘{{property}}’ must be {{validator}}",pattern:"The `{{property}}` does not match the ‘{{validator}}’ pattern.",maxItems:"The `{{property}}` property must not contain more than {{validator}} items.",minItems:"The `{{property}}` property must contain at least {{validator}} items.",divisibleBy:"The ‘{{property}}’ property is not divisible by {{validator}}.",uniqueItems:"All items in the ‘{{property}}’ property must be unique.","enum":function(t,r,e){return"Value of the ‘"+t+"’ must be "+e.join(" or ")+"."}},p=function(t){this.singleError=t.hasOwnProperty("singleError")?t.singleError:!0,this.validators=f,this.messages=t.messages?n(t.messages,u):u,this.Errors=new a};p.prototype.renderErrorMessage=function(t,r){var e=this.messages[t];return"function"==typeof e?e(r.property,r.propertyValue,r.validator):"string"==typeof e?(o(r,function(t,r){e=e.replace(new RegExp("{{"+t+"}}","g"),r)}),e.replace(/\s+/g," ")):""},p.prototype.validateProperty=function(t,r,e,n){var i=this,a=function(n,o,a){var u=function(o){if(!o)return a();var u=i.renderErrorMessage(n,{property:t,propertyValue:r,validator:e[n]});return i.Errors.addError({property:t,propertyValue:r,validator:n,validatorValue:e[n],message:u}),a(i.singleError?!0:null)};return e[n]?o(t,r,e[n],e,u):a()};return e.required!==!0&&"undefined"==typeof r?n():o(i.validators,a,n)},p.prototype.validate=function(t,r,e){var n=this;return this.Errors=new a,this.validateSchema(t,r,"",function(){return e(n.Errors.length>0?n.Errors:void 0)})},p.prototype.validateProperties=function(t,r,e,n){var i=this;return o(r.properties,function(n,o,a){var u="object"===o.type&&o.properties,p="array"===o.type,f=i.getProperty(t,n),s=-1!==n.indexOf(" ")?"['"+n+"']":"."+n,c=0===e.length?n:e+s;return u||p?i.validateSchema(f,r.properties[n],c,a):i.validateProperty(c,f,o,a)},n)},p.prototype.validateItems=function(t,r,n,i){var a=this;return t&&!e(t)?-1!==["object","array"].indexOf(r.items.type)?o(t,function(t,e,o){var i=n+"["+t+"]";return a.validateSchema(e,r.items,i,o)},i):o(t,function(t,e,o){var i=n+"["+t+"]";return a.validateProperty(i,e,r.items,o)},i):i()},p.prototype.validateSchema=function(t,r,e,n){var o=this;return-1!==["object","array"].indexOf(r.type)?o.validateProperty(e,t,r,function(){return r.properties?o.validateProperties(t,r,e,n):r.items?o.validateItems(t,r,e,n):n()}):o.validateProperty(e,t,r,n)},p.prototype.getProperty=function(t,r){return t?t[r]:void 0};var f={required:function(t,r,e,n,o){return e&&void 0===r?o(!0):o()},type:function(){for(var t={object:function(t){return"[object Object]"===Object.prototype.toString.call(t)},array:function(t){return"[object Array]"===Object.prototype.toString.call(t)},integer:function(t){return"number"==typeof t&&t%1===0}},r=["string","number","function","boolean"],e=0,n=r.length;n>e;e++)t[r[e]]=function(t){return function(){return typeof arguments[0]===t}}(r[e]);return function(r,e,n,o,i){if("[object Array]"===Object.prototype.toString.call(n)){var a=n.some(function(r){return t[r](e)});return a?i():i(!0)}return t[n](e)?i():i(!0)}}(),format:function(){var t={alpha:function(t){return"string"==typeof t&&t.match(/^[a-zA-Z]+$/)},alphanumeric:function(t){return"string"==typeof t&&/^[a-zA-Z0-9]+$/.test(t)||"number"==typeof t},ipv4:function(t){return"string"==typeof t&&t.match(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/)},ipv6:function(t){return"string"==typeof t&&t.match(/(?:(?:[a-f\d]{1,4}:)*(?:[a-f\d]{1,4}|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})|(?:(?:[a-f\d]{1,4}:)*[a-f\d]{1,4})?::(?:(?:[a-f\d]{1,4}:)*(?:[a-f\d]{1,4}|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}))?)/)},ip:function(r){return t.ipv4(r)||t.ipv6},email:function(t){return"string"==typeof t&&t.match(/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/)},url:function(t){return"string"==typeof t&&t.match(/^(?:(?:ht|f)tp(?:s?)\:\/\/|~\/|\/)?(?:\w+:\w+@)?((?:(?:[-\w\d{1-3}]+\.)+(?:com|org|cat|coop|int|pro|tel|xxx|net|gov|mil|biz|info|mobi|name|aero|jobs|edu|co\.uk|ac\.uk|it|fr|tv|museum|asia|local|travel|[a-z]{2})?)|((\b25[0-5]\b|\b[2][0-4][0-9]\b|\b[0-1]?[0-9]?[0-9]\b)(\.(\b25[0-5]\b|\b[2][0-4][0-9]\b|\b[0-1]?[0-9]?[0-9]\b)){3}))(?::[\d]{1,5})?(?:(?:(?:\/(?:[-\w~!$+|.,=]|%[a-f\d]{2})+)+|\/)+|\?|#)?(?:(?:\?(?:[-\w~!$+|.,*:]|%[a-f\d{2}])+=?(?:[-\w~!$+|.,*:=]|%[a-f\d]{2})*)(?:&(?:[-\w~!$+|.,*:]|%[a-f\d{2}])+=?(?:[-\w~!$+|.,*:=]|%[a-f\d]{2})*)*)*(?:#(?:[-\w~!$ |\/.,*:;=]|%[a-f\d]{2})*)?$/)},date:function(t){return"[object Date]"===Object.prototype.toString.call(t)},decimal:function(t){return/^[0-9]+(\.[0-9]{1,2})?$/.test(t)},"int":function(t){return/^-?[0-9]+$/.test(t)},percentage:function(t){return"string"==typeof t&&t.match(/^-?[0-9]{0,2}(\.[0-9]{1,2})?$|^-?(100)(\.[0]{1,2})?$/)||t>=-100&&100>=t},port:function(t){return/\:\d+/.test(t)},regexp:function(t){return t&&t.test&&t.exec},unsignedInt:function(t){return/^[0-9]+$/.test(t)}};return function(r,e,n,o,i){return t[n](e)?i():i(!0)}}(),minLength:function(t,r,e,n,o){return"string"==typeof r&&r.length>=e?o():o(!0)},maxLength:function(t,r,e,n,o){return"string"==typeof r&&r.length<=e?o():o(!0)},length:function(t,r,e,n,o){return"string"==typeof r&&r.length===e?o():o(!0)},"enum":function(t,r,e,n,o){return-1===e.indexOf(r)?o(!0):o()},except:function(t,r,e,n,o){return-1!==e.indexOf(r)?o(!0):o()},minimum:function(t,r,e,n,o){if("number"==typeof r){var i=n.exclusiveMinimum?r>e:r>=e;return i?o():o(!0)}return o(!0)},maximum:function(t,r,e,n,o){if("number"==typeof r){var i=n.exclusiveMaximum?e>r:e>=r;return i?o():o(!0)}return o(!0)},pattern:function(t,r,e,n,o){return"string"!=typeof r||r.match(e)?o():o(!0)},minItems:function(t,e,n,o,i){return r(e)&&e.length>=n?i():i(!0)},maxItems:function(t,e,n,o,i){return r(e)&&e.length<=n?i():i(!0)},uniqueItems:function(t,r,e,n,i){return o(r,function(t,e,n){return r.indexOf(e)<t?n(!0):n()},i)},divisibleBy:function(t,r,e,n,o){var i="number"==typeof r,a=r%e===0;return i&&a?o():o(!0)}};return p}()});
define('tau/models/editor.requester/model.editor.requester',["Underscore","tau/core/model-base","libs/amanda/amanda"],function(e,a,i){var t=a.extend({"bus afterInit":function(){this.fire("dataBind",{}),this.validation=new i({singleError:!1});var a=this.config.store,t=function(e,i,t,s,r){return t&&i?void a.find("requester",{$query:{email:i,deleteDate:null}}).done({success:function(e){1==e[0].data.length?r("uniqueEmail"):r()}}):r()};this.validation.validators.uniqueEmail=t,e.extend(this.validation.messages,{required:function(e){var a={firstName:"First Name",lastName:"Last Name",email:"email"};return"Please enter "+a[e]},uniqueEmail:"Requester with the same email already exists",format:"Please enter valid {{validator}}"})},"bus form.parametersBound":function(e){var a=e.data,i=(this.config.store,{type:"object",properties:{firstName:{required:!0,type:"string"},lastName:{required:!0,type:"string"},email:{required:!0,type:"string",format:"email",uniqueEmail:!0}}}),t=this;this.validation.validate(a.parameters,i,function(e){e?t.fire("form.validationFailed",{errors:e}):t.fire("form.validationPassed",{data:a.parameters})})},"bus form.validationPassed":function(e){var a=e.data.data,i=this.config.store,t=this.config.context.entity;i.save("Requester",{$set:{email:a.email,login:a.email,firstName:a.firstName,lastName:a.lastName},fields:["id"]}).done({success:function(e){var a=e[0].data;i.save(t.entityType.name,{id:t.id,$set:{requesters:[{id:a.id}]},fields:["id"]}).done({success:function(){}})}})}});return t});
define('tau/ui/extensions/editor.requester/ui.extension.editor.requester.form',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,i,n){return n.extend({"bus afterRender":function(n){var t=n.data.element;this.$element=t;var r=t.find("[role=form]"),a=r.find(":input"),o=r.find(":button");o.eq(0).prop("disabled","disabled"),o.eq(0).addClass("disable");var s=this;o.eq(0).click(function(){var n={};a.each(function(){var t=i(this),r=e.trim(t.val());""!=r&&(n[t.attr("name")]=r)}),n.action="search",s.bus.fire("form.parametersBound",{parameters:n})}),a.bind("keyup",function(){a.filter(function(){return i(this).val().length>0}).length==a.length?(o.eq(0).prop("disabled",!1),o.eq(0).removeClass("disable")):(o.eq(0).prop("disabled","disabled"),o.eq(0).addClass("disable"))})},"bus form.validationFailed":function(i){this.$element.find(".ui-validationerror").removeClass("ui-validationerror");var n=e.uniq(i.data.errors,!1,function(e){return e.property}),t=this.$element.find(":input");e.forEach(n,function(e){t.filter("[name="+e.property+"]").toggleClass("ui-validationerror",!0).attr("title",e.message)})},"bus form.validationPassed":function(){this.$element.find(".ui-validationerror").removeClass("ui-validationerror")}})});
define('tau/ui/templates/editor.requester/ui.template.editor.requester',["tau/core/templates-factory"],function(e){var a={name:"editor-requester",markup:["<div>",'<div class="ui-form" role="form">','<div class="ui-form__row">','<label for="url">First Name</label><input type="text" data-autofocus class="user-search-box" name="firstName" />',"</div>",'<div class="ui-form__row">','<label for="label">Last Name</label><input type="text" class="user-search-box" name="lastName" />',"</div>",'<div class="ui-form__row">','<label for="label">Email</label><input type="text" class="user-search-box" name="email" />',"</div>",'<div class="ui-form__row ui-form__row-controls button-group">','<input type="button" name="action" value="Add requester" class="button" />','<input type="button" name="cancel" value="Cancel" role="action-cancel" class="button" />',"</div>","</div>","</div>"],dependencies:[]};return e.register(a)});
define('tau/components/component.editor.requester',["tau/components/component.creator","tau/models/editor.requester/model.editor.requester","tau/ui/extensions/editor.requester/ui.extension.editor.requester.form","tau/ui/templates/editor.requester/ui.template.editor.requester"],function(e,t,r,n){return{create:function(o){var u={name:"finder",extensions:[t,r],template:n};return e.create(u,o)}}});
define('tau/models/editor.team-member/model.editor.team-member',["Underscore","tau/core/model-base","libs/amanda/amanda"],function(e,a,i){var t=a.extend({"bus afterInit":function(){this.fire("dataBind",{}),this.validation=new i({singleError:!1});var a=this.config.store,t=function(e,i,t,s,r){return t&&i?void a.find("user",{$query:{email:i,deleteDate:null}}).done({success:function(e){1==e[0].data.length?r("uniqueEmail"):r()}}):r()};this.validation.validators.uniqueEmail=t,e.extend(this.validation.messages,{required:function(e){var a={firstName:"First Name",lastName:"Last Name",email:"email"};return"Please enter "+a[e]},uniqueEmail:"User with the same email already exists",format:"Please enter valid {{validator}}"})},"bus form.parametersBound":function(e){var a=e.data,i=(this.config.store,{type:"object",properties:{firstName:{required:!0,type:"string"},lastName:{required:!0,type:"string"},email:{required:!0,type:"string",format:"email",uniqueEmail:!0}}}),t=this;this.validation.validate(a.parameters,i,function(e){e?t.fire("form.validationFailed",{errors:e}):t.fire("form.validationPassed",{data:a.parameters})})},"bus form.validationPassed":function(e){var a=e.data.data,i=this.config.store,t=this.config.context.entity;i.save("user",{$set:{email:a.email,login:a.email,firstName:a.firstName,lastName:a.lastName},fields:["id"]}).done({success:function(e){var a=e[0].data;i.save(t.entityType.name,{id:t.id,$set:{teamMembers:[{user:{id:a.id}}]},fields:["id"]}).done({success:function(){}})}})}});return t});
define('tau/components/component.editor.team-member',["tau/components/component.creator","tau/models/editor.team-member/model.editor.team-member","tau/ui/extensions/editor.requester/ui.extension.editor.requester.form","tau/ui/templates/editor.requester/ui.template.editor.requester"],function(e,t,r,n){return{create:function(o){var i={name:"finder",extensions:[t,r],template:n};return e.create(i,o)}}});
define('tau/ui/extensions/effort/ui.extension.effort',["Underscore","jQuery","tau/core/extension.base"],function(t,e,i){return i.extend({init:function(t,e,i,r){return this.model=r,this.configurator=e,this.entity=i,this._super(t)},"bus beforeInit":function(){e.when(this.model.load()).then(t.bind(function(t){this.fire("dataBind",{groups:t.groups,effort:t.effort,points:t.points})},this))},"bus afterRender":function(i,r){var n=r.element;n.on("keydown","input",function(t){var e=t.charCode||t.keyCode||0;return 8==e||9==e||13==e||27==e||46==e||110==e||190==e||e>=35&&40>=e||e>=48&&57>=e||e>=96&&105>=e}),n.on("focusin focusout","input",t.bind(function(t){var i=e(t.currentTarget).parents(".tau-effort__group");i.toggleClass("tau-effort__group_state_edit","focusin"===t.type)},this)),n.on("focusout",t.bind(function(t){t.relatedTarget&&!e(t.relatedTarget).is("input")&&this.fire("effort.editor.finished")},this)),n.on("change","input",t.bind(function(t){var i=e(t.currentTarget).parents(".tau-effort");this._saveRoleEfforts(i),this._updateTotalEffort(i)},this)),n.on("click",".i-role-edittrigger",t.bind(function(t){var i=e(t.currentTarget);i.parent().find(":text").focus(1)},this)),n.on("click","form",t.bind(function(t){t.stopPropagation()},this)),n.on("submit","form",t.bind(function(t){var i=e(t.currentTarget).find("input");i.blur(),this.fire("effort.editor.finished"),t.preventDefault()},this)),n.on("close.event",t.bind(function(){this.fire("effort.editor.finished")},this)),this._updateTotalEffort(n),n.find(":text").first().focus(1)},_updateTotalEffort:function(t){var e=this._getTotalEffort(t);t.find(".tau-effort__total span").text(e)},_saveRoleEfforts:function(t){var i=this._getRoleEfforts(t);this.fire("effort.editor.saving"),e.when(this.model.saveEfforts(i)).done(this.fire.bind(this,"effort.editor.saved")).fail(this.fire.bind(this,"effort.editor.saveFailed"))},_getRoleEfforts:function(i){return t.map(i.find(":text"),function(t){var i=e(t);return{id:i.attr("data-role-effort-id"),role:{id:i.attr("data-role-id")},effort:i.val()||0}},this)},_getTotalEffort:function(e){var i=this._getRoleEfforts(e);return t.reduce(i,function(t,e){return t+parseFloat(e.effort)},0)}})});
define('tau/ui/extensions/effort/model',["Underscore","jQuery","tau/core/class","tau/core/event","tau/utils/utils.translation","tau/models/dataprocessor/model.processor.context"],function(t,e,o,r,i,n){return r.extend(o.extend({init:function(t,e,o){this.store=t,this.contextService=e,this.groups=[],this.entity=o},load:function(){return e.when(this.loadPoints()).then(this.loadEfforts.bind(this))},loadPoints:function(){return e.when(this.contextService.findByEntity(this.entity)).then(function(t){this.points=this._getEffortPoints(t)}.bind(this))},loadEfforts:function(){var t=e.Deferred();return this.store.get(this.entity.entityType.name,{id:this.entity.id,fields:["effort","effortCompleted","effortToDo",{roleEfforts:["id","effort","effortToDo",{role:["id","name","hasEffort"]}]}]}).done(function(e){this.effort=e[0].data.effort,this.roleEfforts=e[0].data.roleEfforts,this.groups=this.processEfforts(this.roleEfforts),t.resolve(this)}.bind(this)),t},createGroupFromRole:function(t){return{id:t.id,name:i.shorten(t.name),role:t,users:[]}},processEfforts:function(e){return t.forEach(e,function(e){if(e.role.hasEffort){var o=t.find(this.groups,function(t){return t.role.id==e.role.id});if(!o){var r=this.createGroupFromRole(e.role);this.groups.push(r),o=r}o.effort=e.effort,o.roleEffortId=e.id}},this),this.groups},saveEfforts:function(t){return this.store.saveDef(this.entity.entityType.name,{$set:{id:this.entity.id,roleEfforts:t}})},_getEffortPoints:function(t){var e={entity:this.entity,applicationContext:t},o=n(e);return o.getEffortPoint()}}))});
define('tau/ui/templates/effort/ui.template.effort',["tau/core/templates-factory"],function(t){return t.register({name:"effort",engine:"jqote2",markup:['<div class="tau-effort">',"<% _.each(this.groups, function(group) { %>",'<div class="i-role-group tau-effort__group" data-id="<%= group.id %>">','<span class="tau-effort__grouptitle i-role-edittrigger"><%! group.name %></span>','<form><input type="text" data-role-effort-id="<%= group.roleEffortId %>" data-role-id="<%= group.id %>" value="<%= group.effort %>"></form>',"</div>","<% }); %>",'<div class="tau-effort__divider"></div>','<div class="tau-effort__total">',"<span><%= this.effort %></span>","<label><%= this.points.shortName %></label>","</div>","</div>"]})});
define('tau/components/component.effort',["tau/components/component.creator","tau/ui/extensions/effort/ui.extension.effort","tau/ui/extensions/effort/model","tau/ui/templates/effort/ui.template.effort"],function(e,t,n,o){return{create:function(r){var i=r.context.configurator,a=r.context.entity,f={extensions:[{extType:t,args:[i,a,new n(i.getStore(),i.getApplicationContextService(),a)]}],template:o};return e.create(f,r)}}});
define('tau/ui/extensions/entity.menuTrigger/ui.extension.entity.menuTrigger',["jQuery","Underscore","tau/core/extension.base","tau/configurations/converters/converter.context","tau/configurations/factory.container.config"],function(e,t,n,i,o){return n.extend({"bus beforeInit":function(e,n){var a=n.config.options||{};a=t.defaults(a,{external:!1,type:"menu.actions",items:[]}),a.external&&(a.items=o.getContextBasedConfigObject(n.config).originalConfigObject.getActions(),a.items=t.filter(a.items,function(e){return!t.contains(e.editions,"~innerList")}));var r=n.config.context;a.items=i.convert(a.items,t.pluck(r.getPractices(),"name"),r.getEdition()),this.fire("options.ready",a),this.fire("dataBind",{isEmpty:!a.items.length})},"bus beforeInit + options.ready + afterRender":function(e,t,n,i){var o=t.config.context.configurator,a=i.element.find(".i-role-trigger");if(a.length){var r,s;n.external||(r=['<div class="tau-bubble">','<div class="tau-bubble__inner" role="content" style="margin:0"></div>',"</div>"].join(""),s=function(e){e.my="right top+2",e.at="right bottom"});var c={target:a,appendMethod:"appendTo",cleanupOnHide:!1,stackName:"quickAddGeneral",showOnCreation:!1,zIndex:1e4,className:"ui-menu-actions__bubble",hideOnScroll:!1,onShow:function(){o.getKeyBoardManager().pushHandler({})},onHide:function(){o.getKeyBoardManager().popHandler()},template:r,onPositionConfig:s,dontCloseSelectors:["#ui-datepicker-div"],componentsConfig:{components:[{name:"entity menu",type:n.type,options:n,items:n.items}]}};this.fire("initBubble",c)}},"bus afterRender:last + destroy":function(e,t){var n=t.element;n.length&&n.data("ui-tauBubble")&&n.tauBubble("hide")}})});
define('tau/ui/templates/entity.menuTrigger/ui.template.entity.menuTrigger',["tau/core/templates-factory"],function(e){var i={name:"entity.menuTrigger",engine:"jqote2",markup:["<% if (!this.isEmpty){ %>",'<div class="ui-menu-actions">','<span class="ui-menu__trigger i-role-trigger">',"Actions",'<span class="ui-menu__indicator"></span>',"</span>","</div>","<% } %>"],dependencies:[]};return e.register(i)});
define('tau/ui/templates/entity.menuTrigger/ui.template.entity.menuTrigger.short',["tau/core/templates-factory"],function(e){var t={name:"entity.menuTrigger.short",engine:"jqote2",markup:["<% if (!this.isEmpty){ %>",'<div class="tau-entity-actions">','<span class="tau-entity-actions-target i-role-trigger"></span>',"</div>","<% } %>"],dependencies:[]};return e.register(t)});
define('tau/components/component.entity.menuTrigger',["Underscore","tau/components/component.creator","tau/ui/extensions/entity.menuTrigger/ui.extension.entity.menuTrigger","tau/components/extensions/bubble/extension.bubble.creator","tau/components/extensions/component.creator.extension","tau/ui/templates/entity.menuTrigger/ui.template.entity.menuTrigger","tau/ui/templates/entity.menuTrigger/ui.template.entity.menuTrigger.short"],function(e,t,n,i,r,o,a){return{create:function(e){var u={extensions:[n,i,r],template:e.allData&&e.allData.options.external?a:o};return t.create(u,e)}}});
define('tau/services/service.entity-navigation',["tau/core/class"],function(n){return n.extend({navigateToEntityView:function(n,t,e){n.to("#"+e+"/"+t)}})});
define('tau/models/entity.quickAdd/model.entity.quickAdd.templates',["Underscore","jQuery","tau/core/extension.base","tau/core/termProcessor","tau/configurations/converters/converter.context","tau/services/service.entity-navigation"],function(e,t,n,i,a,o){return n.extend({"bus beforeInit":function(t,n){var o=n.config.options||{},r=n.config.context.entity,c=n.config.context.applicationContext.acid,s=n.config.context,u=n.config.context.configurator;n.config.useGlobalEntityViewer||this.fire("viewerBus.ready",this.bus);var y=n.config.context.applicationContext.culture;this.fire("culture.ready",y),o=e.defaults(o,{items:[]}),o.items=a.convert(o.items,e.pluck(s.getPractices(),"name"),s.getEdition()),0==o.items.length?this.fire("dataBind",{isEmpty:!0,types:[],entityTypes:[]}):this.getData(u,r,c,o).done(e.bind(function(t){var a=new i(n.config.context.getTerms()),o={};e.each(t,function(t,n){t.entityType={name:t.entityType,title:a.resolve(t.entityTypeTitle)},0===n&&(t.entityType.active=!0),"release"==r.entityType.name&&"iteration"==t.entityType.name.toLowerCase()&&(t.template.items=e.reject(t.template.items,function(e){return"release"==e.id.toLowerCase()})),o[t.entityType.name]=t}),this.fire("model.dataItems.template.ready",{types:o}),this.fire("dataBind",{types:o,entityTypes:e.pluck(o,"entityType"),mainEntity:r})},this))},"bus beforeInit:last + cardDataToShow.ready":function(e,t,n){var i=t.config.context.configurator,a=i.service("navigator");(new o).navigateToEntityView(a,n.entityId,n.entityType)},getData:function(n,i,a,o){var r=[],c=o.items;r.push(function(t){var o={global:{acid:a},entityType:i.entityType.name,entityId:i.id},r=n.getSliceFactory().create({definition:o});r.viewActions().done(function(n){var i=[];e.forEach(c,function(t){var a=e.find(n.data.data.types,function(e){return e.name.toLowerCase()==t.entityType.toLowerCase()});a&&i.push(a)});var a=e.map(i,function(e){return{templateAction:"viewDataTemplate",saveAction:"viewAddData",entityType:e.name,entityTypeTitle:e.title,slice:r}});t(!1,e.compact(a))})}),r.push(e.bind(function(t,n){return this.getTemplates(t).pipe(function(i){t=e.map(t,function(e,t){return e.template={items:i[t]},e}),n(!1,t)})},this));var s=t.Deferred();return e.waterfall(r,function(e,t){s.resolve(t)}),s},getTemplates:function(n){var i=[],a=t.Deferred();return e.forEach(n,function(e){i.push(function(t){var n={$set:{entityType:e.entityType}};e.slice[e.templateAction](n).done(function(e){t(!1,e.data)}).fail(function(){t(!1,null)})})}),e.parallel(i,function(t,n){a.resolve(e.compact(n))}),a}})});
define('tau/models/entity.quickAdd/model.entity.quickAdd.add',["Underscore","jQuery","tau/core/extension.base"],function(e,t,a){return a.extend({"bus beforeInit:last + dataBind:last + model.add.item":function(t,a,i,n){var d=a.config.context.configurator,o=a.config.context.entity,r=a.config.options,s=i.types[n.type];"release"==o.entityType.name&&"iteration"==s.entityType.name.toLowerCase()&&n.fields.push({id:"release",value:o.id});var y=e.extend({entityType:n.type,values:n.fields},s.coordinates);s.slice[s.saveAction]({$set:y}).done(e.bind(function(t){var a=t.data,i=e.find(r.items,function(e){return e.entityType.toLowerCase()==a.type.toLowerCase()}),y=d.getStore().typeMetaInfo(i.relationName).resource;if(y){var p={id:o.id,__type:o.entityType.name};p[y]=[e.extend(e.omit(a,"entityType","type"),{__type:a.type})],d.getStore().registerWithEvents(p);var f=a.type,c=f.charAt(0).toLowerCase()+f.substring(1);d.getGlobalBus().fire(c+".items.added",{entity:{id:a.id},"evict-data":{entityId:o.id,entityType:o.entityType.name,evictProperties:[y]}})}var m={message:{dataItem:{data:a}},nameType:s.entityType};m.message.dataItem.data.cardData=m.message.dataItem.data,m.openAfter=n.openAfter,this.fire("model.data.item.did.add",m)},this)).fail(e.bind(function(e){return this.fire("model.data.item.did.fail.add",e.data.responseText),!1},this))}})});
define('tau/components/component.entity.quickAdd',["tau/components/component.creator","tau/models/entity.quickAdd/model.entity.quickAdd.templates","tau/models/entity.quickAdd/model.entity.quickAdd.add","tau/ui/extensions/board.cell.quick.add/ui.extension.board.cell.quick.add","tau/ui/extensions/finder.entity/ui.extension.finder.entity.embedder","tau/components/extensions/bubble/extension.bubble.creator","tau/components/extensions/component.creator.extension","tau/ui/extensions/container/ui.extension.container.childrenEvents","tau/components/extensions/error/extension.errorBar","tau/views/view.compositeControl","tau/ui/templates/board.cell.quick.add/ui.template.board.cell.quick.add"],function(e,t,n,i,o,d,u,a,s,r,c){return{create:function(l){var m=[t,n,i,o,d,u,a,s],p={ViewType:r,name:"entity.quickAdd",extensions:m,template:c};return l["queue.bus"]=!0,l.dependencies=["finder.entity"],e.create(p,l)}}});
define('tau/ui/extensions/entity.quickAddTrigger/ui.extension.entity.quickAddTrigger',["jQuery","Underscore","tau/core/extension.base","tau/configurations/converters/converter.context","tau/configurations/factory.container.config"],function(e,t,n,i,o){return n.extend({"bus beforeInit":function(e,n){var a=n.config.options||{};a=t.defaults(a,{external:!1,items:[]}),a.external&&(a.items=o.getContextBasedConfigObject(n.config).originalConfigObject.getEntityQuickAddOptions().items);var r=n.config.context;a.items=i.convert(a.items,t.pluck(r.getPractices(),"name"),r.getEdition()),this.fire("options.ready",a),this.fire("dataBind",{isEmpty:0==a.items.length})},"bus beforeInit + options.ready + afterRender":function(e,t,n,i){var o=t.config.context.configurator,a=i.element;if(a.length){var r={target:a,appendMethod:"appendTo",cleanupOnHide:!0,stackName:"quickAddGeneral",showOnCreation:!1,zIndex:1e4,className:"tau-quick-add-dialog-general tau-quick-add-dialog-entity",hideOnScroll:!1,onShow:function(){o.getKeyBoardManager().pushHandler({})},onHide:function(){o.getKeyBoardManager().popHandler()},onPositionConfig:function(){return{my:"right top",at:"right+20 bottom",of:a,collision:"fit none",within:this.appendTo}},dontCloseSelectors:["#ui-datepicker-div"],componentsConfig:{components:[{name:"entity quick add",type:"entity.quickAdd",options:n}]}};this.fire("initBubble",r)}},"bus afterRender:last + destroy":function(e,t){var n=t.element;n.length&&n.data("ui-tauBubble")&&n.tauBubble("hide")}})});
define('tau/ui/templates/entity.quickAddTrigger/ui.template.entity.quickAddTrigger',["tau/core/templates-factory"],function(e){var i={name:"entity.quickAddTrigger",engine:"jqote2",markup:["<% if (!this.isEmpty){ %>",'<span class="tau-view-quick-add i-role-trigger"></span>',"<% } %>"]};return e.register(i)});
define('tau/components/component.entity.quickAddTrigger',["Underscore","tau/components/component.creator","tau/ui/extensions/entity.quickAddTrigger/ui.extension.entity.quickAddTrigger","tau/components/extensions/bubble/extension.bubble.creator","tau/components/extensions/component.creator.extension","tau/ui/templates/entity.quickAddTrigger/ui.template.entity.quickAddTrigger"],function(e,t,n,i,o,r){return{create:function(e){var u={extensions:[n,i,o],template:r};return t.create(u,e)}}});
define('tau/ui/templates/assignmentsList/ui.template.feature.assignmentsList.userList',["tau/core/templates-factory","tau/ui/templates/common/ui.template.user","tau/ui/templates/assignmentsList/ui.template.assignmentsList.addBtn"],function(e){var t={name:"feature-assignments-user-list",markup:['<div class="group" roleId="${role.id}">','<table class="role-header">',"   <tr>",'   <td class="role-title">','   {{tmpl "assignments-add-btn"}}',"&nbsp;${role.name}","   </td>","</tr>","</table>",'{{tmpl(users) "user"}}',"</div>"].join(""),dependencies:["user","assignments-add-btn"]};return e.register(t)});
define('tau/ui/templates/assignmentsList/ui.template.feature.assignmentsList',["tau/core/templates-factory","tau/ui/templates/assignmentsList/ui.template.feature.assignmentsList.userList","tau/ui/templates/common/ui.template.user"],function(e){var s={name:"feature-assignments-list",markup:['<table class="box assignments-table-readonly assignments-table">','   <tr class="title-row">','      <td class="user-list">','      {{tmpl(assignments.groups, {effortPoints: effortPoints}) "feature-assignments-user-list"}}',"      </td>","   </tr>","</table>"].join(""),dependencies:["feature-assignments-user-list","user"]};return e.register(s)});
define('tau/components/component.feature.assignmentList',["Underscore","tau/components/component.assignmentsList","tau/ui/templates/assignmentsList/ui.template.feature.assignmentsList"],function(e,t,n){return{create:function(s){return e(s).extend({template:n}),t.create(s)}}});
define('tau/models/model.feature.totalEffort',["tau/core/model-base","tau/core/termProcessor"],function(t,e){var i=t.extend({onInit:function(){var t=this,e=t.config.context,i=e.entity.entityType.name,s=e.entity.id;t.store.unbind(t),t.store.on({eventName:"afterSave",type:i,filter:{id:s},hasChanges:["userStories|effort"],listener:t},_.bind(t.onDataUpdated,t)),t.store.get(i,{id:s,fields:["id","userStories-count","effort"]},{scope:this,success:this.onGetEntity}).done({scope:this,success:this.onRequestCompleted})},onDataUpdated:function(){this.fire("refresh")},floatToString:function(t){return t.toFixed(2).replace(".00","")},_getEffortPoints:function(){return this.config.context.getEffortPoint().shortName},onGetEntity:function(t){if(this.config){var i=t.data,s=this.config.context.getTerms(),o=new e(s),r=i["userStories-count"];r>0?(this.userStoriesCount=r,this.featureTerm=o.getTerms("feature").name,this.userStoriesTerm=o.getTerms("userStory").names,this.effort=this.floatToString(i.effort),this.point=this._getEffortPoints(),this.hidden=!1):(this.label="",this.hidden=!0)}},onRequestCompleted:function(){this.fire("dataBind",{userStoriesCount:this.userStoriesCount,featureTerm:this.featureTerm,userStoriesTerm:this.userStoriesTerm,effort:this.effort,point:this.point,hidden:this.hidden})}});return i});
define('tau/ui/templates/feature/ui.template.totalEffort',["tau/core/templates-factory"],function(e){var t={name:"total-effort",markup:['<div style="',"{{if hidden}}","display:none","{{/if}}",'">',"{{if !hidden }}",'<div class="ui-total-effort">${featureTerm} has <span class="user-story-count">${userStoriesCount}</span> ${userStoriesTerm} with total effort <span class="effort">${effort}</span> ${point}</div>',"{{/if}}","</div>"],dependencies:[]};return e.register(t)});
define('tau/components/component.feature.totalEffort',["tau/components/component.creator","tau/models/model.feature.totalEffort","tau/ui/templates/feature/ui.template.totalEffort"],function(t,e,a){return{create:function(o){var r={ModelType:e,template:a};return t.create(r,o)}}});
define('tau/components/component.feedback',["tau/components/component.creator"],function(a){return{create:function(e){var t={name:"feedback-email",engine:"jqote2",markup:['<div class="tau-support-item">','   <a class="i-role-feedback" href="mailto:support@targetprocess.com">','       <span class="tau-support-icon tau-email"></span>','       <span class="tau-btn tau-btn-big">Submit issue</span>',"   </a>","</div>"]},n={template:t},s=a.create(n,e);return s.fire("dataBind",{}),s}}});
define('tau/models/finder.project/model.finder.project.byTeam',["Underscore","tau/core/extension.base","tau/configurations/factory.container.config"],function(e,t,r){return t.extend({resetLifecycle:!0,"bus beforeInit":function(e,t){var r=t.config.context.configurator;this.fire("configurator.ready",r),this.fire("entity.ready",t.config.context.entity)},"bus configurator.ready + entity.ready":function(t,r){var i=r.getStore(),n=e.bind(this.fire,this,"refresh");i.unbind(this),i.on({eventName:"afterSave",type:"team",listener:this,hasChanges:["teamProjects"]},n)},"bus configurator.ready:last + teamProjects.ready:last + activeTab.ready:last + beforeInit":function(t,i,n,o){var a=this,s=i.getStore(),c=[];c.push(e.bind(this._getList,this,s,"project",["id","name","color"],e.pluck(e.compact(e.pluck(n,"project")),"id"))),c.push(e.bind(this._getList,this,s,"process",["id","name","isDefault"],[])),e.parallel(c,function(e,t){var i=t[0],n=t[1];a.fire("dataBind",{projects:i,activeTab:o,canAddProjects:!0,teams:[],canAddTeams:!1,showTeams:!1,submitLabel:"Assign",showEmpty:!0,showSearch:i.length>20,colors:r.getConfigByType("project").prototype.colors,processes:n})})},_getList:function(t,r,i,n,o){t.get(r,{fields:i}).done({success:function(t){var r=t[0].data;r=e.filter(r,function(t){return-1==e.indexOf(n,t.id)}),r=e.sortBy(r,function(e){return e.name.toUpperCase()}),o(!1,r)}})},"bus configurator.ready:last + entity.ready":function(e,t,r){var i=this;t.getStore().get("team",{id:r.id,fields:[{teamProjects:[{project:["id","name"]}]}]}).done({success:function(e){i.fire("teamProjects.ready",e[0].data.teamProjects)}})},"bus configurator.ready:last + destroy":function(e,t){var r=t.getStore();r.unbind(this)}})});
define('tau/models/board.context.filter/model.board.context.filter.add.project',["Underscore","tau/core/extension.base","tau/libs/inviter/inviter"],function(e,r,t){return r.extend({"bus configurator.ready:last + project.add.ready":function(r,a,s){var o=this,i=a.getStore();i.save("project",{failureGlobal:!1,$set:{name:e.trim(s.name),color:e.trim(e.asString(s.color))||null,process:{id:s.process}}},{success:function(e){o.fire("project.saved",e.data)},failure:function(e){o.fire("project.add.failure",e.data.response.Message)}}).done();var n=new t(a);n.invite(s.members).done(function(e){o.fire("projectMembers.saved",e)})},"bus configurator.ready:last + project.add.ready + project.saved + projectMembers.saved":function(r,t,a,s,o){var i=this,n=t.getStore(),c=e.compact(e.pluck(o,"success")),d=e.compact(e.pluck(o,"failure"));if(d.length){var u="Can't assign users.";this.fire("project.add.nonFatalFailure",u)}c=e.filter(c,function(e){return e!=t.getLoggedUser().id});var f={projectMembers:e.map(c,function(e){return{user:{id:e}}})};n.save("project",{id:s.id,$set:f,fields:["id","name","color",{projectMembers:[{user:["id","firstName","lastName","avatarUri"]},{role:["id","name"]}]}]}).done(function(e){i.fire("projectMembers.connected",e[0].data)})},"bus project.saved + projectMembers.saved + projectMembers.connected":function(e,r,t,a){this.fire("project.add.success",a)}})});
define('tau/models/finder.project/model.finder.project.byTeam.connect',["Underscore","tau/core/extension.base"],function(e,t){return t.extend({"bus configurator.ready:last + entity.ready:last + form.submitted":function(e,t,n,c){var o=this,r=c.projectIds;this._connect(t,n,r).done(function(){o.fire("projects.connected",r)})},"bus configurator.ready:last + entity.ready:last + project.add.success":function(e,t,n,c){var o=this,r=[c.id];this._connect(t,n,r).done(function(){o.fire("projects.connected",r)})},_connect:function(t,n,c){var o=t.getStore(),r=[],i=[];e.forEach(c,function(e){i.push({project:{id:e}})}),r.push({id:n.id,type:"team",fields:["id","teamProjects"],data:{teamProjects:i}});var s=[function(e){o.evictProperties(n.id,n.entityType.name,["teamProjects"]),e()}];e.forEach(r,function(e){s.push(function(t){o.save(e.type,{id:e.id,fields:e.fields,$set:e.data}).done({success:function(e){t(!1,e[0].data)}})})});var a=$.Deferred();return e.parallel(s,function(){a.resolve(c)}),a}})});
define('tau/ui/extensions/tabs/ui.extension.tabs.modern',["Underscore","jQuery","tau/core/extension.base"],function(t,e,a){return a.extend({"bus initialize":function(){this.fire("activeTab.ready",null)},"bus activeTab.ready > refresh":function(t,e){this.fire("activeTab.ready",e)},"bus $el.ready":function(t,a){var i=this,n=a.find(".i-role-tabheader.tau-active");n.length&&this._switchTab(a,n,!0),a.on("click",".i-role-tabheader",function(){i._switchTab(a,e(this));i.fire("activeTab.ready",i._getActiveName(a))})},_switchTab:function(t,a,i){var n=t.find(".i-role-tabheader"),r=a.data("tab");n.not(a).each(function(){t.find(".i-role-tab-"+e(this).data("tab")).removeClass("tau-active")}).removeClass("tau-active");var s=t.find(".i-role-tab-"+r);return s.toggleClass("tau-active",i),s.hasClass("tau-active")&&this._applyFocus(s),a.toggleClass("tau-active",i),a},_applyFocus:function(t){t.find("form :submit:first:visible").focus(),t.find("form :text:first:visible").focus()},_getActiveName:function(t){return t.find(".i-role-tabheader.tau-active").data("tab")||null}})});
define('tau/ui/extensions/finder.projectAndTeam/ui.extension.finder.projectAndTeam.main',["Underscore","jQuery","tau/core/extension.base"],function(e,n,r){return r.extend({"bus afterRender":function(e,n){var r=n.element;this.fire("$el.ready",r)},"bus $list.ready":function(e,n){this.fire("view.component.rendered",{element:n})}})});
define('tau/ui/extensions/finder.projectAndTeam/ui.extension.finder.projectAndTeam.attach',["Underscore","jQuery","tau/core/extension.base"],function(e,t,i){return i.extend({"bus $teamSection.ready + $projectSection.ready + $list.ready":function(e,i,n,r){var c=this,o=r;o.delegate("[role=action-submit]","click",function(){var e={},r=i.find(".i-role-list :checked");e.teamIds=r.map(function(){return t(this).val()}),r=n.find(" .i-role-list :checked"),e.projectIds=r.map(function(){return t(this).val()}),c.fire("form.submitted",e)})}})});
define('tau/ui/extensions/finder.project/ui.extension.finder.project.bubble',["Underscore","jQuery","tau/core/extension.base"],function(e,r,i){return i.extend({"bus configurator.ready + $el.ready":function(e,i,t){var n=t,a=t;this.fire("$list.ready",a),this.fire("$bubbled.ready",n),this.fire("$popup.ready",a),this.fire("$teamSection.ready",r()),this.fire("$projectSection.ready",t),this.fire("$sections.ready",t)}})});
define('tau/ui/extensions/board.context.selector/ui.extension.board.context.selector.add.abstract',["Underscore","jQuery","tau/core/extension.base"],function(e,t,i){return i.extend({_selectText:function(e){e[0].setSelectionRange(0,e.val().length)},_initForm:function(e){var t=e.find(".i-role-form");setTimeout(function(){t.find(":submit:first").focus(),t.find(":text:first").focus()},10),e.find(".i-role-formtrigger").toggleClass("tau-active"),e.toggleClass("tau-managed-category_formactive_true"),t.on("reset",function(){t.find(":input").removeClass("tau-error"),t.find(":submit:first").focus(),t.find(":text:first").focus()}),t.on("click","[type=reset]",function(){e.removeClass("tau-managed-category_formactive_true"),e.find(".i-role-formtrigger").removeClass("tau-active")});var i=function(){t.find(":not(.disabled)").prop("disabled",!1),t.tauProgressIndicator("hide")};return t.on("entity.add.completed",i),t.on("entity.add.failed",i),t.tauProgressIndicator(),t},_addSubmitDataListener:function(e,i){e.on("submit",function(n){n.preventDefault();var r={};e.find(":input").each(function(){r[this.name]=this.value}),r.members=e.find("[name=users]").tauInviter("getValue",!0),r.connected=[];var a=e.find(".i-role-list :checked");a.each(function(){r.connected.push(t(this).val())}),e.find(":not(.disabled)").prop("disabled",!0),e.tauProgressIndicator("show"),i(r)})},_initRichSelect:function(e,i){var n=e.find(".i-role-currenticon");return i.on("change",function(){var e=i.val();n.trigger("change",e),n.attr("data-value",e||"default")}),e.delegate(".i-role-richselect .i-role-option","click",function(){var t=this.getAttribute("data-value");i.val(t),i.trigger("change"),e.find(":text:first").focus()}),n.parent().on("click",function(){t(this).toggleClass("tau-active"),e.find(".i-role-richselect").toggle()}),e.on("reset",function(){i.val(""),i.trigger("change")}),n},_addToList:function(t,i,n){n.selected=!0,n.isSupportView=!0;var r=i.bind({},n),a=(t.find(".i-role-form"),t.find(".i-role-list")),o=a.find(".i-role-item:first");o.length?o.after(r):a.append(r),a.parent().scrollTo(0,{duration:500}),r.addClass("tau-added"),e.delay(function(){r.removeClass("tau-added")},1500)},_resetProgressIndicator:function(e){e.tauProgressIndicator("hide"),e.find(":not(.disabled)").prop("disabled",!1)}})});
define('tau/ui/extensions/board.context.selector/ui.extension.board.context.selector.add.project',["Underscore","jQuery","tau/ui/extensions/board.context.selector/ui.extension.board.context.selector.add.abstract"],function(e,t,r){return r.extend({"bus $projectSection.ready":function(e,t){var r=this,o=this._initForm(t);this._addSubmitDataListener(o,function(e){r.fire("project.add.ready",e)});var i=o.find("select[name=color]"),a=this._initRichSelect(o,i);a.on("change",function(e,t){a.css("background-color",t)})},"bus configurator.ready:last + $projectSection.ready:last + project.add.success":function(e,t,r,o){this._addToList(r,t.getTemplateFactory().get("board.context.filter.projects.list"),o),r.find("form").trigger("reset"),r.removeClass("tau-managed-category_isempty_true"),this.fire("project.add.completed")},"bus $projectSection.ready:last + project.add.failure":function(e,t,r){t.find(".i-role-form :text:first").focus().select().addClass("tau-error"),this.fire("error",r)},"bus $projectSection.ready:last + project.add.nonFatalFailure":function(e,t,r){this.fire("error",r)}})});
define('tau/ui/extensions/inviter/ui.extension.inviter.widget.abstract',["Underscore","jQuery","tau/core/extension.base","./jquery.tauInviter"],function(e,n,t){return t.extend({_initTemplates:function(){},_initWidget:function(e,n,t){var i=n.find("[name=users]");i.tauInviter({configurator:e,allowEmails:!0,entityRestriction:t}),n.on("reset",function(){i.tauInviter("reset")})}})});
define('tau/ui/extensions/board.context.selector/ui.extension.board.context.selector.members-widget',["Underscore","jQuery","tau/ui/extensions/inviter/ui.extension.inviter.widget.abstract"],function(t,e,i){return i.extend({"bus configurator.ready":function(t,e){this._initTemplates(e)},"bus configurator.ready + $teamSection.ready":function(t,e,i){i.length&&this._initWidget(e,i)},"bus configurator.ready + $projectSection.ready":function(t,e,i){i.length&&this._initWidget(e,i)}})});
define('tau/ui/templates/finder.project/ui.template.finder.project',["tau/core/templates-factory","tau/ui/templates/board.context.filter/ui.template.board.context.filter.projects.list","tau/ui/templates/finder.project/ui.template.finder.project.add.form"],function(t){var a={name:"finder.project",engine:"jqote2",markup:['<div class="tau-team-control">','<div class="tau-actions i-role-tabheaders">','<div class="tau-assign-btn i-role-tabheader <% if (this.activeTab == "assign"){ %> tau-active <% } %>" data-tab="assign">',"<span></span>Assign to Project","</div>","<i>or</i>",'<div class="tau-new-project i-role-tabheader <% if (this.activeTab == "add"){ %> tau-active <% } %>" data-tab="add">',"<span></span>New project","</div>","</div>",'<div class="tau-tab-content">','<div class="tau-tab-pane tau-teams-list <% if (this.showSearch) { %>tau-teams-list_use_filter<% } %> i-role-tab-assign <% if (this.activeTab == "assign"){ %> tau-active <% } %> ">',"<% if (this.showSearch) { %>",'<div class="tau-search-team">','<span class="tau-inline-group tau-search">','<input name="filter" type="text" class="tau-in-text" placeholder="Search Projects" />','<button type="button" class="tau-btn tau-search"></button>',"</span>",'<i class="tau-pointer"></i>',"</div>","<% } %>",'<div class="tau-existing-team-holder">','<div class="tau-existing-team i-role-section-projects <% if (!this.projects.length) { %>tau-empty<% } %>">','<div class="tau-button-wrap">','<button class="tau-btn tau-primary" role="action-submit" type="button">Assign</button>',"</div>",'<ul class="tau-project-list tau-existing-team-list_cols_3 i-role-list">','<%= fn.sub("board.context.filter.projects.list", this.projects) %>',"</ul>",'<div class="tau-existing-team__message" data-text-nofound="No such project found" data-text-noitems="No available projects"></div>',"</div>","</div>","</div>",'<div class="tau-tab-pane tau-new-entity-holder  i-role-tab-add  <% if (this.activeTab == "add"){ %> tau-active <% } %> ">','<%= fn.sub("finder.project.add.form", this) %>',"</div>","</div>","</div>"]};return t.register(a)});
define('tau/components/component.finder.project.byTeam',["tau/components/component.creator","tau/models/finder.project/model.finder.project.byTeam","tau/models/board.context.filter/model.board.context.filter.add.project","tau/models/finder.project/model.finder.project.byTeam.connect","tau/ui/extensions/tabs/ui.extension.tabs.modern","tau/ui/extensions/finder.projectAndTeam/ui.extension.finder.projectAndTeam.main","tau/ui/extensions/finder.projectAndTeam/ui.extension.finder.projectAndTeam.attach","tau/ui/extensions/finder.project/ui.extension.finder.project.bubble","tau/ui/extensions/board.context.selector/ui.extension.board.context.selector.filter","tau/ui/extensions/board.context.selector/ui.extension.board.context.selector.selection","tau/ui/extensions/board.context.selector/ui.extension.board.context.selector.add.project","tau/ui/extensions/board.context.selector/ui.extension.board.context.selector.members-widget","tau/components/extensions/error/extension.errorBar","tau/ui/templates/finder.project/ui.template.finder.project"],function(e,t,n,o,r,i,s,a,c,u,d,x,l,m){return{create:function(b){b["queue.bus"]=!0;var p={"queue.bus":!0,extensions:[t,n,o,r,i,s,a,c,u,d,x,l],template:m};return e.create(p,b)}}});
define('tau/models/finder.project/model.finder.project.byUser',["Underscore","tau/core/extension.base","tau/configurations/factory.container.config"],function(e,t,r){return t.extend({resetLifecycle:!0,"bus beforeInit":function(e,t){var r=t.config.context.configurator;this.fire("configurator.ready",r),t.config.context.entity.type=t.config.context.entity.entityType.name.toLowerCase(),this.fire("entity.ready",t.config.context.entity)},"bus configurator.ready + entity.ready":function(t,r,n){var i=r.getStore(),o=e.bind(function(e){"removeFromList"==e.data.cmd.name&&this.fire("refresh")},this);r.getGlobalBus().on("teamsAndUsers.connected",function(){i.evictProperties(n.id,n.entityType.name,["projectMembers"]),this.fire("refresh")},this),i.unbind(this),i.on({eventName:"afterSave",type:"project",listener:this},o)},"bus configurator.ready:last + projectMembers.ready:last + activeTab.ready:last + beforeInit":function(t,n,i,o){var s=this,c=n.getStore(),a=[];a.push(e.bind(this._getList,this,c,"project",["id","name","color"],e.pluck(e.compact(e.pluck(i,"project")),"id"))),e.parallel(a,function(e,t){var n=t[0];s.fire("dataBind",{activeTab:o,teams:[],showProjects:!1,canAddProjects:!1,projects:n,canAddprojects:!0,submitLabel:"Assign",showEmpty:!0,showSearch:n.length>20,icons:r.getConfigByType("project").prototype.icons})})},_getList:function(t,r,n,i,o){t.get(r,{fields:n}).done({success:function(t){var r=t[0].data;r=e.filter(r,function(t){return-1==e.indexOf(i,t.id)}),r=e.sortBy(r,function(e){return e.name.toUpperCase()}),o(!1,r)}})},"bus configurator.ready:last + entity.ready":function(e,t,r){var n=this;t.getStore().get(r.type,{id:r.id,fields:[{projectMembers:[{project:["id","name"]}]}]}).done({success:function(e){n.fire("projectMembers.ready",e[0].data.projectMembers)}})},"bus configurator.ready:last + entity.ready:last + form.submitted":function(t,r,n,i){var o=this,s=r.getStore(),c=[];e.forEach(i.projectIds,function(e){c.push({id:e,type:"project",fields:["id","projectMembers"],data:{projectMembers:[{user:{id:n.id}}]}})});var a=[];e.forEach(c,function(e){a.push(function(t){s.save(e.type,{id:e.id,fields:e.fields,$set:e.data}).done({success:function(e){t(!1,e[0].data)}})})}),e.parallel(a,function(e,t){t.length&&r.getGlobalBus().fire("projectsAndUsers.connected",t),o.fire("refresh")})},"bus configurator.ready:last + destroy":function(e,t){t.getGlobalBus().unbind(this),t.getStore().unbind(this)}})});
define('tau/ui/templates/finder.project.byUser/ui.template.finder.project.byUser',["tau/core/templates-factory","tau/ui/templates/board.context.filter/ui.template.board.context.filter.projects.list"],function(t){var a={name:"finder.project.byUser",engine:"jqote2",markup:["<div>",'<div class="tau-actions i-role-tabheaders">','<div class="tau-assign-btn i-role-tabheader <% if (this.activeTab == "assign"){ %> tau-active <% } %>" data-tab="assign">',"<span></span>Assign to Project","</div>","</div>",'<div class="tau-tab-content">','<div class="tau-tab-pane  tau-projects-list <% if (this.showSearch) { %>tau-teams-list_use_filter<% } %> i-role-tab-assign <% if (this.activeTab == "assign"){ %> tau-active <% } %> ">',"<% if (this.showSearch) { %>",'<div class="tau-search-team">','<span class="tau-inline-group tau-search">','<input name="filter" type="text" class="tau-in-text" placeholder="Search Projects" tabindex="-1" />','<button type="button" class="tau-btn tau-search"></button>',"</span>",'<i class="tau-pointer"></i>',"</div>","<% } %>",'<div class="tau-existing-project-holder">','<div class="tau-existing-project i-role-section-projects <% if (!this.projects.length) { %>tau-empty<% } %>">','<div class="tau-button-wrap">','<button class="tau-btn tau-primary" role="action-submit" type="button">Assign</button>',"</div>",'<ul class="tau-project-list i-role-list">','<%= fn.sub("board.context.filter.projects.list", this.projects) %>',"</ul>",'<div class="tau-existing-project__message" data-text-nofound="No such project found" data-text-noitems="No available projects"></div>',"</div>","</div>","</div>","</div>","</div>"]};return t.register(a)});
define('tau/components/component.finder.project.byUser',["tau/components/component.creator","tau/models/finder.project/model.finder.project.byUser","tau/ui/extensions/tabs/ui.extension.tabs.modern","tau/ui/extensions/finder.projectAndTeam/ui.extension.finder.projectAndTeam.main","tau/ui/extensions/finder.projectAndTeam/ui.extension.finder.projectAndTeam.attach","tau/ui/extensions/finder.project/ui.extension.finder.project.bubble","tau/ui/extensions/board.context.selector/ui.extension.board.context.selector.filter","tau/ui/extensions/board.context.selector/ui.extension.board.context.selector.selection","tau/components/extensions/error/extension.errorBar","tau/ui/templates/finder.project.byUser/ui.template.finder.project.byUser"],function(e,t,n,o,r,i,s,u,a,c){return{create:function(d){d["queue.bus"]=!0;var x={"queue.bus":!0,extensions:[t,n,o,r,i,s,u,a],template:c};return e.create(x,d)}}});
define('tau/models/finder.requesters/model.finder.requesters.search',["Underscore","tau/core/class","tau/core/model-base"],function(e,t,i){var r=t.extend({init:function(){this._collection=null,this._parameters=[],this._values={},this._fields=[],this._page=1,this._onPage=10,this._orderBy=null,this._orderDir="asc"},setFields:function(e){this._fields=e},setCollection:function(e){this._collection=e},registerParameters:function(t){this._parameters=e.toArray(t)},setParameter:function(t,i){if(-1==e.indexOf(this._parameters,t))throw new Error('No "'+t+'" parameter for query');this._values[t]=i},setOnPage:function(e){this._onPage=e},setPage:function(e){this._page=e||1},setOrderBy:function(e){this._orderBy=e},setOrderDir:function(e){this._orderDir=e},create:function(){var e={};e.collection=this.createCollection();var t={};t.fields=this._fields,t.$query=this.createWhere();var i=this.createPaging();t.$skip=i.skip,t.$limit=i.limit;var r="asc"==this._orderDir?"$orderBy":"$orderByDesc";return t[r]=this.createOrderBy(),e.request=t,e},createCollection:function(){return this._collection},createWhere:function(){var t={};return e.forEach(this._values,function(e,i){t[i]=e}),t},createOrderBy:function(){return this._orderBy||"id"},createPaging:function(){var e={limit:this._onPage,skip:0};return e.skip=(this._page-1)*this._onPage,e}}),s=r.extend({init:function(){this._super(),this.registerParameters(["name","email","type","projectId","companyId","action"])},createCollection:function(){var e=this._super();if(this._values.type){var t=this._values.type;"User"==t?e="User":"Requester"==t&&(e="Requester")}return this._values.companyId&&(e="Requester"),e},createWhere:function(){var e={};return this._values.type||(e.kind={$in:["User","Requester"]}),e.isActive=1,e.deleteDate={$isNull:!0},"reset"==this._values.action?e:(void 0!==this._values.name&&(e.lastName={$contains:this._values.name}),void 0!==this._values.email&&(e.email={$contains:this._values.email}),this._values.companyId&&"Requester"==this.createCollection()&&(e["company.id"]=this._values.companyId),e)}}),a=t.extend({init:function(e){this.items=e.data;var t=e.command,i=e.data.length;this.paging={start:t.config.$skip,end:t.config.$skip+i,count:i,hasNext:e.data.isNextPageAvailable()}}}),n=i.extend({"bus beforeInit":function(e){this.config=e.data.config;var t=this.config.store,i=this,r=this.config.actions||[];this.config.emptyDataMessage=this.config.emptyDataMessage||"No data found",t.get("company",{fields:["id","name"]}).done({success:function(e){i.fire("dataBind",{actions:r,result:null,filter:{companies:e[0].data}})}});var a=new s;a.setCollection("generalUser"),a.setOnPage(15),a.setFields(["id","firstName","lastName","email","login"]),a.setOrderBy("id"),a.setOrderDir("desc"),this.builder=a,i.fire("search.parametersBound",{parameters:{}})},"bus search.readyToExecute":function(){var e=this.builder.create(),t=this;this.config.store.find(e.collection,e.request).done({success:function(e){var i=new a(e[0]);t.fire("search.completed",{result:i})}})},"bus search.completed":function(e){this.fire("result.ready",{data:{result:e.data.result}})},"bus search.parametersBound":function(t){var i=t.data.parameters,r=this.builder;e.forEach(i,function(e,t){e?r.setParameter(t,e):r.setParameter(t,void 0)}),r.setPage(0),this.fire("search.readyToExecute")},"bus search.pagingBound":function(){var e=this.builder;e.setPage(e._page+1),this.fire("search.readyToExecute")},"bus search.orderBound":function(e){var t=this.builder;t.setOrderBy(e.data.value),t.setOrderDir(e.data.dir),t.setPage(1),this.fire("search.readyToExecute")}});return n});
define('tau/models/finder.requesters/model.finder.requesters.add',["Underscore","tau/core/extension.base"],function(e,t){return t.extend({"bus afterInit:last + entitySelected":function(e,t,n){var i=n.entity,o=t.config.context.configurator.getStore(),c=t.config.context.entity;o.save(c.entityType.name,{id:c.id,$set:{requesters:[{id:i.id}]},fields:["id"]}).done({success:function(){}})}})});
define('tau/ui/extensions/finder.requesters/ui.extension.finder.requesters.list',["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/behaviour/common/ui.behaviour.listSelectable"],function(t,e,i){return i.extend({"bus afterRender":function(t){var e=t.data.element;this.$list=e.find("[role=list]");var i=e.find("[role=list-placeholder]");this.$listPlaceholder=i,this.first=!0,this.$listPlaceholder.listSelectable({items:"[role=option]",className:"tau-result-list-row_hover",inner:"table",keyboardManager:this.config.context.configurator.getKeyBoardManager()}),this.attachScrollingEvents(i),this.attachSortingEvents(e.find("[role=list-sorting]")),this.setScrollAvailable(!1),this._signUpOnActionsAndSelection(e)},"bus result.ready":function(t){var e=this.$listPlaceholder,i=e.data("ui-listSelectable")._index;e.listSelectable("disable");var s=t.data.data.result,l=this.config.templateList,a=l.get().bind(this.config,s);0==s.paging.start&&(this.$list.empty(),i=-1,0==s.paging.count&&e.toggleClass("tau-finder__result_state_empty",!0)),this.setScrollAvailable(s.paging.hasNext),a.find("[role=option]").appendTo(this.$list),e.toggleClass("tau-finder__result_state_loading",!1),s.paging.count>0&&e.toggleClass("tau-finder__result_state_empty",!1),e.listSelectable("enable",{saveScroll:!0}),e.data("ui-listSelectable")._index=i,this.first&&(setTimeout(function(){e.scrollTop(0)},100),this.first=!1)},"bus scroll.reachEnd":function(){this.scrollAvailable&&this.bus.fire("search.pagingBound")},setScrollAvailable:function(t){this.scrollAvailable=t},attachScrollingEvents:function(t){var e=this;t.scroll(function(){t.scrollTop()+t.innerHeight()>=t[0].scrollHeight&&e.bus.fire("scroll.reachEnd")})},attachSortingEvents:function(t){var i=t.find("[role=sorting]"),s=this;t.delegate("[role=sorting]","click",function(){var t="tau-finder__sorttrigger_dir_",l=e(this),a=l.hasClass(t+"desc")?"asc":"desc";i.toggleClass(t+"desc",!1),i.toggleClass(t+"asc",!1),i.toggleClass("tau-finder__sorttrigger_state_active",!1),l.toggleClass(t+a,!0),l.toggleClass("tau-finder__sorttrigger_state_active",!0);var n=l.val();s.bus.fire("search.orderBound",{value:n,dir:a})})},_signUpOnActionsAndSelection:function(t){var i=this;t.delegate("[role=option]","click",function(){var t=e(this),s=t.data("tmplItem");if(s){var l=s.data;l&&i.bus.fire("entitySelected",{entity:l})}})}})});
define('tau/ui/extensions/finder.requesters/ui.extension.finder.requesters.filter',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,a,t){return t.extend({"bus afterRender":function(t){var n=t.data.element,i=n.find("[role=filter]"),r=i.find(":input"),s=i.find(":button"),o=this;this.state="clear",s.prop("disabled","disabled"),s.addClass("disable"),r.bind("change keyup",function(){o.state="dirty",s.prop("disabled",!1),s.removeClass("disable")});var d=function(t){var n={};r.each(function(){var t=a(this),i=e.trim(t.val());n[t.attr("name")]=i}),n.action=t,o.bus.fire("search.parametersBound",{parameters:n})};r.bind("keydown",function(e){switch(e.keyCode){case a.ui.keyCode.ENTER:d("search"),e.stopPropagation(),e.preventDefault();break;case a.ui.keyCode.DOWN:a(this).is("input")?a(this).blur():(e.stopPropagation(),e.preventDefault())}}),s.eq(0).click(function(){d(a(this).val())}),s.eq(1).click(function(){var t={};r.each(function(){var n=a(this);n.val(null);var i=e.trim(n.val());t[n.attr("name")]=i}),t.action=a(this).val(),o.bus.fire("search.parametersBound",{parameters:t}),s.prop("disabled","disabled"),s.addClass("disable"),r.filter("[data-autofocus]").focus()});var l=r.filter("[name=companyId]"),c=r.filter("[name=type]"),u=function(){"User"==c.val()?(l.val(null),l.prop("disabled","disabled")):l.prop("disabled",!1)};u(),c.on("change",u)}})});
define('tau/ui/templates/finder.requesters/ui.template.finder.resultList.row',["tau/core/templates-factory"],function(e){var t={name:"finder-requesters-resultList-row",markup:['<tr class="tau-result-list-row" role="option">','<td class="tau-finder__cell tau-finder__cell-name">',"{{if firstName || lastName}}","${firstName} ${lastName}","{{else}}","${email}","{{/if}}","</td>",'<td class="tau-finder__cell tau-finder__cell-email">${email}</td>','<td class="tau-finder__cell tau-finder__cell-login">${login}</td>',"</tr>"]};return e.register(t)});
define('tau/ui/templates/finder.requesters/ui.template.finder.resultList',["tau/core/templates-factory","tau/ui/templates/finder.requesters/ui.template.finder.resultList.row"],function(t){var e={name:"finder-requesters-resultList",markup:['<table class="tau-finder__table">',"<thead>",'<tr role="list-sorting">','<th class="tau-finder__cell tau-finder__cell-name">','<button type="button" class="tau-finder__sorttrigger" role="sorting" value="firstName">Name</button>',"</th>",'<th class="tau-finder__cell tau-finder__cell-email">','<button type="button" class="tau-finder__sorttrigger" role="sorting" value="email">Email</button>',"</th>",'<th class="tau-finder__cell tau-finder__cell-login">','<button type="button" class="tau-finder__sorttrigger" role="sorting" value="login">Login</button>',"</th>","</tr>","</tbody>","</table>",'<div class="ui-resultList tau-finder__result tau-finder__result_state_loading" role="list-placeholder">','<div class="tau-no-results  tau-finder__result__empty">No requesters found.</div>','<table class="tau-finder__table">','<tbody role="list">',"{{if items}}",'{{tmpl(items) "finder-requesters-resultList-row"}}',"{{/if}}","</tbody>","</table>",'<div class="tau-resultList-load-more tau-finder__result__loader">loading users...</div>',"</div>"],dependencies:["finder-requesters-resultList-row"]};return t.register(e)});
define('tau/ui/templates/finder.requesters/ui.template.finder.action',["tau/core/templates-factory"],function(e){var a={name:"finder-requesters-action",markup:["<span id='${id}' class='action-link tau-finder-action'>${name}</span>"]};return e.register(a)});
define('tau/ui/templates/finder.requesters/ui.template.finder.filter',["tau/core/templates-factory"],function(e){var o={name:"finder-requesters-filter",markup:['<div class="ui-form">','<div class="ui-form__group">','<div class="ui-form__cols">','<label for="name">Last Name</label>','<input type="text" name="name" />',"</div>",'<div class="ui-form__cols">','<label for="email">Email</label>','<input data-autofocus type="text" name="email" />',"</div>","</div>",'<div class="ui-form__group">','<div class="ui-form__cols">','<label for="type">User Type</label>','<select name="type">','<option value="">All</option>','<option value="Requester">Requesters</option>','<option value="User">Users</option>',"</select>","</div>",'<div class="ui-form__cols">','<label for="type">Company</label>','<select name="companyId">','<option value="">All</option>',"{{each(i, company) filter.companies}}",'<option value="${company.id}">${company.name}</option>',"{{/each}}","</select>","</div>","</div>",'<div class="ui-form__group">','<div class="ui-form__row ui-form__row-controls button-group">','<button type="button" name="action" value="search" class="button" >Filter</button>','<button type="button" name="action" value="reset" class="button" >Clear</button>',"</div>","</div>","</div>"],dependencies:[]};return e.register(o)});
define('tau/ui/templates/finder.requesters/ui.template.finder',["tau/core/templates-factory","tau/ui/templates/finder.requesters/ui.template.finder.resultList","tau/ui/templates/finder.requesters/ui.template.finder.action","tau/ui/templates/finder.requesters/ui.template.finder.filter"],function(e){var r={name:"finder-requesters",markup:['<div class="ui-finder-placeHolder">','<div class="ui-finder-header">','<div class="visual-search ui-drop-down" role="filter">','{{tmpl() "finder-requesters-filter"}}',"</div>","</div>",'{{tmpl(result) "finder-requesters-resultList"}}',"</div>"],dependencies:["finder-requesters-resultList","finder-requesters-action","finder-requesters-filter"]};return e.register(r)});
define('tau/components/component.finder.requesters',["tau/components/component.creator","tau/models/finder.requesters/model.finder.requesters.search","tau/models/finder.requesters/model.finder.requesters.add","tau/ui/extensions/finder.requesters/ui.extension.finder.requesters.list","tau/ui/extensions/finder.requesters/ui.extension.finder.requesters.filter","tau/ui/templates/finder.requesters/ui.template.finder","tau/ui/templates/finder.requesters/ui.template.finder.resultList"],function(e,t,r,s,n,i,u){return{create:function(a){var d={name:"finder",extensions:[t,r,s,n],template:i};return a.templateList=u,e.create(d,a)}}});
define('tau/models/finder.team/model.finder.team.byProject',["Underscore","tau/core/extension.base","tau/configurations/factory.container.config"],function(t,e,n){return e.extend({resetLifecycle:!0,"bus beforeInit":function(t,e){var n=e.config.context.configurator;this.fire("configurator.ready",n),e.config.context.entity.type=e.config.context.entity.entityType.name.toLowerCase(),this.fire("entity.ready",e.config.context.entity)},"bus configurator.ready + entity.ready":function(e,n,i){var a=n.getStore(),r=t.bind(this.fire,this,"refresh");a.unbind(this),a.on({eventName:"afterSave",type:i.type,listener:this,hasChanges:["teamProjects"]},r)},"bus configurator.ready:last + teamProjects.ready:last + activeTab.ready:last + beforeInit":function(e,i,a,r){var o=this,s=i.getStore(),c=[];c.push(t.bind(this._getList,this,s,"team",["id","name","icon"],t.pluck(t.compact(t.pluck(a,"team")),"id"))),t.parallel(c,function(t,e){var i=e[0];o.fire("dataBind",{activeTab:r,projects:[],showProjects:!1,canAddProjects:!1,teams:i,canAddTeams:!0,submitLabel:"Assign",showEmpty:!0,showSearch:i.length>20,icons:n.getConfigByType("team").prototype.icons})})},_getList:function(e,n,i,a,r){e.get(n,{fields:i}).done({success:function(e){var n=e[0].data;n=t.filter(n,function(e){return-1==t.indexOf(a,e.id)}),n=t.sortBy(n,function(t){return t.name.toUpperCase()}),r(!1,n)}})},"bus configurator.ready:last + entity.ready":function(t,e,n){var i=this;e.getStore().get(n.type,{id:n.id,fields:[{teamProjects:[{team:["id","name"]}]}]}).done({success:function(t){i.fire("teamProjects.ready",t[0].data.teamProjects)}})},"bus configurator.ready:last + destroy":function(t,e){var n=e.getStore();n.unbind(this)}})});
define('tau/models/board.context.filter/model.board.context.filter.add.team',["Underscore","tau/core/extension.base","tau/libs/inviter/inviter"],function(e,a,t){return a.extend({"bus configurator.ready:last + team.add.ready":function(a,r,n){var i=this,s=r.getStore();s.save("team",{failureGlobal:!1,$set:{name:e.trim(n.name),icon:e.trim(e.asString(n.icon))||null}},{success:function(e){i.fire("team.saved",e.data)},failure:function(e){i.fire("team.add.failure",e.data.response.Message)}}).done();var d=new t(r);d.invite(n.members).done(function(e){i.fire("teamMembers.saved",e)})},"bus configurator.ready:last + team.add.ready + team.saved + teamMembers.saved":function(a,t,r,n,i){var s=this,d=t.getStore(),m=e.compact(e.pluck(i,"success")),o=e.compact(e.pluck(i,"failure"));if(o.length){var u="Can't assign users.";this.fire("team.add.nonFatalFailure",u)}m=e.filter(m,function(e){return e!=t.getLoggedUser().id});var c={teamMembers:e.map(m,function(e){return{user:{id:e}}})};d.save("team",{id:n.id,$set:c,fields:["id","name","icon",{teamMembers:[{user:["id","firstName","lastName","avatarUri"]},{role:["id","name"]}]}]}).done(function(e){s.fire("teamMembers.connected",e[0].data)})},"bus team.saved + teamMembers.saved + teamMembers.connected":function(e,a,t,r){this.fire("team.add.success",r)}})});
define('tau/models/finder.team/model.finder.team.byProject.connect',["Underscore","tau/core/extension.base"],function(e,t){return t.extend({"bus configurator.ready:last + entity.ready:last + form.submitted":function(t,i,a,s){var r=this,d=i.getStore(),n=[],o=[];e.forEach(s.teamIds,function(e){o.push({team:{id:e}})}),n.push({id:a.id,type:a.type,fields:["id","teamProjects"],data:{teamProjects:o}});var c=[function(e){d.evictProperties(a.id,a.type,["teamProjects"]),e()}];e.forEach(n,function(e){c.push(function(t){d.save(e.type,{id:e.id,fields:e.fields,$set:e.data}).done({success:function(e){t(!1,e[0].data)}})})}),e.parallel(c,function(){r.fire("refresh")})},"bus configurator.ready:last + entity.ready:last + team.add.success":function(t,i,a,s){var r=this,d=i.getStore(),n=[];n.push({id:a.id,type:a.type,fields:["id","teamProjects"],data:{teamProjects:[{team:{id:s.id}}]}});var o=[function(e){d.evictProperties(a.id,a.type,["teamProjects"]),e()}];e.forEach(n,function(e){o.push(function(t){d.save(e.type,{id:e.id,fields:e.fields,$set:e.data}).done({success:function(e){t(!1,e[0].data)}})})}),e.parallel(o,function(){r.fire("refresh")})}})});
define('tau/ui/extensions/finder.team/ui.extension.finder.team.bubble',["Underscore","jQuery","tau/core/extension.base"],function(e,r,i){return i.extend({"bus configurator.ready + $el.ready":function(e,i,t){var n=t,a=t;this.fire("$list.ready",a),this.fire("$bubbled.ready",n),this.fire("$popup.ready",a),this.fire("$teamSection.ready",t),this.fire("$projectSection.ready",r()),this.fire("$sections.ready",t)}})});
define('tau/ui/extensions/board.context.selector/ui.extension.board.context.selector.add.team',["Underscore","jQuery","tau/ui/extensions/board.context.selector/ui.extension.board.context.selector.add.abstract"],function(e,t,a){return a.extend({"bus $teamSection.ready":function(e,t){var a=this,r=this._initForm(t);this._addSubmitDataListener(r,function(e){a.fire("team.add.ready",e)});var i=r.find("select"),n=this._initRichSelect(r,i);n.on("change",function(e,t){var a=n.attr("data-value");n.removeClass("tau-icon_name_"+a),n.addClass("tau-icon_name_"+(t||"default"))})},"bus configurator.ready:last + $teamSection.ready:last + team.add.success":function(e,t,a,r){this._addToList(a,t.getTemplateFactory().get("board.context.filter.teams.list"),r),a.find("form").trigger("reset"),a.removeClass("tau-managed-category_isempty_true"),this.fire("team.add.completed")},"bus $teamSection.ready:last + team.add.failure":function(e,t,a){t.find(".i-role-form :text:first").focus().select().addClass("tau-error"),this.fire("error",a)},"bus $teamSection.ready:last + team.add.nonFatalFailure":function(e,t,a){this.fire("error",a)}})});
define('tau/ui/templates/finder.team/ui.template.finder.team',["tau/core/templates-factory","tau/ui/templates/board.context.filter/ui.template.board.context.filter.teams.list","tau/ui/templates/finder.team/ui.template.finder.team.add.form"],function(t){var a={name:"finder.team",engine:"jqote2",markup:['<div class="tau-team-control">','<div class="tau-actions i-role-tabheaders">','<div class="tau-assign-btn i-role-tabheader <% if (this.activeTab == "assign"){ %> tau-active <% } %>" data-tab="assign">',"<span></span>Assign to Team","</div>","<i>or</i>",'<div class="tau-new-team i-role-tabheader <% if (this.activeTab == "add"){ %> tau-active <% } %>" data-tab="add">',"<span></span>New team","</div>","</div>",'<div class="tau-tab-content">','<div class="tau-tab-pane tau-teams-list <% if (this.showSearch) { %>tau-teams-list_use_filter<% } %> i-role-tab-assign <% if (this.activeTab == "assign"){ %> tau-active <% } %> ">',"<% if (this.showSearch) { %>",'<div class="tau-search-team">','<span class="tau-inline-group tau-search">','<input name="filter" type="text" class="tau-in-text" placeholder="Search Teams" />','<button type="button" class="tau-btn tau-search"></button>',"</span>",'<i class="tau-pointer"></i>',"</div>","<% } %>",'<div class="tau-existing-team-holder">','<i class="tau-pointer"></i>','<div class="tau-existing-team i-role-section-teams <% if (!this.teams.length) { %>tau-empty<% } %>">','<div class="tau-button-wrap">','<button class="tau-btn tau-primary" role="action-submit" type="button">Assign</button>',"</div>",'<ul class="tau-existing-team-list tau-existing-team-list_cols_3 i-role-list">','<%= fn.sub("board.context.filter.teams.list", this.teams) %>',"</ul>",'<div class="tau-existing-team__message" data-text-nofound="No such team found" data-text-noitems="No available teams"></div>',"</div>","</div>","</div>",'<div class="tau-tab-pane tau-new-entity-holder  i-role-tab-add  <% if (this.activeTab == "add"){ %> tau-active <% } %> ">','<%= fn.sub("finder.team.add.form", this) %>',"</div>","</div>","</div>"]};return t.register(a)});
define('tau/components/component.finder.team.byProject',["tau/components/component.creator","tau/models/finder.team/model.finder.team.byProject","tau/models/board.context.filter/model.board.context.filter.add.team","tau/models/finder.team/model.finder.team.byProject.connect","tau/ui/extensions/tabs/ui.extension.tabs.modern","tau/ui/extensions/finder.projectAndTeam/ui.extension.finder.projectAndTeam.main","tau/ui/extensions/finder.projectAndTeam/ui.extension.finder.projectAndTeam.attach","tau/ui/extensions/finder.team/ui.extension.finder.team.bubble","tau/ui/extensions/board.context.selector/ui.extension.board.context.selector.filter","tau/ui/extensions/board.context.selector/ui.extension.board.context.selector.selection","tau/ui/extensions/board.context.selector/ui.extension.board.context.selector.add.team","tau/ui/extensions/board.context.selector/ui.extension.board.context.selector.members-widget","tau/components/extensions/error/extension.errorBar","tau/ui/templates/finder.team/ui.template.finder.team"],function(e,t,n,o,i,r,a,s,u,d,c,m,x,l){return{create:function(b){b["queue.bus"]=!0;var f={"queue.bus":!0,extensions:[t,n,o,i,r,a,s,u,d,c,m,x],template:l};return e.create(f,b)}}});
define('tau/models/finder.team/model.finder.team.byUser',["Underscore","tau/core/extension.base","tau/configurations/factory.container.config"],function(e,t,n){return t.extend({resetLifecycle:!0,"bus beforeInit":function(e,t){var n=t.config.context.configurator;this.fire("configurator.ready",n),t.config.context.entity.type=t.config.context.entity.entityType.name.toLowerCase(),this.fire("entity.ready",t.config.context.entity)},"bus configurator.ready + entity.ready":function(t,n){var i=n.getStore(),a=e.bind(function(e){"removeFromList"==e.data.cmd.name&&this.fire("refresh")},this);i.unbind(this),i.on({eventName:"afterSave",type:"team",listener:this},a)},"bus configurator.ready:last + teamMembers.ready:last + activeTab.ready:last + beforeInit":function(t,i,a,r){var s=this,o=i.getStore(),c=[];c.push(e.bind(this._getList,this,o,"team",["id","name","icon"],e.pluck(e.compact(e.pluck(a,"team")),"id"))),e.parallel(c,function(e,t){var i=t[0];s.fire("dataBind",{activeTab:r,projects:[],showProjects:!1,canAddProjects:!1,teams:i,canAddTeams:!0,submitLabel:"Assign",showEmpty:!0,showSearch:i.length>20,icons:n.getConfigByType("team").prototype.icons})})},_getList:function(t,n,i,a,r){t.get(n,{fields:i}).done({success:function(t){var n=t[0].data;n=e.filter(n,function(t){return-1==e.indexOf(a,t.id)}),n=e.sortBy(n,function(e){return e.name.toUpperCase()}),r(!1,n)}})},"bus configurator.ready:last + entity.ready":function(e,t,n){var i=this;t.getStore().get(n.type,{id:n.id,fields:[{teamMembers:[{team:["id","name"]}]}]}).done({success:function(e){i.fire("teamMembers.ready",e[0].data.teamMembers)}})},"bus configurator.ready:last + entity.ready:last + form.submitted":function(t,n,i,a){var r=this,s=n.getStore(),o={id:i.id,fields:["id",{teamMembers:[{user:["id"]}]}],$set:{teamMembers:[]}};e.forEach(a.teamIds,function(e){o.$set.teamMembers.push({team:{id:e}})}),s.save(i.entityType.name,o).done({success:function(e){e.length&&e[0].data.teamMembers.length&&n.getGlobalBus().fire("teamsAndUsers.connected",e[0].data.teamMembers),r.fire("refresh")}})},"bus configurator.ready:last + destroy":function(e,t){var n=t.getStore();n.unbind(this)}})});
define('tau/ui/templates/finder.team.byUser/ui.template.finder.team.byUser',["tau/core/templates-factory","tau/ui/templates/board.context.filter/ui.template.board.context.filter.teams.list"],function(t){var a={name:"finder.team.byUser",engine:"jqote2",markup:["<div>",'<div class="tau-actions i-role-tabheaders">','<div class="tau-assign-btn i-role-tabheader <% if (this.activeTab == "assign"){ %> tau-active <% } %>" data-tab="assign">',"<span></span>Assign to Team","</div>","</div>",'<div class="tau-tab-content">','<div class="tau-tab-pane tau-teams-list <% if (this.showSearch) { %>tau-teams-list_use_filter<% } %> i-role-tab-assign <% if (this.activeTab == "assign"){ %> tau-active <% } %> ">',"<% if (this.showSearch) { %>",'<div class="tau-search-team">','<span class="tau-inline-group tau-search">','<input name="filter" type="text" class="tau-in-text" placeholder="Search Teams" />','<button type="button" class="tau-btn tau-search"></button>',"</span>",'<i class="tau-pointer"></i>',"</div>","<% } %>",'<div class="tau-existing-team-holder">','<div class="tau-existing-team i-role-section-teams <% if (!this.teams.length) { %>tau-empty<% } %>">','<div class="tau-button-wrap">','<button class="tau-btn tau-primary" role="action-submit" type="button">Assign</button>',"</div>",'<ul class="tau-existing-team-list i-role-list">','<%= fn.sub("board.context.filter.teams.list", this.teams) %>',"</ul>",'<div class="tau-existing-team__message" data-text-nofound="No such team found" data-text-noitems="No available teams"></div>',"</div>","</div>","</div>","</div>","</div>"]};return t.register(a)});
define('tau/components/component.finder.team.byUser',["tau/components/component.creator","tau/models/finder.team/model.finder.team.byUser","tau/ui/extensions/tabs/ui.extension.tabs.modern","tau/ui/extensions/finder.projectAndTeam/ui.extension.finder.projectAndTeam.main","tau/ui/extensions/finder.projectAndTeam/ui.extension.finder.projectAndTeam.attach","tau/ui/extensions/finder.team/ui.extension.finder.team.bubble","tau/ui/extensions/board.context.selector/ui.extension.board.context.selector.filter","tau/ui/extensions/board.context.selector/ui.extension.board.context.selector.selection","tau/components/extensions/error/extension.errorBar","tau/ui/templates/finder.team.byUser/ui.template.finder.team.byUser"],function(e,t,n,o,i,r,s,a,u,c){return{create:function(d){d["queue.bus"]=!0;var m={"queue.bus":!0,extensions:[t,n,o,i,r,s,a,u],template:c};return e.create(m,d)}}});
define('tau/models/model.finish-iteration',["jQuery","Underscore","tau/core/model-base","tau/utils/utils.date"],function(t,e,i,n){return i.extend({init:function(){this.name="Finish Iteration",this._super.apply(this,arguments)},onInit:function(){var t=this.config.context.entity,i={iteration:"project",teamiteration:"team"},n=i[t.type];if(!n)throw"It's only possible to use only iterations and team iterations here. Actual "+t.type;var s={};s[n]=["id"],this.store.get(t.type,{id:t.id,fields:["id","name","startDate","endDate",s]},{scope:this,success:e.bind(this.onIterationRetrieved,this,n)}).done()},"bus beforeInit:last + finishIteration":function(t,i,n){var s=i.config.context.configurator,a=s.getActionsService();this.fire("beforeFinishIteration");var o={iteration:"finishIteration",teamIteration:"finishTeamIteration"},r=o[n.type];if(!r)throw"It's only possible to use only iterations and team iterations here. Actual "+n.type;a[r](n.from,n.to,n.useMoveInsteadSplit,e.bind(this._finishIsSuccessful,this),e.bind(this._finishIsFailed,this))},_finishIsSuccessful:function(){this.fire("iterationIsFinished",{successful:!0})},_finishIsFailed:function(e){var i=t.parseJSON(e.responseText).Message;this.fire("iterationIsFinished",{successful:!1,reason:i})},_convertIterationDates:function(t){return t.startDate=n.convertToTimezone(t.startDate),t.endDate=n.convertToTimezone(t.endDate),t},onIterationsRetrieved:function(t,i){var n=e(i.data).chain().map(this._convertIterationDates).sortBy(function(t){return+t.startDate}).value();this.fire("dataBind",{iteration:this._convertIterationDates(t),iterations:n})},onIterationRetrieved:function(t,i){var n=i.data,s={};s[t+".id"]={$eq:n[t].id},s.id={$ne:n.id},this.store.find(n.__type,{fields:["id","name","startDate","endDate"],$query:s,$orderBy:"startDate"},{scope:this,success:e.bind(this.onIterationsRetrieved,this,n)}).done()}})});
define('tau/components/extensions/finishIteration/extension.finish-iteration',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,i,t){return t.extend({"bus dataBind":function(e,i){i.iterations.length<1&&(this.config.context.configurator.service("errorBar").fire("error",{message:"There're no other iterations, so you can't move the work that is not finished"}),this._close(i))},"bus afterRender + dataBind":function(i,t,n){var o=t.element,r=o.find("#tau-submit-finish-iteration");r.on("click",e.bind(function(e){e.preventDefault(),this._finishIteration(n.iteration,o),r.prop("disabled",!0),o.find(".tau-loader").show()},this))},"bus afterRender + dataBind + iterationIsFinished":function(e,i,t,n){i.element.find("#tau-submit-finish-iteration").prop("disabled",!1),i.element.find(".tau-loader").hide();var o=this.config.context.configurator.service("errorBar");if(n.successful){var r=t.iteration.name+" is finished";o.fire("notification",{message:r})}else o.fire("error",{message:n.reason});this._close(t.iteration)},_close:function(e){var i=e.id,t=this.config.context.configurator,n=t.getHistory();t.service("navigator").back(!1),n.exclude(i)},_finishIteration:function(e,i){var t={};t.type=e.__type,t.from=e.id,t.to=parseInt(i.find("#to-iteration").val(),10),t.useMoveInsteadSplit="true"===i.find("[name=tau-finish-by-move]:checked").val(),this.fire("finishIteration",t)}})});
define('tau/ui/templates/board.actions/ui.template.board.actions.finish-iteration.fn',["tau/utils/utils.date"],function(t){return{iterationName:function(t){return t.name+" ("+this.processDates(t.startDate,t.endDate)+")"},processDates:function(e,a){var r=e.getYear()==a.getYear()?"d-MMM":t.getFormatData().date.short;return t.formatAs(e,r)+" &mdash; "+t.formatAs(a,r)}}});

define('tau/ui/templates/board.actions/ui.template.board.actions.finish-iteration',["tau/core/templates-factory","./ui.template.board.actions.finish-iteration.fn"], function(templates, fn) {var config = {name: "ui.template.board.actions.finish-iteration", engine: "jqote2", customFunctions: fn, markup: "<!-- name: ui.template.board.actions.finish-iteration, fn: ./ui.template.board.actions.finish-iteration.fn -->\n<div class=\"tau-finish-message\">\n    <h2>Finish Iteration</h2>\n\n    <div>\n        <div class=\"tau-message tau-error\">\n            This action may affect User Stories and Bugs assigned to Iteration. Use Finish Iteration with care.\n        </div>\n    </div>\n\n    <div class=\"tau-iterations\">\n        <div class=\"tau-item tau-finish-iteration\">\n            <span class=\"tau-txt\">Finish iteration:</span>\n\n            <div class=\"tau-iteration-name\"><strong><%=this.iteration.name%></strong></div>\n        </div>\n        <div class=\"tau-item\">\n            <span class=\"tau-txt tau-next-iteration\">Next iteration:</span>\n\n            <div class=\"tau-iteration-name\">\n                <select id=\"to-iteration\" class=\"tau-select\">\n                    <%\n                    var alreadyPreSelected = false;\n                    for (var i = 0; i < this.iterations.length; i++) {\n                    var iter = this.iterations[i], selectedAttr = false;\n                    if (!alreadyPreSelected) {\n                    selectedAttr = alreadyPreSelected = iter.startDate > this.iteration.startDate;\n                    }\n                    %>\n                    <option value=\"<%= iter.id %>\" <%= fn.cond(selectedAttr, \"selected\") %>><%= fn.iterationName(iter) %></option>\n                    <% } %>\n                </select>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"tau-actions\">\n        <div class=\"tau-item\">\n            <div class=\"tau-action-name\">\n                <input name=\"tau-finish-by-move\" id=\"tau-finish-by-slit\" checked=\"checked\" type=\"radio\"\n                        value=\"false\"><label for=\"tau-finish-by-slit\">Split User Stories</label>\n            </div>\n            <ul class=\"tau-action-list\">\n                <li>Move the <span class=\"tau-entity tau-userstory\">User Stories</span> that haven&apos;t been started\n                    to the next Iteration\n                </li>\n                <li>Split started but not finished <span class=\"tau-entity tau-userstory\">User Stories</span>. The\n                    Completed tasks will remain in the old User Story, all the rest will be moved to the next Iteration\n                    as a part of the new User Story\n                </li>\n                <li>Move all the incomplete <span class=\"tau-entity tau-bug\">Bugs</span> and <span\n                        class=\"tau-entity tau-testplanrun\">Test Plan Runs</span> to the next Iteration\n                </li>\n                <li>Set the correct Iteration velocity</li>\n            </ul>\n        </div>\n        <div class=\"tau-item\">\n            <div class=\"tau-action-name\">\n                <input name=\"tau-finish-by-move\" id=\"tau-finish-by-move\" type=\"radio\" value=\"true\"><label\n                    for=\"tau-finish-by-move\">Move User Stories</label>\n            </div>\n            <ul class=\"tau-action-list\">\n                <li>Move all the incomplete <span class=\"tau-entity tau-userstory\">User Stories</span>, <span\n                        class=\"tau-entity tau-bug\">Bugs</span> and <span class=\"tau-entity tau-testplanrun\">Test Plan Runs</span>\n                    to the next Iteration\n                </li>\n                <li>Set the correct Iteration velocity</li>\n            </ul>\n        </div>\n    </div>\n\n    <div class=\"tau-btn-wrap\">\n        <button id=\"tau-submit-finish-iteration\" class=\"tau-btn tau-primary tau-btn-big\">Finish</button>\n        <div class=\"tau-loader\" style=\"display: none;\"></div>\n    </div>\n</div>\n"};return templates.register(config);});
define('tau/components/component.finish-iteration',["tau/components/component.creator","tau/models/model.finish-iteration","tau/components/extensions/finishIteration/extension.finish-iteration","tau/ui/templates/board.actions/ui.template.board.actions.finish-iteration"],function(t,e,n,i){return{create:function(o){var a=o||{},r={extensions:[e,n],template:i};return t.create(r,a)}}});
define('tau/ui/extensions/board.context.container/ui.extension.board.context.container.top',["jQuery","tau/core/extension.base"],function(e,t){return t.extend({init:function(e){this._super(e),this.globalBus=e.context.configurator.getGlobalBus(),this.globalBus.on("general.quick.add.empty",this.processEmptyGeneralQuickAdd,this),this.globalBus.on("select.context.link.click",this.onSelectContextLinkClick,this)},processEmptyGeneralQuickAdd:function(){this.$element.animateWithCss({cssClassName:"tau-teams-projects-submit_highlighted_true"})},onSelectContextLinkClick:function(){this.$element.click()},"bus afterRender":function(e,t){this.$element=t.element},"bus afterRender + childrenBuses.ready":function(e,t,i){i[1].fire("$trigger.ready",t.element),i[0].on("refresh",function(){i[1].fire("hide",{silent:!0})})},"bus destroy":function(){this._super(),this.globalBus.removeAllListeners(this)}})});
define('tau/components/component.global.context.control',["Underscore","tau/components/component.container","tau/ui/extensions/board.container/ui.extension.board.container.events","tau/ui/extensions/board.context.container/ui.extension.board.context.container.top","tau/ui/extensions/board.context.container/ui.extension.board.context.container.tabs","tau/ui/extensions/board.context.container/ui.extension.board.context.container.bubble"],function(e,t,n,o,a,r){return{create:function(i){var s={type:"global.context.control",name:"global.context.control",useAnimation:!1,cssClass:"tau-context-filter",extensions:[n,o],children:[{type:"board.context.output",name:"board.context.filter"},{type:"bubble.container",cssClass:"tau-teams-projects-manager-holder",visible:!1,useAnimation:!1,extensions:[a,r],children:[{type:"container",label:"team.formAdd",visible:!1,useAnimation:!1,cssClass:"tau-teams-projects-manager",children:[{name:"team_form_add",type:"team.formAdd"}]},{type:"container",label:"project.formAdd",cssClass:"tau-teams-projects-manager",visible:!1,useAnimation:!1,children:[{name:"project_form_add",type:"project.formAdd"}]},{type:"container",label:"selector",visible:!0,useAnimation:!1,children:[{name:"board_context_selector",type:"board.context.selector"}]}]}]};i["queue.bus"]=!0;var c=t.create(e.extend(i,s));return c}}});
define('tau/models/model.leadCycleTime',["Underscore","tau/core/model-base","tau/utils/utils.date"],function(e,t,i){var n=i.Date,a=6e4,r=60*a,o=24*r,c=t.extend({name:"Lead Cycle Time Model",onInit:function(){var e=this,t=e.config.context,i=t.entity.entityType.name,n=t.entity.id,a={id:n,fields:["leadTime","cycleTime","createDate","startDate","endDate"]};e.store.unbind(e),e.store.on({eventName:"afterSave",type:i,fields:["entityState"],listener:e},function(){e.fire("refresh")}),e.store.get(i,a,{scope:e,success:e.onEntityRetrieved}).done()},getTime:function(e){var t="d",i="min",n="h";return this.getTimeWithAbbreviation(e,t,n,i)},getTimeWithAbbreviation:function(e,t,i,n){if(e*=o,r>e)return(e/a).toFixed(0)+n;if(o>e)return(e/r).toFixed(0)+i;var c=parseInt(e/o);e%=o;var s=(e/r).toFixed(0);return c+t+" "+(s>0?s+i:"")},convertDayToMinutes:function(e){return 24*e*60},getLongTime:function(e){return this.getTimeWithAbbreviation(e," days"," hours"," minutes")},onEntityRetrieved:function(t){var a=t.data,r=i.parse(a.startDate),o=i.parse(a.createDate),c=i.parse(a.endDate),s="dd MMM yy",d=c?"End Date":"Today";c=c||new n;var u=a.leadTime,m={leadTime:this.getTime(u),leadTimeTooltip:this.getLongTime(u),createDate:o.toString(s),endDateLabel:d,endDate:(c||new n).toString(s),id:e.uniqueId()};if(e.isNumber(a.cycleTime)){var l=a.cycleTime;m.cyclePercentage=l/u,m.cycleTime=this.getTime(l),m.cycleTimeTooltip=this.getLongTime(l),m.startDate=(r||"").toString(s),m.startDate==m.createDate&&(m.startDate="")}else m.cycleTime="",m.cyclePercentage=null;this.fire("dataBind",m)}});return c});
define('tau/models/dataprocessor/model.processor.implementationHistory',["Underscore","tau/core/termProcessor","tau/utils/utils.date/utils.date.wrapper"],function(t,e,n){var s=function(e,n,s){return t.each(s,function(t){t in n&&(e[t]=n[t])}),e},i=function(t){this._historyItems=t};i.enhance=function(t){return new this(t).enhance()},i.prototype={constructor:i,enhance:function(){var t=this._historyItems;return t=this._addDateSpan(t)},_addDateSpan:function(e){var n=this._createItemStateGroups(e);return t.each(n,function(e){var n=t.first(e).state;n.dateSpan=e.length}),e},_createItemStateGroups:function(e){var n=[],s=null,i=null;return t.each(e,function(t){s!=t.state.name&&(s=t.state.name,i&&n.push(i),i=[]),i.push(t)}),n.push(i),n}};var r=function(t){this._historyItems=t};r.compress=function(t){return new this(t).compress()},r.prototype={constructor:r,compress:function(){var t=this._historyItems;return t=this._compressAssignments(t),t=this._compressStates(t)},_compressStates:function(e){var n=t.select(e,function(t,n){var s=!0;return this._isItemStateNeedsCompression(t.state)&&this._isItemNeedsCompression(t,n,e)&&(s=!1),s},this);return n},_isItemStateNeedsCompression:function(t){return t.isInitial||t.isFinal||t.isPlanned},_isItemNeedsCompression:function(t,e,n){var s=!1,i=n[e-1],r=!i;if(!r){var a=i.state.name!=t.state.name,o=t.transitions>1,u=t.assignments,c=t.relatedEntities,m=t.spentTime>0;a||o||u||c||m||(s=!0)}return s},_compressAssignments:function(t){return this._clearDublicatedAssignmentsForState(t),this._mergeIdenticalAssignmentsForItem(t),t},_clearDublicatedAssignmentsForState:function(e){var n=t.select(e,function(t,n){var s=!1;if(t.assignments){var i=e[n-1];i&&i.state.name==t.state.name&&this._areAssignmentsTheSame(i.assignments,t.assignments)&&(s=!0)}return s},this);t.each(n,function(t){delete t.assignments})},_mergeIdenticalAssignmentsForItem:function(e){t.each(e,function(e){if(e.assignments){var n=[],s={};t.each(e.assignments,function(t){t.id in s?s[t.id].roles.push(t.role):(s[t.id]=t,t.roles=[t.role],delete t.role,n.push(t))}),e.assignments=n}})},_areAssignmentsTheSame:function(e,n){var s=t.pluck(e,"id").join(""),i=t.pluck(n,"id").join("");return s==i}};var a=function(t){this._inputData=t,this._termProcessor=new e(t.terms)};return a.transform=function(t){return new this(t).transform()},a.prototype={constructor:a,transform:function(){var t={entityStates:this._getEntityStateNames(),historyItems:this._getHistoryItems(),leadTime:this._getLeadTime(),cycleTime:this._getCycleTime()};return t},_getLeadTime:function(){return this._inputData.leadTime},_getCycleTime:function(){return this._inputData.cycleTime},_getHistoryEntries:function(){return this._inputData.response[0].data.statistics.entries},_getAllEntityStatesForProcess:function(){return this._inputData.response[1].data.entityStates},_getAllUsers:function(){return this._inputData.response[2].data},_getAllRoles:function(){return this._inputData.response[3].data},_getEntityStateNames:function(){var e=this._getEntityStates(),n=this._sortEntityStates(e),s=t.map(n,function(t){return t.name});return s},_getEntityStates:function(){var e=this._inputData.entityTypeName.toLowerCase(),n=t.select(this._getAllEntityStatesForProcess(),function(t){return e.toLowerCase()==t.entityType.name.toLowerCase()});return n},_sortEntityStates:function(e){var n=t.sortBy(e,function(t){var e=t.numericPriority;return t.isInitial?e=Number.NEGATIVE_INFINITY:t.isFinal&&(e=Number.POSITIVE_INFINITY),e}).reverse();return n},_getHistoryItems:function(){var e=[];return t.each(this._getHistoryEntries(),function(t){e.push(this._createHistoryItem(t))},this),e=this._sortHistoryItems(e),e=this._enhanceHistoryItems(e),e=this._compressHistoryItems(e)},_createHistoryItem:function(e){var s={date:new n(n.parse(e.date)),spentTime:parseFloat(e.time),transitions:parseFloat(e.transitions),state:this._getHistoryEntryState(e)},i=this._getHistoryEntryRelatedEntities(e);return t.isEmpty(i)||(s.relatedEntities=i),e.assignments&&(s.assignments=this._getHistoryEntryAssignments(e)),s},_getHistoryEntryState:function(t){var e=this._getEntityStateInfo(t.stateId),n=s({},e,["name","isInitial","isFinal","isPlanned"]);return e.role&&(n.roleId=e.role.id),n},_getEntityStateInfo:function(e){var n=t.detect(this._getAllEntityStatesForProcess(),function(t){return e==t.id});return n},_getHistoryEntryRelatedEntities:function(t){var e=s({},t,["opened","closed"]);return this._setEntityAlias(e.opened),this._setEntityAlias(e.closed),e},_setEntityAlias:function(e){t.each(e,function(t){var e=this._getEntityAlias(t.type);e&&(t.alias=e)},this)},_getEntityAlias:function(t){var e=this._termProcessor.getTerms(t);return e?e.name:null},_getHistoryEntryAssignments:function(e){var n=[];return t.each(e.assignments,function(t){var e=this._getUserInfo(t.userId);e&&n.push({id:t.userId,firstName:e.firstName,lastName:e.lastName,role:{id:parseInt(t.roleId),name:this._roleIdToName(t.roleId)}})},this),n},_getUserInfo:function(e){var n=null,i=t.detect(this._getAllUsers(),function(t){return e==t.id});return i&&(n=s({},i,["firstName","lastName"])),n},_roleIdToName:function(e){var n=t.detect(this._getAllRoles(),function(t){return e==t.id});return n.name},_sortHistoryItems:function(e){return t.sortBy(e,function(t){return new n(n.parse(t.date))})},_enhanceHistoryItems:function(t){return i.enhance(t)},_compressHistoryItems:function(t){return r.compress(t)}},a});
define('tau/models/model.implementationHistory',["Underscore","tau/models/model.leadCycleTime","tau/models/dataprocessor/model.processor.implementationHistory"],function(e,t,i){return t.extend({onInit:function(){var e=this.config.context,t="implementationHistory",i=this.config.context.entity.id;this.store.evictProperties(i,"implementationHistory",["statistics"]),this.store.get(t,{id:e.entity.id,fields:["id","statistics"]}).get("process",{id:e.getProcessId(),nested:!0,fields:[{entityStates:["id","name","isInitial","isFinal","isPlanned","numericPriority",{entityType:["id","name"]},{role:["id"]}]}]}).get("user",{fields:["id","firstName","lastName"]}).get("roles",{fields:["id","name"]}).get(this.config.context.entity.entityType.name,{id:i,fields:["leadTime","cycleTime"]}).done({scope:this,success:this.onDone}),this.store.unbind(this),this._bindToStoreChanges()},_bindToStoreChanges:function(){this._bindToStoreAfterSafe(),this._bindToStoreAfterRemove()},_bindToStoreAfterSafe:function(){this.store.on({eventName:"afterSave",type:this.config.context.entity.entityType.name,listener:this,filter:{id:this.config.context.entity.id},hasChanges:["entityState"]},this._getOnStoreChangesProxy()),e.each(this._getStoreObservableEntityTypes(),function(e){this.store.on({eventName:"afterSave",type:e,listener:this},this._getOnStoreChangesProxy())},this)},_bindToStoreAfterRemove:function(){e.each(this._getStoreObservableEntityTypes(),function(e){this.store.on({eventName:"afterRemove",type:e,listener:this},this._getOnStoreChangesProxy())},this)},_getStoreObservableEntityTypes:function(){if(!this._storeObservableEntityTypes){var e=["assignment","impediment"];switch(this.config.context.entity.entityType.name){case"userstory":e.push("task","bug");break;case"feature":e.push("userstory");break;case"request":e.push("feature","userstory","task","bug")}this._storeObservableEntityTypes=e}return this._storeObservableEntityTypes},_onStoreChanges:function(){this.store.evictProperties(this.config.context.entity.id,"implementationHistory",["statistics"]),this.fire("afterUpdate")},_getOnStoreChangesProxy:function(){return this._onStoreChangesProxy||(this._onStoreChangesProxy=e.bind(this._onStoreChanges,this)),this._onStoreChangesProxy},shouldShowLeadCycleTimes:function(){var e=this.config.context.entity.entityType.name;return-1!=["userstory","bug","feature"].indexOf(e.toLowerCase())},onDone:function(t){if(this.config){var s=t[4].data.cycleTime,n=this.convertDayToMinutes(s).toFixed(0),o={};this.shouldShowLeadCycleTimes()&&(o={leadTime:this.getLongTime(t[4].data.leadTime),cycleTime:n>0?this.getLongTime(s):null});var r=i.transform(e.extend({response:t,entityTypeName:this.config.context.entity.entityType.name,terms:this.config.context.getTerms()},o));this.fire("dataBind",r)}}})});
define('tau/components/extensions/implementationHistory/component.implementationHistory.dateRenderer',["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/utils/utils.date"],function(t,e,a,n){return a.extend({"bus afterRender":function(t){this._$element=t.data.element,this._data=t.data.data,this._render()},_render:function(){var a=this._$element.find(".tau-historyGrid td.tau-historyItem");t.each(this._data.historyItems,function(t,d){var s=a.eq(d),r=s.find(".tau-date"),i=e("<span/>").addClass("tau-day"),o=e("<span/>").addClass("tau-month");i.text(n.formatAs(t.date,"dd")),o.text(n.formatAs(t.date,"MMM")),r.attr("title",n.format.date.short(t.date)).append(i,o)})}})});
define('tau/components/extensions/implementationHistory/component.implementationHistory.stateProgressRenderer',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(t,e,n){return n.extend({"bus afterRender":function(t){this._$element=t.data.element,this._data=t.data.data,this._render()},_render:function(){this._createFlowIndicators(),this._connectMarkers(),this.fire("stateProgressRendered")},_createFlowIndicators:function(){var e=this._$element.find(".tau-historyGrid .tau-historyItem");t.each(this._data.historyItems,function(t,n){this._markProgressStep(e.eq(n),t)},this)},_getHistoryItemStateIndex:function(e){return t.indexOf(this._data.entityStates,e)},_getFlowType:function(t){var e="NORMAL";return t.state.isFinal?e="DONE":this._isUnderImpediment(t)?e="IMPEDIMENT":t.transitions>1&&(e="MULTITRANS"),e},_isUnderImpediment:function(e){var n=t.any(this._getImpedimentRangeList(),function(t){return this._isInImpedimentRange(e,t)},this);return n},_getImpedimentRangeList:function(){if(!this._impedimentRangeList){this._impedimentRangeList=[];var e=this._getAllImpediments();t.each(e.opened,function(t,n){this._impedimentRangeList.push({start:t,end:e.closed[n]||Number.POSITIVE_INFINITY})},this),this._impedimentRangeList.sort(function(t,e){return e.end-e.start-(t.end-t.start)})}return this._impedimentRangeList},_getAllImpediments:function(){var e={opened:{},closed:{}};return t.each(this._data.historyItems,function(n){n.relatedEntities&&(t.each(n.relatedEntities.opened,function(t){this._isImpediment(t)&&(e.opened[t.id]=n.date)},this),t.each(n.relatedEntities.closed,function(t){this._isImpediment(t)&&(e.closed[t.id]=n.date)},this))},this),e},_isImpediment:function(t){return"impediment"==t.type.toLowerCase()},_isInImpedimentRange:function(t,e){return t.date>=e.start&&t.date<=e.end},_markProgressStep:function(t,n){var i=this._getHistoryItemStateIndex(n.state.name),s=this._getFlowType(n),a=this._createFlowIndicator(s),r=n.state.dateSpan;r&&!n.state.isFinal&&e("<span/>").addClass("datespan").text(r).attr("title",r+" days in this state").appendTo(a),t.find(".tau-progressSteps .tau-step:nth-child("+(i+1)+") .tau-marker").append(a)},_createFlowIndicator:function(t){var n=e("<div/>").addClass("tau-flow");switch(t){case"NORMAL":n.addClass("tau-normal");break;case"MULTITRANS":n.addClass("tau-transitions");break;case"IMPEDIMENT":n.addClass("tau-impediment");break;case"DONE":n.addClass("tau-done")}return n},_connectMarkers:function(){t.each(this._data.historyItems,function(t,e){var n=this._getHistoryItemStateIndex(t.state.name);this._connect(e,n,e-1,"in"),this._connect(e,n,e+1,"out")},this)},_connect:function(t,e,n,i){var s=this._data.historyItems[n];if(s){var a=this._getHistoryItemStateIndex(s.state.name),r=e-a;r>0&&this._$element.find(".tau-historyGrid .tau-historyItem").eq(t).find(".tau-progressSteps .tau-step").filter(function(t){return t>=a+1&&e>=t}).find(".tau-marker").addClass("tau-"+i)}}})});
define('tau/components/extensions/implementationHistory/component.implementationHistory.stateHistogramRenderer',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(t,e,a){return a.extend({"bus afterRender":function(t){this._$element=t.data.element,this._data=t.data.data,this._render()},_render:function(){var t=this._createStateDateItemsHash();this._$element.find(".tau-historyGridInterpretation .stateName").each(function(a,n){var s=e(n),i=t[s.text()],u=s.attr("title")+" ("+i.absolute+" days)";s.attr("title",u).addClass("tau-dateItems-"+i.relative)})},_createStateDateItemsHash:function(){var e={};return t.each(this._data.entityStates,function(t){e[t]={absolute:0,relative:0}}),this._calculateAbsoluteHashValues(e),this._calculateRelativeHashValues(e),e},_calculateAbsoluteHashValues:function(e){t.each(this._data.historyItems,function(t){var a=t.state.dateSpan;a&&(e[t.state.name].absolute+=a)})},_calculateRelativeHashValues:function(e){var a=t.max(e,function(t){return t.absolute}).absolute;t.each(e,function(t,n){var s=100*t.absolute/a;e[n].relative=10*Math.round(s/10)})}})});
define('tau/components/extensions/implementationHistory/component.implementationHistory.timeLoadRenderer',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(t,e,n){return n.extend({"bus afterRender":function(t){this._$element=t.data.element,this._data=t.data.data,this._render()},_render:function(){if(this._timeLoadWasReported()){var e=this._calculateMaxSpentTime(),n=this._$element.find(".tau-historyGrid td.tau-historyItem");t.each(this._data.historyItems,function(t,a){var i=t.spentTime,r=n.eq(a).find(".tau-date"),s=this._calculateRelatedRoundedSpentTime(e,i);if(!isNaN(s)){var d=r.attr("title");r.addClass("tau-timeLoad-"+s).attr("title",d+" ("+i+" hours)")}},this)}},_timeLoadWasReported:function(){return t.any(this._data.historyItems,function(t){return t.spentTime>0})},_calculateMaxSpentTime:function(){return t.max(this._data.historyItems,function(t){return t.spentTime}).spentTime},_calculateRelatedRoundedSpentTime:function(t,e){var n=100*e/t,a=10*Math.round(n/10);return a}})});
define('tau/components/extensions/implementationHistory/component.implementationHistory.relatedEntitiesRenderer',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,t,a){var n={create:function(e,a){return t("<a></a>").addClass(this._createClassName(e,a)).attr("href","#"+e.type+"/"+e.id).attr("title",this._createTitle(e,a)).data("entityInfo",{id:e.id,type:e.type,alias:e.alias||e.type})},_createTitle:function(e,t){var a=["["+(e.alias||e.type)+"]"," #"+e.id,e.name,t?"(closed)":"(added)"].join(" ");return a},_createClassName:function(e,t){var a=["tau-entity","tau-"+e.type.toLowerCase(),t?"tau-closed":""].join(" ");return a}};return a.extend({"bus afterRender":function(e){this._$element=e.data.element,this._data=e.data.data,this._render()},_render:function(){var t=this._$element.find(".tau-historyGrid .tau-historyItem");e.each(this._data.historyItems,function(a,i){var r=t.eq(i).find(".tau-relatedEntities");a.relatedEntities&&(e.each(a.relatedEntities.opened,function(e){r.append(n.create(e))}),e.each(a.relatedEntities.closed,function(e){r.append(n.create(e,!0))}))})}})});
define('tau/components/extensions/implementationHistory/component.implementationHistory.assignmentsRenderer',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(t,e,n){return n.extend({"bus afterRender+stateProgressRendered":function(t){this._$element=t.afterRender.data.element,this._data=t.afterRender.data.data,this._render()},_render:function(){var n=this._$element.find(".tau-historyGrid .tau-historyItem");t.each(this._data.historyItems,function(t,s){t.assignments&&!t.state.isFinal&&e('<div class="tau-assignments"/>').insertAfter(n.eq(s).find(".tau-flow")).append(this._getAssignments(t))},this)},_getAssignments:function(e){var n=[];return t.each(e.assignments,function(t){var s=[t.firstName,t.lastName,"("+this._getAssignmentRoles(t)+")"].join(" "),i=this.config.context.configurator.getApplicationPath()+"/Avatar.ashx?UserId="+t.id+"&size=50",a=this._isActiveAssignment(t,e)?' class="active"':"";n.push("<img"+a+' alt="avatar" title="'+s+'" src="'+i+'"/>')},this),n.join("")},_getAssignmentRoles:function(e){return t.map(e.roles,function(t){return t.name}).join(", ")},_isActiveAssignment:function(e,n){return t.any(e.roles,function(t){return t.id==n.state.roleId})}})});
define('tau/components/extensions/implementationHistory/component.implementationHistory.statsRenderer',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,t,a){return a.extend({"bus afterRender":function(e){this._$element=e.data.element,this._data=e.data.data,this._render()},_render:function(){var e=t('<div class="tau-historyStats"/>'),a=t(["<table>","<tbody>",'<tr style="display: ',this._calculateCycleTime()?"":"none",'" >',"<td>Cycle Time:</td>","<td>"+this._calculateCycleTime()+"</td>","</tr>",'<tr style="display: ',this._calculateLeadTime()?"":"none",'">',"<td>Lead Time:</td>","<td>"+this._calculateLeadTime()+"</td>","</tr>","</tbody>","</table>"].join(""));(this._calculateCycleTime()||this._calculateLeadTime())&&e.append(a).appendTo(this._$element)},_calculateLeadTime:function(){return this._data.leadTime},_calculateCycleTime:function(){return this._data.cycleTime}})});
define('tau/components/extensions/implementationHistory/component.implementationHistory.legendRenderer',["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/utils/utils.date","tau/utils/utils.storage","tau/utils/utils.date/utils.date.wrapper"],function(t,e,a,n,i,s){return a.extend({"bus afterRender":function(t){this._$element=t.data.element,this._data=t.data.data,this._render(),this._bindEvents()},_render:function(){var t=e('<div class="tau-legend"></div>'),a=e('<h3><span class="tau-legendToggler">Legend</span></h3>');t.append(a,this._createGroups()),this._setState(t),t.appendTo(this._$element)},_createGroups:function(){var t=e('<div class="tau-groups"></div>');this._createGroupElement("Progress Flow",this._getProgressFlowTypes()).appendTo(t);var a=this._getRelatedEntitiesTypes();return a&&this._createGroupElement("Related Entities",a).appendTo(t),this._createGroupElement("Histograms",this._getHistogramTypes()).appendTo(t),t},_createGroupElement:function(a,n){var i=e("<dl/>"),s=e("<dt/>").text(a);return i.append(s),t.each(n,function(t){var a=e("<dd/>"),n=e(t.element).addClass("glyph");a.text(t.description),a.prepend(n),i.append(a)}),i},_getProgressFlowTypes:function(){var a=this._$element.find(".tau-historyGrid .tau-historyItem .tau-flow"),n={};t.each(a,function(t){var a=e.trim(t.className.replace("tau-flow",""));a in n||(n[a]=e(t).clone().empty().removeAttr("title"))});var i=t.map(n,function(t,e){var a={element:t};switch(e){case"tau-normal":a.description="normal flow";break;case"tau-transitions":a.description="multiple state transitions";break;case"tau-impediment":a.description="impediment";break;case"tau-done":a.description="final state"}return a});return i},_getRelatedEntitiesTypes:function(){var a=null,n=this._$element.find(".tau-historyGrid .tau-historyItem .tau-entity");if(n.size()>0){var i={};t.each(n,function(t){var a=e.trim(t.className.replace(/tau-entity|tau-closed/g,""));a in i||(i[a]=e(t).clone(!0).unbind().removeAttr("title"))});var s=t.map(i,function(t){return{element:t,description:t.data("entityInfo").alias}});a=[{element:e('<div class="tau-entity"></div>'),description:"entity (added)"},{element:'<div class="tau-entity tau-closed"></div>',description:"entity (closed)"}].concat(s)}return a},_getHistogramTypes:function(){var t=[];return t.push({element:this._getElementForStateHistogram(),description:"total days in entity state"}),this._timeLoadWasReported()&&t.push({element:this._getElementForTimeLoadHistogram(),description:"daily total spent time"}),t},_getElementForStateHistogram:function(){var t=e(['<div class="tau-historyGridInterpretation">','<div class="stateName tau-dateItems-50">',"<span>State name</span>","</div>","</div>"].join(""));return t},_timeLoadWasReported:function(){return t.any(this._data.historyItems,function(t){return t.spentTime>0})},_getElementForTimeLoadHistogram:function(){var t=new s(0),a=e(['<div class="tau-date tau-timeLoad-50">','<span class="tau-day">'+n.formatAs(t,"dd")+"</span>",'<span class="tau-month">'+n.formatAs(t,"MMM")+"</span>","</div>"].join(""));return a},_setState:function(t){this._isCollapsed()&&this._collapse(t)},_bindEvents:function(){this._$element.find(".tau-legend .tau-legendToggler").click(e.proxy(this,"_toggleState"))},_toggleState:function(t){var a=e(t.currentTarget).parents(".tau-legend");this._isCollapsed()?this._uncollapse(a):this._collapse(a)},_isCollapsed:function(){return"collapsed"==i.get("implementationHistoryLegendState")},_uncollapse:function(t){i.remove("implementationHistoryLegendState"),t.removeClass("tau-collapsed")},_collapse:function(t){i.set("implementationHistoryLegendState","collapsed"),t.addClass("tau-collapsed")}})});
define('tau/components/extensions/implementationHistory/component.implementationHistory.historyGridScroller',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,t,n){return n.extend({"bus afterRender":function(e){e.data.element.find(".tau-historyGrid").mousewheel(t.proxy(this,"_onMouseWheel"))},_onMouseWheel:function(e,n){var o=e.currentTarget;if(this._isScrollActive(o)){e.preventDefault();var r=t(o),i=r.scrollLeft(),s=i+100*-n;r.scrollLeft(s)}},_isScrollActive:function(e){return e.scrollWidth>e.offsetWidth}})});
define('tau/components/extensions/implementationHistory/component.implementationHistory.relatedEntitiesHighlighter',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(t,e,n){return n.extend({"bus afterRender":function(t){this._$relatedEntities=t.data.element.find(".tau-relatedEntities .tau-entity"),this._$relatedEntities.hover(e.proxy(this,"_onHoverIn"),e.proxy(this,"_onHoverOut"))},_getRelatedEntities:function(t){var n=e(t).data("entityInfo").id;return this._$relatedEntities.filter(function(){return n==e(this).data("entityInfo").id})},_onHoverIn:function(t){this._getRelatedEntities(t.currentTarget).addClass("tau-highlight")},_onHoverOut:function(t){this._getRelatedEntities(t.currentTarget).removeClass("tau-highlight")}})});
define('tau/components/extensions/implementationHistory/component.implementationHistory.updateOverlay',["jQuery","tau/components/extensions/component.extension.base","tau/ui/behaviour/overlay/ui.behaviour.overlay"],function(e,t){return t.extend({"bus afterRender":function(t){var n=this._$element=t.data.element;setTimeout(function(){var t=n.find(".tau-historyGrid"),a=t.find(".tau-historyItem:last");e(t).scrollTo(a,1e3,{axis:"x",easing:"easeOutQuart"})},500)},"bus afterUpdate":function(){this._$element.tauOverlay(),this.fire("refresh")}})});
define('tau/ui/templates/implementationHistory/ui.template.implementationHistoryItem',["tau/core/templates-factory"],function(t){var e={name:"implementationHistoryItem",options:{},dependencies:[],markup:['<td class="tau-historyItem">','<div class="tau-progressSteps">',"{{each(index, step) $item.parent.data.entityStates}}",'<div class="tau-step">','<div class="tau-marker"/>',"</div>","{{/each}}","</div>",'<div class="tau-date"></div>','<div class="tau-relatedEntities"></div>',"</td>"].join("")};return t.register(e)});
define('tau/ui/templates/implementationHistory/ui.template.implementationHistory',["tau/core/templates-factory","tau/ui/templates/implementationHistory/ui.template.implementationHistoryItem"],function(t){var e={name:"implementationHistory",options:{},dependencies:["implementationHistoryItem"],markup:['<div class="tau-implementationHistory">','<div class="tau-historyGridInterpretation">',"{{each(index, stateName) entityStates}}",'<div class="stateName" title="${stateName}">',"<span>${stateName}</span>","</div>","{{/each}}","<div>Date</div>","<div>Related Entities</div>","</div>",'<div class="tau-historyGrid">',"<table>","<tbody>","<tr>",'{{tmpl(historyItems) "implementationHistoryItem"}}',"</tr>","</tbody>","</table>","</div>","</div>"].join("")};return t.register(e)});
define('tau/components/component.implementationHistory',["tau/components/component.creator","tau/models/model.implementationHistory","tau/components/extensions/implementationHistory/component.implementationHistory.dateRenderer","tau/components/extensions/implementationHistory/component.implementationHistory.stateProgressRenderer","tau/components/extensions/implementationHistory/component.implementationHistory.stateHistogramRenderer","tau/components/extensions/implementationHistory/component.implementationHistory.timeLoadRenderer","tau/components/extensions/implementationHistory/component.implementationHistory.relatedEntitiesRenderer","tau/components/extensions/implementationHistory/component.implementationHistory.assignmentsRenderer","tau/components/extensions/implementationHistory/component.implementationHistory.statsRenderer","tau/components/extensions/implementationHistory/component.implementationHistory.legendRenderer","tau/components/extensions/implementationHistory/component.implementationHistory.historyGridScroller","tau/components/extensions/implementationHistory/component.implementationHistory.relatedEntitiesHighlighter","tau/components/extensions/implementationHistory/component.implementationHistory.updateOverlay","tau/ui/templates/implementationHistory/ui.template.implementationHistory"],function(e,t,n,o,i,m,s,r,a,p,l,c,y,H){return{create:function(u){var d=u||{},x={extensions:[t,n,o,i,m,s,r,a,p,l,c,y],template:H};return e.create(x,d)}}});
define('tau/models/common/model.common.events',["Underscore","tau/core/extension.base"],function(e,n){var t=n.extend({"bus beforeInit":function(e,n){var t=n.config.context;this.fire("configurator.ready",t.configurator),this.fire("entity.ready",t.entity)},"bus afterRender":function(e,n){this.fire("$el.ready",n.element)}});return t});
define('tau/models/inviter/model.inviter',["Underscore","tau/core/extension.base"],function(e,n){var t=n.extend({"bus beforeInit + activeTab.ready":function(e,n,t){this.fire("dataBind",{activeTab:t})}});return t});
define('tau/models/inviter/model.inviter.add',["Underscore","tau/core/extension.base","tau/libs/inviter/inviter"],function(e,t,n){return t.extend({"bus configurator.ready:last + form.submitted":function(e,t,a){var i=this,r=new n(t);r.invite(a.members).done(function(e){i.fire("members.saved",e)})},"bus configurator.ready:last + entity.ready:last + members.saved":function(t,n,a,i){var r=this,s=n.getStore(),o=a.entityType.name,u=o+"Members",c=e.compact(e.pluck(i,"failure"));c.length&&this.fire("team.add.nonFatalFailure","Can't assign users.");var d=e.compact(e.pluck(i,"success")),m={};m[u]=e.map(d,function(e){return{user:{id:e}}});var f=["id","name"];f.push("team"===o?"icon":"color");var l={};l[u]=[{user:["id","firstName","lastName","avatarUri"]},{role:["id","name"]}],f.push(l),s.save(o,{id:a.id,$set:m,fields:f}).done(function(e){r.fire("members.connected",e[0].data)})},"bus entity.ready:last + members.saved + members.connected":function(e,t,n,a){this.fire("invitation.success",a)}})});
define('tau/ui/extensions/inviter/ui.extension.inviter.form',["Underscore","jQuery","tau/core/extension.base"],function(e,r,t){return t.extend({"bus $el.ready":function(e,r){this.fire("$form.ready",r.find(".i-role-form"))},"bus $form.ready":function(e,r){var t=this;r.on("submit",function(e){e.preventDefault();var n={};n.members=r.find("[name=users]").tauInviter("getValue",!0),t.fire("form.submitted",n)})},"bus configurator.ready:last + $form.ready:last + invitation.success":function(e,r,t){t.trigger("reset")}})});
define('tau/ui/extensions/inviter/ui.extension.inviter.widget',["Underscore","jQuery","tau/ui/extensions/inviter/ui.extension.inviter.widget.abstract"],function(e,i,t){return t.extend({"bus configurator.ready":function(e,i){this._initTemplates(i)},"bus configurator.ready + $el.ready + entity.ready":function(e,i,t,n){var r=n.entityType.name,u=r+"Members",a=" AND "+u+".count("+r+".id="+n.id+")==0 ";this._initWidget(i,t,a)}})});
define('tau/ui/templates/inviter/ui.template.inviter',["tau/core/templates-factory"],function(t){var a={name:"inviter",engine:"jqote2",markup:['<div class="tau-team-control">','<div class="tau-actions i-role-tabheaders">','<div class="tau-new-team i-role-tabheader <% if (this.activeTab == "add"){ %> tau-active <% } %>" data-tab="add">',"<span></span>Assign people","</div>","</div>",'<div class="tau-tab-content">','<div class="tau-tab-pane tau-new-entity-holder i-role-tab-add <% if (this.activeTab == "add"){ %> tau-active <% } %> ">','<form class="tau-new-item_active_false i-role-form">','<div class="tau-new-entity-form">','<div class="tau-invite-widget">','<textarea name="users" />','<div class="tau-invite-footer">','<button class="tau-btn tau-success" type="submit">Invite people</button>',"</div>","</div>","</div>","</form>","</div>","</div>","</div>"]};return t.register(a)});
define('tau/components/component.inviter',["tau/components/component.creator","tau/models/common/model.common.events","tau/models/inviter/model.inviter","tau/models/inviter/model.inviter.add","tau/ui/extensions/tabs/ui.extension.tabs.modern","tau/ui/extensions/inviter/ui.extension.inviter.form","tau/ui/extensions/inviter/ui.extension.inviter.widget","tau/components/extensions/error/extension.errorBar","tau/ui/templates/inviter/ui.template.inviter"],function(e,t,n,i,o,r,u,s,a){return{create:function(m){m["queue.bus"]=!0;var v={"queue.bus":!0,extensions:[t,n,i,o,r,u,s],template:a};return e.create(v,m)}}});
define('tau/models/model.iteration.canBeFinished',["Underscore","tau/core/model-base"],function(e,n){return n.extend({name:"Can Be finished",onInit:function(){var e=this.config.context,n=e.entity.entityType.name,i=e.entity.id;this.store.get(n,{id:i,fields:["canBeFinished"]},{success:this.onEntityRetrieved,scope:this}).done({success:this.done,scope:this})},onEntityRetrieved:function(e){var n=e.data;this.canBeFinished=n.canBeFinished},done:function(){this.fire("dataBind",{canBeFinished:this.canBeFinished})}})});
define('tau/ui/templates/ui.template.empty',["tau/core/templates-factory"],function(e){var n={name:"empty",engine:"jqote2",markup:["<div></div>"],dependencies:[]};return e.register(n)});
define('tau/components/component.iteration.canBeFinished',["tau/components/component.creator","tau/models/model.iteration.canBeFinished","tau/ui/templates/ui.template.empty"],function(e,t,n){return{create:function(a){var o={extensions:[t],template:n};return e.create(o,a)}}});
define('tau/ui/templates/common/ui.template.attributeValue',["tau/core/templates-factory"],function(a){var e={name:"common-attributeValue",markup:['<span class="attr-item popup-target"><span class="attr-name">${name}</span></span>'],dependencies:[]};return a.register(e)});
define('tau/ui/templates/progressBar/ui.template.iteration.progressBar',["tau/core/templates-factory","tau/ui/tags/ui.tag.term","tau/ui/templates/common/ui.template.attributeValue"],function(e,s){var a={name:"iteration-progress-bar",tags:[s],markup:['<div class="entity-progress-box">','   <div class="ui-progressbar__data">','      <span class="ui-label-completed">Completed&nbsp;<b class="value">${effortCompleted}${point}</b></span>','      <span class="ui-label-todo">ToDo&nbsp;<b class="value">${effortToDo}${point}</b></span>',"   </div>",'   <div class="ui-progress-bar-progress ui-progressbar__progress">',"{{if percentCompleted !== 0 }}",'      <span class="ui-progress-progress ui-progressbar__progress__indicator" style="width:${ Math.round(percentCompleted) < 15 ? 15 : Math.round(percentCompleted) }%;">','         <span class="ui-label ui-progressbar__progress__label"><b class="value">${ Math.round(percentCompleted) }%</b></span>',"      </span>","{{/if}}","   </div>","</div>"],dependencies:["common-attributeValue"]};return e.register(a)});
define('tau/components/component.iteration.progressBar',["tau/components/component.creator","tau/models/model.iteration.progressBar","tau/ui/templates/progressBar/ui.template.iteration.progressBar"],function(e,t,r){return{create:function(a){var n={extensions:[t],template:r};return e.create(n,a)}}});
define('tau/models/model.label',["Underscore","tau/core/model-base"],function(t,e){var i=e.extend({onInit:function(){this.store.unbind(this);var e={text:this.config.text};this.config.cssClass&&(e.cssClass=this.config.cssClass),this.bus.fire("dataBind",e);var i=this.getCollectionFields();if(t.isArray(i)&&i.length>0){var n=this.config.context.entity.id,s=this.config.context.entity.entityType.name||"general",o=i.join("|");this.config.store.on({type:s,eventName:"afterSave",hasChanges:[o],filter:{id:n},listener:this},t.bind(this.entityChanged,this)),this._updateBadge()}},entityChanged:function(){var e=this.config.context.entity.id,i=this.config.context.entity.entityType.name||"general";this.config.store.evictProperties(e,i,t.map(this.getCollectionFields(),function(t){return t+"-count"})),this._updateBadge()},_updateBadge:function(){for(var e=this.config.context,i=e.entity.entityType.name,n=[],s=this.config.countFieldNames,o=0;o<s.length;o++)n.push(s[o]+"-count");var a={id:e.entity.id,fields:n};this.store.freeze(!0).done(t.bind(function(t){this.store.get(i,a,this.safeCallback(this.badgeDataRetrieved)).done(),t.unfreeze()},this))},badgeDataRetrieved:function(t){for(var e=t.data,i=this.getCollectionFields(),n=0,s=0;s<i.length;s++)n+=e[i[s]+"-count"];this.fire("setBadgeData",n.toString())},getCollectionFields:function(){return t.reject(this.config.countFieldNames,function(t){return"id"==t})}});return i});
define('tau/ui/templates/label/ui.template.label',["tau/core/templates-factory","tau/ui/tags/ui.tag.implode"],function(e,a){var s={name:"label",tags:[a],markup:['<div><span class="ui-label{{if cssClass}} ${cssClass}{{/if}}">${$item.$tau.text_implode(text)}</span></div>'],dependencies:[]};return e.register(s)});
define('tau/ui/extensions/label/ui.extension.label',["jQuery","tau/components/extensions/component.extension.base"],function(e,t){return t.extend({"bus afterRender:last+setBadgeData":function(e){var t=this.getBadgeElement(e.afterRender.data.element);this.updateBadgeElement(t,e.setBadgeData.data)},getBadgeElement:function(t){var n=t.find(".ui-quantity");return 0==n.length&&(n=e('<span class="ui-quantity"></span>').appendTo(t)),n},updateBadgeElement:function(e,t){e.text(t),this.config.quantityCssClass&&e.addClass(this.config.quantityCssClass)}})});
define('tau/components/component.label',["Underscore","tau/components/component.creator","tau/models/model.label","tau/ui/templates/label/ui.template.label","tau/ui/extensions/label/ui.extension.label"],function(e,t,n,l,o){return{create:function(a){var s={ModelType:a.modelType||n,template:a.template||l,extensions:e.clone(a.extensions||[])};return a.hideCounter||s.extensions.push(a.labelExtension||o),t.create(s,a)}}});
define('tau/components/extensions/duplicateBugList/extension.duplicateBugList.count.label.setter',["jQuery","tau/components/extensions/component.extension.base"],function(e,t){return t.extend({"bus afterRender+duplicateBugCountRetrieved":function(e){var t=e.duplicateBugCountRetrieved.data.count;t>0&&this.fire("setBadgeData",t.toString())}})});
define('tau/components/component.label.duplicateBugCount',["Underscore","tau/components/component.label","tau/components/extensions/duplicateBugList/extension.duplicateBugList.count.label.setter","tau/models/model.duplicateBugCountCalculator","tau/models/model.duplicateBugRetriever","tau/models/model.extensions","tau/models/assignmentsList/extension.model.store.operations","tau/core/termProcessor"],function(e,t,s,n,o,a,u,i){return{create:function(a){var r=a.context.applicationContext.processes[0].terms,l=new i(r);return a=a||{},e.extend(a,{text:"Duplicate "+l.getTerms("Bug").names,quantityCssClass:a.quantityCssClass||"ui-gray-quantity",extensions:[s,n,u,o]}),t.create(a)}}});
define('tau/models/model.label.relationCount',["Underscore","tau/models/model.label","tau/libs/store2/store2"],function(t,e,a){var n=e.extend({_updateBadge:function(t){this.fire("updateBadge",{badgeConfig:t})},"bus updateBadge":function(t,e){var a=e.badgeConfig||{};this._badgeDataRetrieve(a)},_badgeDataRetrieve:function(e){this._getStore2().findAll("general?select={masterRelations.Count()%20%2B%20slaveRelations.Count()%20as%20totalRelationCount,%20masterRelations.ActiveMasterRelationsCount().openBlockers%20as%20blockerRelationCount,%20masterRelations.Select({id,master.id%20as%20masterId})%20as%20masterRelations}&where=(id=="+this.config.context.entity.id+")").done(t.bind(function(t){0!==t.length&&this.fire("badgeDataRetrieved",{badgeConfig:e,badgeData:t[0]})},this))},_getStore2:function(){return this.store2||(this.store2=new a(this.config.context.configurator)),this.store2},"bus badgeDataRetrieved":function(t){var e=t.data.badgeConfig,a=t.data.badgeData;this._setBadgeData(e,a)},_setBadgeData:function(t,e){var a={totalRelationCount:e.totalRelationCount,blockerRelationCount:e.blockerRelationCount};this.fire("setBadgeData",a)}});return n});
define('tau/ui/extensions/label/ui.extension.label.relationCount',["tau/ui/extensions/label/ui.extension.label"],function(t){return t.extend({updateBadgeElement:function(t,n){t.text(n.totalRelationCount.toString()),this.config.quantityCssClass&&t.addClass(this.config.quantityCssClass),t.toggleClass("ui-red-quantity",n.blockerRelationCount>0)}})});
define('tau/ui/extensions/label/ui.extension.label.relationCount.refresher',["Underscore","tau/core/class","tau/components/extensions/component.extension.base"],function(e,n,t){var o=t.extend({"bus relations.changed":function(){this.fire("updateBadge",{})}});return o});
define('tau/ui/extensions/relations/ui.extension.relations.observer',["Underscore","tau/core/class","tau/components/extensions/component.extension.base"],function(e,t,n){var i=t.extend({init:function(e){this.config=e},startListening:function(e){this.started&&this._stop(),this.started=this._start(e)},_start:function(){return!0},stopListening:function(){this.started&&(this._stop(),this.started=!1)},_stop:function(){this.config.store.unbind(this)}}),s=i.extend({_start:function(){return this.config.store.on({type:"relation",eventName:"afterSave",listener:this},this.config.callback),this.config.store.on({type:"relation",eventName:"afterRemove",listener:this},this.config.callback),this.config.globalBus.on("relation.items.added",this.config.callback,this),!0},_stop:function(){this.config.globalBus.removeAllListeners(this),this._super()}}),o=i.extend({_start:function(e){var t=e.entity.id,n=e.entity.entityType.name||"general";return this.config.store.on({type:n,eventName:"afterSave",hasChanges:["impediments"],filter:{id:t},listener:this},this.config.callback),this.config.store.on({type:"impediment",eventName:"afterSave",hasChanges:["assignable"],filter:{assignable:{id:t}},listener:this},this.config.callback),!0}}),a=n.extend({"bus beforeInit":function(t,n){this._fireChanged=e.debounce(function(){this.fire("relations.changed")},100),this.entity=n.config.context.entity,this.notifyDependencyType=n.config.dependencyType?this._getDependencyType(n.config.dependencyType):null,this._relationCreateListener=new s(this._createConfig({globalBus:n.config.context.configurator.getGlobalBus()})),this._impedimentCreateListener=new o(this._createConfig()),this._relationCreateListener.startListening({entity:this.entity}),this._impedimentCreateListener.startListening({entity:this.entity})},_createConfig:function(t){return e.defaults(t||{},{store:this.config.store,callback:this._entityChanged.bind(this)})},_getDependencyType:function(e){return"master"==e?"slave":"master"},_entityChanged:function(e){this._isRequireNotification(e)&&this._fireChanged()},_isRequireNotification:function(e){var t=e.data?e.data.changes||e.data.obj||e.data:null;return!this.notifyDependencyType||t&&(this._notifyQuickAdd(t)||this._notifyImpedimentCreated(t)||this._notifyRelationCreated(t))},_notifyQuickAdd:function(e){return e.dependencyType&&this.notifyDependencyType==this._getDependencyType(e.dependencyType)},_notifyImpedimentCreated:function(e){return"slave"==this.notifyDependencyType&&e.assignable&&e.assignable.id==this.entity.id},_notifyRelationCreated:function(e){return e&&e[this.notifyDependencyType]&&e[this.notifyDependencyType].id==this.entity.id},"bus afterInit > destroy":function(){this._relationCreateListener.stopListening(),this._impedimentCreateListener.stopListening()}});return a.Listener=i,a});
define('tau/ui/extensions/label/ui.extension.label.relationCount.observer',["Underscore","tau/core/class","tau/ui/extensions/relations/ui.extension.relations.observer"],function(t,e,n){var s=n.Listener.extend({_start:function(e){return 0===e.entityIds.length?!1:(this.config.store.on({type:this.config.type,eventName:"afterSave",hasChanges:this.config.hasChanges,listener:this},function(n){t.contains(e.entityIds,n.data.id)&&this.config.callback(n)}.bind(this)),!0)}}),i=n.extend({"bus beforeInit":function(){this._super.apply(this,arguments),this._relationTypesChangeListener=new s(this._createConfig({type:"relation",hasChanges:["relationType"]})),this._entityStatesChangeListener=new s(this._createConfig({type:"general",hasChanges:["entityState"]})),this.fire("updateBadge",{})},"bus afterInit:last + updateBadge":function(){this._trackRelationsChangesStop()},_trackRelationsChangesStop:function(){this._relationTypesChangeListener.stopListening(),this._entityStatesChangeListener.stopListening()},"bus afterInit:last + badgeDataRetrieved":function(t,e,n){var s=n.badgeData;this._trackRelationsChangesStart(s)},_trackRelationsChangesStart:function(e){this._relationTypesChangeListener.startListening({entityIds:t.pluck(e.masterRelations,"id")}),this._entityStatesChangeListener.startListening({entityIds:t.pluck(e.masterRelations,"masterId")})},"bus afterInit > badgeDataRetrieved > destroy":function(){this._trackRelationsChangesStop()}});return i});
define('tau/components/component.label.relationCount',["Underscore","tau/components/component.label","tau/models/model.label.relationCount","tau/ui/extensions/label/ui.extension.label.relationCount","tau/ui/extensions/label/ui.extension.label.relationCount.refresher","tau/ui/extensions/label/ui.extension.label.relationCount.observer"],function(e,n,t,o,l,s){return{create:function(i){var a=e.extend(i,{modelType:t,labelExtension:o});return a.extensions=a.extensions||[],a.extensions.push(l),a.extensions.push(s),n.create(a)}}});
define('tau/components/extensions/leadCycleTime/extension.ui.leadCycleTime',["jQuery","tau/components/extensions/component.extension.base"],function(t,e){var a=function(t){var e=null,a=t.target,i=t.value;a.click(function(t){e={x:t.pageX,y:t.pageY}}),a.addClass("ui-link").tauBubble({onShow:function(){var e=this.$popup.find(".tau-bubble__inner");e.find(".tau-time-interval-header").size()>0||e.append(['<div class="tau-time-interval-container">',"<table>","<tr>","   <td>",'       <div class="tau-time-interval-header">',t.caption,":</div>","   </td>","   <td>",'       <div class="tau-time-interval-value">',i,"</div>","   </td>","</tr>","<tr>","   <td>",'       <div class="tau-time-interval-header">',t.startCaption,":</div>","   </td>","   <td>",'       <div class="tau-time-interval-value">',t.startDate,"</div>","   </td>","</tr>","<tr>","   <td>",'       <div class="tau-time-interval-header">',t.endCaption,":</div>","   </td>","   <td>",'       <div class="tau-time-interval-value">',t.endDate,"</div>","   </td>","</tr>","</table>","</div>"].join(""))},target:a,alignTo:a,onArrowPositionConfig:function(t){var a=e.x-this.target.offset().left;t.offset=a+" 0"},onPositionConfig:function(t){var a=e.x-this.target.offset().left-70;t.offset=a+" 0"}})};return e.extend({"bus afterRender + dataBind":function(e,i,n){var d=t(i.element);n=n||{},a({target:d.find("svg.main-plot rect").eq(4),caption:"Cycle Time",value:n.cycleTimeTooltip,startCaption:"Start Date",startDate:(n.startDate||"").length>0?n.startDate:n.createDate,endCaption:n.endDateLabel,endDate:n.endDate}),a({target:d.find("svg.main-plot rect").eq(0),caption:"Lead Time",value:n.leadTimeTooltip,startCaption:"Create Date",startDate:n.createDate,endCaption:n.endDateLabel,endDate:n.endDate})}})});
define('tau/ui/templates/leadCycleTime/ui.template.leadCycleTime',["tau/core/templates-factory"],function(t){var e={name:"lead-cycle-time",options:{contentSelector:".request-list"},markup:['<div class="ui-lead-cycle-time" style="position: relative;">','<div style="position: absolute; top:0px;left: 6.5%;">','   <svg width="30" height="65" style="position: relative;left: -15px;">','       <text x="10" y="55" fill="rgb(174,174,174)" style="font-size: 10px;font-weight: bold;" transform="rotate(-90 10 55)">${createDate}</text>',"   </svg>","</div>","{{if (startDate)}}",'<div style="position: absolute; top:0px;left:{{if (cyclePercentage < 0.9)}} ${83-cyclePercentage*80}{{/if}}{{if (!(cyclePercentage<0.9))}}${86-cyclePercentage*80}{{/if}}%;">','   <svg width="30" height="57">','       <text x="10" y="55" fill="rgb(174,174,174)" style="font-size: 10px;font-weight: bold;" transform="rotate(-90 10 55)">${startDate}</text>',"   </svg>","</div>",'<div style="position:absolute;left:6.5%;top:65px;width:80%; height:4px;">&nbsp;</div>',"{{/if}}",'<div style="position: absolute; ',"{{if (cyclePercentage != null && cyclePercentage < 0.2)}}","top:-5px;left: 91","{{/if}}","{{if (cyclePercentage == null || cyclePercentage > 0.2)}}","top:-5px;left: 87","{{/if}}",'%;">','   <svg width="30" height="60" style="position: relative;left: -15px;">','       <text x="10" y="55" fill="rgb(174,174,174)" style="font-size: 10px;font-weight: bold;" transform="rotate(-90 10 55)">${endDateLabel}<tspan  x="10" dy="1.4em">${endDate}</tspan></text>',"   </svg>","</div>",'<div style="position: absolute;left:87.5%;top:51px;">','   <svg width="50" height="50">','    <text x="0" y="11" fill="rgb(70,155,219)" width="50" style="font-size: 10px;font-weight: bold;">${cycleTime}</text>','    <text x="0" y="23" fill="rgb(95,95,95)" style="font-size: 10px;font-weight: bold;">${leadTime}</text>',"   </svg>","</div>",'<svg width="100%" height="80" class="main-plot">',"   <defs>",'   <linearGradient id="cycleTime_${id}" x1="0%" y1="0%" x2="0%" y2="100%">','            <stop offset="0%" style="stop-color:rgb(186,210,239);stop-opacity:1"/>','            <stop offset="100%" style="stop-color:rgb(98,143,198);stop-opacity:1"/>',"        </linearGradient>",'        <linearGradient id="leadTime_${id}" x1="0%" y1="0%" x2="0%" y2="100%">','            <stop offset="0%" style="stop-color:rgb(178,184,194);stop-opacity:1"/>','            <stop offset="100%" style="stop-color:rgb(141,144,152);stop-opacity:1"/>',"        </linearGradient>","    </defs>",'    <rect x="6.5%" y="67" rx="3" ry="3" width="80%" height="5"','          fill="url(#leadTime_${id})" style="cursor: pointer;"/>','    <rect x="6%" y="5" width="1" height="70"','       style="fill:rgb(226,226,227);"/>','    <rect x="86.8%" y="5" width="1" height="70"','          style="fill:rgb(226,226,227);"/>',"{{if (cyclePercentage)}}",'    <rect class="lead-time-rect" x="${86-cyclePercentage*80}%" y="5" width="1" height="60"','       style="fill:rgb(226,226,227);"/>','    <rect x="${86.5-cyclePercentage*80}%" y="58" rx="3" ry="3" width="${cyclePercentage*80}%" height="5" style="cursor: pointer;"','          fill="url(#cycleTime_${id})"/>',"{{/if}}","</svg>","</div>"].join("")};return t.register(e)});
define('tau/components/component.leadCycleTime',["Underscore","tau/components/component.creator","tau/models/model.leadCycleTime","tau/components/extensions/leadCycleTime/extension.ui.leadCycleTime","tau/ui/templates/leadCycleTime/ui.template.leadCycleTime"],function(e,n,t,o,a){return{create:function(i){var l={ModelType:t,template:a,extensions:e.union(i.extensions||[],[o])};return n.create(l,i)}}});
define('tau/ui/templates/list_/grid.entity/relation/ui.template.list.grid.entity.row.relation',["tau/core/templates-factory"],function(t){var e={name:"list.grid.entity.row.relation",markup:["",'<tr class="i-item-${id}{{if entityState && entityState.isFinal}} tau-list__table__row_isfinalstate_true{{/if}}" data-relation-id="${relation.id}">','<td class="tau-relation-type">','<span runas="property.relationType" data-context:general:id="${relation.id}" data-context:general:entity-type:name="${relation.__type}">${relation.relationType.name}</span>',"</td>",'<td class="tau-entity-id">','<a href="${url}">${id}</a>',"</td>",'<td class="tau-entity-type">','<i class="tau-entity-icon tau-${entityType.name.toLowerCase()}">',"${entityType.term}","</i>","</td>",'<td class="tau-entity-name">${name}</td>','<td class="tau-entity-field tau-entity-project">',"{{if project}}",'<span class="tau-icon_type_color" style="background-color: ${project.color || "transparent"}">${project.abbreviation}</span>',"{{/if}}","</td>",'<td class="tau-entity-field tau-entity-state">',"{{if entityState}}",'<div runas="property.entityState" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}">${entityState.name}</div>',"{{else}}","{{if hasLastStatus}}",'<div runas="property.lastStatus" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}">${lastStatus}</div>',"{{/if}}","{{/if}}","</td>",'<td class="tau-entity-field"><span>${release || ""}</span></td>','<td class="tau-entity-field"><span>${iteration || ""}</span></td>','<td class="tau-action">','<button class="tau-btn tau-attention i-role-remove" type="button" data-relation-id="${relation.id}">Remove</button>',"</td>","</tr>"]};return t.register(e)});
define('tau/ui/templates/list_/grid.entity/request/ui.template.list.grid.entity.row.requester',["tau/core/templates-factory","tau/ui/templates/list_/grid.entity/ui.template.cell.progress","tau/ui/templates/list_/grid.entity/ui.template.cell.assignments","tau/ui/templates/list_/grid.entity/ui.template.cell.name","tau/ui/templates/assignmentsList/ui.template.assignments.mini","tau/ui/templates/property.effort/ui.template.property.effort.content"],function(t){var e={name:"list-grid-entity__row_requester",markup:["",'<li class="tau-list__list__item tau-list__list__item_requester" role="item">','<table class="tau-list__table">',"<tbody>",'<tr class="i-item-${id} tau-list__table__row  ">','<td class="tau-list__table__cell tau-list__table__cell-dragdrop"  role="sortable-handler" ><div class="dragdrop_indicator"></div></td>','<td class="tau-list__table__cell tau-list__table__cell-avatar">','{{if avatar}}<img src="${avatar}" class="owner-avatar" />{{/if}}',"</td>",'<td class="tau-list__table__cell tau-list__table__cell-name">',"{{if url}}",'<a href="${url}">',"{{/if}}","{{if firstName || lastName}}","${firstName} ${lastName}","{{else}}","${email}","{{/if}}","{{if url}}","</a>","{{/if}}","</td>",'<td class="tau-list__table__cell tau-list__table__cell-email">','<span class="tau-extension-tooltip" title="Email: ${email}">',"${email}","</span>","</td>",'<td class="tau-list__table__cell tau-list__table__cell-login">','<span class="tau-extension-tooltip" title="Login: ${login}">',"${login}","</span>","</td>",'<td class="tau-list__table__cell tau-list__table__cell-requesteractions">','<button class="action-detach button small" role="action-detach" type="button">Detach</button>',"</td>","</tr>","</tbody>","</table>","</li>"],dependencies:["ui.template.property.effort.content","ui.template.assignments.mini","cell-progress","cell-assignments","cell-name"]};return t.register(e)});
define('tau/ui/templates/list_/grid.entity/testcase/ui.template.list.grid.entity.row.testcaserun',["tau/core/templates-factory","tau/ui/templates/list_/grid.entity/ui.template.cell.progress","tau/ui/templates/list_/grid.entity/ui.template.cell.assignments","tau/ui/templates/list_/grid.entity/ui.template.cell.name","tau/ui/templates/assignmentsList/ui.template.assignments.mini","tau/ui/templates/property.effort/ui.template.property.effort.content"],function(t){var e={name:"list-grid-entity__rowtestcaserun_testcase",markup:["",'<li class="tau-list__list__item tau-list__list__item-testcaserun tau-list__list__item-testcaserun-testcase" role="item">','<table class="tau-list__table">',"<tbody>",'<tr class="tau-list__table__row">','<td class="tau-list__table__cell tau-list__table__cell-dragdrop"  role="sortable-handler" ><div class="dragdrop_indicator"></div></td>','<td class="tau-list__table__cell tau-list__table__cell-id">','<a class="tau-entitylink" href="${testplanrun.url}" title="${testplanrun.name}">','<em class="ui-type-icon ui-type-icon-testplanrun">${testplanrun.id}</em>',"</a>","</td>",'<td class="tau-list__table__cell tau-list__table__cell-name">',"${testplanrun.name}","</td>",'<td class="tau-list__table__cell tau-list__table__cell-date">','<span class="tau-extension-tooltip" title="Run Date: ${runDate}">',"${runDate}","</span>","</td>",'<td class="tau-list__table__cell tau-list__table__cell-release">',"{{if release}}",'<span class="tau-extension-tooltip" title="Release: ${release.name}">',"${release.name}","</span>","{{/if}}","</td>",'<td class="tau-list__table__cell tau-list__table__cell-iteration">',"{{if iteration}}",'<span class="tau-extension-tooltip" title="Iteration: ${iteration.name}">',"${iteration.name}","</span>","{{/if}}","</td>",'<td class="tau-list__table__cell tau-list__table__cell-build">',"{{if build}}",'<span class="tau-extension-tooltip" title="Build: ${build.name}">',"${build.name}","</span>","{{/if}}","</td>",'<td class="tau-list__table__cell tau-list__table__cell-laststatus">','<div class="ui-status ',"{{if passed === true}}","ui-status_type_passed green ","{{/if}}","{{if passed === false}}","ui-status_type_failed red ","{{if comment}}tau-extension-tooltip{{/if}}  ","{{/if}}",'{{if passed === null}}ui-status_type_na grey{{/if}}" ',"{{if comment}}",'title="Comment: \n ${comment}"',"{{/if}}",">","{{if runDate !== null}}","{{if passed === true}}","Passed","{{/if}}","{{if passed === false}}","Failed","{{/if}}","{{if passed === null}}","Skipped","{{/if}}","{{/if}}","</div>","</td>","</tr>","</tbody>","</table>","</li>"],dependencies:["ui.template.property.effort.content","ui.template.assignments.mini","cell-progress","cell-assignments","cell-name"]};return t.register(e)});
define('tau/ui/templates/list_/grid.entity/user/ui.template.list.grid.entity.row.team',["tau/core/templates-factory","tau/ui/templates/list_/grid.entity/ui.template.cell.progress","tau/ui/templates/list_/grid.entity/ui.template.cell.assignments","tau/ui/templates/list_/grid.entity/ui.template.cell.name","tau/ui/templates/assignmentsList/ui.template.assignments.mini","tau/ui/templates/property.effort/ui.template.property.effort.content"],function(t){var e={name:"list-grid-entity__rowteam_user",markup:["",'<li class="tau-list__list__item tau-list__list__item-testcaserun tau-list__list__item-testcaserun-testcase" role="item">','<table class="tau-list__table">',"<tbody>",'<tr class="tau-list__table__row">','<td class="tau-list__table__cell tau-list__table__cell-name" style=" white-space: nowrap;">',"${team.name}","</td>",'<td class="tau-list__table__cell tau-list__table__cell-role">','<div runas="property.role" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}">',"${role.name}","</div>","</td>",'<td class="tau-list__table__cell tau-list__table__cell-entityactions">','<button class="action-detach button small" role="action-detach" type="button" data-confirm-message="Removing person from team  \'${team.name}\' will unassign that person from ALL tasks, stories, bugs, etc. (except for completed). Are you sure you want to proceed?">Remove from team</button>',"</td>","</tr>","</tbody>","</table>","</li>"],dependencies:["ui.template.property.effort.content","ui.template.assignments.mini","cell-progress","cell-assignments","cell-name"]};return t.register(e)});
define('tau/ui/templates/list_/grid.entity/user/ui.template.list.grid.entity.row.project',["tau/core/templates-factory"],function(t){var e={name:"list-grid-entity__rowproject_user",markup:["",'<li class="tau-list__list__item tau-list__list__item-testcaserun tau-list__list__item-testcaserun-testcase" role="item">','<table class="tau-list__table">',"<tbody>",'<tr class="tau-list__table__row">','<td class="tau-list__table__cell tau-list__table__cell-name" style="white-space: nowrap;">',"${project.name}","</td>",'<td class="tau-list__table__cell tau-list__table__cell-role">','<div runas="property.role" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}">',"${role.name}","</div>","</td>",'<td class="tau-list__table__cell tau-list__table__cell-entityactions">','<button class="action-detach button small" role="action-detach" type="button" data-confirm-message="Removing person from project  \'${project.name}\' will unassign that person from ALL tasks, stories, bugs, etc. (except for completed). Are you sure you want to proceed?">Remove from project</button>',"</td>","</tr>","</tbody>","</table>","</li>"]};return t.register(e)});
define('tau/ui/templates/list_/grid.entity/project/ui.template.list.grid.entity.row.team',["tau/core/templates-factory","tau/ui/templates/list_/grid.entity/ui.template.cell.progress","tau/ui/templates/list_/grid.entity/ui.template.cell.assignments","tau/ui/templates/list_/grid.entity/ui.template.cell.name","tau/ui/templates/assignmentsList/ui.template.assignments.mini","tau/ui/templates/property.effort/ui.template.property.effort.content"],function(t){var e={name:"list-grid-entity__rowteam_project",markup:["",'<li class="tau-list__list__item tau-list__list__item-testcaserun tau-list__list__item-testcaserun-testcase" role="item">','<table class="tau-list__table">',"<tbody>",'<tr class="tau-list__table__row">','<td class="tau-list__table__cell tau-list__table__cell-name"  style=" white-space: nowrap;">',"${team.name}","</td>",'<td class="tau-list__table__cell tau-list__table__cell-entityactions">','<button class="action-detach button small" role="action-detach" type="button" ',"data-confirm-message=\"Detach project from team  '${team.name}' blablabla. Are you sure you want to proceed?\">Remove from team</button>","</td>","</tr>","</tbody>","</table>","</li>"],dependencies:["ui.template.property.effort.content","ui.template.assignments.mini","cell-progress","cell-assignments","cell-name"]};return t.register(e)});
define('tau/ui/templates/list_/grid.entity/team/ui.template.list.grid.entity.row.project',["tau/core/templates-factory","tau/ui/templates/list_/grid.entity/ui.template.cell.progress","tau/ui/templates/list_/grid.entity/ui.template.cell.assignments","tau/ui/templates/list_/grid.entity/ui.template.cell.name","tau/ui/templates/assignmentsList/ui.template.assignments.mini","tau/ui/templates/property.effort/ui.template.property.effort.content"],function(t){var e={name:"list-grid-entity__rowproject_team",markup:["",'<li class="tau-list__list__item tau-list__list__item-testcaserun tau-list__list__item-testcaserun-testcase" role="item">','<table class="tau-list__table">',"<tbody>",'<tr class="tau-list__table__row">','<td class="tau-list__table__cell tau-list__table__cell-name">',"${project.name}","</td>",'<td class="tau-list__table__cell tau-list__table__cell-entityactions">','<button class="action-detach button small" role="action-detach" type="button" ',"data-confirm-message=\"Detach team from team  '${project.name}' blablabla. Are you sure you want to proceed?\">Remove from team</button>","</td>","</tr>","</tbody>","</table>","</li>"],dependencies:["ui.template.property.effort.content","ui.template.assignments.mini","cell-progress","cell-assignments","cell-name"]};return t.register(e)});
define('tau/ui/templates/list_/grid.entity/team/ui.template.list.grid.entity.row.member',["tau/core/templates-factory","tau/ui/templates/list_/grid.entity/ui.template.cell.progress","tau/ui/templates/list_/grid.entity/ui.template.cell.assignments","tau/ui/templates/list_/grid.entity/ui.template.cell.name","tau/ui/templates/assignmentsList/ui.template.assignments.mini","tau/ui/templates/property.effort/ui.template.property.effort.content"],function(t){var e={name:"list-grid-entity__rowmember_team",engine:"jqote2",markup:["",'<li class="tau-list__list__item tau-list__list__item_requester" role="item">','<table class="tau-list__table">',"<tbody>",'<tr class="i-item-${id} tau-list__table__row  ">','<td class="tau-list__table__cell tau-list__table__cell-dragdrop"  role="sortable-handler" ><div class="dragdrop_indicator"></div></td>','<td class="tau-list__table__cell tau-list__table__cell-name">','<a href="${url}">',"${user.name}","</a>","</td>",'<td class="tau-list__table__cell tau-list__table__cell-avatar">',"{{if user.avatarUri}}",'<img src="${user.avatarUri}24" class="owner-avatar" />',"{{/if}}","</td>",'<td class="tau-list__table__cell tau-list__table__cell-login">','<div runas="property.role" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}">',"${role.name}","</div>","</td>",'<td class="tau-list__table__cell tau-list__table__cell-name">','<span class="tau-extension-tooltip" title="Email: ${user.email}">',"${user.email}","</span>","</td>",'<td class="tau-list__table__cell" style="width:20px;">','<span class="property" title="is admin"><div class="ui-checkbox {{if user.isAdmin}}checked{{else}}unchecked{{/if}}">&nbsp;</div></span>',"</td>",'<td class="tau-list__table__cell" style="width:20px;">','<span class="property" title="is active"><div class="ui-checkbox {{if user.isActive}}checked{{else}}unchecked{{/if}}">&nbsp;</div></span>',"</td>",'<td class="tau-list__table__cell tau-list__table__cell-requesteractions">','<button class="action-detach button small" role="action-detach" type="button">Detach</button>',"</td>","</tr>","</tbody>","</table>","</li>"],dependencies:["ui.template.property.effort.content","ui.template.assignments.mini","cell-progress","cell-assignments","cell-name"]};return t.register(e)});
define('tau/ui/templates/list_/grid.entity/ui.template.list.grid.entity',["tau/core/templates-factory","tau/ui/templates/list_/grid.entity/ui.template.list.grid.entity.group","tau/ui/templates/list_/grid.entity/ui.template.list.grid.entity.row","tau/ui/templates/list_/grid.entity/testplan/ui.template.list.grid.entity.row.testplanrun","tau/ui/templates/list_/grid.entity/testplanrun/ui.template.list.grid.entity.row.testcaserun","tau/ui/templates/list_/grid.entity/userstory/ui.template.list.grid.entity.row.testcase","tau/ui/templates/list_/grid.entity/relation/ui.template.list.grid.entity.row.relation","tau/ui/templates/list_/grid.entity/request/ui.template.list.grid.entity.row.requester","tau/ui/templates/list_/grid.entity/testcase/ui.template.list.grid.entity.row.testcaserun","tau/ui/templates/list_/grid.entity/user/ui.template.list.grid.entity.row.team","tau/ui/templates/list_/grid.entity/user/ui.template.list.grid.entity.row.project","tau/ui/templates/list_/grid.entity/project/ui.template.list.grid.entity.row.team","tau/ui/templates/list_/grid.entity/team/ui.template.list.grid.entity.row.project","tau/ui/templates/list_/grid.entity/team/ui.template.list.grid.entity.row.member","tau/ui/templates/list_/grid.entity/relation/ui.template.list.grid.entity.row.relation","tau/ui/templates/list_/ui.template.list.comment"],function(t){var i={name:"list-grid-entity",markup:['<div class="tau-list">',"   {{if isEmpty === true}}",'       <div class="tau-list__empty-message">${config.currentView.emptyMessage}</div>',"   {{else}}",'       <div class="tau-list__content">',"           {{if groups && groups.length}}",'               {{tmpl(groups) "list-grid-entity__group"}}',"           {{/if}}","           {{if items && items.length}}",'               <div class="tau-list__group tau-list__group_flat_true" role="group">','                   <ul class="tau-list__list" role="list">',"                       {{tmpl(items) $item.data.config.currentView.rowTemplateName}}","                   </ul>","               </div>","           {{/if}}","       </div>","   {{/if}}",'   <div class="tau-list__comment-holder">','       {{tmpl({}) "list-grid__comment"}}',"   </div>","</div>"],dependencies:["list-grid-entity__group","list-grid-entity__row","list-grid-entity__rowtestplanrun","list-grid-entity__rowtestcaserun","list-grid-entity__rowtestcase","list.grid.entity.row.relation","list-grid-entity__row_requester","list-grid-entity__rowtestcaserun_testcase","list-grid-entity__rowteam_user","list-grid-entity__rowproject_user","list-grid-entity__rowteam_project","list-grid-entity__rowproject_team","list-grid-entity__rowmember_team","list-grid__comment"]};return t.register(i)});
define('tau/ui/extensions/list/extension.list.editable.progress',["tau/components/extensions/component.extension.base"],function(e){return e.extend({name:"extension.list.editable.progress",category:"edit","bus afterRender":function(e){var n=e.data.element;n.addClass("tau-list-editable")}})});
define('tau/components/component.list.editable',["Underscore","tau/components/component.list","tau/ui/templates/list_/grid.entity/ui.template.list.grid.entity","tau/ui/extensions/list/extension.list.editable.progress","tau/views/view.compositeControl"],function(e,t,r,p,s){return{create:function(o){return o=e(o).defaults({ViewType:s,template:o.template||r,extensions:[],dependencies:["title","property.severity","property.priority","property.relationType","property.entityState","assignmentsList","property.effort","progressBar.small","property.release","property.responsible","property.iteration","property.build","property.build.testPlanRun","property.lastStatus","property.lastRunDate.list","property.status.testCaseRun","property.completeDate","property.endDate.list","property.role","property.role.modern","property.startDate.projectMember","property.endDate.projectMember","steps","success","menu.testPlanRun","entity.quickAddTrigger","entity.menuTrigger"]}),o.extensions.push(p),t.create(o)}}});
define('tau/components/component.live-chat',["tau/components/component.creator"],function(t){return{create:function(a){var n={name:"live-chat",engine:"jqote2",markup:['<div class="tau-support-item i-role-live_chat">',"        <!-- BEGIN ProvideSupport.com Text Chat Link Code -->",'        <% var src="//image.providesupport.com/js/0ju6t9r4k2h281f93tgt7j0vzx/safe-textlink.js?ps_h=NvMC&ps_t="+new Date().getTime();%>',"        <% src+=\"&online-link-html=<span class='tau-support-icon tau-live-chat'></span><span class='tau-btn tau-btn-big tau-chat-online'>Live%20chat</span>\";","        <% src+=\"&offline-link-html=<span class='tau-support-icon tau-live-chat'></span><span class='tau-btn tau-btn-big tau-chat-offline'>Live%20chat</span>\";%>",'        <span id="scNvMC"><span class="tau-support-icon tau-live-chat"></span><span class="tau-btn tau-btn-big tau-chat-offline">Live chat</span></span>','        <span id="sdNvMC" style="display:none"><script type="text/javascript" src="<%=src%>"></script></span>','        <span id="ciNvMC" style="z-index:100;position:absolute"></span>',"        <!-- END ProvideSupport.com Text Chat Link Code -->","</div>"]},s={template:n},e=t.create(s,a);return e.fire("dataBind",{}),e}}});
define('tau/ui/extensions/page/ui.extension.page.configConvertor',["Underscore","tau/core/extension.base","tau/configurations/converters/converter.context"],function(e,t,n){return t.extend({"bus before_onConfigContainerCreated":function(t){var o=[],a=[];if(t.data.context){var r=t.data.context;e.each(r.getPractices(),function(e){o.push(e.name)}),a=r.getEdition()}var c=t.data;c=n.convert(c,o,a)}})});
define('tau/ui/extensions/page/ui.extension.page.storeError',["Underscore","tau/core/extension.base","tau/utils/utils.serverErrorTranslator"],function(t,a,e){return a.extend({"bus beforeInit":function(a,e){var r=e.config.context,i=r.entity,n=r.configurator.getStore();n.unbind(this),n.on({eventName:"failure",listener:this},t.bind(function(t){t.data.cmd.config.failureGlobal!==!1&&(i&&n.evictPersistedObject(i.id,i.type),this.onFailure(t))},this))},"bus beforeInit + destroy":function(t,a){var e=a.config.context.configurator.getStore();e.unbind(this)},onFailure:function(a){var r={};if(a.data&&a.data.data)if(a.data.data.Message)r=e.translateServerError.call(this,a.data.data);else{var i=a.data.data.response;if(i)if(t.isArray(i)){var n=[i[1]];t.isArray(i[4])&&i[4].length>0&&i[4][0]!=n[0]&&n.push(i[4][0]),r={message:n.join(":&nbsp;")}}else i.Message&&(r=e.translateServerError.call(this,i))}var s=0;a.data&&a.data.data&&(s=a.data.data.status||0),this.fire("error",r),(s>=400||0===s)&&this.fire("globalFailure"),a.data&&a.data.cmd&&0===s&&this.fire("destroy")}})});
define('tau/ui/extensions/ui.extension.loading',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,r,o){return o.extend({init:function(e){this._super(e)},"bus beforeInit":function(){var e=r(this.config.progressTargetSelector||"body");e.tauProgressIndicator(),this.fire("$progressIndicator.ready",e),this.fire("showLoading","reaction on beforeInit")},"bus $progressIndicator.ready:last + showLoading":function(e,r){r.tauProgressIndicator("show")},"bus $progressIndicator.ready:last + hideLoading":function(e,r){r.tauProgressIndicator("hide")},"bus beforeInit+afterRender+showLoading":function(){this.fire("hideLoading","hide on after render")},"bus globalFailure":function(){this.fire("hideLoading","hide on global failure")},"bus afterRender+globalFailure":function(e){var r=e.afterRender.data.element;r.show()},"bus $progressIndicator.ready:last + destroy":function(e,r){(!this.config.progressTargetSelector||r.data("ui-tauProgressIndicator"))&&r.tauProgressIndicator("hide")}})});
define('tau/ui/extensions/board.tooltip/ui.extension.board.tooltipArticle',["Underscore","jQuery","tau/core/extension.base"],function(t,e,o){e.widget("ui.tauBubbleArticle",e.ui.tauBubble,{});var i="http://guide.targetprocess.com/teams-and-projects.html#visibility",r=t.map([{id:"board.add",html:"<p>Create new Views – just choose what you want to see and how you want to see it.</p><p>Play with the Views!</p>",url:"http://guide.targetprocess.com/boards/boards-overview.html"},{id:"project.formAdd.selectProcess",html:"<p>You can use our default process or create your own with custom workflows and practices.</p>",url:i},{id:"project.formAdd.assignPeople",html:"<p>People can be included into both teams and projects so that you can vary work visibility.</p>",url:i},{id:"project.formAdd.assignTeams",html:"<p>You can have one team that works on several projects or one large project with several teams. Any mix of teams and projects, no matter how crazy, is supported.</p>",url:i},{id:"team.formAdd.assignPeople",html:"<p>People can be included into both teams and projects so that you can vary work visibility.</p>",url:i},{id:"team.formAdd.assignProjects",html:"<p>You can have one team that works on several projects or one large project with several teams. Any mix of teams and projects, no matter how crazy, is supported.</p>",url:i},{id:"board.templates",html:"<p>Easily create Views from predefined templates.</p>",url:"http://guide.targetprocess.com/boards/templates.html"},{id:"board.editor",html:"<p>On a View you can see different data as cards, organize your selected cards by common properties, and apply filters to cards and lanes.</p>",url:"http://guide.targetprocess.com/boards/boards-how-to.html",linkText:"See how to setup a View"},{id:"board.editor.access",html:"<p>Anyone can create Views that are private or shared with their team/project, but only administrators can create public Views.</p>",url:"http://guide.targetprocess.com/boards/access.html"},{id:"board.editor.prioritization",html:"<p>By default you should hold the Shift key to prioritize cards. While holding Shift, simply drag a card and move it into the desired position.</p><p>Remember that you can always change the prioritization mode for the View.</p>",url:"http://guide.targetprocess.com/boards/sort.html"},{id:"board.editor.selectCards",html:"<p>You can display various entities on Views. Entities with common properties can be displayed at the same time.</p>",url:"http://guide.targetprocess.com/boards/cards.html"},{id:"board.editor.selectLanes",html:"<p>Organize your selected items by common properties. You can use different properties (even custom fields) as your horizontal and vertical lanes.</p>",url:"http://guide.targetprocess.com/boards/lanes.html",linkText:"View the full list"},{id:"board.editor.selectListLevels",html:"<p>Organize your selected items by common properties. You can use different properties (even custom fields) as your 1st and 2nd levels.</p>",url:"http://guide.targetprocess.com/boards/lists.html"},{id:"board.editor.selectListCards",html:"<p>You can display various entities on Views. Entities with common properties can be displayed at the same time.</p>",url:"http://guide.targetprocess.com/boards/lists.html"},{id:"timeline.options.plannedInPast",html:"<p>This checkbox shows/hides planned dates for Done cards.</p>",url:"https://guide.targetprocess.com/boards/getting-started-with-the-timeline-view.html#planned-time"},{id:"timeline.options.showForecast",html:"<p>This checkbox shows/hides Forecast for cards.</p>",url:"https://guide.targetprocess.com/boards/getting-started-with-the-timeline-view.html#forecast-time"},{id:"board.editor.filter",html:["<p>","<strong>Basic mode.</strong> Just type keywords and filter cards by name. You can filter lanes (columns and rows) this way, as well.","</p>","<p>",'<strong>Advanced mode.</strong> These filters are much more powerful. Start off with "?" and from there you can create a complex query to use as a filter.',"</p>"].join(""),url:"http://guide.targetprocess.com/filters.html"},{id:"board.editor.saveContext",html:'<p>Specify a Projects-Teams context for&nbsp;this&nbsp;View, or go with "not specified" context.</p>',url:"https://guide.targetprocess.com/boards/context.html"}],function(e){return t.defaults(e,{url:"http://guide.targetprocess.com",linkText:"Read more&hellip;"})});return o.extend({destroy:function(){this._super()},"bus afterRender":function(){var o=t.bind(function(t){var o=e(t.currentTarget);o.data("ui-tauBubbleArticle")||this._initTooltip(o)},this);e(document).on("mouseenter.tooltipArticle",".i-role-tooltipArticle",o),this.on("destroy",function(){e(document).off("mouseenter.tooltipArticle",".i-role-tooltipArticle",o)})},_initTooltip:function(e){var o=e.data("articleId"),i=t.findWhere(r,{id:o});i&&e.tauBubbleArticle({content:i.html+'<a target="_blank" href="'+i.url+'">'+i.linkText+"</a>",zIndex:99999,template:['<div class="tau-bubble-board">','<div class="tau-bubble-board__arrow" role="arrow"></div>','<div class="tau-bubble-board__inner tau-container" role="content"></div>',"</div>"].join(""),className:"tau-bubble-tooltipArticle",showEvent:"click",hideEvent:"click",stackName:"tooltipArticle",delay:500,showOnCreation:!1,onShow:function(){this.$target.toggleClass("tau-help_state_active",!0)},onHide:function(){this.$target.toggleClass("tau-help_state_active",!1)},onPositionConfig:"board.add"==i.id?this._tooltipPositionConfigRight:this._tooltipPositionConfigTop,onArrowPositionConfig:this._tooltipArrowPositionConfigTop})},_tooltipPositionConfigTop:function(t){t.at="left-8 top",t.my="left-50 bottom"},_tooltipArrowPositionConfigTop:function(t){return"center top"==t.at?t.at="left+10 top":"center bottom"==t.at&&(t.at="left+10 bottom"),t},_tooltipPositionConfigRight:function(t){t.at="right center",t.my="left center"}})});
define('tau/ui/templates/page/ui.template.page.error',["tau/core/templates-factory"],function(s){var e={name:"page.error",engine:"jqote2",markup:["<div class=\"tau-stop-message <%= this.className || '' %>\">",'<div class="tau-stop-message__content">','<h2 class="tau-stop-message__header"><%= _.asString(this.err.message) %></h2>',"<% if (this.err.description){ %>",'<p class="tau-stop-message__body"><%= _.asString(this.err.description) %></p>',"<% } %>","<% if (this.backLink){ %>",'<a href="<%= this.backLink %>" class="tau-stop-message__return-link">Back to previous page</a>',"<% } %>","</div>","</div>"]};return s.register(e)});
define('tau/components/component.page.base',["Underscore","tau/components/component.creator","tau/ui/extensions/page/ui.extension.page.configConvertor","tau/ui/extensions/page/ui.extension.page.storeError","tau/components/extensions/error/extension.errorBar","tau/ui/extensions/ui.extension.loading","tau/ui/extensions/board.tooltip/ui.extension.board.tooltip","tau/ui/extensions/board.tooltip/ui.extension.board.tooltipArticle","tau/ui/templates/page/ui.template.page.error"],function(e,n,o,t,i,u,r,s){return{create:function(a,p){var d=[o,i,r,s];a.turnOffLoadingIndicator!==!0&&d.push(u),a.turnOffErrorEmiter!==!0&&d.push(t),d=e.union(d,a.extensions);var x={name:a.name,ModelType:a.ModelType,ViewType:a.ViewType,extensions:d,queuedBus:a.queuedBus};return p.queuedBus=x.queuedBus,n.create(x,p)}}});
define('tau/views/view.master.board',["Underscore","tau/core/view-base","tau/components/component.board.container","tau/configurations/board.container.config"],function(e,n,t,i){return n.extend({init:function(e){this._super(e)},initialize:function(){},"bus view.dom.ready":function(e){this.container.fire("view.dom.ready",e.data)},"bus beforeInit + boardSettings.ready":function(n,o,r){var a=this,c=o.config,s=r,d=o.config.context.configurator,f=new i(d),u=e.extend(c,f.getMasterConfig()),y=a.container=t.create({name:"board page container",layout:u.layout,template:u.template,store:c.store,extensions:e.union([],u.extensions||[]),context:c.context});y.on("afterInit",a["container afterInit"],a),y.on("afterRender",a["container afterRender"],a),y.on("componentsCreated",a["container componentsCreated"],a),y.fire("boardSettings.ready",s),a.fire("component.ready",y),y.initialize(u)},"bus component.ready:last > boardSettings.ready":function(e){var n=e["component.ready"].data,t=e["boardSettings.ready"].data;n.fire("boardSettings.ready",t)},"container afterInit":function(){this.fireAfterInit()},"container componentsCreated":function(e){this.fire(e.name,e.data)},"container afterRender":function(e){this.fireBeforeRender(),this.element=e.data.element,this.fireAfterRender()},lifeCycleCleanUp:function(){this.destroyContainer(),this._super()},destroyContainer:function(){this.container&&(this.container.destroy(),this.container=null)},destroy:function(){this.destroyContainer(),this._super()}})});
define('tau/components/component.master.board',["tau/components/component.page.base","tau/views/view.master.board"],function(e,n){return{create:function(r){var t={name:"board page component",turnOffErrorEmiter:!0,extensions:[],ViewType:n};return e.create(t,r)}}});
define('tau/ui/templates/ui.template.empty.container',["tau/core/templates-factory"],function(e){var n={name:"container.empty.master",engine:"jqote2",markup:["<div>",'<div role="main"></div>',"</div>"],dependencies:[]};return e.register(n)});
define('tau/configurations/empty.container.config',["Underscore","tau/core/class","tau/ui/templates/ui.template.empty.container"],function(e,t,n){var a=t.extend({getMasterConfig:function(){return{layout:"selectable",template:n,children:[]}}});return new a});
define('tau/views/view.master.empty',["Underscore","tau/core/view-base","tau/components/component.container","tau/configurations/empty.container.config"],function(e,n,t,i){return n.extend({init:function(e){this._super(e)},initialize:function(){},"bus view.dom.ready":function(e){this.container.fire("view.dom.ready",e.data)},"bus beforeInit":function(n,o){var r=this,a=o.config,c=e.extend(a,i.getMasterConfig(a)),s=r.container=t.create({name:"empty page container",layout:c.layout,template:c.template,store:a.store,extensions:e.union([],c.extensions||[]),context:a.context});s.on("afterInit",r["container afterInit"],r),s.on("afterRender",r["container afterRender"],r),s.on("componentsCreated",r["container componentsCreated"],r),r.fire("component.ready",s),s.initialize(c)},"container afterInit":function(){this.fireAfterInit()},"container componentsCreated":function(e){this.fire(e.name,e.data)},"container afterRender":function(e){this.fireBeforeRender(),this.element=e.data.element,this.fireAfterRender()},lifeCycleCleanUp:function(){this.destroyContainer(),this._super()},destroyContainer:function(){this.container&&(this.container.destroy(),this.container=null)},destroy:function(){this.destroyContainer(),this._super()}})});
define('tau/components/component.master.empty',["tau/components/component.page.base","tau/views/view.master.empty"],function(e,n){return{create:function(t){var r={name:"empty page component",turnOffErrorEmiter:!0,turnOffLoadingIndicator:!0,extensions:[],ViewType:n};return e.create(r,t)}}});
define('tau/models/model.menu.actions',["Underscore","tau/core/extension.base","tau/core/termProcessor"],function(e,t,i){var n=45,a=t.extend({"bus beforeInit":function(t,i){var n=i.config,a=i.config.context.configurator,r=i.config.context.entity;this.fire("configurator.ready",a),this.fire("entity.ready",r);var o=n.items,s=n.eventNamesCommon||{};e.defaults(s,{dataBind:"dataBind"});var c=s.dataBind,f=[],u=0;e.forEach(o,function(e){if("-----"===e){if(0===u)return;u=0}else++u;f.push(e)}),this.fire(c,{items:f})},"bus configurator.ready:last + beforeInit:last + entity.ready:last + menu.show.first":function(t,a,r,o,s){var c=new i(r.config.context.getTerms()),f=function(e){var t=c.getTerms(e.name);return{id:e.id,label:t.name,name:e.name,className:"tau-"+e.name.toLowerCase(),icon:t.iconSmall}},u=function(t){return e.chain(t).filter(function(e){return e.id!=n}).map(f).value()},d=r.config.items;e.findWhere(d,{roleAction:"convert"})&&a.getActionsService().getEntityTypesToConvert(o.id).done(e.bind(function(t){var i=u(t),a=e.find(t,function(e){return e.id==n});if(a){var r=f(a);r.label+="&hellip;",r.alias="convertToTask",i.push(r)}this.fire("convert.submenuData.ready",{items:i})},this));var m=o.entityType.name.toLowerCase();"request"===m&&a.getActionsService().getEntityTypesToCreateFromRequest(o.id).done(e.bind(function(t){var i=u(t),a=e.find(t,function(e){return e.id==n});if(a){var r=f(a);r.label+="&hellip;",r.alias="createTask",i.push(r)}this.fire("create.submenuData.ready",{items:i})},this)),("iteration"===m||"teamiteration"===m)&&a.getStore().get(m,{id:o.id,fields:["canBeFinished"]}).done({success:e.bind(function(e){var t=e[0].data.canBeFinished;t&&s.find(".tau-action-finish_iteration").show()},this)})}});return a});
define('tau/ui/extensions/editable-base',["tau/components/extensions/component.extension.base"],function(e){return e.extend({category:"edit","bus permissionsReady + afterRender":function(e){var t=e.permissionsReady.data;t.editable&&this.onEditActivated({element:e.afterRender.data.element})},onEditActivated:function(){}})});
define('tau/ui/behaviour/menu/ui.behaviour.menu.actions',["Underscore","jQuery","tau/core/tau-widget"],function(e,t,n){n.widget("ui.behaviourMenuActions",{_create:function(){this.init()},init:function(){var e=this,n=this.options.onClick||function(){e.show()},i=t(this.element);this.$element=i,this.$popup=i.find(".ui-menu__popup"),this.$items=this.$element.find(".ui-menu__item-action .drop-down-option"),this.currentIndex=-1,this.options.classActive="drop-down-option_hover",e.isOpened=!1,this.$element.find(".ui-menu__trigger").click(function(e){n(e)}),this._bindEvents()},show:function(){var e=this;e.isOpened=!e.isOpened,e.isOpened?e._mapKeyboard():e._unmapKeyboard()},_bindEvents:function(){var e=this;e.$items.hover(function(){e.$items.not(this).removeClass(e.options.classActive),t(this).addClass(e.options.classActive),e.currentIndex=e.$items.index(this)},function(){t(this).removeClass(e.options.classActive)}),t("body"+this.eventNamespace).click(function(n){t(n.target).closest(".ui-menu__item").hasClass("ui-menu__item-dont-close")||(e.isOpened&&!t(n.target).parents(".tau-bubble").length&&e.close(),t(n.target).parents(".ui-menu:first").length)})},_mapKeyboard:function(){var e=this;this.options.keyboardManager.pushHandler({handleKeyDown:function(n){switch(n.keyCode){case t.ui.keyCode.ESCAPE:n.preventDefault(),e.close();break;case t.ui.keyCode.DOWN:n.preventDefault(),e.currentIndex++,e.currentIndex=e.currentIndex>=e.$items.length?0:e.currentIndex,e.$items.removeClass(e.options.classActive),e.$items.eq(e.currentIndex).addClass(e.options.classActive);break;case t.ui.keyCode.UP:n.preventDefault(),e.currentIndex--,e.currentIndex=e.currentIndex<0?e.$items.length-1:e.currentIndex,e.$items.removeClass(e.options.classActive),e.$items.eq(e.currentIndex).addClass(e.options.classActive);break;case t.ui.keyCode.ENTER:n.preventDefault();var i=e.$items.filter("."+e.options.classActive);i&&i.parent().trigger("click")}}})},_unmapKeyboard:function(){this.options.keyboardManager.popHandler()},close:function(){var e=this;e.isOpened=!1,e._unmapKeyboard()},destroy:function(){t("body"+this.eventNamespace).off(),self.isOpened&&this._unmapKeyboard()}})});
define('tau/components/extensions/menu/extension.menu.actions',["Underscore","jQuery","tau/ui/extensions/editable-base","tau/ui/behaviour/menu/ui.behaviour.menu.actions","libs/jquery/jquery.ui.tauConfirm"],function(t,e,i){return i.extend({"bus afterRender":function(t,e){var i=this.$el=e.element,n=i.find(".drop-down-list");this.fire("$el.ready",i),this.fire("$menu.ready",n),this.fire("menu.show.first",i)},"bus configurator.ready + dataBind + $el.ready + $menu.ready":function(e,i,n,o,r){var a=this;this.bindData=n,this.redirect=i.getRedirect(),o.behaviourMenuActions({keyboardManager:i.getKeyBoardManager(),onClick:function(){a.wasShownBefore||(a.fire("menu.show.first",o),a.wasShownBefore=!0),a.fire("menu.show",o)}}),r.find(".ui-menu__item-action").click(t.bind(this.executeCommand,this))},"bus select":function(){this.$el.behaviourMenuActions("show")},removeEntity:function(){var t=this.config.context.entity,e=this.config.context.configurator.getStore();e.remove(t.entityType.name,{id:t.id}).done(),this.config.context.configurator.getHistory().exclude(t.id)},redirectTo:function(t,e){this.redirect.redirect(t,e)},split:function(){var t=this.config.context.entity.id,e={generalID:t};this.fire("split",e)},markAsDuplicate:function(){var t=this.config.context.entity.id,e={generalID:t};this.fire("markAsDuplicate",e)},attachToRequest:function(){var t=this.config.context.entity.id;this.fire("attachToRequest",{generalID:t})},moveOrCopy:function(){var t=this.config.context.entity.id;this.fire("moveOrCopy",{generalID:t})},copyToProject:function(t){this.fire("board.plus.copy.to.project",{entity:this.config.context.entity,$popupTarget:t.$target})},executeCommand:function(i){if(!e(i.target).is("a")&&!e(i.target).is("i")){var n=this,o=e(i.currentTarget),r=o.data("alias"),a=t.find(this.bindData.items,function(t){return t.alias==r});if(a){var c=a.command,s=a.confirmation||!1,u=t.bind(function(){if(t.isFunction(c)){var e={$target:o};c.call(n,n,e)}else if("object"==typeof c){var i={components:c,context:n.config.context};n.createComponents(i,function(t){var e=t[0].component;e.initialize()})}else a.url&&n.redirectTo(a.url);this.fire("action.started",{})},this);s?o.tauConfirm({showOnCreation:!0,content:["<h3>"+s+"</h3>"].join(""),callbacks:{success:u}}):u()}}}})});
define('tau/ui/templates/actions/ui.template.moveOrCopy',["tau/core/templates-factory"],function(e){var t={name:"move-or-copy",markup:['<div style="display: none;">','	<div id="copyActionPopup" style="padding: 10px">','				<table cellpadding="6" cellspacing="0">',"					<tr>","						<td>",'                           <select id="projectSelector">','                               <option value="0" >- Select Project -</option>','                               {{each projects}}<option value="${ID}" >${Name}</option>{{/each}}',"                           </select>","						</td>","						<td>",'                           <input type="button" value="Copy" class="copy" disabled></button> ',"						</td>","						<td>",'                           <input type="button" value="Move" class="move" disabled></button> ',"						</td>","					</tr>","				</table>",'					<div style="font-size: 90%">',"						Custom fields will be saved only when the entity is copied or moved to a project with the same process","					</div>","	</div>","</div>"]};return e.register(t)});
define('tau/components/extensions/menu/extensions.menu.moveOrCopy',["tau/components/extensions/component.extension.base","tau/core/templates-factory","tau/ui/templates/actions/ui.template.moveOrCopy"],function(e,o){var t=0;return e.extend({"bus moveOrCopy":function(e){var o=e.data.generalID;this.moveOrCopy(o)},moveOrCopy:function(e){var n=this;Ext.WindowMgr.zseed=99999;var i=this.config.context.configurator.getActionsService(),c=function(c){function r(o,t){var c=$("#"+p+" #projectSelector").val();0!=c&&i[o](n.config.context.entity.id,c,function(){v.close(),t&&t(e,c)},function(e){v.close();var o;try{o=$.parseJSON(e.responseText).Message}catch(t){o=e.statusText}n.fire("error",{message:o})})}t++;var a=o.get("move-or-copy").bind(n.config,{projects:c.d}).appendTo("body"),p="copyActionPopup"+t;a.find("#copyActionPopup").prop("id",p);var s=a.find(".copy,.move");a.find("#projectSelector").change(function(){var e="disabled";"0"!=$(this).val()?s.removeAttr(e):s.attr(e,e)}),a.find(".copy").click(function(){var e=function(e,o){n.fire("entityWasCopiedToProject",{entity:{id:e},project:{id:o}})};r("copyGeneralToProject",e)}),a.find(".move").click(function(){var e=function(e,o){n.fire("entityWasMovedToProject",{entity:{id:e},project:{id:o}})};r("moveGeneralToProject",e)});var v=showModalPopup(p,{title:"Move or Copy",width:440,height:126})};i.getActiveProjectForEntity(e,c)}})});
define('tau/components/extensions/menu/extensions.menu.board.plus.copy-to-project',["Underscore","tau/components/extensions/component.extension.base","tau/ui/extensions/board.plus/card-context-menu/menu-bubbleCreator","tau/models/page.entity/entity.context.factory","tau/models/choice/model.choice.copy.to.project","tau/utils/utils.serverErrorTranslator","tau/ui/templates/choice/project/ui.template.choice.project.option","tau/services/service.entity-navigation","tau/core/termProcessor","tau/services/entities/service.entities.copy-to-project"],function(e,t,o,i,n,r,c,a,s,u){return t.extend({"bus configurator.ready:last + board.plus.copy.to.project":function(e,t,o){this._copyToProject(o.entity,t,o.$popupTarget)},_copyToProject:function(e,t,o){i.create(e,t).done(this._createBubble.bind(this,t,o))},_createBubble:function(e,t,o){var i=new u,n=i.createCopyToProjectBubbleConfig({applicationContext:o,navigateToEntityDetails:function(t){var o=e.service("navigator");(new a).navigateToEntityView(o,t.entityId,t.entityType)},eventBus:this});n.target=t,this.fire("initBubble",n),t.tauBubble("show")}})});
define('tau/components/extensions/menu/extensions.menu.attachToRequest',["Underscore","tau/core/extension.base","tau/components/component.finder.entity","tau/models/finder.entity/model.finder.entity.data.relation"],function(e,t,n,i){return t.extend({"bus beforeInit:last + entity.ready:last + configurator.ready:last + $menu.ready + menu.show.first":function(t,a,r,s,o){var d=o.find(".ui-menu__item").filter(function(){return"Attach to Request"==$(this).data("alias")});if(d.length){{var u=n.createAsChild(this,{entityType:"request",model:i,dependencyType:"master"});d.data("name"),d.data("id")}u.once("afterRender",e.bind(function(e,t){var n=t.element,i=n,a=d.tauBubble({content:i,onPositionConfig:function(e){return e.my="center top",e.at="center bottom",e.collision="flip flip",e},zIndex:10002});this.fire("$requestBubbled.ready",a),u.fire("$outerBubbled.ready",a)},this)),u.on("entitySelected",e.bind(function(e,t){this.fire("request.selected",t.entity)},this)),u.initialize({context:a.config.context}),s.getStore().unbind(this),s.getStore().on({type:"relation",eventName:"afterSave",listener:this,hasChanges:["slave"]},e.bind(function(e){var t=e.data.changes;t.slave.id==r.id&&u.fire("refresh")},this)),s.getStore().on({type:"relation",eventName:"afterRemove",listener:this},e.bind(function(){u.fire("refresh")},this))}},"bus configurator.ready:last + entity.ready:last + request.selected":function(t,n,i,a){n.getStore().save("relation",{fields:["id",{master:["id","name",{entityType:["id","name"]}]}],$set:{master:{id:a.id},slave:{id:i.id},relationType:{id:3}}}).done(e.bind(function(){n.getStore().evictProperties(i.id,i.entityType.name,["masterRelations","slaveRelations"]),this.fire("requestWasAttachedToEntity",{entity:i})},this))},"bus $bubbled.ready:last + $requestBubbled.ready:last + requestWasAttachedToEntity":function(e,t,n){n.tauBubble("hide"),t.tauBubble("hide")},"bus configurator.ready:last + destroy":function(e,t){t.getStore().unbind(this)}})});
define('tau/components/extensions/menu/extensions.menu.markAsDuplicate',["tau/components/extensions/component.extension.base"],function(e){return e.extend({"bus markAsDuplicate":function(e){var t=e.data.generalID;this.markAsDuplicate(t)},markAsDuplicate:function(e){var t=this.config.context.configurator;Ext.WindowMgr.zseed=99999;for(var o=[],r=0;r<_projectContext.length;r++)o.push(_projectContext[r].id);var n=this,a=function(){var e=$.Deferred();if(Tp&&Tp.controls&&Tp.controls.Duplicate)e.resolve();else{var o=t.getApplicationPath();require([o+"/JavaScript/ExtJs/Controls/Duplicate/MarkAsDuplicatePopup.js",o+"/JavaScript/ExtJs/Controls/Duplicate/BugView.js",o+"/JavaScript/ExtJs/Controls/Duplicate/ToolbarFilter.js"],function(){e.resolve()})}return e};a().done(function(){var r=Tp.controls.Duplicate.CreatePopup(o,e,void 0,{onMarkDelegate:function(e){var t=n.config.context.configurator.getStore(),o=t.freeze();n.fire("bugWasMarkedAsDuplicate",e),o.unfreeze()}});r.show(o,e),t.getKeyBoardManager().pushHandler({handleKeyDown:function(e){27==e.which&&(t.getKeyBoardManager().popHandler(),r.hide(),r.destroy())}})})}})});
define('tau/components/extensions/menu/extensions.menu.split',["jQuery","tau/components/extensions/component.extension.base"],function(e,t){return t.extend({"bus split":function(e){var t=e.data.generalID;this.split(t)},split:function(t){var r=this,s=this.config.context.configurator,i=s.getActionsService();i.splitUserStory(t,_.bind(this._success,this,t,s),function(t){var s={Message:"Split operation is failed due to server error"};try{s=e.parseJSON(t.responseText)}catch(i){}r.fire("error",{message:s.Message})})},_success:function(e,t,r){var s=r.d,i=t.getUrlBuilder().getSplitForUserStoryUrl(e,s);t.getRedirect().redirect(i)}})});
define('tau/components/extensions/menu/extensions.menu.generalAction.base',["jQuery","tau/components/extensions/component.extension.base"],function(e,t){return t.extend({init:function(e){this.actionName=e.actionName;var t=this;this["bus configurator.ready:last + entity.ready:last + "+this.actionName]=function(e,i,n,r){t.fire("showProgress",{text:t.config.progressText});var o=n.id,s=function(e){t.fire("hideProgress");var n=e.d,r=n.EntityTypeName.split("."),s=r[r.length-1],a={entity:{id:n.GeneralID},entityType:{name:s}};t.navigateTo(i,o,s,n.GeneralID),window._criticalTauChanges=!0,t.fire(t.actionName+".executed",a)},a=function(e){t.fire("hideProgress");var i=jQuery.parseJSON(e.responseText)||{Message:"Server is not available"},n=i.Message;t.fire("error",{message:n})},c=this.getDeferredAction(i,o,r);c.done(s).fail(a)},this._super.call(this,e)},getDeferredAction:function(){throw"should be overridden"},navigateTo:function(e,t,i,n){this.config.excludeCurrentFromHistory&&e.getHistory().exclude(t,!1),e.service("navigator").to(i.toLowerCase()+"/"+n)}})});
define('tau/components/extensions/menu/extensions.menu.converter',["jQuery","Underscore","tau/components/extensions/menu/extensions.menu.generalAction.base"],function(e,n,t){return t.extend({init:function(e){this._super.call(this,n.extend(e,{actionName:"convert",progressText:"Converting...",excludeCurrentFromHistory:!0}))},getDeferredAction:function(e,n,t){var r=e.getActionsService();return"task"==t.entityType.name.toLowerCase()?r.convertGeneralToTask(n,t.userStory.id):r.convertGeneralToType(n,t.entityType.id)}})});
define('tau/components/extensions/menu/extensions.menu.generalAction.menu.base',["Underscore","tau/components/extensions/component.extension.base","tau/core/termProcessor","tau/ui/behaviour/menu/ui.behaviour.menu.actions"],function(e,n,t){return n.extend({setClickHandler:function(){throw"should be overridden"},init:function(e){var n=this,i="bus configurator.ready:last + $menu.ready:last + "+e.actionName+".submenuData.ready + menu.show.first";this[i]=function(t,i,a,o){var s=a.find(".i-role-action-"+e.actionName);if(o.items.length>0){var u=i.getTemplateFactory().get("menu.actions.submenu").bind({},o);s.append(u),n.fire("$"+n.config.actionName+".submenu.ready",u)}else s.hide()},this["bus $"+e.actionName+".submenu.ready"]=function(e,i){var a=this.config.context.entity,o=new t(this.config.context.getTerms()),s=o.getTerms(a.entityType.name).name;n.setClickHandler(i,".ui-menu__item",a,o,s)},this["bus $"+e.actionName+".submenu.ready:last + menu.show"]=function(e,n,t){t.behaviourMenuActions("show")},this._super.call(this,e)}})});
define('tau/components/extensions/menu/extensions.menu.converter.menu',["Underscore","tau/components/extensions/menu/extensions.menu.generalAction.menu.base","tau/ui/behaviour/menu/ui.behaviour.menu.actions","libs/jquery/jquery.ui.tauConfirm"],function(n,o){return o.extend({init:function(o){this._super.call(this,n.extend(o,{actionName:"convert"}))},setClickHandler:function(n,o,e,i,t){var a=this,s=n.find(o);s.each(function(){var o=$(this);if("convertToTask"!=o.data("alias")){var e=o.data("name"),s=o.data("id"),u={id:s,name:e},r=i.getTerms(e).name;o.tauConfirm({content:["<h3>Do you really want to convert "+t+" to "+r+"?</h3>"].join(""),onPositionConfig:function(n){n.my="left center",n.at="right center+20",n.collision="flip flip"},onArrowPositionConfig:function(n){n.offset="0 +6"},onHide:function(){n.toggleClass("sub-ui-menu_dont-hide",!1),o.find(".drop-down-option").toggleClass("drop-down-option_hover",!1)},onShow:function(){n.toggleClass("sub-ui-menu_dont-hide",!0),o.find(".drop-down-option").toggleClass("drop-down-option_hover",!0)},callbacks:{success:function(){a.fire(a.config.actionName,{entityType:u})}},zIndex:10002})}})}})});
define('tau/components/extensions/menu/extensions.menu.converterToTask',["Underscore","tau/components/extensions/component.extension.base","tau/core/termProcessor","tau/components/component.finder.entity"],function(e,t,n,o){return t.extend({"bus beforeInit:last + configurator.ready:last + $convert.submenu.ready":function(e,t,i,a){var r=this,u=this.config.context.entity,s=new n(this.config.context.getTerms()),l=a.find(".ui-menu__item"),c=s.getTerms(u.entityType.name).name,d=l.filter("[data-alias=convertToTask]");if(d.length){var b=o.createAsChild(this,{entityType:"userstory"}),f=d.data("name"),p=d.data("id"),m={id:p,name:f};b.on("afterRender",function(e,t){var n=$("<div/>").append(t.element),o=s.getTerms(f).name,u=n.append(['<div class="i-role-confirmation-content" style="display: none">',"<h3>Do you really want to convert "+c+" to "+o+"?</h3>",'<div class="tau-buttons">','<button type="button" class="tau-btn tau-primary i-role-actionok">Yes, I\'m sure</button>','<button type="button" class="tau-btn i-role-actioncancel">No</button>',"</div>","</div>"].join("")),l=d.tauBubble({template:['<div class="tau-bubble">','<div class="tau-bubble__arrow" role="arrow"></div>','<div class="tau-bubble__inner tau-container" role="content"></div>',"</div>"].join(""),content:u,onPositionConfig:function(e){e.my="center top",e.at="center bottom",e.collision="flipfit flipfit"},onHide:function(){i.getKeyBoardManager().popHandler(),a.toggleClass("sub-ui-menu_dont-hide",!1),d.find(".drop-down-option").toggleClass("drop-down-option_hover",!1)},onShow:function(){i.getKeyBoardManager().pushHandler({}),a.toggleClass("sub-ui-menu_dont-hide",!0),d.find(".drop-down-option").toggleClass("drop-down-option_hover",!0);var e=l.tauBubble("widget");e.find(".tau-lookup-block").show(),e.find(".i-role-confirmation-content").hide(),e.removeClass("tau-warning-bubble"),e.find(".filter-field").focus(),e.unbind("click"),b.fire("popupResize",l),d.tauBubble("adjustPosition"),e.one("click",".i-role-actioncancel",function(){l.tauBubble("hide")}),e.one("click",".i-role-actionok",function(){l.tauBubble("hide"),r.fire("convertToTask",m)})},zIndex:10002});r.fire("$taskBubble.ready",l),b.fire("$outerBubbled.ready",l)}),b.on("entitySelected",function(e,t){var n=d.tauBubble("widget");n.find(".tau-lookup-block").hide(),n.find(".i-role-confirmation-content").show(),n.addClass("tau-warning-bubble"),d.tauBubble("adjustPosition"),r.fire("entitySelected",t)}),this.reFire(b),b.initialize({context:t.config.context})}},reFire:function(t){var n=t,o=this.bus,i=n.fire,a=n.name;n.fire=function(t,r){var u=e.toArray(arguments);i.apply(n,u),o.fire(a+"."+t,r)}},"bus entitySelected + convertToTask":function(e,t,n){this.fire("convert",{entityType:n,userStory:t.entity})}})});
define('tau/components/extensions/menu/extensions.menu.create',["jQuery","Underscore","tau/components/extensions/menu/extensions.menu.generalAction.base"],function(e,t,n){return n.extend({init:function(e){this._super.call(this,t.extend(e,{actionName:"create",progressText:"Creating...",excludeCurrentFromHistory:!1}))},getDeferredAction:function(e,t,n){var r=e.getActionsService();return"task"==n.entityType.name.toLowerCase()?r.createTaskFromRequest(t,n.userStory.id):r.createFromRequest(t,n.entityType.id)}})});
define('tau/components/extensions/menu/extensions.menu.create.menu',["Underscore","tau/components/extensions/menu/extensions.menu.generalAction.menu.base","tau/ui/behaviour/menu/ui.behaviour.menu.actions","libs/jquery/jquery.ui.tauConfirm"],function(e,n){return n.extend({init:function(n){this._super.call(this,e.extend(n,{actionName:"create"}))},setClickHandler:function(e,n){var i=this;e.on("click",n,function(){var e=$(this),n=e.data("name"),t=e.data("id"),a={id:t,name:n};i.fire(i.config.actionName,{entityType:a})})}})});
define('tau/components/extensions/menu/extensions.menu.createTask',["Underscore","tau/components/extensions/component.extension.base","tau/components/component.finder.entity"],function(e,t,n){return t.extend({"bus beforeInit:last + configurator.ready:last + $create.submenu.ready":function(e,t,i,o){var a=this,r=o.find(".ui-menu__item"),u=r.filter("[data-alias=createTask]");if(u.length){var d=n.createAsChild(this,{entityType:"userstory"}),s={id:u.data("id"),name:u.data("name")};d.on("afterRender",function(e,t){var n=$("<div/>").append(t.element),r=u.tauBubble({template:['<div class="tau-bubble">','<div class="tau-bubble__arrow" role="arrow"></div>','<div class="tau-bubble__inner tau-container" role="content"></div>',"</div>"].join(""),content:n,onPositionConfig:function(e){e.my="center top",e.at="center bottom",e.collision="flipfit flipfit"},onHide:function(){i.getKeyBoardManager().popHandler(),o.toggleClass("sub-ui-menu_dont-hide",!1),u.find(".drop-down-option").toggleClass("drop-down-option_hover",!1)},onShow:function(){i.getKeyBoardManager().pushHandler({}),o.toggleClass("sub-ui-menu_dont-hide",!0),u.find(".drop-down-option").toggleClass("drop-down-option_hover",!0);var e=r.tauBubble("widget");e.find(".tau-lookup-block").show(),e.find(".filter-field").focus(),e.unbind("click"),d.fire("popupResize",r),u.tauBubble("adjustPosition")},zIndex:10002});a.fire("$taskBubble.ready",r),d.fire("$outerBubbled.ready",r)}),d.on("entitySelected",function(e,t){var n=u.tauBubble("widget");n.find(".tau-lookup-block").hide(),u.tauBubble("hide"),a.fire("entitySelected",t),a.fire("createTask",s)}),this.reFire(d),d.initialize({context:t.config.context})}},reFire:function(t){var n=t,i=this.bus,o=n.fire,a=n.name;n.fire=function(t,r){var u=e.toArray(arguments);o.apply(n,u),i.fire(a+"."+t,r)}},"bus entitySelected + createTask":function(e,t,n){this.fire("create",{entityType:n,userStory:t.entity})}})});
define('tau/components/extensions/menu/extension.menu.bubble',["Underscore","jQuery","tau/core/extension.base"],function(e,t,n){return n.extend({"bus $el.ready":function(e,t){var n=t.find(".ui-menu__trigger"),i=t.find(".ui-menu__popup");n.length&&(n.tauBubble({stackName:"entityMenu",className:"ui-menu-actions__bubble",content:i.detach(),dontCloseSelectors:[".tau-bubble"],template:['<div class="tau-bubble">','<div class="tau-bubble__inner" role="content"></div>',"</div>"].join(""),onPositionConfig:function(e){e.my="right top+2",e.at="right bottom"}}),this.fire("$bubbled.ready",n))}})});
define('tau/ui/templates/menu/ui.template.menu.actions.item',["tau/core/templates-factory"],function(i){var t={name:"menu.actions.item",engine:"jqote2",markup:["<% if (this.url) { %>",'<div taustype="view-entity" tauspref="action tab item" class="i-taus ui-menu__item ui-menu__item-action ui-menu__item-action-link <%= this.className %>">','<a class="drop-down-option" href="<%= this.url %>">',"<%= this.label %>","</a>","</div>","<% } else if (this.label) { %>",'<div taustype="view-entity" tauspref="action tab item" class="i-taus ui-menu__item ui-menu__item-action <%= this.className %> <%= this.alias? "i-role-action-"+this.alias.toLowerCase():"" %> " data-id="<%= this.id||"" %>" data-name="<%= this.name||"" %>" data-alias="<%= this.alias %>">',"<% if (this.icon){ %>",'<span class="drop-down-option">','<i class="tau-entity-icon <%= this.className %>"><%= this.icon %></i>',"<%= this.label %>","</span>","<% } else { %>",'<span class="drop-down-option">',"<%= this.label %>","</span>","<% } %>","</div>","<% } else { %>",'<div class="ui-menu__item-separator">-----</div>',"<% } %>"]};return i.register(t)});
define('tau/ui/templates/menu/ui.template.menu.actions.submenu',["tau/core/templates-factory","tau/ui/templates/menu/ui.template.menu.actions.item"],function(e){var t={name:"menu.actions.submenu",engine:"jqote2",markup:['<div class="sub-ui-menu">','<div class="sub-ui-menu-cont">','<%= fn.sub("menu.actions.item", this.items) %>',"</div>","</div>"]};return e.register(t)});
define('tau/ui/templates/menu/ui.template.menu.actions',["tau/core/templates-factory","tau/ui/templates/menu/ui.template.menu.actions.submenu","tau/ui/templates/menu/ui.template.menu.actions.item"],function(e){var t={name:"menu.actions.list",engine:"jqote2",markup:['<div class="ui-menu-actions">','<div class="ui-drop-down drop-down-list">','<%= fn.sub("menu.actions.item", this.items) %>',"</div>","</div>"]};return e.register(t)});
define('tau/components/component.menu.actions',["tau/components/component.creator","tau/models/model.menu.actions","tau/components/extensions/menu/extension.menu.actions","tau/components/extensions/menu/extensions.menu.moveOrCopy","tau/components/extensions/menu/extensions.menu.board.plus.copy-to-project","tau/components/extensions/menu/extensions.menu.attachToRequest","tau/components/extensions/menu/extensions.menu.markAsDuplicate","tau/components/extensions/menu/extensions.menu.split","tau/components/extensions/menu/extensions.menu.converter","tau/components/extensions/menu/extensions.menu.converter.menu","tau/components/extensions/menu/extensions.menu.converterToTask","tau/components/extensions/menu/extensions.menu.create","tau/components/extensions/menu/extensions.menu.create.menu","tau/components/extensions/menu/extensions.menu.createTask","tau/components/extensions/menu/extension.menu.bubble","tau/components/extensions/error/extension.errorBar","tau/components/extensions/bubble/extension.bubble.creator","tau/components/extensions/component.creator.extension","tau/ui/templates/menu/ui.template.menu.actions"],function(e,n,t,o,s,u,m,a,i,c,r,x,p,l,b,v,d,T,f){return{create:function(k){var y={extensions:[n,t,o,s,u,m,a,i,c,r,x,p,l,b,d,T,v],template:k.template||f};return e.create(y,k)}}});
define('tau/models/model.menu.testPlanRun',["Underscore","tau/core/model-base"],function(t,n){return n.extend({"bus beforeInit":function(n,e){var a=n.data.config,s=e.config.context.configurator,o=a.eventNamesSpecial||{};t.defaults(o,{dataBind:"dataBind"});var u=o.dataBind,i=a.context.entity.id,r=s.getApplicationPath(),l={run:{show:!1,url:r+"/Project/QA/TestPlanRun/TestsRunner.aspx?TestPlanRunID="+i,label:"Run"},completeRun:{show:!1,url:r+"/Project/QA/TestPlanRun/TestsRunner.aspx?TestPlanRunID="+i+"&CompleteRun=1",label:"Complete Last Run"},newRun:{show:!1,url:r+"/Project/QA/TestPlanRun/TestsRunner.aspx?TestPlanRunID="+i+"&ReRun=1",label:"New Run"},changeLastRun:{show:!1,url:r+"/Project/QA/TestPlanRun/TestsRunner.aspx?TestPlanRunID="+i+"&Edit=1",label:"Change Last Run"}},d=this,c=a.context.entity,f=function(n){var e=n[0].data;!e.entityState.isFinal&&e["testCaseRuns-count"]>0&&(e.passedCount>0||e.failedCount>0?(l.newRun.show=!0,e.notRunCount>0?l.completeRun.show=!0:l.changeLastRun.show=!0):l.run.show=!0),"dataBind"!=u&&s.isBoardEdition&&(l=t.map(l,function(t,n){return{show:t.show,label:t.label,alias:n,command:function(){d.fire("url.process",t.url+"&rmnav=1&tp3=1")}}})),d.bus.fire(u,{additionalActions:l})};d.store.freeze(!0).done(t.bind(function(t){d.store.get("testplanrun",{id:c.id,fields:["testCaseRuns-count","passedCount","failedCount","notRunCount",{entityState:["isFinal"]}]}).done({success:f}),t.unfreeze()})),this.store.unbind(this),t.forEach(["testCaseRuns-count","passedCount","failedCount","notRunCount","entityState"],t.bind(function(t){this.store.on({eventName:"afterSave",type:"testplanrun",listener:this,filter:{id:c.id},hasChanges:[t]},function(){d.fire("refresh")})},this))},"bus beforeInit:last + $el.ready":function(n,e){var a=(e.config.context.configurator,e.config.context.entity),s=$("body").tauIFramePopup();s.on("taupopuphide",t.bind(function(){this.fire("testplanrun.runCompleted",a)},this)),this.fire("$iframed.ready",s)},"bus $iframed.ready:last + url.process":function(t,n,e){n.tauIFramePopup("option","url",e),n.tauIFramePopup("show")},"bus initConfig:last + $iframed.ready:last + destroy":function(t,n,e){n.config.context.configurator.getStore().unbind(this),e.tauIFramePopup("destroy")}})});
define('tau/models/model.menu.testPlanRun.union',["Underscore","tau/core/model-base"],function(a,n){var t=n.extend({"bus dataBind.special+dataBind.common":function(n){var t=n["dataBind.special"].data.additionalActions,d=[];a.forEach(t,function(a){1==a.show&&d.push(a)}),d=d.concat(n["dataBind.common"].data.items),this.fire("dataBind",{items:d})}});return t});
define('tau/components/component.menu.actions.testplanrun',["tau/components/component.creator","tau/models/model.menu.actions","tau/models/model.menu.testPlanRun","tau/models/model.menu.testPlanRun.union","tau/components/extensions/menu/extension.menu.actions","tau/components/extensions/menu/extensions.menu.converter","tau/components/extensions/menu/extensions.menu.converter.menu","tau/components/extensions/menu/extension.menu.bubble","tau/components/extensions/error/extension.errorBar","tau/ui/templates/menu/ui.template.menu.actions"],function(e,n,t,o,m,s,a,u,i,c){return{create:function(r){r.eventNamesCommon={dataBind:"dataBind.common"},r.eventNamesSpecial={dataBind:"dataBind.special"};var d={extensions:[n,t,o,m,s,a,u,i],template:r.template||c};return e.create(d,r)}}});
define('tau/ui/extensions/menu.testPlanRun/ui.extension.menu.testPlanRun',["jQuery","tau/core/extension.base"],function(e,t){return t.extend({"bus afterRender":function(t,r){var n=r.element;this.fire("$el.ready",n),n.on("click",".tau-action",_.bind(function(t){t.preventDefault();var r=e(t.currentTarget);this.fire("url.process",r.attr("href")+"&rmnav=1&tp3=1")},this))}})});
define('tau/ui/templates/menu.testPlanRun/ui.template.menu.testPlanRun',["tau/core/templates-factory"],function(a){var n={name:"menu-testPlanRun",markup:['<div class="tau-menu-testplanrun">',"{{if additionalActions.run.show == true}}",'<a class="tau-action tau-action-run" href="${additionalActions.run.url}"><span class="tau-action__icon"></span>Run</a>',"{{/if}}","{{if additionalActions.newRun.show == true}}",'<a class="tau-action tau-action-newrun" href="${additionalActions.newRun.url}"><span class="tau-action__icon"></span>New Run</a>',"{{/if}}","{{if additionalActions.completeRun.show == true}}",'<a class="tau-action" href="${additionalActions.completeRun.url}">Complete Last Run</a>',"{{/if}}","{{if additionalActions.changeLastRun.show == true}}",'<a class="tau-action" href="${additionalActions.changeLastRun.url}">Change Last Run</a>',"{{/if}}","</div>"],dependencies:[]};return a.register(n)});
define('tau/components/component.menu.testPlanRun',["tau/components/component.creator","tau/models/model.menu.testPlanRun","tau/ui/extensions/menu.testPlanRun/ui.extension.menu.testPlanRun","tau/ui/templates/menu.testPlanRun/ui.template.menu.testPlanRun"],function(e,t,n,u){return{create:function(a){var m={extensions:[t,n],template:a.template||u};return e.create(m,a)}}});
define('tau/views/view.page.board',["Underscore","tau/core/view-base","tau/components/component.board.container","tau/configurations/board.container.config"],function(e,t,n,i){return t.extend({init:function(e){this._super(e)},initialize:function(){},"bus view.dom.ready":function(e){this.container.fire("view.dom.ready",e.data)},"bus beforeInit+boardSettings.ready":function(t,r,a){var o=this,s=r.config,d=a.boardSettings,c=r.config.context.configurator;c.registeredServices&&delete c.registeredServices.boardSettings,c.registerService("boardSettings",d),d.unbind({listener:o}),d.bind({fields:["name"],listener:o,callback:function(t){c.getTitleManager().setTitle(e.asString(t.name)),c.getHistory().updateCurrent({title:e.asString(t.name)})}}),d.get({fields:["id","name"],callback:function(t){c.getTitleManager().setTitle(e.asString(t.name)),c.getHistory().setCurrent({url:c.getUrlBuilder().getRelativeBoardUrl(t.id),title:e.asString(t.name),id:t.id}),c.getRouting().setReferer({id:t.id})}});var f=new i(c),u=e.extend(s,f.getPageBoardConfig()),g=o.container=n.create({name:"board page container",layout:u.layout,template:u.template,store:s.store,extensions:e.union([],u.extensions||[]),context:s.context});g.on("afterInit",o["container afterInit"],o),g.on("afterRender",o["container afterRender"],o),g.on("componentsCreated",o["container componentsCreated"],o),c.getConfig("tmpBoardIsJustAdded",!1)||(d.settings.edit=!1,d.fieldsRetrieved.push("edit")),g.fire("boardSettings.ready",{boardSettings:d}),g.initialize(u)},"container afterInit":function(){this.fireAfterInit()},"container componentsCreated":function(e){this.fire(e.name,e.data)},"container afterRender":function(e){this.fireBeforeRender(),this.element=e.data.element,this.fireAfterRender()},lifeCycleCleanUp:function(){this.destroyContainer(),this._super()},destroyContainer:function(){this.container&&(this.container.destroy(),this.container=null)},destroy:function(){this.destroyContainer(),this._super()}})});
define('tau/components/component.page.board',["tau/components/component.page.base","tau/views/view.page.board"],function(e,n){return{create:function(r){var t={name:"board page component",turnOffErrorEmiter:!0,turnOffLoadingIndicator:!0,extensions:[],ViewType:n};return e.create(t,r)}}});
define('tau/components/extensions/customField/extension.customField.multipleEntities.count.label.setter',["Underscore","tau/core/extension.base"],function(t,e){return e.extend({"bus afterInit":function(t,e){var n=e.config.context.configurator.getStore(),i=e.config.context.entity,s=e.config.customField;this._calculateCount(n,i,s),this._subscribeToStore(n,i,s)},_calculateCount:function(e,n,i){if(!i||"MultipleEntities"!==i.type)return void this._publishCount(0);var s={id:n.id,fields:["customFields"]};e.freeze(!0).done(t.bind(function(t){e.get(n.entityType.name,s,{success:function(t){this._getActualEntitiesAndPublishCount(e,this._findOwnCustomField(t.data.customFields,i))},scope:this}).done(),t.unfreeze()},this))},_subscribeToStore:function(t,e,n){t.unbind(this);var i=this,s={type:e.entityType.name,eventName:"afterSave",hasChanges:["customFields"],filter:{id:e.id},listener:this};t.on(s,function(e){i._getActualEntitiesAndPublishCount(t,i._findOwnCustomField(e.data.changes.customFields,n))})},_publishCount:function(t){this.fire("setBadgeData",t.toString())},_getActualEntitiesAndPublishCount:function(e,n){if(n){if(!n.value)return void this._publishCount(0);var i=this,s=t.map(n.value.split(","),function(t){return t.split(" ")[0]});e.find("general",{fields:["id"],$query:{id:{$in:s}}}).done({success:function(t){i._publishCount(t[0].data.length)}})}},_findOwnCustomField:function(e,n){return t.chain(e).select(function(t){return t.name==n.name}).first().value()}})});
define('tau/views/view.page.entity',["require","Underscore","tau/core/view-base","tau/components/component.container","tau/configurations/factory.container.config","tau/components/extensions/customField/extension.customField.multipleEntities.count.label.setter","tau/configurations/enum.page.entity.mode"],function(e){var t=e("Underscore"),n=e("tau/core/view-base"),i=e("tau/components/component.container"),o=e("tau/configurations/factory.container.config"),r=e("tau/components/extensions/customField/extension.customField.multipleEntities.count.label.setter"),a=e("tau/configurations/enum.page.entity.mode");return n.extend({init:function(e){this.tausInitialLoad=taus.start("statistics_view",{"@":["--add-last-view-entity-context"],tags:["initial load"]}),this._super(e),this.config.placeholder&&this.config.placeholder.addClass("ui-entity-view")},"container afterInit":function(){this.fireAfterInit()},initialize:function(){},"container afterRender":function(e,t){this.tausInitialLoad&&this.tausInitialLoad.stop(),this.render(t.element)},"bus configurator.ready:last + loadingError.ready":function(e,t,n){t.getTitleManager().set(n.message);var i=t.getHistory().pop(),o=t.getTemplateFactory().get("page.error").bind({},{err:n,backLink:i?i.url:null});this.render(o)},render:function(e){this.fireBeforeRender(),this.element=e,this.config.placeholder&&this.config.placeholder.append(e),this.config.placeholder&&this.config.placeholder.addClass("tau-entity-loaded"),this.fireAfterRender()},initializeContainer:function(e){this.container&&this.container.initialize(e)},getStateFields:function(e){var n={};e.hasOwnProperty("stateName")&&(n[e.stateName]=e);var i=this,o=[];if(t.isArray(e.children))o=e.children;else if(t.isArray(e.tabs)){var r=t.pluck(e.tabs,"items");o=t.flatten(r)}return t.each(o,function(e){t.extend(n,i.getStateFields(e))}),n},"bus contextRetrieved":function(e){var n=this,r=this._createConfig(e.data);t.extend(r,n.config.containerConfig||o.getConfig(r));var a=r.context.entity.entityType.name.toLowerCase(),s=t.filter(r.context.getCustomFields(),function(e){return"multipleentities"==e.type.toLowerCase()&&e.entityKind.toLowerCase()==a});r=this._addTabsBySpecialFields(s,r),this.container=i.create({name:"entity container",store:this.config.store,context:n.config.context,cssClass:n.config.cssClass}),this.bus.on("afterRender",function(e,t){this.container.on("afterRenderAll",function(){this.fire("afterRenderAll",t)},this)},this),this.container.on("afterInit",this["container afterInit"],this),this.container.on("afterRender",this["container afterRender"],this);var c=function(e){n.fire("onConfigContainerCreated",e),n.fire("initializeContainer",e)};n.fire("configReadyForIntegration",r),r.integrationReadyPromise?r.integrationReadyPromise.always(function(e){c(e)}):c(r)},_createConfig:function(e){return t.extend(e,{mode:this.config.mode||a.full})},"bus onConfigContainerCreated+initializeContainer":function(e,n){var i=this,o=i.getStateFields(n),r=i.config.context.configurator;if(t.isEmpty(o))n.context.configurator=r,i.initializeContainer(n);else{var a=t.pluck(o,"stateName");n.context.componentSettings.get({fields:a,callback:function(e){t.each(o,function(t,n){e.hasOwnProperty(n)&&(o[n][n]=e[n])}),n.context.configurator=r,i.initializeContainer(n)}})}},lifeCycleCleanUp:function(){this.destroyContainer(),this._super()},destroyContainer:function(){this.container&&(this.container.destroy(),this.container=null)},destroy:function(){this.destroyContainer(),this.container=null,this._super()},_addTabsBySpecialFields:function(e,n){var i;if(n.children&&n.children.length&&n.children[0].children&&n.children[0].children.length&&n.children[0].children[0].children&&n.children[0].children[0].children.length&&(i=n.children[0].children[0].children),!i)return n;var o=t(i).find(function(e){return"tabs"===e.type});return t.forEach(e,function(e,t){o.tabs.push({label:"MultipleEntitiesCustomFieldEditor"+t,header:[{type:"label",text:e.name,extensions:[r],customField:{name:e.name,type:e.type}}],items:[{type:"container",spinnerConfigForLazy:{isShow:!0,selectorForHeight:".tau-page-entity"},children:[{type:"container",lazy:!0,name:"lazyPlaceholder container",children:[{type:"customField.multipleEntities.container",customField:{name:e.name,type:e.type,value:e.value}}]}]}]})}),n}})});
define('tau/models/page.entity/model.page.entity.entityRefresher.change',["Underscore","tau/core/extension.base"],function(e,t){return t.extend({"bus entity.ready + configurator.ready":function(t,n,i){var r=n.entityType.name,o=i.getStore(),a=e.bind(this.fire,this);o.unbind(this);var s=!1,d=o.getEvictedPropertiesByType(r);e.forEach(d,function(t){o.on({eventName:"afterSave",type:r,listener:this,filter:{id:n.id},hasChanges:[t]},function(t){if(!s){if(s=!0,o.unbind(this),a("entity.toEvict",n),"project"!==r){var i=t.data,d=e.extend({},i.obj,i.changes,{__type:i.obj.type});o.register(d)}a("refresh")}})},this)},"bus configurator.ready > destroy":function(e,t){t.getStore().unbind(this)}})});
define('tau/models/page.entity/model.page.entity.entityRefresher.remove',["Underscore","tau/core/extension.base"],function(e,t){return t.extend({"bus entity.ready + configurator.ready":function(t,n,i){var o=i.getStore(),r=e.bind(this.fire,this);o.unbind(this),o.on({eventName:"beforeRemove",type:n.entityType.name,listener:this},function(e){var t=e.data,i=t.cmd.config.id;n.id==i&&r("entity.beforeDelete",t)}),o.on({eventName:"afterRemove",type:n.entityType.name,listener:this},function(e){var t=e.data,i=t.cmd?t.cmd.config.id:t.obj?t.obj.id:t.id;n.id==i&&r("entity.deleted",t)})},"bus configurator.ready > destroy":function(e,t){t.getStore().unbind(this)}})});
define('tau/models/page.entity/model.page.entity.globalRefresher',["Underscore","tau/core/extension.base"],function(t,e){return e.extend({"bus entity.ready + configurator.ready":function(e,i,n){var r=n.getGlobalBus();r.removeAllListeners(this),r.on("entityWasMovedToProject",t.bind(this.onEntityWasMovedToProject,this,i),this),r.on("refreshMainEntity",t.bind(this.refresh,this,i),this)},"bus configurator.ready > destroy":function(t,e){var i=e.getGlobalBus();i.removeAllListeners(this)},onEntityWasMovedToProject:function(t,e){t.id==e.data.entity.id&&this.refresh(t)},refresh:function(t){this.fire("entity.toEvict",t),this.fire("refresh")},"bus configurator.ready > entity.toEvict":function(t,e,i){var n=e.getStore();n.evictPersistedObject(i.id,"context"),n.evictPersistedObject(i.id,i.entityType.name)}})});
define('tau/models/page.entity/model.page.entity.comet',["Underscore","tau/core/extension.base"],function(t,e){var s=function(t,e){window.appIsInDebugMode&&window.console&&console.log("model.page.entity.comet: "+t,e)};return e.extend({"bus configurator.ready:last + entity.ready":function(e,s,i){s.getAppStateStore().get({fields:["acid"],callback:t.bind(function(t){this.startCometLoop(s,i,t.acid)},this)})},"bus destroy":function(){this.lastChanges=null,this._stopSubscription(),this._super()},startCometLoop:function(e,i,n){var o=[{resourceType:i.entityType.name,filter:"? Id is "+i.id},{acid:n,resourceType:"assignment",filter:"? assignable.Id is "+i.id},{acid:n,resourceType:"roleEffort",filter:"? assignable.Id is "+i.id}];this._stopSubscription(),this.lastChanges={},this.subscription=e.getComet().listen("resource",t.map(o,function(t){return{parameters:t}})).on({callback:this.safeCallback(function(t){s("resource comet: ",t),this.handle(t,e)})}).aborted(t.bind(function(){this._stopSubscription(),t.defer(t.bind(this.startCometLoop,this),e,i,n)},this)).start()},_stopSubscription:function(){this.subscription&&this.subscription.stop()},handle:function(e,i){var n=this.processResponse(e),o=n.modification.toLowerCase(),a=n.data,r=n.reason;switch(s("type: ",o),o){case"updated":a.__type=n.type,r.push("id"),r.push("__type"),a.assignable&&r.push("assignable"),a=t.pick(a,r),s("changes: ",r),i.getStore().registerWithEvents(a);break;case"removed":a.__type=n.type,i.getStore().removeWithEvents(a,r);break;case"added":a.__type=n.type,i.getStore().registerWithEvents(a)}},processResponse:function(e){var s=e.data,i=e.timestamp,n=s.type+s.id,o=t.map(s.reason,t.toCamelCase);t.has(this.lastChanges,n)||(this.lastChanges[n]={});var a=this.lastChanges[n];return s.reason=t.filter(o,function(t){var e=i>(a[t]||0);return e&&(a[t]=i),e}),s}})});
define('tau/models/page.entity/model.page.entity.history',["Underscore","tau/core/extension.base"],function(e,t){return t.extend({fields:["name"],"bus entity.ready + configurator.ready":function(t,i,n){"user"==i.entityType.name&&(this.fields=["firstName","lastName"]);var r=n.getStore();r.unbind(this),r.on({eventName:"afterSave",type:i.entityType.name,id:i.id,fields:this.fields,listener:this},e.bind(this.update,this,i,n)),n.getHistory().setCurrent({url:n.getUrlBuilder().getNewViewUrl(i.id,i.entityType.name,!0),id:i.id}),n.getRouting().on("stateChanged",function(){n.getHistory().updateCurrent({url:n.getRouting().getUrl().source})},this)},"bus entity.ready + configurator.ready + storeFreeze.ready":function(e,t,i){this.update(t,i)},update:function(t,i){var n=i.getStore();n.get(t.entityType.name,{id:t.id,fields:["id"].concat(this.fields)}).done(e.bind(function(e){var t=e[0].data;i.getHistory().updateCurrent({title:this.createTitle(t,i.getTemplateFactory().getTermProcessor())})},this))},createTitle:function(t,i){return e.sprintf("%s #%d %s",i.getTerm(t.__type,"name"),t.id,e.values(e.pick(t,this.fields)).join(" "))},"bus configurator.ready + destroy":function(e,t){t.getStore().unbind(this)}})});
define('tau/models/page.entity/model.page.entity.storeFreeze',["tau/core/extension.base"],function(e){return e.extend({"bus configurator.ready + contextRetrieved":function(e,r){r.getStore().freeze(!0).done(_.bind(function(e){this.fire("storeFreeze.ready",e)},this))},"bus storeFreeze.ready + afterInit":function(e,r){r.unfreeze()},"bus storeFreeze.ready + refresh":function(e,r){r.unfreeze()},"bus storeFreeze.ready + destroy":function(e,r){r.unfreeze()}})});
define('tau/models/page.entity/model.page.entity.entityViewer',["tau/core/extension.base","tau/core/bus","tau/services/service.entity-navigation"],function(e,t,i){return e.extend({init:function(e){this._super.apply(this,arguments);var t=e.context.configurator,i=this._createViewerBus(t);this._registerViewerBus(t,i),this._initViewer(t,i)},_createViewerBus:function(e){var i=new t({name:"entityViewer",globalBus:e.getGlobalBus(),"queue.bus":!0});return this.on("destroy",this._destroyViewerBus.bind(this,i),this),i},_destroyViewerBus:function(e){e.removeAllListeners(this),e.destroy()},_registerViewerBus:function(e,t){e.getComponentBusRegistry().register(t),t.on("destroy",function(){e.getComponentBusRegistry().unregister(this)})},_initViewer:function(e,t){t.on("cardDataToShow.ready",function(t,n){var r=e.service("navigator");(new i).navigateToEntityView(r,n.entityId,n.entityType)},this)}})});
define('tp/ui/mashupsForViews',["tp/mashups","user/mashups","tau/core/global.bus","Underscore","tau/core/bus.reg","tau/core/event"],function(n,e,t,o,i,a){var r=new n,c=!1,s={element:{addClass:function(){}},view:{config:{context:{entity:{id:null,entityType:{name:null}}}}}},l=function(n){for(var e=0,t=n.libs.length;t>e;e++){var o=n.libs[e],i=o.toLowerCase();if(i.indexOf("/view")>0||i.indexOf("iew")>0)return!0}return!1},u={init:function(){L()},onInit:function(n){r.onMashupsLoaded(l).done(n)}},d=function(n){return{header:[{name:n.id,type:"label",text:n.name}],items:[{name:n.id,type:"container"}]}},f=function(n,e){var t={label:n.name,name:"parent:"+n.id};e.tabs.push(o.extend(t,d(n)))},p=function(n,e){var t={type:"collapsible",name:"parent:"+n.id,collapsed:!0,stateName:n.name.toLowerCase().replace(" ","")},i=o.extend(t,d(n));n.options&&n.options.positionToInsert&&e.children.length&&e.children[0].children&&e.children[0].children.length>=n.options.positionToInsert?e.children[0].children.splice(n.options.positionToInsert,0,i):e.children.push(i)},h=function(n){var e=o.jsonSelect(n.children,':has(:root>.type:val("tabs"))');return 0===e.length&&(e=[{tabs:[]}]),e=e[0]},v=function(n){var e=o.jsonSelect(n.children,':has(:root>.name:val("additional info column container"))');return 0===e.length&&(e=[{children:[]}]),e=e[0]},y=function(n,e){var t=e&&e.getViewIsSuitablePromiseCallback;return t?t({entity:n}):null},m=function(e,t){var i=r.subscriptions.view,a=t.type.toLowerCase(),c=(i[a]||[]).concat(i[n.GENERAL_TYPE]||[]),s=[],l=[];o.forEach(c,function(n){var e=y(t,n.options);e?(l.push(e),e.done(o.bind(function(n,e){e&&s.push(n)},this,n))):s.push(n)});var u=o.bind(function(n,e){o.forEach(s,function(t){t.callback(n,{entity:e})})},this,e,t);l.length>0?$.when.apply(this,l).then(function(){u()}):u()},b=function(n,e,t){var i=w(n,e),a=o.bind(t,this,n);i.length>0?$.whenList(i).done(a):a()},w=function(e,t){for(var i=o.values(t),a=[],r=i.length,c=new Array(r),s=0;r>s;s++){var l=i[s],u=e.context.entity;if(l.type.toLowerCase()===u.entityType.name.toLowerCase()||l.type.toLowerCase()===n.GENERAL_TYPE.toLowerCase()){var d=y(u,l.options);if(d){var f=$.Deferred();a.push(f.promise()),d.done(o.bind(function(n,e,t){t&&(c[n]=e)},this,s,l)).always(f.resolve)}else c[s]=l}}return $.whenList(a).done(o.bind(function(){g(e,o.compact(c))},this)),a},g=function(n,e){var t=null,i=null;o.forEach(e,function(e){"tab"===e.control&&(t||(t=h(n)),f(e,t)),"block"===e.control&&(i||(i=v(n)),p(e,i))})},C=function(n,e){var t=e.view.config.context.entity,i={entity:o.extend(t,{type:t.entityType.name})},a="label"===e.view.config.type,r=a?"onCreateHeader":"onCreateContent";a||e.element.addClass("ui-custom-control-content"),n[r](e.element,i)},L=function(){if(!c){c=!0,i.getByName("entity component",function(n){var e={bus:n,"bus before_contextRetrieved":function(n){n.suspendMain(),u.onInit(function(){n.resumeMain()})}};a.subscribeOn(e)});var n=t.get();n.on("afterRenderAll",function(n){var e=n.caller.name,t=n.data||s;if("entity component"===e){var i=t.element,a=t.view.config.entity,r=o.extend(a,{entityType:{name:a.type}});m(i,r)}}),n.on("afterRender",function(n){var e=r.controls.view,t=n.caller.name,o=n.data||s;e.hasOwnProperty(t)&&C(e[t],o)}),n.on("configReadyForIntegration",function(n){var e=r.controls.view,t=$.Deferred();n.data.integrationReadyPromise=t.promise(),b(n.data,e,function(n){t.resolve(n)})})}};return u});
define('tau/components/component.page.entity',["Underscore","tau/components/component.page.base","tau/views/view.page.entity","tau/models/page.entity/model.page.entity.context","tau/models/page.entity/model.page.entity.entityRefresher.change","tau/models/page.entity/model.page.entity.entityRefresher.remove","tau/models/page.entity/model.page.entity.globalRefresher","tau/models/page.entity/model.page.entity.comet","tau/models/page.entity/model.page.entity.history","tau/models/page.entity/model.page.entity.storeFreeze","tau/models/page.entity/model.page.entity.entityViewer","tp/ui/mashupsForViews"],function(e,t,n,a,o,i,r,s,d,m,g,p){return{create:function(u){p.init();var c=u.context.configurator.getFeaturesService(),l={turnOffLoadingIndicator:u.turnOffLoadingIndicator,queuedBus:!0,ViewType:n,extensions:e.compact([a,o,i,r,c.isEnabled("comet.notifications")&&u.comet&&u.comet.enabled?s:null,d,m,g].concat(u.extensions||[]))};return t.create(l,u)}}});
define('tau/models/page.error/model.page.error',["Underscore","tau/core/extension.base"],function(e,n){return n.extend({"bus beforeInit":function(e,n){var t=n.config.context.configurator,r=n.config.request[0];t.getTitleManager().set(r.message),this.fire("dataBind",{err:r})}})});
define('tau/components/component.page.error',["Underscore","tau/components/component.creator","tau/models/page.error/model.page.error","tau/ui/templates/page/ui.template.page.error"],function(e,t,r,n){return{create:function(o){var a={queuedBus:!0,extensions:e.compact([r].concat(o.extensions||[])),template:n};return t.create(a,o)}}});
define('tau/configurations/finish-iteration.container.config',["Underscore","tau/core/class"],function(e,t){var n=t.extend({getConfig:function(){return{children:[{type:"container",name:"finish iteration results container",layout:"selectable",template:{name:"finish-iteration-container",markup:['<div class="tau-container i-role-container-target tau-page-entity"></div>']},children:[{type:"breadcrumbs",disableStoreSubscriptions:!0,selector:".i-role-container-target"},{type:"finish-iteration",disableStoreSubscriptions:!0,selector:".i-role-container-target"}],extensions:[]}]}}});return n});
define('tau/views/view.page.finish-iteration',["Underscore","jQuery","tau/core/view-base","tau/components/component.container","tau/configurations/finish-iteration.container.config"],function(t,e,n,i,o){return n.extend({init:function(t){this._super(t)},initialize:function(){},"bus beforeInit":function(){var e=this,n=e.config.context.configurator;n.getTitleManager().setTitle("Finish Iteration");var r=n.getHistory();r.setCurrent({id:0,url:"#"+e.config.entity,title:"Finish Iteration"});var a=e.config,c=t.extend(a,new o(a).getConfig(a));c.context.entity=c.entity;var s=e.container=i.create({name:"board page container",layout:c.layout,template:c.template,extensions:t.union([],c.extensions||[]),context:a.context});s.on("afterInit",e["container afterInit"],e),s.on("afterRender",e["container afterRender"],e),s.on("componentsCreated",e["container componentsCreated"],e),s.initialize(c)},"container afterInit":function(){this.fireAfterInit()},"container componentsCreated":function(t){this.fire(t.name,t.data)},"container afterRender":function(t){this.fireBeforeRender(),this.element=t.data.element,this.fireAfterRender()},lifeCycleCleanUp:function(){this.destroyContainer(),this._super()},destroyContainer:function(){this.container&&(this.container.destroy(),this.container=null)},destroy:function(){this.destroyContainer(),this._super()}})});
define('tau/components/component.page.finish-iteration',["tau/components/component.page.base","tau/views/view.page.finish-iteration"],function(e,n){return{create:function(t){var i={name:"finish iteration page component",turnOffErrorEmiter:!0,extensions:[],ViewType:n,entity:t.entity};return t["queue.bus"]=!0,e.create(i,t)}}});
define('tau/configurations/reports.container.config',["Underscore","tau/core/class"],function(t,e){var r=e.extend({init:function(t){this.tabs=[this.getProcessControlChartTabConfig(t),this.getBurnDownTabConfig(t),this.getCycleTimeDistributionChartTabConfig(t),this.getRelationsNetworkChartTabConfig(t)]},getProcessControlChartTabConfig:function(){return{selected:!0,label:"processControlChart",header:[{type:"label",text:"Process Control"}],items:[{path:"tp/reports/processControl/component.report"}]}},getBurnDownTabConfig:function(){return{label:"burnDown",header:[{type:"label",text:"Burn Down"}],items:[{path:"tp/reports/burndown/component.report"}]}},getCycleTimeDistributionChartTabConfig:function(){return{label:"cycleTimeDistribution",header:[{type:"label",text:"Cycle Time Distribution"}],items:[{path:"tp/reports/cycleTimeDistribution/component.report"}]}},getRelationsNetworkChartTabConfig:function(){return{label:"relationsNetwork",header:[{type:"label",text:"Relations Network"}],items:[{path:"tp/reports/relationsNetwork/component.report"}]}},getConfig:function(){return{type:"container",layout:"list",name:"reports container",children:[{type:"tabs",cssClass:"tau-tabs",tabs:this.tabs,stateName:"reports"}]}},getReportNameByKey:function(t){var e=this.tabs.filter(function(e){return e.label==t});return e.length?e[0].header[0].text:"Reports"}});return r});
define('tau/views/view.page.reports',["Underscore","jQuery","tau/core/view-base","tau/components/component.container","tau/configurations/reports.container.config"],function(e,t,n,i,o){return n.extend({init:function(e){this._super(e)},initialize:function(){},"bus beforeInit":function(){var t=this,n=t.config,r=new o(n),s=t.config.context.configurator;s.getTitleManager().setTitle("Report");var a=s.getHistory();setTimeout(e.bind(function(){a.reset(),a.setCurrent({id:0,url:"#reports/"+this.config.reportType,title:r.getReportNameByKey(this.config.reportType)})},this),1);var c=s.getBoardSettingsFactory().createComponentSettings({id:"reports"});t.config.context.componentSettings=c;var f=e.extend(n,r.getConfig()),u=t.container=i.create({name:"board page container",layout:f.layout,template:f.template,extensions:e.union([],f.extensions||[]),context:n.context}),p=function(e){s.setConfig("states",e),u.on("afterInit",t["container afterInit"],t),u.on("afterRender",t["container afterRender"],t),u.on("componentsCreated",t["container componentsCreated"],t),u.initialize(f)};this.processStates().done(function(e){p(e)}),c.unbind({listener:t,callback:t.onStateChanged}),c.bind({fields:["reports"],listener:t,callback:function(e){a.updateCurrent({url:"#reports/"+e.reports,title:r.getReportNameByKey(e.reports)})}})},"container afterInit":function(){this.fireAfterInit()},"container componentsCreated":function(e){this.fire(e.name,e.data)},"container afterRender":function(e){this.fireBeforeRender(),this.element=e.data.element,e.data.element.addClass("tau-page-entity"),this.fireAfterRender()},lifeCycleCleanUp:function(){this.destroyContainer(),this._super()},processStates:function(){var e=this.config.reportType,n=this.config.context.componentSettings,i=t.Deferred();return e?n.set({set:{reports:e},callback:function(e){i.resolve(e)}}):n.get({fields:["reports"],callback:function(e){i.resolve(e)}}),i},destroyContainer:function(){this.container&&(this.container.destroy(),this.container=null)},destroy:function(){this.config.context.componentSettings.unbind({listener:this}),this.destroyContainer(),this._super()}})});
define('tau/components/component.page.reports',["tau/components/component.page.base","tau/views/view.page.reports"],function(e,n){return{create:function(r){var t={name:"reports page component",turnOffErrorEmiter:!0,extensions:[],ViewType:n};return e.create(t,r)}}});
define('tau/services/search/service.search.resultHandler',["Underscore","tau/core/class","tau/utils/utils.date","tau/core/termProcessor"],function(e,t,n,r){var a=t.extend({init:function(){this.preProcessingStrategies={comment:function(e){e.entityType={name:"comment"};var t=new r;return e.general.entityType.term=t.getTerms(e.general.entityType.name).name,e}}},handle:function(t,n,r){t.fail(function(e){n.reject({data:{error:!0,response:e}})}).done(e.bind(function(t){var a=e.trim(r).replace(/(\d+)/g," $1 "),i=e.without(a?a.split(/\s|\?|\*|\+|-|:|'|"/g):[],"");i=e(i).chain().filter(function(e){return e&&(/^\d+$/.test(e)||e.length>1)}).uniq().value(),n.resolve({data:{keywords:i,info:t.info,items:e.map(t.items,e.bind(this._adaptItem,this))}})},this))},_adaptItem:function(t){var a=t.__type.toLowerCase(),i=this.preProcessingStrategies[a]||e.identity;t=i(t);var s=new r;return t.entityType.term=s.getTerms(t.entityType.name).name,t.nameExt=t.nameExt||t.name,t.descExt=t.descExt||t.description||"",t.tags=t.tags?t.tags.split(", "):[],t.createDate=n.parse(t.createDate),t}});return a});
define('tau/services/search/service.search.command',["jQuery","Underscore","tau/core/class","tau/services/search/service.search.resultHandler"],function(e,t,i,n){var a=i.extend({init:function(e,t,i){this.configurator=e,this.params=t,this.$resultDeferred=i,this.searchResultHandler=new n},_fetchDetailsByIDs:function(i){var n=t.defaults(i.IndexProgressData||{},{CompleteInPercents:100}),a={info:{pageNo:this.params.pageNo,pageSize:this.params.pageSize,total:i.Total,indexProgress:n.CompleteInPercents},items:[]},s=e.Deferred();if(a.info.total>0){var r=i.AssignableIds,d=i.TestCaseIds,c=i.GeneralIds,o=i.ImpedimentIds,l=i.CommentIds,f=this.configurator.getStore();if(r.length){var m={fields:["id","name","description","tags","createDate",{entityType:["id","name"]},{entityState:["id","name","isFinal"]},{project:["id","name"]},{team:["id","name"]}],$query:{id:{$in:r}}};f=f.find("assignable",m)}if(d.length){var u={fields:["id","name","description","steps","success","tags","createDate",{entityType:["id","name"]},{project:["id","name"]}],$query:{id:{$in:d}}};f=f.find("testcase",u)}if(c.length){var p={fields:["id","name","description","tags","createDate",{entityType:["id","name"]},{project:["id","name"]}],$query:{id:{$in:c}}};f=f.find("general",p)}if(o.length){var g={fields:["id","name","description","tags","createDate",{entityType:["id","name"]},{entityState:["id","name","isFinal"]},{project:["id","name"]}],$query:{id:{$in:o}}};f=f.find("impediment",g)}if(l.length){var h={fields:["id","description","createDate",{general:["id","name",{entityType:["id","name"]}]}],$query:{id:{$in:l}}};f=f.find("comment",h)}f.done({success:function(e){var i=[];t.each(e,function(e){i=i.concat(e.data)}),a.items=t.sortBy(i,function(e){return-1*e.id}),s.resolve(a)},failure:function(e){s.reject(e)}})}else s.resolve(a);return s},_done:function(e){this.searchResultHandler.handle(e,this.$resultDeferred,this.params.searchString)}});return a.allowsToBeFiltered=!1,a});
define('tau/services/search/service.search.command.multiIds',["jQuery","Underscore","tau/core/class","tau/services/search/service.search.command"],function(e,t,r,n){var s=n.extend({init:function(e,t,r){this._super(e,t,r),this.currentPageFromIndex=t.pageNo*t.pageSize,this.currentPageToIndex=this.currentPageFromIndex+t.pageSize,this.searchParameters=this._parseSearchString()},execute:function(){this._searchItemsPromise().done(t.bind(this._done,this))},_parseSearchString:function(){var e=this.params.searchString.split(","),r=[];return t.forEach(e,function(e){var n=t.trim(e),s=/^\d+$/.test(n);s&&r.push(parseInt(n))}),{Ids:r}},_searchItemsPromise:function(){var t=this.configurator.getStore(),r=e.Deferred();return t.get("general",{fields:["id",{entityType:["name"]}],$query:{id:{$in:this.searchParameters.Ids}},$orderBy:"id"}).done(function(e){r.resolve(e[0].data)}),r.promise()},_done:function(e){var r=this._createResultAdapter(e,t.bind(this._resultFilter,this));this._super(t.bind(this._fetchDetailsByIDs,this)(r))},_createResultAdapter:function(e,r){var n=this.configurator.getStore(),s=t(e).chain().filter(r).reduce(t.bind(function(e,r){var s=r.entityType.name,i=s+"Ids";if(!e.hasOwnProperty(i)){var a=n.typeMetaInfo(s);i=t.titleize(a.parent)+"Ids"}return e.hasOwnProperty(i)&&(this._shouldBeShownInCurrentPage(e.Total)&&e[i].push(r.id),++e.Total),e},this),{AssignableIds:[],CommentIds:[],GeneralIds:[],TestCaseIds:[],ImpedimentIds:[],Total:0}).value();return s},_shouldBeShownInCurrentPage:function(e){return e>=this.currentPageFromIndex&&e<this.currentPageToIndex},_resultFilter:function(e){return t.contains(this.searchParameters.Ids,e.id)&&e.hasOwnProperty("entityType")}});return s.isSuitableCommand=function(e){var r=e.split(",");return r.length>1?t.every(r,function(e){var r=t.trim(e),n=/^\d+$/.test(r);return n}):!1},s});
define('tau/services/search/service.search.command.multiIdsParts',["Underscore","tau/core/class","tau/services/search/service.search.command.multiIds","tau/libs/store2/store2"],function(e,t,r,a){var i=r.extend({_parseSearchString:function(){var t=this.params.searchString.split(",");if(t.length>0){var r=[];e.forEach(t,function(t){var a=e.trim(t);/^\*\d+\*$/.test(a)?r.push({value:a.replace(/\*/g,""),apiMethod:"contains"}):/^\*\d+$/.test(a)?r.push({value:a.replace(/^\*/,""),apiMethod:"endsWith"}):/^\d+\*$/.test(a)&&r.push({value:a.replace(/\*$/,""),apiMethod:"startsWith"})})}return{idParts:r}},_searchItemsPromise:function(){var t=new a(this.configurator),r=e.reduce(this.searchParameters.idParts,function(e,t){return e&&(e+=" or "),e+="convert.toString(Id.Value)."+t.apiMethod+'("'+t.value+'")'},"");return t.findAll("general?&select={id, {entityType.id, entityType.name} as entityType}&where=("+r+")&orderBy=id&take=1000&skip=0")},_resultFilter:function(e){return e.hasOwnProperty("entityType")}});return i.isSuitableCommand=function(t){var r=t.split(",");return r.length>0?e.every(r,function(t){var r=e.trim(t),a=/^(?:\*\d+\*|\*\d+|\d+\*)$/.test(r);return a}):!1},i});
define('tau/services/search/service.search.command.text.contextBuilder',["jQuery","Underscore","tau/core/class"],function(e,t,n){var r=n.extend({init:function(e,t){this.configurator=e,this.params=t},getContextPromise:function(){var n=e.Deferred();return this._getInitialContextPromise().done(t.bind(function(r){var s=e.Deferred(),i=e.Deferred(),o=this.configurator.getStore(),a=t.difference(r.selectedProjectIds,r.selectedProjectIdsAvailable),c=t.difference(r.selectedTeamIds,r.selectedTeamIdsAvailable),l=r.isAllProjects?r.selectedTeamIds:c;l=t.without(l,"null");var d=r.isAllTeams?r.selectedProjectIds:a;d=t.without(d,"null");var u=0!==l.length,f=0!==d.length;u?o=this._handleTeams(o,l,s):s.resolve({}),f?o=this._handleProjects(o,d,i):i.resolve({}),(u||f)&&o.done(),e.when(s,i).then(function(e,s){var i={},o=function(e,n){var r=t.union(i[n]||[],e);r.length&&(i[n]=r)};t.each(e,o),t.each(s,o),r.teamProjectRelations=t(i).chain().keys().reduce(function(e,n){n=parseInt(n,10);var s=e[n];return(r.isAllProjects||r.isAllTeams)&&t.contains(r.selectedTeamIdsAvailable,n)?s=t.difference(s,r.selectedProjectIdsAvailable):r.isAllTeams&&!t.contains(r.selectedTeamIdsAvailable,n)||(t.contains(c,n)?s=t.intersection(s,r.selectedProjectIds):t.contains(r.selectedTeamIdsAvailable,n)?s=t.intersection(s,a):(s=[],delete e[n])),s.length?e[n]=s:delete e[n],e},i).value(),n.resolve(r)})},this)),n.promise()},_getInitialContextPromise:function(){var n=this.configurator.getApplicationContextService(),r=this.configurator.getLoggedUser(),s=e.Deferred(),i=e.Deferred(),o=e.Deferred(),a=e.Deferred(),c=this.params.isAllProjects,l=this.params.isAllTeams;if(c?e.when(a).done(function(e){var n=t(e.projects).pluck("id");s.resolve({isAllProjects:!0,includeNoProject:!0,selectedProjectIds:n,selectedProjectIdsAvailable:n})}):e.when(o).done(function(e){s.resolve({includeNoProject:e.appContext.projectContext.no,selectedProjectIds:e.selectedProjectIds,selectedProjectIdsAvailable:e.selectedProjectIdsAvailable})}),l?e.when(a).done(function(e){var n=t(e.teams).pluck("id");i.resolve({isAllTeams:!0,includeNoTeam:!0,selectedTeamIds:n,selectedTeamIdsAvailable:n})}):e.when(o).done(function(e){i.resolve({includeNoTeam:e.appContext.teamContext.no,selectedTeamIds:e.selectedTeamIds,selectedTeamIdsAvailable:e.selectedTeamIdsAvailable})}),(c||l)&&n.getTeamsProjectsAvailable(r.id).done(a.resolve),!c||!l){var d=this.configurator.getAppStateStore();d.get({fields:["acid"]}).then(function(e){return n.getApplicationContext({acid:e.acid})}).done(o.resolve)}return e.when(s,i).then(function(e,n){return t.extend(e,n)})},_handleTeams:function(e,n,r){return e=e.find("teams",{fields:["id",{teamProjects:["id",{project:["id"]}]}],$query:{id:{$in:n}},list:!0},{success:function(e){var n=e.data,s=t(n).reduce(function(e,n){var r=t(n.teamProjects).map(function(e){return e.project.id});return r.length&&(e[n.id]=r),e},{});r.resolve(s)}})},_handleProjects:function(e,n,r){return e=e.find("projects",{fields:["id",{teamProjects:["id",{team:["id"]}]}],$query:{id:{$in:n}},list:!0},{success:function(e){var n=e.data,s=t(n).reduce(function(e,n){var r=t(n.teamProjects).map(function(e){return e.team.id});return e=t(r).reduce(function(e,t){return e[t]=e[t]||[],e[t].push(n.id),e},e)},{});r.resolve(s)}})}});return r});
define('tau/services/search/service.search.command.text',["jQuery","Underscore","tau/core/class","tau/services/search/service.search.command","tau/services/search/service.search.command.text.contextBuilder"],function(e,t,a,i,s){var r=i.extend({init:function(e,t,a){this._super(e,t,a),this.searchContextBuilder=new s(this.configurator,t)},execute:function(){this._done(this.searchContextBuilder.getContextPromise().then(t.bind(this._searchTextPromise,this)).then(t.bind(this._fetchDetailsByIDs,this)))},_searchTextPromise:function(a){var i="{AppPath}/api/v1/Plugins.asmx/Search/Profiles/Now%20running/Commands/Search".replace(/{AppPath}/g,this.configurator.getApplicationPath()),s=this.configurator.getLoggedUser(),r=JSON.stringify({Command:"Search",Plugin:"Search",LoggedUserId:null!=s?s.id:null,TeamIds:t.without(a.selectedTeamIdsAvailable,"null"),IncludeNoTeam:a.includeNoTeam,ProjectIds:t.without(a.selectedProjectIdsAvailable,"null"),IncludeNoProject:a.includeNoProject,TeamProjectRelations:t(a.teamProjectRelations).map(function(e,t){return{TeamId:parseInt(t),ProjectIds:e}}),Query:this.params.searchString,EntityTypeId:this.params.entityTypeId,EntityStateIds:t.isArray(this.params.entityStateIds)?this.params.entityStateIds:t((this.params.entityStateIds||"").split(",")).chain().without("").map(function(e){return parseInt(e)}).value(),Page:{Number:this.params.pageNo,Size:this.params.pageSize}});return e.ajax({url:i,type:"POST",data:r,dataType:"json"})}});return r.isSuitableCommand=function(){return!0},r.allowsToBeFiltered=!0,r});
define('tau/services/search/service.search.commandFacttory',["tau/services/search/service.search.command.multiIds","tau/services/search/service.search.command.multiIdsParts","tau/services/search/service.search.command.text"],function(e,a,s){var r={getSuitableCommand:function(r){return e.isSuitableCommand(r)?e:a.isSuitableCommand(r)?a:s}};return r});
define('tau/services/service.search',["jQuery","Underscore","tau/core/termProcessor","tau/core/class","tau/services/search/service.search.commandFacttory","tau/services/search/service.search.command.multiIdsParts","tau/services/search/service.search.command.text"],function(a,e,t,r,n){var s=r.extend({init:function(e){var t=this;t.defaultParams={searchString:"",entityTypeId:null,entityStateIds:null,pageSize:10,pageNo:0},t.storage=e.storage,t._params=e.storage,t.configurator=e.configurator,t.$paramsChangedCallbacks=a.Callbacks(),t.$dParamsChanged=a.Deferred(),t.$dParamsChanged.progress(t.$paramsChangedCallbacks.fire),t.$clearCallbacks=a.Callbacks(),t.$dClear=a.Deferred(),t.$dClear.progress(t.$clearCallbacks.fire),t.$submitCallbacks=a.Callbacks(),t.$dSubmit=a.Deferred(),t.$dSubmit.progress(t.$submitCallbacks.fire),t.$searchCallbacks=a.Callbacks(),t.$dSearch=a.Deferred(),t.$dSearch.progress(t.$searchCallbacks.fire)},asDisposable:function(a,t){var r=this,n={};return n.dispose=e.bind(function(a,e,t){a[t](e)},n,r,a,t),n},onParamsChanged:function(a){var e=this;return e.$paramsChangedCallbacks.add(a),e.asDisposable(a,"offParamsChanged")},offParamsChanged:function(a){this.$paramsChangedCallbacks.remove(a)},onClear:function(a){return this.$clearCallbacks.add(a),this.asDisposable(a,"offClear")},offClear:function(a){this.$clearCallbacks.remove(a)},onSubmit:function(a){return this.$submitCallbacks.add(a),this.asDisposable(a,"offSubmit")},offSubmit:function(a){this.$submitCallbacks.remove(a)},onSearch:function(a){return this.$searchCallbacks.add(a),this.asDisposable(a,"offSearch")},offSearch:function(a){this.$searchCallbacks.remove(a)},params:function(){var a=this;return{get:function(e){return arguments.length?a._params[e]:a._params},set:function(t,r){var n=[],s={};if(e.isString(t))n=[t],s[t]=r;else{if(!e.isObject(t))throw new Error("Unsupported argument [key]");n=e.keys(t),s=t}var i=1===n.length&&"pageNo"===n[0];i||(s.pageNo=0);var c=e.keys(s),o={};return e.each(c,function(e){s[e]!==a._params[e]&&(o[e]=s[e])}),a._params=e.extend(a._params,s),a.$dParamsChanged.notify(o),this},submit:function(){var e=a._params;a.$dSubmit.notify(e)},clear:function(){a._params=e.clone(a.defaultParams),a.$dClear.notify(a._params)}}},__adaptEntityTypes:function(a){var r=new t;return e(a).chain().filter(function(a){var e=a.name.toLowerCase();return"solution"!==e}).map(function(a){return a.term=r.getTerms(a.name).name,a}).value()},__adaptEntityStates:function(a,t){return e(a).chain().reduce(function(a,r){return a[r.name]=a[r.name]||{contextStateIds:[],availableStateIds:[]},e.contains(t,r.process.id)&&a[r.name].contextStateIds.push(r.id),a[r.name].availableStateIds.push(r.id),a},{}).pairs().reject(function(a){return 0===a[1].contextStateIds.length}).map(function(a){var e=a[0],t=a[1];return{id:t.contextStateIds.join(","),availableId:t.availableStateIds.join(","),name:e}}).sortBy(function(a){return a.name}).value()},getSearchDomain:function(t){var r=this;t=t||r.params().get();var n=this.configurator,s=a.Deferred(),i=n.getStore(),c=n.getAppStateStore(),o=n.getApplicationContextService();return c.get({fields:["acid"],callback:function(a){o.getApplicationContext({acid:a.acid},{success:function(a){var n=e.pluck(a.availableProcesses,"id"),c=e.pluck(a.processes,"id"),o={process:{id:{$in:n}}};i.find("entityType",{list:!0,fields:["id","name"],$query:{isSearchable:1}}).find("entityState",{list:!0,fields:["id","name",{entityType:["id","name"]},{process:["id"]}],$query:o}).done(function(a){var i=r.__adaptEntityTypes(a[0].data),o=t.entityTypeId?function(a){return a.entityType.id==t.entityTypeId}:function(){return!0},l=e(a[1].data).filter(o),u=r.__adaptEntityStates(l,t.isAllProjects?n:c);s.resolve({entityTypes:i,entityStates:u,params:t})})}})}}),s},search:function(t){return e.defaults(t,this.defaultParams),{done:e.bind(function(r){var n;e.isFunction(r)?(n=a.Deferred(),n.always(r)):n=r,n.always(this.$dSearch.notify);var s=this.getSuitableCommand(t.searchString);new s(this.configurator,t,n).execute()},this)}},getSuitableCommand:function(a){return n.getSuitableCommand(a)}});return s});
define('tau/ui/extensions/search.filter.hider/ui.extension.search.filter.hider',["jQuery","Underscore","tau/core/extension.base","tau/services/service.search"],function(e,r,t){return t.extend({"bus afterRenderAll":function(e,t){var n=t.data.context.configurator,i=n.service("search"),a=t.element,o=r.bind(this._hideFilterIfNeeded,this,i,a),s=function(e){var r;return function(){r&&(clearTimeout(r),r=null),r=setTimeout(function(){e()},200)}};a.on("keyup",".i-role-search-string",s(o)),a.on("change",".i-role-search-string",o),o()},_hideFilterIfNeeded:function(e,t){var n=r.trim(t.find(".i-role-search-string").val()),i=!e.getSuitableCommand(n).allowsToBeFiltered;t.toggleClass("tau-search-no-filter",i)}})});
define('tau/configurations/search.container.config',["Underscore","tau/core/class","tau/ui/extensions/search.filter.hider/ui.extension.search.filter.hider"],function(e,r,t){var n=r.extend({getConfig:function(){return{children:[{type:"container",name:"search results container",layout:"selectable",template:{name:"search-results-container",markup:['<div class="tau-container i-role-container-target"></div>']},children:[{type:"search.filter",selector:".i-role-container-target"},{type:"search",selector:".i-role-container-target"}],extensions:[t]}]}}});return n});
define('tau/views/view.page.search',["Underscore","jQuery","tau/core/view-base","tau/components/component.container","tau/configurations/search.container.config"],function(e,t,n,i,r){return n.extend({init:function(e){this._super(e)},initialize:function(){},"bus beforeInit":function(){var t=this,n=t.config.context.configurator;n.getTitleManager().setTitle("Search");var o=n.getHistory();o.reset(),o.setCurrent({id:0,url:"#"+t.config.entity,title:"Back to search results"});var a=t.config,c=e.extend(a,new r(a).getConfig(a)),s=t.container=i.create({name:"board page container",layout:c.layout,template:c.template,extensions:e.union([],c.extensions||[]),context:a.context});s.on("afterInit",t["container afterInit"],t),s.on("afterRender",t["container afterRender"],t),s.on("componentsCreated",t["container componentsCreated"],t),s.initialize(c)},"container afterInit":function(){this.fireAfterInit()},"container componentsCreated":function(e){this.fire(e.name,e.data)},"container afterRender":function(e){this.fireBeforeRender(),this.element=e.data.element,this.fireAfterRender()},lifeCycleCleanUp:function(){this.destroyContainer(),this._super()},destroyContainer:function(){this.container&&(this.container.destroy(),this.container=null)},destroy:function(){this.destroyContainer(),this._super()}})});
define('tau/components/component.page.search',["tau/components/component.page.base","tau/views/view.page.search"],function(e,n){return{create:function(r){var t={name:"search page component",turnOffErrorEmiter:!0,extensions:[],ViewType:n};return r["queue.bus"]=!0,e.create(t,r)}}});
define('tau/models/model.pluginsList',["Underscore","jQuery","tau/core/model-base"],function(i,n,e){var t=e.extend({onInit:function(){this.config.context.pluginRepository.getPlugins(n.proxy(this.onPluginsRetrieved,this))},onPluginsRetrieved:function(i){this.augmentData(i),this.fire("dataBind",{items:i})},augmentData:function(n){var e=this.config.context.configurator;i(n).each(function(n){i(n.plugins).each(function(i){i.iconSrc=[e.getApplicationPath(),"/PluginIcon.ashx?pluginName=",i.name].join(""),i.profilesShort=i.profiles.slice(0,3),i.profilesMore=i.profiles.slice(3)},this)},this)}});return t});
define('tau/ui/templates/pluginsList/ui.template.pluginsList.profile',["tau/core/templates-factory"],function(e){var a={name:"pluginsList-profile",markup:["<ul>",'   <li class="name tau-profileName"><a href="${editUrl}">${name}</a></li>','   <li class="delete"><a class="tau-profile-actions button danger" href=""><span class="delete-icon"></span></a></li>',"</ul>"]};return e.register(a)});
define('tau/ui/templates/pluginsList/ui.template.pluginsList.plugin',["tau/core/templates-factory","tau/ui/templates/pluginsList/ui.template.pluginsList.profile"],function(i){var s={name:"pluginsList-plugin",markup:['<div class="plugin-block">','   <img src="${iconSrc}" />','   <h4 class="_pluginName">${name}</h4>','   <p class="note-p">${description}</p>','   <div class="separator"></div>','   <div class="profiles-list">','       <div class="tau-profiles-short">','           {{tmpl(profilesShort) "pluginsList-profile"}}',"       </div>",'       <div class="tau-profiles-more" style="display:none">','           {{tmpl(profilesMore) "pluginsList-profile"}}',"       </div>","   </div>",'   <div class="pb-5 tau-profiles-moreLink" style="display:none">','       <a class="more-link">Show more (${profilesMore.length})</a>',"   </div>",'   <div class="pt-5">','       <button type="button" class="button bold" onClick="window.location.href = \'${newProfileUrl}\';">Add Profile</button>',"   </div>","</div>"],dependencies:["pluginsList-profile"]};return i.register(s)});
define('tau/ui/templates/pluginsList/ui.template.pluginsList.category',["tau/core/templates-factory","tau/ui/templates/pluginsList/ui.template.pluginsList.plugin"],function(i){var e={name:"pluginsList-category",markup:['<div class="plugins-category">','<div class="expanded tau-pluginCategory">','<span class="label">${category}</span>',"</div>",'{{tmpl(plugins) "pluginsList-plugin"}}',"</div>"],dependencies:["pluginsList-plugin"]};return i.register(e)});
define('tau/ui/templates/pluginsList/ui.template.pluginsList',["tau/core/templates-factory","tau/ui/templates/pluginsList/ui.template.pluginsList.category"],function(i){var t={name:"pluginsList",options:{contentSelector:".ui-pluginsList-table"},markup:['<div class="plugins">','   <div class="list">','       <h2 class="h2 icon">Plugins</h2>','       {{tmpl(items) "pluginsList-category"}}',"   </div>","</div>"],dependencies:["pluginsList-category"]};return i.register(t)});
define('tau/ui/extensions/pluginsList/ui.extension.pluginsList.editable',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,n,t){var i=t.extend({"bus dataBind+afterRender":function(t){this.element=t.afterRender.data.element,this.dataToBind=t.dataBind.data;var i=this.element.find(".plugin-block");e(i).each(function(e){n(e).find(".tau-profile-actions").click(n.proxy(this.onDeleteProfile,{pluginBlock:n(e),parentExtension:this}))},this)},onDeleteProfile:function(e){e.preventDefault();var t=this.parentExtension,i=n(e.target).tmplItem().data,o=this.pluginBlock,a=function(){o.confirmation("hide"),o.tauOverlay("hide"),t.fire("refresh")};o.confirmation({message:"Do you really want to delete profile?",okLabel:"OK",cancelLabel:"Cancel",ok:function(){o.tauOverlay({showOnCreation:!1}),o.tauOverlay("showLarge"),o.confirmation("hideConfirmationMessage"),t.config.context.pluginRepository.deleteProfile(i.pluginName,i.name,a)},cancel:function(){o.confirmation("hide")}}),this.pluginBlock.confirmation("show")}});return i});
define('tau/ui/extensions/pluginsList/ui.extension.pluginsList.errorDisplay',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,t,n){var a=n.extend({"bus dataBind+afterRender":function(n){this.element=n.afterRender.data.element,this.dataToBind=n.dataBind.data,e(this.element.find(".plugin-block")).each(function(e){var n=t(e).tmplItem().data.name;this.config.context.pluginRepository.getProfilesErrors(n,t.proxy(this.onProfilesErrorsRetrieved,{element:t(e),data:t(e).tmplItem().data}))},this)},onProfilesErrorsRetrieved:function(n){e(this.element.find(".tau-profileName")).each(function(a){e(n).each(function(e){if(e.ProfileName==t(a).tmplItem().data.name&&e.ErrorsExist){var n=t(a);n.fadeOut("slow"),n.children("a").addClass("error-indicator"),t(a).fadeIn("slow")}})},this)}});return a});
define('tau/ui/extensions/pluginsList/ui.extension.pluginsCategory.collapsible',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,n,a){var d=a.extend({"bus dataBind+afterRender":function(a){e(a.afterRender.data.element.find(".plugins-category")).each(function(e){var a=n(e);a.find(".tau-pluginCategory").click(function(e){e.preventDefault();var d=n(this),t=d.hasClass("collapsed"),i=t?"collapsed":"expanded",o=t?"expanded":"collapsed";d.removeClass(i),d.addClass(o),t?(a.find(".plugin-block").show(),a.find(".create-me").show()):(a.find(".plugin-block").hide(),a.find(".create-me").hide())})})}});return d});
define('tau/ui/extensions/pluginsList/ui.extension.pluginsList.showMore',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,t,n){var o=n.extend({"bus dataBind+afterRender":function(n){this.element=n.afterRender.data.element,this.dataToBind=n.dataBind.data,e(this.element.find(".plugin-block")).each(function(e){var n=t(e),o=n.tmplItem().data.profilesMore.length;if(o>0){var i=n.find(".tau-profiles-more"),a=n.find(".tau-profiles-moreLink");a.show(),a.click([a,i],t.proxy(this.onShowMoreClick,{profilesMoreCount:o}))}},this)},onShowMoreClick:function(e){e.preventDefault();var t=e.data[0].find(".more-link"),n=e.data[1];t.text(n.is(":visible")?["Show more (",this.profilesMoreCount,")"].join(""):"Show less"),n.animate({opacity:"toggle",height:"toggle"},"slow")}});return o});
define('tau/components/component.pluginsList',["require","tau/models/model.pluginsList","tau/ui/templates/pluginsList/ui.template.pluginsList","tau/ui/extensions/pluginsList/ui.extension.pluginsList.editable","tau/ui/extensions/pluginsList/ui.extension.pluginsList.errorDisplay","tau/ui/extensions/pluginsList/ui.extension.pluginsCategory.collapsible","tau/ui/extensions/pluginsList/ui.extension.pluginsList.showMore","tau/ui/extensions/ui.extension.loading","tau/components/component.list.creator"],function(i){var s=i("tau/models/model.pluginsList"),e=i("tau/ui/templates/pluginsList/ui.template.pluginsList"),t=i("tau/ui/extensions/pluginsList/ui.extension.pluginsList.editable"),n=i("tau/ui/extensions/pluginsList/ui.extension.pluginsList.errorDisplay"),u=i("tau/ui/extensions/pluginsList/ui.extension.pluginsCategory.collapsible"),o=i("tau/ui/extensions/pluginsList/ui.extension.pluginsList.showMore"),l=i("tau/ui/extensions/ui.extension.loading"),a=i("tau/components/component.list.creator");return{create:function(i){var p={ModelType:s,template:e,message:"No plugins found",extensions:[t,n,u,o,l]};return a.create(p,i)}}});
define('tau/ui/templates/common/ui.template.buttonAction',["tau/core/templates-factory"],function(t){var a={name:"button-action",markup:['<a class="button-box ${id}-button user-action button small ${className}"',' role="button">','   <span class="">${title}</span>',"</a>"].join("")};return t.register(a)});
define('tau/ui/templates/print/ui.template.print',["tau/core/templates-factory","tau/ui/templates/common/ui.template.buttonAction"],function(t){var i={name:"print",markup:['<div class="ui-print">','   <div class="ui-print__controls">','       {{tmpl([{id: "x", className: "ui-print__controls__print", title: "Print"}]) "button-action"}}',"   </div>","</div>"],dependencies:["button-action"]};return t.register(i)});
define('tau/ui/extensions/print/ui.extension.print',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(t,n,i){return i.extend({"bus beforeInit":function(t){this.options=t.data.config,this.options.window=this.options.window||window},"bus afterRender":function(n){this.element=n.data.element,this.entity=n.data.data.context.entity;var i=this.element;this._printHandler||(this._printHandler=t.bind(this._print,this),i.find(".ui-print__controls__print").bind("click",this._printHandler));i.find(".ui-print__controls__close");this._closeHandler||(this._closeHandler=t.bind(this._close,this),i.find(".ui-print__controls__close").bind("click",this._closeHandler))},_print:function(){this.options.window.print()},_close:function(t){t.preventDefault(),this.options.window.opener?this.options.window.close():this.config.context.configurator.getRedirect().redirect("tp2/entity/${entity.id}",null,this.options.context)}})});
define('tau/components/component.print',["Underscore","tau/core/component-base","tau/views/view.container","tau/ui/templates/print/ui.template.print","tau/ui/extensions/print/ui.extension.print"],function(t,e,n,i,a){return{create:function(u){return u=u||{},t.defaults(u,{template:i}),new e(u).attach(a).attach(n).bus}}});
define('tau/views/view.composer',["Underscore","jQuery","tau/core/view-base","tau/core/event-dispatcher"],function(e,i,n,t){var r=n.extend({init:function(e){this._loaded=!1,this._super(e)},initialize:function(){var i=this,n=i.config.children,t=e.isArray(n)&&e.size(n)>0&&i.config.visible;if(t){var r=i.config.children,d=i.config.context||{};this.fire("createComponents",{components:r,context:d})}else i._super.apply(i,arguments),i._fireChildrenRendered({children:[],childrenEvtArgs:[]})},"bus componentCreated":function(e){var i=e.data.component;this.fire("childComponentCreated",i)},"bus componentsCreated":function(e){this.fire("beforeComponentsInitialize",e.data),this.initializeChildrenComponents(e),this.fire("afterComponentsInitialize",e.data)},initializeChildrenComponents:function(i){var n=this,r=e(i.data).pluck("component"),d=e(i.data).pluck("config");n.dispatcher=new t(r),n.dispatcher.listen("afterInit",function(){n.fireAfterInit()}),n.dispatcher.listen("afterRender",function(e){var i=e.argsArr,t={children:r,childrenEvtArgs:i};n._fireChildrenRendered(t)}),e(r).each(function(e,i){var n=d[i];n.disableSubscriptions=!0,e.fire("initialize",n)})},_fireChildrenRendered:function(e){this.fire("internalChildrenRendered",e)},"bus afterInit+dataBind":function(){},"bus afterInit+dataBind+internalChildrenRendered":function(n){this.destroyChildComponents();var t=this,r=n.afterInit.data,d=n.dataBind.data,a=n.internalChildrenRendered.data;if(t.children=a.children,t.config.visible&&(t._loaded=!0),0===a.children.length)t.render(d,r);else{t.fireBeforeRender({data:d});var o=t.bindTemplate(d);o.find("[runas]").each(function(){var n=i(this),t=n.attr("runas"),r=n.attr("componentId"),d=e(a.childrenEvtArgs).detect(function(e){var i=e.view.config;return i.type===t&&i.id.toString()===r});if(!d){var o='Component "'+r+'" type of ['+t+"] not found";throw o}var s=d.element;n.replaceWith(s)}),o=t.prepareElement(o),t.fire("childrenRendered",a.children),t.updateElement(o,r.refreshSelector),!t.config.visible&&t.hide(),t.fireAfterRender({data:d})}},"bus show":function(){this._super(),this._loaded||this.fire("initialize",{})},lifeCycleCleanUp:function(){this._super()},destroyChildComponents:function(){delete this.dispatcher;var e=null;if(this.children&&this.children.length)for(;e=this.children.pop();)e.destroy();delete this.children},destroy:function(){this.destroyChildComponents(),this._super()}});return r});
define('tau/models/model.progressBar',["tau/core/model-base"],function(e){var t=function(e){this.model=e};t.prototype={setEntity:function(e){this.entity=e.data},done:function(){if(this.model.config){var e=this.model.entity=this.entity;if(e){var t={id:e.id,entityType:{name:e.__type},entityState:{id:e.entityState.id,name:e.entityState.name,isFinal:e.entityState.isFinal},effortCompleted:e.effortCompleted,effortToDo:e.effortToDo,timeSpent:e.timeSpent,timeRemain:e.timeRemain},i=Math.round(100*parseFloat(t.effortToDo)+100*parseFloat(t.effortCompleted))/100;t.percentCompleted=Math.round(1e4*(t.effortCompleted/i))/100,t.percentCompleted=isNaN(t.percentCompleted)?0:t.percentCompleted,t.percentCompleted=t.percentCompleted>100?100:t.percentCompleted,e.entityState.isFinal&&(t.percentCompleted=100),t.disableSpentRemain=this.model.config.context.getTimeTrackingPolicies().disableSpentRemain;var n=this.model.config.maxWidthPercents;t.maxWidthPercents=_.isUndefined(n)===!1?n:100,t.textMode=this.model.config.textMode,this.model.bus.fire("dataBind",t)}}}};var i=e.extend({name:"Progress Bar",beforeSaveRoleEffort:function(e){var t=e.data.cmd.config;t.fields=t.fields||[],t.fields.push({assignable:["id","effortCompleted","effortToDo","timeSpent","timeRemain"]})},afterSaveEntity:function(e){var t=e.data;t.changes.hasOwnProperty("timeRemain")&&t.id===this.config.context.entity.id&&this.fire("remainTimeChanged")},afterSaveRoleEffort:function(){var e=this;e.fire("roleEffortChanged")},onDataUpdated:function(){var e=this;e.fire("refresh")},onInit:function(){var e=this,i=new t(this),n=this.config.context,a=n.entity.entityType.name,o=n.entity.id,r={entityState:["id","name","isFinal"]},f=["effortCompleted","effortToDo","timeSpent","timeRemain",r],s=function(t){var i=t.data.cmd.config.fields;t.data.cmd.config.fields=i.concat(f),e.fire("beforeChanges",t.data.changes)},d=function(t){var i=t.data?t.data.cmd:null;null!=i&&e.isInTransaction(t)||e.fire("applyChanges",t.data.changes)};e.store.unbind(this),e.store.on({eventName:"beforeSave",type:a,filter:{id:n.entity.id},hasChanges:["entityState"],listener:this},s),e.store.on({eventName:"afterSave",type:a,filter:{id:n.entity.id},hasChanges:["entityState"],listener:this},d),e.store.on({eventName:"afterSave",type:a,filter:{id:n.entity.id},hasChanges:["effort|effortCompleted|effortToDo|timeSpent|timeRemain"],listener:e},_.bind(e.onDataUpdated,e)),e.store.on({eventName:"beforeSave",type:"roleEffort",listener:this},function(){e.beforeSaveRoleEffort.apply(e,arguments)}),e.store.on({eventName:"afterSave",type:"roleEffort",filter:{assignable:{id:n.entity.id}},listener:this},function(t){var i=t.data.changes||{},n=0===_.keys(i).length;n||e.isInTransaction(t)||e.afterSaveRoleEffort.apply(e,arguments)}),this.store.get(a,{id:o,fields:f},{success:i.setEntity,scope:i}).done({success:i.done,scope:i})},isInTransaction:function(e){var t=this,i=e.data?e.data.cmd:{};return i===t.lastCmd?!0:(t.lastCmd=i,!1)},"bus evict":function(){var e=this.config.context.entity;this.store.evictProperties(e.id,e.entityType.name,["effortCompleted","effortToDo","timeSpent","timeRemain","entityState"])}});return i});
define('tau/models/model.state.editable',["tau/core/model.editable.base"],function(e){return e.extend({category:"edit",name:"Editable State","bus dataBind":function(){this.bus.fire("permissionsReady",{editable:!0})},"bus beforeSave":function(e){var t=e.data.cmd,i=t.fields||[];i=i.concat(["effortCompleted","effortToDo","timeSpent","timeRemain"]),t.fields=i}})});
define('tau/ui/extensions/progressBar/ui.extension.progressBar.updater',["tau/components/extensions/component.extension.base","tau/ui/behaviour/overlay/ui.behaviour.overlay"],function(e){return e.extend({"bus afterRender":function(e){this.$el=e.data.element,this.config.context.getTimeTrackingPolicies().disableSpentRemain&&this.$el.find(".ui-progressbar__data").hide()},"bus roleEffortChanged":function(){this.refresh()},"bus remainTimeChanged":function(){this.refresh()},"bus beforeChanges":function(){this.$el.tauOverlay()},"bus applyChanges":function(){this.$el.data("ui-tauOverlay")&&this.$el.tauOverlay("hide"),this.refresh()},refresh:function(){this.fire("refresh")}})});
define('tau/ui/templates/progressBar/ui.template.progressBar',["tau/core/templates-factory","tau/ui/tags/ui.tag.term","tau/ui/templates/common/ui.template.attributeValue"],function(e,s){var a={name:"progress-bar",tags:[s],markup:['<div class="entity-progress-box">','   <div class="state-select">{{term(entityType.name) "name"}} state is','      <div componentId="ctrlEntityState" runas="property.entityState"></div>',"   </div>",'   <div class="ui-progressbar__data">','      <span class="ui-label-spent ui-progressbar__data__spent">Spent&nbsp;<b class="value">${timeSpent}h</b></span>','      <span class="ui-label-remain  ui-progressbar__data__remain">Remain&nbsp;<b class="value">${timeRemain}h</b></span>',"   </div>",'   <div class="ui-progress-bar-progress ui-progressbar__progress">',"{{if percentCompleted !== 0 }}",'      <span class="ui-progress-progress ui-progressbar__progress__indicator" style="width:${ Math.round(percentCompleted) < 15 ? 15 : Math.round(percentCompleted) }%;">','         <span class="ui-label ui-progressbar__progress__label"><b class="value">${ Math.round(percentCompleted) }%</b></span>',"      </span>","{{/if}}","   </div>","</div>"],dependencies:["common-attributeValue"]};return e.register(a)});
define('tau/components/component.progressBar',["Underscore","tau/components/component.creator","tau/views/view.composer","tau/components/extensions/component.creator.extension","tau/models/model.progressBar","tau/models/model.state.editable","tau/ui/extensions/progressBar/ui.extension.progressBar.updater","tau/ui/extensions/ui.extensions.onMarkAsDuplicate","tau/ui/templates/progressBar/ui.template.progressBar"],function(e,t,n,s,o,r,a,i,p){return{create:function(u,d){d=d||{};for(var l={ViewType:n,extensions:[d.model||o,r,s,a,i],template:d.template||p},c=u.extensions||[],m=0;m<c.length;m++)l.extensions.push(c[m]);return e(u).extend({children:[{id:"ctrlEntityState",type:"property.entityState",disabledExtensionCategories:u.disabledExtensionCategories}]}),t.create(l,u)}}});
define('tau/ui/templates/progressBar/ui.template.progressBar.small',["tau/core/templates-factory","tau/ui/tags/ui.tag.term","tau/ui/templates/common/ui.template.attributeValue"],function(e,t){var i=["{{if disableSpentRemain === false}}","Time spent: ${timeSpent}{{if timeSpent}}h{{/if}}  ","Time remain: {{if !timeRemain && timeRemain !== 0}}N/A{{else}}${timeRemain}{{if timeRemain}}h{{/if}}{{/if}}  ","{{/if}}","Percent complete: ${Math.round(percentCompleted)}%"].join(""),s={name:"progress-bar-small",tags:[t],markup:["<div>","{{if textMode}}",'<div class="tau-extension-tooltip" title="'+i+'">',"${Math.round(percentCompleted)}%","</div>","{{else}}","{{if maxWidthPercents > 0}}",'    <div class="ui-progress-bar-progress ui-progressbar__progress tau-extension-tooltip" style="width:${maxWidthPercents}%;" title="'+i+'">','        <span class="ui-progress-progress ui-progressbar__progress__indicator" style="width:${percentCompleted}%;{{if percentCompleted == 0}}display:none;{{/if}}"></span>',"    </div>","{{else}}",'   <div{{if maxWidthPercents == 0}} class="tau-extension-tooltip" title="'+i+'"{{/if}}>',"   </div>","{{/if}}","{{/if}}","</div>"]};return e.register(s)});
define('tau/components/component.progressBar.small',["Underscore","tau/components/component.creator","tau/components/extensions/component.creator.extension","tau/models/model.progressBar","tau/ui/extensions/progressBar/ui.extension.progressBar.updater","tau/ui/extensions/ui.extension.tooltip","tau/ui/templates/progressBar/ui.template.progressBar.small"],function(e,t,n,o,r,s,a){return{create:function(e,n){n=n||{};var i={extensions:[o,r,s],template:a};return t.create(i,e)}}});
define('tau/models/project.formAdd/model.project.formAdd.data',["Underscore","tau/core/extension.base","tau/configurations/factory.container.config"],function(e,t,n){return t.extend({"bus beforeInit":function(e,t){var n=t.config.context.configurator;this.fire("configurator.ready",n)},"bus configurator.ready:last + beforeInit":function(t,o){var r=o.getStore(),i=e.bind(this.fire,this),a=function(e){return e.name.toUpperCase()};r.get("teams",{fields:["id","name","icon"]}).done(function(t){var r=e.sortBy(t[0].data,a);o.getStore().get("process",{fields:["id","name","isDefault"]}).done(function(t){var o=e.sortBy(t[0].data,a);e.each(r,function(e){e.tooltip=""}),i("dataBind",{teams:r,colors:n.getConfigByType("project").prototype.colors,processes:o})})}),r.unbind(this),r.on({type:"team",eventName:"afterSave",listener:this},function(t){e.isEmpty(t.data.changes)||i("refresh")})}})});
define('tau/models/project.formAdd/model.project.formAdd.add',["Underscore","tau/core/extension.base","tau/libs/inviter/inviter"],function(e,t,r){return t.extend({"bus configurator.ready:last + form.submitted":function(t,s,i){var n=this,a=s.getStore(),o={name:e.trim(i.name),color:e.trim(e.asString(i.color))||null,process:{id:i.process},teamProjects:[]};e.forEach(i.connected,function(e){o.teamProjects.push({team:{id:e}})}),a.save("project",{failureGlobal:!1,fields:["id","name","color","teamProjects"],$set:o},{success:function(e){n.fire("entity.saved",e.data)},failure:function(e){n.fire("entity.add.failure",e.data.response.Message)}}).done();var c=new r(s);c.invite(i.members).done(function(e){n.fire("members.saved",e)})},"bus configurator.ready:last + entity.saved + members.saved":function(t,r,s,i){var n=this,a=r.getStore(),o=e.compact(e.pluck(i,"success")),c=e.compact(e.pluck(i,"failure"));if(c.length){var d="Can't assign users.";this.fire("entity.add.nonFatalFailure",d)}o=e.filter(o,function(e){return e!=r.getLoggedUser().id});var u={projectMembers:e.map(o,function(e){return{user:{id:e}}})};a.save("project",{id:s.id,$set:u,fields:["id","name","color",{projectMembers:[{user:["id","firstName","lastName","avatarUri"]},{role:["id","name"]}]}]}).done(function(e){n.fire("members.connected",e[0].data)})},"bus entity.saved + members.saved + members.connected":function(e,t,r,s){this.fire("entity.add.success",s)}})});
define('tau/ui/extensions/project.formAdd/ui.extension.project.formAdd',["Underscore","jQuery","tau/ui/extensions/board.context.selector/ui.extension.board.context.selector.add.abstract"],function(e,t,r){return r.extend({"bus afterRender":function(e,t){var r=t.element;this.fire("$el.ready",r)},"bus $el.ready":function(e,t){var r=this,i=this._initForm(t);this._addSubmitDataListener(i,function(e){r.fire("form.submitted",e)});var n=i.find("[name=color]"),s=this._initRichSelect(i,n);s.on("change",function(e,t){s.css("background-color",t)})},"bus configurator.ready:last + $el.ready:last + entity.add.success":function(e,t,r){r.find("form").trigger("entity.add.completed").trigger("reset"),this.fire("entity.add.completed")},"bus $el.ready:last + entity.add.failure":function(e,t,r){t.find("form").trigger("entity.add.failed"),t.find(".i-role-form :text:first").focus().select().addClass("tau-error"),this.fire("error",r)},"bus $el.ready:last + entity.add.nonFatalFailure":function(e,t,r){this.fire("error",r)},"bus $el.ready:last + show.completed":function(e,t){var r=t.find("form");r.trigger("reset"),setTimeout(function(){r.find(":submit:first").focus(),r.find(":text:first").focus()},10)}})});
define('tau/ui/extensions/project.formAdd/ui.extension.project.formAdd.inviter',["Underscore","jQuery","tau/ui/extensions/inviter/ui.extension.inviter.widget.abstract"],function(e,i,t){return t.extend({"bus configurator.ready":function(e,i){this._initTemplates(i)},"bus configurator.ready + $el.ready":function(e,i,t){this._initWidget(i,t)}})});
define('tau/ui/templates/project.formAdd/ui.template.project.formAdd',["tau/core/templates-factory","tau/ui/templates/board.context.selector/ui.template.board.context.selector.teams.list"],function(t){var e={name:"project.addForm",engine:"jqote2",markup:['<div class="tau-managed-category tau-teams">','<form class="i-role-form">','<div class="tau-new-entity-form">','<div class="tau-new-entity-form__row">','<div class="tau-note"><b>New project</b></div>','<div class="tau-new-entity-info">','<span class="tau-select-team-icon tau-extension-board-tooltip" data-title="Select a project color">','<i class="tau-icon tau-icon_type_color tau-icon_name_default i-role-currenticon" data-value="default"></i>',"</span>",'<input name="name" type="text" placeholder="Enter project name here"  class="tau-in-text tau-new-entity-name">','<select name="color" style="display:none;">','<option value=""></option>',"<% _.each(this.colors, function(item){ %>",'<option value="<%= item %>"><%= item %></option>',"<% }); %>","</select>","</div>",'<ul class="tau-teams-icon-list i-role-richselect">','<li><i class="tau-icon tau-i-close i-role-option" data-value=""></i></li>',"<% _.each(this.colors, function(item){ %>",'<li><i class="tau-icon tau-icon_type_color i-role-option" style="background-color:<%= item %>;" data-value="<%= item %>"></i></li>',"<% }); %>","</ul>","</div>",'<div class="tau-new-entity-form__row tau-new-entity-process">','<div class="tau-note">',"Select process",'<span class="tau-help i-role-tooltipArticle" data-article-id="project.formAdd.selectProcess"></span>',"</div>",'<select class="tau-select" name="process">',"<% _.each(this.processes, function(item){ %>",'<option <% if (item.isDefault){ %>selected<% } %> value="<%= item.id %>"><%! item.name %></option>',"<% }); %>","</select>","</div>",'<div class="tau-new-entity-form__row tau-invite-widget">','<div class="tau-note">Assign people','<span class="tau-help i-role-tooltipArticle" data-article-id="project.formAdd.assignPeople"></span>',"</div>",'<textarea name="users" placeholder="Start typing name(s) or email(s) to assign people to a project" />',"</div>","<% if (this.teams.length) { %>",'<div class="tau-new-entity-form__row">','<div class="tau-note">Assign teams','<span class="tau-help i-role-tooltipArticle" data-article-id="project.formAdd.assignTeams"></span>',"</div>",'<ul class="tau-category-items-selector i-role-list">','<%= fn.sub("board.context.selector.teams.list", this.teams) %>',"</ul>","</div>","<% } %>",'<div class="tau-new-entity-form__row">','<button class="tau-btn tau-success" type="submit">Create project</button>','<button class="tau-btn" type="reset">Cancel</button>',"</div>","</div>","</form>","</div>"]};return t.register(e)});
define('tau/components/component.project.formAdd',["tau/components/component.creator","tau/models/project.formAdd/model.project.formAdd.data","tau/models/project.formAdd/model.project.formAdd.add","tau/ui/extensions/project.formAdd/ui.extension.project.formAdd","tau/ui/extensions/project.formAdd/ui.extension.project.formAdd.inviter","tau/components/extensions/error/extension.errorBar","tau/ui/templates/project.formAdd/ui.template.project.formAdd"],function(e,o,t,r,d,n,m){return{create:function(a){var c={extensions:[o,t,r,d,n],template:m};return e.create(c,a)}}});
define('tau/models/model.property.simple',["Underscore","tau/core/model-base"],function(t,e){return e.extend({init:function(e){if(this._super(e),!e.propertyName)throw new Error("Property name was not configured");this.propertyName=e.propertyName,this.placeholderText=t.asString(e.placeholderText),this.listenedEntities={}},getEntityTypeName:function(){return this.config.context.entity.entityType.name},getEntityId:function(){return this.config.context.entity.id},listenOfPropertyChanged:function(){var t=this.config.context.entity.id;this.listenedEntities[t]||(this.listenedEntities[t]=!0,this.attachToChangePropertiesOfCurrentEntity(this.propertyName))},onInit:function(){this.listenOfPropertyChanged(),this.store.get(this.getEntityTypeName(),{id:this.getEntityId(),fields:["id",this.propertyName]}).done({success:this.safeCallback(this.onEntityRetrieved)})},onEntityRetrieved:function(t){var e=this.config?t[0].data[this.propertyName]||this.config.defaultText:"";this.fire("dataBind",{name:this.propertyName,text:e,output:e,placeholderText:this.placeholderText})}})});
define('tau/models/model.property.text',["tau/models/model.property.simple"],function(e){return e.extend({})});
define('tau/models/model.property.text.editable',["tau/core/model.editable.base"],function(e){return e.extend({"bus dataBind":function(){this.bus.fire("permissionsReady",{editable:this.config.editable})}})});
define('tau/models/model.property.text.validation',["tau/core/model-base","tau/utils/utils.jsonSchema"],function(t,e){var a=t.extend({category:"edit",name:"Model text validation",schema:e.Schema.create({type:"string",optional:!1,empty:!1,maxLength:50,minLength:0,pre:["trim"]}),"bus afterRender":function(t){this.$element=t.data.element},"bus validate":function(t){this._getProperty().editableText("resetValidationErrors");var e=t.data,a=e.cmd.$set[this.config.propertyName];e.validation=this.schema.validate(a),e.validation&&1==e.validation.isError()||(e.validation=this.schema.validate(a),e.cmd.$set[this.config.propertyName]=e.validation.instance)},"bus afterValidate":function(t){var e=t.data.validation;this._getProperty().editableText("setValue",e.instance)},"bus validationFailed":function(t){var e=t.data.validation;this._getProperty().editableText("setValidationErrors",e.errors[0].description)},_getProperty:function(){return this.$element.find(".property-text")}});return a});
define('tau/models/model.property.abbreviation.validation',["tau/models/model.property.text.validation","tau/utils/utils.jsonSchema"],function(t,e){var i=t.extend({category:"edit",schema:e.Schema.create({type:"string",optional:!0,empty:!0,maxLength:3,pre:["trim"],post:[function(t){return(t+"").toUpperCase()},function(t){var e=/^[\dа-яa-z]{1,3}$/i;return t.match(e)||new this.Error("Abbr","Should contain letters or digits"),t}]}),"bus beforeInit":function(t,e){e.config.required?(this.schema.empty=!1,this.schema.optional=!1):(this.schema.empty=!0,this.schema.optional=!0)}});return i});
define('tau/components/extensions/property/extension.property.text.editable',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,t,i){return i.extend({category:"edit","bus permissionsReady+afterRender":function(e){var t=this,i=this.permissions=e.permissionsReady.data;if(i.editable){var s=this.config,n=this.$el=e.afterRender.data.element,r=n.hasClass("property-text")?n:n.find(".property-text");t.$widget=r,r.editableText({restoreText:s.restoreText?!0:!1,mask:(s||{}).mask,onSave:function(e){var i={};i[t.config.propertyName]=e;var s={$set:i};s.$include=[t.config.propertyName],t.bus.fire("save",s)}})}},"bus edit":function(){this.permissions.editable&&this.$el.find(".property-text").editableText("activate")}})});
define('tau/components/extensions/property/extension.property.refresher',["Underscore","tau/components/extensions/component.extension.base"],function(e,n){return n.extend({category:"refresher","bus propertyChanged":function(){this.fire("refresh")},"bus avatarChanged":function(){this.fire("refresh")}})});
define('tau/ui/templates/property/ui.template.property.resetable',["tau/core/templates-factory"],function(e){var t={name:"property-resetable",engine:"jqote2",markup:['<% var title = this.target.actionReset.label || "reset"; %>','<% var offsetStyle = this.suppressOffsetCrossbar ? "" : "tau-clear-filter_margin_left";%>','<span class="i-role-reset tau-clear-filter <%! offsetStyle %>" title="<%! title %>"></span>']};return e.register(t)});
define('tau/ui/templates/property/ui.template.property',["tau/core/templates-factory","tau/ui/templates/common/ui.template.entityLink.full","tau/ui/templates/property/ui.template.property.resetable"],function(t){var e={name:"property",engine:"jqote2",markup:["<div>",'<% var className = (this.name ? ("tau-property-" + this.name) : "") + " " + (this.text ? "" : "tau-property_empty_true"); %>','<span class="property tau-property <%= className %>">','<span class="property-text tau-property__value tau-property__value_margin_right" data-placeholder="<%! this.placeholderText %>">',"<% if (this.hasUrl) { %>",'<%= fn.sub("entity-link-full", this) %>',"<% } else { %>","<%! this.text %>","<% } %>","</span>","<% if (this.actionReset && this.actionReset.enable) { %>",'<%= fn.sub("property-resetable", {target: this}) %>',"<% } %>","</span>","<% if (this.subtext) { %>",'<div class="tau-property__subtext"><%! this.subtext %></div>',"<% } %>","</div>"]};return t.register(e)});
define('tau/components/component.property.abbreviation',["Underscore","tau/components/component.creator","tau/models/model.property.text","tau/models/model.property.text.editable","tau/models/model.property.abbreviation.validation","tau/components/extensions/property/extension.property.text.editable","tau/components/extensions/property/extension.property.refresher","tau/ui/templates/property/ui.template.property"],function(e,t,o,r,n,p,a,i){return{create:function(e){e.propertyName="abbreviation";var s={ModelType:o,extensions:[r,n,p,a],template:i};return t.create(s,e)}}});
define('tau/models/model.property',["Underscore","tau/core/model.editable.base"],function(t,e){return e.extend({init:function(t){if(this._super(t),!t.propertyName)throw new Error("PropertyName was not configured");this.propertyName=t.propertyName,this.displayField=t.displayField||"name",this.valueField=t.valueField||"id",this.listenedEntities={}},isPropertyChanged:function(e,i){var n=i.changes,r=i.cmd&&i.cmd.config.$set||{},o=i.cmd&&i.cmd.config.id;return t.any(e,function(t){return n&&n.hasOwnProperty(t)||o&&r.hasOwnProperty(t)})},getEntityTypeName:function(){return this.config.context.entity.entityType.name},getEntityId:function(){return this.config.context.entity.id},buildRequest:function(t){return this.store.get(this.getEntityTypeName(),{id:this.getEntityId(),fields:["id",t]})},getPropertyData:function(t){this.buildRequest(t).done(this.safeCallback(this.onEntityRetrieved))},getPropertyFields:function(){return[this.displayField,this.valueField]},onInit:function(){this._super.apply(this,arguments);var t={};t[this.propertyName]=this.getPropertyFields(),this.listenOfPropertyChanged(),this.getPropertyData(t)},listenOfPropertyChanged:function(){var t=this.config.context.entity.id;this.listenedEntities[t]||(this.listenedEntities[t]=!0,this.attachToChangePropertiesOfCurrentEntity(this.propertyName))},onProcessProperty:function(t){if(!this.config)return null;var e={id:t[this.valueField],name:this.propertyName.toLowerCase(),text:t[this.displayField],isEditable:this.config.editable};return e.actionReset={enable:null!==e.id&&void 0!==e.id&&this.config.allowReset,label:this.config.editorComponentConfig&&this.config.editorComponentConfig.clearValueLabel},this.config.showUrl&&t.id&&(e.hasUrl=!0,e.__type=t.__type,e.id=t.id,e.url=this.config.context.configurator.getUrlBuilder().getNewViewUrl(t.id,t.__type,!0)),e.placeholderText=this.config.placeholderText,e.value=e.text,e},processProperty:function(t){var e=this.onProcessProperty(t);this.fire("dataBind",e)},onEntityRetrieved:function(t){this.config&&(this.property=t[0].data[this.propertyName]||{},this.processProperty(this.property))},entityBelongCurrentContext:function(t){return t.changes.hasOwnProperty(this.config.propertyName)&&t.cmd.config.id==this.config.context.entity.id},onEntityAfterSave:function(t){var e=t.data;this.entityBelongCurrentContext(e)&&this.fire("changed",e)},onEntityBeforeSave:function(t){var e=t.data;this.entityBelongCurrentContext(e)&&this.fire("beforeChanged",e)}})});
define('tau/models/model.property.editable',["Underscore","tau/core/model.editable.base"],function(e,i){return i.extend({isEditable:function(){return 0!=this.config.editable},"bus beforeInit+dataBind":function(){this.fire("permissionsReady",{editable:this.isEditable()})},"bus beforeInit:last + reset.apply":function(i,t){var n=t.config.context.configurator,o=t.config.context.entity,r=t.config.propertyName,s={};s[r]=null;var a=e.bind(this.fire,this),d=t.config.additionalFields||[];n.getStore().save(o.entityType.name,{id:o.id,fields:d,$set:s}).done(function(){a("refresh")})}})});
define('tau/components/extensions/property/extension.property.editable',["Underscore","tau/components/extensions/component.extension.base"],function(e,t){return t.extend({category:"edit","bus permissionsReady+afterRender+dataBind":function(t){var n=this,i=this.element=t.afterRender.data.element;t.afterRender.data.element.find(".external-view").click(function(e){e.stopPropagation()});var o=this.permissions=t.permissionsReady.data;if(o.editable!==!1){i.find(".tau-property").addClass("tau-property_editable_true"),i.addClass("tau-editable");var a=t.dataBind.data;if(a.text&&a.text.length||i.find(".property").addClass("editable"),o.editable){this.config.targetElementSelector=this.config.targetElementSelector||".property-text";var s=this.config.targetElementSelector||"",r=this.config.alignElementSelector||"",d={components:[e.extend({data:a},this.config.editorComponentConfig)],context:n.config.context},l={target:i.is(s)?i:i.find(s),alignTo:i.is(r)?i:i.find(r),componentsConfig:d,applyBubbleClasses:this.config.applyBubbleClasses,onPositionConfig:this.config.onPositionConfig||$.noop,className:this.config.bubbleClassName,onShow:e.bind(function(){this.config.context.configurator.getKeyBoardManager().pushHandler({})},this),onHide:e.bind(function(){this.config.context.configurator.getKeyBoardManager().popHandler()},this)};this.fire("initBubble",l),i.on("click",".i-role-reset",e.bind(function(){return this.fire("reset.apply"),!1},this))}}},"bus edit":function(){this.permissions.editable&&this.fire("toggleBubble")}})});
define('tau/components/component.property',["Underscore","tau/components/component.creator","tau/core/termProcessor","tau/models/model.property","tau/models/model.property.editable","tau/components/extensions/property/extension.property.editable","tau/components/extensions/property/extension.property.refresher","tau/components/extensions/bubble/extension.bubble.creator","tau/components/extensions/component.creator.extension","tau/ui/templates/property/ui.template.property"],function(e,t,o,r,n,s,a,p,c,l){return{create:function(m){var i,u=function(){return i||(i=new o(m.context.getTerms()))},d=m.editorComponentConfig||{};d.resetDisabled=m.resetDisabled,d.showEmptyDataMessage&&(d.emptyDataMessage="No "+u().getTerms(m.propertyName).names.toLowerCase()+" found"),d.showClearValue&&(m.clearValueLabel="reset "+u().getTerms(m.propertyName).name.toLowerCase()),m.placeholderText=m.placeholderText||"click to edit";var x={ModelType:m.Model||r,template:m.template||l,extensions:e.concat([m.extensions,p,c,n,a,s])};return t.create(x,m)}}});
define('tau/models/model.property.assignable',["Underscore","tau/models/model.property"],function(e,t){return t.extend({onInit:function(e){this._super(e),this.store.unbind(this),this.store.on({type:this.getEntityTypeName(),eventName:"beforeSave",listener:this,filter:{id:this.getEntityId()},hasChanges:[this.propertyName]},function(e){this.store.evictProperties(this.getEntityId(),this.getEntityTypeName(),[this.config.refField]),this.fire("beforeChanged",e.data)}.bind(this)),this.store.on({type:this.getEntityTypeName(),eventName:"afterSave",listener:this,filter:{id:this.getEntityId()},hasChanges:[this.propertyName]},function(e){this.fire("propertyChanged",e.data)}.bind(this))},getPropertyData:function(){this.store.get(this.getEntityTypeName(),{id:this.getEntityId(),fields:["id",this.config.refField]},{success:this.safeCallback(this._processRefField)}).done()},_processRefField:function(t){var i=t.data[this.config.refField];return i&&0!==i.length?void this.store.get("assignable",{id:i[0],fields:[this.displayField,this.valueField]},{success:this.safeCallback(e.compose(this.processProperty,e.property("data")))}).done():void this.processProperty({})}})});
define('tau/components/component.property.assignable',["tau/components/component.property","tau/models/model.property.assignable"],function(e,t){return{create:function(n){return n.propertyName="assignable",n.refField="$ref:assignable[id]",n.showUrl=!0,n.Model=t,n.alignElementSelector=".property-text",n.showEmptyDataMessage=!0,n.editorComponentConfig={type:"finder.entity",propertyName:"assignable"},n.onPositionConfig=function(e){return e.collision="flipfit flipfit",e.at="left middle",e.my="right middle",e},n.allowReset=!0,e.create(n)}}});
define('tau/models/model.property.bool',["tau/core/model-base"],function(t){return t.extend({init:function(t){if(this._super.apply(this,arguments),!t.propertyName)throw"PropertyName was not configured";this.propertyName=t.propertyName},getEntityTypeName:function(){return this.config.context.entity.entityType.name},getEntityId:function(){return this.config.context.entity.id},onInit:function(){this.store.unbind(this),this.attachToChangePropertiesOfCurrentEntity(this.propertyName),this.store.get(this.getEntityTypeName(),{id:this.getEntityId(),fields:["id",this.propertyName]}).done({success:this.onEntityRetrieved,scope:this})},onEntityRetrieved:function(t){if(this.config){var e=t[0].data,i={value:e[this.propertyName]},n=this.config.label;n&&(i.label=n),this.fire("dataBind",i)}}})});
define('tau/components/extensions/property/extension.property.bool.editable',["Underscore","tau/components/extensions/component.extension.base","tau/ui/behaviour/checkbox/ui.behaviour.checkboxToggle"],function(e,i){return i.extend({category:"edit","bus permissionsReady+afterRender+dataBind":function(e){{var i=this,n=this.element=e.afterRender.data.element,t=this.permissions=e.permissionsReady.data;e.dataBind.data}if(t.editable){var o=n.find(".property .ui-checkbox");o.checkboxToggle({classNames:{checked:"checked",unchecked:"unchecked"},onSave:function(e){i.fire("elementUpdated");var n={};n[i.config.propertyName]=e,i.fire("save",n)}})}},"bus edit":function(){this.permissions.editable&&this.element.find(".property .ui-checkbox").checkboxToggle("toggle")}})});
define('tau/ui/templates/property/ui.template.property.bool',["tau/core/templates-factory"],function(e){var a={name:"property-bool",markup:["<div>",'<span class="property"><div class="ui-checkbox {{if value}}checked{{/if}}{{if !value}}unchecked{{/if}}">&nbsp;</div></span>','{{if label}}<span class="tau-label">${label}</span>{{/if}}',"</div>"].join("")};return e.register(a)});
define('tau/components/component.property.bool',["Underscore","tau/components/component.creator","tau/models/model.property.bool","tau/models/model.property.editable","tau/components/extensions/property/extension.property.refresher","tau/components/extensions/property/extension.property.bool.editable","tau/ui/templates/property/ui.template.property.bool"],function(e,t,o,r,n,p,a){return{create:function(s){var l=e.concat([s.extensions,n]);s.editable===!0&&(l=e.concat([l,p,r]));var c={ModelType:o,template:s.template||a,extensions:l};return t.create(c,s)}}});
define('tau/components/component.property.build',["tau/components/component.property"],function(e){return{create:function(t){return t.propertyName="build",t.showUrl=!0,t.alignElementSelector=".property-text",t.showEmptyDataMessage=!0,t.allowReset=!0,t.editorComponentConfig={type:"finder.entity",propertyName:"build"},t.onPositionConfig=function(e){return e.collision="flipfit flipfit",e.at="left middle",e.my="right middle",e},e.create(t)}}});
define('tau/components/extensions/property/extension.property.build.refresher',["Underscore","tau/core/model-base"],function(e,t){return t.extend({category:"refresher","bus afterInit":function(){var e=this.store,t=this.config.context.entity,r=this;this.store.unbind(this),e.on({eventName:"afterSave",type:"testplanrun",listener:this,filter:{id:t.id}},function(e){var t=e.data.changes;(t.hasOwnProperty("release")||t.hasOwnProperty("iteration"))&&r.bus.fire("refresh")})}})});
define('tau/models/finder.entity/model.finder.entity.data.build.testPlanRun',["Underscore","tau/models/finder.entity/model.finder.entity.data"],function(e,t){return t.extend({buildInitialParameters:function(t,i){var r=$.Deferred(),n=t.context.entity,d=e.bind(this._super,this);return i.getStore().get("testPlanRun",{id:n.id,fields:["id",{project:["id",{process:["id",{practices:["id","name"]}]}]},{release:["id"]},{iteration:["id"]}]}).done({success:e.bind(function(n){var s=n[0].data||{};e.defaults(s.project,{process:{practices:[]}});var a=s.project.process.practices,o=e.any(a,function(e){return"iterations"==e.name.toLowerCase()}),c=[];s.project&&c.push("project.id == "+s.project.id),s.release&&c.push("release.id == "+s.release.id),s.iteration&&1==o&&c.push("iteration.id == "+s.iteration.id),c="("+c.join(" and ")+")",t.filter.init_dsl=t.filter.init_dsl?t.filter.init_dsl+" and "+c:c,d(t,i).then(function(e){r.resolve(e)})},this)}),r}})});
define('tau/components/component.property.build.testPlanRun',["tau/components/component.property","tau/components/extensions/property/extension.property.build.refresher","tau/models/finder.entity/model.finder.entity.data.build.testPlanRun"],function(e,t,n){return{create:function(o){return o.propertyName="build",o.showUrl=!0,o.alignElementSelector=".property-text",o.showEmptyDataMessage=!0,o.extensions=[t],o.allowReset=!0,o.editorComponentConfig={type:"finder.entity",propertyName:"build",model:n},e.create(o)}}});
define('tau/models/model.property.date',["tau/models/model.property.simple","tau/utils/utils.date"],function(t,e){return t.extend({onEntityRetrieved:function(t){if(this.config){var i=this.config.format?this.config.format:"date",o=t[0].data;this.property=o[this.propertyName];var a=e.convertToTimezone(this.property),n=e.format[i].short(a),r={text:n,actionReset:{enable:this.config.allowReset}};this.fire("extendData",{dataToBind:r,entity:o,date:a}),this.fire("dataBind",r)}}})});
define('tau/models/model.property.date.validation',["Underscore","tau/core/model-base","tau/utils/utils.jsonSchema","tau/utils/utils.date"],function(t,e,a,r){var i=e.extend({category:"edit",name:"Model date validation","bus afterInit":function(){this.schema=a.Schema.create({type:"string",optional:this.config.allowReset,empty:this.config.allowReset,pre:function(e){return this.optional&&this.empty?t.isUndefined(e)?null:null!==e&&""===e?null:e:e},post:function(t){if(0==this.wasError()){var e=r.parse(t),a=r.parse(this.schema.additionalProperties.max),i=r.parse(this.schema.additionalProperties.min);null==e?new this.Error("Date","Incorrect date format"):e<new Date(1900,0,1)?new this.Error("Date","Date must be greater than 1-Jan-1900"):a&&e>a?new this.Error("Date","Date must be less than "+r.format.date.short(a)):i&&i>e?new this.Error("Date","Date must be greater than "+r.format.date.short(a)):t=r.formatAs(e,this.schema.additionalProperties.dateFormat)}return t},additionalProperties:{dateFormat:r.getFormatData().date.short,max:null,min:null}}),"datetime"==this.config.format&&(this.schema.additionalProperties.dateFormat=r.getFormatData().datetime.short)},"bus afterRender":function(t){this.element=t.data.element},"bus validateDate":function(t){var e=this.schema.validate(t.data.value);t.data.value=e.instance},"bus validate":function(t){this._getProperty().dateEditor("resetValidationErrors");var e=t.data,a=e.cmd.$set[this.config.propertyName];e.validation&&1==e.validation.isError()||(e.validation=this.schema.validate(a),e.cmd.$set[this.config.propertyName]=e.validation.instance)},"bus resetValidationErrors":function(){this._getProperty().dateEditor("resetValidationErrors")},"bus afterValidate":function(t){var e=t.data.validation;this._getProperty().dateEditor("setValue",e.instance)},"bus validationFailed":function(t){var e=t.data.validation;this._getProperty().dateEditor("setValidationErrors",e.errors[0].description)},_getProperty:function(){return this.element.find(".property")}});return i});
define('tau/models/model.property.date.editable',["tau/models/model.property.editable","tau/utils/utils.date"],function(t,e){return t.extend({isEditable:function(){return this.config.editable},"bus afterValidate":function(t){var a=t.data.cmd.$set[this.config.propertyName];a&&(a=e.parse(a),a=e.format.datetime.short(a),t.data.cmd.$set[this.config.propertyName]=a)}})});
define('tau/components/extensions/property/extension.property.date.editable',["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/utils/utils.date","tau/ui/behaviour/date/ui.behaviour.dateEditor"],function(t,e,i,a){return i.extend({category:"edit",init:function(){this._super.apply(this,arguments),this.onClickProxy=e.proxy(this.onClickHandler,this)},"bus permissionsReady + afterRender + dataBind":function(i){var n=this;if(this.element=i.afterRender.data.element,this.permissions=i.permissionsReady.data,this.date=i.dataBind.data,this.permissions.editable){this.element.bind("click",this.onClickProxy),this.$widget=this.element.find(".property"),e.datepicker.parseDate=function(t,e){return a.parse(e)},e.datepicker.formatDate=function(t,e){return a.formatAs(e,t)};var r="datetime"==this.config.format?"datetimepicker":"datepicker";this.$widget.dateEditor({delayedSave:t.has(this.config,"delayedDateSave")?this.config.delayedDateSave:!0,keyboardManager:this.config.context.configurator.getKeyBoardManager(),dateFormat:a.getFormatData().date.short,widgetName:r,beforeChange:function(t){n.fire("validateDate",t)},onSave:function(t){if(n.trimString(t)==n.trimString(n.date.text))n.fire("resetValidationErrors");else{var e=n.config.propertyName,i={};i[e]=t;var a={$set:i,$include:[e]};n.bus.fire("save",a)}}})}},trimString:function(e){return t.trim(e||"")},showEditor:function(){this.$widget.dateEditor("activate"),this.$widget.focus()},"bus edit":function(){this.permissions.editable&&this.showEditor()},onClickHandler:function(){this.showEditor()},removeHandlers:function(){this.element&&this.element.unbind("click",this.onClickProxy)},removeWidget:function(){this.$widget&&this.$widget.data("ui-dateEditor")&&this.$widget.dateEditor("destroy")},destroy:function(){this.removeHandlers(),this.removeWidget(),this._super.apply(this,arguments)}})});
define('tau/components/extensions/property/extension.property.resetable',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,n,t){return t.extend({"bus permissionsReady + afterRender + dataBind":function(n){var t=n.permissionsReady.data;if(t.editable){var i=n.afterRender.data.element;i.on("click",".i-role-reset",e.bind(function(){return this.fire("reset.apply"),!1},this))}}})});
define('tau/ui/templates/property/ui.template.property.date',["tau/core/templates-factory","tau/ui/templates/property/ui.template.property.resetable"],function(e){var t={name:"property-date",engine:"jqote2",markup:["<div>",'<div class="property" style="display:inline">','<span class="property-text"><%!this.text%></span>',"</div>","<% if (this.actionReset && this.actionReset.enable && this.text && this.text.length !== 0) { %>",'<%= fn.sub("property-resetable", {target: this, suppressOffsetCrossbar: true}) %>',"<% } %>","</div>"]};return e.register(t)});
define('tau/components/component.property.date',["Underscore","tau/components/component.creator","tau/models/model.property.date","tau/models/model.property.date.validation","tau/models/model.property.date.editable","tau/components/extensions/property/extension.property.date.editable","tau/components/extensions/property/extension.property.resetable","tau/components/extensions/property/extension.property.refresher","tau/ui/templates/property/ui.template.property.date"],function(e,t,o,n,r,a,p,s,i){return{create:function(d){d=e.extend(e.clone(d)),d.validationExtension=d.validationExtension||n;var l={ModelType:o,template:d.template||i,extensions:e.concat([d.extensions,s,r,a,p,d.validationExtension])};return t.create(l,d)}}});
define('tau/components/component.property.buildDate',["tau/components/component.property.date"],function(e){return{create:function(t){return t=t||{},t.propertyName="buildDate",t.format="datetime",e.create(t)}}});
define('tau/models/property.simple/model.property.simple',["tau/core/model-base"],function(t){return t.extend({"bus beforeInit":function(t,e){var n=e.config.context.configurator,i=e.config.context.entity,o=e.config.editorComponentConfig.name;this.attachToChangePropertiesOfCurrentEntity(o);var a=this;n.getStore().get(i.entityType.name,{id:i.id,fields:[o]}).done({success:function(t){var e=t[0].data;a.fire("dataBind",{name:o,value:e[o],output:e[o]})}})}})});
define('tau/ui/templates/property/ui.template.property.color',[],function(){return{name:"property.color",engine:"jqote2",markup:["<div>",'<span class="property tau-property tau-property-<%! this.name %> <% if (!this.value) { %> tau-property_empty_true<% } %>">','<span class="property-text tau-property__value i-role-output" data-placeholder="<%! this.placeholderText || "click to edit" %>">',"<% if (this.value) { %>",'<i class="tau-icon tau-icon_type_color" style="background-color: <%= this.value %>;"></i>',"<% } %>","</span>","</span>","</div>"]}});
define('tau/components/component.property.color',["tau/components/component.creator","tau/models/property.simple/model.property.simple","tau/models/model.property.editable","tau/components/extensions/property/extension.property.editable","tau/components/extensions/property/extension.property.refresher","tau/components/extensions/bubble/extension.bubble.creator","tau/components/extensions/component.creator.extension","tau/ui/templates/property/ui.template.property.color"],function(e,t,o,n,a,r,s,l){return{create:function(i){i=i||{},i.editable=!0,i.bubbleClassName="tau-bubble-color",i.editorComponentConfig={type:"choice",listType:"static",name:"color",showClearValue:!0,clearValueLabel:"reset",showReset:!1,values:[{id:null,name:'<i  class="tau-icon tau-i-close"></i>',asHtml:!0}].concat(_.map(i.values,function(e){return{id:e,name:e?'<i class="tau-icon tau-icon_type_color" style="background-color:'+e+';"></i>':"",asHtml:!0}})||[])};var c={extensions:[t,o,n,a,r,s].concat(i.extensions||[]),template:l};return e.create(c,i)}}});
define('tau/components/component.property.company',["tau/components/component.property"],function(e){return{create:function(t){return t.propertyName="company",t.showUrl=!1,t.alignElementSelector=".property-text",t.editorComponentConfig={type:"choice",listType:"company",maxHeight:200,filter:!1,expandable:!1,showEmptyDataMessage:!1,clearValueLabel:"no company",defaultValueLabel:"current",fullModeLabel:"show old",emptyDataMessage:"No company found",showReset:!0},t.allowReset=!0,e.create(t)}}});
define('tau/components/component.property.completeDate',["tau/components/component.property.date"],function(e){return{create:function(n){return n=_.clone(n||{}),n.propertyName="endDate",e.create(n)}}});
define('tau/components/component.property.createDate',["tau/components/component.property.date"],function(e){return{create:function(t){return t=t||{},t.propertyName="createDate",e.create(t)}}});
define('tau/models/model.property.effort',["tau/core/model-base"],function(e){var t=e.extend({onInit:function(){var e=this,t=e.config.context,n=t.entity.entityType.name,o=t.entity.id;e.store.unbind(e),e.store.on(e.getSubscriptionConfig("afterSave"),_.bind(e.onEntityAfterSave,e)),e.store.on(e.getSubscriptionConfig("beforeSave"),_.bind(e.onEntityBeforeSave,e)),e.store.get(n,{id:o,fields:["id","effort",{roleEfforts:["id",{role:["id","hasEffort"]}]}]}).done({scope:e,success:e.done})},done:function(e){var t=this,n=e[0].data,o=t.config.context,i=o.entity.entityType.name,r={id:n.id,effort:Math.round(100*n.effort)/100,unit:o.getEffortPoint(i),roleEfforts:n.roleEfforts};t.fire("dataBind",r)},getSubscriptionConfig:function(e){var t=this,n=t.config.context.entity;return{eventName:e,type:"roleEffort",listener:t,filter:{assignable:{id:n.id}},hasChanges:["effort"]}},onEntityAfterSave:function(){this.fire("propertyChanged")},onEntityBeforeSave:function(){this.fire("beforeChangeProperty")}});return t});
define('tau/models/model.property.effort.editable',["tau/core/model.editable.base","Underscore"],function(e){var i=e.extend({name:"Effort Editable","bus beforeInit+dataBind":function(){var e={editable:!0};this.fire("permissionsReady",e)}});return i});
define('tau/ui/templates/assignmentsList/ui.template.assignments.effortsOnly.effortsList',["tau/core/templates-factory"],function(e){var t={name:"ui.template.assignments.effortsOnly.effortsList",markup:["{{if roleEffort}}",'<tr class="tau-row group" roleId="${role.id}">',"   <td><span>${role.name}</span></td>",'   <td class="tau-cell-role-effort-value role-effort"><div class="effort">${roleEffort.effort}<span class="point">${$item.effortPoints}</span></div></td>',"</tr>","{{/if}}"].join(""),dependencies:[]};return e.register(t)});
define('tau/ui/templates/assignmentsList/ui.template.assignments.effortsOnly',["tau/core/templates-factory","tau/ui/templates/assignmentsList/ui.template.assignments.effortsOnly.effortsList"],function(t){var e={name:"ui.template.assignments.effortsOnly",markup:['<table class="assignments-table-readonly tau-assignments-effort-only">','   <tr class="tau-header-row tau-row-delimiter">','       <td class="tau-header-cell-title"></td>','       <td class="tau-header-cell-value">Effort</td>',"    </tr>",'   {{tmpl(assignments.groups, {effortPoints: effortPoints}) "ui.template.assignments.effortsOnly.effortsList"}}',"{{if tasksEffort}}",'   <tr class="tau-footer-row tau-row-delimiter">',"       <td>Tasks</td>","       <td>${tasksEffort.effort} h</td>","   </tr>","{{/if}}",'   <tr class="tau-footer-row tau-footer-row-total">',"       <td>Total</td>","       <td><span>${totalEffort.effort} ${effortPoints}</span></td>","   </tr>","</table>"].join(""),dependencies:["ui.template.assignments.effortsOnly.effortsList"]};return t.register(e)});
define('tau/ui/extensions/effort/extension.effort.editable',["tau/components/extensions/component.extension.base","tau/ui/templates/assignmentsList/ui.template.assignments.effortsOnly","tau/ui/behaviour/common/ui.behaviour.editableText"],function(e,t){return e.extend({category:"edit",normalizeEffort:function(e){return Math.abs(Math.round(100*parseFloat(e))/100)||0},"bus afterRender+beforeChangeProperty":function(e){var t=e.afterRender.data.element;this.fire("markElementToBeUpdated",{element:t})},"bus propertyChanged":function(){this.fire("refresh")},"bus refresh+afterRender":function(e){var t=e.afterRender.data.element;this.fire("updateElement",{element:t})},hasEffortIterator:function(e){return e.role.hasEffort},"bus permissionsReady+dataBind+afterRender":function(e){var n=this,r=e.permissionsReady.data,a=e.dataBind.data;if(r.editable){var i=_(a.roleEfforts).chain().select(n.hasEffortIterator).size().value();r.editMode="disabled",i&&(r.editMode=1===i&&0==n.config.entitiesCount?"inline":"roleEfforts");var o=e.afterRender.data.element,f=o.find(".entity-effort");if("inline"===r.editMode)f.editableText({mask:/^\d*\.?\d*$/,restoreText:!0,onSave:function(e){var t=n.normalizeEffort(e),r=_(a.roleEfforts).detect(n.hasEffortIterator),i={typeName:"roleEffort",id:r.id,$set:{effort:t}};n.bus.fire("save",i)},onEditStart:function(){n._$additionalInfo=f.find(".entity-effort-info").detach()},onEditEnd:function(){n._$additionalInfo.appendTo(f)}});else if("roleEfforts"===r.editMode){var s={components:[{type:"assignmentsList",template:t}],context:n.config.context},d={target:f,componentsConfig:s};n.fire("initBubble",d)}}}})});
define('tau/ui/templates/property.effort/ui.template.property.effort',["tau/core/templates-factory","tau/ui/templates/property.effort/ui.template.property.effort.content"],function(t){var e={name:"ui.template.property.effort",markup:['<div class="tau-property">{{tmpl($item.data) "ui.template.property.effort.content"}}</div>'],dependencies:["ui.template.property.effort.content"]};return t.register(e)});
define('tau/components/component.property.effort',["tau/components/component.creator","tau/models/model.property.effort","tau/models/model.property.effort.editable","tau/components/extensions/bubble/extension.bubble.creator","tau/components/extensions/component.creator.extension","tau/ui/extensions/effort/extension.effort.editable","tau/ui/extensions/ui.extension.tooltip","tau/ui/templates/property.effort/ui.template.property.effort"],function(e,t,o,n,r,i,s,a){return{create:function(u){var p={extensions:[t,o,i,n,r,s],template:a};return e.create(p,u)}}});
define('tau/models/model.property.email.validation',["tau/models/model.property.text.validation","tau/utils/utils.jsonSchema"],function(a,e){var t=a.extend({category:"edit",schema:e.Schema.create({type:"string",optional:!0,empty:!0,pre:["trim"],post:[function(a){var e=/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/;return a.match(e)||new this.Error("Email","Provide a valid email address"),a}]})});return t});
define('tau/components/component.property.email',["Underscore","tau/components/component.creator","tau/models/model.property.text","tau/models/model.property.text.editable","tau/models/model.property.email.validation","tau/components/extensions/property/extension.property.text.editable","tau/components/extensions/property/extension.property.refresher","tau/ui/templates/property/ui.template.property"],function(e,t,o,r,p,n,a,s){return{create:function(e){e.propertyName="mailReplyAddress";var i={ModelType:o,extensions:[r,p,n,a],template:s};return t.create(i,e)}}});
define('tau/ui/templates/property/ui.template.property.endDate.list',["tau/core/templates-factory"],function(t){var e={name:"property-endDate-list",markup:['<span><span class="tau-extension-tooltip" title="Completion date: ${text}">',"${text}","</span>","</span>"].join("")};return t.register(e)});
define('tau/components/component.property.endDate.list',["tau/components/component.property.date","tau/ui/extensions/ui.extension.tooltip","tau/ui/templates/property/ui.template.property.endDate.list"],function(e,t,n){return{create:function(o){return o=o||{},o.propertyName="endDate",o.template=n,o.extensions=[t],e.create(o)}}});
define('tau/models/model.property.date.validation.project',["Underscore","tau/core/model-base","tau/utils/utils.jsonSchema","tau/utils/utils.date"],function(t,e,a,i){var r=e.extend({category:"edit",name:"Model date validation","bus afterInit":function(){this.schema=a.Schema.create({type:"string",optional:!0,empty:!0,pre:["trim"],post:function(t){if(this.wasError())return t;var e=function(t,e){return new this.Error(t,e)}.bind(this),a=i.parse(t),r=i.parse(this.schema.additionalProperties.max),n=i.parse(this.schema.additionalProperties.min);return null==a?e("Date","Incorrect date format"):a<new Date(1900,0,1)?e("Date","Date must be greater than 1-Jan-1900"):r&&a>r?e("Date","Start Date should be earlier than End Date"):n&&n>a?e("Date","End Date should be later than Start Date"):t=i.format.date.short(a),t},additionalProperties:{dateFormat:i.getFormatData().date.short,max:null,min:null}});var t=this.config.context.entity;this.store.get("project",{id:t.id,fields:["startDate","endDate"]}).done({success:this.safeCallback(this._processDateFromStore)}),"startDate"==this.config.propertyName?this.store.on({eventName:"afterSave",type:"project",listener:this,filter:{id:t.id},hasChanges:["endDate"]},function(t){this._setMaxDate(t.data.changes.endDate)}.bind(this)):"endDate"==this.config.propertyName&&this.store.on({eventName:"afterSave",type:"project",listener:this,filter:{id:t.id},hasChanges:["startDate"]},function(t){this._setMinDate(t.data.changes.startDate)}.bind(this))},_processDateFromStore:function(t){var e=t[0].data;"startDate"==this.config.propertyName?this._setMaxDate(e.endDate):"endDate"==this.config.propertyName&&this._setMinDate(e.startDate)},_setMinDate:function(t){this._setDateRestriction("min",t)},_setMaxDate:function(t){this._setDateRestriction("max",t)},_setDateRestriction:function(t,e){this.schema.additionalProperties[t]=i.parse(e)},"bus afterRender":function(t){this.element=t.data.element},"bus validateDate":function(t){var e=this.schema.validate(t.data.value||"");t.data.value=e.instance},"bus validate":function(t){var e=this.element.find(".property");e.dateEditor("resetValidationErrors");var a=t.data;if(!a.validation||!a.validation.isError()){var i=a.cmd.$set[this.config.propertyName];a.validation=this.schema.validate(i),a.cmd.$set[this.config.propertyName]=a.validation.instance||null}},"bus resetValidationErrors":function(){this._getProperty().dateEditor("resetValidationErrors")},"bus afterValidate":function(t){var e=t.data.validation;this._getProperty().dateEditor("setValue",e.instance)},"bus validationFailed":function(t){var e=t.data.validation;this._getProperty().dateEditor("setValidationErrors",e.errors[0].description)},_getProperty:function(){return this.element.find(".property")}});return r});
define('tau/components/component.property.endDate.project',["tau/components/component.property.date","tau/models/model.property.date.validation.project"],function(e,t){return{create:function(n){return n=n||{},n.propertyName="endDate",n.validationExtension=t,e.create(n)}}});
define('tau/components/component.property.endDate.projectMember',["tau/components/component.property.date"],function(e){return{create:function(t){return t=t||{},t.editable=!0,t.allowReset=!0,t.propertyName="membershipEndDate",e.create(t)}}});
define('tau/models/model.property.entityState',["tau/core/model-base","Underscore"],function(e,t){var n=function(e){this.model=e};n.prototype={done:function(e){var t=e[0].data.entityState;this.model.fire("dataBind",t)}};var i=e.extend({onInit:function(){var e=this,i=new n(this),a=this.config.context,s=a.entity.entityType.name,o=a.entity.id,r=[{entityState:["id","name","isFinal","isCommentRequired",{nextStates:["id"]}]}];if(!e.config.disableSubscriptions){var d=function(n){var i=n.data.changes,a=n.data.cmd.config.fields;n.data.cmd.config.fields=t.union(a,r),e.fire("beforeChanges",i),e.fire("beforeChangeProperty")},c=function(t){e.fire("applyChanges",t.data.changes),e.fire("propertyChanged")};e.store.unbind(e),e.store.on({eventName:"beforeSave",type:s,hasChanges:["entityState"],listener:this},d),e.store.on({eventName:"afterSave",type:s,hasChanges:["entityState"],listener:this},c)}e.store.get(s,{id:o,fields:r},{success:i.setEntity,scope:i}).done({success:i.done,scope:i})}});return i});
define('tau/models/model.property.entityState.editable',["tau/core/model.editable.base"],function(e){return e.extend({name:"Entity state editable","bus dataBind":function(){this.fire("permissionsReady",{editable:!0})}})});
define('tau/components/extensions/entityState/extension.entityState.editable',["tau/components/extensions/component.extension.base"],function(e){return e.extend({category:"edit","bus prepareChanges":function(){this.bus.fire("markElementToBeUpdated",{element:this.element})},"bus applyChanges":function(){var e=this;this.bus.on("afterRender",function(t){t.removeListener(),e.bus.fire("updateElement",{element:e.element})}),this.bus.fire("refresh")},"bus ownerChanged":function(){this.fire("refresh")},"bus beforeChangeOwner":function(){this.fire("markElementToBeUpdated",{element:this.element})},"bus permissionsReady+afterRender+dataBind":function(e){var t=this,n=this.element=e.afterRender.data.element,i=e.permissionsReady.data,s=e.dataBind.data;if(s.nextStates.length>0&&i.editable){var a={components:[{type:"choice.entityState",data:s}],context:t.config.context},r={target:n,componentsConfig:a,alignTo:n.find(".attr-name")};this.fire("initBubble",r)}this.bus.on("edit",function(){this.fire("toggleBubble")},this)}})});
define('tau/components/component.property.entityState',["tau/components/component.creator","tau/models/model.property.entityState","tau/models/model.property.entityState.editable","tau/components/extensions/bubble/extension.bubble.creator","tau/components/extensions/property/extension.property.refresher","tau/components/extensions/component.creator.extension","tau/ui/templates/common/ui.template.attributeValue","tau/components/extensions/entityState/extension.entityState.editable"],function(e,t,n,o,a,r,s,i){return{create:function(p){var u={ModelType:t,template:s,extensions:[n,o,a,r,i]};return e.create(u,p)}}});
define('tau/components/extensions/property/extension.property.password.editable',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,r,s){return s.extend({category:"edit",init:function(){this._super.apply(this,arguments),this.onBlurProxy=e.bind(this.onBlur,this),this.onKeyDownProxy=e.bind(this.onKeyDown,this)},findPasswordElements:function(e){return e.find(".tau-password,.tau-password-verify")},"bus permissionsReady+afterRender":function(e){if(e.permissionsReady.data.editable){var r=e.afterRender.data.element;this.findPasswordElements(r).blur(this.onBlurProxy),r.find(".tau-password,tau-password-verify").keydown(this.onBlurProxy)}},"bus view.password.ready:last+view.password.confirmation.ready:last":function(e){var r=e["view.password.ready"].data,s=e["view.password.confirmation.ready"].data,t=r.length>0;if(t&&r===s){var a={};a[this.config.propertyName]=r,this.fire("save",a)}},"bus after_save":function(){this.fire("view.clear.passwords")},"bus afterRender:last+view.clear.passwords":function(e){this.findPasswordElements(r(e.afterRender.data.element)).val("")},getEventNameFromTarget:function(e){var s=r(e).hasClass("tau-password-verify");return s?"view.password.confirmation.ready":"view.password.ready"},firePasswordReadyEventDependOnTarget:function(e){var s=r(e).val();this.fire(this.getEventNameFromTarget(e),s)},onBlur:function(e){var r=e.target;this.firePasswordReadyEventDependOnTarget(r)},onKeyDown:function(e){var r=e.target;13==e.keyCode&&this.firePasswordReadyEventDependOnTarget(r)}})});
define('tau/ui/templates/property/ui.template.property.password',["tau/core/templates-factory","tau/ui/templates/common/ui.template.entityLink.full"],function(t){var a={name:"property.password",markup:["<div>",'<span class="property tau-property{{if name}} tau-property-${name}{{/if}}{{if !text}} tau-property_empty_true{{/if}}">',"<div>",'<span class="">Password</span>&nbsp;','{{if (passwordHint)}}<span class="">${passwordHint}</span>{{/if}}','<div class="tau-property__value"><input type="password" value="${text}" class="tau-password tau-in-text"/></div>',"</div>","<div>",'<span class="">Confirm Password</span>','<div class="tau-property__value"><input type="password" value="${text}" class="tau-password-verify tau-in-text"/></div>',"</div>","</span>","</div>"].join(""),dependencies:["entity-link-full"]};return t.register(a)});
define('tau/components/component.property.text',["Underscore","tau/components/component.creator","tau/models/model.property.text","tau/models/model.property.text.editable","tau/models/model.property.text.validation","tau/components/extensions/property/extension.property.text.editable","tau/components/extensions/property/extension.property.password.editable","tau/components/extensions/property/extension.property.refresher","tau/ui/templates/property/ui.template.property","tau/ui/templates/property/ui.template.property.password"],function(e,t,o,r,p,n,s,a,i,d){return{create:function(l){var m="password"===l.editorType,u=m?d:i,y=m?s:n,c={ModelType:o,extensions:e.concat([l.extensions,r,p,y,a]),template:l.template||u};return t.create(c,l)}}});
define('tau/components/component.property.failureComment',["Underscore","tau/components/component.property.text"],function(e,t){return{create:function(n){return n=e.clone(n||{}),n.propertyName="comment",n.defaultText="N/A",t.create(n)}}});
define('tau/components/component.property.feature',["tau/components/component.property"],function(e){return{create:function(t){return t.propertyName="feature",t.showUrl=!0,t.alignElementSelector=".property-text",t.showEmptyDataMessage=!0,t.editorComponentConfig={type:"finder.entity",propertyName:"feature"},t.allowReset=!t.resetDisabled,t.onPositionConfig=function(e){return e.collision="flipfit flipfit",e.at="left middle",e.my="right middle",e},e.create(t)}}});
define('tau/ui/templates/property/ui.template.property.icon',[],function(){return{name:"property.icon",engine:"jqote2",markup:["<div>",'<span class="property tau-property tau-property-<%! this.name %> <% if (!this.value) { %> tau-property_empty_true<% } %>">','<span class="property-text tau-property__value i-role-output" data-placeholder="<%! this.placeholderText || "click to edit" %>">','<% if (this.value) { %><i class="tau-icon tau-icon_type_svg tau-icon_name_<%= this.value %>"></i><% } %>',"</span>","</span>","</div>"]}});
define('tau/components/component.property.icon',["tau/components/component.creator","tau/models/property.simple/model.property.simple","tau/models/model.property.editable","tau/components/extensions/property/extension.property.editable","tau/components/extensions/property/extension.property.refresher","tau/components/extensions/bubble/extension.bubble.creator","tau/components/extensions/component.creator.extension","tau/ui/templates/property/ui.template.property.icon"],function(e,t,n,o,a,s,i,r){return{create:function(p){p=p||{},p.editable=!0,p.bubbleClassName="tau-bubble-icon",p.editorComponentConfig={type:"choice",listType:"static",name:"icon",showClearValue:!0,clearValueLabel:"reset",showReset:!1,values:[{id:null,name:'<i class="tau-icon tau-i-close"></i>',asHtml:!0}].concat(_.map(p.values,function(e){return{id:e,name:'<i class="tau-icon tau-icon_type_svg tau-icon_name_'+e+'"></i>',asHtml:!0}})||[])};var c={extensions:[t,n,o,a,s,i].concat(p.extensions||[]),template:r};return e.create(c,p)}}});
define('tau/components/extensions/impedimentDate/extensions.model.impedimentDate.daysPassedCalculator',["Underscore","tau/components/extensions/component.extension.base"],function(e,t){function n(e,t){var n=e.getTime(),o=t.getTime(),r=Math.abs(n-o);return Math.round(r/a)}var a=864e5,o=t.extend({"bus extendData":function(e){var t=e.data.dataToBind||{},a=e.data.date;t.daysPassed=a?n(this.config.context.configurator.getCurrentDate(),a):null}});return o});
define('tau/components/extensions/impedimentDate/extension.ui.impedimentDate.daysPassed',["jQuery","tau/components/extensions/component.extension.base"],function(a,e){return e.extend({extractDataFromEvent:function(a,e){return(a[e]||{}).data||{}},"bus afterRender+dataBind":function(e){var n=this.extractDataFromEvent(e,"dataBind"),t=a(this.extractDataFromEvent(e,"afterRender").element),s=a(['<span class="ui-days-passed">(<span class="days-count">',n.daysPassed,"</span> days passed)</span>"].join(""));t.find(".property").parent().append(s)}})});
define('tau/components/component.property.impedimentDate',["Underscore","tau/components/component.property.createDate","tau/components/extensions/impedimentDate/extensions.model.impedimentDate.daysPassedCalculator","tau/components/extensions/impedimentDate/extension.ui.impedimentDate.daysPassed"],function(e,n,t,o){return{create:function(s){return s=s||{},s.extensions=e.concat([s.extensions,t,o]),n.create(s)}}});
define('tau/models/model.property.time',["tau/models/model.property.simple"],function(t){return t.extend({floatToString:function(t){return t.toFixed(2).replace(".00","")},_getEffortPoints:function(){return this.config.context.getEffortPoint().shortName},onEntityRetrieved:function(t){var e=t[0].data[this.propertyName];e||(e=0);var n={text:this.floatToString(e),point:this._getEffortPoints()};this.fire("dataBind",n)}})});
define('tau/models/model.property.time.editable',["tau/core/model.editable.base"],function(e){return e.extend({"bus dataBind":function(){this.bus.fire("permissionsReady",{editable:!0})}})});
define('tau/components/extensions/property/extension.property.time.editable',["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/behaviour/date/ui.behaviour.dateEditor"],function(e,t,i){return i.extend({category:"edit",normalizeEffort:function(e){return Math.abs(Math.round(100*parseFloat(e))/100)||0},"bus permissionsReady+afterRender+dataBind":function(e){var t=this,i=this.permissions=e.permissionsReady.data;i.editable&&(t.$el=e.afterRender.data.element,t.$el.find(".property-text").editableText({mask:/^\d*\.?\d*$/,restoreText:!0,onSave:function(i){var n=e.dataBind.data,a=t.normalizeEffort(n.text),o=t.normalizeEffort(i);if(a===o)return this.restoreInitialText(),!1;var r={};r[t.config.propertyName]=o;var s={$include:["id"],id:t.config.context.entity.id,$set:r};t.bus.fire("save",s)},onEditStart:function(){this.$element.data("points",this.$element.find("span").detach())},onEditEnd:function(){this.$element.append(this.$element.data("points"))}}))},showEditor:function(){this.$el.find(".property-text").editableText("activate")},"bus edit":function(){this.permissions.editable&&this.showEditor()},onClickHandler:function(){},removeHandlers:function(){},removeWidget:function(){this.$widget&&this.$widget.editableText("destroy")},destroy:function(){this.removeHandlers(),this.removeWidget(),this._super.apply(this,arguments)}})});
define('tau/ui/templates/property/ui.template.property.time',["tau/core/templates-factory"],function(t){var e={name:"property-time",markup:["<div>",'   <div class="property"><div class="property-text">${text}<span class="point">${point}</span></div></div>',"</div>"].join("")};return t.register(e)});
define('tau/components/component.property.time',["Underscore","tau/components/component.creator","tau/models/model.property.time","tau/models/model.property.time.editable","tau/components/extensions/property/extension.property.time.editable","tau/components/extensions/property/extension.property.refresher","tau/ui/templates/property/ui.template.property.time","tau/ui/behaviour/common/ui.behaviour.editableText"],function(e,t,o,r,n,p,i){return{create:function(e){var a={ModelType:o,template:i,extensions:[n,r,p]};return t.create(a,e)}}});
define('tau/components/component.property.initialEstimate',["Underscore","tau/components/component.property.time"],function(e,t){return{create:function(n){return n=e.clone(n||{}),n.propertyName="initialEstimate",t.create(n)}}});
define('tau/components/component.property.isActive',["tau/components/component.property.bool"],function(e){return{create:function(t){return t=t||{},t.propertyName="isActive",e.create(t)}}});
define('tau/components/component.property.isPrivate',["Underscore","tau/components/component.property.bool"],function(e,n){return{create:function(r){return r=e.clone(r||{}),r.propertyName="isPrivate",r.editable=!0,n.create(r)}}});
define('tau/components/component.property.isProduct',["tau/components/component.property.bool"],function(e){return{create:function(t){return t=t||{},t.propertyName="isProduct",e.create(t)}}});
define('tau/components/component.property.iteration',["tau/components/component.property"],function(e){return{create:function(t){return t.propertyName="iteration",t.showUrl=!0,t.alignElementSelector=".property-text",t.allowReset=!0,t.editorComponentConfig={type:"choice",listType:"iteration",maxHeight:200,filter:!0,expandable:!0,showEmptyDataMessage:!0,clearValueLabel:"backlog",defaultValueLabel:"current",fullModeLabel:"show old"},e.create(t)}}});
define('tau/components/component.property.lastFailureComment',["Underscore","tau/components/component.property.text"],function(e,t){return{create:function(n){return n=e.clone(n||{}),n.propertyName="lastFailureComment",n.defaultText="N/A",t.create(n)}}});
define('tau/components/component.property.lastRunDate',["tau/components/component.property.date"],function(e){return{create:function(t){return t=_.clone(t||{}),t.propertyName="lastRunDate",t.editable=!1,t.format="datetime",e.create(t)}}});
define('tau/ui/templates/property/ui.template.property.lastRunDate.list',["tau/core/templates-factory"],function(t){var e={name:"property-lastRunDate-list",markup:'<div><div class="property tau-extension-tooltip" title="Run Date: ${text}"><div class="property-text">${text}</div></div>'};return t.register(e)});
define('tau/components/component.property.lastRunDate.list',["tau/components/component.property.date","tau/ui/extensions/ui.extension.tooltip","tau/ui/templates/property/ui.template.property.lastRunDate.list"],function(t,e,n){return{create:function(a){return a=_.clone(a||{}),a.propertyName="lastRunDate",a.editable=!1,a.format="datetime",a.extensions=[e],a.template=n,t.create(a)}}});
define('tau/ui/templates/property/ui.template.property.status',["tau/core/templates-factory"],function(e){var a={name:"property-last-status",markup:["<div>",'   <div class="ui-status {{if value === true}}ui-status_type_passed green{{/if}}{{if value === false}}ui-status_type_failed red{{/if}}{{if value === null}}ui-status_type_na grey{{/if}}">',"   {{if value === true}}","       Passed","   {{/if}}","   {{if value === false}}","       Failed","   {{/if}}","</div>","</div>"].join("")};return e.register(a)});
define('tau/components/component.property.lastStatus',["tau/components/component.property.bool","tau/ui/templates/property/ui.template.property.status"],function(t,e){return{create:function(r){return r=r||{},r.propertyName="lastStatus",r.template=e,t.create(r)}}});
define('tau/models/model.property.user',["tau/models/model.property"],function(e){return e.extend({onInit:function(){this.listenOfPropertyChanged();var e=this.config.context.entity,t=e.entityType.name,a={};a[this.config.propertyName]=["id","firstName","lastName","email","avatarUri"],this.store.get(t,{id:e.id,fields:["id",a]}).done({scope:this,success:this.initialDataProcessor}),this.bindStoreListeners()},initialDataProcessor:function(e){var t=this.config;if(t){var a=e[0].data,i=a[t.propertyName];if(i){var r=i.email;(i.firstName||i.lastName)&&(r=_.trim([i.firstName,i.lastName].join(" ")));var n=r;t.hidename&&(r="");var s={id:i.id,avatar:i.avatarUri+"24",name:r,visibleName:n};this.fire("dataBind",s)}}},bindStoreListeners:_.once(function(){this.store.on({eventName:"afterSave",type:"user",hasChanges:["avatarUri"],listener:this},function(e){this.afterUserSaved(e)}.bind(this))}),afterUserSaved:function(e){this.fire("userAvatarChanged",e.data)},"bus dataBind:last + userAvatarChanged":function(e,t,a){t.id===a.id&&this.fire("avatarChanged",a)}})});
define('tau/ui/templates/common/ui.template.owner',["tau/core/templates-factory","tau/ui/templates/common/ui.template.userName"],function(a){return a.register({name:"owner",markup:["<table class='owner' userId='${id}'><tr>","<td class='owner-avatar-container tau-avatar_${id}'>","{{if avatar}}<img  role='avatar' src='${avatar}' alt='${visibleName}' title='${visibleName}' class='owner-avatar {{if !name}} user-name{{/if}}'/>{{/if}}","</td>","<td class='owner-info'>","   {{tmpl 'user-name'}}","</td>","</tr></table>"].join(""),dependencies:["user-name"]})});
define('tau/components/extensions/user/extension.user.editable',["tau/components/extensions/component.extension.base"],function(t){return t.extend({category:"edit","bus permissionsReady+afterRender+dataBind":function(t){var e=this,n=this.element=t.afterRender.data.element,i=t.permissionsReady.data,o=t.dataBind.data;if(i.editable){var s={type:"userList",data:o,extensions:this.getExtensions(),v2:!0};this.extendEditorConfig(s);var a={components:[s],context:e.config.context},r={target:n,componentsConfig:a,alignTo:n.find(".user-name"),onShow:_.bind(function(){this.config.context.configurator.getKeyBoardManager().pushHandler({})},this),onHide:_.bind(function(){this.config.context.configurator.getKeyBoardManager().popHandler()},this)};this.fire("initBubble",r)}this._toggle&&this.bus.removeListener("edit",this._toggle,this),this._toggle=function(){e.fire("toggleBubble")},this.bus.on("edit",this._toggle,this)},extendEditorConfig:function(){},getExtensions:function(){return[]}})});
define('tau/models/assignment/model.property.owner.editable',["Underscore","tau/models/assignment/model.property.assignUser.editable.base"],function(e,n){return n.extend({assignTo:function(e){var n={type:this.config.context.entity.entityType.name,$set:{owner:{id:e}},$include:[{owner:["id","firstName","lastName","email"]}]};this.fire("save",n)}})});
define('tau/models/userList/extension.model.user.Excluder',["Underscore","tau/core/model-base"],function(e,t){return t.extend({"bus registerStoreRequest":function(){var e=this.config.context.entity||{entityType:{}},t=["id","firstName","lastName"],r={};r[this.getUserPropertyName()]=t,this.fire("get",{type:e.entityType.name,query:{id:e.id,fields:[r]},callback:{scope:this,success:this.onEntityRetrieved}})},getUserPropertyName:function(){throw"Use Excluder getUserPropertyName should be ovveriden"},onEntityRetrieved:function(e){var t=e.data||{},r=[t[this.getUserPropertyName()]];this.fire("excludedUserReady",r)}})});
define('tau/models/userList/extension.model.owner.Excluder',["Underscore","tau/models/userList/extension.model.user.Excluder"],function(e,r){return r.extend({getUserPropertyName:function(){return"owner"}})});
define('tau/components/extensions/user/extension.owner.editable',["tau/components/extensions/user/extension.user.editable","tau/models/assignment/model.property.owner.editable","tau/models/userList/extension.model.owner.Excluder"],function(e,n,t){return e.extend({category:"edit",extendEditorConfig:function(e){e.UserExcluder=t},getExtensions:function(){return[n]}})});
define('tau/components/component.property.owner',["tau/components/component.creator","tau/models/model.property.user","tau/models/model.property.editable","tau/components/extensions/property/extension.property.refresher","tau/components/extensions/bubble/extension.bubble.creator","tau/components/extensions/component.creator.extension","tau/ui/templates/common/ui.template.owner","tau/components/extensions/user/extension.owner.editable"],function(e,t,n,o,r,s,p,a){return{create:function(u){var m={ModelType:t,template:p,extensions:[n,r,s,o,a]};return u=u||{},u.propertyName="owner",e.create(m,u)}}});
define('tau/models/extensions/team/extension.model.allUserRetriever',["Underscore","tau/core/model-base"],function(e,t){return t.extend({"bus registerStoreRequest":function(){var t=this;this.store.get("user",{fields:["id","firstName","lastName","email","isActive","deleteDate",{role:["id","name"]}]}).done({success:function(r){var i=r[0].data,a={},s=[];i=e.filter(i,function(e){return null===e.deleteDate}),e.forEach(i,function(t){var r=t.role;r&&(a[r.id]=r),t.name=e.trim([t.firstName,t.lastName].join(" "))||t.email,s.push({user:t,role:r})}),t.fire("projectMembersReady",s),t.fire("projectRolesReady",e.values(a))}})}})});
define('tau/components/extensions/user/extension.owner.project.editable',["tau/components/extensions/user/extension.user.editable","tau/models/assignment/model.property.owner.editable","tau/models/userList/extension.model.owner.Excluder","tau/models/extensions/team/extension.model.allUserRetriever"],function(e,n,t,o){return e.extend({category:"edit",extendEditorConfig:function(e){e.UserExcluder=t,e.Retriever=o},getExtensions:function(){return[n]}})});
define('tau/components/component.property.owner.project',["tau/components/component.creator","tau/models/model.property.user","tau/models/model.property.editable","tau/components/extensions/property/extension.property.refresher","tau/components/extensions/bubble/extension.bubble.creator","tau/components/extensions/component.creator.extension","tau/ui/templates/common/ui.template.owner","tau/components/extensions/user/extension.owner.project.editable"],function(e,t,o,n,r,s,p,a){return{create:function(u){var m={ModelType:t,template:p,extensions:[o,r,s,n,a]};return u=u||{},u.propertyName="owner",e.create(m,u)}}});
define('tau/models/extensions/team/extension.model.requestOwners.retriever',["Underscore","tau/core/model-base"],function(e,t){return t.extend({"bus registerStoreRequest":function(){var t=this.config.context.entity,r=this.config.store,i=this;r.get(t.entityType.name,{id:t.id,fields:[{project:["id",{projectMembers:[{user:["id","firstName","lastName","email","isActive","deleteDate"]},{role:["id","name"]}]}]},{team:["id",{teamMembers:[{user:["id","firstName","lastName","email","isActive","deleteDate"]},{role:["id","name"]}]}]}]}).done({success:function(t){t[0].data.project=t[0].data.project||{},e.defaults(t[0].data.project,{projectMembers:[]}),t[0].data.team=t[0].data.team||{},e.defaults(t[0].data.team,{teamMembers:[]});var r=t[0].data.project.projectMembers.concat(t[0].data.team.teamMembers||[]);r=e.uniq(r,!1,function(e){return e.user.id}),i.fire("members.provided",r)}}),r.get(t.entityType.name,{id:t.id,fields:[{requesters:["id","firstName","lastName","email","isActive","deleteDate","kind"]}]}).done({success:function(e){var t=e[0].data.requesters;i.fire("requesters.provided",t)}})},"bus members.provided+requesters.provided":function(t){var r=t["members.provided"].data,i=t["requesters.provided"].data,a=e.pluck(i,"id");r=e.reject(r,function(t){return e.indexOf(a,t.user.id)>-1}),e.forEach(i,function(e){r.unshift({role:{id:0,name:"Requesters"},user:e})}),r=e.filter(r,function(e){return null===e.user.deleteDate});var s=[];e.forEach(r,function(t){var r=t.role;r&&s.push(r),t.username=e.trim([t.firstName,t.lastName].join(" "))||t.email}),s=e.uniq(s,!1,function(e){return e.id}),this.fire("projectMembersReady",r),this.fire("projectRolesReady",s)}})});
define('tau/components/extensions/user/extension.owner.request.editable',["tau/components/extensions/user/extension.user.editable","tau/models/assignment/model.property.owner.editable","tau/models/userList/extension.model.owner.Excluder","tau/models/extensions/team/extension.model.requestOwners.retriever"],function(e,t,n,o){return e.extend({category:"edit",extendEditorConfig:function(e){e.UserExcluder=n,e.Retriever=o},getExtensions:function(){return[t]},"bus initBubble":function(e){var t=e.data.target,n=function(){t.tauBubble("empty")};t.on("close externalClose",n)}})});
define('tau/components/component.property.owner.request',["tau/components/component.creator","tau/models/model.property.user","tau/models/model.property.editable","tau/components/extensions/property/extension.property.refresher","tau/components/extensions/bubble/extension.bubble.creator","tau/components/extensions/component.creator.extension","tau/ui/templates/common/ui.template.owner","tau/components/extensions/user/extension.owner.request.editable"],function(e,t,n,o,r,s,p,a){return{create:function(u){var m={ModelType:t,template:p,extensions:[n,r,s,o,a]};return u=u||{},u.propertyName="owner",e.create(m,u)}}});
define('tau/models/model.property.password',["tau/core/model-base"],function(t){return t.extend({init:function(t){if(this._super.apply(this,arguments),!t.propertyName)throw"PropertyName was not configured";this.propertyName=t.propertyName,this.listenedEntities={}},getEntityTypeName:function(){return this.config.context.entity.entityType.name},getEntityId:function(){return this.config.context.entity.id},listenOfPropertyChanged:function(){var t=this.config.context.entity.id;this.listenedEntities[t]||(this.listenedEntities[t]=!0,this.attachToChangePropertiesOfCurrentEntity(this.propertyName))},onInit:function(){this.fire("dataBind",{name:this.propertyName,text:this.config.defaultText||"",passwordHint:this.config.passwordHint})}})});
define('tau/components/component.property.password',["Underscore","tau/components/component.creator","tau/models/model.property.password","tau/models/model.property.text.editable","tau/models/model.property.text.validation","tau/components/extensions/property/extension.property.password.editable","tau/ui/templates/property/ui.template.property.password"],function(e,t,o,r,n,p,a){return{create:function(s){var d={ModelType:o,extensions:e.concat([s.extensions,r,n,p]),template:a};return t.create(d,s)}}});
define('tau/components/component.property.plannedEndDate',["tau/components/component.property.date"],function(e){return{create:function(n){return n=n||{},n.propertyName="plannedEndDate",n.allowReset=!0,e.create(n)}}});
define('tau/components/component.property.plannedStartDate',["tau/components/component.property.date"],function(e){return{create:function(t){return t=t||{},t.propertyName="plannedStartDate",t.allowReset=!0,e.create(t)}}});
define('tau/components/component.property.priority',["tau/components/component.property"],function(e){return{create:function(t){return t.propertyName="priority",t.editorType="",t.alignElementSelector=".property-text",t.showEmptyDataMessage=!0,t.editorComponentConfig={type:"choice",listType:"priority",maxHeight:200},e.create(t)}}});
define('tau/models/model.property.process',["Underscore","tau/models/model.property"],function(e,t){return t.extend({getPropertyData:function(){this.store.get(this.getEntityTypeName(),{id:this.getEntityId(),fields:["id",{process:["id","name",{practices:["id","name"]}]}]}).done({success:this.onEntityRetrieved,scope:this})},processProperty:function(t){var i={id:t[this.valueField],text:t[this.displayField],subtext:e.pluck(t.practices,"name").join(", ")};this.fire("dataBind",i)}})});
define('tau/components/component.property.process',["Underscore","tau/components/component.creator","tau/core/termProcessor","tau/models/model.property.process","tau/models/model.property.editable","tau/components/extensions/property/extension.property.editable","tau/components/extensions/property/extension.property.refresher","tau/components/extensions/bubble/extension.bubble.creator","tau/components/extensions/component.creator.extension","tau/ui/templates/property/ui.template.property"],function(e,t,o,r,s,n,a,p,l,c){return{create:function(a){a.propertyName="process",a.showUrl=!1,a.alignElementSelector=".property-text",a.editorComponentConfig={type:"choice",listType:"process",maxHeight:200,filter:!1,expandable:!1,showEmptyDataMessage:!1,showClearValue:!1,allowToReset:!1,defaultValueLabel:"current",fullModeLabel:"show old",confirmation:"It is strongly recommended to NOT change Process for Projects in progress as some data will be lost (esp. the Custom fields data). Are you sure you want to change process?"};var m=new o(a.context.getTerms()),i=a.editorComponentConfig;i.resetDisabled=a.resetDisabled,i.showEmptyDataMessage&&(i.emptyDataMessage="No "+m.getTerms(a.propertyName).names.toLowerCase()+" found"),i.showClearValue&&(a.clearValueLabel="reset "+m.getTerms(a.propertyName).name.toLowerCase());var u={ModelType:a.Model||r,template:c,extensions:e.concat([a.extensions,p,l,s,n])};return t.create(u,a)}}});
define('tau/components/component.property.program',["tau/components/component.property"],function(e){return{create:function(t){return t.propertyName="program",t.showUrl=!1,t.alignElementSelector=".property-text",t.editorComponentConfig={type:"choice",listType:"program",expandable:!0,filter:!0,showEmptyDataMessage:!0,defaultValueLabel:"current",fullModeLabel:"show old",clearValueLabel:"reset",showReset:!0},t.allowReset=!0,e.create(t)}}});
define('tau/models/model.property.project',["Underscore","tau/models/model.property"],function(e,t){return t.extend({getPropertyData:function(){this.store.get(this.getEntityTypeName(),{id:this.getEntityId(),fields:["id",{project:["id","name","color"]}]}).done({success:this.onEntityRetrieved,scope:this})},processProperty:function(e){var t={id:e[this.valueField],type:"project",name:e[this.displayField]||"No Project",color:e.color,url:this.config.context.configurator.getUrlBuilder().getNewViewUrl(e[this.valueField],"project",!0),isEditable:this.config.editable};this.fire("dataBind",t)}})});
define('tau/ui/templates/property/ui.template.property.project',["tau/core/templates-factory"],function(t){var e={name:"property.project",engine:"jqote2",markup:["<div>",'<span class="property tau-property tau-property-<%= this.type %><% if (!this.name) { %> tau-property_empty_true<% } %>">','<span class="property-text tau-property__value">',"<% if (this.id) { %>",'<a href="<%= this.url %>" class="tau-linkentity tau-linkentity_type_full">',"<% if (this.color) { %>",'<i style="background-color: <%! this.color %>;" class="tau-icon tau-icon_type_color"></i>',"<% } else { %>",'<i class="tau-icon tau-icon_type_color tau-icon_name_empty"></i>',"<% } %>",'<span class="tau-linkentity__inner"><%! this.name %></span>',"</a>","<% } else { %>",'<span <% if (this.isEditable){ %>class="ui-link"<% } %>><%! this.name %></span>',"<% } %>","</span>","</span>","</div>"]};return t.register(e)});
define('tau/components/component.property.project',["Underscore","tau/components/component.property","tau/models/model.property.project","tau/ui/templates/property/ui.template.property.project","tau/ui/templates/choice/project/ui.template.choice.project.option"],function(e,t,o,r,p){return{create:function(a){var n=a.context.entity.entityType.name.toLowerCase(),c=a.context.hasEdition("hasTeams");return a.propertyName="project",a.Model=o,a.template=r,a.editable=e.contains(["feature","userstory","bug","request","testcase","testplan"],n),a.showUrl=!0,a.alignElementSelector=".property-text",a.applyBubbleClasses=!1,a.editorComponentConfig={type:"choice",listType:"project",allowToReset:c,filter:!0,clearValueLabel:"No Project",emptyDataMessage:"No projects found",templateOption:p.name},t.create(a)}}});
define('tau/ui/templates/property/ui.template.property.relationType',["tau/core/templates-factory"],function(e){var t={name:"property-relationType",markup:["<div>",'   <span class="tau-relation-icon tau-${value.toLowerCase()}"/>','   <span class="ui-link property-text i-role-relation-type" >${text}</span>',"</div>"]};return e.register(t)});
define('tau/components/component.property.relationType',["tau/components/component.property","tau/ui/templates/property/ui.template.property.relationType"],function(e,t){return{create:function(o){return o.propertyName="relationType",o.editorType="",o.template=t,o.alignElementSelector=".i-role-relation-type",o.editorComponentConfig={type:"choice",listType:"relationType",maxHeight:200},e.create(o)}}});
define('tau/components/component.property.release',["tau/components/component.property"],function(e){return{create:function(t){return t.propertyName="release",t.showUrl=!0,t.alignElementSelector=".property-text",t.allowReset=!t.resetDisabled,t.additionalFields=[{iteration:["id","name"]}],t.editorComponentConfig={type:"choice",listType:"release",expandable:!0,filter:!0,showEmptyDataMessage:!0,defaultValueLabel:"current",fullModeLabel:"show old",clearValueLabel:"backlog"},e.create(t)}}});
define('tau/components/component.property.requestSource',["tau/components/component.property","tau/models/model.property.simple"],function(e,t){return{create:function(o){return o.propertyName="sourceType",o.Model=t,o.showUrl=!1,o.alignElementSelector=".property-text",o.editorComponentConfig={type:"choice",listType:"static",values:["None","Email","Phone","Internal","External"],expandable:!0,filter:!1,showEmptyDataMessage:!1},e.create(o)}}});
define('tau/components/component.property.requestType',["tau/components/component.property"],function(e){return{create:function(t){return t.propertyName="requestType",t.editorType="",t.alignElementSelector=".property-text",t.showEmptyDataMessage=!0,t.editorComponentConfig={type:"choice",listType:"requestType",maxHeight:200,showReset:!1},e.create(t)}}});
define('tau/models/assignment/model.property.responsible.editable',["Underscore","tau/models/assignment/model.property.assignUser.editable.base"],function(e,n){return n.extend({assignTo:function(e){var n={type:this.config.context.entity.entityType.name,$set:{responsible:{id:e}},$include:[{responsible:["id","firstName","lastName"]}]};this.fire("save",n)}})});
define('tau/models/userList/extension.model.responsible.Excluder',["Underscore","tau/models/userList/extension.model.user.Excluder"],function(e,r){return r.extend({getUserPropertyName:function(){return"responsible"}})});
define('tau/components/extensions/user/extension.responsible.editable',["tau/components/extensions/user/extension.user.editable","tau/models/assignment/model.property.responsible.editable","tau/models/userList/extension.model.responsible.Excluder"],function(e,n,t){return e.extend({category:"edit",extendEditorConfig:function(e){e.UserExcluder=t},getExtensions:function(){return[n]}})});
define('tau/components/component.property.responsible',["tau/components/component.creator","tau/models/model.property.user","tau/models/model.property.editable","tau/components/extensions/property/extension.property.refresher","tau/components/extensions/bubble/extension.bubble.creator","tau/components/extensions/component.creator.extension","tau/ui/templates/common/ui.template.owner","tau/components/extensions/user/extension.responsible.editable"],function(e,t,n,o,r,s,p,a){return{create:function(i){var u={ModelType:t,template:p,extensions:[n,r,s,o,a].concat(i.extensions||[])};return i=i||{},i.propertyName="responsible",e.create(u,i)}}});
define('tau/components/component.property.role',["tau/components/component.property"],function(e){return{create:function(t){return t.propertyName="role",t.editable=t.context.getLoggedUser().isAdministrator,t.displayField="name",t.valueField="id",t.alignElementSelector=".property-text",t.showUrl=!1,t.stackName="role",t.editorComponentConfig={type:"choice",listType:"role",expandable:!0,showEmptyDataMessage:!0,defaultValueLabel:"current",fullModeLabel:"show all"},e.create(t)}}});
define('tau/ui/templates/property/ui.template.property.modern',["tau/core/templates-factory"],function(e){var a={name:"property.modern",engine:"jqote2",markup:['<span class="tau-dropdown-toggle i-role-property " data-value="<%! this.value %>">',"<i><%! this.value %></i>","</span>"]};return e.register(a)});
define('tau/components/component.property.role.modern',["tau/components/component.property","tau/ui/templates/property/ui.template.property.modern"],function(e,t){return{create:function(l){return l.propertyName="role",l.editable=!0,l.displayField="name",l.valueField="id",l.alignElementSelector=".i-role-property",l.showUrl=!1,l.targetElementSelector=".i-role-property",l.stackName="role",l.applyBubbleClasses=!1,l.editorComponentConfig={type:"choice",listType:"role",expandable:!0,showEmptyDataMessage:!0,defaultValueLabel:"current",fullModeLabel:"show all"},l.template=t,e.create(l)}}});
define('tau/components/component.property.runDate',["tau/components/component.property.date"],function(e){return{create:function(t){return t=_.clone(t||{}),t.propertyName="runDate",t.editable=!1,t.format="datetime",e.create(t)}}});
define('tau/models/model.property.severity',["Underscore","tau/models/model.property","tau/models/dataprocessor/model.processor.importance"],function(e,r,t){return r.extend({getPropertyFields:function(){var r=this._super(),t=e.union(r,["importance"]);return t},buildRequest:function(e){var r=this._super(e);return r=r.get("severity",{fields:["id","importance"]})},onProcessProperty:function(e){if(this.config){var r=this._super(e);return r.kind=this.importanceProcessor.getKind(e.importance),r}},onEntityRetrieved:function(r){var o=this.property=r[0].data[this.propertyName]||{},i=e(r[1].data).pluck("importance"),n=e.min(i),s=e.max(i);this.importanceProcessor=new t(n,s),this.processProperty(o)}})});
define('tau/ui/templates/property/ui.template.property.severity',["tau/core/templates-factory"],function(e){var t={name:"property-severity",markup:["<div>",'   <span class="property tau-list-severity-${kind}">','       <span class="property-text">${text}</span>',"   </span>","</div>"].join("")};return e.register(t)});
define('tau/components/component.property.severity',["tau/components/component.property","tau/models/model.property.severity","tau/ui/templates/property/ui.template.property.severity"],function(e,t,r){return{create:function(o){return o.propertyName="severity",o.editorType="",o.showUrl=!1,o.alignElementSelector=".property-text",o.showEmptyDataMessage=!0,o.editorComponentConfig={type:"choice",listType:"severity",maxHeight:200},o.Model=t,o.template=r,e.create(o)}}});
define('tau/components/component.property.startDate',["tau/components/component.property.date"],function(e){return{create:function(t){return t=t||{},t.propertyName="startDate",e.create(t)}}});
define('tau/components/component.property.startDate.project',["tau/components/component.property.date","tau/models/model.property.date.validation.project"],function(t,e){return{create:function(n){return n=n||{},n.propertyName="startDate",n.validationExtension=e,t.create(n)}}});
define('tau/components/component.property.startDate.projectMember',["tau/components/component.property.date"],function(e){return{create:function(t){return t=t||{},t.editable=!0,t.allowReset=!0,t.propertyName="membershipStartDate",e.create(t)}}});
define('tau/ui/templates/property/ui.template.property.status.testCaseRun',["tau/core/templates-factory"],function(e){var a={name:"property-last-status-testcaserun",markup:["<div>",'<div class="ui-status {{if value === true}}ui-status_type_passed green{{/if}}{{if value === false}}ui-status_type_failed red{{/if}}{{if value === null}}ui-status_type_na grey{{/if}}">',"{{if value === true}}","Passed","{{/if}}","{{if value === false}}","Failed","{{/if}}","</div>","</div>"]};return e.register(a)});
define('tau/components/component.property.status.testCaseRun',["tau/components/component.property.bool","tau/ui/templates/property/ui.template.property.status.testCaseRun"],function(e,t){return{create:function(p){return p=p||{},p.propertyName="passed",p.template=t,e.create(p)}}});
define('tau/models/model.property.team',["Underscore","tau/models/model.property"],function(e,t){return t.extend({getPropertyData:function(){this.store.get(this.getEntityTypeName(),{id:this.getEntityId(),fields:["id",{team:["id","name","icon"]}]}).done({success:this.onEntityRetrieved,scope:this})},processProperty:function(e){var t={id:e[this.valueField],type:e.__type,name:e[this.displayField]||"No Team",icon:e.icon,url:this.config.context.configurator.getUrlBuilder().getNewViewUrl(e[this.valueField],"team",!0),isEditable:this.config.editable};this.fire("dataBind",t)}})});
define('tau/ui/templates/property/ui.template.property.team',["tau/core/templates-factory"],function(t){var a={name:"property.team",engine:"jqote2",markup:["<div>",'<span class="property tau-property tau-property-<%= this.type %><% if (!this.name) { %> tau-property_empty_true<% } %>">','<span class="property-text tau-property__value">',"<% if (this.id) { %>",'<a href="<%= this.url %>" class="tau-linkentity tau-linkentity_type_full">','<i class="tau-icon tau-icon_type_svg tau-icon_name_<%! this.icon || "trihead" %>"></i>','<span class="tau-linkentity__inner">',"<%! this.name %>","</span>","</a>","<% } else { %>",'<span <% if (this.isEditable){ %>class="ui-link"<% } %>><%! this.name %></span>',"<% } %>","</span>","</span>","</div>"]};return t.register(a)});
define('tau/ui/templates/choice/team/ui.template.choice.team.option',["tau/core/templates-factory"],function(t){var i={name:"state.team.option",engine:"jqote2",markup:['<div role="option" data-id="<%! this.id %>" class="drop-down-option drop-down-option-team i-role-option " <% if (this.description) { %> title=<%! this.description %> <% } %> >','<span class="drop-down-option__prefix">','<i class="tau-icon tau-icon_type_svg tau-icon_name_<%! this.icon || "trihead" %>"></i>',"</span>",'<span class="i-role-optiontext drop-down-option__text"><%! this.name %></span>',"</div>"]};return t.register(i)});
define('tau/components/component.property.team',["tau/components/component.property","tau/models/model.property.team","tau/ui/templates/property/ui.template.property.team","tau/ui/templates/choice/team/ui.template.choice.team.option"],function(e,t,a,o){return{create:function(n){var p=n.context.entity.entityType.name.toLowerCase(),r=n.context.hasEdition("hasTeams");return n.propertyName="team",n.Model=t,n.template=a,n.editable=r&&_.contains(["feature","userstory","bug","request","testcase","testplanrun","testplan"],p),n.showUrl=!0,n.alignElementSelector=".property-text",n.applyBubbleClasses=!1,n.editorComponentConfig={type:"choice",listType:"team",allowToReset:!0,filter:!0,clearValueLabel:"No Team",emptyDataMessage:"No teams found",templateOption:o.name},e.create(n)}}});
define('tau/components/component.property.teamIteration',["tau/components/component.property"],function(e){return{create:function(t){return t.propertyName="teamIteration",t.showUrl=!0,t.alignElementSelector=".property-text",t.allowReset=!0,t.editorComponentConfig={type:"choice",listType:"teamIteration",maxHeight:200,filter:!0,expandable:!0,showEmptyDataMessage:!0,clearValueLabel:"reset",defaultValueLabel:"current",fullModeLabel:"show old"},e.create(t)}}});
define('tau/components/component.property.testCase',["tau/components/component.property"],function(e){return{create:function(t){return t=t||{},t.propertyName="testCase",t.showUrl=!0,t.editable=!1,e.create(t)}}});
define('tau/components/component.property.testPlan',["tau/components/component.property"],function(e){return{create:function(t){return t=t||{},t.propertyName="testPlan",t.showUrl=!0,t.editable=!1,e.create(t)}}});
define('tau/components/component.property.testPlanRun',["tau/components/component.property"],function(e){return{create:function(t){return t=t||{},t.propertyName="testPlanRun",t.showUrl=!0,t.editable=!1,e.create(t)}}});
define('tau/models/model.timeInterval',["Underscore","tau/models/model.leadCycleTime","tau/utils/utils.date"],function(t,e){return e.extend({onInit:function(){var t=this.config.context,e=t.entity.entityType.name,i=t.entity.id,n=this.config.timeField,d={id:i,fields:[n]};this.store.get(e,d,{scope:this,success:this.onEntityRetrieved}).done()},onEntityRetrieved:function(t){var e=t.data[this.config.timeField];if(e){var e=this.getLongTime(e);this.fire("dataBind",{text:e,point:""})}else this.fire("dataBind",{text:"",point:""})}})});
define('tau/components/component.property.timeInterval',["Underscore","tau/components/component.creator","tau/models/model.timeInterval","tau/ui/templates/property/ui.template.property.time"],function(e,t,n,o){return{create:function(r){r=r||{};var a={ModelType:n,template:o,extensions:e.concat([r.extensions])};return t.create(a,r)}}});
define('tau/components/component.property.user',["tau/components/component.creator","tau/models/model.property.user","tau/models/model.property.editable","tau/components/extensions/property/extension.property.refresher","tau/components/extensions/bubble/extension.bubble.creator","tau/components/extensions/component.creator.extension","tau/ui/templates/common/ui.template.owner","tau/components/extensions/user/extension.owner.editable"],function(e,t,n,o,r,s,p,a){return{create:function(u){var m={ModelType:t,template:p,extensions:[n,r,s,o,a]};return u=u||{},u.propertyName="user",e.create(m,u)}}});
define('tau/components/component.property.userStory',["tau/components/component.property"],function(e){return{create:function(t){return t.propertyName="userStory",t.showUrl=!0,t.alignElementSelector=".property-text",t.showEmptyDataMessage=!0,t.allowReset=!t.resetDisabled,t.editorComponentConfig={type:"finder.entity",propertyName:"userStory"},t.onPositionConfig=function(e){e.collision="flipfit flipfit",e.at="left middle",e.my="right middle"},e.create(t)}}});
define('tau/components/component.property.velocity',["tau/components/component.property.time"],function(e){return{create:function(t){return t.propertyName="velocity",e.create(t)}}});
define('tau/ui/templates/quick.add/ui.template.quick.add.content',["tau/core/templates-factory"],function(d){var i={name:"quick.add.content",markup:['<div class="ui-quick-add-stats"></div>','<div class="ui-quick-add-content">','<div class="quick-add-lines">',"</div>","</div>"],dependencies:[]};return d.register(i)});
define('tau/ui/templates/quick.add/ui.template.quick.add.line',["tau/core/templates-factory"],function(i){var e={name:"quick.add.line",markup:['<div class="ui-quick-add-line">',' <div class="quick-add-input ui-quick-add-new-item"></div>',"</div>"],dependencies:[]};return i.register(e)});
define('tau/ui/extensions/quick.add/ui.extension.quick.add',["jQuery","Underscore","tau/core/extension.base.stateful","tau/ui/templates/quick.add/ui.template.quick.add.content","tau/ui/templates/quick.add/ui.template.quick.add.line","tau/ui/behaviour/common/ui.behaviour.editableText"],function(t,e,i,n,d){return i.extend({"bus beforeInit":function(t,e){var i=e.config;this.fire("dataBind",{label:i.label,entityType:i.entityType})},"bus afterRender":function(t,i){var n=i.element,d=n.find(".ui-quick-add-link").tauBubble({onPositionConfig:function(t){t.offset="-20 0"}});d.bind("show",e.bind(function(t,e){this.fire("displayQuickAdd",e)},this)),d.bind("close",e.bind(function(t,e){e.event&&e.event.preventDefault&&(e.event.preventDefault(),e.event.stopPropagation()),this.fire("close",e)},this))},"bus displayQuickAdd":function(e){var i=e.data;this.itemsAdded=t.Deferred();var d=i.popup.find(".tau-bubble__inner");d.find(".ui-quick-add-content").length||d.append(n.render({})),i.api.adjustPosition(),d.find(".quick-add-lines").html(""),d.find(".ui-quick-add-stats").text(""),d.find(".button-box").click(function(){i.api.hide()}),this._appendAddLine(d),this._attachKeyBoardHandling()},"bus close":function(){this.config.context.configurator.getKeyBoardManager().popHandler(),this.itemsAdded["is-async-operation-started"]&&e.defer(this.safeCallback(this._addItems))},_addItems:function(){var t=this.config.context;t["evict-data"]={entityId:this._getEntityId(),entityType:this._getEntityType(),evictProperties:this.config.evictProperties,$defer:this.itemsAdded},this.fire(this.config.entityType+".items.added",t)},_attachKeyBoardHandling:function(){var e={handleKeyDown:t.noop};this.config.context.configurator.getKeyBoardManager().pushHandler(e)},_getEntityId:function(){return this.config.context.entity.id},_getEntityType:function(){return this.config.context.entity.entityType.name},_prepareCmd:function(t,i){t=t.replace(/\s+/gi," "),t.length>255&&(t=t.substring(0,254));var n=this.config,d={name:t};n.additionalFieldsSet&&e.extend(d,n.additionalFieldsSet),d[n.property]={id:this._getEntityId()};var a={};a[n.property]=["id"];var s={$set:d,fields:["id","name",a]};return i.data("item-id")&&(s.id=i.data("item-id")),s},_appendAddLine:function(i){var n=this,a=t(".ui-quick-add-new-item",i);if(a.length>0)return void setTimeout(function(){a.click()},1);var s=d.render({entityType:n.config.entityType});i.find(".quick-add-lines").append(s);var o=t(".quick-add-input",s);o.editableText({restoreText:!0,preventDefaultBlur:!0,onSave:function(d){if(d&&e.trim(d)&&!o.hasClass("ui-quick-add-saving")){o.removeClass("ui-quick-add-new-item").addClass("ui-quick-add-saving");var a=n.config.store,r=n._prepareCmd(d,s),c=e.partial(function(e,n){s.data("item-id",n.data.id).addClass("ui-quick-add-item-saved"),o.removeClass("ui-quick-add-saving").text(n.data.name),e.resolve();var d=t(".ui-quick-add-item-saved",i).length+" item(s) saved";t(".ui-quick-add-stats",i).text(d)},n.itemsAdded),u=function(t,e){var i=a.config.proxy.types[n.config.entityType].refs;t&&i.project&&(r.$set.project={id:t.id}),e&&i.team&&(r.$set.team={id:e.id}),n.config.onBeforeAdd&&n.config.onBeforeAdd(r),a.save(n.config.entityType,r,{success:function(t){c(t)}}).done()};t(".ui-quick-add-stats",i).text("saving...");var f=a.config.proxy.types[n._getEntityType()].refs,p=[{project:["id"]}];f.team&&p.push({team:["id"]}),n.itemsAdded["is-async-operation-started"]=!0,a.get(n._getEntityType(),{id:n._getEntityId(),fields:p},{success:function(t){u(t.data.project,t.data.team)}}).done(),n._appendAddLine(i)}}}),o.data("textEditor").onEscape=function(t){t.preventDefault(),this._cancelEdit(),this.$element.blur()},setTimeout(function(){o.click()},1)}})});
define('tau/ui/templates/quick.add/ui.template.quick.add',["tau/core/templates-factory"],function(a){var e={name:"quick.add",markup:['<div class="ui-quick-add">','<span class="ui-link ui-quick-add-link">${label}</span>',"</div>"],dependencies:[]};return a.register(e)});
define('tau/components/component.quick.add',["tau/components/component.creator","tau/ui/extensions/quick.add/ui.extension.quick.add","tau/ui/templates/quick.add/ui.template.quick.add"],function(e,t,n){return{create:function(u){var a={extensions:[t],template:n};return e.create(a,u)}}});
define('tau/components/extensions/redirect/extension.redirect',["tau/components/extensions/component.extension.base"],function(t){return t.extend({_redirect:function(t){this.redirect.redirect(t)},"bus afterInit":function(t){this.redirect=this.config.context.configurator.getRedirect(),this._redirect(t.data.config.to)},"bus redirect":function(t){this._redirect(t.data.to)}})});
define('tau/components/component.redirect',["tau/components/component.creator","tau/models/model.menu.actions","tau/components/extensions/redirect/extension.redirect","tau/ui/templates/menu/ui.template.menu.actions"],function(e,t,n){return{create:function(t){var o={extensions:[n]};return e.create(o,t)}}});
define('tau/models/relations/model.relations.add',["tau/core/extension.base"],function(e){return e.extend({"bus beforeInit":function(e,n){n.config.context.configurator.getStore().get("relationTypes",{relationType:["id","name"]}).done({success:_.bind(function(e){this.fire("dataBind",{mainEntity:n.config.context.entity,dependencyType:n.config.dependencyType,relationTypes:e[0].data,relationTypeId:e[0].data[0].id})},this)})}})});
define('tau/ui/extensions/relations/ui.extension.relations.add',["Underscore","jQuery","tau/core/extension.base"],function(e,t,i){return i.extend({"bus entityFinder.afterInit":function(){this.fire("multiple.changed",{entityIds:[]})},"bus entityFinder.$el.ready:last + entityFinder.item.selected":function(e,t,i){this._toggleSelection(t,[i])},"bus entityFinder.$el.ready:last + multiple.changed:last + entityFinder.result.rendered":function(t,i,n,l){var r=e.intersection(n.entityIds,e.pluck(l.items,"id"));this._toggleSelection(i,r,!0)},"bus entityFinder.$el.ready:last + multiple.changed:last + multiple.reset":function(e,t,i){this._toggleSelection(t,i.entityIds,!1),this.fire("multiple.changed",{entityIds:[]})},"bus multiple.changed > entityFinder.item.selected":function(t,i,n){var l=i.entityIds;e.contains(l,n)?l=e.without(l,n):l.push(n),this.fire("multiple.changed",{entityIds:l})},"bus afterRender:last + entityFinder.result.rendered":function(e,t){var i=t.element,n=i.find("form");i.find(".i-role-selection-counter").click(function(){return!1}),"hidden"===n[0].style.visibility&&(n.css({visibility:"visible"}),n.find(".i-role-filter-input").focus())},"bus afterRender:last + multiple.changed":function(e,t,i){var n=i.entityIds.length,l=0===n,r=t.element.find(".i-role-selection-counter"),s=t.element.find(".i-role-relation-type"),d=t.element.find(".i-role-selection-counter-clear");r.text(n).toggleClass("tau-selected",!l),d.toggleClass("hidden",l),s.prop("disabled",l)},"bus afterInit:last + multiple.changed:last + relations.add":function(t,i,n,l){var r=i.config.context.configurator.getStore(),s=i.config.context.entity,d=i.config.dependencyType,o=l.relationTypeId,a="slave"===d?"master":"slave",c="slave"===d?"slave":"master",u=e.map(n.entityIds,function(e){var t={relationType:{id:o}};return t[a]={id:s.id},t[c]={id:e},t});r.save("relation",{$set:u,fields:[{master:["id",{entityType:["id","name"]}]},{slave:["id",{entityType:["id","name"]}]}]}).done(e.bind(function(){this.fire("close")},this))},"bus afterRender":function(i,n){var l=n.element,r=l.find(".cf-input");this._entityBehavior(r),l.on("click",".i-role-relation-type",e.bind(function(e){var i=t(e.target);this.fire("relations.add",{relationTypeId:i.data("id")})},this)),l.on("click",".i-role-selection-counter-clear",e.bind(function(e){e.preventDefault(),e.stopPropagation(),this.fire("multiple.reset")},this))},_entityBehavior:function(e){this.fire("applyFinder",e)},_toggleSelection:function(t,i,n){e.each(i,function(e){t.find(".i-role-option[data-id="+e+"]").toggleClass("tau-selected",n)})}})});
define('tau/ui/templates/relations/ui.template.relations.add',["tau/core/templates-factory"],function(t){var e={name:"relations-add-popup",engine:"jqote2",markup:['<div class="tau-add-relations-dialog">','<form style="visibility: hidden;">','<div class="tau-entity-fields">','<div class="tau-fieldset tau-active" style="padding-top: 0;">','<div class="i-role-entity-selector tau-field_entity tau-field" style="font-size: 16px; margin: 0; padding: 0;">','<div class="tau-userStorySelector hidden">','<input type="hidden" data-entityuniquename="entityFinder" name="entity" class="cf-input">',"</div>",'<div tabindex="0" class="tau-userStorySelector__control" data-name="entityFinder">',"<span ",'runas="finder.entity" ','data-name="entityFinder" ','data-model="relation" ','data-dependency-type="<%= this.dependencyType %>" ','data-context:general:id="<%= this.mainEntity.id %>" ','data-context:general:entity-type:name="<%= this.mainEntity.entityType.name %>"',">","</span>","</div>","</div>","</div>","</div>",'<div class="tau-entity-selector">','<div class="quick-add__entity-items i-role-relations-panel">','<span class="quick-add__entity-txt">Add','<div class="tau-inline-group tau-selection-group i-role-counter-block">','<button class="tau-btn tau-btn-small tau-selected tau-selection-counter i-role-selection-counter">0</button>','<button class="tau-btn tau-btn-small tau-clear-selection i-role-selection-counter-clear"></button>',"</div>",'<%= this.dependencyType=="master"?"inbound":"outbound" %> relations as</span>',"<% for(var i=0; i<this.relationTypes.length; i++){%>",'<button type="button" disabled data-id="<%= this.relationTypes[i].id %>" data-name="<%= this.relationTypes[i].name%>"','class="tau-btn tau-<%=this.relationTypes[i].name.toLowerCase()%> i-role-relation-type">',"<%= this.relationTypes[i].name %>","</button>","<%}%>","</div>","</div>","</form>","</div>"]};return t.register(e)});
define('tau/components/component.relations.add',["tau/components/component.creator","tau/components/extensions/component.creator.extension","tau/components/extensions/bubble/extension.bubble.creator","tau/models/relations/model.relations.add","tau/views/view.compositeControl","tau/ui/extensions/relations/ui.extension.relations.add","tau/ui/extensions/finder.entity/ui.extension.finder.entity.embedder","tau/ui/extensions/container/ui.extension.container.childrenEvents","tau/ui/templates/relations/ui.template.relations.add"],function(e,n,t,i,o,s,a,r,u){return{create:function(c){var d={ViewType:o,extensions:[n,t,i,s,a,r],template:u};return c.dependencies=["finder.entity"],e.create(d,c)}}});
define('tau/models/relations/model.relations.quick.add',["Underscore","jQuery","tau/models/board.cell.quick.add/model.board.general.quick.add"],function(e,i,n){return n.extend({getTypes:function(){return e.without(this._super(),"user","project","team")},getViewMode:function(){return"board"},getDefinition:function(i){return e.extend(this._super(i),this._getXAxisDefinition())},getSingleCellSliceDefinition:function(i,n){return e.extend(this._super(i,n),this._getXAxisDefinition())},_getXAxisDefinition:function(){return{x:{types:[this._getAxisNameForDependencyType()]}}},_getAxisNameForDependencyType:function(){return"slave"==this.config.dependencyType?"inboundrelations":"outboundrelations"},doAdd:function(e,i,n,t){t.action.x=this.config.context.entity.id,t.viewMode=this.getViewMode(),this._super(e,i,n,t)},buildReadyToAddSlice:function(e,i){var n=this._super(e,i);return n.config.base64="false",n}})});
define('tau/ui/extensions/relations/ui.extension.relations.add.trigger',["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/models/relations/model.relations.quick.add"],function(e,t,n,i){return n.extend({"bus afterInit":function(){this.fire("dataBind")},"bus afterRender":function(e,t){this._initRelationLookupBubble(this._getButtonWithDefaultPrevented(t.element,".i-role-add-lookup")),this._initRelationQuickAddBubble(this._getButtonWithDefaultPrevented(t.element,".i-role-quick-add"))},"bus afterInit:last + relations-quick-add-general.model.data.item.did.add":function(e,t){var n=t.config;this.store.evictProperties(n.context.entity.id,n.context.entity.entityType.name,[n.dependencyType+"Relations"]);var i=this.config.context.configurator.getGlobalBus();i.fire("relation.items.added",{dependencyType:t.config.dependencyType})},_getButtonWithDefaultPrevented:function(e,t){var n=e.find(t);return n.on("click",function(e){e.preventDefault()}),n},_initRelationLookupBubble:function(e){var t=this.config.dependencyType,n=function(){e.toggleClass("tau-checked")},i={target:e,className:"tau-bubble__inner_without_scroll tau-bubble-lookup",applyBubbleClasses:!1,cleanupOnHide:!0,onShow:n,onHide:n,onPositionConfig:function(n){return n.of=e,n.collision="flipfit fit",n.within=this._$getPage(e),"slave"===t&&(n.my="right center+30",n.at="left center+30"),n}.bind(this),onArrowPositionConfig:function(n){return"slave"===t?{of:e,my:"right center",at:"left center",collision:"flipfit fit"}:n}.bind(this),componentsConfig:{components:[{type:"relations.add",dependencyType:t}]}};this.fire("initBubble",i)},_initRelationQuickAddBubble:function(e){var t=this.config.dependencyType,n={target:e,applyBubbleClasses:!1,cleanupOnHide:!0,stackName:"quickAddGeneral",showOnCreation:!1,zIndex:1e4,onShow:function(){e.removeClass("tau-quick-add-collapse"),e.toggleClass("tau-checked")},onHide:function(){e.addClass("tau-quick-add-collapse"),e.toggleClass("tau-checked")},className:"tau-quick-add-dialog-general",onPositionConfig:function(){return{of:e,my:"left top",at:"left-12 bottom+1",collision:"flipfit fit",within:this._$getPage(e)}}.bind(this),dontCloseSelectors:["#ui-datepicker-div"],componentsConfig:{components:[{name:"relations-quick-add-general",type:"board.cell.quick.add",QuickAddModel:i,dependencyType:t}]}};this.fire("initBubble",n)},_$getPage:function(e){return this._$pageWrapper||(this._$pageWrapper=e.closest(".tau-page-entity")),this._$pageWrapper}})});
define('tau/ui/templates/relations/ui.template.relations.add.trigger',["tau/core/templates-factory"],function(t){var a={name:"relations.add.trigger",engine:"jqote2",markup:['<div class="tau-btn-wrap">','<span class="tau-inline-group">','<button class="tau-btn tau-search i-role-add-lookup"></button>','<button class="tau-btn tau-add i-role-quick-add tau-success"></button>',"</span>","</div>"]};return t.register(a)});
define('tau/components/component.relations.add.trigger',["tau/components/component.creator","tau/components/extensions/component.creator.extension","tau/components/extensions/bubble/extension.bubble.creator","tau/ui/extensions/relations/ui.extension.relations.add.trigger","tau/ui/templates/relations/ui.template.relations.add.trigger","tau/ui/extensions/container/ui.extension.container.childrenEvents"],function(e,n,t,o,i,r){return{create:function(a){var s={extensions:[n,t,o,r],template:i};return e.create(s,a)}}});
define('tau/ui/templates/relations/ui.template.relations.connection',["tau/core/templates-factory"],function(n){var a={name:"relations.connection",engine:"jqote2",markup:['<div class="tau-relations-connection">','<span class="tau-in-bg">','<span class="tau-out-bg">',"<b><%= this.masterRelationsCount %></b>",'<b class="tau-icon"></b>',"<b><%= this.slaveRelationsCount %></b>","</span>","</span>","</div>"]};return n.register(a)});
define('tau/models/relations/model.relations.connection',["Underscore","tau/core/model-base"],function(e,t){return t.extend({"bus beforeInit":function(e,t){var n=["masterRelations-count","slaveRelations-count"],i=t.config.context.entity;this.store.evictProperties(i.id,i.entityType.name,n);var s={id:i.id,fields:n};this.store.get(i.entityType.name,s).done({success:function(e){this.fire("dataBind",{masterRelationsCount:e[0].data["masterRelations-count"],slaveRelationsCount:e[0].data["slaveRelations-count"]})},scope:this})},"bus relations.changed":function(){this.fire("refresh")}})});
define('tau/components/component.relations.connection',["Underscore","tau/components/component.creator","tau/ui/templates/relations/ui.template.relations.connection","tau/models/relations/model.relations.connection","tau/ui/extensions/relations/ui.extension.relations.observer"],function(e,n,t,o,r){return{create:function(e){var i={extensions:[o,r],template:t};return n.create(i,e)}}});
define('tau/models/dataProviders/model.provider.items.relations',["Underscore","tau/core/class"],function(e,n){return n.extend({init:function(n){this.dataDeferred=$.Deferred();var r=e.bind(function(e,t){n.bus.removeListener("public.relationsReady",r,n.bus),this.dataDeferred.resolve(t[n.dependencyType])},this);n.bus.on("public.relationsReady",r)},fetch:function(e){this.dataDeferred.done(e)}})});
define('tau/models/relations/model.relations.data.fetcher',["Underscore","jQuery","tau/core/class","tau/core/termProcessor","tau/store/types"],function(t,e,i,n,a){return i.extend({init:function(t,e){this.config=this._createConfig(t,e)},fetchRelatedEntities:function(){var t=e.Deferred();return this.config.store.get(this.config.entityTypeName,this._buildRelationsCommand(!0)).done({success:function(e){this._fetchRelatedEntitiesInfo(e[0].data[this.config.relationsFieldName],function(e){t.resolve(e)}.bind(this))},scope:this}),t.promise()},fetchRelations:function(){return this._fetchData(this._buildRelationsCommand())},fetchRelationCounts:function(){return this._fetchData(this._buildRelationCountCommand())},_fetchData:function(t){this._evictRelationCounts();var i=e.Deferred();return this.config.store.get(this.config.entityTypeName,t).done({success:function(t){i.resolve(t)},scope:this}),i.promise()},_evictRelationCounts:function(){this.config.store.evictProperties(this.config.entityId,this.config.entityTypeName,["masterRelations","slaveRelations"])},_createConfig:function(t,e){var i={configurator:t.context.configurator,getTerms:t.context.getTerms,entityId:t.context.entity.id,entityTypeName:t.context.entity.entityType.name,store:t.store,relatedEntityFieldName:e,relationsFieldName:e+"Relations"};return i},_buildRelationsCommand:function(t){return{id:this.config.entityId,fields:[this._buildRelationsField(t)]}},_buildRelationCountCommand:function(){return{id:this.config.entityId,fields:["slaveRelations-count","masterRelations-count"]}},_buildRelationsField:function(t){var e={};if(e[this.config.relationsFieldName]=[{relationType:["name"]}],t){var i={};i[this.config.relatedEntityFieldName]=["id",{entityType:["name"]}],e[this.config.relationsFieldName].push(i)}return e},_fetchRelatedEntitiesInfo:function(e,i){var n=t.groupBy(e,t.bind(function(t){return t[this.config.relatedEntityFieldName].entityType.name},this)),a=this._buildRelatedEntitiesInfoRequests(n);t.parallel(a,t.bind(function(t,e){n=this._fillRelatedEntitiesInfo(n,e),i(this.transform(n))},this))},_buildRelatedEntitiesInfoRequests:function(e){return t.map(t.keys(e),function(i){return t.bind(function(n){this.config.store.find(i,{fields:this._getFieldsForRelatedEntityInfo(i),$query:{id:{$in:t.map(e[i],function(t){return t[this.config.relatedEntityFieldName].id},this)}}}).done({success:function(t){n(!1,t[0].data)}})},this)},this)},_fillRelatedEntitiesInfo:function(e,i){return e=t.reduce(i,function(e,i){return i.length>0&&(e[i[0].entityType.name]=t.reduce(i,function(e,i){var n=t.find(e,t.bind(function(t){return t[this.config.relatedEntityFieldName].id==i.id},this)),a=n[this.config.relatedEntityFieldName];return t.extend(a,i,{relatedEntityInfoIsFilled:!0}),e},e[i[0].entityType.name],this)),e},e,this)},_getFieldsForRelatedEntityInfo:function(e){e=e.toLowerCase();var i=a.findByKeyword(e),n=["id","name",{entityType:["name"]},{project:["abbreviation","color","name"]}];t.contains(i.simpleFields,"lastStatus")&&n.push("lastStatus");var o=function(t,e){if(i.refs.hasOwnProperty(t)){var a={};a[t]=e,n.push(a)}};return o("entityState",["name","isFinal"]),o("release",["name"]),o("iteration",["name"]),o("team",["name","icon"]),n},transform:function(e){var i=[],a=0,o=this.config.configurator.getUrlBuilder(),s=new n(this.config.getTerms());return t.reduce(t.values(e),function(e,i){return t.forEach(i,function(i){var n=i[this.config.relatedEntityFieldName];if(n.relatedEntityInfoIsFilled){var r=t.extend(n.entityType,{term:s.getTerms(n.entityType.name).iconSmall});e.push({id:n.id,__type:n.__type,entityType:r,name:n.name,project:n.project,team:n.team,entityState:n.entityState,hasLastStatus:n.hasOwnProperty("lastStatus"),lastStatus:n.lastStatus,release:n.release?n.release.name:null,iteration:n.iteration?n.iteration.name:null,url:o.getNewViewUrl(n.id,n.entityType.name,!0),relation:{id:i.id,__type:i.__type,relationType:i.relationType}}),n.entityType.id>a&&(a=n.entityType.id)}},this),e},i,this),t.sortBy(i,function(t){return t.entityState&&t.entityState.isFinal?a+t.entityType.id:t.entityType.id})}})});
define('tau/models/relations/model.relations.data',["Underscore","jQuery","tau/core/model-base","tau/models/relations/model.relations.data.fetcher"],function(e,t,i,n){return i.extend({"bus beforeInit":function(e,t){var i=t.config;this.entityId=i.context.entity.id,this.store=i.store,this.entityTypeName=i.context.entity.entityType.name,this.masterFetcher=new n(i,"master"),this.slaveFetcher=new n(i,"slave"),this._fetch()},_fetch:function(){this.store.evictProperties(this.entityId,this.entityTypeName,["masterRelations","slaveRelations"]),t.when(this.masterFetcher.fetchRelatedEntities(),this.slaveFetcher.fetchRelatedEntities()).then(e.bind(function(e,t){var i={master:e,slave:t};this.fire("public.relationsReady",i)},this))},"bus relations.changed":function(){this._fetch()},"bus public.relationsReady:last + public.relation.filter.changed:last":function(e,t,i){this.fire("public.relationsReady.filtered",{master:this._filter(t.master,i),slave:this._filter(t.slave,i)})},_filter:function(t,i){return t=e.chain(t),i.relationType&&(t=t.filter(function(e){return e.relation.relationType.id===i.relationType.id})),i.entityType&&(t=t.filter(function(e){return e.entityType.id===i.entityType.id})),i.project&&(t=t.filter(function(e){return e.project?e.project.id===i.project.id:-1===i.project.id})),i.team&&(t=t.filter(function(e){return e.team?e.team.id===i.team.id:-1===i.team.id})),t.value()}})});
define('tau/ui/extensions/list/relations/ui.extension.list.relations.refresher',["Underscore","jQuery","tau/core/extension.base"],function(e,n,t){return t.extend({"bus afterInit:last + afterRender:last + public.relationsReady.filtered":function(t,i,r,a){var o=e.map(a[i.config.dependencyType],function(e){return e.relation.id});r.element.find("tr").each(function(){var t=n(this),i=parseInt(t.data("relation-id")),r=e.contains(o,i);r?t.show():t.hide()})},"bus public.relationsReady":function(){this.fire("refresh")}})});
define('tau/ui/templates/relations/ui.template.relations.denied',["tau/core/templates-factory"],function(e){var t={name:"relations.denied",engine:"jqote2",markup:['<div class="tau-denied-relations">','This entity has <b><%= this.count %></b>&nbsp;<%= this.relationType %> <%= this.count>1?"relations" : "relation" %> that you can&#39t see, as you do not have sufficient permissions. ',"<% if (this.blockersCount > 0) { %>",'<b class="tau-relations-blockers-count"><%= this.blockersCount %></b> of them <%= this.blockersCount>1?"are blockers" : "is a blocker" %>',"<% } %>","</div>"]};return e.register(t)});
define('tau/ui/extensions/relations/ui.extension.relations.denied',["Underscore","tau/core/class","tau/components/extensions/component.extension.base","tau/models/relations/model.relations.data.fetcher","tau/ui/templates/relations/ui.template.relations.denied"],function(e,t,n,i,a){var o=n.extend({blockerRelationTypeId:2,"bus initialize + beforeInit":function(e,t,n){var a=n.config;this.dependencyType=a.dependencyType,this.dataFetcher=new i(a,this.dependencyType),this.dataFetcher.fetchRelationCounts().done(function(e){this.fire("relation.counts.fetched",e[0].data)}.bind(this))},"bus public.relationsReady + relation.counts.fetched":function(e,t,n){n[this.dependencyType+"Relations-count"]!=t[this.dependencyType].length&&this.dataFetcher.fetchRelations().done(function(e){this.fire("relations.fetched",e[0].data)}.bind(this))},"bus afterRender:last + difference.ready":function(e,t,n){var i=a.get().bind(null,this._getDataForTemplate(n));t.element.after(i),i.slideDown("fast")},"bus public.relationsReady + relations.fetched":function(t,n,i){var a=i[this._getDependencyTypePropertyName()],o=e.map(n[this.dependencyType],function(e){return e.relation.id}),r=e.chain(a).filter(function(t){return!e.contains(o,t.id)}).map(function(e){return{id:e.id,relationType:e.relationType.id}}).value();this.fire("difference.ready",r)},_getDependencyTypePropertyName:function(){return this.dependencyType.concat("Relations")},_getRelationTypeName:function(){return"master"==this.dependencyType?"inbound":"outbound"},_getDataForTemplate:function(t){return{relationType:this._getRelationTypeName(),count:t.length,blockersCount:e.filter(t,function(e){return e.relationType==this.blockerRelationTypeId}.bind(this)).length}}});return o});
define('tau/ui/extensions/list/relations/ui.extension.list.relations.remove',["tau/components/extensions/component.extension.base"],function(e){return e.extend({"bus afterRender":function(e){var n=e.data.element,t=this.config.store;n.on("click",".i-role-remove",function(e){var n=$(e.target).data("relationId");t.remove("relation",{id:n}).done()})}})});
define('tau/ui/extensions/ui.extension.help',["jQuery","tau/components/extensions/component.extension.base"],function(e,n){return n.extend({name:"ui.extension.help",category:"view","bus afterRender":function(n){var t=n.data.view;n.data.element.find(".i-role-help").each(function(){var n=e(this),o=n.next(".i-role-help-content").detach().show();n.tauBubble({content:o,className:"tau-bubble-tooltip",zIndex:999,onShow:function(){t.config.context.configurator.getKeyBoardManager().pushHandler({})},onHide:function(){t.config.context.configurator.getKeyBoardManager().popHandler()}})})}})});
define('tau/ui/templates/list_/grid.entity.relations/ui.template.list.grid.entity.relations',["tau/core/templates-factory","tau/ui/templates/list_/grid.entity/relation/ui.template.list.grid.entity.row.relation"],function(t){var e={name:"list.grid.entity.relations",markup:["<div>",'<table class="tau-table">',"<tbody>","{{tmpl(items) $item.data.config.currentView.rowTemplateName}}","</tbody>","</table>","</div>"],dependencies:["list.grid.entity.row.relation"]};return t.register(e)});
define('tau/components/component.relations.container',["Underscore","tau/components/component.container.with-shared-events","tau/components/extensions/component.creator.extension","tau/components/extensions/bubble/extension.bubble.creator","tau/models/dataProviders/model.provider.items.relations","tau/models/relations/model.relations.data","tau/ui/extensions/list/relations/ui.extension.list.relations.refresher","tau/ui/extensions/relations/ui.extension.relations.observer","tau/ui/extensions/relations/ui.extension.relations.denied","tau/ui/extensions/list/relations/ui.extension.list.relations.remove","tau/ui/extensions/ui.extension.help","tau/ui/extensions/list/request/extension.list.entityState","tau/ui/templates/list_/grid.entity.relations/ui.template.list.grid.entity.relations"],function(e,t,n,i,s,o,a,r,l,d,u,c,p){var m=function(e,t,n,i){var o=e+".relations.container";return{type:"container.with-shared-events",name:o,layout:"selectable",template:{name:o,markup:['<div class="tau-relations-item i-role-list-'+e+'">','<div class="tau-entity-caption">',"<h2>"+n+"</h2>",'<button type="button" tabindex="-1" class="tau-help i-role-help"></button>','<div class="tau-help-content i-role-help-content">'+i+"</div>",'<div class="tau-btn-wrap i-role-add-holder">','<span class="tau-txt">Add relation:</span>',"</div>","</div>",'<div class="tau-relations-cont i-role-list-holder" />',"</div>"]},extensions:[u],children:[{type:"relations.add.trigger",dependencyType:e,selector:".i-role-add-holder"},{name:e+" relations list",type:"list.editable",selector:".i-role-list-holder",itemsDataProvider:s,dependencyType:e,extensions:[l,a,d,c],views:[{rowTemplateName:"list.grid.entity.row.relation"}],template:p}]}};return{create:function(n){var i={template:{name:"relations.container",markup:['<div class="tau-relations"></div>']},extensions:[o,r],children:[{type:"relations.filter"},m("master","inbound","Inbound","The current entity depends on the inbound entities, so they should be completed <b>BEFORE</b> the current entity is started."),{type:"relations.connection",context:{entity:n.context.entity}},m("slave","outbound","Outbound","The outbound entities depend on the current entity, so they should be started <b>AFTER</b> the current entity is completed.")]};return t.create(e.extend(n,i))}}});
define('tau/models/relations/model.relations.filter',["Underscore","tau/core/model-base"],function(i,t){return t.extend({"bus public.relationsReady":function(i,t){this.fire("dataBind",{isInitiallyHidden:t.master.length+t.slave.length<2})},"bus public.relationsReady.filtered":function(t,e){var n=i.flatten([e.master,e.slave]);this._buildRelationTypes(n),this._buildEntityTypes(n),this._buildProjects(n),this._buildTeams(n)},_buildRelationTypes:function(i){var t=this._buildFilter(i,function(i){return i.relation.relationType});this.fire("relationTypes.ready",t)},_buildEntityTypes:function(i){var t=this._buildFilter(i,function(i){return i.entityType});this.fire("entityTypes.ready",t)},_buildProjects:function(t){var e=this._buildFilter(t,function(i){return i.project});e=i.chain(e).map(function(i){return i?i:{id:-1,color:"",abbreviation:"No Project",name:"No Project"}}).sortBy(function(i){return i.id}).value(),this.fire("projects.ready",e)},_buildTeams:function(t){var e=this._buildFilter(t,function(i){return i.team});e=i.chain(e).map(function(i){return i?i:{id:-1,name:"No Team"}}).sortBy(function(i){return i.id}).value(),this.fire("teams.ready",e)},_buildFilter:function(t,e){return i.chain(t).map(e).uniq(!1,function(i){return i?i.id:null}).value()}})});
define('tau/ui/templates/relations/ui.template.relations.filter',["tau/core/templates-factory"],function(i){var t={name:"relations-filter",engine:"jqote2",markup:['<div class="tau-filter-block" <% if (this.isInitiallyHidden) { %>style="display: none;"<% } %>>','<div class="tau-filter-row">','<div class="tau-filter"><span class="tau-filter-txt">Filter by</span></div>',"</div>",'<div class="tau-filter-row">','<div class="tau-filter"><div class="tau-filter-txt i-role-filter-relationType"></div></div>',"</div>",'<div class="tau-filter-row">','<div class="tau-filter"><div class="tau-filter-txt i-role-filter-entityType"></div></div>',"</div>",'<div class="tau-filter-row">','<div class="tau-filter"><div class="tau-filter-txt i-role-filter-project"></div></div>',"</div>",'<div class="tau-filter-row">','<div class="tau-filter"><div class="tau-filter-txt i-role-filter-team"></div></div>',"</div>","</div>"]};return i.register(t)});
define('tau/ui/extensions/relations/relations.filter',["Underscore","jQuery","tau/core/class"],function(e,t,i){return i.extend({init:function(e){this.configurator=e.configurator,this.$el=e.$el,this.outputTemplate=e.outputTemplate.get(),this.optionTemplate=e.optionTemplate.get(),this.callback=e.callback,this.placeholderText=e.placeholderText,this.selectedFilter=null,this.bubbleClass=e.bubbleClass},setFilterOptions:function(t){this.filterOptions=t,this.selectedFilter&&!e.findWhere(this.filterOptions,{id:this.selectedFilter.id})&&this._setSelectedFilter(null),this._renderSelectedFilter()},_renderOptionsList:function(){var i=this.optionTemplate;return e.reduce(this.filterOptions,e.bind(function(e,t){return e.append(i.bind({},this._getTemplateData(t,!0)))},this),t('<div class="drop-down-list tau-filter-drop-down-list"></div>'))},_getTemplateData:function(e,t){return{context:{isOption:t},value:e}},_renderBubble:function(){var e=this._renderOptionsList();this.$bubbled.tauBubble("option","content",e),this._attachList(e)},_attachList:function(t){var i={items:".drop-down-option",className:"drop-down-option_hover",keyboardManager:this.configurator.getKeyBoardManager(),onSelect:e.bind(this._applySelectedOption,this)};t.listSelectable(i).listSelectable("enable")},_attachBubble:function(t){t.tauBubble({className:this.bubbleClass,onPositionConfig:function(e){return e.my="center top",e.at="center bottom",e},onShow:e.bind(this._renderBubble,this)}),this.$bubbled=t},_renderSelectedFilter:function(){if(this.$el.empty(),this.selectedFilter){this.$el.append(this.outputTemplate.bind({},this._getTemplateData(this.selectedFilter,!1)));var i=t('<span class="tau-clear-filter i-role-reset" />');i.click(e.bind(function(){this._setSelectedFilter(null),this._renderSelectedFilter()},this)),this.$el.children().append(i)}else{var l=t('<span class="tau-filter-placeholder i-role-trigger"></span>');l.text(this.placeholderText),this.$el.append(l)}this._attachBubble(this.$el.find(".i-role-trigger"))},_applySelectedOption:function(t){var i=t.data("option-id");this._setSelectedFilter(e.findWhere(this.filterOptions,{id:i})),this._renderSelectedFilter()},_setSelectedFilter:function(t){this.selectedFilter=t,e.defer(this.callback,t)}})});
define('tau/ui/templates/relations/filters/ui.template.relations.filter.relationType.option',["tau/core/templates-factory"],function(t){return t.register({name:"relations.filter.relationType.output",engine:"jqote2",markup:['<div class="drop-down-option i-role-option" data-option-id="<%! this.value.id %>">','<span class="tau-relation-icon tau-<%! this.value.name.toLowerCase() %>"/>','<span class="<% if (this.context.isOption) { %>tau-bubble-txt<% } else { %>property-text<% } %>">',"<%! this.value.name %>","</span>","</div>"]})});
define('tau/ui/templates/relations/filters/ui.template.relations.filter.entityType.option',["tau/core/templates-factory"],function(t){return t.register({name:"relations.filter.entityType.output",engine:"jqote2",markup:['<div class="drop-down-option i-role-option" data-option-id="<%! this.value.id %>">','<i class="tau-entity-icon tau-<%! this.value.name.toLowerCase() %>">','<%! fn.term(this.value.name, "iconSmall") %>',"</i>",'<span class="<% if (this.context.isOption) { %>tau-bubble-txt<% } else { %>property-text<% } %>">','<%! fn.term(this.value.name, "name") %>',"</span>","</div>"]})});
define('tau/ui/templates/relations/filters/ui.template.relations.filter.project.option',["tau/core/templates-factory"],function(t){return t.register({name:"relations.filter.project.option",engine:"jqote2",markup:['<div class="drop-down-option i-role-option" data-option-id="<%! this.value.id %>">','<i class="tau-icon tau-icon_type_color" style="background-color: <%! this.value.color || "transparent" %>"></i>','<span class="tau-bubble-txt"><%! this.value.name %></span>',"</div>"]})});
define('tau/ui/templates/relations/filters/ui.template.relations.filter.project.output',["tau/core/templates-factory"],function(e){return e.register({name:"relations.filter.project.output",engine:"jqote2",markup:["<div>",'<span class="tau-project-name" style="background-color: <%! this.value.color || "transparent" %>;"><%! this.value.abbreviation %></span>',"</div>"]})});
define('tau/ui/templates/relations/filters/ui.template.relations.filter.team.option',["tau/core/templates-factory"],function(i){return i.register({name:"relations.filter.team.option",engine:"jqote2",markup:['<% var iconClass = ""; %>','<% if (this.value.id !== -1) { iconClass = "tau-icon_name_" + (this.value.icon || "trihead"); } %>','<div class="drop-down-option i-role-option" data-option-id="<%! this.value.id %>">','<i class="tau-icon tau-icon_type_svg <%= iconClass %>"></i>','<span class="tau-bubble-txt"><%! this.value.name %></span>',"</div>"]})});
define('tau/ui/templates/relations/filters/ui.template.relations.filter.team.output',["tau/core/templates-factory"],function(t){return t.register({name:"relations.filter.team.output",engine:"jqote2",markup:['<div class="drop-down-option i-role-option" data-option-id="<%! this.value.id %>">',"<% if (this.value.id !== -1) { %>",'<i class="tau-icon tau-icon_type_svg tau-icon_name_<%! this.value.icon || "trihead" %>"></i>',"<% } %>",'<span class="property-text"><%! this.value.name %></span>',"</div>"]})});
define('tau/ui/extensions/relations/ui.extension.relations.filter',["Underscore","jQuery","tau/components/extensions/component.extension.base","./relations.filter","tau/ui/templates/relations/filters/ui.template.relations.filter.relationType.option","tau/ui/templates/relations/filters/ui.template.relations.filter.entityType.option","tau/ui/templates/relations/filters/ui.template.relations.filter.project.option","tau/ui/templates/relations/filters/ui.template.relations.filter.project.output","tau/ui/templates/relations/filters/ui.template.relations.filter.team.option","tau/ui/templates/relations/filters/ui.template.relations.filter.team.output"],function(e,t,i,n,r,l,a,o,s,p){return i.extend({"bus beforeInit + afterRender":function(t,i,u){var f=e.bind(function(t,r,l,a,o){var s="i-role-filter-"+t;return new n({$el:u.element.find("."+s),outputTemplate:a||l,optionTemplate:l,configurator:i.config.context.configurator,callback:e.partial(e.bind(this.filterChanged,this),t),placeholderText:r,bubbleClass:(o||"")+" "+s})},this),c={relationType:f("relationType","Relation Type",r),entityType:f("entityType","Entity Type",l),project:f("project","Project",a,o,"tau-bubble-project"),team:f("team","Team",s,p,"tau-bubble-team")};this.fire("filters.ready",c),this.filterDefinition={},this.fire("public.relation.filter.changed",this.filterDefinition)},"bus filters.ready:last + entityTypes.ready":function(e,t,i){t.entityType.setFilterOptions(i)},"bus filters.ready:last + projects.ready":function(e,t,i){t.project.setFilterOptions(i)},"bus filters.ready:last + relationTypes.ready":function(e,t,i){t.relationType.setFilterOptions(i)},"bus filters.ready:last + teams.ready":function(e,t,i){t.team.setFilterOptions(i)},"bus afterRender:last + public.relationsReady":function(e,t,i){var n=t.element;i.master.length+i.slave.length>=2?"none"===n.css("display").toLowerCase()&&n.slideDown():n.slideUp()},filterChanged:function(e,t){this.filterDefinition[e]=t,this.fire("public.relation.filter.changed",this.filterDefinition)}})});
define('tau/components/component.relations.filter',["Underscore","tau/components/component.creator","tau/models/relations/model.relations.filter","tau/ui/templates/relations/ui.template.relations.filter","tau/ui/extensions/relations/ui.extension.relations.filter"],function(e,t,n,r,i){return{create:function(e){var o={extensions:[n,i],template:r};return t.create(o,e)}}});
define('tau/models/model.release.progressBar',["Underscore","tau/models/model.iteration.progressBar"],function(e,t){var o=t.extend({name:"Iteration Progress Bar",_getDefaultFields:function(){return["bugs-effortToDo-sum","bugs-effortCompleted-sum","userStories-effortToDo-sum","userStories-effortCompleted-sum",{features:["effortToDo","effortCompleted","userStories-count"]}]},onEntityRetrieved:function(t){var o=t.data,r=e.filter(o.features,function(e){return 0===e["userStories-count"]}),f=e.pluck(r,"effortToDo"),u=e.pluck(r,"effortCompleted"),s=function(t){return e.reduce(t,function(e,t){return e+t},0)},n=o["bugs-effortToDo-sum"]+o["userStories-effortToDo-sum"]+s(f),i=o["bugs-effortCompleted-sum"]+o["userStories-effortCompleted-sum"]+s(u);this.effortToDo=n,this.effortCompleted=i,this.calculatePercentCompleted()}});return o});
define('tau/components/component.release.assignedEffort',["tau/components/component.creator","tau/models/model.release.progressBar","tau/ui/templates/label/ui.template.assignmentEffort.label"],function(e,t,a){return{create:function(n){var r={extensions:[t],template:a};return e.create(r,n)}}});
define('tau/components/component.release.progressBar',["tau/components/component.creator","tau/models/model.release.progressBar","tau/ui/templates/progressBar/ui.template.iteration.progressBar"],function(e,t,r){return{create:function(a){var n={extensions:[t],template:r};return e.create(n,a)}}});
define('tau/models/model.releaseNotes',["Underscore","tau/core/model-base","tau/utils/utils.date"],function(e,t,i){var a=t.extend({onInit:function(){var t=this.config.context.entity,a=this.config.store,r=this;a.unbind(this),a.on({eventName:"afterSave",type:"assignable",listener:this},function(t){var i=["entityState","name"],a=["feature","userstory","bug"];e.include(a,t.data.cmd.type.toLowerCase())&&e.intersection(e.keys(t.data.changes),i).length&&r.bus.fire("refresh")});var n=["feature","userstory","bug"];e.forEach(n,function(e){a.on({eventName:"afterRemove",type:e,listener:r},function(){r.bus.fire("refresh")})}),a.get("release",{id:t.id,fields:["id","name","startDate","endDate"]}).find("bugs",{fields:["id","name"],$query:{"Release.Id":t.id,"EntityState.isFinal":1},$orderBy:"id"}).find("features",{fields:["id","name",{release:["id"]},{entityState:["id","isFinal"]},{userStories:["id","name",{release:["id"]},{entityState:["id","isFinal"]}]}],$query:{"Release.Id":t.id},$orderBy:"id"}).find("userStories",{fields:["id","name",{release:["id"]},{feature:["id"]},{entityState:["id","isFinal"]}],$query:{"Release.Id":t.id,"EntityState.isFinal":1},$orderBy:"id"}).done({success:function(t){var a=t[2].data,n=[],s=e.pluck(a,"id");e.forEach(a,function(t){var i=[],a=[];e.forEach(t.userStories,function(e){e.release&&e.release.id===t.release.id&&(1==e.entityState.isFinal?i.push(e):a.push(e))}),i.length>0?(t.userStories=i,n.push(t)):1==t.entityState.isFinal&&a.length>0&&a.length==t.userStories.length&&(t.userStories=[],n.push(t))});var d=t[0].data;d.endDate=i.format.date.short(d.endDate);var u=t[1].data,o=t[3].data;o=e.filter(o,function(t){return!t.feature||!t.feature.id||-1==e.indexOf(s,t.feature.id)}),r.bus.fire("dataBind",{item:d,features:n,bugs:u,userStories:o})}})}});return a});
define('tau/ui/templates/releaseNotes/ui.template.releaseNotes',["tau/core/templates-factory"],function(e){var a={name:"releaseNotes",markup:['<div class="tau-releaseNotes">','<div class="tau-releaseNotes__inner">','<span class="tau-releaseNotes__title">${item.name} / ${item.endDate}</span><br />',"----------------------------------------------------------<br /><br />","{{if features.length || userStories.length}}",'<div class="tau-releaseNotes__subtitle">Added features</div><br /><br />',"{{each features}}",'<div class="tau-releaseNotes__feature" data-name="${name}">',"- ${name}<br />","{{each userStories}}",'<div class="tau-releaseNotes__userstory" data-name="${name}">',"&nbsp;&nbsp;&nbsp;&nbsp;- ${name}<br />","</div>","{{/each}}","</div>","{{/each}}","{{each userStories}}",'<div class="tau-releaseNotes__userstory tau-releaseNotes__userstory_separate_true" data-name="${name}">',"- ${name}<br />","</div>","{{/each}}","<br /><br />","{{/if}}","{{if bugs.length}}",'<div class="tau-releaseNotes__subtitle">Fixed Bugs</div><br /><br />',"{{each bugs}}",'<div class="tau-releaseNotes__bug" data-name="${name}">',"#${id} ${name}<br />","</div>","{{/each}}","{{/if}}","</div>","</div>"],dependencies:[]};return e.register(a)});
define('tau/components/component.releaseNotes',["tau/components/component.creator","tau/models/model.releaseNotes","tau/ui/templates/releaseNotes/ui.template.releaseNotes"],function(e,t,a){return{create:function(n){var o={extensions:[t],template:a};return e.create(o,n)}}});
define('tau/models/reports/model.reports',["Underscore","tau/core/extension.base"],function(e,t){return t.extend({"bus beforeInit":function(t,r){var i=r.config,n=i.context.configurator,o=n.getAppStateStore(),c=this;o.unbind({listener:this}),o.bind({fields:["acid"],listener:this,callback:function(){c.fire("refresh")}}),o.get({fields:["acid"],callback:function(t){var r=t.acid,i={id:r,acid:r,fields:["acid",{selectedProjects:["id","name"]},{selectedTeams:["id","name"]}]};n.getStore().get("context",i).done({success:function(t){var r=t[0].data;e.isArray(r)&&(r=r[0]),c.fire("context.ready",r)},failure:function(){var e={acid:"",selectedProjects:[],selectedTeams:[]};c.fire("context.ready",e)}})}})},"bus afterInit + context.ready":function(e,t,r){var i=t.config.context.configurator.getApplicationPath(),n=this._createMenuEntries(r,i);this.fire("dataBind",n)},_createMenuEntries:function(e,t){if(!e.selectedProjects.length&&!e.selectedTeams.length)return[];var r=[{title:"Process Control",report:"processControl"},{title:"Burn Down",report:"burnDown"},{title:"Cycle Time Distribution",report:"cycleTimeDistribution"},{title:"Relations Network",report:"relationsNetwork"}];return e.selectedProjects.length&&(r.push({title:"Cumulative Flow",url:t+"/Project/Reports/Report.aspx?Report=CumulativeFlow&rmnav=1&tp3=1&acid="+e.acid}),r.push({title:"Other Reports&hellip;",url:t+"/Project/Reports/Reports.aspx?rmnav=1&tp3=1&acid="+e.acid})),r}})});
define('tau/ui/extensions/reports/ui.extension.reports',["Underscore","jQuery","tau/core/extension.base","tp/reports/tp.application.reports"],function(t,e,n,r){return n.extend({"bus afterInit:last + subMenu.ready":function(e,n,r){var a=n.config.context.configurator;r.on("click",".tau-menu-item",t.bind(this._onMenuItemClick,this,a))},_onMenuItemClick:function(t,n){var a=e(n.target),i=a.attr("data-url"),o=a.attr("data-report");i?(a.tauIFramePopup({url:i}),a.tauIFramePopup("show")):o&&r.initialize(t,{active:o})}})});
define('tau/components/component.reports',["tau/components/component.creator","tau/models/reports/model.reports","tau/ui/extensions/board.main.menu/ui.extension.board.main.menu","tau/ui/extensions/reports/ui.extension.reports"],function(e,t,i,n){return{create:function(r){var a={name:"menu-item-reports",engine:"jqote2",markup:['<div class="tau-menu-item tau-menu-item-reports tau-user-menu">','   <span class="tau-popup-link tau-extension-board-tooltip" data-title="Check progress">Reports</span>','   <ul class="tau-user-submenu">',"<% for (var i = 0, len = this.length; i < len; i++) { %>","       <% var item = this[i]; %>",'       <li class="tau-menu-item" <%=item.url?("data-url="+item.url+""):""%> <%=item.report?("data-report="+item.report+""):""%>><%=item.title%></li>',"<% } %>","<% if (!this.length) { %>",'       <li class="tau-menu-item tau-menu-item-disabled">You need to select a project or a team to see the reports.</li>',"<% } %>","   </ul>","</div>"]},s={extensions:[t,i,n],template:a};return e.create(s,r)}}});
define('tau/components/extensions/requestsList/extension.requestList.refresher',["tau/components/extensions/component.extension.base"],function(t){return t.extend({init:function(){this._super.apply(this,arguments),this.bus.getGlobalBus().on("requestWasAttachedToEntity",this.onRequestsUpdates,this),this.bus.getGlobalBus().on("requestIsDetachedFromEntity",this.onRequestsUpdates,this),this.bus.getGlobalBus().on("bugWasMarkedAsDuplicate",this.onBugWasMarkedAsDuplicate,this)},destroy:function(){this.bus.getGlobalBus().removeListener("requestWasAttachedToEntity",this.onRequestsUpdates,this),this.bus.getGlobalBus().removeListener("requestIsDetachedFromEntity",this.onRequestsUpdates,this),this.bus.getGlobalBus().removeListener("bugWasMarkedAsDuplicate",this.onBugWasMarkedAsDuplicate,this),this._super.apply(this,arguments)},refreshComponentIfEntityFromCurrentContext:function(t){this.isEntityInContext(t)&&this.refresh()},onRequestsUpdates:function(t){this.refreshComponentIfEntityFromCurrentContext(t)},onBugWasMarkedAsDuplicate:function(t){var e=this.config.context.entity.id;e===t.data.bugId&&this.refresh()},refresh:function(){this.fire("evictProperty"),this.fire("refresh")}})});
define('tau/components/extensions/requestsList/extension.requestList.actions.detach',["jQuery","tau/components/extensions/component.extension.base"],function(t,e){return e.extend({category:"edit","bus dataBind+afterRender":function(e){var n=this,a=e.dataBind.data,i=e.afterRender.data.element;if(a.items&&a.items.length){var c=t('<td class="action"></td>'),o=t('<span class="action-detach button small">Detach</span>');o.click(t.proxy(n.onActionDetach,n)),c.append(o);var s=i.find("table.base-info-list tbody > tr");s.append(c)}},onActionDetach:function(e){var n=this,a=n.config.context.entity.id,i=t(e.target).parent().parent().data().tmplItem.data.id,c=n.config.context.configurator.getActionsService();c.detachRequest({generalId:a,requestId:i,success:t.proxy(n.onRequestDetachedSuccess,n)})},onRequestDetachedSuccess:function(){var t=this;t.fire("evictProperty");var e=t.config.context.entity.id;t.fire("requestIsDetachedFromEntity",{entity:{id:e}})}})});
define('tau/components/component.requestList',["tau/components/component.list.baseInfo","tau/components/extensions/requestsList/extension.requestList.refresher","tau/components/extensions/requestsList/extension.requestList.actions.detach"],function(e,t,s){return{create:function(n){var o={extensions:[t,s]};return n.typeName="request",n.propertyName="requests",e.create(n,o)}}});
define('tau/models/model.revisionList',["Underscore","tau/core/model-base","tau/utils/utils.date"],function(e,i,t){return i.extend({retrieveRevisions:function(e){for(var i=this.store,t=["id","sourceControlId","description","commitDate",{author:["firstName","lastName"]},{revisionFiles:["id","fileName","fileAction"]}],n=0;n<e.length;n++)i=i.get(e[n].type,{id:e[n].id,nested:!0,fields:["id",{revisions:t}]});i.done({success:this.onRevisionsRetrieved,scope:this})},onInit:function(){var e=this,i=e.config.context.entity,t=i.entityType.name,n=i.id,s=[{type:t,id:n}],o=this.store;"userstory"==t.toLowerCase()?o.get(t,{id:n,fields:[{tasks:["id"]}]}).done({success:this.onTasksIdRetrieved,scope:this}):this.retrieveRevisions(s)},onTasksIdRetrieved:function(i){var t=i[0].data,n=[{type:t.__type,id:t.id}];n=n.concat(e.map(t.tasks,function(e){return{id:e.id,type:e.__type}})),this.retrieveRevisions(n)},onRevisionsRetrieved:function(i){var t=e.pluck(i,"data");t=e.pluck(t,"revisions"),t=e.flatten(t),this.bindRevisions(t)},onRevisionIdsRetrieved:function(i){var t=e.clone(i[0].data.revisions);if(i.length>1){var n=e.pluck(i[1].data,"revisions");e.each(n,function(e){t=t.concat(e)})}e.pluck(t,"id")},bindRevisions:function(i){var n={Add:"Added",Delete:"Deleted",Modify:"Modified"};i=e.sortBy(i,function(e){return-e.id}),this.fire("dataBind",{items:e.map(i,function(i){var s=i.author||{firstName:"unknown",lastName:""},o=e.trim([s.firstName,s.lastName].join(" ")),r={commitDate:t.format.datetime.short(t.convertToTimezone(i.commitDate)),author:o,revisionFiles:e.map(i.revisionFiles,function(i){return e.extend(e.clone(i),{fileAction:n[i.fileAction]||i.fileAction})})};return e.extend(e.clone(i),r)})})},onEntityRetrieved:function(e){var i=e.data.revisions;this.bindRevisions(i)},"bus evictTestCases":function(){var e=this.config.context.entity;this.store.evictProperties(e.id,e.entityType.name,["testCases","testCases-count"])}})});
define('tau/ui/extensions/testCaseList/ui.extension.testCaseList',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,t,n){return n.extend({"bus afterRender":function(e){var t=this;t.element=e.data.element,t.element.find("tbody .extra-info").click(function(){t._onButtonClick.call(t,this)}),t.element.find("thead .extra-info.expand").click(function(){t.expandAll()}),t.element.find("thead .extra-info.collapse").click(function(){t.collapseAll()})},"bus expandTestCase":function(e){var n=e.data.testCaseId;this.element.find("tbody.collapsed").each(function(){t(this).tmplItem().data.id==n&&t(this).removeClass("collapsed").find(".extra-info").removeClass("expand").addClass("collapse")})},expandAll:function(){this.element.find("tbody.collapsed").removeClass("collapsed"),this._changeButtonsState("expand","collapse","-")},collapseAll:function(){this.element.find("tbody:not(.collapsed)").addClass("collapsed"),this._changeButtonsState("collapse","expand","+")},_changeButtonsState:function(e,n,l){var a="tbody .extra-info."+e,s=function(){t(this).addClass(n).removeClass(e).children("div").text(l)};this.element.find(a).each(s)},_onButtonClick:function(e){t(e).toggleClass("collapse").toggleClass("expand").parents("tbody").toggleClass("collapsed");var n=t(e).children("div"),l=n.text();l="+"==l?"-":"+",n.text(l)}})});
define('tau/ui/templates/common/ui.template.entityLink',["tau/core/templates-factory","tau/ui/tags/ui.tag.term"],function(e,t){var i={tags:[t],name:"entity-link",markup:['<a href="${url}" class="ui-link-entity">','<em class="ui-type-icon ui-type-icon-${__type.toLowerCase()}">${id}</em>',"</a>&nbsp;&nbsp;"],dependencies:[]};return e.register(i)});
define('tau/ui/templates/revisionList/ui.template.revisionList.files',["tau/core/templates-factory","tau/ui/templates/common/ui.template.entityLink"],function(e){var t={name:"revision-list-files",markup:["<tr>",'   <td class="actions"><span>${fileAction}</span></td>','   <td class="diff"></td>','   <td class="files"><a target="_blank" class="vcsViewDisabled" disabled="disabled">${fileName}</a></td>',"</tr>"].join(""),dependencies:["entity-link"]};return e.register(t)});
define('tau/ui/templates/revisionList/ui.template.revisionList.revision',["tau/core/templates-factory","tau/ui/templates/common/ui.template.entityLink","tau/ui/templates/revisionList/ui.template.revisionList.files"],function(t){var s={name:"revision-list-revision",markup:['<tbody class="collapsed">','   <tr class="first-row">','       <td class="toggler"><button class="extra-info expand" type="button"><div>+</div></button></td>','       <td class="revision-id">#&nbsp;${sourceControlId}</td>','       <td class="revision">${commitDate}&nbsp;by&nbsp;<span class="author">${author}</span></td>','       <td class="revision-comment">${description}</td>',"   </tr>",'   <tr class="revision-files second-row">',"       <td></td>",'       <td colspan="3">',"           <table>",'           {{tmpl(revisionFiles) "revision-list-files"}}',"           </table>","       </td>","   </tr>","</tbody>"].join(""),dependencies:["entity-link"]};return t.register(s)});
define('tau/ui/templates/revisionList/ui.template.revisionList',["tau/core/templates-factory","tau/ui/tags/ui.tag.term","tau/ui/templates/revisionList/ui.template.revisionList.revision"],function(i,s){var t={name:"revision-list",options:{contentSelector:".ui-revisionList-content"},tags:[s],markup:['<div class="ui-revisionList">','   <div class="ui-revisionList-content"{{if items.length === 0}} style="display:none"{{/if}}>','       <table class="ui-revisionList">',"           <colgroup>",'               <col class="toggler">','               <col class="revision-id">','               <col class="revision">','               <col class="comment">',"           </colgroup>","           <thead>","               <tr>",'                   <th class="toggler"></th>','                   <th class="revision-id"></th>','                   <th class="revision"></th>','                   <th class="comment"></th>',"               </tr>","           </thead>",'           {{tmpl(items) "revision-list-revision"}}',"       </table>","   </div>","</div>"].join(""),dependencies:["revision-list-revision"]};return i.register(t)});
define('tp/plugins/pluginsRepository',["app.path","tp/gateway","jQuery"],function(t,i,e){function n(){this._ctor()}var s=t.get();return n.prototype={_requestUrlBase:"/api/v1/Plugins.asmx",_registeredPlugins:null,_waitingForPluginsCallbacks:null,_ctor:function(){this.gateway=i},_getUrl:function(){var t=s+this._requestUrlBase;return t},pluginsRetrieved:function(t){this._registeredPlugins=t;for(var i=0;i<this._waitingForPluginsCallbacks.length;i++)this._waitingForPluginsCallbacks[i](this._registeredPlugins)},getStartedPlugins:function(t){this._registeredPlugins||this._waitingForPluginsCallbacks?!this._registeredPlugins&&this._waitingForPluginsCallbacks?this._waitingForPluginsCallbacks.push(t):this._registeredPlugins&&t(this._registeredPlugins):(this._waitingForPluginsCallbacks=[t],this.gateway.postJSON(this._getUrl(),{},e.proxy(this.pluginsRetrieved,this)))},pluginStartedAndHasAtLeastOneProfile:function(t,i,n){this.getStartedPlugins(e.proxy(function(s){var r=e.grep(s,function(i){var n=e.grep(i.plugins,function(i){return i.name==t});if(0===n.length)return!1;var s=!1;return e(n).each(function(t,i){i.profiles.length>0&&(s=!0)}),s});r.length>0?i():n&&n()},this))}},new n});
define('tp/bus',["jQuery"],function(){var n=function(){var n={},i=function(i,r,e){var t=i||!1,f=r||[];if(t)for(var o in n)if("function"==typeof n[o]["on"+t])try{var u=e||n[o];n[o]["on"+t].apply(u,f)}catch(c){}},r=function(i,r,t){if(i in n){if(!t)throw new Error("Mediator name conflict: "+i);e(i)}n[i]=r},e=function(i){i in n&&delete n[i]};return{name:"Bus",publish:i,subscribe:r,unsubscribe:e}};return n()});
define('tp/plugins/profileNameSource',["tp/bus","app.path","jQuery","tp/mashups"],function(e,t){function n(e){this._create(e)}return n.prototype={_create:function(){this.bus=e,this.bus.subscribe("ProfileNameSource",{onProfileSaveSucceed:$.proxy(function(e){this.setProfileName(e.Name)},this)},!0)},getPluginName:function(){return new t.tp.URL(location.href).getArgumentValue("PluginName")},getProfileNameKey:function(){return"ProfileName"},getProfileName:function(){var e=new t.tp.URL(location.href),n=e.getArgumentValue(this.getProfileNameKey());if(!n){var i=e.getReference();i&&(n=i.substr(1))}return n},setProfileName:function(e){this.getProfileName()||(window.location=window.location+"#"+e)}},new n});
define('tp/plugins/commandGateway',["jQuery","tp/plugins/profileNameSource","tp/gateway","app.path"],function(e,i,t,r){function a(e){this._create(e)}return a.prototype={_requestUrlBase:"/api/v1/Plugins.asmx/{PluginName}/Commands/{CommandName}",_requestForProfileUrlBase:"/api/v1/Plugins.asmx/{PluginName}/Profiles/{ProfileName}/Commands/{CommandName}",_pluginName:null,_create:function(e){this.profileNameSource=i,this.gateway=t,this._pluginName=e&&e.pluginName?e.pluginName:this.profileNameSource.getPluginName()},_getUrl:function(e){var i=this._requestUrlBase.replace(/{PluginName}/g,this._pluginName).replace(/{CommandName}/g,e);return new r.tp.WebServiceURL(i).url},_getUrlForProfile:function(e,i){var t=this._requestForProfileUrlBase.replace(/{PluginName}/g,this._pluginName).replace(/{ProfileName}/g,i||this.profileNameSource.getProfileName()).replace(/{CommandName}/g,e);return new r.tp.WebServiceURL(t).url},_post:function(e,i,t,r,a){this.gateway.postJSON(e,i,function(e){t&&t(e)},function(e){r&&r(e.responseText)},function(e){a&&a(e.responseText)})},execute:function(e,i,t,r,a){this._post(this._getUrl(e),i,t,r,a)},executeForProfile:function(e,i,t,r,a){this._post(this._getUrlForProfile(e),i,t,r,a)},executeForSpecificProfile:function(e,i,t,r,a,n){this._post(this._getUrlForProfile(i,e),t,r,a,n)}},a});
define('tp/popup',["jQuery"],function(i){i.widget("ui.popup",i.ui.dialog,{options:{modal:!0,position:"center",draggable:!1,resizable:!1,fitToWindow:!0,horizontalPadding:20,verticalPadding:20},_create:function(){this._super();var t=i.proxy(this._resize,this),e=i.proxy(this.close,this);this.element.off("popupopen popupclose popupresize"),this.element.bind("popupopen",function(){i(window).bind("resize",t),i(".ui-widget-overlay").click(e)}),this.element.bind("popupclose",function(){i(window).unbind("resize",t),i("ui-widget-overlay").unbind("click",e)});var n=this;this.element.bind("popupresize",function(){n.uiDialog.width()<n.options.minWidth&&n.uiDialog.width(n.options.minWidth),n.element.width()!=n.uiDialog.width()&&n.element.width(n.uiDialog.width())})},_init:function(){this._super();var i=this.element.parent();i.addClass("tau-dialog-container"),this.options.parentClassName&&i.addClass(this.options.parentClassName),this._resize()},open:function(){this._super(),this._resize()},_title:function(i){i.html(this.options.title||"&#160;")},_resize:function(){if(this.options.fitToWindow){var t=i(window).width(),e=Math.max(this.options.minWidth,t-2*this.options.horizontalPadding);this.uiDialog.width(e),this.element.width(e);var n=i(window).height(),o=Math.max(this.options.minHeight,n-2*this.options.verticalPadding);this.uiDialog.height(o),this.element.height(o-this.uiDialog.find(".ui-dialog-titlebar").outerHeight(!1))}this._setOption("position",this._getOffset()),this._trigger("resize")},_getOffset:function(){var t=i("body"),e=t.width(),n=t.height(),o=(e-this.element.width())/2,s=Math.max((n-this.element.height())/2,50);return{top:s,left:o}}})});
define('tp/codemirror/mode/diff/diff',["tp/codemirror/lib/codemirror"],function(n){n.defineMode("diff",function(){return{token:function(n){var i=n.next();return n.skipToEnd(),"+"==i?"plus":"-"==i?"minus":"@"==i?"rangeinfo":void 0}}}),n.defineMIME("text/x-diff","diff")});
define('tp/codemirror/mode/clike/clike',["tp/codemirror/lib/codemirror"],function(e){e.defineMode("clike",function(e,t){function n(e,t){var n=e.next();if(h[n]){var o=h[n](e,t);if(o!==!1)return o}if('"'==n||"'"==n)return t.tokenize=r(n),t.tokenize(e,t);if(/[\[\]{}\(\),;\:\.]/.test(n))return l=n,null;if(/\d/.test(n))return e.eatWhile(/[\w\.]/),"number";if("/"==n){if(e.eat("*"))return t.tokenize=i,i(e,t);if(e.eat("/"))return e.skipToEnd(),"comment"}if(m.test(n))return e.eatWhile(m),"operator";e.eatWhile(/[\w\$_]/);var a=e.current();return u.propertyIsEnumerable(a)?(f.propertyIsEnumerable(a)&&(l="newstatement"),"keyword"):d.propertyIsEnumerable(a)?"atom":"word"}function r(e){return function(t,r){for(var i,o=!1,a=!1;null!=(i=t.next());){if(i==e&&!o){a=!0;break}o=!o&&"\\"==i}return(a||!o&&!p)&&(r.tokenize=n),"string"}}function i(e,t){for(var r,i=!1;r=e.next();){if("/"==r&&i){t.tokenize=n;break}i="*"==r}return"comment"}function o(e,t,n,r,i){this.indented=e,this.column=t,this.type=n,this.align=r,this.prev=i}function a(e,t,n){return e.context=new o(e.indented,t,n,null,e.context)}function s(e){var t=e.context.type;return(")"==t||"]"==t||"}"==t)&&(e.indented=e.context.indented),e.context=e.context.prev}var l,c=e.indentUnit,u=t.keywords||{},f=t.blockKeywords||{},d=t.atoms||{},h=t.hooks||{},p=t.multiLineStrings,m=/[+\-*&%=<>!?|\/]/;return{startState:function(e){return{tokenize:null,context:new o((e||0)-c,0,"top",!1),indented:0,startOfLine:!0}},token:function(e,t){var r=t.context;if(e.sol()&&(null==r.align&&(r.align=!1),t.indented=e.indentation(),t.startOfLine=!0),e.eatSpace())return null;l=null;var i=(t.tokenize||n)(e,t);if("comment"==i||"meta"==i)return i;if(null==r.align&&(r.align=!0),";"!=l&&":"!=l||"statement"!=r.type)if("{"==l)a(t,e.column(),"}");else if("["==l)a(t,e.column(),"]");else if("("==l)a(t,e.column(),")");else if("}"==l){for(;"statement"==r.type;)r=s(t);for("}"==r.type&&(r=s(t));"statement"==r.type;)r=s(t)}else l==r.type?s(t):("}"==r.type||"top"==r.type||"statement"==r.type&&"newstatement"==l)&&a(t,e.column(),"statement");else s(t);return t.startOfLine=!1,i},indent:function(e,t){if(e.tokenize!=n&&null!=e.tokenize)return 0;var r=t&&t.charAt(0),i=e.context,o=r==i.type;return"statement"==i.type?i.indented+("{"==r?0:c):i.align?i.column+(o?0:1):i.indented+(o?0:c)},electricChars:"{}"}}),function(){function t(e){for(var t={},n=e.split(" "),r=0;r<n.length;++r)t[n[r]]=!0;return t}function n(e,t){return t.startOfLine?(e.skipToEnd(),"meta"):!1}function r(e,t){for(var n;null!=(n=e.next());)if('"'==n&&!e.eat('"')){t.tokenize=null;break}return"string"}var i="auto if break int case long char register continue return default short do sizeof double static else struct entry switch extern typedef float union for unsigned goto while enum void const signed volatile";e.defineMIME("text/x-csrc",{name:"clike",keywords:t(i),blockKeywords:t("case do else for if switch while struct"),atoms:t("null"),hooks:{"#":n}}),e.defineMIME("text/x-c++src",{name:"clike",keywords:t(i+" asm dynamic_cast namespace reinterpret_cast try bool explicit new static_cast typeid catch operator template typename class friend private this using const_cast inline public throw virtual delete mutable protected wchar_t"),blockKeywords:t("catch class do else finally for if struct switch try while"),atoms:t("true false null"),hooks:{"#":n}}),e.defineMIME("text/x-java",{name:"clike",keywords:t("abstract assert boolean break byte case catch char class const continue default do double else enum extends final finally float for goto if implements import instanceof int interface long native new package private protected public return short static strictfp super switch synchronized this throw throws transient try void volatile while"),blockKeywords:t("catch class do else finally for if switch try while"),atoms:t("true false null"),hooks:{"@":function(e){return e.eatWhile(/[\w\$_]/),"meta"}}}),e.defineMIME("text/x-csharp",{name:"clike",keywords:t("abstract as base bool break byte case catch char checked class const continue decimal default delegate do double else enum event explicit extern finally fixed float for foreach goto if implicit in int interface internal is lock long namespace new object operator out override params private protected public readonly ref return sbyte sealed short sizeof stackalloc static string struct switch this throw try typeof uint ulong unchecked unsafe ushort using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),blockKeywords:t("catch class do else finally for foreach if struct switch try while"),atoms:t("true false null"),hooks:{"@":function(e,t){return e.eat('"')?(t.tokenize=r,r(e,t)):(e.eatWhile(/[\w\$_]/),"meta")}}}),e.defineMIME("text/x-groovy",{name:"clike",keywords:t("abstract as assert boolean break byte case catch char class const continue def default do double else enum extends final finally float for goto if implements import in instanceof int interface long native new package property private protected public return short static strictfp super switch synchronized this throw throws transient try void volatile while"),atoms:t("true false null"),hooks:{"@":function(e){return e.eatWhile(/[\w\$_]/),"meta"}}})}()});
define('tp/codemirror/mode/css/css',["tp/codemirror/lib/codemirror"],function(e){e.defineMode("css",function(e){function t(e,t){return o=t,e}function n(e,n){var o=e.next();return"@"==o?(e.eatWhile(/[\w\\\-]/),t("meta",e.current())):"/"==o&&e.eat("*")?(n.tokenize=r,r(e,n)):"<"==o&&e.eat("!")?(n.tokenize=a,a(e,n)):"="!=o?"~"!=o&&"|"!=o||!e.eat("=")?'"'==o||"'"==o?(n.tokenize=i(o),n.tokenize(e,n)):"#"==o?(e.eatWhile(/[\w\\\-]/),t("atom","hash")):"!"==o?(e.match(/^\s*\w*/),t("keyword","important")):/\d/.test(o)?(e.eatWhile(/[\w.%]/),t("number","unit")):/[,.+>*\/]/.test(o)?t(null,"select-op"):/[;{}:\[\]]/.test(o)?t(null,o):(e.eatWhile(/[\w\\\-]/),t("variable","variable")):t(null,"compare"):void t(null,"compare")}function r(e,r){for(var a,i=!1;null!=(a=e.next());){if(i&&"/"==a){r.tokenize=n;break}i="*"==a}return t("comment","comment")}function a(e,r){for(var a,i=0;null!=(a=e.next());){if(i>=2&&">"==a){r.tokenize=n;break}i="-"==a?i+1:0}return t("comment","comment")}function i(e){return function(r,a){for(var i,o=!1;null!=(i=r.next())&&(i!=e||o);)o=!o&&"\\"==i;return o||(a.tokenize=n),t("string","string")}}var o,c=e.indentUnit;return{startState:function(e){return{tokenize:n,baseIndent:e||0,stack:[]}},token:function(e,t){if(e.eatSpace())return null;var n=t.tokenize(e,t),r=t.stack[t.stack.length-1];return"hash"==o&&"rule"==r?n="atom":"variable"==n&&("rule"==r?n="number":r&&"@media{"!=r||(n="tag")),"rule"==r&&/^[\{\};]$/.test(o)&&t.stack.pop(),"{"==o?"@media"==r?t.stack[t.stack.length-1]="@media{":t.stack.push("{"):"}"==o?t.stack.pop():"@media"==o?t.stack.push("@media"):"{"==r&&"comment"!=o&&t.stack.push("rule"),n},indent:function(e,t){var n=e.stack.length;return/^\}/.test(t)&&(n-="rule"==e.stack[e.stack.length-1]?2:1),e.baseIndent+n*c},electricChars:"}"}}),e.defineMIME("text/css","css")});
define('tp/codemirror/mode/htmlmixed/htmlmixed',["tp/codemirror/lib/codemirror"],function(t){t.defineMode("htmlmixed",function(e){function n(t,e){var n=r.token(t,e.htmlState);return"tag"==n&&">"==t.current()&&e.htmlState.context&&(/^script$/i.test(e.htmlState.context.tagName)?(e.token=o,e.localState=c.startState(r.indent(e.htmlState,"")),e.mode="javascript"):/^style$/i.test(e.htmlState.context.tagName)&&(e.token=l,e.localState=m.startState(r.indent(e.htmlState,"")),e.mode="css")),n}function a(t,e,n){var a=t.current(),o=a.search(e);return o>-1&&t.backUp(a.length-o),n}function o(t,e){return t.match(/^<\/\s*script\s*>/i,!1)?(e.token=n,e.curState=null,e.mode="html",n(t,e)):a(t,/<\/\s*script\s*>/,c.token(t,e.localState))}function l(t,e){return t.match(/^<\/\s*style\s*>/i,!1)?(e.token=n,e.localState=null,e.mode="html",n(t,e)):a(t,/<\/\s*style\s*>/,m.token(t,e.localState))}var r=t.getMode(e,{name:"xml",htmlMode:!0}),c=t.getMode(e,"javascript"),m=t.getMode(e,"css");return{startState:function(){var t=r.startState();return{token:n,localState:null,mode:"html",htmlState:t}},copyState:function(e){if(e.localState)var n=t.copyState(e.token==l?m:c,e.localState);return{token:e.token,localState:n,mode:e.mode,htmlState:t.copyState(r,e.htmlState)}},token:function(t,e){return e.token(t,e)},indent:function(t,e){return t.token==n||/^\s*<\//.test(e)?r.indent(t.htmlState,e):t.token==o?c.indent(t.localState,e):m.indent(t.localState,e)},compareStates:function(t,e){return r.compareStates(t.htmlState,e.htmlState)},electricChars:"/{}:"}}),t.defineMIME("text/html","htmlmixed")});
define('tp/codemirror/mode/javascript/javascript',["tp/codemirror/lib/codemirror"],function(e){e.defineMode("javascript",function(e,t){function n(e,t,n){return t.tokenize=n,n(e,t)}function r(e,t){for(var n,r=!1;null!=(n=e.next());){if(n==t&&!r)return!1;r=!r&&"\\"==n}return r}function a(e,t,n){return $=e,C=n,t}function i(e,t){var i=e.next();if('"'==i||"'"==i)return n(e,t,o(i));if(/[\[\]{}\(\),;\:\.]/.test(i))return a(i);if("0"==i&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),a("number","number");if(/\d/.test(i))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),a("number","number");if("/"==i)return e.eat("*")?n(e,t,u):e.eat("/")?(e.skipToEnd(),a("comment","comment")):t.reAllowed?(r(e,"/"),e.eatWhile(/[gimy]/),a("regexp","string")):(e.eatWhile(B),a("operator",null,e.current()));if("#"==i)return e.skipToEnd(),a("error","error");if(B.test(i))return e.eatWhile(B),a("operator",null,e.current());e.eatWhile(/[\w\$_]/);var c=e.current(),l=q.propertyIsEnumerable(c)&&q[c];return l?a(l.type,l.style,c):a("variable","variable",c)}function o(e){return function(t,n){return r(t,e)||(n.tokenize=i),a("string","string")}}function u(e,t){for(var n,r=!1;n=e.next();){if("/"==n&&r){t.tokenize=i;break}r="*"==n}return a("comment","comment")}function c(e,t,n,r,a,i){this.indented=e,this.column=t,this.type=n,this.prev=a,this.info=i,null!=r&&(this.align=r)}function l(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0}function f(e,t,n,r,a){var i=e.cc;for(F.state=e,F.stream=a,F.marked=null,F.cc=i,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;){var o=i.length?i.pop():_?w:k;if(o(n,r)){for(;i.length&&i[i.length-1].lex;)i.pop()();return F.marked?F.marked:"variable"==n&&l(e,r)?"variable-2":t}}}function s(){for(var e=arguments.length-1;e>=0;e--)F.cc.push(arguments[e])}function d(){return s.apply(null,arguments),!0}function m(e){var t=F.state;if(t.context){F.marked="def";for(var n=t.localVars;n;n=n.next)if(n.name==e)return;t.localVars={name:e,next:t.localVars}}}function v(){F.state.context||(F.state.localVars=G),F.state.context={prev:F.state.context,vars:F.state.localVars}}function p(){F.state.localVars=F.state.context.vars,F.state.context=F.state.context.prev}function h(e,t){var n=function(){var n=F.state;n.lexical=new c(n.indented,F.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function x(){var e=F.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function y(e){return function(t){return t==e?d():";"==e?s():d(arguments.callee)}}function k(e){return"var"==e?d(h("vardef"),W,y(";"),x):"keyword a"==e?d(h("form"),w,k,x):"keyword b"==e?d(h("form"),k,x):"{"==e?d(h("}"),M,x):";"==e?d():"function"==e?d(S):"for"==e?d(h("form"),y("("),h(")"),I,y(")"),x,k,x):"variable"==e?d(h("stat"),V):"switch"==e?d(h("form"),w,h("}","switch"),y("{"),M,x,x):"case"==e?d(w,y(":")):"default"==e?d(y(":")):"catch"==e?d(h("form"),v,y("("),T,y(")"),k,x,p):s(h("stat"),w,y(";"),x)}function w(e){return D.hasOwnProperty(e)?d(g):"function"==e?d(S):"keyword c"==e?d(b):"("==e?d(h(")"),w,y(")"),x,g):"operator"==e?d(w):"["==e?d(h("]"),E(w,"]"),x,g):"{"==e?d(h("}"),E(z,"}"),x,g):d()}function b(e){return e.match(/[;\}\)\],]/)?s():s(w)}function g(e,t){if("operator"==e&&/\+\+|--/.test(t))return d(g);if("operator"==e)return d(w);if(";"!=e)return"("==e?d(h(")"),E(w,")"),x,g):"."==e?d(j,g):"["==e?d(h("]"),w,y("]"),x,g):void 0}function V(e){return":"==e?d(x,k):s(g,y(";"),x)}function j(e){return"variable"==e?(F.marked="property",d()):void 0}function z(e){return"variable"==e&&(F.marked="property"),D.hasOwnProperty(e)?d(y(":"),w):void 0}function E(e,t){function n(r){return","==r?d(e,n):r==t?d():d(y(t))}return function(r){return r==t?d():s(e,n)}}function M(e){return"}"==e?d():s(k,M)}function W(e,t){return"variable"==e?(m(t),d(A)):d()}function A(e,t){return"="==t?d(w,A):","==e?d(W):void 0}function I(e){return"var"==e?d(W,P):";"==e?s(P):"variable"==e?d(O):s(P)}function O(e,t){return"in"==t?d(w):d(g,P)}function P(e,t){return";"==e?d(N):"in"==t?d(w):d(w,y(";"),N)}function N(e){")"!=e&&d(w)}function S(e,t){return"variable"==e?(m(t),d(S)):"("==e?d(h(")"),v,E(T,")"),x,k,p):void 0}function T(e,t){return"variable"==e?(m(t),d()):void 0}var $,C,U=e.indentUnit,_=t.json,q=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),r=e("keyword c"),a=e("operator"),i={type:"atom",style:"atom"};return{"if":t,"while":t,"with":t,"else":n,"do":n,"try":n,"finally":n,"return":r,"break":r,"continue":r,"new":r,"delete":r,"throw":r,"var":e("var"),"const":e("var"),let:e("var"),"function":e("function"),"catch":e("catch"),"for":e("for"),"switch":e("switch"),"case":e("case"),"default":e("default"),"in":a,"typeof":a,"instanceof":a,"true":i,"false":i,"null":i,undefined:i,NaN:i,Infinity:i}}(),B=/[+\-*&%=<>!?|]/,D={atom:!0,number:!0,variable:!0,string:!0,regexp:!0},F={state:null,column:null,marked:null,cc:null},G={name:"this",next:{name:"arguments"}};return x.lex=!0,{startState:function(e){return{tokenize:i,reAllowed:!0,cc:[],lexical:new c((e||0)-U,0,"block",!1),localVars:null,context:null,indented:0}},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation()),e.eatSpace())return null;var n=t.tokenize(e,t);return"comment"==$?n:(t.reAllowed="operator"==$||"keyword c"==$||$.match(/^[\[{}\(,;:]$/),f(t,n,$,C,e))},indent:function(e,t){if(e.tokenize!=i)return 0;var n=t&&t.charAt(0),r=e.lexical,a=r.type,o=n==a;return"vardef"==a?r.indented+4:"form"==a&&"{"==n?r.indented:"stat"==a||"form"==a?r.indented+U:"switch"!=r.info||o?r.align?r.column+(o?0:1):r.indented+(o?0:U):r.indented+(/^(?:case|default)\b/.test(t)?U:2*U)},electricChars:":{}"}}),e.defineMIME("text/javascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0})});
define('tp/codemirror/mode/perl/perl',["tp/codemirror/lib/codemirror"],function(t){t.defineMode("perl",function(){function t(t,e,i,n,s){return e.chain=null,e.style=null,e.tail=null,e.tokenize=function(t,e){for(var a,o=!1,f=0;a=t.next();){if(a===i[f]&&!o)return void 0!==i[++f]?(e.chain=i[f],e.style=n,e.tail=s):s&&t.eatWhile(s),e.tokenize=r,n;o=!o&&"\\"==a}return n},e.tokenize(t,e)}function e(t,e,i){return e.tokenize=function(t,e){return t.string==i&&(e.tokenize=r),t.skipToEnd(),"string"},e.tokenize(t,e)}function r(r,a){if(r.eatSpace())return null;if(a.chain)return t(r,a,a.chain,a.style,a.tail);if(r.match(/^\-?[\d\.]/,!1)&&r.match(/^(\-?(\d*\.\d+(e[+-]?\d+)?|\d+\.\d*)|0x[\da-fA-F]+|0b[01]+|\d+(e[+-]?\d+)?)/))return"number";if(r.match(/^<<(?=\w)/))return r.eatWhile(/\w/),e(r,a,r.current().substr(2));if(r.sol()&&r.match(/^\=item(?!\w)/))return e(r,a,"=cut");var o=r.next();if('"'==o||"'"==o){if(r.prefix(3)=="<<"+o){var f=r.pos;r.eatWhile(/\w/);var u=r.current().substr(1);if(u&&r.eat(o))return e(r,a,u);r.pos=f}return t(r,a,[o],"string")}if("q"==o){var l=r.look(-2);if(!l||!/\w/.test(l))if(l=r.look(0),"x"==l){if(l=r.look(1),"("==l)return r.eatSuffix(2),t(r,a,[")"],n,s);if("["==l)return r.eatSuffix(2),t(r,a,["]"],n,s);if("{"==l)return r.eatSuffix(2),t(r,a,["}"],n,s);if("<"==l)return r.eatSuffix(2),t(r,a,[">"],n,s);if(/[\^'"!~\/]/.test(l))return r.eatSuffix(1),t(r,a,[r.eat(l)],n,s)}else if("q"==l){if(l=r.look(1),"("==l)return r.eatSuffix(2),t(r,a,[")"],"string");if("["==l)return r.eatSuffix(2),t(r,a,["]"],"string");if("{"==l)return r.eatSuffix(2),t(r,a,["}"],"string");if("<"==l)return r.eatSuffix(2),t(r,a,[">"],"string");if(/[\^'"!~\/]/.test(l))return r.eatSuffix(1),t(r,a,[r.eat(l)],"string")}else if("w"==l){if(l=r.look(1),"("==l)return r.eatSuffix(2),t(r,a,[")"],"bracket");if("["==l)return r.eatSuffix(2),t(r,a,["]"],"bracket");if("{"==l)return r.eatSuffix(2),t(r,a,["}"],"bracket");if("<"==l)return r.eatSuffix(2),t(r,a,[">"],"bracket");if(/[\^'"!~\/]/.test(l))return r.eatSuffix(1),t(r,a,[r.eat(l)],"bracket")}else if("r"==l){if(l=r.look(1),"("==l)return r.eatSuffix(2),t(r,a,[")"],n,s);if("["==l)return r.eatSuffix(2),t(r,a,["]"],n,s);if("{"==l)return r.eatSuffix(2),t(r,a,["}"],n,s);if("<"==l)return r.eatSuffix(2),t(r,a,[">"],n,s);if(/[\^'"!~\/]/.test(l))return r.eatSuffix(1),t(r,a,[r.eat(l)],n,s)}else if(/[\^'"!~\/(\[{<]/.test(l)){if("("==l)return r.eatSuffix(1),t(r,a,[")"],"string");if("["==l)return r.eatSuffix(1),t(r,a,["]"],"string");if("{"==l)return r.eatSuffix(1),t(r,a,["}"],"string");if("<"==l)return r.eatSuffix(1),t(r,a,[">"],"string");if(/[\^'"!~\/]/.test(l))return t(r,a,[r.eat(l)],"string")}}if("m"==o){var l=r.look(-2);if((!l||!/\w/.test(l))&&(l=r.eat(/[(\[{<\^'"!~\/]/))){if(/[\^'"!~\/]/.test(l))return t(r,a,[l],n,s);if("("==l)return t(r,a,[")"],n,s);if("["==l)return t(r,a,["]"],n,s);if("{"==l)return t(r,a,["}"],n,s);if("<"==l)return t(r,a,[">"],n,s)}}if("s"==o){var l=/[\/>\]})\w]/.test(r.look(-2));if(!l&&(l=r.eat(/[(\[{<\^'"!~\/]/)))return"["==l?t(r,a,["]","]"],n,s):"{"==l?t(r,a,["}","}"],n,s):"<"==l?t(r,a,[">",">"],n,s):"("==l?t(r,a,[")",")"],n,s):t(r,a,[l,l],n,s)}if("y"==o){var l=/[\/>\]})\w]/.test(r.look(-2));if(!l&&(l=r.eat(/[(\[{<\^'"!~\/]/)))return"["==l?t(r,a,["]","]"],n,s):"{"==l?t(r,a,["}","}"],n,s):"<"==l?t(r,a,[">",">"],n,s):"("==l?t(r,a,[")",")"],n,s):t(r,a,[l,l],n,s)}if("t"==o){var l=/[\/>\]})\w]/.test(r.look(-2));if(!l&&(l=r.eat("r"),l&&(l=r.eat(/[(\[{<\^'"!~\/]/))))return"["==l?t(r,a,["]","]"],n,s):"{"==l?t(r,a,["}","}"],n,s):"<"==l?t(r,a,[">",">"],n,s):"("==l?t(r,a,[")",")"],n,s):t(r,a,[l,l],n,s)}if("`"==o)return t(r,a,[o],"variable-2");if("/"==o)return/~\s*$/.test(r.prefix())?t(r,a,[o],n,s):"operator";if("$"==o){var f=r.pos;if(r.eatWhile(/\d/)||r.eat("{")&&r.eatWhile(/\d/)&&r.eat("}"))return"variable-2";r.pos=f}if(/[$@%]/.test(o)){var f=r.pos;if(r.eat("^")&&r.eat(/[A-Z]/)||!/[@$%&]/.test(r.look(-2))&&r.eat(/[=|\\\-#?@;:&`~\^!\[\]*'"$+.,\/<>()]/)){var l=r.current();if(i[l])return"variable-2"}r.pos=f}if(/[$@%&]/.test(o)&&(r.eatWhile(/[\w$\[\]]/)||r.eat("{")&&r.eatWhile(/[\w$\[\]]/)&&r.eat("}"))){var l=r.current();return i[l]?"variable-2":"variable"}if("#"==o&&"$"!=r.look(-2))return r.skipToEnd(),"comment";if(/[:+\-\^*$&%@=<>!?|\/~\.]/.test(o)){var f=r.pos;if(r.eatWhile(/[:+\-\^*$&%@=<>!?|\/~\.]/),i[r.current()])return"operator";r.pos=f}if("_"==o&&1==r.pos){if("_END__"==r.suffix(6))return t(r,a,["\x00"],"comment");if("_DATA__"==r.suffix(7))return t(r,a,["\x00"],"variable-2");if("_C__"==r.suffix(7))return t(r,a,["\x00"],"string")}if(/\w/.test(o)){var f=r.pos;if("{"==r.look(-2)&&("}"==r.look(0)||r.eatWhile(/\w/)&&"}"==r.look(0)))return"string";r.pos=f}if(/[A-Z]/.test(o)){var $=r.look(-2),f=r.pos;if(r.eatWhile(/[A-Z_]/),!/[\da-z]/.test(r.look(0))){var l=i[r.current()];return l?(l[1]&&(l=l[0]),":"!=$?1==l?"keyword":2==l?"def":3==l?"atom":4==l?"operator":5==l?"variable-2":"meta":"meta"):"meta"}r.pos=f}if(/[a-zA-Z_]/.test(o)){var $=r.look(-2);r.eatWhile(/\w/);var l=i[r.current()];return l?(l[1]&&(l=l[0]),":"!=$?1==l?"keyword":2==l?"def":3==l?"atom":4==l?"operator":5==l?"variable-2":"meta":"meta"):"meta"}return null}var i={"->":4,"++":4,"--":4,"**":4,"=~":4,"!~":4,"*":4,"/":4,"%":4,x:4,"+":4,"-":4,".":4,"<<":4,">>":4,"<":4,">":4,"<=":4,">=":4,lt:4,gt:4,le:4,ge:4,"==":4,"!=":4,"<=>":4,eq:4,ne:4,cmp:4,"~~":4,"&":4,"|":4,"^":4,"&&":4,"||":4,"//":4,"..":4,"...":4,"?":4,":":4,"=":4,"+=":4,"-=":4,"*=":4,",":4,"=>":4,"::":4,not:4,and:4,or:4,xor:4,BEGIN:[5,1],END:[5,1],PRINT:[5,1],PRINTF:[5,1],GETC:[5,1],READ:[5,1],READLINE:[5,1],DESTROY:[5,1],TIE:[5,1],TIEHANDLE:[5,1],UNTIE:[5,1],STDIN:5,STDIN_TOP:5,STDOUT:5,STDOUT_TOP:5,STDERR:5,STDERR_TOP:5,$ARG:5,$_:5,"@ARG":5,"@_":5,$LIST_SEPARATOR:5,'$"':5,$PROCESS_ID:5,$PID:5,$$:5,$REAL_GROUP_ID:5,$GID:5,"$(":5,$EFFECTIVE_GROUP_ID:5,$EGID:5,"$)":5,$PROGRAM_NAME:5,$0:5,$SUBSCRIPT_SEPARATOR:5,$SUBSEP:5,"$;":5,$REAL_USER_ID:5,$UID:5,"$<":5,$EFFECTIVE_USER_ID:5,$EUID:5,"$>":5,$a:5,$b:5,$COMPILING:5,"$^C":5,$DEBUGGING:5,"$^D":5,"${^ENCODING}":5,$ENV:5,"%ENV":5,$SYSTEM_FD_MAX:5,"$^F":5,"@F":5,"${^GLOBAL_PHASE}":5,"$^H":5,"%^H":5,"@INC":5,"%INC":5,$INPLACE_EDIT:5,"$^I":5,"$^M":5,$OSNAME:5,"$^O":5,"${^OPEN}":5,$PERLDB:5,"$^P":5,$SIG:5,"%SIG":5,$BASETIME:5,"$^T":5,"${^TAINT}":5,"${^UNICODE}":5,"${^UTF8CACHE}":5,"${^UTF8LOCALE}":5,$PERL_VERSION:5,"$^V":5,"${^WIN32_SLOPPY_STAT}":5,$EXECUTABLE_NAME:5,"$^X":5,$1:5,$MATCH:5,"$&":5,"${^MATCH}":5,$PREMATCH:5,"$`":5,"${^PREMATCH}":5,$POSTMATCH:5,"$'":5,"${^POSTMATCH}":5,$LAST_PAREN_MATCH:5,"$+":5,$LAST_SUBMATCH_RESULT:5,"$^N":5,"@LAST_MATCH_END":5,"@+":5,"%LAST_PAREN_MATCH":5,"%+":5,"@LAST_MATCH_START":5,"@-":5,"%LAST_MATCH_START":5,"%-":5,$LAST_REGEXP_CODE_RESULT:5,"$^R":5,"${^RE_DEBUG_FLAGS}":5,"${^RE_TRIE_MAXBUF}":5,$ARGV:5,"@ARGV":5,ARGV:5,ARGVOUT:5,$OUTPUT_FIELD_SEPARATOR:5,$OFS:5,"$,":5,$INPUT_LINE_NUMBER:5,$NR:5,"$.":5,$INPUT_RECORD_SEPARATOR:5,$RS:5,"$/":5,$OUTPUT_RECORD_SEPARATOR:5,$ORS:5,"$\\":5,$OUTPUT_AUTOFLUSH:5,"$|":5,$ACCUMULATOR:5,"$^A":5,$FORMAT_FORMFEED:5,"$^L":5,$FORMAT_PAGE_NUMBER:5,"$%":5,$FORMAT_LINES_LEFT:5,"$-":5,$FORMAT_LINE_BREAK_CHARACTERS:5,"$:":5,$FORMAT_LINES_PER_PAGE:5,"$=":5,$FORMAT_TOP_NAME:5,"$^":5,$FORMAT_NAME:5,"$~":5,"${^CHILD_ERROR_NATIVE}":5,$EXTENDED_OS_ERROR:5,"$^E":5,$EXCEPTIONS_BEING_CAUGHT:5,"$^S":5,$WARNING:5,"$^W":5,"${^WARNING_BITS}":5,$OS_ERROR:5,$ERRNO:5,"$!":5,"%OS_ERROR":5,"%ERRNO":5,"%!":5,$CHILD_ERROR:5,"$?":5,$EVAL_ERROR:5,"$@":5,$OFMT:5,"$#":5,"$*":5,$ARRAY_BASE:5,"$[":5,$OLD_PERL_VERSION:5,"$]":5,"if":[1,1],elsif:[1,1],"else":[1,1],"while":[1,1],unless:[1,1],"for":[1,1],foreach:[1,1],abs:1,accept:1,alarm:1,atan2:1,bind:1,binmode:1,bless:1,bootstrap:1,"break":1,caller:1,chdir:1,chmod:1,chomp:1,chop:1,chown:1,chr:1,chroot:1,close:1,closedir:1,connect:1,"continue":[1,1],cos:1,crypt:1,dbmclose:1,dbmopen:1,"default":1,defined:1,"delete":1,die:1,"do":1,dump:1,each:1,endgrent:1,endhostent:1,endnetent:1,endprotoent:1,endpwent:1,endservent:1,eof:1,eval:1,exec:1,exists:1,exit:1,exp:1,fcntl:1,fileno:1,flock:1,fork:1,format:1,formline:1,getc:1,getgrent:1,getgrgid:1,getgrnam:1,gethostbyaddr:1,gethostbyname:1,gethostent:1,getlogin:1,getnetbyaddr:1,getnetbyname:1,getnetent:1,getpeername:1,getpgrp:1,getppid:1,getpriority:1,getprotobyname:1,getprotobynumber:1,getprotoent:1,getpwent:1,getpwnam:1,getpwuid:1,getservbyname:1,getservbyport:1,getservent:1,getsockname:1,getsockopt:1,given:1,glob:1,gmtime:1,"goto":1,grep:1,hex:1,"import":1,index:1,"int":1,ioctl:1,join:1,keys:1,kill:1,last:1,lc:1,lcfirst:1,length:1,link:1,listen:1,local:2,localtime:1,lock:1,log:1,lstat:1,m:null,map:1,mkdir:1,msgctl:1,msgget:1,msgrcv:1,msgsnd:1,my:2,"new":1,next:1,no:1,oct:1,open:1,opendir:1,ord:1,our:2,pack:1,"package":1,pipe:1,pop:1,pos:1,print:1,printf:1,prototype:1,push:1,q:null,qq:null,qr:null,quotemeta:null,qw:null,qx:null,rand:1,read:1,readdir:1,readline:1,readlink:1,readpipe:1,recv:1,redo:1,ref:1,rename:1,require:1,reset:1,"return":1,reverse:1,rewinddir:1,rindex:1,rmdir:1,s:null,say:1,scalar:1,seek:1,seekdir:1,select:1,semctl:1,semget:1,semop:1,send:1,setgrent:1,sethostent:1,setnetent:1,setpgrp:1,setpriority:1,setprotoent:1,setpwent:1,setservent:1,setsockopt:1,shift:1,shmctl:1,shmget:1,shmread:1,shmwrite:1,shutdown:1,sin:1,sleep:1,socket:1,socketpair:1,sort:1,splice:1,split:1,sprintf:1,sqrt:1,srand:1,stat:1,state:1,study:1,sub:1,substr:1,symlink:1,syscall:1,sysopen:1,sysread:1,sysseek:1,system:1,syswrite:1,tell:1,telldir:1,tie:1,tied:1,time:1,times:1,tr:null,truncate:1,uc:1,ucfirst:1,umask:1,undef:1,unlink:1,unpack:1,unshift:1,untie:1,use:1,utime:1,values:1,vec:1,wait:1,waitpid:1,wantarray:1,warn:1,when:1,write:1,y:null},n="string-2",s=/[goseximacplud]/;return{startState:function(){return{tokenize:r,chain:null,style:null,tail:null}},token:function(t,e){return(e.tokenize||r)(t,e)},electricChars:"{}"}}),t.defineMIME("text/x-perl","perl"),t.StringStream.prototype.look=function(t){return this.string.charAt(this.pos+(t||0))},t.StringStream.prototype.prefix=function(t){if(t){var e=this.pos-t;return this.string.substr(e>=0?e:0,t)}return this.string.substr(0,this.pos-1)},t.StringStream.prototype.suffix=function(t){var e=this.string.length,r=e-this.pos+1;return this.string.substr(this.pos,t&&e>t?t:r)},t.StringStream.prototype.nsuffix=function(t){var e=this.pos,r=t||this.string.length-this.pos+1;return this.pos+=r,this.string.substr(e,r)},t.StringStream.prototype.eatSuffix=function(t){var e,r=this.pos+t;this.pos=0>=r?0:r>=(e=this.string.length-1)?e:r}});
define('tp/codemirror/mode/php/php',["tp/codemirror/lib/codemirror"],function(t){!function(){function e(t){for(var e={},r=t.split(" "),n=0;n<r.length;++n)e[r[n]]=!0;return e}function r(t){return function(e,r){return e.match(t)?r.tokenize=null:e.skipToEnd(),"string"}}var n={name:"clike",keywords:e("abstract and array as break case catch cfunction class clone const continue declare default do else elseif enddeclare endfor endforeach endif endswitch endwhile extends final for foreach function global goto if implements interface instanceof namespace new or private protected public static switch throw try use var while xor returndie echo empty exit eval include include_once isset list require require_once print unset"),blockKeywords:e("catch do else elseif for foreach if switch try while"),atoms:e("true false null TRUE FALSE NULL"),multiLineStrings:!0,hooks:{$:function(t){return t.eatWhile(/[\w\$_]/),"variable-2"},"<":function(t,e){return t.match(/<</)?(t.eatWhile(/[\w\.]/),e.tokenize=r(t.current().slice(3)),e.tokenize(t,e)):!1},"#":function(t){return t.skipToEnd(),"comment"}}};t.defineMode("php",function(e,r){function c(t,e){if(e.curMode==o){var r=o.token(t,e.curState);return"meta"==r&&/^<\?/.test(t.current())?(e.curMode=u,e.curState=e.php,e.curClose=/^\?>/,e.mode="php"):"tag"==r&&">"==t.current()&&e.curState.context&&(/^script$/i.test(e.curState.context.tagName)?(e.curMode=a,e.curState=a.startState(o.indent(e.curState,"")),e.curClose=/^<\/\s*script\s*>/i,e.mode="javascript"):/^style$/i.test(e.curState.context.tagName)&&(e.curMode=i,e.curState=i.startState(o.indent(e.curState,"")),e.curClose=/^<\/\s*style\s*>/i,e.mode="css")),r}return t.match(e.curClose,!1)?(e.curMode=o,e.curState=e.html,e.curClose=null,e.mode="html",c(t,e)):e.curMode.token(t,e.curState)}var o=t.getMode(e,"text/html"),a=t.getMode(e,"text/javascript"),i=t.getMode(e,"text/css"),u=t.getMode(e,n);return{startState:function(){var t=o.startState();return{html:t,php:u.startState(),curMode:r.startOpen?u:o,curState:r.startOpen?u.startState():t,curClose:r.startOpen?/^\?>/:null,mode:r.startOpen?"php":"html"}},copyState:function(e){var r,n=e.html,c=t.copyState(o,n),a=e.php,i=t.copyState(u,a);return r=e.curState==n?c:e.curState==a?i:t.copyState(e.curMode,e.curState),{html:c,php:i,curMode:e.curMode,curState:r,curClose:e.curClose}},token:c,indent:function(t,e){return t.curMode!=u&&/^\s*<\//.test(e)||t.curMode==u&&/^\?>/.test(e)?o.indent(t.html,e):t.curMode.indent(t.curState,e)},electricChars:"/{}:"}}),t.defineMIME("application/x-httpd-php","php"),t.defineMIME("application/x-httpd-php-open",{name:"php",startOpen:!0}),t.defineMIME("text/x-php",n)}()});
define('tp/codemirror/mode/ruby/ruby',["tp/codemirror/lib/codemirror"],function(e){e.defineMode("ruby",function(e){function t(e){for(var t={},n=0,r=e.length;r>n;++n)t[e[n]]=!0;return t}function n(e,t,n){return n.tokenize.push(e),e(t,n)}function r(e,t){if(u=null,e.sol()&&e.match("=begin")&&e.eol())return t.tokenize.push(l),"comment";if(e.eatSpace())return null;var r=e.next();if("`"==r||"'"==r||'"'==r||"/"==r)return n(o(r,"string",'"'==r),e,t);if("%"==r){var i,d=!1;e.eat("s")?i="atom":e.eat(/[WQ]/)?(i="string",d=!0):e.eat(/[wxqr]/)&&(i="string");var s=e.eat(/[^\w\s]/);return s?(f.propertyIsEnumerable(s)&&(s=f[s]),n(o(s,i,d,!0),e,t)):"operator"}if("#"==r)return e.skipToEnd(),"comment";if("<"==r&&e.eat("<")){e.eat("-"),e.eat(/[\'\"\`]/);var c=e.match(/^\w+/);return e.eat(/[\'\"\`]/),c?n(a(c[0]),e,t):null}if("0"==r)return e.eatWhile(e.eat("x")?/[\da-fA-F]/:e.eat("b")?/[01]/:/[0-7]/),"number";if(/\d/.test(r))return e.match(/^[\d_]*(?:\.[\d_]+)?(?:[eE][+\-]?[\d_]+)?/),"number";if("?"==r){for(;e.match(/^\\[CM]-/););return e.eat("\\")?e.eatWhile(/\w/):e.next(),"string"}return":"==r?e.eat("'")?n(o("'","atom",!1),e,t):e.eat('"')?n(o('"',"atom",!0),e,t):(e.eatWhile(/[\w\?]/),"atom"):"@"==r?(e.eat("@"),e.eatWhile(/[\w\?]/),"variable-2"):"$"==r?(e.next(),e.eatWhile(/[\w\?]/),"variable-3"):/\w/.test(r)?(e.eatWhile(/[\w\?]/),e.eat(":")?"atom":"ident"):"|"!=r||!t.varList&&"{"!=t.lastTok&&"do"!=t.lastTok?/[\(\)\[\]{}\\;]/.test(r)?(u=r,null):"-"==r&&e.eat(">")?"arrow":/[=+\-\/*:\.^%<>~|]/.test(r)?(e.eatWhile(/[=+\-\/*:\.^%<>~|]/),"operator"):null:(u="|",null)}function i(){var e=1;return function(t,n){if("}"==t.peek()){if(e--,0==e)return n.tokenize.pop(),n.tokenize[n.tokenize.length-1](t,n)}else"{"==t.peek()&&e++;return r(t,n)}}function o(e,t,n,r){return function(o,a){for(var l,u=!1;null!=(l=o.next());){if(l==e&&(r||!u)){a.tokenize.pop();break}if(n&&"#"==l&&!u&&o.eat("{")){a.tokenize.push(i(arguments.callee));break}u=!u&&"\\"==l}return t}}function a(e){return function(t,n){return t.match(e)?n.tokenize.pop():t.skipToEnd(),"string"}}function l(e,t){return e.sol()&&e.match("=end")&&e.eol()&&t.tokenize.pop(),e.skipToEnd(),"comment"}var u,d=t(["alias","and","BEGIN","begin","break","case","class","def","defined?","do","else","elsif","END","end","ensure","false","for","if","in","module","next","not","or","redo","rescue","retry","return","self","super","then","true","undef","unless","until","when","while","yield","nil","raise","throw","catch","fail","loop","callcc","caller","lambda","proc","public","protected","private","require","load","require_relative","extend","autoload"]),s=t(["def","class","case","for","while","do","module","then","unless","catch","loop","proc"]),c=t(["end","until"]),f={"[":"]","{":"}","(":")"};return{startState:function(){return{tokenize:[r],indented:0,context:{type:"top",indented:-e.indentUnit},continuedLine:!1,lastTok:null,varList:!1}},token:function(e,t){e.sol()&&(t.indented=e.indentation());var n,r=t.tokenize[t.tokenize.length-1](e,t);if("ident"==r){var i=e.current();r=d.propertyIsEnumerable(e.current())?"keyword":/^[A-Z]/.test(i)?"tag":"def"==t.lastTok||"class"==t.lastTok||t.varList?"def":"variable",s.propertyIsEnumerable(i)?n="indent":c.propertyIsEnumerable(i)?n="dedent":"if"==i&&e.column()==e.indentation()&&(n="indent")}return(u||r&&"comment"!=r)&&(t.lastTok=i||u||r),"|"==u&&(t.varList=!t.varList),"indent"==n||/[\(\[\{]/.test(u)?t.context={prev:t.context,type:u||r,indented:t.indented}:("dedent"==n||/[\)\]\}]/.test(u))&&t.context.prev&&(t.context=t.context.prev),e.eol()&&(t.continuedLine="\\"==u||"operator"==r),r},indent:function(t,n){if(t.tokenize[t.tokenize.length-1]!=r)return 0;var i=n&&n.charAt(0),o=t.context,a=o.type==f[i]||"keyword"==o.type&&/^(?:end|until|else|elsif|when)\b/.test(n);return o.indented+(a?0:e.indentUnit)+(t.continuedLine?e.indentUnit:0)}}}),e.defineMIME("text/x-ruby","ruby")});
define('tp/codemirror/mode/xml/xml',["tp/codemirror/lib/codemirror"],function(t){t.defineMode("xml",function(t,e){function n(t,e){function n(n){return e.tokenize=n,n(t,e)}var o=t.next();if("<"==o){if(t.eat("!"))return t.eat("[")?t.match("CDATA[")?n(a("atom","]]>")):null:t.match("--")?n(a("comment","-->")):t.match("DOCTYPE",!0,!0)?(t.eatWhile(/[\w\._\-]/),n(a("meta",">"))):null;if(t.eat("?"))return t.eatWhile(/[\w\._\-]/),e.tokenize=a("meta","?>"),"meta";h=t.eat("/")?"closeTag":"openTag",t.eatSpace(),x="";for(var i;i=t.eat(/[^\s\u00a0=<>\"\'\/?]/);)x+=i;return e.tokenize=r,"tag"}return"&"==o?(t.eatWhile(/[^;]/),t.eat(";"),"atom"):(t.eatWhile(/[^&<]/),null)}function r(t,e){var r=t.next();return">"==r||"/"==r&&t.eat(">")?(e.tokenize=n,h=">"==r?"endTag":"selfcloseTag","tag"):"="==r?(h="equals",null):/[\'\"]/.test(r)?(e.tokenize=o(r),e.tokenize(t,e)):(t.eatWhile(/[^\s\u00a0=<>\"\'\/?]/),"word")}function o(t){return function(e,n){for(;!e.eol();)if(e.next()==t){n.tokenize=r;break}return"string"}}function a(t,e){return function(r,o){for(;!r.eol();){if(r.match(e)){o.tokenize=n;break}r.next()}return t}}function i(){for(var t=arguments.length-1;t>=0;t--)k.cc.push(arguments[t])}function u(){return i.apply(null,arguments),!0}function c(t,e){var n=z.doNotIndent.hasOwnProperty(t)||k.context&&k.context.noIndent;k.context={prev:k.context,tagName:t,indent:k.indented,startOfLine:e,noIndent:n}}function f(){k.context&&(k.context=k.context.prev)}function l(t){if("openTag"==t)return k.tagName=x,u(m,d(k.startOfLine));if("closeTag"==t){var e=!1;return e=k.context?k.context.tagName!=x:!0,e&&(v="error"),u(s(e))}return"string"==t?(k.context&&"!cdata"==k.context.name||c("!cdata"),k.tokenize==n&&f(),u()):u()}function d(t){return function(e){return"selfcloseTag"==e||"endTag"==e&&z.autoSelfClosers.hasOwnProperty(k.tagName.toLowerCase())?u():"endTag"==e?(c(k.tagName,t),u()):u()}}function s(t){return function(e){return t&&(v="error"),"endTag"==e?(f(),u()):(v="error",u(arguments.callee))}}function m(t){return"word"==t?(v="attribute",u(m)):"equals"==t?u(g,m):"string"==t?(v="error",u(m)):i()}function g(t){return"word"==t&&z.allowUnquoted?(v="string",u()):"string"==t?u(p):i()}function p(t){return"string"==t?u(p):i()}var x,h,k,v,T=t.indentUnit,z=e.htmlMode?{autoSelfClosers:{br:!0,img:!0,hr:!0,link:!0,input:!0,meta:!0,col:!0,frame:!0,base:!0,area:!0},doNotIndent:{pre:!0,"!cdata":!0},allowUnquoted:!0}:{autoSelfClosers:{},doNotIndent:{"!cdata":!0},allowUnquoted:!1},w=e.alignCDATA;return{startState:function(){return{tokenize:n,cc:[],indented:0,startOfLine:!0,tagName:null,context:null}},token:function(t,e){if(t.sol()&&(e.startOfLine=!0,e.indented=t.indentation()),t.eatSpace())return null;v=h=x=null;var n=e.tokenize(t,e);if(e.type=h,(n||h)&&"comment"!=n)for(k=e;;){var r=e.cc.pop()||l;if(r(h||n))break}return e.startOfLine=!1,v||n},indent:function(t,e){var n=t.context;if(n&&n.noIndent)return 0;if(w&&/<!\[CDATA\[/.test(e))return 0;for(n&&/^<\//.test(e)&&(n=n.prev);n&&!n.startOfLine;)n=n.prev;return n?n.indent+T:0},compareStates:function(t,e){if(t.indented!=e.indented||t.tokenize!=e.tokenize)return!1;for(var n=t.context,r=e.context;;n=n.prev,r=r.prev){if(!n||!r)return n==r;if(n.tagName!=r.tagName)return!1}},electricChars:"/"}}),t.defineMIME("application/xml","xml"),t.defineMIME("text/html",{name:"xml",htmlMode:!0})});
define('tp/plugins/vcs/viewDiff/sourcePopup',["tp/codemirror/lib/codemirror","jQuery","tau/ui/behaviour/common/ui.behaviour.progressIndicator","tp/popup","tp/codemirror/mode/diff/diff","tp/codemirror/mode/clike/clike","tp/codemirror/mode/css/css","tp/codemirror/mode/htmlmixed/htmlmixed","tp/codemirror/mode/javascript/javascript","tp/codemirror/mode/perl/perl","tp/codemirror/mode/php/php","tp/codemirror/mode/python/python","tp/codemirror/mode/ruby/ruby","tp/codemirror/mode/xml/xml"],function(e,t,o){var r=function(){this._ctor()};return r.prototype={emptyText:"No data to display",_ctor:function(){this.placeholder=t('<div class="_viewSourcePopup viewSourcePopup" />'),this.codeViewer=e(this.placeholder[0],{readOnly:!0,lineNumbers:!0})},resizeCodeViewer:function(){var e=t("._viewSourcePopup"),o=e.height(),r=e.width();t(".CodeMirror-scroll").css({height:o,width:r})},_createPopup:function(){if(!this.popup){var e=t.proxy(this.resizeCodeViewer,this);this.popup=this.placeholder.popup({autoOpen:!1,minWidth:300,parentClassName:"vcsSource",open:e,resize:e})}},openPopup:function(e,t){this.codeViewer.setValue(t),this._createPopup(),this.popup.popup("option","title",e),this.popup.popup("open"),this.codeViewer.refresh()},view:function(e,t,r){t=t||this.emptyText;var i="File: "+r+'<br /><span class="subTitle">Revision: '+e+"</span>";this.placeholder.removeClass("_refreshing"),o.get(this.placeholder).hide(),this._setModeByFileExtension(r),this.openPopup(i,t)},loading:function(){this.placeholder.addClass("_refreshing"),o.get(this.placeholder).show(),this.openPopup("","")},_getExtension:function(e){return e.substr(e.lastIndexOf(".")+1)},_setModeByFileExtension:function(e){var t=this._getExtension(e),o="clike";switch(t){case"css":o="text/css";break;case"cs":o="text/x-csharp";break;case"c":case"h":o="text/x-csrc";break;case"cpp":o="text/x-c++src";break;case"html":case"htm":case"shtml":o="text/html";break;case"js":o="text/javascript";break;case"java":o="text/x-java";break;case"perl":o="text/x-perl";break;case"php":case"phtml":case"phl":o="application/x-httpd-php";break;case"py":o="text/x-python";break;case"rb":o="text/x-ruby";break;case"xml":case"config":o="application/xml";break;default:o="null"}this.codeViewer.setOption("mode",o)}},new r});
define('tp/plugins/vcs/viewDiff/diffPopup',["jQuery","tau/ui/behaviour/common/ui.behaviour.progressIndicator","tp/popup"],function(i,e){var n=function(){this._ctor()};return n.prototype={placeholder:i(['<div class="_viewDiffPopup viewDiffPopup">','<div class="diffHeader">','<div class="_legend legend">','<span class="lineAdded">line added</span>&nbsp;&nbsp;','<span class="lineUpdated">line changed</span>&nbsp;&nbsp;','<span class="lineDeleted">line deleted</span>',"</div>",'<div class="revisionsContainer">','<div class="revisionContainer right">','<div class="_rightRevision revision"></div>',"</div>",'<div class="revisionContainer left">','<div class="_leftRevision revision"></div>',"</div>","</div>","</div>",'<div class="diffContainer _diffContainer">','<div class="_rightContainer sourceContainer right">',"<pre>",'<div class="_rightPan"></div>',"</pre>","</div>",'<div class="_leftContainer sourceContainer left">',"<pre>",'<div class="_leftPan"></div>',"</pre>","</div>",'<div style="clear:both;"></div>',"</div>",'<div class="scrollers">','<div class="_rightScroller rightScroller right">','<div class="_scrollerInternals scrollerInternals"></div>',"</div>",'<div class="_leftScroller leftScroller left">','<div class="_scrollerInternals scrollerInternals"></div>',"</div>","</div>","</div>"].join("")),lineTemplate:'<div {{if line.Action}}class="line${actions[line.Action]}"{{/if}}>${line.LineNumber}  ${line.Line}</div>',actions:{0:"None",10:"Added",20:"Updated",30:"Deleted"},emptyText:"No data to display",_ctor:function(){},_createPopup:function(){if(!this.popup){var e=i.proxy(this._getSyncFunction("left","right"),this),n=i.proxy(this._getSyncFunction("right","left"),this),t=i.proxy(function(){this._processScroller("right"),this._processScroller("left")},this),s=this;this.popup=this.placeholder.popup({autoOpen:!1,minWidth:300,parentClassName:"vcsDiff",open:function(){s._processScroller("right").bind("scroll",n),s._processScroller("left").bind("scroll",e),i(window).bind("resize",t)},close:function(){s.placeholder.find("._rightScroller").unbind("scroll",n),s.placeholder.find("._leftScroller").unbind("scroll",e),i(window).unbind("resize",t)},resize:function(){t()}})}},_getSyncFunction:function(i,e){var n=this;return function(){var t=n.placeholder.find("._"+i+"Scroller");n.placeholder.find("._"+e+"Scroller").scrollLeft(t.scrollLeft()),n.placeholder.find("._"+e+"Container").scrollLeft(t.scrollLeft()),n.placeholder.find("._"+i+"Container").scrollLeft(t.scrollLeft())}},_processScroller:function(e){var n=i("._"+e+"Pan").width(),t=this.placeholder.find("._"+e+"Container"),s=t.width(),l=this.placeholder.find("._"+e+"Scroller"),r=this.placeholder.find("._diffContainer");return t.height()<r.height()?(t.height(r.height()),l.css("right",0)):(t.css("height","auto"),l.css("right","17px")),l.find("._scrollerInternals").width(n),l.width(s),n>s?l.show():l.hide(),l},openPopup:function(i,e){var n=this.placeholder;this._showRevision(n.find("._leftRevision"),e.LeftPanRevisionId),this._showRevision(n.find("._rightRevision"),e.RightPanRevisionId),this._showContent(n.find("._leftPan"),e.LeftPan),this._showContent(n.find("._rightPan"),e.RightPan),this._createPopup(),this.popup.popup("option","title",i),this.popup.popup("open")},view:function(i,n,t){this.placeholder.removeClass("_refreshing"),e.get(this.placeholder).hide(),this.openPopup("Changed file: "+t,n)},loading:function(){this.placeholder.addClass("_refreshing"),e.get(this.placeholder).show();var i={LeftPanRevisionId:"",RightPanRevisionId:"",LeftPan:[],RightPan:[]};this.openPopup("",i)},_showRevision:function(i,e){i.text("Revision "+e)},_showContent:function(e,n){e.html("");for(var t=0;t<n.length;t++){var s=n[t];s.LineNumber=this._normalizeLineNumber(s.LineNumber),s.Line=s.Line.replace(/\t/g,"&#9;")||"&nbsp;",e.append(i.tmpl(this.lineTemplate,{line:s,actions:this.actions}))}},_normalizeLineNumber:function(i){if(0>i)return"     ";var e="     "+(i+1);return e.slice(-5)}},new n});
define('tau/ui/extensions/revisionList/ui.extension.revisionList.showDiff',["Underscore","jQuery","tau/components/extensions/component.extension.base","tp/plugins/pluginsRepository","tp/plugins/commandGateway","tp/plugins/vcs/viewDiff/sourcePopup","tp/plugins/vcs/viewDiff/diffPopup"],function(e,i,t,n,o,a,r){function s(e){var i=document.createElement("link");i.type="text/css",i.rel="stylesheet",i.href=e,document.getElementsByTagName("head")[0].appendChild(i)}var c=["Subversion","Git","Mercurial","TFS"];return s(require.toUrl("tp/codemirror/theme/default.css")),t.extend({plugins:[],"bus afterRender+dataBind":function(t,s,f){var u=this.plugins,d=e.pluck(f.items,"id"),p=this;e.each(c,function(t){var c={pluginName:t},f=new o(c),l={extension:this,pluginName:t,commandGateway:f,revisions:d,viewSourcePopup:a,viewDiffPopup:r,getImportedRevisions:function(){this.commandGateway.execute("GetImportedRevisions",this.revisions,e.bind(this.getImportedRevisionsSuccess,this))},getImportedRevisionsSuccess:function(e){if(0!==e.length){for(var t=s.element,n={},o=0;o<e.length;o++)n[e[o]]=!0;t.find(".ui-revisionList > tbody").each(function(e){var t=i(this),o=t.tmplItem().data;n.hasOwnProperty(o.id)&&e.attachViewDiffBehaviourForElement(t)},[this])}},attachViewDiffBehaviourForElement:function(e){var t=e.tmplItem().data,n=e.find(".files");n.each(function(e){var n=i(this),o=n.tmplItem().data,a=n.find(".vcsViewDisabled");if("Deleted"!=o.fileAction&&(a.attr("href","#").removeAttr("disabled").addClass("vcsView"),a.click(function(i){i.preventDefault(),e.showView(t.id,t.sourceControlId,o.fileName)}),a.removeClass("vcsViewDisabled")),"Modified"===o.fileAction){var r=n.parent().find(".diff");r.append(i('<a href="#" class="_diff button small">Diff</a>').click(function(i){i.preventDefault(),e.showDiff(t.id,t.sourceControlId,o.fileName)}))}},[this])},showView:function(e,i,t){var n=p.config;n.context.configurator.getKeyBoardManager().pushHandler({handleKeyDown:function(e){27==e.keyCode&&n.context.configurator.getKeyBoardManager().popHandler()}}),this.viewSourcePopup.loading();var o=this;this.commandGateway.execute("ViewSource",{TpRevisionId:e,Path:t},function(e){var n=e.Content||"File is empty";o.viewSourcePopup.view(i,n,t)},null,this.showError)},showDiff:function(e,i,t){var n=p.config;n.context.configurator.getKeyBoardManager().pushHandler({handleKeyDown:function(e){27==e.keyCode&&n.context.configurator.getKeyBoardManager().popHandler()}}),this.viewDiffPopup.loading();var o=this;this.commandGateway.execute("ViewDiff",{TpRevisionId:e,Path:t},function(e){o.viewDiffPopup.view(i,e,t)},null,this.showError)},showError:function(e){i("<div />").html('<p class="p-15">'+e+"</p>").popup({title:"Error occurred",fitToWindow:!1})}};u[t]=l,n.pluginStartedAndHasAtLeastOneProfile(t,e.bind(l.getImportedRevisions,l))},this)}})});
define('tau/components/component.revisionList',["tau/components/component.list.creator","tau/models/model.revisionList","tau/ui/extensions/testCaseList/ui.extension.testCaseList","tau/ui/templates/revisionList/ui.template.revisionList","tau/ui/extensions/revisionList/ui.extension.revisionList.showDiff","tau/ui/templates/common/ui.template.entityLink"],function(e,t,i,s,n){return{create:function(o){var u={template:s,extensions:[t,i,n],message:"No revisions found"};return e.create(u,o)}}});
define('tau/models/model.search-resolver',["jQuery"],function(e){return{resolveSearchToken:function(t,n){var r=e.Deferred();return/^\d+$/.test(t)?(t=parseInt(t,10),n.getStore().get("general",{failureGlobal:!1,id:t,fields:["id",{entityType:["id","name"]}],errorHandler:function(e){var t=e.status,n=404==t||400==t;return!n}}).done({success:function(e){var t=e[0].data,i=n.getStore();"project"===t.entityType.name.toLowerCase()?i.get("project",{id:t.id,fields:["id","name"]}).done({success:function(){r.resolve({id:t.id,entity:t.entityType.name})},failure:function(){r.resolve({id:null,entity:"search"})}}):r.resolve({id:t.id,entity:t.entityType.name})},failure:function(){r.resolve({id:null,entity:"search"})}})):/^(?:\*\d+\*|\*\d+|\d+\*)$/.test(t)||t.length>2?r.resolve({id:null,entity:"search"}):r.reject("Enter more than 2 chars"),r}}});
define('tau/components/component.search.filter',["Underscore","jQuery","tau/components/component.creator","tau/models/model.search-resolver","tau/components/extensions/error/extension.errorBar"],function(e,t,i,a,r){return{create:function(n){n["queue.bus"]=!0;var s={"queue.bus":!0,extensions:[r],template:{engine:"jqote2",name:"search-filter-template",markup:['<div class="tau-search-header">','<form action="">','<div class="tau-search-wrap">','<span class="tau-inline-group tau-search">','<input type="text" class="tau-in-text i-role-search-string" placeholder="Search" value="<%! this.params.searchString %>">','<button class="tau-btn tau-search i-role-search-trigger"></button>',"</span>","</div>",'<div class="search-settings">',"<span>Search in</span>",'<select class="tau-select i-role-entity-type-filter">','<option value=""<% if (!this.params.entityTypeId) { %> selected<% } %>>Any entities</option>',"<% for(var i = 0; i < this.entityTypes.length; i++) { %>","<% var et = this.entityTypes[i]; %>",'<option value="<%= et.id %>"<% if (et.id == this.params.entityTypeId) { %> selected<% } %>>',"<%= et.term %>","</option>","<% } %>","</select>",'<select class="tau-select i-role-entity-state-filter">','<option value=""<% if (!this.params.entityStateIds) { %> selected<% } %>>Any states</option>',"<% for(var i = 0; i < this.entityStates.length; i++) { %>","<% var es = this.entityStates[i]; %>",'<option value="<%= es.id %>" available="<%= es.availableId %>"<% if (es.id == this.params.entityStateIds) { %> selected<% } %>>',"<%= es.name %>","</option>","<% } %>","</select>",'<label class="tau-checkbox">','<input<% if (this.params.isAllProjects) { %> checked<% } %> type="checkbox" class="i-role-all-projects-filter">',"<i></i>","<span>All projects <% if (this.isBoardEdition) { %>&amp; teams<% } %></span>","</label>","</div>","</form>","</div>"]}},o=i.create(s,n);return o.on("afterInit",function(e){var t=e.data.config.context.configurator,i=t.service("search"),a=i.params().get();i.getSearchDomain(a).done(function(e){e.isBoardEdition=t.isBoardEdition,o.fire("dataBind",e)})}),o.on("afterRender",function(i){var r=i.data.element,s=n.context.configurator,l=function(e){var t=[".i-role-search-string",".i-role-entity-type-filter",".i-role-entity-state-filter",".i-role-all-projects-filter"].join(","),i=r.find(t);e===!1?i.attr("disabled","disabled"):i.removeAttr("disabled")},c=s.service("search"),d=function(){var t=c.params();return t.set("entityStateIds",null),c.getSearchDomain(t.get()).done(function(t){var i=r.find(".i-role-entity-state-filter"),a=i.val(),n=i.find('option[value="'+a+'"]').text();n=e.trim(n),i.empty().append('<option value="">Any state</option>'),e(t.entityStates).each(function(e){var t=e.name===n?" selected":"";i.append('<option value="'+e.id+'" available="'+e.availableId+'"'+t+">"+e.name+"</option>")})})},p=function(){o.fire("clearError"),l(!1);var t=e.trim(r.find(".i-role-search-string").val());a.resolveSearchToken(t,s).fail(function(e){l(!0),o.fire("error",{message:e})}).done(function(e){if("search"===e.entity){var i=s.service("search");i.offSearch(l),i.onSearch(l);var a=r.find(".i-role-all-projects-filter").prop("checked"),n=r.find(".i-role-entity-state-filter"),o=n.val();a===!0&&o&&(o=n.find('option[value="'+o+'"]').attr("available")),i.params().set("searchString",t).set("entityTypeId",r.find(".i-role-entity-type-filter").val()||null).set("entityStateIds",o).set("isAllProjects",a).set("isAllTeams",!s.isBoardEdition||a).submit()}else s.service("navigator").to(e.entity+"/"+e.id)})};r.find(".i-role-search-trigger").click(function(e){e.preventDefault(),p()}),r.on("change",".i-role-entity-type-filter",function(e){e.preventDefault(),c.params().set("entityTypeId",t(this).val()),d().done(p)}),r.on("change",".i-role-entity-state-filter,.i-role-all-projects-filter",function(e){e.preventDefault();var t=c.params(),i=r.find(".i-role-all-projects-filter").prop("checked");t.set("isAllProjects",i),t.set("isAllTeams",!s.isBoardEdition||i),d().done(p)})}),o}}});
define('tau/models/model.search',["Underscore","tau/core/extension.base"],function(e,r){return r.extend({init:function(e){var r=this;r._super.apply(r,arguments);var t=e.context.configurator,n=t.service("search");r.refreshTrigger=function(){r.fire("refresh")},n.onSubmit(r.refreshTrigger),r.destructor=function(){n.offSubmit(r.refreshTrigger)}},destroy:function(){this.destructor(),this._super.apply(this,arguments)},"bus afterInit":function(r){var t=this,n=r.data.config.context.configurator,i=n.service("search"),a=i.params().get();i.search(a).done(function(r){r.data.items=e.map(r.data.items,function(e){var r=e.id,t=e.entityType.name;return"comment"==e.entityType.name.toLowerCase()&&(r=e.general.id,t=e.general.entityType.name),e.url=n.getUrlBuilder().getNewViewUrl(r,t,!0),e}),r.data.srcParams=a,t.fire("dataBind",r.data)})}})});
define('tau/ui/templates/search/ui.template.search',["Underscore","jQuery","app.path","tau/core/templates-factory","tau/utils/utils.date"],function(e,t,a,s,i){var n={name:"search",engine:"jqote2",customFunctions:{oldSearchUrl:function(e){return a.get()+"/Search/Search.aspx?SearchString="+e},esc:function(t){return e.escape(t)},generatePagingItems:function(t,a,s){for(var i=[],n=e.max([t-s,0]),r=e.min([t+s,a-1]),d=0;a>d;d++)0===d||d===a-1?i.push({index:d,text:d+1}):d>=n&&r>=d?i.push({index:d,text:d+1}):(d===n-1||d===r+1)&&i.push({index:d,text:"..."});return i},formatDate:function(e){var t=i.getAge(e,new Date),a=t.isZero?"Just added":t.toString(),s=i.format.date.short(i.convertToTimezone(e));return s+" ("+a+")"},highlight:function(e,t){function a(e,t){var s=0;if(e.nodeType==Node.TEXT_NODE){var i=e.data.toUpperCase().indexOf(t);if(i>=0){var n=document.createElement("span");n.className="tau-search-txt";var r=e.splitText(i),d=(r.splitText(t.length),r.cloneNode(!0));n.appendChild(d),r.parentNode.replaceChild(n,r),s=1}}else if(1==e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName))for(var o=0;o<e.childNodes.length;++o)o+=a(e.childNodes[o],t);return s}return e.each(function(){a(this,t.toUpperCase())})},nodeCutOffIterator:function(t,a){if(t){var s=t.textContent.replace(/\s+/g," "),i=s.length,n=[" ","[","]","{","}","(",")","/","\\",",",".",":",";","?","!","&","+","-","*"];if(i>2*a){var r=e.indexOfAnyChar(s,n,a);r=-1===r?a:r;var d=s.substring(0,r),o=i-a,c=e.indexOfAnyChar(s,n,o);c=-1===c?o:c;var u=s.substring(c,i);t.textContent=d+" ... "+u}}return t},iterateTokenThruKeywords:function(t,a){var s={token:a,matches:[]},i=a.toLocaleLowerCase();s.matches=e(t).reduce(function(e,t){var a=t.toLocaleLowerCase(),s=0;do if(s=i.indexOf(a,s),-1!==s){var n=s,r=n+a.length;e.push({a:n,z:r}),s=r}while(-1!==s);return e},s.matches);for(var n=e(s.matches).sortBy(function(e){return e.a}),r=[];n.length;){for(var d=n.shift();n.length&&d.z>=n[0].a;)n[0].z>d.z&&(d.z=n[0].z),n.shift();r.push(d)}return s.matches=r,s},format:function(a,s,i){var n=this;if(a=t("<div>"+(a||"")+"</div>").text(),a=t.trim(a).replace(/</g,"&lt;").replace(/>/g,"&gt;"),0===a.length)return"";var r,d=a.split(" "),o=e(d).chain().map(e.bind(n.iterateTokenThruKeywords,n,s)).reduce(function(e,t){for(var a=t.token,s=[],i=0,n=0;n<t.matches.length;n++){var r=t.matches[n];s.push(a.substring(i,r.a)),s.push('<span class="tau-search-txt">'),s.push(a.substring(r.a,r.z)),s.push("</span>"),i=r.z}return s.push(a.substring(i)),e.push(s.join("")),e},[]).value(),c=t("<div>"+o.join(" ")+"</div>");if(i){r=t("<div></div>");var u=n.nodeCutOffIterator,l=0,h=0;c.contents().each(function(e,a){var s,i=a.nodeType==Node.TEXT_NODE;if(i)s=u(a,30),h+=s.textContent.length;else{var n=t(a).text();h+=n.length,s=a}h>315?!i&&++l:r.append(s)}),l>0&&r.append('... <strong class="more-matches">+ '+l+" more match"+(l>1?"es":"")+".</strong>")}else r=c;return r.html()}},markup:["<% if (this.error) { %>",'<div class="tau-search-results">','<div class="tau-items">','<div class="tau-search-item tau-search-error">','<div class="tau-search-content">','<div class="tau-body"><%= this.response.responseText %></div>',"</div>","</div>",'<div class="tau-search-item">','<div class="tau-search-content">','<div class="tau-body">',"Something&apos;s wrong with the search. ","Try again or ",'<a class="tau-popup-link" href="<%= fn.oldSearchUrl(this.srcParams.searchString) %>">switch to the old search</a>',"</div>","</div>","</div>","</div>","</div>","<% } else { %>",'<div class="tau-search-results">','<div class="tau-items">',"<% if (this.info.indexProgress < 100) { %>",'<div class="tau-search-item tau-search-notification">','<div class="tau-search-content">','<div class="tau-body">Search results might be incomplete at this point. Indexing is still in progress...</div>',"</div>","</div>","<% } %>","<% var keywords = this.keywords; %>","<% if (this.items.length === 0) { %>",'<div class="tau-search-item">','<div class="tau-search-content">','<div class="tau-body">Nothing found</div>',"</div>","</div>","<% } %>","<% _.forEach(this.items, function(d) { %>","<% var entityType = d.entityType.name.toLowerCase(); %>",'<% var isComment = (entityType === "comment"); %>','<% var isTestCase = (entityType === "testcase"); %>','<div class="tau-search-item">','<div class="tau-search-content">','<div class="tau-header">','<span class="tau-entity tau-<%= d.entityType.name.toLowerCase() %>"><%= d.entityType.term %></span>',"<% if (isComment) { %>",'<span class="tau-entity tau-<%= d.general.entityType.name.toLowerCase() %>"><%= d.general.entityType.term %></span>','<a href="<%= d.url %>" class="tau-entity-id">#<%= d.general.id %></a>',"<% } else { %>",'<a href="<%= d.url %>" class="tau-entity-id">#<%= d.id %></a>','<span class="tau-entity-filter"><%= fn.format(d.tags.join(" "), keywords, false) %></span>',"<% } %>","</div>",'<div class="tau-body">',"<% if (isComment) { %>",'<h3><a href="<%= d.url %>"><%= fn.esc(d.general.name) %></a></h3>',"<% } else { %>",'<h3><a href="<%= d.url %>"><%= fn.format(fn.esc(d.nameExt), keywords, false) %></a></h3>',"<% } %>","<% if (isTestCase) { %>","<% if (d.steps) { %><p><strong>Steps:</strong> <%= fn.format(d.steps, keywords, true) %></p><% } %>","<% if (d.success) { %><p><strong>Success:</strong> <%= fn.format(d.success, keywords, true) %></p><% } %>","<% } else { %>","<p><%= fn.format(d.descExt, keywords, true) %></p>","<% } %>","</div>","</div>",'<div class="tau-search-info">',"<% if (d.entityState) { %>",'<div class="tau-line<% if (d.entityState.isFinal) { %> tau-done-entity<% } %>">','<div class="tau-caption">State</div>','<div class="tau-txt"><%= d.entityState.name %></div>',"</div>","<% } %>",'<div class="tau-line">','<div class="tau-caption">Сreated</div>','<div class="tau-txt"><%= fn.formatDate(d.createDate) %></div>',"</div>","<% if (d.project) { %>",'<div class="tau-line">','<div class="tau-caption">Project</div>','<div class="tau-txt"><%= d.project.name %></div>',"</div>","<% } %>","<% if (d.team) { %>",'<div class="tau-line">','<div class="tau-caption">Team</div>','<div class="tau-txt">','<span><%= d.team.name %></span><% if (d.team.icon) { %><i class="tau-icon tau-icon_type_svg tau-icon_name_<%! d.team.icon %>"></i><% } %>',"</div>","</div>","<% } %>","</div>","</div>","<% }); %>","</div>","<% var pagesCount = Math.ceil(this.info.total / this.info.pageSize); %>","<% if (pagesCount > 1) { %>",'<div class="tau-paging i-role-paging-container">','<div class="tau-links">','<a href="" class="tau-prev<% if (this.info.pageNo == 0) { %> tau-disabled<% } %> i-role-paging-prev">Previous <%= this.info.pageSize %></a>','<a href="" class="tau-next<% if (this.info.pageNo == (pagesCount - 1)) { %> tau-disabled<% } %> i-role-paging-next">Next <%= this.info.pageSize %></a>',"</div>",'<ul class="i-role-paging-pageno">',"<% var pagingItems = fn.generatePagingItems(this.info.pageNo, pagesCount, 5); %>","<% for (var i = 0; i < pagingItems.length; i++) { %>","<% var item = pagingItems[i]; %>","<% if (item.index == this.info.pageNo) { %>",'<li class="active"><span><%= item.text %></span></li>',"<% } else { %>",'<li><a href="" data-page="<%= item.index %>"><%= item.text %></a></li>',"<% } %>","<% } %>","</ul>","</div>","<% } %>","</div>","<% } %>"]};return s.register(n)});
define('tau/components/component.search',["jQuery","tau/components/component.creator","tau/core/extension.base","tau/models/model.search","tau/ui/templates/search/ui.template.search","tau/ui/behaviour/common/ui.behaviour.progressIndicator"],function(e,a,t,n,r,i){return{create:function(o){o=o||{};var s={extensions:[n,t.extend({"bus afterRender":function(e,a){var t=a.element;i.get(t).hide()},"bus afterRender > refresh":function(e,a){var t=a.element;t.css("opacity",.5),i.get(t).show()},"bus afterInit + afterRender":function(a,t,n){var r=t.config.context.configurator,i=r.service("search"),o=n.element;o.on("click",".i-role-paging-container .i-role-paging-prev",function(a){if(a.preventDefault(),!e(a.target).hasClass("tau-disabled")){var t=i.params().get("pageNo");i.params().set("pageNo",--t).submit()}}),o.on("click",".i-role-paging-container .i-role-paging-next",function(a){if(a.preventDefault(),!e(a.target).hasClass("tau-disabled")){var t=i.params().get("pageNo");i.params().set("pageNo",++t).submit()}}),o.on("click",".i-role-paging-container .i-role-paging-pageno a",function(a){a.preventDefault();var t=e(a.target).data("page");i.params().set("pageNo",t).submit()})}})],template:o.template||r};return a.create(s,o)}}});
define('tau/models/shareLink/model.shareLink',["Underscore","tau/core/extension.base"],function(e,t){return t.extend({"bus beforeInit":function(e,t){var n=t.config.context.entity,r=t.config.context.configurator;this.fire("dataBind",{url:r.getUrlBuilder().getShortViewUrl(n)})}})});
define('tau/ui/extensions/shareLink/ui.extension.shareLink.main',["Underscore","tau/core/extension.base"],function(e,n){return n.extend({"bus afterRender":function(e,n){var t=n.element,r=t.find(".i-role-trigger"),o=t.find(".i-role-content");r.tauBubble({content:o.detach(),onShow:function(){o.find("textarea").caretAll()}})}})});
define('tau/ui/templates/shareLink/ui.template.shareLink',["tau/core/templates-factory"],function(t){var e={name:"shareLink",engine:"jqote2",markup:['<div class="tau-sharelink">','<button type="button" class="i-role-trigger tau-button-link">',"Share link","</button>",'<div class="i-role-content">','<textarea class="tau-sharelink__link" readonly><%= this.url %></textarea>',"</div>","</div>"]};return t.register(e)});
define('tau/components/component.shareLink',["tau/components/component.creator","tau/models/shareLink/model.shareLink","tau/ui/extensions/shareLink/ui.extension.shareLink.main","tau/ui/templates/shareLink/ui.template.shareLink"],function(e,n,t,a){return{create:function(i){var r={extensions:[n,t],template:a};return e.create(r,i)}}});
define('tau/components/component.steps',["tau/components/component.property.richtext"],function(e){return{create:function(t){return t=t||{},t.fieldName="steps",e.create(t)}}});
define('tau/components/component.success',["tau/components/component.property.richtext"],function(e){return{create:function(t){return t=t||{},t.fieldName="success",e.create(t)}}});
define('tau/ui/extensions/board.main.menu/ui.extension.board.main.menu.container',["jQuery","tau/core/extension.base","tau/ui/extensions/board.main.menu/ui.extention.board.main.menu.submenu"],function(e,n,u){return n.extend({"bus afterRender + $children.rendered":function(e,n){u.createSubMenu(n,this.bus)}})});
define('tau/components/component.support-block',["tau/components/component.container","tau/ui/extensions/board.main.menu/ui.extension.board.main.menu.container"],function(e,t){return{create:function(u){var n={name:"support-block",engine:"jqote2",markup:['<div class="tau-menu-item">','   <span class="i-role-support tau-popup-link tau-extension-board-tooltip" data-title="Contact us">Support</span>','   <div class="tau-user-submenu tau-support-bubble"></div>',"</div>"]},a={template:n,extensions:[t],layout:"selectable",children:[{type:"live-chat",selector:".tau-user-submenu"},{type:"feedback",selector:".tau-user-submenu"},{type:"user-voice",selector:".tau-user-submenu"}]};return u["queue.bus"]=!0,e.create(a,u)}}});
define('tau/views/view.tabs',["Underscore","tau/views/view.container"],function(e,i){var t=i.extend({startLifeCycle:function(i){var t=this;t.setDefaultConfig(),e.extend(t.config,(i||{}).data),t.config=this.processConfig(t.config),t.fire("beforeInit",{config:t.config})},"bus beforeInit + state.processed":function(){var i=this,t=i.config.children;i.children=[];var n=e.isArray(t)&&e.size(t)>0&&i.config.visible;if(n){var a=i.config.children,s=i.config.context||{};this.fire("createComponents",{components:a,context:s})}else i.completeInitializationWithoutChildren()},processConfig:function(i){var t=this;return t._selectedIndex=-1,this.additionalHeaderTabIndexList={},this.tabsHeader=e.defaults(i.tabsHeader||{},{type:"tabsHeader",options:{more:!1}}),this.tabsHeader.children=[],this.panels=[],e.each(i.tabs,this.addTabInfo,this),e.each(i.additionalHeaders||[],this.addAdditionalActionToTab,this),i.children=[this.tabsHeader].concat(this.panels),i},addTabInfo:function(e,i){var t=e.selected===!0,n={type:"container",name:e.label+" tab container",selected:t,children:e.header||[],label:e.label};this.tabsHeader.children.push(n);var a={type:"container",visible:t,children:e.items||[]};this.panels.push(a),t&&(this._selectedIndex=i)},addAdditionalActionToTab:function(e){var i=e||{};i.position={right:!0};var t=this.tabsHeader;t.children.push(i),this.additionalHeaderTabIndexList[t.children.length]=!0}});return t});
define('tau/ui/extensions/tabs/ui.extension.tabs.state.base',["Underscore","tau/components/extensions/component.extension.base"],function(e,t){var n=t.extend({getRestoredState:function(){return $.Deferred().resolve(null)},"bus beforeInit":function(t){var n=t.data.config,i=n.children,a=e.filter(i[0].children,function(t){return"container"==t.type&&e.has(t,"selected")});this.initialLabel=null;var s=this;e.forEach(a,function(e){1==e.selected&&(s.initialLabel=e.label)});var r=i.slice(1);this.getRestoredState().done(function(t){var n=!1;t&&e.forEach(a,function(e,i){e.label==t?(n=!0,r[i].visible=!0,e.selected=!0):(r[i].visible=!1,e.selected=!1)}),0==n&&e.forEach(a,function(e,t){e.label==s.initialLabel&&(r[t].visible=!0,e.selected=!0)}),s.fire("state.processed",{})})},"bus childrenRendered":function(t){var n=[];e.forEach(t.data.config.tabs,function(e,t){n[t]={label:e.label}}),this.fire("headerRendered",{component:t.data.children[0],switchConfig:n});var i=t.data.children.slice(1);this.fire("tabsRendered",{components:i})},"bus headerRendered":function(t){var n=t.data.component,i=e.bind(function(t,n){e.bind(this.onHeaderSwitched,this)(n)},this);n.on("switched",i),this.header=n},"bus headerRendered+tabsRendered":function(t){var n=t.headerRendered.data.switchConfig,i=t.tabsRendered.data.components,a={};e.forEach(i,function(e,t){a[n[t].label]=e}),this.tabs=a},onHeaderSwitched:function(e){this.tabs[e]&&this.selectTabExternal(e)},selectTabInternal:function(t){var t=t||this.initialLabel;if(this.tabs[t]){var n=this.tabs[t];e.forEach(this.tabs,function(e){e.fire("hide")}),n.once("show.completed",e.bind(function(){this.fire("tabs.switched.completed",t)},this)),n.fire("show"),this.header.fire("switched.after",t),this.fire("tabs.switched")}},selectTabExternal:function(e){this.selectTabInternal(e)}});return n});
define('tau/ui/extensions/tabs/ui.extension.tabs.state.routing',["Underscore","tau/ui/extensions/tabs/ui.extension.tabs.state.base"],function(t,e){return e.extend({getRestoredState:function(){var t=$.Deferred(),e=this.getStateName();return this.config.context.componentSettings.get({fields:[e],callback:function(n){t.resolve(n[e])}}),t},getStateName:function(){return this.config.stateName},selectTabExternal:function(t){var e=this.config.context.componentSettings,n={},i=this.getStateName();n[i]=t,e.set({set:n})},onStateChanged:function(t){var e=t[this.getStateName()]||this.defaultState;this.selectTabInternal(e)},"bus initialize":function(){var t=this,e=t.config.context.componentSettings;e.bind({fields:[this.getStateName()],listener:t,callback:t.onStateChanged})},destroy:function(){var t=this,e=t.config.context.componentSettings;e.unbind({listener:t,callback:t.onStateChanged}),this._super()}})});
define('tau/ui/extensions/tabs/ui.extension.tabs.state.simple',["Underscore","tau/ui/extensions/tabs/ui.extension.tabs.state.base"],function(e,n){var t=n.extend({});return t});
define('tau/components/component.tabs',["tau/components/component.creator","tau/views/view.tabs","tau/components/extensions/component.creator.extension","tau/ui/extensions/tabs/ui.extension.tabs.state.routing","tau/ui/extensions/tabs/ui.extension.tabs.state.simple","tau/ui/extensions/layout/ui.extension.layout","tau/ui/templates/container/ui.template.container.list"],function(t,e,n,s,a,i,o){return{create:function(u){var c=u.stateName?s:a,r={extensions:[n,c,i].concat(u.extensions||[]),ViewType:e,template:o};return t.create(r,u)}}});
define('tau/ui/extensions/tabsHeader/ui.extension.tabsHeader.layout',["Underscore","jQuery","tau/core/extension.base"],function(e,t,a){return a.extend({"bus beforeInit":function(t,a){var i=a.config;this.options=e.defaults(i.options||{},{itemClassName:"tab-item",itemRightClassName:"tab-item tab-item-right-part",selectedClassName:"selected"})},"bus afterRender + childrenRendered":function(a,i,s){var r=this,n=i.element,l=n.is(".i-role-tabheaders")?n:n.find(".i-role-tabheaders:first"),o=s.childrenEvtArgs,d=s.config.children;e.forEach(o,function(e,t){var a=e.element,i=d[t];r.insertChild(l,a,i)}),n.on("click",".i-role-tabheader",function(){var e=t(this).data("label");e&&r.fire("switched",e)}),this.fire("$el.ready",n)},insertChild:function(a,i,s){var r=this.options,n=[];e.has(s.position||{},"right")&&s.position.right?n.push(r.itemRightClassName):(n=["i-role-tabheader"],n.push(r.itemClassName)),s.selected&&n.push(r.selectedClassName),s.className&&n.push(s.className),n.push("i-taus");var l=s.label||i.text();i.length&&t("<li></li>").addClass(n.join(" ")).attr("data-label",l).attr("taustype","view-entity").attr("tauspref","tab").append(i).appendTo(a)},"bus $el.ready:last + switched.after":function(e,a,i){var s=a.find(".i-role-tabheader"),r=this.options;s.each(function(){var e=t(this);e.toggleClass(r.selectedClassName,e.data("label")==i)})}})});
define('tau/ui/templates/tabsHeader/ui.template.tabsHeader.item.more',["tau/core/templates-factory"],function(e){var r={name:"tabsHeader.item.more",markup:['<li class="tab-item tab-item-more-trigger i-role-moretrigger">','<span  class=" i-role-morelabel" data-text="More">More</span>','<ul class="i-role-moreholder drop-down-list"></ul>',"</li>"]};return e.register(r)});
define('tau/ui/extensions/tabsHeader/ui.extension.tabsHeader.more',["Underscore","jQuery","tau/core/extension.base","tau/ui/templates/tabsHeader/ui.template.tabsHeader.item.more"],function(e,t,i,n){function a(e){return function(){setTimeout(e,100)}}return i.extend({"bus $el.ready":function(t,i){var n=e.bind(function(){i.parents("body").length?this.fire("view.dom.ready"):e.delay(n,100)},this);n()},"bus beforeInit + $el.ready":function(i,a,o){var r=o.find(".i-role-tabheaders"),d=o.find(".i-role-tabheader"),s=a.config.context.configurator.getTemplateFactory().get(n.name).bind({},{});s.hide(),s.appendTo(r),o.addClass("entity-tabs_more_enable");var l=o.find(".i-role-moretrigger"),u=o.find(".i-role-moreholder");l.tauBubble({content:u.detach(),zIndex:3,onShow:function(){u.find(".i-role-tabheader").each(function(e,i){var n=t(i).find(".ui-quantity");n.length&&n.text(d.filter("[data-label="+t(i).data("label")+"]").find(".ui-quantity").text())})}}),this.on("destroy",function(){u.remove()}),u.on("click",".i-role-tabheader",e.bind(function(e){var i=t(e.currentTarget).data("label");i&&this.fire("switched",i)},this))},"bus $el.ready + view.dom.ready":function(i,n){var o=n.find(".i-role-tabheaders"),r=n.find(".i-role-tabheader"),d=n.find(".i-role-moretrigger"),s=d,l=s.find(".i-role-morelabel"),u=d.tauBubble("option","content");r.each(function(){var e=t(this).clone();e.addClass("drop-down-option"),u.append(e)});var b=u.find(".i-role-tabheader"),f=function(e){return e.offset().top==o.offset().top},c=function(){d.data("ui-tauBubble")&&d.tauBubble("hide");for(var e=!1,i=0;!e&&100!=i;){i++;var n=t();b.each(function(e,i){var a=t(i),o=r.filter(function(e,i){return t(i).data("label")==a.data("label")}),d=f(o);if(d?(n=o,o.css("visibility","visible")):o.css("visibility","hidden"),a.attr("hidden",d),a.toggleClass("selected",o.is(".selected")),o.is(".selected")){s.toggleClass("selected",!d);var u=l.data("text");d||(u=[o.find(".ui-label").text(),u].join(" - ")),l.text(u)}}),n.length?n.after(s):o.prepend(s);var a=0==b.filter(":not([hidden])").length;s.toggle(!a),a||f(s)?e=!0:s.prev().before(s)}};c(),t(window).on("resize.more",e.debounce(c,100)),this.bus.on("switched.after",c,this),this.bus.globalBus.on("setBadgeData",a(c),this),this.bus.globalBus.on("expanded",a(c),this),this.bus.globalBus.on("collapsed",a(c),this),this.bus.globalBus.on("zoom.updated",a(c),this),this.bus.globalBus.on("collapser.switched",a(c),this)},destroy:function(){t(window).off("resize.more"),this._super()}})});
define('tau/ui/templates/tabsHeader/ui.template.tabsHeader',["tau/core/templates-factory"],function(t){var e={name:"tabsHeader",markup:['<div class="entity-tabs">','<div class="entity-tabs__holder">','<ul class="entity-tabs__list i-role-tabheaders">',"</ul>","</div>","</div>"]};return t.register(e)});
define('tau/components/component.tabsHeader',["tau/components/component.creator","tau/views/view.container","tau/components/extensions/component.creator.extension","tau/ui/extensions/tabsHeader/ui.extension.tabsHeader.layout","tau/ui/extensions/tabsHeader/ui.extension.tabsHeader.more","tau/ui/templates/tabsHeader/ui.template.tabsHeader"],function(e,t,n,a,o,s){return{create:function(i){var r=_.defaults(i.options||{},{more:!1}),u={extensions:_.compact([n,a,r.more?o:null].concat(i.extensions||[])),ViewType:t,template:i.template||s};return e.create(u,i)}}});
define('tau/models/tags/model.tags.data',["Underscore","tau/core/extension.base","tau/models/tags/tagsProcessor"],function(e,t,r){return t.extend({"bus beforeInit":function(e,t){var i=t.config.context.entity,n=t.config.context.configurator;this.fire("entity.ready",i),this.fire("configurator.ready",n),this.fire("tagsProcessor.ready",new r)},"bus configurator.ready + entity.ready + tagsProcessor.ready + beforeInit":function(t,r,i,n){var a=r.getStore();a.evictProperties(i.id,i.entityType.name,["tags"]),a.get(i.entityType.name,{id:i.id,fields:["id","tags"]}).done(e.bind(function(e){this.fire("dataBind",{tags:this._process(n.asArray(e[0].data.tags),r)})},this))},_process:function(t,r){return t=e.map(t,function(e){var t={name:e},i=t.name.match(/^duplicateOf\#(\d+)$/i);return i&&(t.isDuplicate=!0,t.href=r.getUrlBuilder().getNewViewUrl(i[1],"bug",!0)),t})}})});
define('tau/models/tags/model.tags.editable',["Underscore","tau/core/extension.base"],function(t,e){return e.extend({"bus configurator.ready:last + entity.ready:last + tagsProcessor.ready:last + form.submitted":function(t,e,n,a,i){var r=e.getStore();r.save(n.entityType.name,{id:n.id,$set:{tags:a.asString(i.tags)},fields:["id","tags"]}).done()},"bus configurator.ready + entity.ready + beforeInit":function(e,n,a){var i=n.getStore();i.unbind(this),i.on({eventName:"afterSave",type:a.entityType.name,listener:this,filter:{id:a.id}},t.bind(function(e){e.data.cmd&&e.data.cmd.config.$set&&t.has(e.data.cmd.config.$set,"tags")&&this.fire("refresh")},this))},"bus configurator.ready > destroy":function(t,e){var n=e.getStore();n.unbind(this)}})});
define('tau/models/tags/model.tags.duplicateBug',["tau/core/extension.base"],function(e){return e.extend({"bus configurator.ready":function(e,t){var i=t.getGlobalBus();i.removeAllListeners(this),i.on("bugWasMarkedAsDuplicate",_.bind(function(e){this.fire("bug.duplicated",{sourceId:e.data.bugId,duplicateId:e.data.duplicateBugId})},this),this)},"bus configurator.ready:last + entity.ready:last + bug.duplicated":function(e,t,i,r){(i.id==r.duplicateId||i.id==r.sourceId)&&(t.getStore().evictProperties(i.id,i.entityType.name,["tags"]),this.fire("refresh"))},"bus configurator.ready > destroy":function(e,t){t.getGlobalBus().removeAllListeners(this)}})});
define('tau/ui/behaviour/tags/ui.behaviour.tagsEditor',["Underscore","jQuery"],function(t,i){i.widget("ui.tagsEditor",{options:{alwaysShowEditor:!1,renderEditorFirst:!1,selector:".ui-tags__tag",onSave:i.noop,onShow:i.noop},_create:function(){this.init()},init:function(){this.$list=i(this.element);var e=this.options.selector,s=this.$list.find(e);s.append('<span class="ui-tags__control-delete i-role-actiondelete" title="Delete tag">Delete tag</span>');var o=this;this.$list.delegate(".ui-tags__control-delete","click",function(t){t.preventDefault(),i(this).parents(e).eq(0).remove(),o.options.onSave(o.getTags())});var n=t.bind(this.showEditor,this);this.$widget=i(['<li class="ui-tags__editor">',"</li>"].join("")),this.options.renderEditorFirst?this.$list.prepend(this.$widget):this.$list.append(this.$widget),this.options.alwaysShowEditor?n():(this.$widget.append(i(['<span title="Add tag" class="ui-tags__editor__control-show i-role-control_show">',"<i>Add tag</i>","</span>"].join(""))),this.$widget.find(".i-role-control_show").click(function(t){t.preventDefault(),n()}))},_processAddTag:function(t){var i=this,e=i.parseTags(t.find(":text").val()),s=i.getTags();s=s.concat(e),i.options.onSave(s)},showEditor:function(){if(!this._editorIsVisible){if(!this.$editor){var e=i(['<form class="ui-tags__editor__inner">','<input type="text" maxlength="50" class="tau-in-text ui-tags__editor__input" />','<span class="tau-inline-group">','<button title="Add"  type="submit"  class="tau-btn tau-btn-small ui-tags__editor__button-submit">Add</button>',this.options.alwaysShowEditor?"":'<button title="Cancel" type="reset"  class="tau-btn tau-btn-small tau-close ui-tags__editor__button-cancel"></button>',"</span>","</form>"].join("")),s=this;e.on("submit",function(t){t.preventDefault(),s._processAddTag(e)}),e.on("reset",function(){s.hideEditor()}),e.find(":text").keydown(t.bind(this.mapKeys,this)),e.appendTo(this.$widget),this.$editor=e,this.$text=e.find(":text")}this.resetEditor(),this.$widget.toggleClass("ui-tags__editor-active",!0),this._editorIsVisible=!0,this.$editor.find(":text").focus(),this._trigger("show",this.$editor)}},focus:function(){this.$editor.find(":text").focus()},hideEditor:function(){this.$editor&&this._editorIsVisible&&(this.$editor.find(":text").blur(),this.$widget.toggleClass("ui-tags__editor-active",!1),this._editorIsVisible=!1,this.resetEditor())},resetEditor:function(){this.$editor&&this.$editor.find(":text").val("")},setValue:function(i){t.isArray(i)&&(i=i.join(", ")),this.$editor&&this.$editor.find(":text").val(i)},getValue:function(){return this.parseTags(this.$editor.find(":text").val())},mapKeys:function(t){switch(t.which){case 27:t.preventDefault(),this.hideEditor(t)}},getTagText:function(i){return t.trim(i.find("span:first").text())},getTags:function(){var t=[],e=this;return this.$list.find(this.options.selector).each(function(s,o){var n=i(o);t.push(e.getTagText(n))}),t},parseTags:function(i){i=i||"";var e=i.split(",");return e=t(e).map(function(i){return t.trim(i)}),e=t.uniq(e),e=t.compact(e)}})});
define('tau/ui/extensions/tags/ui.extension.tags.editable',["Underscore","tau/core/extension.base","tau/ui/behaviour/tags/ui.behaviour.tagsEditor"],function(t,i){return i.extend({category:"edit",alwaysShowTagsEditField:!1,"bus beforeInit":function(t,i){this.alwaysShowTagsEditField=i.config.alwaysShowTagsEditField||!1,this.renderEditorFirst=i.config.renderEditorFirst||!1},"bus afterRender:last+focus":function(t,i){i.element.find(".i-role-editor").tagsEditor("focus")},"bus afterRender":function(i,e){var r=e.element;this.fire("$el.ready",r);var a=this,s=r.find(".i-role-editor");s.bind("tagseditorshow",t.bind(this.fire,this,"$editor.shown",s)),s.tagsEditor({validation:{trim:!0},alwaysShowEditor:this.alwaysShowTagsEditField,renderEditorFirst:this.renderEditorFirst,onSave:function(t){s.addClass("data-saving"),a.fire("form.submitted",{tags:t})}}),this.fire("$editor.ready",s)},"bus tagsProcessor.ready:last + $editor.ready:last + external.toggleTag":function(i,e,r,a){r.tagsEditor("showEditor");var s=r.find(":text"),d=e.asArray(s.val());a.checked?d.push(a.text):d=t.without(d,a.text);var o=e.asString(d);o.length?s.val(o):r.tagsEditor("hideEditor")}})});
define('tau/ui/extensions/tags/ui.extension.tags.autocomplete',["Underscore","tau/libs/store2/store2","tau/core/extension.base"],function(e,t,a){return a.extend({category:"edit","bus configurator.ready":function(e,a){this.fire("store2.ready",new t(a))},"bus store2.ready:last + tagsProcessor.ready:last + autocomplete.resolve":function(t,a,n,o){var r=o.$input[0].selectionEnd;if(e.isUndefined(r)&&document.selection){var s=document.selection.createRange(),i=document.selection.createRange().text.length;s.moveStart("character",-o.$input.val().length),r=s.text.length-i}var u=o.request.term.substr(0,r),c=e.ltrim(e.strRightBack(u,","));c.length>1?(r-=c.length,o.$input.data("acTerm",c),o.$input.data("acPos",r),a.findAll("Tag?select={"+["name"].join(",")+'}&where=name.startsWith("'+a.arg(c.toLowerCase())+'")').done(function(t){var a=n.asArray(e.pluck(t,"name"));a=e.sortBy(a,function(e){return e.toLowerCase()}),o.next(a)})):o.next([])},"bus tagsProcessor.ready:last + $editor.shown":function(t,a,n){var o=n.find(":text"),r=e.bind(this.fire,this);o.autocomplete({minLength:2,position:{my:"left top",at:"left bottom",collision:"flip"},source:function(e,t){r("autocomplete.resolve",{$input:o,request:e,next:t})},focus:function(){return!1},select:function(e,t){var n=t.item.value,r=o.val(),s=r.substr(0,o.data("acPos"))+r.slice(o.data("acPos")+o.data("acTerm").length);return s=a.asArray(s),s.push(n),s=a.asString(s),o.val(s),o.focus(),!1}});var s=o.data("ui-autocomplete");s._renderItem=function(t,a){return $("<li class='tau-autocomplete__item'></li>").data("ui-autocomplete-item",a).append("<a class='tau-autocomplete__itemtrigger drop-down-option'>"+e.escape(a.label)+"</a>").appendTo(t)},s._renderMenu=function(e,t){$(e).addClass("tau-autocomplete__menu drop-down-list tau-autocomplete__menu__tags").css({maxHeight:.4*$(window).height(),zIndex:this.element.zIndex()+1});var a=this;$.each(t,function(t,n){a._renderItem(e,n)})}}})});
define('tau/ui/templates/tags/ui.template.tags.item',["tau/core/templates-factory"],function(e){var a={name:"tags.item",engine:"jqote2",markup:['<li class="ui-tags__tag i-role-tag" rel="tag">',"<span>","<% if (this.isDuplicate) { %>",'<a class="ui-tags__duplicateBug" href=<%= this.href %>>',"<%! this.name %>","</a>","<% } else { %>","<%! this.name %>","<% } %>","</span>","</li>"]};return e.register(a)});
define('tau/ui/templates/tags/ui.template.tags',["tau/core/templates-factory","tau/ui/templates/tags/ui.template.tags.item"],function(t){var e={name:"tags",engine:"jqote2",markup:["<div>",'<ul class="ui-tags i-role-editor">','<%= fn.sub("tags.item", this.tags) %>',"</ul>","</div>"]};return t.register(e)});
define('tau/components/component.tags',["tau/components/component.creator","tau/models/tags/model.tags.data","tau/models/tags/model.tags.editable","tau/models/tags/model.tags.duplicateBug","tau/ui/extensions/tags/ui.extension.tags.editable","tau/ui/extensions/tags/ui.extension.tags.autocomplete","tau/ui/templates/tags/ui.template.tags"],function(t,e,a,s,n,o,u){return{create:function(i){var g={extensions:[e,a,s,n,o],template:u};return t.create(g,i)}}});
define('tau/models/tagsCloud/model.tagsCloud',["Underscore","tau/core/extension.base"],function(e,t){return t.extend({"bus beforeInit":function(e,t){var i=t.config.context;this.fire("entity.ready",i.entity),this.fire("configurator.ready",i.configurator)},"bus configurator.ready + entity.ready + beforeInit":function(t,i,n){var r=i.getStore(),a=["id","tags"],o=n.entityType.name;e.has(r.config.proxy.types[o].refs,"project")&&a.push({project:["id"]}),r.get(o,{id:n.id,fields:a}).done(e.bind(function(e){this.fire("entityTags.ready",e[0].data.tags),this.fire("entityProject.ready",e[0].data.project)},this)),r.unbind(this),r.on({eventName:"afterSave",type:o,listener:this,filter:{id:n.id}},e.bind(function(t){var i=t.data.cmd;i&&i.config&&i.config.$set&&e.has(i.config.$set,"tags")&&this.fire("refresh")},this)),r.on({eventName:"afterSave",type:o,listener:this,filter:{id:n.id},hasChanges:["project"]},e.bind(function(){this.fire("refresh")},this))},"bus configurator.ready + entityProject.ready + beforeInit":function(t,i,n){var r=n&&n.id?n.id:0;$.ajax({url:i.getApplicationPath()+"/PageServices/WebMethods.asmx/GetAllTags",type:"post",data:JSON.stringify({projectID:r}),contentType:"application/json; charset=utf-8"}).done(e.bind(function(t){var i=e.map(t.d,function(e,t){return{name:t,size:e}});i=this._process(i),this.fire("cloudData.ready",i)},this))},"bus cloudData.ready + entityTags.ready":function(e,t){this.fire("dataBind",{showSearch:t.length>20,tags:t})},"bus configurator.ready > destroy":function(e,t){t.getStore().unbind(this)},_process:function(t){var i=e.max(e.pluck(t,"size"))||1,n=7/i;return e.each(t,function(e){e.size=Math.round(n*e.size)}),t=e.sortBy(t,function(e){return 20-e.size+"_"+e.name.toLowerCase()}),e.each(t,function(e,t){t>=100&&(e.hidden=!0)}),t}})});
define('tau/ui/extensions/tagsCloud/ui.extension.tagsCloud.editable',["Underscore","tau/core/extension.base"],function(e,t){return t.extend({"bus afterRender":function(e,t){var a=this,n=t.element;this.fire("$el.ready",n),n.on("click",".i-role-tag",function(){var e=$(this);e.toggleClass("tau-active"),a.fire("tag.toggled",{text:e.text(),checked:e.hasClass("tau-active")})})}})});
define('tau/ui/extensions/tagsCloud/ui.extension.tagsCloud.filter',["Underscore","jQuery","tau/core/extension.base"],function(e,t,i){return i.extend({"bus $el.ready":function(e,i){var a=this;i.delegate("input[name=filter]","keyup",function(){a.fire("filter.changed",t(this).val())}),i.delegate("input[name=filter]","keydown",function(e){e.keyCode==t.ui.keyCode.ESCAPE&&e.stopPropagation(),e.which==t.ui.keyCode.ENTER&&t(this).trigger("blur")})},match:function(t,i){var a=t.toLowerCase();return 0==i.length||e.any(i,function(e){return a.indexOf(e)>=0})},"bus $el.ready:last + filter.changed":function(i,a,l){var n=e.trim(l).toLowerCase().split(/\s+/g),r=this.match,o=a.find(".i-role-tag"),s=0;e.trim(l).length>0?(o.each(function(){var e=t(this),i=e.text(),a=r(i,n);a&&(s+=1),e.toggleClass("tau-tags-cloud__item_filtered_false",!a),e.toggleClass("tau-tags-cloud__item_filtered_true",a)}),a.toggleClass("tau-tags-cloud_filtered_none",0==s)):(a.toggleClass("tau-tags-cloud_filtered_none",!1),o.toggleClass("tau-tags-cloud__item_filtered_false",!1),o.toggleClass("tau-tags-cloud__item_filtered_true",!1)),this.fire("filter.completed")}})});
define('tau/ui/templates/tagsCloud/ui.template.tagsCloud.item',["tau/core/templates-factory"],function(t){var e={name:"tagsCloud.item",engine:"jqote2",markup:['<span class="tau-tags-cloud__item tau-tag-rank-<%= this.size %> <% if (this.hidden){ %> tau-tags-cloud__item_hidden_true<% } %> i-role-tag">',"<%! this.name %>","</span>"]};return t.register(e)});
define('tau/ui/templates/tagsCloud/ui.template.tagsCloud',["tau/core/templates-factory","tau/ui/templates/tagsCloud/ui.template.tagsCloud.item"],function(t){var a={name:"tagsCloud",engine:"jqote2",markup:['<div class="tau-tags-cloud">',"<% if (this.showSearch) { %>",'<div class="tau-search-team">','<span class="tau-inline-group tau-search">','<input name="filter" type="text" class="tau-in-text" placeholder="Search Tag" tabindex="-1" />','<button type="button" class="tau-btn tau-search"></button>',"</span>","</div>","<% } %>",'<div class="tau-tags-cloud__inner">','<div class="tau-tags-cloud-items">','<%= fn.sub("tagsCloud.item", this.tags) %>',"</div>",'<div class="tau-tags-cloud__message" data-text-nofound="No such tag found" data-text-noitems="No available tags"></div>',"</div>","</div>"]};return t.register(a)});
define('tau/components/component.tagsCloud',["tau/components/component.creator","tau/models/tagsCloud/model.tagsCloud","tau/ui/extensions/tagsCloud/ui.extension.tagsCloud.editable","tau/ui/extensions/tagsCloud/ui.extension.tagsCloud.filter","tau/ui/templates/tagsCloud/ui.template.tagsCloud"],function(t,e,u,o,a){return{create:function(n){var s={extensions:[e,u,o],template:a};return t.create(s,n)}}});
define('tau/ui/extensions/tagsEditor/ui.extension.tagsEditor.integration',["Underscore","tau/core/extension.base"],function(e,t){return t.extend({category:"edit","bus beforeInit":function(e,t){this.fire("configurator.ready",t.config.context.configurator)},"bus afterRender":function(e,t){this.fire("$el.ready",t.element)},"bus configurator.ready":function(t,i){i.getComponentBusRegistry().getByName("tagsCloud").done(e.bind(function(t){t.removeAllListeners(this),t.on("tag.toggled",e.bind(function(e,t){this.fire("tagsCloudTag.toggled",t)},this),this),this.fire("tagsCloudBus.ready",t)},this))},"bus componentsCreated":function(t,i){var n=e.pluck(i,"component"),o=n[0],r=n[1];this.fire("tagsBus.ready",o),this.fire("tagsCloudContainerBus.ready",r)},"bus $el.ready:last + tagsCloudContainerBus.ready":function(e,t,i){var n=this;t.on("click",".i-role-action-cloud",function(){$(this).toggleClass("tau-active"),t.find(".i-role-tagscloudcontainer").toggleClass("tau-active"),n.cloudVisible||(n.cloudVisible=!0,i.fire("refresh",{visible:!0}))})},"bus $el.ready:last + tagsBus.ready":function(e,t,i){var n=t.find(".i-role-tabheader").detach().removeAttr("hidden");this.fire("$tabheader.ready",n),t.find(".i-role-editor").append(n),i.on("afterRender",function(){t.find(".i-role-editor").append(n)}),t.on("click",".i-role-editor :submit",function(){t.find(".i-role-action-cloud").toggleClass("tau-active",!1),t.find(".i-role-tagscloudcontainer").toggleClass("tau-active",!1)})},"bus tagsCloudBus.ready + tagsBus.ready":function(t,i,n){i.removeAllListeners(this),i.on("tag.toggled",e.bind(function(e,t){n.fire("external.toggleTag",t)},this),this),i.on("afterRender",e.bind(function(e,t){this.fire("$cloudEl.ready",t.element)},this),this)},"bus $el.ready:last + $cloudEl.ready":function(e,t,i){var n=i.find("[name=filter]").length>0,o=t.find(".i-role-action-cloud");o.toggleClass("tau-tags-cloud__trigger_filter_true",n)}})});
define('tau/ui/templates/tagsEditor/ui.template.tagsEditor',["tau/core/templates-factory"],function(a){var i={name:"tagsEditor",engine:"jqote2",markup:['<div class="tau-container">','<div class="ui-tagsEditor">','<div class="tau-actions i-role-tabheaders i-role-tagslistcontainer">',"</div>",'<li class="i-role-tabheader ui-tags__action" hidden data-tab="tagsCloud">','<div class="tau-tags-cloud__trigger i-role-action-cloud" >',"<i>","Tags Cloud","</i>","</div>","</li>",'<div class="tau-tab-content">','<div class="tau-tab-pane i-role-tagscloudcontainer">',"</div>","</div>","</div>","</div>"]};return a.register(i)});
define('tau/components/component.tagsEditor',["tau/components/component.creator","tau/views/view.container","tau/components/extensions/component.creator.extension","tau/ui/extensions/layout/ui.extension.layout","tau/ui/extensions/tagsEditor/ui.extension.tagsEditor.integration","tau/ui/templates/tagsEditor/ui.template.tagsEditor"],function(t,e,n,o,i,a){return{create:function(s){var u={ViewType:e,extensions:[n,o,i],template:a};return t.create(u,s)}}});
define('tau/ui/extensions/tagsInline/model',["Underscore","tau/core/class"],function(t,i){return i.extend({init:function(t,i){this.store=t,this.entity=i,this.items=[],this.listenServer()},processString:function(i){var e=i.split(",");return e=t.compact(t.map(e,function(t){return t.trim()})),e=t.map(e,function(t){return{text:t}}),e=this.processUnique(e)},processUnique:function(i){return t.uniq(i,function(t){return t.text.toLowerCase()})},createString:function(i){return t.pluck(i,"text").join(", ")},load:function(){return this.store.getDef(this.entity.entityType.name,{id:this.entity.id,fields:["id","tags"]}).then(t.bind(function(t){this.items=this.processString(t.tags)},this))},addByString:function(t){var i=this.processString(t);return this.items=this.processUnique(this.items.concat(i)),this.save()},removeByString:function(i){return i=t.asString(i).trim(),this.items=t.reject(this.items,function(t){return t.text===i}),this.save()},save:function(){return this.store.saveDef(this.entity.entityType.name,{id:this.entity.id,$set:{tags:this.createString(this.items)}})},listenServer:function(){this.store.unbind(this),this.store.on({eventName:"afterSave",type:this.entity.entityType.name,filter:{id:this.entity.id},hasChanges:["tags"],listener:this},t.bind(function(t){var i=t.data.changes.tags;this.items=this.processString(i)},this))}})});
define('tau/ui/extensions/tagsInline/jquery.tauTagsAutocomplete',["Underscore","jQuery","tau/models/tags/tagsProcessor"],function(e,t,n){var a=new n;return t.widget("ui.tauTagsAutocomplete",t.ui.autocomplete,{options:{store2:null,minLength:2,position:{my:"left top",at:"left bottom",collision:"flip"},source:function(e,t){this._resolve(e,t)},focus:function(){return!1},select:function(e,n){var o=t(e.target),r=n.item.value,s=o.val(),i=o.data("acPos"),l=s.substr(0,i)+s.slice(i+o.data("acTerm").length);return l=a.asArray(l),l.push(r),l=a.asString(l),o.val(l).focus(),!1}},_renderItem:function(n,a){return t("<li class='tau-autocomplete__item'></li>").data("ui-autocomplete-item",a).append("<a class='tau-autocomplete__itemtrigger drop-down-option'>"+e.escape(a.label)+"</a>").appendTo(n)},_renderMenu:function(e,n){t(e).addClass("tau-autocomplete__menu drop-down-list tau-autocomplete__menu__tags").css({maxHeight:.4*t(window).height(),zIndex:this.element.zIndex()+1});var a=this;t.each(n,function(t,n){a._renderItem(e,n)})},_resolve:function(e,n){t.when(this._resolveTagTerm(e)).then(this._resolveTags.bind(this)).then(n)},_resolveTagTerm:function(t){var n=this.element[0].selectionEnd;if(e.isUndefined(n)&&document.selection){var a=document.selection.createRange(),o=document.selection.createRange().text.length;a.moveStart("character",-this.element.val().length),n=a.text.length-o}var r=t.term.substr(0,n),s=e.ltrim(e.strRightBack(r,","));return s.length>1&&(n-=s.length,this.element.data("acTerm",s).data("acPos",n)),s},_resolveTags:function(n){if(n.length<=1)return[];var o=["name"],r=this.options.store2.arg(n.toLowerCase()),s=t.Deferred();return this.options.store2.findAll("Tag?select={"+o.join(",")+'}&where=name.startsWith("'+r+'")').done(function(t){var n=a.asArray(e.pluck(t,"name"));n=e.sortBy(n,function(e){return e.toLowerCase()}),s.resolve(n)}),s}})});
define('tau/ui/extensions/tagsInline/ui.extension.tagsInline',["Underscore","tau/core/extension.base","tau/libs/store2/store2","./jquery.tauTagsAutocomplete"],function(t,e,i){return e.extend({init:function(t,e,i){this.configurator=e,this.model=i,this._super(t)},"bus beforeInit":function(){$.when(this.model.load()).then(t.bind(function(){this.fire("dataBind",this.model)},this))},"bus afterRender":function(e,n){var o=n.element,l=o.find("input"),s=l.closest("li");this.toggleHolderFullWidth(s,!this.model.items.length),o.on("click",function(){l.focus()}),o.find("form").on("submit",!1),l.on({keydown:this._handleKeyDown.bind(this),input:this._handleInput.bind(this),keyup:this._handleInput.bind(this)}),l.tauTagsAutocomplete({store2:new i(this.configurator)}),o.on("click",".i-role-actiondelete",t.bind(function(t){this._removeTag($(t.currentTarget).parent()),l.tauTagsAutocomplete("close"),this.toggleHolderFullWidth(s,!1)},this))},_handleKeyDown:function(t){var e=$(t.target),i=e.closest("li"),n=e.val(),o=$.ui.keyCode;switch(t.keyCode){case o.ENTER:case o.NUMPAD_ENTER:var l=e.data("ui-tauTagsAutocomplete");l.menu.active||(e.tauTagsAutocomplete("close"),n?(e.val(""),this._fireChangeNotificationWith(function(){return this.model.addByString(n)}),this.toggleHolderFullWidth(i,!1)):this.fire("tags.inline.edit.finished"));break;case o.BACKSPACE:n||(this._removeTag(i.prev()),e.tauTagsAutocomplete("close")),this.toggleHolderFullWidth(i,n);break;default:this.toggleHolderFullWidth(i,n)}},_handleInput:function(t){var e=$(t.target),i=e.closest("li");this.toggleHolderFullWidth(i,e.val())},_removeTag:function(t){var e=t.attr("data-text");this._fireChangeNotificationWith(function(){return this.model.removeByString(e)})},_fireChangeNotificationWith:function(t){this.fire("tags.inline.changing"),$.when(t.call(this)).always(this.fire.bind(this,"tags.inline.changed"))},toggleHolderFullWidth:function(t,e){e=!!e,t.toggleClass("ui-tags__inputholder_line_end",!e).toggleClass("ui-tags__inputholder_line_full",e)}})});
define('tau/ui/templates/tagsInline/ui.template.tagsInline',["tau/core/templates-factory"],function(t){return t.register({name:"tagsInline",engine:"jqote2",markup:['<ul class="ui-tags ui-tags-inline">','<li class="ui-tags__tag i-role-tag" rel="tag" data-bind-each-tag="data.items" data-bind-data-text="tag.text">','<span data-bind-text="tag.text"></span>','<span class="ui-tags__control-delete i-role-actiondelete" title="Delete tag">Delete tag</span>',"</li>",'<li class="ui-tags__tag ui-tags__inputholder">','<form><input class="ui-tags__input"></form>',"</li>","</ul>"]})});
define('tau/components/component.tagsInline',["tau/components/component.creator","tau/ui/extensions/tagsInline/model","tau/ui/extensions/tagsInline/ui.extension.tagsInline","tau/ui/extensions/assignments/ui.extension.assignments.view","tau/ui/templates/tagsInline/ui.template.tagsInline"],function(e,t,n,i,s){return{create:function(a){var o=a.context.configurator,u=a.context.entity,r={ViewType:i,extensions:[{extType:n,args:[o,new t(o.getStore(),u)]}],template:s};return e.create(r,a)}}});
define('tau/models/team-members-editor/model.team-members-editor',["tau/core/extension.base","tau/ui/extensions/list/request/extension.requesters.tabs"],function(e,t){return e.extend({"bus beforeInit":function(){this.fire("dataBind",{})},"bus afterRender":function(e){var n=e.data.element.find("[role=action-add]"),i={actionOnBlur:"destroy",target:n,alignTo:n,componentsConfig:{components:[{type:"tabs",cssClass:"tau-tabs-small",extensions:[t],tabs:[{label:"select",header:[{type:"label",text:"Select user"}],items:[{type:"finder.team-members"}],selected:!0}]}]}};this.fire("initBubble",i);var s=function(){n.tauBubble("empty")};n.on("close externalClose",s),n.on("show",function(){var e=n.tauBubble("widget");e.delegate("[role=action-cancel]","click",s)})},"bus beforeInit + $target.ready":function(e,t){var n=t.config.context.configurator.getStore();n.unbind(this),n.on({eventName:"afterSave",type:"team",listener:this},_.bind(function(){this.fire("refresh")},this))}})});
define('tau/ui/templates/team-members-editor/ui.template.team-members-editor',["tau/core/templates-factory"],function(t){var e={name:"team-members-editor",engine:"jqote2",markup:["<div>",'<br /><button type="button" role="action-add" class="tau-button-add">Assign users</button>',"</div>"]};return t.register(e)});
define('tau/components/component.team-members-editor',["tau/components/component.creator","tau/models/team-members-editor/model.team-members-editor","tau/components/extensions/bubble/extension.bubble.creator","tau/components/extensions/component.creator.extension","tau/ui/templates/team-members-editor/ui.template.team-members-editor"],function(e,t,n,o,m){return{create:function(r){var a={extensions:[t,n,o],template:m};return e.create(a,r)}}});
define('tau/models/team.formAdd/model.team.formAdd.data',["Underscore","tau/core/extension.base","tau/configurations/factory.container.config"],function(t,e,n){return e.extend({"bus beforeInit":function(t,e){var n=e.config.context.configurator;this.fire("configurator.ready",n)},"bus configurator.ready:last + beforeInit":function(e,i){var o=i.getStore(),r=t.bind(this.fire,this),a=function(t){return t.name.toUpperCase()};o.get("projects",{fields:["id","name","color","isActive"]}).done(function(e){var i=t.sortBy(e[0].data,a);i=t.filter(i,function(t){return t.isActive}),t.each(i,function(t){t.tooltip=""}),r("dataBind",{projects:i,icons:n.getConfigByType("team").prototype.icons})}),o.unbind(this),o.on({type:"project",eventName:"afterSave",listener:this},function(e){t.isEmpty(e.data.changes)||r("refresh")})}})});
define('tau/models/team.formAdd/model.team.formAdd.add',["Underscore","tau/core/extension.base","tau/libs/inviter/inviter"],function(e,t,n){return t.extend({"bus configurator.ready:last + form.submitted":function(t,i,a){var r=this,s=i.getStore(),o={name:e.trim(a.name),icon:e.trim(e.asString(a.icon))||null,teamProjects:[]};e.forEach(a.connected,function(e){o.teamProjects.push({project:{id:e}})}),s.save("team",{failureGlobal:!1,fields:["id","name","icon","teamProjects"],$set:o},{success:function(e){r.fire("entity.saved",e.data)},failure:function(e){r.fire("entity.add.failure",e.data.response.Message)}}).done();var c=new n(i);c.invite(a.members).done(function(e){r.fire("members.saved",e)})},"bus configurator.ready:last + entity.saved + members.saved":function(t,n,i,a){var r=this,s=n.getStore(),o=e.compact(e.pluck(a,"success")),c=e.compact(e.pluck(a,"failure"));if(c.length){var d="Can't assign users.";this.fire("entity.add.nonFatalFailure",d)}o=e.filter(o,function(e){return e!=n.getLoggedUser().id});var u={teamMembers:e.map(o,function(e){return{user:{id:e}}})};s.save("team",{id:i.id,$set:u,fields:["id","name","icon",{teamMembers:[{user:["id","firstName","lastName","avatarUri"]},{role:["id","name"]}]}]}).done(function(e){r.fire("members.connected",e[0].data)})},"bus entity.saved + members.saved + members.connected":function(e,t,n,i){this.fire("entity.add.success",i)}})});
define('tau/ui/extensions/team.formAdd/ui.extension.team.formAdd',["Underscore","jQuery","tau/ui/extensions/board.context.selector/ui.extension.board.context.selector.add.abstract"],function(e,t,i){return i.extend({"bus afterRender":function(e,t){var i=t.element;this.fire("$el.ready",i)},"bus $el.ready":function(e,t){var i=this,r=this._initForm(t);this._addSubmitDataListener(r,function(e){i.fire("form.submitted",e)});var n=r.find("select"),a=this._initRichSelect(r,n);a.on("change",function(e,t){var i=a.attr("data-value");a.removeClass("tau-icon_name_"+i),a.addClass("tau-icon_name_"+(t||"default"))})},"bus configurator.ready:last + $el.ready:last + entity.add.success":function(e,t,i){i.find("form").trigger("entity.add.completed").trigger("reset"),this.fire("entity.add.completed")},"bus $el.ready:last + entity.add.failure":function(e,t,i){t.find("form").trigger("entity.add.failed"),t.find(".i-role-form :text:first").focus().select().addClass("tau-error"),this.fire("error",i)},"bus $el.ready:last + entity.add.nonFatalFailure":function(e,t,i){this.fire("error",i)},"bus $el.ready:last + show.completed":function(e,t){var i=t.find("form");i.trigger("reset"),setTimeout(function(){i.find(":submit:first").focus(),i.find(":text:first").focus()},10)}})});
define('tau/ui/extensions/team.formAdd/ui.extension.team.formAdd.inviter',["Underscore","jQuery","tau/ui/extensions/inviter/ui.extension.inviter.widget.abstract"],function(e,i,t){return t.extend({"bus configurator.ready":function(e,i){this._initTemplates(i)},"bus configurator.ready + $el.ready":function(e,i,t){this._initWidget(i,t)}})});
define('tau/ui/templates/team.formAdd/ui.template.team.formAdd',["tau/core/templates-factory","tau/ui/templates/board.context.selector/ui.template.board.context.selector.projects.list"],function(t){var e={name:"team.addForm",engine:"jqote2",markup:['<div class="tau-managed-category tau-projects">','<form class="i-role-form">','<div class="tau-new-entity-form">','<div class="tau-new-entity-form__row">','<div class="tau-note"><b>New team</b></div>','<div class="tau-new-entity-info">','<span class="tau-select-team-icon tau-extension-board-tooltip" data-title="Select a team icon">','<i class="tau-icon tau-icon_type_svg tau-icon_name_default i-role-currenticon" data-value="default"></i>',"</span>",'<input name="name" type="text" placeholder="Enter team name here"  class="tau-in-text tau-new-entity-name">','<select name="icon" style="display:none;">','<option value=""></option>',"<% _.each(this.icons, function(item){ %>",'<option value="<%= item %>"><%= item %></option>',"<% }); %>","</select>","</div>",'<ul class="tau-teams-icon-list i-role-richselect">','<li><i class="tau-icon tau-i-close i-role-option" data-value=""></i></li>',"<% _.each(this.icons, function(item){ %>",'<li><i class="tau-icon tau-icon_type_svg tau-icon_name_<%= item %> i-role-option" data-value="<%= item %>"></i></li>',"<% }); %>","</ul>","</div>",'<div class="tau-new-entity-form__row tau-invite-widget">','<div class="tau-note">Assign people','<span class="tau-help i-role-tooltipArticle" data-article-id="team.formAdd.assignPeople"></span>',"</div>",'<textarea name="users" placeholder="Start typing name(s) or email(s) to assign people to a team" />',"</div>",'<div class="tau-new-entity-form__row">','<div class="tau-note">Assign projects','<span class="tau-help i-role-tooltipArticle" data-article-id="team.formAdd.assignProjects"></span>',"</div>",'<ul class="tau-category-items-selector i-role-list">','<%= fn.sub("board.context.selector.projects.list", this.projects) %>',"</ul>","</div>",'<div class="tau-new-entity-form__row">','<button class="tau-btn tau-success" type="submit">Create team</button>','<button class="tau-btn" type="reset">Cancel</button>',"</div>","</div>","</form>","</div>"]};return t.register(e)});
define('tau/components/component.team.formAdd',["tau/components/component.creator","tau/models/team.formAdd/model.team.formAdd.data","tau/models/team.formAdd/model.team.formAdd.add","tau/ui/extensions/team.formAdd/ui.extension.team.formAdd","tau/ui/extensions/team.formAdd/ui.extension.team.formAdd.inviter","tau/components/extensions/error/extension.errorBar","tau/ui/templates/team.formAdd/ui.template.team.formAdd"],function(e,t,o,m,a,d,n){return{create:function(r){var i={extensions:[t,o,m,a,d],template:n};return e.create(i,r)}}});
define('tau/components/component.teamiteration.progressBar',["tau/components/component.creator","tau/models/model.iteration.progressBar","tau/ui/templates/progressBar/ui.template.iteration.progressBar"],function(e,t,r){return{create:function(a){var n={extensions:[t],template:r};return e.create(n,a)}}});
define('tau/models/model.testCaseList',["Underscore","tau/core/model-base","tau/utils/utils.date","tau/utils/utils.htmlConverter"],function(t,e,s,i){function a(t){this.model=t}a.prototype={getAssignableRetrievedCallback:function(){return{scope:this,success:this.onAssignableRetrieved}},onAssignableRetrieved:function(e){var s={labelAdd:this.model.config.labelAdd||"Add",items:[]};this.model.assignable=e.data;for(var i=t.sortBy(e.data.testCases,function(t){return t.numericPriority}),a=i.length,n=0;a>n;n++)s.items.push(this.convertServerDataModelData(i[n]));this.model.bus&&this.model.bus.fire("dataBind",s)},convertServerDataModelData:function(t){var e=null;t.lastRunDate&&(e=s.format.datetime.short(t.lastRunDate));var a=void 0;void 0!=t.lastStatus&&(a={isPassed:t.lastStatus});var n=(this.config.context.configurator.getUrlBuilder(),{__type:"testCase",id:t.id,name:t.name,lastRunDate:e,applicationUrl:"#testcase/"+t.id,steps:i.fromSourceToHtml(t.steps),success:i.fromSourceToHtml(t.success)});return a&&(n.lastRunStatus=a),n}};var n=e.extend({onInit:function(){var t=this,e=new a(t),s=t.config.context.entity;this.store.get(s.entityType.name,{id:s.id,fields:["id",{testCases:["id","name","lastRunDate","lastStatus","steps","success","numericPriority"]}]},e.getAssignableRetrievedCallback()).done()},"bus evictTestCases":function(){var t=this.config.context.entity;this.store.evictProperties(t.id,t.entityType.name,["testCases","testCases-count"])}});return n});
define('tau/models/model.testCaseList.editable',["tau/core/model.editable.base"],function(e){return e.extend({category:"edit",name:"Editable State","bus dataBind":function(){this.bus.fire("permissionsReady",{editable:!0})}})});
define('tau/components/extensions/testCaseList/extension.testCaseList.edit.addTestCase',["Underscore","jQuery","tau/components/extensions/component.extension.base","app.path"],function(e,s,n,t){return n.extend({"bus afterRender+permissionsReady":function(e){if(e.permissionsReady.data.editable){var n=e.afterRender.data.element;n.find(".tau-add-testCase").click(s.proxy(this.addTestCaseClickHandler,this))}},addTestCaseClickHandler:function(){function e(){Ext.WindowMgr.zseed=9999999;var e=new Tp.controls.TestCaseCreateEditorWindow({userStoryId:i,processId:n.getProcessId()});e.show(),e.on("saved",function(){o.fire("testCaseWasAdded",{assignable:{id:i}})})}var n=this.config.context,i=n.entity.id,o=this;if(window.processConfigurations)e();else{var a=window.progressDialog||{show:function(){},hide:function(){}};a.show("Loading..."),Ext.Ajax.request({url:new t.tp.WebServiceURL("/PageServices/TestCaseListService.asmx/GetProcessConfiguration").toString(),headers:{"Content-Type":"application/json"},success:function(n){a.hide();var t=s.parseJSON(n.responseText).d;processConfigurations=t,e()},jsonData:{userStoryId:i}})}}})});
define('tau/components/extensions/testCaseList/extension.testCaseList.edit.runner',["Underscore","jQuery","tau/components/extensions/component.extension.base","app.path"],function(e,t,s,a){return s.extend({"bus dataBind":function(e){this.data=e.data},onAfterRender:function(){},"bus afterRender":function(e){this.element=e.data.element,this.onAfterRender()},"bus afterRender+permissionsReady":function(e){if(e.permissionsReady.data.editable){var s=e.afterRender.data.element;s.find(".last-run").removeClass("hidden"),s.find(".buttons").removeClass("hidden"),s.find(".passed").click(t.proxy(this.passedClickHandler,this)),s.find(".failed").click(t.proxy(this.failedClickHandler,this))}},getTestCaseId:function(e){return t(e.target).parents("tbody").eq(0).tmplItem().data.id},passedClickHandler:function(e){var t=this.getTestCaseId(e);this.setTestCaseStatus(t,!0)},failedClickHandler:function(e){var t=this.getTestCaseId(e);this.setTestCaseStatus(t,!1)},setTestCaseStatus:function(e,t){Ext.Ajax.request({url:new a.tp.WebServiceURL("/PageServices/TestCaseListService.asmx/ChangeRunState").toString(),headers:{"Content-Type":"application/json"},success:this._onChangeStateComplete.createDelegate(this),failure:this._onChangeStateFailed.createDelegate(this),jsonData:{testCaseID:e,status:t}})},openNextTestCase:function(){for(var e=this.testCaseId,t=this.data.items,s=0;s<t.length-1;s++)t[s].id===e&&this.fire("expandTestCase",{testCaseId:t[s+1].id});this.onAfterRender=function(){}},_onChangeStateComplete:function(e){this.testCaseId=t.parseJSON(e.responseText).d.TestCaseID,this.onAfterRender=this.openNextTestCase,this.fire("testCaseStateWasChanged")},_onChangeStateFailed:function(e){this.fire("showError",{message:e.get_message()})},destroy:function(){delete this.data,delete this.element}})});
define('tau/components/extensions/testCaseList/extension.testCaseList.refresher',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,s,t){return t.extend({"bus testCaseWasAdded":function(){this.fire("evictTestCases"),this.fire("refresh")},"bus testCaseStateWasChanged":function(){this.fire("evictTestCases"),this.fire("refresh")}})});
define('tau/ui/templates/testCaseList/ui.template.testCaseList.testCase',["tau/core/templates-factory","tau/ui/templates/common/ui.template.entityLink"],function(t){var s={name:"test-case-list-test-case",markup:['<tbody class="collapsed">',"   <tr>",'       <td class="toggler"><button class="extra-info expand" type="button"><div>+</div></button></td>','       <td class="testcase-id">','           {{tmpl($data) "entity-link"}}',"       </td>","       <td>${name}</td>","       <td>${lastRunDate}</td>","       <td>","{{if  lastRunStatus }}","   {{if lastRunStatus.isPassed === true}}",'       <span class="passed">Passed</span>',"   {{/if}}","   {{if lastRunStatus.isPassed === false}}",'       <span class="failed">Failed</span>',"   {{/if}}","{{/if}}",'       <td class="buttons hidden">','           <button class="passed green-button" type="button">Pass</button>','           <button class="failed  red-button" type="button">Fail</button>',"       </td>","</td>","   </tr>","   <tr>","       <td></td>",'       <td colspan="5">','           <div class="steps">',"               <h4>Steps</h4>","               <span>{{html steps}}</span>","           </div>",'           <div class="success">',"               <h4>Success</h4>","               <span>{{html success}}</span>","           </div>","       </td>","   </tr>","</tbody>"].join(""),dependencies:["entity-link"]};return t.register(s)});
define('tau/ui/templates/testCaseList/ui.template.testCaseList',["tau/core/templates-factory","tau/ui/tags/ui.tag.term","tau/ui/templates/testCaseList/ui.template.testCaseList.testCase"],function(t,s){var e={name:"test-case-list",options:{contentSelector:".ui-testCaseList-content"},tags:[s],markup:['<div class="ui-testCaseList">','   <div class="button-panel">','       <button class="tau-add-testCase" type="button">${labelAdd} {{term("TestCase") "name"}}</button>',"   </div>",'   <div class="ui-testCaseList-content"{{if items.length === 0}} style="display:none"{{/if}}>','       <table class="ui-testCaseList">',"           <colgroup>",'               <col class="toggler">','               <col class="id">','               <col class="name">','               <col class="last-run-date">','               <col class="last-status">','               <col class="last-run">',"           </colgroup>","           <thead>","               <tr>",'                   <th class="toggler">','                       <button class="extra-info expand" type="button"><div>+</div></button>','                        <button class="extra-info collapse" type="button"><div>-</div></button>',"                   </th>",'                   <th class="identificator">ID</th>',"                   <th>Name</th>","                   <th>Last Run Date</th>","                   <th>Last Status</th>",'                   <th class="last-run">Run</th>',"               </tr>","           </thead>",'           {{tmpl(items) "test-case-list-test-case"}}',"       </table>","   </div>","</div>"].join(""),dependencies:["test-case-list-test-case"]};return t.register(e)});
define('tau/components/component.testCaseList',["tau/components/component.list.creator","tau/models/model.testCaseList","tau/models/model.testCaseList.editable","tau/components/extensions/testCaseList/extension.testCaseList.edit.addTestCase","tau/components/extensions/testCaseList/extension.testCaseList.edit.runner","tau/components/extensions/testCaseList/extension.testCaseList.refresher","tau/ui/templates/testCaseList/ui.template.testCaseList","tau/ui/extensions/testCaseList/ui.extension.testCaseList"],function(e,t,s,n,a,i,o,u){return{create:function(r){var C={template:o,extensions:[t,s,u,r.addTestCaseExtension||n,a,i],message:"No test cases found"};return e.create(C,r)}}});
define('tau/models/model.testcaserun.result.editor',["Underscore","tau/core/extension.base.stateful"],function(e,t){return t.extend({"bus beforeInit":function(e,t){this.entity=t.config.context.entity,this.store.get(this.entity.entityType.name,{id:this.entity.id,fields:["passed"]}).done({success:function(e){var t=e[0].data,s={};t.passed===!0?s.passed=!0:t.passed===!1&&(s.failed=!0),this.fire("dataBind",s)}.bind(this)})},"bus result.changed":function(e,t){var s={id:this.entity.id,runDate:new Date,comment:null,executed:!0};switch(t){case"passed":s.passed=!0;break;case"failed":s.passed=!1,s.comment="";break;case"skip":s.passed=null;break;default:s.executed=!1,s.runDate=null,s.passed=null}this.store.save("testcaserun",{$set:s}).done()}})});
define('tau/ui/extensions/testCaseRun/ui.extension.testCaseRun.result.editor',["tau/core/extension.base"],function(e){return e.extend({"bus afterRender":function(e,n){var t=n.element,i=function(e){var n=t.find(".i-role-results .tau-btn");n.removeClass("tau-checked"),this.fire("result.changed",e)}.bind(this);t.find(".i-role-results").on("click",".tau-btn",function(){var e=$(this),n=!e.hasClass("tau-checked"),t=n?e.data("result"):null;i(t),n&&e.addClass("tau-checked")}),t.find(".i-role-skip").click(function(){i("skip")})}})});
define('tau/ui/templates/testCaseRun/ui.template.testcaserun.result.editor',["tau/core/templates-factory"],function(t){var s={name:"testcaserun.result.editor",engine:"jqote2",markup:['<div class="tau-testcaserun-results">','<div class="tau-testcaserun-results__row">','<div class="tau-testcaserun-results__title">Final results is</div>','<div class="tau-testcaserun-results__middle">','<span class="tau-inline-group i-role-results">','<button class="tau-btn tau-btn-big tau-btn-green <% if (this.passed) { %>tau-checked<% } %>" data-result="passed">Passed</button>','<button class="tau-btn tau-btn-big tau-btn-red <% if (this.failed) { %>tau-checked<% } %>" data-result="failed">Failed</button>',"</span>",'<button class="tau-btn tau-btn-big tau-btn-gray i-role-skip">Skip</button>',"</div>","</div>","</div>"]};return t.register(s)});
define('tau/components/component.testcaserun.result.editor',["tau/components/component.creator","tau/models/model.testcaserun.result.editor","tau/ui/extensions/testCaseRun/ui.extension.testCaseRun.result.editor","tau/ui/templates/testCaseRun/ui.template.testcaserun.result.editor"],function(e,t,n,s){return{create:function(u){u=u||{};var r={extensions:[t,n],template:s};return e.create(r,u)}}});
define('tau/models/model.testCasesRunResults',["tau/core/model-base"],function(t){var n=t.extend({onInit:function(){var t=this,n=t.config.context,e=n.entity.entityType.name,o=n.entity.id;this.store.get(e,{id:o,fields:["passedCount","failedCount","notRunCount"]},{success:this.onDataRetrieved,scope:this}).done(),this.store.unbind(this),_.forEach(["passedCount","failedCount","notRunCount"],function(n){t.store.on({eventName:"afterSave",type:e,listener:t,filter:{id:o},hasChanges:[n]},function(){t.fire("refresh")})})},onDataRetrieved:function(t){var n=t.data,e={passedCount:n.passedCount,failedCount:n.failedCount,notRunCount:n.notRunCount};this.bus.fire("dataBind",e)},"bus beforeInit:last + destroy":function(t,n){n.config.context.configurator.getStore().unbind(this)}});return n});
define('tau/ui/templates/testCasesRunResults/ui.template.testCasesRunResults',["tau/core/templates-factory"],function(s){var t={name:"test-cases-run-results",markup:['<div class="tau-testCasesRunResults">','   <div class="tau-testCasesRunResults-container">','       <span class="tau-testCasesRunResults-item tau-testCasesRunResults-passed">Passed: ${passedCount}</span>','       <span class="tau-testCasesRunResults-item tau-testCasesRunResults-failed">Failed: ${failedCount}</span>','       <span class="tau-testCasesRunResults-item tau-testCasesRunResults-notRun">Not Run: ${notRunCount}</span>',"   </div>","</div>"],dependencies:[]};return s.register(t)});
define('tau/components/component.testCasesRunResults',["tau/components/component.creator","tau/models/model.testCasesRunResults","tau/ui/templates/testCasesRunResults/ui.template.testCasesRunResults"],function(e,t,s){return{create:function(u){var n={ModelType:t,template:s};return e.create(n,u)}}});
define('tau/ui/extensions/time-sheet/ui.extension.time-sheet',["jQuery","tau/core/extension.base"],function(e,t){return t.extend({"bus afterRender + afterInit":function(t,n,i){var a=i.config.context.configurator.getApplicationPath();n.element.find(".i-role-timesheet").click(function(){e(this).tauIFramePopup({url:a+"/Default/TimeSheet.aspx?rmnav=1&tp3=1"}),e(this).tauIFramePopup("show")})}})});
define('tau/components/component.time-sheet',["tau/components/component.creator","tau/ui/extensions/time-sheet/ui.extension.time-sheet"],function(e,t){return{create:function(n){var i={name:"time-sheet",engine:"jqote2",markup:['<div class="tau-menu-item tau-menu-item-timesheet">','    <span class="tau-popup-link tau-extension-board-tooltip i-role-timesheet" data-title="Track time">Time Sheet</span>',"</div>"]},a={template:i,extensions:[t]},s=e.create(a,n);return s.fire("dataBind",{}),s}}});
define('tau/models/model.timeList',["Underscore","tau/core/model-base","tau/utils/utils.date"],function(t,e,i){function n(t){return{id:t,fields:["id","name",{times:["id","date","spent","remain","description",{assignable:["id"]},{user:["id","firstName","lastName"]}]}]}}function s(t){return{id:t,fields:["id",{tasks:["id","name",{times:["id","date","spent","remain","description",{assignable:["id"]},{user:["id","firstName","lastName"]}]}]}],list:!0,nested:!0}}var a=function(t){this.times=[],this.urlBuilder=t};return a.prototype={addAssignable:function(t){this.assignable=t,this._addEntityTimes(this.assignable)},addTasks:function(e){t.each(e,function(t){t.__type="task"});for(var i=0;i<e.length;i++)this._addEntityTimes(e[i])},_parseDate:function(e){return e=t.clone(e),e.date=i.parse(e.date),e},getTimesSortedByDate:function(){var e=t.map(this.times,this._parseDate,this);return e.sort(function(t,e){return e.date-t.date||e.id-t.id}),e},getTimes:function(){return t.map(this.getTimesSortedByDate(),this.convertServerDataModelData,this)},convertServerDataModelData:function(t){return{id:t.id,date:i.format.date.short(i.convertToTimezone(t.date)),spent:t.spent,remain:t.remain,description:t.description,person:[t.user.firstName,t.user.lastName].join(" "),workOn:{__type:t.workOn.__type,name:t.workOn.name},editUrl:this.urlBuilder.getEditUrl(t.id,"time")}},_addEntityTimes:function(e){for(var i=e.times,n=0;n<i.length;n++){var s=t.clone(i[n]);s.workOn=e,this.times.push(s)}}},e.extend({isUserStory:function(t){return"userstory"==t.toLowerCase()},onInit:function(){var e=this.config.context,i=new a(e.configurator.getUrlBuilder()),r=e.entity,o=r.entityType.name,d=n(r.id),u=this.isUserStory(o),c=this.store;if(c=c.get(o,d,{success:this.safeCallback(function(t){this.assignable=t.data,i.addAssignable(this.assignable)})}),u){var f=s(r.id);c=c.get(o,f,{success:this.safeCallback(function(t){i.addTasks(t.data.tasks)})})}c.done({success:this.safeCallback(function(){var n={edit:!0},s=i.getTimes(),a=e.configurator.getFeaturesService().isEnabled("tp3.only");a&&(n.edit=!1,t.each(s,function(t){t.editUrl=null})),this.fire("dataBind",{access:n,items:s})})})},"bus beforeInit":function(e,i){var n=i.config.context,s=n.configurator.getStore();s.unbind(this),s.on({type:n.entity.entityType.name,eventName:"afterSave",listener:this},t.bind(this.fire,this,"refresh"))},"bus beforeInit + destroy":function(t,e){var i=e.config.context.configurator;i.getStore().unbind(this)}})});
define('tau/models/model.timeList.editable',["Underscore","tau/components/extensions/component.extension.base"],function(e,n){var t=n.extend({category:"edit","bus beforeInit":function(){this.fire("permissionsReady",{editable:!0})}});return t});
define('tau/ui/templates/common/ui.template.entityIcon',["tau/core/templates-factory","tau/ui/tags/ui.tag.term"],function(e,t){var i={tags:[t],name:"entity-icon",markup:['<em class="ui-type-icon ui-type-icon-${__type.toLowerCase()}">{{term(__type) "iconBig"}}</em>'],dependencies:[]};return e.register(i)});
define('tau/ui/templates/timeList/ui.template.timeList.time',["tau/core/templates-factory","tau/ui/templates/common/ui.template.entityIcon"],function(t){var e={name:"time-list-time",markup:["<tr>",'   <td class="date">${date}</td>','   <td class="spent">${spent} h</td>','   <td class="remain">${remain} h</td>','   <td class="description">${description}</td>','   <td class="work-on">','    {{tmpl(workOn) "entity-icon"}}',"    <span>${workOn.name}</span>","   </td>",'   <td class="person">${person}</td>',"{{if editUrl}}",'<td class="edit-time hidden"><a href="${editUrl}">Edit</a></td>',"{{/if}}",'   <td class="delete-time hidden"><button type="button" class="action-detach button small">Delete</button></td>',"</tr>"].join(""),dependencies:["entity-icon"]};return t.register(e)});
define('tau/ui/templates/timeList/ui.template.timeList',["tau/core/templates-factory","tau/ui/templates/timeList/ui.template.timeList.time"],function(e){var t={name:"time-list",options:{contentSelector:".time-list"},markup:['<div class="ui-timeList-content">','<table class="ui-table box time-list"{{if items.length === 0}} style="display:none"{{/if}}>',"<thead>",'   <tr class="head-row">','       <th class="header-cell">Date</th>','       <th class="header-cell">Time Spent</th>','       <th class="header-cell">Time Remain</th>','       <th class="header-cell">Description</th>','       <th class="header-cell">Work On</th>','       <th class="header-cell">Person</th>',"{{if access.edit}}",'<th class="header-cell edit-time hidden"></th>',"{{/if}}",'       <th class="header-cell delete-time hidden"></th>',"   </tr>","</thead>","<tbody>",'    {{tmpl(items) "time-list-time"}}',"</tbody>","</table>","</div>"].join(""),dependencies:["time-list-time"]};return e.register(t)});
define('tau/components/extensions/timeList/extension.timeList.delete',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,t,i){return i.extend({"bus afterRender+permissionsReady+dataBind":function(e){if(e.permissionsReady.data.editable){var i=e.afterRender.data.element;i.find(".delete-time,.edit-time").removeClass("hidden"),i.find(".delete-time button").click(t.proxy(this.onDeleteClick,this))}},"bus afterRemove":function(){this.fire("refresh")},onDeleteClick:function(e){var i=t(e.target).parents("tr").tmplItem().data.id;this.fire("remove",{id:i,typeName:"time"})}})});
define('tau/components/component.timeList',["tau/components/component.list.creator","tau/models/model.timeList","tau/models/model.timeList.editable","tau/ui/templates/timeList/ui.template.timeList","tau/components/extensions/timeList/extension.timeList.delete","tau/core/model.editable.base"],function(e,t,i,o,s,n){return{create:function(m){var a={ModelType:t,template:o,extensions:[s,n,i],message:"No time records found"};return e.create(a,m)}}});
define('tau/models/model.title',["Underscore","tau/core/extension.base.stateful"],function(e,t){return t.extend({onInit:function(t){var n=t.context,i=this.store,a=n.entity;i.unbind(this),i.on({eventName:"afterSave",type:a.entityType.name,listener:this,filter:{id:a.id},hasChanges:["name"]},e.bind(function(){this.fire("refresh")},this));var r=["id","name"];i.get(a.entityType.name,{id:a.id,fields:r}).done({success:e.bind(function(e){this.fire("data.ready",e[0].data)},this)})},"bus beforeInit+data.ready":function(t,n,i){var a=n.config.context,r=a.configurator,d=a.entity,s=e.pick(i,"id","name");s.entityType={name:d.entityType.name.toLowerCase()},s.entity={name:i.name},s.url=r.getUrlBuilder().getNewViewUrl(s.id,s.entityType.name,!0),this.fire("dataBind",s)},"bus configurator.ready + destroy":function(e,t){t.getStore().unbind(this)}})});
define('tau/models/model.title.editable',["tau/core/model.editable.base","tau/utils/utils.jsonSchema"],function(e,t){var a=e.extend({category:"edit",name:"Editable title",schema:t.Schema.create({type:"object",properties:{name:{optional:!1,type:"string",maxLength:255,pre:["trim",function(){return _.trim(this.instance.name.replace(/\s+/gi," "))}],fallbacks:{maxLength:"truncateToMaxLength",optional:function(){}}}}}),"bus dataBind":function(){this.bus.fire("permissionsReady",{editable:this.config.editable===!0||void 0===this.config.editable,deletable:!0})},"bus validate":function(e){var t=e.data,a=t.cmd.$set;t.validation=this.schema.validate(a)}});return a});
define('tau/ui/extensions/title/ui.extension.title.editable',["tau/core/extension.base","tau/ui/behaviour/common/ui.behaviour.editableText"],function(e){return e.extend({category:"edit","bus changeName":function(e,t){this.fire("save",{name:_.asString(t)})},"bus permissionsReady + afterRender":function(e,t,i){var a=this;if(t.editable){var n=i.element,d=n.find(".i-role-title");this.$widget=d,d.editableText({restoreText:!0,onSave:function(e){a.fire("changeName",e)}}),this.fire("$editable.ready",d)}},"bus validate":function(){this.$widget&&this.$widget.editableText("resetValidationErrors")},"bus afterValidate":function(e){this.$widget&&this.$widget.editableText("setValue",e.data.validation.instance.name)},"bus validationFailed":function(e){this.$widget&&this.$widget.editableText("setValidationErrors",e.data.validation.errors[0].description)}})});
define('tau/ui/templates/title/ui.template.title.main',["tau/core/templates-factory","tau/ui/templates/common/ui.template.entityIcon"],function(t){var e={name:"title.main",markup:['<div class="ui-title-wrap">','<table class="ui-title ui-title_type_main">',"<tbody>","<tr>","<td>",'<div class="ui-title__info">','{{tmpl({__type:entityType.name}) "entity-icon"}}','<span class="entity-id"><a class="ui-link" href="${url}" data-target="new">#${id}</a></span>',"</div>","</td>","<td>",'<div class="ui-title__title i-role-title">',"${name}","</div>","</td>","</tr>","</tbody>","</table>","</div>"],dependencies:["entity-icon"]};return t.register(e)});
define('tau/components/component.title',["tau/components/component.creator","tau/models/model.title","tau/models/model.title.editable","tau/ui/extensions/title/ui.extension.title.editable","tau/ui/templates/title/ui.template.title.main"],function(e,t,i,n,a){return{create:function(l){l=l||{};var o={extensions:[t,i,n],template:l.template||a};return e.create(o,l)}}});
define('tau/components/component.tp-buy',["tau/components/component.creator","jQuery"],function(e,t){return{create:function(n){var i={name:"board.tp-buy",engine:"jqote2",markup:["<% if (this.visible) { %>",'<div class="tau-menu-item tau-buy">','   <span class="tau-btn-buy">Buy</span>',"</div>","<% } %>"]},a={template:i},u=e.create(a,n);return u.fire("dataBind",{visible:!window.tauSystemInfo.isLicensed||window.tauSystemInfo.isTrial||window.tauSystemInfo.isFree}),u.on("afterRender",function(e,n){n.element.find(".tau-btn-buy").click(function(){t(this).tauIFramePopup({url:"https://secure.shareit.com/shareit/checkout.html?PRODUCT[300582212]=10"}),t(this).tauIFramePopup("show")})}),u}}});
define('tau/ui/extensions/tp-settings/ui.extension.tp-settings',["jQuery","tau/core/extension.base"],function(t,e){return e.extend({"bus afterRender + afterInit":function(e,n,o){var i=o.config.context.configurator,r=i.getApplicationPath(),a=i.loggedUser.isAdministrator,p=a?"/Admin/GlobalSetting.aspx":"/PersonalSettings.aspx",u=r+p+"?rmnav=1&tp3=1",c=n.element.find(".i-role-settings");c.tauIFramePopup({url:u}),i.getFeaturesService().isEnabled("contextPrototype")&&c.on("tauiframepopuphide",function(){i.getApplicationContextService().getApplicationContext({}).done(function(t){i.getPrototypeContextEntityService().updateContextPrototype(t)})}),c.click(function(){t(this).tauIFramePopup("show")})}})});
define('tau/components/component.tp-settings',["tau/components/component.creator","tau/ui/extensions/tp-settings/ui.extension.tp-settings"],function(t,e){return{create:function(n){var i={name:"board.tp-settings",engine:"jqote2",markup:['<div class="tau-menu-item tau-menu-item-settings">','    <a class="tau-icon-settings tau-extension-board-tooltip i-role-settings" data-title="Change system settings"></a>',"</div>"]},s={template:i,extensions:[e]},a=t.create(s,n);return a.fire("dataBind",{}),a}}});
define('tau/components/component.user-voice',["tau/components/component.creator"],function(e){return{create:function(a){var t={name:"user-voice",engine:"jqote2",markup:['<div class="tau-support-item">','   <a class="uservoice-feedback-button" href="javascript:UserVoice.showPopupWidget();">       <span class="tau-support-icon tau-feedback"></span>','       <span class="tau-btn tau-btn-big">Suggest idea</span>',"   </a>","</div>"]},n={template:t},s=e.create(n,a);return s.fire("dataBind",{}),s}}});
define('tau/models/model.user.settings',["Underscore","tau/core/model.editable.base"],function(e,i){var t=i.extend({onInit:function(){var i=this.config,t=i.context.entity.id,n=this,o=i.context.applicationContext.loggedUser,d=o.isAdministrator||o.id===t;this.store.get("user",{id:t,fields:["login","email","weeklyAvailableHours","isActive","isObserver","isAdministrator","activeDirectoryName"]}).done(function(i){n.fire("dataBind",e.extend(e.clone(i[0].data),{allowToEditAdmin:o.id!=t&&o.isAdministrator,allowToEditObserver:o.isAdministrator,allowToEdit:d}))})},"bus model.save":function(i,t){var n=this.config.context.entity.id,o=this;this.store.save("user",{id:n,$set:e.extend(t,{id:n})}).done(function(){o.fire("refresh"),o.fire("model.data.changed",t)})}});return t});
define('tau/ui/extensions/user.settings/ui.extension.user.settings',["Underscore","jQuery","tau/ui/extensions/ui.extension.domOperationsBase","tau/nls/translator","libs/jquery/jquery.inputMaskEditor"],function(e,a,t,r){return t.extend({init:function(){this._super.apply(this,arguments),this.onSaveProxy=e.bind(this.onSave,this),this.onDeleteProxy=e.bind(this.onDelete,this)},"bus afterRender":function(e,a){this.fire("view.update.state");var t=this.config.context.applicationContext.culture.decimalSeparator,r="^[0-9]*(["+t+"][0-9]{0,2})?$";a.element.find(".tau-weekly-hours").inputMaskEditor({mask:r,className:""}),a.element.on("submit",this.onSaveProxy),a.element.find(".tau-btn.tau-delete").click(this.onDeleteProxy)},"bus afterRender:last+dataBind:last+view.state.updated":function(a,t,r,s){var i=!0;e.each(r,function(e,a){s.hasOwnProperty(a)&&s[a]!=e&&(i=!1)}),(s.password&&s.password.length>0||s.passwordConfirmation&&s.passwordConfirmation.length>0)&&(i=!1)},"bus refresh>afterRender:last>model.data.changed":function(e,a,t,r){var s={login:".tau-login",email:".tau-email",weeklyAvailableHours:".tau-weekly-hours",activeDirectoryName:".tau-active-directory-name",isActive:".tau-is-active-container",isObserver:".tau-is-observer-container",isAdministrator:".tau-is-administrator-container",password:".tau-password,.tau-password-confirmation"};for(var i in s)void 0!==r[i]&&this.fire("updateElement",{element:t.element.find(s[i])})},"bus afterRender:last+before_view.save.changes":function(a,t,s){s=this.getState(t.element);var i=[],o=!1,n={selector:".tau-weekly-hours",hasError:!1};i.push(n),e.isNaN(parseInt(s.weeklyAvailableHours))&&(n.hasError=o=!0,n.message=r("Please provide weekly hours"));var l={selector:".tau-login",hasError:!1};i.push(l),""==s.login&&(l.hasError=o=!0,l.message=r("Please enter login"));var u={selector:".tau-email",hasError:!1};i.push(u),""!=s.email?this.config.context.configurator.getConstObject().get("emailRegexp").test(e.trim(s.email))||(u.hasError=o=!0,u.message=r("Invalid email address")):(u.hasError=o=!0,u.message=r("Please enter email"));var d={selector:".tau-active-directory-name",hasError:!1};i.push(d);var c=s.activeDirectoryName&&s.activeDirectoryName.length>0;c&&!new RegExp("^[A-Za-z0-9]+[\\\\][A-Za-z0-9]+$").test(s.activeDirectoryName)&&(d.hasError=o=!0,d.message=r("Invalid active directory user name"));var h={selector:".tau-password",hasError:!1},v={selector:".tau-password-confirmation",hasError:!1};i.push(h),i.push(v);var m=s.password&&s.password.length>0||s.passwordConfirmation&&s.passwordConfirmation.length>0,f=s.password===s.passwordConfirmation;m&&!f&&(v.hasError=h.hasError=o=!0,v.message=h.message=r("Your password and confirmation password don't match")),e.each(i,function(e){var a=t.element.find(e.selector);e.hasError?a.addClass("tau-error").attr("title",e.message):a.removeClass("tau-error").removeAttr("title")}),o&&a["before_view.save.changes"].cancelMain()},"bus dataBind:last+view.save.changes":function(e,a,t){var r=this.getChanges(a,t);this.fire("model.save",r)},getChanges:function(a,t){var r=["login","email","password","weeklyAvailableHours","isActive","isObserver","isAdministrator","activeDirectoryName"],s={};return e.each(r,function(e){(a[e]||"")!=t[e]&&(s[e]=t[e])}),s},onSave:function(e){return this.fire("view.save.changes",this.getState(a(e.target))),!1},onDelete:function(){confirm(r("Do you really want to delete user?"))&&this.fire("remove",{id:this.config.context.entity.id})},getState:function(e){var a=e.find(".tau-password").val();return{login:e.find(".tau-login").val(),email:e.find(".tau-email").val(),password:a.length>0?a:void 0,passwordConfirmation:e.find(".tau-password-confirmation").val(),weeklyAvailableHours:e.find(".tau-weekly-hours").val(),activeDirectoryName:e.find(".tau-active-directory-name").val(),isAdministrator:e.find(".tau-is-admin").prop("checked"),isObserver:e.find(".tau-is-observer").prop("checked"),isActive:e.find(".tau-is-active").prop("checked")}}})});
define('tau/ui/templates/user.settings/ui.template.user.settings',["tau/core/templates-factory"],function(a){var t={name:"user.settings",markup:["<form>",'<div class="tau-account-settings-container">','<div class="tau-account-settings">','<table class="tau-account-settings-data">',"<tbody>","<tr>","<td>","<label>","Login",'<input type="text" tabindex="1" class="tau-in-text tau-large tau-login" value="${login}" {{if (!allowToEdit )}} disabled="disabled"{{/if}}>',"</label>","</td>","<td>","<label>","Email",'<input type="text" tabindex="4" class="tau-in-text tau-large tau-email" value="${email}" {{if (!allowToEdit )}} disabled="disabled"{{/if}}>',"</label>","</td>","</tr>","<tr>","<td>","<label>","Password <small>(Type the new password if you want to change it)</small>",'<input tabindex="2" type="password" class="tau-in-text tau-large tau-password" {{if (!allowToEdit )}} disabled="disabled"{{/if}}>',"</label>","</td>","<td>","<label>","Active Directory User Name <small>(Ex: MyDomain\\Ted)</small>",'<input tabindex="5" type="text" class="tau-in-text tau-large tau-active-directory-name" value="${activeDirectoryName}" {{if (!allowToEdit )}} disabled="disabled"{{/if}}>',"</label>","</td>","</tr>","<tr>","<td>","<label>","Confirm Password",'<input type="password" tabindex="3" class="tau-in-text tau-large tau-password-confirmation" {{if (!allowToEdit )}} disabled="disabled"{{/if}}>',"</label>","</td>","<td>","<label>","Weekly Hours",'<input type="text" tabindex="6" class="tau-in-text tau-small tau-weekly-hours" value="${weeklyAvailableHours}" {{if (!allowToEdit )}} disabled="disabled"{{/if}} >',"</label>","</td>","</tr>","</tbody>","</table>",'<ul class="tau-account-settings-features">','<li class="tau-is-administrator-container {{if (!allowToEditObserver)}} tau-account-settings-features__item_disabled{{/if}}">','<label class="tau-checkbox">','<input tabindex="7" type="checkbox" class="tau-is-admin" {{if (isAdministrator )}} checked="checked"{{/if}} {{if (!allowToEditObserver)}} disabled="disabled"{{/if}} >',"<i></i>","<span>Administrator <small>(unlimited access)</small></span>","</label>","</li>",'<li class="tau-is-observer-container {{if (!allowToEditObserver )}} tau-account-settings-features__item_disabled{{/if}}">','<label class="tau-checkbox ">','<input tabindex="8" type="checkbox" class="tau-is-observer"{{if (isObserver )}} checked="checked"{{/if}} {{if (!allowToEditObserver )}} disabled="disabled"{{/if}}>',"<i></i>","<span>Observer <small>(read-only access)</small></span>","</label>","</li>",'<li class="tau-is-active-container {{if (!allowToEditObserver )}} tau-account-settings-features__item_disabled{{/if}}">','<label class="tau-checkbox ">','<input tabindex="9" type="checkbox" class="tau-is-active" {{if (isActive )}} checked="checked"{{/if}} {{if (!allowToEditObserver)}} disabled="disabled"{{/if}}>',"<i></i>","<span>Active <small>(deactivate if you want to free up a license for an active user)</small></span>","</label>","</li>","</ul>",'<button tabindex="10" class="tau-btn tau-primary tau-update" {{if (!allowToEdit )}} disabled="disabled"{{/if}} type="submit">Update Settings</button>','<button tabindex="11" class="tau-btn tau-danger tau-delete" {{if (!allowToEditAdmin)}} disabled {{/if}} type="button">Delete User</button>',"</div>","</div>","</form>"].join("")};return a.register(t)});
define('tau/components/component.user.settings',["tau/components/component.creator","tau/models/model.user.settings","tau/ui/extensions/user.settings/ui.extension.user.settings","tau/ui/templates/user.settings/ui.template.user.settings"],function(e,t,s,n){return{create:function(u){var a={name:"avatar",extensions:[t,s],template:n};return u["queue.bus"]=!0,e.create(a,u)}}});
define('tau/models/model.userList',["Underscore","tau/core/model-base","tau/utils/utils.textsearch"],function(e,t,r){return t.extend({init:function(){this._super.apply(this,arguments),this.textSearch=new r},"bus setFilter":function(e){this.config.data.filter=e.data.filter,this.fire("refresh",{refreshSelector:".user-list,.footer-box"})},setShowMore:function(e){this.config.data.showMore=e},"bus showMore":function(){this.setShowMore(!0),this.fire("refresh",{refreshSelector:".user-list,.footer-box"})},onInit:function(){this.fire("registerStoreRequest"),this.fire("commitTransaction",{})},"bus projectMembersReady+excludedUserReady+projectRolesReady":function(e){var t=e.projectMembersReady.data,r=e.excludedUserReady.data,i=e.projectRolesReady.data,s=[];!this.excludedUsersContainsLoggedUser(r)&&this.loggedUserInProjectTeam(t)&&(s=[{id:"assign-to-me",title:"Assign To Me"}]);var o=[];this.filterIsNotEmpty()?o=this.getFilteredGroups(i,t,r):(o=this.getGroups(t,r,i),0==o.length&&(this.setShowMore(!0),o=this.getGroups(t,r,i)));var n={headerActions:s,moreAvailable:!1,groups:o};this.fire("extendDataToBind",n),this.fire("dataBind",n)},getGroups:function(e,t,r){for(var i=[],s=0;s<r.length;s++){var o=r[s];if(this.usersForRoleIsVisible(o)){var n=this.getUsersForRole(o,e,t);n.length>0&&i.push({role:o,users:n})}}return i},isStringValidForFilter:function(e){return null!==this.textSearch.match(e,this.config.data.filter)},getFilteredGroups:function(e,t,r){for(var i=[],s=0;s<e.length;s++){for(var o=e[s],n=this.getUsersForRole(o,t,r),a=[],u=0;u<n.length;u++)this.isStringValidForFilter(n[u].name)&&a.push(n[u]);a.length>0&&i.push({role:o,users:a})}return i},usersForRoleIsVisible:function(e){if(this.isMoreAvailable()){var t=this.config.data||{};if(t.hasOwnProperty("roleId"))return e.id===t.roleId;if(t.role)return e.id==t.role.id}return!0},userIsNotExcluded:function(e,t){if(!e.user.isActive)return!1;var r=e.user.id;if(t.constructor!=Array)return r!=t.id;for(var i=0;i<t.length;i++)if(r==t[i].id)return!1;return!0},getUsersForRole:function(e,t,r){for(var i=[],s=0;s<t.length;s++){var o=t[s];o.role.id==e.id&&this.userIsNotExcluded(o,r)&&i.push(this.convertUser(o.user))}return i.sort(function(e,t){var r=e.name.toLowerCase(),i=t.name.toLowerCase();return i>r?-1:r>i?1:0}),i},convertUser:function(t){var r=e.trim(t.email);(t.firstName||t.lastName)&&(r=e.trim([t.firstName,t.lastName].join(" ")));var i=this.config.context.configurator;return{id:t.id,name:r,role:t.role,avatar:[i.getApplicationPath(),"/Avatar.ashx?UserId=",t.id,"&size=32"].join("")}},getLoggedUser:function(){return this.config.context.configurator.getLoggedUser()||this.config.context.getLoggedUser()},loggedUserInProjectTeam:function(t){var r=this.getLoggedUser();return e.any(t,function(e){return e.user.id===r.id})},excludedUsersContainsLoggedUser:function(t){var r=this.getLoggedUser();return e.any(t,function(e){return e.id===r.id})},filterIsNotEmpty:function(){return this.config.data.filter&&this.config.data.filter.length},filterIsEmpty:function(){return!this.filterIsNotEmpty()},isMoreAvailable:function(){var e=this.config.data;return this.filterIsEmpty()&&e.showMore!==!0&&(e.hasOwnProperty("roleId")||e.hasOwnProperty("role"))},destroy:function(){this.project=null,this.entity=null,this._super()}})});
define('tau/models/extensions/team/extension.model.teamOfEntityRetriever',["Underscore","tau/core/model-base"],function(e,t){return t.extend({"bus registerStoreRequest":function(){var e=this.config.context.entity||{entityType:{}},t=this.config.context.configurator.getStore().config.proxy.types[e.entityType.name].refs,i=[{project:["id"]}];t.team&&i.push({team:["id"]}),this.fire("get",{type:e.entityType.name,query:{id:e.id,fields:i},callback:{scope:this,success:function(e){this.fire("teamOfEntityRetriever",e),this.fire("commitTransaction")}}})},"bus teamOfEntityRetriever":function(t){var i=this.config.context.entity||{entityType:{name:""}},a=i.entityType.name.toLowerCase(),r=null,n=null,s=t.data.data;s.project?r=s.project.id:"project"===a&&(r=s.id),s.team?n=s.team.id:"team"===a&&(n=s.id);var c=[],o=e.bind(this.fire,this);r&&c.push(function(e){o("get",{type:"project",query:{id:r,fields:["id",{projectMembers:[{user:["id","firstName","lastName","isActive","email"]},{role:["id","name"]}]}]},callback:{success:function(t){e(!1,t.data.projectMembers)}}})}),n&&c.push(function(e){o("get",{type:"team",query:{id:n,fields:["id",{teamMembers:[{user:["id","firstName","lastName","email","isActive"]},{role:["id","name"]}]}]},callback:{success:function(t){e(!1,t.data.teamMembers)}}})});var u=this;e.parallel(c,function(t,i){var a=e.flatten(i,!0);a=e.uniq(a,!1,function(e){return e.user.id}),e.forEach(a,function(t){t.username=t.email,(t.firstName||t.lastName)&&(t.username=e.trim([t.firstName,t.lastName].join(" ")))}),o("projectMembersReady",a);var r=u.getRoles(a);o("projectRolesReady",r)})},getRoles:function(t){var i={},a=[];return e.each(t,function(e){var t=e.role;i.hasOwnProperty(t.id)||(i[t.id]=!0,a.push(t))}),a}})});
define('tau/models/userList/extension.model.assignmentsUser.Excluder',["Underscore","tau/core/model-base"],function(e,t){return t.extend({"bus registerStoreRequest":function(){var e=this.config.context.entity||{entityType:{}},t={role:["id","name"]},i={generalUser:["id","firstName","lastName"]};this.fire("get",{type:e.entityType.name,query:{id:e.id,fields:[{assignments:["id",t,i],list:!0}]},callback:{scope:this,success:this.onEntityRetrieved}})},"bus assignmentsUserExluder":function(e){var t=this.config.data||{},i=e.data.data,s=[],n=t.roleId||(t.role||{}).id;if(n)for(var r=i.assignments||[],a=0;a<r.length;a++)r[a].role.id==n&&s.push(r[a].generalUser);this.fire("excludedUserReady",s)},onEntityRetrieved:function(e){this.fire("assignmentsUserExluder",e)}})});
define('tau/components/extensions/userList/extension.userList.editable',["Underscore","jQuery","tau/core/extension.base.stateful","tau/ui/behaviour/common/ui.behaviour.listSelectable"],function(e,i,t){return t.extend({category:"edit",name:"user list","bus initialize + afterRender":function(i,t,s){var n=s.element;n.delegate(".unassign-button","click",e.bind(this.onUnassignClick,this)),n.delegate(".assign-to-me-button","click",e.bind(this.onAssignToMeClick,this)),n.delegate(".user-search-box","keyup",e.bind(this.onFilterChanged,this)),n.delegate(".user","click",e.bind(this.onUserClick,this)),n.delegate(".more-link","click",e.bind(this.onMoreClick,this))},"bus afterRender":function(e,i){var t=i.element,s=t.find("[role=list]");s.listSelectable({items:".user",className:"user_hover",keyboardManager:this.config.context.configurator.getKeyBoardManager()}),this.fire("$listSelectable.ready",s)},"bus $listSelectable.ready:last+focus":function(e,i){i.data("ui-listSelectable")&&i.listSelectable("enable")},"bus afterRender:last+focus":function(e,i){var t=i.element;t.is(":visible")&&t.find(".user-search-box").focus()},"bus $listSelectable.ready:last+blur":function(e,i){i.is(":visible")&&i.data("ui-listSelectable")&&i.listSelectable("disable")},onMoreClick:function(e){e.stopPropagation(),this.fire("showMore")},onUserClick:function(e){var t=i(e.target),s=t.tmplItem().data;this.fire("changeAssignment",{user:s})},onUnassignClick:function(){this.fire("removeAssignment")},onAssignToMeClick:function(){this.fire("assignToLoggedUser")},onFilterChanged:function(e){e.keyCode!=i.ui.keyCode.DOWN&&e.keyCode!=i.ui.keyCode.UP&&e.keyCode!=i.ui.keyCode.ENTER&&(e.preventDefault(),this.fire("setFilter",{filter:i(e.target).val()}))}})});
define('tau/ui/templates/filteredUserList/ui.template.filteredUserList.userList',["tau/core/templates-factory","tau/ui/templates/common/ui.template.user"],function(e){var r={name:"user-list",markup:'<div class="role-title" role="user-group">${role.name}</div>{{tmpl(users) "user"}}',dependencies:["user"]};return e.register(r)});
define('tau/ui/templates/common/ui.template.linkAction',["tau/core/templates-factory"],function(a){var e={name:"link-action",markup:['<a class="${id}-link user-action" >',"   ${title}","</a>"].join("")};return a.register(e)});
define('tau/ui/templates/filteredUserList/ui.template.filteredUserList',["tau/core/templates-factory","tau/ui/templates/filteredUserList/ui.template.filteredUserList.userList","tau/ui/templates/common/ui.template.buttonAction","tau/ui/templates/common/ui.template.linkAction"],function(e){var i={name:"filtered-user-list",markup:['<div class="filtered-user-list">','<div class="header-box">{{tmpl(headerActions) "button-action"}}</div>','<div class="search-box-container">','<input type="text" class="user-search-box" />','<div class="help">For filter start typing name</div>',"</div>",'<div role="list" class="user-list i-user-list">','<div class="i-inner">{{tmpl(groups) "user-list"}}</div>',"</div>",'<div class="footer-box">','<a class="more-link {{if moreAvailable == false}}link-hidden{{/if}}">more&hellip;</a>',"</div>","</div>"],dependencies:["user-list","button-action","link-action"]};return e.register(i)});
define('tau/components/component.userList',["Underscore","tau/components/component.creator","tau/models/model.userList","tau/models/assignmentsList/extension.model.store.operations","tau/models/extensions/team/extension.model.teamOfEntityRetriever","tau/models/userList/extension.model.assignmentsUser.Excluder","tau/components/extensions/userList/extension.userList.editable","tau/ui/extensions/bubble/ui.extension.bubble.listResizer","tau/ui/templates/filteredUserList/ui.template.filteredUserList"],function(e,s,t,n,i,o,r,u,a){return{create:function(l){var m=[];e.isArray(l.extensions)&&(m=e.clone(l.extensions));var d={extensions:m,template:a};return m.push(t),m.push(r),m.push(n),m.push(l.Retriever||i),m.push(l.UserExcluder||o),m.push(u),s.create(d,l)}}});
define('tau/components/component.video-intro.popup',["jQuery","Underscore","tau/components/component.factory"],function(e,t,r){return new(r.extend({getCreatorConfig:function(){return{template:{engine:"jqote2",name:"video-intro.popup",markup:["<div>",'<iframe width="853" height="480" src="<%= this.url %>?rel=0" frameborder="0" allowfullscreen=""></iframe>',"<% if (this.showNextButton) { %>",'<p class="tau-help-video-header">We recommend to watch this quick intro video before the experiments.</p>','<p class="tau-help-continue"><button class="i-role-next tau-btn tau-primary">Thanks for the video! Continue to Targetprocess 3</button></p>',"<%} else {%>",'<p class="tau-help-video-header">Contact your admin if you want to try Targetprocess 3.</p>',"<% } %>","</div>"]}}},create:function(r){r=t.defaults(r,{render:e.Deferred(),destroy:e.Deferred()});var o=this._super(r);return o.on("destroy",function(){r.destroy.resolve()}),o.on("afterRender",function(t,n){var i=n.element,a=e("<div></div>");a.tauPopup({hideOnEscape:!1,enableClose:!1,className:"tau-help-video-intro",destroy:function(){o.fire("destroy")}}),a.tauPopup("show"),a.tauPopup("widget").append(i),i.on("click",".i-role-next",function(){a.tauPopup("destroy")}),r.render.resolve(i)}),o.initialize(),o.fire("dataBind",r),o}}))});
define('tau/slice/api.entity.new.list',["jQuery","tau/slice/api.new.list"],function(e,n){return n.extend({treeViewByLevel:function(e){return this._currentOrderingConfig=e.$set.orderingConfig,this.resolveDeferred("sort",e)},_prepareCommand:function(n){return n.config=e.extend(!0,n.config,{$set:{entityId:this._newListSliceOptions.entityId,orderingConfig:this._currentOrderingConfig}}),n}})});
define('tau/slice/entity.new.list.factory',["tau/slice/new.list.factory","tau/slice/api.entity.new.list"],function(e,t){var i=e.extend({_createSlice:function(e,i){return new t(e,i,this._newListSliceOptions)}});return i});
define('tau/components/view.new.list/extension.view.new.list',["Underscore","jQuery","tau/components/board.new.list/extension.base.new.list","tau/slice/entity.new.list.factory","tau/components/board.new.list/new.list.quickAdd.component.builder"],function(t,e,i,n,o){return i.extend({_defaultOnPage:20,_quickAddOptions:{positionConfig:{collision:"fit flip"}},init:function(t,e,i,n){var r=new o(t.bus,t.context.configurator,n,this._quickAddOptions);this._super(t,e,i,n,r)},"bus afterInit + configurator.ready":function(t,e,i){this._initViewNewListSettings(e.config,i),this._initSliceFactory(e.config)},"bus afterRender":function(){this.fire("view.dom.ready",{})},_initViewNewListSettings:function(t,e){var i=this._createViewNewListSettings(t,e);this.fire("boardSettings.ready",{boardSettings:i})},_initSliceFactory:function(t){var e={prefix:"EntityTreeView",entityId:t.context.entity.id},i=new n(t.context.configurator.getSliceFactoryOptions(),e);this.fire("sliceFactory.ready",i)},_createViewNewListSettings:function(e,i){var n=e.context.entity,o=n.entityType.name.toLowerCase(),r=[o,n.id.toString(),e.name.toLowerCase()].join(""),s=t.extend(e.definition,{id:r,viewMode:"newlist",x:{types:[o]},cellPaging:{onPage:this._defaultOnPage}});return i.getBoardSettingsFactory().createStaticSettings(s)}})});
define('tau/components/view.new.list/enum.view.new.list.selector',[],function(){return{appPageEntity:".tau-app.tau-page-entity",popupPageEntity:".ui-popup.tau-page-entity",popupCloseButton:".close",cardDetailsTriggerIcon:".tau-board-list-view_details-view-trigger.tau-icon",cardDetailsTrigger:".tau-board-list-view_details-view-trigger",listEntityDetails:".tau-list-entity-details",pageEntity:".tau-page-entity"}});
define('tau/ui/templates/view.new.list/template.view.new.list.card.viewer',["tau/core/templates-factory"],function(e){var t={name:"template.view.new.list.card.viewer",engine:"jqote2",markup:['<div class="tau-list-entity-details i-role-bubble-holder">','<div class="tau-page-entity"></div>',"</div>"]};return e.register(t)});
define('tau/components/view.new.list/view.new.list.card.viewer',["jQuery","tau/core/class","tau/components/component.page.entity","tau/configurations/enum.page.entity.mode","tau/store/factory","tau/components/view.new.list/enum.view.new.list.selector","tau/ui/templates/view.new.list/template.view.new.list.card.viewer"],function(t,e,i,r,n,a,s){var o=e.extend({CURRENT_NULL:{$trigger:t(),cardData:{},component:{destroy:t.noop}},CLASS_MAP:{iconDetailOpened:"tau-icon_name_newwindow-opened",cardDetailsTrigger:"tau-board-list-view_details-view-trigger",editableCell:"tau-elems-cell_unit-editable"},WIDGET_DATA_ID:"ui-tauCoverView",init:function(t){this._configurator=t,this._current=this.CURRENT_NULL},isShown:function(t){return this._current.cardData.id===t.id&&t.entityType===t.entityType},show:function(t,e,i){var r=e.find(a.cardDetailsTriggerIcon),n=this._$getWidget(t),s=this._createComponent(i,n);this._current===this.CURRENT_NULL&&this._doForNameCells(this._disableInlineEdit.bind(this),r),this._setCurrent(i,r,s),n.show(r)},hide:function(){this._$widget&&this._$widget.hide()},destroy:function(){this._$widget&&(this._$widget.widget().remove(),this._$widget.destroy(),this._$widget=null)},_$getWidget:function(t){if(!this._$widget){var e=t.closest(a.appPageEntity);this._$widget=this._$createWidget(e)}return this._$widget},_$createWidget:function(t){var e=s.render();return e.tauCoverView({contentHolderSelector:a.pageEntity,arrow:{$insertAfter:t,positionConfig:{my:"left center",at:"right-12 center"}},autoHide:{onEscape:!0,onOverlayAction:!0,doNotHideSelectors:[a.cardDetailsTrigger],$onScrollOf:t},hide:this._onWidgetHide.bind(this)}),e.insertAfter(t),e.data(this.WIDGET_DATA_ID)},_onWidgetHide:function(){this._doForNameCells(this._enableInlineEdit.bind(this),this._current.$trigger),this._releaseCurrent()},_createComponent:function(t,e){var s=this._configurator.createChild();s.setStoreFactory(new n);var o={context:{configurator:s},id:t.entityId,entity:t.entityType,mode:r.listEntityDetails,progressTargetSelector:a.listEntityDetails},l=i.create(o);return l.on("afterRender",function(t,i){e.setContent(i.element)},this),l.initialize(o),l},_setCurrent:function(t,e,i){this._releaseCurrent(),this._current={cardData:t,$trigger:e,component:i},this._current.originalTriggerTitle=this._current.$trigger.attr("title"),this._current.$trigger.attr("title","Click to close"),this._current.$trigger.addClass(this.CLASS_MAP.iconDetailOpened)},_releaseCurrent:function(){this._current.$trigger.attr("title",this._current.originalTriggerTitle),this._current.$trigger.removeClass(this.CLASS_MAP.iconDetailOpened),this._current.component.destroy(),this._current=this.CURRENT_NULL},_disableInlineEdit:function(t){var e=t.hasClass(this.CLASS_MAP.editableCell);e&&(t.removeClass(this.CLASS_MAP.editableCell),t.data("wasEditable",!0)),t.addClass(this.CLASS_MAP.cardDetailsTrigger)},_enableInlineEdit:function(t){var e=t.data("wasEditable");e&&(t.addClass(this.CLASS_MAP.editableCell),t.removeData("wasEditable")),t.removeClass(this.CLASS_MAP.cardDetailsTrigger)},_doForNameCells:function(e,i){var r=i.closest(".tau-board-list-view"),n=r.find(".tau-board-unit_type_entity-name").parent();n.each(function(){e(t(this))})}});return o});
define('tau/components/view.new.list/extension.view.new.list.card.viewer',["tau/core/extension.base","./view.new.list.card.viewer"],function(e,i){return e.extend({init:function(e){this._super(e),this._cardViewer=new i(e.context.configurator)},"bus afterRender:last + new.list.open.card.details.view":function(e,i,t){var r=i.element,n=t.cardData;this._cardViewer.isShown(n)?this._cardViewer.hide():this._cardViewer.show(r,t.$card,n)},"bus destroy":function(){this._cardViewer.destroy()}})});
define('tau/components/component.view.new.list',["tau/components/component.creator","tau/components/component.base.new.list","tau/components/view.new.list/extension.view.new.list","tau/components/view.new.list/extension.view.new.list.card.viewer"],function(e,n,t,i){return{create:function(o){var s={newListRegistry:{baseComponent:e,LifeCycleExtension:t},extensions:[i]};return n.createNewList(s,o)}}});
define('tp/reports/plot',["jQuery","libs/d3/d3","app.path"],function(t,i){function s(t){this.height=t.height||600,this.margin=t.margin||30,this.mode=t.mode||"simple",this.detalization=t.detalization||"full",this.charts=t.charts||[],this.captions=t.captions||[],this.legend='<div class="legend-wrapper">\n    <div class="legend-element"><p><i class="img img-actual-progress" />Actual progress</p></div>\n    <div class="legend-element"><p><i class="img img-ideal-line" />Ideal line</p></div>\n    <div class="legend-element"><p><i class="img img-forecast" />Forecast</p></div>\n</div>'}return s.prototype={_initialize:function(t){this.xAxis=t.getXAxis(),this.yAxis=t.getYAxis(),this.yCellSize=this._getYCellSize(this.yAxis.count),this.xCellSize=this._getXCellSize(this.placeholder.width(),this.xAxis.count,this.yCellSize),this.width=this.xAxis.count*this.xCellSize+2*this.margin,this.x=i.scale.linear().domain([0,this.xAxis.max]).range([0+this.margin+5,this.width-this.margin]),this.y=i.scale.linear().domain([0,this.yAxis.max]).range([this.height-this.margin-35,0+this.margin])},_getYCellSize:function(t){return(this.height-this.margin)/t},_getXCellSize:function(t,i,s){var e=s,a=i*e+2*this.margin;return a>t&&(e=t>.75*a?(t-2*this.margin)/i:.75*s),e},render:function(t){return this._initialize(t),this.placeholder.html(""),0==this.xAxis.count||null==t.filter?void this.placeholder.html('<div class="_empty empty">\n    <div class="empty-text">\n        <div class="first-line">Not enough data to build this beautiful chart</div>\n        <div class="second-line">Add Release or Iteration and complete some user stories</div>\n    </div>\n</div>').find(".empty").height(this.height).width(1e3):(this._renderPlot(t),this._renderCaptions(t),this._renderCharts(t),void this.placeholder.append(this.legend))},_renderPlot:function(t){this._createPlot(),this._renderAxes(),this._renderGrid(),this._renderLabels(t)},_renderAxes:function(){var t=this.createGroup("axes");t.append("line").attr("class","yAxis").attr("y1",this.y(this.yAxis.values[0])).attr("x1",this.x(this.xAxis.values[0])).attr("y2",this.y(this.yAxis.max)).attr("x2",this.x(this.xAxis.values[0])),t.append("line").attr("class","xAxis").attr("x1",this.x(this.xAxis.values[0])).attr("y1",this.y(this.xAxis.values[0])).attr("x2",this.x(this.xAxis.max)).attr("y2",this.y(this.yAxis.values[0]))},_renderGrid:function(){var t=this.createGroup("grid");t.selectAll(".yLine").data(this.y.ticks(this.yAxis.count+1)).enter().append("line").attr("class","yLine").attr("y1",this.y).attr("x1",this.x(this.xAxis.values[0])).attr("y2",this.y).attr("x2",this.x(this.xAxis.max)),t.selectAll(".xLine").data(this.x.ticks(this.xAxis.count)).enter().append("line").attr("class","xLine").attr("x1",this.x).attr("y1",this.y(this.yAxis.values[0])).attr("x2",this.x).attr("y2",this.y(this.yAxis.max))},_renderLabels:function(){var t=this.createGroup("labels"),i=this;t.selectAll(".xLabel").data(this.x.ticks(this.xAxis.count)).enter().append("text").attr("class","xLabel").attr("x",i.x).attr("y",this.y(0)+.9*this.margin).text(this.xAxis.xLabel).call(this.xAxis.transform({x:i.x,y:i.y})),t.selectAll(".yLabel").data(this.y.ticks(this.yAxis.count+1)).enter().append("text").attr("class","yLabel").text(this.yAxis.label).attr("x",this.margin-10).attr("y",this.y).attr("dy",4)},_createPlot:function(){this.placeholder.width(i.max([this.width,this.optimalWidth])),this.caption=i.select(this.placeholder[0]).append("div").attr("id","report-caption").attr("class","caption").style("width",i.max([this.width,this.optimalWidth/3])+"px"),this.plot=i.select(this.placeholder[0]).append("div").style({height:this.height+"px"}).append("svg").attr("width",this.width).attr("height",this.height)},createGroup:function(t){return this.plot.append("g").attr("class","_"+t)},getLastBurnDownPoint:function(){return t(this.plot.selectAll("line.lineChart")[0]).last()[0]},_renderCaptions:function(t){for(var i=0;i<this.captions.length;i++)this.captions[i].render(this,t)},_renderCharts:function(t){for(var i=0;i<this.charts.length;i++)this.charts[i].render(this,t)}},s});
define('tp/reports/burndown/summaryPopup',["jQuery","app.path","tau/utils/utils.date","libs/jquery/jquery.tmpl"],function(t,n){return t.widget("ui.summaryPopup",{options:{index:0,data:[],show:t.noop,hide:t.noop,navigate:t.noop},_template:'<div class="chart-bubble">\n    <div class="date">${title}</div>\n    <div class="_details">\n        <table>\n            <tr class="{{if yesterday}}_collapsible collapse-block{{else}}noncollapse-block{{/if}}">\n                <td>\n                    <div class="indicator-small yesterday">${yesterday.toFixed(2).replace(".00", "")}${units}</div>\n                </td>\n                <td style="width: 100%;">\n                    <div class="_remained yesterday-text">{{if initial}}Initial&nbsp;Effort{{else}}Start-of-Day&nbsp;Time&nbsp;Remaining{{/if}}\n                    </div>\n                </td>\n            </tr>\n\n            <tr style="display: none;">\n                <td colspan="2" class="nopadding">\n                    <div class="inner-top-shadow"></div>\n                        <div class="inner">\n                            <table>\n                                {{each effort.remained}}\n                                <tr>\n                                    <td><span class="entity-indicator">${total}${units}</span></td>\n                                    <td><i class="tau-entity-icon tau-${entityType}">${term}</i></td>\n                                    <td class="name"><div class="name-overflow">\n                                    {{if isDeleted === true}}\n                                        <span data-type="${entityType}">${name}</span>\n                                    {{else}}\n                                        <a href="${url}" title="${name}" data-id="${id}" data-type="${entityType}" class="_entity-ref">${name}</a>\n                                    {{/if}}\n                                    \n                                    </div></td>\n                                </tr>\n                                {{/each}}\n                            </table>\n                        </div>\n                    <div class="inner-bottom-shadow"></div>\n                </td>\n            </tr>\n\n            {{if added}}\n            <tr  class="_collapsible collapse-block">\n                <td>\n                    <div class="indicator-small add">+&nbsp;${added.toFixed(2).replace(".00", "")}${units}</div>\n                </td>\n                <td style="width: 100%;">\n                    <div class="_added complete-text">Added</div>\n                </td>\n            </tr>\n            <tr style="display: none;">\n                <td colspan="2" class="nopadding">\n                    <div class="inner-top-shadow"></div>\n                        <div class="inner">\n                            <table>\n                                {{each effort.added}}\n                                <tr>\n                                    <td><span class="entity-indicator">${total}${units}</span></td>\n                                    <td><i class="tau-entity-icon tau-${entityType}">${term}</i></td>\n                                    <td class="name _parent"><div class="name-overflow">\n                                    {{if isDeleted === true}}\n                                        <span data-type="${entityType}">${name}</span>\n                                    {{else}}\n                                        <a href="${url}" title="${name}" data-id="${id}" data-type="${entityType}" class="_entity-ref">${name}</a>\n                                    {{/if}}\n                                    </div></td>\n                                </tr>\n\n                                {{if showChildren}}\n                                <tr><td colspan="3"><table>\n                                    {{each children}}\n                                    <tr class="inner-task">\n                                        <td class="task-time"><span class="entity-indicator">${effort}{{if entityType == \'Task\'}}h{{else}}${units}{{/if}}</span></td>\n                                        <td><i class="tau-entity-icon tau-${entityType}">${term}</i></td>\n                                        <td class="name font-11"><div class="name-overflow">\n                                        {{if isDeleted === true}}\n                                            <span data-type="${entityType}">${name}</span>\n                                        {{else}}\n                                            <a href="${url}" title="${name}" data-id="${id}" data-type="${entityType}" class="_entity-ref">${name}</a>\n                                        {{/if}}\n                                        </div></td>\n                                    </tr>\n                                    {{/each}}\n                                </table></td></tr>\n                                {{/if}}\n                                {{/each}}\n                            </table>\n                        </div>\n                    <div class="inner-bottom-shadow"></div>\n                </td>\n            </tr>\n            {{/if}}\n\n            {{if removed}}\n\n            <tr class="_collapsible collapse-block">\n                <td>\n                    <div class="indicator-small remove" style="white-space:nowrap;">-&nbsp;${removed.toFixed(2).replace(".00", "")}${units}</div>\n                </td>\n                <td style="width: 100%;">\n                    <div class="_removed complete-text">Removed</div>\n                </td>\n            </tr>\n            <tr style="display: none;">\n                <td colspan="2" class="nopadding">\n                    <div class="inner-top-shadow"></div>\n                        <div class="inner">\n                            <table>\n                                {{each effort.removed}}\n                                <tr>\n                                    <td><span class="entity-indicator">${total}${units}</span></td>\n                                    <td><i class="tau-entity-icon tau-${entityType}">${term}</i></td>\n                                    <td class="name _parent"><div class="name-overflow">\n                                    {{if isDeleted === true}}\n                                        <span data-type="${entityType}">${name}</span>\n                                    {{else}}    \n                                        <a href="${url}" title="${name}" data-id="${id}" data-type="${entityType}" class="_entity-ref">${name}</a>\n                                    {{/if}}\n                                    </div></td>\n                                </tr>\n                                {{if showChildren}}\n                                <tr><td colspan="3"><table>\n                                    {{each children}}\n                                    <tr class="inner-task">\n                                        <td class="task-time"><span class="entity-indicator">${effort}{{if entityType == \'Task\'}}h{{else}}${units}{{/if}}</span></td>\n                                        <td><i class="tau-entity-icon tau-${entityType}">${term}</i></td>\n                                        <td class="name font-11"><div class="name-overflow">\n                                        {{if isDeleted === true}}\n                                            <span data-type="${entityType}">${name}</span>\n                                        {{else}}    \n                                            <a href="${url}" title="${name}" data-id="${id}" data-type="${entityType}" class="_entity-ref">${name}</a>\n                                        {{/if}}\n                                        </div></td>\n                                    </tr>\n                                    {{/each}}\n                                </table></td></tr>\n                                {{/if}}\n                                {{/each}}\n                            </table>\n                        </div>\n                    <div class="inner-bottom-shadow"></div>\n                </td>\n            </tr>\n            {{/if}}\n\n            {{if spent}}\n            <tr class="_collapsible collapse-block">\n                <td>\n                    <div class="indicator-small complete" style="white-space: nowrap;">-&nbsp;${spent.toFixed(2).replace(".00", "")}${units}</div>\n                </td>\n                <td style="width: 100%;">\n                    <div class="_spent complete-text">Completed</div>\n                </td>\n            </tr>\n            <tr style="display: none;">\n                <td colspan="2" class="nopadding">\n                    <div class="inner-top-shadow"></div>\n                        <div class="inner">\n                            <table>\n                                {{each effort.spent}}\n                                <tr>\n                                    <td><span class="entity-indicator">${total}${units}</span></td>\n                                    <td><i class="tau-entity-icon tau-${entityType}">${term}</i></td>\n                                    <td class="name _parent"><div class="name-overflow">\n                                    {{if isDeleted === true}}\n                                        <span data-type="${entityType}">${name}</span>\n                                    {{else}}    \n                                        <a href="${url}" title="${name}" data-id="${id}" data-type="${entityType}" class="_entity-ref">${name}</a>\n                                    {{/if}}\n                                    </div></td>\n                                </tr>\n                                {{if showChildren}}\n                                <tr><td colspan="3"><table>\n                                    {{each children}}\n                                    <tr class="inner-task">\n                                        <td class="task-time"><span class="entity-indicator">${effort}{{if entityType == \'Task\'}}h{{else}}${units}{{/if}}</span></td>\n                                        <td><i class="tau-entity-icon tau-${entityType}">${term}</i></td>\n                                        <td class="name font-11"><div class="name-overflow">\n                                        {{if isDeleted === true}}\n                                            <span data-type="${entityType}">${name}</span>\n                                        {{else}}    \n                                            <a href="${url}" title="${name}" data-id="${id}" data-type="${entityType}" class="_entity-ref">${name}</a>\n                                        {{/if}}\n                                        </div></td>\n                                    </tr>\n                                    {{/each}}\n                                </table></td></tr>\n                                {{/if}}\n                                {{/each}}\n                            </table>\n                        </div>\n                    <div class="inner-bottom-shadow"></div>\n                </td>\n            </tr>\n            {{/if}}\n    </div>\n    {{if remained}}\n\n    <tr>\n        <td>\n            <div class="remain{{if today}} today{{/if}}">${remained.toFixed(2).replace(".00", "")}${units}</div>\n        </td>\n        <td>\n            <div class="_remained remain-text{{if today}} today{{/if}}">End-of-Day Time Remaining</div>\n        </td>\n    </tr>\n    {{/if}}\n    \n    {{if forecast != null && today}}\n\n    <tr>\n         <td>\n            <div class="remain today">${forecast}</div>\n        </td>\n        <td>\n            <div class="_forecast remain-text today">Forecast End Date</div>\n        </td>\n    </tr>\n    {{/if}}\n    \n    </table>\n</div>\n',_create:function(){this.element.tauBubble({className:"tau-summaryPopup",alignTo:this.options.alignTo,onPositionConfig:function(t){t.my="left top"},onArrowPositionConfig:function(t,n){"top"===n?t.my+="+1":"bottom"===n&&(t.my+="-1")},onBeforeShow:t.proxy(this._onBeforeShow,this),onHide:t.proxy(this._onHide,this),dontCloseSelectors:["div.close"]})},show:function(){this.element.tauBubble("show"),this.options.show()},popup:function(){return this.element.data("ui-tauBubble").$popup},_onHide:function(){this.options.hide()},_onBeforeShow:function(){var n=this._getTemplateData(this.options.data,this.options.index),e=t.tmpl(this._template,n),a=this;e.find("._details").accordion({header:"tr._collapsible",collapsible:!0,active:!1,icons:!1,autoHeight:!1,animated:!1,change:function(){a.element.tauBubble("adjustPosition")}});var i=this;e.on("click","._entity-ref",function(n){var e=t(this),a=e.data();n.preventDefault(),i.options.navigate({id:a.id,type:a.type})}),this.element.tauBubble("option","content",e).on("close",function(){var t=e.find("._details");t.data("ui-accordion")&&t.accordion("destroy"),e.off("click","._entity-ref")})},_getTemplateData:function(n,e){var a=this.options.termProcessor,i=this,s=function(n){return n.map(function(n){var e=n.children.filter(function(t){return t.effort}).map(function(t){return{id:t.id,name:t.name,effort:t.effort,url:i._getUrl(t.id,t.entityType),term:a.getTerms(t.entityType).iconSmall,isDeleted:t.isDeleted,entityType:t.entityType}}),s=t.grep(e,function(t){return"Bug"==t.entityType}),d=!1;return"None"==n.action?d=!0:s.length>0&&(d=!0,e=s),{id:n.id,name:n.name,total:n.total,action:n.action,url:i._getUrl(n.id,n.entityType),term:a.getTerms(n.entityType).iconSmall,isDeleted:n.isDeleted,entityType:n.entityType,showChildren:d,children:e}})};return{initial:0==e,yesterday:n.total.remained,title:n.title?n.title:n.date.startDate.toString("d MMMM, dddd"),date:n.date,remained:n.total.remained+n.total.added-n.total.spent-n.total.removed,spent:n.total.spent,added:n.total.added,removed:n.total.removed,today:n.today,units:n.units,forecast:null==n.forecast?null:n.forecast.toString("d MMM").replace(" ","&nbsp;"),effort:{remained:s(n.effort.remained),spent:s(n.effort.spent),added:s(n.effort.added),removed:s(n.effort.removed)}}},_getUrl:function(t,e){var a="/View.aspx?ID="+t+"&Entity="+e;return new n.tp.WebServiceURL(new n.tp.AcidURL(a).toString()).toString()},destroy:function(){this.element.tauBubble("destroy")}}),t});
define('tp/reports/report',["jQuery","tp/reports/plot","tp/reports/burndown/summaryPopup"],function(t,r){var i=function(t){this._ctor(t)};return i.prototype={template:'<div class="burnDownReport _burnDownReport">\n    <span class="tableTitle">Burn Down</span>\n    <div>\n        <div id="report-filter">\n        </div>\n    </div>\n    <div id="report-chart" class="tau-chart-plot">    \n    </div>\n</div>',_ctor:function(i){this.filter=i.filter,this.name=i.name,this.placeholder=t(i.placeholder),this.dataProvider=i.dataProvider,this.plot=new r({charts:i.charts,captions:i.captions,height:i.height,margin:50}),this.contextProvider=i.contextProvider,this.navigator=i.navigator,t(i.charts).on("click",t.proxy(this._chartClick,this))},render:function(){this.contextProvider.onReady(t.proxy(function(){this.placeholder.html(t.tmpl(this.template,{name:this.name})),t(this).trigger("afterInit"),this.plot.placeholder=this.placeholder.find("#report-chart"),this.plot.optimalWidth=.85*t(window).width(),this.filter.initialize({placeholder:this.placeholder.find("#report-filter"),update:t.proxy(this._renderChart,this),dataProvider:this.dataProvider,contextProvider:this.contextProvider})},this))},_renderChart:function(){this._showLoader(),this.dataProvider.initialize(this.filter.getData(),t.proxy(function(){this.placeholder.find("#report-chart").removeClass("loader"),this.plot.render(this.dataProvider),t(this).trigger("afterRender")},this))},_showLoader:function(){this.placeholder.find("#report-chart").addClass("loader")},_chartClick:function(r,i){if(i.data.effort){var e=i.$rect;if(e.data("summaryPopup")&&e.summaryPopup("popup").is(":visible"))return void i.origin.stopPropagation();var o=this,a=this.contextProvider.getTermProcessorForCurrentProject(),n=this.navigator;this.dataProvider.getDetails(i.data,function(s){e.summaryPopup({alignTo:i.$pointer,termProcessor:a,index:i.index,data:s,show:function(){r.target.fadeOut(i.rect)},hide:function(){r.target.fadeIn(i.rect)},navigate:function(t){n.navigate(t)}}).summaryPopup("show"),t(o).trigger("details.afterRender",[e.summaryPopup("popup")])})}}},i});
define('tp/reports/dataRepository',["tp/gateway","app.path"],function(t,e){function i(e){this.url=e.url,this.gateway=t}return i.prototype={get:function(t,e,i,n){this.gateway.postJSON(this._getUrl(this.url),t,e,i,n)},getDetails:function(t,e){this.gateway.postJSON(this._getDetailsUrl(this.url),t,e)},getPlannable:function(t,e,i){this.gateway.postJSON(this._getUrl(this.url+"/plannableProperties"),t,e,i)},_getDetailsUrl:function(t){return this._getUrl(t+"/details")},_getUrl:function(t){return new e.tp.WebServiceURL(t).url}},i});
define('tp/reports/burndown/dataProvider',["libs/d3/d3","tau/utils/utils.date","tp/reports/dataRepository","jQuery"],function(t,e,n,r){function a(){this.dataRepository=new n({url:"/reports/v1/burnDown"})}return a.prototype={yAxisPointsCount:10,yRoundTo:10,data:[],initialize:function(n,r){var a=this;a.filter=n,n?this.dataRepository.get(n,function(i){a.forecast=i.forecastFinishDate,a.forecastDay=i.forecastDay,a.iterationEndDay=i.iterationEndDay,a.isTitlesProvided=i.isTitlesProvided,a.velocity=i.velocity,a.manuallySetVelocity=i.manuallySetVelocity,a.decimalSeparator=i.decimalSeparator,a.isPlannableFinished=i.isPlannableFinished,a.d3=t,a.data=[];for(var o=i.effort,u=0;u<o.length;u++){var d=o[u],s=o[u+1],f={date:{startDate:e.convertToTimezone(d.date.startDate),endDate:e.convertToTimezone(d.date.endDate)},total:a._getTotal(d,s),effort:d.effort,units:n.units,forecast:null!=a.forecast?e.convertToTimezone(a.forecast):null};a.data.push(f)}a.data.length&&a._adjustLastDay(),r()}):r()},_getTotal:function(e,n){var r=null;return e.effort&&(r={remained:t.sum(e.effort,function(t){return t.remained}),spent:t.sum(e.effort,function(t){return t.spent}),added:t.sum(e.effort,function(t){return t.added}),removed:t.sum(e.effort,function(t){return Math.abs(t.removed)})},r.remainedForNextDay=n&&n.effort?t.sum(n.effort,function(t){return t.remained}):r.remained+r.added-r.spent-r.removed),r},_adjustLastDay:function(){for(var t=this.data.length-2;t>0;t--){var n=this.data[t],r=this.data[t-1];if(null==n.total&&null!=r.total&&!e.between(e.getNow(),r.date.startDate,r.date.endDate))return void(r.last=!0)}},getPlannable:function(t,e){this.dataRepository.getPlannable(t,e,r.proxy(function(t){r(this).trigger("data-error",JSON.parse(t.responseText))},this))},getDetails:function(e,n){var a=function(e,n,r){var a=e.filter(function(t){return t.item.parentId==n.id});n.children=a.map(function(t){var e=t.item;return{id:e.id,name:e.name,effort:r(t),isDeleted:e.isDeleted,entityType:e.entityType}});var i=e.filter(function(t){return t.item.id==n.id})[0];return n.total=t.sum(n.children.map(function(t){return t.effort}))+(i?r(i):0),n},i={date:e.date,remained:this._getParentIds(e,function(t){return t.remained}),added:this._getParentIds(e,function(t){return t.added}),removed:this._getParentIds(e,function(t){return t.removed}),spent:this._getParentIds(e,function(t){return t.spent})};this.dataRepository.getDetails(i,r.proxy(function(t){var r={date:e.date,effort:{remained:t.remained.map(function(t){return a(e.effort,t,function(t){return t.remained})}),added:t.added.map(function(t){return a(e.effort,t,function(t){return t.added})}),removed:t.removed.map(function(t){return a(e.effort,t,function(t){return t.removed})}),spent:t.spent.map(function(t){return a(e.effort,t,function(t){return t.spent})})},total:e.total,units:e.units,forecast:e.forecast,today:t.today};n(r)},this))},_getParentIds:function(t,e){for(var n=t.effort.filter(function(t){return e(t)}).map(function(t){var e=t.item.parentId;return null!=e&&e>0?e:t.item.id}),a=[],i=0;i<n.length;i++){var o=n[i];0==r.grep(a,function(t){return t==o}).length&&a.push(o)}return a},getIdealLineStartValue:function(){var t=this.data[0],e=0;return this.data.length?(t&&t.total&&(e=t.total.remained),this.data.filter(function(t){return"undefined"!=typeof t.total&&null!=t.total}).reduce(function(t,e){return t+e.total.added-e.total.removed},e)):e},_getYUpperBound:function(){var e=this.data.filter(function(t){return t.total});if(0==e.length)return 10;var n=Math.max(t.max(e,function(t){return t.total.remained+t.total.added-t.total.removed-t.total.spent}),this.getIdealLineStartValue())||10,r=Math.floor(Math.log(n)/Math.log(this.yRoundTo));r>1&&r--;var r=Math.pow(this.yRoundTo,r),a=Math.ceil(n/r)*r;return a},_getYAxisValues:function(){var e=this._getYUpperBound(),n=this;return t.range(this.yAxisPointsCount+1).map(function(t){return e/n.yAxisPointsCount*t})},getYAxis:function(){return{label:function(t){return t},values:this._getYAxisValues(),count:this.yAxisPointsCount,max:this._getYUpperBound()}},_getXAxisValuesCount:function(){return this.data.length},getXAxis:function(){function e(t){return t.toString("d MMM")}function n(n){switch(n){case"release":return{xLabel:function(t,n){return a.data[n]?"[Week "+(n+1)+"] "+e(a.data[n].date.startDate)+" - "+e(a.data[n].date.endDate):void 0},transform:function(){return function(){this.attr("transform",function(){var e=t.select(this).attr("x"),n=t.select(this).attr("y");return"rotate(325 "+e+","+n+")"})}}};default:return{xLabel:function(t,n){return a.data[n]?e(a.data[n].date.startDate):void 0},transform:function(t){return function(){this.attr("dx",(t.x(1)-t.x(0))/2)}}}}}var a=this,i=Math.max(0,this._getXAxisValuesCount());return r.extend(a.filter?n(a.filter.burnDownType):{},{count:i,max:i,values:t.range(i)})},getXValue:function(t){return this.data.indexOf(t)},getYValue:function(t){return t.total?t.total.remained:null}},a});
define('tp/reports/burndown/filterStorage',["tau/storage/api"],function(e){function a(a){this.api=new e,this.groupName=a.groupName,this.key="setting"}return a.prototype={savePlannableFilter:function(e){this.api.data(this.groupName,this.key,{scope:"Public",userData:e})},findPlannableFilter:function(e){this.api.select(this.groupName,{$fields:["userData.includeWeekends","userData.showBugs","userData.isInPoints","userData.burnDownType","userData.plannableId"]}).done(function(a){var n=null;a.data.length>0&&a.data[0].burnDownType&&(n=a.data[0],n.burnDownType=n.burnDownType.toLowerCase()),e(n)})}},a});
define('tp/dropdown',["jQuery"],function(t){return t.widget("ui.dropDown",{options:{value:null,quickData:[],data:[],select:t.noopF},_template:'<div class="_dropDown">\n    <div class="_items">\n        {{each groups}}\n        <div data-id="${id}" class="parents">${name}</div>\n        <ul>\n            {{each items}}\n            <li data-id="${id}" class="_item">${name}</li>\n            {{/each}}\n        </ul>\n        {{/each}}\n    </div>\n    {{if hasMore && showMore}}\n    <div class="more">\n        <a href="#" class="_more">more&hellip;</a>\n    </div>\n    {{/if}}\n</div>',_create:function(){this.element.after('<span class="add-on _opener"></span>'),this._opener=this.element.next(),this.element.tauBubble({className:"tau-summaryPopup iteration-bubble",onPositionConfig:function(t){t.my="left top"},onBeforeShow:t.proxy(this._onBeforeShow,this)}),this.element.next().click(t.proxy(function(t){t.stopPropagation(),this.element.click()},this)),this._setValue(this._getDataItem(this.options.value)),this.options.data&&this.options.data.length||this.options.quickData&&this.options.quickData.length||(this.element.addClass("caret-disabled"),this._opener.addClass("caret-disabled")),this.key="dropDown"+(new Date).getTime()},_getData:function(t){return{groups:t,hasMore:t!=this.options.data,showMore:this.options.data&&this.options.data.length>0}},_onItemClick:function(){var e=this;return function(){e.element.data("id",t(this).data("id")),e.element.text(t(this).text()),e.element.tauBubble("hide"),e._setValue(e._getSelectedItem()),e.options.select()}},_onMoreClick:function(){var t=this;return function(e){e.preventDefault(),e.stopPropagation();var i=t.element.data("ui-tauBubble").$popup;i.find("._item").unbind(),i.find("._more").unbind(),t.element.tauBubble("option","content",t._getContent(t.options.data)),i.find("._item").click(t._onItemClick())}},_getContent:function(e){return t.tmpl(this._template,this._getData(e))},_getSelectedItem:function(){var t=this.element.data("id");return this._getItem(t)},_getQuickDataItem:function(t){return this.options.quickData.length?this._getItemFromDataSource(this.options.quickData,t):this._getItem(t)},_getDataItem:function(t){var e=this._getQuickDataItem(t);return"undefined"==typeof e?this._getItemFromDataSource(this.options.data,t):e},_getItem:function(t){return this._getItemFromDataSource(this.options.data,t)},_getItemFromDataSource:function(e,i){var n=t.map(e,function(e){return t.grep(e.items,function(t){return t.id==i})});return n?n[0]:null},option:function(t,e){return"undefined"==typeof e?this.options[t]:("data"==t&&this._disable(!e||!e.length),"value"==t&&this._setValue(this._getQuickDataItem(e)),void(this.options[t]=e))},_disable:function(t){t=!!t,this.element.toggleClass("caret-disabled",t),this._opener.toggleClass("caret-disabled",t),this.options.disabled=t},_onBeforeShow:function(){if(this.element.is(".caret-disabled"))return!1;var t=this.options.quickData.length?this.options.quickData:this.options.data;if(t.length){var e=this._getContent(t);this.element.tauBubble("option","content",e),e.find("._item").click(this._onItemClick()),e.find("._more").click(this._onMoreClick())}},value:function(t){return"undefined"!=typeof t?(this._setValue(this._getItem(t)),void this.options.select()):this.options.disabled?"":this.element.data("id")||""},values:function(){var e=[];return t.merge(e,this.options.data),t.merge(e,this.options.quickData),t.map(e,function(t){return t.id})},_setValue:function(t){t&&(this.element.data("id",t.id),this.element.text(t.name))},destroy:function(){this.element.next().remove(),this.bubble&&(this.bubble.bubblePopup("content").find("._item").unbind(),this.bubble.bubblePopup("content").find("._more").unbind(),this.bubble.bubblePopup("destroy"))}}),t});
define('tp/reports/burndown/burnDownTypeProvider',["jQuery","app.path","tp/reports/burndown/dataProvider","tau/core/tau","tp/dropdown"],function(e,t,r,n){function i(){this.dataProvider=new r,this.typeDictionary={iteration:"iteration",release:"release",teamiteration:"teamiteration"}}return i.prototype={initialize:function(e){this.queryStringPlannableId=parseInt(n.getQueryValueFromUrl(location.href.toLowerCase(),"entityid")),this.queryStringBurnDownType=n.getQueryValueFromUrl(location.href.toLowerCase(),"burndowntype"),this.placeholder=e.placeholder,this.contextProvider=e.contextProvider,this.filterProvider=e.filterProvider,this.updatePlannable=e.updatePlannable,this.savedFilter=e.savedFilter?e.savedFilter:{plannableId:-1,burnDownType:this._getDefaultType()},isNaN(this.queryStringPlannableId)||"teamiteration"!=this.queryStringBurnDownType&&"release"!=this.queryStringBurnDownType&&"iteration"!=this.queryStringBurnDownType||(this.savedFilter.plannableId=this.queryStringPlannableId,this.savedFilter.burnDownType=this.typeDictionary[this.queryStringBurnDownType])},_getPlannableFromQueryString:function(){var e=null;if(!isNaN(this.queryStringPlannableId)){var t=this;e=this.filterProvider.allIterations.filter(function(e){return e.id==t.queryStringPlannableId})[0]}return e},_getSavedPlannable:function(){var t=this._getPlannables(),r=this,n=e.grep(t,function(e){return e.id==r.savedFilter.plannableId});return n.length?n[0]:null},_getDefaultPlannable:function(){var t=this._getPlannables(),r=this.filterProvider._getDefaultIteration();if(!r){var n=e.grep(t,function(e){return e.current});n.length&&(r=n[0])}return r},render:function(){function t(){return n.savedFilter.burnDownType.toLowerCase()==this.toLowerCase()}var r=[{id:"",name:"",items:[]}];(this._isIterationsAvailable()||"iteration"==this.queryStringBurnDownType)&&r[0].items.push({id:"iteration",name:this.contextProvider.getIterationTerm()}),r[0].items.push({id:"release",name:this.contextProvider.getReleaseTerm()}),this._areTeamIterationsAvailable()&&r[0].items.push({id:"teamiteration",name:"Team Iteration"});var n=this,i=e.proxy(function(){var e=this._getSavedPlannable()||this._getDefaultPlannable();return e?e.id:0},n),a=e.proxy(function(){return this.filterProvider.getIterationsDropDownDataSource(this._getPlannables())},n),o=e.proxy(function(){return this.filterProvider.getIterationsDropDownDataSource(this._getCurrentPlannables())},n),l=e.proxy(function(){var e=n.filterProvider._getSelectedPlannable()||n._getPlannableFromQueryString()||this._getSavedPlannable()||this._getDefaultPlannable();e&&e.entityType.toLowerCase()==n.getType().toLowerCase()&&(n.contextProvider.setCurrentProject(e.parent.id),n.filterProvider.setStartDate(e.startDate),n.filterProvider.processFilterOptionsVisibility(e)),n.filterProvider.update()},n),s=e.proxy(function(){n.iterationsDropDown||(n.iterationsDropDown=n.placeholder.find("._selectedIteration").dropDown({value:i(),quickData:o(),data:a(),select:l})),l()},n),u=e.proxy(function(){n.iterationsDropDown.dropDown("option","data",a()),n.iterationsDropDown.dropDown("option","quickData",o()),n.iterationsDropDown.dropDown("option","value",i()),l()},n),p=n._getDefaultType();n.savedFilter&&n.savedFilter.burnDownType&&e(n._getPossibleTypes()).filter(t).length>0&&(p=n.savedFilter.burnDownType),this.burnDownTypeDropDown=this.placeholder.find("._burnDownType").dropDown({value:p,quickData:r,data:[],select:function(){var e=n.burnDownTypeDropDown.dropDown("value");n.updatePlannable(e,u)}}),s()},getPlannableId:function(){return this.iterationsDropDown.dropDown("value")},getType:function(){return this.burnDownTypeDropDown?this.burnDownTypeDropDown.dropDown("value"):this.savedFilter&&this.savedFilter.burnDownType?this.savedFilter.burnDownType:this._getDefaultType()},_getPlannables:function(){return this._filterPlannables(this.filterProvider.allIterations)},_getCurrentPlannables:function(){return this._filterPlannables(this.filterProvider.allCurrentIterations)},_filterPlannables:function(e){var t=this.getType();return e.filter(function(e){return e.entityType.toLowerCase()==t.toLowerCase()})},_getDefaultType:function(){return this._getPossibleTypes()[0]},_getPossibleTypes:function(){function t(e){return function(t,r){return r.entityType.toLowerCase()==e.toLowerCase()}}var r=this,n=[];return this._isIterationsAvailable()&&n.push("iteration"),n.push("release"),this._areTeamIterationsAvailable()&&n.push("teamiteration"),e(n).filter(function(n,i){return e(r.filterProvider.allIterations).filter(t(i)).length>0})},_isIterationsAvailable:function(){return this.contextProvider.isPracticeAvailable("Iterations")},_areTeamIterationsAvailable:function(){return this.contextProvider.getTeamIds().length>0}},i});
define('tp/reports/filterProvider',["jQuery","Underscore","app.path","tau/utils/utils.date","tp/reports/burndown/filterStorage","tp/reports/burndown/burnDownTypeProvider","tp/dropdown"],function(t,e,i,n,r,s){function a(){this.currentIterations=[],this.storage=new r({groupName:"burnDownVer2Filter"}),this.burnDownTypeProvider=new s}return a.prototype={initialize:function(e){this.dataProvider=e.dataProvider,this.placeholder=e.placeholder,this.template=e.template,this.contextProvider=e.contextProvider,this.plannablesRetrieved=!1;var i=this;this.update=function(){i._saveFilter(),e.update()},this._getSavedFilter(function(n){i.savedFilter=n,i.burnDownTypeProvider.initialize({placeholder:e.placeholder,contextProvider:e.contextProvider,updatePlannable:t.proxy(this._drawChart,this),savedFilter:i.savedFilter,filterProvider:this});var r=i.burnDownTypeProvider.getType();i._drawChart(r,t.proxy(i._render,i))})},_drawChart:function(e,i){this.plannableRetrieve=t.proxy(this.dataProvider.getPlannable,this.dataProvider),this._getIterations(i)},_getIterations:function(e){if(this.plannablesRetrieved)return this.iterations=this._getForType(this.allIterations),this.currentIterations=this._getForType(this.allCurrentIterations),void e();var i=this;this._retrieveIterations(this.contextProvider.getProjectIds(),this.contextProvider.getTeamIds(),function(r){var s=n.getServerNow();i.allIterations=t.map(r,function(t){var e=n.convertToTimezone(t.startDate),i=n.convertToTimezone(t.endDate);return{startDate:e,endDate:i,id:t.id,name:t.name,entityType:t.entityType,current:n.between(s,e,i),isBugsAvailable:t.isBugsAvailable,isPointsAvailable:t.isPointsAvailable,isTimeTrackingAvailable:t.isTimeTrackingAvailable,parent:{id:t.parentId,name:t.parentName}}}),i.allCurrentIterations=i.allIterations.filter(function(t){return t.current}),i.iterations=i._getForType(i.allIterations),i.currentIterations=i._getForType(i.allCurrentIterations),i.plannablesRetrieved=!0,e()})},_getForType:function(t){var e=this.burnDownTypeProvider.getType();return t.filter(function(t){return t.entityType.toLowerCase()==e.toLowerCase()})},_retrieveIterations:function(t,e,i){this.plannableRetrieve({projectIds:t,teamIds:e},i)},_render:function(){var e=this.contextProvider.getBugsTerm();this.template=this.template.replace("{1}",e),this.placeholder.html(this.template),0==this.allIterations.length&&this.placeholder.hide(),t.datepicker.parseDate=function(t,e){return n.parse(e)},t.datepicker.formatDate=function(t,e){return n.formatAs(e,t)},this.placeholder.find("._startDate").datepicker({buttonImageOnly:!1,showOn:"both",buttonText:"Choose",onSelect:this.update,dateFormat:"MM/dd/yyyy"}),this.placeholder.find("._weekends").click(this.update),this._pointsButton().click(t.proxy(this._onUnitsClick,this)),this._hoursButton().click(t.proxy(this._onUnitsClick,this)),this.placeholder.find("._include-bugs").click(this.update);var i=this._getDefaultIteration();"undefined"!=typeof i&&this.processFilterOptionsVisibility(i);var r=this,s=function(t){r.burnDownTypeProvider.render(t)};this._applySavedFilter(s),t(this).trigger("afterRender")},_saveFilter:function(){var t=this._getFilterData();if(null!=t){if(""==t.burnDownType)return;this._bugsSection().is(":visible")||delete t.showBugs,this._unitsSection().is(":visible")||delete t.isInPoints}this.storage.savePlannableFilter(t)},_getSavedFilter:function(e){this.storage.findPlannableFilter(t.proxy(e,this))},_applySavedFilter:function(t){null!=this.savedFilter&&(this._bugsSection().is(":visible")&&this._setShowBugs(this.savedFilter.showBugs),this._unitsSection().is(":visible")&&this._selectUnit(this.savedFilter.isInPoints),this._setIncludeWeekends(this.savedFilter.includeWeekends)),t(this.savedFilter)},_onUnitsClick:function(e){var i=t(e.currentTarget).text()==this._pointsButton().text();this._selectUnit(i);var n=this._getSelectedPlannable();n&&this._showBugs(n)?this._bugsSection().removeClass("invisible"):this._bugsSection().addClass("invisible"),this.update()},_selectUnit:function(t){t?(this._pointsButton().addClass("selected"),this._hoursButton().removeClass("selected")):(this._pointsButton().removeClass("selected"),this._hoursButton().addClass("selected"))},_showBugs:function(t){return t.isBugsAvailable&&!(t.isPointsAvailable&&!t.isTimeTrackingAvailable&&this._hoursButton().hasClass("selected")&&this._unitsSection().is(":visible"))},processFilterOptionsVisibility:function(t){var e=this._unitsSection(),i=this._bugsSection();t.isPointsAvailable?e.show():e.hide(),this._showBugs(t)?i.removeClass("invisible"):i.addClass("invisible")},_getDefaultIteration:function(){var t=this.iterations[0];return this.currentIterations.length&&(t=this.currentIterations.map(function(t){return t})[0]),t},getIterationsDropDownDataSource:function(e){for(var i=t.map(e,function(t){return t.parent}),n=[],r=0;r<i.length;r++){var s=i[r];0==t.grep(n,function(t){return t.id==s.id}).length&&n.push({id:s.id,name:s.name})}for(var r=0;r<n.length;r++)n[r].items=t.grep(e,function(t){return t.parent.id==n[r].id}).map(function(t){return{id:t.id,name:t.current?t.name+" (current)":t.name}});return n.sort(function(t,e){return t.name==e.name?0:t.name.toLowerCase()<e.name.toLowerCase()?-1:1}),n},getManuallySetVelocity:function(){var t=this.placeholder.closest("._burnDownReport").find(".velocity-input");return t.length>0&&""!==t.val()?parseFloat(t.val()):0},_getUrl:function(t){return new i.tp.WebServiceURL(t).url},_getFilterData:function(){var t=this._getSelectedPlannable(),e=this._getStartDate();return t?{burnDownType:this.burnDownTypeProvider.getType(),plannableId:t.id,startDate:e?e:null,includeWeekends:this._getIncludeWeekends(),isInPoints:this.isInPoints(),showBugs:this.isShowBugs(),units:t.isPointsAvailable&&this.isInPoints()?"p":"h"}:null},_getPlannableId:function(){return this.burnDownTypeProvider.getPlannableId()},_getStartDate:function(){var t=this._getRawStartDate();return n.format.date.short(t)},_getRawStartDate:function(){var t=this.placeholder.find("._startDate").datepicker().datepicker("getDate");return t},setStartDate:function(t){this.placeholder.find("._startDate").datepicker("setDate",t)},_getIncludeWeekends:function(){return this._isChecked("_weekends")},_setIncludeWeekends:function(t){return this.placeholder.find("._weekends").attr("checked",t)},isInPoints:function(){return this._unitsSection().is(":visible")?this._pointsButton().hasClass("selected"):this._getSelectedPlannable().isPointsAvailable},isShowBugs:function(){return this._bugsSection().is(":visible")?this._isChecked("_include-bugs"):!1},_isChecked:function(t){return this.placeholder.find("."+t+":visible")&&"on"==this.placeholder.find("."+t+":checked").val()},_unitsSection:function(){return this.placeholder.find("._unitsOption")},_pointsButton:function(){return this.placeholder.find("._inPoints")},_hoursButton:function(){return this.placeholder.find("._inHours")},_bugsSection:function(){return this.placeholder.find("._bugsOption")},_setShowBugs:function(t){this.placeholder.find("._include-bugs").attr("checked",t)},_getSelectedPlannable:function(){var e=this._getPlannableId(),i=t.grep(this.allIterations,function(t){return t.id==e});if(i.length>0){var n=i[0];return n.typeName=this.burnDownTypeProvider.getType(),n}return null}},a});
define('tp/reports/burndown/filter',["jQuery","tp/reports/burndown/dataProvider","tp/reports/filterProvider"],function(e,t,n){function i(){this.dataProvider=new t,this.template='<div class="chart-filter">\n    <span class="pr-10">\n        <label><span class="divider">Burn Down for&nbsp;&nbsp;</span><span class="_burnDownType iterations-caret iterations-caret-disabled"></span></label>\n    </span>\n    <span class="pr-10">\n        <label><span class="divider">&nbsp;&nbsp;</span><span class="_selectedIteration iterations-caret iterations-caret-disabled"></span></label>\n    </span>\n    <span class="ui-dateeditor pr-10">\n        <label><span class="divider">Start Date&nbsp;&nbsp;</span><input type="text" name="StartDate" class="_startDate hasDatePicker" maxlength="20"></label>\n    </span>\n    <span class="divider">\n        <label class="pr-10"><input type="checkbox" name="Weekends" class="_weekends" checked="checked">Weekends</label>\n    </span>    \n    <span class="divider _bugsOption">\n        <label><input type="checkbox" name="dont-count-bugs" class="_include-bugs" checked="checked">Include {1}</label>\n    </span>\n    <div class="button-group _unitsOption">\n        <a class="button middle selected _inPoints" href="javascript:void(0);">In points</a>\n        <a class="button middle _inHours" href="javascript:void(0);">In hours</a>\n    </div>\n</div>',this.filterProvider=new n,e(this.filterProvider).on("afterRender",e.proxy(function(){e(this).trigger("afterRender")},this))}return i.prototype={initialize:function(e){e.template=this.template,this.filterProvider.initialize(e)},getData:function(){var e=this.filterProvider._getSelectedPlannable(),t=this.filterProvider._getStartDate();if(e&&t){var n={startDate:t,includeWeekends:this.filterProvider._getIncludeWeekends(),isInPoints:this.filterProvider.isInPoints(),showBugs:this.filterProvider.isShowBugs(),units:e.isPointsAvailable&&this.filterProvider.isInPoints()?"p":"h",plannableId:e.id,burnDownType:e.typeName,manuallySetVelocity:this.filterProvider.getManuallySetVelocity()};return n}return null},update:function(){this.filterProvider.update()}},i});
define('tp/reports/burndown/idealLine',["tau/utils/utils.date"],function(){var t=function(t,a){var e=a.data[0];e&&t.createGroup("idealLine").append("line").attr("class","idealLine").attr("x1",t.x(0)).attr("y1",t.y(a.getIdealLineStartValue())).attr("x2",t.x(a.iterationEndDay+1)).attr("y2",t.y(0))};return{render:t}});
define('tp/reports/chart.format',["libs/d3/d3"],function(n){return{precision:function(t){return function(r){return n.format("s")(Math.round(r*Math.pow(10,t))/Math.pow(10,t))}}}});
define('tp/reports/burndown/forecastCaption',["Underscore","tau/utils/utils.date","tp/reports/chart.format","libs/jquery/jquery.inputMaskEditor"],function(i,t,e){function n(){}return n.prototype={initialize:function(i){this.filter=i.filter},render:function(n,o){var c=e.precision(1),l=function(i){var t="release"==o.filter.burnDownType?"Weekly":"Daily";return i?t.toLowerCase():t},s=function(){var i=o.velocity?c(o.velocity)+""+o.filter.units+".&nbsp;&nbsp;":"n/a.";return"Calculated "+l(!0)+" velocity: "+i},r=function(){return o.forecast?"Estimated finish: "+t.convertToTimezone(o.forecast).toString("d MMM")+".":""},a=function(){return'<div class="forecast-section"><a href="javascript:void(0)" class="show-velocity-section ui-link">Forecast using new velocity</a><div class="velocity-section" style="display: '+(o.manuallySetVelocity?"block":"none")+'"><span>'+l(!1)+' velocity:</span> <input id="input-forecast" class="velocity-input" type="text" value="'+o.manuallySetVelocity+'" /> '+o.filter.units+' <button class="_show-new-forecasted tau-btn" onclick="return false;">Forecast</button> <a href="javascript:void(0)" class="_discard-velocity ui-link">Discard</a></div></div>'};n.caption.html("<div>"+s()+r()+(o.isPlannableFinished?"":a())+"</div>");var u=function(){return n.placeholder.find(".velocity-input")};u().inputMaskEditor({mask:"^[0-9]*([\\"+o.decimalSeparator+"][0-9]{0,2})?$"}),u().keypress(i.bind(function(i){i.which==$.ui.keyCode.ENTER&&this.filter.update()},this)),n.placeholder.find("._show-new-forecasted").click(i.bind(this.filter.update,this.filter)),n.placeholder.find("._discard-velocity").click(i.bind(function(){u().val(""),this.filter.update()},this)),n.placeholder.find(".show-velocity-section").click(i.bind(function(){u().val("");var t=function(){return n.placeholder.find(".velocity-section")};t().slideToggle(400,i.bind(function(){t().is(":visible")||this.filter.update()},this))},this))}},n});
define('tp/reports/burndown/forecastLine',["tau/utils/utils.date"],function(){var a=function(a,t){var e=t.data[0];if(e&&null!=t.forecast&&!(t.forecastDay<=0)){var r=a.getLastBurnDownPoint();a.createGroup("forecastLine").append("line").attr("class","forecastLine").attr("x1",r.x2.baseVal.value).attr("y1",r.y2.baseVal.value).attr("x2",a.x(t.forecastDay+1)).attr("y2",a.y(0))}};return{render:a}});
define('tp/reports/burndown/lineChart',["jQuery","libs/d3/d3"],function(t,a){var e=function(){};return e.prototype={render:function(e,r){var n=this,i=e.createGroup("marker"),l=i.append("rect").attr("class","lineChartPointYCoordinateRect").attr("x",0).attr("width",e.margin).attr("height",20).attr("rx",5).attr("ry",5).style("display","none"),o=i.append("text").attr("class","lineChartPointYCoordinate").attr("x",e.margin/2).attr("y",0).attr("width",e.margin).attr("height",e.margin).style("display","none"),s=o.append("tspan").attr("dy",0),c=i.append("line").attr("class","lineChartPointYLine").attr("x1",e.x(0)).style("display","none"),y=function(t,a){l.attr("y",e.y(r.getYValue(t))-l.attr("height")/2).style("display",null),o.attr("y",e.y(r.getYValue(t))+5).style("display",null),s.text(Math.round(r.getYValue(t))),a>0&&c.attr("x2",e.x(a)-7).attr("y1",e.y(r.getYValue(t))).attr("y2",e.y(r.getYValue(t))).style("display",null)},d=function(){o.style("display","none"),c.style("display","none"),l.style("display","none")},p=function(t){t.attr("stroke-width",5)},h=function(t){t.attr("stroke-width",3)};e.createGroup("chart").selectAll("line.lineChart").data(r.data).enter().append("g").attr("class",function(t,a){return"item"+a}).each(function(r,i){if(null!=r.total){{var l=a.select(this),o=l.append("circle").attr("cx",e.x(i+.5)).attr("cy",e.y((r.total.remained+r.total.remainedForNextDay)/2)).attr("r",1).attr("stroke","#3BCAFF").attr("stroke-width",1),s=l.append("line").attr("class","lineChart").attr("x1",e.x(i)).attr("y1",e.y(r.total.remained)).attr("x2",e.x(i+1)).attr("y2",e.y(r.total.remainedForNextDay)).attr("stroke","#3BCAFF").attr("stroke-width",3);l.append("circle").attr("class","lineChartPoint").attr("cx",e.x(i)).attr("cy",e.y(r.total.remained)).attr("r",4)}r.last&&l.append("circle").attr("class","lineChartPoint").attr("cx",e.x(i+1)).attr("cy",e.y(r.total.remainedForNextDay)).attr("r",4);var c=l.append("rect").attr("x",e.x(i)).attr("y",e.y(e.yAxis.max)).attr("class","lineChartPointHover").attr("width",e.xCellSize).attr("height",e.y(0)-e.y(e.yAxis.max)).attr("opacity",0).on("mouseover",function(){a.select(this).attr("opacity",.1),y(r,i),p(s)}).on("mouseout",function(){a.select(this).classed("lineChartPointHoverSelected")||a.select(this).attr("opacity",0),d(),h(s)});t(c[0]).click(function(a){t(n).trigger("click",{name:"lineChart",$pointer:t(o[0]),data:r,index:i,$rect:t(this),origin:a})})}})},fadeOut:function(t){a.select(t).attr("opacity",.1),a.select(t).attr("class","lineChartPointHoverSelected")},fadeIn:function(t){a.select(t).attr("class","lineChartPointHover"),a.select(t).attr("opacity",0)}},e});
define('tp/reports/contextProvider',["Underscore","tau/core/termProcessor"],function(e,t){function r(e){this.context=e,this.termProcessor=this.context&&this.context.applicationContext&&this.context.getTerms?new t(config.context.getTerms()):new t}return r.prototype={onReady:function(e){e()},_exceptNulls:function(t){return e.filter(t,function(e){return"null"!=e})},getProjectIds:function(){return this._exceptNulls(this.context.selectedProjectIds)},getTeamIds:function(){return this._exceptNulls(this.context.selectedTeamIds)},getBugsTerm:function(){return this.termProcessor.getTerms("Bug").names.toLowerCase()},getIterationTerm:function(){return this.termProcessor.getTerms("Iteration").name},getReleaseTerm:function(){return this.termProcessor.getTerms("Release").name},setCurrentProject:function(){},getTermProcessorForCurrentProject:function(){return this.termProcessor},getTerms:function(e){return this.termProcessor.getTerms(e)},getTerm:function(e,t){var r=this.getTerms(e);return 1==t?r.name:r.names},isPracticeAvailable:function(t){return e.any(this.context.processes,function(r){return e.any(r.practices,function(e){return e.name==t})})}},r});
define('tp/reports/extension.context',["tau/components/extensions/component.extension.base","tp/reports/contextProvider"],function(t,e){return t.extend({"bus afterInit":function(t,n){var o=this,i=n.config.context.configurator,c=i.getAppStateStore(),r=i.getApplicationContextService();c.get({fields:["acid"],callback:function(t){r.getApplicationContext({acid:t.acid},{success:function(t){o.fire("contextProvider.ready",new e(t))}})}})}})});
define('tp/reports/extension.navigator',["tau/components/extensions/component.extension.base","Underscore"],function(n){function t(n){this.configurator=n}return t.prototype={navigate:function(n){this.configurator.service("navigator").to(n.type+"/"+n.id)}},n.extend({"bus afterInit":function(n,e){this.fire("navigator.ready",new t(e.config.context.configurator))}})});
define('tp/reports/burndown/component.report',["jQuery","tp/reports/report","tp/reports/burndown/filter","tp/reports/burndown/dataProvider","tp/reports/burndown/idealLine","tp/reports/burndown/forecastCaption","tp/reports/burndown/forecastLine","tp/reports/burndown/lineChart","tau/components/component.creator","tp/reports/extension.context","tp/reports/extension.navigator","tau/components/extensions/component.extension.base","tau/components/extensions/error/extension.errorBar"],function(e,t,r,n,o,i,a,s,p,d,f,c,u){var l=c.extend({"bus afterInit":function(){var t=new r;e(t).on("afterRender",e.proxy(function(){this.fire("filter.afterRender",t)},this)),this.fire("filter.ready",t)},"bus afterRender + contextProvider.ready + navigator.ready + filter.ready":function(r,p,d,f,c){var u=new n;e(u).on("data-error",e.proxy(function(e,t){this.fire("error",t.Message)},this));var l=new i;l.initialize({filter:c});var h=new t({height:.7*e(window).height(),placeholder:p.element,filter:c,dataProvider:u,charts:[o,new s,a],captions:[l],contextProvider:d,navigator:f});e(h).on("afterInit",e.proxy(function(){p.element.find(".tableTitle").hide(),this.fire("plot.afterInit",h)},this)),e(h).on("afterRender",e.proxy(function(){this.fire("plot.afterRender",h)},this)),e(h).on("details.afterRender",e.proxy(function(e,t){this.fire("details.afterRender",t)},this)),h.render()}});return{create:function(e){var t={extensions:[d,f,l,u],template:{engine:"jqote2",name:"reports-template",markup:['<div class="tau-chart tp2-chart i-role-burnDown">',"</div>"]}},r=p.create(t,e);return r.fire("dataBind",{}),r}}});
define('tp/reports/settings/type/template.type',["tau/nls/translator","tau/core/templates-factory","tau/extensions/extension.underscore"],function(t,e,n){var i={name:"report.type",engine:"jqote2",markup:n.flatten(['<span class="tau-chart-entities _entities">',"<% _.forEach(this, function(item) { %>",'<input type="checkbox" name="entities" value="<%= item.id %>" <% if (item.default) { %> checked="checked" <% } %> style="position: absolute; left: -99999px;" />','<button type="button" class="i-role-report-entity-type tau-btn tau-<%= item.id %><% if (item.default) { %> tau-checked<% } %>"><%= item.name %></button>',"<% }); %>","</span>"])};return e.register(i)});
define('tp/reports/settings/type/extension.type.form',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,n,o){return o.extend({})});
define('tp/reports/settings/type/config',["tp/reports/settings/type/template.type","tp/reports/settings/type/extension.type.form"],function(t,e){return{extensions:[e]}});
define('tp/reports/settings/filter/template.filter',["tau/nls/translator","tau/core/templates-factory","tau/ui/templates/board.editor/ui.template.board.editor.filter","tau/extensions/extension.underscore"],function(e,t,r,i){var a={name:"report.filter",engine:"jqote2",markup:i.flatten(['<%= fn.sub("board.editor.filter", {name: "data", filter: this.filter, useFilter: this.useFilter}) %>']),dependencies:[]};return t.register(a)});
define('tp/reports/settings/filter/model.filter.help',["Underscore","tau/core/model-base","tau/models/board.editor/board.filter.help"],function(e,t,n){return t.extend({"bus settings.changed":function(t,r){var i=this,o={data:{types:e.map(r.parameters.definition.cells.items,function(e){return e.id})}};(new n).get(o).done(function(e){i.fire("refresh.help.content",e)})}})});
define('tp/reports/settings/filter/model.filter.autocomplete',["Underscore","tau/core/extension.base","tau/models/board.editor/board.filter.suggestionManager"],function(e,t,n){var r=t.extend({"bus beforeInit":function(e,t){var r=t.config.context.configurator;this.fire("configurator.ready",r),this.fire("suggestionManager.ready",new n(r))},getTypes:function(t){return e.map(t.parameters.definition.cells.items,function(e){return e.id})},"bus filter.autocomplete.preload + suggestionManager.ready:last + settings.changed:last":function(t,n,r,i){var s=this.getTypes(i);if(0!=s.length){var o=n.value;if(o&&0!==o.length&&"?"==o[0]){var a=[o.trim()+" ",o.trim()+"."];e.each(a,function(e){var t={query:{resourceTypes:s,script:e}};r.get(t)})}}},"bus filter.autocomplete.resolve + suggestionManager.ready:last + settings.changed:last":function(t,n,r,i){var s=n.$input,o=this.getTypes(i);if(0==o.length)return void n.next([]);var a=n.request.term.slice(0,s[0].selectionStart),u=function(t){var r=t.Suggestions?t.Suggestions.Items:[];r=e.map(r,function(e){return e.Source=t.Source,e.Position=t.Position,e}),n.next(r)},g=function(){n.next([])},c={query:{resourceTypes:o,script:a}};r.get(c).done(u).fail(g)}});return r});
define('tp/reports/settings/filter/extension.filter.form',["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/behaviour/overlay/ui.behaviour.overlay","libs/jquery/jquery.placeholder","libs/jquery/jquery.toggleFilter"],function(e,i,t){return t.extend({"bus $el.ready:last + error":function(e,i){i.tauOverlay("hide")},"bus $form.ready":function(e,t){var n=this,l=t.find(".i-role-filter-input");l.placeholder(),l.each(function(){i(this).data("default",i(this).val())}),t.find(".i-role-filter-control").toggleFilter({}),t.on("click",".i-role-report-entity-type",function(e){var n=i(this),l=n.prev(),a=!n.hasClass("tau-checked");n.toggleClass("tau-checked",a),l.prop("checked",a),t.trigger("_change",{$input:l,sourceEvent:e})});var a="[name=data_filter]",r=t.find(a);t.delegate(a,"keydown",function(e){if(e.which==i.ui.keyCode.ENTER){var t=i(this);t.blur()}}),t.on("_change",function(){n._enableFilter(n.unbind(t).entities.length,r),n.fire("filter.form.changed")})},_enableFilter:function(e,i){i.prop("disabled",!e);var t=i.closest(".i-role-filter-control");t.find(".i-role-help").prop("disabled",!e),t.find(".i-role-filter-toggle").prop("disabled",!e&&!t.hasClass("i-role-filter-control_on"))},"bus configurator.ready:last + $form.ready:last + filter.resolve":function(e,i,t,n){var l=this.unbind(t),a=this;i.getAppStateStore().get({fields:["acid"],callback:function(e){a.getSpaceTotal(i.getSliceFactory(),e.acid,l).done(function(e){a.updateForm(i,t,e),n.resolve(l)})}})},unbind:function(e){return{entities:e.find("[name=entities]:checked").map(function(){return{id:i(this).val()}}),filter:e.find("[name=data_filter]").val(),useFilter:!!e.find(".i-role-useFilter").prop("checked")}},updateForm:function(t,n,l){var a=n.find(".i-role-filter-input");a.placeholder("refresh");var r=n.find("[name=entities]"),s=l.cells.types;e.forEach(s,function(e){var t=r.filter(function(){return this.value==e.id||i(this).hasClass("permission-denied")}),n=t.next(),l=!e.isAvailable;t.add(n).prop("disabled",l).toggleClass("tau-disabled",l)})},getSpaceTotal:function(t,n,l){return i.when(this.spaceAvailable(t,n),this.spaceCells(t,n,l)).pipe(function(i,t){var n={spaceDefault:i.space,spaceAvailable:{cells:t.space.cells||[]},settingsCurrent:t.settings},l={cells:{name:"cells",types:[],filter:""}},a=function(e){return e.toLowerCase()};return l.cells.types=e.map(n.spaceDefault.cells.items,function(i){var t={id:i.id,name:i.name,isAvailable:e.any(n.spaceAvailable.cells.items,function(e){return a(e.id)===a(i.id)}),isSelected:e.any(n.settingsCurrent.cells.items,function(e){return a(e.id)===a(i.id)})};return t.isAvailable=t.isSelected?!0:t.isAvailable,t}),l.cells.filter=n.settingsCurrent.cells.filter||"",l.acid=t.settings.acid||"",l})},spaceAvailable:function(e,i){var t={global:{acid:i}},n=e.create({definition:t});return n.space().pipe(function(e){return{space:e.data}})},spaceCells:function(i,t,n){var l={cells:{items:n.entities,filter:n.filter},acid:t},a={definition:{global:{acid:t},cells:{items:e.map(l.cells.items,function(e){return{id:e.id,data:null,filter:null,type:e.id}})}}},r=i.create(a);return r.space().pipe(function(e){return{space:e.data,settings:l}})}})});
define('tp/reports/settings/filter/config',["tp/reports/settings/filter/template.filter","tp/reports/settings/filter/model.filter.help","tp/reports/settings/filter/model.filter.autocomplete","tp/reports/settings/filter/extension.filter.form","tau/ui/extensions/board.editor/ui.extension.board.editor.autocomplete","tau/ui/extensions/board.editor/ui.extension.board.editor.help","tau/components/extensions/error/extension.errorBar","tau/ui/extensions/board.plus/ui.extension.board.plus.errors"],function(e,t,r,o,i,s,n,l){return{extensions:[t,r,o,i,s,n,l]}});
define('tp/reports/settings/time/template.time',["tau/nls/translator","tau/core/templates-factory","tau/extensions/extension.underscore"],function(t,e,a){var n={name:"report.time",engine:"jqote2",markup:a.flatten(['<span class="tau-inline-group tau-chart-time-switch _time-switch">','   <% _.forEach(this, function(item){ %><button type="button" data-val="<%= item.id %>" data-axislabel="<%= item.label %>" data-filter="<%= item.filter%>" class="tau-btn<% if (item.default) { %> tau-checked<% } %>"><%= item.name %></button><% }); %>',"</span>"]),dependencies:[]};return e.register(n)});
define('tp/reports/settings/time/extension.time.form',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,t,a){return a.extend({"bus $form.ready":function(e,a){var n=this;a.delegate(".tau-chart-time-switch button","click",function(){a.find(".tau-chart-time-switch button").removeClass("tau-checked"),t(this).addClass("tau-checked"),n.fire("time.form.changed")})},"bus $form.ready:last + time.resolve":function(e,t,a){var n=t.find(".tau-chart-time-switch button.tau-checked");a.resolve({key:n.data("val"),label:n.data("axislabel"),filter:n.data("filter")})}})});
define('tp/reports/settings/time/config',["tp/reports/settings/time/template.time","tp/reports/settings/time/extension.time.form"],function(t,e){return{extensions:[e]}});
define('tp/reports/chart.plot',["jQuery","libs/d3/d3","tp/reports/service.chart.size"],function(t,e,i){function s(s){var h=new i;this.defaultSize=h.size(),t.extend(this,s),this.size=this.size||h,this.empty=t(s.placeholder).find(".empty"),this.plot=e.select(s.placeholder).select("svg"),t(this.placeholder).height(this.defaultSize.height),this.loader=t('<div class="loader-container"></div>').prependTo(t(this.placeholder)).css({width:"100%",height:this.defaultSize.height,position:"absolute",top:0}).tauProgressIndicator(),this.plot.append("defs");var a=this.plot.selectAll("g.axis").data(this.axes).enter().append("g").attr("class","axis");a.append("text").attr("class","axisLabel axisTitle"),this.plot.selectAll("g.chart").data(this.charts).enter().append("g").attr("class","chart")}return s.prototype={loading:function(t){t?(this.loader.tauProgressIndicator("show"),this._hideEmpty()):this.loader.tauProgressIndicator("hide")},_hideEmpty:function(){this.empty.addClass("invisible")},_showEmpty:function(){this.empty.removeClass("invisible")},data:function(e,i){var s=this,h=e?e.nodes:[],a=function(){t(s.plot[0][0]).hide(),s.setSize(s.defaultSize),s._showEmpty()},l=function(){s._hideEmpty(),t(s.plot[0][0]).show()};if(!h||!h.length)return t(this).trigger("nodata"),void a();var n=this.getBox(h);this.setSize(n),l();var o=this.scales.get(h,i,n),r={scales:o,extend:function(e){return t.extend(e,this)},plot:n};this.plot.selectAll("g.axis").data(this.axes).each(function(t){t.render(r.extend({placeholder:this}))}),this.plot.selectAll("g.chart").data(this.charts).each(function(t){t.data(e,r.extend({placeholder:this}))})},getBox:function(e){var i=this.size?this.size.size(e):this.defaultSize;return t.extend(i,{margin:60})},setSize:function(e){t(this.placeholder).height(e.height),t(this.plot).height(e.height),t(this.empty).height(e.height)}},s});
define('tp/reports/chart.scales',["libs/d3/d3"],function(e){return{type:function(){return e.scale.ordinal().domain(["UserStory","Bug","Task","Feature","Request"]).range(["userstory","bug","task","feature","request"])}}});
define('tp/reports/cycleTimeDistribution/chart.scales',["Underscore","libs/d3/d3","tp/reports/chart.scales"],function(n,a,r){function e(){}return e.prototype={get:function(n,e,i){var t=a.scale.linear().range([i.margin,i.width-i.margin]).domain([0,a.max(n,function(n){return n.values.length})]);t.label=e.mapping.x.label;var l=a.max(n,function(n){return a.max(n.values,function(n){return n.y})});l=a.min([1.2*l,1]);var g=a.scale.linear().range([i.height-i.margin,i.margin]).domain([0,l]);g.label=e.mapping.y.label;var u=a.scale.linear().range([i.height-i.margin,i.margin]).domain([0,1]),o=function(n){return t(n)-t(0)},m=function(n){return g.range()[0]-g(n)};return{x:t,y:g,fill:r.type(),probability:u,width:o,height:m,axisMargin:20}}},e.xMax=200,e});
define('tp/reports/chart.behaviour',["Underscore","tau/core/class"],function(n,i){var t=i.extend({init:function(n){this.handlers=this.initHandlers(n.handlers||[])},initHandlers:function(n){return n},_handle:function(i,t,e,r){n.each(this.handlers,function(n){n[i]&&n[i].call(t,e,r)})},_subscribe:function(i,t,e){var r=this;return n.each(t,function(n){i=i.on(n,function(i){r._handle(n,this,i,e)})}),i}});return t});
define('tp/reports/cycleTimeDistribution/chart.histogram',["jQuery","Underscore","libs/d3/d3","tp/reports/chart.behaviour"],function(t,e,n,r){return r.extend({init:function(t){this.handlers=this.initHandlers(t.handlers||[])},_join:function(e){return e[0].values.map(function(r,a){return{x:r.x,values:e.map(function(e){return t.extend(e.values[a],{fill:e.key,count:e.values.count})}).filter(function(t){return t.y>0}).sort(function(t,e){return n.descending(t.y,e.y)})}})},data:function(t,e){var r=t.nodes,t=this._join(r),a=n.select(e.placeholder).selectAll("g.day").data(t,function(t){return t.x});a.enter().append("g").attr("class","day"),a.exit().remove(),a.attr("transform",function(t){return"translate("+e.scales.x(t.x)+",0)"}).each(function(){var t=n.select(this);t.select("g")[0][0]||(t.append("g").attr("class","bar"),t.append("g").attr("class","top"))});var s=a.select("g.bar").selectAll("rect").data(function(t){return t.values},function(t){return t.fill});s.enter().append("rect"),s.exit().remove(),s.attr("class",function(t){return e.scales.fill(t.fill)}).transition().attr("y",function(t){return e.scales.y(t.y)}).attr("width",function(t){return e.scales.width(t.dx)-1}).attr("height",function(t){return e.scales.height(t.y)});var i=a.select("g.top").selectAll("line").data(function(t){return t.values},function(t){return t.fill});i.enter().append("line"),i.exit().remove(),i.attr("class",function(t){return e.scales.fill(t.fill)}).transition().attr("y1",function(t){return e.scales.y(t.y)}).attr("y2",function(t){return e.scales.y(t.y)}).attr("x1",.5).attr("x2",e.scales.x(1)-e.scales.x(0)-1),this._subscribe(a,["mousemove","mouseover","mouseout"],e)}})});
define('tp/reports/cycleTimeDistribution/chart.maxValues',["jQuery","Underscore","libs/d3/d3"],function(t,e,n){function r(t){this.contextProvider=t.contextProvider}return r.prototype={data:function(e,r){var a=e.nodes,u=a.map(function(e){var r=n.max(e.values,function(t){return t.length}),a=e.values.filter(function(t){return t.length==r});return t.extend(a[0],{key:e.key,count:e.values.count})});u=n.nest().key(function(t){return t.x}).rollup(function(t){return t.sort(function(t,e){return n.descending(t.y,e.y)})}).entries(u);var o=n.select(r.placeholder).selectAll("text.max-val").data(u,function(t){return t.key});o.enter().append("text").attr("class","max-val"),o.attr("y",function(t){return r.scales.y(t.values[0].y)}),o.exit().remove();var c=o.selectAll("tspan").data(function(t){return t.values});c.enter().append("tspan"),c.exit().remove();var l=this;c.attr("class",function(t){return r.scales.fill(t.key)}).text(function(t){return t.length+" of "+t.count+" "+l.contextProvider.getTerm(t.key,t.all).toLowerCase()}).transition().attr("x",function(t){return r.scales.x(t.x)}).attr("dy",function(t,e){return-5-9*e}).attr("dx",2)}},r});
define('tp/reports/cycleTimeDistribution/chart.probability',["jQuery","Underscore","libs/d3/d3","tp/reports/chart.behaviour"],function(t,n,e){function r(){}return r.prototype={init:function(t){this.handlers=this.initHandlers(t.handlers||[])},_cumulative:function(t){var n=e.layout.stack();return t.map(function(t){return n(t.values.map(function(n){return[{x:n.x,y:n.y,dx:n.dx,fill:t.key}]}))})},_join:function(t){return t[0].map(function(n,e){return{x:n[0].x,values:t.map(function(t){return t[e][0]})}})},data:function(t,n){var r=t.nodes,t=this._join(this._cumulative(r)),a=e.select(n.placeholder).attr("opacity",0).selectAll("g.probability").data(t);a.enter().append("g").attr("class",function(t){return"probability data-x-"+t.x}),a.exit().remove();var i=a.selectAll("path").data(function(t){return t.values},function(t){return t.fill});i.enter().append("path"),i.exit().remove(),i.attr("class",function(t){return n.scales.fill(t.fill)}).transition().attr("d",function(t){return"M"+n.scales.x(t.x)+","+n.scales.probability(t.y0)+"L"+n.scales.x(t.x)+","+n.scales.probability(t.y+t.y0)+"L"+n.scales.x(t.x+t.dx)+","+n.scales.probability(t.y+t.y0)})}},r});
define('tp/reports/cycleTimeDistribution/chart.hover',["jQuery","Underscore","libs/d3/d3","tp/reports/chart.behaviour"],function(e,t,r,n){return n.extend({init:function(e){this.handlers=this.initHandlers(e.handlers||[])},data:function(e,t){var n=e.nodes,e=n[0].values.map(function(e){return{x:e.x,dx:e.dx}}),s=r.select(t.placeholder).selectAll("rect.transparent").data(e),a=t.scales.y.domain()[1];s.enter().append("rect").attr("class","transparent"),s.attr("x",function(e){return t.scales.x(e.x)}).attr("y",t.scales.y.range()[1]).attr("width",function(e){return t.scales.width(e.dx)}).attr("height",t.scales.height(a)),s.exit().remove(),this._subscribe(s,["mousemove","mouseover","mouseout"],t)}})});
define('tp/reports/chart.axis',["libs/d3/d3"],function(t){var a=function(a){function r(){r.d3axis.apply(this.d3axis,arguments),r.transform.apply(r.transform,arguments),r.axis.apply(r.axis,arguments),r.tick.apply(r.tick,arguments),r.label.apply(r.label,arguments),r.additionalAxes.apply(r.additionalAxes,arguments)}var e=10;return r.d3axis=t.svg.axis(),r.transform=function(){},r.axis=function(){},r.tick=function(r){r.selectAll("g").attr("class","axisLabel");var e=r.selectAll(".tick")[0].map(function(a){var r=t.select(a);return{x2:r.attr("x2"),transform:r.attr("transform")}}).concat(r.selectAll("g.axisLabel")[0].map(function(a){var r=t.select(a);return{x2:r.select("line.tick").attr("x2"),transform:r.attr("transform")}}));r.selectAll(".tick").attr("y1",-a).attr("y2",function(){return parseFloat(t.select(this).attr("y2"))-a}),r.selectAll(".smallAxisTick").remove();var n=r.selectAll(".smallAxisTick").data(e.filter(function(t){return t.transform}));n.enter().append("line").attr("x2",function(t){return t.x2}).attr("y2",6).attr("transform",function(t){return t.transform}).attr("class","smallAxisTick")},r.label=function(){},r.scale=function(t){return this.d3axis.scale(t),r},r.additionalAxes=function(){},r.orient=function(n){switch(n.type){case"x-grid":var i=n.margin-n.height;return r.d3axis.orient("bottom").tickSize(i,n.margin-n.height,0).tickPadding(10),r.transform=function(t){t.attr("transform","translate(0,"+(n.height+a)+")")},r.axis=function(r){r.select("path").attr("d",function(){var r=t.select(this).attr("d"),e=/M\D*\d+\D*/.exec(r)[0].length-1,n=parseFloat(r.substr(1,e-1));return"M"+(n-a)+r.substr(e)})},r.label=function(a){var e=t.select(a.selectAll(".axisLabel text")[0][0]);a.selectAll("text.axisLabel").attr("transform","translate("+(r.d3axis.scale().range()[1]+n.margin/4)+", 0)").attr("y",e.attr("y")).attr("dy",e.attr("dy")).text(n.label)},r.additionalAxes=function(t){var e=[{id:"top",value:n.margin-n.height-a},{id:"bottom",value:-a}],i=t.selectAll("line._additionalXAxis").data(e,function(t){return t.id});i.enter().append("line").attr("class","additionalAxis _additionalXAxis"),i.attr("x1",r.d3axis.scale().range()[0]).attr("x2",r.d3axis.scale().range()[1]).attr("y1",function(t){return t.value}).attr("y2",function(t){return t.value}),i.exit().remove()},r;case"y-grid":var i=-n.width+n.margin;return r.d3axis.orient("left").tickSize(i,i,0).tickPadding(e),r.transform=function(t){t.attr("transform","translate("+(n.margin-a)+", 0)")},r.axis=function(r){r.select("path").attr("d",function(){var r=t.select(this).attr("d"),e=r.indexOf("V"),n=r.indexOf("H",e),i=parseFloat(r.substr(e+1,n-e-1))+a;return r.substr(0,e+1)+i+r.substr(n)})},r.tick=function(r){r.selectAll("g").attr("class","axisLabel"),r.selectAll(".tick").attr("dx",.5*n.margin).attr("x1",a).attr("x2",function(){return parseFloat(t.select(this).attr("x2"))+a});var e=r.selectAll(".tick")[0].map(function(a){var r=t.select(a);return{y2:r.attr("y2"),transform:r.attr("transform")}}).concat(r.selectAll("g.axisLabel")[0].map(function(a){var r=t.select(a);return{y2:r.select("line.tick").attr("y2"),transform:r.attr("transform")}}));r.selectAll(".smallAxisTick").remove();var i=r.selectAll(".smallAxisTick").data(e.filter(function(t){return t.transform}));i.enter().append("line").attr("y2",function(t){return t.y2}).attr("x2",-6).attr("transform",function(t){return t.transform}).attr("class","smallAxisTick")},r.label=function(t){t.selectAll("text.axisLabel").attr("transform","translate("+-n.margin/2+","+(n.margin-a+e)+")").text(n.label)},r.additionalAxes=function(t){var e=[{id:"right",value:n.width-n.margin+a},{id:"left",value:a}],i=t.selectAll("line._additionalYAxis").data(e,function(t){return t.id});i.enter().append("line").attr("class","additionalAxis _additionalYAxis"),i.attr("x1",function(t){return t.value}).attr("x2",function(t){return t.value}).attr("y1",r.d3axis.scale().range()[0]).attr("y2",r.d3axis.scale().range()[1]),i.exit().remove()},r}},r.tickSubdivide=function(t){return r.d3axis.tickSubdivide(t),r},r.tickFormat=function(t){return r.d3axis.tickFormat(t),r},r};return a});
define('tp/reports/cycleTimeDistribution/chart.axes.format',["tp/reports/chart.format","tp/reports/cycleTimeDistribution/chart.scales"],function(r,t){function n(t){return function(n){return r.precision(t)(100*n)+"%"}}function e(r,t){return function(n){switch(n){case r:return"less than 1 day";case 1:return"1 day";case t:return"more than "+n+" days";default:return n+" days"}}}return{y:n(1),days:e(0,t.xMax)}});
define('tp/reports/cycleTimeDistribution/chart.axes',["libs/d3/d3","tp/reports/chart.axis","tp/reports/cycleTimeDistribution/chart.axes.format"],function(e,a,l){var r=function(l){var r=a(l.scales.axisMargin).scale(l.scales.x).orient({type:"x-grid",height:l.scales.y.range()[0],margin:l.plot.margin,label:l.scales.x.label});e.select(l.placeholder).classed("_x x",!0).call(r)},s=function(r){var s=a(r.scales.axisMargin).scale(r.scales.y).orient({type:"y-grid",width:r.scales.x.range()[1],margin:r.plot.margin,label:r.scales.y.label}).tickSubdivide(1).tickFormat(l.y);e.select(r.placeholder).classed("_y y",!0).call(s)};return{x:{render:r},y:{render:s}}});
define('tp/reports/cycleTimeDistribution/behaviour.hover.bars',["jQuery","libs/d3/d3","tp/reports/cycleTimeDistribution/chart.axes.format"],function(t,e,o){return{create:function(a){var n=t('<div class="tau-chart-tooltip" style="position:absolute"></div>').appendTo(a.placeholder).tauBubble({content:"",className:"tau-chart-tooltip",onPositionConfig:function(t){t.my="left bottom"},onBeforeShow:function(t){function e(){return["<div>"+o.days(n.values[0].x)+"</div>"].concat(n.values.map(function(t){return'<div><span class="'+i.scales.fill(t.fill)+'"><strong>'+o.y(t.y)+"</strong> of all "+a.contextProvider.getTerms(t.fill).names.toLowerCase()+"</span><span> ("+t.length+" of "+t.count+")</span></div>"})).join("")}var n=this.$target.data("d"),i=this.$target.data("context");t.find('[role="content"]').html(e())}});return{mouseover:function(o,a){var i=t(this).offset();i.top+=1,i.left+=a.scales.width(.5),n.data("d",e.select(this).datum()),n.data("context",a),n.offset(i).tauBubble("show")},mouseout:function(){n.data("ui-tauBubble")&&n.tauBubble("hide")}}}}});
define('tp/reports/cycleTimeDistribution/behaviour.hover.probability',["jQuery","libs/d3/d3","tp/reports/cycleTimeDistribution/chart.axes.format"],function(t,e,r){function n(t){return e.event.pageX-t.offset().left}function s(r){return e.event.pageX-t(r).closest("div").offset().left}function a(t){return{render:function(r,n){var s=t.selectAll("path.hover").data([[r,n]]);s.enter().insert("path",":first-child").attr("class","hover"),s.attr("stroke","black").attr("d",e.svg.line())}}}function o(t,e){return{render:function(r,n){var s=t.selectAll("div.hover").data([r]);s.enter().append("div").attr("class","hover tau-chart-tooltip"),s.exit().remove(),s.style("position","absolute").style("left",function(t){return t[0]+"px"}).style("top",function(t){return t[1]+"px"}).attr("class","hover tau-chart-tooltip").html(e(n))}}}function i(t){return function(e){return["<span>probability to complete entities in "+r.days(e.x)+": </span>"].concat(e.values.map(function(e){return'<span class="'+t.scales.fill(e.fill)+'">'+r.y(e.y+e.y0)+" </span>"})).join("")}}return{create:function(){return{mousemove:function(r,l){var c=t(this).closest("div"),u=e.select(c[0]),f=t(this).closest("svg").find(".chart"),v=e.select(f[0]),p=u.selectAll(".probability.data-x-"+r.x),d=s(this),h=[d,l.scales.y.range()[0]],y=[d,l.scales.y.range()[1]-20];a(v).render(h,y),o(u,i(l)).render([n(c),39],p.datum())},mouseout:function(){{var r=t(this).closest("div")[0];e.select(r).selectAll("path.hover, div.hover").remove()}}}}}});
define('tp/reports/cycleTimeDistribution/extension.report',["Underscore","jQuery","tau/components/extensions/component.extension.base","tp/reports/chart.plot","tp/reports/cycleTimeDistribution/chart.scales","tp/reports/cycleTimeDistribution/chart.histogram","tp/reports/cycleTimeDistribution/chart.maxValues","tp/reports/cycleTimeDistribution/chart.probability","tp/reports/cycleTimeDistribution/chart.hover","libs/d3/d3","tp/reports/cycleTimeDistribution/chart.axes","tp/reports/cycleTimeDistribution/behaviour.hover.bars","tp/reports/cycleTimeDistribution/behaviour.hover.probability"],function(e,t,r,n,i,o,a,s,c,l,u,d,p){return r.extend({"bus afterRender + contextProvider.ready + configurator.ready:last":function(e,t,r,l){var h=p.create({placeholder:t.element}),f=d.create({placeholder:t.element,contextProvider:r}),y=new n({scales:new i,placeholder:t.element.find(".tau-chart-plot").get(0),axes:[u.x,u.y],size:l.service("chart.size"),charts:[new a({contextProvider:r}),new s,new c({handlers:[h]}),new o({handlers:[f,h]})]});this.fire("plot.ready",y)},"bus afterRender:last + plot.afterRender":function(e,t){var r=t.element.find(".chart:has(g.probability)"),n=l.select(r[0]);t.element.find(".chart").on("mouseover",function(){n.transition().attr("opacity",1)}),t.element.find(".chart").on("mouseout",function(){n.transition().attr("opacity",0)})},_hist:function(e){var r=l.range(0,Math.min(Math.round(l.max(e,function(e){return e.y}))+1,i.xMax+1)+1),n=l.layout.histogram().bins(r).frequency(!1).value(function(e){return e.y});return l.nest().key(function(e){return e.fill}).rollup(function(e){return t.extend(n(e),{count:e.length})}).entries(e)},"bus plot.ready:last + beforeLoad":function(e,t){t.loading(!0)},"bus plot.ready:last + afterLoad":function(e,t){t.loading(!1)},"bus plot.ready:last + data.ready":function(e,t,r){t.data({nodes:this._hist(r.data)},r.settings),this.fire("plot.afterRender",t)}})});
define('tp/reports/settings/model.settings',["Underscore","tau/core/extension.base"],function(t,e){return e.extend({defaultData:{},"bus beforeInit":function(e,a){var i=a.config.context.configurator;this.fire("configurator.ready",i);var n=i.getRestStorage();n=t.bind(n.data,n,"settings",a.config.storageName),this.fire("storageSettings.ready",n),n().done(t.bind(function(e){e.data&&e.data.userData?this.fire("model.ready",t.defaults(e.data.userData,this.defaultData)):this.fire("model.ready",this.defaultData)},this))},"bus configurator.ready:last > storageSettings.ready:last > formData.changed":function(e,a,i,n){this.saveSettings(i,n),this.getAcid(a).done(t.bind(function(t){this.setSettings(n,t,a)},this))},"bus saveSettings:last + storageSettings.ready:last + saveSetting":function(e,a,i,n){i({scope:"Public",userData:t.extend(a,n)}).done()},getAcid:function(t){var e=$.Deferred();return t.getAppStateStore().get({fields:["acid"],callback:function(t){e.resolve(t.acid)}}),e},saveSettings:function(t,e){this.fire("saveSettings",e)},setSettings:function(){}})});
define('tp/reports/settings/definitionBuilder',["Underscore","tau/models/board.customize.units/board.customize.cards.builderSelector","tau/services/customize/service.customize.card.layout.factory","tau/configurations/definitions/board.definition.factory","tau/models/board.customize.units/const.card.sizes"],function(e,t,n,a,i){var s=function(e){switch(e){case"feature":case"userstory":case"task":case"bug":case"request":return"assignable";case"solution":return;default:return e}},r={relations:function(){return"masterRelations.Select({Master.id as id, Master.name as name,Master.entityType.name as type,RelationType.name as relationType,id as relationId}) as masters,slaveRelations.Select({Slave.id as id,Slave.name as name, Slave.entityType.name as type,RelationType.name as relationType,id as relationId}) as slaves"},data:function(){return"id, name, entityType.name as type"}},l=function(a,i,s,l){var o=e.filter(i,function(e){return"program"!==e.toLowerCase()}),u={get:function(){return $.Deferred().resolve({cells:o,zoomLevel:{board:3}})}},d=new n(s,u),c=new t;d.getCardLayoutsByTypesAndSize(o,l).then(function(t){return e.reduce(t,function(e,t,n){return e.types.push({type:n,data:c.build(n,t)}),e.mapLayouts[n]=t,e},{types:[],mapLayouts:{}})}).done(function(t){a.cells.types=t.types,a.layouts=t.mapLayouts,a.cells.items=e.map(t.types,function(e){return{id:e.type,data:e.data.substring(0,e.data.lastIndexOf("}"))+","+r.data()+","+r.relations()+"}",ordering:null}})}.bind(this))};return{getTypeGroup:s,cell:r,getWithRelations:function(t,n,a){var s=e.map(t.entities,function(e){return e.id}),r={base64:!0,take:100,where:null,definition:{global:{acid:n},x:null,y:null,cells:{items:{},filter:t.useFilter?t.filter:null,types:[]},user:{cardFilter:t.onlyWithRelations?"?(MasterRelations.Count > 0) or (SlaveRelations.Count > 0)":""}}};return l(r.definition,s,a,i.M),{definition:r,layouts:{primary:r.definition.layouts}}},getSecondaryRelations:function(t,n,a){var s=e.map(t,function(e){return e.type}),r={CardsIds:e.pluck(t,"id"),base64:!0,take:t.length,where:null,definition:{global:{acid:n},x:null,y:null,cells:{items:{}}}};return l(r.definition,s,a,i.XS),{definition:r,layouts:{secondary:r.definition.layouts}}},getWithLeadAndCycleTime:function(t,n){return{base64:!0,take:1e3,where:null,definition:{global:{acid:n},x:{id:"entitystate",filter:"?IsFinal is True",ordering:null},cells:{items:e.map(t.entities,function(e){return{id:e.id,data:"{id,name,entityType.name as type,endDate,leadTime,cycleTime}",filter:null,ordering:null}}),filter:t.useFilter?t.filter:null},user:{cardFilter:"?EndDate is not None and ("+t.time.filter+")"}}}}}});
define('tp/reports/settings/templateDataBuilder',["Underscore"],function(e){return{times:function(e){return[{id:"leadTime",name:"Lead Time",label:"Lead Time, days","default":"leadTime"===e.scale,filter:"True"},{id:"cycleTime",name:"Cycle Time",label:"Cycle Time, days","default":"cycleTime"===e.scale,filter:"StartDate is not none"}]},filter:function(e,a){return void 0!==e.filter?e.filter:a},assignables:function(e){var a=[{id:"feature",name:"Feature"},{id:"userstory",name:"User Story"},{id:"task",name:"Task"},{id:"bug",name:"Bug"},{id:"request",name:"Request"}];return this.applyDefaultValues(e,a)},generals:function(e){var a=[{id:"feature",name:"Feature"},{id:"userstory",name:"User Story"},{id:"task",name:"Task"},{id:"bug",name:"Bug"},{id:"request",name:"Request"},{id:"testcase",name:"Test Case"},{id:"testplan",name:"Test Plan"},{id:"testplanrun",name:"Test Plan Run"},{id:"impediment",name:"Impediment"},{id:"team",name:"Team"},{id:"project",name:"Project"},{id:"release",name:"Release"},{id:"iteration",name:"Iteration"},{id:"teamiteration",name:"Team Iteration"},{id:"build",name:"Build"}];return this.applyDefaultValues(e,a)},tp2generals:function(e){var a=[{id:"feature",name:"Feature"},{id:"userstory",name:"User Story"},{id:"task",name:"Task"},{id:"bug",name:"Bug"},{id:"request",name:"Request"},{id:"testcase",name:"Test Case"},{id:"testplan",name:"Test Plan"},{id:"testplanrun",name:"Test Plan Run"},{id:"impediment",name:"Impediment"},{id:"project",name:"Project"},{id:"iteration",name:"Iteration"},{id:"build",name:"Build"}];return this.applyDefaultValues(e,a)},applyDefaultValues:function(a,t){var n="string"==typeof a.entities?JSON.parse(a.entities):a.entities;return e.each(t,function(a){a["default"]=e.contains(n,a.id)}),t}}});
define('tp/reports/cycleTimeDistribution/model.settings',["Underscore","tp/reports/settings/model.settings","tp/reports/settings/definitionBuilder","tp/reports/settings/templateDataBuilder"],function(e,t,i,s){return t.extend({NAME_CHART:"Cycle Time Distribution",DESCRIPTION:["The distribution bars show how many entities were completed within a given cycle time. ","The cumulative line shows how many days will it take to complete a user story or other entity with the desired probability."].join(""),defaultData:{scale:"cycleTime",entities:["userstory","bug"],filter:"?EndDate > Today - 180(days)"},saveSettings:function(t,i){var s={scale:i.time.key,filter:i.filter,useFilter:i.useFilter,entities:JSON.stringify(e.reduce(i.entities,function(e,t){return e.push(t.id),e},[]))};t({scope:"Public",userData:s}).done(),this._super(t,s)},setSettings:function(e,t){function s(e){return function(t){return t[e]}}function n(e,t){return{map:s(e),label:t}}function r(e){return{map:$.noop,label:e}}var a={strategy:"all",parameters:i.getWithLeadAndCycleTime(e,t),mapping:{y:n(e.time.key,"% of all entities"),x:r(e.time.label),fill:n("type")}};this.fire("settings.changed",a)},"bus model.ready":function(t,i){this.fire("dataBind",{times:s.times(i),types:s.assignables(i),isShowSettings:i.isShowSettings,name:this.NAME_CHART,description:this.DESCRIPTION,filter:s.filter(i,"?EndDate > Today - 180(days)"),useFilter:e.isUndefined(i.useFilter)?!0:i.useFilter})}})});
define('tp/reports/model.report',["tp/reports/dataRepository","tau/components/extensions/component.extension.base"],function(t,e){function r(t){return function(e){return e[t]}}function n(t){return function(e){var r={id:e.id,data:e};for(var n in t)r[n]=t[n].map(e);return r}}var i=new t({url:"/slice/v1/matrix/list"});return e.extend({_error:function(t){this.fire("afterLoad"),this.fire("report.error",JSON.parse(t.responseText))},_afterLoad:function(){this.fire("clearError"),this.fire("afterLoad")},_beforeLoad:function(){this.fire("beforeLoad")},"bus settings.changed":function(t,e){function a(t){return t.items[0].dynamic.items.map(r("data")).map(n(e.mapping))}function o(t){var e=!1;if(t.items.length>0){var r=t.items[0].fixed.items;e=r.length>0&&r.filter(function(t){return"cellpaging"==t.type}).length>0}return{hasMore:e}}function s(t,r){u.fire("data.ready",{data:t,metaData:r,settings:e}),u._afterLoad()}function f(t,e,r){i.get(t,function(n){e(t,n,r)},$.proxy(u._error,u),$.proxy(u._error,u))}this._beforeLoad();var u=this,c={page:function(t,e){s(a(e),o(e))},all:function(t,e,r){r=r||[],r=r.concat(a(e)),o(e).hasMore?(t.skip=t.skip||0,t.skip+=t.take,f(t,c.all,r)):s(r,null)}};f(e.parameters,c[e.strategy],null)}})});
define('tp/reports/cycleTimeDistribution/extension.form',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,n,t){return t.extend({whenFilterResolved:function(e){var t=n.Deferred();this.fire("filter.resolve",t),t.then(e)},whenTimeResolved:function(e){var t=n.Deferred();this.fire("time.resolve",t),t.then(e)},unbindSettings:function(){var e=this;e.whenFilterResolved(function(t){e.whenTimeResolved(function(i){e.fire("formData.changed",n.extend({time:i},t))})})},"bus afterRender":function(e,n){var t=n.element;this.fire("$form.ready",t),this.fire("view.dom.ready",t),this.unbindSettings()},"bus filter.form.changed":function(){this.unbindSettings()},"bus time.form.changed":function(){this.unbindSettings()}})});
define('tp/reports/extension.info',["Underscore","tau/components/extensions/component.extension.base"],function(e,t){return t.extend({"bus view.dom.ready":function(t,n){n.find(".i-role-toggle-settings").on("click",e.bind(function(e){$(e.currentTarget).toggleClass("tau-checked");var t=$(e.currentTarget).hasClass("tau-checked");n.find(".i-role-settings").toggleClass("tau-chart-settings_hide",!t),this.fire("saveSetting",{isShowSettings:t})},this)),n.find(".i-role-toggle-legend").tauBubble({className:"tau-"+this.config.className+"-legend",stackName:"legend",onShow:function(){this.$target.addClass("tau-checked")},onHide:function(){this.$target.removeClass("tau-checked")}})}})});
define('tp/reports/chart.template.info',["tau/core/templates-factory"],function(t){var a={name:"chart.template.info",engine:"jqote2",markup:['       <div class="tau-chart-info">','           <div class="tau-chart-info-lcol">','               <div class="tau-chart-info-table">','                   <div class="tau-chart-info-lcell"><span class="tau-chart-info__name"><%=this.name%></span></div>','                   <div class="tau-chart-info-rcell"><span class="tau-chart-info__description"><%=this.description%></span></div>',"               </div>","           </div>",'           <div class="tau-chart-info-rcol"><button class="tau-btn i-role-toggle-legend"  type="button">Legend</button></div>','           <button class="tau-btn tau-options tau-chart-settings-toggle i-role-toggle-settings <%=(this.isShowSettings)?"tau-checked":""%>"  type="button">Chart settings</button>',"       </div>"],dependencies:[]};return t.register(a)});
define('tp/reports/cycleTimeDistribution/component.report',["jQuery","Underscore","tp/reports/settings/type/config","tp/reports/settings/filter/config","tp/reports/settings/time/config","tau/components/component.creator","tp/reports/cycleTimeDistribution/extension.report","tp/reports/cycleTimeDistribution/model.settings","tp/reports/model.report","tp/reports/extension.context","tp/reports/cycleTimeDistribution/extension.form","tp/reports/extension.info","tp/reports/chart.template.info","tau/configurator"],function(t,e,i,s,r,o,n,a,c,p,l,u,d,m){return{create:function(t){var d=['<div class="tau-chart tau-cycle-time-distribution">',"   <div>",'       <%= fn.sub("chart.template.info", this) %> ','       <div class="tau-chart-settings  i-role-settings <%=(this.isShowSettings)?"":"tau-chart-settings_hide"%>">','           <div class="tau-chart-settings-controls">'];d=d.concat(m.getFeaturesService().isEnabled("tp2.application")?['              <div class="tau-section">','                   <%= fn.sub("report.time", [this.times]) %>','                   <%= fn.sub("report.type", [this.types]) %>',"               </div>",'              <div class="tau-section">','                   <%= fn.sub("report.filter", this) %>',"               </div>"]:['               <%= fn.sub("report.time", [this.times]) %>','               <%= fn.sub("report.type", [this.types]) %>','               <%= fn.sub("report.filter", this) %>']),d=d.concat(["           </div>","       </div>",'       <div class="tau-chart-plot">','           <div class="empty invisible">','               <div class="empty-text">','                   <div class="first-line">Not enough data to build this beautiful chart</div>','                   <div class="second-line">You need to have at least some of the work items completed</div>','                   <div class="second-line">Also, check if your filter is correct, and make sure that you\'ve<br /> actually selected some work item(s) in chart settings</div>',"               </div>","           </div>","           <svg>","          </svg>","      </div>","   </div>","</div>"]);var v={extensions:e.flatten([t.extensions||[],i.extensions,s.extensions,r.extensions,[n,p,l,u,c,a]],!1),template:{engine:"jqote2",name:"reports-template",markup:d}};return t["queue.bus"]=!0,t.storageName="timeDistributionChart",t.className="cycle-time-distribution",o.create(v,t)}}});
define('tp/reports/processControl/chart.scatterplot',["jQuery","Underscore","libs/d3/d3","tp/reports/chart.behaviour"],function(e,t,r,s){var n=function(e,t,s,n){return function(c){var a=r.svg.line().x(function(e){return e[0]}).y(function(e){return e[1]});c.attr("d",a([[s[0],t],[e,t],[e,n[0]]])).attr("fill","none")}},c={mouseover:function(e,t){r.select(this).classed("hover",!0),r.select(t.placeholder).insert("path",":first-child").classed("highlighter",!0).classed(t.scales.stroke(e.stroke),!0).call(n(t.scales.x(e.x),t.scales.y(e.y),[t.scales.x.range()[0]-t.scales.axisMargin,t.scales.x.range()[1]],[t.scales.y.range()[0]+t.scales.axisMargin,t.scales.y.range()[1]]))},mouseout:function(e,t){r.select(this).classed("hover",!1),r.select(t.placeholder).selectAll("path.highlighter").remove()}};return s.extend({initHandlers:function(e){return e.concat(c)},data:function(e,t){r.select(t.placeholder).classed("_scatterPlot scatterPlot",!0);var s=r.select(t.placeholder).selectAll("circle").data(e.nodes,function(e){return e.id});s.enter().append("circle"),s.exit().remove(),s.attr("class",function(e){return t.scales.stroke(e.stroke)}).transition().attr("cx",function(e){return t.scales.x(e.x)}).attr("cy",function(e){return t.scales.y(e.y)}).attr("r",function(e){return e.r}).attr("data-id",function(e){return e.id}).attr("fill","none"),this._subscribe(s,["click","mouseover","mouseout"],t)}})});
define('tp/reports/processControl/chart.axes.format',["libs/d3/d3","tau/models/model.leadCycleTime"],function(t,e){function n(t){return function(e){for(var n=t.length-1,r=t[n];!r[1](e);)r=t[--n];return r[0](e)}}var r=function(t){return[[t.year,function(){return!0}],[t.month,function(t){return t.getMonth()}],[t.date,function(t){return 1!=t.getDate()}],[t.day,function(t){return t.getDay()&&1!=t.getDate()}],[t.time,function(t){return t.getHours()}]]},i=n(r({year:t.time.format("%Y"),month:t.time.format("%b %Y"),date:t.time.format("%b %e %Y"),day:t.time.format("%b %e %Y"),time:t.time.format("%b %e %Y")})),m=n(r({year:t.time.format("%Y"),month:t.time.format("%b"),date:t.time.format("%b %e"),day:t.time.format("%a %e"),time:t.time.format("%I %p")})),o=new e({});return{time:function(t,e){return 0==e?i(t):m(t)},timerange:function(t,e,n){return function(r){return o.getTimeWithAbbreviation(r,t,e,n)}}}});
define('tp/reports/processControl/chart.axes',["libs/d3/d3","tp/reports/processControl/chart.axes.format","tp/reports/chart.axis"],function(e,a,l){var r=function(r){var s=l(r.scales.axisMargin).scale(r.scales.x).orient({type:"x-grid",height:r.scales.y.range()[0],margin:r.plot.margin,label:r.scales.x.label}).tickSubdivide(3).tickFormat(a.time);e.select(r.placeholder).classed("_x x",!0).call(s)},s=function(a){var r=l(a.scales.axisMargin).scale(a.scales.y).orient({type:"y-grid",width:a.scales.x.range()[1],margin:a.plot.margin,label:a.scales.y.label}).tickSubdivide(1);e.select(a.placeholder).classed("_y y",!0).call(r)};return{x:{render:r},y:{render:s}}});
define('tp/reports/processControl/behaviour.scatterplot.hover',["jQuery","libs/d3/d3","tp/reports/processControl/chart.axes.format"],function(t,o,e){return{create:function(a){var n=t('<div class="tau-chart-tooltip" style="position:absolute"></div>').appendTo(a.placeholder).tauBubble({content:"",className:"tau-chart-tooltip",onPositionConfig:function(t){t.my="left bottom"}});return n.on("show",function(t,a){var n=a.target.data("d");a.popup.find('[role="content"]').html("<div>"+n.data.name+"</div><div>"+e.timerange("d","h","min")(n.y)+", "+o.time.format("%d %b")(n.x)+"</div>")}),{mouseover:function(o){var e=t(this).offset();e.top+=1,e.left+=4,n.data("d",o),n.offset(e).tauBubble("show")},mouseout:function(){n.data("ui-tauBubble")&&n.tauBubble("hide")}}}}});
define('tp/reports/processControl/behaviour.scatterplot.popup',[],function(){return{create:function(n){var t=n.navigator;return{click:function(n){var r=n.data;t.to(r.type+"/"+r.id)}}}}});
define('libs/jstat/jstat',[],function(){return this.j$=this.jStat=function(n){function t(){return new t.fn.init(arguments)}var r=Array.prototype.slice,e=Object.prototype.toString,o=function(t,r){var e=t>r?t:r;return n.pow(10,17-~~(n.log(e>0?e:-e)*n.LOG10E))},a=Array.isArray||function(n){return"[object Array]"===e.call(n)},u=function(n){return"[object Function]"===e.call(n)},i=function(n){return"[object Number]"===e.call(n)&&!isNaN(n)},f=function(n){return[].concat.apply([],n)};return t.fn=t.prototype={constructor:t,init:function(n){var r=0;if(a(n[0]))if(a(n[0][0])){for(u(n[1])&&(n[0]=t.map(n[0],n[1]));r<n[0].length;r++)this[r]=n[0][r];this.length=n[0].length}else this[0]=u(n[1])?t.map(n[0],n[1]):n[0],this.length=1;else if(i(n[0]))this[0]=t.seq.apply(null,n),this.length=1;else{if(n[0]instanceof t)return t(n[0].toArray());this[0]=[],this.length=1}return this},length:0,toArray:function(){return this.length>1?r.call(this):r.call(this)[0]},push:[].push,sort:[].sort,splice:[].splice,slice:[].slice},t.fn.init.prototype=t.fn,t.utils={calcRdx:o,isArray:a,isFunction:u,isNumber:i,toVector:f},t.extend=function(n){var e,o=r.call(arguments),a=1;if(1===o.length){for(e in n)t[e]=n[e];return this}for(;a<o.length;a++)for(e in o[a])n[e]=o[a][e];return n},t.extend({rows:function(n){return n.length||1},cols:function(n){return n[0].length||1},dimensions:function(n){return{rows:t.rows(n),cols:t.cols(n)}},row:function(n,t){return n[t]},col:function(n,t){for(var r=new Array(n.length),e=0;e<n.length;e++)r[e]=[n[e][t]];return r},diag:function(n){for(var r=0,e=t.rows(n),o=new Array(e);e>r;r++)o[r]=[n[r][r]];return o},antidiag:function(n){for(var r=t.rows(n)-1,e=new Array(r),o=0;r>=0;r--,o++)e[o]=[n[o][r]];return e},transpose:function(n){var t,r,e,o=[],u=0;for(a(n[0])||(n=[n]),t=n.length,r=n[0].length;r>u;u++)for(o.push(new Array(t)),e=0;t>e;e++)o[u][e]=n[e][u];return 1===o.length?o[0]:o},map:function(n,t,r){var e,o,u,i,f=0;for(a(n[0])||(n=[n]),e=n.length,o=n[0].length,u=r?n:new Array(e);e>f;f++)for(u[f]||(u[f]=new Array(o)),i=0;o>i;i++)u[f][i]=t(n[f][i],f,i);return 1===u.length?u[0]:u},alter:function(n,r){return t.map(n,r,!0)},create:function(n,t,r){var e,o,a=new Array(n);for(u(t)&&(r=t,t=n),e=0;n>e;e++)for(a[e]=new Array(t),o=0;t>o;o++)a[e][o]=r(e,o);return a},zeros:function(n,r){return i(r)||(r=n),t.create(n,r,function(){return 0})},ones:function(n,r){return i(r)||(r=n),t.create(n,r,function(){return 1})},rand:function(r,e){return i(e)||(e=r),t.create(r,e,function(){return n.random()})},identity:function(n,r){return i(r)||(r=n),t.create(n,r,function(n,t){return n===t?1:0})},symmetric:function(n){var t,r=0,e=n.length;if(n.length!==n[0].length)return!1;for(;e>r;r++)for(t=0;e>t;t++)if(n[t][r]!==n[r][t])return!1;return!0},clear:function(n){return t.alter(n,function(){return 0})},seq:function(n,t,r,e){u(e)||(e=!1);for(var a=[],i=o(n,t),f=(t*i-n*i)/((r-1)*i),c=n,s=0;t>=c;s++,c=(n*i+f*i*s)/i)a.push(e?e(c,s):c);return a}}),function(n){for(var r=0;r<n.length;r++)(function(n){t.fn[n]=function(r){var e,o=this;return r?(setTimeout(function(){r.call(o,t.fn[n].call(o))},15),this):(e=t[n](this),a(e)?t(e):e)}})(n[r])}("transpose clear symmetric rows cols dimensions diag antidiag".split(" ")),function(n){for(var r=0;r<n.length;r++)(function(n){t.fn[n]=function(r,e){var o=this;return e?(setTimeout(function(){e.call(o,t.fn[n].call(o,r))},15),this):t(t[n](this,r))}})(n[r])}("row col".split(" ")),function(n){for(var r=0;r<n.length;r++)(function(n){t.fn[n]=function(){return t(t[n].apply(null,arguments))}})(n[r])}("create zeros ones rand identity".split(" ")),t.extend(t.fn,{map:function(n,r){return t(t.map(this,n,r))},alter:function(n){return t.alter(this,n),this}}),t}(Math),function(n,t){!function(t){for(var r=0;r<t.length;r++)(function(t){n[t]=function(n,t,r){return this instanceof arguments.callee?(this._a=n,this._b=t,this._c=r,this):new arguments.callee(n,t,r)},n.fn[t]=function(r,e,o){var a=n[t](r,e,o);return a.data=this,a},n[t].prototype.sample=function(r){var e=this._a,o=this._b,a=this._c;return r?n.alter(r,function(){return n[t].sample(e,o,a)}):n[t].sample(e,o,a)},function(r){for(var e=0;e<r.length;e++)(function(r){n[t].prototype[r]=function(e){var o=this._a,a=this._b,u=this._c;return e||(e=this.data),"number"!=typeof e?n.fn.map.call(e,function(e){return n[t][r](e,o,a,u)}):n[t][r](e,o,a,u)}})(r[e])}("pdf cdf inv".split(" ")),function(r){for(var e=0;e<r.length;e++)(function(r){n[t].prototype[r]=function(){return n[t][r](this._a,this._b,this._c)}})(r[e])}("mean median mode variance".split(" "))})(t[r])}("beta centralF cauchy chisquare exponential gamma invgamma kumaraswamy lognormal normal pareto studentt weibull uniform  binomial negbin hypgeom poisson triangular".split(" ")),n.extend(n.beta,{pdf:function(r,e,o){return r>1||0>r?0:t.pow(r,e-1)*t.pow(1-r,o-1)/n.betafn(e,o)},cdf:function(t,r,e){return t>1||0>t?1*(t>1):n.ibeta(t,r,e)},inv:function(t,r,e){return n.ibetainv(t,r,e)},mean:function(n,t){return n/(n+t)},median:function(){},mode:function(n,r){return n*r/(t.pow(n+r,2)*(n+r+1))},sample:function(t,r){var e=n.randg(t);return e/(e+n.randg(r))},variance:function(n,r){return n*r/(t.pow(n+r,2)*(n+r+1))}}),n.extend(n.centralF,{pdf:function(r,e,o){return r>=0?t.sqrt(t.pow(e*r,e)*t.pow(o,o)/t.pow(e*r+o,e+o))/(r*n.betafn(e/2,o/2)):void 0},cdf:function(t,r,e){return n.ibeta(r*t/(r*t+e),r/2,e/2)},inv:function(t,r,e){return e/(r*(1/n.ibetainv(t,r/2,e/2)-1))},mean:function(n,t){return t>2?t/(t-2):void 0},mode:function(n,t){return n>2?t*(n-2)/(n*(t+2)):void 0},sample:function(t,r){var e=2*n.randg(t/2),o=2*n.randg(r/2);return e/t/(o/r)},variance:function(n,t){return t>4?2*t*t*(n+t-2)/(n*(t-2)*(t-2)*(t-4)):void 0}}),n.extend(n.cauchy,{pdf:function(n,r,e){return e/(t.pow(n-r,2)+t.pow(e,2))/t.PI},cdf:function(n,r,e){return t.atan((n-r)/e)/t.PI+.5},inv:function(n,r,e){return r+e*t.tan(t.PI*(n-.5))},median:function(n){return n},mode:function(n){return n},sample:function(r,e){return n.randn()*t.sqrt(1/(2*n.randg(.5)))*e+r}}),n.extend(n.chisquare,{pdf:function(r,e){return t.exp((e/2-1)*t.log(r)-r/2-e/2*t.log(2)-n.gammaln(e/2))},cdf:function(t,r){return n.gammap(r/2,t/2)},inv:function(t,r){return 2*n.gammapinv(t,.5*r)},mean:function(n){return n},median:function(n){return n*t.pow(1-2/(9*n),3)},mode:function(n){return n-2>0?n-2:0},sample:function(t){return 2*n.randg(t/2)},variance:function(n){return 2*n}}),n.extend(n.exponential,{pdf:function(n,r){return 0>n?0:r*t.exp(-r*n)},cdf:function(n,r){return 0>n?0:1-t.exp(-r*n)},inv:function(n,r){return-t.log(1-n)/r},mean:function(n){return 1/n},median:function(n){return 1/n*t.log(2)},mode:function(){return 0},sample:function(n){return-1/n*t.log(t.random())},variance:function(n){return t.pow(n,-2)}}),n.extend(n.gamma,{pdf:function(r,e,o){return t.exp((e-1)*t.log(r)-r/o-n.gammaln(e)-e*t.log(o))},cdf:function(t,r,e){return n.gammap(r,t/e)},inv:function(t,r,e){return n.gammapinv(t,r)*e},mean:function(n,t){return n*t},mode:function(n,t){return n>1?(n-1)*t:void 0},sample:function(t,r){return n.randg(t)*r},variance:function(n,t){return n*t*t}}),n.extend(n.invgamma,{pdf:function(r,e,o){return t.exp(-(e+1)*t.log(r)-o/r-n.gammaln(e)+e*t.log(o))},cdf:function(t,r,e){return 1-n.gammap(r,e/t)},inv:function(t,r,e){return e/n.gammapinv(1-t,r)},mean:function(n,t){return n>1?t/(n-1):void 0},mode:function(n,t){return t/(n+1)},sample:function(t,r){return r/n.randg(t)},variance:function(n,t){return n>2?t*t/((n-1)*(n-1)*(n-2)):void 0}}),n.extend(n.kumaraswamy,{pdf:function(n,r,e){return t.exp(t.log(r)+t.log(e)+(r-1)*t.log(n)+(e-1)*t.log(1-t.pow(n,r)))},cdf:function(n,r,e){return 1-t.pow(1-t.pow(n,r),e)},mean:function(t,r){return r*n.gammafn(1+1/t)*n.gammafn(r)/n.gammafn(1+1/t+r)},median:function(n,r){return t.pow(1-t.pow(2,-1/r),1/n)},mode:function(n,r){return n>=1&&r>=1&&1!==n&&1!==r?t.pow((n-1)/(n*r-1),1/n):void 0},variance:function(){}}),n.extend(n.lognormal,{pdf:function(n,r,e){return t.exp(-t.log(n)-.5*t.log(2*t.PI)-t.log(e)-t.pow(t.log(n)-r,2)/(2*e*e))},cdf:function(r,e,o){return.5+.5*n.erf((t.log(r)-e)/t.sqrt(2*o*o))},inv:function(r,e,o){return t.exp(-1.4142135623730951*o*n.erfcinv(2*r)+e)},mean:function(n,r){return t.exp(n+r*r/2)},median:function(n){return t.exp(n)},mode:function(n,r){return t.exp(n-r*r)},sample:function(r,e){return t.exp(n.randn()*e+r)},variance:function(n,r){return(t.exp(r*r)-1)*t.exp(2*n+r*r)}}),n.extend(n.normal,{pdf:function(n,r,e){return t.exp(-.5*t.log(2*t.PI)-t.log(e)-t.pow(n-r,2)/(2*e*e))},cdf:function(r,e,o){return.5*(1+n.erf((r-e)/t.sqrt(2*o*o)))},inv:function(t,r,e){return-1.4142135623730951*e*n.erfcinv(2*t)+r},mean:function(n){return n},median:function(n){return n},mode:function(n){return n},sample:function(t,r){return n.randn()*r+t},variance:function(n,t){return t*t}}),n.extend(n.pareto,{pdf:function(n,r,e){return n>r?e*t.pow(r,e)/t.pow(n,e+1):void 0},cdf:function(n,r,e){return 1-t.pow(r/n,e)},mean:function(n,r){return r>1?r*t.pow(n,r)/(r-1):void 0},median:function(n,r){return n*r*t.SQRT2},mode:function(n){return n},variance:function(n,r){return r>2?n*n*r/(t.pow(r-1,2)*(r-2)):void 0}}),n.extend(n.studentt,{pdf:function(r,e){return n.gammafn((e+1)/2)/(t.sqrt(e*t.PI)*n.gammafn(e/2))*t.pow(1+r*r/e,-((e+1)/2))},cdf:function(r,e){var o=e/2;return n.ibeta((r+t.sqrt(r*r+e))/(2*t.sqrt(r*r+e)),o,o)},inv:function(r,e){var o=n.ibetainv(2*t.min(r,1-r),.5*e,.5);return o=t.sqrt(e*(1-o)/o),r>0?o:-o},mean:function(n){return n>1?0:void 0},median:function(){return 0},mode:function(){return 0},sample:function(r){return n.randn()*t.sqrt(r/(2*n.randg(r/2)))},variance:function(n){return n>2?n/(n-2):n>1?1/0:void 0}}),n.extend(n.weibull,{pdf:function(n,r,e){return 0>n?0:e/r*t.pow(n/r,e-1)*t.exp(-t.pow(n/r,e))},cdf:function(n,r,e){return 0>n?0:1-t.exp(-t.pow(n/r,e))},inv:function(n,r,e){return r*t.pow(-t.log(1-n),1/e)},mean:function(t,r){return t*n.gammafn(1+1/r)},median:function(n,r){return n*t.pow(t.log(2),1/r)},mode:function(n,r){return r>1?n*t.pow((r-1)/r,1/r):void 0},sample:function(n,r){return n*t.pow(-t.log(t.random()),1/r)},variance:function(r,e){return r*r*n.gammafn(1+2/e)-t.pow(this.mean(r,e),2)}}),n.extend(n.uniform,{pdf:function(n,t,r){return t>n||n>r?0:1/(r-t)},cdf:function(n,t,r){return t>n?0:r>n?(n-t)/(r-t):1},mean:function(n,t){return.5*(n+t)},median:function(t,r){return n.mean(t,r)},mode:function(){},sample:function(n,r){return n/2+r/2+(r/2-n/2)*(2*t.random()-1)},variance:function(n,r){return t.pow(r-n,2)/12}}),n.extend(n.binomial,{pdf:function(r,e,o){return 0===o||1===o?e*o===r?1:0:n.combination(e,r)*t.pow(o,r)*t.pow(1-o,e-r)},cdf:function(t,r,e){var o=[],a=0;if(0>t)return 0;if(r>t){for(;t>=a;a++)o[a]=n.binomial.pdf(a,r,e);return n.sum(o)}return 1}}),n.extend(n.negbin,{pdf:function(r,e,o){return r!==r|0?!1:0>r?0:n.combination(r+e-1,r)*t.pow(1-o,e)*t.pow(o,r)},cdf:function(t,r,e){var o=0,a=0;if(0>t)return 0;for(;t>=a;a++)o+=n.negbin.pdf(a,r,e);return o}}),n.extend(n.hypgeom,{pdf:function(t,r,e,o){return t!==t|0?!1:0>t?0:n.combination(e,t)*n.combination(r-e,o-t)/n.combination(r,o)},cdf:function(t,r,e,o){var a=0,u=0;if(0>t)return 0;for(;t>=u;u++)a+=n.hypgeom.pdf(u,r,e,o);return a}}),n.extend(n.poisson,{pdf:function(r,e){return t.pow(e,r)*t.exp(-e)/n.factorial(r)},cdf:function(t,r){var e=[],o=0;if(0>t)return 0;for(;t>=o;o++)e.push(n.poisson.pdf(o,r));return n.sum(e)},mean:function(n){return n},variance:function(n){return n},sample:function(n){var r=1,e=0,o=t.exp(-n);do e++,r*=t.random();while(r>o);return e-1}}),n.extend(n.triangular,{pdf:function(n,t,r,e){return t>=r||t>e||e>r?void 0:t>n||n>r?0:e>=n?2*(n-t)/((r-t)*(e-t)):2*(r-n)/((r-t)*(r-e))},cdf:function(n,r,e,o){return r>=e||r>o||o>e?void 0:r>n?0:o>=n?t.pow(n-r,2)/((e-r)*(o-r)):1-t.pow(e-n,2)/((e-r)*(e-o))},mean:function(n,t,r){return(n+t+r)/3},median:function(n,r,e){return(n+r)/2>=e?r-t.sqrt((r-n)*(r-e))/t.sqrt(2):e>(n+r)/2?n+t.sqrt((r-n)*(e-n))/t.sqrt(2):void 0},mode:function(n,t,r){return r},sample:function(n,r,e){var o=t.random();return(e-n)/(r-n)>o?n+t.sqrt(o*(r-n)*(e-n)):r-t.sqrt((1-o)*(r-n)*(r-e))},variance:function(n,t,r){return(n*n+t*t+r*r-n*t-n*r-t*r)/18}})}(this.jStat,Math),function(n,t){var r=Array.prototype.push,e=n.utils.isArray;n.extend({add:function(t,r){return e(r)?(e(r[0])||(r=[r]),n.map(t,function(n,t,e){return n+r[t][e]})):n.map(t,function(n){return n+r})},subtract:function(t,r){return e(r)?(e(r[0])||(r=[r]),n.map(t,function(n,t,e){return n-r[t][e]||0})):n.map(t,function(n){return n-r})},divide:function(t,r){return e(r)?(e(r[0])||(r=[r]),n.multiply(t,n.inv(r))):n.map(t,function(n){return n/r})},multiply:function(t,r){var o,a,u,i,f=t.length,c=t[0].length,s=n.zeros(f,u=e(r)?r[0].length:c),l=0;if(e(r)){for(;u>l;l++)for(o=0;f>o;o++){for(i=0,a=0;c>a;a++)i+=t[o][a]*r[a][l];s[o][l]=i}return 1===f&&1===l?s[0][0]:s}return n.map(t,function(n){return n*r})},dot:function(t,r){e(t[0])||(t=[t]),e(r[0])||(r=[r]);for(var o,a,u=1===t[0].length&&1!==t.length?n.transpose(t):t,i=1===r[0].length&&1!==r.length?n.transpose(r):r,f=[],c=0,s=u.length,l=u[0].length;s>c;c++){for(f[c]=[],o=0,a=0;l>a;a++)o+=u[c][a]*i[c][a];f[c]=o}return 1===f.length?f[0]:f},pow:function(r,e){return n.map(r,function(n){return t.pow(n,e)})},abs:function(r){return n.map(r,function(n){return t.abs(n)})},norm:function(n,r){var o=0,a=0;for(isNaN(r)&&(r=2),e(n[0])&&(n=n[0]);a<n.length;a++)o+=t.pow(t.abs(n[a]),r);return t.pow(o,1/r)},angle:function(r,e){return t.acos(n.dot(r,e)/(n.norm(r)*n.norm(e)))},aug:function(n,t){for(var e=n.slice(),o=0;o<e.length;o++)r.apply(e[o],t[o]);return e},inv:function(t){for(var r,e=t.length,o=t[0].length,a=n.identity(e,o),u=n.gauss_jordan(t,a),i=[],f=0;e>f;f++)for(i[f]=[],r=o-1;r<u[0].length;r++)i[f][r-o]=u[f][r];return i},det:function(n){var t,r=n.length,e=2*r,o=new Array(e),a=r-1,u=e-1,i=a-r+1,f=u,c=0,s=0;if(2===r)return n[0][0]*n[1][1]-n[0][1]*n[1][0];for(;e>c;c++)o[c]=1;for(c=0;r>c;c++){for(t=0;r>t;t++)o[0>i?i+r:i]*=n[c][t],o[r>f?f+r:f]*=n[c][t],i++,f--;i=--a-r+1,f=--u}for(c=0;r>c;c++)s+=o[c];for(;e>c;c++)s-=o[c];return s},gauss_elimination:function(r,e){var o,a,u,i,f=0,c=0,s=r.length,l=r[0].length,m=1,g=0,d=[];for(r=n.aug(r,e),o=r[0].length;s>f;f++){for(a=r[f][f],c=f,i=f+1;l>i;i++)a<t.abs(r[i][f])&&(a=r[i][f],c=i);if(c!=f)for(i=0;o>i;i++)u=r[f][i],r[f][i]=r[c][i],r[c][i]=u;for(c=f+1;s>c;c++)for(m=r[c][f]/r[f][f],i=f;o>i;i++)r[c][i]=r[c][i]-m*r[f][i]}for(f=s-1;f>=0;f--){for(g=0,c=f+1;s-1>=c;c++)g=d[c]*r[f][c];d[f]=(r[f][o-1]-g)/r[f][f]}return d},gauss_jordan:function(r,e){for(var o=n.aug(r,e),a=o.length,u=o[0].length,i=0;a>i;i++){for(var f=i,s=i+1;a>s;s++)t.abs(o[s][i])>t.abs(o[f][i])&&(f=s);var l=o[i];o[i]=o[f],o[f]=l;for(var s=i+1;a>s;s++){c=o[s][i]/o[i][i];for(var m=i;u>m;m++)o[s][m]-=o[i][m]*c}}for(var i=a-1;i>=0;i--){c=o[i][i];for(var s=0;i>s;s++)for(var m=u-1;m>i-1;m--)o[s][m]-=o[i][m]*o[s][i]/c;o[i][i]/=c;for(var m=a;u>m;m++)o[i][m]/=c}return o},lu:function(){},cholesky:function(){},gauss_jacobi:function(r,e,o,a){for(var u,i,f,c,s=0,l=0,m=r.length,g=[],d=[],p=[];m>s;s++)for(g[s]=[],d[s]=[],p[s]=[],l=0;m>l;l++)s>l?(g[s][l]=r[s][l],d[s][l]=p[s][l]=0):l>s?(d[s][l]=r[s][l],g[s][l]=p[s][l]=0):(p[s][l]=r[s][l],g[s][l]=d[s][l]=0);for(f=n.multiply(n.multiply(n.inv(p),n.add(g,d)),-1),i=n.multiply(n.inv(p),e),u=o,c=n.add(n.multiply(f,o),i),s=2;t.abs(n.norm(n.subtract(c,u)))>a;)u=c,c=n.add(n.multiply(f,u),i),s++;return c},gauss_seidel:function(r,e,o,a){for(var u,i,f,c,s,l=0,m=r.length,g=[],d=[],p=[];m>l;l++)for(g[l]=[],d[l]=[],p[l]=[],u=0;m>u;u++)l>u?(g[l][u]=r[l][u],d[l][u]=p[l][u]=0):u>l?(d[l][u]=r[l][u],g[l][u]=p[l][u]=0):(p[l][u]=r[l][u],g[l][u]=d[l][u]=0);for(c=n.multiply(n.multiply(n.inv(n.add(p,g)),d),-1),f=n.multiply(n.inv(n.add(p,g)),e),i=o,s=n.add(n.multiply(c,o),f),l=2;t.abs(n.norm(n.subtract(s,i)))>a;)i=s,s=n.add(n.multiply(c,i),f),l+=1;return s},SOR:function(r,e,o,a,u){for(var i,f,c,s,l,m=0,g=r.length,d=[],p=[],v=[];g>m;m++)for(d[m]=[],p[m]=[],v[m]=[],i=0;g>i;i++)m>i?(d[m][i]=r[m][i],p[m][i]=v[m][i]=0):i>m?(p[m][i]=r[m][i],d[m][i]=v[m][i]=0):(v[m][i]=r[m][i],d[m][i]=p[m][i]=0);for(s=n.multiply(n.inv(n.add(v,n.multiply(d,u))),n.subtract(n.multiply(v,1-u),n.multiply(p,u))),c=n.multiply(n.multiply(n.inv(n.add(v,n.multiply(d,u))),e),u),f=o,l=n.add(n.multiply(s,o),c),m=2;t.abs(n.norm(n.subtract(l,f)))>a;)f=l,l=n.add(n.multiply(s,f),c),m++;return l},householder:function(r){for(var e,o,a,u,i,f=r.length,c=r[0].length,s=0,l=[],m=[];f-1>s;s++){for(e=0,u=s+1;c>u;u++)e+=r[u][s]*r[u][s];for(i=r[s+1][s]>0?-1:1,e=i*t.sqrt(e),o=t.sqrt((e*e-r[s+1][s]*e)/2),l=n.zeros(f,1),l[s+1][0]=(r[s+1][s]-e)/(2*o),a=s+2;f>a;a++)l[a][0]=r[a][s]/(2*o);m=n.subtract(n.identity(f,c),n.multiply(n.multiply(l,n.transpose(l)),2)),r=n.multiply(m,n.multiply(r,m))}return r},QR:function(r,e){for(var o,a,u,i,f,c,s=r.length,l=r[0].length,m=0,g=[],d=[],p=[];s-1>m;m++){for(a=0,o=m+1;l>o;o++)a+=r[o][m]*r[o][m];for(f=r[m+1][m]>0?-1:1,a=f*t.sqrt(a),u=t.sqrt((a*a-r[m+1][m]*a)/2),g=n.zeros(s,1),g[m+1][0]=(r[m+1][m]-a)/(2*u),i=m+2;s>i;i++)g[i][0]=r[i][m]/(2*u);d=n.subtract(n.identity(s,l),n.multiply(n.multiply(g,n.transpose(g)),2)),r=n.multiply(d,r),e=n.multiply(d,e)}for(m=s-1;m>=0;m--){for(c=0,o=m+1;l-1>=o;o++)c=p[o]*r[m][o];p[m]=e[m][0]/r[m][m]}return p},jacobi:function(r){for(var e,o,a,u,i,f,c,s,l=1,m=0,g=r.length,d=n.identity(g,g),p=[];1===l;){for(m++,f=r[0][1],u=0,i=1,o=0;g>o;o++)for(a=0;g>a;a++)o!=a&&f<t.abs(r[o][a])&&(f=t.abs(r[o][a]),u=o,i=a);for(c=r[u][u]===r[i][i]?r[u][i]>0?t.PI/4:-t.PI/4:t.atan(2*r[u][i]/(r[u][u]-r[i][i]))/2,s=n.identity(g,g),s[u][u]=t.cos(c),s[u][i]=-t.sin(c),s[i][u]=t.sin(c),s[i][i]=t.cos(c),d=n.multiply(d,s),e=n.multiply(n.multiply(n.inv(s),r),s),r=e,l=0,o=1;g>o;o++)for(a=1;g>a;a++)o!=a&&t.abs(r[o][a])>.001&&(l=1)}for(o=0;g>o;o++)p.push(r[o][o]);return[d,p]},rungekutta:function(n,t,r,e,o,a){var u,i,f,c,s;if(2===a)for(;r>=e;)u=t*n(e,o),i=t*n(e+t,o+u),f=o+(u+i)/2,o=f,e+=t;if(4===a)for(;r>=e;)u=t*n(e,o),i=t*n(e+t/2,o+u/2),c=t*n(e+t/2,o+i/2),s=t*n(e+t,o+c),f=o+(u+2*i+2*c+s)/6,o=f,e+=t;return o},romberg:function(n,r,e,o){for(var a,u,i,f,c,s=0,l=(e-r)/2,m=[],g=[],d=[];o/2>s;){for(c=n(r),i=r,f=0;e>=i;i+=l,f++)m[f]=i;for(a=m.length,i=1;a-1>i;i++)c+=(i%2!==0?4:2)*n(m[i]);c=l/3*(c+n(e)),d[s]=c,l/=2,s++}for(u=d.length,a=1;1!==u;){for(i=0;u-1>i;i++)g[i]=(t.pow(4,a)*d[i+1]-d[i])/(t.pow(4,a)-1);u=g.length,d=g,g=[],a++}return d},richardson:function(n,r,e,o){function a(n,t){for(var r,e=0,o=n.length;o>e;e++)n[e]===t&&(r=e);return r}for(var u,i,f,c,s,l=(n.length,t.abs(e-n[a(n,e)+1])),m=0,g=[],d=[];o>=l;)u=a(n,e+o),i=a(n,e),g[m]=(r[u]-2*r[i]+r[2*i-u])/(o*o),o/=2,m++;for(c=g.length,f=1;1!=c;){for(s=0;c-1>s;s++)d[s]=(t.pow(4,f)*g[s+1]-g[s])/(t.pow(4,f)-1);c=d.length,g=d,d=[],f++}return g},simpson:function(n,t,r,e){for(var o,a=(r-t)/e,u=n(t),i=[],f=t,c=0,s=1;r>=f;f+=a,c++)i[c]=f;for(o=i.length;o-1>s;s++)u+=(s%2!==0?4:2)*n(i[s]);return a/3*(u+n(r))},hermite:function(n,t,r,e){for(var o,a=n.length,u=0,i=0,f=[],c=[],s=[],l=[];a>i;i++){for(f[i]=1,o=0;a>o;o++)i!=o&&(f[i]*=(e-n[o])/(n[i]-n[o]));for(c[i]=0,o=0;a>o;o++)i!=o&&(c[i]+=1/(n[i]-n[o]));s[i]=(1-2*(e-n[i])*c[i])*f[i]*f[i],l[i]=(e-n[i])*f[i]*f[i],u+=s[i]*t[i]+l[i]*r[i]}return u},lagrange:function(n,t,r){for(var e,o,a=0,u=0,i=n.length;i>u;u++){for(o=t[u],e=0;i>e;e++)u!=e&&(o*=(r-n[e])/(n[u]-n[e]));a+=o}return a},cubic_spline:function(t,r,e){for(var o,a=t.length,u=0,i=[],f=[],c=[],s=[],l=[],m=[],g=[];a-1>u;u++)l[u]=t[u+1]-t[u];for(c[0]=0,u=1;a-1>u;u++)c[u]=3/l[u]*(r[u+1]-r[u])-3/l[u-1]*(r[u]-r[u-1]);for(u=1;a-1>u;u++)i[u]=[],f[u]=[],i[u][u-1]=l[u-1],i[u][u]=2*(l[u-1]+l[u]),i[u][u+1]=l[u],f[u][0]=c[u];for(s=n.multiply(n.inv(i),f),o=0;a-1>o;o++)m[o]=(r[o+1]-r[o])/l[o]-l[o]*(s[o+1][0]+2*s[o][0])/3,g[o]=(s[o+1][0]-s[o][0])/(3*l[o]);for(o=0;a>o&&!(t[o]>e);o++);return o-=1,r[o]+(e-t[o])*m[o]+n.sq(e-t[o])*s[o]+(e-t[o])*n.sq(e-t[o])*g[o]},gauss_quadrature:function(){},PCA:function(t){var r,e,o=t.length,a=t[0].length,u=0,i=[],f=[],c=[],s=[],l=[],m=[],g=[],d=[],p=[],v=[];for(u=0;o>u;u++)i[u]=n.sum(t[u])/a;for(u=0;a>u;u++)for(g[u]=[],r=0;o>r;r++)g[u][r]=t[r][u]-i[r];for(g=n.transpose(g),u=0;o>u;u++)for(d[u]=[],r=0;o>r;r++)d[u][r]=n.dot([g[u]],[g[r]])/(a-1);for(c=n.jacobi(d),p=c[0],f=c[1],v=n.transpose(p),u=0;u<f.length;u++)for(r=u;r<f.length;r++)f[u]<f[r]&&(e=f[u],f[u]=f[r],f[r]=e,s=v[u],v[u]=v[r],v[r]=s);for(m=n.transpose(g),u=0;o>u;u++)for(l[u]=[],r=0;r<m.length;r++)l[u][r]=n.dot([v[u]],[m[r]]);return[t,f,v,l]}}),function(t){for(var r=0;r<t.length;r++)(function(t){n.fn[t]=function(r,e){var o=this;return e?(setTimeout(function(){e.call(o,n.fn[t].call(o,r))},15),this):n(n[t](this,r))}})(t[r])}("add divide multiply subtract dot pow abs norm angle".split(" "))}(this.jStat,Math),jStat.extend({buildxmatrix:function(){for(var n=new Array(arguments.length),t=0;t<arguments.length;t++){var r=[1];n[t]=r.concat(arguments[t])}return jStat(n)},builddxmatrix:function(){for(var n=new Array(arguments[0].length),t=0;t<arguments[0].length;t++){var r=[1];n[t]=r.concat(arguments[0][t])}return jStat(n)},buildjxmatrix:function(n){for(var t=new Array(n.length),r=0;r<n.length;r++)t[r]=n[r];return jStat.builddxmatrix(t)},buildymatrix:function(n){return jStat(n).transpose()},buildjymatrix:function(n){return n.transpose()},matrixmult:function(n,t){if(n.cols()==t.rows()){if(t.rows()>1){for(var r=[],e=0;e<n.rows();e++){r[e]=[];for(var o=0;o<t.cols();o++){for(var a=0,u=0;u<n.cols();u++)a+=n.toArray()[e][u]*t.toArray()[u][o];r[e][o]=a}}return jStat(r)}for(var r=[],e=0;e<n.rows();e++){r[e]=[];for(var o=0;o<t.cols();o++){for(var a=0,u=0;u<n.cols();u++)a+=n.toArray()[e][u]*t.toArray()[o];r[e][o]=a}}return jStat(r)}},regress:function(n,t){var r=jStat.xtranspxinv(n),e=n.transpose(),o=jStat.matrixmult(jStat(r),e);return jStat.matrixmult(o,t)},regresst:function(n,t,r){var e=jStat.regress(n,t),o={};o.anova={};var a=jStat.jMatYBar(n,e);o.yBar=a;var u=t.mean();o.anova.residuals=jStat.residuals(t,a),o.anova.ssr=jStat.ssr(a,u),o.anova.msr=o.anova.ssr/(n[0].length-1),o.anova.sse=jStat.sse(t,a),o.anova.mse=o.anova.sse/(t.length-(n[0].length-1)-1),o.anova.sst=jStat.sst(t,u),o.anova.mst=o.anova.sst/(t.length-1),o.anova.r2=1-o.anova.sse/o.anova.sst,o.anova.r2<0&&(o.anova.r2=0),o.anova.fratio=o.anova.msr/o.anova.mse,o.anova.pvalue=jStat.anovaftest(o.anova.fratio,n[0].length-1,t.length-(n[0].length-1)-1),o.anova.rmse=Math.sqrt(o.anova.mse),o.anova.r2adj=1-o.anova.mse/o.anova.mst,o.anova.r2adj<0&&(o.anova.r2adj=0),o.stats=new Array(n[0].length);for(var i,f,c,s=jStat.xtranspxinv(n),l=0;l<e.length;l++)i=Math.sqrt(o.anova.mse*Math.abs(s[l][l])),f=Math.abs(e[l]/i),c=jStat.ttest(f,t.length-n[0].length-1,r),o.stats[l]=[e[l],i,f,c];return o.regress=e,o},xtranspx:function(n){return jStat.matrixmult(n.transpose(),n)},xtranspxinv:function(n){var t=jStat.matrixmult(n.transpose(),n),r=jStat.inv(t);return r},jMatYBar:function(n,t){var r=jStat.matrixmult(n,t);return new jStat(r)},residuals:function(n,t){return jStat.matrixsubtract(n,t)},ssr:function(n,t){for(var r=0,e=0;e<n.length;e++)r+=Math.pow(n[e]-t,2);return r},sse:function(n,t){for(var r=0,e=0;e<n.length;e++)r+=Math.pow(n[e]-t[e],2);return r},sst:function(n,t){for(var r=0,e=0;e<n.length;e++)r+=Math.pow(n[e]-t,2);return r},matrixsubtract:function(n,t){for(var r=new Array(n.length),e=0;e<n.length;e++){r[e]=new Array(n[e].length);for(var o=0;o<n[e].length;o++)r[e][o]=n[e][o]-t[e][o]}return jStat(r)}}),function(n,t){n.extend({gammaln:function(n){var r,e,o,a=0,u=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],i=1.000000000190015;for(o=(e=r=n)+5.5,o-=(r+.5)*t.log(o);6>a;a++)i+=u[a]/++e;return t.log(2.5066282746310007*i/r)-o},gammafn:function(n){var r,e,o,a,u=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],i=[-30.8402300119739,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],f=!1,c=0,s=0,l=0,m=n;if(0>=m){if(a=m%1+3.6e-16,!a)return 1/0;f=(1&m?-1:1)*t.PI/t.sin(t.PI*a),m=1-m}for(o=m,e=1>m?m++:(m-=c=(0|m)-1)-1,r=0;8>r;++r)l=(l+u[r])*e,s=s*e+i[r];if(a=l/s+1,m>o)a/=o;else if(o>m)for(r=0;c>r;++r)a*=m,m++;return f&&(a=f/a),a},gammap:function(r,e){var o,a=n.gammaln(r),u=r,i=1/r,f=i,c=e+1-r,s=1/1e-30,l=1/c,m=l,g=1,d=-~(8.5*t.log(r>=1?r:1/r)+.4*r+17);if(0>e||0>=r)return 0/0;if(r+1>e){for(;d>=g;g++)i+=f*=e/++u;return i*t.exp(-e+r*t.log(e)-a)}for(;d>=g;g++)o=-g*(g-r),c+=2,l=o*l+c,s=c+o/s,l=1/l,m*=l*s;return 1-m*t.exp(-e+r*t.log(e)-a)},factorialln:function(t){return 0>t?0/0:n.gammaln(t+1)},factorial:function(t){return 0>t?0/0:n.gammafn(t+1)},combination:function(r,e){return r>170||e>170?t.exp(n.combinationln(r,e)):n.factorial(r)/n.factorial(e)/n.factorial(r-e)},combinationln:function(t,r){return n.factorialln(t)-n.factorialln(r)-n.factorialln(t-r)},permutation:function(t,r){return n.factorial(t)/n.factorial(t-r)},betafn:function(r,e){return 0>=r||0>=e?void 0:r+e>170?t.exp(n.betaln(r,e)):n.gammafn(r)*n.gammafn(e)/n.gammafn(r+e)},betaln:function(t,r){return n.gammaln(t)+n.gammaln(r)-n.gammaln(t+r)},betacf:function(n,r,e){var o,a,u,i,f,c,s,l,m,g=1e-30,d=1;for(s=r+e,m=r+1,l=r-1,u=1,i=1-s*n/m,t.abs(i)<g&&(i=g),i=1/i,c=i;100>=d&&(o=2*d,a=d*(e-d)*n/((l+o)*(r+o)),i=1+a*i,t.abs(i)<g&&(i=g),u=1+a/u,t.abs(u)<g&&(u=g),i=1/i,c*=i*u,a=-(r+d)*(s+d)*n/((r+o)*(m+o)),i=1+a*i,t.abs(i)<g&&(i=g),u=1+a/u,t.abs(u)<g&&(u=g),i=1/i,f=i*u,c*=f,!(t.abs(f-1)<3e-7));d++);return c},gammapinv:function(r,e){var o,a,u,i,f,c,s,l=0,m=e-1,g=1e-8,d=n.gammaln(e);if(r>=1)return t.max(100,e+100*t.sqrt(e));if(0>=r)return 0;for(e>1?(c=t.log(m),s=t.exp(m*(c-1)-d),f=.5>r?r:1-r,u=t.sqrt(-2*t.log(f)),o=(2.30753+.27061*u)/(1+u*(.99229+.04481*u))-u,.5>r&&(o=-o),o=t.max(.001,e*t.pow(1-1/(9*e)-o/(3*t.sqrt(e)),3))):(u=1-e*(.253+.12*e),o=u>r?t.pow(r/u,1/e):1-t.log(1-(r-u)/(1-u)));12>l;l++){if(0>=o)return 0;if(a=n.gammap(e,o)-r,u=e>1?s*t.exp(-(o-m)+m*(t.log(o)-c)):t.exp(-o+m*t.log(o)-d),i=a/u,o-=u=i/(1-.5*t.min(1,i*((e-1)/o-1))),0>=o&&(o=.5*(o+u)),t.abs(u)<g*o)break}return o},erf:function(n){var r,e,o,a,u=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17,1.5626441722e-8,-8.5238095915e-8,6.529054439e-9,5.059343495e-9,-9.91364156e-10,-2.27365122e-10,9.6467911e-11,2.394038e-12,-6.886027e-12,8.94487e-13,3.13092e-13,-1.12708e-13,3.81e-16,7.106e-15,-1.523e-15,-9.4e-17,1.21e-16,-2.8e-17],i=u.length-1,f=!1,c=0,s=0;for(0>n&&(n=-n,f=!0),r=2/(2+n),e=4*r-2;i>0;i--)o=c,c=e*c-s+u[i],s=o;return a=r*t.exp(-n*n+.5*(u[0]+e*c)-s),f?a-1:1-a},erfc:function(t){return 1-n.erf(t)},erfcinv:function(r){var e,o,a,u,i=0;if(r>=2)return-100;if(0>=r)return 100;for(u=1>r?r:2-r,a=t.sqrt(-2*t.log(u/2)),e=-.70711*((2.30753+.27061*a)/(1+a*(.99229+.04481*a))-a);2>i;i++)o=n.erfc(e)-u,e+=o/(1.1283791670955126*t.exp(-e*e)-e*o);return 1>r?e:-e},ibetainv:function(r,e,o){var a,u,i,f,c,s,l,m,g,d,p,v=1e-8,h=e-1,b=o-1,w=0;if(0>=r)return 0;if(r>=1)return 1;for(e>=1&&o>=1?(i=.5>r?r:1-r,f=t.sqrt(-2*t.log(i)),l=(2.30753+.27061*f)/(1+f*(.99229+.04481*f))-f,.5>r&&(l=-l),m=(l*l-3)/6,g=2/(1/(2*e-1)+1/(2*o-1)),d=l*t.sqrt(m+g)/g-(1/(2*o-1)-1/(2*e-1))*(m+5/6-2/(3*g)),l=e/(e+o*t.exp(2*d))):(a=t.log(e/(e+o)),u=t.log(o/(e+o)),f=t.exp(e*a)/e,c=t.exp(o*u)/o,d=f+c,l=f/d>r?t.pow(e*d*r,1/e):1-t.pow(o*d*(1-r),1/o)),p=-n.gammaln(e)-n.gammaln(o)+n.gammaln(e+o);10>w;w++){if(0===l||1===l)return l;if(s=n.ibeta(l,e,o)-r,f=t.exp(h*t.log(l)+b*t.log(1-l)+p),c=s/f,l-=f=c/(1-.5*t.min(1,c*(h/l-b/(1-l)))),0>=l&&(l=.5*(l+f)),l>=1&&(l=.5*(l+f+1)),t.abs(f)<v*l&&w>0)break}return l},ibeta:function(r,e,o){var a=0===r||1===r?0:t.exp(n.gammaln(e+o)-n.gammaln(e)-n.gammaln(o)+e*t.log(r)+o*t.log(1-r));return 0>r||r>1?!1:(e+1)/(e+o+2)>r?a*n.betacf(r,e,o)/e:1-a*n.betacf(1-r,o,e)/o},randn:function(r,e){var o,a,u,i,f;if(e||(e=r),r)return n.create(r,e,function(){return n.randn()});do o=t.random(),a=1.7156*(t.random()-.5),u=o-.449871,i=t.abs(a)+.386595,f=u*u+i*(.196*i-.25472*u);while(f>.27597&&(f>.27846||a*a>-4*t.log(o)*o*o));return a/o},randg:function(r,e,o){var a,u,i,f,c,s,l=r;if(o||(o=e),r||(r=1),e)return s=n.zeros(e,o),s.alter(function(){return n.randg(r)}),s;1>r&&(r+=1),a=r-1/3,u=1/t.sqrt(9*a);do{do c=n.randn(),f=1+u*c;while(0>=f);f=f*f*f,i=t.random()}while(i>1-.331*t.pow(c,4)&&t.log(i)>.5*c*c+a*(1-f+t.log(f)));if(r==l)return a*f;do i=t.random();while(0===i);return t.pow(i,1/l)*a*f}}),function(t){for(var r=0;r<t.length;r++)(function(t){n.fn[t]=function(){return n(n.map(this,function(r){return n[t](r)}))}})(t[r])}("gammaln gammafn factorial factorialln".split(" ")),function(t){for(var r=0;r<t.length;r++)(function(t){n.fn[t]=function(){return n(n[t].apply(null,arguments))}})(t[r])}("randn".split(" "))}(this.jStat,Math),function(n,t){var r=[].slice,e=n.utils.isNumber;n.extend({zscore:function(){var t=r.call(arguments);return e(t[1])?(t[0]-t[1])/t[2]:(t[0]-n.mean(t[1]))/n.stdev(t[1],t[2])},ztest:function(){var o=r.call(arguments);if(4===o.length){if(e(o[1])){var a=n.zscore(o[0],o[1],o[2]);return 1===o[3]?n.normal.cdf(-t.abs(a),0,1):2*n.normal.cdf(-t.abs(a),0,1)}var a=o[0];return 1===o[2]?n.normal.cdf(-t.abs(a),0,1):2*n.normal.cdf(-t.abs(a),0,1)}var a=n.zscore(o[0],o[1],o[3]);return 1===o[1]?n.normal.cdf(-t.abs(a),0,1):2*n.normal.cdf(-t.abs(a),0,1)}}),n.extend(n.fn,{zscore:function(n,t){return(n-this.mean())/this.stdev(t)},ztest:function(r,e,o){var a=t.abs(this.zscore(r,o));return 1===e?n.normal.cdf(-a,0,1):2*n.normal.cdf(-a,0,1)}}),n.extend({tscore:function(){var e=r.call(arguments);return 4===e.length?(e[0]-e[1])/(e[2]/t.sqrt(e[3])):(e[0]-n.mean(e[1]))/(n.stdev(e[1],!0)/t.sqrt(e[1].length))},ttest:function(){var o,a=r.call(arguments);return 5===a.length?(o=t.abs(n.tscore(a[0],a[1],a[2],a[3])),1===a[4]?n.studentt.cdf(-o,a[3]-1):2*n.studentt.cdf(-o,a[3]-1)):e(a[1])?(o=t.abs(a[0]),1==a[2]?n.studentt.cdf(-o,a[1]-1):2*n.studentt.cdf(-o,a[1]-1)):(o=t.abs(n.tscore(a[0],a[1])),1==a[2]?n.studentt.cdf(-o,a[1].length-1):2*n.studentt.cdf(-o,a[1].length-1))}}),n.extend(n.fn,{tscore:function(n){return(n-this.mean())/(this.stdev(!0)/t.sqrt(this.cols()))},ttest:function(r,e){return 1===e?1-n.studentt.cdf(t.abs(this.tscore(r)),this.cols()-1):2*n.studentt.cdf(-t.abs(this.tscore(r)),this.cols()-1)}}),n.extend({anovafscore:function(){var e,o,a,u,i,f,c,s,l=r.call(arguments);if(1===l.length){for(i=new Array(l[0].length),c=0;c<l[0].length;c++)i[c]=l[0][c];l=i}if(2===l.length)return n.variance(l[0])/n.variance(l[1]);for(o=new Array,c=0;c<l.length;c++)o=o.concat(l[c]);for(a=n.mean(o),e=0,c=0;c<l.length;c++)e+=l[c].length*t.pow(n.mean(l[c])-a,2);for(e/=l.length-1,f=0,c=0;c<l.length;c++)for(u=n.mean(l[c]),s=0;s<l[c].length;s++)f+=t.pow(l[c][s]-u,2);return f/=o.length-l.length,e/f},anovaftest:function(){var t,o,a,u,i=r.call(arguments);if(e(i[0]))return 1-n.centralF.cdf(i[0],i[1],i[2]);for(anovafscore=n.anovafscore(i),t=i.length-1,a=0,u=0;u<i.length;u++)a+=i[u].length;return o=a-t-1,1-n.centralF.cdf(anovafscore,t,o)},ftest:function(t,r,e){return 1-n.centralF.cdf(t,r,e)}}),n.extend(n.fn,{anovafscore:function(){return n.anovafscore(this.toArray())},anovaftest:function(){var t,r=0;for(t=0;t<this.length;t++)r+=this[t].length;return n.ftest(this.anovafscore(),this.length-1,r-this.length)}}),n.extend({normalci:function(){var e,o=r.call(arguments),a=new Array(2);return e=t.abs(4===o.length?n.normal.inv(o[1]/2,0,1)*o[2]/t.sqrt(o[3]):n.normal.inv(o[1]/2,0,1)*n.stdev(o[2])/t.sqrt(o[2].length)),a[0]=o[0]-e,a[1]=o[0]+e,a},tci:function(){var e,o=r.call(arguments),a=new Array(2);return e=t.abs(4===o.length?n.studentt.inv(o[1]/2,o[3]-1)*o[2]/t.sqrt(o[3]):n.studentt.inv(o[1]/2,o[2].length)*n.stdev(o[2],!0)/t.sqrt(o[2].length)),a[0]=o[0]-e,a[1]=o[0]+e,a},significant:function(n,t){return t>n}}),n.extend(n.fn,{normalci:function(t,r){return n.normalci(t,r,this.toArray())},tci:function(t,r){return n.tci(t,r,this.toArray())}})}(this.jStat,Math),function(n,t){var r=n.utils.isFunction,e=function(n,t){return n-t};n.extend({sum:function(n){for(var t=0,r=n.length;--r>=0;)t+=n[r];return t},sumsqrd:function(n){for(var t=0,r=n.length;--r>=0;)t+=n[r]*n[r];return t},sumsqerr:function(t){for(var r,e=n.mean(t),o=0,a=t.length;--a>=0;)r=t[a]-e,o+=r*r;
return o},product:function(n){for(var t=1,r=n.length;--r>=0;)t*=n[r];return t},min:function(n){for(var t=n[0],r=0;++r<n.length;)n[r]<t&&(t=n[r]);return t},max:function(n){for(var t=n[0],r=0;++r<n.length;)n[r]>t&&(t=n[r]);return t},mean:function(t){return n.sum(t)/t.length},meansqerr:function(t){return n.sumsqerr(t)/t.length},geomean:function(r){return t.pow(n.product(r),1/r.length)},median:function(n){var t=n.length,r=n.slice().sort(e);return 1&t?r[t/2|0]:(r[t/2-1]+r[t/2])/2},cumsum:function(n){var t=n.length,r=new Array(t),e=1;for(r[0]=n[0];t>e;e++)r[e]=r[e-1]+n[e];return r},diff:function(n){var t=[],r=n.length,e=1;for(e=1;r>e;e++)t.push(n[e]-n[e-1]);return t},mode:function(n){for(var t=n.length,r=n.slice().sort(e),o=1,a=0,u=0,i=0,f=[];t>i;i++)r[i]===r[i+1]?o++:(o>a?(f=[r[i]],a=o,u=0):o===a&&(f.push(r[i]),u++),o=1);return 0===u?f[0]:f},range:function(t){return n.max(t)-n.min(t)},variance:function(t,r){return n.sumsqerr(t)/(t.length-(r?1:0))},stdev:function(r,e){return t.sqrt(n.variance(r,e))},meandev:function(r){for(var e=0,o=n.mean(r),a=r.length-1;a>=0;a--)e+=t.abs(r[a]-o);return e/r.length},meddev:function(r){for(var e=0,o=n.median(r),a=r.length-1;a>=0;a--)e+=t.abs(r[a]-o);return e/r.length},coeffvar:function(t){return n.stdev(t)/n.mean(t)},quartiles:function(n){var r=n.length,o=n.slice().sort(e);return[o[t.round(r/4)-1],o[t.round(r/2)-1],o[t.round(3*r/4)-1]]},covariance:function(t,r){for(var e=n.mean(t),o=n.mean(r),a=t.length,u=new Array(a),i=0;a>i;i++)u[i]=(t[i]-e)*(r[i]-o);return n.sum(u)/(a-1)},corrcoeff:function(t,r){return n.covariance(t,r)/n.stdev(t,1)/n.stdev(r,1)}}),function(t){for(var e=0;e<t.length;e++)(function(t){n.fn[t]=function(e,o){var a=[],u=0,i=this;if(r(e)&&(o=e,e=!1),o)return setTimeout(function(){o.call(i,n.fn[t].call(i,e))},15),this;if(this.length>1){for(i=e===!0?this:this.transpose();u<i.length;u++)a[u]=n[t](i[u]);return e===!0?n[t](n.utils.toVector(a)):a}return n[t](this[0],e)}})(t[e])}("sum sumsqrd sumsqerr product min max mean meansqerr geomean median diff mode range variance stdev meandev meddev coeffvar quartiles".split(" ")),n.fn.cumsum=function(t,e){var o=[],a=0,u=this;if(r(t)&&(e=t,t=!1),e)return setTimeout(function(){e.call(u,n.fn.cumsum.call(u,t))},15),this;if(this.length>1){for(u=t===!0?this:this.transpose();a<u.length;a++)o[a]=n.cumsum(u[a]);return o}return n.cumsum(this[0],t)}}(this.jStat,Math),this.jStat});
define('libs/jstat/jstat.extensions',["libs/jstat/jstat"],function(t){t.extend({medsumsqerr:function(n){for(var r,e=t.median(n),i=0,s=n.length;--s>=0;)r=n[s]-e,i+=r*r;return i},medsqerr:function(n){return t.medsumsqerr(n)/n.length}});var n=t.utils.isFunction;return function(r){for(var e=0;e<r.length;e++)(function(r){t.fn[r]=function(e,i){var s=[],u=0,f=this;if(n(e)&&(i=e,e=!1),i)return setTimeout(function(){i.call(f,t.fn[r].call(f,e))},15),this;if(this.length>1){for(f=e===!0?this:this.transpose();u<f.length;u++)s[u]=t[r](f[u]);return e===!0?t[r](t.utils.toVector(s)):s}return t[r](this[0],e)}})(r[e])}("medsumsqerr medsqerr".split(" ")),t});
define('tp/reports/processControl/chart.limits',["libs/jstat/jstat.extensions","libs/d3/d3","Underscore","tp/reports/chart.behaviour","tp/reports/processControl/chart.axes.format"],function(t,e,n,a,r){return a.extend({getData:function(t,e){for(var n=[],a=e.scales.stroke.domain(),r=e.scales.stroke.range(),i=0;i<a.length;i++){var s=this._getEntityDataForStroke(t,a[i]);if(s.length>0){var l=r[i],o=this._getLimitsData(s,l,e);n=n.concat(o)}}return this.adjustLabelsPlacement(n)},_getEntityDataForStroke:function(t,e){return t.filter(function(t){return t.stroke==e}).map(function(t){return t.y})},_getLimitsData:function(e,a,r){var i=t(e),s=i.median(),l=Math.sqrt(i.meansqerr()),o=r.scales.y.range()[1];return n.filter([this.getControlLimitData(s,l,a,r),this.getWarningLimitData(s,l,a,r),this.getMedianData(s,a,r)],function(t){return t.y>o})},getControlLimitData:function(t,e,n,a){var r=t+3*e,i=a.scales.y(r);return 0===e&&(i-=2),{id:n+"control",value:r,text:"Control limit: ","class":"control",entityType:n,description:"Indicates the threshold at which the process is statistically 'unlikely' (3 standard errors from the median).",y:i}},getWarningLimitData:function(t,e,n,a){var r=t+2*e,i=a.scales.y(r);return 0===e&&(i-=1),{id:n+"warning",value:t+2*e,text:"Warning limit: ","class":"warning",entityType:n,description:"Indicates the dangerous threshold. All the items above this line are suspicious (2 standard errors from the median).",y:i}},getMedianData:function(t,e,n){return{id:e+"median",value:t,text:"Median: ","class":"median",entityType:e,description:'Typical lead or cycle time. The "middle" value in the list of all values.',y:n.scales.y(t)}},adjustLabelsPlacement:function(e){var a=18,r=function(t,e,n){return Math.abs(t-e)<=a*n},i=n.chain(e).sortBy(function(t){return t.y}).value();return n.each(i,function(e,i,s){var l=n.filter(s,function(t,n){return r(t.y,e.y,Math.abs(i-n))}),o=l.length,c=t(l.map(function(t){return t.y})).mean();n.each(l,function(t,e){t.y=c+(e-o/2)*a+10})}),i},data:function(t,n){e.select(n.placeholder).classed("limits",!0);var a=this.getData(t.nodes,n),i=e.select(n.placeholder).selectAll("line.limit").data(a,function(t){return t.id});i.enter().append("line"),i.exit().remove(),i.attr("class",function(t){return"limit "+t["class"]+" "+t.entityType}).transition().attr("x1",n.scales.x.range()[0]-n.scales.axisMargin).attr("y1",function(t){return n.scales.y(t.value)}).attr("x2",n.scales.x.range()[1]).attr("y2",function(t){return n.scales.y(t.value)});var s=e.select(n.placeholder).selectAll("text.limit.limitLabel").data(a,function(t){return t.id});s.enter().append("text"),s.exit().remove(),s.attr("class",function(t){return"limit limitLabel "+t.entityType}).transition().text(function(t){return t.text+r.timerange("d","h","min")(t.value)}).attr("x",n.scales.x.range()[1]+n.plot.margin/4).attr("y",function(t){return t.y}).attr("dy",".35em"),this._subscribe(s,["mouseover","mouseout"],n)}})});
define('tp/reports/processControl/behaviour.limits.hover',["jQuery"],function(t){return{create:function(o){var e=t('<div class="tau-chart-tooltip" style="position:absolute"></div>').appendTo(o.placeholder).tauBubble({content:"",className:"tau-chart-tooltip",onPositionConfig:function(t){t.my="left bottom"}});return{mouseover:function(o){var u=t(this).offset();u.left+=10,e.offset(u),e.tauBubble("show"),e.tauBubble("option","content",o.description)},mouseout:function(){e.data("ui-tauBubble")&&e.tauBubble("hide")}}}}});
define('tp/reports/processControl/chart.scales',["libs/d3/d3","tau/utils/utils.date","tp/reports/chart.scales"],function(n,t,a){function r(){}return r.prototype={get:function(r,i,e){function u(){return n.extent(r,function(n){return n.x})}function o(){return[0,n.max(r,function(n){return n.y})]}function c(n,a){return[t.addDays(n[0],-a/2),t.addDays(n[1],a/2)]}function l(t,a){var r=n.max([1.1*t[1]-t[0],a]);return[t[0],t[0]+r]}function s(n,t){return n?t?n+", "+t:n:t}var g=n.time.scale().domain(c(u(),2)).range([e.margin,e.width-e.margin]);g.label=s(i.mapping.x.label,i.mapping.x.units);var m=n.scale.linear().domain(l(o(),2)).range([e.height-e.margin,e.margin]).nice();return m.label=s(i.mapping.y.label,i.mapping.y.units),{x:g,y:m,stroke:a.type(),axisMargin:20}}},r});
define('tp/reports/processControl/extension.report',["Underscore","jQuery","tau/components/extensions/component.extension.base","tp/reports/chart.plot","tp/reports/processControl/chart.scatterplot","tp/reports/processControl/chart.axes","tp/reports/processControl/behaviour.scatterplot.hover","tp/reports/processControl/behaviour.scatterplot.popup","tp/reports/processControl/chart.limits","tp/reports/processControl/behaviour.limits.hover","tp/reports/processControl/chart.scales"],function(e,t,r,o,a,s,n,p,l,c,i){return r.extend({"bus afterRender + configurator.ready:last":function(e,t,r){var d=new o({scales:new i,placeholder:t.element.find(".tau-chart-plot").get(0),axes:[s.x,s.y],size:r.service("chart.size"),charts:[new l({handlers:[c.create({placeholder:t.element})]}),new a({handlers:[n.create({placeholder:t.element}),p.create({navigator:r.service("navigator")})]})]});this.fire("plot.ready",d)},"bus plot.ready:last + data.ready":function(e,t,r){t.data({nodes:r.data},r.settings),this.fire("plot.afterRender",t)},"bus plot.ready:last + beforeLoad":function(e,t){t.loading(!0)},"bus plot.ready:last + afterLoad":function(e,t){t.loading(!1)},"bus data.ready":function(e,t){t.metaData.hasMore&&alert("There are more items to show.\n\nOne can only see up to 1000 items at a time. You might want to narrow down your filter settings.")}})});
define('tp/reports/processControl/model.settings',["Underscore","tp/reports/settings/model.settings","tau/utils/utils.date","tp/reports/settings/definitionBuilder","tp/reports/settings/templateDataBuilder"],function(e,t,i,n,s){return t.extend({NAME_CHART:"Process Сontrol",DESCRIPTION:["Process control chart shows distribution of cycle time of all completed entities (user stories, features, bugs, tasks, requests) for a given time frame."].join(""),defaultData:{scale:"cycleTime",entities:["userstory","bug"],filter:"?EndDate > Today - 180(days)"},saveSettings:function(t,i){var n={scale:i.time.key,filter:i.filter,useFilter:i.useFilter,entities:JSON.stringify(e.reduce(i.entities,function(e,t){return e.push(t.id),e},[]))};t({scope:"Public",userData:n}).done(),this._super(t,n)},setSettings:function(e,t){function s(e,t){return function(i){var n=i[e];return"undefined"==typeof t||"undefined"!=typeof n&&null!=n||(n=t),n}}function r(e,t,i){return{map:s(e,i),label:t}}function a(e,t){return{map:function(t){return s(e)(t)?i.convertToTimezone(s(e)(t))[0]:void 0},label:t}}function o(e){return{map:function(){return e}}}var u={strategy:"page",parameters:n.getWithLeadAndCycleTime(e,t),mapping:{x:a("endDate","End Date"),y:r(e.time.key,e.time.label,0),r:o(4),stroke:r("type","Entity Type")}};this.fire("settings.changed",u)},"bus model.ready":function(t,i){this.fire("dataBind",{times:s.times(i),types:s.assignables(i),isShowSettings:i.isShowSettings,name:this.NAME_CHART,description:this.DESCRIPTION,filter:s.filter(i,"?EndDate > Today - 180(days)"),useFilter:e.isUndefined(i.useFilter)?!0:i.useFilter})}})});
define('tp/reports/processControl/extension.form',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,n,t){return t.extend({whenFilterResolved:function(e){var t=n.Deferred();this.fire("filter.resolve",t),t.then(e)},whenTimeResolved:function(e){var t=n.Deferred();this.fire("time.resolve",t),t.then(e)},unbindSettings:function(){var e=this;e.whenFilterResolved(function(t){e.whenTimeResolved(function(i){e.fire("formData.changed",n.extend({time:i},t))})})},"bus afterRender":function(e,n){var t=n.element;this.fire("$form.ready",t),this.fire("view.dom.ready",t),this.unbindSettings()},"bus filter.form.changed":function(){this.unbindSettings()},"bus time.form.changed":function(){this.unbindSettings()}})});
define('tp/reports/processControl/component.report',["jQuery","Underscore","libs/jquery/jquery.ui","tau/components/component.creator","tp/reports/settings/type/config","tp/reports/settings/filter/config","tp/reports/settings/time/config","tp/reports/processControl/extension.report","tp/reports/processControl/model.settings","tp/reports/model.report","tp/reports/processControl/extension.form","tp/reports/extension.info","tp/reports/chart.template.info","tau/configurator"],function(t,e,s,r,i,o,n,a,c,p,l,u,d,v){return{create:function(t){var s=['<div class="tau-chart i-role-processControlChart">','   <div class="tau-process-control">','       <%= fn.sub("chart.template.info", this) %> ','       <div class="tau-chart-settings i-role-settings <%=(this.isShowSettings)?"":"tau-chart-settings_hide"%>">','           <div class="tau-chart-settings-controls">'];s=s.concat(v.getFeaturesService().isEnabled("tp2.application")?['               <div class="tau-section">','                   <%= fn.sub("report.time", [this.times]) %>','                   <%= fn.sub("report.type", [this.types]) %>',"               </div>",'               <div class="tau-section">','                   <%= fn.sub("report.filter", this) %>',"               </div>"]:['               <%= fn.sub("report.time", [this.times]) %>','               <%= fn.sub("report.type", [this.types]) %>','               <%= fn.sub("report.filter", this) %>']),s=s.concat(["           </div>","       </div>",'       <div class="tau-chart-plot">',"           <svg>","           </svg>",'           <div class="_empty empty invisible">','               <div class="empty-text">','                   <div class="first-line">Not enough data to build this beautiful chart</div>','                   <div class="second-line">You need to have at least some of the work items completed</div>','                   <div class="second-line">Also, check if your filter is correct, and make sure that you\'ve<br /> actually selected some work item(s) in chart settings</div>',"               </div>","           </div>","       </div>","   </div>","</div>"]);var d={extensions:e.flatten([t.extensions||[],i.extensions,o.extensions,n.extensions,[a,l,c,p,u]],!1),template:{engine:"jqote2",name:"reports-template",markup:s}};return t["queue.bus"]=!0,t.storageName="processControlChart",t.className="process-control",r.create(d,t)}}});
define('tp/reports/chart.layout',["libs/d3/d3"],function(n){function r(){}function t(n){return function(r){return r[n]}}function e(n){return n*n}function a(){var r=n.layout.force(),t=r.resume,e={resume:function(){for(t.call(r);!r.tick.call(r););return this}};return n.rebind(r,e,"resume")}return{graph:function(){function i(n){var r=Math.min(1,g[1]/g[0]),e=Math.min(1,g[0]/g[1]),a=h*n.alpha;a&&x.forEach(function(n){n.x+=(g[0]/2-n.x)*a*r,n.y+=(g[1]/2-n.y)*a*e}),l.forEach(function(r){var t=(r.source.r+r.target.r)/2;if(r.source.x>r.target.x-t){var e=1.5*(r.source.x-r.source.x+t)*n.alpha;r.source.x-=e,r.target.x+=e}r.source.y+=n.alpha*(r.target.y-r.source.y)/2,r.target.y+=n.alpha*(r.source.y-r.target.y)/2}),x.filter(t("fixed")).forEach(function(n){n.x=n.px,n.y=n.py})}function u(){}function o(){v.stop(),n.select(this).style("z-index",100)}function c(r){n.select(this).style("z-index",void 0),r.fixed=!0,v.resume()}function s(r){r.px=r.x,r.py=r.y,r.x=u.scales.x.invert(n.event.x),r.y=u.scales.y.invert(n.event.y),y(r)}var f,h=2.5,g=[],l=[],x=[],d=r,y=r,v=a();return u.doLayout=function(){x.forEach(function(n){n.r=Math.sqrt(2*e(n.size[0])),n.charge=-e(n.r*(1+Math.log(n.links.length/10+1)))});var r=n.max(x,function(n){return n.size[0]}),a=n.max(x,function(n){return n.size[1]}),o=n.max(x,function(n){return n.size[1]/n.size[0]});g[0]=Math.min(f,2*Math.sqrt(-n.sum(x,t("charge")))),g[1]=-4*n.sum(x,t("charge"))/g[0]/h;var c=function(){var e=n.extent(x,t("x")),i=n.extent(x,t("y"));u.height=function(){return(i[1]-i[0])*o+2*a},u.scales={x:n.scale.linear().range([r,g[0]-r]).domain(e),y:n.scale.linear().range([a,u.height()-a]).domain(i)},d()};return v.gravity(0).charge(t("charge")).linkDistance(Math.sqrt(2*e(r))).nodes(x).links(l).size(g).on("tick",function(n){i(n)}).on("end",function(){c(),c=d}).start(),u},u.nodes=function(n){return n?(x=n,u):x},u.links=function(n){return n?(l=n,u):l},u.gravity=function(n){return h=n,u},u.width=function(n){return f=n,u},u.end=function(n){return d=n,u},u.dragmove=function(n){return y=n,u},u.drag=n.behavior.drag().on("dragstart.graph",o).on("dragend.graph",c).on("drag.graph",s),u}}});
define('tp/reports/relationsNetwork/chart.network.layout',["libs/d3/d3","Underscore","tp/reports/chart.layout","tau/core/tau"],function(t,n,r,e){var u=function(t){return t*t},i=function(t,n){return u(t.x-n.x)+u(t.y-n.y)},o=n.contains([10,11],e.ieVersion);return{links:function(r){var e=function(t){var n=r.x(t.x),e=r.y(t.y),u=10;return[{x:n-t.size[0]/2,y:e},{x:n+t.size[0]/2,y:e},{x:n,y:e-t.size[1]/2},{x:n,y:e+u+t.size[1]/2}]},u=function(r,u){var o=e(r),c=e(u);return n.flatten(o.map(function(t){return c.map(function(n){return{source:t,target:n}})})).sort(function(n,r){return t.ascending(i(n.source,n.target),i(r.source,r.target))})[0]};return function(){this.each(function(t){t.line=u(t.source,t.target)}).attr("x1",function(t){return t.line.source.x}).attr("y1",function(t){return t.line.source.y}).attr("x2",function(t){return t.line.target.x}).attr("y2",function(t){return t.line.target.y}),o&&this.each(function(){this.parentNode.insertBefore(this,this)})}},nodes:function(t){return function(){this.style("left",function(n){return Math.round(t.x(n.x)-n.size[0]/2)+"px"}).style("top",function(n){return Math.round(t.y(n.y)-n.size[1]/2)+"px"})}}}});
define('tp/reports/relationsNetwork/chart.network',["jQuery","Underscore","libs/d3/d3","tp/reports/chart.layout","tp/reports/relationsNetwork/chart.network.layout","tp/reports/chart.behaviour","tau/core/tau","tau/ui/extensions/board.plus/ui.board.plus.utils"],function(t,e,a,r,n,s,i,l){var c=e.contains([10,11],i.ieVersion);return s.extend({init:function(t){this.handlers=this.initHandlers(t.handlers||[]),this.cardTemplate=t.templateFactory.get("board.plus.default.card.customized")},nodes:function(r,n){var s=e.filter(r.nodes,function(t){return t.cardData}),i=this,l=t(n.placeholder).closest("div")[0];a.select(l).selectAll(".tau-chart-box").style("display","block");var c=a.select(l).selectAll(".tau-chart-box").data(s,function(t){return t.id});return c.enter().append("div"),c.attr("class",function(t){return"tau-chart-box i-trigger-set-focus tau-ui-size-"+n.scales.zoom(t.nodeType)}).html(function(e){return t("<div></div>").append(i.cardTemplate.bind({},{dataItem:{data:e,type:e.type},layout:r.settings.layouts[e.nodeType][e.type.toLowerCase()],configurator:r.settings.configurator})).html()}),c.exit().remove(),c},links:function(t,e){var r=a.select(e.placeholder);r.selectAll("line.link").remove();var n=r.selectAll(".link").data(t);return n.enter().append("line").attr("data-entity-id",function(t){return t.id}).attr("class",function(t){return"link "+e.scales.relationType(t.type)}).attr("marker-end",function(t){return"url(#"+e.scales.relationType(t.type)+")"}),n.exit().remove(),n},addTransparentClickHandler:function(t){var e=a.select(t.placeholder).append("rect").attr("width",t.plot.width-t.plot.margin).attr("class","transparent i-trigger-reset-focus");this._subscribe(e,["click"],t)},resetFocus:function(t){a.select(t.placeholder.parentNode.parentNode.parentNode).classed("tau-chart-focus",!1).selectAll(".tau-chart-focused").classed("tau-chart-focused",!1)},data:function(s,i){function o(){return t(i.placeholder).closest("div")}var d=s.nodes,u=this,h=i.plot.width,p=i.plot.height;this.addTransparentClickHandler(i),this.resetFocus(i);var f=e.chain(d).map(function(t){return t.links}).flatten(!1).unique().value();d.forEach(function(t){var e=t.type?l.getCardSize(t.type.toLowerCase(),i.scales.zoom(t.nodeType)):{width:0,height:0};t.size=[e.width,e.height]},this);var y=this.nodes(s,i),g=this.links(f,i),v=function(t){return t&&!c?function(){y.transition().call(n.nodes(k.scales)),g.transition().call(n.links(k.scales))}:function(){y.call(n.nodes(k.scales)),g.call(n.links(k.scales))}},m=function(){p=Math.max(p,k.height()),o().height(p),a.select(i.placeholder.parentNode).style("height",p+"px"),a.select(i.placeholder).style("height",p+"px"),a.select(i.placeholder).select(".transparent").attr("height",p),d.forEach(function(t){t.fixed="primary"==t.nodeType}),v(!1)(),t(u).trigger("afterRender")},k=r.graph().width(h).links(f).nodes(d).end(function(){m(),m=v(!0)}).dragmove(function(t){function e(t,e,a){return Math.min(Math.max(t,e),a)}var a=e(k.scales.x(t.x),t.size[0]/2,h-t.size[0]/2-12),r=e(k.scales.y(t.y),t.size[1]/2,p-t.size[1]/2);t.x=k.scales.x.invert(a),t.y=k.scales.y.invert(r),v(!1)()});y.call(k.drag),a.select(i.placeholder.parentNode).select("defs").selectAll("marker").data(i.scales.relationType.range()).enter().append("marker").attr("id",String).attr("viewBox","0 -7 14 14").attr("refX",14).attr("markerUnits","userSpaceOnUse").attr("markerWidth",7).attr("markerHeight",7).attr("orient","auto").append("path").attr("class",String).attr("stroke-width","1").attr("d","M0,-7L14,0L0,7"),this._subscribe(y,["click","dblclick"],i),this._subscribe(k.drag,["dragstart.behavior"],i),k.doLayout()}})});
define('tp/reports/relationsNetwork/chart.scales',["libs/d3/d3","tp/reports/chart.scales"],function(e,n){function r(){}return r.prototype={get:function(){var r=e.scale.ordinal().domain(["primary","secondary"]).range(["m","xs"]),a=e.scale.ordinal().domain(["Relation","Blocker","Impediment","Dependency"]).range(["relation","blocker","blocker","dependency"]),o=e.scale.ordinal().domain(["primary","secondary"]).range([[197,84],[105,38]]);return{entityType:n.type(),zoom:r,size:o,relationType:a}}},r});
define('tp/reports/relationsNetwork/behaviour.network.popup',[],function(){return{create:function(n){var t=n.navigator;return{dblclick:function(n){t.to(n.type+"/"+n.id)}}}}});
define('tp/reports/relationsNetwork/behaviour.focus',["libs/d3/d3"],function(t){function e(e){return t.select(e.placeholder.parentNode.parentNode.parentNode)}function c(t,e){return t.push(e),e.links.forEach(function(e){-1==t.indexOf(e)&&t.push(e),-1==t.indexOf(e.source)&&c(t,e.source),-1==t.indexOf(e.target)&&c(t,e.target)}),t}function s(t){return!t.selectAll(".tau-chart-focused").empty()}function n(e){return function(){this.each(function(){t.select(this).classed("tau-chart-focused",e),t.select(this).style("z-index",e?100:void 0)})}}function i(t){t.classed("tau-chart-focus",!1),t.selectAll(".tau-chart-focused").call(n(!1))}function r(t,e){function c(e){return t.selectAll('[data-entity-id="'+e+'"]')}i(t),t.classed("tau-chart-focus",!0),e.forEach(function(t){c(t.id).call(n(!0))})}return{"dragstart.behavior":function(c,n){s(t.select(this))||i(e(n))},click:function(n,u){var a=t.select(t.event.target).attr("class");!a||a.indexOf("tau-id")>-1||(s(t.select(this))?i(e(u)):t.select(this).classed("i-trigger-set-focus")?r(e(u),c([],n)):t.select(this).classed("i-trigger-reset-focus")&&i(e(u)))}}});
define('tp/reports/relationsNetwork/extension.report',["Underscore","jQuery","libs/d3/d3","tau/components/extensions/component.extension.base","tp/reports/chart.plot","tp/reports/relationsNetwork/chart.network","tp/reports/relationsNetwork/chart.scales","tau/ui/templates/board.plus/customized/ui.template.boardplus.default.card.customized","tp/reports/relationsNetwork/chart.network.layout","tp/reports/relationsNetwork/behaviour.network.popup","tp/reports/relationsNetwork/behaviour.focus"],function(e,t,r,o,a,n,s,i,l,d,u){return o.extend({"bus configurator.ready:last + afterRender":function(e,r,o){var i=new n({templateFactory:r.getTemplateFactory(),handlers:[d.create({navigator:r.service("navigator")}),u]}),l=r.service("chart.size"),c=new a({scales:new s,placeholder:o.element.find(".tau-chart-plot").get(0),axes:[],size:{size:function(e){var t=l.size(e);return{width:t.width/.9,height:t.height}}},charts:[i]});t(i).on("afterRender",function(){c.loading(!1)}),t(c).on("nodata",function(){c.loading(!1),o.element.find(".tau-chart-box").hide()}),this.fire("plot.ready",c)},"bus data.ready":function(e,t){t.metaData.hasMore&&alert("There are more items to show.\n\nOne can only see up to 100 items at a time. You might want to narrow down your filter settings.")},"bus plot.ready:last + error":function(e,t){t.loading(!1)},"bus plot.ready:last + beforeLoad":function(e,t){t.loading(!0)},"bus plot.ready:last + nodes.ready":function(e,t,r){t.data(r),this.fire("plot.afterRender",t)}})});
define('tp/reports/relationsNetwork/model.settings',["Underscore","tp/reports/settings/model.settings","tp/reports/settings/definitionBuilder","tp/reports/settings/templateDataBuilder"],function(e,t,i,s){return t.extend({NAME_CHART:"Relations Network",DESCRIPTION:["This network is a visualization of direct and hidden dependency relations between any entities in Targetprocess (e.g. projects, user stories, features, bugs, tasks, etc.)"],defaultData:{entities:JSON.stringify(["userstory"]),filter:"?Iteration is Current",onlyWithRelations:!1,isShowSettings:!0,isShowLegend:!0},saveSettings:function(t,i){var s={filter:i.filter,useFilter:i.useFilter,onlyWithRelations:i.onlyWithRelations,entities:JSON.stringify(e.map(i.entities,function(e){return e.id}))};t({scope:"Public",userData:s}).done(),this._super(t,s)},setSettings:function(e,t,s){var n=i.getWithRelations(e,t,s),r={strategy:"page",parameters:n.definition,layouts:n.layouts,configurator:s};this.fire("settings.changed",r)},"bus configurator.ready:last + model.ready":function(t,i,n){var r=i.getFeaturesService().isEnabled("tp2.application")?s.tp2generals(n):s.generals(n);this.fire("dataBind",{onlyWithRelations:n.onlyWithRelations,types:r,filter:s.filter(n,"?Iteration is Current"),useFilter:e.isUndefined(n.useFilter)?!0:n.useFilter,isShowSettings:n.isShowSettings,name:this.NAME_CHART,description:this.DESCRIPTION})}})});
define('tp/reports/relationsNetwork/extension.form',["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,n,t){return t.extend({whenFilterResolved:function(e){var t=n.Deferred();this.fire("filter.resolve",t),t.then(e)},whenOnlyWithRelationsFilterResolved:function(e){var t=n.Deferred();this.fire("onlyWithRelations.resolve",t),t.then(e)},"bus $form.ready:last + onlyWithRelations.resolve":function(e,n,t){t.resolve(n.find("#onlyWithRelations").is(":checked"))},unbindSettings:function(){var e=this;e.whenFilterResolved(function(t){e.whenOnlyWithRelationsFilterResolved(function(i){e.fire("formData.changed",n.extend(t,{onlyWithRelations:i}))})})},"bus afterRender":function(e,n){var t=this,i=n.element;this.fire("$form.ready",i.find(".i-role-settings")),this.fire("view.dom.ready",i),i.find("#onlyWithRelations").change(function(){t.unbindSettings()}),this.unbindSettings()},"bus filter.form.changed":function(){this.unbindSettings()}})});
define('tp/reports/relationsNetwork/model.report',["Underscore","jQuery","tp/reports/dataRepository","tp/reports/model.report","tp/reports/settings/definitionBuilder"],function(t,n,e,r,i){function a(t){return function(n){return t==n.id}}function u(t){return function(n){return n[t]}}function o(t){return function(n){return n!=t}}function s(t,n,e,r,a){var u=i.getSecondaryRelations(t,n,e);l.get(u.definition,r(u.layouts),a,a)}function d(n){var e=function(t){return function(n){return{id:n.relationId,type:n.relationType,master:t.id,slave:n.id}}},r=function(t){return function(n){return{id:n.relationId,type:n.relationType,master:n.id,slave:t.id}}};return t.chain(n).map(function(t){return[t.data.slaves.map(e(t.data)),t.data.masters.map(r(t.data))]}).flatten(!1).unique(!1,u("id")).value()}function f(n){var e=t.map(n,u("id"));return t.chain(n).map(function(t){return[t.slaves,t.masters]}).flatten(!1).unique(!1,u("id")).filter(function(t){return e.every(o(t.id))}).value()}function c(t,n){return t.map(function(t){return{id:t.id,source:n.filter(a(t.master))[0],target:n.filter(a(t.slave))[0],value:1,type:t.type}}).filter(function(t){return t.source&&t.target})}var l=new e({url:"/slice/v1/matrix/cardsDetails"});return r.extend({"bus data.ready":function(e,r){this._beforeLoad();var i=this,a=t.map(r.data,u("data")),o=f(a),l=r.settings.parameters.definition.global.acid;s(o,l,r.settings.configurator,function(e){return function(u){var o=t.map(a,function(t){return n.extend(t,{nodeType:"primary"})}),s=t.map(u.items,function(t){return n.extend(t.data,{nodeType:"secondary"})}),f=t.union(o,s);f.forEach(function(t){t.links=t.links||[]});var l=d(r.data);c(l,f).forEach(function(t){t.source.links.push(t),t.target.links.push(t)}),r.settings.layouts=n.extend(r.settings.layouts,e),i._afterLoad(),i.fire("nodes.ready",{nodes:f,settings:r.settings})}},t.bind(this._error,this))}})});
define('tp/reports/relationsNetwork/component.report',["jQuery","Underscore","libs/jquery/jquery.ui","tau/components/component.creator","tp/reports/settings/type/config","tp/reports/settings/filter/config","tp/reports/relationsNetwork/extension.report","tp/reports/relationsNetwork/model.settings","tp/reports/relationsNetwork/extension.form","tp/reports/relationsNetwork/model.report","tp/reports/extension.info","tp/reports/chart.template.info"],function(t,e,s,i,r,o,n,a,l,c,p){return{create:function(t){var s={extensions:e.flatten([t.extensions||[],r.extensions,o.extensions,[n,l,a,c,p]],!1),template:{engine:"jqote2",name:"reports-template",markup:['<div class="tau-chart tau-relations-network">',"   <div>",'       <%= fn.sub("chart.template.info", this) %> ','       <div class="tau-chart-settings i-role-settings <%=(this.isShowSettings)?"":"tau-chart-settings_hide"%>">','           <div class="tau-chart-settings-controls">','              <div class="tau-section">','                   <%= fn.sub("report.type", [this.types]) %>',"               </div>",'              <div class="tau-section">','                   <%= fn.sub("report.filter", this) %>','                   <label class="tau-checkbox">                       <input type="checkbox" id="onlyWithRelations" <%= this.onlyWithRelations ? "checked" : "" %>>                       <i></i>                       <span class="tau-checkbox-label">Only with relations</span>                   </label>',"               </div>","           </div>","       </div>",'       <div class="tau-chart-plot">','           <div class="empty invisible">','               <div class="empty-text">','                   <div class="first-line">Not enough data to build this beautiful chart</div>','                   <div class="second-line">Check if your filter is correct, and make sure that you\'ve actually selected some work item(s) in the bar above</div>',"               </div>","           </div>","           <svg>","          </svg>","      </div>","   </div>","</div>"]}};return t["queue.bus"]=!0,t.storageName="relationsNetworkChart",t.className="relations-network",i.create(s,t)}}});
require([],function(){window.console&&(window.console.dump=function(n){return window.console.log(n),n},window.console.table=window.console.table||function(n){function o(n,o){return 1>o?"":new Array(o+1).join(n)}function e(n,e){n=""+n;var i=o(" ",e-n.length);return n+i}var i,t,r,w,l={};for(i=0;i<n.length;i++){r=n[i];for(t in r)r.hasOwnProperty(t)&&(w=l[t]||{name:t,width:0},w.width=Math.max(w.width,(""+r[t]).length),l[t]=w)}for(i=0;i<n.length;i++){r=n[i];var a=[];for(t in l)w=l[t],a.push(e(r[w.name],w.width));window.console.log(a.join(" "))}})});
define("libs/debug.extensions", function(){});

require(["tracking/tauspy","tau/components/component.additionalInfo","tau/components/component.application.generic","tau/components/component.application","tau/components/component.assignedEffort","tau/components/component.assignments","tau/components/component.assignmentsList","tau/components/component.attachments","tau/components/component.attachmentsPreview","tau/components/component.auditHistory","tau/components/component.avatar.editor","tau/components/component.avatar","tau/components/component.base.new.list","tau/components/component.board.add","tau/components/component.board.cell.quick.add","tau/components/component.board.clear.sample.data","tau/components/component.board.clipboard","tau/components/component.board.clone","tau/components/component.board.collapser.aside","tau/components/component.board.container","tau/components/component.board.context.output","tau/components/component.board.context.selector","tau/components/component.board.csv","tau/components/component.board.editor.access","tau/components/component.board.editor.container","tau/components/component.board.editor.customize.board","tau/components/component.board.editor.customize.editor","tau/components/component.board.editor.customize.editor.list","tau/components/component.board.editor.customize","tau/components/component.board.editor.customize.library.base","tau/components/component.board.editor.customize.library.board","tau/components/component.board.editor.customize.library.list","tau/components/component.board.editor.customize.list","tau/components/component.board.editor.customize.sizes","tau/components/component.board.editor.customize.types","tau/components/component.board.editor.encoding","tau/components/component.board.editor","tau/components/component.board.editor.prioritization","tau/components/component.board.editor.remember.context","tau/components/component.board.editor.remember.context.output","tau/components/component.board.editor.timeline","tau/components/component.board.entityViewer","tau/components/component.board.flowHelp","tau/components/component.board.flowHelp.popup","tau/components/component.board.general.quick.add","tau/components/component.board.limits","tau/components/component.board.main.menu.item.help","tau/components/component.board.main.menu.item.social-share","tau/components/component.board.main.menu","tau/components/component.board.menu","tau/components/component.board.new.list","tau/components/component.board.overview","tau/components/component.board.owner","tau/components/component.board.owner.list","tau/components/component.board.paging","tau/components/component.board.plus.base","tau/components/component.board.plus.container","tau/components/component.board.plus.fake-list","tau/components/component.board.plus","tau/components/component.board.plus.list","tau/components/component.board.plus.timeline","tau/components/component.board.remove","tau/components/component.board.selector","tau/components/component.board.startScreen","tau/components/component.board.system-info","tau/components/component.board.templates.editor","tau/components/component.board.templates.selector","tau/components/component.board.toolbar","tau/components/component.board.tools.container","tau/components/component.board.user-help","tau/components/component.breadcrumbs","tau/components/component.bubble.container","tau/components/component.button","tau/components/component.buttonGroup","tau/components/component.choice.entityState","tau/components/component.choice","tau/components/component.collapsible","tau/components/component.collapsibleHeader","tau/components/component.comment.add","tau/components/component.comment","tau/components/component.commentList","tau/components/component.comments","tau/components/component.container","tau/components/component.container.with-shared-events","tau/components/component.creator","tau/components/component.current-user","tau/components/component.customField.checkbox","tau/components/component.customField.date","tau/components/component.customField.dropdown","tau/components/component.customField.dropdown.list","tau/components/component.customField.entity","tau/components/component.customField.multipleEntities.container","tau/components/component.customField.multipleEntities","tau/components/component.customField.multiselect","tau/components/component.customField.multiselect.list","tau/components/component.customField.number","tau/components/component.customField.richtext","tau/components/component.customField.templatedurl","tau/components/component.customField.text","tau/components/component.customField.url.editor","tau/components/component.customField.url","tau/components/component.description","tau/components/component.diagnostics.globalListeners","tau/components/component.diagnostics","tau/components/component.diagnostics.store","tau/components/component.duplicateBugList","tau/components/component.duplicateBugListPanel","tau/components/component.editor.requester","tau/components/component.editor.team-member","tau/components/component.effort","tau/components/component.entity.menuTrigger","tau/components/component.entity.quickAdd","tau/components/component.entity.quickAddTrigger","tau/components/component.factory","tau/components/component.feature.assignmentList","tau/components/component.feature.totalEffort","tau/components/component.feedback","tau/components/component.finder.entity","tau/components/component.finder.project.byTeam","tau/components/component.finder.project.byUser","tau/components/component.finder.requesters","tau/components/component.finder.team.byProject","tau/components/component.finder.team.byUser","tau/components/component.finish-iteration","tau/components/component.global.context.control","tau/components/component.implementationHistory","tau/components/component.inviter","tau/components/component.iteration.canBeFinished","tau/components/component.iteration.progressBar","tau/components/component.label.duplicateBugCount","tau/components/component.label","tau/components/component.label.relationCount","tau/components/component.leadCycleTime","tau/components/component.list.baseInfo","tau/components/component.list.creator","tau/components/component.list.editable","tau/components/component.list","tau/components/component.live-chat","tau/components/component.master.board","tau/components/component.master.empty","tau/components/component.menu.actions","tau/components/component.menu.actions.testplanrun","tau/components/component.menu.testPlanRun","tau/components/component.page.base","tau/components/component.page.board","tau/components/component.page.entity","tau/components/component.page.error","tau/components/component.page.finish-iteration","tau/components/component.page.reports","tau/components/component.page.search","tau/components/component.pluginsList","tau/components/component.print.cards","tau/components/component.print","tau/components/component.progressBar","tau/components/component.progressBar.small","tau/components/component.project.formAdd","tau/components/component.property.abbreviation","tau/components/component.property.assignable","tau/components/component.property.bool","tau/components/component.property.build","tau/components/component.property.build.testPlanRun","tau/components/component.property.buildDate","tau/components/component.property.color","tau/components/component.property.company","tau/components/component.property.completeDate","tau/components/component.property.createDate","tau/components/component.property.date","tau/components/component.property.effort","tau/components/component.property.email","tau/components/component.property.endDate.list","tau/components/component.property.endDate.project","tau/components/component.property.endDate.projectMember","tau/components/component.property.entityState","tau/components/component.property.failureComment","tau/components/component.property.feature","tau/components/component.property.icon","tau/components/component.property.impedimentDate","tau/components/component.property.initialEstimate","tau/components/component.property.isActive","tau/components/component.property.isPrivate","tau/components/component.property.isProduct","tau/components/component.property.iteration","tau/components/component.property","tau/components/component.property.lastFailureComment","tau/components/component.property.lastRunDate","tau/components/component.property.lastRunDate.list","tau/components/component.property.lastStatus","tau/components/component.property.owner","tau/components/component.property.owner.project","tau/components/component.property.owner.request","tau/components/component.property.password","tau/components/component.property.plannedEndDate","tau/components/component.property.plannedStartDate","tau/components/component.property.priority","tau/components/component.property.process","tau/components/component.property.program","tau/components/component.property.project","tau/components/component.property.relationType","tau/components/component.property.release","tau/components/component.property.requestSource","tau/components/component.property.requestType","tau/components/component.property.responsible","tau/components/component.property.richtext","tau/components/component.property.role","tau/components/component.property.role.modern","tau/components/component.property.runDate","tau/components/component.property.severity","tau/components/component.property.startDate","tau/components/component.property.startDate.project","tau/components/component.property.startDate.projectMember","tau/components/component.property.status.testCaseRun","tau/components/component.property.team","tau/components/component.property.teamIteration","tau/components/component.property.testCase","tau/components/component.property.testPlan","tau/components/component.property.testPlanRun","tau/components/component.property.text","tau/components/component.property.time","tau/components/component.property.timeInterval","tau/components/component.property.user","tau/components/component.property.userStory","tau/components/component.property.velocity","tau/components/component.quick.add","tau/components/component.redirect","tau/components/component.relations.add","tau/components/component.relations.add.trigger","tau/components/component.relations.connection","tau/components/component.relations.container","tau/components/component.relations.filter","tau/components/component.release.assignedEffort","tau/components/component.release.progressBar","tau/components/component.releaseNotes","tau/components/component.reports","tau/components/component.requestList","tau/components/component.revisionList","tau/components/component.search.filter","tau/components/component.search","tau/components/component.shareLink","tau/components/component.steps","tau/components/component.success","tau/components/component.support-block","tau/components/component.tabs","tau/components/component.tabsHeader","tau/components/component.tags","tau/components/component.tagsCloud","tau/components/component.tagsEditor","tau/components/component.tagsInline","tau/components/component.team-members-editor","tau/components/component.team.formAdd","tau/components/component.teamiteration.progressBar","tau/components/component.testCaseList","tau/components/component.testcaserun.result.editor","tau/components/component.testCasesRunResults","tau/components/component.time-sheet","tau/components/component.timeList","tau/components/component.title","tau/components/component.tp-buy","tau/components/component.tp-settings","tau/components/component.user-voice","tau/components/component.user.settings","tau/components/component.userList","tau/components/component.video-intro.popup","tau/components/component.view.new.list","tp/reports/burndown/component.report","tp/reports/cycleTimeDistribution/component.report","tp/reports/processControl/component.report","tp/reports/relationsNetwork/component.report","tau/components/extensions/component.creator.extension","libs/debug.extensions"],function(){return{}});
define("all.components", function(){});

