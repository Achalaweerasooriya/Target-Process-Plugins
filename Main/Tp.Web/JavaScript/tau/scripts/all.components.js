/*!!
 * JS Signals <http://millermedeiros.github.com/js-signals/>
 * Released under the MIT license <http://www.opensource.org/licenses/mit-license.php>
 * @author Miller Medeiros <http://millermedeiros.com/>
 * @version 0.6
 * @build 174 (04/09/2011 05:27 PM)
 */
/*!!
 * Crossroads - JavaScript Routes
 * Released under the MIT license <http://www.opensource.org/licenses/mit-license.php>
 * @author Miller Medeiros
 * @version 0.4
 * @build 31 (06/07/2011 12:15 AM)
 * ----------------------------------
 *
 * !!! WARNING: Patch for getParamIds method is added. Take into account when update to new version.
 *
 * ----------------------------------
 */
/**
 * @version: 1.0 Alpha-1
 * @author: Coolite Inc. http://www.coolite.com/
 * @date: 2008-05-13
 * @copyright: Copyright (c) 2006-2008, Coolite Inc. (http://www.coolite.com/). All rights reserved.
 * @license: Licensed under The MIT License. See license.txt and http://www.datejs.com/license/. 
 * @website: http://www.datejs.com/
 */
define("tau/core/class",[],function(){var a=!1,b=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,c=function(){},d=0,e=function(a,b){return b};return c.extend=function(c){function j(){!a&&this.init&&(this.__objectId=d++,this.init.apply(this,arguments))}var f=this.prototype;a=!0;var g=new this;a=!1,g.__profiler=g.__profiler||e;for(var h in c){if(h==="__profiler")continue;var i=typeof c[h]=="function"&&typeof f[h]=="function"&&b.test(c[h])?function(a,b){return function(){var c=this._super;this._super=f[a];var d=b.apply(this,arguments);return this._super=c,d}}(h,c[h]):c[h];g[h]=g.__profiler(h,i)}return j.prototype=g,j.constructor=j,j.extend=arguments.callee,j},c}),define("tau/core/event",["Underscore"],function(_){var a=function(){};a.implementOn=function(b){var c=a.prototype;for(var d in c)b[d]==undefined&&(b[d]=c[d]);return b};var b=function(a){var b={},c=a.split(":");return b.name=c[0],c.length>1&&(b.rule=c[1]),b};return a.signUpOnEvents=function(a,c,d,e,f){var g={},h=[],i={},j=function(a){g[a.name]=a;if(_(g).keys().length===h.length){var b={};for(var e=0,f=h.length;e<f;e++){var j=i[h[e]];b[j.name]=g[j.name];if(j.rule==="last")continue;delete g[j.name]}c[d].call(c,b)}};for(var k=0,l=a.length;k<l;k++){var m=b(a[k]),n=m.name;i[n]=m,h.push(n),e.on(n,j,c,null,f)}},a.subscribeOn=function(b){var c=_(b);_.each(c.keys(),function(c){var d=b[c];if(!d)return;if(_.isFunction(d.on)){var e=_(b).functionsExt();for(var f=0,g=e.length;f<g;f++){var h=e[f],i=h.split(" "),j=i[1],k=i[0],l;if(i.length<2)continue;i.length>2&&!isNaN(i[2])&&(l=i[2]);var m=j.split("+");k==c&&(m.length>1?a.signUpOnEvents(m,b,h,d,l):d.on(j,b[h],b,null,l))}}})},a.unSubscribe=function(a){var b=_(a);_.each(b.keys(),function(b){var c=a[b];c&&_.isFunction(c.removeAllListeners)&&c.removeAllListeners(a)})},a.prototype=function(){var a=function(a){var _=a.getPrivate&&a.getPrivate()||a._||(a._={});return _.events||(_.events={})},b=function(a){this.name=a,this.listeners=[]};return b.prototype={getListenerIndex:function(a,b){for(var c=0,d=this.listeners;c<d.length;c++)if(d[c].fn==a&&(d[c].scopeObj===b||!d[c].scopeObj&&(arguments.length==1||!b)))return c;return-1}},{on:function(c,d,e,f,g){if(_.isArray(c)){var h=arguments.callee,i=this;_.each(c,function(a){h.call(i,a,d,e,f,g)});return}var j=a(this),k=j[c]||(j[c]=new b(c));if(k.getListenerIndex(d,e)<0){var l=k.listeners;e||(e=this),isNaN(g)&&(g=10);var m=this,n=function(a,b,g,h){var i={name:c,sender:this,caller:a,data:b,listenerData:f,stop:g,cancel:h,removeListener:function(){m.removeListener(c,d,e)}};return d.call(e,i),i.data};n.fn=d,n.scopeObj=e,n.priority=g;for(var o=l.length-1;o>=0;o--)if(l[o].priority<=g){l.splice(o+1,0,n);return}l.unshift(n)}return this},fire:function(){var b=!1,c=function(){b=!0},d=!1,e=function(){d=!0};return function(f,g,h){var i=a(this)[f],j=b,k=d;b=d=!1;if(i){var l=i.listeners;if(l.length){l=l.slice(0);for(var m=0;m<l.length;m++){var n=l[m].call(this,h,g,c,e);typeof n!="undefined"&&(g=n);if(b||d)break}}}var o=d||(typeof g=="undefined"?!1:g);return b=j,d=k,o}}(),fireOnce:function(b,c,d){var e=this.fire(b,c,d);return delete a(this)[b],e},removeListener:function(b,c,d){var e=a(this)[b];if(e){var f=e.getListenerIndex(c,d);f>=0&&e.listeners.splice(f,1)}},removeAllListeners:function(b){var c=a(this);for(var d in c)if(c[d].listeners)if(!b)delete c[d].listeners,delete c[d];else{var e=c[d].listeners,f=[];for(var g=0;g<e.length;g++)e[g].scopeObj!=b&&f.push(e[g]);c[d].listeners=f}},hasListeners:function(b){var c=a(this)[b];return c&&c.listeners.length>0},getListeners:function(){var b=a(this),c=[];for(var d in b){var e=b[d].listeners;if(e&&e.length>0){var f=[];for(var g=0;g<e.length;g++){var h=e[g],i={name:"unknown",item:h};h.scopeObj&&h.scopeObj.bus&&h.scopeObj.bus.name?i.name=h.scopeObj.bus.name:h.scopeObj&&h.scopeObj.name&&(i.name=h.scopeObj.name),f.push(i)}c.push({name:d,items:e,count:e.length,listeners:f})}}return c},getListenersCount:function(){var b=a(this),c=0;for(var d in b)b[d].listeners&&(c+=b[d].listeners.length);return c}}}(),a}),define("tau/core/profile.methods",[],function(){var a=0,b=function(b,c){return typeof c!="function"?c:function(){var d=this,e=(d.name||d.__objectId)+"/"+b;++a;var f=(new Array(a)).join("    ");console.log(f,e);var g=+(new Date),h=c.apply(d,arguments),i=+(new Date);return console.log(f,i-g),--a,h}},c=1,d=[],e=function(a,b){return typeof b!="function"?b:function(){var e=this,f=(e.name||e.__objectId)+"/"+a,g={name:f,level:c};d.push(g),++c;var h=+(new Date),i=b.apply(e,arguments),j=+(new Date);return--c,g.value=j-h,i}},f=function(){var a={name:"root",stack:[]},b=[a];for(var c=0;c<d.length;c++){var e=d[c],f=e.level,g={name:e.name,value:e.value,stack:[]};b[f-1].stack.push(g),b[f]=g}var h=0;for(var i=0;i<a.stack.length;i++)h+=a.stack[i].value;return a.value=h,{tree:a,plain:d}};return{console:b,accumulate:{method:e,result:f}}}),define("tau/core/event.emitter",["tau/core/class","tau/core/event","tau/core/profile.methods"],function(a,b,c){var d=function(){},e=a.extend({init:function(a){this.bus=a.bus,b.subscribeOn(this)},"bus refresh":function(a){this.lifeCycleCleanUp()},lifeCycleCleanUp:d,on:function(){this.bus.on.apply(this.bus,arguments)},fire:function(){return this.bus.fire.apply(this.bus,arguments)},"bus destroy":function(){this.on=d,this.fire=d,this.destroy()},destroy:function(){var a=this.bus.getGlobalBus();a&&a.removeAllListeners(this),b.unSubscribe(this),delete this.bus}});return window.appIsInDebugMode!==!0,e}),define("tau/store/typesClass",["Underscore","tau/core/class"],function(_,a){return a.extend({init:function(){this._dictionary={}},registerType:function(a,b){b[a.name]=a,a.aliases=a.aliases||[],a.refs=a.refs||{},_.each(a.aliases,function(c){b[c]=b[c.toLowerCase()]=a})},register:function(a){var b=this,c=b._dictionary;this.registerType(a,c)},findByKeyword:function(a){return this._dictionary[a]||null},getDictionary:function(){return this._dictionary}})}),define("tau/store/types",["tau/store/typesClass"],function(a){return new a}),define("tau/store/types.targetprocess.generated",["tau/store/types"],function(a){return[{name:"context"},{name:"process",parent:null,resource:"processes",aliases:["Process","processes","Processes"],fields:["id","name"],simpleFields:["id","name","description","entityStates-count","projects-count","practices-count","customFields-count"],refs:{entityStates:{list:!0,name:"entityState",multiplicity:"one",relationProperty:"process"},projects:{list:!0,name:"project",multiplicity:"one",relationProperty:"process"},practices:{list:!0,name:"practice",multiplicity:"",relationProperty:""},customFields:{list:!0,name:"customField",multiplicity:"one",relationProperty:"process"}}},{name:"practice",parent:null,resource:"practices",aliases:["Practice","practices","Practices"],fields:["id","name"],simpleFields:["id","name","description","processes-count"],refs:{processes:{list:!0,name:"process",multiplicity:"",relationProperty:""}}},{name:"entityType",parent:null,resource:"entityTypes",aliases:["EntityType","entityTypes","EntityTypes"],fields:["id","name"],simpleFields:["id","name","isExtendable","entityStates-count"],refs:{entityStates:{list:!0,name:"entityState",multiplicity:"one",relationProperty:"entityType"}}},{name:"priority",parent:null,resource:"priorities",aliases:["Priority","priorities","Priorities"],fields:["id","name"],simpleFields:["id","name","importance","isDefault"],refs:{entityType:{name:"entityType",multiplicity:"",relationProperty:"priorities"}}},{name:"severity",parent:null,resource:"severities",aliases:["Severity","severities","Severities"],fields:["id","name"],simpleFields:["id","name","importance","isDefault"],refs:{}},{name:"entityState",parent:null,resource:"entityStates",aliases:["EntityState","entityStates","EntityStates"],fields:["id","name"],simpleFields:["id","name","isInitial","isFinal","isPlanned","isCommentRequired","numericPriority","nextStates-count","previousStates-count"],refs:{role:{name:"role",multiplicity:"",relationProperty:"entityStates"},nextStates:{list:!0,name:"entityState",multiplicity:"",relationProperty:""},previousStates:{list:!0,name:"entityState",multiplicity:"",relationProperty:""},entityType:{name:"entityType",multiplicity:"",relationProperty:"entityStates"},process:{name:"process",multiplicity:"",relationProperty:"entityStates"}}},{name:"general",parent:null,resource:"generals",aliases:["General","generals","Generals"],fields:["id","name"],simpleFields:["id","name","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","comments-count","messages-count","relatedRequests-count","attachments-count"],refs:{entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},project:{name:"project",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},relatedRequests:{list:!0,name:"request",multiplicity:"",relationProperty:""},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"assignable",parent:"general",resource:"assignables",aliases:["Assignable","assignables","Assignables"],fields:["id","name"],simpleFields:["id","effort","effortCompleted","effortToDo","timeSpent","timeRemain","name","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","assignedUser-count","assignments-count","impediments-count","times-count","roleEfforts-count","revisions-count","comments-count","messages-count","relatedRequests-count","attachments-count"],refs:{assignedUser:{list:!0,name:"generalUser",multiplicity:"",relationProperty:""},release:{name:"release",multiplicity:"",relationProperty:"assignables"},iteration:{name:"iteration",multiplicity:"",relationProperty:"assignables"},teamIteration:{name:"teamIteration",multiplicity:"",relationProperty:"assignables"},team:{name:"team",multiplicity:"",relationProperty:"assignables"},priority:{name:"priority",multiplicity:"",relationProperty:"assignables"},entityState:{name:"entityState",multiplicity:"",relationProperty:"assignables"},assignments:{list:!0,name:"assignment",multiplicity:"one",relationProperty:"assignable"},impediments:{list:!0,name:"impediment",multiplicity:"zeroOrOne",relationProperty:"assignable"},times:{list:!0,name:"time",multiplicity:"zeroOrOne",relationProperty:"assignable"},roleEfforts:{list:!0,name:"roleEffort",multiplicity:"one",relationProperty:"assignable"},revisions:{list:!0,name:"revision",multiplicity:"",relationProperty:""},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},project:{name:"project",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},relatedRequests:{list:!0,name:"request",multiplicity:"",relationProperty:""},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"generalUser",parent:null,resource:"generalUsers",aliases:["GeneralUser","generalUsers","GeneralUsers"],fields:["id","firstName","lastName"],simpleFields:["id","firstName","lastName","email","login","createDate","modifyDate","deleteDate","isActive","isAdministrator","kind","password","assignables-count","comments-count","requests-count"],refs:{assignables:{list:!0,name:"assignable",multiplicity:"",relationProperty:""},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"owner"},requests:{list:!0,name:"request",multiplicity:"",relationProperty:""}}},{name:"user",parent:"generalUser",resource:"users",aliases:["User","users","Users"],fields:["id","firstName","lastName"],simpleFields:["id","weeklyAvailableHours","currentAllocation","currentAvailableHours","availableFrom","availableFutureAllocation","availableFutureHours","isObserver","firstName","lastName","email","login","createDate","modifyDate","deleteDate","isActive","isAdministrator","kind","password","times-count","impediments-count","customActivities-count","revisions-count","teamMembers-count","assignables-count","comments-count","requests-count"],refs:{role:{name:"role",multiplicity:"",relationProperty:""},times:{list:!0,name:"time",multiplicity:"one",relationProperty:"user"},impediments:{list:!0,name:"impediment",multiplicity:"zeroOrOne",relationProperty:"responsible"},customActivities:{list:!0,name:"customActivity",multiplicity:"one",relationProperty:"user"},revisions:{list:!0,name:"revision",multiplicity:"one",relationProperty:"author"},teamMembers:{list:!0,name:"teamMember",multiplicity:"one",relationProperty:"user"},assignables:{list:!0,name:"assignable",multiplicity:"",relationProperty:""},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"owner"},requests:{list:!0,name:"request",multiplicity:"",relationProperty:""}}},{name:"requester",parent:"generalUser",resource:"requesters",aliases:["Requester","requesters","Requesters"],fields:["id","firstName","lastName"],simpleFields:["id","phone","notes","sourceType","firstName","lastName","email","login","createDate","modifyDate","deleteDate","isActive","isAdministrator","kind","password","assignables-count","comments-count","requests-count"],refs:{company:{name:"company",multiplicity:"",relationProperty:""},assignables:{list:!0,name:"assignable",multiplicity:"",relationProperty:""},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"owner"},requests:{list:!0,name:"request",multiplicity:"",relationProperty:""}}},{name:"project",parent:"general",resource:"projects",aliases:["Project","projects","Projects"],fields:["id","name"],simpleFields:["id","isActive","isProduct","abbreviation","mailReplyAddress","name","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","generals-count","features-count","releases-count","iterations-count","userStories-count","tasks-count","bugs-count","testCases-count","testPlans-count","builds-count","times-count","revisions-count","customActivities-count","projectMembers-count","teamProjects-count","requests-count","testPlanRuns-count","comments-count","messages-count","relatedRequests-count","attachments-count"],refs:{generals:{list:!0,name:"general",multiplicity:"one",relationProperty:"project"},program:{name:"program",multiplicity:"",relationProperty:"projects"},process:{name:"process",multiplicity:"",relationProperty:"projects"},features:{list:!0,name:"feature",multiplicity:"one",relationProperty:"project"},releases:{list:!0,name:"release",multiplicity:"one",relationProperty:"project"},iterations:{list:!0,name:"iteration",multiplicity:"one",relationProperty:"project"},userStories:{list:!0,name:"userStory",multiplicity:"one",relationProperty:"project"},tasks:{list:!0,name:"task",multiplicity:"one",relationProperty:"project"},bugs:{list:!0,name:"bug",multiplicity:"one",relationProperty:"project"},testCases:{list:!0,name:"testCase",multiplicity:"one",relationProperty:"project"},testPlans:{list:!0,name:"testPlan",multiplicity:"one",relationProperty:"project"},builds:{list:!0,name:"build",multiplicity:"one",relationProperty:"project"},times:{list:!0,name:"time",multiplicity:"one",relationProperty:"project"},revisions:{list:!0,name:"revision",multiplicity:"one",relationProperty:"project"},customActivities:{list:!0,name:"customActivity",multiplicity:"one",relationProperty:"project"},company:{name:"company",multiplicity:"",relationProperty:"projects"},projectMembers:{list:!0,name:"projectMember",multiplicity:"one",relationProperty:"project"},teamProjects:{list:!0,name:"teamProject",multiplicity:"one",relationProperty:"project"},requests:{list:!0,name:"request",multiplicity:"one",relationProperty:"project"},testPlanRuns:{list:!0,name:"testPlanRun",multiplicity:"one",relationProperty:"project"},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},project:{name:"project",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},relatedRequests:{list:!0,name:"request",multiplicity:"",relationProperty:""},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"program",parent:"general",resource:"programs",aliases:["Program","programs","Programs"],fields:["id","name"],simpleFields:["id","name","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","projects-count","comments-count","messages-count","relatedRequests-count","attachments-count"],refs:{projects:{list:!0,name:"project",multiplicity:"zeroOrOne",relationProperty:"program"},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},project:{name:"project",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},relatedRequests:{list:!0,name:"request",multiplicity:"",relationProperty:""},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"release",parent:"general",resource:"releases",aliases:["Release","releases","Releases"],fields:["id","name"],simpleFields:["id","name","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","iterations-count","assignables-count","features-count","userStories-count","tasks-count","bugs-count","testPlanRuns-count","requests-count","builds-count","comments-count","messages-count","relatedRequests-count","attachments-count"],refs:{project:{name:"project",multiplicity:"",relationProperty:"releases"},iterations:{list:!0,name:"iteration",multiplicity:"one",relationProperty:"release"},assignables:{list:!0,name:"assignable",multiplicity:"zeroOrOne",relationProperty:"release"},features:{list:!0,name:"feature",multiplicity:"zeroOrOne",relationProperty:"release"},userStories:{list:!0,name:"userStory",multiplicity:"zeroOrOne",relationProperty:"release"},tasks:{list:!0,name:"task",multiplicity:"zeroOrOne",relationProperty:"release"},bugs:{list:!0,name:"bug",multiplicity:"zeroOrOne",relationProperty:"release"},testPlanRuns:{list:!0,name:"testPlanRun",multiplicity:"zeroOrOne",relationProperty:"release"},requests:{list:!0,name:"request",multiplicity:"zeroOrOne",relationProperty:"release"},builds:{list:!0,name:"build",multiplicity:"one",relationProperty:"release"},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},relatedRequests:{list:!0,name:"request",multiplicity:"",relationProperty:""},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"iteration",parent:"general",resource:"iterations",aliases:["Iteration","iterations","Iterations"],fields:["id","name"],simpleFields:["id","velocity","duration","name","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","assignables-count","userStories-count","tasks-count","bugs-count","testPlanRuns-count","requests-count","builds-count","comments-count","messages-count","relatedRequests-count","attachments-count"],refs:{project:{name:"project",multiplicity:"",relationProperty:"iterations"},release:{name:"release",multiplicity:"",relationProperty:"iterations"},assignables:{list:!0,name:"assignable",multiplicity:"zeroOrOne",relationProperty:"iteration"},userStories:{list:!0,name:"userStory",multiplicity:"zeroOrOne",relationProperty:"iteration"},tasks:{list:!0,name:"task",multiplicity:"zeroOrOne",relationProperty:"iteration"},bugs:{list:!0,name:"bug",multiplicity:"zeroOrOne",relationProperty:"iteration"},testPlanRuns:{list:!0,name:"testPlanRun",multiplicity:"zeroOrOne",relationProperty:"iteration"},requests:{list:!0,name:"request",multiplicity:"zeroOrOne",relationProperty:"iteration"},builds:{list:!0,name:"build",multiplicity:"zeroOrOne",relationProperty:"iteration"},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},relatedRequests:{list:!0,name:"request",multiplicity:"",relationProperty:""},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"teamIteration",parent:"general",resource:"teamIterations",aliases:["TeamIteration","teamIterations","TeamIterations"],fields:["id","name"],simpleFields:["id","velocity","duration","name","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","assignables-count","comments-count","messages-count","relatedRequests-count","attachments-count"],refs:{team:{name:"team",multiplicity:"",relationProperty:"teamIterations"},assignables:{list:!0,name:"assignable",multiplicity:"zeroOrOne",relationProperty:"teamIteration"},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},project:{name:"project",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},relatedRequests:{list:!0,name:"request",multiplicity:"",relationProperty:""},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"team",parent:"general",resource:"teams",aliases:["Team","teams","Teams"],fields:["id","name"],simpleFields:["id","name","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","teamMembers-count","teamProjects-count","assignables-count","teamIterations-count","comments-count","messages-count","relatedRequests-count","attachments-count"],refs:{teamMembers:{list:!0,name:"teamMember",multiplicity:"one",relationProperty:"team"},teamProjects:{list:!0,name:"teamProject",multiplicity:"one",relationProperty:"team"},assignables:{list:!0,name:"assignable",multiplicity:"zeroOrOne",relationProperty:"team"},teamIterations:{list:!0,name:"teamIteration",multiplicity:"one",relationProperty:"team"},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},project:{name:"project",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},relatedRequests:{list:!0,name:"request",multiplicity:"",relationProperty:""},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"feature",parent:"assignable",resource:"features",aliases:["Feature","features","Features"],fields:["id","name"],simpleFields:["id","initialEstimate","effort","effortCompleted","effortToDo","timeSpent","timeRemain","name","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","userStories-count","requests-count","assignedUser-count","assignments-count","impediments-count","times-count","roleEfforts-count","revisions-count","comments-count","messages-count","relatedRequests-count","attachments-count"],refs:{project:{name:"project",multiplicity:"",relationProperty:"features"},release:{name:"release",multiplicity:"",relationProperty:"features"},userStories:{list:!0,name:"userStory",multiplicity:"zeroOrOne",relationProperty:"feature"},requests:{list:!0,name:"request",multiplicity:"",relationProperty:""},assignedUser:{list:!0,name:"generalUser",multiplicity:"",relationProperty:""},iteration:{name:"iteration",multiplicity:"",relationProperty:"assignables"},teamIteration:{name:"teamIteration",multiplicity:"",relationProperty:"assignables"},team:{name:"team",multiplicity:"",relationProperty:"assignables"},priority:{name:"priority",multiplicity:"",relationProperty:"assignables"},entityState:{name:"entityState",multiplicity:"",relationProperty:"assignables"},assignments:{list:!0,name:"assignment",multiplicity:"one",relationProperty:"assignable"},impediments:{list:!0,name:"impediment",multiplicity:"zeroOrOne",relationProperty:"assignable"},times:{list:!0,name:"time",multiplicity:"zeroOrOne",relationProperty:"assignable"},roleEfforts:{list:!0,name:"roleEffort",multiplicity:"one",relationProperty:"assignable"},revisions:{list:!0,name:"revision",multiplicity:"",relationProperty:""},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},relatedRequests:{list:!0,name:"request",multiplicity:"",relationProperty:""},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"userStory",parent:"assignable",resource:"userStories",aliases:["UserStory","userStories","UserStories"],fields:["id","name"],simpleFields:["id","initialEstimate","effort","effortCompleted","effortToDo","timeSpent","timeRemain","name","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","tasks-count","bugs-count","testCases-count","times-count","requests-count","assignedUser-count","assignments-count","impediments-count","times-count","roleEfforts-count","revisions-count","comments-count","messages-count","relatedRequests-count","attachments-count"],refs:{project:{name:"project",multiplicity:"",relationProperty:"userStories"},feature:{name:"feature",multiplicity:"",relationProperty:"userStories"},tasks:{list:!0,name:"task",multiplicity:"zeroOrOne",relationProperty:"userStory"},bugs:{list:!0,name:"bug",multiplicity:"zeroOrOne",relationProperty:"userStory"},testCases:{list:!0,name:"testCase",multiplicity:"zeroOrOne",relationProperty:"userStory"},times:{list:!0,name:"time",multiplicity:"zeroOrOne",relationProperty:"userStory"},release:{name:"release",multiplicity:"",relationProperty:"userStories"},iteration:{name:"iteration",multiplicity:"",relationProperty:"userStories"},requests:{list:!0,name:"request",multiplicity:"",relationProperty:""},assignedUser:{list:!0,name:"generalUser",multiplicity:"",relationProperty:""},teamIteration:{name:"teamIteration",multiplicity:"",relationProperty:"assignables"},team:{name:"team",multiplicity:"",relationProperty:"assignables"},priority:{name:"priority",multiplicity:"",relationProperty:"assignables"},entityState:{name:"entityState",multiplicity:"",relationProperty:"assignables"},assignments:{list:!0,name:"assignment",multiplicity:"one",relationProperty:"assignable"},impediments:{list:!0,name:"impediment",multiplicity:"zeroOrOne",relationProperty:"assignable"},roleEfforts:{list:!0,name:"roleEffort",multiplicity:"one",relationProperty:"assignable"},revisions:{list:!0,name:"revision",multiplicity:"",relationProperty:""},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},relatedRequests:{list:!0,name:"request",multiplicity:"",relationProperty:""},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"task",parent:"assignable",resource:"tasks",aliases:["Task","tasks","Tasks"],fields:["id","name"],simpleFields:["id","effort","effortCompleted","effortToDo","timeSpent","timeRemain","name","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","times-count","requests-count","assignedUser-count","assignments-count","impediments-count","times-count","roleEfforts-count","revisions-count","comments-count","messages-count","relatedRequests-count","attachments-count"],refs:{project:{name:"project",multiplicity:"",relationProperty:"tasks"},userStory:{name:"userStory",multiplicity:"",relationProperty:"tasks"},times:{list:!0,name:"time",multiplicity:"zeroOrOne",relationProperty:"task"},release:{name:"release",multiplicity:"",relationProperty:"tasks"},iteration:{name:"iteration",multiplicity:"",relationProperty:"tasks"},requests:{list:!0,name:"request",multiplicity:"",relationProperty:""},assignedUser:{list:!0,name:"generalUser",multiplicity:"",relationProperty:""},teamIteration:{name:"teamIteration",multiplicity:"",relationProperty:"assignables"},team:{name:"team",multiplicity:"",relationProperty:"assignables"},priority:{name:"priority",multiplicity:"",relationProperty:"assignables"},entityState:{name:"entityState",multiplicity:"",relationProperty:"assignables"},assignments:{list:!0,name:"assignment",multiplicity:"one",relationProperty:"assignable"},impediments:{list:!0,name:"impediment",multiplicity:"zeroOrOne",relationProperty:"assignable"},roleEfforts:{list:!0,name:"roleEffort",multiplicity:"one",relationProperty:"assignable"},revisions:{list:!0,name:"revision",multiplicity:"",relationProperty:""},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},relatedRequests:{list:!0,name:"request",multiplicity:"",relationProperty:""},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"bug",parent:"assignable",resource:"bugs",aliases:["Bug","bugs","Bugs"],fields:["id","name"],simpleFields:["id","effort","effortCompleted","effortToDo","timeSpent","timeRemain","name","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","times-count","requests-count","assignedUser-count","assignments-count","impediments-count","times-count","roleEfforts-count","revisions-count","comments-count","messages-count","relatedRequests-count","attachments-count"],refs:{project:{name:"project",multiplicity:"",relationProperty:"bugs"},build:{name:"build",multiplicity:"",relationProperty:"bugs"},userStory:{name:"userStory",multiplicity:"",relationProperty:"bugs"},severity:{name:"severity",multiplicity:"",relationProperty:"bugs"},times:{list:!0,name:"time",multiplicity:"zeroOrOne",relationProperty:"bug"},release:{name:"release",multiplicity:"",relationProperty:"bugs"},iteration:{name:"iteration",multiplicity:"",relationProperty:"bugs"},requests:{list:!0,name:"request",multiplicity:"",relationProperty:""},assignedUser:{list:!0,name:"generalUser",multiplicity:"",relationProperty:""},teamIteration:{name:"teamIteration",multiplicity:"",relationProperty:"assignables"},team:{name:"team",multiplicity:"",relationProperty:"assignables"},priority:{name:"priority",multiplicity:"",relationProperty:"assignables"},entityState:{name:"entityState",multiplicity:"",relationProperty:"assignables"},assignments:{list:!0,name:"assignment",multiplicity:"one",relationProperty:"assignable"},impediments:{list:!0,name:"impediment",multiplicity:"zeroOrOne",relationProperty:"assignable"},roleEfforts:{list:!0,name:"roleEffort",multiplicity:"one",relationProperty:"assignable"},revisions:{list:!0,name:"revision",multiplicity:"",relationProperty:""},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},relatedRequests:{list:!0,name:"request",multiplicity:"",relationProperty:""},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"testCase",parent:"general",resource:"testCases",aliases:["TestCase","testCases","TestCases"],fields:["id","name"],simpleFields:["id","steps","success","lastStatus","lastFailureComment","lastRunDate","name","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","testPlans-count","testCaseRuns-count","comments-count","messages-count","relatedRequests-count","attachments-count"],refs:{project:{name:"project",multiplicity:"",relationProperty:"testCases"},userStory:{name:"userStory",multiplicity:"",relationProperty:"testCases"},priority:{name:"priority",multiplicity:"",relationProperty:"testCases"},testPlans:{list:!0,name:"testPlan",multiplicity:"",relationProperty:""},testCaseRuns:{list:!0,name:"testCaseRun",multiplicity:"",relationProperty:""},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},relatedRequests:{list:!0,name:"request",multiplicity:"",relationProperty:""},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"testCaseRun",parent:null,resource:"testCaseRuns",aliases:["TestCaseRun","testCaseRuns","TestCaseRuns"],fields:["id"],simpleFields:["id","executed","passed","comment","runDate","testCases-count"],refs:{testPlanRun:{name:"testPlanRun",multiplicity:"",relationProperty:"testCaseRuns"},testCases:{list:!0,name:"testCase",multiplicity:"",relationProperty:""}}},{name:"testPlan",parent:"general",resource:"testPlans",aliases:["TestPlan","testPlans","TestPlans"],fields:["id","name"],simpleFields:["id","initialEstimate","name","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","testCases-count","testPlanRuns-count","comments-count","messages-count","relatedRequests-count","attachments-count"],refs:{project:{name:"project",multiplicity:"",relationProperty:"testPlans"},testCases:{list:!0,name:"testCase",multiplicity:"",relationProperty:""},testPlanRuns:{list:!0,name:"testPlanRun",multiplicity:"one",relationProperty:"testPlan"},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},relatedRequests:{list:!0,name:"request",multiplicity:"",relationProperty:""},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"testPlanRun",parent:"assignable",resource:"testPlanRuns",aliases:["TestPlanRun","testPlanRuns","TestPlanRuns"],fields:["id","name"],simpleFields:["id","passedCount","failedCount","notRunCount","effort","effortCompleted","effortToDo","timeSpent","timeRemain","name","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","testCaseRuns-count","assignedUser-count","assignments-count","impediments-count","times-count","roleEfforts-count","revisions-count","comments-count","messages-count","relatedRequests-count","attachments-count"],refs:{release:{name:"release",multiplicity:"",relationProperty:"testPlanRuns"},build:{name:"build",multiplicity:"",relationProperty:"testPlanRuns"},iteration:{name:"iteration",multiplicity:"",relationProperty:"testPlanRuns"},testPlan:{name:"testPlan",multiplicity:"",relationProperty:"testPlanRuns"},project:{name:"project",multiplicity:"",relationProperty:"testPlanRuns"},testCaseRuns:{list:!0,name:"testCaseRun",multiplicity:"one",relationProperty:"testPlanRun"},assignedUser:{list:!0,name:"generalUser",multiplicity:"",relationProperty:""},teamIteration:{name:"teamIteration",multiplicity:"",relationProperty:"assignables"},team:{name:"team",multiplicity:"",relationProperty:"assignables"},priority:{name:"priority",multiplicity:"",relationProperty:"assignables"},entityState:{name:"entityState",multiplicity:"",relationProperty:"assignables"},assignments:{list:!0,name:"assignment",multiplicity:"one",relationProperty:"assignable"},impediments:{list:!0,name:"impediment",multiplicity:"zeroOrOne",relationProperty:"assignable"},times:{list:!0,name:"time",multiplicity:"zeroOrOne",relationProperty:"assignable"},roleEfforts:{list:!0,name:"roleEffort",multiplicity:"one",relationProperty:"assignable"},revisions:{list:!0,name:"revision",multiplicity:"",relationProperty:""},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},relatedRequests:{list:!0,name:"request",multiplicity:"",relationProperty:""},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"time",parent:null,resource:"times",aliases:["Time","times","Times"],fields:["id"],simpleFields:["id","description","spent","remain","isEstimation","date","createDate"],refs:{project:{name:"project",multiplicity:"",relationProperty:"times"},user:{name:"user",multiplicity:"",relationProperty:"times"},assignable:{name:"assignable",multiplicity:"",relationProperty:"times"},role:{name:"role",multiplicity:"",relationProperty:"times"},customActivity:{name:"customActivity",multiplicity:"",relationProperty:"times"}}},{name:"revision",parent:null,resource:"revisions",aliases:["Revision","revisions","Revisions"],fields:["id"],simpleFields:["id","sourceControlId","description","commitDate","revisionFiles-count","assignables-count"],refs:{project:{name:"project",multiplicity:"",relationProperty:"revisions"},revisionFiles:{list:!0,name:"revisionFile",multiplicity:"one",relationProperty:"revision"},author:{name:"user",multiplicity:"",relationProperty:"revisions"},assignables:{list:!0,name:"assignable",multiplicity:"",relationProperty:""}}},{name:"revisionFile",parent:null,resource:"revisionFiles",aliases:["RevisionFile","revisionFiles","RevisionFiles"],fields:["id","fileName"],simpleFields:["id","fileName","fileAction"],refs:{revision:{name:"revision",multiplicity:"",relationProperty:"revisionFiles"}}},{name:"customActivity",parent:null,resource:"customActivities",aliases:["CustomActivity","customActivities","CustomActivities"],fields:["id","name"],simpleFields:["id","name","created","estimate","times-count"],refs:{project:{name:"project",multiplicity:"",relationProperty:"customActivities"},user:{name:"user",multiplicity:"",relationProperty:"customActivities"},times:{list:!0,name:"time",multiplicity:"zeroOrOne",relationProperty:"customActivity"}}},{name:"request",parent:"assignable",resource:"requests",aliases:["Request","requests","Requests"],fields:["id","name"],simpleFields:["id","sourceType","isReplied","isPrivate","effort","effortCompleted","effortToDo","timeSpent","timeRemain","name","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","tasks-count","features-count","userStories-count","bugs-count","requesters-count","relatedEntities-count","assignedUser-count","assignments-count","impediments-count","times-count","roleEfforts-count","revisions-count","comments-count","messages-count","relatedRequests-count","attachments-count"],refs:{project:{name:"project",multiplicity:"",relationProperty:"requests"},release:{name:"release",multiplicity:"",relationProperty:"requests"},iteration:{name:"iteration",multiplicity:"",relationProperty:"requests"},requestType:{name:"requestType",multiplicity:"",relationProperty:"requests"},tasks:{list:!0,name:"task",multiplicity:"",relationProperty:""},features:{list:!0,name:"feature",multiplicity:"",relationProperty:""},userStories:{list:!0,name:"userStory",multiplicity:"",relationProperty:""},bugs:{list:!0,name:"bug",multiplicity:"",relationProperty:""},requesters:{list:!0,name:"generalUser",multiplicity:"",relationProperty:""},relatedEntities:{list:!0,name:"general",multiplicity:"",relationProperty:""},assignedUser:{list:!0,name:"generalUser",multiplicity:"",relationProperty:""},teamIteration:{name:"teamIteration",multiplicity:"",relationProperty:"assignables"},team:{name:"team",multiplicity:"",relationProperty:"assignables"},priority:{name:"priority",multiplicity:"",relationProperty:"assignables"},entityState:{name:"entityState",multiplicity:"",relationProperty:"assignables"},assignments:{list:!0,name:"assignment",multiplicity:"one",relationProperty:"assignable"},impediments:{list:!0,name:"impediment",multiplicity:"zeroOrOne",relationProperty:"assignable"},times:{list:!0,name:"time",multiplicity:"zeroOrOne",relationProperty:"assignable"},roleEfforts:{list:!0,name:"roleEffort",multiplicity:"one",relationProperty:"assignable"},revisions:{list:!0,name:"revision",multiplicity:"",relationProperty:""},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},relatedRequests:{list:!0,name:"request",multiplicity:"",relationProperty:""},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"requestType",parent:null,resource:"requestTypes",aliases:["RequestType","requestTypes","RequestTypes"],fields:["id","name"],simpleFields:["id","name","requests-count"],refs:{requests:{list:!0,name:"request",multiplicity:"one",relationProperty:"requestType"}}},{name:"build",parent:"general",resource:"builds",aliases:["Build","builds","Builds"],fields:["id","name"],simpleFields:["id","buildDate","name","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","bugs-count","testPlanRuns-count","comments-count","messages-count","relatedRequests-count","attachments-count"],refs:{project:{name:"project",multiplicity:"",relationProperty:"builds"},release:{name:"release",multiplicity:"",relationProperty:"builds"},iteration:{name:"iteration",multiplicity:"",relationProperty:"builds"},bugs:{list:!0,name:"bug",multiplicity:"zeroOrOne",relationProperty:"build"},testPlanRuns:{list:!0,name:"testPlanRun",multiplicity:"zeroOrOne",relationProperty:"build"},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},relatedRequests:{list:!0,name:"request",multiplicity:"",relationProperty:""},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"comment",parent:null,resource:"comments",aliases:["Comment","comments","Comments"],fields:["id"],simpleFields:["id","description","parentId","createDate"],refs:{general:{name:"general",multiplicity:"",relationProperty:"comments"},owner:{name:"generalUser",multiplicity:"",relationProperty:"comments"}}},{name:"assignment",parent:null,resource:"assignments",aliases:["Assignment","assignments","Assignments"],fields:["id"],simpleFields:["id"],refs:{assignable:{name:"assignable",multiplicity:"",relationProperty:"assignments"},generalUser:{name:"user",multiplicity:"",relationProperty:"assignments"},role:{name:"role",multiplicity:"",relationProperty:"assignments"}}},{name:"role",parent:null,resource:"roles",aliases:["Role","roles","Roles"],fields:["id","name"],simpleFields:["id","name","isPair","hasEffort","roleEfforts-count","entityStates-count"],refs:{roleEfforts:{list:!0,name:"roleEffort",multiplicity:"one",relationProperty:"role"},entityStates:{list:!0,name:"entityState",multiplicity:"one",relationProperty:"role"}}},{name:"impediment",parent:"general",resource:"impediments",aliases:["Impediment","impediments","Impediments"],fields:["id","name"],simpleFields:["id","isPrivate","name","description","startDate","endDate","createDate","modifyDate","lastCommentDate","tags","numericPriority","comments-count","messages-count","relatedRequests-count","attachments-count"],refs:{assignable:{name:"assignable",multiplicity:"",relationProperty:"impediments"},entityState:{name:"entityState",multiplicity:"",relationProperty:"impediments"},priority:{name:"priority",multiplicity:"",relationProperty:"impediments"},responsible:{name:"user",multiplicity:"",relationProperty:"impediments"},entityType:{name:"entityType",multiplicity:"",relationProperty:"generals"},owner:{name:"generalUser",multiplicity:"",relationProperty:"generals"},project:{name:"project",multiplicity:"",relationProperty:"generals"},comments:{list:!0,name:"comment",multiplicity:"one",relationProperty:"general"},messages:{list:!0,name:"message",multiplicity:"",relationProperty:""},relatedRequests:{list:!0,name:"request",multiplicity:"",relationProperty:""},attachments:{list:!0,name:"attachment",multiplicity:"one",relationProperty:"general"}}},{name:"company",parent:null,resource:"companies",aliases:["Company","companies","Companies"],fields:["id","name"],simpleFields:["id","name","url","description","projects-count"],refs:{projects:{list:!0,name:"project",multiplicity:"zeroOrOne",relationProperty:"company"}}},{name:"roleEffort",parent:null,resource:"roleEfforts",aliases:["RoleEffort","roleEfforts","RoleEfforts"],fields:["id"],simpleFields:["id","initialEstimate","effort","effortCompleted","effortToDo","timeSpent","timeRemain"],refs:{assignable:{name:"assignable",multiplicity:"",relationProperty:"roleEfforts"},role:{name:"role",multiplicity:"",relationProperty:"roleEfforts"}}},{name:"projectMember",parent:null,resource:"projectMembers",aliases:["ProjectMember","projectMembers","ProjectMembers"],fields:["id"],simpleFields:["id","weeklyAvailableHours","membershipStartDate","membershipEndDate","allocation"],refs:{project:{name:"project",multiplicity:"",relationProperty:"projectMembers"},user:{name:"user",multiplicity:"",relationProperty:""},role:{name:"role",multiplicity:"",relationProperty:""}}},{name:"teamMember",parent:null,resource:"teamMembers",aliases:["TeamMember","teamMembers","TeamMembers"],fields:["id"],simpleFields:["id","startDate","endDate"],refs:{team:{name:"team",multiplicity:"",relationProperty:"teamMembers"},user:{name:"user",multiplicity:"",relationProperty:"teamMembers"},role:{name:"role",multiplicity:"",relationProperty:""}}},{name:"teamProject",parent:null,resource:"teamProjects",aliases:["TeamProject","teamProjects","TeamProjects"],fields:["id"],simpleFields:["id","startDate","endDate"],refs:{team:{name:"team",multiplicity:"",relationProperty:"teamProjects"},project:{name:"project",multiplicity:"",relationProperty:"teamProjects"}}},{name:"message",parent:null,resource:"messages",aliases:["Message","messages","Messages"],fields:["id"],simpleFields:["id","subject","recipients","body","isRead","isProcessed","createDate","sendDate","messageType","contentType","generals-count","attachments-count"],refs:{from:{name:"generalUser",multiplicity:"",relationProperty:"messagesFrom"},to:{name:"generalUser",multiplicity:"",relationProperty:"messagesTo"},messageUid:{name:"messageUid",multiplicity:"",relationProperty:""},generals:{list:!0,name:"general",multiplicity:"",relationProperty:""},attachments:{list:!0,name:"attachment",multiplicity:"zeroOrOne",relationProperty:"message"}}},{name:"messageUid",parent:null,resource:"messageUids",aliases:["MessageUid","messageUids","MessageUids"],fields:["id"],simpleFields:["id","uid","mailServer","mailLogin"],refs:{}},{name:"customField",parent:null,resource:"customFields",aliases:["CustomField","customFields","CustomFields"],fields:["id","name","entityFieldName"],simpleFields:["id","name","value","entityFieldName","fieldType","enabledForFilter","required"],refs:{entityType:{name:"entityType",multiplicity:"",relationProperty:"customFields"},process:{name:"process",multiplicity:"",relationProperty:"customFields"}}},{name:"resourceBase",parent:"resource",resource:"resourceBases",aliases:["ResourceBase","resourceBases","ResourceBases"],fields:["id"],simpleFields:["id","actions-count"],refs:{actions:{list:!0,name:"action",multiplicity:"one",relationProperty:"entity"}}},{name:"attachment",parent:null,resource:"attachments",aliases:["Attachment","attachments","Attachments"],fields:["id","name"],simpleFields:["id","name","description","date","mimeType","uri","thumbnailUri","size"],refs:{owner:{name:"generalUser",multiplicity:"",relationProperty:"attachments"},general:{name:"general",multiplicity:"",relationProperty:"attachments"},message:{name:"message",multiplicity:"",relationProperty:"attachments"}}},{name:"history",parent:"resource",resource:"histories",aliases:["History","histories","Histories"],fields:["id"],simpleFields:["id","date","description","modification"],refs:{entity:{name:"general",multiplicity:"",relationProperty:"histories"},innerEntity:{name:"general",multiplicity:"",relationProperty:""},modifier:{name:"generalUser",multiplicity:"",relationProperty:""}}},{name:"change",parent:"resource",resource:"changes",aliases:["Change","changes","Changes"],fields:["id"],simpleFields:["id","field","oldValue","newValue"],refs:{history:{name:"history",multiplicity:"",relationProperty:"changes"}}},{name:"action",parent:"resource",resource:"actions",aliases:["Action","actions","Actions"],fields:["id","name"],simpleFields:["id","name","uri"],refs:{entity:{name:"resourceBase",multiplicity:"",relationProperty:"actions"}}},{name:"context",parent:null,resource:"contexts",aliases:["Context","contexts","Contexts"],fields:["id"],simpleFields:["id","acid","edition","selectedProjects-count","processes-count"],refs:{loggedUser:{name:"user",multiplicity:"",relationProperty:""},culture:{name:"culture",multiplicity:"",relationProperty:""},selectedProjects:{list:!0,name:"projectInfo",multiplicity:"",relationProperty:""},processes:{list:!0,name:"processInfo",multiplicity:"",relationProperty:""}}},{name:"culture",parent:null,resource:"cultures",aliases:["Culture","cultures","Cultures"],fields:["id","name"],simpleFields:["id","name","decimalSeparator","shortDateFormat","longDateFormat","timePattern"],refs:{}},{name:"processInfo",parent:null,resource:"processInfos",aliases:["ProcessInfo","processInfos","ProcessInfos"],fields:["id","name"],simpleFields:["id","name","terms-count","customFields-count","practices-count"],refs:{terms:{list:!0,name:"term",multiplicity:"",relationProperty:""},customFields:{list:!0,name:"customFieldInfo",multiplicity:"",relationProperty:""},practices:{list:!0,name:"practice",multiplicity:"",relationProperty:""}}},{name:"term",parent:null,resource:"terms",aliases:["Term","terms","Terms"],fields:["id","name"],simpleFields:["id","name","value"],refs:{}},{name:"customFieldInfo",parent:null,resource:"customFieldInfos",aliases:["CustomFieldInfo","customFieldInfos","CustomFieldInfos"],fields:["id","name"],simpleFields:["id","entityKind","name","type","required","listed"],refs:{}},{name:"projectInfo",parent:null,resource:"projectInfos",aliases:["ProjectInfo","projectInfos","ProjectInfos"],fields:["id","name"],simpleFields:["id","name"],refs:{process:{name:"processInfo",multiplicity:"",relationProperty:""},program:{name:"programInfo",multiplicity:"",relationProperty:""}}},{name:"programInfo",parent:null,resource:"programInfos",aliases:["ProgramInfo","programInfos","ProgramInfos"],fields:["id","name"],simpleFields:["id","name"],refs:{}}]}),define("tau/store/types.targetprocess",["Underscore","tau/store/types","tau/store/types.targetprocess.generated"],function(_,a,b){var c=function(a){var b=[];for(var c=0,d=a.length;c<d;c++){var e=a.charAt(c);c===0?e=e.toUpperCase():e===e.toUpperCase()&&b.push(" "),b.push(e)}return b.join("")},d=function(a){return{key:a,val:a}},e=function(a){var b=a.length-1;if(a.charAt(b)==="y"){var c=a.substring(0,b),d="ies";a=c+d}else a+="s";return{key:a,val:a}},f=function(a){var b=a.split(" "),c=b.length,d=c-1||0,e=b[d];return{key:a+" Big Icon Text",val:e}},g=function(a){var b=a.split(" "),c=b.length,d=c-1||0,e=b[d];return{key:a+" Small Icon Text",val:e.charAt(0)}},h=function(a){if(a&&a.entityType&&a.entityType.name)return a.entityType.name;throw"type of entity is not detected"},i=function(a){var b=c(a);return{name:d(b),names:e(b),iconBig:f(b),iconSmall:g(b)}};return _.each(b,function(b){b.name==="userStory"&&(b.aliases.unshift("story","stories","us"),b.simpleFields.push("tasks-effort-sum","tasks-effortToDo-sum"));if(b.name==="general"||b.name==="assignable")b.isParentType=!0,b.discriminator={entityType:["id","name"]},b.detectType=h;(b.parent==="general"||b.parent==="assignable")&&b.simpleFields.push("customFields"),b.terms=i(b.name),b.name==="process"&&b.refs&&b.refs.customFields&&delete b.refs.customFields,b.name==="processInfo"&&b.refs&&(b.refs={}),b.name==="context"&&(b.refs||(b.refs={}),b.refs.culture&&delete b.refs.culture,b.refs.selectedProjects={list:!0,name:"project"},b.simpleFields=["id","acid"]),a.register(b)}),a.register({name:"implementationHistory",aliases:["stats"]}),a.register({name:"prioritizer",fields:["id"],refs:[]}),a}),define("tau/core/termProcessor",["Underscore","tau/core/class","tau/store/types.targetprocess"],function(_,a,b){var c=a.extend({init:function(a){a=a||[],this.mapping={};for(var b=0,c=a.length;b<c;b++){var d=a[b];this.mapping[d.name]=this.mapping[d.name.toLowerCase()]=d.value}},resolve:function(a,b){var c=b||a;return a&&this.mapping.hasOwnProperty(a)&&(c=this.mapping[a]),c},getTerms:function(a){var c=this,d=b.findByKeyword(a),e=d.terms,f=_(e).keys(),g={};return _(f).each(function(a){g[a]=c.resolve(e[a].key,e[a].val)}),g}});return c}),define("tau/ui/templateRenderer.extensions",["Underscore","tau/core/class","tau/core/termProcessor"],function(_,a,b){var c=a.extend({init:function(a){this.termProc=new b(a.terms)},terms:function(a){return this.termProc.getTerms(a)},text_implode:function(a){var b=new String(a);if(_.isString(a))b=a;else if(_.isArray(a)){var c=_.clone(a),d=c.pop();b=_.filter([c.join(", "),d],function(a){return a!=0}).join(" &amp; ")}return b},key:function(a,b){}});return c}),define("tau/core/templates-factory",["Underscore","jQuery"],function(_,$){var a={sub:function(a,c){var d=_.isArray(c)?c:[c],e=[];for(var f=0,g=d.length;f<g;f++)e.push(b.get(a).render(null,d[f]));return e.join("")}},b={templates:{},initialized:{},get:function(a){var b=this,c=b.templates[a];if(!c)throw["Template '",a,"' was not registered."].join("");return b[c.engine+".get"](a)},"jquery.get":function(a){var b=this;if(!$.template.hasOwnProperty(a))throw["jQuery template '",a,"' was not found."].join("");return{bind:function(c,d){var e={},f=b.templates[a],g=f.tags||[];for(var h=0;h<g.length;h++){var i=g[h];i.register(c,e)}var j=$.template[a];return $.tmpl(j,d,e)}}},"jqote2.get":function(b){var c=this,d=c.templates[b];if(!d.jqotecmpl)throw["Template '",b,"' was not compiled."].join("");return{render:function(b,c){return d.jqotecmpl.call(c,0,0,[c],a)},bind:function(a,b){var c=this.render(a,b);return $(c)}}},registerRecursively:function(a,b){var c=this;b=b||{tags:[]};var d=null;if(!$.template.hasOwnProperty(a)){d=this.templates[a];if(!d)throw["Template '",a,"' was not found."].join("");d.tags&&(b.tags=b.tags.concat(d.tags)),$.each(d.dependencies,function(a,d){c.registerRecursively(d,b)}),d.tags=b.tags;var e=d.markup;$.template(a,e)}else d=d||this.templates[a],d.tags&&(b.tags=b.tags.concat(d.tags))},"jquery.register":function(a){var b=this;b.registerRecursively(a.name)},"jqote2.register":function(a){a.jqotecmpl=$.jqotec(a.markup)},register:function(a){var b=this;return a.dependencies=a.dependencies||[],a.markup=_.isArray(a.markup)?a.markup.join(""):a.markup,a.engine=a.engine||"jquery",b.templates[a.name]=a,b[a.engine+".register"](a),{name:a.name,options:a.options||{},get:function(){return b.get(a.name)}}}};return b}),define("tau/ui/templateRenderer",["Underscore","jQuery"],function(_,$){return $.extend($.tmpl.tag,{"@":{_default:{$1:"'type'",$2:"null"},open:["var $__t = $item;","while(!$__t.$tau && $__t.parent){","$__t = $__t.parent","}","_=_.concat($__t.$tau.terms($2)[$1]);"].join("")},tauKey:{_default:{$1:"id",$2:"null"},open:['_=_.concat(new String(window._.complexKey($2["data"], $1) || "").toString());'].join("")}}),$}),define("tau/core/view-base",["Underscore","jQuery","tau/core/event.emitter","tau/ui/templateRenderer.extensions","tau/core/templates-factory","tau/ui/templateRenderer"],function(_,$,a,b,c){var d=a.extend({name:"view-base",init:function(a){this._super(a),this.config=a||{}},destroy:function(){this._super(),this.element&&this.element.remove(),delete this.element,delete this.config},merge:function(a,b){var c=this;if(b&&c.element){$.isArray(b)||(b=[b]);var d=_(b).isArray()?b:[b],e=this.element;_(d).each(function(b){var c=e.find(b),d=a.find(b);c.each(function(a){$(this).replaceWith(d.eq(a))})})}},bindTemplate:function(a){var b=this.config.template.name,d=c.get(b).bind(this.config,a);return d},prepareElement:function(a){var b=this.config.template.name,c=" tmpl-"+b,d="ui-placeholder"+c.replace(".","-");return a.addClass(d),a},updateElement:function(a,b){var c=this;c.element&&b?c.merge(a,b):(c.element&&(a.length?c.element.replaceWith(a):c.element.remove()),c.element=a)},doRender:function(a,b){var c=this.bindTemplate(a);c=this.prepareElement(c),this.updateElement(c,b),!this.config.visible&&this.hide()},fireAfterInit:function(a){this.fire("afterInit",{config:this.config,refreshSelector:a})},initialize:function(a){var b=this;this.fireAfterInit(a)},setDefaultConfig:function(){var a=this;_.defaults(a.config,{visible:!0})},"bus refreshData":function(a){this.doRender(a.data),this.fire("elementRefreshedWithData",{element:this.element})},"bus refresh":function(a){this._super();var b=a.data||{},c=b.refreshSelector;this.startLifeCycle(a,c)},"bus initialize":function(a){this.startLifeCycle(a)},startLifeCycle:function(a,b){var c=this;c.setDefaultConfig(),_.extend(c.config,a.data),c.fire("beforeInit",{config:c.config}),this.initialize(b)},"bus show":function(){this.show()},"bus hide":function(){this.hide()},showElement:function(){this.element.show()},show:function(){this.showElement(),this.config.visible=!0},hideElement:function(){this.element.hide()},hide:function(){this.hideElement(),this.config.visible=!1},"bus applyTo":function(a){this.element=a.data.element},"bus afterInit+dataBind":function(a){this.render(a.dataBind.data,a.afterInit.data)},render:function(a,b){this.fireBeforeRender({data:a}),this.doRender(a,b.refreshSelector),this.fireAfterRender({data:a})},fireBeforeRender:function(a){a=a||{},this.fire("beforeRender",{data:a.data,view:this,element:this.element})},fireAfterRender:function(a){a=a||{},this.fire("afterRender",{data:a.data,view:this,element:this.element})}});return d}),define("tau/core/event-dispatcher",["Underscore","tau/core/class"],function(_,a){var b=a.extend({init:function(a){this.components=a,this.eventArgsQueue={},this.dictionaryQueue={}},listen:function(a,b){var c=this;c.dictionaryQueue.hasOwnProperty(a)||(c.dictionaryQueue[a]=_(c.components).clone(),c.eventArgsQueue[a]=[]);var d=function(a){var d=a.sender;a.removeListener();var e=_(c.components).indexOf(d);c.eventArgsQueue[a.name][e]=a.data,c.dictionaryQueue[a.name]=_(c.dictionaryQueue[a.name]).without(d);if(_.isEmpty(c.dictionaryQueue[a.name])){var f={eventName:a.name,argsArr:c.eventArgsQueue[a.name]};b(f)}};_(c.components).each(function(b){b.on(a,d,null,{},1e3)})}});return b}),define("tau/ui/templates/container/ui.template.container.list",["tau/core/templates-factory"],function(a){var b={name:"container.list",markup:['<div class="tau-container ${cssClass}"></div>'],dependencies:[]};return a.register(b)}),define("tau/components/extensions/component.extension.base",["Underscore","tau/core/event.emitter"],function(_,a){var b=function(a){return a!=="bus"&&!_.isFunction(this[a])},c=function(a){delete this[a]},d=a.extend({init:function(a){this._super(a),this.config=a},"bus beforeInit":function(a){this.config||console.log("config is null "+this.category),_(this.config).extend((a.data||{}).config)},"bus afterRender":function(a){this.element=a.data.element},createComponents:function(a,b){var c={bus:this.bus,config:a,create:function(){this.bus.on("componentsCreated",this.onComponentCreated,this),this.bus.fire("createComponents",this.config,this)},onComponentCreated:function(a){if(a.caller!==this)return;a.removeListener(),b(a.data)}};c.create()},isEntityInContext:function(a){var b=this.config.context.entity.id,c=b==(a.data.entity||a.data.assignable).id;return c},destroy:function(){delete this.config;var a=_.keys(this);_(a).chain().select(b,this).each(c,this).value(),this._super()}});return d}),define("tau/components/extensions/additionalInfo/extension.additionalInfo.editable",["jQuery","tau/components/extensions/component.extension.base"],function($,a){return a.extend({category:"edit",editableIndexes:null,init:function(){this._super.apply(this,arguments),this.onRowClickProxy=$.proxy(this.onRowClick,this)},"bus beforeComponentsInitialize":function(a){this.editableIndexes=[],this.createComponentList(a.data),this.attachListeners()},"bus afterRender":function(a){this.$el=a.data.element,this.addEditableBehaviour()},"bus refresh":function(){this.clearComponent()},createComponentList:function(a){this.components=[];for(var b=1;b<a.length;b+=2)this.components.push(a[b].component)},addEditableBehaviour:function(){for(var a=0;a<this.editableIndexes.length;a++)this.doEditableRow(this.editableIndexes[a])},attachListeners:function(){var a=this.components;if(a)for(var b=0;b<a.length;b++)a[b].on("permissionsReady",this.onPermissionsReady,this,{index:b})},removeListeners:function(){var a=this.components;if(a)for(var b=0;b<a.length;b++)a[b].removeListener("permissionsReady",this.onPermissionsReady,this)},onRowClick:function(a){$(a.target).hasClass("ui-type-icon")===!1&&$(a.target).hasClass("ui-link-entity__inner")===!1&&(a.stopPropagation(),a.data.component.fire("edit"))},doEditableRow:function(a){var b=this.$el.find(" > tbody > tr").eq(a),c=this.onRowClickProxy;b.unbind("click",c),b.bind("click",{component:this.components[a]},c),b.addClass("ui-additionalinfo_editable_true")},onPermissionsReady:function(a){if(a.data.editable){var b=a.listenerData.index;this.$el?this.doEditableRow(b):this.editableIndexes.push(b)}},clearComponent:function(){this.removeListeners(),delete this.components,delete this.editableIndexes,delete this.$el},destroy:function(){this.clearComponent(),this._super()}})}),define("tau/components/extensions/additionalInfo/extension.additionalInfo.updateAnimation",["jQuery","tau/components/extensions/component.extension.base"],function($,a){return a.extend({category:"edit",editableIndexes:null,init:function(){this._super.apply(this,arguments),this.onRowClickProxy=$.proxy(this.onRowClick,this)},"bus beforeComponentsInitialize":function(a){this.editableIndexes=[],this.createComponentList(a.data),this.attachListeners()},"bus afterRender":function(a){this.$el=a.data.element},"bus refresh":function(){this.clearComponent()},createComponentList:function(a){this.components=[];for(var b=1;b<a.length;b+=2)this.components.push(a[b].component)},attachListeners:function(){var a=this.components;if(a)for(var b=0;b<a.length;b++)a[b].on("beforeChangeProperty",this.onBeforeChangeProperty,this,{index:b}),a[b].on("propertyChanged",this.onPropertyChanged,this,{index:b,component:a[b]},1)},removeListeners:function(){var a=this.components;if(a)for(var b=0;b<a.length;b++)a[b].removeListener("permissionsReady",this.onPermissionsReady,this)},onRowClick:function(a){a.stopPropagation(),a.data.component.fire("edit")},onPropertyChanged:function(a){var b=a.listenerData.index,c=a.listenerData.component,d=this;c.on("afterRender",function(a){a.removeListener();var c=d.$el.find(" > tbody > tr").eq(b).find(">td");d.fire("updateElement",{element:c})},c)},markRowAsUpdating:function(a){var b=this.$el.find(" > tbody > tr").eq(a).find(">td");this.fire("markElementToBeUpdated",{element:b})},onBeforeChangeProperty:function(a){var b=a.listenerData.index;this.markRowAsUpdating(b)},clearComponent:function(){this.removeListeners(),delete this.components,delete this.editableIndexes,delete this.$el},destroy:function(){this.clearComponent(),this._super()}})}),define("tau/components/extensions/component.creator.extension",["Underscore","tau/components/extensions/component.extension.base"],function(_,a){var b=a.extend({getDependencies:function(a){var b=[];return _(a).each(function(a){if(a.path)b.push(a.path);else{if(!a.type)throw"Configuration error: type or path is missing";var c="tau/components/component."+a.type;b.push(c)}}),b},childrenLoadedCallback:function(a,b){var c=this,d=[];_(a).each(function(a){a.name||(a.name="",a.type&&(a.name=a.type),a.id&&(a.name+=":"+a.id));var b=a.component.create(a);c.fire("componentCreated",{component:b}),d.push({config:a,component:b})}),c.fire("componentsCreated",d,b)},createDependenciesLoadedCallback:function(a,b){var c=this,d=a.components,e=a.context;return function(){var a=arguments;_(d).each(function(b,c){b.component=a[c],b.context=e}),c.childrenLoadedCallback(d,b)}},"bus createComponents":function(a){var b=a.data,c=a.caller,d=b.components;d=b.components=_.isArray(d)?d:[d];var e=this.getDependencies(d);require(e,this.createDependenciesLoadedCallback(b,c))}});return b}),define("tau/ui/templates/container/ui.template.container.table",["tau/core/templates-factory"],function(a){var b={name:"container.table",markup:['<table class="${cssClass} container-table">',"   <tr></tr>","</table>"],dependencies:[]};return a.register(b)}),define("tau/views/view.container",["Underscore","jQuery","tau/core/view-base","tau/core/event-dispatcher","tau/ui/templates/container/ui.template.container.list","tau/ui/templates/container/ui.template.container.table"],function(_,$,a,b){var c=a.extend({init:function(a){this._loaded=!1,this._super(a)},completeInitializationWithoutChildren:function(){var a=this;a.fire("afterInit"),a._fireChildrenRendered({children:[],childrenEvtArgs:[]})},setDefaultConfig:function(){var a=this;a._super(),_.defaults(a.config,{template:{name:"container."+(a.config.layout||"list")}})},"bus componentCreated":function(a){var b=a.data.component;this.fire("childComponentCreated",b),this.children.push(b)},_fireChildrenRendered:function(a){this.fire("internalChildrenRendered",a)},"bus afterInit+internalChildrenRendered":function(a){var b=this._getRenderConfig();this.fireBeforeRender({data:b}),this.doRender(b);var c=a.internalChildrenRendered.data;_.extend(c,{config:this.config}),this.fire("childrenRendered",c),this.fireAfterRender({data:b})},initializeComponents:function(a){var c=this;c.dispatcher=new b(c.children);var d=["afterInit"],e=function(a){c.fire(a.eventName)};_(d).each(function(a){c.dispatcher.listen(a,e)}),c.dispatcher.listen("afterRender",function(a){var b=a.argsArr,d={children:c.children,childrenEvtArgs:b};c._fireChildrenRendered(d)});var f=_(a.data).pluck("config");_(c.children).each(function(a,b){a.fire("initialize",f[b])})},"bus componentsCreated":function(a){this.fire("beforeComponentsInitialize",a.data),this.initializeComponents(a),this.fire("afterComponentsInitialize",a.data)},lifeCycleCleanUp:function(){this.destroyChildren()},"bus refresh":function(a){this.startLifeCycle()},startLifeCycle:function(a){var b=this;b.setDefaultConfig(),_.extend(b.config,(a||{}).data),b.fire("beforeInit",{config:b.config});var c=b.config.children;b.children=[];var d=_.size(c)>0&&b.config.visible;if(d){var e=b.config.children,f=b.config.context||{};this.fire("createComponents",{components:e,context:f})}else b.completeInitializationWithoutChildren()},"bus initialize":function(a){this.startLifeCycle(a)},hideElement:function(){if(this._loaded&&!$.fx.off){this.element.slideUp(200);return}this._super()},showElement:function(){if(!$.fx.off){this.element.slideDown(200);return}this._super()},"bus show":function(){this._super(),this._loaded||this.fire("initialize",{})},_getRenderConfig:function(){var a=this.config;return a.visible&&(this._loaded=!0),a},destroyChildren:function(){var a=null;if(this.children&&this.children.length)while(a=this.children.pop())a.destroy();this.children=null},destroy:function(){this.dispatcher=null,this.destroyChildren(),this._super()}});return c}),define("tau/ui/extensions/layout/ui.extension.layout",["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(_,$,a){return a.extend({"bus childrenRendered+afterRender":function(a){var b=this;b.element=a.afterRender.data.element;var c=a.childrenRendered.data.childrenEvtArgs;b.config.layout=b.config.layout||"list";var d=b.config,e=["_add",d.layout,"item"].join(" ");d.childrenContainerSelector=d.childrenContainerSelector||(d.layout==="list"?null:"> tbody > tr"),_(c).each(function(a){var c=a.element;b[e](c)})},"_add list item":function(a){var b=a.jquery?a:a.element,c=this.config.childrenContainerSelector?this.element.find(this.config.childrenContainerSelector):this.element;c.append(b)},getTableItemContainer:function(){var a=this,b=a.config,c=a.element.find(b.childrenContainerSelector+":last");if(b.hasOwnProperty("columnCount")){var d=c.children("td").size();d>=b.columnCount&&(c=$("<tr></tr>"),a.element.children("tbody").append(c))}return c},"_add table item":function(a){var b=this,c=a.jquery?a:a.element,d=b.config,e=this.getTableItemContainer(),f=e.children("td").length,g=d.cellsCssClass&&d.cellsCssClass[f]||"";$("<td></td>").addClass(g).append(c).appendTo(e)}})}),define("tau/ui/extensions/spinner/ui.extension.spinner",["tau/components/extensions/component.extension.base"],function(a){return a.extend({options:{spinnerClass:"ui-spinner"},"bus beforeInit":function(a){var b=this;b.element&&b.element.addClass(b.options.spinnerClass)},"bus afterRender":function(a){var b=this;b.element=a.data.element,b.element.removeClass(b.options.spinnerClass)}})}),Function.prototype.tauCreateDelegate=function(a){var b=this,c=(a.bus||{name:""}).name;return c==="entity component"&&console.log(c),function(){b.apply(a,arguments)}},String.prototype.trim=function(a){return function(){var b=this,c=/^\s+/,d=/\s+$/,e=a?a.call(b):b.toString().replace(c,"").replace(d,"");return e}}(String.prototype.trim),Date.prototype.setISO8601=function(a){var b="([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?",c=a.match(new RegExp(b)),d=0,e=new Date(c[1],0,1);c[3]&&e.setMonth(c[3]-1),c[5]&&e.setDate(c[5]),c[7]&&e.setHours(c[7]),c[8]&&e.setMinutes(c[8]),c[10]&&e.setSeconds(c[10]),c[12]&&e.setMilliseconds(Number("0."+c[12])*1e3),c[14]&&(d=Number(c[16])*60+Number(c[17]),d*=c[15]=="-"?1:-1),d-=e.getTimezoneOffset(),time=Number(e)+d*60*1e3,this.setTime(Number(time))},Date.prototype.toISO8601String=function(a,b){if(!a)var a=6;if(!b)var b="Z",c=this;else{var d=b.match(/([-+])([0-9]{2}):([0-9]{2})/),e=Number(d[2])*60+Number(d[3]);e*=d[1]=="-"?-1:1;var c=new Date(Number(Number(this)+e*6e4))}var f=function(a){return(a<10?"0":"")+a},g="";g+=c.getUTCFullYear(),a>1&&(g+="-"+f(c.getUTCMonth()+1)),a>2&&(g+="-"+f(c.getUTCDate())),a>3&&(g+="T"+f(c.getUTCHours())+":"+f(c.getUTCMinutes()));if(a>5){var h=Number(c.getUTCSeconds()+"."+(c.getUTCMilliseconds()<100?"0":"")+f(c.getUTCMilliseconds()));g+=":"+f(h)}else a>4&&(g+=":"+f(c.getUTCSeconds()));return a>3&&(g+=b),g},define("tau/extensions/extension.javascript",function(){}),define("tau/core/tau",["tau/extensions/extension.javascript"],function(){var a=a||{};return a.empty=function(){},a.ns=function(a){var b=a.split("."),c=window;for(var d=0,e=b.length;d<e;d++){var f=b[d];typeof c[f]=="undefined"&&(c[f]={}),c=c[f]}},a.getQueryValueFromUrl=function(a,b){b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c="[\\?&]"+b+"=([^&#]*)",d=new RegExp(c,"i"),e=d.exec(a);return e==null?"":e[1]},a.getValueFromQueryString=function(b){var c=window.location.href;return a.getQueryValueFromUrl(c,b)},a.extendArgs=function(a,b){var c=a;return c=[].slice.call(a),c.unshift(b),c},a.concat=function(){return String.prototype.concat.apply("",arguments)},a.createScopedCallbackIfRequired=function(b){return typeof b=="function"?b:a.createScopedCallback(b.fn,b.scope)},a.createScopedCallback=function(a,b){return typeof a!="function"&&typeof a.fn=="function"&&(a=a.fn,a.scope&&(b=a.scope)),typeof a=="function"&&b&&(a=a.tauCreateDelegate(b)),a},a.getCallbacks=function(b){b=b||{},b.success||(b.success=a.empty),b.failure||(b.failure=a.empty);var c=a.createScopedCallback(b.success,b.scope),d=a.createScopedCallback(b.failure,b.scope);return{success:c,failure:d}},a}),define("tau/store/store",["Underscore","tau/core/class","tau/core/tau","tau/store/types","tau/store/typesClass"],function(_,a,b,c,d){var e={_processCommand:function(a,b,c,d){d=d||{};var e=this.types[b];e&&(b=e.name);var f={type:b,name:a,config:c,callbacks:d};return this.commands.push(f),this}},f=function(){var a=this;if(_.isEmpty(a._frozenPromises)){var b=[].concat(a._frozenCommandsQueue);a._frozenCommandsQueue=[],a.config.proxy.execute(b)}};return a.extend({init:function(a){var f=this;f.id=_.uniqueId("store_"),f._frozenCommandsQueue=[],f._frozenPromises={},f.config=a,f.eventEmitter=f.config.eventEmitter||{fire:function(){},on:function(){},removeAllListeners:function(){}};var g=a.types||a.proxy.types;if(g){var h=new d;_(g).each(function(a){h.register(a)}),e.types=h.getDictionary()}else e.types=c.getDictionary();var i=_.functionsExt(a.proxy);_.each(i,function(a){var c=a.split("api ");if(c.length!==2)return;var d=c[1];e[d]=function(){var a=b.extendArgs(arguments,d);return this._processCommand.apply(this,a)}}),f._extendWithCommonAPI(f,f)},_extendWithCommonAPI:function(a,b){_.each(_.functionsExt(e),function(c){if(c[0]=="_")return;a[c]=function(){var d=_.extend({},e);return d.commands=a.commands||[],d[c].apply(d,arguments),d.done=function(a){b._done(d.commands,a)},d}})},freeze:function(){var a=this,c=_.uniqueId(),d={id:c,unfreeze:function(){this.unfreeze=b.empty,delete a._frozenPromises[c],f.call(a)}};return a._frozenPromises[d.id]=d,d},on:function(a,b){return this.config.proxy.on(a,b),this.eventEmitter.fire("afterStoreOn",a),this},unbind:function(a){return this.config.proxy.unbind(a),this.eventEmitter.fire("afterStoreUnbind",a),this},_processChain:function(a,c){c=b.getCallbacks(c);var d=[].concat(a);_.each(a,function(e){var f=b.getCallbacks(e.callbacks),g=function(b,g){d[_.indexOf(d,e)]=b;var h=_.select(a,function(a){return a.executed!==!0});f[g](b);if(h.length===0){var i=_.select(a,function(a){return a.failed===!0});c[i.length>0?"failure":"success"](d)}};e.callbacks={success:function(a){g(a,"success")},failure:function(a){g(a,"failure")}}})},done:function(a){b.getCallbacks(a).success([])},evictProperties:function(a,b,c){this.config.proxy.evictProperties(a,b,c)},evictData:function(){this.config.proxy.evictData()},isPropertyInitialized:function(a,b,c){return this.config.proxy.isPropertyInitialized(a,b,c)},_done:function(a,b){var c=this;c._processChain(a,b),_.isEmpty(c._frozenPromises)?c.config.proxy.execute(a):c._frozenCommandsQueue=[].concat(c._frozenCommandsQueue,a)}})}),define("tau/store/header",["Underscore","tau/core/tau"],function(_,tau){var tauExtension=_.extend(tau,{ref:function(a,b){var c={};return c[a]=b,c},list:function(a,b){var c=tau.ref(a,b);return c.list=!0,c},getNextPage:function(a,b,c){c=c||[];var d={holder:a,url:b,fields:c};return a.getNextPage=function(){return d},d},parseFieldsFromString:function(value){var self=this;value=value.replace(/([\w-]+)\[+/ig,'{"$1":['),value=value.replace(/(\])/ig,"]}"),value=value.substr(0,value.length-1),value=value.replace(/([\w-]+)(,|\])/ig,"'$1'$2");var fields=eval("(function () { return "+value+";})();"),toLowerCase=function(a){var b=a.split("-");if(b.length>1){var c=[];return _.each(b,function(a){c.push(toLowerCase(a))}),c.join("-")}return a.charAt(0).toLowerCase()+a.substr(1)},formatFields=function(a){var b=[];return _.each(a,function(a){if(self.header.isSimple(a)){b.push(toLowerCase(a));return}var c={},d=self.header.getFieldName(a);c[toLowerCase(d)]=formatFields(a[d]),b.push(c)}),b};return formatFields(fields)},formatObject:function(a,b){var c=this,d={data:[],nextPages:[]};if(_.isUndefined(a)||_.isNull(a))return d.data=null,d;if(typeof a!="object")return d.data=a,d;b=b?b:"Lower";var e=function(a){return a.charAt(0)["to"+b+"Case"]()+a.substr(1)};if(a&&(a.hasOwnProperty("Items")||a.hasOwnProperty("items"))){var f=a.next||a.Next;f&&d.nextPages.push(c.getNextPage(d.data,f,[])),a=a.Items||a.items}if(_.isArray(a))return _.each(a,function(a){var e=c.formatObject(a,b);d.nextPages=d.nextPages.concat(e.nextPages||[]),d.data.push(e.data)}),d;var g={};return _.each(_.keys(a),function(f){var h=e(f),i=h.split("-");if(i.length>1){var j=[];_.each(i,function(a){j.push(e(a))}),h=j.join("-")}var k=c.formatObject(a[f],b);d.nextPages=d.nextPages.concat(k.nextPages||[]),g[h]=k.data}),d.data=g,d},header:{getFieldName:function(a){return _.getFieldName(a)},isSimple:function(a){return _.isString(a)},isList:function(a){return a.list===!0}}});return tauExtension}),define("tau/core/comparer",["Underscore"],function(_){return{isEqualIncluded:function(a,b){if(a===b)return!0;var c=typeof a,d=typeof b;if(c!=d)return!1;if(a==b)return!0;if(!a&&b||a&&!b)return!1;if(_.isDate(a)&&_.isDate(b))return a.getTime()===b.getTime();if(_.isNaN(a)&&_.isNaN(b))return!1;if(_.isRegExp(a)&&_.isRegExp(b))return a.source===b.source&&a.global===b.global&&a.ignoreCase===b.ignoreCase&&a.multiline===b.multiline;if(c!=="object")return!1;if(_.isArray(a)&&_.isArray(b)&&a.length!==b.length)return!1;var e=_.keys(b);for(var f=0;f<e.length;f++){var g=e[f];if(a.hasOwnProperty(g)&&!this.isEqualIncluded(a[g],b[g]))return!1}return!0},compare:function(a,b){var c=this,d={changes:{}};return a?(_.each(_(b).keys(),function(e){var f={value:b[e]};if(!a.hasOwnProperty(e)){d.changes[e]=f;return}c.isEqualIncluded(a[e],b[e])||(d.changes[e]=f)}),d):d}}}),define("tau/store/db",["Underscore","tau/core/class","tau/store/header","tau/core/comparer"],function(_,a,b,c){return a.extend({init:function(a){this.__data={},this.__types=a.types||{}},_getTypeHolder:function(a,b){var c=a[b]||{};return a.hasOwnProperty(b)||(a[b]=c),c},_getTypeDictionary:function(a){return this._getTypeHolder(this.__data,a)},getPersistedNode:function(a,b){var c=this,d=c.__data[b];if(!d)return null;if(!a)return d;var e=d[a];return e?e:null},_getRefsArray:function(a){return!a||!a.refs?[]:(a.hasOwnProperty("refsArray")||(a.refsArray=_(a.refs).keys()),a.refsArray)},_registerReference:function(a,b,d,e,f){var g=this,h=d.refs[b];if(_.isUndefined(a)||a===null||a.id===null)return h.list?[]:null;a.__type=h.name;var i=g.__types[h.name],j=g._register(a,function(a){if(!i.refs)return;var b=h.relationProperty;if(!b)return;var d=i.refs[b];if(!d)return;var j=a.data.hasOwnProperty(b),k=a.data[b],l=d.list,m=g._getReferenceObject(e.id,e.__type),n=function(b){var c={};c[h.relationProperty]=b,f.diffs.push({id:a.id,type:g._getOriginType(a),changes:c})};if(l&&!j)return;l?_(k).any(function(a){return a.id===e.id})?m=k:(m=k.concat([m]),n(m)):c.isEqualIncluded(m,k)||n(m),a.data[b]=m});_.mergeArrayObjects(f,j,["diffs"]);var k={isReference:!0,type:h.name,list:!0};return h.list?_.extend(j.refs,k):j.refs[0]},_removeCascadeObjects:function(a,b){var c=this,d=c._getRegisterTemplate();return _.each(c._getRefsArray(a),function(e){var f=a.refs[e];f.cascade&&(f.list?_.each(b[e],function(a){c._extendRegister(d,c.remove(a.id,a.type))}):c._extendRegister(d,c.remove(b[e].id,b[e].type)))}),d},_getOriginType:function(a){var b=a.__type;return a.origin&&(b=a.origin.type),b},_removeRefFromObj:function(a,b,c,d,e){var f=this,g=a.data;if(!g.hasOwnProperty(b))return;var h=g[b];if(!h)return;var i=d.refs[b];if(!i.relationProperty)return;var j=f.__types[i.name];_.isArray(h)||(h=[h]);for(var k=0,l=h.length;k<l;k++){var m=h[k];if(e&&e!==m.id)continue;var n=f.getPersistedNode(m.id,m.type);if(!n)return;if(!n.data.hasOwnProperty(i.relationProperty))return;c.nodes.push(n);var o={};o[i.relationProperty]=null,j.refs&&j.refs[i.relationProperty]&&j.refs[i.relationProperty].list?(n.data[i.relationProperty]=_(n.data[i.relationProperty]).select(function(b){return b.id!=a.id}),o[i.relationProperty]=n.data[i.relationProperty]):n.data[i.relationProperty]=null,c.diffs.push({id:n.id,type:f._getOriginType(n),changes:o})}},_removeObjectFromRefs:function(a,b){var c=this,d=c._getRegisterTemplate();return _(c._getRefsArray(a)).each(function(e){c._removeRefFromObj(b,e,d,a)}),d},removeProperties:function(a,b,c){var d=this,e=d.getPersistedNode(a,b);if(!e)return;var f=e.data;_(c).each(function(a){delete f[a]})},removeFromList:function(a,c,d){var e=this,f=e._getRegisterTemplate(),g=e.getPersistedNode(a,c);if(!g)return f;var h=e.__types[c],i=b.header.getFieldName(d),j=g.data[i];if(!j)return f;var k=[],l=d[i].id;_.each(j,function(a){a.id!=l?k.push({id:a.id}):e._removeRefFromObj(g,i,f,h,l)});var m={id:a,__type:c};m[i]=k;var n=e.register(m);return e._extendRegister(n,f),n},remove:function(a,b){var c=this,d=c._getRegisterTemplate(),e=c.getPersistedNode(a,b);if(!e)return d;var f=c.__types[b],g=e.data;return d.deletedData.push(_(g).defaults({id:a,type:b})),delete c.__data[b][a],c._extendRegister(d,c._removeCascadeObjects(f,g)),c._extendRegister(d,c._removeObjectFromRefs(f,e)),d},isPropertyInitialized:function(a,b,c){var d=this.getPersistedNode(a,b);return d?d.data?d.data.hasOwnProperty(c):!1:!1},_getReferenceObject:function(a,b){return{isReference:!0,id:a,type:b}},_attachReference:function(a,b,c){var d=this._getReferenceObject(b,c);return a.push(d),d},_getParentTypeNames:function(a){var b=this;if(!a.__parents){a.__parents=[];var c=a.parent;while(c){a.__parents.push(c);var d=b.__types[c];if(!d)break;c=d.parent}}return a.__parents},_registerParentNodes:function(a,b,c){var d=this,e=d.__types[a],f={data:c.data,id:b,origin:{id:b,type:a}},g=d._getParentTypeNames(e);for(var h=0;h<g.length;h++){var i=g[h],j=d._getTypeDictionary(i);j[b]=j[b]||{},_.extend(j[b],f)}},_getRegisterTemplate:function(){return{refs:[],nodes:[],diffs:[],tree:{},deletedData:[]}},_registerObjectInTree:function(a,b){var c=this,d=c._getTypeHolder(a,b.type);if(!d.hasOwnProperty(b.id)){var e={},f=c.__types[b.type],g={id:b.id,changes:e},h=c._getParentTypeNames(f);for(var i=0;i<h.length;i++){var j=c.__types[h[i]],k=c._getTypeHolder(a,j.name);k[b.id]=g}d[b.id]=g}_.extend(d[b.id].changes,b.changes)},_extendTree:function(a,b){var c=this;_.each(b,function(b){c._registerObjectInTree(a,b)})},_extendRegister:function(a,b){this._extendTree(a.tree,b.diffs),_.mergeArrayObjects(a,b,["diffs","deleteData"])},register:function(a,b){return this._register(a,b)},isTypeDetectionRequired:function(a){var b=this.__types[a];return b.isParentType},getTypeDetectionForNode:function(a,b){if(!this.isTypeDetectionRequired(b))return{required:!1};var c=this.getPersistedNode(a,b),d={required:!0};return c?c.origin?!c.origin.id||!c.origin.type?d:{required:!1,type:c.origin.type}:d:d},_getTypeDefinitionForRegistration:function(a,b,c){var d=this,e=d.__types[b];if(e.isParentType){var f=d.getTypeDetectionForNode(a,e.name);b=f.required?e.detectType(c):f.type,e=d.__types[b]}return e},_register:function(a,b){var c=this,d=c._getRegisterTemplate();if(_.isEmpty(a))return d;_.isArray(a)||(a=_.isArray(a.items)?a.items:[a]);var e=a.__type;for(var f=0,g=a.length;f<g;f++){var h=a[f];h.__type||(h.__type=e),c._registerObject(h,d,b)}return d},_registerObject:function(a,b,d){var e=this,f=a.__type,g=a.id;if(!f||!g)throw new Error("properties __type and id are required for data registration");var h=e._getTypeDefinitionForRegistration(g,f,a),i={id:g,type:h.name,changes:{}},j=e._getTypeDictionary(h.name),k=j[g];k||(j[g]=k={__type:h.name,data:{id:g},id:g},e._registerParentNodes(h.name,g,k,j));var l=k.data,m=h.refs,n=e._getRegisterTemplate();for(var o in a){if(o==="__type"||o==="id")continue;var p=a[o],q=l[o];m.hasOwnProperty(o)&&(p=e._registerReference(p,o,h,k,n)),k.data[o]=p,c.isEqualIncluded(q,p)||(i.changes[o]=p)}e._extendRegister(b,n),k.data.hasOwnProperty("__type")&&delete k.data.__type,b.nodes.push(k),e._extendTree(b.tree,[i]),b.diffs.push(i),e._attachReference(b.refs,g,h.name),d&&d(k)},get:function(a,b,c){var d=this;if(!a){var e={data:[],notInitializedFields:[],all:!0};return _.each(_(this._getTypeDictionary(b)).keys(),function(a){var f=d._get(a,b,c);e.data.push(f.data),d.mergeFields(e.notInitializedFields,f.notInitializedFields)}),e}return this._get(a,b,c)},_get:function(a,c,d){var e=this;d=d||{};var f=e.getPersistedNode(a,c),g=e.__types[c]||{},h=g.refs||{},i=d.$fields||d.fields||[],j={data:null,type:g,notInitializedFields:i};if(!f)return j;var k={},l=[],m=function(a,b,c){var d=e._get(a.id,a.type,{fields:b||[]});return d.notInitializedFields.length&&c.push(d.notInitializedFields),d.data},n=f.data;return _.each(i,function(a){var c=b.header.getFieldName(a),d=n[c];if(_.isUndefined(d)){l.push(a);return}k[c]=d;if(h.hasOwnProperty(c)&&d){var f=[];if(_.isArray(d)){var g=d;d=[],_.each(g,function(b){d.push(m(b,a[c],f))})}else d=m(d,a[c],f);if(f.length>0){var i={};i[c]=[],_(f).each(function(a){e.mergeFields(i[c],a)}),i[c].length>0&&l.push(i)}}k[c]=d}),f.origin&&(c=f.origin.type),{type:g,data:_(k).defaults({id:a,__type:c}),notInitializedFields:l}},mergeFields:function(a,b,c){return _.mergeFields(a,b,c)},destroy:function(){delete this.__data,delete this.__types}})}),define("tau/store/repository",["Underscore","tau/core/class","tau/core/event","tau/core/tau","tau/store/header","tau/core/comparer","tau/store/types","tau/store/db"],function(_,a,b,c,d,e,f,g){var h=a.extend({init:function(a){if(!a.service)throw"rest service should be defined";this.__listenerObjects={objects:[],holders:[]},this.__subscriptions={},this.types=a.types||f.getDictionary(),this._initDb(),this.service=a.service},_initDb:function(){this.__allTypeLoadMarkers={},this.db=new g({types:this.types})},mergeCommands:function(a){var b={},d=this;return _.each(a,function(a){a=_.defaults(a,{name:"get",config:{},callbacks:{}}),a.callbacks=c.getCallbacks(a.callbacks),d._processFieldsConfig(a,a.name==="get"?null:"_getEmptyArray");var e=[a.type,a.config.id||"_",a.name,a.config.nested===!0?_.uniqueId():""].join("_");if(!b.hasOwnProperty(e))b[e]=a,a.commands=[];else{var f=b[e];d.db.mergeFields(f.config.fields,a.config.fields),f.commands.push(a)}}),b},execute:function(a){var b=this;_.isArray(a)||(a=[a]);var c=b.mergeCommands(a);_.each(_.values(c),function(a){if(a.executed===!0)throw"command is already executed. the same command can not be used twice";b["api "+a.name](a)})},_registerListener:function(a,b,d){var e=a||{},f=b.eventName;e.hasOwnProperty(f)||(e[f]={});var g=_.uniqueId(f),h={id:g,config:b,callback:c.createScopedCallbackIfRequired(d)},i=e[f],j=b.listener;if(j){if(!j.__getRepositorySubscriberId){var k=_.uniqueId("repository_");j.__getRepositorySubscriberId=function(){return k},this.__listenerObjects[k]={listener:j,holders:[]}}var l={id:g,holder:i};this.__listenerObjects[j.__getRepositorySubscriberId()].holders.push(l)}return i[g]=h,h},unbind:function(a){if(!a.__getRepositorySubscriberId)return;var b=this,c=a.__getRepositorySubscriberId(),d=b.__listenerObjects[c];if(!d)return;var e=d.holders;if(!e)return;_(e).each(function(a){var b=a.holder[a.id];b.callback=function(){},delete a.holder[a.id]}),delete a.__getRepositorySubscriberId,delete b.__listenerObjects[c]},_getListeners:function(a){var b=this,c=b._getSubscriptions(a.type);if(!c)return[];var d=c[a.eventName];if(!d)return[];var f=[];return _.each(_(d).values(),function(c){var d=c.config.filter,g=c.config.hasChanges||[];if(d){var h=b.db.getPersistedNode(a.obj.id,a.obj.type),i=a.obj;h&&h.data?i=h.data:a.nodeEvent.changes&&!_.isEmpty(a.nodeEvent.changes)&&(i=a.nodeEvent.changes);var j=e.compare(i,d);if(_(j.changes).keys().length>0)return}if(a.nodeEvent&&g.length>0){var k=a.nodeEvent.changes||{},l=_(g).all(function(a){var b=a.split("|"),c=!1;return b.length>1?c=0<_(k).chain().keys().intersection(b).size().value():c=k.hasOwnProperty(a),c});if(!l)return}f.push(c)}),f},on:function(a,b){var c=this,d=a.type?c.types[a.type].name:"_all_",e=c._getSubscriptions(d);return c._registerListener(e,a,b)},_getSubscriptions:function(a){return this.__subscriptions.hasOwnProperty(a)||(this.__subscriptions[a]={}),this.__subscriptions[a]},_autoAppend:function(a,b,c){_.each(b,function(b){_.any(a,function(a){return d.header.getFieldName(a)===d.header.getFieldName(b)})||a[c?c:"unshift"](b)})},registerData:function(a){this.db.register(a)},_getEmptyArray:function(){return[]},_getDefaultFields:function(a){var b=this.types[a.type];return _.clone(b?b.fields||[]:[])},_processFieldsConfig:function(a,b){var c=this;b=b||"_getDefaultFields";if(!a.config.fields||a.config.fields.length===0)a.config.fields=c[b](a);var d=a.config.fields;c._autoAppend(d,["id"]);for(var e=d.length;e>0;e--){var f=d[e-1];if(_.isSimple(f))continue;var g=_.getFieldName(f),h=a.type?c.types[a.type]:null,i=null,j=[];if(h&&h.refs&&h.refs[g]){var k=h.refs[g];k.list===!0&&(f.list=!0),j=k.fields,i=k.name}var l={type:i,config:{fields:f[g]||j}};f[g]=c._processFieldsConfig(l,b)}var m=d.length;for(e=0;e<m;e++){var n=_.getFieldName(d[e]);for(var o=e+1;o<m;o++)_.getFieldName(d[o])===n&&(_.isSimple(d[e])||_.mergeFields(d[e][n],d[o][n]),d.splice(o,1),m--,o--)}return d},_invokeCommandCallback:function(a,b,c,d){var e=this;e._invokeCommandCallbackR(a,b,c,d);if(c.config.silent===!0)return;if(!e.__subscriptions._all_||_.isEmpty(e.__subscriptions._all_))return;var f=_.values(e.__subscriptions._all_[a]||[]),g={name:a,data:{cmd:c,data:d}};_(f).each(function(a){a.callback(g)})},_invokeCommandCallbackR:function(a,b,c,d){var e=this;c.executed=!0,b[a]({command:c,data:d}),c.hasOwnProperty("commands")&&_.each(c.commands,function(b){b.executed=!0,b.failed=c.failed,e._invokeCommandCallbackR(a,b.callbacks,b,d)})},"api removeFromList":function(a){var b=this,c=a.callbacks;a.config.$set=a.config.$set||{},a.callbacks={success:function(d){var e=_.extend(_.extend({},a.config.$set),d),f=b.db.removeFromList(a.config.id,a.type,a.config.$set);b._invokeCommandCallback("success",c,a,{}),b._notifyAboutNewsAndChanges(f,a)},failure:function(d){a.failed=!0,b._invokeCommandCallback("failure",c,a,d)}},b._populateBeforeSaveEvent(a),b._processFieldsConfig(a,"_getEmptyArray"),b.service.removeFromList(a)},"api remove":function(a){var b=this,c=a.callbacks;a.callbacks={success:function(d){var e=b.evictPersistedObject(a.config.id,a.type);b._populateAfterRemoveEvent(a,e),b._invokeCommandCallback("success",c,a,a.callbacks)},failure:function(d){a.failed=!0,b._invokeCommandCallback("failure",c,a,d)}},b._populateBeforeRemoveEvent(a),b.service.remove(a)},evictPersistedObject:function(a,b){return this.db.remove(a,this.types[b].name)},evictProperties:function(a,b,c){this.db.removeProperties(a,this.types[b].name,c)},evictData:function(){this._initDb()},isPropertyInitialized:function(a,b,c){return this.db.isPropertyInitialized(a,b,c)},"api save":function(a){var b=this,c=a.callbacks;a.config.$set=a.config.$set||{},a.callbacks={success:function(d){_.extend(d,{__type:a.type});var e=_.extend(_.extend({},a.config.$set),d),f=b.db.register(e);b._notifyAboutNewsAndChanges(f,a),b._invokeCommandCallback("success",c,a,e)},failure:function(d){a.failed=!0,b._invokeCommandCallback("failure",c,a,d)}},b._populateBeforeSaveEvent(a),b._processFieldsConfig(a,"_getEmptyArray"),b.service.save(a)},_notifyAboutNewsAndChanges:function(a,b){var c=this;_.each(_.keys(a.tree),function(d){_.each(_(a.tree[d]).values(),function(a){_.isEmpty(a.changes)||c._populateEvent(b,"afterSave",a,{id:a.id,type:d})})})},_populateEvent:function(a,b,c,d){var e=_.uniqueId("repositoryEvent"),f=this._getListeners({type:d.type,eventName:b,nodeEvent:c,obj:d});if(f.length!==0){var g={id:e,name:b,data:{id:d.id,type:d.type,cmd:a,obj:d,changes:c.changes}};_(f).each(function(a){a.callback(g)})}},_populateBeforeRemoveEvent:function(a){this._populateEvent(a,"beforeRemove",{},{id:a.config.id,type:a.type})},_populateAfterRemoveEvent:function(a,b){var c=this;_.each(b.deletedData,function(b){c._populateEvent(a,"afterRemove",{},b)}),c._notifyAboutNewsAndChanges(b,a)},_populateBeforeSaveEvent:function(a){this._populateEvent(a,"beforeSave",{changes:a.config.$set||{}},{id:a.config.id,type:a.type})},markRecordSetAsCompleteLoaded:function(a){this.__allTypeLoadMarkers[a]=!0},isTypeMarkedAsCompleteLoaded:function(a){return this.__allTypeLoadMarkers[a]===!0},_appendDiscriminator:function(a,b){var c=this;a.isParentType&&_.indexOf(b,"id")>=0&&c._autoAppend(b,[a.discriminator],"push"),_.each(b,function(b){if(d.header.isSimple(b))return;var e=d.header.getFieldName(b),f=a.refs[e];f&&c._appendDiscriminator(c.types[f.name],b[e])})},_processCommandForGet:function(a){var b=this,c=b.db.get(a.config.id,a.type,a.config),d=a.config.fields;if(c.notInitializedFields.length===0)if(!c.all||!!b.isTypeMarkedAsCompleteLoaded(a.type))return a.config.fields=d,b._invokeCommandCallback("success",a.callbacks,a,c.data),{isInvoked:!0};var e=c.notInitializedFields;return c.all&&!b.isTypeMarkedAsCompleteLoaded(a.type)&&(e=_.clone(d)),{isInvoked:!1,fields:e}},_runReadCommand:function(a,b,c,d){var e=this;e._appendDiscriminator(e.types[a.type],c),_.extend(a.config,{fields:c}),e._processFieldsConfig(a);var f=a.callbacks;a.callbacks={success:function(c){a.config.fields=b,_.defaults(c,{__type:a.type});var g=e.db.register(c),h=d(c,g);e._invokeCommandCallback("success",f,a,h),a.callbacks=f},failure:function(c){a.config.fields=b,a.failed=!0,e._invokeCommandCallback("failure",f,a,c),a.callbacks=f}},this.service[a.name](a)},"api refresh":function(a){var b=this,c=a.config.fields,d=function(d,e){return b._notifyAboutNewsAndChanges(e,a),b.db.get(a.config.id,a.type,{fields:c}).data};this._runReadCommand(a,c,_.clone(c),d)},"api find":function(a){var b=this,c=a.config.fields,d=function(d){var e=[];_.each(d,function(d){e.push(b.db.get(d.id,a.type,{fields:c}).data)});if(d.hasOwnProperty("getNextPage")){e.isNextPageAvailable=function(){return!0};var f=_.clone(a);f.config=_.clone(f.config),f.config.$skip=f.config.$skip+f.config.$limit,e.getNextPageCommand=function(){return f}}else e.isNextPageAvailable=function(){return!1};return e};this._runReadCommand(a,c,_.clone(c),d)},"api get":function(a){var b=this,c=a.config.fields,d=b._processCommandForGet(a);if(d.isInvoked)return;var e=function(d){return a.config.id||b.markRecordSetAsCompleteLoaded(a.type),b.db.get(a.config.id,a.type,{fields:c}).data};this._runReadCommand(a,c,d.fields,e)}});return h}),define("tau/core/Class",[],function(){var a=!1,b=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,c=function(){},d=0,e=function(a,b){return b};return c.extend=function(c){function j(){!a&&this.init&&(this.__objectId=d++,this.init.apply(this,arguments))}var f=this.prototype;a=!0;var g=new this;a=!1,g.__profiler=g.__profiler||e;for(var h in c){if(h==="__profiler")continue;var i=typeof c[h]=="function"&&typeof f[h]=="function"&&b.test(c[h])?function(a,b){return function(){var c=this._super;this._super=f[a];var d=b.apply(this,arguments);return this._super=c,d}}(h,c[h]):c[h];g[h]=g.__profiler(h,i)}return j.prototype=g,j.constructor=j,j.extend=arguments.callee,j},c}),define("tau/store/services/formatProperties",[],function(){return{customFields:{}}}),define("tau/store/services/service.arrayToJsonConverter",["Underscore","tau/store/header","tau/store/services/formatProperties"],function(_,a,b){return{convertArray:function(b,c){var d=this,e=[],f=[];return c.next&&f.push(a.getNextPage(e,c.next,b.header)),c=c.items?c.items:c,_.each(c,function(a){var c=d.convert(b,a);e.push(c.data),f=f.concat(c.nextPages)}),{data:e,nextPages:f}},convert:function(c,d){var e={},f=this,g=[];for(var h=0,i=c.header.length;h<i;h++){var j=d[h];_.isUndefined(j)&&(j=null);var k=c.header[h];if(a.header.isSimple(k)){b.hasOwnProperty(k)&&(j=a.formatObject(j).data),e[k]=j;continue}var l=a.header.getFieldName(k),m=k.list===!0;!_.isNull(j)&&(j.hasOwnProperty("items")||j.hasOwnProperty("Items"))&&(m=!0);if(_.isEmpty(j)&&!m){e[l]=null;continue}if(!_.isNull(j)){var n={header:k[l]},o=j;if(j.hasOwnProperty("items")||j.hasOwnProperty("Items"))j=j.items||j.Items;if(m){var p=[];_.each(j,function(a){var b=f.convert(n,a);g=g.concat(b.nextPages),p.push(b.data)}),j=p,o.next&&g.push(a.getNextPage(p,o.next,n.header))}else{var q=f.convert(n,j);g=g.concat(q.nextPages),j=q.data}}_.isNull(j)&&m&&(j=[]),e.hasOwnProperty(l)?_.extend(e[l],j):e[l]=j}return{data:e,nextPages:g}}}});var JSON;JSON||(JSON={}),function(){function f(a){return a<10?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return typeof b=="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g=gap,h,i=b[a];i&&typeof i=="object"&&typeof i.toJSON=="function"&&(i=i.toJSON(a)),typeof rep=="function"&&(i=rep.call(b,a,i));switch(typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";gap+=indent,h=[];if(Object.prototype.toString.apply(i)==="[object Array]"){f=i.length;for(c=0;c<f;c+=1)h[c]=str(c,i)||"null";return e=h.length===0?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]",gap=g,e}if(rep&&typeof rep=="object"){f=rep.length;for(c=0;c<f;c+=1)typeof rep[c]=="string"&&(d=rep[c],e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e))}else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));return e=h.length===0?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}",gap=g,e}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(a,b,c){var d;gap="",indent="";if(typeof c=="number")for(d=0;d<c;d+=1)indent+=" ";else typeof c=="string"&&(indent=c);rep=b;if(!b||typeof b=="function"||typeof b=="object"&&typeof b.length=="number")return str("",{"":a});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&typeof e=="object")for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),d!==undefined?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),define("libs/json2",function(){}),define("tau/store/services/service.rest",["Underscore","jQuery","tau/core/Class","tau/store/types","tau/store/services/service.arrayToJsonConverter","tau/store/header","tau/core/tau","libs/json2"],function(_,$,a,b,c,d,e){var f=a.extend({init:function(a){a=a||{},_.defaults(a,{api:$,types:b.getDictionary()}),this.config=a},removeFromList:function(a){var b=this,c=d.header.getFieldName(a.config.$set),e={url:b.getUrl(a)+"/"+c+"/"+a.config.$set[c].id,contentType:"application/json; charset=utf-8",type:"DELETE",processData:!1,dataType:"json"},f=this.getErrorCallback(a);b.config.api.ajax(e).success(function(){a.callbacks.success({id:a.config.id})}).error(f)},remove:function(a){var b=this,c={Id:a.config.id},d={url:b.getUrl(a),contentType:"application/json; charset=utf-8",type:"DELETE",processData:!1,data:JSON.stringify(c),dataType:"json"},e=this.getErrorCallback(a);b.config.api.ajax(d).success(function(){a.callbacks.success({id:a.config.id})}).error(e)},save:function(a){var b={$set:a.config.$set||{}};if(a.type==="prioritizer"){_.extend(b,{$include:this._formIncludes(a.config.fields)}),this.executeCrudCommandViaPageService(a,b,"save");return}this.executeCrudCommand(a,b,"save")},getErrorCallback:function(a){var b=this.config.appPath,c=function(c){if(c.status===401){document.location.href=b+"/login.aspx?ReturnUrl="+document.location.href;return}try{c.response=$.parseJSON(c.responseText)}catch(d){}finally{a.callbacks.failure(c)}};return c},executeCrudCommandViaPageService:function(a,b,c){var e=this,f={id:a.config.id,type:a.type};_.extend(f,b);var g=JSON.stringify({json:JSON.stringify(f)}),h={url:[e.config.appPath,"PageServices/RESTCrud.asmx",c].join("/"),contentType:"application/json; charset=utf-8",type:"POST",data:g,dataType:"json"},i=this.getErrorCallback(a);e.config.api.ajax(h).success(function(b){var c={id:b.d.id};if(b.d.isError===!0){a.callbacks.failure({Message:b.d.errorMessage,CRUD:!0});return}if(b.d.jsonToReturn&&b.d.jsonToReturn.length>0){var e=$.parseJSON(b.d.jsonToReturn);e=d.formatObject(e),_.extend(c,e.data)}a.callbacks.success(c)}).error(i)},executeCrudCommand:function(a,b){var c=this;_.defaults(a.config,{format:"json"});var d={id:a.config.id};_.extend(d,b.$set);var e=c.getUrl(a,"resultInclude"),f=a.config.format,g=c._getFields(a),h=c._getApiConfig(e,f,"convert",g);_.extend(h,{url:e,contentType:"application/json; charset=utf-8",type:"POST",processData:!1,data:JSON.stringify(d),dataType:"json"}),c._executeApiCall(a,"json",h)},find:function(a){this.get(a)},refresh:function(a){this.get(a)},getCompleteCallback:function(a){var b=this,c=function(c){if(a.type==="context"||a.type==="implementationHistory")c.id=a.config.id;if(a.config.nested===!0){var e=b._getNestedObject(a),f=d.header.getFieldName(e),g={id:a.config.id};g[f]=c,c=g}a.callbacks.success(c)};return c},_getArrayConverter:function(a,b){var d=this;return function(e){var f=d.config.api.parseJSON(e);return c[a]({header:b},f)}},_getJsonConverter:function(){var a=this;return function(b){var c=a.config.api.parseJSON(b);return d.formatObject(c)}},_getApiConfig:function(a,b,c,d){var e=this;return{url:a,accepts:{array:"application/x-array"},dataType:b,converters:{"text array":e._getArrayConverter(c,d),"text json":e._getJsonConverter()}}},_getNextPageFields:function(a){var b=a.fields,c=e.getQueryValueFromUrl(a.url,"include");return c&&c.length>0&&(b=d.parseFieldsFromString(c)),b},_executeApiCall:function(a,b,c){var d=this,e=d.getErrorCallback(a),f=d.getCompleteCallback(a),g=null,h=[],i=function(){var a=h.length===0;return a&&f(g),a},j=function(a){for(var b=0,c=a.nextPages.length;b<c;b++){var d=a.nextPages[b];k(d)}},k=function(a){var c=d._getNextPageFields(a),f=d._getApiConfig(a.url,b,"convertArray",c);d.config.api.ajax(f).success(function(b){h=h.concat(b.nextPages||[]);var c=a.holder;_.each(b.data,function(a){c.push(a)}),b.data.getNextPage&&(b.data.getNextPage().holder=a.holder),j(b);var d=_.indexOf(h,a);h.splice(d,1),i()}).error(e)},l=function(b){g=b.data;if(a.name==="find"){f(g);return}h=h.concat(b.nextPages||[]),i(),j(b)};d.config.api.ajax(c).success(l).error(e)},get:function(a){var b=this;_.defaults(a.config,{format:"array"});var c=a.config.nested===!0||!a.config.id?"convertArray":"convert",d=b.getUrl(a),e=a.config.format,f=b._getFields(a),g=b._getApiConfig(d,e,c,f);b._executeApiCall(a,e,g)},_formIncludes:function(a){var b=[],c=this;return _.each(a,function(a){if(d.header.isSimple(a)){var e=a;a.indexOf("$ref")===0&&(e=a.replace("$ref:","")),b.push(e);return}var f=d.header.getFieldName(a);b.push(f+c._formIncludes(a[f]))}),["[",b.join(","),"]"].join("")},_getQueryOperators:function(){var a=function(a,b){var c=this,d=[];return _.isArray(b)||(b=[b]),_.each(b,function(b){d.push("("+a+" "+c.name+" "+JSON.stringify(b)+")")}),d},b=function(a){return["("+a+" "+this.name+")"]},c=function(a,b){var c=this,d=[];_.isArray(b)||(b=[b]);var e=[];return _(b).each(function(a){e.push(JSON.stringify(a))}),d.push("("+a+" "+c.name+" ("+e.join(",")+"))"),d};return{$in:{name:"in",render:c},$ne:{name:"ne",render:a},$gt:{name:"gt",render:a},$gte:{name:"gte",render:a},$lt:{name:"lt",render:a},$lte:{name:"lte",render:a},$contains:{name:"contains",render:a},$eq:{name:"eq",render:a},$isNull:{name:"is null",render:b},$isNotNull:{name:"is not null",render:b}}},_isQueryValueWithOperator:function(a,b){var c=_(a).keys();if(c.length===0)return!1;var d=b||this._getQueryOperators();return d.hasOwnProperty(c[0])},_formWhere:function(a,b){var c=[],d=this;b=b||"";var e=d._getQueryOperators();return _.each(_(a).keys(),function(f){var g=a[f],h=b+f;if(_.isString(g)||_.isNumber(g)||_.isDate(g)||_.isArray(g)||_.isBoolean(g)||_.isNull(g)){var i=g===null?"$isNull":"$eq";c=c.concat(e[i].render(h,g));return}if(d._isQueryValueWithOperator(g,e)){_.each(_(g).keys(),function(a){c=c.concat(e[a].render(h,g[a]))});return}c.push(d._formWhere(g,f+"."))}),c},_getWhere:function(a){var b=this._formWhere(a);return b.length===0?"":"&where="+encodeURIComponent(b.join(" and "))},_getNestedObject:function(a){var b=null;return _.each(a.config.fields,function(a){d.header.isSimple(a)||(b=a)}),b},_getFields:function(a){if(a.config.nested!==!0)return a.config.fields;var b=this._getNestedObject(a),c=d.header.getFieldName(b);return b[c]},_getOrderBy:function(a){return!a.config.$orderBy||a.config.$orderBy===""?"":"&orderBy="+a.config.$orderBy},_getOrderByDesc:function(a){return!a.config.$orderByDesc||a.config.$orderByDesc===""?"":"&orderByDesc="+a.config.$orderByDesc},getUrl:function(a,b){var c=this,e={$skip:0,$limit:999,$query:{}};_.defaults(a.config,e);if(a.type==="context")return a.config.format="json",[c.config.path,"context.asmx","?ids="+a.config.id].join("/");if(a.type==="implementationHistory")return a.config.format="json",[c.config.appPath,"Reports/ImplementationHistory.ashx?id="+a.config.id+"&"+(new Date).valueOf()].join("/");var f=c.config.types[a.type]||{resource:a.type},g=a.config.fields,h=[c.config.path,f.resource+".asmx",a.config.id].join("/");if(a.config.nested===!0){var i=c._getNestedObject(a),j=d.header.getFieldName(i);g=i[j],h=[h,j].join("/")}return a.name&&a.name.indexOf("remove")>=0?h:(h=[h,"?skip=",a.config.$skip,"&take=",a.config.$limit,"&",b?b:"include","=",c._formIncludes(g),a.name==="find"?c._getWhere(a.config.$query):"",c._getOrderBy(a),c._getOrderByDesc(a)].join(""),h)}});return f}),define("tau/rules/auto-include-beforeSave",["Underscore"],function(_){return{"auto include beforeSave":function(a,b){var c=this,d=a.data.obj;for(var e=0;e<b.fields.length;e++){var f=b.fields[e];(c.store.isPropertyInitialized(d.id,d.type,_.getFieldName(f))||b.force)&&_.mergeFields(a.data.cmd.config.fields,[f])}}}}),define("tau/rules/core",["Underscore","tau/core/class","tau/rules/auto-include-beforeSave"],function(_,a,b){return a.extend({init:function(a){var c=this;c.store=a.store||{},a.rulesImpl=a.rulesImpl||{},_.extend(c,b),_.extend(c,{name:"rules engine"}),_(a.rulesImpl).each(function(a){_.extend(c,a)}),c.register(a.rules||[])},register:function(a){var c=this;_.isArray(a)||(a=[a]),_(a).each(function(a){_.defaults(a,{name:_(b).keys()[0],fields:[],changes:[]});if(!a.hasOwnProperty("type"))throw"type should be configured for rule";if(a.fields.length===0)return;_.each(a.changes,function(b){var d=function(b){c[a.name](b,a)},e=a.name.split(" ");c.store.on({eventName:e[e.length-1],type:a.type,listener:c,hasChanges:[b]},d)})})},registerRule:function(a){var b=this;_.defaults(a,{fields:[],changes:[]});if(!a.hasOwnProperty("name"))throw'"name" field should be configured for rule';if(!a.hasOwnProperty("type"))throw'"type" field should be configured for rule';if(!b.hasOwnProperty(a.name))throw"unknown rule name ["+a.name+"]";b[a.name].call(b,a)},destroy:function(){var a=this.store;delete this.store,a.unbind(this)}})}),define("tau/rules/rule.auto-include-before-save",["Underscore"],function(_){var a=function(a,b){var c=this,d=a.data.obj;for(var e=0;e<b.fields.length;e++){var f=b.fields[e];(c.store.isPropertyInitialized(d.id,d.type,_.getFieldName(f))||b.force)&&_.mergeFields(a.data.cmd.config.fields,[f])}};return{"auto-include-before-save":function(b){var c=this;if(b.fields.length===0)return;_.each(b.changes,function(d){var e=[d],f=function(d){a.call(c,d,b)};c.store.on({eventName:"beforeSave",type:b.type,listener:c,hasChanges:e},f)})}}}),define("tau/rules/rule.auto-action-after-save",["Underscore"],function(_){var a=function(a,b){var c=this,d=a.data,e={store:c.store,data:d};b.action(e)};return{"auto-action-after-save":function(b){var c=this,d=function(d){a.call(c,d,b)},e={eventName:"afterSave",type:b.type,listener:c};b.hasOwnProperty("changes")&&b.changes.length&&(e.hasChanges=[b.changes.join("|")]),c.store.on(e,d)}}}),define("tau/rules/rule.auto-include-before-remove",["Underscore"],function(_){var a=function(a,b){var c=this,d=a.data.obj;for(var e=0;e<b.fields.length;e++){var f=b.fields[e];_.mergeFields(a.data.cmd.config.fields,[f])}};return{"auto-include-before-remove":function(b){var c=this;if(b.fields.length===0)return;var d=function(d){a.call(c,d,b)};c.store.on({eventName:"beforeRemove",type:b.type,listener:c},d)}}}),define("tau/target.process.rules.registrator",["Underscore","tau/store/types.targetprocess"],function(_,a){return{typeContainSimpleField:function(a,b){return _.find(a.simpleFields,function(a){return a===b})},registerRules:function(b,c){this.registeredEntityTypes={},this.rules=b,_.each(a.getDictionary(),this.registerType,this),b.register({type:"feature",changes:["initialEstimate"],fields:["timeRemain"]}),b.register({type:"iteration",changes:["startDate"],fields:["endDate"]}),b.register({type:"iteration",changes:["endDate"],fields:["startDate"]}),b.register({type:"testPlanRun",changes:["release"],fields:[{build:["id","name"]}]}),b.register({type:"testPlanRun",changes:["iteration"],fields:[{build:["id","name"]}]}),b.registerRule({name:"auto-include-before-save",type:"roleEffort",changes:["effort"],fields:[{assignable:["id","effort","effortToDo","effortCompleted","timeSpent","timeRemain"]}]}),b.registerRule({name:"auto-include-before-save",type:"userStory",changes:["release","iteration"],fields:[{tasks:[{release:["id","name"]},{iteration:["id","name"]}]}]}),b.registerRule({name:"auto-include-before-save",type:"task",changes:["entityState"],fields:[{release:["id","name"]},{iteration:["id","name"]}]}),b.registerRule({name:"auto-action-after-save",type:"assignable",changes:["times"],action:function(a){a.store.refresh("assignable",{id:a.data.id,fields:["effortCompleted","effortToDo","timeSpent","timeRemain",{roleEfforts:["id","effort","effortToDo"]}]}).done()}}),b.registerRule({name:"auto-action-after-save",type:"feature",changes:["userStories"],action:function(a){a.store.refresh("feature",{id:a.data.id,fields:["effortCompleted","effortToDo","timeSpent","timeRemain","userStories-count","effort",{roleEfforts:["id","effort","effortToDo"]}]}).done()}}),b.registerRule({name:"auto-action-after-save",type:"iteration",changes:["userStories|bugs"],action:function(a){a.store.refresh("iteration",{id:a.data.id,fields:["bugs-effortToDo-sum","bugs-effortCompleted-sum","userStories-effortToDo-sum","userStories-effortCompleted-sum"]}).done()}}),b.registerRule({name:"auto-action-after-save",type:"release",changes:["userStories"],action:function(a){a.store.refresh("release",{id:a.data.id,fields:["bugs-effortToDo-sum","bugs-effortCompleted-sum","userStories-effortToDo-sum","userStories-effortCompleted-sum",{features:["effortToDo","effortCompleted","userStories-count"]}]}).done()}}),b.registerRule({name:"auto-action-after-save",type:"userStory",changes:["tasks"],action:function(a){if(a.data.cmd.type==="task"&&!a.data.cmd.config.id)return;a.store.refresh("userStory",{id:a.data.id,fields:["effort","effortToDo","effortCompleted","timeSpent","timeRemain","tasks-count","tasks-effort-sum","tasks-effortToDo-sum"]}).done()}}),b.registerRule({name:"auto-include-before-save",type:"task",changes:["entityState"],fields:[{userStory:["id","tasks-effort-sum","tasks-effortToDo-sum","effort","effortToDo","effortCompleted","timeSpent","timeRemain","tasks-count",{entityState:["id","name","isInitial","isFinal","isPlanned","isCommentRequired"]}]}]}),b.registerRule({name:"auto-include-before-save",type:"userStory",changes:["entityState"],fields:["tasks-effortToDo-sum",{feature:["effortToDo","effortCompleted","userStories-count"]},{iteration:["userStories-effortToDo-sum","userStories-effortCompleted-sum"]},{release:["bugs-effortToDo-sum","bugs-effortCompleted-sum","userStories-effortToDo-sum","userStories-effortCompleted-sum",{features:["effortToDo","effortCompleted","userStories-count"]}]}]}),b.registerRule({name:"auto-action-after-save",type:"feature",changes:["userStories"],action:function(a){a.store.refresh("feature",{id:a.data.obj.id,fields:["effortToDo","effortCompleted","userStories-count"]}).done()}}),b.registerRule({name:"auto-include-before-save",type:"bug",changes:["entityState"],fields:[{iteration:["bugs-effortToDo-sum","bugs-effortCompleted-sum"]}]}),b.registerRule({name:"auto-action-after-save",type:"roleEffort",changes:["effort"],action:function(a){var b=a.store,c=a.data.obj;b.get(c.type,{id:c.id,fields:[{assignable:["id"]}]}).done({success:function(a){a=a[0];var c=a.data.assignable.id,d=a.data.assignable.__type,e={task:[{userStory:["id","effort","effortToDo","effortCompleted","timeSpent","timeRemain","tasks-count","tasks-effort-sum","tasks-effortToDo-sum"]}],userStory:[{iteration:["userStories-effortToDo-sum","userStories-effortCompleted-sum"]},{release:["userStories-effortToDo-sum","userStories-effortCompleted-sum"]},{feature:["userStories-count","effort","effortToDo","effortCompleted","timeSpent","timeRemain"]}],bug:[{iteration:["bugs-effortToDo-sum","bugs-effortCompleted-sum"]},{release:["bugs-effortToDo-sum","bugs-effortCompleted-sum"]}]},f=e[d];if(f){var g=_(f).filter(function(a){var e=_.getFieldName(a);return b.isPropertyInitialized(c,d,e)});g.length&&b.refresh(d,{id:c,fields:g}).done()}}})}}),b.registerRule({name:"auto-action-after-save",type:"comment",action:function(a){var b=a.data,d=b.cmd["comment-practices-notification-opts"];if(d&&_(d).keys().length){var e=c.getNotificationService();e.notifyComment(b.id,d)}}})},registerType:function(a){var b=this.registeredEntityTypes,c=this.rules;if(!b.hasOwnProperty(a.name)){b[a.name]=!0,_.each(a.aliases,function(a){b[a]=!0});var d="endDate";a.refs.hasOwnProperty("entityState")&&this.typeContainSimpleField(a,d)&&(c.register({type:a.name,changes:["entityState"],fields:["endDate"]}),c.register({type:a.name,changes:["entityState"],fields:[{roleEfforts:["effort","effortToDo"]}]}))}}}}),define("tau/core/keyboard.manager",["Underscore","jQuery"],function(_,$){function a(){}function b(){$(document).keydown(_.bind(c,this))}function c(){if(this.keyboardHandlers.length==0)return;var a=this.keyboardHandlers[this.keyboardHandlers.length-1];a&&a.handleKeyDown.apply(a,arguments)}function d(){this.keyboardHandlers=[],this.pushHandler=f,b.call(this),this.pushHandler.apply(this,arguments)}function e(){this.keyboardHandlers.pop()}function f(a){this.keyboardHandlers.push(a)}return a.prototype={pushHandler:d,popHandler:e},a}),define("tau/core/external",["Underscore","jQuery","tau/core/class","libs/json2"],function(_,$,a){return a.extend({init:function(a){this.external=_.defaults(a,{location:{hash:""}})},getHash:function(){var a=this.external.location.hash;while(a.indexOf("#")===0)a=a.substr(1);return a},setHash:function(a){this.external.location.hash="#"+a},hashParams:function(){var a={},b=this.getHash(),c=b.split("&");for(var d=0,e=c.length;d<e;d++){var f=c[d],g=f.indexOf("=");if(g!==-1){var h=f.substr(0,g),i=f.substr(g+1),j=i;try{j=JSON.parse(i)}catch(k){}a[h]=j}}return a},getHashParam:function(a){var b=this.hashParams(),c=b[a]||{};return c},setHashParam:function(a,b){var c=this.getHash(),d=c.indexOf("&"+a+"="),e=d!==-1?d:c.length;d=c.indexOf("&",1+e);var f=d!==-1?d:c.length,g="";if(b!==null){var h=_.isString(b)?b:JSON.stringify(b);g="&"+a+"="+h}var i=c.substring(0,e),j=c.substring(f),k=i+g+j;this.setHash(k)},onHashChange:function(a){var b=this,c=function(c){c.stopPropagation(),c.preventDefault(),a(b)};$(this.external).bind("hashchange",c)},triggerHashChange:function(a){$(this.external).trigger("hashchange",{hash:a})}})}),define("tau/core/state.manager",["Underscore","tau/core/class"],function(_,a){var b=function(){},c=a.extend({init:function(a){a=a||{};var b=[];a.state||b.push("state"),a.service||b.push("service");if(b.length>0)throw"State manager should be initialized with following parameters: ["+b.join(",")+"]";this.subscriptions={},this.cfg=a},get:function(a){var c=this;if(!a.id)throw"StateManager.get operation requires parameter [id]";var d=_.defaults(a,{fields:[],callback:b}),e=this.cfg.service;return e.get(d),c},set:function(a){var c=this;if(!a.id)throw"StateManager.set operation requires parameter [id]";var d=_.defaults(a,{set:{},callback:b}),e=this.cfg.service;return e.set(d),c},update:function(a){var b=this,c=this.cfg.state,d=[];_(a).chain().keys().each(function(e){d.push(e);var f=c[e]||{},g=a[e],h=_(f).keys(),i=_(g).keys();_(_.union(h,i)).each(function(a){if(g[a]!==f[a]){var c=f.hasOwnProperty(a)?f[a]:null,d=g.hasOwnProperty(a)?g[a]:null;b.applyChanges({paramId:e,fieldName:a,value:d,delta:{prev:c,curr:d}})}})}),_(c).chain().keys().difference(d).each(function(a){var d=c[a];_(d).chain().keys().each(function(c){b.applyChanges({paramId:a,fieldName:c,value:null,delta:{prev:d[c],curr:null}})})}),b.cfg.state=a},applyChanges:function(a){var b=this.subscriptions,c=(b[a.paramId]||{})[a.fieldName]||[];for(var d=0,e=c.length;d<e;d++){var f=c[d];f.callback.call(f.scope,a)}},bind:function(a){var b=a.paramId,c=a.fieldName,d=a.callback,e=a.listener,f=this.subscriptions;return f[b]=f[b]||{},f[b][c]=f[b][c]||[],f[b][c].push({callback:d,scope:e}),this},unbind:function(a){var b=this.subscriptions,c=_(b).keys();for(var d=0,e=c.length;d<e;d++){var f=c[d],g=_(b[f]).keys();for(var h=0,i=g.length;h<i;h++){var j=g[h],k=b[f][j];for(var l=0;l<k.length;)k[l].scope===a?k.splice(l,1):++l;b[f][j].length===0&&delete b[f][j]}_(b[f]).keys()===0&&delete b[f]}}});return c}),define("tau/services/service.routing",["Underscore","tau/core/Class"],function(_,a){var b=a.extend({init:function(a){a=a||{},this.config=a,this.external=a.external},get:function(a){var b={},c=a.id,d=a.fields,e=d.length,f=this.external.getHashParam(c);for(var g=0;g<e;g++){var h=d[g];b[h]=f.hasOwnProperty(h)?f[h]:null}a.callback(b)},set:function(a){var b=a.id,c=a.set,d=this.external.getHashParam(b),e=_(d).extend(c);this.external.setHashParam(b,e),a.callback(e)}});return b}),define("tau/utils/utils.storage",[],function(){var a=typeof window.localStorage!="undefined"&&window.localStorage!==null&&!!window.localStorage.getItem&&!!window.localStorage.setItem,b={set:function(a,b){return localStorage.setItem(a,JSON.stringify(b)),!0},get:function(a){var b=localStorage.getItem(a);if(b)try{b=JSON.parse(b)}catch(c){}return b},remove:function(a){return localStorage.removeItem(a)}},c={set:function(a,b,c){var d=new Date;d.setTime(d.getTime()+31536e6),c=c||d.toGMTString();var e="expires="+c,f=[a+"="+JSON.stringify(b),e,"path=/"].join("; ");document.cookie=f},get:function(a){a+="=";var b=document.cookie.split(";"),c;for(i=0;i<b.length;i++){var d=b[i];while(d.charAt(0)===" ")d=d.substring(1,d.length);d.indexOf(a)===0&&(c=d.substring(a.length,d.length),c=JSON.parse(c))}return c},remove:function(a){return c.set(a,"",-1)}};return a?storage=b:storage=c,storage}),function(){function a(a){var b=a.currentTarget||a.srcElement,c;if(a.type==="load"||f.test(b.readyState)){a=b.getAttribute("data-requiremodule"),h[a]=!0;for(a=0;c=g[a];a++)if(h[c.name])c.req([c.name],c.onLoad);else break;a>0&&g.splice(0,a),setTimeout(function(){b.parentNode.removeChild(b)},15)}}function b(a){var b,c;a.setAttribute("data-orderloaded","loaded");for(a=0;c=j[a];a++)if((b=i[c])&&b.getAttribute("data-orderloaded")==="loaded")delete i[c],require.addScriptToDom(b);else break;a>0&&j.splice(0,a)}var c=typeof document!="undefined"&&typeof window!="undefined"&&document.createElement("script"),d=c&&(c.async||window.opera&&Object.prototype.toString.call(window.opera)==="[object Opera]"||"MozAppearance"in document.documentElement.style),e=c&&c.readyState==="uninitialized",f=/^(complete|loaded)$/,g=[],h={},i={},j=[],c=null;define("order",{version:"1.0.5",load:function(c,f,h,l){var p;f.nameToUrl?(p=f.nameToUrl(c,null),require.s.skipAsync[p]=!0,d||l.isBuild?f([c],h):e?(l=require.s.contexts._,!l.urlFetched[p]&&!l.loaded[c]&&(l.urlFetched[p]=!0,require.resourcesReady(!1),l.scriptCount+=1,p=require.attach(p,l,c,null,null,b),i[c]=p,j.push(c)),f([c],h)):f.specified(c)?f([c],h):(g.push({name:c,req:f,onLoad:h}),require.attach(p,null,c,a,"script/cache"))):f([c],h)}})}(),function(a){function c(a,b,c,d,e){this._listener=b,this._isOnce=c,this.context=d,this._signal=a,this._priority=e||0}var b={VERSION:"0.6"};c.prototype={active:!0,execute:function(a){var b;return this.active&&(b=this._listener.apply(this.context,a),this._isOnce&&this.detach()),b},detach:function(){return this._signal.remove(this._listener)},getListener:function(){return this._listener},dispose:function(){this.detach(),this._destroy()},_destroy:function(){delete this._signal,delete this._isOnce,delete this._listener,delete this.context},isOnce:function(){return this._isOnce},toString:function(){return"[SignalBinding isOnce: "+this._isOnce+", active: "+this.active+"]"}},b.Signal=function(){this._bindings=[]},b.Signal.prototype={_shouldPropagate:!0,active:!0,_registerListener:function(a,b,d,e){if(typeof a!="function")throw new Error("listener is a required param of add() and addOnce() and should be a Function.");var f=this._indexOfListener(a),g;if(f!==-1){g=this._bindings[f];if(g.isOnce()!==b)throw new Error("You cannot add"+(b?"":"Once")+"() then add"+(b?"Once":"")+"() the same listener without removing the relationship first.")}else g=new c(this,a,b,d,e),this._addBinding(g);return g},_addBinding:function(a){var b=this._bindings.length;do--b;while(this._bindings[b]&&a._priority<=this._bindings[b]._priority);this._bindings.splice(b+1,0,a)},_indexOfListener:function(a){var b=this._bindings.length;while(b--)if(this._bindings[b]._listener===a)return b;return-1},add:function(a,b,c){return this._registerListener(a,!1,b,c)},addOnce:function(a,b,c){return this._registerListener(a,!0,b,c)},remove:function(a){if(typeof a!="function")throw new Error("listener is a required param of remove() and should be a Function.");var b=this._indexOfListener(a);return b!==-1&&(this._bindings[b]._destroy(),this._bindings.splice(b,1)),a},removeAll:function(){var a=this._bindings.length;while(a--)this._bindings[a]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(a){if(!this.active)return;var b=Array.prototype.slice.call(arguments),c=this._bindings.slice(),d=this._bindings.length;this._shouldPropagate=!0;do d--;while(c[d]&&this._shouldPropagate&&c[d].execute(b)!==!1)},dispose:function(){this.removeAll(),delete this._bindings},toString:function(){return"[Signal active: "+this.active+" numListeners: "+this.getNumListeners()+"]"}},a.signals=b}(window||global||this),define("libs/crossroads.js/dist/js-signals",function(){}),function(a){function g(a,b){var c=a.length;while(c--)if(a[c]===b)return c;return-1}function h(a,b){return"[object "+a+"]"===e.call(b)}function i(a){return h("RegExp",a)}function j(a){return h("Array",a)}function k(a){return h("Function",a)}function l(a){return a===null?a:f.test(a)?a.toLowerCase()==="true":a===""||isNaN(a)?a:parseFloat(a)}var b,c,d,e=Object.prototype.toString,f=/^(true|false)$/i;b=function(){function f(a,b,d){var e=new c(a,b,d);return h(e),e}function h(b){var c=i();do--c;while(a[c]&&b._priority<=a[c]._priority);a.splice(c+1,0,b)}function i(){return a.length}function j(b){var c=k(b);c>=0&&a.splice(c,1),b._destroy()}function k(b){return g(a,b)}function l(){var b=i();while(b--)a[b]._destroy();a.length=0}function m(a){a=a||"";var c=n(a),d=c?o(a,c):null;c?(d?c.matched.dispatch.apply(c.matched,d):c.matched.dispatch(),e.dispatch(a,c,d)):b.dispatch(a)}function n(b){var c=i(),d;while(d=a[--c])if(d.match(b))return d;return null}function o(a,b){return d.getParamValues(a,b._matchRegexp)}var a=[],b=new signals.Signal,e=new signals.Signal;return{_routes:a,addRoute:f,removeRoute:j,removeAllRoutes:l,parse:m,bypassed:b,routed:e,getNumRoutes:i,toString:function(){return"[crossroads numRoutes:"+i()+"]"}}}(),c=function(a,b,c){var e=i(a);this._pattern=a,this._paramsIds=e?null:d.getParamIds(this._pattern),this._matchRegexp=e?a:d.compilePattern(a),this.matched=new signals.Signal,b&&this.matched.add(b,this),this._priority=c||0},c.prototype={rules:void 0,match:function(a){return this._matchRegexp.test(a)&&this._validateParams(a)},_validateParams:function(a){var b=this.rules,c;for(c in b)if(b.hasOwnProperty(c)&&!this._isValidParam(a,c))return!1;return!0},_isValidParam:function(a,b){var c=this.rules[b],d=this._getParamValuesObject(a),e=d[b],f;return i(c)?f=c.test(e):j(c)?f=g(c,e)!==-1:k(c)&&(f=c(e,a,d)),f||!1},_getParamValuesObject:function(a){var b=this._paramsIds,c=d.getParamValues(a,this._matchRegexp),e={},f=b?b.length:0;while(f--)e[b[f]]=c[f];return e.request_=l(a),e},dispose:function(){b.removeRoute(this)},_destroy:function(){this.matched.dispose(),this.matched=this._pattern=this._matchRegexp=null},toString:function(){return'[Route pattern:"'+this._pattern+'", numListeners:'+this.matched.getNumListeners()+"]"}},d=b.patternLexer=function(){function f(a){var b=[],d,e=new RegExp(c);while(d=e.exec(a))b.push(d[1]);return b}function g(a){return a=a?h(a):"",a=a.replace(/\/$/,""),a=j(a),a=i(a),new RegExp("^"+a+"/?$")}function h(a){return a.replace(c,d)}function i(a){return a.replace(e,b.source)}function j(b){return b.replace(a,"\\$&")}function k(a,b){var c=b.exec(a);return c&&(c.shift(),c=m(c)),c}function m(a){var b=a.length,c=[];while(b--)c[b]=l(a[b]);return c}var a=/[\\\.\+\*\?\^\$\[\]\(\)\{\}\/\'\#]/g,b=/([^\/]+)/,c=/\{([^\}]+)\}/g,d="___CR_PARAM___",e=new RegExp(d,"g");return{getParamIds:f,getParamValues:k,compilePattern:g}}(),a.crossroads=b}(window||this),define("libs/crossroads.js/dist/crossroads",function(){}),define("tau/utils/utils.history",["Underscore","tau/core/class","tau/core/event","order!libs/crossroads.js/dist/js-signals","order!libs/crossroads.js/dist/crossroads"],function(_,a,b){var c=a.extend({init:function(){this.stack=[],this.current=null},size:function(){return this.stack.length},push:function(a){var b=a;return b.index=this.stack.length,this.stack.push(b),this},pop:function(){var a=this.stack.pop();return a},rewindTo:function(a){var b=this.stack.length;for(var c=b-1;c>=0;c--){var d=this.stack[c];d.index>a&&this.stack.pop()}return this.fire("changed"),this},setCurrent:function(a){this.current=a,this.fire("setCurrent")},getCurrent:function(){return this.current},process:function(){this.current&&this.stack.push(_.clone(this.current)),this.current=null},updateCurrent:function(a){this.current&&(this.current.url=a.url||this.current.url,this.current.title=a.title||this.current.title,this.current.id=a.id||this.current.id,this.fire("setCurrent"))},exclude:function(a,b){this.stack=_.reject(this.stack,function(b,c){return b.id&&b.id==a}),this.current.id==a&&(this.current=null),b!==!1&&this.fire("changed")}});return b.implementOn(c.prototype),c}),define("libs/parseUri",[],function(){function a(b){var c=a.options,d=c.parser[c.strictMode?"strict":"loose"].exec(b),e={},f=14;while(f--)e[c.key[f]]=d[f]||"";return e[c.q.name]={},e[c.key[12]].replace(c.q.parser,function(a,b,d){b&&(e[c.q.name][b]=d)}),e}return a.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},a}),define("tau/utils/utils.routing/utils.routing.store.hash",["Underscore","jQuery","tau/core/class","tau/core/event","libs/parseUri"],function(_,$,a,b,c){var d=a.extend({init:function(a){this.config=a,this.window=this.config.window||window,this.params=[];var b=this;this.hashChangeHandler=function(a){a.stopPropagation(),a.preventDefault();var c=a.hash||a.target.location.hash;b.fire("urlChanged",{url:b.parseUrl(c)})},$(this.window).bind("hashchange",this.hashChangeHandler),this.destroyHandler=function(a){b.fire("destroyed",{})},$(this.window).bind("unload",this.destroyHandler)},_extract:function(a){var b=a;if(this.config.safe==1){a="?"+a;var d=c(a);this.params=d.queryKey,b=this.params[this.config.safeParameterName]||""}return b},_generate:function(a,b){b=!!b;var c=a.url;_.isEmpty(a.states)==0&&b&&(c+="||"+JSON.stringify(a.states));var d=c;return this.config.safe==1&&(this.params[this.config.safeParameterName]=c,d=$.param(this.params)),d},parseUrl:function(a){a&&a[0]=="#"&&(a=a.slice(1));var b=this._extract(a);try{$.browser.safari===!0&&(b=decodeURIComponent(b))}catch(c){}var d={url:null,states:{},source:"#"+a},e=b.split("||");d.url=e[0];if(e[1])try{d.states=JSON.parse(e[1])}catch(c){}return d},generateUrl:function(a,b){return this._generate(a,b)},setUrl:function(a){var b="#";_.isObject(a)&&a.hasOwnProperty("url")&&a.hasOwnProperty("states")?b=this._generate(a,!0):_.isString(a)&&(b=a),this.window.location.hash=b},getUrl:function(){return this.parseUrl(this.window.location.hash)}});return b.implementOn(d.prototype),d}),define("tau/utils/utils.routing",["Underscore","jQuery","tau/core/class","tau/core/event","tau/utils/utils.routing/utils.routing.store.hash","tau/utils/utils.storage","order!libs/crossroads.js/dist/js-signals","order!libs/crossroads.js/dist/crossroads"],function(_,$,a,b,c,d){var e=a.extend({init:function(a){return this.backend=window.crossroads,this.options=a,this.window=this.options.window||window,this.store=new c(this.options),this.current={url:"",states:{},source:""},this.processed={url:"",states:{},source:""},this.referer=this.restoreReferer(),this.reset(),this},register:function(a,b,c){var d=a;arguments.length>1&&(d={pattern:a,callback:b});var e=this;return this.backend.addRoute(d.pattern,function(){var a=Array.prototype.slice.call(arguments),b=this,c={};_.forEach(b._paramsIds,function(b,d){c[b]=a[d]});var f=e.processed.states;d.callback.apply(this,[c,f])}),this},register404:function(a){return this.backend.bypassed.add(a),this},_applyRouter:function(a){this.backend.parse(a)},start:function(){var a=this,b=_.bind(this._applyRouter,this),c=function(c){this.processed=c;if(this.processed.url!==this.current.url){this.setReferer(_.clone(this.current)),this.current=this.processed,b(this.current.url);return}var d=this.current.states,e=this.processed.states,f=_.union(_.keys(d),_.keys(e)),g={};_.forEach(f,function(a){d[a]!=e[a]&&(g[a]=e[a]||null)}),_.forEach(g,function(b,c){a.fire("stateChanged",{name:c,value:b})}),this.current=this.processed};this.setChangeListener(_.bind(c,this));var d=function(){this.setReferer(_.clone(this.current))};return this.setDestroyListener(_.bind(d,this)),this},redirect:function(a){this.window.open(a,"_self")},setInternalUrl:function(a){this.setUrl({url:a,states:{}})},getUrl:function(){return this.store.getUrl()},setUrl:function(a){this.store.setUrl(a)},generateUrl:function(a){return typeof a=="undefined"&&(a=this.current),this.store.generateUrl(a,!0)},setChangeListener:function(a){this.changeListener=function(b){a(b.data.url)},this.store.on("urlChanged",this.changeListener,this)},setDestroyListener:function(a){this.destroyListener=function(b){a(b.data.url)},this.store.on("destroyed",this.destroyListener,this)},reset:function(){return this.backend.removeAllRoutes(),this.backend.bypassed.removeAll(),this},execute:function(a){var b=this.store.parseUrl(a);return this.current=b,this._applyRouter(b.url),this},stop:function(){this.changeListener&&(this.store.removeListener("urlChanged",this.changeListener,this),delete this.changeListener),this.destroyListener&&(this.store.removeListener("destroy",this.destroyListener,this),delete this.destroyListener)},getStateParameter:function(a){return this.current.states[a]},setStateParameter:function(a,b,c){this.current.states[a]=b,this.setUrl(this.current),c&&this.fire("stateChanged",{name:a,value:b})},getReferer:function(){return this.referer},setReferer:function(a){this.referer=a,d.set("utils.routing.referer",this.referer)},restoreReferer:function(){var a=d.get("utils.routing.referer");return a}});return b.implementOn(e.prototype),e}),define("tau/store/services/service.globalSettings",["tau/core/class"],function(a){var b=null,c=a.extend({init:function(a){this.config=a},resetSettings:function(){b=null},getGlobalSettings:function(a){var c=function(a,b){a.success&&a.success.call(a.scope,b.d)};if(b){c(a,b);return}this.sendRequest("GlobalSettingsService","GetGlobalSettings",null,function(d){b=d,c(a,d)},function(b){a.failure&&a.failure.call(a.scope,b)})},sendRequest:function(a,b,c,d,e){var f=this.config.appPath+"/PageServices/"+a+".asmx/"+b,g={contentType:"application/json",type:"POST",success:d,error:e};c&&(g.data=JSON.stringify(c)),$.ajax(f,g)}});return c}),define("tau/store/services/service.notifications",["tau/core/class"],function(a){var b=a.extend({init:function(a){this.config=a},notifyComment:function(a,b,c){c=c||{},this.sendRequest("CommentsNotificationService","Notify",{commentId:a,options:b},function(a){c.success&&c.success.call(c.scope,a.d)},function(a){c.failure&&c.failure.call(c.scope,a)})},sendRequest:function(a,b,c,d,e){var f=this.config.appPath+"/PageServices/"+a+".asmx/"+b,g={contentType:"application/json",type:"POST",success:d,error:e};c&&(g.data=JSON.stringify(c)),$.ajax(f,g)}});return b}),define("tau/store/services/service.actions",["Underscore","tau/core/class"],function(_,a){var b=a.extend({init:function(a){this.config=a},getActionUrl:function(a){return this.config.appPath+"/PageServices/ActionsService.asmx/"+a},getActiveProjectForEntity:function(a,b,c){var d={generalId:a};this.sendRequest("GetActiveProjectForEntity",d,b,c)},copyGeneralToProject:function(a,b,c,d){var e={generalId:a,projectId:b};this.sendRequest("CopyGeneralToProject",e,c,d)},getProjectIds:function(a,b){var c={};this.sendRequest("GetProjectIds",c,a,b)},moveGeneralToProject:function(a,b,c,d){var e={generalId:a,projectId:b};this.sendRequest("MoveGeneralToProject",e,c,d)},attachGeneralToRequest:function(a,b,c,d){var e={generalId:a,requestId:b};this.sendRequest("AttachGeneralToRequest",e,c,d)},detachRequest:function(a){var b=function(){},c={generalId:a.generalId,requestId:a.requestId};a=_(a).defaults({success:b,error:b}),this.sendRequest("DetachRequestFromGeneral",c,a.success,a.error)},generalCanConvertTo:function(a,b,c){var d={generalId:a};this.sendRequest("GeneralCanConvertTo",d,b,c)},convertGeneralToTask:function(a,b,c,d){var e={generalId:a,userStoryId:b};this.sendRequest("ConvertGeneralToTask",e,c,d)},convertGeneralToType:function(a,b,c,d){var e={generalId:a,entityTypeId:b};this.sendRequest("ConvertGeneralToType",e,c,d)},splitUserStory:function(a,b,c){var d={generalId:a};this.sendRequest("SplitUserStory",d,b,c)},sendRequest:function(a,b,c,d){$.ajax(this.getActionUrl(a),{contentType:"application/json",type:"POST",data:JSON.stringify(b),success:c,error:d})}});return b}),define("tau/core/bus.reg",["Underscore","tau/core/event"],function(_,a){var b={buses:{},onCreate:function(a){var b=this;b.buses[a.id]=a,b.fire("create",{bus:a})},onDestroy:function(a){if(a.id==="global")return;delete this.buses[a.id],this.fire("destroy",{bus:a})},logCount:function(){console.log("#count: "+this.count())},count:function(a){var b=_(this.buses).keys();return a&&(b=_(b).without("global")),b.length},stats:function(){var a={},b=this;_.each(_(b.buses).keys(),function(c){var d=b.buses[c];a.hasOwnProperty(d.name)||(a[d.name]=0),a[d.name]++}),_.each(_(a).keys(),function(b){console.log(b+" : "+a[b])})}};return a.implementOn(b),window.tau=window.tau||{},_.extend(window.tau,{buses:b}),b}),define("tau/core/bus",["Underscore","tau/core/class","tau/core/bus.reg","tau/core/event"],function(_,a,b,c){function e(a,b,c){var d=b[1],e=b[0];a.name.match(/(diagnostics)/)&&console.log(a.name,"["+a.id+"]",":",e,d||"")}var d=a.extend({globalBus:null,init:function(a){a=a||{},this.globalBus=a&&a.globalBus?a.globalBus:null,this.name=a&&a.name?a.name:_.uniqueId()+"",_.defaults(a,{id:_.uniqueId("bus_")}),this.id=a.id,b.onCreate(this)},initialize:function(a){this.fire("initialize",a)},destroy:function(){this.fire("destroy"),delete this.globalBus},getGlobalBus:function(){return this.globalBus}});return c.implementOn(d.prototype),d.prototype.fire=function(a,d,e){this.globalBus&&this.globalBus.fire(a,d,this);var f=c.prototype.fire.apply(this,arguments);return a==="destroy"&&(b.onDestroy(this),delete this.globalBus),f},d}),define("tau/core/global.bus",["tau/core/bus"],function(a){return{bus:null,reset:function(){this.bus&&this.bus.removeAllListeners(),delete this.bus},get:function(){return this.bus=this.bus||new a({id:"global",name:"globalBus"}),this.bus}}}),define("tau/store/instance",["tau/store/store","tau/store/repository","tau/store/services/service.rest","tau/core/global.bus","tau/rules/core","tau/rules/rule.auto-include-before-save","tau/rules/rule.auto-action-after-save","tau/rules/rule.auto-include-before-remove","tau/target.process.rules.registrator","tau/store/types.targetprocess"],function(a,b,c,d,e,f,g,h,i,j){return{appPath:window.appHostAndPath,rulesDisabled:!1,clearSingles:function(){this.rulesEngine&&(this.rulesEngine.destroy&&this.rulesEngine.destroy(),delete this.rulesEngine),delete this.proxy,delete this.service,delete this.store},clear:function(){this.clearSingles(),delete this.initialData,delete this.appPath,delete this.rulesDisabled},setApplicationPath:function(a){if(this.appPath===a)return;this.appPath=a},getApplicationPath:function(){return this.appPath},setInitialData:function(a){this.initialData=a},setService:function(a){if(this.service===a)return;this.clearSingles(),this.service=a},getService:function(){return this.service||(this.service=new c({appPath:this.getApplicationPath(),path:this.getRestPath()})),this.service},getRestPath:function(){return this.getApplicationPath()+"/api/v1"},setProxy:function(a){this.proxy=a},getProxy:function(){return this.proxy||(this.proxy=new b({service:this.getService()})),this.initialData&&(this.proxy.registerData(this.initialData,!0),delete this.initialData),this.proxy},disableRules:function(){this.rulesDisabled=!0},enableRules:function(){this.rulesDisabled=!1},initRules:function(a){if(this.rulesDisabled===!0)return;this.rulesEngine=new e({store:this.store,rules:[],rulesImpl:[f,g,h]}),i.registerRules(this.rulesEngine,a)},getStore:function(b){return b=b||{},this.store||(b.proxy=this.getProxy(),_.defaults(b,{eventEmitter:d.get()}),this.store=new a(b),this.initRules(b.services)),this.store}}}),define("tau/configurator",["tau/store/instance","tau/core/keyboard.manager","tau/core/global.bus","tau/core/external","tau/core/state.manager","tau/services/service.routing","tau/utils/utils.routing","tau/utils/utils.history","libs/parseUri","tau/store/services/service.globalSettings","tau/store/services/service.notifications","tau/store/services/service.actions"],function(a,b,c,d,e,f,g,h,i,j,k,l){function m(){var a=new b;this.getKeyBoardManager=function(){return a};var c={handleKeyDown:function(a){a.keyCode==$.ui.keyCode.ESCAPE&&(a.preventDefault(),a.stopPropagation())}};return a.pushHandler(c),this.getKeyBoardManager()}return{ckPath:"../Ckeditor/",getKeyBoardManager:m,_config:{},setGlobalSettingsService:function(a){this.globalSettingsService=a},getGlobalSettingsService:function(){if(!this.globalSettingsService){var a={appPath:this.getApplicationPath()};this.globalSettingsService=new j(a)}return this.globalSettingsService},setNotificationService:function(a){this.notificationService=a},getNotificationService:function(){if(!this.notificationService){var a={appPath:this.getApplicationPath()};this.notificationService=new k(a)}return this.notificationService},setActionsService:function(a){this.actionsService=a},getActionsService:function(){if(!this.actionsService){var a={appPath:this.getApplicationPath()};this.actionsService=new l(a)}return this.actionsService},clearSingles:function(){a.clearSingles()},clear:function(){this.clearSingles(),c.reset(),delete this.currentDate,delete this.external,a.clear()},getCurrentAcid:function(){var a="",b=this.getWindow();if(b.location&&b.location.href){var c=b.location.href;a=i(c).queryKey.acid||a}return a},setWindow:function(a){this.window=a},getWindow:function(){return this.window||window},getHistory:function(){return this.history||(this.history=new h),this.history},getRouting:function(){return this.routing||(this.routing=new g({window:this.getWindow()})),this.routing},setCurrentDate:function(a){this.currentDate=a},getCurrentDate:function(){return this.currentDate?this.currentDate:new Date},getGlobalBus:function(){return c.get()},setApplicationPath:function(b){a.setApplicationPath(b)},getApplicationPath:function(){return a.getApplicationPath()},getCkPath:function(){return this.ckPath},setCkPath:function(a){this.ckPath=a},setInitialData:function(b){a.setInitialData(b)},setService:function(b){a.setService(b)},getService:function(){return a.getService()},getRestPath:function(){return a.getRestPath()},setProxy:function(b){a.setProxy(b)},getProxy:function(){return a.getProxy()},disableRules:function(){a.disableRules()},enableRules:function(){a.enableRules()},initRules:function(){a.initRules()},getStore:function(b){return b=b||{},_.defaults(b,{services:this}),a.getStore(b)},setConfig:function(a,b){this._config[a]=b},getConfig:function(a,b){var c=b;return this._config.hasOwnProperty(a)&&(c=this._config[a]),c},setExternal:function(a){this.external=new d(a)},getExternal:function(){return this.external||(this.external=new d(window)),this.external},getStateManager:function(){var a=this;if(!a.stateManager){var b=a.getExternal(),c=new f({external:b});a.stateManager=new e({service:c,state:b.hashParams()}),b.onHashChange(function(b){var c=b.hashParams();a.stateManager.update(c)})}return a.stateManager}}}),define("tau/core/component-base",["Underscore","tau/core/class","tau/configurator","tau/core/bus"],function(_,a,b,c){return a.extend({init:function(a){return this.config=_.extend({},a),this.bus=new c({name:a.name,globalBus:b.getGlobalBus()}),_.defaults(this.config,{configurator:b,bus:this.bus}),this},attach:function(a,b){b=b||{};var c=this.config.disabledExtensionCategories;if(c){var d=a.prototype.category;if(d&&_.indexOf(c,d)>=0)return this}var e=_.clone(this.config);b.hasOwnProperty("onCreate")||(e=_.extend(e,b));var f=new a(e);return b.onCreate&&b.onCreate(f),this}})}),define("tau/components/extensions/application/extension.history",["Underscore","jQuery","tau/core/class","tau/core/event","tau/store/types","tau/configurator"],function(_,$,a,b,c,d){return a.extend({init:function(a){this.config=a,this.bus=a.bus,this.globalBus=this.bus.getGlobalBus(),d.getWindow().document&&(this.defaultTitle=d.getWindow().document.title),b.subscribeOn(this);var c=function(a){var b=d.getHistory().getCurrent();b&&b.title&&(d.getWindow().document.title=b.title)};this._currentHandler=_.bind(c,this),d.getHistory().on("setCurrent",this._currentHandler,this)},"bus controller.preExecute":function(a){d.getHistory().process()},"bus controller.postExecute":function(a){},clearCurrent:function(){d.getHistory().current=null},"bus destroy":function(){d.getWindow().document&&(d.getWindow().document.title=this.defaultTitle),this.clearCurrent(),d.getHistory().stack=[],d.getHistory().removeAllListeners(this)}})}),define("tau/components/extensions/application/extension.routing",["Underscore","jQuery","tau/core/class","tau/core/event","tau/store/types","tau/configurator"],function(_,$,a,b,c,d){return a.extend({init:function(a){this.config=a,this.bus=a.bus;var c=this.routing=d.getRouting(),e=c.getUrl().source;this.defaultHash=e!=="#"?e:"#__"+_.uniqueId(),b.subscribeOn(this)},"bus registerRoute":function(a){var b=a.data;this.routing.register(b.pattern,b.callback)},"bus registerRouteNotFound":function(a){var b=a.data;this.routing.register404(b.callback)},"bus afterInit":function(a){this.bus.fire("routing.registered",{})},"bus controller.ready":function(){this.routing.start();var a=d.getRouting().getUrl();this.config.startUrl?a.url===this.config.startUrl?this.routing.execute(this.config.startUrl):(this.routing.execute(this.config.startUrl),d.getRouting().setInternalUrl(this.config.startUrl)):this.config.executeOnStart!==!1&&this.routing.execute(a.source)},"bus destroy":function(){this.bus.getGlobalBus().removeAllListeners(this),this.routing.reset(),this.routing.stop(),this.routing.setUrl(this.defaultHash),this.routing.removeAllListeners(this)}})}),define("tau/components/extensions/application/extension.routing.patterns",["Underscore","tau/core/event.emitter","tau/core/tau"],function(_,a,b){return a.extend({init:function(a){this._super(a),this.config=a},parseQueryParams:function(){var a=b.getValueFromQueryString("type").split("."),c=/\/(\w+?).aspx$/.exec(window.location.pathname);return{id:b.getValueFromQueryString("id"),entity:a[a.length-1],type:a[a.length-1],action:c&&c.length?c[1]:null}},"bus routing.registered":function(a){var b=this,c=this.parseQueryParams(),d=_.bind(this.execute,this);this.fire("registerRoute",{pattern:"board/{id}",callback:function(a){d("board",a)}}),this.fire("registerRoute",{pattern:"",callback:function(a){d("entity",c)}}),this.fire("registerRoute",{pattern:"{entity}/{id}",callback:function(a){_.defaults(a,{action:"show"}),d("entity",a)}}),this.fire("registerRoute",{pattern:"{entity}/{id}/{action}",callback:function(a){d("entity",a)}}),this.fire("registerRouteNotFound",{callback:function(a){b.fire("error",{message:"URL is not found"})}}),this.fire("dataBind",{})},execute:function(a,b){this.fire("application.navigate."+a,b)},"bus afterRender":function(a){this.fire("controller.ready")}})}),define("tau/utils/utils.redirect",["Underscore","jQuery","tau/core/class","tau/configurator"],function(_,$,a,b){return a.extend({init:function(a){this.context=a,this.window=b.getWindow()},_process:function(a){var c=null;if(a.match(/^http(s)?:\/\//i))c=a;else if(a[0]=="#")c=a;else{var d=b.getApplicationPath();a[0]!=="/"&&(a="/"+a),c=d+a}return this.context&&(c=$.tmpl(c,this.context).text()),c},_redirect:function(a,b){b.location.href=a},redirect:function(a,b){var c=this.window;if(typeof b!="undefined"){var d=$(document),e={scrollbars:1,width:d.width()*.8,height:d.height()*.8,top:50},f=[],g=null;for(g in e)f.push(g+"="+e[g]);var h=f.join(",");c=this.window.open(this._process(a),b,h);return}this._redirect(this._process(a),c)},back:function(){this.window.history&&this.window.history.back&&this.window.history.back()},reload:function(){this.window.location&&this.window.location.reload&&this.window.location.reload()}})}),define("tau/components/extensions/application/extension.integration",["Underscore","jQuery","tau/core/class","tau/core/event","tau/store/types","tau/configurator","tau/utils/utils.redirect"],function(_,$,a,b,c,d,e){return a.extend({init:function(a){this.config=a,this.config.integration=this.config.integration||{},this.bus=a.bus,this.globalBus=this.bus.getGlobalBus(),b.subscribeOn(this),this.criticalChanged=!1,this.window=d.getWindow(),this.redirect=new e},"bus afterRender":function(){$("body").delegate("a[href=#]","click",function(a){a.preventDefault()});var a=this.config.integration.reloadCallback,b=!!a;b?$("html").addClass("tau-html_integration_popup"):$("html").addClass("tau-html_integration_main")},"bus initProgress":function(a){this.config.integration.progress&&this.config.integration.progress.show("Reloading...")},"bus application.error":function(a){this.config.integration.progress&&this.config.integration.progress.hide()},"globalBus showProgress":function(a){this.config.integration.progress&&this.config.integration.progress.show(a.data.text)},"globalBus hideProgress":function(a){this.config.integration.progress&&this.config.integration.progress.hide()},"bus destroy":function(){d.getGlobalBus().removeAllListeners(this),this.window._criticalTauChanges&&(this.bus.fire("initProgress"),this.redirect.reload()),$("body .jquery-notify-bar").remove()},"bus application.reload":function(a){var b=this.config.integration.reloadCallback;if(!!b==0)return;b(a)},"bus application.exit":function(a){var b=this.config.integration.reloadCallback,c=!!b;c?(this.window._criticalTauChanges=!0,this.bus.fire("destroy")):(this.bus.fire("initProgress"),this.redirect.redirect("default.aspx"))}})}),define("tau/components/extensions/error/extension.errorBar",["jQuery","tau/components/extensions/component.extension.base"],function($,a){var b=a.extend({"bus initialize":function(a){if(document.documentMode==7){var b={message:"TargetProcess does not support Compatibility View for Internet Explorer 7. Please, turn it off."};throw this.fire("error",b),b}},"bus error":function(a){var b=a.data.message;$.notifyBar({cls:"error",html:b,delay:6e6})}});return b}),define("tau/ui/extensions/popup/ui.extension.popup",["tau/components/extensions/component.extension.base","tau/core/tau","tau/configurator","tau/extensions/extension.javascript"],function(a,b,c){return a.extend({init:function(a){var b=this;b.bodyOverflow=$("body").css("overflow"),$("body").css("overflow","hidden"),b.$overlay=$('<div class="ui-popup-overlay" style="display: none;"></div>').appendTo("body"),b.$container=$('<div class="ui-popup" style="display: none;"><div class="close"></div></div>').appendTo("body"),b._super(a)},"bus beforeDelete":function(){},"bus deleted":function(){var a=this,b=this.$container.position(),c=b.top,d=b.left,e=this.$container.width(),f=this.$container.height();this.$container.animate({opacity:0,top:c+f/2,left:d+e/2,width:0,height:0},800,function(){a.bus.fire("destroy")}),this.$overlay.hide()},"bus contentRendered":function(a){var b=this;b.$overlay.show(),b.element=a.data.element,b.element.addClass("ui-popup-content");var c=b.$container,d=$(".close",c);d.hide(),c.animate({opacity:"show"},150,function(){b.element.appendTo(c),d.fadeIn(1e3),b._attachHandlers()})},_attachKeyBoardHandling:function(){var a=this,b={handleKeyDown:function(){a._onDocumentKeyDown.apply(a,arguments)}};c.getKeyBoardManager().pushHandler(b)},_attachHandlers:function(){if(this._attached)return;this._attached=!0,this._onBodyClickHandler=$.proxy(this._onBodyClick,this),this._onDocumentKeyDownHandler=$.proxy(this._onDocumentKeyDown,this),this._onCloseButtonClickHandler=$.proxy(this._onCloseButtonClick,this),$(document).bind("click",this._onBodyClickHandler),this._attachKeyBoardHandling(),this.$container.find(".close").bind("click",this._onCloseButtonClickHandler),this._removeElements=this._removeElementsInnerImpl},_onDocumentKeyDown:function(a){a.keyCode==$.ui.keyCode.ESCAPE&&this.fire("destroy")},_onBodyClick:function(a){if(a.target!=this.$overlay[0])return;this.fire("destroy")},_onCloseButtonClick:function(){this.fire("destroy")},_detachHandlers:function(){$(document).unbind("click",this._onBodyClickHandler),this.element&&this.element.parents(".ui-popup").unbind("click",this._onElementClickHandler),c.getKeyBoardManager().popHandler(),this.$container.find(".close").unbind("click",this._onCloseButtonClickHandler)},_removeElementsInnerImpl:function(){this.$overlay.remove(),this.$container.remove(),$("body").css("overflow",this.bodyOverflow)},_removeElements:b.empty,"bus destroy":function(){this._detachHandlers(),this._removeElements(),this._super()}})}),define("tau/ui/templates/application/ui.template.application",["tau/core/templates-factory"],function(a){var b={name:"application",markup:['<div class="ui-application-viewport">',"</div>"]};return a.register(b)}),define("tau/core/model-base",["Underscore","tau/core/event.emitter"],function(_,a){var b=a.extend({init:function(a){this._super(a),this.store=a.store,this.config=a},onInit:function(){},isCommandForEntityInContext:function(a){return a.data.cmd.config.id===this.config.context.entity.id},isPropertyChanged:function(a,b){var c=b.changes;return _.any(a,function(a){return c.hasOwnProperty(a)})},attachToChangePropertiesOfCurrentEntity:function(a){var b=_.isArray(a)?a:[a],c=this.config.context.entity.id,d=this,e=function(a){var c=a.data;d.isPropertyChanged(b,c)&&d.fire("propertyChanged",c)},f=function(a){var c=a.data;d.isPropertyChanged(b,c)&&d.fire("beforeChangeProperty",c)},g=this.config.context.entity.entityType.name||"general";d.store.on({type:g,eventName:"afterSave",filter:{id:c},listener:d},e),d.store.on({type:g,eventName:"beforeSave",filter:{id:c},listener:d},f),a[this.propertyName]=[this.displayField,this.valueField]},"bus beforeInit":function(a){this.config=a.data?a.data.config:{},this.onInit()},"bus evictData":function(){var a=this.config.context.entity,b=a.id;this.store.config.proxy.evictPersistedObject(b,"context"),this.store.config.proxy.evictPersistedObject(b,a.entityType.name)},destroy:function(){this.store.unbind(this),delete this.config,delete this.store,this._super()}});return b}),define("tau/models/model.iteration.progressBar",["Underscore","tau/core/model-base"],function(_,a){var b=a.extend({name:"Iteration Progress Bar",afterSaveRoleEffort:function(a){var b=this;b.fire("roleEffortChanged")},onDataUpdate:function(a){var b=this;b.fire("refresh")},floatToString:function(a){return a.toFixed(2).replace(".00","")},_getEffortPoints:function(){return this.config.context.getEffortPoint().shortName},onInit:function(){var a=this,b=this.config.context,c=b.entity.entityType.name,d=b.entity.id,e=["bugs-effortToDo-sum","bugs-effortCompleted-sum","userStories-effortToDo-sum","userStories-effortCompleted-sum"];a.store.unbind(a),a.store.on({eventName:"afterSave",type:"roleEffort",listener:a,filter:{assignable:{id:d}}},_.bind(a.afterSaveRoleEffort,a)),a.store.on({eventName:"afterSave",type:c,listener:a,filter:{id:d},hasChanges:[e.join("|")]},_.bind(a.onDataUpdate,a)),a.store.get(c,{id:d,fields:e},{success:a.onEntityRetrieved,scope:a}).done({success:a.done,scope:a})},onEntityRetrieved:function(a){var b=a.data,c=b["bugs-effortToDo-sum"]+b["userStories-effortToDo-sum"],d=b["bugs-effortCompleted-sum"]+b["userStories-effortCompleted-sum"],e=Math.round(100*parseFloat(c)+100*parseFloat(d))/100,f=Math.round(1e4*(d/e))/100;f=isNaN(f)?0:f,f=f>100?100:f,this.effortToDo=c,this.effortCompleted=d,this.percentCompleted=f},done:function(){this.fire("dataBind",{effortToDo:this.floatToString(this.effortToDo),effortCompleted:this.floatToString(this.effortCompleted),percentCompleted:this.percentCompleted,totalEffort:this.floatToString(this.effortToDo+this.effortCompleted),point:this._getEffortPoints()})}});return b}),define("tau/ui/templates/label/ui.template.assignmentEffort.label",["tau/core/templates-factory"],function(a){var b={name:"assignment-effort-label",markup:['<div><span class="property"><span class="effort">${totalEffort}&nbsp;${point}</span></span>']};return a.register(b)}),define("tau/models/extension.model.base",["Underscore","tau/components/extensions/component.extension.base"],function(_,a){return a.extend({category:"extension model base",floatToString:function(a){return a.toFixed(2).replace(".00","")},destroy:function(){this._super(),this.destroy=function(){}}})}),define("tau/models/assignmentsList/extension.model.effortRetriever",["Underscore","tau/models/extension.model.base"],function(_,a){return a.extend({category:"model effort retriver","bus registerStoreRequest":function(){var a=this.config.context.entity||{entityType:{}};this.fire("get",{type:a.entityType.name,query:{id:a.id,fields:["effort","effortToDo"]},callback:{scope:this,success:this.onEffortRetrieved}})},"bus extendDataToBind":function(a){var b=a.data||{},c=this.entity||{};b.totalEffort={effort:this.floatToString(c.effort),remain:this.floatToString(c.effortToDo)}},onEffortRetrieved:function(a){this.entity=a.data},destroy:function(){delete this.entity,this._super()}})}),define("tau/models/assignmentsList/extension.model.store.operations",["Underscore","tau/core/model-base","tau/core/event"],function(_,a){var b=a.extend({category:"store operations","bus commitTransaction":function(a){var b=this.transaction||this.store;delete this.transaction,b.done(a.data)},"bus get":function(a){var b=this.transaction=this.transaction||this.store,c=a.data||{};this.transaction=b.get(c.type,c.query,c.callback)},"bus find":function(a){var b=this.transaction=this.transaction||this.store,c=a.data||{};this.transaction=b.find(c.type,c.query,c.callback)},destroy:function(){this._super.apply(this,arguments),this.destroy=function(){}}});return b}),define("tau/models/assignmentsList/extension.model.effortPointsRetriever",["Underscore","tau/models/extension.model.base"],function(_,a){return a.extend({category:"model effort points extension",_getEffortPoints:function(){return this.config.context.getEffortPoint().shortName},"bus extendDataToBind":function(a){var b=a.data||{};b.effortPoints=this._getEffortPoints()}})}),define("tau/models/assignmentsList/extension.model.assignmentsRetriever",["Underscore","tau/models/extension.model.base"],function(_,a){return a.extend({category:"model extension assignments retriever","bus registerStoreRequest":function(){var a=this.config.context.entity||{entityType:{}},b={generalUser:["id","firstName","lastName"]};this.fire("get",{type:a.entityType.name,query:{id:a.id,fields:[{assignments:["id",{role:["id","name"]},b],list:!0}]},callback:{scope:this,success:this.onAssignmentsRetrieved}})},onAssignmentsRetrieved:function(a){var b=a.data.assignments;this.fire("assignmentsReady",b)}})}),define("tau/models/assignmentsList/extension.model.entityRolesRetriever",["Underscore","tau/models/extension.model.base"],function(_,a){return a.extend({category:"model entity roles retriever extension","bus registerStoreRequest":function(){var a=this.config.context.entity||{entityType:{}},b={role:["id","name","isPair","hasEffort"]};this.fire("get",{type:a.entityType.name,query:{id:a.id,fields:[{roleEfforts:["id","effort","effortToDo",b,{assignable:["id"]}],list:!0}]},callback:{scope:this,success:this.onRoleEffortsRetrieved}})},"bus userGroupWasCreated":function(a){var b=a.data||{},c=b.role||{};if(c.hasEffort){var d=this.entity.roleEfforts;_.each(d,function(a){if(a.role.id==c.id)return b.roleEffort={effort:this.floatToString(a.effort),remain:this.floatToString(a.effortToDo),id:a.id},!0},this),this.fire("roleEffortsReady",d)}else b.roleEffort=null},getRoles:function(){var a=this.entity.roleEfforts,b=[],c=a.length;for(var d=0;d<c;d++)b.push(a[d].role);return b},onRoleEffortsRetrieved:function(a){this.entity=a.data;var b=this.getRoles();this.fire("rolesReady",b)},"bus extendDataToBind":function(a){var b=a.data||{}}})}),define("tau/models/assignmentsList/extension.model.featureRolesRetriever",["Underscore","tau/models/extension.model.base"],function(_,a){return a.extend({category:"model feature roles retriever extension","bus registerStoreRequest":function(){var a=this.config.context.getProcessId();this.fire("get",{type:"process",query:{id:a,nested:!0,fields:[{entityStates:["id",{role:["id","name","hasEffort","isPair"]},{entityType:["id","name"]}],list:!0}]},callback:{scope:this,success:this.onEntityStatesRetrieved}})},onEntityStatesRetrieved:function(a){var b=a.data.entityStates,c=this.roles=[],d={},e=this.config.context.entity.entityType.name.toLocaleLowerCase();_.each(b,function(a){var b=a.role;b&&a.entityType.name.toLowerCase()===e&&(d.hasOwnProperty(b.id)||(d[b.id]=!0,c.push(b)))}),this.fire("rolesReady",c)}})}),define("tau/models/assignmentsList/extension.model.assignmentToRolesMapper",["Underscore","tau/models/extension.model.base","tau/configurator"],function(_,a,b){return a.extend({category:"model assignment to role mapper","bus registerStoreRequest":function(){var a=this.config.context.entity||{entityType:{}},b={generalUser:["id","firstName","lastName"]};this.fire("get",{type:a.entityType.name,query:{id:a.id,fields:[{assignments:["id",{role:["id","name"]},b],list:!0}]},callback:{scope:this,success:this.onAssignmentsRetrieved}})},"bus assignmentsReady+rolesReady+extendDataToBind":function(a){var b=(a.assignmentsReady||{}).data,c=(a.rolesReady||{}).data,d=(a.extendDataToBind||{}).data,e=c,f=[];for(var g=0;g<e.length;g++){var h=e[g],i={};i.role=h,i.users=this.getUsersInRole(b,h),i.allowAdd=(h.isPair?2:1)>i.users.length,this.fire("userGroupWasCreated",i),f.push(i)}d.assignments={groups:f}},_convertUserDataToViewData:function(a){var c=[b.getApplicationPath(),"/Avatar.ashx?UserId=",a.id,"&size=32"].join("");return{id:a.id,name:a.firstName+" "+a.lastName,avatar:c}},getUsersInRole:function(a,b){var c=[],a=_.sortBy(a,function(a){return a.id}),d=a.length;for(var e=0;e<d;e++){var f=a[e];if(f.role.id==b.id){var g=this._convertUserDataToViewData(f.generalUser);g.assignmentId=f.id,g.roleId=b.id,c.push(g)}}return c}})}),define("tau/models/assignmentsList/extension.model.taskEffortRetriever",["Underscore","tau/models/extension.model.base"],function(_,a){return a.extend({category:"model task EffortRetriever","bus registerStoreRequest":function(){var a=this.config.context.entity||{entityType:{}};this.fire("get",{type:a.entityType.name,query:{id:a.id,fields:["tasks-count","tasks-effort-sum","tasks-effortToDo-sum"]},callback:{scope:this,success:this.onTaskEffortRetrieved}})},"bus extendDataToBind":function(a){var b=a.data||{},c=this.entity||{};c["tasks-count"]>0&&(b.tasksEffort={effort:this.floatToString(c["tasks-effort-sum"]),remain:this.floatToString(c["tasks-effortToDo-sum"])})},onTaskEffortRetrieved:function(a){this.entity=a.data},destroy:function(){delete this.entity,this._super()}})}),define("tau/models/model.assignmentsList",["Underscore","tau/store/types","tau/core/model-base","tau/models/assignmentsList/extension.model.effortRetriever","tau/models/assignmentsList/extension.model.store.operations","tau/models/assignmentsList/extension.model.effortPointsRetriever","tau/models/assignmentsList/extension.model.assignmentsRetriever","tau/models/assignmentsList/extension.model.entityRolesRetriever","tau/models/assignmentsList/extension.model.featureRolesRetriever","tau/models/assignmentsList/extension.model.assignmentToRolesMapper","tau/models/assignmentsList/extension.model.taskEffortRetriever"],function(_,a,b,c,d,e,f,g,h,i,j){var k=b.extend({"bus assignmentsReady":function(a){this.assignments=a.data},"bus roleEffortsReady":function(a){this.roleEfforts=a.data},destroyExtensions:function(){var a=this.extensions||[];_.each(a,function(a){a.destroy("destroy")}),delete this.extensions},initExtensions:function(){this.destroyExtensions();var b=a.findByKeyword(this.config.context.entity.entityType.name),k=new(b.name!="feature"?g:h)(this.config);this.extensions=[new c(this.config),new d(this.config),new e(this.config),new f(this.config),k,new i(this.config)],b.name.toLowerCase()=="userstory"&&this.extensions.push(new j(this.config))},onInit:function(){this.clearData();var a=this;a.store.unbind(a),a.initExtensions(),a.fire("registerStoreRequest"),a.fire("commitTransaction",{success:a.done,scope:a}),this.bindStoreListeners()},done:function(){var a={};this.bus.fire("extendDataToBind",a),this.bus.fire("dataBind",a),this.destroyExtensions()},bindStoreListeners:function(){var a=this;a.store.on({eventName:"afterSave",type:"assignment",listener:a},function(){a.afterAssignmentSaved.apply(a,arguments)}),a.store.on({eventName:"beforeSave",type:"assignment",listener:a},function(){a.beforeSaveAssignment.apply(a,arguments)}),a.store.on({eventName:"beforeSave",type:"roleEffort",listener:a},function(){a.beforeSaveRoleEffort.apply(a,arguments)}),a.store.on({eventName:"afterSave",type:"roleEffort",listener:a},function(){a.afterSaveRoleEffort.apply(a,arguments)}),a.store.on({eventName:"beforeRemove",type:"assignment",listener:a},function(){a.beforeRemoveAssignment.apply(a,arguments)}),a.store.on({eventName:"afterRemove",type:"assignment",listener:a},function(){a.afterAssignmentRemoved.apply(a,arguments)});var b=this.config.context.entity.id,c=this.config.context.entity.entityType.name,d={id:b};a.store.on({eventName:"beforeRemove",type:c,listener:a,filter:d},function(){a.store.unbind(a)}),a.store.on({eventName:"beforeSave",type:c,listener:a,filter:d,hasChanges:["entityState"]},_.bind(a.beforeEntityEntityStateChanged,a)),a.store.on({eventName:"afterSave",type:c,listener:a,filter:d,hasChanges:["entityState"]},_.bind(a.afterEntityEntityStateChanged,a)),a.store.on({eventName:"afterSave",type:c,listener:a,filter:d,hasChanges:["effort|effortToDo|effortCompleted|tasks-count|tasks-effort-sum|tasks-effortToDo-sum"]},_.bind(a.onDataUpdate,a))},beforeEntityEntityStateChanged:function(a){this.fire("beforeStateChanged")},afterEntityEntityStateChanged:function(a){this.fire("afterStateChanged")},onDataUpdate:function(a){this.fire("refresh")},beforeSaveRoleEffort:function(a){var b=a.data.id;if(_.isNumber(b)&&this.isRoleEffortOfCurrentEntity(b)){var c=a.data.cmd;c.config.fields=c.config.fields||[],c.config.fields.push("effortToDo"),this.fire("beforeSaveRoleEffort",{roleEffortId:b})}},afterSaveRoleEffort:function(a){var b=a.data.id;_.isNumber(b)&&this.isRoleEffortOfCurrentEntity(b)&&this.fire("afterSaveRoleEffort",{roleEffortId:b})},beforeRemoveAssignment:function(a){this.fireEventIfAssignmentFromCurrentEntity(a,"beforeRemoveAssignment")},afterAssignmentRemoved:function(a){this.fireEventIfAssignmentFromCurrentEntity(a,"afterAssignmentRemoved")},beforeSaveAssignment:function(a){_.isNumber(a.data.id)?this.fireEventIfAssignmentFromCurrentEntity(a,"beforeSaveAssignment"):this.fireEventIfAssignmentFromCurrentEntity(a,"beforeAddAssignment")},afterAssignmentSaved:function(a){_.isNumber(a.data.cmd.config.id)?this.fireEventIfAssignmentFromCurrentEntity(a,"afterAssignmentSaved"):this.fireEventIfAssignmentFromCurrentEntity(a,"afterAssignmentAdded")},fireEventIfAssignmentFromCurrentEntity:function(a,b){var c=a.data.id;if(this.isAssignmentOfCurrentEntity(c)||((a.data.changes||{}).assignable||{}).id===this.config.context.entity.id){var d=_.extend({assignmentId:c},a.data.changes);this.fire(b,d)}},isRoleEffortOfCurrentEntity:function(a){return _.any(this.roleEfforts,function(b){return b.id===a})},isAssignmentOfCurrentEntity:function(a){return _.any(this.assignments,function(b){return b.id===a})},clearData:function(){delete this.assignments,delete this.roleEfforts},destroy:function(){this.clearData(),this._super.apply(this,arguments)}});return k}),define("tau/core/model.editable.base",["tau/core/model-base"],function(a){var b=a.extend({"bus save":function(a){var b=this,c=b.config.context?b.config.context.entity:{},d=a.data||{},e=d.$set||d,f=d.$include,g=d.hasOwnProperty("id")?d.id:c.id,h=d.typeName||c.entityType.name,i={$set:e,fields:f};g&&(i.id=g);var j={type:h,cmd:i,validation:{isValid:!0,isError:function(){return!1}}};b.fire("validate",j),b.fire("afterValidate",j);if(j.validation.isValid===!1||j.validation.isError&&j.validation.isError()==1){b.fire("validationFailed",j);return}b.fire("beforeSave",j),b.store.save(h,i,{success:function(a){b.fire("afterSave",{type:a.command.type,cmd:i})},failure:function(a){b.fire("saveFailed",{type:a.command.type,cmd:i})}}).done()},"bus remove":function(a){var b=this,c=b.config.context.entity,d=a.data||{},e=d.typeName||c.entityType.name;b.fire("beforeRemove",d),b.store.remove(e,{id:d.id},{success:function(a){b.fire("afterRemove",a.data)},failure:function(){}}).done()}});return b}),define("tau/models/model.assignmentsList.editable",["tau/core/model.editable.base"],function(a){var b=a.extend({"bus dataBind":function(a){this.fire("permissionsReady",{editable:!0})}});return b}),define("tau/models/userList/extension.model.unassignAction",["Underscore","tau/core/model-base"],function(_,a){return a.extend({name:"Model Extension Unassign Action","bus extendDataToBind":function(a){var b=a.data;b.headerActions.push({id:"unassign",title:"Unassign"})}})}),define("tau/models/userList/extension.model.showMore",["Underscore","tau/core/model-base"],function(_,a){return a.extend({name:"Model Extension Unassign Action","bus extendDataToBind":function(a){var b=a.data;b.moreAvailable=this.isMoreAvailable()},filterIsEmpty:function(){return!this.filterIsNotEmpty()},isMoreAvailable:function(){var a=this.config.data;return this.filterIsEmpty()&&a.showMore!==!0&&(a.hasOwnProperty("roleId")||a.hasOwnProperty("role"))},filterIsNotEmpty:function(){return this.config.data.filter&&this.config.data.filter.length}})}),define("tau/components/extensions/assignmentsList/extension.assignmentsList.editable",["Underscore","jQuery","tau/core/model-base"],function(_,$,a){return a.extend({category:"edit",init:function(){var a=this;a._super.apply(a,arguments),a.animations=[]},"bus dataBind":function(a){this.bindedData=a.data},"bus afterRender":function(a){this.$el=a.data.element,this.startAnimations()},"bus permissionsReady+afterRender":function(a){var b=a.permissionsReady.data;if(b.editable){var c=this;c.$el.removeClass("assignments-table-readonly"),c.$el.find(".group .effort").editableText({mask:/^\d*\.?\d*$/,restoreText:!0,onSave:function(a){var b=this.$element.parents(".group").tmplItem().data,d=c.normalizeEffort(b.roleEffort.effort),e=c.normalizeEffort(a);if(d===e)return this.restoreInitialText(),!1;var f={typeName:"roleEffort",$include:["id"],id:b.roleEffort.id,$set:{effort:e}};c.bus.fire("save",f)},onEditStart:function(){this.$element.data("points",this.$element.find("span").detach())},onEditEnd:function(){this.$element.append(this.$element.data("points"))}})}},"bus afterAssignmentSaved":function(){this.refresh()},"bus beforeSaveAssignment":function(a){var b=this,c=a.data.assignmentId,d,e;c&&(d=this.getAssignmentSelector(c),e=this.$el.find(d),e&&(this.fire("markElementToBeUpdated",{element:e}),this.addAnimation(function(){b.fire("updateElement",{element:b.$el.find(d)})})))},"bus beforeStateChanged":function(a){var b=this;b.fire("markElementToBeUpdated",{element:this.$el}),b.addAnimation(function(){b.fire("updateElement",{element:b.$el})})},"bus afterStateChanged":function(a){this.refresh()},"bus afterAssignmentAdded":function(a){this.refresh()},"bus beforeAddAssignment":function(a){var b=a.data,c=this,d=c.generateAssignmentIdForNewAssignment(b),e={name:"",role:{},assignmentId:d};$.tmpl("user",e).appendTo(c.$el.find(".group[roleId="+b.role.id+"]"));var f=c.getUserSelector({roleId:b.role.id,id:b.generalUser.id});c.addAnimation(function(){c.fire("updateElement",{element:c.$el.find(f)})})},"bus afterAssignmentRemoved":function(){this.refresh()},"bus beforeRemoveAssignment":function(a){var b=a.assignmentId,c=this.$el.find(this.getAssignmentSelector(b));this.fire("markElementToBeDeleted",{element:c})},"bus afterSaveRoleEffort":function(a){var b=a.data.roleEffortId,c=this;c.addAnimation(function(){var a=c.findRoleEffortElementByRoleEffortId(b);c.fire("updateElement",{element:a}),c.fire("updateElement",{element:c.$el.find(".total-row .effort-cell span")})}),this.refresh()},"bus beforeSaveRoleEffort":function(a){var b=a.data,c=b.roleEffortId,d=this.findRoleEffortElementByRoleEffortId(c);this.fire("markElementToBeUpdated",{element:d})},getUserSelector:function(a){return".group[roleId="+a.roleId+"] .user[userId="+a.id+"]"},getAssignmentSelector:function(a){var b=this,c=".user",d=b.$el.find(c),e;return d.each(function(b){var f=d.eq(b);if(f.tmplItem().data.assignmentId==a)return e=f,c+=":eq("+b+")",!1}),c},generateAssignmentIdForNewAssignment:function(a){return[this.config.context.entity.id,a.role.id,a.generalUser.id].join(",")},findRoleEffortElementByRoleEffortId:function(a){var b=this.$el.find(".role-effort .effort"),c=$();return b.each(function(){var b=$(this),d=b.parents(".group"),e=d.tmplItem().data;e.roleEffort=e.roleEffort||{};if(e.roleEffort.id===a)return c=b,!1}),c},addAnimation:function(a){this.animations.push(a)},startAnimations:function(){_.each(this.animations,function(a){a()}),this.animations=[]},refresh:function(){this.fire("refresh")},normalizeEffort:function(a){return Math.abs(Math.round(parseFloat(a)*100)/100)||0},destroy:function(){delete this.$el,delete this.bindedData,delete this.animations,this._super()}})}),define("tau/ui/extensions/editable-base",["tau/components/extensions/component.extension.base"],function(a){return a.extend({category:"edit","bus permissionsReady+afterRender":function(a){var b=this,c=a.permissionsReady.data;if(!c.editable)return;b.onEditActivated({element:a.afterRender.data.element})},onEditActivated:function(a){}})}),define("tau/ui/behaviour/common/ui.behaviour.tauBubble",["Underscore","jQuery"],function(_,$){var a=[];return $.widget("ui.tauBubble",{_isInit:!1,$popup:null,$closeEl:null,$arrows:{top:null,bottom:null},$target:null,$alignTo:null,options:{viewport:"body",alignTo:null,collision:"fit flip",onShow:$.noop,showOnCreation:!1,closeOnEscape:!0},_create:function(){this.$target=this.element,this.options.alignTo&&(this.$alignTo=$(this.options.alignTo)),this.$alignTo=this.$alignTo&&this.$alignTo.length?this.$alignTo:this.$target;if(this.options.showOnCreation==1)this.show();else{var a=this.onTargetClickDelegate=$.proxy(this._onTargetClick,this);this.$target.bind("click",a)}},_onTargetClick:function(a){a.preventDefault(),a.stopPropagation(),this.toggle()},_initInstance:function(b){var c=this,d,e=this.$target.parents(".ui-popup-content:first"),f=null;e.length?(d=e,f=d.parent()):(d=$("body"),f=d);var g=$('<div class="tau-bubble popup-container"><div class="tau-bubble__inner" role="content"></div></div>');g.appendTo(f),this.$popup=g,c.$arrows={top:$('<div class="tau-bubble__arrow-top"></div>'),bottom:$('<div class="tau-bubble__arrow-bottom"></div>')},c.$arrows.top.prependTo(g),c.$arrows.bottom.prependTo(g),_(a).include(c)||a.push(c);var h=$.proxy(this.hide,this);g.mouseenter(function(a){g.data("focus",!0)}),g.mouseleave(function(a){g.data("focus",!1)}),d.scroll(function(){h(),c.$target.trigger("externalClose",{})}),this._initInstance=function(){}},show:function(){this._initInstance();var b=this;b.$popup.zIndex(b.$target.zIndex()+1),b.$target.trigger("show.before",{}),b.adjustPosition(),b.options.onShow.call(b,b.$popup);for(var c=0;c<a.length;c++){var d=a[c];d!=b&&(d.$target.trigger("externalClose",{}),d.hide())}b._signUpForCloseEvents(),b._windowResizeDelegate||(b._windowResizeDelegate=_.bind(function(){this.adjustPosition()},this)),$(window).bind("resize",b._windowResizeDelegate);var e={api:b,target:b.$target,popup:b.$popup};b.$target.trigger("show",e),b.$popup.trigger("show",e)},hide:function(a){var b=this,c=b.$popup;if(!c.is(":visible"))return;c.hide(),b._documentKeyDown&&($(document).unbind("keydown",b._documentKeyDown),delete b._documentKeyDown),b._documentClickDelegate&&($(document).unbind("click",b._documentClickDelegate),delete b._documentClickDelegate),b._windowResizeDelegate&&($(window).unbind("resize",b._windowResizeDelegate),delete b._windowResizeDelegate),b.$target.trigger("close",{event:a})},_onKeyDown:function(a){if(a.keyCode!=$.ui.keyCode.ESCAPE)return;this.$target.trigger("externalClose",{}),this.hide(a)},_signUpForCloseEvents:function(){var a=this;a.options.closeOnEscape&&!a._documentKeyDown&&(a._documentKeyDown=function(b){a._onKeyDown(b)},$(document).keydown(a._documentKeyDown)),a._documentClickDelegate||(a._documentClickDelegate=function(b){a._onDocumentClick(b)},$(document).click(a._documentClickDelegate))},_processArrows:function(){var a=this,b=a.$alignTo,c=a.$popup;a.$arrows.top.hide(),a.$arrows.bottom.hide();var d=a.$arrows.top,e=b.offset(),f=c.offset();f.top<e.top&&(d=a.$arrows.bottom);if(f.left<e.left){var g=b.width(),h=e.left-f.left-($.browser.webkit?17:24)+g/2;d.css("left",h+"px")}d.show()},toggle:function(){var a=this;!a.$popup||!a.$popup.is(":visible")?a.show():a.hide()},widget:function(){return this.$popup||$()},adjustPosition:function(){var a=this,b=a.$alignTo,c=a.$popup;c.show();var d="-20 9";b.width()>=20&&(d="0 9");var e={of:b,my:"left top",at:"left bottom",offset:d,collision:a.options.collision};c.position(e);var f=b.position(),g=c.position();g.top<0&&(e.collision="none",c.position(e),g=c.position()),a._processArrows();var h=a.element},_onDocumentClick:function(a){var b=this,c=$(a.target);if(!b.$popup.is(":visible"))return;if(c.hasClass("tau-bubble-target")||c.parents(".tau-bubble-target,.ui-menu-item").length>0)return;if(c.hasClass("tau-bubble")||c.parents("div.tau-bubble").length>0)return;if(b._justActivated){b._justActivated=!1;return}b._trigger("hide"),b.$target.trigger("externalClose",{}),b.hide()},activate:function(){this._justActivated=!0,this.show()},destroy:function(){var b=this,c=b.element;b.$popup&&(b.hide(),b.$popup.remove(),b.$arrows.top.remove(),b.$arrows.bottom.remove()),c.unbind("click",b.onTargetClickDelegate),a=_(a).without(b),$.Widget.prototype.destroy.apply(this,arguments)},empty:function(){var a=this;a.hide(),a.$popup.find(".tau-bubble__inner").empty()}}),$.fn.tauBubble}),define("tau/ui/extensions/popupEditorContainer.extension",["Underscore","jQuery","tau/ui/extensions/editable-base","tau/ui/behaviour/common/ui.behaviour.tauBubble"],function(_,$,a,b){return a.extend({category:"edit",init:function(a){this._super(a),this.containers=[]},destroy:function(){this.destroyContainers(),this._super()},onEditActivated:function(a){this.destroyContainers();var c=this,d=this.element=a.element;for(var e=0;e<c.config.popupEditorContainer.length;e++){var f=c.config.popupEditorContainer[e],g=d.find(f.targetSelector);g.find(".external-view,.ui-type-icon").click(function(a){a.stopPropagation()}),g.each(function(){var a=$(this);f.component.data=a.tmplItem().data;var e={components:_.clone(f.component),context:c.config.context};a.addClass("tau-bubble-target"),f.targetCssClass&&a.addClass(f.targetCssClass);var g=!1;f.alignmentSelector&&(f.alignmentSelectorFrom=="target"?g=a.find(f.alignmentSelector):g=d.find(f.alignmentSelector));if(!g||!g.length)g=a;g.addClass("ui-link");var h=function(a){return function(){c.initializeContainer(this.$target,this.$popup,a)}}(e);b.call(a,{alignTo:g,onShow:h})})}},initializeContainer:function(a,b,c){var d=this,e=b.find(".tau-bubble__inner");d.$popupInner=e,d.$target=a;if(a.data("bubbleLoaded")===!0)return;e.find("div.ui-loading-message").remove(),e.append("<div class='ui-loading-message'>Loading...</div>"),d.createComponents(c,function(b){var c=b[0].component;c.on("afterRender",function(b){e.find(".ui-loading-message").remove();var d=b.data.element;d.appendTo(e),a.data("bubbleLoaded",!0),b.removeListener(),a.tauBubble("adjustPosition"),a.tauBubble("adjustPositionStart"),a.tauBubble("adjustPosition"),a.bind("close",function(){c.fire("blur",{})}),a.bind("show",function(){c.fire("focus.before",{}),c.fire("focus",{}),c.fire("popupResize",a.tauBubble("getMaxSize")),a.tauBubble("adjustPosition")}),c.fire("popupResize",a.tauBubble("getMaxSize")),a.tauBubble("adjustPosition"),a.tauBubble("adjustPosition"),setTimeout(function(){c.fire("focus",{})},500)}),d.addContainer(c),c.initialize();var f=function(){a.data("bubbleLoaded",!1),a.tauBubble("empty")},g=function(){a.tauBubble("hide")},h=function(){a.tauBubble("destroy"),c.destroy()},i=function(){a.tauBubble("hide"),a.data("bubbleLoaded",!1),c.destroy()};c.on("beforeSave",f),c.on("beforeRemove",f),c.on("reset",g),c.on("afterSave",h),c.on("afterRemove",h),c.on("close",f)})},addContainer:function(a){this.containers.push(a)},destroyContainers:function(){var a=this.containers;_.each(a,function(a){a.destroy()}),this.containers=[]}})}),define("tau/models/assignment/model.property.assignUser.editable.base",["Underscore","tau/core/model.editable.base","tau/configurator"],function(_,a){return a.extend({"bus assignToLoggedUser":function(){this.assignTo(this.getLoggedUser().id)},"bus changeAssignment":function(a){var b=a.data.user.id;this.assignTo(b)},getLoggedUser:function(){return this.config.context.getLoggedUser()},assignTo:function(a){},destroy:function(){this.project=null,this.entity=null,this._super()}})}),define("tau/models/assignment/model.assignment.editable",["Underscore","tau/models/assignment/model.property.assignUser.editable.base","tau/configurator"],function(_,a){return a.extend({"bus removeAssignment":function(){var a={id:this.config.data.assignmentId,typeName:"assignment"};this.fire("remove",a)},assignTo:function(a){var b={typeName:"assignment",$include:[{generalUser:["id","firstName","lastName"]},{role:["id","name"]},{assignable:["id"]}]};this.config.data.hasOwnProperty("assignmentId")&&_.extend(b,{id:this.config.data.assignmentId,$set:{generalUser:{id:a}}}),this.fire("save",b)},destroy:function(){this.project=null,this.entity=null,this._super()}})}),define("tau/models/assignment/model.add.assignment.editable",["Underscore","tau/models/assignment/model.property.assignUser.editable.base","tau/configurator"],function(_,a){return a.extend({assignTo:function(a){var b={typeName:"assignment",$include:[{generalUser:["id","firstName","lastName"]},{role:["id","name"]},{assignable:["id"]}]};this.config.data.role&&_.extend(b,{id:null,$set:{generalUser:{id:a},assignable:{id:parseInt(this.config.context.entity.id)},role:{id:this.config.data.role.id}}}),this.fire("save",b)},destroy:function(){this.project=null,this.entity=null,this._super()}})}),define("tau/ui/templates/assignmentsList/ui.template.assignmentsList.addBtn",["tau/core/templates-factory"],function(a){var b={name:"assignments-add-btn",markup:['<button class="add-btn',"{{if allowAdd == false}}"," disabled","{{/if}}",'" type="button"><div>AddAssignment</div></button>'].join(""),dependencies:[]};return a.register(b)}),define("tau/ui/templates/common/ui.template.userName",["tau/core/templates-factory"],function(a){return a.register({name:"user-name",markup:"<span class='user-name'>${name}</span><br/>"})}),define("tau/ui/templates/common/ui.template.user",["tau/core/templates-factory","tau/ui/templates/common/ui.template.userName"],function(a){return a.register({name:"user",markup:["<table class='user' userId='${id}'><tr>","<td class='user-avatar-container'>","{{if avatar}}<img src='${avatar}' class='user-avatar'/>{{/if}}","</td>","<td class='user-info'>","   {{tmpl 'user-name'}}","{{if role}}","<span class='user-role'>${role.name}</span>","{{/if}}","</td>","</tr></table>"].join(""),dependencies:["user-name"]})}),define("tau/ui/templates/assignmentsList/ui.template.assignmentsList.userList",["tau/core/templates-factory","tau/ui/templates/common/ui.template.user","tau/ui/templates/assignmentsList/ui.template.assignmentsList.addBtn"],function(a){var b={name:"assignments-user-list",markup:['<div class="group" roleId="${role.id}">','<table class="role-header">',"   <tr>",'   <td class="role-title">','   {{tmpl "assignments-add-btn"}}',"&nbsp;${role.name}","   </td>",'   <td class="role-effort">',"{{if roleEffort}}",'       <div class="effort">${roleEffort.effort}<span class="point">${$item.effortPoints}</span></div>',"{{/if}}","   </td>",'   <td class="role-effort">',"{{if roleEffort}}",'       <div class="remain">${roleEffort.remain}<span class="point">${$item.effortPoints}</span></div>',"{{/if}}","   </td>","</tr>","</table>",'{{tmpl(users) "user"}}',"</div>"].join(""),dependencies:["user","assignments-add-btn"]};return a.register(b)}),define("tau/ui/templates/assignmentsList/ui.template.assignmentsList",["tau/core/templates-factory","tau/ui/templates/assignmentsList/ui.template.assignmentsList.userList","tau/ui/templates/common/ui.template.user"],function(a){var b={name:"assignments-list",markup:['<table class="box assignments-table-readonly assignments-table">','   <tr class="title">','       <td class="assignments-title"></td>','       <td class="effort title-cell">Effort</td>','       <td class="effort title-cell">Remain</td>',"    </tr>",'    <tr class="title-row">','       <td class="user-list" colspan="3">','               {{tmpl(assignments.groups, {effortPoints: effortPoints}) "assignments-user-list"}}',"       </td>","   </tr>",'   <tr class="head-row">',"       <td></td>","       <td></td>","       <td></td>","   </tr>","{{if tasksEffort}}",'   <tr class="tasks-row">','       <td class="task-title">Tasks</td>','       <td class="effort-cell">${tasksEffort.effort} h</td>','       <td class="effort-cell">${tasksEffort.remain} h</td>',"   </tr>","{{/if}}",'   <tr class="total-row">','       <td class="total-title">Total</td>','       <td class="effort-cell"><span>${totalEffort.effort} ${effortPoints}</span></td>','       <td class="effort-cell"><span>${totalEffort.remain} ${effortPoints}</span></td>',"   </tr>",'   <tr class="title-row" style="display: none;">','       <td class="owner title-cell">Owner</td>',"       <td></td>","   </tr>","</table>"].join(""),dependencies:["assignments-user-list","user"]};return a.register(b)}),define("tau/utils/utils.date/utils.date.formats",[],function(){var a={};return a={date:{"short":"d-MMM-yyyy"},time:{"short":"HH:mm"},datetime:{"short":"d-MMM-yyyy HH:mm"}},a}),define("tau/utils/utils.translation",["Underscore"],function(_){var a={pluralize:function(a,b){var c=_.isArray(a)?a:a.split("|"),d=function(a){return a===1?0:1},e=d(b);return c[e]?c[e]:c[0]}};return a}),Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]},function(){var a=Date,b=a.prototype,c=a.CultureInfo,d=function(a,b){return b||(b=2),("000"+a).slice(b*-1)};b.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},b.setTimeToNow=function(){var a=new Date;return this.setHours(a.getHours()),this.setMinutes(a.getMinutes()),this.setSeconds(a.getSeconds()),this.setMilliseconds(a.getMilliseconds()),this},a.today=function(){return(new Date).clearTime()},a.compare=function(a,b){if(isNaN(a)||isNaN(b))throw new Error(a+" - "+b);if(a instanceof Date&&b instanceof Date)return a<b?-1:a>b?1:0;throw new TypeError(a+" - "+b)},a.equals=function(a,b){return a.compareTo(b)===0},a.getDayNumberFromName=function(a){var b=c.dayNames,d=c.abbreviatedDayNames,e=c.shortestDayNames,f=a.toLowerCase();for(var g=0;g<b.length;g++)if(b[g].toLowerCase()==f||d[g].toLowerCase()==f||e[g].toLowerCase()==f)return g;return-1},a.getMonthNumberFromName=function(a){var b=c.monthNames,d=c.abbreviatedMonthNames,e=a.toLowerCase();for(var f=0;f<b.length;f++)if(b[f].toLowerCase()==e||d[f].toLowerCase()==e)return f;return-1},a.isLeapYear=function(a){return a%4===0&&a%100!==0||a%400===0},a.getDaysInMonth=function(b,c){return[31,a.isLeapYear(b)?29:28,31,30,31,30,31,31,30,31,30,31][c]},a.getTimezoneAbbreviation=function(a){var b=c.timezones,d;for(var e=0;e<b.length;e++)if(b[e].offset===a)return b[e].name;return null},a.getTimezoneOffset=function(a){var b=c.timezones,d;for(var e=0;e<b.length;e++)if(b[e].name===a.toUpperCase())return b[e].offset;return null},b.clone=function(){return new Date(this.getTime())},b.compareTo=function(a){return Date.compare(this,a)},b.equals=function(a){return Date.equals(this,a||new Date)},b.between=function(a,b){return this.getTime()>=a.getTime()&&this.getTime()<=b.getTime()},b.isAfter=function(a){return this.compareTo(a||new Date)===1},b.isBefore=function(a){return this.compareTo(a||new Date)===-1},b.isToday=function(){return this.isSameDay(new Date)},b.isSameDay=function(a){return this.clone().clearTime().equals(a.clone().clearTime())},b.addMilliseconds=function(a){return this.setMilliseconds(this.getMilliseconds()+a),this},b.addSeconds=function(a){return this.addMilliseconds(a*1e3)},b.addMinutes=function(a){return this.addMilliseconds(a*6e4)},b.addHours=function(a){return this.addMilliseconds(a*36e5)},b.addDays=function(a){return this.setDate(this.getDate()+a),this},b.addWeeks=function(a){return this.addDays(a*7)},b.addMonths=function(b){var c=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+b),this.setDate(Math.min(c,a.getDaysInMonth(this.getFullYear(),this.getMonth()))),this},b.addYears=function(a){return this.addMonths(a*12)},b.add=function(a){if(typeof a=="number")return this._orient=a,this;var b=a;return b.milliseconds&&this.addMilliseconds(b.milliseconds),b.seconds&&this.addSeconds(b.seconds),b.minutes&&this.addMinutes(b.minutes),b.hours&&this.addHours(b.hours),b.weeks&&this.addWeeks(b.weeks),b.months&&this.addMonths(b.months),b.years&&this.addYears(b.years),b.days&&this.addDays(b.days),this};var e,f,g;b.getWeek=function(){var a,b,c,d,h,i,j,k,l,m;return e=e?e:this.getFullYear(),f=f?f:this.getMonth()+1,g=g?g:this.getDate(),f<=2?(a=e-1,b=(a/4|0)-(a/100|0)+(a/400|0),c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0),l=b-c,h=0,i=g-1+31*(f-1)):(a=e,b=(a/4|0)-(a/100|0)+(a/400|0),c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0),l=b-c,h=l+1,i=g+(153*(f-3)+2)/5+58+l),j=(a+b)%7,d=(i+j-h)%7,k=i+3-d|0,k<0?m=53-((j-l)/5|0):k>364+l?m=1:m=(k/7|0)+1,e=f=g=null,m},b.getISOWeek=function(){return e=this.getUTCFullYear(),f=this.getUTCMonth()+1,g=this.getUTCDate(),d(this.getWeek())},b.setWeek=function(a){return this.moveToDayOfWeek(1).addWeeks(a-this.getWeek())},a._validate=function(a,b,c,d){if(typeof a=="undefined")return!1;if(typeof a!="number")throw new TypeError(a+" is not a Number.");if(a<b||a>c)throw new RangeError(a+" is not a valid value for "+d+".");return!0},a.validateMillisecond=function(b){return a._validate(b,0,999,"millisecond")},a.validateSecond=function(b){return a._validate(b,0,59,"second")},a.validateMinute=function(b){return a._validate(b,0,59,"minute")},a.validateHour=function(b){return a._validate(b,0,23,"hour")},a.validateDay=function(b,c,d){return a._validate(b,1,a.getDaysInMonth(c,d),"day")},a.validateMonth=function(b){return a._validate(b,0,11,"month")},a.validateYear=function(b){return a._validate(b,0,9999,"year")},b.set=function(b){return a.validateMillisecond(b.millisecond)&&this.addMilliseconds(b.millisecond-this.getMilliseconds()),a.validateSecond(b.second)&&this.addSeconds(b.second-this.getSeconds()),a.validateMinute(b.minute)&&this.addMinutes(b.minute-this.getMinutes()),a.validateHour(b.hour)&&this.addHours(b.hour-this.getHours()),a.validateMonth(b.month)&&this.addMonths(b.month-this.getMonth()),a.validateYear(b.year)&&this.addYears(b.year-this.getFullYear()),a.validateDay(b.day,this.getFullYear(),this.getMonth())&&this.addDays(b.day-this.getDate()),b.timezone&&this.setTimezone(b.timezone),b.timezoneOffset&&this.setTimezoneOffset(b.timezoneOffset),b.week&&a._validate(b.week,0,53,"week")&&this.setWeek(b.week),this},b.moveToFirstDayOfMonth=function(){return this.set({day:1})},b.moveToLastDayOfMonth=function(){return this.set({day:a.getDaysInMonth(this.getFullYear(),this.getMonth())})},b.moveToNthOccurrence=function(a,b){var c=0;if(b>0)c=b-1;else if(b===-1)return this.moveToLastDayOfMonth(),this.getDay()!==a&&this.moveToDayOfWeek(a,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(a,1).addWeeks(c)},b.moveToDayOfWeek=function(a,b){var c=(a-this.getDay()+7*(b||1))%7;return this.addDays(c===0?c+=7*(b||1):c)},b.moveToMonth=function(a,b){var c=(a-this.getMonth()+12*(b||1))%12;return this.addMonths(c===0?c+=12*(b||1):c)},b.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864e5)+1},b.getTimezone=function(){return a.getTimezoneAbbreviation(this.getUTCOffset())},b.setTimezoneOffset=function(a){var b=this.getTimezoneOffset(),c=Number(a)*-6/10;return this.addMinutes(c-b)},b.setTimezone=function(b){return this.setTimezoneOffset(a.getTimezoneOffset(b))},b.hasDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()},b.isDaylightSavingTime=function(){return this.hasDaylightSavingTime()&&(new Date).getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset()},b.getUTCOffset=function(){var a=this.getTimezoneOffset()*-10/6,b;return a<0?(b=(a-1e4).toString(),b.charAt(0)+b.substr(2)):(b=(a+1e4).toString(),"+"+b.substr(1))},b.getElapsed=function(a){return(a||new Date)-this},b.toISOString||(b.toISOString=function(){function a(a){return a<10?"0"+a:a}return'"'+this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+'Z"'}),b._toString=b.toString,b.toString=function(a){var b=this;if(a&&a.length==1){var e=c.formatPatterns;b.t=b.toString;switch(a){case"d":return b.t(e.shortDate);case"D":return b.t(e.longDate);case"F":return b.t(e.fullDateTime);case"m":return b.t(e.monthDay);case"r":return b.t(e.rfc1123);case"s":return b.t(e.sortableDateTime);case"t":return b.t(e.shortTime);case"T":return b.t(e.longTime);case"u":return b.t(e.universalSortableDateTime);case"y":return b.t(e.yearMonth)}}var f=function(a){switch(a*1){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};return a?a.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(a){if(a.charAt(0)==="\\")return a.replace("\\","");b.h=b.getHours;switch(a){case"hh":return d(b.h()<13?b.h()===0?12:b.h():b.h()-12);case"h":return b.h()<13?b.h()===0?12:b.h():b.h()-12;case"HH":return d(b.h());case"H":return b.h();case"mm":return d(b.getMinutes());case"m":return b.getMinutes();case"ss":return d(b.getSeconds());case"s":return b.getSeconds();case"yyyy":return d(b.getFullYear(),4);case"yy":return d(b.getFullYear());case"dddd":return c.dayNames[b.getDay()];case"ddd":return c.abbreviatedDayNames[b.getDay()];case"dd":return d(b.getDate());case"d":return b.getDate();case"MMMM":return c.monthNames[b.getMonth()];case"MMM":return c.abbreviatedMonthNames[b.getMonth()];case"MM":return d(b.getMonth()+1);case"M":return b.getMonth()+1;case"t":return b.h()<12?c.amDesignator.substring(0,1):c.pmDesignator.substring(0,1);case"tt":return b.h()<12?c.amDesignator:c.pmDesignator;case"S":return f(b.getDate());default:return a}}):this._toString()}}(),function(){var a=Date,b=a.prototype,c=a.CultureInfo,d=Number.prototype;b._orient=1,b._nth=null,b._is=!1,b._same=!1,b._isSecond=!1,d._dateElement="day",b.next=function(){return this._orient=1,this},a.next=function(){return a.today().next()},b.last=b.prev=b.previous=function(){return this._orient=-1,this},a.last=a.prev=a.previous=function(){return a.today().last()},b.is=function(){return this._is=!0,this},b.same=function(){return this._same=!0,this._isSecond=!1,this},b.today=function(){return this.same().day()},b.weekday=function(){return this._is?(this._is=!1,!this.is().sat()&&!this.is().sun()):!1},b.at=function(b){return typeof b=="string"?a.parse(this.toString("d")+" "+b):this.set(b)},d.fromNow=d.after=function(a){var b={};return b[this._dateElement]=this,(a?a.clone():new Date).add(b)},d.ago=d.before=function(a){var b={};return b[this._dateElement]=this*-1,(a?a.clone():new Date).add(b)};var e="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),f="january february march april may june july august september october november december".split(/\s/),g="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),h="Milliseconds Seconds Minutes Hours Date Week Month FullYear".split(/\s/),i="final first second third fourth fifth".split(/\s/),j;b.toObject=function(){var a={};for(var b=0;b<g.length;b++)a[g[b].toLowerCase()]=this["get"+h[b]]();return a},a.fromObject=function(a){return a.week=null,Date.today().set(a)};var k=function(b){return function(){if(this._is)return this._is=!1,this.getDay()==b;if(this._nth!==null){this._isSecond&&this.addSeconds(this._orient*-1),this._isSecond=!1;var c=this._nth;this._nth=null;var d=this.clone().moveToLastDayOfMonth();this.moveToNthOccurrence(b,c);if(this>d)throw new RangeError(a.getDayName(b)+" does not occur "+c+" times in the month of "+a.getMonthName(d.getMonth())+" "+d.getFullYear()+".");return this}return this.moveToDayOfWeek(b,this._orient)}},l=function(b){return function(){var d=a.today(),e=b-d.getDay();return b===0&&c.firstDayOfWeek===1&&d.getDay()!==0&&(e+=7),d.addDays(e)}};for(var m=0;m<e.length;m++)a[e[m].toUpperCase()]=a[e[m].toUpperCase().substring(0,3)]=m,a[e[m]]=a[e[m].substring(0,3)]=l(m),b[e[m]]=b[e[m].substring(0,3)]=k(m);var n=function(a){return function(){return this._is?(this._is=!1,this.getMonth()===a):this.moveToMonth(a,this._orient)}},o=function(b){return function(){return a.today().set({month:b,day:1})}};for(var p=0;p<f.length;p++)a[f[p].toUpperCase()]=a[f[p].toUpperCase().substring(0,3)]=p,a[f[p]]=a[f[p].substring(0,3)]=o(p),b[f[p]]=b[f[p].substring(0,3)]=n(p);var q=function(a){return function(){if(this._isSecond)return this._isSecond=!1,this;if(this._same){this._same=this._is=!1;var b=this.toObject(),c=(arguments[0]||new Date).toObject(),d="",e=a.toLowerCase();for(var f=g.length-1;f>-1;f--){d=g[f].toLowerCase();if(b[d]!=c[d])return!1;if(e==d)break}return!0}return a.substring(a.length-1)!="s"&&(a+="s"),this["add"+a](this._orient)}},r=function(a){return function(){return this._dateElement=a,this}};for(var s=0;s<g.length;s++)j=g[s].toLowerCase(),b[j]=b[j+"s"]=q(g[s]),d[j]=d[j+"s"]=r(j);b._ss=q("Second");var t=function(a){return function(b){return this._same?this._ss(arguments[0]):b||b===0?this.moveToNthOccurrence(b,a):(this._nth=a,a!==2||b!==undefined&&b!==null?this:(this._isSecond=!0,this.addSeconds(this._orient)))}};for(var u=0;u<i.length;u++)b[i[u]]=u===0?t(-1):t(u)}(),function(){Date.Parsing={Exception:function(a){this.message="Parse error at '"+a.substring(0,10)+" ...'"}};var a=Date.Parsing,_=a.Operators={rtoken:function(b){return function(c){var d=c.match(b);if(d)return[d[0],c.substring(d[0].length)];throw new a.Exception(c)}},token:function(a){return function(a){return _.rtoken(new RegExp("^s*"+a+"s*"))(a)}},stoken:function(a){return _.rtoken(new RegExp("^"+a))},until:function(a){return function(b){var c=[],d=null;while(b.length){try{d=a.call(this,b)}catch(e){c.push(d[0]),b=d[1];continue}break}return[c,b]}},many:function(a){return function(b){var c=[],d=null;while(b.length){try{d=a.call(this,b)}catch(e){return[c,b]}c.push(d[0]),b=d[1]}return[c,b]}},optional:function(a){return function(b){var c=null;try{c=a.call(this,b)}catch(d){return[null,b]}return[c[0],c[1]]}},not:function(b){return function(c){try{b.call(this,c)}catch(d){return[null,c]}throw new a.Exception(c)}},ignore:function(a){return a?function(b){var c=null;return c=a.call(this,b),[null,c[1]]}:null},product:function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1),c=[];for(var d=0;d<a.length;d++)c.push(_.each(a[d],b));return c},cache:function(b){var c={},d=null;return function(e){try{d=c[e]=c[e]||b.call(this,e)}catch(f){d=c[e]=f}if(d instanceof a.Exception)throw d;return d}},any:function(){var b=arguments;return function(c){var d=null;for(var e=0;e<b.length;e++){if(b[e]==null)continue;try{d=b[e].call(this,c)}catch(f){d=null}if(d)return d}throw new a.Exception(c)}},each:function(){var b=arguments;return function(c){var d=[],e=null;for(var f=0;f<b.length;f++){if(b[f]==null)continue;try{e=b[f].call(this,c)}catch(g){throw new a.Exception(c)}d.push(e[0]),c=e[1]}return[d,c]}},all:function(){var a=arguments,_=_;return _.each(_.optional(a))},sequence:function(b,c,d){return c=c||_.rtoken(/^\s*/),d=d||null,b.length==1?b[0]:function(e){var f=null,g=null,h=[];for(var i=0;i<b.length;i++){try{f=b[i].call(this,e)}catch(j){break}h.push(f[0]);try{g=c.call(this,f[1])}catch(k){g=null;break}e=g[1]}if(!f)throw new a.Exception(e);if(g)throw new a.Exception(g[1]);if(d)try{f=d.call(this,f[1])}catch(l){throw new a.Exception(f[1])}return[h,f?f[1]:e]}},between:function(a,b,c){c=c||a;var d=_.each(_.ignore(a),b,_.ignore(c));return function(a){var b=d.call(this,a);return[[b[0][0],r[0][2]],b[1]]}},list:function(a,b,c){return b=b||_.rtoken(/^\s*/),c=c||null,a instanceof Array?_.each(_.product(a.slice(0,-1),_.ignore(b)),a.slice(-1),_.ignore(c)):_.each(_.many(_.each(a,_.ignore(b))),px,_.ignore(c))},set:function(b,c,d){return c=c||_.rtoken(/^\s*/),d=d||null,function(e){var f=null,g=null,h=null,i=null,j=[[],e],k=!1;for(var l=0;l<b.length;l++){h=null,g=null,f=null,k=b.length==1;try{f=b[l].call(this,e)}catch(m){continue}i=[[f[0]],f[1]];if(f[1].length>0&&!k)try{h=c.call(this,f[1])}catch(n){k=!0}else k=!0;!k&&h[1].length===0&&(k=!0);if(!k){var o=[];for(var p=0;p<b.length;p++)l!=p&&o.push(b[p]);g=_.set(o,c).call(this,h[1]),g[0].length>0&&(i[0]=i[0].concat(g[0]),i[1]=g[1])}i[1].length<j[1].length&&(j=i);if(j[1].length===0)break}if(j[0].length===0)return j;if(d){try{h=d.call(this,j[1])}catch(q){throw new a.Exception(j[1])}j[1]=h[1]}return j}},forward:function(a,b){return function(c){return a[b].call(this,c)}},replace:function(a,b){return function(c){var d=a.call(this,c);return[b,d[1]]}},process:function(a,b){return function(c){var d=a.call(this,c);return[b.call(this,d[0]),d[1]]}},min:function(b,c){return function(d){var e=c.call(this,d);if(e[0].length<b)throw new a.Exception(d);return e}}},b=function(a){return function(){var b=null,c=[];arguments.length>1?b=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(b=arguments[0]);if(!b)return a.apply(null,arguments);for(var d=0,e=b.shift();d<e.length;d++)return b.unshift(e[d]),c.push(a.apply(null,b)),b.shift(),c}},c="optional not ignore cache".split(/\s/);for(var d=0;d<c.length;d++)_[c[d]]=b(_[c[d]]);var e=function(a){return function(){return arguments[0]instanceof Array?a.apply(null,arguments[0]):a.apply(null,arguments)}},f="each any all".split(/\s/);for(var g=0;g<f.length;g++)_[f[g]]=e(_[f[g]])}(),function(){var a=Date,b=a.prototype,c=a.CultureInfo,d=function(a){var b=[];for(var c=0;c<a.length;c++)a[c]instanceof Array?b=b.concat(d(a[c])):a[c]&&b.push(a[c]);return b};a.Grammar={},a.Translator={hour:function(a){return function(){this.hour=Number(a)}},minute:function(a){return function(){this.minute=Number(a)}},second:function(a){return function(){this.second=Number(a)}},meridian:function(a){return function(){this.meridian=a.slice(0,1).toLowerCase()}},timezone:function(a){return function(){var b=a.replace(/[^\d\+\-]/g,"");b.length?this.timezoneOffset=Number(b):this.timezone=a.toLowerCase()}},day:function(a){var b=a[0];return function(){this.day=Number(b.match(/\d+/)[0])}},month:function(a){return function(){this.month=a.length==3?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(a)/4:Number(a)-1}},year:function(a){return function(){var b=Number(a);this.year=a.length>2?b:b+(b+2e3<c.twoDigitYearMax?2e3:1900)}},rday:function(a){return function(){switch(a){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0,this.now=!0}}},finishExact:function(b){b=b instanceof Array?b:[b];for(var c=0;c<b.length;c++)b[c]&&b[c].call(this);var d=new Date;(this.hour||this.minute)&&!this.month&&!this.year&&!this.day&&(this.day=d.getDate()),this.year||(this.year=d.getFullYear()),!this.month&&this.month!==0&&(this.month=d.getMonth()),this.day||(this.day=1),this.hour||(this.hour=0),this.minute||(this.minute=0),this.second||(this.second=0),this.meridian&&this.hour&&(this.meridian=="p"&&this.hour<12?this.hour=this.hour+12:this.meridian=="a"&&this.hour==12&&(this.hour=0));if(this.day>a.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");var e=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);return this.timezone?e.set({timezone:this.timezone}):this.timezoneOffset&&e.set({timezoneOffset:this.timezoneOffset}),e},finish:function(b){b=b instanceof Array?d(b):[b];if(b.length===0)return null;for(var c=0;c<b.length;c++)typeof b[c]=="function"&&b[c].call(this);var e=a.today();if(this.now&&!this.unit&&!this.operator)return new Date;this.now&&(e=new Date);var f=!!(this.days&&this.days!==null||this.orient||this.operator),g,h,i;i=this.orient=="past"||this.operator=="subtract"?-1:1,!this.now&&"hour minute second".indexOf(this.unit)!=-1&&e.setTimeToNow(),(this.month||this.month===0)&&"year day hour minute second".indexOf(this.unit)!=-1&&(this.value=this.month+1,this.month=null,f=!0);if(!f&&this.weekday&&!this.day&&!this.days){var j=Date[this.weekday]();this.day=j.getDate(),this.month||(this.month=j.getMonth()),this.year=j.getFullYear()}f&&this.weekday&&this.unit!="month"&&(this.unit="day",g=a.getDayNumberFromName(this.weekday)-e.getDay(),h=7,this.days=g?(g+i*h)%h:i*h),this.month&&this.unit=="day"&&this.operator&&(this.value=this.month+1,this.month=null),this.value!=null&&this.month!=null&&this.year!=null&&(this.day=this.value*1),this.month&&!this.day&&this.value&&(e.set({day:this.value*1}),f||(this.day=this.value*1)),!this.month&&this.value&&this.unit=="month"&&!this.now&&(this.month=this.value,f=!0),f&&(this.month||this.month===0)&&this.unit!="year"&&(this.unit="month",g=this.month-e.getMonth(),h=12,this.months=g?(g+i*h)%h:i*h,this.month=null),this.unit||(this.unit="day");if(!this.value&&this.operator&&this.operator!==null&&this[this.unit+"s"]&&this[this.unit+"s"]!==null)this[this.unit+"s"]=this[this.unit+"s"]+(this.operator=="add"?1:-1)+(this.value||0)*i;else if(this[this.unit+"s"]==null||this.operator!=null)this.value||(this.value=1),this[this.unit+"s"]=this.value*i;this.meridian&&this.hour&&(this.meridian=="p"&&this.hour<12?this.hour=this.hour+12:this.meridian=="a"&&this.hour==12&&(this.hour=0));if(this.weekday&&!this.day&&!this.days){var j=Date[this.weekday]();this.day=j.getDate(),j.getMonth()!==e.getMonth()&&(this.month=j.getMonth())}return(this.month||this.month===0)&&!this.day&&(this.day=1),!this.orient&&!this.operator&&this.unit=="week"&&this.value&&!this.day&&!this.month?Date.today().setWeek(this.value):(f&&this.timezone&&this.day&&this.days&&(this.day=this.days),f?e.add(this):e.set(this))}};var _=a.Parsing.Operators,e=a.Grammar,f=a.Translator,g;e.datePartDelimiter=_.rtoken(/^([\s\-\.\,\/\x27]+)/),e.timePartDelimiter=_.stoken(":"),e.whiteSpace=_.rtoken(/^\s*/),e.generalDelimiter=_.rtoken(/^(([\s\,]|at|@|on)+)/);var h={};e.ctoken=function(a){var b=h[a];if(!b){var d=c.regexPatterns,e=a.split(/\s+/),f=[];for(var g=0;g<e.length;g++)f.push(_.replace(_.rtoken(d[e[g]]),e[g]));b=h[a]=_.any.apply(null,f)}return b},e.ctoken2=function(a){return _.rtoken(c.regexPatterns[a])},e.h=_.cache(_.process(_.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),f.hour)),e.hh=_.cache(_.process(_.rtoken(/^(0[0-9]|1[0-2])/),f.hour)),e.H=_.cache(_.process(_.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),f.hour)),e.HH=_.cache(_.process(_.rtoken(/^([0-1][0-9]|2[0-3])/),f.hour)),e.m=_.cache(_.process(_.rtoken(/^([0-5][0-9]|[0-9])/),f.minute)),e.mm=_.cache(_.process(_.rtoken(/^[0-5][0-9]/),f.minute)),e.s=_.cache(_.process(_.rtoken(/^([0-5][0-9]|[0-9])/),f.second)),e.ss=_.cache(_.process(_.rtoken(/^[0-5][0-9]/),f.second)),e.hms=_.cache(_.sequence([e.H,e.m,e.s],e.timePartDelimiter)),e.t=_.cache(_.process(e.ctoken2("shortMeridian"),f.meridian)),e.tt=_.cache(_.process(e.ctoken2("longMeridian"),f.meridian)),e.z=_.cache(_.process(_.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),f.timezone)),e.zz=_.cache(_.process(_.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),f.timezone)),e.zzz=_.cache(_.process(e.ctoken2("timezone"),f.timezone)),e.timeSuffix=_.each(_.ignore(e.whiteSpace),_.set([e.tt,e.zzz])),e.time=_.each(_.optional(_.ignore(_.stoken("T"))),e.hms,e.timeSuffix),e.d=_.cache(_.process(_.each(_.rtoken(/^([0-2]\d|3[0-1]|\d)/),_.optional(e.ctoken2("ordinalSuffix"))),f.day)),e.dd=_.cache(_.process(_.each(_.rtoken(/^([0-2]\d|3[0-1])/),_.optional(e.ctoken2("ordinalSuffix"))),f.day)),e.ddd=e.dddd=_.cache(_.process(e.ctoken("sun mon tue wed thu fri sat"),function(a){return function(){this.weekday=a}})),e.M=_.cache(_.process(_.rtoken(/^(1[0-2]|0\d|\d)/),f.month)),e.MM=_.cache(_.process(_.rtoken(/^(1[0-2]|0\d)/),f.month)),e.MMM=e.MMMM=_.cache(_.process(e.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),f.month)),e.y=_.cache(_.process(_.rtoken(/^(\d\d?)/),f.year)),e.yy=_.cache(_.process(_.rtoken(/^(\d\d)/),f.year)),e.yyy=_.cache(_.process(_.rtoken(/^(\d\d?\d?\d?)/),f.year)),e.yyyy=_.cache(_.process(_.rtoken(/^(\d\d\d\d)/),f.year)),g=function(){return _.each(_.any.apply(null,arguments),_.not(e.ctoken2("timeContext")))},e.day=g(e.d,e.dd),e.month=g(e.M,e.MMM),e.year=g(e.yyyy,e.yy),e.orientation=_.process(e.ctoken("past future"),function(a){return function(){this.orient=a}}),e.operator=_.process(e.ctoken("add subtract"),function(a){return function(){this.operator=a}}),e.rday=_.process(e.ctoken("yesterday tomorrow today now"),f.rday),e.unit=_.process(e.ctoken("second minute hour day week month year"),function(a){return function(){this.unit=a}}),e.value=_.process(_.rtoken(/^\d\d?(st|nd|rd|th)?/),function(a){return function(){this.value=a.replace(/\D/g,"")}}),e.expression=_.set([e.rday,e.operator,e.value,e.unit,e.orientation,e.ddd,e.MMM]),g=function(){return _.set(arguments,e.datePartDelimiter)},e.mdy=g(e.ddd,e.month,e.day,e.year),e.ymd=g(e.ddd,e.year,e.month,e.day),e.dmy=g(e.ddd,e.day,e.month,e.year),e.date=function(a){return(e[c.dateElementOrder]||e.mdy).call(this,a)},e.format=_.process(_.many(_.any(_.process(_.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(b){if(e[b])return e[b];throw a.Parsing.Exception(b)}),_.process(_.rtoken(/^[^dMyhHmstz]+/),function(a){return _.ignore(_.stoken(a))}))),function(a){return _.process(_.each.apply(null,a),f.finishExact)});var i={},j=function(a){return i[a]=i[a]||e.format(a)[0]};e.formats=function(a){if(a instanceof Array){var b=[];for(var c=0;c<a.length;c++)b.push(j(a[c]));return _.any.apply(null,b)}return j(a)},e._formats=e.formats(['"yyyy-MM-ddTHH:mm:ssZ"',"yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]),e._start=_.process(_.set([e.date,e.time,e.expression],e.generalDelimiter,e.whiteSpace),f.finish),e.start=function(a){try{var b=e._formats.call({},a);if(b[1].length===0)return b}catch(c){}return e._start.call({},a)},a._parse=a.parse,a.parse=function(b){var c=null;if(!b)return null;if(b instanceof Date)return b;try{c=a.Grammar.start.call({},b.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(d){return null}return c[1].length===0?c[0]:null},a.getParseFunction=function(b){var c=a.Grammar.formats(b);return function(a){var b=null;try{b=c.call({},a)}catch(d){return null}return b[1].length===0?b[0]:null}},a.parseExact=function(b,c){return a.getParseFunction(c)(b)}}(),define("libs/date.js/build/date",function(){}),TimeSpan=function(a,b){this.days=0,this.hours=0,this.minutes=0,this.seconds=0,this.milliseconds=0;var c=a<0?-1:1;return this.milliseconds=Math.abs(a),b=b||Math.floor,this.days=b(this.milliseconds/864e5)*c,this.milliseconds=this.milliseconds%864e5,this.hours=b(this.milliseconds/36e5)*c,this.milliseconds=this.milliseconds%36e5,this.minutes=b(this.milliseconds/6e4)*c,this.milliseconds=this.milliseconds%6e4,this.seconds=b(this.milliseconds/1e3)*c,this.milliseconds=this.milliseconds%1e3,this.milliseconds=this.milliseconds*c,this},TimeSpan.prototype.compare=function(a){var b=new Date(1970,1,1,this.hours(),this.minutes(),this.seconds()),c;return a===null?c=new Date(1970,1,1,0,0,0):c=new Date(1970,1,1,a.hours(),a.minutes(),a.seconds()),b>c?1:b<c?-1:0},TimeSpan.prototype.add=function(a){return a===null?this:this.addSeconds(a.getTotalMilliseconds()/1e3)},TimeSpan.prototype.subtract=function(a){return a===null?this:this.addSeconds(-a.getTotalMilliseconds()/1e3)},TimeSpan.prototype.addDays=function(a){return new TimeSpan(this.getTotalMilliseconds()+a*24*60*60*1e3)},TimeSpan.prototype.addHours=function(a){return new TimeSpan(this.getTotalMilliseconds()+a*60*60*1e3)},TimeSpan.prototype.addMinutes=function(a){return new TimeSpan(this.getTotalMilliseconds()+a*60*1e3)},TimeSpan.prototype.addSeconds=function(a){return new TimeSpan(this.getTotalMilliseconds()+a*1e3)},TimeSpan.prototype.addMilliseconds=function(a){return new TimeSpan(this.getTotalMilliseconds()+a)},TimeSpan.prototype.getTotalMilliseconds=function(){return this.days()*864e5+this.hours()*36e5+this.minutes()*6e4+this.seconds()*1e3},TimeSpan.prototype.get12HourHour=function(){return(h=this.hours()%12)?h:12},TimeSpan.prototype.getDesignator=function(){return this.hours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator},TimeSpan.prototype.toString=function(a){function b(){return this.days()!==null&&this.days()>0?this.days()+"."+this.hours()+":"+c(this.minutes())+":"+c(this.seconds()):this.hours()+":"+c(this.minutes())+":"+c(this.seconds())}function c(a){return a.toString().length<2?"0"+a:a}var d=this;return a?a.replace(/d|dd|HH|H|hh|h|mm|m|ss|s|tt|t/g,function(a){switch(a){case"d":return d.days();case"dd":return c(d.days());case"H":return d.hours();case"HH":return c(d.hours());case"h":return d.get12HourHour();case"hh":return c(d.get12HourHour());case"m":return d.minutes();case"mm":return c(d.minutes());case"s":return d.seconds();case"ss":return c(d.seconds());case"t":return(this.hours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator).substring(0,1);case"tt":return this.hours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator}}):this._toString()};var TimePeriod=function(a,b,c){this.years=0,this.months=0,this.days=0,this.hours=0,this.minutes=0,this.seconds=0,this.milliseconds=0;var d=a.clone(),e=b.clone(),f=d.clone(),g=d>e?-1:1;this.years=e.getFullYear()-d.getFullYear(),f.addYears(this.years),g==+1?f>e&&this.years!==0&&this.years--:f<e&&this.years!==0&&this.years++,d.addYears(this.years);if(g==+1)while(d<e&&d.clone().addDays(d.getDaysInMonth())<=e)d.addMonths(1),this.months++;else while(d>e&&d.clone().addDays(-d.getDaysInMonth())>=e)d.addMonths(-1),this.months--;var h=e-d;if(h!==0){var i=new TimeSpan(h,c);this.days=i.days,this.hours=i.hours,this.minutes=i.minutes,this.seconds=i.seconds,this.milliseconds=i.milliseconds}return this.years>=1&&(this.months>0||this.days>0)&&(this.years+=1),this.months>=1&&this.months<11&&this.days>0&&(this.months+=1),this};define("libs/date.js/build/time.special",function(){}),define("tau/utils/utils.date",["Underscore","tau/configurator","tau/utils/utils.date/utils.date.formats","tau/utils/utils.translation","libs/date.js/build/date","libs/date.js/build/time.special"],function(_,a,b,c){var d={};Date.prototype.getDaysInMonth=function(){return Date.getDaysInMonth(this.getDate(),this.getMonth())};var e=function(a){return function(b){var c=d.parse(b);return c?d._format(c,a):""}};return d={serverTimezoneOffset:-1*(new Date).getTimezoneOffset(),format:{date:{"short":e(b.date.short)},time:{"short":e(b.time.short)},datetime:{"short":e(b.datetime.short)}},_format:function(a,b){return a.toString(b)||""},formatAs:function(a,b){return this._format(a,b)},parse:function(a){if(_.isString(a)&&/^\/Date\(/.test(a)){var b=a.match(/^\/Date\((-?\d+)(([+-])(\d{2})(\d{2}))\)\//),c=parseInt(b[1]),e=(parseInt(b[4])*60+parseInt(b[5]))*parseInt(b[3]+"1");a=new Date(c),a.sourceOffset=e,d.serverTimezoneOffset=e}return Date.parse(a)},convertToTimezone:function(a,b){a=d.parse(a);if(!a)return a;b||(b=a.sourceOffset||null);if(!b)return a;var c=(new Date).getTimezoneOffset(),e=b+c;return a=new Date(a.getTime()+e*60*1e3),a},getFormatData:function(){return b},getAge:function(b,d){d=d||a.getCurrentDate(),b=Date.parse(b);var e={isZero:!0,value:0,unit:"sec",direction:"ago",toString:function(){var a;return this.isZero?a="now":a=this.value+" "+this.unit+" "+this.direction,a}};e.direction=d>b?"ago":"after";var f=new TimePeriod(b,d,function(a){return a===1?1:a<1?0:Math.ceil(a)}),g=[{func:"years",units:"year|years"},{func:"months",units:"month|months"},{func:"days",units:"day|days"},{func:"hours",units:"hour|hours"},{func:"minutes",units:"min"},{func:"seconds",units:"sec"}],h=_.detect(g,function(a,b){var d=f[a.func];if(d!==0)return a.value=Math.abs(d),a.unit=c.pluralize(a.units,d),!0});return h&&(e.isZero=!1,e.value=h.value,e.unit=h.unit),e}},d}),define("tau/models/model.attachments",["tau/core/model-base","tau/configurator","tau/utils/utils.date"],function(a,b,c){function e(a,b){this.model=a,this.filterCallback=b||d}var d=function(){return!0};e.prototype={getAssignableRetrievedCallback:function(){return{scope:this,success:this.onAssignableRetrieved}},onAssignableRetrieved:function(a){this.assignable=a.data;var b={items:this.getAttachments()},c=this.getSelected();c&&(b.selected=c),this.model.data=b,this.model.bus.fire("dataBind",b)},each:function(a){var b=this.assignable.attachments,c=b.length;for(var d=0;d<c;d++){var e=b[d];this.filterCallback(e)&&a(e)}},getAttachments:function(){var a=this,b=[],c=a.model.config.selected,d=function(d){var e=a.attachmentDTOToModelAttachment(d);b.push(e),c&&d.id==c.id&&(a.selected=e,e.selected=!0)};return this.each(d),b},attachmentDTOToModelAttachment:function(a){var b=c.parse(c.convertToTimezone(a.date));return{id:a.id,name:a.name,mimeType:a.mimeType,ownerName:[a.owner.firstName," ",a.owner.lastName].join(""),date:c.format.date.short(b),thumbnailUri:a.thumbnailUri,uri:a.uri}},getSelected:function(){return this.selected}};var f=a.extend({init:function(a,b,c){this.name="Attachment Model",this._super.apply(this,arguments),this.filter=this.config.filter||c},_getFields:function(){var a=[{attachments:["id","date","name","mimeType","uri","thumbnailUri",{owner:["id","firstName","lastName"]}]}];return a},onInit:function(){var a=this.config.context.entity,b=new e(this,this.filter),c=this._getFields();this.store.get(a.entityType.name,{id:a.id,fields:c},b.getAssignableRetrievedCallback()).done()},setSelected:function(a){if(this.config.selected.id!=a.id){var b=this.data.items,c=null;for(var d=0;d<b.length;d++)if(b[d].id==a.id){c=b[d];break}c&&(this.config.selected=c,this.fire("selectedChanged",{attachment:a}))}},next:function(){var a=this.data.items,b=null,c=this.config.selected;for(var d=0;d<a.length;d++)if(a[d].id==c.id){b=a[d];break}b&&(d==a.length-1&&(d=-1),this.setSelected(a[d+1]))},prev:function(){var a=this.data.items,b=null,c=this.config.selected;for(var d=0;d<a.length;d++)if(a[d].id==c.id){b=a[d];break}b&&(d==0&&(d=a.length),this.setSelected(a[d-1]))},close:function(){this.fire("close")},"bus attachmentUploaded":function(a){var b=this,c=[{general:["id"]}].concat(b._getFields()[0].attachments);b.store.save("attachment",{id:a.data.data.id,$set:{},fields:c}).done({success:function(){b.bus.fire("attachmentUploadCompleted",{element:a.data.element})}})}});return f}),define("tau/models/model.attachments.editable",["Underscore","tau/core/model.editable.base"],function(_,a){return a.extend({category:"edit",name:"Editable attachment","bus dataBind":function(a){this.bus.fire("permissionsReady",{editable:!0,deletable:!0}),this._attachments||(this._attachments=a.data.items)},"bus attachmentUploaded":function(a){this._addAttachment(a.data.data)},onInit:function(){var a=this;this.store.on({eventName:"afterRemove",listener:a,type:"attachment"},function(b){var c=parseInt(b.data.cmd.config.id);a._isValidAttachmentId(c)&&(a._removeAttachment(c),a.bus.fire("afterAttachmentRemove",{id:c}))})},_addAttachment:function(a){this._attachments.push(a)},_removeAttachment:function(a){this._attachments=_.reject(this._attachments,function(b){return a===b.id})},_isValidAttachmentId:function(a){return _.any(this._attachments,function(b){return b.id===a})}})}),function(a){typeof define=="function"&&define.amd?define("libs/jquery/jquery.iframe-transport",["jQuery"],a):a(window.jQuery)}(function($){var a=0;$.ajaxTransport("iframe",function(b){if(b.async&&(b.type==="POST"||b.type==="GET")){var c,d;return{send:function(_,e){c=$('<form style="display:none;"></form>'),d=$('<iframe src="javascript:false;" name="iframe-transport-'+(a+=1)+'"></iframe>').bind("load",function(){var a;d.unbind("load").bind("load",function(){var a;try{a=d.contents();if(!a.length||!a[0].firstChild)throw new Error}catch(b){a=undefined}e(200,"success",{iframe:a}),$('<iframe src="javascript:false;"></iframe>').appendTo(c),c.remove()}),c.prop("target",d.prop("name")).prop("action",b.url).prop("method",b.type),b.formData&&$.each(b.formData,function(a,b){$('<input type="hidden"/>').prop("name",b.name).val(b.value).appendTo(c)}),b.fileInput&&b.fileInput.length&&b.type==="POST"&&(a=b.fileInput.clone(),b.fileInput.after(function(b){return a[b]}),b.paramName&&b.fileInput.each(function(){$(this).prop("name",b.paramName)}),c.append(b.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data")),c.submit(),a&&a.length&&b.fileInput.each(function(b,c){var d=$(a[b]);$(c).prop("name",d.prop("name")),d.replaceWith(c)})}),c.append(d).appendTo(document.body)},abort:function(){d&&d.unbind("load").prop("src","javascript".concat(":false;")),c&&c.remove()}}}}),$.ajaxSetup({converters:{"iframe text":function(a){return $(a[0].body).text()},"iframe json":function(a){return $.parseJSON($(a[0].body).text())},"iframe html":function(a){return $(a[0].body).html()},"iframe script":function(a){return $.globalEval($(a[0].body).text())}}})}),function(a){typeof define=="function"&&define.amd?define("libs/jquery/jquery.fileupload",["jQuery","./jquery.iframe-transport"],a):a(window.jQuery)}(function($){$.widget("blueimp.fileupload",{options:{namespace:undefined,dropZone:$(document),fileInput:undefined,replaceFileInput:!0,paramName:undefined,singleFileUploads:!0,limitMultiFileUploads:undefined,sequentialUploads:!1,limitConcurrentUploads:undefined,forceIframeTransport:!1,postMessage:undefined,multipart:!0,maxChunkSize:undefined,uploadedBytes:undefined,recalculateProgress:!0,formData:function(a){return a.serializeArray()},add:function(a,b){b.submit()},processData:!1,contentType:!1,cache:!1},_refreshOptionsList:["namespace","dropZone","fileInput"],_isXHRUpload:function(a){var b="undefined";return!a.forceIframeTransport&&typeof XMLHttpRequestUpload!==b&&typeof File!==b&&(!a.multipart||typeof FormData!==b)},_getFormData:function(a){var b;return typeof a.formData=="function"?a.formData(a.form):$.isArray(a.formData)?a.formData:a.formData?(b=[],$.each(a.formData,function(a,c){b.push({name:a,value:c})}),b):[]},_getTotal:function(a){var b=0;return $.each(a,function(a,c){b+=c.size||1}),b},_onProgress:function(a,b){if(a.lengthComputable){var c=b.total||this._getTotal(b.files),d=parseInt(a.loaded/a.total*(b.chunkSize||c),10)+(b.uploadedBytes||0);this._loaded+=d-(b.loaded||b.uploadedBytes||0),b.lengthComputable=!0,b.loaded=d,b.total=c,this._trigger("progress",a,b),this._trigger("progressall",a,{lengthComputable:!0,loaded:this._loaded,total:this._total})}},_initProgressListener:function(a){var b=this,c=a.xhr?a.xhr():$.ajaxSettings.xhr();c.upload&&($(c.upload).bind("progress",function(c){var d=c.originalEvent;c.lengthComputable=d.lengthComputable,c.loaded=d.loaded,c.total=d.total,b._onProgress(c,a)}),a.xhr=function(){return c})},_initXHRData:function(a){var b,c=a.files[0];if(!a.multipart||a.blob)a.headers=$.extend(a.headers,{"X-File-Name":c.name,"X-File-Type":c.type,"X-File-Size":c.size}),a.blob?a.multipart||(a.contentType="application/octet-stream",a.data=a.blob):(a.contentType=c.type,a.data=c);a.multipart&&typeof FormData!="undefined"&&(a.postMessage?(b=this._getFormData(a),a.blob?b.push({name:a.paramName,value:a.blob}):$.each(a.files,function(c,d){b.push({name:a.paramName,value:d})})):(a.formData instanceof FormData?b=a.formData:(b=new FormData,$.each(this._getFormData(a),function(a,c){b.append(c.name,c.value)})),a.blob?b.append(a.paramName,a.blob):$.each(a.files,function(c,d){d instanceof Blob&&b.append(a.paramName,d)})),a.data=b),a.blob=null},_initIframeSettings:function(a){a.dataType="iframe "+(a.dataType||""),a.formData=this._getFormData(a)},_initDataSettings:function(a){this._isXHRUpload(a)?(this._chunkedUpload(a,!0)||(a.data||this._initXHRData(a),this._initProgressListener(a)),a.postMessage&&(a.dataType="postmessage "+(a.dataType||""))):this._initIframeSettings(a,"iframe")},_initFormSettings:function(a){if(!a.form||!a.form.length)a.form=$(a.fileInput.prop("form"));a.paramName||(a.paramName=a.fileInput.prop("name")||"files[]"),a.url||(a.url=a.form.prop("action")||location.href),a.type=(a.type||a.form.prop("method")||"").toUpperCase(),a.type!=="POST"&&a.type!=="PUT"&&(a.type="POST")},_getAJAXSettings:function(a){var b=$.extend({},this.options,a);return this._initFormSettings(b),this._initDataSettings(b),b},_enhancePromise:function(a){return a.success=a.done,a.error=a.fail,a.complete=a.always,a},_getXHRPromise:function(a,b,c){var d=$.Deferred(),e=d.promise();return b=b||this.options.context||e,a===!0?d.resolveWith(b,c):a===!1&&d.rejectWith(b,c),e.abort=d.promise,this._enhancePromise(e)},_chunkedUpload:function(a,b){var c=this,d=a.files[0],e=d.size,f=a.uploadedBytes=a.uploadedBytes||0,g=a.maxChunkSize||e,h=d.webkitSlice||d.mozSlice||d.slice,i,j,k,l;return!(this._isXHRUpload(a)&&h&&(f||g<e))||a.data?!1:b?!0:f>=e?(d.error="uploadedBytes",this._getXHRPromise(!1,a.context,[null,"error",d.error])):(j=Math.ceil((e-f)/g),i=function(b){return b?i(b-=1).pipe(function(){var e=$.extend({},a);return e.blob=h.call(d,f+b*g,f+(b+1)*g),e.chunkSize=e.blob.size,c._initXHRData(e),c._initProgressListener(e),k=($.ajax(e)||c._getXHRPromise(!1,e.context)).done(function(){e.loaded||c._onProgress($.Event("progress",{lengthComputable:!0,loaded:e.chunkSize,total:e.chunkSize}),e),a.uploadedBytes=e.uploadedBytes+=e.chunkSize}),k}):c._getXHRPromise(!0,a.context)},l=i(j),l.abort=function(){return k.abort()},this._enhancePromise(l))},_beforeSend:function(a,b){this._active===0&&this._trigger("start"),this._active+=1,this._loaded+=b.uploadedBytes||0,this._total+=this._getTotal(b.files)},_onDone:function(a,b,c,d){this._isXHRUpload(d)||this._onProgress($.Event("progress",{lengthComputable:!0,loaded:1,total:1}),d),d.result=a,d.textStatus=b,d.jqXHR=c,this._trigger("done",null,d)},_onFail:function(a,b,c,d){d.jqXHR=a,d.textStatus=b,d.errorThrown=c,this._trigger("fail",null,d),d.recalculateProgress&&(this._loaded-=d.loaded||d.uploadedBytes||0,this._total-=d.total||this._getTotal(d.files))},_onAlways:function(a,b,c,d){this._active-=1,d.textStatus=b,c&&c.always?(d.jqXHR=c,d.result=a):(d.jqXHR=a,d.errorThrown=c),this._trigger("always",null,d),this._active===0&&(this._trigger("stop"),this._loaded=this._total=0)},_onSend:function(a,b){var c=this,d,e,f,g=c._getAJAXSettings(b),h=function(b,e){return c._sending+=1,d=d||(b!==!1&&c._trigger("send",a,g)!==!1&&(c._chunkedUpload(g)||$.ajax(g))||c._getXHRPromise(!1,g.context,e)).done(function(a,b,d){c._onDone(a,b,d,g)}).fail(function(a,b,d){c._onFail(a,b,d,g)}).always(function(a,b,d){c._sending-=1,c._onAlways(a,b,d,g);if(g.limitConcurrentUploads&&g.limitConcurrentUploads>c._sending){var e=c._slots.shift();while(e){if(!e.isRejected()){e.resolve();break}e=c._slots.shift()}}}),d};return this._beforeSend(a,g),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(e=$.Deferred(),this._slots.push(e),f=e.pipe(h)):f=this._sequence=this._sequence.pipe(h,h),f.abort=function(){var a=[undefined,"abort","abort"];return d?d.abort():(e&&e.rejectWith(a),h(!1,a))},this._enhancePromise(f)):h()},_onAdd:function(a,b){var c=this,d=!0,e=$.extend({},this.options,b),f=e.limitMultiFileUploads,g,h;if(!e.singleFileUploads&&!f||!this._isXHRUpload(e))g=[b.files];else if(!e.singleFileUploads&&f){g=[];for(h=0;h<b.files.length;h+=f)g.push(b.files.slice(h,h+f))}return b.originalFiles=b.files,$.each(g||b.files,function(e,f){var h=g?f:[f],i=$.extend({},b,{files:h});return i.submit=function(){return i.jqXHR=this.jqXHR=c._trigger("submit",a,this)!==!1&&c._onSend(a,this),this.jqXHR},d=c._trigger("add",a,i)}),d},_normalizeFile:function(a,b){b.name===undefined&&b.size===undefined&&(b.name=b.fileName,b.size=b.fileSize)},_replaceFileInput:function(a){var b=a.clone(!0);$("<form></form>").append(b)[0].reset(),a.after(b).detach(),$.cleanData(a.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(c,d){return d===a[0]?b[0]:d}),a[0]===this.element[0]&&(this.element=b)},_onChange:function(a){var b=a.data.fileupload,c={files:$.each($.makeArray(a.target.files),b._normalizeFile),fileInput:$(a.target),form:$(a.target.form)};c.files.length||(c.files=[{name:a.target.value.replace(/^.*\\/,"")}]),b.options.replaceFileInput&&b._replaceFileInput(c.fileInput);if(b._trigger("change",a,c)===!1||b._onAdd(a,c)===!1)return!1},_onPaste:function(a){var b=a.data.fileupload,c=a.originalEvent.clipboardData,d=c&&c.items||[],e={files:[]};$.each(d,function(a,b){var c=b.getAsFile&&b.getAsFile();c&&e.files.push(c)});if(b._trigger("paste",a,e)===!1||b._onAdd(a,e)===!1)return!1},_onDrop:function(a){var b=a.data.fileupload,c=a.dataTransfer=a.originalEvent.dataTransfer,d={files:$.each($.makeArray(c&&c.files),b._normalizeFile)};if(b._trigger("drop",a,d)===!1||b._onAdd(a,d)===!1)return!1;a.preventDefault()},_onDragOver:function(a){var b=a.data.fileupload,c=a.dataTransfer=a.originalEvent.dataTransfer;if(b._trigger("dragover",a)===!1)return!1;c&&(c.dropEffect=c.effectAllowed="copy"),a.preventDefault()},_initEventHandlers:function(){var a=this.options.namespace;this.options.dropZone.bind("dragover."+a,{fileupload:this},this._onDragOver).bind("drop."+a,{fileupload:this},this._onDrop).bind("paste."+a,{fileupload:this},this._onPaste),this.options.fileInput.bind("change."+a,{fileupload:this},this._onChange)},_destroyEventHandlers:function(){var a=this.options.namespace;this.options.dropZone.unbind("dragover."+a,this._onDragOver).unbind("drop."+a,this._onDrop).unbind("paste."+a,this._onPaste),this.options.fileInput.unbind("change."+a,this._onChange)},_beforeSetOption:function(a,b){this._destroyEventHandlers()},_afterSetOption:function(a,b){var c=this.options;c.fileInput||(c.fileInput=$()),c.dropZone||(c.dropZone=$()),this._initEventHandlers()},_setOption:function(a,b){var c=$.inArray(a,this._refreshOptionsList)!==-1;c&&this._beforeSetOption(a,b),$.Widget.prototype._setOption.call(this,a,b),c&&this._afterSetOption(a,b)},_create:function(){var a=this.options;a.namespace=a.namespace||this.widgetName,a.fileInput===undefined?a.fileInput=this.element.is("input:file")?this.element:this.element.find("input:file"):a.fileInput||(a.fileInput=$()),a.dropZone||(a.dropZone=$()),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=this._loaded=this._total=0,this._initEventHandlers()},destroy:function(){this._destroyEventHandlers(),$.Widget.prototype.destroy.call(this)},enable:function(){$.Widget.prototype.enable.call(this),this._initEventHandlers()},disable:function(){this._destroyEventHandlers(),$.Widget.prototype.disable.call(this)},add:function(a){if(!a||this.options.disabled)return;a.files=$.each($.makeArray(a.files),this._normalizeFile),this._onAdd(null,a)},send:function(a){if(a&&!this.options.disabled){a.files=$.each($.makeArray(a.files),this._normalizeFile);if(a.files.length)return this._onSend(null,a)}return this._getXHRPromise(!1,a&&a.context)}})}),define("tau/components/extensions/attachments/component.attachments.uploader",["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/utils/utils.date","libs/jquery/jquery.fileupload","libs/jquery/jquery.iframe-transport"],function(_,$,a,b,c,d){var e=/<title\b[^>]*>(.*?)<\/title>/;return a.extend({"bus permissionsReady+afterRender":function(a){if(!this._initialized){this._initialized=!0,this.element=a.afterRender.data.element;var b=a.permissionsReady.data;b.editable&&b.deletable&&this._initUploader()}},_initUploader:function(){this._createToolbar(),this._bindUploader()},_createToolbar:function(){var a=$('<div class="uploader-toolbar"></div>'),b=this._createFileBrowser();a.append(b).prependTo(this.element),this._$fileInput=b.find("input"),/\bapple\b/i.test(navigator.vendor)&&this._$fileInput.removeAttr("multiple")},_bindUploader:function(){this._$fileInput.fileupload({url:this._getUploadUrl(),formData:this._getFormData(),add:$.proxy(this,"_onFileAdd")})},_createFileBrowser:function(){return $('<span class="fileBrowser"><i>Attach files</i></span>').append($('<input type="file" multiple/>'))},_getUploadUrl:function(){return this.config.configurator.getApplicationPath()+"/UploadFile.ashx"},_getFormData:function(){return[{name:"generalId",value:this._getGeneralId()}]},_getGeneralId:function(){return this.config.context.entity.id},_getGeneralType:function(){return this.config.context.entity.entityType.name},_onFileAdd:function(a,b){var c=this,d=this._createAttachmentDummy(b.files[0].name);d.appendTo(this._getAttachmentsPlaceholder()),b.submit().success(function(a){var b=c._getResponseText(a);try{var e=c._parseResponse(b)}catch(f){c._onAttachmentUploadFail(d);return}c.bus.fire("attachmentUploaded",{element:c._updateAttachmentElement(d,e),data:e})}).error(function(a,b,f){var g=a.responseText.match(e),h="Looks like application is not available. Please check your connection or server availability";g&&g.length>0&&(h=g[1]),c._onAttachmentUploadFail(d,h)})},_updateAttachmentElement:function(a,b){var c=this._createAttachmentElement(b);return a.replaceWith(c),c},_onAttachmentUploadFail:function(a,b){this._deleteFailedAttachmentElement(a,b)},_getResponseText:function(a){var b="";return typeof a=="string"?b=a:a.jquery&&(b=a.text()),b},_createAttachmentDummy:function(a){var b=this._createAttachmentElement({name:a});return b.addClass("uploading").find(".toolbar").remove(),b},_deleteFailedAttachmentElement:function(a,b){b=b||"Upload failed",this.fire("error",{message:b}),a.addClass("failed");var c=$('<p class="error"></p>').insertAfter(a.find(".name"));c.text("Upload failed"),a.fadeOut(1500,function(){a.remove()})},_getAttachmentsPlaceholder:function(){return this.element.find(".ui-attachments-content")},_createAttachmentElement:function(a){return $.tmpl("attachments-attachment",a)},_parseResponse:function(a){var c;try{c=JSON.parse(a),c=c.items||c,c=c.pop()}catch(d){}var e=b.parse(b.convertToTimezone(c[1])),f={id:c[0],uri:c[4],thumbnailUri:c[5],mimeType:c[3],name:c[2],ownerName:c[6][1]+" "+c[6][2],date:b.format.date.short(e)};return f}})}),define("tau/components/extensions/attachments/component.attachments.selectable",["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/extensions/extension.javascript"],function(_,$,a){return a.extend({"bus afterRender":function(a){var b=a.data.element;b.delegate("[role=attachment]","click",$.proxy(this,"_onAttachmentClick"))},_onAttachmentClick:function(a){var b=$(a.target),c=b.closest(".toolbar").size()!=0;if(!c){a.preventDefault();var d=b.closest(".ui-attach");this.bus.fire("attachmentSelected",{attachment:d.data().tmplItem.data,index:d.index()})}}})}),define("tau/components/extensions/attachments/component.attachments.showPreview",["Underscore","tau/components/extensions/component.creator.extension"],function(_,a){var b=a.extend({"bus initialize":function(a){var b=a.data.context,c=b.assignable;this.contextForPreview={applicationContext:b.applicationContext};var d={entityType:c.entityType,id:c.id};_(this.contextForPreview).extend({assignable:d,general:d,entity:d})},"bus attachmentSelected":function(a){var b=a.data.attachment;b.mimeType=b.mimeType||"";if(b.mimeType.indexOf("image/")==0){var c={components:[{type:"attachmentsPreview",selected:{id:b.id}}],context:this.contextForPreview};this.createComponents(c,function(a){var b=a[0],c=b.component;c.on("afterRender",function(a){a.removeListener(),a.data.element.appendTo($("body"))}),c.fire("initialize")})}else window.location.assign(b.uri)}});return b}),define("tau/components/extensions/attachments/component.attachments.thumbProxy",["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(_,$,a){return a.extend({"bus afterRender":function(a){var b=a.data.element.find(".ui-attach .preview img");b.each(function(){var a=$(this);if(!a.prop("complete")){var b=a.parent();b.addClass("loading"),a.load(function(){b.removeClass("loading")})}})}})}),define("tau/components/extensions/attachments/component.attachments.deletable",["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(_,$,a){return a.extend({"bus permissionsReady+afterRender":function(a){this.$element=a.afterRender.data.element;var b=a.permissionsReady.data;b.deletable&&this._createDeleteTriggers()},"bus attachmentUploaded":function(a){this._createDeleteTriggers()},"bus afterAttachmentRemove":function(a){var b=this,c=a.data.id,d=this.$element.find("#attach-"+c);this.bus.fire("deleteElement",{element:d,callback:function(){$(this).remove()}})},_getDeleteTriggerProto:function(){return this._deleteTriggerProto||(this._deleteTriggerProto=$('<button class="delete" type="button">delete</button>').click($.proxy(this,"_onAttachmentDelete"))),this._deleteTriggerProto},_createDeleteTriggers:function(){var a=this;this.$element.find(".ui-attach:not(.deletable)").each(function(b,c){$(c).addClass("deletable").find(".toolbar").append(a._getDeleteTriggerProto().clone(!0))})},_onAttachmentDelete:function(a){var b=this._findUpConfirmationPlaceholder($(a.target));b.data("confirmation")||this._createConfirmation(b),this._showConfirmation(b)},_findUpConfirmationPlaceholder:function(a){return a.closest(".ui-attach").children(".inner")},_findUpAttachElement:function(a){return a.closest(".ui-attach")},_createConfirmation:function(a){a.confirmation({message:"Delete attachment?",ok:$.proxy(this,"_deleteAttachment"),cancel:$.proxy(this,"_cancelAttachmentDelete")})},_showConfirmation:function(a){a.confirmation("show")},_hideConfirmation:function(a){a.confirmation("hide")},_deleteAttachment:function(a){var b=$(a.target);this._hideConfirmation(this._findUpConfirmationPlaceholder(b));var c=this._findUpAttachElement(b);this.bus.fire("markElementToBeDeleted",{element:c}),this.bus.fire("remove",{id:c.attr("id").replace(/[^\d]/g,""),typeName:"attachment"})},_cancelAttachmentDelete:function(a){this._hideConfirmation(this._findUpConfirmationPlaceholder($(a.target)))}})}),define("tau/ui/templates/attachments/ui.template.attachments.attachment",["tau/core/tau","tau/core/templates-factory"],function(a,b){var c={name:"attachments-attachment",markup:a.concat('<div id="attach-${id}" class="ui-attach">','<div class="inner" role="attachment">','<a class="preview" href="${uri}">','<img src="${thumbnailUri}" />',"</a>",'<p class="name">${name}</p>','<p class="owner">by ${ownerName}</p>','<p class="date">on ${date}</p>','<p class="toolbar">','<a class="download" href="${uri}" target="_blank">download</a>',"</p>","</div>","</div>")};return b.register(c)}),define("tau/ui/templates/attachments/ui.template.attachments",["tau/core/templates-factory","tau/ui/templates/attachments/ui.template.attachments.attachment"],function(a){var b={name:"attachments",options:{contentSelector:".ui-attachments-content"},dependencies:["attachments-attachment"],markup:['<div class="box ui-attachments-control">','   <div class="ui-attachments-content">','       {{tmpl(items) "attachments-attachment"}}',"   </div>","</div>"].join("")};return a.register(b)}),define("tau/ui/templates/attachmentsPreview/ui.template.attachmentsPreview.attachmentThumbnail",["tau/core/templates-factory"],function(a){var b={name:"attachments-preview-attachment-thumbnail",markup:["<li>",'   <img class="ui-attach-thumbnail{{if selected}} selected{{/if}}" src="${thumbnailUri}"   />',"</li>"].join("")};return a.register(b)}),define("tau/ui/templates/attachmentsPreview/ui.template.attachmentsPreview",["tau/core/templates-factory","tau/ui/templates/attachmentsPreview/ui.template.attachmentsPreview.attachmentThumbnail"],function(a){var b={name:"attachments-preview",markup:['<div class="ui-attachments-preview-control">','<div class="toolbar">','<button class="close" type="button">X</button>','<button class="prev" type="button">&larr;</button>','<button class="next" type="button">&rarr;</button>',"</div>",'   <div class="swap-view">','    <div class="image-view">','       <div class="ui-attachment-wait"></div>','       <img class="ui-attachment-view-image" src="${selected.uri}">',"    </div>","   </div>",'   <ul class="thumbnail-nav">','       {{tmpl(items) "attachments-preview-attachment-thumbnail"}}',"   </ul>","</div>"].join(""),dependencies:["attachments-preview-attachment-thumbnail"]};return a.register(b)}),define("tau/ui/extensions/attachmentsPreview/ui.extension.attachmentsPreview",["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/configurator","tau/extensions/extension.javascript"],function(_,$,a,b){return a.extend({"bus afterRender":function(a){var c=this;c.element=a.data.element,c.element.find(".thumbnail-nav").click(c._onAttachmentThumbnailsContainerClick.tauCreateDelegate(c)),c.element.find(".toolbar .prev, .toolbar .next").click($.proxy(c,"_onAttachmentsNavigationClick")),c.element.click($.proxy(c,"_onClose")),b.getKeyBoardManager().pushHandler({handleKeyDown:function(){c._onKeyDown.apply(c,arguments)}})},"bus destroy":function(){this.destroy()},"bus changeSelected":function(a){var b=a.data.attachment;this._changeSelectedAttachment(b)},_getSelectedAttachmentSelector:function(){return".thumbnail-nav > li > img.selected"},_getAttachmentsCount:function(){return this.element.find(".thumbnail-nav > li").length},_getCurrentSelectedAttachment:function(){return this.element.find(this._getSelectedAttachmentSelector()).parent().data().tmplItem.data},_getAttachmentData:function(a){return this.element.find(".thumbnail-nav > li").eq(a).data().tmplItem.data},_getCurrentSelectedAttachmentIndex:function(){return this.element.find(this._getSelectedAttachmentSelector()).parent().index()},_changeSelectedAttachment:function(a){if(this._getCurrentSelectedAttachment().id==a.id)return;var b=this.element;b.find(".thumbnail-nav > li > img.selected").removeClass("selected");var c=b.find(".thumbnail-nav > li > img"),d=this;c.each(function(){if($(this).parent("li").data().tmplItem.data.id==a.id){$(this).addClass("selected");var c=b.find(".ui-attachment-view-image");return d.bus.fire("beforeChangeImage",a.uri)&&(c.attr("src",a.uri),d.bus.fire("afterChangeImage")),!1}})},_onKeyDown:function(a){a.keyCode==$.ui.keyCode.ESCAPE&&this._close()},_close:function(){this.element.remove(),this.bus.fire("closed"),this.fire("destroy")},_next:function(){var a=this._getCurrentSelectedAttachmentIndex()+1;a>=this._getAttachmentsCount()&&(a=0),this._setSelectedAttachmentIndex(a)},_prev:function(){var a=this._getCurrentSelectedAttachmentIndex()-1;a<0&&(a=this._getAttachmentsCount()-1),this._setSelectedAttachmentIndex(a)},_setSelectedAttachmentIndex:function(a){this._changeSelectedAttachment(this._getAttachmentData(a))},_closeButtonClick:function(a){a.stopPropagation(),this._close()},_onAttachmentsNavigationClick:function(a){a.stopPropagation();var b=$(a.target);b.hasClass("prev")?this._prev():b.hasClass("next")&&this._next()},_onAttachmentThumbnailsContainerClick:function(a){a.stopPropagation();var b=$(a.target);if(b.is(".ui-attach-thumbnail")){var c=b.parent("li").data(),d=c.tmplItem.data;this._changeSelectedAttachment(d)}},_onClose:function(a){/^img$/i.test(a.target.tagName)||this._close()},destroy:function(){b.getKeyBoardManager().popHandler(),this.element.find(".ui-attachments-control > .display-table").unbind("click")}})}),define("tau/ui/extensions/attachmentsPreview/ui.extension.attachmentsPreview.animations",["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(_,$,a){return a.extend({"bus afterRender":function(a){var b=this;b.element=a.data.element,$(window).bind("resize",function(){b._resizeImage()});var c=b.element.find(".ui-attachment-wait"),d=b.element.find(".ui-attachment-view-image");d.hide(),c.show(),this.element.find(".ui-attachment-view-image").bind("load",function(){b._onImageLoad()});var e=function(){$(this).parent().removeClass("ui-thumbnail-loading"),$(this).unbind("load",e),$(this).fadeIn("slow")};this.element.find(".thumbnail-nav li").addClass("ui-thumbnail-loading"),this.element.find(".thumbnail-nav li > img").each(function(){this.complete?e.call(this):$(this).bind("load",e).hide()})},_onImageLoad:function(){var a=this,b=a.element.find(".ui-attachment-wait"),c=a.element.find(".ui-attachment-view-image");a._resizeImage(),c.fadeIn("slow",function(){b.hide()})},_resizeImage:function(){var a=this,b=a.element;if(!b)return;var c=a.element.find(".ui-attachment-wait"),d=a.element.find(".ui-attachment-view-image"),e=b.find(".image-view");d.width(""),d.height("");var f=e.width(),g=e.height(),h=d.width(),i=d.height();if(h>f||i>g){var j=g/i*h,k=f/h*i;j<f?(d.width(j),d.height(g)):(d.width(f),d.height(k))}return{$wait:c,$image:d}},"bus beforeChangeImage":function(a){var b=this,c=b.element.find(".ui-attachment-wait"),d=b.element.find(".ui-attachment-view-image");c.show();var e=a.data;d.fadeOut("slow",function(){d.attr("src",e)}),a.data=!1}})}),define("tau/models/model.label",["tau/core/model-base"],function(a){var b=a.extend({onInit:function(){var a={text:this.config.text};this.config.cssClass&&(a.cssClass=this.config.cssClass),this.bus.fire("dataBind",a);var b=this.config.getBadgeText;typeof b=="function"&&(this.fire("beforeGetBadgeText",{prevValue:this.badgeText}),b.call(this,{callback:this.onBadgeTextRetrieved,scope:this}))},onBadgeTextRetrieved:function(a){var b=a[this.config.badgeFieldName];this.badgeText=b,this.bus?this.bus.fire("setBadgeText",{text:b}):this.fire("badgeTextChanged",{text:b})}});return b}),define("tau/ui/templates/auditHistory/ui.template.auditHistory",["tau/core/templates-factory"],function(a){var b={name:"audit-history",markup:['<div class="tau-audit-history-placeholder"><span class="ui-empty-data-msg">loading history...</span></div>'],dependencies:[]};return a.register(b)}),define("tau/ui/extensions/auditHistory/ui.audit.history",["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/configurator"],function(_,$,a,b){return a.extend({getColumns:function(){return[{Id:"RowID",Title:null,Type:"string",IsSynthetic:!0,IsUpdateable:!1,IsRequired:!1,Width:null,Facet:{}},{Id:"Entity",Title:null,Type:"string",IsSynthetic:!0,IsUpdateable:!1,IsRequired:!1,Width:null,Facet:{}},{Id:"ID",Title:null,Type:"string",IsSynthetic:!0,IsUpdateable:!1,IsRequired:!1,Width:null,Facet:{}},{Id:"Modification",Title:null,Type:"int",IsSynthetic:!0,IsUpdateable:!1,IsRequired:!1,Width:null,Facet:{}},{Id:"ProjectID",Title:null,Type:"int",IsSynthetic:!0,IsUpdateable:!1,IsRequired:!1,Width:null,Facet:{}},{Id:"InnerEntity",Title:null,Type:"string",IsSynthetic:!0,IsUpdateable:!1,IsRequired:!1,Width:null,Facet:{}},{Id:"Date",Title:"Date Time",Type:"date",IsSynthetic:!1,IsUpdateable:!1,IsRequired:!1,Width:null,Facet:{}},{Id:"Description",Title:"Action",Type:"HTMLText",IsSynthetic:!1,IsUpdateable:!1,IsRequired:!1,Width:300,Facet:{}},{Id:"Modifier",Title:"Modified By",Type:"HTMLText",IsSynthetic:!1,IsUpdateable:!1,IsRequired:!1,Width:null,Facet:{}}]},getDataRequest:function(){var a=this.config.context.entity;return{GridID:null,GroupBy:null,OrderBy:"Date",OrderDir:!1,Start:0,Limit:10,Cnt:{ID:a.id,Type:a.entityType.name}}},"bus extJsHistoryPanel":function(a){var b=a.data.panel;this.config.store.on({type:"general",eventName:"afterSave",filter:{id:this.config.context.entity.id},listener:this},function(a){b.getStore().reload()})},destroy:function(){this.config.store.unbind(this),this._super()},"bus extJsHistoryPanel+destroy":function(a){var b=a.extJsHistoryPanel.data.panel;b.destroy()},"bus initialize":function(){var a=this,d=b.getApplicationPath()+"/PageServices/AuditHistoryListService.asmx/js?d=1";require([d],function(){a.fire("serviceLoaded")})},"bus afterRender+serviceLoaded":function(a){var b=a.afterRender.data.element,c=b[0],d=this;d.config.store.unbind(this),gridPanelType="Ext.grid.GridPanel",configurationFactory="Tp.controls.grid.AuditHistoryConfigurationFactory",editorFieldFactory="Tp.controls.grid.AuditHistoryFieldFactory",gridProxy="Ext.Tp.GridServiceProxy({ webServiceProxy: Tp.Web.Extensions.ExtJs.AuditHistoryListService, webServiceProxyMethod: Tp.Web.Extensions.ExtJs.AuditHistoryListService.GetData })";var e={id:"super_grid",canEdit:!1,canDelete:!1,isOwner:!1,gridHeader:{Title:"History",Columns:d.getColumns()},gridDataRequest:d.getDataRequest(),pluginTypes:"Tp.controls.grid.plugins.HidePagingConstraint",innerGridConfig:[]};Ext.onReady(function(){var a=$('<div class="ext-holder"/>').appendTo("body"),c=Tp.controls.grid.Factory.getInstance();e=c.getConfigurationFactory(e).createConfig(),e.applyTo=a[0];var f=new Ext.grid.GridPanel(e);a.appendTo(b),d.fire("extJsHistoryPanel",{panel:f}),$(".ui-empty-data-msg",b).hide()})}})}),define("tau/models/model.breadcrumbs",["Underscore","tau/core/model-base","tau/core/event","tau/configurator"],function(_,a,b,c){var d=a.extend({"bus afterInit":function(a){c.getRouting().on("stateChanged",function(a){c.getHistory().updateCurrent({url:c.getRouting().getUrl().source})},this)},"bus currentFound":function(a){this._dataHandler(a.data)},"bus currentUpdated":function(a){c.getHistory().updateCurrent(a.data)},_dataHandler:function(a){var b=this;if(a){c.getHistory().setCurrent(a);var d=c.getHistory().stack,e=_.detect(d,function(b){return b.id===a.id});if(e){var f=_.indexOf(d,e);c.getHistory().stack=d.slice(0,f)}}this.bus.fire("stackFound",{})},"bus beforeInit+stackFound":function(){var a=_.clone(c.getHistory().stack);a=a.slice(-3),this.fire("dataBind",{items:a});var b=this},"bus destroy":function(){c.getRouting().removeAllListeners(this)}});return d}),define("tau/models/model.breadcrumbs.entity",["Underscore","tau/core/model-base","tau/configurator","tau/core/termProcessor"],function(_,a,b,c){var d=function(a,b){this.model=a,this.appContext=b;var d=b.processes[0].terms;this.termProcessor=new c(d)};d.prototype={convertToItem:function(a){var c=_.bind(function(a){var b=a,c=this.termProcessor.getTerms(b.__type).name,d=c+" #"+b.id+" "+b.name;return d},this),d=b.getRouting().getUrl().source;return{id:a.id,url:d.length&&d.match(/\//)?d:"#"+a.__type.toLowerCase()+"/"+a.id,title:c(a)}},onGetEntity:function(a){this.entity=a.data},done:function(){this.model.fire("currentFound",this.convertToItem(this.entity))}};var e=a.extend({onInit:function(){var a=this,b=a.config.context,c=b.entity.entityType.name,e=b.entity.id,f=b.applicationContext.processes[0],g=new d(a,b.applicationContext),h=function(b){b.data.changes.hasOwnProperty("name")&&a.store.get(c,{id:e,fields:["id","name"]},{success:function(b){a.bus.fire("currentUpdated",g.convertToItem(b.data))}}).done()};a.store.on({eventName:"afterSave",type:c,listener:this},h),a.store.get(c,{id:e,fields:["id","name"]},{scope:g,success:g.onGetEntity}).done({scope:g,success:g.done})}});return e}),define("tau/components/extensions/breadcrumbs/extension.breadcrumbs.items",["tau/components/extensions/component.extension.base","tau/core/event","tau/store/types","tau/configurator"],function(a,b,c,d){return a.extend({init:function(a){this._super(a);var b=this;this.historyListener||(this.historyListener=function(){b.bus.fire("refresh")},d.getHistory().on("changed",this.historyListener,this))},destroy:function(a){this.historyListener&&d.getHistory().removeListener("changed",this.historyListener,this),this._super()}})}),define("tau/ui/templates/breadcrumbs/ui.template.breadcrumbs.item",["tau/core/templates-factory"],function(a){var b={name:"breadcrumbs-item",markup:['   <li class="ui-breadcrumbs__item"><a href="${url}">${title}</a></li>'],dependencies:[]};return a.register(b)}),define("tau/ui/templates/breadcrumbs/ui.template.breadcrumbs",["tau/core/templates-factory","tau/ui/templates/breadcrumbs/ui.template.breadcrumbs.item"],function(a){var b={name:"breadcrumbs",markup:["{{if items.length}}",'   <ul class="ui-breadcrumbs">','       {{tmpl(items) "breadcrumbs-item"}}',"   </ul>","{{/if}}"],dependencies:["breadcrumbs-item"]};return a.register(b)}),define("tau/views/view.collapsible",["tau/views/view.container"],function(a){var b=a.extend({"bus beforeInit":function(a){var b=a.data.config,c=b.collapsed,d=this.bus.name||"unknown";b.children=[{id:"header",type:"collapsibleHeader",name:d+" header",collapsed:c,children:b.header||[]},{id:"inners",type:"container",name:d+" inner",visible:!c,children:b.items||[]}]},"bus childrenRendered":function(a){var b=a.data.children,c=b[0],d=b[1];c.on("expanded",function(a){d.fire("show")}),c.on("collapsed",function(a){d.fire("hide")})}});return b}),define("tau/ui/extensions/collapsible/ui.extension.collapsible",["tau/components/extensions/component.extension.base"],function(a){return a.extend({"bus afterRender":function(a){this.element=a.data.element,a.data.data.collapsed&&this._collapse()},"bus expand":function(){this._expand()},"bus collapse":function(){this._collapse()},_collapse:function(){this.element.addClass("closed")},_expand:function(){this.element.removeClass("closed")}})}),define("tau/components/component.collapsible",["Underscore","tau/configurator","tau/core/component-base","tau/views/view.collapsible","tau/components/extensions/component.creator.extension","tau/ui/extensions/collapsible/ui.extension.collapsible","tau/ui/extensions/layout/ui.extension.layout","tau/ui/templates/container/ui.template.container.list"],function(_,a,b,c,d,e,f,g){return{create:function(h){h=h||{},_.defaults(h,{store:a.getStore(),template:g,cssClass:"ui-collapsible",layout:"list",collapsed:!0});var i=new b(h);return _.isArray(h.extensions)&&_.each(h.extensions,function(a){i.attach(a)}),i.attach(d).attach(e).attach(f).attach(c).bus}}}),define("tau/ui/extensions/collapsibleHeader/ui.extension.collapsibleHeader",["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/extensions/extension.javascript"],function(_,$,a){return a.extend({"bus afterRender":function(a){var b=this;b.element=a.data.element;var c=a.data.data,d=c.collapsed;b.collapsed=d;var e=d?"collapsed":"expanded";b.element.addClass(e),b.element.bind("click",$.proxy(b._onClickHandler,b))},_onClickHandler:function(){var a=this;a.collapsed=!a.collapsed;var b=a.collapsed,c=b?"expanded":"collapsed",d=b?"collapsed":"expanded",e=a.element;e.removeClass(c),e.addClass(d),this.fire(d)}})}),define("tau/ui/templates/collapsibleHeader/ui.template.collapsibleHeader",["tau/core/templates-factory"],function(a){var b={name:"collapsibleHeader",markup:['<div class="ui-collapsible-header">','    <div class="ui-children-container"></div>',"</div>"]};return a.register(b)}),define("tau/components/component.collapsibleHeader",["Underscore","tau/core/component-base","tau/views/view.container","tau/components/extensions/component.creator.extension","tau/ui/extensions/layout/ui.extension.layout","tau/ui/extensions/collapsibleHeader/ui.extension.collapsibleHeader","tau/ui/templates/collapsibleHeader/ui.template.collapsibleHeader"],function(_,a,b,c,d,e,f){return{create:function(g){return g=g||{},_.defaults(g,{template:f,cssClass:"ui-collapsible-header",childrenContainerSelector:".ui-children-container"}),(new a(g)).attach(c).attach(d).attach(e).attach(b).bus}}}),define("tau/ui/behaviour/common/ui.behaviour.richeditor",["Underscore","jQuery","tau/configurator"],function(_,$,a){function b(a){var b=a.editor,c=b.dataProcessor,d=c&&c.htmlFilter;dataFilter=c&&c.dataFilter;var e=["head","base","basefont","meta","link","title","style","script","input","isindex","textarea","button","option","select","frameset","frame","iframe","object","embed","applet","bgsound","marque","blink"],f={elements:{$:function(a){return _.indexOf(e,a.name)>0?!1:(a.attributes["class"]&&delete a.attributes["class"],a.attributes.id&&delete a.attributes.id,a.attributes.role&&delete a.attributes.role,a)},a:function(a){return _.trim(a.attributes.href).match(/^javascript:/gi)&&(delete a.attributes.href,delete a.attributes["data-cke-saved-href"]),a},style:function(a){return!1},script:function(a){return!1}},attributeNames:[[/^on/,"no"]]};d.addRules(f),dataFilter.addRules(f)}$.widget("ui.richeditor",{staticExecutionGroups:{},$target:null,$editor:null,$input:null,ckeInstance:null,ckeConfig:{enterMode:3,language:"en",toolbar:[],toolbarStartupExpanded:!1,disableNativeSpellChecker:!1,scayt_autoStartup:!1,removePlugins:"elementspath",resize_enabled:!1,height:150,width:"auto",skin:"v3",resize_dir:"vertical",startupFocus:!0,autoGrow_maxHeight:8e3,extraPlugins:"autogrow",contentsCss:require.toUrl("../css.ext/tau.clientinput.ckeditor.css"),on:{instanceReady:b}},options:{validation:{},executionGroupName:null,hideTarget:!0,scrollToButtonBar:!1,placeholder:{className:null,text:null},settings:{},saveAction:{checkChanges:!0,disableIfEmpty:!1,available:!0,text:"Save"},cancelAction:{available:!0,text:"Cancel"},onSave:function(a){},onCancel:function(){}},_create:function(){this.init()},getTemplate:function(){var a=['<div class="ui-richeditor">','   <textarea class="ui-richeditor__area" style="height:'+this.options.settings.height+'px;"></textarea>','   <div class="ui-richeditor__controls button-group">'],b=this.options.saveAction;b.available&&(a=a.concat(['<button class="ui-richeditor__controls__save button" type="button">',b.text,"</button>"]));var c=this.options.cancelAction;return c.available&&(a=a.concat(['<button class="ui-richeditor__controls__cancel button" type="button">',c.text,"</button>"])),a=a.concat(["   </div>","</div>"]),a.join("")},setText:function(a){this.$target.html(a)},setValidationErrors:function(a){this.element.addClass("ui-validationerror"),_.isString(a)&&this.element.attr("title",a)},resetValidationErrors:function(a){this.element.removeClass("ui-validationerror"),this.element.removeAttr("title")},setValue:function(a){this.setText(a)},init:function(){this.$target=$(this.element),this.$target.addClass("editable");var a={};$.extend(!0,a,this.ckeConfig,this.options.settings),a.autoGrow_minHeight=Math.max(this.$target.height(),a.height),this.options.settings=a,this.bindEventsTarget(this.$target),this._applyPlaceholder(this.$target,this.options.placeholder)},_applyPlaceholder:function(a,b){b.className&&$.trim(a.html())===""&&(a.addClass(b.className),a.text(b.text))},_removePlaceholder:function(a,b){b.className&&a.hasClass(b.className)&&(a.removeClass(b.className),a.text(""))},bindEventsTarget:function(a){var b=function(a,b){return function(a,b){var c=null,d=null;a.bind("mousedown",function(a){a.which!=3&&(c=a.pageX,d=a.pageY)}),a.bind("mouseup",function(a){if(a.which!=3){var e=5;c>a.pageX-e&&c<a.pageX+e&&d>a.pageY-e&&d<a.pageY+e&&b.call(this,a),c=null,d=null}})}.call(this,a,b)},c=$.proxy(this.showEditor,this),d=function(a,b){a.bind("dblclick",b)},e=function(){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){var a=window.getSelection();a.removeAllRanges()}};d(a,function(a){e();if(a.target.tagName.toLowerCase()=="a")return;c()})},_dataChangeEventHandler:function(a){var b=this;if(!b._visible)return;var c=b.$editor.find(".ui-richeditor__controls__save");window.setTimeout(function(){var b=a.sender.getData(),d=b.length>0;c.attr("disabled",d?!1:"disabled"),d?c.removeClass("disable"):c.addClass("disable")},150)},__displayEditor:function(){var a=this;a.options.hideTarget&&a.$target.hide(),a.$editor.show();if(a.options.scrollToButtonBar){var b=a.element.parent().find(".ui-richeditor__controls"),c=$(".ui-popup-content.tau-container");c.size()==0&&(c=$(window)),c.scrollTop(b.offset().top)}},getSettings:function(){return this.options.settings},setSettings:function(a){this.options.settings=a},_applyEditor:function(){var a=this;a.$input.parents("body").length?this.ckeInstance?(a.__displayEditor(),this.ckeInstance.setMode("wysiwyg"),this.ckeInstance.setData(this.$input.val())):(a._trigger("beforeapply",this.options.settings),this.initCKEditor(this.$input,this.options.settings,function(b,c){a.__displayEditor(),a.ckeInstance=c;var d=a.options.saveAction;if(d.available&&d.disableIfEmpty){var e=["contentDom","afterCommandExec","key","insertElement","taukeypress"],f=$.proxy(a._dataChangeEventHandler,a);for(var g=0,h=e.length;g<h;g++)c.on(e[g],f)}})):(a.$editor.show(),window.setTimeout(function(){a._applyEditor()},0))},showEditor:function(){if(!this._visible){this._visible=!0,this._removePlaceholder(this.$target,this.options.placeholder),this._initText||(this._initText=this.options.hasOwnProperty("text")?this.options.text:this.$target.html()),this.$editor?this.$editor.hide():(this.$editor=this.createEditor(),this.$editor.hide(),this.$editor.insertAfter(this.$target));var a=this.options.executionGroupName;return a&&(this.staticExecutionGroups[a]&&this.staticExecutionGroups[a]._innerCancel(),this.staticExecutionGroups[a]=this),this.$input.val(this._initText),this._applyEditor(),this.$editor}},hideEditor:function(){var a=this.$target,b=this.$input,c=this.$editor;b.blur(),c.hide(),this.options.hideTarget&&a.show();var d=this;d._applyPlaceholder(d.$target,d.options.placeholder),this._visible=!1},initCKEditor:function(b,c,d){var e=a.getCkPath(),f=this;require(["Underscore","order!"+e+"ckeditor.js",,"order!"+e+"ckfinder/ckfinder.js",,"order!"+e+"../Javascript/EditView/ckeditor.plugins.js"],function(_){CKEDITOR.tools.indexOf=_.indexOf,CKEDITOR.editor.prototype.resize=function(a,b,c,d){var e=this.container,f=CKEDITOR.document.getById("cke_contents_"+this.name),g=d?e.getChild(1):e;g.setSize("width",a,!0),!CKEDITOR.env.webkit;var h=c?0:(g.$.offsetHeight||0)-(f.$.clientHeight||0);f.setStyle("height",Math.max(b-h,0)+"px"),this.fire("resize")},CKEDITOR.replace(b.attr("id"),c);var a=CKEDITOR.instances[b.attr("id")];CKFinder.SetupCKEditor(a,e+"ckfinder/");var g=function(){f.$editor.find(".ui-richeditor__controls__save").attr("disabled","disabled").addClass("disable")},h=function(){f.$editor.find(".ui-richeditor__controls__save").removeAttr("disabled").removeClass("disable")};a.on("charcount_limit_reached",g),a.on("charcount_limit_restored",h),d(b,a)})},createEditor:function(){var a=$(this.getTemplate()),b=this.$input=a.find("textarea");return b.attr("id",_.uniqueId("ui-richeditor__area")),this.bindEventsEditor(a),a},bindEventsEditor:function(a){var b=this.options,c=a.find(".ui-richeditor__controls__save"),d=a.find(".ui-richeditor__controls__cancel");b.saveAction.available&&c.click($.proxy(this._save,this)),b.cancelAction.available&&d.click($.proxy(this._cancel,this))},_isChangedText:function(a){return a!=this._initText},_allowSave:function(a){var b=!0,c=this.options.saveAction.checkChanges;return c&&!this._isChangedText(a)&&(b=!1),b},_save:function(a){a.preventDefault();var b=this.$input;this.ckeInstance&&this.ckeInstance.updateElement();var c=b.val();this._allowSave(c)?(this._initText=c,this.setText(c),this.options.onSave(c)):this._innerCancel(),this.hideEditor()},_cancel:function(a){a.preventDefault(),this._innerCancel()},_innerCancel:function(){this.hideEditor(),this.options.onCancel()},destroy:function(){var a=this.options.executionGroupName;a&&this.staticExecutionGroups[a]===this&&(this.staticExecutionGroups[a]=null),this.ckeInstance&&(this.ckeInstance.focusManager.forceBlur(),this.ckeInstance.destroy()),this.$editor&&this.$editor.remove()}})}),define("tau/ui/extensions/comments/ui.extension.comment.editable",["Underscore","jQuery","tau/configurator","tau/components/extensions/component.extension.base","tau/ui/behaviour/common/ui.behaviour.richeditor"],function(_,$,a,b){var c=b.extend({category:"edit",destroy:function(){this.destroyDynamicComponents(),this._super()},lifeCycleCleanUp:function(){this.destroyDynamicComponents(),this._super()},destroyDynamicComponents:function(){var a=this;a.componentList&&(a.componentList.destroy(),delete a.componentList)},"bus applyTo+permissionsReady":function(a){var b=a.applyTo.data,c=a.permissionsReady.data;this.applyPermissions(b.config,b.data,b.element,c)},applyPermissions:function(a,b,c,d){var e=this,f=this.config=_.extend({},a,{comment:b}),g=this.element=c,h=$('<li class="ui-comment-menu button-group"></li>'),i=g.children(".ui-comment-body");if(d.editable){i.addClass("editable");var j=$.proxy(e.onReply,e);h.append($('<a class="reply button small"><span class="icon"></span>reply</a>').click(j));var k=$.proxy(e.onEdit,e);h.append($('<a class="edit button small"><span class="icon"></span>edit</a>').click(k)),$(['<div class="ui-comment-reply">','   <div class="ui-editor-placeholder" style="display: none;"></div>',"</div>"].join("")).insertAfter(i.find(".ui-comment-text"))}if(d.deletable){var l=$.proxy(e.onDelete,e);h.append($('<a class="delete button danger small"><span class="icon"></span>delete</a>').click(l)),i.addClass("deletable")}i.find(".ui-comment-heading").append(h);var m=g.children(".ui-comments"),n={components:[{type:"commentList"}],context:f.context};this.componentList||this.createComponents(n,function(a){var c=a[0],d={element:m,data:{comments:b.comments||[]},config:_.extend({},c.config,{commentId:e.config.comment.id})};e.componentList=c.component,c.component.fire("applyTo",d)})},showEditorForEdit:function(){var a=this,b=this.element.find("> .ui-comment-body > .ui-comment-text"),c=this.element.tmplItem().data;this.showEditor({element:b,text:c.description,checkChanges:!1,saveHandler:function(b){a.fire("saveComment",{description:b})}})},showEditorForReply:function(){var a=this,b=this.element.find("> .ui-comment-body > .ui-comment-reply > .ui-editor-placeholder"),c=this.element.tmplItem().data;a.showEditor({element:b,text:"",hideTarget:!1,saveText:"Add Reply",saveHandler:function(b){a.fire("replyToComment",{description:b,parentId:c.id})}})},showEditor:function(a){var b=this,c=function(){b.fire("editorSave"),a.saveHandler.apply(this,arguments)},d=a.element,e=d.richeditor({text:a.text,hideTarget:a.hideTarget!==!1,executionGroupName:"comments",onSave:c,validation:{trim:!0},settings:{toolbar:[["Bold","Italic","Strike"],["NumberedList","BulletedList"],["Link","Unlink"],["Image"],["Source"]],startupFocus:!0,extraPlugins:""},saveAction:{text:a.saveText||"Save",disableIfEmpty:!0,checkChanges:a.checkChanges},cancelAction:{available:!0}}),f=e.richeditor("showEditor");this.fire("editorCreated",{editorElement:f})},onReply:function(a){var b=this;a.stopPropagation(),a.preventDefault(),b.showEditorForReply()},onEdit:function(a){var b=this;a.stopPropagation(),a.preventDefault(),b.showEditorForEdit()},onDelete:function(a){var b=this,c=b.element.find("> .ui-comment-body");c.confirmation({message:"Delete comment?",ok:$.proxy(b.onConfirmDelete,b),cancel:$.proxy(b.onCancelDelete,b)}),c.confirmation("show")},onCancelDelete:function(a){a.stopPropagation(),a.preventDefault(),this.element.find("> .ui-comment-body").confirmation("hide")},onConfirmDelete:function(a){a.stopPropagation(),a.preventDefault(),this.fire("deleteComment")}});return c}),define("tau/utils/utils.htmlConverter",["tau/configurator"],function(a){return{fromSourceToHtml:function(b){var c=a.getApplicationPath()+"/",d=b||"",e=/(?:<img(?=\s)(?:[^>"']|"[^"]*"|'[^']*')*?\s)src\s*=\s*("~\/([^"]*)"|'~\/([^']*)')(?:[^>]*>)/gi;return d=d.replace(e,function(a,b,d,e){var f=d||e,g=b[0];return a.replace(b,function(){return g+c+f+g})}),d.replace(/\xa0|(\ )/g," ")},fromHtmlToSource:function(b){var c=a.getApplicationPath(),d=b||"",e='(?:<img(?=\\s)(?:[^>"\']|"[^"]*"|\'[^\']*\')*?\\s)src\\s*=\\s*("'+c+'/([^"]*)"|\''+c+"/([^']*)')(?:[^>]*>)",f=new RegExp(e,"gi");return d=d.replace(f,function(a,b,c,d){var e=c||d,f=b[0];return a.replace(b,function(){return f+"~/"+e+f})}),d}}}),define("tau/models/dataprocessor/model.processor.comment",["tau/configurator","tau/utils/utils.htmlConverter","tau/utils/utils.date"],function(a,b,c){function d(a){this.context=a}return d.prototype={destroy:function(){this.context=null},convertDTO:function(d){var e=this,f={id:d.id,parentId:d.parentId,avatar:[a.getApplicationPath(),"/Avatar.ashx?UserId=",d.owner.id,"&size=32"].join(""),name:e.getName(d.owner),description:b.fromSourceToHtml(d.description),age:this.getAge(d.createDate),createDate:c.format.datetime.short(c.convertToTimezone(d.createDate)),comments:[],deleted:"DELETED"===d.description,isRequester:d.owner.kind&&d.owner.kind.toString().toLowerCase()==="requester"};return this.context.getLoggedUser().id==d.owner.id&&(f.isOwnerComment=!0),f},getName:function(a){var b=a.firstName||"",c=a.lastName||"",d="";if(b.length>0||c.length>0)d=[b," ",c.trim().substring(0,1),"."].join("");return d},getAge:function(a){if(!a)return"Draft";var b=c.getAge(c.parse(a));return b.isZero?"Just added":b.toString()}},d}),define("tau/models/model.comment.editable",["Underscore","tau/core/model.editable.base","tau/configurator","tau/models/dataprocessor/model.processor.comment"],function(_,a,b,c){var d=a.extend({name:"Editable Comments","bus applyTo":function(a){var b=this.bindedData=a.data.data;this.authorizate(b)},authorizate:function(a){var b=this.bindedData.deleted,c={editable:!b,deletable:!0};this.fire("permissionsReady",c)},_convertDTO:function(a){var b=this.config,d=b.parentCommentId,e=new c(b.context),f=e.convertDTO(_.extend({},a));return f.parentId=d,f},"bus afterInit":function(a){var b=this;this.config=a.data.config;var c={id:null,description:"",owner:b.config.context.getLoggedUser()},d=b._convertDTO(c);b.bindedData=d,b.fire("dataBind",d)},_fireUpdate:function(a,b){var c=this;b.general={id:c.config.context.entity.id},c.fire("save",{id:a,typeName:"comment",$set:b,$include:["id","description","createDate","parentId",{owner:["id","firstName","lastName","kind"]}]})},"bus saveComment":function(a){var b=this,c=a.data,d=this.bindedData.id;b._fireUpdate(d,c)},"bus replyToComment":function(a){var b=this,c=a.data;b._fireUpdate(null,c)},"bus deleteComment":function(){var a=this.bindedData,b=a.id;a.comments&&a.comments.length>0?this._fireUpdate(b,{description:"DELETED"}):this.fire("remove",{id:b,typeName:"comment"})}});return d}),define("tau/ui/extensions/comments/ui.extension.comment.practices.notification",["Underscore","jQuery","tau/configurator","tau/components/extensions/component.extension.base"],function(_,$,a,b){var c=b.extend({category:"edit",beforeSaveComment:function(a){var b=this.placeHolder.find('input[type="checkbox"]'),c={};b.each(function(a,b){var d=$(b);d.attr("checked")&&(c[d.val()]=!0)}),a.cmd["comment-practices-notification-opts"]=c},"bus editorSave":function(){if(!this.globalSettings.IsEmailNotificationsEnabled)return;var a=this;a.config.store.on({eventName:"beforeSave",type:"comment",listener:a},function(b){var c=b.data;a.beforeSaveComment(c)})},"bus editorCreated":function(a){this.globalSettings=this.config.context.applicationContext.globalSettings||{};if(!this.globalSettings.IsEmailNotificationsEnabled)return;var b=a.data.editorElement;this.placeHolder=b.find(".tau-notification-practices-settings");if(!this.placeHolder.length){var c=this.placeHolder=$('<div class="tau-notification-practices-settings"><span class="prompt">Notify by email: </span></div>');c.append("<input type='checkbox' id='owner' value='Owner' /><label for='owner'>Owner</label>"),c.append("<input type='checkbox' id='people' value='Assigned' /><label for='people'>Assigned people</label>"),this.config.context.general.entityType.name.toLowerCase()==="request"?c.append("<input type='checkbox' id='requestor' value='Requesters' /><label for='requestor'>Requester(s)</label>"):c.append("<input type='checkbox' id='team' value='Team' /><label for='team'>Project Team</label>"),c.insertBefore(b.find(".ui-richeditor__controls"))}},"bus destroy":function(){this.config.store.unbind(this),this._super.apply(this,arguments)}});return c}),define("tau/ui/templates/comments/ui.template.comments.comment",["tau/core/templates-factory"],function(a){var b={name:"comments-comment",markup:['<div class="ui-comment comment-id-${id}">','   <div class="ui-comment-body{{if isOwnerComment }} ui-commets-comment-owner{{/if}}{{if isRequester }} tau-comments-requester{{/if}}" >',"      {{if deleted}}","      DELETED","      {{else}}",'      <div class="ui-comment-heading">','         <li class="ui-comment-avatar" style=\'background-image:url("${avatar}")\'></li>','         <li class="ui-comment-name">${name}</li>','         <li class="ui-comment-ago"><span title="${createDate}">(${age})</span></li>',"      </div>",'      <div class="ui-comment-text">{{html description}}</div>',"      {{/if}}","   </div>",'   <div class="ui-comments">',"       {{if comments }}",'           {{tmpl(comments) "comments-comment"}}',"       {{/if}}","   </div>","</div>"].join("")};return a.register(b)}),define("tau/ui/extensions/comments/ui.extension.comments.new.editor",["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/behaviour/common/ui.behaviour.richeditor"],function(_,$,a){var b=a.extend({category:"edit",destroy:function(){this.$ckEditor.richeditor("destroy"),this._super()},"bus afterRender":function(a){this.element=a.data.element,this.initializeEditor()},onSave:function(a){var b=this;b.fire("editorSave"),b.fire("saveComment",{description:a}),b.closeEditor()},onCancel:function(a){this.closeEditor()},closeEditor:function(){this.fire("destroy")},initializeEditor:function(){var a=this;this.$editorPlaceHolder=this.element.find(".ui-comment-text"),this.$ckEditor=this.$editorPlaceHolder.richeditor({executionGroupName:"comments",onSave:$.proxy(a.onSave,a),onCancel:$.proxy(a.onCancel,a),validation:{trim:!0},scrollToButtonBar:!0,settings:{toolbar:[["Bold","Italic","Strike"],["NumberedList","BulletedList"],["Link","Unlink"],["Image"],["Source"]],startupFocus:!0,extraPlugins:""},saveAction:{text:"Add comment",disableIfEmpty:!0},cancelAction:{available:!0}});var b=this.$ckEditor.richeditor("showEditor");this.fire("editorCreated",{editorElement:b})}});return b}),define("tau/ui/templates/comments/ui.template.comments.comment.new.editor",["tau/core/templates-factory"],function(a){var b={name:"comments-comment-new-editor",markup:['<div class="ui-comment-new">','    <div class="ui-comment-heading">',"        <div class=\"ui-comment-avatar\" style='background:url(${avatar}) top left no-repeat;width:32px; height:32px;'></div>","    </div>",'    <div class="ui-comment-editor-placeholder">','        <div class="ui-comment-text"></div>',"    </div>","</div>"].join("")};return a.register(b)}),define("tau/ui/extensions/comments/ui.extension.commentList.editable",["tau/configurator","tau/components/extensions/component.extension.base","tau/ui/templates/comments/ui.template.comments.comment"],function(a,b,c){var d=b.extend({destroy:function(){this.destroyDynamicComponents(),this._super()},lifeCycleCleanUp:function(){this.destroyDynamicComponents(),this._super()},destroyDynamicComponents:function(){var a=this;if(a.dynamicComponents&&a.dynamicComponents.length){var b=null;while(b=a.dynamicComponents.pop())b.destroy()}},"bus applyTo":function(a){var b=this;b.dynamicComponents=[];var c=a.data,d=c.data.comments;this.element=c.element;var e=c.element.children(".ui-comment");this.config=c.config;var f=c.config.context,g={components:[],context:f};e.each(function(a){g.components.push({type:"comment"})}),b.createComponents(g,function(a){for(var c=0,f=a.length;c<f;c++){var g=a[c],h={element:e.eq(c),data:d[c],config:g.config};g.component.fire("applyTo",h),b.dynamicComponents.push(g.component)}})}});return d}),define("tau/models/model.comments",["Underscore","tau/core/model-base","tau/models/dataprocessor/model.processor.comment","tau/utils/utils.date","tau/store/types.targetprocess"],function(_,a,b,c){function d(a,b){this.model=a,this.converter=b}d.prototype={getAssignableRetrievedCallback:function(){return{scope:this,success:this.onAssignableRetrieved}},onAssignableRetrieved:function(a){this.assignable=this.model.assignable=a.data;var b=a.data.comments,d=_(b).sortBy(function(a){return+c.parse(a.createDate)}),e=this.convertDTO(d).convertToTree(null);this.model.bus.fire("dataBind",{items:e})},convertDTO:function(a){var b=this;return this.convertedComments=_(a).map(function(a){return b.converter.convertDTO(a)}),this},convertToTree:function(a){var b=[],c=this.convertedComments;for(var d=0,e=c.length;d<e;d++){var f=c[d];f.parentId==a&&(b.push(f),f.comments=this.convertToTree(f.id))}return b}};var e=a.extend({name:"Comments",onInit:function(){var a=this.config.context.entity;this.converter=new b(this.config.context);var c=new d(this,this.converter);this.store.get(a.entityType.name,{id:a.id,fields:["id",{comments:["id","description","createDate","parentId",{owner:["id","firstName","lastName","kind"]}],list:!0}]},c.getAssignableRetrievedCallback()).done()},"bus createDTO":function(a){var b=a.data,c=this.converter.convertDTO(b);c.comments=[],this.fire("DTOCreated",c)},destroy:function(){this.converter.destroy(),this.converter=null,this._super()}});return e}),define("tau/models/model.comments.editable",["Underscore","tau/core/model.editable.base"],function(_,a){var b=a.extend({name:"Editable Comments",_signUpEventsIfRequired:function(){var a=this;if(a._signedUp)return;a._signedUp=!0;var b=function(b){b.data.cmd.guid=+(new Date),a.fire("prepareUpdate",b.data)},c=function(b){a.fire("applyUpdate",b.data)},d=function(b){b.data.cmd.guid=+(new Date),a.fire("prepareRemove",b.data)},e=function(b){var c=b.data.obj.parentId,d=a.getComment(c);d&&d.deleted&&d.comments.length===1?a.store.remove("comment",{id:c}).done():a.fire("applyRemove",b.data)};a.store.unbind(a),a.store.on({eventName:"beforeSave",type:"comment",listener:a},b).on({eventName:"afterSave",type:"comment",listener:a},c).on({eventName:"beforeRemove",type:"comment",listener:a},d).on({eventName:"afterRemove",type:"comment",listener:a},e)},"bus dataBind":function(a){var b=a.data.items;this.commentsList=this.getPlainList(b);var c=_(this.commentsList).pluck("id"),d={editable:!0,editableItems:c,deletable:!0,deletableItems:c},e=this;e._signUpEventsIfRequired(),e.fire("permissionsReady",d)},getComment:function(a){var b=a?_(this.commentsList).detect(function(b){return b.id===a}):null;return b},getPlainList:function(a){var b=[];for(var c=0,d=a.length;c<d;c++){var e=a[c];b.push(e);var f=arguments.callee.call(this,a[c].comments);b=b.concat(f)}return b}});return b}),define("tau/ui/extensions/ui.extension.shortcutProcessor",["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(_,$,a){return a.extend({"bus afterRender":function(a){var b=a.data,c=this.$element=b.element,d=this.config.shortcutProcessorTarget,e=[],f=c.find(d),g=/\b(?:id):(?:\W|&nbsp;){0,5}(\d+)\b/gi;f.each(function(a,b){var c=$(b),d=c.html(),f=!1;d=d.replace(g,function(){f=!0;var a=arguments[1];return e.push(a),"<span class='tau-shortcut-loading' entity_ref='"+a+"'>id:"+a+"</span>"}),f&&c.html(d)}),e=_(e).uniq();var h=e.length;if(h){var i=this,j=this.config.store;for(var k=0;k<h;k++){var l=e[k],m={id:l,fields:["id","name",{entityType:["id","name"]}],silent:!0};j=j.get("general",m,{success:i.replaceShortcut,scope:i})}j.done()}},replaceShortcut:function(a){var b=a.data,c=$('<a href="#'+b.entityType.name+"/"+b.id+'">#'+b.id+"&nbsp;"+b.name+"</a>");this.$element.find("[entity_ref='"+b.id+"']").each(function(a,b){var d=$(b);d.replaceWith(c.clone())})}})}),define("tau/ui/extensions/comments/ui.extension.comments.editable",["Underscore","jQuery","tau/configurator","tau/components/extensions/component.extension.base","tau/ui/templates/comments/ui.template.comments.comment"],function(_,$,a,b,c){var d=b.extend({category:"edit",destroy:function(){var a=this;a.destroyDynamicComponents(),a._super()},destroyDynamicComponents:function(){var a=this;a.commentListComponent&&(a.commentListComponent.destroy(),delete a.commentListComponent)},"bus dataBind+afterRender":function(a){var b=this;b.destroyDynamicComponents();var c={comments:a.dataBind.data.items},d=this.element=a.afterRender.data.element,e=".ui-all-comments",f=d.find(e),g={components:{type:"commentList"},context:this.config.context};b.createComponents(g,function(a){b.commentListComponent=a[0].component;var d={element:f,data:c,config:g};b.commentListComponent.fire("applyTo",d)})},getGUIDSelector:function(a){return"guid-comment-"+a},getCommentIdClass:function(a){return"comment-id-"+a},"bus prepareUpdate":function(a){var b=a.data.cmd,c=null,d=b.config.$set.parentId,e=".ui-all-comments"+(d?" ."+this.getCommentIdClass(d)+" .ui-comments":""),f=this.getGUIDSelector(b.guid);if(!b.config.id)c=$("<div class='ui-comment "+f+"'><div class='ui-comment-body'>Adding new comment. Please wait...</div></div>").appendTo(this.element.find(e));else{var g=this.getCommentIdClass(b.config.id);c=this.element.find(".ui-all-comments ."+g)}this.fire("markElementToBeUpdated",{element:c})},"bus applyUpdate":function(a){var b=this,c=a.data.cmd,d=c.guid,e=this.getCommentIdClass(a.data.id);if(!c.config.id){var f=this.getGUIDSelector(d),g=this.element.find(".ui-all-comments").find("."+f);g.addClass(e).removeClass(f)}this.on("afterRender",function(a){a.removeListener();var c=a.data.element,d=c.find("."+e+" > .ui-comment-body");b.fire("updateElement",{element:d})}),this.fire("refresh")},"bus prepareRemove":function(a){var b=a.data.cmd,c=this.getCommentIdClass(b.config.id),d=this.element.find(".ui-all-comments ."+c);this.fire("markElementToBeDeleted",{element:d})},"bus applyRemove":function(a){var b=this,c=a.data.cmd,d=this.getCommentIdClass(c.config.id),e=this.element.find(".ui-all-comments ."+d);this.fire("deleteElement",{element:e,callback:function(){b.fire("refresh")}})}});return d}),define("tau/ui/extensions/comments/ui.extension.comments.add",["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/behaviour/common/ui.behaviour.richeditor"],function(_,$,a){var b=a.extend({category:"edit",destroy:function(){var a=this;a.destroyDynamicComponents(),a._super()},lifeCycleCleanUp:function(){var a=this;a.destroyDynamicComponents(),a._super()},destroyDynamicComponents:function(){var a=this;a.commentNewEditorComponent&&(a.commentNewEditorComponent.destroy(),delete a.commentNewEditorComponent)},"bus initialize":function(a){this.config=a.data},"bus afterRender+permissionsReady+dataBind":function(a){this.element=a.afterRender.data.element;var b=a.permissionsReady.data;this.data=a.dataBind.data,this.initializeAddCommentLink()},initializeAddCommentLink:function(){this.$addLink=$("<span class='ui-comments-add-link'>Add Comment</span>").click($.proxy(this.addNewComment,this)).insertAfter(this.element.find(".ui-all-comments"))},onCloseEditor:function(a){this.$addLink.show()},addNewComment:function(){var a=this;a.$addLink.hide();var b={components:[{type:"comment.new.editor"}],context:a.config.context};a.createComponents(b,function(b){var c=a.commentNewEditorComponent=b[0].component;c.on("afterRender",function(b){var c=b.data.element;c.insertAfter(a.$addLink)}),c.on("destroy",$.proxy(a.onCloseEditor,a)),c.initialize()})}});return b}),define("tau/ui/templates/comments/ui.template.comments",["tau/core/templates-factory","tau/ui/templates/comments/ui.template.comments.comment"],function(a){var b={name:"comments",options:{contentSelector:".ui-comments-content"},markup:['<div class="box ui-comments-control">','   <div class="ui-all-comments ui-comments-content">','       {{tmpl(items) "comments-comment"}}',"   </div>","</div>"].join(""),dependencies:["comments-comment"]};return a.register(b)}),define("tau/ui/extensions/ui.extension.domOperationsBase",["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(_,$,a){return a.extend({name:"ui.extension.domOperationsBase","bus markElementToBeDeleted":function(a){var b=a.data,c=b.element;c.addClass("deleting")},"bus deleteElement":function(a){var b=a.data.element,c=a.data.callback;b.fadeOut(750,c)},"bus markElementToBeUpdated":function(a){var b=a.data,c=b.element;c.addClass("updating")},"bus cancelUpdateElement":function(a){var b=a.data.element;this._highlightElement(b,"#EE5757",1500)},"bus updateElement":function(a){var b=this,c=a.data.element;c.each(function(){var a=$(this);b._highlightElement(a,"#FFFFD3",1500)})},_highlightElement:function(a,b,c){a.stop(!0,!0),a.removeClass("updating"),a.addClass("before-animate");var d=this._getElementBgColor(a),e=a.css("backgroundColor"),f=function(){a.css("backgroundColor","")};a.removeClass("before-animate"),a.css({backgroundColor:b}).animate({backgroundColor:d},c,f)},_getElementBgColor:function(a){var b="transparent";while(a.length>0&&a.parent()&&((b=a.css("backgroundColor"))=="transparent"||b==undefined||b=="rgba(0, 0, 0, 0)"||b.length==0)){a=a.parent();if(a.is("body"))break}if(b=="transparent"||b.length==0)b="#ffffff";return b}})}),define("tau/components/component.creator",["Underscore","tau/core/component-base","tau/core/view-base","tau/configurator","tau/ui/extensions/ui.extension.domOperationsBase"],function(_,a,b,c,d){return{create:function(e,f){var g=f||{};e=e||{},_.defaults(g,{store:f.store||c.getStore()}),e.template&&(g.template=e.template),_.defaults(g,{name:e.name}),_.defaults(g,{name:g.name});var h=new a(g),i=e.ViewType||b;h.attach(i),e.ModelType&&h.attach(e.ModelType);var j=e.domOperations||d;h.attach(j);if(e.extensions&&e.extensions.constructor==Array)for(var k=0;k<e.extensions.length;k++){var l=e.extensions[k];l.hasOwnProperty("type")&&l.hasOwnProperty("config")?h.attach(l.type,l.config):h.attach(l)}return h.bus}}}),define("tau/components/component.additionalInfo",["Underscore","tau/components/component.creator","tau/views/view.container","tau/components/extensions/additionalInfo/extension.additionalInfo.editable","tau/components/extensions/additionalInfo/extension.additionalInfo.updateAnimation","tau/components/extensions/component.creator.extension","tau/ui/templates/container/ui.template.container.table","tau/ui/extensions/layout/ui.extension.layout","tau/ui/extensions/spinner/ui.extension.spinner"],function(_,a,b,c,d,e,f,g,h){return{create:function(i){i=i||{};var j=[];_.forEach(i.children,function(a){a.label&&a.field?(a.label.disabledExtensionCategories=i.disabledExtensionCategories,j.push(a.label),a.field.disabledExtensionCategories=i.disabledExtensionCategories,j.push(a.field)):(a.disabledExtensionCategories=i.disabledExtensionCategories,j.push(a))}),i.children=j,_.defaults(i,{template:f,cssClass:"additional-info-table",columnCount:2,cellsCssClass:["ui-additionalinfo__label","ui-additionalinfo__value"],layout:"table"});var k={extensions:[e,g,d,h,c],ViewType:b};return a.create(k,i)}}}),define("tau/components/component.assignedEffort",["tau/components/component.creator","tau/models/model.iteration.progressBar","tau/ui/templates/label/ui.template.assignmentEffort.label"],function(a,b,c){return{create:function(d){var e={extensions:[b],template:c};return a.create(e,d)}}}),define("tau/components/component.assignmentsList",["Underscore","tau/components/component.creator","tau/models/model.assignmentsList","tau/models/model.assignmentsList.editable","tau/models/userList/extension.model.unassignAction","tau/models/userList/extension.model.showMore","tau/components/extensions/assignmentsList/extension.assignmentsList.editable","tau/components/extensions/component.creator.extension","tau/ui/extensions/popupEditorContainer.extension","tau/models/assignment/model.assignment.editable","tau/models/assignment/model.add.assignment.editable","tau/ui/templates/assignmentsList/ui.template.assignmentsList"],function(_,a,b,c,d,e,f,g,h,i,j,k){return{create:function(l){var m={extensions:_.concat([b,g,c,f,{type:h,config:{popupEditorContainer:[{targetSelector:".user-list .user",alignmentSelector:".user-name",alignmentSelectorFrom:"target",component:{type:"userList",extensions:[i,d,e]}}]}},{type:h,config:{popupEditorContainer:[{targetSelector:".owner-cell .user-name",component:{type:"userList",extensions:[e]}}]}},{type:h,config:{popupEditorContainer:[{targetSelector:".add-btn:not(.disabled)",component:{type:"userList",extensions:[j,e]}}]}},l.extensions]),template:l.template||k};return a.create(m,l)}}}),define("tau/components/component.attachments",["tau/components/component.creator","tau/models/model.attachments","tau/models/model.attachments.editable","tau/components/extensions/attachments/component.attachments.uploader","tau/components/extensions/attachments/component.attachments.selectable","tau/components/extensions/attachments/component.attachments.showPreview","tau/components/extensions/attachments/component.attachments.thumbProxy","tau/components/extensions/attachments/component.attachments.deletable","tau/components/extensions/error/extension.errorBar","tau/ui/templates/attachments/ui.template.attachments"],function(a,b,c,d,e,f,g,h,i,j){return{create:function(k){var l=k||{},m={extensions:[b,c,d,e,f,g,h,i],template:j};return a.create(m,l)}}}),define("tau/components/component.attachmentsPreview",["tau/components/component.creator","tau/models/model.attachments","tau/ui/templates/attachmentsPreview/ui.template.attachmentsPreview","tau/ui/extensions/attachmentsPreview/ui.extension.attachmentsPreview","tau/ui/extensions/attachmentsPreview/ui.extension.attachmentsPreview.animations"],function(a,b,c,d,e){return{create:function(f){var g=function(a){return(a.mimeType||"").indexOf("image/")==0},h={ModelType:b,template:c,extensions:[d,e]};return f.filter=f.filter||g,a.create(h,f)}}}),define("tau/components/component.audit.history",["tau/components/component.creator","tau/models/model.label","tau/ui/templates/auditHistory/ui.template.auditHistory","tau/ui/extensions/auditHistory/ui.audit.history"],function(a,b,c,d){return{create:function(e){var f={name:"auditHistory",ModelType:b,template:c,extensions:[d]};return a.create(f,e)}}}),define("tau/components/component.breadcrumbs",["tau/components/component.creator","tau/models/model.breadcrumbs","tau/models/model.breadcrumbs.entity","tau/components/extensions/breadcrumbs/extension.breadcrumbs.items","tau/ui/templates/breadcrumbs/ui.template.breadcrumbs"],function(a,b,c,d,e){return{create:function(f){var g={extensions:[b,c,d],template:e};return a.create(g,f)}}}),define("tau/components/component.comment",["tau/components/component.creator","tau/components/extensions/component.creator.extension","tau/ui/extensions/comments/ui.extension.comment.editable","tau/models/model.comment.editable","tau/ui/extensions/comments/ui.extension.comment.practices.notification","tau/ui/templates/comments/ui.template.comments.comment"],function(a,b,c,d,e,f){return{create:function(g){var h={extensions:[d,c,e,b],template:f};return a.create(h,g)}}}),define("tau/components/component.comment.new.editor",["tau/components/component.creator","tau/components/extensions/component.creator.extension","tau/models/model.comment.editable","tau/ui/extensions/comments/ui.extension.comments.new.editor","tau/ui/extensions/comments/ui.extension.comment.practices.notification","tau/ui/templates/comments/ui.template.comments.comment.new.editor"],function(a,b,c,d,e,f){return{create:function(g){var h={extensions:[c,d,e,b],template:f};return a.create(h,g)}}}),define("tau/components/component.commentList",["tau/components/component.creator","tau/components/extensions/component.creator.extension","tau/ui/extensions/comments/ui.extension.commentList.editable"],function(a,b,c){return{create:function(){var d={extensions:[b,c]};return a.create(d,{name:"comment.commentList"})}}}),define("tau/components/component.container",["Underscore","tau/components/component.creator","tau/views/view.container","tau/components/extensions/component.creator.extension","tau/ui/extensions/layout/ui.extension.layout","tau/ui/extensions/spinner/ui.extension.spinner"],function(_,a,b,c,d,e){return{create:function(f){var g={extensions:_.concat([f.extensions,c,d,e]),ViewType:b};return a.create(g,f)}}}),define("tau/models/model.customField",["Underscore","tau/core/model-base","tau/configurator","tau/utils/utils.htmlConverter","tau/utils/utils.date"],function(_,a,b,c,d){var e=a.extend({_process:function(a){var b={RichText:function(a){return a.value=c.fromSourceToHtml(a.value),a},Date:function(a){return a.value=d.format.date.short(d.convertToTimezone(a.value)),a.output=a.value,a},DropDown:function(a){return a.options=a.options?_.toString(a.options).split("\r\n"):[],a.value=_.toString(a.value),a.output=_.toString(a.value),a},Entity:function(a){return a.value=a.value||{},a.value=_.defaults(a.value,{id:null,name:"",kind:null}),a.value.__type=a.value.kind,a.output=a.value.name+"",a},MultipleSelectionList:function(a){return a.options=a.options?_.toString(a.options).split("\r\n"):[],a.value?(a.value=_.toString(a.value).split(","),a.output=a.value.join(", ")):(a.value=null,a.output=""),a},Number:function(a){return a.value=a.value?parseInt(a.value)+"":"",a.output=a.value,a},URL:function(a){return a.value=a.value||{},_.defaults(a.value,{url:"",title:""}),a.options=null,a}};return a.type in b&&(a=b[a.type](a)),a.type!="url",a},createConfiguration:function(a,b,c,d){var e=_.find(c,function(b){return b.type.toLowerCase()==a.type.toLowerCase()&&b.name==a.name}),f=_.find(d,function(b){return b.type.toLowerCase()==a.type.toLowerCase()&&b.name==a.name}),g={};if(e&&f)g={name:f.name,type:f.type,required:e.required,listed:e.listed,value:f.value,options:e.value,output:f.value},g=this._process(g);else if(e&&!f)g={name:e.name,type:e.type,required:e.required,listed:e.listed,value:null,options:e.value,output:null},g=this._process(g);else throw new Error("No valid configuration for field "+a.name);return g},"bus configurationProvided":function(a){var b=a.data;_.isEmpty(b)==0&&this.fire("dataBind",b),this.configuration=b},"bus beforeInit":function(a){var b=a.data.config,c=b.context.entity,d=b.context.getCustomFields(),e=b.customField||b.data,f=this,g={name:e.name,type:e.type};this.store.get(c.entityType.name,{id:c.id,fields:["id","customFields"]}).done({success:function(a){var b=a[0].data.customFields,e=f.createConfiguration(g,c,d,b);f.fire("configurationProvided",e)}})}});return e}),define("tau/models/model.customField.editable",["Underscore","tau/core/model.editable.base"],function(_,a){var b=a.extend({category:"edit",name:"Editable custom field","bus dataBind":function(){this.bus.fire("permissionsReady",{editable:!0,deletable:!0})},"bus beforeSave":function(a){var b=a.data.cmd.$set.customFields[0].value;a.data.cmd.$set.customFields[0].value=b?b:null,a.data.cmd.$set.customFields[0].type=="URL"&&b.label==null&&b.url==null&&(a.data.cmd.$set.customFields[0].value=null)},"bus beforeInit+configurationProvided":function(a){var b=a.beforeInit.data.config.context.entity,c=a.configurationProvided.data;this.configuration=c,this.beforeSaveHandler||(this.beforeSaveHandler=_.bind(this._beforeSave,this),this.store.on({eventName:"beforeSave",type:b.entityType.name,listener:this,hasChanges:["customFields"],filter:{id:b.id}},this.beforeSaveHandler)),this.afterSaveHandler||(this.afterSaveHandler=_.bind(this._afterSave,this),this.store.on({eventName:"afterSave",type:b.entityType.name,listener:this,filter:{id:b.id}},this.afterSaveHandler))},_beforeSave:function(a){var b=a.data.changes.customFields[0];_.mergeFields(a.data.cmd.config.fields,["customFields"]);var c=this.configuration;b.name==c.name&&b.type==c.type&&this.bus.fire("preRefreshRow",{data:b})},_afterSave:function(a){this.bus.fire("refreshRow",{})},destroy:function(){this.beforeSaveHandler=null,this.afterSaveHandler=null,this._super()}});return b}),define("tau/core/tau-widget",["Underscore","jQuery","tau/core/event"],function(_,$,a){var b=function(b,c){var d=c._create||function(){};c._create=function(){var b=this;d.apply(b,arguments),b.bus=b.options.bus||b.element.data("bus"),a.subscribeOn(b)},_.extend(c,{_fire:function(){this.bus.fire.apply(this.bus,arguments)}}),$.widget(b,c)};return{widget:b}}),define("tau/ui/behaviour/checkbox/ui.behaviour.checkboxToggle",["jQuery","tau/core/tau-widget"],function($,a){a.widget("ui.checkboxToggle",{options:{onSave:function(){},classNames:{checked:"checked",unchecked:"unchecked"}},_create:function(){this.init()},init:function(){var a=this.element,b=this,c=this.options.classNames;this.toggleProxy=$.proxy(this.onClick,this),a.click(this.toggleProxy)},activate:function(){var a=this.options.classNames;this._toggle(this.element,a.checked,a.unchecked),this.options.onSave(this.element.hasClass(a.checked))},onClick:function(a){a.stopPropagation(),this.toggle()},toggle:function(){var a=this.element,b=this.options.classNames;this._toggle(a,b.checked,b.unchecked),this.options.onSave(a.hasClass(b.checked))},_toggle:function(a,b,c){var d=a;d.hasClass(b)?(d.removeClass(b),d.addClass(c)):d.hasClass(c)?(d.removeClass(c),d.addClass(b)):d.addClass(b)},destroy:function(){delete this.toggleProxy}})}),define("tau/components/extensions/customField/extension.customField.checkbox.editable",["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/behaviour/checkbox/ui.behaviour.checkboxToggle"],function(_,$,a){return a.extend({category:"edit","bus permissionsReady+afterRender":function(a){var b=this,c=a.afterRender.data.data,d=a.permissionsReady.data;if(d.editable){var e=a.afterRender.data.element,f=e.find(".ui-customfield__value");f.checkboxToggle({classNames:{checked:"ui-customfield__value_checked",unchecked:"ui-customfield__value_unchecked"},onSave:function(a){b.bus.fire("elementUpdated"),b.bus.fire("save",{customFields:[{name:c.name,type:c.type,value:a}]})}}),e.behaviourCustomFieldRow({onActivate:function(a){a.stopPropagation(),$(a.target).hasClass("ui-customfield__value")==0&&f.checkboxToggle("activate")}}),e.addClass("ui-customfield_editable_true")}}})}),define("tau/ui/templates/customField/ui.template.customField.checkbox",["tau/core/templates-factory"],function(a){var b={name:"customField-checkbox",markup:['<div class="ui-customfield ui-customfield-checkbox">',"   <table>","   <tbody>","   <tr>",'       <td class="ui-customfield__label">${name}</td>','       <td class="ui_custom_field_value_container"><div class="ui-customfield__value ui-customfield__value_{{if value}}checked{{else}}unchecked{{/if}}">&nbsp;</div></td>',"   </tr>","   </tbody>","   </table>","</div>"]};return a.register(b)}),define("tau/components/component.customField.checkbox",["tau/components/component.creator","tau/models/model.customField","tau/models/model.customField.editable","tau/components/extensions/customField/extension.customField.checkbox.editable","tau/ui/templates/customField/ui.template.customField.checkbox"],function(a,b,c,d,e){return{create:function(f){var g={ModelType:b,template:e,extensions:[c,d]};return a.create(g,f)}}}),define("libs/schema.js/lib/utils",["require","exports","module"],function(require,exports,module){var a=Array.prototype.slice,b=Object.hasOwnProperty;Object.keys||(Object.keys=function(a){if(a!==Object(a))throw new Error("Invalid object");var c=[];for(var d in a)b.call(a,d)&&(c[c.length]=d);return c}),exports.extend=function(b){var c=a.call(arguments,1),d;for(var e=0,f=c.length;e<f;e++){d=c[e];for(var g in d)b[g]=d[g]}return b},exports.locale=function(a,b){if(a instanceof Object){b=""+b||"en";if(a[b]!==undefined)return a[b];parts=b.split("_");while(parts.pop()){b=parts.join("_");if(a[b]!==undefined)return a[b]}return a.en}return a}}),define("libs/schema.js/lib/objecttools",["require","exports","module"],function(require,exports,module){typeof global=="undefined"&&typeof window=="object"&&(window.global=window),Object.keys||(Object.keys=function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)a.hasOwnProperty.call(a,c)&&(b[b.length]=c);return b});var a=0,b=["$ref","$refs","$$refs"],c={},d=c.find=function(a,b){var c,d=a;for(var e=b.length,f=0;f<e;f++){if((c=b[f])===undefined)break;if((d instanceof Object||d instanceof Array)&&c in d)d=d[c];else return}return d},e={},f=c.id=function(b){if(b instanceof Object)return b.hasOwnProperty("__id")||(b.__id=a++),b.__id;return},g=c.resetRefs=function(a){if(a instanceof Object){var b=h(a);return b?(b.splice(0),b):(b=[],a instanceof Array?a.push({$$refs:b}):a.$refs=b,b)}return null},h=c.getRefs=function(a){if(a instanceof Object)return a instanceof Array&&a[a.length-1]&&a[a.length-1].$$refs instanceof Array?a[a.length-1].$$refs:a.hasOwnProperty("$refs")?a.$refs:null;return null},i=c.addRef=function(a,b,c){var d=h(a);if(!d)throw new Error("You need to call resetRefs(object) first!");return d.push(b),d.push(c),d},j=c.findRefs=function(a){var c={},d=[],e=g(a),h=function(g){if(!(g instanceof Object))return;var i=f(g);if(c[i]!==undefined){e.push([].concat(d)),e.push(c[i]);return}c[i]=["#"].concat(d);if(a instanceof Array){for(var j=a.length,k=0;k<j;k++)d.push(k),h(g[k]),d.pop();return}for(var l=Object.keys(g),j=l.length,k=0,m;m=l[k],k<j;k++){if(b.indexOf(m)>-1)continue;d.push(m),h(g[m]),d.pop()}};return h(a),a},k=c.resolveRefs=function(a,b){var c,e=a instanceof Array;if(e){var f=a[a.length-1];f instanceof Object&&f.$refs instanceof Array&&(c=f.$refs)}else a instanceof Object&&a.$refs instanceof Array&&(c=a.$refs);if(!c)return a;var g,h,i,j,k;for(var l=c.length,m=0;m<l;m+=2){g=[].concat(c[m]),i=[].concat(c[m+1]),h=g.pop(),j=i.shift();if(h===undefined||j===undefined)continue;k=d(a,g);if(!k)continue;j!=="#"&&i.unshift(j);if(j!=="#"&&!b)continue;k[h]=d(j==="#"?a:global,i),c.splice(m,2),m-=2,l-=2}return a};module.exports={},typeof module=="object"&&module.exports&&(module.exports=c)}),define("libs/schema.js/lib/validation",["require","exports","module","./utils","./objecttools"],function(require,exports,module){var a=require("./utils"),b=require("./objecttools"),c=a.locale,d=Array.prototype.slice;module.exports=function(){var e=this,f=this.detectRecursion,g=this.Validation=function(b,d,h){h=h||{},this._flags={},this._errors={},this._wasError=0,this._stack=[],this.path=[],this.id=g._id++,this.schema,this.push(b),this.instance=d,this.locale=e.locale||"en",this.detectRecursion=h.detectRecursion||f,this.errors=[];var i=this,j=this.Error=function(b,d,e){this.schema=i.schema,this.path=i.path?[].concat(i.path):[],this.attribute=b||"",this.description=typeof d=="object"?c(d,i.locale)(this):d||"",e&&a.extend(this,e),i._errors[this.id()]||(i._errors[this.id()]=!0,i.errors.push(this)),i._wasError++};j.prototype.toJSON=function(){return{path:this.path,name:this.attribute,description:this.description}},j.prototype.id=function(){return[this.path,undefined,this.attribute]+""},this.instance=this.start(d),delete this._flags,this._errors,this._wasError,this._stack,this.path,this.id};a.extend(g.prototype,{isError:function(){return this.errors.length>0},getError:function(){if(this.errors.length===0)return null;var a=new Error(c(e.i18n("validation_error"),this.locale)(this));return a.errors=this.errors,a.toJSON=function(){return{message:this.message,errors:this.errors}},a},wasError:function(){var a=this._wasError;return this._wasError=0,a},push:function(a,b){this.schema=a,this._stack.push(a),b!==undefined&&this.path.push(b)},pop:function(a){var b=[this._stack.pop(),a?undefined:this.path.pop()],c=this._stack.length;return this.schema=c?this._stack[c-1]:null,b},getFlag:function(a){return b.id(a)+"_"+this.schema.id},flagObject:function(a){return this._flags[this.getFlag(a)]=!0,a},isObjectFlagged:function(a){return this.getFlag(a)in this._flags},callPlugin:function(a,b){var c=arguments.length>2?d.call(arguments,1):[b];return typeof a!="function"&&(a=g.plugins[a]||g.plugins.addError),a.apply(this,c)}}),a.extend(g,{_id:1,registerPlugins:function(b){a.extend(g.plugins,b)},plugins:{addError:function(a,b){return new this.Error(b,e.i18n["validation_error_"+b]),a}}}),require("./"+this.v+"/validation").call(this)}}),define("libs/schema.js/lib/schema",["require","exports","module","./utils","./objecttools"],function(require,exports,module){var a=require("./utils"),b=require("./objecttools");module.exports=function(){var c=this,d=this.Schema=function(b){typeof b=="string"&&(b=JSON.parse(b));if(b instanceof d)return b;a.extend(this,b),this.id===undefined&&(this.id=""+d._id++),d.instances[this.id]=this};a.extend(d.prototype,{validate:function(a,b){var d=new c.Validation(this,a,b);return delete d.instance.__id,d},setFallbacks:function(b){return typeof b=="string"?this.fallbacks=c.Validation[b]:b===undefined?this.fallbacks=c.fallbacks:this.fallbacks=a.extend({},c.fallbacks,b),this}}),a.extend(d,{_id:1,create:function(a){if(typeof a=="string")var a=JSON.parse(a);var b=c.schemaSchema.validate(a);if(b.isError())throw console.log(b.getError()),b.getError();return b.instance},createSeveral:function(a){for(var b in a)a[b].id===undefined&&(a[b].id=b),a[b]=this.create(a[b]);return a},instances:{},resolveRefs:function(){for(var a in this.instances)b.resolveRefs(this.instances[a],!0)}})}}),define("libs/schema.js/lib/environment",["require","exports","module","./objecttools","./utils","./schema","./validation"],function(require,exports,module){var a=require("./objecttools"),b=require("./utils"),c=Array.prototype.slice,d=b.extend,e=b.locale,f=function(a,b){var c;if(typeof a=="object")b=a;else{if(f.instances[a])return f.instances[a];c=this,this.id=a,f.instances[a]=this}b=b||{};var e=b.i18n||["../i18n/default"];e instanceof Array||(e=[e]);var g=this.i18n=function(a){return g[a]||{en:function(){return""}}},h;for(var i=0,j=e.length;i<j;i++)h=e[i],typeof h=="object"?d(g,h):d(g,require(h));delete b.i18n,this.locale=b.locale||"en",delete b.locale,this.v="draft-02",delete b.v,this.detectRecursion=b.detectRecursion===undefined?!0:b.detectRecursion,delete b.detectRecursion,require("./schema").call(this);var k=this.Schema;k.v=this.v,require("./validation").call(this);var l=this.Validation,m=b.fallbacks||"TOLERANT_FALLBACKS";typeof m=="object"?this.fallbacks=d(l.STRICT_FALLBACKS,m):this.fallbacks=l[m],delete b.fallbacks,d(this,b),require("./"+this.v+"/setupSchemaSchema").call(this);var n=this.schemaSchema.validate(this.schemaSchema,{detectRecursion:!0});if(n.isError())throw console.log("The core schema is not valid!"),n.getError()};d(f.prototype,{validateCall:function(a,b){if(a.SCHEMA instanceof this.Schema){var d=a.SCHEMA.validate(c.call(arguments,2)),e=d.instance;if(d.isError())throw d.getError();return a.apply(b,e)}throw"No SCHEMA defined"},validateCallAsync:function(a,b){if(!(a.SCHEMA instanceof this.Schema))throw"No SCHEMA defined";var d=c.call(arguments,2),e=d.pop(),f=a.SCHEMA.validate(d),d=f.instance;if(f.isError())return e(f.getError());d.push(e),a.apply(b,d)},f:function(a,b,d,e){var f=c.call(arguments),e=f.pop();if(f.length===0)return e.IS_ASYNC=!1,e;if(a instanceof Object){var b=!!f[1],a=this.Schema.create(a),d=!!f[2],g,h,i=this;return d?g=function(){return i.validateCallAsync.apply(i,[e,this].concat(c.call(arguments)))}:g=function(){return i.validateCall.apply(i,[e,this].concat(c.call(arguments)))},e.SCHEMA=a,e.IS_VALIDATING=b,e.IS_ASYNC=d,g.SCHEMA=a,g.IS_VALIDATING=b,g.IS_ASYNC=d,h=b?g:e,b||(h.validate=g),h}return e.IS_ASYNC=!!f[0],e}}),f.instances={};var g=function(a,b){return new f(a,b)};return module.exports={},typeof module=="object"&&module.exports?module.exports=g:window.createEnvironment=g,module.exports}),define("libs/schema.js/i18n/default",["require","exports","module"],function(require,exports,module){module.exports={validation_error:{de:function(){return"Diese Instanz ist nicht gültig"},en:function(){return"This instance is not valid"}},validation_error_type:{de:function(a){return"Ungültiger Typ"},en:function(a){return"Invalid type"}},validation_error_minLength:{de:function(a){return"Der Text muss mindestens "+a.schema.minLength+" Zeichen haben."},en:function(a){return"Text must be longer than "+a.schema.minLength+" symbols"}},validation_error_maxLength:{en:function(a){return"Text must be shorter than "+a.schema.maxLength+" symbols"}},validation_error_minimum:{en:function(a){return"Number must be greater than "+a.schema.minimum+""}},validation_error_maximum:{en:function(a){return"Number must be less than "+a.schema.maximum+""}},validation_error_pattern:{en:function(a){return"Incorrect value"}},validation_error_optional:{en:function(a){return"Required field"}}}}),define("libs/schema.js/lib/draft-02/validation",["require","exports","module","Underscore","../utils","../objecttools"],function(require,exports,module){var _=require("Underscore"),a=require("../utils"),b=require("../objecttools");module.exports=function(){var c=this,d=this.Schema;a.extend(this.Validation.prototype,{start:function(a){if(this.detectRecursion&&a instanceof Object){if(this.isObjectFlagged(a))return a;this.flagObject(a)}return a=this["extends"](a),this.wasError()?a:(a=this.adapters(a,"pre"),this.wasError()?a:(a=this.optional(a),this.wasError()||a===undefined?a:(a=this.empty(a),this.wasError()||a===""||a===null?a:(a=this.type(a),this.wasError()?a:(a=this.requires(a),this.wasError()?a:(a=this.adapters(a,"post"),a))))))},"extends":function(a){return this.schema["extends"]?(this.push(this.schema["extends"]),a=this.start(a),this.pop(!0),a):a},optional:function(a){return this.schema.optional||a!==undefined?a:this.callPlugin(this.schema.fallbacks.optional,a,"optional")},empty:function(a){return this.schema.empty||a!==undefined&&a!==""&&a!==null?a:this.callPlugin(this.schema.fallbacks.optional,a,"empty")},adapters:function(a,b){if(!this.schema[b])return a;var c=this.schema[b];c instanceof Array||(c=[c]);var d=this.errors.length,e;for(var f=c.length,g=0;g<f;g++){e=c[g],a=this.callPlugin(e,a);if(this.errors.length>d)return a}return a},type:function(a,b,c){c=c===!1?!1:!0;var d=b||this.schema.type;if(!(d instanceof Array)){var e=typeof a,f=function(){if(d==="any")return!0;if(d==="null")return a===null;if(d==="array")return a instanceof Array;if(d==="object")return a instanceof Object&&!(a instanceof Array);if(d==="number")return e==="number";if(d==="integer")return e==="number"&&Math.round(a)===a;if(d==="string")return e==="string";if(d==="boolean")return e==="boolean"}();if(!f){a=this.callPlugin(this.schema.fallbacks.type,a,"type");if(this.wasError())return a}var b=typeof a;return b==="number"?(a=this.minimum(a),this.wasError()?a:(a=this.maximum(a),this.wasError()?a:(a=this.maxDecimal(a),this.wasError()?a:(c&&(a=this["enum"](a)),a)))):b==="string"?(a=this.pattern(a),this.wasError()?a:(a=this.minLength(a),this.wasError()?a:(a=this.maxLength(a),this.wasError()?a:(c&&(a=this["enum"](a)),a)))):a instanceof Array?(a=this.minItems(a),this.wasError()?a:(a=this.maxItems(a),this.wasError()?a:(a=this.items(a),this.wasError()?a:(a=this.additionalProperties(a),this.wasError()?a:(c&&(a=this["enum"](a)),a))))):a instanceof Object?(a=this.properties(a),a=this.additionalProperties(a),this.wasError()?a:(c&&(a=this["enum"](a)),a)):a}var g,h=this.errors.length;for(var i=d.length,j=0;j<i;j++){g=this.type(a,d[j],j===0);if(this.errors.length===h){a=g;break}j+1<i&&(this.errors.splice(h,1),this.wasError())}return a},"enum":function(a){return"enum"in this.schema?_.indexOf(this.schema["enum"],a)>-1?a:this.callPlugin(this.schema.fallbacks["enum"],a,"enum"):a},requires:function(a){if(this.schema.requires!==undefined&&this.parentInstance){var b;typeof this.schema.requires=="string"?(b={properties:{}},b.properties[this.schema.requires]={type:"any"}):b={properties:this.schema.requires},b=d.create(b);var c=this.pop();this.push(b),this.properties(this.parentInstance),this.pop(!0),this.push.apply(this,c)}return a},properties:function(a){if("properties"in this.schema){var b=this.schema.properties,c,d;this.parentInstance=a;var e,d;for(var f in b){this.push(b[f],f),e=f in a,f!="__id"?d=this.start(a[f]):(d=undefined,e=!1);if(e||d!==undefined)a[f]=d;this.pop()}this.parentInstance=null}return this.wasError(),a},additionalProperties:function(a){if("additionalProperties"in this.schema)if(a instanceof Object&&!(a instanceof Array)){var b=this.schema.properties||{};if(!this.schema.additionalProperties){for(var c=Object.keys(a),d=c.length,e=0,f;f=c[e],e<d;e++)if(!(f in b)&&f!="__id")return this.callPlugin(this.schema.fallbacks.additionalProperties,a,"additionalProperties")}else if(this.schema.additionalProperties!==!0)for(var c=Object.keys(a),d=c.length,e=0,f;f=c[e],e<d;e++)f in b||(this.push(this.schema.additionalProperties,f),f!=="__id"&&(a[f]=this.start(a[f])),this.pop())}else if(this.schema.items instanceof Array)if(!this.schema.additionalProperties){if(a.length>this.schema.items.length)return this.callPlugin(this.schema.fallbacks.additionalProperties,a,"additionalProperties")}else if(this.schema.additionalProperties!==!0)for(var d=a.length,e=this.schema.items.length;e<d;e++)this.push(this.schema.additionalProperties,e),a[e]=this.start(a[e]),this.pop();return a},items:function(a){if("items"in this.schema)if(this.schema.items instanceof Array){var b,c;for(var d=this.schema.items.length,e=0;e<d;e++){this.push(this.schema.items[e],e),b=e in a,e!="__id"?c=this.start(a[e]):(b=!1,c=undefined);if(b||c!==undefined)a[e]=c;this.pop()}}else for(var d=a.length,e=0;e<d;e++)this.push(this.schema.items,e),e!="__id"&&(a[e]=this.start(a[e])),this.pop();return a},maxItems:function(a){return this.schema.maxItems&&a.length>this.schema.maxItems?this.callPlugin(this.schema.fallbacks.maxItems,a,"maxItems"):a},minItems:function(a){return this.schema.minItems&&a.length<this.schema.minItems?this.callPlugin(this.schema.fallbacks.minItems,a,"minItems"):a},minimum:function(a){if("minimum"in this.schema){var b="minimumCanEqual"in this.schema?this.schema.minimumCanEqual:!0;return(b?a>=this.schema.minimum:a>this.schema.minimum)?a:this.callPlugin(this.schema.fallbacks.minimum,a,"minimum")}return a},maximum:function(a){if("maximum"in this.schema){var b="maximumCanEqual"in this.schema?this.schema.maximumCanEqual:!0;return(b?a<=this.schema.maximum:a<this.schema.maximum)?a:this.callPlugin(this.schema.fallbacks.maximum,a,"maximum")}return a},maxDecimal:function(a){if("maxDecimal"in this.schema){var b=Math.pow(10,this.schema.maxDecimal);return Math.round(a*b)/b===a?a:this.callPlugin(this.schema.fallbacks.maxDecimal,a,"maxDecimal")}return a},pattern:function(a){return this.schema.pattern?this.schema.pattern.test(a)?a:this.callPlugin(this.schema.fallbacks.pattern,a,"pattern"):a},minLength:function(a){return this.schema.minLength===undefined?a:a.length>=this.schema.minLength?a:this.callPlugin(this.schema.fallbacks.minLength,a,"minLength")},maxLength:function(a){return this.schema.maxLength===undefined?a:a.length<=this.schema.maxLength?a:this.callPlugin(this.schema.fallbacks.maxLength,a,"maxLength")}}),a.extend(this.Validation,{TOLERANT_FALLBACKS:{optional:"setDefault",type:"castTolerantlyToType","enum":"setDefault",requires:"addError",additionalProperties:"removeAdditionalProperties",maxItems:"sliceToMaxItems",minItems:"addError",maximum:"setMaximum",minimum:"setMinimum",maxDecimal:"roundToMaxDecimal",pattern:"addError",minLength:"addError",maxLength:"addError"},STRICT_FALLBACKS:{optional:"addError",type:"addError","enum":"addError",requires:"addError",additionalProperties:"addError",maxItems:"addError",minItems:"addError",maximum:"addError",minimum:"addError",maxDecimal:"addError",pattern:"addError",minLength:"addError",maxLength:"addError"}}),this.Validation.registerPlugins({addToRefs:function(a){if(a instanceof Object&&!(a instanceof Array)&&typeof a.$ref=="string"){var c=this.path,d=a.$ref.split(".");b.addRef(this.instance,[].concat(c),d[0]==="#"?[].concat(d):["#","constructor","instances"].concat(d))}return a},instantiateSchema:function(a){if(!(a instanceof Object)||a instanceof Array)return a;var c=a===this.instance;a instanceof d||(a=new d(a)),c&&(this.instance=a);if(a.properties instanceof Object){var e=a.properties||{};for(var f in e)e[f]instanceof Object&&!(e[f]instanceof d)&&(e[f]=new d(e[f]))}if(a.items instanceof Array){var g=a.items;for(var h=g.length,i=0;i<h;i++)g[i]instanceof Object&&!(g[i]instanceof d)&&(g[i]=new d(g[i]))}else a.items instanceof Object&&(a.items instanceof d||(a.items=new d(a.items)));if(a.requires&&a.requires instanceof Object&&!(a.requires instanceof Array)){var e=a.requires;for(var f in e)e[f]=new d(e[f])}return a.additionalProperties instanceof Object&&!(a.additionalProperties instanceof d)&&(a.additionalProperties=new d(a.additionalProperties)),a["extends"]instanceof Object&&(a["extends"]instanceof d||(a["extends"]=new d(a["extends"]))),a.setFallbacks(a.fallbacks),b.resetRefs(a),a},castTolerantlyToType:function(a,b){b=b||"type";var d=this.schema.type,e=typeof a,f;if(d==="string")return e==="object"?a!==null&&typeof a.toString=="function"&&a.toString!==Object.prototype.toString&&a.toString!==Array.prototype.toString?""+a:(new this.Error(b,c.i18n["validation_error_"+b]),a):""+a;if(d==="number"){if(e!=="boolean")return f=parseFloat(a),isNaN(f)&&a!=0?(new this.Error(b,c.i18n["validation_error_"+b]?c.i18n["validation_error_"+b]:"validation_error_"+b),a):isNaN(f)?a:f;if(a===!1)return 0;if(a===!0)return 1}if(d==="integer"){if(e!=="boolean")return f=parseInt(a,10),isNaN(f)?(new this.Error(b,c.i18n["validation_error_"+b]),a):f;if(a===!1)return 0;if(a===!0)return 1}if(d==="boolean")return e==="string"?a.trim().toLowerCase()==="false"?!1:(f=parseFloat(a),isNaN(f)?!0:!!f):!!a;if(d==="object")return a instanceof Array&&a.length===0?{}:((e!=="object"||a===null||a instanceof Array)&&new this.Error(b,c.i18n["validation_error_"+b]),a);if(d==="array"){if(!a)return[];if(a instanceof Object){var f=[],g,h=!0;if(Object.keys(a).length===0)return f;for(var i in a){g=parseInt(i,10),""+g===i?f[g]=a[i]:h=!1;break}}return new this.Error(b,c.i18n["validation_error_"+b]),a}if(d==="null")return new this.Error(b,c.i18n["validation_error_"+b]),a},roundToMaxDecimal:function(a,b){if(this.schema.maxDecimal===undefined)return new this.Error(b,c.i18n["validation_error_"+b]),a;var d=Math.pow(10,this.schema.maxDecimal);return Math[a<0?"ceil":"floor"](a*d)/d},setMinimum:function(a,b){return this.schema.minimum===undefined?(new this.Error(b,c.i18n["validation_error_"+b]),a):this.schema.minimum},setMaximum:function(a,b){return this.schema.maximum===undefined?(new this.Error(b,c.i18n["validation_error_"+b]),a):this.schema.maximum},truncateToMaxLength:function(a,b){return this.schema.maxLength===undefined?(new this.Error(b,c.i18n["validation_error_"+b]),a):a.substr(0,this.schema.maxLength)},setDefault:function(a,b){if("default"in this.schema)return this.schema["default"];new this.Error(b,c.i18n["validation_error_"+b])},removeAdditionalProperties:function(a,b){if(this.schema.type==="object"){var c=this.schema.properties||{};for(var d=Object.keys(a),e=d.length,f=0,g;g=d[f],f<e;f++)c[g]===undefined&&delete a[g];return a}if(this.schema.items&&this.schema.items instanceof Array)for(var e=a.length,f=this.schema.items.length;f<e;f++)delete a[f];return a},sliceToMaxItems:function(a,b){return this.schema.maxItems!==undefined?a.length>this.schema.maxItems&&a.splice(this.schema.maxItems):new this.Error(b,c.i18n["validation_error_"+b]),a},deleteInstance:function(a){return undefined}})}}),define("libs/schema.js/lib/draft-02/setupSchemaSchema",["require","exports","module"],function(require,exports,module){module.exports=function(){var a=this.Schema,b=this.Validation,c={id:"jsonSchemaCore",title:"JSON Schema Core Schema",description:"This is the JSON Schema for JSON Schemas.",type:"object",properties:{type:{type:["string","array"],items:{type:"string","enum":{$ref:"#.properties.type.enum"}},uniqueItems:!0,description:"This is a type definition value. This can be a simple type, or a union type","enum":["string","object","array","boolean","number","integer","null","any"],minItems:2,optional:!0,"default":"any",pre:"addToRefs",labels:{de:{string:"Text",object:"Objekt",array:"Liste","boolean":"wahr/falsch",number:"Zahl",integer:"ganze Zahl","null":"undefiniert"},en:{}}},id:{type:"string",optional:!0,minLength:1,pattern:"[^\\.#]",description:"A globally unique ID for this schema. It can be used to reference the schema from another one."},optional:{type:"boolean",description:"This indicates that the instance property in the instance object is not required.",optional:!0,"default":!1,pre:"addToRefs"},empty:{type:"boolean",description:"This indicates that the instance property in the instance object can be empty.",optional:!0,"default":!1,pre:"addToRefs"},"enum":{type:"array",optional:!0,description:"This provides an enumeration of possible values that are valid for the instance property. It goes only for the first type, if type is an array of types.",minItems:1,uniqueItems:!0},description:{type:"string",optional:!0,description:"This provides a description of the purpose the instance property. The value can be a string or it can be an object with properties corresponding to various different instance languages (with an optional default property indicating the default description).",pre:"addToRefs"},title:{type:"string",optional:!0,description:"This provides the title of the property",pre:"addToRefs"},"default":{type:"any",optional:!0,description:"This indicates the default for the instance property.",pre:"addToRefs"},options:{type:"array",optional:!0,items:{type:"object",properties:{label:{type:"string",optional:!0},value:{type:"any"}}},pre:"addToRefs"},"extends":{type:"object",optional:!0,pre:"addToRefs"},requires:{type:["string","object"],additionalProperties:{$ref:"#"},optional:!0,description:"indicates a required property or a schema that must be validated if this property is present",pre:"addToRefs"},nonStandard:{type:"boolean",optional:!0,"default":!1,nonStandard:!0},pre:{type:["string","array","any"],items:{type:["string","any"]},optional:!0,description:"One or several prefix adapters identified by plugin IDs",nonStandard:!0,pre:"addToRefs"},post:{type:["string","array","any"],items:{type:["string","any"]},optional:!0,description:"One or several postfix adapters identified by plugin IDs",nonStandard:!0,pre:"addToRefs"},fallbacks:{type:"object",additionalProperties:{type:["string","object"],description:"Identifier for a adapter function that will be executed if a constraint is violated"},description:"Fallback object, with property names = schema property names",nonStandard:!0,pre:"addToRefs"},properties:{type:"object",additionalProperties:{$ref:"#"},description:"This is a definition for the properties of an object value",optional:!0,"default":{},pre:"addToRefs"},items:{type:["object","array"],properties:{$ref:"#.properties"},items:{$ref:"#"},description:"When the value is an array, this indicates the schema to use to validate each item in an array",optional:!0,pre:["instantiateSchema","addToRefs"]},maxItems:{type:"integer",optional:!0,description:"When the instance value is an array, this indicates maximum number of items.",minimum:0,pre:"addToRefs"},minItems:{type:"integer",optional:!0,description:"When the instance value is an array, this indicates minimum number of items.",minimum:0,pre:"addToRefs"},additionalProperties:{type:["boolean","object"],properties:{$ref:"#.properties"},description:"This provides a default property definition for all properties that are not explicitly defined in an object type definition.",optional:!0,"default":!0,pre:["instantiateSchema","addToRefs"]},minimum:{type:"number",optional:!0,description:"This indicates the minimum value for the instance property when the type of the instance value is a number.",pre:"addToRefs"},minimumCanEqual:{type:"boolean",optional:!0,description:"If the minimum is defined, this indicates whether or not the instance property value can equal the minimum.","default":!0,pre:"addToRefs"},maximum:{type:"number",optional:!0,description:"This indicates the maximum value for the instance property when the type of the instance value is a number.",pre:"addToRefs"},maximumCanEqual:{type:"boolean",optional:!0,description:"If the maximum is defined, this indicates whether or not the instance property value can equal the maximum.","default":!0,pre:"addToRefs"},maxDecimal:{type:"integer",optional:!0,description:"This indicates the maximum number of decimal places in a floating point number.",pre:"addToRefs"},pattern:{type:["string","object"],format:"regex",description:"When the instance value is a string, this provides a regular expression that a instance string value should match in order to be valid.",optional:!0,pre:["addToRefs",function(a,b){return a instanceof RegExp?a:typeof a=="string"?new RegExp(a):a}]},maxLength:{type:"number",optional:!0,description:"When the instance value is a string, this indicates maximum length of the string.",pre:"addToRefs"},minLength:{type:"number",optional:!0,description:"When the instance value is a string, this indicates minimum length of the string.",pre:"addToRefs"},format:{type:"string",optional:!0,description:"This indicates what format the data is among some predefined formats which may include:\n\ndate - a string following the ISO format \naddress \nschema - a schema definition object \nperson \npage \nhtml - a string representing HTML",pre:"addToRefs"}},pre:["instantiateSchema","addToRefs"]};(jsonSchemaCore=new a(c)).setFallbacks(b.STRICT_FALLBACKS);for(var d in jsonSchemaCore.properties)(jsonSchemaCore.properties[d]=new a(jsonSchemaCore.properties[d])).setFallbacks(b.STRICT_FALLBACKS);(jsonSchemaCore.properties.type.items=new a(jsonSchemaCore.properties.type.items)).setFallbacks(b.STRICT_FALLBACKS),jsonSchemaCore.properties.type.items["enum"]=jsonSchemaCore.properties.type["enum"],jsonSchemaCore.properties.id.pattern=new RegExp(jsonSchemaCore.properties.id.pattern),(jsonSchemaCore.properties.options.items=new a(jsonSchemaCore.properties.options.items)).setFallbacks(b.STRICT_FALLBACKS),jsonSchemaCore.properties.requires.additionalProperties=jsonSchemaCore,(jsonSchemaCore.properties.pre.items=new a(jsonSchemaCore.properties.pre.items)).setFallbacks(b.STRICT_FALLBACKS),(jsonSchemaCore.properties.post.items=new a(jsonSchemaCore.properties.post.items)).setFallbacks(b.STRICT_FALLBACKS),(jsonSchemaCore.properties.fallbacks.additionalProperties=new a(jsonSchemaCore.properties.fallbacks.additionalProperties)).setFallbacks(b.STRICT_FALLBACKS),jsonSchemaCore.properties.properties.additionalProperties=jsonSchemaCore,jsonSchemaCore.properties.items.properties=jsonSchemaCore.properties,jsonSchemaCore.properties.items.items=jsonSchemaCore,jsonSchemaCore.properties.additionalProperties.properties=jsonSchemaCore.properties,this.schemaSchema=jsonSchemaCore}}),define("tau/utils/utils.jsonSchema",["Underscore","jQuery","libs/schema.js/lib/environment","libs/schema.js/lib/utils","libs/schema.js/lib/objecttools","libs/schema.js/lib/schema","libs/schema.js/i18n/default","libs/schema.js/lib/draft-02/validation","libs/schema.js/lib/draft-02/setupSchemaSchema"],function(_,$,a,b,c,d,e,f){var g=a("prod",{fallbacks:"STRICT_FALLBACKS"});return g.PATTERN_DATE=/^([0-1]{0,1}[0-9]{1})\/([0-3]{0,1}[0-9]{1})\/([0-9]{4})$/,g.PATTERN_URL=/^(?:(?:ht|f)tp(?:s?)\:\/\/|~\/|\/)(?:\w+:\w+@)?((?:(?:[-\w\d{1-3}]+\.)+(?:com|org|net|gov|mil|biz|info|mobi|name|aero|jobs|edu|co\.uk|ac\.uk|it|fr|tv|museum|asia|local|travel|[a-z]{2}))|((\b25[0-5]\b|\b[2][0-4][0-9]\b|\b[0-1]?[0-9]?[0-9]\b)(\.(\b25[0-5]\b|\b[2][0-4][0-9]\b|\b[0-1]?[0-9]?[0-9]\b)){3}))(?::[\d]{1,5})?(?:(?:(?:\/(?:[-\w~!$+|.,=]|%[a-f\d]{2})+)+|\/)+|\?|#)?(?:(?:\?(?:[-\w~!$+|.,*:]|%[a-f\d{2}])+=?(?:[-\w~!$+|.,*:=]|%[a-f\d]{2})*)(?:&(?:[-\w~!$+|.,*:]|%[a-f\d{2}])+=?(?:[-\w~!$+|.,*:=]|%[a-f\d]{2})*)*)*(?:#(?:[-\w~!$ |\/.,*:;=]|%[a-f\d]{2})*)?$/,g.Validation.registerPlugins({trim:function(a){return $.trim(a)}}),g.Validation.prototype.optional=function(a){return this.schema.optional||a!==undefined&&a!==null&&a!==""?a:this.callPlugin(this.schema.fallbacks.optional,a,"optional")},g}),define("tau/models/customField/model.customField.date.editable",["tau/models/model.customField.editable","tau/utils/utils.jsonSchema","tau/utils/utils.date"],function(a,b,c){var d=a.extend({category:"edit",name:"Editable custom field",schema:b.Schema.create({type:"object",properties:{value:{type:"string",optional:!1,post:function(a){if(this.wasError()==0){var b=c.parse(a);b==null?new this.Error("Date","Incorrect date format"):b<new Date("01/01/1900")?new this.Error("Date","Date must be greater then 01-01-1900"):a=c.format.date.short(b)}return a},additionalProperties:{dateFormat:c.getFormatData().date.short}}}}),"bus validate":function(a){var b=a.data,c=b.cmd.$set.customFields[0];this.schema.properties.value.optional=!this.config.customField.required,this.schema.properties.value.empty=!this.config.customField.required,b.validation=this.schema.validate(c)}});return d}),define("tau/ui/behaviour/date/ui.behaviour.dateEditor",["Underscore","jQuery","tau/core/tau","tau/configurator"],function(_,$,a,b){$.widget("ui.dateEditor",{options:{widgetName:"datepicker",onSave:function(){},validation:{required:!1},dateFormat:"m/dd/yy"},errors:[],_create:function(){this.init()},init:function(){var a=$(this.element);this.$element=a,a.click($.proxy(this.showEditor,this)),a.addClass("ui-dateeditor-source")},setValidationErrors:function(a){this.element.addClass("ui-validationerror"),_.isString(a)&&this.element.attr("title",a)},resetValidationErrors:function(a){this.element.removeClass("ui-validationerror"),this.element.removeAttr("title",a)},activate:function(){this._justActivated=!0,this.showEditor(),this.$editor.find(":text").focus()},_attachKeyBoardHandling:function(){var a=this,c={handleKeyDown:function(){a.mapKeys.apply(a,arguments)}};b.getKeyBoardManager().pushHandler(c)},showEditor:function(b){var c=this;if(!this._editorIsVisible){if(!this.$editor){var d=$(a.concat('<span class="ui-dateeditor">','    <input type="text" maxlength="20" />',"</span>")),e=d.find(":text");e.focus();var f=$("body"),g=function(a){c._onDocumentClick.apply(c,arguments),f.unbind("click",g)},h=function(){f.click(g)};e[this.options.widgetName]({showButtonPanel:!1,dateFormat:this.options.dateFormat,buttonText:"choose",showOn:"button",beforeShow:h,onSelect:function(a){e.focus()}}),d.insertAfter(this.$element),this.$editor=d}this._attachKeyBoardHandling(),c._documentClickDelegate||(c._documentClickDelegate=function(a){c._onDocumentClick(a)},$(document.body).click(c._documentClickDelegate)),this.$element.hide(),this._editorIsVisible=!0,this.$editor.show(),this.$editor.find(":text").val(this.$element.text())}},trimString:function(a){return(a||"").trim()},_getDefaultValue:function(){return this.options.date||this.element.text()},_onSave:function(){var a=this.$editor.find(":text").val(),c={value:a};(this.options.beforeChange||function(){})(c),a=c.value,this.hideEditor(),this.$element.show();var d=this._getDefaultValue();this.trimString(d)!=this.trimString(a)&&this.options.onSave(a),this.$element.text(a),b.getKeyBoardManager().popHandler()},_onCancel:function(){b.getKeyBoardManager().popHandler();var a=this.$editor.find(":text").val();this.hideEditor(),this.$element.show(),this.options.onCancel&&this.options.onCancel()},hideEditor:function(){this.$editor&&this._editorIsVisible&&(this.$editor.hide(),this._editorIsVisible=!1),this._documentClickDelegate&&($(document.body).unbind("click",this._documentClickDelegate),delete this._documentClickDelegate)},_onDocumentClick:function(a){var b=this,c=$(a.target);if(!this._editorIsVisible)return;if(this._justActivated&&a.target!=document.body){this._justActivated=!1;return}if(c.hasClass("ui-dateeditor-source")||c.hasClass("ui-dateeditor")||c.parents(".ui-dateeditor").length>0||c.parents(".ui-datepicker").length>0||c.parents(".ui-datepicker-calendar").length>0||c.parents(".ui-datepicker-header").length>0)return;b._onSave(),b.hideEditor(),a.stopPropagation(),a.preventDefault()},destroy:function(){this.hideEditor();var a=this.$editor;if(a){var b=a.find(":text");b[this.options.widgetName]("destroy"),a.remove()}},mapKeys:function(a){switch(a.which){case 13:a.preventDefault(),this._onSave();break;case 27:a.preventDefault(),this._onCancel()}}})}),define("tau/components/extensions/customField/extension.customField.date.editable",["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/utils/utils.date","tau/ui/behaviour/date/ui.behaviour.dateEditor"],function(_,$,a,b){return a.extend({category:"edit","bus permissionsReady+afterRender":function(a){var c=this,d=a.afterRender.data.data,e=a.permissionsReady.data;if(e.editable){var f=a.afterRender.data.element,g=f.find(".ui-customfield__value");g.addClass("editableText"),this.$widget=g,$.datepicker.parseDate=function(a,c,d){return b.parse(c)},$.datepicker.formatDate=function(a,c,d){return b.formatAs(c,a)};var h=b.getFormatData().date.short;g.dateEditor({dateFormat:h,onSave:function(a){c.bus.fire("save",{customFields:[{name:d.name,type:d.type,value:a}]})}}),f.behaviourCustomFieldRow({onActivate:function(){g.dateEditor("activate"),g.focus()}}),f.addClass("ui-customfield_editable_true")}},"bus validate":function(){this.$widget.dateEditor("resetValidationErrors")},"bus afterValidate":function(a){this.$widget.dateEditor("setValue",a.data.validation.instance.value)},"bus validationFailed":function(a){this.$widget.dateEditor("setValidationErrors",a.data.validation.errors[0].description)}})}),define("tau/ui/behaviour/overlay/ui.behaviour.overlay",["Underscore","jQuery"],function(_,$){$.widget("ui.tauOverlay",{options:{showOnCreation:!0},_create:function(){this.$target=this.element,this.options.showOnCreation&&this.show()},showLarge:function(){this._show("ui-spinner-centered")},show:function(){this._show("ui-overlay")},_show:function(a){var b=this;b.$overlay=b.overlay||$(['<div class="',a,'"></div>'].join("")),b.$overlay.detach(),b.$target.addClass("ui-overlay-container");var c=$("body");b.$target.css("position")==="relative"?c=b.$target:c=b.$target.offsetParent(),c.append(b.$overlay)},hide:function(){var a=this;a.destroy()},destroy:function(){var a=this;a.$target.removeClass("ui-overlay-container"),a.$overlay&&a.$overlay.remove(),$.Widget.prototype.destroy.apply(this,arguments)}})}),define("tau/ui/extensions/customField/ui.extension.customField.editable",["tau/components/extensions/component.extension.base","tau/ui/behaviour/overlay/ui.behaviour.overlay"],function(a){var b=a.extend({"bus afterRender":function(a){this.element=a.data.element},"bus preRefreshRow":function(a){this.element.tauOverlay(),this.fire("markElementToBeUpdated",{element:this.element})},"bus refreshRow":function(a){if(!this.element.hasClass("updating"))return;this.element.parents(".tmpl-container-list:first").tauOverlay("hide");var b=this;this.on("afterRender",function(a){a.removeListener(),b.fire("updateElement",{element:b.element})}),this.fire("refresh")}});return b}),define("tau/ui/templates/customField/ui.template.customField.date",["tau/core/templates-factory"],function(a){var b={name:"customField-date",markup:['<div class="ui-customfield {{if !output}}ui-customfield_empty_true{{/if}}">',"   <table>","   <tbody>","   <tr>",'<td class="ui-customfield__label">${name}</td>','<td class="ui_custom_field_value_container">','<div class="ui-customfield__value">${output}</div>',"</td>","   </tr>","   </tbody>","   </table>","</div>"]};return a.register(b)}),define("tau/components/component.customField.date",["tau/components/component.creator","tau/models/model.customField","tau/models/customField/model.customField.date.editable","tau/components/extensions/customField/extension.customField.date.editable","tau/ui/extensions/customField/ui.extension.customField.editable","tau/ui/templates/customField/ui.template.customField.date"],function(a,b,c,d,e,f){return{create:function(g){var h={ModelType:b,template:f,extensions:[c,d,e]};return a.create(h,g)}}}),define("tau/ui/behaviour/customField/ui.behaviour.customField.row",["Underscore","jQuery"],function(_,$){$.widget("ui.behaviourCustomFieldRow",{options:{onActivate:$.noop},_create:function(){var a=this.element;this.$element=a;var b=this;a.click(function(a){a.preventDefault(),b.options.onActivate.call(this,a)})},setValidationErrors:function(a){var b=this.$element;_.each(a,function(a,c){b.find("[name="+c+"]").addClass("ui-editableText-validationerror").attr("title",a)})},resetValidationErrors:function(a){this.$element.find(":text").removeClass("ui-editableText-validationerror").attr("title",null)},setValue:function(a){var b=this.$element;_.each(a,function(a,c){b.find("[name="+c+"]").val(a)})},destroy:function(){}})}),define("tau/components/extensions/customField/extension.customField.url.editable",["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/behaviour/customField/ui.behaviour.customField.row"],function(_,$,a){return a.extend({category:"edit","bus permissionsReady+afterRender":function(a){var b=this,c=a.afterRender.data.data,d=a.permissionsReady.data;if(d.editable){var e=a.afterRender.data.element,f=e.find(".ui-customfield__value");this.$widget=f,e.find(".ui-customfield__label").behaviourCustomFieldRow({}),e.addClass("ui-customfield_editable_true")}}})}),define("tau/ui/templates/customField/ui.template.customField.dropdown",["tau/core/templates-factory"],function(a){var b={name:"customField-dropdown",markup:['<div class="ui-customfield ui-customfield-dropdown {{if !value}}ui-customfield_empty_true{{/if}}">',"   <table>","   <tbody>","   <tr>",'       <td class="ui-customfield__label">${name}</td>','       <td class="ui_custom_field_value_container"><div class="ui-customfield__value">${value}</div></td>',"   </tr>","   </tbody>","   </table>","</div>"]};return a.register(b)}),define("tau/components/component.customField.dropdown",["Underscore","tau/components/component.creator","tau/models/model.customField","tau/models/model.customField.editable","tau/ui/extensions/popupEditorContainer.extension","tau/components/extensions/component.creator.extension","tau/components/extensions/customField/extension.customField.url.editable","tau/ui/extensions/customField/ui.extension.customField.editable","tau/ui/templates/customField/ui.template.customField.dropdown"],function(_,a,b,c,d,e,f,g,h){return{create:function(i){var j={ModelType:b,extensions:[c,f,g,e,{type:d,config:{onCreate:function(a){_(a.config).extend({popupEditorContainer:[{targetSelector:"tr",alignmentSelector:".ui-customfield__value",component:{type:"customField.dropdown.list"}}]})}}}],template:h};return a.create(j,i)}}}),define("tau/models/customField/model.customField.dropdown.editable",["Underscore","tau/models/model.customField.editable"],function(_,a){var b=a.extend({onInit:function(){if(this.config.data){var a=this.config.data.value,b=[];_.map(this.config.data.options,function(c){a!==c&&b.push({id:c,name:c})});var c=a?!this.config.data.required:!1;this.fire("dataBind",{states:b,nullableValue:c})}},"bus updateState":function(a){var b=null;a.data&&a.data.id&&(b=a.data.id);var c={customFields:[{name:this.config.data.name,type:this.config.data.type,value:b}]};this.fire("save",c)}});return b}),define("tau/utils/utils.textsearch",["Underscore","tau/core/class"],function(_,a){var b=a.extend({data:[],load:function(a){var b=this;_.forEach(a,function(a){a.normalizeData=b._normalize(a.data)}),this.data=a},_createRegex:function(a){var b=_.trim(a);b=b.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&"),b=b.replace(/[ ]+/g,"([-[\\]{}()*+?.,\\\\^$|#:;! ]+|\\s+|\\s+[ \\S]*?\\s+)");var c=new RegExp(b,"i");return c},_normalize:function(a){return _.trim(a)},search:function(a){var b=[],c=this._createRegex(a);return _.forEach(this.data,function(a){var d=a.normalizeData,e=d.match(c);if(e){var f={_id:a._id,data:a.data,entry:{from:e.index,len:e[0].length}};b.push(f)}}),b},match:function(a,b){var c=null,d=this._normalize(a).match(this._createRegex(b));return d&&(c={from:d.index,len:d[0].length}),c}});return b}),define("tau/ui/behaviour/common/ui.behaviour.listSelectable",["Underscore","jQuery","tau/configurator"],function(_,$,a){$.widget("ui.listSelectable",{_create:function(){},_handler:function(a){},enable:function(){if(this._enabled)return;this._enabled=!0;var b=this.element.parents(".ui-drop-down:first").find(".filter-field-wrapper :text");b.length&&b.focus();var c=this;this.reset();var d=function(a){return a++,a>=c._max&&(a=0),a},e=function(a){return a--,a<0&&(a=c._max-1),a},f=this.$items,g=this.options.className;a.getKeyBoardManager().pushHandler({handleKeyDown:function(a){var b=c._index;switch(a.keyCode){case $.ui.keyCode.DOWN:a.preventDefault(),b=d(b);break;case $.ui.keyCode.UP:a.preventDefault(),b=e(b);break;case $.ui.keyCode.ENTER:a.preventDefault();if(b<0)return;c.$items.eq(b).trigger("click")}c._index=b,c.$items.removeClass(g),b>=0&&c.$items.eq(b).addClass(g),c.$list.animate({scrollTop:c._getOffset(b)},{duration:0})}})},_getOffset:function(a){var b=this.$items.eq(a);if(b.length==0)return 0;var c=b.parents(".i-inner:first").position().top,d=b.position().top,e=b.parent("i-group");e.length&&(d+=e.position().top);var f=-c+d-this.$list.height()/2;return f},reset:function(){this.$items=this.element.find(this.options.items).filter(":visible");var a=this.element;this.$list=a,a.scrollTop(0);var b=a.height();this.step=this.$items.eq(0).height()*.5,this._index=-1,this._max=this.$items.length;var c=this.options.className;this.$items.removeClass(c)},disable:function(){if(!this._enabled)return;this._enabled=!1,a.getKeyBoardManager().popHandler()},destroy:function(){this.disable()}})}),define("tau/ui/extensions/stateList/ui.extension.stateList.editable",["Underscore","jQuery","tau/utils/utils.textsearch","tau/components/extensions/component.extension.base","tau/ui/behaviour/common/ui.behaviour.listSelectable"],function(_,$,a,b){var c=b.extend({"bus dataBind+afterRender":function(a){this.searchIndex=null;var b=this.config,c=this.element=a.afterRender.data.element,d=this.dataToBind=a.dataBind.data,e=0;_.forEach(d.states,function(a){a.items?e+=a.items.length:e++}),this.$list=c.find(".drop-down-list"),this.$options=this.$list.find(".drop-down-option"),this.$options.click($.proxy(this.onItemSelected,this)),b.hasOwnProperty("maxHeight")&&this.$list.css("max-height",b.maxHeight).css("overflow-y","auto");var f=$("<div class='drop-down-actions' />"),g=!1;if(d.hasOwnProperty("defaultValue")){g=!0;var h=this.config.defaultValueLabel||"default";$("<span class='action-link default'>"+h+"</span>").click($.proxy(this.defaultValue,this)).appendTo(f)}this.config.allowToReset=_.isUndefined(this.config.allowToReset)?!0:this.config.allowToReset;if(d.nullableValue&&this.config.allowToReset){g=!0;var i=this.config.clearValueLabel||"reset";$("<span class='action-link clear'>"+i+"</span>").click($.proxy(this.clearValue,this)).appendTo(f)}g&&f.insertBefore(this.$list);if(d.states.length===0&&d.completed){var j=b.emptyDataMessage||"None";this.$list.append("<span class='empty-message'>"+j+"</span>")}b.filter&&e>3&&(this.filterField=$("<input type='text' class='filter-field' />").keyup($.proxy(this._filterDelegate,this)),$("<div class='filter-field-wrapper'></div>").append(this.filterField).insertBefore(this.$list));if(b.expandable&&!d.completed){var k=b.mode||"short";if(k!=="full"){var l=$("<div class='drop-down-footer'></div>"),m=this.config.fullModeLabel||"more...";this.$mode=$("<div class='action-link more'>"+m+"</div>").click($.proxy(this._toggleMode,this)).appendTo(l),l.insertAfter(this.$list)}}this._resize(),this.bus.fire("listOptionsReady",{element:c}),this._createSelectable()},_createSelectable:function(){this.$list.listSelectable({items:".drop-down-option:visible",className:"drop-down-option_hover"}),this.$list.addClass("tau-dropdownlist_selectable_true")},_enableSelectable:function(){this.$list.hasClass("tau-dropdownlist_selectable_true")&&this.$list.listSelectable("enable")},_disableSelectable:function(){this.$list.hasClass("tau-dropdownlist_selectable_true")&&this.$list.listSelectable("disable")},"bus focus":function(a){this._enableSelectable()},"bus refresh":function(a){this._enableSelectable()},"bus blur":function(a){this._disableSelectable()},_resize:function(a){if(!this.element)return;var b=this.element,c=b.find(".drop-down-list");c.css("maxHeight",$(window).height()/2*.8),c.css("overflowY","auto"),c.css("overflowX","hidden")},"bus afterRender+popupResize":function(a){this._resize(a.popupResize.data)},"bus popupResize":function(a){this._resize(a.data)},_toggleMode:function(a){a.stopPropagation();var b=this.config.mode==="full"?"short":"full";this.fire("refresh",{mode:b})},clearValue:function(a){a.stopPropagation(),this._updateState(null)},defaultValue:function(a){a.stopPropagation(),this._updateState(this.dataToBind.defaultValue)},onItemSelected:function(a){var b=$(a.target).tmplItem().data;this._updateState(b.id)},_updateState:function(a){var b=!0;this.config.confirmation&&window.confirm&&(b=window.confirm(this.config.confirmation)),b&&this.fire("updateState",{id:a})},_resetList:function(){this.$options.show()},_noResults:function(a){var a='"'+a+'" not found';this.$noResults?this.$noResults.text(a):this.$noResults=$("<div class='not-found' />").text(a).insertBefore(this.$list),this.$noResults.show()},_clearNoResults:function(){this.$noResults&&this.$noResults.hide()},_filterDelegate:function(b){if(b.keyCode==jQuery.ui.keyCode.DOWN||b.keyCode==jQuery.ui.keyCode.UP||b.keyCode==jQuery.ui.keyCode.ENTER||b.keyCode==jQuery.ui.keyCode.ESCAPE)return;if(!this.searchIndex){var c=[];this.searchIndex=new a,this.$options.each(function(a,b){c.push({_id:a,data:$(b).text()}),$(this).data("text",$(b).text())}),this.searchIndex.load(c)}var d=this.filterField.val(),e=this.searchIndex.search(d);this.$options.hide();var f=this.$options;_.forEach(e,function(a){var b=f.eq(a._id),c=b.data("text")+"";c=c.substr(0,a.entry.from)+"<em>"+c.substr(a.entry.from,a.entry.len)+"</em>"+c.substr(a.entry.from+a.entry.len,c.length),b.html(c),b.show(),b.parent().show()}),f.filter(":hidden").parent().not(f.filter(":visible").parent()).hide(),d.length?e.length==0?this._noResults(d):this._clearNoResults():(this._clearNoResults(),this._resetList()),this.$list.listSelectable("reset")}});return c}),define("tau/ui/templates/state/ui.template.state.option",["tau/core/templates-factory"],function(a){var b={name:"state-option",markup:["{{if items}}",'<div class="drop-down-group i-group"><span class="i-group-name">${name}</span>','{{tmpl(items) "state-option"}}',"</div>","{{else}}",'<div role="option" class="drop-down-option" {{if description}}title="${description}"{{/if}}>${name}</div>',"{{/if}}"],dependencies:[]};return a.register(b)}),define("tau/ui/templates/state/ui.template.state-list",["tau/core/templates-factory","tau/ui/templates/state/ui.template.state.option"],function(a){var b={name:"state-list",markup:['<div class="ui-drop-down">','<div class="drop-down-list">','<div class="drop-down-list__inner i-inner">','{{tmpl(states) "state-option"}}',"</div>","</div>","</div>"],dependencies:["state-option"]};return a.register(b)}),define("tau/components/component.customField.dropdown.list",["tau/components/component.creator","tau/core/model-base","tau/models/customField/model.customField.dropdown.editable","tau/ui/extensions/stateList/ui.extension.stateList.editable","tau/ui/templates/state/ui.template.state-list"],function(a,b,c,d,e){return{create:function(f){var g={ModelType:b,extensions:[c,d],template:e};return a.create(g,f)}}}),define("tau/ui/tags/ui.tag.term",["Underscore","jQuery","tau/core/termProcessor"],function(_,$,a){return $.extend($.tmpl.tag,{term:{_default:{$1:"'type'",$2:"null"},open:["var $__t = $item;","while($__t.parent && !$__t.$tau){","$__t = $__t.parent","}","_=_.concat($__t.$tau.terms($2)[$1]);"].join("")}}),{register:function(b,c){var d=b.context?b.context.getTerms():[];c.$tau=c.$tau||{};var e=new a(d);c.$tau.terms=function(a){return e.getTerms(a)}}}}),define("tau/ui/templates/common/ui.template.entityLink",["tau/core/templates-factory","tau/ui/tags/ui.tag.term"],function(a,b){var c={tags:[b],name:"entity-link",markup:['<a href="#${__type.toLowerCase()}/${id}" class="ui-link-entity">','<em class="ui-type-icon ui-type-icon-${__type.toLowerCase()}">${id}</em>',"","</a>&nbsp;&nbsp;"],dependencies:[]};return a.register(c)}),define("tau/ui/templates/customField/ui.template.customField.entity",["tau/core/templates-factory","tau/ui/templates/common/ui.template.entityLink"],function(a){var b={name:"customField-entity",markup:['<div class="ui-customfield">',"   <table>","   <tbody>",'   <tr class="{{if !value.id }}ui-customfield_empty_true{{/if}}">','       <td class="ui-customfield__label">${name}</td>','       <td class="ui_custom_field_value_container">',"{{if  value.id }}",'{{tmpl(value) "entity-link"}}',"{{/if}}",,'&nbsp;<span class="entity-custom-field-link property-text ui-customfield__value">${value.name}</span>',,"</td>","   </tr>","   </tbody>","   </table>","</div>"],dependencies:["entity-link"]};return a.register(b)}),define("tau/models/customField/model.customField.entity.editable",["Underscore","tau/models/model.customField.editable"],function(_,a){return a.extend({"bus entitySelected":function(a){var b={},c={name:this.config.data.name,type:"Entity",value:null};b.customFields=[c];var d=a.data.entity;d&&d.id&&(c.value={id:d.id,kind:d.__type,name:d.name}),this.fire("save",{$set:b})}})}),define("tau/components/component.customField.entity",["Underscore","tau/components/component.creator","tau/components/extensions/component.creator.extension","tau/models/model.customField","tau/ui/templates/customField/ui.template.customField.entity","tau/ui/extensions/popupEditorContainer.extension","tau/models/customField/model.customField.entity.editable","tau/ui/extensions/customField/ui.extension.customField.editable"],function(_,a,b,c,d,e,f,g){return{create:function(h){var i={template:d,extensions:[f,c,e,g,b]};h=h||{};var j={type:"finder",additionalExtensions:[f],fields:["id","name",{project:["id","name","abbreviation"]}],maxHeight:400};return h.customField&&h.customField.required===!0&&(j.resetDisabled=!0),_.extend(h,{popupEditorContainer:[{targetSelector:"tr",targetCssClass:"ui-customfield_editable_true",alignmentSelector:".entity-custom-field-link",component:j}]}),a.create(i,h)}}}),define("tau/components/extensions/customField/extension.customField.multiselect.editable",["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/behaviour/customField/ui.behaviour.customField.row"],function(_,$,a){return a.extend({category:"edit","bus permissionsReady+afterRender":function(a){var b=this,c=a.afterRender.data.data,d=a.permissionsReady.data;if(d.editable){var e=a.afterRender.data.element,f=e.find(".ui-customfield__value");this.$widget=f,e.find(".ui-customfield__label").behaviourCustomFieldRow({}),e.addClass("ui-customfield_editable_true")}}})}),define("tau/ui/templates/customField/ui.template.customField.multiselect",["tau/core/templates-factory"],function(a){var b={name:"customField-multiselect",markup:['<div class="ui-customfield ui-customfield-multiselect {{if !output}}ui-customfield_empty_true{{/if}}">',"   <table>","   <tbody>","   <tr>",'       <td class="ui-customfield__label">${name}</td>','       <td class="ui_custom_field_value_container"><div class="ui-customfield__value">${output}</div></td>',"   </tr>","   </tbody>","   </table>","</div>"]};return a.register(b)}),define("tau/components/component.customField.multiselect",["Underscore","tau/components/component.creator","tau/models/model.customField","tau/models/model.customField.editable","tau/ui/extensions/popupEditorContainer.extension","tau/components/extensions/component.creator.extension","tau/components/extensions/customField/extension.customField.multiselect.editable","tau/ui/extensions/customField/ui.extension.customField.editable","tau/ui/templates/customField/ui.template.customField.multiselect"],function(_,a,b,c,d,e,f,g,h){return{create:function(i){var j={ModelType:b,extensions:[c,f,g,e,{type:d,config:{onCreate:function(a){_(a.config).extend({popupEditorContainer:[{targetSelector:"tr",alignmentSelector:".ui-customfield__value",component:{type:"customField.multiselect.list"}}]})}}}],template:h};return a.create(j,i)}}}),define("tau/models/customField/model.customField.multiselect.editable",["Underscore","tau/models/model.customField.editable"],function(_,a){var b=a.extend({onInit:function(){if(this.config.data){var a=this.config.data.value,b=[];_.map(this.config.data.options,function(c){b.push({id:c,name:c,selected:_.include(a,c)})});var c=a?!this.config.data.required&&b.length:!1;this.fire("dataBind",{states:b,nullableValue:c})}},"bus updateState":function(a){var b=null;a.data&&a.data.id&&(b=a.data.id);var c={customFields:[{name:this.config.data.name,type:this.config.data.type,value:_.toArray(b).join(",")}]};this.fire("save",c)}});return b}),define("tau/ui/extensions/stateList/ui.extension.stateList.editable.multiselect",["Underscore","jQuery","tau/ui/extensions/stateList/ui.extension.stateList.editable"],function(_,$,a){var b=a.extend({"bus dataBind+afterRender":function(a){this._super(a);var b=a.afterRender.data.element;this.$el=b,this.field=this.config.data,this._updateSave();var c=b.find("[role=action-save]"),d=this;c.click(function(a){var c=b.find("[role=option].tau-option_selected_true"),e=[];_.forEach(c,function(a){e.push($(a).tmplItem().data.id)}),d._updateState(e)});var e=b.find("[role=action-cancel]");e.click(function(a){d.fire("close")})},"bus blur":function(){this.bus.fire("close")},onItemSelected:function(a){var b=$(a.target);b.toggleClass("tau-option_selected_true"),this._updateSave()},_updateSave:function(){if(this.field.required==1){this.enabled=this.enabled||null;var a=this.$el.find("[role=option].tau-option_selected_true"),b=this.$el.find("[role=action-save]");a.length?(b.removeClass("disable"),b.removeAttr("disabled")):(b.addClass("disable"),b.attr("disabled","disabled"))}}});return b}),define("tau/ui/templates/state/ui.template.state.option.multiselect",["tau/core/templates-factory"],function(a){var b={name:"state-option-multiselect",markup:["{{if items}}",'<div class="drop-down-group i-group">','<span class="i-group-name">${name}</span>','{{tmpl(items) "state-option"}}',"</div>","{{else}}",'<div role="option" class="drop-down-option tau-option{{if selected}} tau-option_selected_true{{/if}}" {{if description}}title="${description}"{{/if}}>',"${name}","</div>","{{/if}}"],dependencies:[]};return a.register(b)}),define("tau/ui/templates/state/ui.template.state-list.multiselect",["tau/core/templates-factory","tau/ui/templates/state/ui.template.state.option.multiselect"],function(a){var b={name:"state-list-multiselect",markup:['<div class="ui-drop-down">','<div class="drop-down-list drop-down-list_type_multiselect">','<div class="drop-down-list__inner i-inner">','{{tmpl(states) "state-option-multiselect"}}',"</div>","</div>",'<div class="ui-drop-down__actions ui-form__row ui-form__row-controls button-group">','<input type="button" role="action-save" class="button" value="Save" />','<input type="button" role="action-cancel" class="button" value="Cancel" />',"</div>","</div>"],dependencies:["state-option-multiselect"]};return a.register(b)}),define("tau/components/component.customField.multiselect.list",["tau/components/component.creator","tau/models/model.customField","tau/models/customField/model.customField.multiselect.editable","tau/ui/extensions/stateList/ui.extension.stateList.editable.multiselect","tau/ui/templates/state/ui.template.state-list.multiselect"],function(a,b,c,d,e){return{create:function(f){var g={ModelType:b,extensions:[c,d],template:e};return a.create(g,f)}}}),define("tau/models/customField/model.customField.number.editable",["Underscore","tau/models/model.customField.editable","tau/utils/utils.jsonSchema"],function(_,a,b){var c=a.extend({category:"edit",name:"Editable custom field",schema:b.Schema.create({type:"object",properties:{value:{type:"number",optional:!1,minimum:0,maximum:_.MAX_INT,pre:["trim","castTolerantlyToType"],"default":0,fallbacks:{type:"setDefault"}}}}),"bus validate":function(a){var b=a.data,c=b.cmd.$set.customFields[0];this.schema.properties.value.optional=!this.config.customField.required,this.schema.properties.value.empty=!this.config.customField.empty,b.validation=this.schema.validate(c)}});return c}),define("libs/jquery/jquery.textEditor",["jQuery"],function(a){return function($,a){if(a in $)throw new Error('jQuery already has the "'+a+'" property.');var b=function(b,c){for(var d in c)b.bind(d+"."+a,c[d])},c=function(a,b){this.initElement(a),this.setOptions(b),this.bindEvents(b)};c.prototype={constructor:c,initElement:function(a){this.$element=a.addClass("editableText")},setOptions:function(a){var b=a||{};this.onSave=$.isFunction(b.onSave)?b.onSave:$.noop,this.onEditStart=$.isFunction(b.onEditStart)?b.onEditStart:$.noop,this.onEditEnd=$.isFunction(b.onEditEnd)?b.onEditEnd:$.noop,this.maxLength=b.maxLength||255,this.mask=b.mask?new RegExp(b.mask):!1,this.restoreText=typeof b.restoreText=="undefined"?!0:b.restoreText},bindEvents:function(a){a=a||{},a.resetOnBlur&&(this.onBlur=function(){this._cancelEdit()}),b(this.$element,{blur:$.proxy(this,"onBlur"),keydown:$.proxy(this,"mapKeys"),keypress:$.proxy(this,"mapKeys"),click:$.proxy(this,"onFocus")})},onFocus:function(a){a&&a.stopPropagation(),this.isActive()||(this.activate(),this.onEditStart(),this.storeInitialText())},_performSave:function(){if(!this.isActive())return;this.deactivate(),this.saveText(),this.onEditEnd()},_cancelEdit:function(){if(!this.isActive())return;this.deactivate(),this.restoreInitialText(),this.onEditEnd()},onBlur:function(){this._performSave()},onEnter:function(a){a.preventDefault(),this._performSave(),this.$element.blur()},onEscape:function(a){a.preventDefault(),this._cancelEdit(),this.$element.blur()},onKeyDefault:function(a){if(a.charCode!=0){var b=String.fromCharCode(a.charCode||a.keyCode),c=this.$element.text()+b;this.mask.test(c)||a.preventDefault()}},activate:function(){this.$element.prop("contentEditable",!0).addClass("active").focus()},deactivate:function(){this.$element.removeClass("active").removeProp("contentEditable")},isActive:function(){return this.$element.hasClass("active")},setInitialText:function(a){this.initialText=a},getInitialText:function(){return this.initialText},storeInitialText:function(){this.setInitialText(this.$element.text())},restoreInitialText:function(){this.$element.text(this.getInitialText())},trimText:function(a){return _.trim(a)},normalizeText:function(a){var b=this.trimText(a);return b.length==0&&this.restoreText===!0&&(b=this.getInitialText()),b},saveText:function(){var a=this.normalizeText(this.$element.text());this.$element.text(a),a!=this.getInitialText()&&this.onSave(a)},mapKeys:function(a){switch(a.which){case 13:this.onEnter(a);break;case 27:this.onEscape(a);break;default:a.type=="keypress"&&this.mask&&this.onKeyDefault(a)}}},$.fn[a]=function(b){return this.each(function(d,e){var f=$(e);f.data(a,new c(f,b))})},$[a]=function(b,c){return $(b)[a](c)}}(a,"textEditor"),a.fn.textEditor}),define("tau/ui/behaviour/common/ui.behaviour.editableText",["Underscore","jQuery","libs/jquery/jquery.textEditor"],function(_,$){$.widget("ui.editableText",{_create:function(){this.element.textEditor(this.options)},activate:function(){this.element.data("textEditor").isActive()?this.element.data("textEditor").onBlur():this.element.data("textEditor").onFocus()},setValidationErrors:function(a){this.element.addClass("ui-validationerror"),_.isString(a)&&this.element.attr("title",a)},resetValidationErrors:function(a){this.element.removeClass("ui-validationerror"),this.element.removeAttr("title",a)},setValue:function(a){this.element.text(a)},destroy:function(){}})}),define("tau/components/extensions/customField/extension.customField.number.editable",["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/behaviour/common/ui.behaviour.editableText"],function(_,$,a){return a.extend({category:"edit",$widget:null,fieldData:null,"bus permissionsReady+afterRender":function(a){var b=this,c=a.afterRender.data.data,d=a.permissionsReady.data;if(d.editable){var e=a.afterRender.data.element,f=e.find(".ui-customfield__value");b.$widget=f,f.editableText({mask:"^[0-9]*$",restoreText:!1,onSave:function(a){b.bus.fire("save",{customFields:[{name:c.name,type:c.type,value:a}]})}}),e.behaviourCustomFieldRow({onActivate:function(){f.editableText("activate"),f.focus()}}),e.addClass("ui-customfield_editable_true")}},"bus validate":function(){this.$widget.editableText("resetValidationErrors")},"bus afterValidate":function(a){this.$widget.editableText("setValue",a.data.validation.instance.value)},"bus validationFailed":function(a){this.$widget.editableText("setValidationErrors",a.data.validation.errors[0].description)}})}),define("tau/ui/templates/customField/ui.template.customField.text",["tau/core/templates-factory"],function(a){var b={name:"customField-text",markup:['<div class="ui-customfield  {{if !value}}ui-customfield_empty_true{{/if}}">',"   <table>","   <tbody>","   <tr>",'       <td class="ui-customfield__label">${name}</td>','       <td class="ui_custom_field_value_container"><div class="ui-customfield__value">${value}</div></td>',"   </tr>","   </tbody>","   </table>","</div>"]};return a.register(b)}),define("tau/components/component.customField.number",["tau/components/component.creator","tau/models/model.customField","tau/models/customField/model.customField.number.editable","tau/components/extensions/customField/extension.customField.number.editable","tau/ui/extensions/customField/ui.extension.customField.editable","tau/ui/templates/customField/ui.template.customField.text"],function(a,b,c,d,e,f){return{create:function(g){var h={ModelType:b,template:f,extensions:[c,d,e]};return a.create(h,g)}}}),define("tau/models/customField/model.customField.richtext.editable",["tau/models/model.customField.editable","tau/utils/utils.jsonSchema","tau/utils/utils.htmlConverter"],function(a,b,c){var d=a.extend({category:"edit",name:"Editable custom field",schema:b.Schema.create({type:"object",properties:{value:{optional:!0,empty:!0,maxLength:1e3,type:"string",pre:["trim"]}}}),"bus validate":function(a){var b=a.data,c=b.cmd.$set.customFields[0];b.validation=this.schema.validate(c)},"bus beforeSave":function(a){var b=a.data.cmd.$set,d=b.customFields[0];d.value=c.fromHtmlToSource(d.value)}});return d}),define("tau/components/extensions/customField/extension.customField.richtext.editable",["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/behaviour/common/ui.behaviour.richeditor"],function(_,$,a){return a.extend({category:"edit","bus permissionsReady+afterRender":function(a){var b=this,c=a.afterRender.data.data,d=a.permissionsReady.data;if(d.editable){var e=a.afterRender.data.element,f=e.find(".ui-customfield__value");b.$widget=f,f.richeditor({text:e.tmplItem().data.value,placeholder:{text:"Double-click to add content...",className:"ui-description__inner_empty_true"},settings:{fitImgWidth:!1,toolbar:[["Cut","Copy","Paste","PasteText","PasteFromWord","-","Bold","Italic","Underline","Strike","-","Subscript","Superscript"],["NumberedList","BulletedList","-","Outdent","Indent"],["JustifyLeft","JustifyCenter","JustifyRight"],["Link","Unlink","Anchor"],["Image","Table","HorizontalRule","SpecialChar"],"/",["Source","Format","Font","FontSize"],["Replace","-","RemoveFormat","TextColor","BGColor","-","Templates"],["Maximize"]],extraPlugins:"autogrow,charcount",charcount_limit:1e3},onSave:function(a){b.bus.fire("save",{customFields:[{name:c.name,type:c.type,value:a}]})}})}},"bus validate":function(){this.$widget.richeditor("resetValidationErrors")},"bus afterValidate":function(a){this.$widget.richeditor("setValue",a.data.validation.instance.value)},"bus validationFailed":function(a){this.$widget.richeditor("setValidationErrors",a.data.validation.errors[0].description)}})}),define("tau/ui/templates/customField/ui.template.customField.richtext",["tau/core/templates-factory"],function(a){var b={name:"customField-richtext",markup:['<div class="ui-customfield ui-customfield-richtext">','   <div class="ui-customfield__value value">{{html value}}</div>',"</div>"]};return a.register(b)}),define("tau/ui/extensions/ui.extension.content.imagePreview",["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/configurator"],function(_,$,a,b){return a.extend({category:"edit","bus afterRender":function(a){var b=this,c=a.data,d=c.element,e=this.config.imagePreviewContentSelector,f=d.find(e).find("img");if(f.size()>0)var g=setInterval(function(){$.contains(document.body,d[0])&&(clearInterval(g),b.onDOMReady(d))},1e3)},onDOMReady:function(a){var b=this,c=this.config.imagePreviewContentSelector,d=a.find(c).find("img"),e=a.width();for(var f=0,g=d.size();f<g;f++){var h=d.eq(f),i=parseInt(h[0].style.width);if(i>e){var j=$('<div class="tau-lightbox-container"></div>'),k=$('<a rel="lightbox" class="tau-lightbox-full-size">View Full Size</a>');k.attr("href",h.attr("src")),k.click($.proxy(b.pushEscapeHandler,b)),j.append(h.clone()).append(k),h.replaceWith(j)}}},pushEscapeHandler:function(){var a=this,c=b.getKeyBoardManager();c.pushHandler({handleKeyDown:function(b){b.keyCode==$.ui.keyCode.ESCAPE&&a.popHandler()}}),$("body").find("#ux-lightbox-overlay").bind("click",a.popHandler)},popHandler:function(){var a=this;b.getKeyBoardManager().popHandler(),$("body").find("#ux-lightbox-overlay").unbind("click",a.popHandler)}})}),define("tau/components/component.customField.richtext",["tau/components/component.creator","tau/models/model.customField","tau/models/customField/model.customField.richtext.editable","tau/components/extensions/customField/extension.customField.richtext.editable","tau/ui/extensions/customField/ui.extension.customField.editable","tau/ui/templates/customField/ui.template.customField.richtext","tau/ui/extensions/ui.extension.shortcutProcessor","tau/ui/extensions/ui.extension.content.imagePreview"],function(a,b,c,d,e,f,g,h){return{create:function(i){var j={ModelType:b,template:f,extensions:[c,d,e,h,g]};return i.shortcutProcessorTarget=".ui-customfield__value.value",i.imagePreviewContentSelector=".ui-customfield__value.value",a.create(j,i)}}}),define("tau/models/customField/model.customField.text.editable",["tau/models/model.customField.editable","tau/utils/utils.jsonSchema"],function(a,b){var c=a.extend({category:"edit",name:"Editable custom field",schema:b.Schema.create({type:"object",properties:{value:{type:"string",optional:!0,maxLength:50,minLength:0,pre:["trim"]}}}),"bus validate":function(a){var b=a.data,c=b.cmd.$set.customFields[0];this.schema.properties.value.optional=!this.config.customField.required,this.schema.properties.value.empty=!this.config.customField.required,b.validation=this.schema.validate(c)}});return c}),define("tau/components/extensions/customField/extension.customField.text.editable",["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/behaviour/customField/ui.behaviour.customField.row"],function(_,$,a){return a.extend({category:"edit","bus permissionsReady+afterRender":function(a){var b=this,c=a.afterRender.data.data,d=a.permissionsReady.data;if(d.editable){var e=a.afterRender.data.element,f=e.find(".ui-customfield__value");b.$widget=f,f.editableText({restoreText:!1,onSave:function(a){b.bus.fire("save",{customFields:[{name:c.name,type:c.type,value:a}]})}}),e.behaviourCustomFieldRow({onActivate:function(){f.editableText("activate"),f.focus()}}),e.addClass("ui-customfield_editable_true")}},"bus validate":function(){this.$widget.editableText("resetValidationErrors")},"bus afterValidate":function(a){this.$widget.editableText("setValue",a.data.validation.instance.value)},"bus validationFailed":function(a){this.$widget.editableText("setValidationErrors",a.data.validation.errors[0].description)}})}),define("tau/components/component.customField.text",["tau/components/component.creator","tau/models/model.customField","tau/models/customField/model.customField.text.editable","tau/components/extensions/customField/extension.customField.text.editable","tau/ui/extensions/customField/ui.extension.customField.editable","tau/ui/templates/customField/ui.template.customField.text"],function(a,b,c,d,e,f){return{create:function(g){var h={ModelType:b,template:f,extensions:[c,d,e]};return a.create(h,g)}}}),define("tau/models/customField/model.customField.url.editable",["tau/models/model.customField.editable","tau/utils/utils.jsonSchema"],function(a,b){var c=a.extend({category:"edit",name:"Editable custom field",schema:b.Schema.create({type:"object",properties:{value:{type:"object",optional:!1,properties:{label:{type:"string",optional:!1,maxLength:30,pre:["trim"]},url:{type:"string",optional:!1,pattern:b.PATTERN_URL,pre:["trim",function(a){return a.length==0&&this.schema.optional&&(this._wasError=1),a}]}},post:function(a){if(a.label==0||a.url==0)a={label:null,url:null};return a}}}}),"bus validate":function(a){var b=a.data,c=b.cmd.$set.customFields[0],d=this.config.customField||this.config.data;this.schema.properties.value.properties.label.optional=!d.required,this.schema.properties.value.properties.label.empty=!d.required,this.schema.properties.value.properties.url.optional=!d.required,this.schema.properties.value.properties.url.empty=!d.required,b.validation=this.schema.validate(c),delete b.validation.instance.value.__id}});return c}),define("tau/models/customField/model.customField.url.editable.editor",["tau/models/customField/model.customField.url.editable"],function(a,b){var c=a.extend({onInit:function(){this.beforeSaveHandler=!0,this.afterSaveHandler=!0,this.config.data&&this.fire("dataBind",this.config.data)}});return c}),define("tau/ui/behaviour/customField/ui.behaviour.customField.url.editor",["Underscore","jQuery"],function(_,$){$.widget("ui.behaviourUrlEditor",{options:{onSave:$.noop},_create:function(){var a=this.element;this.$element=a;var b=this;a.find(":button:first").click(function(a){a.preventDefault(),_.bind(b._save,b)()}),a.find(":input").keyup(function(a){a.keyCode==jQuery.ui.keyCode.ENTER&&(a.preventDefault(),_.bind(b._save,b)())})},_save:function(){var a=this.element;this.options.onSave({url:a.find("[name=url]").val(),label:a.find("[name=label]").val()})},setValidationErrors:function(a){var b=this.$element;_.each(a,function(a,c){b.find("[name="+c+"]").addClass("ui-validationerror").attr("title",a)})},resetValidationErrors:function(a){this.$element.find(":text").removeClass("ui-validationerror").attr("title",null)},setValue:function(a){var b=this.$element;_.each(a,function(a,c){b.find("[name="+c+"]").val(a)})},destroy:function(){}})}),define("tau/components/extensions/customField/extension.customField.url.editor",["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/behaviour/customField/ui.behaviour.customField.url.editor"],function(_,$,a){return a.extend({category:"edit","bus dataBind+afterRender":function(a){var b=this,c=a.dataBind.data,d=a.afterRender.data.element;this.$widget=d,d.find("[name=url]").val(c.value.url),d.find("[name=label]").val(c.value.label),d.behaviourUrlEditor({onSave:function(a){b.bus.fire("save",{customFields:[{name:c.name,type:"URL",value:a}]})}}),d.find(":button:eq(1)").click(function(){b.bus.fire("reset")})},"bus validate":function(){this.$widget.behaviourUrlEditor("resetValidationErrors")},"bus afterValidate":function(a){this.$widget.behaviourUrlEditor("setValue",a.data.validation.instance.value)},"bus validationFailed":function(a){var b={};_.each(a.data.validation.errors,function(a){_.each(["url","label"],function(c){_.indexOf(a.path,c)!==-1&&(b[c]=a.description)})}),this.$widget.behaviourUrlEditor("setValidationErrors",b)}})}),define("tau/ui/templates/customField/ui.template.customField.url.editor",["tau/core/templates-factory"],function(a){var b={name:"customField-url-editor",markup:['<div class="ui-form">','   <div class="ui-form__row"><label for="url">Url</label><input type="text" name="url" /></div>','   <div class="ui-form__row"><label for="label">Description</label><input type="text" name="label" /></div>','   <div class="ui-form__row ui-form__row-controls button-group"><input type="button" value="save" class="button" /><input type="button" value="cancel" class="button" /></div>',"</div>"]};return a.register(b)}),define("tau/components/component.customField.url.editor",["tau/components/component.creator","tau/models/model.customField","tau/models/customField/model.customField.url.editable.editor","tau/components/extensions/customField/extension.customField.url.editor","tau/ui/templates/customField/ui.template.customField.url.editor"],function(a,b,c,d,e){return{create:function(f){var g={extensions:[b,c,d],template:e};return a.create(g,f)}}}),define("tau/models/customField/model.customField.url.editable.row",["tau/models/customField/model.customField.url.editable"],function(a,b){var c=a.extend({onInit:function(){var a=this,b=this.config.context,c=b.entity.entityType.name},"bus afterSaveToStore":function(){this.bus.fire("refreshRow",{})}});return c}),define("tau/ui/templates/customField/ui.template.customField.url",["tau/core/templates-factory"],function(a){var b={name:"customField-url",markup:['<div class="ui-customfield ui-customfield-url {{if !value.url}}ui-customfield_empty_true{{/if}}">',"   <table>","   <tbody>","   <tr>",'       <td class="ui-customfield__label">${name}</td>','       <td class="ui_custom_field_value_container">','           <span class="ui-customfield__value popup-target">${value.label}</span>',"           {{if value.label}}",'               <a class="ui-customfield__value-url external-view south url" href="${value.url}" title="${value.url}" target="_blank"></a>',"           {{/if}}","       </td>","   </tr>","   </tbody>","   </table>","</div>"]};return a.register(b)}),define("tau/components/component.customField.url",["Underscore","tau/components/component.creator","tau/models/model.customField","tau/models/customField/model.customField.url.editable.row","tau/components/extensions/customField/extension.customField.url.editable","tau/ui/extensions/customField/ui.extension.customField.editable","tau/ui/extensions/popupEditorContainer.extension","tau/components/extensions/component.creator.extension","tau/ui/templates/customField/ui.template.customField.url"],function(_,a,b,c,d,e,f,g,h){return{create:function(i){var j={extensions:[b,c,d,e,g,{type:f,config:{onCreate:function(a){_(a.config).extend({popupEditorContainer:[{targetSelector:"tr",alignmentSelector:".ui-customfield__value",component:{type:"customField.url.editor"}}]})}}}],template:h};return a.create(j,i)}}}),define("tau/ui/templates/diagnostics/ui.template.diagnostics.globalListeners.details",["tau/core/templates-factory"],function(a){var b={name:"diagnostics.globalListeners.details",markup:['<span class="tau-global-listener ui-link">${name}</span><br/>'],dependencies:[]};return a.register(b)}),define("tau/ui/templates/diagnostics/ui.template.diagnostics.globalListeners",["tau/core/templates-factory","tau/ui/templates/diagnostics/ui.template.diagnostics.globalListeners.details"],function(a){var b={name:"diagnostics.globalListeners",markup:['<div class="tau-diagnostics-globalListeners">',,"<table>",'{{each data}}<tr class="tau-diagnostics-row"><td>${count}</td><td>${name}</td><td>{{tmpl(listeners) "diagnostics.globalListeners.details"}}</td></tr>{{/each}}',"</table>","</div>"],dependencies:["diagnostics.globalListeners.details"]};return a.register(b)}),define("tau/components/extensions/diagnostics/extension.diagnostics.base",["jQuery","Underscore","tau/configurator","tau/core/bus.reg","tau/components/extensions/component.extension.base"],function($,_,a,b,c){var d=c.extend({init:function(a){this._super(a)},_getData:function(){var c=0,d=_.values(a.getProxy().__subscriptions);return _.each(d,function(a){if(_.isObject(a)){var b=_.values(a);_.each(b,function(a){_.isObject(a)&&(c+=_(a).values().length)})}}),{countOfBuses:b.count(),globalBusListeners:a.getGlobalBus().getListenersCount(),storeListeners:c}},"bus beforeInit":function(){var a=this;a.fire("dataBind",a._getData())},signUp:function(){var c=["create","destroy"],d=["initialize","refresh","afterStoreOn","afterStoreUnbind"],e=this,f=function(a){e.refreshStats()};_.each(c,function(a){b.on(a,f,e)}),_.each(d,function(b){a.getGlobalBus().on(b,f,e,null,1e3)})},startMonitoringWithOutRefresh:function(){if(this.monitoringStarted)return;this.monitoringStarted=!0,this.signUp()},startMonitoring:function(){this.startMonitoringWithOutRefresh(),this.refreshStats()},"bus afterRender":function(){var b=this,c=this.config.startMonitoringConfig||{name:/(application|entity component)/,events:["afterRender"]},d=a.getGlobalBus(),e=function(a){a.caller.name.match(c.name)&&(_.each(c.events,function(a){d.removeAllListeners(b)}),b.startMonitoring())};_.each(c.events,function(a){d.on(a,e,b)})},refreshStats:function(){this.fire("refreshData",this._getData())},"bus destroy":function(){a.getGlobalBus().removeAllListeners(this),b.removeAllListeners(this)}});return d}),define("tau/components/component.diagnostics.globalListeners",["jQuery","Underscore","tau/configurator","tau/core/bus.reg","tau/components/component.creator","tau/ui/templates/diagnostics/ui.template.diagnostics.globalListeners","tau/components/extensions/diagnostics/extension.diagnostics.base"],function($,_,a,b,c,d,e){return{create:function(b){var f=e.extend({_getData:function(){return this.startMonitoringWithOutRefresh(),{data:a.getGlobalBus().getListeners()}},_onDetailsClick:function(){var a=$(this).tmplItem().data.item;console.log(a.fn.toString()),console.log(a.fn)},_signUpOnClick:function(a){$(".tau-global-listener",a.data.element).click(this._onDetailsClick)},"bus elementRefreshedWithData":function(a){this._signUpOnClick(a)},"bus afterRender":function(a){this._signUpOnClick(a)}}),g={extensions:[f],template:d};return c.create(g,b)}}}),define("tau/ui/templates/diagnostics/ui.template.diagnostics",["tau/core/templates-factory"],function(a){var b={name:"diagnostics",markup:['<div class="tau-diagnostics-box">',,'<span class="ui-diag-label">Buses</span><span class="ui-diag-quantity">${countOfBuses}</span>','<span class="ui-diag-label">GB</span><span class="ui-diag-quantity">${globalBusListeners}</span>','<span class="ui-diag-label">Store</span><span class="ui-diag-quantity">${storeListeners}</span>',"</div>"],dependencies:[]};return a.register(b)}),define("tau/components/component.diagnostics",["tau/components/component.creator","tau/ui/templates/diagnostics/ui.template.diagnostics","tau/components/extensions/diagnostics/extension.diagnostics.base"],function(a,b,c){return{create:function(d){var e={extensions:[c],template:b};return a.create(e,d)}}}),define("tau/ui/templates/diagnostics/ui.template.diagnostics.storeListeners.details",["tau/core/templates-factory"],function(a){var b={name:"diagnostics.storeListeners.details",markup:['<span class="tau-store-listener ui-link">${name}</span><br/>'],dependencies:[]};return a.register(b)}),define("tau/ui/templates/diagnostics/ui.template.diagnostics.store",["tau/core/templates-factory","tau/ui/templates/diagnostics/ui.template.diagnostics.storeListeners.details"],function(a){var b={name:"diagnostics.storeListeners",markup:['<div class="tau-diagnostics-storeListeners">',,"<table>",'{{each data}}<tr class="tau-diagnostics-row"><td>${items.length}</td><td>${name}</td><td>{{tmpl(items) "diagnostics.storeListeners.details"}}</td></tr>{{/each}}',"</table>","</div>"],dependencies:["diagnostics.storeListeners.details"]};return a.register(b)}),define("tau/components/component.diagnostics.store",["jQuery","Underscore","tau/configurator","tau/core/bus.reg","tau/components/component.creator","tau/ui/templates/diagnostics/ui.template.diagnostics.store","tau/components/extensions/diagnostics/extension.diagnostics.base"],function($,_,a,b,c,d,e){return{create:function(b){var f=e.extend({_getData:function(){this.startMonitoringWithOutRefresh();var b=0,c=_.values(a.getProxy().__subscriptions),d={};return _.each(c,function(a){if(_.isObject(a)){var b=_.values(a);_.each(b,function(a){if(_.isObject(a)){var b=_(a).values();_.each(b,function(a){var b=a.config.eventName+"["+a.config.type+"]";d.hasOwnProperty(b)||(d[b]={name:b,items:[]});var c="unknown";a.config.listener&&a.config.listener.name&&(c=a.config.listener.name),a.config.listener&&a.config.listener.bus&&a.config.listener.bus.name&&(c=a.config.listener.bus.name),d[b].items.push({name:c,sub:a})})}})}}),{data:_.values(d)}},_onDetailsClick:function(){var a=$(this).tmplItem().data.sub;console.log(a.callback.toString()),console.log(a)},_signUpOnClick:function(a){$(".tau-store-listener",a.data.element).click(this._onDetailsClick)},"bus elementRefreshedWithData":function(a){this._signUpOnClick(a)},"bus afterRender":function(a){this._signUpOnClick(a)}}),g={extensions:[f],template:d};return c.create(g,b)}}}),define("tau/models/model.duplicateBugList",["Underscore","tau/core/model-base"],function(_,a){var b=a.extend({_retrieveEntity:function(){var a=this.config.context,b=a.entity.entityType.name,c=a.entity.id,d={id:c,fields:["id"]};this.store.get(b,d,{scope:this,success:this.onEntityRetrieved}).done()},convertServerDataModelData:function(a){return{__type:a.__type,id:a.id,name:a.name,state:{name:a.entityState.name}}},onEntityRetrieved:function(a){this.fire("registerStoreRequest"),this.fire("commitTransaction")},"bus duplicateBugRetrieved":function(a){var b=a.data.items,c=_.map(b,this.convertServerDataModelData,this);c=_.compact(c);var d={items:c};this.bus.fire("dataBind",d)},onInit:function(){this._retrieveEntity()}});return b}),define("tau/models/model.duplicateBugRetriever",["Underscore","tau/core/model-base"],function(_,a){var b=a.extend({init:function(){this._super.apply(this,arguments)},convertServerDataModelData:function(a){return{__type:a.__type,id:a.id,name:a.name,state:{name:a.entityState.name}}},"bus registerStoreRequest":function(){var a=this.config.context,b=a.entity.entityType.name,c=a.entity.id,d={fields:["id","name",{entityState:["name"]}],$query:{tags:{$contains:"duplicateOf#"+c}}};this.fire("find",{type:b,query:d,callback:{scope:this,success:this.onDuplicateBugsRetrieved}})},onDuplicateBugsRetrieved:function(a){var b=_.sortBy(a.data,function(a){return a.id}),c={items:b};this.fire("duplicateBugRetrieved",c)}});return b}),define("tau/components/extensions/duplicateBugList/extension.duplicateBugList.visibilityController",["jQuery","tau/components/extensions/component.extension.base"],function(jQuery,a){return a.extend({"bus afterRender":function(a){a.data.element.hide()},"bus afterRender+duplicateBugCountRetrieved":function(a){if(a.duplicateBugCountRetrieved.data.count>0){var b=a.afterRender.data.element;this.config.disableAnimation?b.show():b.slideDown("slow")}}})}),define("tau/models/model.duplicateBugCountCalculator",["tau/models/model.duplicateBugList"],function(a){var b=a.extend({"bus duplicateBugRetrieved":function(a){var b=a.data.items;this.fire("duplicateBugCountRetrieved",{count:b.length})}});return b}),define("tau/models/model.extensions",["Underscore"],function(_){var a=function(a,b){var c=this,d=c.config.context,e=d.entity.entityType.name,f=[];for(var g=0;g<a.length;g++)f.push(a[g]);var h={id:d.entity.id,fields:a},i={innerCallback:function(a){var c=a.data,d=0;for(var e=0;e<f.length;e++)d+=c[f[e]];b.callback.call(b.scope,{count:d})}};c.store.get(e,h,{success:i.innerCallback,scope:i}).done()};return{calculateTagsCount:function(b){a.call(this,["tags-count"],b)},calculateBugsAndTasksCount:function(b){var c=[];this.config.context.isPracticeAvailable("Planning")&&c.push("tasks-count"),this.config.context.isPracticeAvailable("Bug Tracking")&&c.push("bugs-count"),a.call(this,c,b)},calculateTasksCount:function(b){a.call(this,["tasks-count"],b)},calculateBugsCount:function(b){a.call(this,["bugs-count"],b)},calculateUserStoriesAndBugsCount:function(b){var c=[];c.push("userStories-count"),this.config.context.isPracticeAvailable("Bug Tracking")&&c.push("bugs-count"),a.call(this,c,b)},calculateIterationsCount:function(b){a.call(this,["iterations-count"],b)},calculateReleasesCount:function(b){a.call(this,["releases-count"],b)},calculateFeaturesCount:function(b){a.call(this,["features-count"],b)},calculateRequestsCount:function(b){a.call(this,["requests-count"],b)},calculateImpedimentsCount:function(b){a.call(this,["impediments-count"],b)},calculateTimesCount:function(b){a.call(this,["times-count"],b)},calculateAttachmentsCount:function(b){a.call(this,["attachments-count"],b)},calculateCommentsCount:function(b){a.call(this,["comments-count"],b)},calculateTesCasesCount:function(b){a.call(this,["testCases-count"],b)},calculateTestPlanRunsCount:function(b){a.call(this,["testPlanRuns-count"],b)},calculateUserStoriesCount:function(b){a.call(this,["userStories-count"],b)},calculateTestCaseRunsCount:function(b){a.call(this,["testCaseRuns-count"],b)},calculateRelatedEntitiesCount:function(b){a.call(this,["relatedEntities-count"],b)},calculateRequestersCount:function(b){a.call(this,["requesters-count"],b)}}}),define("tau/ui/extensions/ui.extensions.onMarkAsDuplicate",["tau/components/extensions/component.extension.base"],function(a){return a.extend({init:function(){this._super.apply(this,arguments),this.bus.getGlobalBus().on("bugWasMarkedAsDuplicate",this.onBugWasMarkedAsDuplicate,this)},destroy:function(){this.bus.getGlobalBus().removeListener("bugWasMarkedAsDuplicate",this.onBugWasMarkedAsDuplicate,this),this._super.apply(this,arguments)},onBugWasMarkedAsDuplicate:function(a){var b=this.config?this.config.context.entity.id:null;if(b==a.data.duplicateBugId||b==a.data.bugId)this.fire("evict"),this.fire("refresh")}})}),define("tau/components/component.duplicateBugListPanel",["Underscore","tau/components/component.collapsible","tau/components/extensions/duplicateBugList/extension.duplicateBugList.visibilityController","tau/models/model.duplicateBugCountCalculator","tau/models/model.duplicateBugRetriever","tau/models/model.extensions","tau/models/assignmentsList/extension.model.store.operations","tau/ui/extensions/ui.extensions.onMarkAsDuplicate"],function(_,a,b,c,d,e,f,g){return{create:function(e){return e=e||{},_.extend(e,{collapsed:!0,header:[{type:"label.duplicateBugCount"}],items:[{type:"duplicateBugList"}],extensions:[b,c,d,f,g]}),a.create(e)}}}),define("tau/components/extensions/bubble/extensions.bubble.creator",["tau/components/extensions/component.extension.base","tau/ui/behaviour/common/ui.behaviour.tauBubble"],function(a,b){return a.extend({category:"edit",initBubble:function(a){var c=this;c.destroyContainer();var d=a.target;d.addClass("tau-bubble-target");var e=a.alignTo;if(!e||!e.length)e=d;e.addClass&&e.addClass("ui-link");var f=function(){c.initializeContainer(a.target,this.$popup,a.componentsConfig)};this.target=d,b.call(d,{alignTo:e,onShow:f})},destroy:function(){this.destroyContainer(),this._super()},destroyContainer:function(){this.container&&(this.container.destroy(),delete this.container)},"bus initBubble":function(a){this.initBubble(a.data)},"bus toggleBubble":function(){b.call(this.target,"toggle")},initializeContainer:function(a,b,c){var d=this,e=b.find(".tau-bubble__inner");d.$popupInner=e,d.$target=a;if(a.data("bubbleLoaded")===!0)return;e.find("div.ui-loading-message").remove(),e.append("<div class='ui-loading-message'>Loading...</div>"),d.createComponents(c,function(b){var c=d.container=b[0].component;c.on("afterRender",function(b){e.find(".ui-loading-message").remove();var d=b.data.element;d.appendTo(e),a.data("bubbleLoaded",!0),b.removeListener(),a.tauBubble("adjustPosition"),a.tauBubble("adjustPositionStart"),a.tauBubble("adjustPosition"),a.bind("close",function(){c.fire("blur",{})}),a.bind("externalClose",function(){c.fire("blur",{})}),a.bind("show.before",function(){c.fire("focus.before",{})}),a.bind("show",function(){c.fire("focus",{}),c.fire("popupResize",a.tauBubble("getMaxSize")),a.tauBubble("adjustPosition")}),c.fire("popupResize",a.tauBubble("getMaxSize")),a.tauBubble("adjustPosition"),setTimeout(function(){a.tauBubble("adjustPosition")},10),setTimeout(function(){c.fire("focus",{})},500)}),c.initialize();var f=function(){a.data("bubbleLoaded",!1),a.tauBubble("empty")},g=function(){a.tauBubble("destroy"),d.destroyContainer()};c.on("beforeSave",f),c.on("beforeRemove",f),c.on("reset",g),c.on("afterSave",g),c.on("afterRemove",g)})}})}),define("tau/utils/utils.urlBuilder",["Underscore","tau/configurator"],function(_,a){return{getViewUrl:function(b){return a.getApplicationPath()+"/View.aspx?noRedirect=1&id="+b},getAddImpedimentUrl:function(b){return a.getApplicationPath()+"/Project/Tracking/Impediment/Edit.aspx?AssignableID="+b},getAddTimeUrl:function(b){return a.getApplicationPath()+"/Project/Tracking/Time/Edit.aspx?AssignableID="+b},getAddTaskForUserStoryUrl:function(b){return a.getApplicationPath()+"/Project/Planning/Task/Edit.aspx?UserStoryID="+b},getAddTaskForRequestUrl:function(b){return a.getApplicationPath()+"/Project/Planning/Task/Edit.aspx?RequestID="+b},getSplitForUserStoryUrl:function(a,b){return"/Project/Planning/UserStory/Split.aspx?UserStoryID="+a+"&SplittedStoryID="+b},getAddBugForUserStoryUrl:function(b){return a.getApplicationPath()+"/Project/QA/Bug/Edit.aspx?UserStoryID="+b},getAddBugForRequestUrl:function(b){return a.getApplicationPath()+"/Project/QA/Bug/Edit.aspx?RequestID="+b},getAddTestCaseForUserStoryUrl:function(b){return a.getApplicationPath()+"/Project/QA/TestCase/Edit.aspx?UserStoryID="+b},getAssignTestCasesForTestPlanUrl:function(b){return a.getApplicationPath()+"/Project/QA/TestPlan/AssignTestCases.aspx?TestPlanID="+b},getAddTestRunForTestPlanUrl:function(b){return a.getApplicationPath()+"/Project/QA/TestPlanRun/Edit.aspx?TestPlanID="+b},getAddUserStoryForRequestUrl:function(b){return a.getApplicationPath()+"/Project/Planning/UserStory/Edit.aspx?RequestID="+b},getAddUserStoryForFeatureUrl:function(b){return a.getApplicationPath()+"/Project/Planning/UserStory/Edit.aspx?FeatureID="+b},getAddUserStoryForIterationUrl:function(b){return a.getApplicationPath()+"/Project/Planning/UserStory/Edit.aspx?IterationID="+b},getAddFeatureForRequestUrl:function(b){return a.getApplicationPath()+"/Project/Planning/Feature/Edit.aspx?RequestID="+b},getAddTestCaseForTestPlanRunUrl:function(b){return a.getApplicationPath()+"/Project/QA/TestPlan/AssignTestCases.aspx?TestPlanID="+b},getAddIterationForReleaseUrl:function(b){return a.getApplicationPath()+"/Project/Planning/Iteration/Edit.aspx?ReleaseID="+b},getPrintUrl:function(b,c){return a.getApplicationPath()+"/RestUI/Print.aspx?id="+b+"&type=Tp.BusinessObjects."+c},getPrintUrlRelative:function(b,c){return"RestUI/Print.aspx?acid="+a.getCurrentAcid()+"#"+c.toLowerCase()+"/"+b+"/print"},getEditUrl:function(b,c){var d=a.getApplicationPath()+"/",e=c.toLowerCase();return e=="project"?d+="EditProject.aspx?ProjectID="+b:(d+="Project/",_.indexOf(["bug","testplan","testcase","testplanrun"],e)>-1?d+="QA/":_.indexOf(["impediment"],e)>-1?d+="Tracking/":_.indexOf(["request"],e)>-1?d+="HelpDesk/":e==="time"?d+="Tracking/":d+="Planning/",d+=c+"/Edit.aspx?"+c+"ID="+b),d},getAvatarUrl:function(b,c){return a.getApplicationPath()+"/Avatar.ashx?UserId="+b+"&size="+c},getUserUrl:function(b,c){var d="/User/View.aspx?UserID=";return c&&c=="Requester"&&(d="/User/Requester/View.aspx?RequesterID="),[a.getApplicationPath(),d,b].join("")}}}),define("tau/components/extensions/comments/extensions.comments.refresher",["tau/components/extensions/component.extension.base"],function(a){return a.extend({init:function(){this._super.apply(this,arguments),this.bus.getGlobalBus().on("bugWasMarkedAsDuplicate",this.onBugWasMarkedAsDuplicate,this)},destroy:function(){this.bus.getGlobalBus().removeListener("bugWasMarkedAsDuplicate",this.onBugWasMarkedAsDuplicate,this),this._super.apply(this,arguments)},refresh:function(){var a=this.config.context.entity;this.config.store.evictProperties(a.id,a.entityType.name,["comments"]),this.fire("refresh")},onBugWasMarkedAsDuplicate:function(a){var b=this.config.context.entity.id;(b===a.data.bugId||b===a.data.duplicateBugId)&&this.refresh()}})}),define("tau/configurations/base.container.config",["Underscore","tau/core/class","tau/core/termProcessor","tau/utils/utils.urlBuilder","tau/components/extensions/comments/extensions.comments.refresher"],function(_,a,b,c,d){var e=a.extend({init:function(a){var e=a.context.getTerms();this.termProcessor=new b(e),this.collections={};var f=a.context.entity;this.registerAction("Old View",{label:"Old View",url:c.getViewUrl(f.id)}),this.registerAction("Old Edit",{label:"Old Edit",url:c.getEditUrl(f.id,f.entityType.name)}),this.registerAction("Print",{label:"Print View",command:function(a){a.redirectTo(c.getPrintUrlRelative(f.id,f.entityType.name),"_blank")}}),this.registerAction("-----","-----"),this.registerAction("Delete",{label:"Delete",confirmation:"Are you sure?",command:function(a){a.removeEntity()},className:"ui-menu__item-action-delete"}),this.registerAction("Move or Copy",{label:"Move or Copy",command:function(a){a.moveOrCopy()}}),this.registerAction("Convert",{label:"Convert",command:function(a){a.convert()}}),this.registerAction("Attach to Request",{label:"Attach To "+this.getTermName("Request"),command:function(a){a.attachToRequest()},editions:["Pro"]}),this.registerAction("Add Impediment",{label:"Add "+this.getTermName("Impediment"),url:c.getAddImpedimentUrl(f.id)}),this.registerAdditionalInfoItem("Owner",{label:{type:"label",text:"Owner"},field:{type:"property.owner"}}),this.registerAdditionalInfoItem("Assigned Effort",{label:{type:"label",text:"Assigned Effort"},field:{type:"assignedEffort"}}),this.registerAdditionalInfoItem("Release Assigned Effort",{label:{type:"label",text:"Assigned Effort"},field:{type:"release.assignedEffort"}}),this.registerAdditionalInfoItem("Velocity",{label:{type:"label",text:"Velocity"},field:{type:"property.velocity"}}),this.registerAdditionalInfoItem("State",{label:{type:"label",text:"State"},field:{type:"property.entityState"}}),this.registerAdditionalInfoItem("Test Plan",{label:{type:"label",text:this.getTermName("TestPlan")},field:{type:"property.testPlan"}}),this.registerAdditionalInfoItem("Responsible",{label:{type:"label",text:"Responsible"},field:{type:"property.responsible"}}),this.registerAdditionalInfoItem("IsPrivate",{label:{type:"label",text:"Private?"},field:{type:"property.isPrivate"}}),this.registerAdditionalInfoItem("LastFailureComment",{label:{type:"label",text:"Last Failure Comment"},field:{type:"property.lastFailureComment"}}),this.registerAdditionalInfoItem("Release",{label:{type:"label",text:this.getTermName("Release")},field:{type:"property.release"},practices:["Planning"]}),this.registerAdditionalInfoItem("ImpedimentDate",{label:{type:"label",text:"Creation Date"},field:{type:"property.impedimentDate"}}),this.registerAdditionalInfoItem("CreationDate",{label:{type:"label",text:"Creation Date"},field:{type:"property.createDate"}}),this.registerAdditionalInfoItem("FinishDate",{label:{type:"label",text:"Finish  Date"},field:{type:"property.completeDate",editable:!0}}),this.registerAdditionalInfoItem("StartDate",{label:{type:"label",text:"Start Date"},field:{type:"property.startDate",editable:!0}}),this.registerAdditionalInfoItem("ResolvedOn",{label:{type:"label",text:"Resolved On"},field:{type:"property.completeDate"}}),this.registerAdditionalInfoItem("CompletionDate",{label:{type:"label",text:"Completion  Date"},field:{type:"property.completeDate"}}),this.registerAdditionalInfoItem("Iteration",{label:{type:"label",text:this.getTermName("Iteration")},field:{type:"property.iteration"},practices:["Iterations"]}),this.registerAdditionalInfoItem("Project",{label:{type:"label",text:this.getTermName("Project")},field:{type:"property.project"}}),this.registerAdditionalInfoItem("Priority",{label:{type:"label",text:this.getTermName("Priority")},field:{type:"property.priority"},practices:["Planning"]}),this.registerAdditionalInfoItem("Business Value",{label:{type:"label",text:"Business Value"},field:{type:"property.priority"},practices:["Planning"]}),this.registerAdditionalInfoItem("Initial Estimate",{label:{type:"label",text:"Initial Estimate"},field:{type:"property.initialEstimate"},practices:["Planning"]}),this.registerAdditionalInfoItem("Feature",{label:{type:"label",text:this.getTermName("Feature")},field:{type:"property.feature"},practices:["Requirements"]}),this.registerAdditionalInfoItem("User Story",{label:{type:"label",text:this.getTermName("userStory")},field:{type:"property.userStory"}}),this.registerAdditionalInfoItem("Assignable",{label:{type:"label",text:this.getTermName("Assignable")},field:{type:"property.assignable"}}),this.registerAdditionalInfoItem("Build",{label:{type:"label",text:this.getTermName("build")},field:{type:"property.build"}}),this.registerAdditionalInfoItem("Last Status",{label:{type:"label",text:"Last Status"},field:{type:"property.lastStatus"}}),this.registerAdditionalInfoItem("Last Run Date",{label:{type:"label",text:"Last Run Date"},field:{type:"property.lastRunDate"}}),this.registerAdditionalInfoItem("User Story For Task",{label:{type:"label",text:this.getTermName("userStory")},field:{type:"property.userStory",resetDisabled:!0}}),this.registerAdditionalInfoItem("Severity",{label:{type:"label",text:this.getTermName("Severity")},field:{type:"property.severity"},practices:["Planning"]}),this.registerTab("Description",{selected:!0,label:"description",header:[{type:"label",text:"Description"}],items:[{type:"tags"},{type:"container",name:"description container",cssClass:"ui-sub-control",children:[{type:"description"}]},this._buildRichTextCustomFieldsSummary(a),{type:"attachments"},{type:"label",text:"Comments",cssClass:"ui-ctrl-title"},{type:"container",name:"comments container",cssClass:"ui-sub-control",children:[{type:"comments",extensions:[d]}]}]}),this.registerTab("Track",{label:"track",header:[{type:"label",text:"Track"}],items:[{type:"audit.history"}],printable:!1}),this.registerTab("Flow",{label:"implementationHistory",printable:!1,header:[{type:"label",text:"Flow"}],items:[{type:"implementationHistory"}]}),this.registerPanel("Additional Info",{type:"collapsible",name:"additional info container",collapsed:!1,header:[{type:"label",text:"Info"}],items:[{type:"additionalInfo",children:this.getAdditionalInfoItems(a)}]});var g=this._buildCustomFieldsSummary(a);g.length&&this.registerPanel("Custom Fields",{type:"collapsible",name:"custom fields collapsible",collapsed:!1,header:[{type:"label",text:"Custom Fields"}],items:g}),window.appIsInDebugMode===!0&&this.registerPanel("Diagnostic",{type:"collapsible",name:"diagnostics container",printable:!1,collapsed:!0,header:[{type:"diagnostics"}],items:[{type:"collapsible",collapsed:!0,header:[{type:"label",text:"Global Bus Listeners"}],items:[{type:"diagnostics.globalListeners"}]},{type:"collapsible",collapsed:!0,header:[{type:"label",text:"Store Listeners"}],items:[{type:"diagnostics.store"}]}]}),this.registerPanel("Look Switcher",{type:"lookswitcher",printable:!1})},getCollection:function(a){var b={};return a in this.collections||(this.collections[a]={}),b=this.collections[a],b},addToCollection:function(a,b,c){var d=this.getCollection(a);return d[b]=c,this},registerAction:function(a,b){this.addToCollection("actions",a,b)},getActions:function(a){var b=this.getActionsAliases(),c=this.getCollection("actions"),d=[];return _.forEach(b,function(a){a in c?d.push(c[a]):d.push({label:"--"+a,command:function(){alert("Still working on it")}})}),d},getActionsAliases:function(){return["Old View","Old Edit","Print","-----","Delete"]},registerAdditionalInfoItem:function(a,b){b.field&&_.defaults(b.field,{name:a+" "+b.field.type}),b.label&&_.defaults(b.label,{name:a+" "+b.label.type}),this.addToCollection("additionalInfo",a,b)},getAdditionalInfoItems:function(a){var b=this.getAdditionalInfoAliases(),c=this.getCollection("additionalInfo"),d=[];return _.forEach(b,function(a){a in c&&d.push(c[a])}),d},getAdditionalInfoAliases:function(){return[]},registerTab:function(a,b){this.addToCollection("tabs",a,b)},getTabs:function(a){var b=this.getTabsAliases(),c=this.getCollection("tabs"),d=[];return _.forEach(b,function(a){a in c&&d.push(c[a])}),d},getTabsAliases:function(){return["Description"]},registerPanel:function(a,b){this.addToCollection("panels",a,b)},getPanels:function(a){var b=this.getPanelsAliases(),c=this.getCollection("panels"),d=[],e=this;return _.forEach(b,function(b){b in c&&(b=="Additional Info"&&(c[b].items[0].children=e.getAdditionalInfoItems(a)),d.push(c[b]))}),d},getPanelsAliases:function(){return["Look Switcher","Diagnostic","Additional Info","Custom Fields"]},_buildCustomFieldsSummary:function(a){var b=a.context,c=b.getCustomFields(),d=b.entity.entityType.name.toLowerCase(),e=_(c).select(function(a){return d===a.entityKind.toLowerCase()&&a.type.toLowerCase()!=="richtext"}),f=[];for(var g=0;g<e.length;g++){var h=e[g],i=h.type.toLowerCase();i==="multipleselectionlist"&&(i="multiselect"),f.push({type:"customField."+i,customField:h})}return f},_buildRichTextCustomFieldsSummary:function(a){var b=a.context,c=b.getCustomFields(),d=b.entity.entityType.name.toLowerCase(),e=_(c).select(function(a){return d===a.entityKind.toLowerCase()&&a.type.toLowerCase()==="richtext"}),f={type:"container",name:"custom fields container",visible:e.length>0,children:[]};for(var g=0;g<e.length;g++){var h=e[g];f.children.push({type:"label",text:h.name,cssClass:"ui-ctrl-title"}),f.children.push({type:"container",name:"custom field container for "+h.type.toLowerCase(),cssClass:"ui-sub-control",children:[{type:"customField."+h.type.toLowerCase(),customField:h}]})}return f},getNames:function(a){return this.termProcessor.getTerms(a).names},getTermName:function(a){return this.termProcessor.getTerms(a).name},getConfig:function(a){var c=a.context.getTerms();return this.termProcessor=new b(c),{children:[{type:"container",name:"main entity container",layout:"table",cssClass:"main-container",cellsCssClass:["general-info","additional-info"],children:[{type:"container",name:"general info column container",layout:"list",children:[{type:"breadcrumbs"},{type:"title"},{type:"tabs",cssClass:"tau-tabs",tabs:this.getTabs(a),additionalHeaders:[{type:"menu.actions",items:this.getActions(a)}]}]},{type:"container",name:"additional info column container",layout:"list",children:this.getPanels(a)}]}]}}});return e}),define("tau/ui/extensions/assignmentsList/ui.extension.assignmentsList.overlay",["tau/components/extensions/component.extension.base"],function(a){return a.extend({"bus afterRender":function(a){this.element=a.data.element;var b=this.action||function(){};b.call(this),this.action=function(){}},getWidget:function(){return this.element.parents(".ui-placeholder:first")},showOverlay:function(){this.getWidget().tauOverlay()},hideOverlay:function(){this.getWidget().tauOverlay("hide")},"bus markElementToBeUpdated":function(a){this.showOverlay()},"bus updateElement":function(a){this.action=function(){this.hideOverlay()}},"bus markElementToBeDeleted":function(a){this.showOverlay()},"bus afterAssignmentRemoved":function(a){this.hideOverlay()},"bus beforeSaveAssignment":function(a){this.showOverlay()},"bus beforeAddAssignment":function(a){this.showOverlay()}})}),define("tau/components/extensions/progressBar/extensions.progressBar.refresher",["tau/components/extensions/component.extension.base"],function(a){return a.extend({init:function(){this._super.apply(this,arguments),this.bus.getGlobalBus().on("bugWasMarkedAsDuplicate",this.onBugWasMarkedAsDuplicate,this)},destroy:function(){this.bus.getGlobalBus().removeListener("bugWasMarkedAsDuplicate",this.onBugWasMarkedAsDuplicate,this),this._super.apply(this,arguments)},onBugWasMarkedAsDuplicate:function(a){var b=this.config.context.entity.id;b==a.data.duplicateBugId&&a.data.stateId!=-1&&(this.fire("evictState"),this.fire("refresh"))}})}),define("tau/configurations/baseAssignable.container.config",["Underscore","tau/configurations/base.container.config","tau/models/model.extensions","tau/utils/utils.urlBuilder","tau/ui/extensions/assignmentsList/ui.extension.assignmentsList.overlay","tau/components/extensions/progressBar/extensions.progressBar.refresher"],function(_,a,b,c,d,e){var f=a.extend({init:function(b){a.prototype.init.call(this,b);var e=b.context.entity;this.registerAction("Add Time",{label:"Add "+this.getTermName("Time"),url:c.getAddTimeUrl(e.id),practices:["Time Tracking"]}),this.registerAction("Move to User Story",{label:"Move to Another User Story",command:function(){this.moveOrCopy()}}),this.registerAction("Find Duplicate",{label:"Find Duplicate",command:function(){this.markAsDuplicate()}}),this.registerAction("Split",{label:"Split",command:function(){this.split()}}),this.registerAction("Add Test Case",{label:"Add "+this.getTermName("testCase"),url:c.getAddTestCaseForUserStoryUrl(e.id),practices:["Test Cases"]}),this.registerAction("Add Bug",{label:"Add "+this.getTermName("bug"),url:c.getAddBugForUserStoryUrl(e.id),practices:["Bug Tracking"]}),this.registerAction("Create Bug",{label:"Create "+this.getTermName("bug"),url:c.getAddBugForRequestUrl(e.id),practices:["Bug Tracking"]}),this.registerAction("Add Task",{label:"Add "+this.getTermName("task"),url:c.getAddTaskForUserStoryUrl(e.id)}),this.registerAction("Create Task",{label:"Create "+this.getTermName("task"),url:c.getAddTaskForRequestUrl(e.id)}),this.registerAction("Create User Story",{label:"Create "+this.getTermName("userStory"),url:c.getAddUserStoryForRequestUrl(e.id)}),this.registerAction("Create Feature",{label:"Create "+this.getTermName("feature"),url:c.getAddFeatureForRequestUrl(e.id),practices:["Requirements"]}),this.registerTab("Track",{label:"track",header:[{type:"label",text:"Track"}],items:[{type:"collapsible",printable:!1,name:"audit history collapsible",collapsed:!0,header:[{type:"label",text:"Audit history"}],items:[{type:"audit.history"}]},{type:"collapsible",name:"time list collapsible",collapsed:!1,header:[{type:"label",text:"Time records"}],items:[{type:"timeList"}],practices:["Time Tracking"]}]}),this.registerPanel("Progress Bar",{type:"progressBar"}),this.registerPanel("Impediments",{type:"impedimentListPanel"}),this.registerPanel("Assignments",{type:"collapsible",collapsed:!1,header:[{type:"label",text:"Assignments"}],items:[{type:"assignmentsList",extensions:[d]}]})},getActionsAliases:function(){return["Add Time","-----","Old View","Old Edit","Print","-----","Delete"]},getAdditionalInfoAliases:function(){return["Release","Iteration"]},getTabsAliases:function(){return["Description","Track","Flow"]},getPanelsAliases:function(){return["Look Switcher","Diagnostic","Progress Bar","Impediments","Assignments","Additional Info","Custom Fields"]}});return f}),define("tau/configurations/baseContainable.container.config",["tau/configurations/base.container.config","tau/models/model.extensions","tau/utils/utils.urlBuilder"],function(a,b,c){var d=a.extend({init:function(b){a.prototype.init.call(this,b);var d=b.context.entity;this.registerAction("Add Iteration",{label:"Add "+this.getTermName("Iteration"),url:c.getAddIterationForReleaseUrl(d.id),practices:["Iterations"]})}});return d}),define("tau/components/extensions/extension.labelRefresher.base",["Underscore","tau/components/extensions/component.extension.base"],function(_,a){return a.extend({eventName:null,propertyListForEvict:[],init:function(){var a=this;a._super.apply(a,arguments),_.isArray(a.eventName)||(a.eventName=[a.eventName]);var b=a.bus.getGlobalBus();_(a.eventName).each(function(c){b.on(c,a.eventHandler,a)}),b.on("bugWasMarkedAsDuplicate",a.onBugWasMarkedAsDuplicate,a)},destroy:function(){var a=this,b=a.bus.getGlobalBus();_(a.eventName).each(function(c){b.removeListener(c,a.eventHandler,a)}),b.removeListener("bugWasMarkedAsDuplicate",this.onBugWasMarkedAsDuplicate,this),this._super.apply(this,arguments)},refresh:function(){var a=this.config.context.entity;this.config.store.evictProperties(a.id,a.entityType.name,this.propertyListForEvict),this.fire("refresh")},onBugWasMarkedAsDuplicate:function(a){var b=this.config?this.config.context.entity.id:null;b===a.data.bugId&&this.refresh()},eventHandler:function(a){this.isEntityInContext(a)&&this.refresh()}})}),define("tau/components/extensions/requestsList/extensions.requestList.labelRefresher",["tau/components/extensions/extension.labelRefresher.base"],function(a){return a.extend({eventName:["requestWasAttachedToEntity","requestIsDetachedFromEntity"],propertyListForEvict:["requests-count"]})}),define("tau/components/extensions/testCaseList/extensions.testCaseList.labelRefresher",["tau/components/extensions/extension.labelRefresher.base"],function(a){return a.extend({eventName:"testCaseWasAdded",propertyListForEvict:["testCases-count"]})}),define("tau/components/extensions/entity/extension.requestList.remover",["Underscore","tau/core/model-base","tau/models/model.extensions","tau/configurator"],function(_,a,b,c){return a.extend({init:function(a){this._super.apply(this,arguments),this.hideElementIfHelpDeskPracticeIsOff(this.config.context)},hideElementIfHelpDeskPracticeIsOff:function(a){this.store=c.getStore(),a.isPracticeAvailable("Help Desk")<0&&(this.bus.getGlobalBus().on("requestWasAttachedToEntity",this._updateRefresh,this),this.bus.getGlobalBus().on("bugWasMarkedAsDuplicate",this._updateRefresh,this),this.bus.on("afterRender",this._update,this))},_updateRefresh:function(){var a=this.config.context;this.config.store.evictProperties(a.entity.id,a.entity.entityType.name,["requests-count"]),this._update()},_update:function(){b.calculateRequestsCount.call(this,{callback:function(a){var b=a.count,c=this.$el;b>0?c.show():c.hide()},scope:this})},destroy:function(){this.bus.getGlobalBus().removeListener("requestWasAttachedToEntity",this._updateRefresh,this),this._super()},"bus afterRender":function(a){this.$el=a.data.element}})}),define("tau/models/dataprocessor/model.processor.assignments",["Underscore"],function(_){var a={getAssignmentsForRole:function(a,b){var c=_(b.assignments).select(function(b){return b.role.id==a.id});return c},getAssignments:function(a){var b={groups:[]},c=a.roleEfforts;for(var d=0;d<c.length;d++){var e=c[d].role,f={role:{id:e.id,name:e.name.substring(0,3)},users:[]},g=this.getAssignmentsForRole(e,a);for(var h=0;h<g.length;h++){var i=g[h].generalUser;f.users.push({id:i.id,name:[i.firstName," ",i.lastName.substring(0,1),"."].join(""),assignmentId:g[h].id})}b.groups.push(f)}return b}};return a}),define("tau/models/dataprocessor/model.processor.importance",["Underscore","tau/core/class"],function(_,a){var b=a.extend({init:function(a,b){this.min=a,this.max=b},getKind:function(a){var b="medium";return a==this.min?b="high":a==this.max&&(b="low"),b}});return b}),define("tau/models/dataProviders/model.provider.items.base",["Underscore","tau/core/class","tau/models/dataprocessor/model.processor.assignments","tau/models/dataprocessor/model.processor.importance","tau/utils/utils.urlBuilder"],function(_,a,b,c,d){return a.extend({init:function(a){this.config=a},_createDetailCommand:function(a){var b={};return b[a]=["id","name","numericPriority","tags","effort","effortCompleted","effortToDo","timeSpent","timeRemain",{entityState:["id","name","isInitial","isFinal","numericPriority"]},{roleEfforts:["id",{role:["id","name"]}]},{assignments:["id",{role:["id"]},{generalUser:["id","firstName","lastName"]}]}],b},_processAssignments:function(a){var c=b.getAssignments(a);return _.forEach(c.groups,function(a){_.forEach(a.users,function(a){a.avatarUrl=d.getAvatarUrl(a.id,24)})}),c},_processTags:function(a){return a.tags?_.isArray(a.tags)?a.tags:a.tags.toString().split(", "):[]},_calculateEffortToMaximum:function(a){if(a.length==0)return a;var b=_.max(a,function(a){return a.effort.total}),c=b.effort.total;return _.forEach(a,function(b){b.effort.percentFromCount=a.length,b.effort.percentFromMaximum=c==0?0:Math.round(b.effort.total/c*100)}),a},_convertData:function(a){var b=a,c=[],d=this;return _.forEach(b,function(a){c.push(d._convertItem(a))}),c},_convertItem:function(a){var b={id:a.id,name:a.name,numericPriority:a.numericPriority,__type:a.__type,entityState:{id:a.entityState.id,name:a.entityState.name},tags:this._processTags(a),effort:this._getEffortData(a),assignments:this._processAssignments(a)};return b.severity={id:a.severity.id,name:a.severity.name},b},_getEffortData:function(a){var b={};return b.estimated=a.effort,b.spent=a.effortCompleted,b.remain=a.effortToDo,b.total=b.spent+b.remain,b.percentComplete=b.total===0?0:Math.round(b.spent/b.total*100),b.percentFromMaximum=0,b.timeSpent=a.timeSpent,b.timeRemain=a.timeRemain,b.unit=this.config.context.getEffortPoint(a.__type),b},_getAssignedEffort:function(a){var b={},c=0,d=0,e=function(a){c+=a.effortToDo,d+=a.effortCompleted};return _.each(a.userStories,e),_.each(a.bugs,e),b.value=c+d,b.unit=this.config.context.getEffortPoint(a.__type),b},_getVelocityData:function(a){var b={};return b.value=a.velocity,b.unit=this.config.context.getEffortPoint(a.__type),b},_fetch:function(a,b,d,e){var f=this.config.context,g=f.entity.entityType.name,h=f.entity.id,i=f.applicationContext.processes[0].practices,j=_.pluck(i,"name"),k=this.config.store,l=this._createDetailCommand(a),m={id:h,nested:!0,fields:[l]},n=this,o=function(c){var d=c[0].data[a];_.map(d,function(a){a.__type=b});var f=n._convertData(d);e(f)};d&&(k=k.get(d,{fields:["id","importance"]}),o=function(d){var f=_(d[0].data).pluck("importance"),g=_.min(f),h=_.max(f);n.importanceProcessor=new c(g,h);var i=d[1].data[a];_.map(i,function(a){a.__type=b});var j=n._convertData(i);e(j)}),k=k.get(g,m),k.done({success:o,scope:n})},_sortByPriority:function(a){return _.sortBy(a,function(a){var b=a.numericPriority||0;return a.entityState.isFinal===!0&&(b+=100500),b})},changePriority:function(a,b,c,d){var e=this.config.store;e.evictProperties(a.id,a.__type,["numericPriority"]);var f=[];f.push(function(d){e.save("prioritizer",{id:a.id,$set:{beforeId:c.id,afterId:b.id}}).done({success:function(){d(null,arguments)}})}),f.push(function(b){e.get(a.__type,{id:a.id,fields:["id","numericPriority"]}).done({success:function(a){b(null,a[0].data)}})}),_.series(f,function(a,b){_.isFunction(d)&&d.call(null,{changed:b[1]})})}})}),define("tau/models/dataProviders/model.provider.items.bugs",["Underscore","tau/models/dataProviders/model.provider.items.base"],function(_,a){return a.extend({fetch:function(a){this._fetch("bugs","bug","severity",a)},_createDetailCommand:function(a){var b={};b[a]=["id","name","numericPriority","tags","effort","effortCompleted","effortToDo","timeSpent","timeRemain",{entityState:["id","name","isInitial","isFinal","numericPriority","isCommentRequired",{nextStates:["id"]}]},{roleEfforts:["id","effort","effortToDo",{role:["id","name","isPair","hasEffort"]}]},{owner:["id","firstName","lastName"]},{assignments:["id",{role:["id"]},{generalUser:["id","firstName","lastName"]}]},{severity:["id","name","importance"]}];var c={project:["id"]};return this.config.multiprojects&&c.project.push("abbreviation"),b[a].push(c),this.config.additionalFields&&_.indexOf(this.config.additionalFields,"iteration")>-1&&b[a].push({iteration:["id","name"]}),b},_convertItem:function(a){var b=this,c={id:a.id,name:a.name,numericPriority:a.numericPriority,__type:a.__type,entityState:{id:a.entityState.id,name:a.entityState.name,isInitial:a.entityState.isInitial,isFinal:a.entityState.isFinal,numericPriority:a.entityState.numericPriority},tags:this._processTags(a),effort:this._getEffortData(a),assignments:this._processAssignments(a),severity:{id:a.severity.id,name:a.severity.name,kind:b.importanceProcessor.getKind(a.severity.importance)},projectId:a.project.id,entitiesCount:0};return this.config.multiprojects&&(c.project={id:a.project.id,abbreviation:a.project.abbreviation}),this.config.additionalFields&&_.indexOf(this.config.additionalFields,"iteration")>-1&&(c.iteration={id:a.iteration?a.iteration.id:null,name:a.iteration?a.iteration.name:null}),c}})}),define("tau/models/dataProviders/model.provider.items.tasks",["Underscore","tau/models/dataProviders/model.provider.items.base"],function(_,a){return a.extend({fetch:function(a){this._fetch("tasks","task","priority",a)},_createDetailCommand:function(a){var b={};return b[a]=["id","name","numericPriority","tags","effort","effortCompleted","effortToDo","timeSpent","timeRemain",{userStory:["id"]},{entityState:["id","name","isInitial","isFinal","numericPriority"]},{roleEfforts:["id","effort","effortToDo",{role:["id","name","isPair","hasEffort"]}]},{owner:["id","firstName","lastName"]},{assignments:["id",{role:["id"]},{generalUser:["id","firstName","lastName"]}]},{priority:["id","name","importance"]},{project:["id"]}],b},_convertItem:function(a){var b=this,c={id:a.id,name:a.name,numericPriority:a.numericPriority,__type:a.__type,entityState:{id:a.entityState.id,name:a.entityState.name,isInitial:a.entityState.isInitial,isFinal:a.entityState.isFinal,numericPriority:a.entityState.numericPriority},tags:this._processTags(a),effort:this._getEffortData(a),assignments:this._processAssignments(a),priority:null,projectId:a.project.id,entitiesCount:0};return c}})}),define("tau/models/dataProviders/model.provider.items.tasks_bugs",["Underscore","tau/models/dataProviders/model.provider.items.base","tau/models/dataProviders/model.provider.items.bugs","tau/models/dataProviders/model.provider.items.tasks"],function(_,a,b,c){return a.extend({init:function(a){this.config=a,this.providers=[new c(a)],this.config.context.isPracticeAvailable("Bug Tracking")&&this.providers.push(new b(a))},_convertData:function(a){return a=this._calculateEffortToMaximum(a),this._sortByPriority(a)},fetch:function(a){var b=this,c=function(c){var d=b._convertData(c);a(d)},d=[];_.forEach(b.providers,function(a){d.push(function(b){a.fetch(function(a){b(null,a)})})}),_.parallel(d,function(a,b){var d=_.flatten(b);c(d)})}})}),define("tau/models/dataProviders/model.provider.groups.base",["Underscore","tau/core/class"],function(_,a){return a.extend({init:function(a){this.config=a},_mergeGroups:function(a){var b=null;return a.length&&(b={key:[],items:[],title:[],isInitial:!1,isPlanned:!1,isFinal:!1,realGroups:[]},_.forEach(a,function(a){b.key.push(a.key),b.title.push(a.title?a.title:a.key),b.isInitial=!!a.isInitial,b.isPlanned=!!a.isPlanned,b.isFinal=!!a.isFinal,b.realGroups=b.realGroups.concat(a.realGroups)})),b},_fetchState:function(a,b,c){var d=this,e=_(b).isFunction()?b:function(a){var c=d.config.context.getProcess(),e=a.entityType.name.toLowerCase();return a.process.id===c.id&&_.indexOf(b,e)>-1},f=this.config.store,g=["id","name","isFinal","isInitial","isPlanned","isCommentRequired","numericPriority",{entityType:["id","name"]},{process:["id"]},{nextStates:["id"]}],h={list:!0,fields:g};f=f.get("entityStates",h),f.done({success:function(a){var b=a[0].data;b=_(b).filter(e);var f=_.groupBy(b,function(a){return a.name});f=this._sortByState(f),_.forEach(f,function(a){a.collapsed=!!a.items[0].isFinal,a.isFinal=!!a.items[0].isFinal,a.isInitial=!!a.items[0].isInitial,a.isPlanned=!!a.items[0].isPlanned,a.realGroups=_.clone(a.items),a.items=[],delete a.stateWeight});var g=_.select(f,function(a){return a.isInitial}),h=_.select(f,function(a){return!a.isInitial&&a.isPlanned}),i=_.select(f,function(a){return!a.isInitial&&!a.isFinal&&!a.isPlanned}),j=_.select(f,function(a){return!a.isInitial&&a.isFinal&&!a.isPlanned});f=[];var k=null;g.length&&(k=d._mergeGroups(g),f.push(k)),h.length&&(k=d._mergeGroups(h),f.push(k)),f=f.concat(i),j.length&&(k=d._mergeGroups(j),f.push(k)),_.forEach(f,function(a){a.collapsed=!!a.isFinal,a.title&&_.isArray(a.title)&&(a.title=a.title.join(", ")),_.isArray(a.key)&&a.key.length==1&&(a.key=a.key.pop()),delete a.isFinal,delete a.isInitial,delete a.isPlanned}),c(f)},scope:this})},_sortByState:function(a){return _.forEach(a,function(a){var b=[];_.forEach(a.items,function(a){b.push(a.numericPriority)});var c=_.reduce(b,function(a,b){return a+b},0),d=c?c/b.length:0;a.stateWeight=d}),a=_.sortBy(a,function(a){return a.stateWeight}),a},moveToGroup:function(a,b,c,d){},_moveToGroupByState:function(a,b,c,d){var e=this.config.store,f=_.find(c.realGroups,function(b){return b.id==a.entityState.id}),g=_.find(b.realGroups,function(b){return b.entityType.name.toLowerCase()==a.__type.toLowerCase()&&b.process.id==f.process.id});if(!g||g.id==f.id){d.call(null);return}var h=[];h.push(function(b){e.save(a.__type,{id:a.id,$set:{entityState:{id:g.id}},fields:["id",{entityState:["id","name","isFinal"]}]}).done({success:function(){b(null,arguments)}})}),h.push(function(b){e.get(a.__type,{id:a.id,fields:["id",{entityState:["id","name","isFinal"]}]}).done({success:function(a){b(null,a[0].data)}})}),_.series(h,function(a,b){_.isFunction(d)&&d.call(null,{changed:b[1]})})},isAvailableForItem:function(a,b){return!0},getCommentRequirements:function(a,b){return[]}})}),define("tau/models/dataProviders/model.provider.groups.tasks_bugs",["Underscore","tau/models/dataProviders/model.provider.groups.base"],function(_,a){return a.extend({fetch:function(a,b,c){var d={tasks:[],bugs:[]},e=[],f=[],g=_(b).select(function(a){return a.__type==="task"}),h=_(b).select(function(a){return a.__type==="bug"});d.tasks=_(g).chain().pluck("projectId").uniq().value(),this.config.context.isPracticeAvailable("Bug Tracking")&&(d.bugs=_(h).chain().pluck("projectId").uniq().value());var i=this.config.store,j=this;i.get("projects",{fields:[{process:["id"]}],list:!0}).done({success:function(b){var e=b[0].data,f={tasks:[],bugs:[]};_.forEach(d,function(a,b){f[b]=_(e).chain().select(function(b){return _(a).include(b.id)}).map(function(a){return a.process.id}).uniq().value()});var g=function(a){var b=(a.entityType.name||"").toLowerCase(),c=a.process.id;return b==="task"&&_(f.tasks).include(c)||b==="bug"&&_(f.bugs).include(c)};return j._fetchState(a,g,c)}})},moveToGroup:function(a,b,c,d){return this._moveToGroupByState(a,b,c,d)},isAvailableForItem:function(a,b,c){var d=_.find(c.realGroups,function(b){return b.id==a.entityState.id}),e=_.find(b.realGroups,function(b){return b.entityType.name.toLowerCase()==a.__type.toLowerCase()&&b.process.id==d.process.id}),f=_.pluck(d.nextStates,"id");return f.push(d.id),e&&_.include(f,e.id)},getCommentRequirements:function(a,b,c){var d=_.find(c.realGroups,function(b){return b.id==a.entityState.id}),e=[];return _.forEach(b,function(b){var c=_.find(b.realGroups,function(b){return b.entityType.name.toLowerCase()==a.__type.toLowerCase()&&b.process.id==d.process.id});e.push({isCommentRequired:c?c.isCommentRequired:!1})}),e}})}),define("tau/ui/extensions/list/extension.list.refresher",["tau/components/extensions/component.extension.base"],function(a,b){return a.extend({"bus afterInit":function(){if(this.signedUp)return;this.signedUp=!0;var a=this.config.context.entity,b=a.entityType.name,c=this.config.store,d=this;this._refresher||(this._refresher=function(){c.evictProperties(a.id,b,["tasks","bugs"]),d.fire("refresh")},c.unbind(this),c.on({eventName:"afterSave",type:"userStory",listener:this,filter:{id:a.id},hasChanges:["entityState"]},this._refresher))},"bus destroy":function(){this.config.store.unbind(this),delete this._refresher,this._super.apply(this,arguments)}})}),define("tau/models/dataProviders/userstory/userstory.model.provider.testcases.items",["Underscore","tau/models/dataProviders/model.provider.items.base","tau/utils/utils.date","tau/configurator"],function(_,a,b,c){return a.extend({fetch:function(a){this._fetch("testCases","testCase","priority",a)},_convertData:function(a){return a=this._super(a),_.sortBy(a,function(a){var b=a.numericPriority||0;return b})},_createDetailCommand:function(a){var b={};return b[a]=["id","name","tags","lastStatus","lastRunDate","steps","success","numericPriority"],b},_convertItem:function(a){var d=this,e=c.getApplicationPath(),f={id:a.id,__type:a.__type,name:a.name,tags:[],lastStatus:a.lastStatus?"passed":"failed",lastRunDate:b.format.datetime.short(b.convertToTimezone(a.lastRunDate)),steps:a.steps,success:a.success,numericPriority:a.numericPriority};return f}})}),define("tau/ui/extensions/list/testcases/extension.list.testcases.actions",["Underscore","tau/components/extensions/component.extension.base","tau/configurator","tau/utils/utils.date"],function(_,a,b,c){return a.extend({_toggle:function(a,b){var c=a.find(".ui-richeditor:visible");c.length&&c.prev().richeditor("hideEditor"),_.isBoolean(b)?(a.find(".tau-list__itemexpander").toggleClass("tau-list__itemexpander_state_open",b).toggleClass("tau-list__itemexpander_state_closed",!b),a.find(".tau-list__table-additional").toggleClass("tau-list__table-additional_state_open",b).toggleClass("tau-list__table-additional_state_closed",!b)):(a.find(".tau-list__itemexpander").toggleClass("tau-list__itemexpander_state_open").toggleClass("tau-list__itemexpander_state_closed"),a.find(".tau-list__table-additional").toggleClass("tau-list__table-additional_state_open").toggleClass("tau-list__table-additional_state_closed"))},"bus prioritize.start":function(){var a=this.$el.find(".ui-richeditor:visible");a.length&&a.prev().richeditor("hideEditor")},"bus preDataBind":function(a){var b=a.data;b.labelAdd=this.config.labelAdd||"Add"},"bus testCaseWasAdded":function(){this.fire("evictTestCases")},"bus evictTestCases":function(){var a=this.config.context.entity;b.getStore().evictProperties(a.id,a.entityType.name,["testCases","testCases-count"]),this.fire("refresh")},"bus afterRender":function(a){var d=a.data.element;this.$el=d;var e=d.find("[role=item]"),f=this;d.delegate("[role=item-expander-all]","click",function(){f._toggle(e,!0)}),d.delegate("[role=item-collapser-all]","click",function(){f._toggle(e,!1)});var g=b.getStore(),h=function(a,d){g.save("testcase",{id:a.id,$set:{lastStatus:d,lastFailureComment:null,lastRunDate:c.format.datetime.short(b.getCurrentDate())},fields:["id","lastStatus","lastRunDate"]}).done({success:function(){}})},i=_.bind(this.addTestCaseClickHandler,this);d.delegate("[role=action-add]","click",function(a){a.preventDefault(),a.stopPropagation(),i()}),d.delegate("[role=item-expander]","click",function(a){var b=$(this),c=b.parents("[role=item]:first");f._toggle(c)}),d.delegate("[role=action-pass]","click",function(a){a.preventDefault(),a.stopPropagation();var b=$(this).parents("[role=item]:first"),c=b.data("tmplItem").data;h(c,!0),f._toggle(b,!1);var d=b.next("[role=item]");d.length&&f._toggle(d,!0)}),d.delegate("[role=action-fail]","click",function(a){a.preventDefault(),a.stopPropagation();var b=$(this).parents("[role=item]:first"),c=b.data("tmplItem").data,d=!1;h(c,d),f._toggle(b,!1);var e=b.next("[role=item]");e.length&&f._toggle(e,!0)})},addTestCaseClickHandler:function(){this.bus.fire("action.add",{entity:this.config.context.entity})}})}),define("tau/ui/extensions/list/testcases/extension.list.testcases.actions.add.userStory",["Underscore","tau/components/extensions/component.extension.base","tau/configurator","tau/utils/utils.date"],function(_,a,b,c){return a.extend({showTestCaseEditor:function(){var a=this.config.context,b=a.assignable.id,c=this;window.processConfigurations||(window.processConfigurations={}),Ext.WindowMgr.zseed=9999999;var d=new Tp.controls.TestCaseCreateEditorWindow({userStoryId:b,processId:a.applicationContext.processes[0].id});d.show(),d.on("saved",function(){c.fire("testCaseWasAdded",{assignable:{id:b}})})},"bus action.add":function(){this.showTestCaseEditor()}})}),define("tau/ui/templates/list_/grid.entity/ui.template.cell.progress",["tau/core/templates-factory"],function(a){var b=["{{if !$item.parent.parent.data.config.currentView.timeTrackingPolicies.disableSpentRemain}}","Time spent: ${timeSpent}{{if timeSpent}}h{{/if}}  ","Time remain: {{if !timeRemain && timeRemain !== 0}}N/A{{else}}${timeRemain}{{if timeRemain}}h{{/if}}{{/if}}  ","{{/if}}","Percent complete: ${percentComplete}%"].join(""),c={name:"cell-progress",markup:['<div{{if percentFromMaximum == 0}} class="tau-extension-tooltip" title="'+b+'"{{/if}}>',"{{if percentFromMaximum > 0}}",'    <div class="ui-progress-bar-progress ui-progressbar__progress tau-extension-tooltip" style="width:${percentFromMaximum}%;" title="'+b+'">','        <span class="ui-progress-progress ui-progressbar__progress__indicator" style="width:${percentComplete}%;{{if percentComplete == 0}}display:none;{{/if}}"></span>',"    </div>","{{/if}}","</div>"]};return a.register(c)}),define("tau/ui/templates/list_/grid.entity/ui.template.cell.assignments",["tau/core/templates-factory"],function(a){var b={name:"cell-assignments",markup:['<span class="ui-assignment__group">','   <span class="ui-assignment__group__title">${role.name}</span><span class="tau-assignment__group__dot">.</span>',"   {{if users.length}}",'   <span class="ui-assignment__group__users">',"   {{each users}}",'       <span class="ui-assignment__user">','           <img style="width:24px; height:24px;" src="${avatarUrl}" alt="${name}" title="${name}" />',"       </span>","   {{/each}}","   </span>","   {{else}}",'   <span class="ui-assignment__group__unassigned">Unassigned</span>',"   {{/if}}","</span>"]};return a.register(b)}),define("tau/ui/templates/title/ui.template.title.simple",["tau/core/templates-factory"],function(a){var b={name:"ui.template.title.simple",markup:['<div class="ui-title-simple">','   <div class="entity-title">${entity.name}</div>',"</div>"],dependencies:[]};return a.register(b)}),define("tau/ui/templates/list_/grid.entity/ui.template.cell.name",["tau/core/templates-factory","tau/ui/templates/title/ui.template.title.simple"],function(a){var b={name:"cell-name",markup:['<span class="tau-title-container">','<div class="tau-title tau-list-field-slot" title="${name}" runas="title" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}" data-template:name="ui.template.title.simple">${name}</div>',"</span>","{{if tags && tags.length}}",'   <span class="tau-tags">${tags[0]}</span>','   {{if tags.length > 1}}<span class="tau-tags">&#133;</span>{{/if}}',"{{/if}}"]};return a.register(b)}),define("tau/ui/tags/ui.tag.abbr",["Underscore","jQuery"],function(_,$){return{register:function(a,b){b.$tau=b.$tau||{},b.$tau.abbr=function(a,b){var c=a||"",d=c.substr(0,b);return $.trim(d)}}}}),define("tau/ui/templates/common/ui.template.userIcon",["tau/core/templates-factory"],function(a){return a.register({name:"ui.template.userIcon",markup:['<span class="ui-assignment__user user" userId="${id}">','   <img src="${avatar}" style="width:24px; height:24px;" alt="${name}" title="${name}" class="user-name" />',"</span>"].join(""),dependencies:[]})}),define("tau/ui/templates/assignmentsList/ui.template.assignmentsList.userList.mini",["tau/core/templates-factory","tau/ui/tags/ui.tag.abbr","tau/ui/templates/common/ui.template.userIcon","tau/ui/templates/assignmentsList/ui.template.assignmentsList.addBtn"],function(a,b){var c={name:"ui.template.assignmentsList.userList.mini",tags:[b],markup:['<div class="ui-assignment__group group" roleId="${role.id}">','   <span class="ui-assignment__group__title">',"       <span>${$item.parent.$tau.abbr(role.name, 3)}</span>","   </span>","   {{if users.length}}",'   <span class="ui-assignment__group__users">','   {{tmpl(users) "ui.template.userIcon"}}',"   {{/if}}","   </span>","   {{if allowAdd}}",'   <span class="ui-assignment__group__unassigned">{{tmpl "assignments-add-btn"}}</span>',"   {{/if}}","</div>"].join(""),dependencies:["assignments-add-btn","ui.template.userIcon"]};return a.register(c)}),define("tau/ui/templates/assignmentsList/ui.template.assignments.mini",["tau/core/templates-factory","tau/ui/templates/assignmentsList/ui.template.assignmentsList.userList.mini"],function(a){var b={name:"ui.template.assignments.mini",markup:['<div class="assignments-table-readonly">','<div class="user-list">{{tmpl(assignments.groups) "ui.template.assignmentsList.userList.mini"}}</div>',"</div>"].join(""),dependencies:["ui.template.assignmentsList.userList.mini"]};return a.register(b)}),define("tau/ui/templates/property.effort/ui.template.property.effort.content",["tau/core/templates-factory"],function(a){var b="Estimated effort: ${effort}{{if effort}}${unit.shortName}{{/if}}",c={name:"ui.template.property.effort.content",markup:[' <div class="tau-extension-tooltip" title="'+b+'">','   <div class="entity-effort">${effort}<span class="entity-effort-info">${unit.shortName}</span></div>',"</div>"],dependencies:[]};return a.register(c)}),define("tau/ui/templates/list_/grid.entity/ui.template.list.grid.entity.row",["tau/core/templates-factory","tau/ui/templates/list_/grid.entity/ui.template.cell.progress","tau/ui/templates/list_/grid.entity/ui.template.cell.assignments","tau/ui/templates/list_/grid.entity/ui.template.cell.name","tau/ui/templates/assignmentsList/ui.template.assignments.mini","tau/ui/templates/property.effort/ui.template.property.effort.content"],function(a){var b={name:"list-grid-entity__row",markup:["",'<li class="tau-list__list__item" role="item">','<table class="tau-list__table">',"   <tbody>",'       <tr class="i-item-${id} tau-list__table__row {{if $item.data.entityState && $item.data.entityState.isFinal}} tau-list__table__row_isfinalstate_true{{/if}}">','<td class="tau-list__table__cell tau-list__table__cell-dragdrop"  role="sortable-handler" ><div class="dragdrop_indicator"></div></td>','<td class="tau-list__table__cell tau-list__table__cell-id">','   <a href="#${__type}/${id}"><em class="ui-type-icon ui-type-icon-${__type.toLowerCase()}">${id}</em></a>',"</td>",'<td class="tau-list__table__cell tau-list__table__cell-name">','   {{tmpl($item.data) "cell-name"}}',"</td>","{{if $item.parent.data.config.currentView.multiprojects}}","   {{if project}}",'   <td class="tau-list__table__cell tau-list__table__cell-project">${project.abbreviation}</td>',"   {{else}}",'   <td class="tau-list__table__cell  tau-list__table__cell-project">&nbsp;</td>',"   {{/if}}","{{/if}}","{{if severity}}",'   <td class="tau-list__table__cell tau-list__table__cell-severity">','       <span runas="property.severity" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}" class="tau-list-severity-${severity.kind}">${severity.name}</span>',"   </td>","{{else priority}}",'   <td class="tau-list__table__cell tau-list__table__cell-priority">','       <span class="tau-list-priority-${priority.kind}" runas="property.priority" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}">${priority.name}</span>',"   </td>","{{/if}}","{{if visibleEntityState}}",'   <td class="tau-list__table__cell tau-list__table__cell-state">','       <div runas="property.entityState" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}">${visibleEntityState.name}</div>',"   </td>","{{/if}}","{{if effort}}",'   <td class="tau-list__table__cell tau-list__table__cell-effort">','      <div class="tau-list-field-slot" runas="property.effort" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}" data-entities-count="${entitiesCount}">','        {{tmpl({effort: effort.estimated, unit: effort.unit}) "ui.template.property.effort.content"}}',"      </div>","   </td>",'   <td class="tau-list__table__cell tau-list__table__cell-progress" >','       <div runas="progressBar.small" data-items-count="${effort.percentFromCount}" data-max-width-percents="${effort.percentFromMaximum}" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}">','           {{tmpl(effort) "cell-progress"}}',"       </div>","   </td>","{{/if}}","{{if assignments}}",'<td class="tau-list__table__cell tau-list__table__cell-assignments" >','   <div class="tau-list-field-slot" runas="assignmentsList" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}" data-template:name="ui.template.assignments.mini">{{tmpl(assignments.groups) "cell-assignments"}}</div>',"</td>","{{/if}}","{{if velocity}}",'   <td class="tau-list__table__cell tau-list__table__cell-velocity" >',"       ${velocity.value}&nbsp;${velocity.unit.shortName} ","   </td>","{{/if}}","{{if assignedEffort}}",'   <td class="tau-list__table__cell tau-list__table__cell-assignedEffort" >','   <div class="tau-extension-tooltip" title="Assigned Effort: ${assignedEffort.value}&nbsp;${assignedEffort.unit.shortName}">',"       <div>${assignedEffort.value}&nbsp;${assignedEffort.unit.shortName}</div>","   </div>","   </td>","{{/if}}","{{if startDate}}",'   <td class="tau-list__table__cell tau-list__table__cell-date" >',"       ${startDate}","   </td>","{{/if}}","{{if endDate}}",'   <td class="tau-list__table__cell tau-list__table__cell-date" >',"       ${endDate}","   </td>","{{/if}}",'   <td class="tau-list__table__cell tau-list__table__cell-actions" >','       <div class="tau-list-field-slot" runas="entity.actions" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}"></div>',"   </td>","</tr>","</tbody>","</table>","</li>"],dependencies:["ui.template.property.effort.content","ui.template.assignments.mini","cell-progress","cell-assignments","cell-name"]};return a.register(b)}),define("tau/ui/templates/list_/grid.entity/testplan/ui.template.list.grid.entity.row.testplanrun",["tau/core/templates-factory","tau/ui/tags/ui.tag.term","tau/ui/templates/list_/grid.entity/ui.template.cell.progress","tau/ui/templates/list_/grid.entity/ui.template.cell.assignments","tau/ui/templates/list_/grid.entity/ui.template.cell.name","tau/ui/templates/assignmentsList/ui.template.assignments.mini","tau/ui/templates/property.effort/ui.template.property.effort.content"],function(a,b){var c={name:"list-grid-entity__rowtestplanrun",tags:[b],markup:["",'<li class="tau-list__list__item" role="item">','<table class="tau-list__table">',"<tbody>",'<tr class="i-item-${id} tau-list__table__row {{if $item.data.entityState && $item.data.entityState.isFinal}} tau-list__table__row_isfinalstate_true{{/if}}">','<td class="tau-list__table__cell tau-list__table__cell-dragdrop"  role="sortable-handler" ><div class="dragdrop_indicator"></div></td>','<td class="tau-list__table__cell tau-list__table__cell-id">','   <a class="tau-entitylink" href="#${__type}/${id}" title="${name}"><em class="ui-type-icon ui-type-icon-${__type.toLowerCase()}">${id}</em></a>',"</td>",'<td class="tau-list__table__cell tau-list__table__cell-stat">','<div class="tau-testCasesRunResults">','<div class="tau-testCasesRunResults-container">','<span title="Passed" class="tau-testCasesRunResults-item tau-testCasesRunResults-passed">${passedCount}</span>','<span title="Failed" class="tau-testCasesRunResults-item tau-testCasesRunResults-failed">${failedCount}</span>','<span title="Not Run" class="tau-testCasesRunResults-item tau-testCasesRunResults-notRun">${notRunCount}</span>',"</div>","</div>","</td>",'<td class="tau-list__table__cell tau-list__table__cell-release">','<div runas="property.release" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}" data-show-url="false" data-placeholder-text="assign to {{term("release") "name"}}">',"{{if release}}","${release.name}","{{/if}}","</div>","</td>","{{if isAvailableIteration}}",'<td class="tau-list__table__cell tau-list__table__cell-iteration">','<div runas="property.iteration" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}" data-show-url="false"  data-placeholder-text="assign to {{term("iteration") "name"}}">',"{{if iteration}}","${iteration.name}","{{/if}}","</div>","</td>","{{/if}}",'<td class="tau-list__table__cell tau-list__table__cell-build">','<div runas="property.build.testPlanRun" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}" data-show-url="false"  data-placeholder-text="assign to {{term("build") "name"}}">',"{{if build}}","${build.name}","{{/if}}","</div>","</td>","{{if assignments}}",'<td class="tau-list__table__cell tau-list__table__cell-assignments" >','   <div runas="assignmentsList" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}" data-template:name="ui.template.assignments.mini">{{tmpl(assignments.groups) "cell-assignments"}}</div>',"</td>","{{/if}}",'<td class="tau-list__table__cell tau-list__table__cell-additionalactions" >','<div runas="menu.testPlanRun" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}"></div>',"</td>",'<td class="tau-list__table__cell tau-list__table__cell-actions" >','<div runas="entity.actions" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}"></div>',"</td>","</tr>","</tbody>","</table>","</li>"],dependencies:["ui.template.property.effort.content","ui.template.assignments.mini","cell-progress","cell-assignments","cell-name"]};return a.register(c)}),define("tau/ui/templates/list_/grid.entity/testplanrun/ui.template.list.grid.entity.row.testcaserun",["tau/core/templates-factory","tau/ui/templates/list_/grid.entity/ui.template.cell.progress","tau/ui/templates/list_/grid.entity/ui.template.cell.assignments","tau/ui/templates/list_/grid.entity/ui.template.cell.name","tau/ui/templates/assignmentsList/ui.template.assignments.mini","tau/ui/templates/property.effort/ui.template.property.effort.content"],function(a){var b={name:"list-grid-entity__rowtestcaserun",markup:["",'<li class="tau-list__list__item tau-list__list__item-testcaserun" role="item">','<table class="tau-list__table">',"<tbody>",'<tr class="i-item-${testcase.id} tau-list__table__row">','<td class="tau-list__table__cell tau-list__table__cell-dragdrop"  role="sortable-handler" ><div class="dragdrop_indicator"></div></td>','<td class="tau-list__table__cell tau-list__table__cell-id">','   <a class="tau-entitylink" href="#testcase/${testcase.id}" title="${testcase.name}"><em class="ui-type-icon ui-type-icon-testcase">${testcase.id}</em></a>',"</td>",'<td class="tau-list__table__cell tau-list__table__cell-name">','{{tmpl($item.data.testcase) "cell-name"}}',"</td>",'<td class="tau-list__table__cell tau-list__table__cell-priority">','<span class="tau-list-priority-${testcase.priority.kind}" runas="property.priority" data-context:general:id="${testcase.id}" data-context:general:entity-type:name="${testcase.__type}">',"${testcase.priority.name}","</span>","</td>",'<td class="tau-list__table__cell tau-list__table__cell-laststatus">',"<div>",'<div class="ui-status {{if passed === true}}ui-status_type_passed green{{/if}}{{if passed === false}}ui-status_type_failed red{{/if}}{{if passed === null}}ui-status_type_na grey{{/if}}">',"{{if runDate !== null}}","{{if passed === true}}","Passed","{{/if}}","{{if passed === false}}","Failed","{{/if}}","{{if passed === null}}","Skipped","{{/if}}","{{/if}}","</div>","</div>","</td>",'<td class="tau-list__table__cell tau-list__table__cell-actions" >','<div runas="entity.actions" data-context:general:id="${testcase.id}" data-context:general:entity-type:name="testcase"></div>',"</td>","</tr>","</tbody>","</table>","</li>"],dependencies:["ui.template.property.effort.content","ui.template.assignments.mini","cell-progress","cell-assignments","cell-name"]};return a.register(b)}),define("tau/ui/templates/list_/grid.entity/ui.template.list.grid.entity.group",["tau/core/templates-factory","tau/ui/templates/list_/grid.entity/ui.template.list.grid.entity.row","tau/ui/templates/list_/grid.entity/testplan/ui.template.list.grid.entity.row.testplanrun","tau/ui/templates/list_/grid.entity/testplanrun/ui.template.list.grid.entity.row.testcaserun"],function(a){var b={name:"list-grid-entity__group",markup:['<div class="tau-list__group {{if collapsed}} tau-list__group_collapsed_true{{/if}}" role="group">','   <div class="tau-list__group__header tau-list__group__collapse" role="expander">',"       {{if realGroup}}","           {{if realGroup.__type && realGroup.id}}",'           <a class="tau-list__group__id" href="#${realGroup.__type}/${realGroup.id}"><em class="ui-type-icon ui-type-icon-${realGroup.__type}">${realGroup.id}</em></a>',"           {{/if}}","       {{/if}}",'       <span class="tau-list__group__title" role="title">${title}</span>','       {{if subtitle}}<span class="tau-list__group__subtitle" >${subtitle}</span>{{/if}}','       <span class="tau-list__group__counter{{if items.length == 0}} tau-list__group__counter__empty{{/if}}" role="counter">${items.length}</span>',"   </div>",'${$item.data.config=$item.parent.data.config,""}','   <ul class="tau-list__list" role="list">',"      {{tmpl(items) $item.parent.data.config.currentView.rowTemplateName }}","   </ul>","</div>"],dependencies:["list-grid-entity__row","list-grid-entity__rowtestplanrun"]};return a.register(b)}),define("tau/ui/templates/list_/grid.entity/userstory/ui.template.list.grid.entity.row.testcase",["tau/core/templates-factory","tau/ui/tags/ui.tag.term","tau/ui/templates/list_/grid.entity/ui.template.cell.progress","tau/ui/templates/list_/grid.entity/ui.template.cell.assignments","tau/ui/templates/list_/grid.entity/ui.template.cell.name","tau/ui/templates/assignmentsList/ui.template.assignments.mini","tau/ui/templates/property.effort/ui.template.property.effort.content"],function(a,b){var c={name:"list-grid-entity__rowtestcase",tags:[b],markup:["",'<li class="tau-list__list__item" role="item">','<table class="tau-list__table">',"<tbody>",'<tr class="i-item-${id} tau-list__table__row {{if $item.data.entityState && $item.data.entityState.isFinal}} tau-list__table__row_isfinalstate_true{{/if}}">','<td class="tau-list__table__cell tau-list__table__cell-dragdrop"  role="sortable-handler" ><div class="dragdrop_indicator"></div></td>','<td class="tau-list__table__cell tau-list__table__cell-expander tau-list__itemexpander tau-list__itemexpander_state_closed"  role="item-expander" ><div class="tau-list__itemexpander__indicator "></div></td>','<td class="tau-list__table__cell tau-list__table__cell-id">','   <a class="tau-entitylink" href="#${__type}/${id}" title="${name}"><em class="ui-type-icon ui-type-icon-${__type.toLowerCase()}">${id}</em></a>',"</td>",'<td class="tau-list__table__cell tau-list__table__cell-name">','   {{tmpl($item.data) "cell-name"}}',"</td>",'<td class="tau-list__table__cell tau-list__table__cell-lastrundate">','<div runas="property.lastRunDate.list" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}">',"${lastRunDate}","</div>","</td>",'<td class="tau-list__table__cell tau-list__table__cell-laststatus">','<div runas="property.lastStatus" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}">',"${lastStatus}","</div>","</td>",'<td class="tau-list__table__cell tau-list__table__cell-testcaseactions">','<div class="button-group">','<button class="button success" role="action-pass">Pass</button>','<button class="button danger" role="action-fail">Fail</button>',"</div>","</td>","</tr>","</tbody>","</table>",'<table class="tau-list__table tau-list__table-additional tau-list__table-additional_state_closed">',"<tbody>","<tr>",'<td class="tau-list__table__cell tau-list__table__cell-dragdrop"></td>','<td class="tau-list__table__cell tau-list__table__cell-expander-additional"></td>','<td class="tau-list__table__cell tau-list__table__cell-steps">','<div class="tau-steps">','<h4 class="tau-steps__header">Steps</h4>','<div class="tau-steps__content">','<div runas="steps" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}">',"${steps}","</div>","</div>","</div>","</td>",'<td class="tau-list__table__cell tau-list__table__cell-success">','<div class="tau-success">','<h4 class="tau-success__header">Success</h4>','<div class="tau-success__content">','<div runas="success" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}">',"${success}","</div>","</div>","</div>","</td>","</tr>","</tbody>","</table>","</li>"],dependencies:["ui.template.property.effort.content","ui.template.assignments.mini","cell-progress","cell-assignments","cell-name"]};return a.register(c)}),define("tau/ui/templates/list_/ui.template.list.comment",["tau/core/templates-factory"],function(a){var b={name:"list-grid__comment",markup:['<div class="ui-entity-state-comment" role="comment-form" style="display:none;">','<div class="ui-state-comment-header">Please, provide comment</div>','<div class="ui-state-comment-field-container">','<textarea rows="5" class="ui-state-comment-field"></textarea>',"</div>",'<div class="button-group">','<button type="button" class="save button">Save</button>','<button type="button" class="save button">Cancel</button>',"</div>","</div>"]};return a.register(b)}),define("tau/ui/templates/list_/grid.entity.testcase/ui.template.list.grid.entity.testcase",["tau/core/templates-factory","tau/ui/templates/list_/grid.entity/ui.template.list.grid.entity.group","tau/ui/templates/list_/grid.entity/ui.template.list.grid.entity.row","tau/ui/templates/list_/grid.entity/testplan/ui.template.list.grid.entity.row.testplanrun","tau/ui/templates/list_/grid.entity/testplanrun/ui.template.list.grid.entity.row.testcaserun","tau/ui/templates/list_/grid.entity/userstory/ui.template.list.grid.entity.row.testcase","tau/ui/templates/list_/ui.template.list.comment"],function(a){var b={name:"list-grid-entity-testcase",markup:['<div class="tau-list tau-list-testcases">',"   {{if isEmpty === true}}",'<table class="tau-list__table tau-list__table-header">',"<tbody>",'<tr class="tau-list__table__row">','<td class="tau-list__table__cell tau-list__table__cell-header">','<button type="button" role="action-add" class="tau-add-testCase tau-button-addtestcase">${labelAdd} {{term("TestCase") "name"}}</button>',"</td>","</tr>","</tbody>","</table>",'      <div class="tau-list__empty-message">${config.currentView.emptyMessage}</div>',"   {{else}}",'     <div class="tau-list__content">',"       {{if groups && groups.length}}",'          {{tmpl(groups) "list-grid-entity__group"}}',"       {{/if}}","       {{if items && items.length}}",'           <div class="tau-list__group tau-list__group_flat_true"  role="group">','<table class="tau-list__table tau-list__table-header">',"<tbody>",'<tr class="tau-list__table__row">','<td class="tau-list__table__cell tau-list__table__cell-dragdrop"></td>','<td class="tau-list__table__cell tau-list__table__cell-expander tau-list__table__cell-header-expander" >','<div class="tau-list__itemexpander tau-list__itemexpander_state_closed"  role="item-expander-all">','<div class="tau-list__itemexpander__indicator "></div>',"</div>",'<div class="tau-list__itemexpander tau-list__itemexpander_state_open"  role="item-collapser-all">','<div class="tau-list__itemexpander__indicator "></div>',"</div>","</td>",'<td class="tau-list__table__cell tau-list__table__cell-header">','<button type="button" role="action-add" class="tau-add-testCase tau-button-addtestcase">${labelAdd} {{term("TestCase") "name"}}</button>',"</td>","</tr>","</tbody>","</table>",'               <ul class="tau-list__list"  role="list">',"                   {{tmpl(items) $item.data.config.currentView.rowTemplateName }}","               </ul>","           </div>","       {{/if}}","     </div>","   {{/if}}",'   <div class="tau-list__comment-holder">','          {{tmpl({}) "list-grid__comment"}}',"   </div>","</div>"],dependencies:["list-grid-entity__group","list-grid-entity__row","list-grid-entity__rowtestplanrun","list-grid-entity__rowtestcaserun","list-grid-entity__rowtestcase","list-grid__comment"]};return a.register(b)}),define("tau/models/dataProviders/userstory/userstory.model.provider.tasks.items",["Underscore","tau/models/dataProviders/model.provider.items.base"],function(_,a){return a.extend({fetch:function(a){this._fetch("tasks","task","priority",a)},_createDetailCommand:function(a){var b={};return b[a]=["id","name","numericPriority","tags","effort","effortCompleted","effortToDo","timeSpent","timeRemain",{userStory:["id"]},{entityState:["id","name","isInitial","isFinal","numericPriority"]},{roleEfforts:["id","effort","effortToDo",{role:["id","name","isPair","hasEffort"]}]},{owner:["id","firstName","lastName"]},{assignments:["id",{role:["id"]},{generalUser:["id","firstName","lastName"]}]},{priority:["id","name","importance"]},{project:["id"]}],b},_convertData:function(a){return a=this._super(a),a=this._calculateEffortToMaximum(a),this._sortByPriority(a)},_convertItem:function(a){var b=this,c={id:a.id,name:a.name,numericPriority:a.numericPriority,__type:a.__type,entityState:{id:a.entityState.id,name:a.entityState.name,isInitial:a.entityState.isInitial,isFinal:a.entityState.isFinal,numericPriority:a.entityState.numericPriority},tags:this._processTags(a),effort:this._getEffortData(a),assignments:this._processAssignments(a),priority:null,projectId:a.project.id,entitiesCount:0};return c.visibleEntityState=c.entityState,c}})}),define("tau/models/dataProviders/userstory/userstory.model.provider.bugs.items",["Underscore","tau/models/dataProviders/model.provider.items.base"],function(_,a){return a.extend({fetch:function(a){this._fetch("bugs","bug","severity",a)},_createDetailCommand:function(a){var b={};b[a]=["id","name","numericPriority","tags","effort","effortCompleted","effortToDo","timeSpent","timeRemain",{entityState:["id","name","isInitial","isFinal","numericPriority","isCommentRequired",{nextStates:["id"]}]},{roleEfforts:["id","effort","effortToDo",{role:["id","name","isPair","hasEffort"]}]},{owner:["id","firstName","lastName"]},{assignments:["id",{role:["id"]},{generalUser:["id","firstName","lastName"]}]},{severity:["id","name","importance"]}];var c={project:["id"]};return this.config.multiprojects&&c.project.push("abbreviation"),b[a].push(c),this.config.additionalFields&&_.indexOf(this.config.additionalFields,"iteration")>-1&&b[a].push({iteration:["id","name"]}),b},_convertData:function(a){return a=this._super(a),a=this._calculateEffortToMaximum(a),this._sortByPriority(a)},_convertItem:function(a){var b=this,c={id:a.id,name:a.name,numericPriority:a.numericPriority,__type:a.__type,entityState:{id:a.entityState.id,name:a.entityState.name,isInitial:a.entityState.isInitial,isFinal:a.entityState.isFinal,numericPriority:a.entityState.numericPriority},tags:this._processTags(a),effort:this._getEffortData(a),assignments:this._processAssignments(a),severity:{id:a.severity.id,name:a.severity.name,kind:b.importanceProcessor.getKind(a.severity.importance)},projectId:a.project.id,entitiesCount:0};return c.visibleEntityState=c.entityState,this.config.multiprojects&&(c.project={id:a.project.id,abbreviation:a.project.abbreviation}),this.config.additionalFields&&_.indexOf(this.config.additionalFields,"iteration")>-1&&(c.iteration={id:a.iteration?a.iteration.id:null,name:a.iteration?a.iteration.name:null}),c}})}),define("tau/ui/extensions/list/request/extension.list.entityState",["tau/components/extensions/component.extension.base"],function(a){return a.extend({"bus afterInit+dataBind+afterRender":function(a){var b=a.afterInit.data.config.store,c=a.dataBind.data.items,d=a.afterRender.data.element,e=_.pluck(c,"id");b.on({eventName:"afterSave",type:"general",listener:this,hasChanges:["entityState"]},function(a){var c=a.data.id;if(_.indexOf(e,c)==-1)return;b.get(a.data.cmd.type,{id:c,fields:["id",{entityState:["id","isFinal"]}]}).done({success:function(a){var b=a[0].data.entityState.isFinal;d.find(".i-item-"+c).toggleClass("tau-list__table__row_isfinalstate_true",b)}})})}})}),define("tau/ui/extensions/list/external.refresh.extension",["tau/components/extensions/component.extension.base","tau/core/global.bus"],function(a,b){return a.extend({"bus afterInit":function(){var a=this;if(a.signedUp)return;a.signedUp=!0;var c=function(){a.bus.fire("refresh")};_.each(a.config.externalRefreshEvents,function(d){b.get().on(d,c,a)})},"bus destroy":function(){b.get().removeAllListeners(this)}})}),define("tau/configurations/userStory.container.config",["Underscore","tau/configurations/baseAssignable.container.config","tau/models/model.extensions","tau/utils/utils.urlBuilder","tau/components/extensions/requestsList/extensions.requestList.labelRefresher","tau/components/extensions/testCaseList/extensions.testCaseList.labelRefresher","tau/components/extensions/entity/extension.requestList.remover","tau/models/dataProviders/model.provider.items.tasks_bugs","tau/models/dataProviders/model.provider.groups.tasks_bugs","tau/ui/extensions/list/extension.list.refresher","tau/models/dataProviders/userstory/userstory.model.provider.testcases.items","tau/ui/extensions/list/testcases/extension.list.testcases.actions","tau/ui/extensions/list/testcases/extension.list.testcases.actions.add.userStory","tau/ui/templates/list_/grid.entity.testcase/ui.template.list.grid.entity.testcase","tau/models/dataProviders/userstory/userstory.model.provider.tasks.items","tau/models/dataProviders/userstory/userstory.model.provider.bugs.items","tau/ui/extensions/list/request/extension.list.entityState","tau/ui/extensions/list/external.refresh.extension"],function(_,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=a.extend({init:function(a){this._super(a);var c=this;this.registerTab("Tasks & Bugs",{label:"taskbug",header:[{type:"label",text:[{toString:function(){return c.getNames("task")},value:c.getNames("task"),practices:["Planning"]},{toString:function(){return c.getNames("bug")},value:c.getNames("task"),practices:["Bug Tracking"]}],getBadgeText:b.calculateBugsAndTasksCount,badgeFieldName:"count"}],items:[{type:"list.editable",extensions:[i],itemsDataProvider:g,groupsDataProvider:h,groupBy:"entityState.name",multiprojects:!0,views:[{type:"grid.entity",group:{dataIndex:"name"}}]}]}),this.registerTab("Tasks",{label:"tasks",header:[{type:"label",text:c.getNames("task"),extensions:[q],externalRefreshEvents:["task.items.added"],getBadgeText:b.calculateTasksCount,badgeFieldName:"count"}],items:[{type:"quick.add",printable:!1,property:"userStory",entityType:"task",evictProperties:["tasks","tasks-count"],label:"Add "+c.getNames("task")},{type:"list.editable",extensions:[i,p],externalRefreshEvents:["task.items.added"],itemsDataProvider:n,multiprojects:!0,views:[{type:"grid.entity"}]}]}),this.registerTab("Bugs",{label:"bugs",practices:["Bug Tracking"],header:[{type:"label",text:c.getNames("bug"),getBadgeText:b.calculateBugsCount,badgeFieldName:"count",extensions:[q],externalRefreshEvents:["bug.items.added"]}],items:[{type:"quick.add",printable:!1,property:"userStory",entityType:"bug",evictProperties:["bugs","bugs-count"],label:"Add "+c.getNames("bug")},{type:"list.editable",extensions:[i,p],practices:["Bug Tracking"],externalRefreshEvents:["bug.items.added"],itemsDataProvider:o,multiprojects:!0,views:[{type:"grid.entity"}]}]}),this.registerTab("Test Cases",{label:"testcases",header:[{type:"label",text:c.getNames("testCase"),getBadgeText:b.calculateTesCasesCount,badgeFieldName:"count",extensions:[e]}],items:[{type:"list.editable",itemsDataProvider:j,multiprojects:!0,practices:["Test Cases"],views:[{type:"grid.entity.testcase",rowTemplateName:"list-grid-entity__rowtestcase",emptyMessage:"No test cases found"}],template:m,extensions:[k,l]}],practices:["Test Cases"]}),this.registerPanel("Requests",{type:"collapsible",collapsed:!0,header:[{type:"label",text:this.getNames("request"),getBadgeText:b.calculateRequestsCount,badgeFieldName:"count",extensions:[d]}],items:[{type:"requestList"}],extensions:[f],editions:["Pro"]})},getTabsAliases:function(){return["Description","Tasks","Bugs","Test Cases","Track","Flow"]},getPanelsAliases:function(){return["Look Switcher","Diagnostic","Progress Bar","Impediments","Assignments","Additional Info","Custom Fields","Requests"]},getActionsAliases:function(){return["Split","Add Task","Add Time","Add Bug","Add Test Case","Add Impediment","Attach to Request","Move or Copy","Convert","-----","Old View","Old Edit","Print","-----","Delete"]},getAdditionalInfoAliases:function(){return["Owner","Business Value","Release","Iteration","Feature","CreationDate","CompletionDate"]}});return r}),define("tau/configurations/task.container.config",["tau/configurations/baseAssignable.container.config","tau/models/model.extensions","tau/components/extensions/requestsList/extensions.requestList.labelRefresher","tau/components/extensions/entity/extension.requestList.remover"],function(a,b,c,d){var e=a.extend({init:function(a){this._super(a),this.registerPanel("Requests",{type:"collapsible",collapsed:!0,header:[{type:"label",text:this.getNames("request"),getBadgeText:b.calculateRequestsCount,badgeFieldName:"count",extensions:[c]}],items:[{type:"requestList"}],extensions:[d],editions:["Pro"]})},getAdditionalInfoAliases:function(){return["Owner","User Story For Task","CreationDate","CompletionDate"]},getActionsAliases:function(){return["Add Time","Add Impediment","Attach to Request","Convert","-----","Old View","Old Edit","Print","-----","Delete"]},getPanelsAliases:function(){return["Look Switcher","Diagnostic","Progress Bar","Impediments","Assignments","Additional Info","Custom Fields","Requests"]}});return e}),define("tau/components/extensions/requestsList/extension.requestList.refresher",["tau/components/extensions/component.extension.base"],function(a){return a.extend({init:function(){this._super.apply(this,arguments),this.bus.getGlobalBus().on("requestWasAttachedToEntity",this.onRequestsUpdates,this),this.bus.getGlobalBus().on("requestIsDetachedFromEntity",this.onRequestsUpdates,this),this.bus.getGlobalBus().on("bugWasMarkedAsDuplicate",this.onBugWasMarkedAsDuplicate,this)},destroy:function(){this.bus.getGlobalBus().removeListener("requestWasAttachedToEntity",this.onRequestsUpdates,this),this.bus.getGlobalBus().removeListener("requestIsDetachedFromEntity",this.onRequestsUpdates,this),this.bus.getGlobalBus().removeListener("bugWasMarkedAsDuplicate",this.onBugWasMarkedAsDuplicate,this),this._super.apply(this,arguments)},refreshComponentIfEntityFromCurrentContext:function(a){this.isEntityInContext(a)&&this.refresh()},onRequestsUpdates:function(a){this.refreshComponentIfEntityFromCurrentContext(a)},onBugWasMarkedAsDuplicate:function(a){var b=this.config.context.entity.id;b===a.data.bugId&&this.refresh()},refresh:function(){this.fire("evictProperty"),this.fire("refresh")}})}),define("tau/configurations/bug.container.config",["Underscore","tau/configurations/baseAssignable.container.config","tau/models/model.extensions","tau/components/extensions/requestsList/extensions.requestList.labelRefresher","tau/components/extensions/requestsList/extension.requestList.refresher","tau/components/extensions/entity/extension.requestList.remover"],function(_,a,b,c,d,e){var f=a.extend({init:function(a){this._super(a),this.registerPanel("Requests",{type:"collapsible",collapsed:!1,header:[{type:"label",text:this.getNames("request"),getBadgeText:b.calculateRequestsCount,badgeFieldName:"count",extensions:[c]}],items:[{type:"requestList"}],extensions:[e],editions:["Pro"]}),this.registerPanel("Duplicated Bugs",{type:"duplicateBugListPanel"})},getAdditionalInfoAliases:function(){return["Owner","Priority","Severity","Release","Iteration","User Story","Build","CreationDate","CompletionDate"]},getActionsAliases:function(){return["Add Time","Add Impediment","Attach to Request","Move or Copy","Convert","Find Duplicate","-----","Old View","Old Edit","Print","-----","Delete"]},getPanelsAliases:function(){return["Look Switcher","Diagnostic","Progress Bar","Duplicated Bugs","Impediments","Assignments","Additional Info","Custom Fields","Requests"]}});return f}),define("tau/models/dataProviders/request/request.model.provider.related_entities.items",["Underscore","tau/models/dataProviders/model.provider.items.base","tau/utils/utils.date"],function(_,a,b){return a.extend({fetch:function(a){var b=_.bind(function(b){this._loadFull(b,a)},this);this._fetch("relatedEntities","bug",null,b)},_loadFull:function(a,b){var c=_.pluck(this.config.context.getPractices(),"name"),d=this.config.store,e=[];_.forEach(a,function(a){var b=a.__type.toLowerCase(),f=["id",{entityState:["id","name","isInitial","isFinal","numericPriority","isCommentRequired",{nextStates:["id"]}]}];f.push({release:["id","name"]}),_.indexOf(c,"Iterations")!=-1&&f.push({iteration:["id","name"]}),b.toLowerCase()=="userstory"&&f.push({tasks:["id"]}),e.push(function(c){d.get(b,{id:a.id,fields:f}).done({success:function(b){a=_.extend(a,b[0].data),c(null,a)}})})}),_.series(e,function(a,c){b(c)})},_createDetailCommand:function(a){var b={};return b[a]=["id","name","numericPriority","endDate",{entityType:["id","name"]}],b},_convertItem:function(a){var c=this,d={id:a.id,name:a.name,numericPriority:a.numericPriority,__type:a.entityType.name,endDate:b.format.date.short(a.endDate),tags:[]};return d}})}),define("tau/models/dataProviders/request/request.model.provider.requesters.items",["Underscore","tau/models/dataProviders/model.provider.items.base","tau/utils/utils.date","tau/utils/utils.urlBuilder"],function(_,a,b,c){return a.extend({fetch:function(a){this._fetch("requesters","user",null,a)},_convertData:function(a){return a=this._super(a),_.reject(a,function(a){return a.deleteDate!=null})},_createDetailCommand:function(a){var b={};return b[a]=["id","firstName","lastName","deleteDate","email","login","kind"],b},_convertItem:function(a){var d=this,e={id:a.id,firstName:a.firstName,lastName:a.lastName,deleteDate:a.deleteDate,login:a.login,email:a.email,endDate:b.format.date.short(a.endDate),avatar:c.getAvatarUrl(a.id,32),url:c.getUserUrl(a.id,a.kind)};return e}})}),define("tau/ui/extensions/list/testplan/extension.list.editableCells",["tau/components/extensions/component.extension.base"],function(a){return a.extend({"bus afterRender":function(a){var b=a.data.element;b.find(".tau-list__table__cell:has(.tau-property_editable_true)").addClass("tau-list__table__cell_editable_true"),b.delegate(".tau-list__table__cell:has(.tau-property_editable_true)","click",function(a){$(a.currentTarget).hasClass("tau-property__value")==0&&(a.stopPropagation(),$(this).find(".tau-property__value").click())})}})}),define("tau/configurations/request.container.config",["tau/configurations/baseAssignable.container.config","tau/models/model.extensions","tau/models/dataProviders/request/request.model.provider.related_entities.items","tau/models/dataProviders/request/request.model.provider.requesters.items","tau/ui/extensions/list/testplan/extension.list.editableCells","tau/ui/extensions/list/request/extension.list.entityState"],function(a,b,c,d,e,f){var g=a.extend({init:function(a){this._super(a),this.registerAdditionalInfoItem("Owner",{label:{type:"label",text:"Owner"},field:{type:"property.owner.request"}}),this.registerAdditionalInfoItem("RequestType",{label:{type:"label",text:this.getTermName("RequestType")},field:{type:"property.requestType"}}),this.registerAdditionalInfoItem("Source",{label:{type:"label",text:"Source"},field:{type:"property.requestSource"}}),this.registerTab("Related Entities",{label:"related_entities",header:[{type:"label",text:"Related Entities",getBadgeText:b.calculateRelatedEntitiesCount,badgeFieldName:"count"}],items:[{type:"list.editable",sortable:!1,itemsDataProvider:c,views:[{rowTemplateName:"list-grid-entity__row_related_entity",type:"grid.entity"}],extensions:[e,f]}]}),this.registerTab("Requesters",{label:"requesters",header:[{type:"label",text:"Requesters",getBadgeText:b.calculateRequestersCount,badgeFieldName:"count"}],items:[{type:"list.editable",sortable:!1,itemsDataProvider:d,views:[{rowTemplateName:"list-grid-entity__row_requester",type:"grid.entity"}]}]})},getTabsAliases:function(){return["Description","Related Entities","Requesters","Track","Flow"]},getAdditionalInfoAliases:function(){return["Owner","Business Value","IsPrivate","RequestType","Source","CreationDate","CompletionDate"]},getActionsAliases:function(){return["Add Time","Create Bug","Create User Story","Create Task","Create Feature","Move or Copy","-----","Old View","Old Edit","Print","-----","Delete"]}});return g}),define("tau/models/dataProviders/testplanrun/testplanrun.model.provider.testcaseruns.items",["Underscore","tau/models/dataProviders/model.provider.items.base","tau/configurator"],function(_,a,b){return a.extend({fetch:function(a){this._fetch("testCaseRuns","testCaseRun","priority",a)},_createDetailCommand:function(a){var b={};return b[a]=["id","passed","executed","runDate",{testCases:["id","name","tags","numericPriority",{priority:["id","name","importance"]}]}],b},_convertData:function(a){return a=this._super(a),a=_.compact(a),_.sortBy(a,function(a){var b=a.testcase.numericPriority||0;return b})},_convertItem:function(a){var c=this,d=b.getApplicationPath();if(a.testCases.length==0)return null;var e=a.testCases[0];e.priority.kind=this.importanceProcessor.getKind(e.priority.importance);var f={id:a.id,__type:a.__type,name:e.name,testcase:{id:e.id,__type:e.__type,name:e.name,tags:this._processTags(e),priority:e.priority,numericPriority:e.numericPriority},passed:a.passed,runDate:a.runDate,executed:a.executed,status:a.passed===!0?"Passed":a.passed===!1?"Failed":"Skipped"};return f}})}),define("tau/configurations/testplanrun.container.config",["Underscore","tau/configurations/baseAssignable.container.config","tau/models/model.extensions","tau/models/dataProviders/testplanrun/testplanrun.model.provider.testcaseruns.items"],function(_,a,b,c){var d=a.extend({init:function(d){a.prototype.init.call(this,d),this.registerAdditionalInfoItem("Build",{label:{type:"label",text:this.getTermName("build")},field:{type:"property.build.testPlanRun"}}),this.registerPanel("Last Run",{type:"collapsible",collapsed:!1,header:[{type:"label",text:"Last Run"}],items:[{type:"testCasesRunResults"}]}),this.registerTab("Test Case Runs",{label:"testcaseruns",header:[{type:"label",text:this.getNames("testCaseRun"),getBadgeText:b.calculateTestCaseRunsCount,badgeFieldName:"count"}],items:[{type:"list",itemsDataProvider:c,sortable:!1,views:[{rowTemplateName:"list-grid-entity__rowtestcaserun",type:"grid.entity",emptyMessage:"No items found"}]}],practices:["Test Cases"]})},getAdditionalInfoAliases:function(){return["Test Plan","Build","Release","Iteration","CreationDate","CompletionDate"]},getActionsAliases:function(){return["Add Time","-----","Old View","Old Edit","Print","-----","Delete"]},getPanelsAliases:function(){return["Look Switcher","Diagnostic","Progress Bar","Last Run","Impediments","Assignments","Additional Info","Custom Fields"]},getTabsAliases:function(){return["Description","Test Case Runs","Track","Flow"]},getConfig:function(a){var b=this._super(a),c=_.jsonSelect(b,".additionalHeaders");return c[0][0]={type:"menu.actions.testplanrun",items:c[0][0].items},b}});return d}),define("tau/models/dataProviders/testcase/testcase.model.provider.testcaseruns.items",["Underscore","tau/models/dataProviders/model.provider.items.base","tau/utils/utils.date","tau/configurator"],function(_,a,b,c){return a.extend({fetch:function(a){this._fetch("testCaseRuns","testCaseRun","priority",a)},_createDetailCommand:function(a){var b={};return b[a]=["id","passed","executed","comment","runDate",{testPlanRun:["id","name","tags","numericPriority",{testPlan:["id","name"]},{priority:["id","name","importance"]},{release:["id","name"]},{iteration:["id","name"]},{build:["id","name"]}]}],b},_convertData:function(a){return a=this._super(a),a=_.compact(a),_.sortBy(a,function(a){return a.runDate}).reverse()},_convertItem:function(a){var c=this;if(a.runDate==null)return null;if(a.passed===null)return null;var d=a.testPlanRun,e=d.testPlan,f={id:a.id,__type:a.__type,name:e.name,testplan:e,comment:a.comment,testplanrun:{id:d.id,__type:d.__type,name:d.name},release:d.release,iteration:d.iteration,build:d.build,passed:a.passed,runDate:b.format.datetime.short(b.convertToTimezone(a.runDate)),executed:a.executed,status:a.passed===!0?"Passed":a.passed===!1?"Failed":"Skipped"};return f}})}),define("tau/configurations/testcase.container.config",["tau/configurations/baseContainable.container.config","tau/models/model.extensions","tau/models/dataProviders/testcase/testcase.model.provider.testcaseruns.items"],function(a,b,c){var d=a.extend({init:function(b){a.prototype.init.call(this,b),this.registerTab("Test Case Runs",{label:"testcaseruns",header:[{type:"label",text:"Runs"}],items:[{type:"list",itemsDataProvider:c,sortable:!1,views:[{rowTemplateName:"list-grid-entity__rowtestcaserun_testcase",type:"grid.entity",emptyMessage:"No items found"}]}],practices:["Test Cases"]})},getTabs:function(){var a=this._super.apply(this,arguments);return a[0].items[1].children=[{type:"container",layout:"table",cssClass:"test-case-description",cellsCssClass:["steps","success"],children:[{type:"container",children:[{type:"label",text:"Steps"},{type:"steps"}]},{type:"container",children:[{type:"label",text:"Success"},{type:"success"}]}]}],a},getTabsAliases:function(){return["Description","Test Case Runs","Track"]},getActionsAliases:function(){return["Move or Copy","-----","Old View","Old Edit","Print","-----","Delete"]},getAdditionalInfoAliases:function(){return["Business Value","User Story","Owner","CreationDate","Last Status","LastFailureComment","Last Run Date"]}});return d}),define("tau/components/extensions/testCaseList/extension.testPlanRun.testCaseList.edit.addTestCase",["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/utils/utils.urlBuilder","tau/core/termProcessor"],function(_,$,a,b,c){return a.extend({"bus afterRender+permissionsReady+dataBind":function(a){if(a.permissionsReady.data.editable){var d=a.dataBind.data,e=a.afterRender.data.element,f=this.config.context.getTerms(),g=new c(f),h=e.find(".tau-add-testCase"),i=$('<a class="tau-add-testCase">Add '+g.getTerms("TestCase").names+"</a>");i.attr("href",b.getAddTestCaseForTestPlanRunUrl(this.config.context.entity.id)),i.text(h.text()),h.replaceWith(i)}}})}),define("tau/models/dataProviders/testplan/testplan.model.provider.testplanruns.items",["Underscore","tau/models/dataProviders/model.provider.items.base","tau/configurator"],function(_,a,b){return a.extend({fetch:function(a){this._fetch("testPlanRuns","testPlanRun","severity",a)},_createDetailCommand:function(a){var b={};b[a]=["id","name","numericPriority","tags","effort","effortCompleted","effortToDo","timeSpent","timeRemain","passedCount","failedCount","notRunCount","testCaseRuns-count",{entityState:["id","name","isInitial","isFinal","numericPriority","isCommentRequired",{nextStates:["id"]}]},{roleEfforts:["id","effort","effortToDo",{role:["id","name","isPair","hasEffort"]}]},{assignments:["id",{role:["id"]},{generalUser:["id","firstName","lastName"]}]},{release:["id","name"]},{iteration:["id","name"]},{build:["id","name"]}];var c={project:["id"]};return this.config.multiprojects&&c.project.push("abbreviation"),b[a].push(c),this.config.additionalFields&&_.indexOf(this.config.additionalFields,"iteration")>-1&&b[a].push({iteration:["id","name"]}),b},_convertData:function(a){return a=this._super(a),_.sortBy(a,function(a){var b=a.numericPriority||0;return b})},_convertItem:function(a){var c=this,d=!0;this.config.context.isPracticeAvailable("Iterations")||(d=!1);var e=b.getApplicationPath(),f={id:a.id,name:a.name,numericPriority:a.numericPriority,__type:a.__type,entityState:{id:a.entityState.id,name:a.entityState.name,isInitial:a.entityState.isInitial,isFinal:a.entityState.isFinal,numericPriority:a.entityState.numericPriority},assignments:this._processAssignments(a),projectId:a.project.id,entitiesCount:0,release:a.release,iteration:a.iteration,build:a.build,passedCount:_.toNumber(a.passedCount)||0,failedCount:_.toNumber(a.failedCount)||0,notRunCount:_.toNumber(a.notRunCount)||0,isAvailableIteration:d,additionalActions:{}};return this.config.multiprojects&&(f.project={id:a.project.id,abbreviation:a.project.abbreviation}),this.config.additionalFields&&_.indexOf(this.config.additionalFields,"iteration")>-1&&(f.iteration={id:a.iteration?a.iteration.id:null,name:a.iteration?a.iteration.name:null}),f}})}),define("tau/models/dataProviders/strategies/model.provider.groups.strategy.base",["Underscore","tau/core/class"],function(_,a){return a.extend({fetch:function(a,b,c){},moveToGroup:function(a,b,c,d){},isAvailableForItem:function(a,b){},getCommentRequirements:function(a,b){}})}),define("tau/models/dataProviders/strategies/model.provider.groups.strategy.states",["Underscore","tau/models/dataProviders/strategies/model.provider.groups.strategy.base"],function(_,a){return a.extend({fetch:function(a,b,c){},moveToGroup:function(a,b,c,d,e){var f=_.find(d.realGroups,function(a){return a.id==b.entityState.id}),g=_.find(c.realGroups,function(a){return a.entityType.name.toLowerCase()==b.__type.toLowerCase()&&a.process.id==f.process.id});if(!g||g.id==f.id){e.call(null);return}var h=[];h.push(function(c){a.save(b.__type,{id:b.id,$set:{entityState:{id:g.id}},fields:["id",{entityState:["id","name","isFinal"]}]}).done({success:function(){c(null,arguments)}})}),h.push(function(c){a.get(b.__type,{id:b.id,fields:["id",{entityState:["id","name","isFinal"]}]}).done({success:function(a){c(null,a[0].data)}})}),_.series(h,function(a,b){_.isFunction(e)&&e.call(null,{changed:b[1]})})},isAvailableForItem:function(a,b,c){var d=_.find(c.realGroups,function(b){return b.id==a.entityState.id}),e=_.find(b.realGroups,function(b){return b.entityType.name.toLowerCase()==a.__type.toLowerCase()&&b.process.id==d.process.id}),f=_.pluck(d.nextStates,"id");return f.push(d.id),e&&_.include(f,e.id)},getCommentRequirements:function(a,b,c){var d=_.find(c.realGroups,function(b){return b.id==a.entityState.id}),e=[];return _.forEach(b,function(b){var c=_.find(b.realGroups,function(b){return b.entityType.name.toLowerCase()==a.__type.toLowerCase()&&b.process.id==d.process.id});e.push({isCommentRequired:c?c.isCommentRequired:!1})}),e}})}),define("tau/models/dataProviders/testplan/testplan.model.provider.testplanruns.groups",["Underscore","tau/models/dataProviders/model.provider.groups.base","tau/models/dataProviders/strategies/model.provider.groups.strategy.states"],function(_,a,b){return a.extend({init:function(a){this._super(a),this.strategy=new b},fetch:function(a,b,c){var d=_(b).pluck("projectId"),e=this.config.store,f={fields:[{process:["id"]}],list:!0};e.get("projects",f,{scope:this,success:this.onProjects(d,a,c)}).done()},onProjects:function(a,b,c){return function(d){var e=_(d.data).chain().select(function(b){return _(a).include(b.id)}).map(function(a){return a.process.id}).uniq().value(),f=function(a){var b=(a.entityType.name||"").toLowerCase();return b==="testplanrun"&&_(e).include(a.process.id)};return this._fetchState(b,f,c)}},moveToGroup:function(a,b,c,d){var e=this.config.store;return this.strategy.moveToGroup(e,a,b,c,d)},isAvailableForItem:function(a,b,c){return this.strategy.isAvailableForItem(a,b,c)},getCommentRequirements:function(a,b,c){return this.strategy.getCommentRequirements(a,b,c)}})}),define("tau/models/dataProviders/testplan/testplan.model.provider.testcases.items",["Underscore","tau/models/dataProviders/userstory/userstory.model.provider.testcases.items","tau/utils/utils.date","tau/configurator"],function(_,a,b,c){return a.extend({})}),define("tau/ui/extensions/list/testcases/extension.list.testcases.actions.add.testPlan",["Underscore","tau/components/extensions/component.extension.base","tau/configurator","tau/utils/utils.urlBuilder"],function(_,a,b,c){return a.extend({"bus action.add":function(a){var d=a.data.entity;b.getRouting().redirect(c.getAddTestCaseForTestPlanRunUrl(d.id))}})}),define("tau/configurations/testplan.container.config",["tau/configurations/baseContainable.container.config","tau/models/model.extensions","tau/utils/utils.urlBuilder","tau/components/extensions/testCaseList/extension.testPlanRun.testCaseList.edit.addTestCase","tau/components/extensions/testCaseList/extensions.testCaseList.labelRefresher","tau/ui/extensions/list/testplan/extension.list.editableCells","tau/models/dataProviders/testplan/testplan.model.provider.testplanruns.items","tau/models/dataProviders/testplan/testplan.model.provider.testplanruns.groups","tau/models/dataProviders/testplan/testplan.model.provider.testcases.items","tau/ui/extensions/list/testcases/extension.list.testcases.actions","tau/ui/extensions/list/testcases/extension.list.testcases.actions.add.testPlan","tau/ui/templates/list_/grid.entity.testcase/ui.template.list.grid.entity.testcase","tau/ui/extensions/list/external.refresh.extension"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=a.extend({init:function(d){a.prototype.init.call(this,d);var n=d.context.entity;this.registerAction("Add Test Plan Run",{label:"Add "+this.getTermName("TestPlanRun"),url:c.getAddTestRunForTestPlanUrl(n.id),practices:["Test Cases"]}),this.registerAction("Assign Test Cases",{label:"Assign "+this.getTermName("TestCase"),url:c.getAssignTestCasesForTestPlanUrl(n.id),practices:["Test Cases"]}),this.registerTab("Test Cases",{label:"testcases",header:[{type:"label",text:this.getNames("testCase"),getBadgeText:b.calculateTesCasesCount,badgeFieldName:"count",extensions:[e]}],items:[{type:"list.editable",itemsDataProvider:i,multiprojects:!0,practices:["Test Cases"],views:[{type:"grid.entity.testcase",rowTemplateName:"list-grid-entity__rowtestcase",emptyMessage:"No test cases found"}],template:l,extensions:[j,k],labelAdd:"Assign"}],practices:["Test Cases"]}),this.registerTab("Test Plan Runs",{label:"testplanruns",header:[{type:"label",text:this.getNames("testPlanRun"),getBadgeText:b.calculateTestPlanRunsCount,extensions:[m],externalRefreshEvents:["testPlanRun.items.added"],badgeFieldName:"count"}],items:[{type:"quick.add",printable:!1,property:"testPlan",entityType:"testPlanRun",evictProperties:["testPlanRuns-count"],label:"Add "+this.getNames("TestPlanRun")},{type:"list.editable",itemsDataProvider:g,externalRefreshEvents:["testPlanRun.items.added"],groupsDataProvider:h,groupBy:"entityState.name",multiprojects:!0,views:[{rowTemplateName:"list-grid-entity__rowtestplanrun",type:"grid.entity",group:{dataIndex:"name"}}],extensions:[f]}],practices:["Test Cases"]})},getTabsAliases:function(){return["Description","Test Cases","Test Plan Runs","Track"]},getAdditionalInfoAliases:function(){return["Initial Estimate","Owner","CreationDate"]},getActionsAliases:function(){return["Add Test Plan Run","Assign Test Cases","-----","Old View","Old Edit","Print","-----","Delete"]}});return n}),define("tau/models/dataProviders/model.provider.items.user_stories",["Underscore","tau/models/dataProviders/model.provider.items.base"],function(_,a){return a.extend({fetch:function(a){this._fetch("userStories","userStory","priority",a)},fetchForGroup:function(a,b){var c=this.config.context,d=c.entity.entityType.name,e=c.entity.id,f=c.applicationContext.processes[0].practices,g=_.pluck(f,"name"),h=this.config.store,i="userStories",j="userStory",k=this._createDetailCommand(i),l={id:e,nested:!0,fields:[k]};h=h.get(d,l);var m=this,n=function(c){var d=_(c).pluck("data")[0][i];_.map(d,function(a){a.__type=j}),d=_.filter(d,function(b){return b.entityState.name==a.key});var e=m._convertData(d);b(e)};h.done({success:n,scope:m})},_createDetailCommand:function(a){var b={};b[a]=["id","name","numericPriority","tags",{priority:["id","name","importance"]},"effort","effortCompleted","effortToDo","timeSpent","timeRemain","tasks-count","tasks-effort-sum","tasks-effortToDo-sum",{feature:["id"]},{entityState:["id","name","isInitial","isFinal","numericPriority","isCommentRequired",{nextStates:["id"]}]},{roleEfforts:["id","effort","effortToDo",{role:["id","name","isPair","hasEffort"]}]},{assignments:["id",{role:["id"]},{generalUser:["id","firstName","lastName"]}]}];var c={project:["id"]};return this.config.multiprojects&&c.project.push("abbreviation"),b[a].push(c),this.config.additionalFields&&_.indexOf(this.config.additionalFields,"iteration")>-1&&b[a].push({iteration:["id","name"]}),b},_convertData:function(b){return b=a.prototype._convertData.call(this,b),b=this._calculateEffortToMaximum(b),this._sortByPriority(b)},_convertItem:function(a){var b=this,c={id:a.id,name:a.name,__type:a.__type,numericPriority:a.numericPriority,entityState:{id:a.entityState.id,name:a.entityState.name,isInitial:a.entityState.isInitial,isFinal:a.entityState.isFinal,numericPriority:a.entityState.numericPriority},tags:this._processTags(a),priority:{id:a.priority.id,name:a.priority.name,kind:b.importanceProcessor.getKind(a.priority.importance)},effort:this._getEffortData(a),assignments:this._processAssignments(a),projectId:a.project.id,entitiesCount:a["tasks-count"]};return this.config.multiprojects&&(c.project={id:a.project.id,abbreviation:a.project.abbreviation}),this.config.additionalFields&&_.indexOf(this.config.additionalFields,"iteration")>-1&&(c.iteration={id:a.iteration?a.iteration.id:null,name:a.iteration?a.iteration.name:null}),c}})}),define("tau/models/dataProviders/iteration/iteration.model.provider.user_stories_bugs.items",["Underscore","tau/models/dataProviders/model.provider.items.base","tau/models/dataProviders/model.provider.items.user_stories","tau/models/dataProviders/model.provider.items.bugs"],function(_,a,b,c){return a.extend({init:function(a){this.config=a,this.providers=[new b(a)],this.config.context.isPracticeAvailable("Bug Tracking")&&this.providers.push(new c(a))},_convertData:function(a){return a=this._calculateEffortToMaximum(a),this._sortByPriority(a)},fetch:function(a){var b=this,c=function(c){var d=b._convertData(c);a(d)},d=[];_.forEach(b.providers,function(a){d.push(function(b){a.fetch(function(a){b(null,a)})})}),_.parallel(d,function(a,b){var d=_.flatten(b);c(d)})}})}),define("tau/models/dataProviders/iteration/iteration.model.provider.user_stories_bugs.groups",["Underscore","tau/models/dataProviders/model.provider.groups.base","tau/models/dataProviders/strategies/model.provider.groups.strategy.states","tau/utils/utils.date"],function(_,a,b,c){return a.extend({init:function(a){this._super(a),this.strategy=new b},fetch:function(a,b,c){var d=["userstory"];return this.config.context.isPracticeAvailable("Bug Tracking")&&d.push("bug"),this._fetchState(a,d,c)},moveToGroup:function(a,b,c,d){var e=this.config.store;return this.strategy.moveToGroup(e,a,b,c,d)},isAvailableForItem:function(a,b,c){return this.strategy.isAvailableForItem(a,b,c)},getCommentRequirements:function(a,b,c){return this.strategy.getCommentRequirements(a,b,c)}})}),define("tau/configurations/iteration.container.config",["tau/configurations/baseContainable.container.config","tau/models/model.extensions","tau/utils/utils.urlBuilder","tau/models/dataProviders/iteration/iteration.model.provider.user_stories_bugs.items","tau/models/dataProviders/iteration/iteration.model.provider.user_stories_bugs.groups","tau/ui/extensions/list/external.refresh.extension"],function(a,b,c,d,e,f){var g=a.extend({init:function(g){a.prototype.init.call(this,g);var h=g.context.entity;this.registerAction("Add User Story",{label:"Add "+this.getTermName("userStory"),url:c.getAddUserStoryForIterationUrl(h.id)}),this.registerPanel("Progress Bar",{type:"iteration.progressBar"});var i=this;this.registerTab("User Stories & Bugs",{label:"userStories",header:[{type:"label",text:[{toString:function(){return i.getNames("userStory")},value:this.getNames("userStory")},{toString:function(){return i.getNames("bug")},value:this.getNames("bug"),practices:["Bug Tracking"]}],extensions:[f],externalRefreshEvents:["userStory.items.added","bug.items.added"],getBadgeText:b.calculateUserStoriesAndBugsCount,badgeFieldName:"count"}],items:[{type:"container",layout:"table",printable:!1,cssClass:"quick-add-container",cellsCssClass:["c1","c2"],children:[{type:"quick.add",property:"iteration",entityType:"userStory",evictProperties:["userStories","userStories-count"],label:"Add "+i.getNames("UserStory")},{type:"quick.add",property:"iteration",entityType:"bug",practices:["Bug Tracking"],evictProperties:["bugs","bugs-count"],label:"Add "+i.getNames("Bug")}]},{type:"list.editable",itemsDataProvider:d,groupsDataProvider:e,externalRefreshEvents:["userStory.items.added","bug.items.added"],groupBy:"entityState.name",views:[{type:"grid.entity",group:{dataIndex:"name"}}]}]})},getPanelsAliases:function(){return["Look Switcher","Diagnostic","Progress Bar","Additional Info","Custom Fields"]},getActionsAliases:function(){return["Add User Story","-----","Old View","Old Edit","Print","-----","Delete"]},getTabsAliases:function(){return["Description","User Stories & Bugs","Track"]},getAdditionalInfoAliases:function(){return["StartDate","FinishDate","Release","Velocity","Assigned Effort"]}});return g}),define("tau/models/dataProviders/feature/feature.model.provider.user_stories.items",["Underscore","tau/models/dataProviders/model.provider.items.base","tau/models/dataProviders/model.provider.items.user_stories"],function(_,a,b){return a.extend({init:function(a){this.config=a,this.providers=[new b(a)]},_convertData:function(a){return a=this._calculateEffortToMaximum(a),this._sortByPriority(a)},fetch:function(a){var b=this,c=function(c){var d=b._convertData(c);a(d)},d=[];_.forEach(b.providers,function(a){d.push(function(b){a.fetch(function(a){b(null,a)})})}),_.parallel(d,function(a,b){var d=_.flatten(b);c(d)})}})}),define("tau/models/dataProviders/model.provider.groups.user_stories",["Underscore","tau/models/dataProviders/model.provider.groups.base"],function(_,a){return a.extend({fetch:function(a,b,c){var d=_(b).pluck("projectId"),e=this.config.store,f={fields:[{process:["id"]}],list:!0};e.get("projects",f,{scope:this,success:this.onProjects(d,a,c)}).done()},onProjects:function(a,b,c){return function(d){var e=_(d.data).chain().select(function(b){return _(a).include(b.id)}).map(function(a){return a.process.id}).uniq().value(),f=function(a){var b=(a.entityType.name||"").toLowerCase();return b==="userstory"&&_(e).include(a.process.id)};return this._fetchState(b,f,c)}},fetchForGroup:function(a,b){},moveToGroup:function(a,b,c,d){return this._moveToGroupByState(a,b,c,d)}})}),define("tau/models/dataProviders/feature/feature.model.provider.user_stories.groups",["Underscore","tau/models/dataProviders/model.provider.groups.user_stories","tau/models/dataProviders/strategies/model.provider.groups.strategy.states","tau/utils/utils.date"],function(_,a,b,c){return a.extend({init:function(a){this._super(a),this.strategy=new b},moveToGroup:function(a,b,c,d){var e=this.config.store;return this.strategy.moveToGroup(e,a,b,c,d)},isAvailableForItem:function(a,b,c){return this.strategy.isAvailableForItem(a,b,c)},getCommentRequirements:function(a,b,c){return this.strategy.getCommentRequirements(a,b,c)}})}),define("tau/configurations/feature.container.config",["tau/configurations/baseContainable.container.config","tau/models/model.extensions","tau/utils/utils.urlBuilder","tau/components/extensions/requestsList/extensions.requestList.labelRefresher","tau/components/extensions/entity/extension.requestList.remover","tau/models/dataProviders/feature/feature.model.provider.user_stories.items","tau/models/dataProviders/feature/feature.model.provider.user_stories.groups","tau/ui/extensions/list/external.refresh.extension"],function(a,b,c,d,e,f,g,h){var i=a.extend({init:function(i){a.prototype.init.call(this,i);var j=i.context.entity;this.registerAction("Add User Story",{label:"Add "+this.getTermName("userStory"),url:c.getAddUserStoryForFeatureUrl(j.id)}),this.registerPanel("Progress Bar",{type:"progressBar"}),this.registerPanel("Requests",{type:"collapsible",collapsed:!0,header:[{type:"label",text:this.getNames("request"),getBadgeText:b.calculateRequestsCount,badgeFieldName:"count",extensions:[d]}],items:[{type:"requestList"}],extensions:[e],editions:["Pro"]}),this.registerPanel("Impediments",{type:"impedimentListPanel"}),this.registerPanel("Total Effort",{type:"feature.totalEffort"}),this.registerPanel("Assignments",{type:"collapsible",collapsed:!1,header:[{type:"label",text:"Assignments"}],items:[{type:"feature.assignmentList"}]}),this.registerTab("User Stories",{label:"userStories",header:[{type:"label",text:this.getNames("userStory"),getBadgeText:b.calculateUserStoriesCount,extensions:[h],externalRefreshEvents:["userStory.items.added"],badgeFieldName:"count"}],items:[{type:"quick.add",printable:!1,property:"feature",entityType:"userStory",evictProperties:["userStories-count"],label:"Add "+this.getNames("UserStory")},{type:"list.editable",externalRefreshEvents:["userStory.items.added"],itemsDataProvider:f,groupsDataProvider:g,groupBy:"entityState.name",multiprojects:!0,views:[{type:"grid.entity",group:{dataIndex:"name"}}]}]})},getTabsAliases:function(){return["Description","User Stories","Track","Flow"]},getActionsAliases:function(){return["Add User Story","Add Impediment","Attach to Request","Move or Copy","Convert","-----","Old View","Old Edit","Print","-----","Delete"]},getPanelsAliases:function(){return["Look Switcher","Diagnostic","Progress Bar","Impediments","Total Effort","Assignments","Additional Info","Custom Fields","Requests"]},getAdditionalInfoAliases:function(){return["Owner","Initial Estimate","Business Value","Release","CreationDate","CompletionDate"]}});return i}),define("tau/models/dataProviders/model.provider.items.user_stories_bugs",["Underscore","tau/models/dataProviders/model.provider.items.base","tau/models/dataProviders/model.provider.items.user_stories","tau/models/dataProviders/model.provider.items.bugs"],function(_,a,b,c){return a.extend({init:function(a){this.config=a,this.providers=[new b(a)],this.config.context.isPracticeAvailable("Bug Tracking")&&this.providers.push(new c(a))},_convertData:function(a){return a=this._calculateEffortToMaximum(a),this._sortByPriority(a)},fetch:function(a){var b=this,c=function(c){var d=b._convertData(c);a(d)},d=[];_.forEach(b.providers,function(a){d.push(function(b){a.fetch(function(a){b(null,a)})})}),_.parallel(d,function(a,b){var d=_.flatten(b);c(d)})}})}),define("tau/models/dataProviders/release/release.model.provider.iterations.items",["Underscore","tau/models/dataProviders/model.provider.items.user_stories_bugs","tau/models/dataProviders/model.provider.items.user_stories","tau/models/dataProviders/model.provider.items.bugs"],function(_,a,b,c){return a.extend({init:function(a){this.config=a,a.additionalFields=["iteration"],this.providers=[new b(a)],this.config.context.isPracticeAvailable("Bug Tracking")&&this.providers.push(new c(a))},_convertData:function(b){return b=a.prototype._convertData.call(this,b),_.forEach(b,function(a){a.visibleEntityState=a.entityState.name}),this._sortByPriority(b)}})}),define("tau/models/dataProviders/release/release.model.provider.iterations.groups",["Underscore","tau/models/dataProviders/model.provider.groups.base","tau/utils/utils.date"],function(_,a,b){return a.extend({fetch:function(a,b,c){var d=["userstory"];return this.config.context.isPracticeAvailable("Bug Tracking")&&d.push("bug"),this._fetchIterations(a,d,c)},_fetchIterations:function(a,c,d){var e=this.config.context,f=e.entity.entityType.name,g=e.entity.id,h=this.config.store,i={id:g,nested:!0,fields:[{iterations:["id","name","startDate","endDate"]}]},j="d MMM";h=h.get("release",i),h.done({success:function(a){var c=_(a).pluck("data")[0].iterations,e=[];c=_.sortBy(c,function(a){return-1*b.parse(a.startDate)}),_.forEach(c,function(a){var c=b.parse(a.startDate).clearTime(),d=b.parse(a.endDate).clearTime(),f=!0,h=!1;Date.today().between(c,d)&&(f=!1,h=!0);var i=c.toString(j)+" / "+d.toString(j);i=i+" ("+Math.floor((d.getTime()-c.getTime())/1e3/60/60/24+1)+" days)",h&&(i+=" (current)"),a.releaseId=g,e.push({key:a.id,title:a.name,subtitle:i,collapsed:f,realGroup:a})}),e.unshift({key:null,title:"Backlog",collapsed:!0,realGroup:{id:null,releaseId:g}}),_.forEach(e,function(a){a.items=[]}),d(e)},scope:this})},moveToGroup:function(a,b,c,d){return this._moveToGroupByIteration(a,b,c,d)},_moveToGroupByIteration:function(a,b,c,d){var e=this.config.store,f=b.realGroup;if(!f||a.iteration&&f.id==a.iteration.id){d.call(null);return}var g=[],h={release:{id:f.releaseId}};f.id?h.iteration={id:f.id}:h.iteration=null,g.push(function(b){e.save(a.__type,{id:a.id,$set:h,fields:["id",{iteration:["id"]}]}).done({success:function(){b(null,arguments)}})}),g.push(function(b){e.get(a.__type,{id:a.id,fields:["id",{iteration:["id"]}]}).done({success:function(a){b(null,a[0].data)}})}),_.series(g,function(a,b){_.isFunction(d)&&d.call(null,{changed:b[1]})})}})}),define("tau/ui/extensions/list/iterations/extension.list.release_iterations",["tau/components/extensions/component.extension.base"],function(a){return a.extend({"bus preDataBind":function(a){var b=a.data;b.groups.length<=1?b.isEmpty=!0:b.isEmpty=!1}})}),define("tau/models/dataProviders/release/release.model.provider.user_stories_bugs.items",["Underscore","tau/models/dataProviders/model.provider.items.user_stories_bugs","tau/models/dataProviders/model.provider.items.user_stories","tau/models/dataProviders/model.provider.items.bugs"],function(_,a,b,c){return a.extend({init:function(a){this.config=a,a.additionalFields=["iteration"],this.providers=[new b(a)],this.config.context.isPracticeAvailable("Bug Tracking")&&this.providers.push(new c(a))},_convertData:function(b){var c=a.prototype._convertData.call(this,b);return this._sortByPriority(c)}})}),define("tau/models/dataProviders/release/release.model.provider.user_stories_bugs.groups",["Underscore","tau/models/dataProviders/model.provider.groups.base","tau/models/dataProviders/strategies/model.provider.groups.strategy.states","tau/utils/utils.date"],function(_,a,b,c){return a.extend({init:function(a){this._super(a),this.strategy=new b},fetch:function(a,b,c){var d=["userstory"];return this.config.context.isPracticeAvailable("Bug Tracking")&&d.push("bug"),this._fetchState(a,d,c)},moveToGroup:function(a,b,c,d){var e=this.config.store;return this.strategy.moveToGroup(e,a,b,c,d)},isAvailableForItem:function(a,b,c){return this.strategy.isAvailableForItem(a,b,c)},getCommentRequirements:function(a,b,c){return this.strategy.getCommentRequirements(a,b,c)}})}),define("tau/models/dataProviders/model.provider.items.features",["Underscore","tau/models/dataProviders/model.provider.items.base"],function(_,a){return a.extend({fetch:function(a){this.config.store.get("entityState",{fields:["id",{entityType:["id","name"]},{role:["id","name"]},{process:["id"]}]}).get("project",{fields:["id",{process:["id"]}]}).done({scope:this,success:this.onReadyToFetch(a)})},onReadyToFetch:function(a){return function(b){this.entityStates=b[0].data,this.projects=b[1].data,this._fetch("features","feature","priority",a)}},_createDetailCommand:function(a){var b={};return b[a]=["id","name","numericPriority","tags","effort","effortCompleted","effortToDo","timeSpent","timeRemain","userStories-count",{entityState:["id","name","isInitial","isFinal","numericPriority"]},{assignments:["id",{role:["id"]},{generalUser:["id","firstName","lastName"]}]},{priority:["id","name","importance"]},{project:["id"]}],b},_convertData:function(b){return b=a.prototype._convertData.call(this,b),_.forEach(b,function(a){a.visibleEntityState=a.entityState.name}),b=this._calculateEffortToMaximum(b),this._sortByPriority(b)},_convertItem:function(a){var b=this,c=_(this.projects).detect(function(b){return b.id===a.project.id}),d=c.process.id,e=_(this.entityStates).chain().select(function(a){return a.entityType.name.toLowerCase()==="feature"&&a.process.id===d&&a.role!==null}).pluck("role").value(),f=_(e).reduce(function(a,b,c){if(0==c||!_.detect(a,function(a){return a.id===b.id}))a[a.length]=b;return a},[]);a.roleEfforts=_(f).map(function(a){return{role:a}});var g={id:a.id,name:a.name,__type:a.__type,numericPriority:a.numericPriority,entityState:{id:a.entityState.id,name:a.entityState.name,isInitial:a.entityState.isInitial,isFinal:a.entityState.isFinal,numericPriority:a.entityState.numericPriority},tags:this._processTags(a),effort:this._getEffortData(a),assignments:this._processAssignments(a),priority:{id:a.priority.id,name:a.priority.name,kind:b.importanceProcessor.getKind(a.priority.importance)},entitiesCount:a["userStories-count"]};return g}})}),define("tau/models/dataProviders/release/release.model.provider.bugs.items",["Underscore","tau/models/dataProviders/model.provider.items.base"],function(_,a){return a.extend({fetch:function(a){this._fetch("bugs","bug","severity",a)},_createDetailCommand:function(a){var b={};return b[a]=["id","name","numericPriority","tags","effort","effortCompleted","effortToDo","timeSpent","timeRemain",{entityState:["id","name","isInitial","isFinal","numericPriority","isCommentRequired",{nextStates:["id"]}]},{roleEfforts:["id","effort","effortToDo",{role:["id","name","isPair","hasEffort"]}]},{owner:["id","firstName","lastName"]},{assignments:["id",{role:["id"]},{generalUser:["id","firstName","lastName"]}]},{severity:["id","name","importance"]},{project:["id"]}],b},_convertData:function(a){return a=this._super(a),a=this._calculateEffortToMaximum(a),this._sortByPriority(a)},_convertItem:function(a){var b=this,c={id:a.id,name:a.name,numericPriority:a.numericPriority,__type:a.__type,entityState:{id:a.entityState.id,name:a.entityState.name,isInitial:a.entityState.isInitial,isFinal:a.entityState.isFinal,numericPriority:a.entityState.numericPriority},tags:this._processTags(a),effort:this._getEffortData(a),assignments:this._processAssignments(a),severity:{id:a.severity.id,name:a.severity.name,kind:b.importanceProcessor.getKind(a.severity.importance)},projectId:a.project.id,entitiesCount:0};return c.visibleEntityState=c.entityState,c}})}),define("tau/models/dataProviders/release/release.model.provider.user_stories.items",["Underscore","tau/models/dataProviders/model.provider.items.base"],function(_,a){return a.extend({fetch:function(a){this._fetch("userStories","userStory","priority",a)},_createDetailCommand:function(a){var b={};return b[a]=["id","name","numericPriority","tags",{priority:["id","name","importance"]},"effort","effortCompleted","effortToDo","timeSpent","timeRemain","tasks-count","tasks-effort-sum","tasks-effortToDo-sum",{entityState:["id","name","isInitial","isFinal","numericPriority","isCommentRequired",{nextStates:["id"]}]},{roleEfforts:["id","effort","effortToDo",{role:["id","name","isPair","hasEffort"]}]},{assignments:["id",{role:["id"]},{generalUser:["id","firstName","lastName"]}]},{project:["id"]}],b},_convertData:function(b){return b=a.prototype._convertData.call(this,b),b=this._calculateEffortToMaximum(b),this._sortByPriority(b)},_convertItem:function(a){var b=this,c={id:a.id,name:a.name,__type:a.__type,numericPriority:a.numericPriority,entityState:{id:a.entityState.id,name:a.entityState.name,isInitial:a.entityState.isInitial,isFinal:a.entityState.isFinal,numericPriority:a.entityState.numericPriority},tags:this._processTags(a),priority:{id:a.priority.id,name:a.priority.name,kind:b.importanceProcessor.getKind(a.priority.importance)},effort:this._getEffortData(a),assignments:this._processAssignments(a),projectId:a.project.id,entitiesCount:a["tasks-count"]};return c.visibleEntityState=c.entityState,c}})}),define("tau/configurations/release.container.config",["tau/configurations/baseContainable.container.config","tau/models/model.extensions","tau/models/dataProviders/release/release.model.provider.iterations.items","tau/models/dataProviders/release/release.model.provider.iterations.groups","tau/ui/extensions/list/iterations/extension.list.release_iterations","tau/models/dataProviders/release/release.model.provider.user_stories_bugs.items","tau/models/dataProviders/release/release.model.provider.user_stories_bugs.groups","tau/models/dataProviders/model.provider.items.features","tau/models/dataProviders/release/release.model.provider.bugs.items","tau/models/dataProviders/release/release.model.provider.user_stories.items","tau/ui/extensions/list/request/extension.list.entityState","tau/ui/extensions/list/external.refresh.extension"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=a.extend({init:function(a){this._super(a);var f=this;this.registerPanel("Progress Bar",{type:"release.progressBar"}),this.registerTab("Iterations",{practices:["Iterations"],label:"iterations",header:[{type:"label",text:this.getNames("iteration"),getBadgeText:b.calculateIterationsCount,badgeFieldName:"count"}],items:[{practices:["Iterations"],type:"list",itemsDataProvider:c,groupsDataProvider:d,groupBy:"iteration.id",extensions:[e],views:[{type:"grid.entity",group:{dataIndex:"id"}}]}]}),this.registerTab("User Stories",{label:"userStories",header:[{type:"label",text:f.getNames("userStory"),getBadgeText:b.calculateUserStoriesCount,extensions:[l],externalRefreshEvents:["userStory.items.added"],badgeFieldName:"count"}],items:[{type:"quick.add",printable:!1,property:"release",entityType:"userStory",evictProperties:["userStories","userStories-count"],label:"Add "+f.getNames("UserStory")},{type:"list.editable",externalRefreshEvents:["userStory.items.added"],itemsDataProvider:j,views:[{type:"grid.entity"}],extensions:[k]}]}),this.registerTab("Bugs",{practices:["Bug Tracking"],label:"bugs",header:[{type:"label",text:f.getNames("bug"),getBadgeText:b.calculateBugsCount,extensions:[l],externalRefreshEvents:["bug.items.added"],badgeFieldName:"count"}],items:[{type:"quick.add",printable:!1,property:"release",entityType:"bug",evictProperties:["bugs","bugs-count"],label:"Add "+f.getNames("Bug")},{type:"list.editable",itemsDataProvider:i,externalRefreshEvents:["bug.items.added"],views:[{type:"grid.entity"}],extensions:[k]}]}),this.registerTab("Features",{practices:["Requirements"],label:"features",header:[{type:"label",text:f.getNames("feature"),getBadgeText:b.calculateFeaturesCount,extensions:[l],externalRefreshEvents:["feature.items.added"],badgeFieldName:"count"}],items:[{type:"quick.add",printable:!1,property:"release",entityType:"feature",evictProperties:["features","features-count"],label:"Add "+f.getNames("Feature")},{practices:["Requirements"],type:"list.editable",externalRefreshEvents:["feature.items.added"],itemsDataProvider:h,views:[{type:"grid.entity"}]}]}),this.registerTab("Release Notes",{label:"notes",header:[{type:"label",text:"Notes"}],items:[{type:"releaseNotes"}]})},getAdditionalInfoAliases:function(){return["StartDate","FinishDate","Release Assigned Effort"]},getPanelsAliases:function(){return["Look Switcher","Diagnostic","Progress Bar","Additional Info","Custom Fields"]},getActionsAliases:function(){return["Add Iteration","-----","Old View","Old Edit","Print","-----","Delete"]},getTabsAliases:function(){return["Description","Iterations","User Stories","Bugs","Features","Release Notes","Track"]}});return m}),define("tau/configurations/build.container.config",["tau/configurations/baseContainable.container.config","tau/models/model.extensions","tau/utils/utils.urlBuilder"],function(a,b,c){var d=a.extend({init:function(b){a.prototype.init.call(this,b);var c=b.context.entity;this.registerAdditionalInfoItem("BuildDate",{label:{type:"label",text:"Build Date"},field:{type:"property.buildDate",editable:!0}})},getTabsAliases:function(){return["Description","Track"]},getActionsAliases:function(){return["Old View","Old Edit","Print","-----","Delete"]},getAdditionalInfoAliases:function(){return["Owner","BuildDate","Release","Iteration"]}});return d}),define("tau/configurations/impediment.container.config",["tau/configurations/baseContainable.container.config"],function(a){var b=a.extend({getActionsAliases:function(){return["Old View","Old Edit","Print","-----","Delete"]},getTabsAliases:function(){return["Description","Track"]},getAdditionalInfoAliases:function(){return["State","ImpedimentDate","ResolvedOn","Business Value","Assignable","Owner","Responsible","IsPrivate"]}});return b}),define("tau/models/dataProviders/project/project.model.provider.releases.items",["Underscore","tau/models/dataProviders/model.provider.items.base","tau/utils/utils.date"],function(_,a,b){return a.extend({fetch:function(a){this._fetch("iterations","iteration",!1,a)},_createDetailCommand:function(a){var b={};return b[a]=["id","name","tags","startDate","endDate",{release:["id","name"]},{userStories:["effortToDo","effortCompleted"]},{bugs:["effortToDo","effortCompleted"]}],b},_convertItem:function(a){var c={id:a.id,name:a.name,__type:a.__type,tags:this._processTags(a),release:a.release,assignedEffort:this._getAssignedEffort(a),startDate:b.format.date.short(a.startDate),endDate:b.format.date.short(a.endDate)};return c},_convertData:function(a){return a=this._super(a),this._sortByStartDate(a)},_sortByStartDate:function(a){return _.sortBy(a,function(a){return-1*a.startDate})}})}),define("tau/models/dataProviders/project/project.model.provider.releases.groups",["Underscore","tau/models/dataProviders/model.provider.groups.base","tau/utils/utils.date"],function(_,a,b){return a.extend({fetch:function(a,b,c){return this._fetchReleases(a,b,c)},_fetchReleases:function(a,c,d){var e=this.config.context,f=e.entity.entityType.name,g=e.entity.id,h=this.config.store,i=this,j={id:g,nested:!0,fields:[{releases:["id","name","startDate","endDate"]}]};h.get("project",j).done({success:function(a){var c=_(a).pluck("data")[0].releases;c=_.sortBy(c,function(a){return-1*b.parse(a.startDate)});var e=[];_.forEach(c,function(a){e.push(i._processRelease(a))}),_.forEach(e,function(a){a.items=[]}),d(e)}})},_processRelease:function(a){var c=b.parse(a.startDate).clearTime(),d=b.parse(a.endDate).clearTime(),e=!0,f=!1;Date.today().between(c,d)&&(e=!1,f=!0);var g="d MMM",h=b.formatAs(c,g)+" / "+b.formatAs(d,g);h=h+" ("+Math.floor((d.getTime()-c.getTime())/1e3/60/60/24+1)+" days)",f&&(h+=" (current)");var i={key:a.id,title:a.name,subtitle:h,collapsed:e,realGroup:a};return i}})}),define("tau/ui/extensions/list/extension.list.checkEmpty",["tau/components/extensions/component.extension.base"],function(a){return a.extend({"bus preDataBind":function(a){var b=a.data;b.groups.length==0?b.isEmpty=!0:b.isEmpty=!1}})}),define("tau/models/dataProviders/project/project.model.provider.releases_flat.items",["Underscore","tau/models/dataProviders/model.provider.items.base","tau/utils/utils.date"],function(_,a,b){return a.extend({fetch:function(a){this._fetch("releases","release",!1,a)},_createDetailCommand:function(a){var b={};return b[a]=["id","name","tags","startDate","endDate"],b},_convertItem:function(a){var c=b.parse(a.startDate),d=b.parse(a.endDate),e=!1;Date.today().between(c,d)&&(e=!0);var f={id:a.id,name:a.name+(e?" (current)":""),__type:a.__type,tags:this._processTags(a),startDate:b.format.date.short(a.startDate),endDate:b.format.date.short(a.endDate)};return f},_convertData:function(a){return a=this._super(a),this._sortByStartDate(a)},_sortByStartDate:function(a){return _.sortBy(a,function(a){return-1*a.startDate})}})}),define("tau/configurations/project.container.config",["tau/configurations/baseContainable.container.config","tau/models/model.extensions","tau/utils/utils.urlBuilder","tau/models/dataProviders/project/project.model.provider.releases.items","tau/models/dataProviders/project/project.model.provider.releases.groups","tau/ui/extensions/list/extension.list.checkEmpty","tau/models/dataProviders/project/project.model.provider.releases_flat.items"],function(a,b,c,d,e,f,g){var h=a.extend({init:function(c){a.prototype.init.call(this,c);var h=c.context.entity;this.registerAdditionalInfoItem("Owner",{label:{type:"label",text:"Owner"},field:{type:"property.owner.project"}}),this.registerAdditionalInfoItem("Abbreviation",{label:{type:"label",text:"Abbreviation"},field:{type:"property.abbreviation",cssClass:"abbr",editable:!0}}),this.registerAdditionalInfoItem("IsActive",{label:{type:"label",text:"Active?"},field:{type:"property.isActive",editable:!0}}),this.registerAdditionalInfoItem("IsProduct",{label:{type:"label",text:"Product?"},field:{type:"property.IsProduct",editable:!0}}),this.registerAdditionalInfoItem("Company",{label:{type:"label",text:"Company"},field:{type:"property.company",editable:!0}}),this.registerAdditionalInfoItem("Program",{label:{type:"label",text:"Program"},field:{type:"property.program",editable:!0}}),this.registerAdditionalInfoItem("Process",{label:{type:"label",text:"Process"},field:{type:"property.process",editable:!0}}),this.registerAdditionalInfoItem("StartDate",{label:{type:"label",text:"Start Date"},field:{type:"property.startDate.project",editable:!0}}),this.registerAdditionalInfoItem("EndDate",{label:{type:"label",text:"End Date"},field:{type:"property.endDate.project",editable:!0}});var i=this;this.registerTab("Releases",{practices:["Iterations"],label:"releases",header:[{type:"label",text:i.getNames("release"),getBadgeText:b.calculateReleasesCount,badgeFieldName:"count"}],items:[{practices:["Iterations"],type:"list.editable",itemsDataProvider:d,groupsDataProvider:e,extensions:[f],groupBy:"release.id",sortable:!1,views:[{type:"grid.entity",group:{dataIndex:"id"}}]}]}),this.registerTab("Releases (flat)",{practices:["~Iterations"],label:"releases-flat",header:[{type:"label",text:i.getNames("release"),getBadgeText:b.calculateReleasesCount,badgeFieldName:"count"}],items:[{practices:["~Iterations"],type:"list.editable",itemsDataProvider:g,sortable:!1,views:[{type:"grid.entity"}]}]})},getAdditionalInfoAliases:function(){return["Abbreviation","Owner","IsActive","IsProduct","Program","Company","Process","StartDate","EndDate"]},getActionsAliases:function(){return["Old View","Old Edit","Print","-----","Delete"]},getTabsAliases:function(){return["Description","Releases","Releases (flat)"]},getTabs:function(a){var b=this._super(a);return b[0].items=b[0].items.slice(1),b}});return h}),define("tau/configurations/converters/converter.context",["Underscore"],function(_){var a=function(a,b){var c=[],d=[];_.forEach(a,function(a){a[0]=="~"?c.push(a.slice(1)):d.push(a)});var e=!0;d.length&&(e=_.intersect(b,d).length>0);var f=!1;return c.length&&(f=_.intersect(b,c).length>0),e&&!f?!0:!1},b=function(c,d,e){return _.forEach(c,function(f,g){if(f.type=="tabs")_.forEach(f.tabs,function(a,c){a.header=b(a.header,d,e),f.tabs[c].items=b(a.items,d,e),f.tabs[c].items.length==0&&(f.tabs[c]=!1)}),f.tabs=_.filter(f.tabs,function(a,b){return a!==!1}),f.additionalHeaders=b(f.additionalHeaders,d,e),f.tabs.length==0&&(c[g]=!1);else if(f.type=="additionalInfo")f.children=b(f.children,d,e),f.children.length==0&&(c[g]=!1);else if(f.type=="label"&&_.isArray(f.text))f.text=b(f.text,d,e),f.text.length==0?c[g]=!1:c[g]=f;else if(f.practices)f.practices.length&&a(f.practices,d)==0&&(c[g]=!1);else if(f.editions)f.editions.length&&a(f.editions,e)==0&&(c[g]=!1);else if(f.children)c[g].children=b(f.children,d,e);else if(typeof f.items!="undefined")c[g].items=b(f.items,d,e),f.items.length==0&&(c[g]=!1);else if(g=="children"||g=="items")c[g]=b(f,d,e)}),c=_.filter(c,function(a,b){return a!==!1}),c};return{convert:function(a,c,d){return a=b(a,c,d),a}}}),define("tau/configurations/factory.container.config",["Underscore","tau/core/class","tau/core/termProcessor","tau/models/model.extensions","tau/configurations/base.container.config","tau/configurations/baseAssignable.container.config","tau/configurations/baseContainable.container.config","tau/configurations/userStory.container.config","tau/configurations/task.container.config","tau/configurations/bug.container.config","tau/configurations/request.container.config","tau/configurations/testplanrun.container.config","tau/configurations/testcase.container.config","tau/configurations/testplan.container.config","tau/configurations/iteration.container.config","tau/configurations/feature.container.config","tau/configurations/release.container.config","tau/configurations/build.container.config","tau/configurations/impediment.container.config","tau/configurations/project.container.config","tau/configurations/converters/converter.context"],function(_,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u=a.extend({init:function(a,b){this.originalConfigObject=a,this.appConfig=b,this.practices=[];var c=this.appConfig.context;c&&(this.practices=_(c.getPractices()).pluck("name"))},getConfig:function(){var a=this.originalConfigObject.getConfig(this.appConfig);return t.convert(a,this.practices)},getActions:function(){var a=this.originalConfigObject.getActions(this.appConfig.context.applicationContext);return t.convert(a,this.practices)}}),v=a.extend({init:function(){this.configs={base:d,userstory:g,task:h,bug:i,request:j,testplanrun:k,testcase:l,testplan:m,iteration:n,feature:o,release:p,build:q,impediment:r,project:s,board:{}}},getConfig:function(a){var b=a.context.entity.entityType.name.toLowerCase(),c=this.configs[b]?this.configs[b]:this.configs.base,d=new c(a),e=d.getConfig(a);return e},getContextBasedConfigObject:function(a){var b=a.context.entity.entityType.name.toLowerCase(),c=this.configs[b]?this.configs[b]:this.configs.base,d=new c(a);return new u(d,a)}});return new v}),define("tau/models/entity/actions/model.entity.actions",["Underscore","tau/configurator","tau/core/model-base","tau/configurations/factory.container.config"],function(_,a,b,c){return b.extend({name:"model.entity.actions",onInit:function(){var a=this,b=a.config.context.id;a.fire("permissionsReady",{editable:!0});var d=c.getContextBasedConfigObject(a.config),e=d.getActions();a.fire("dataBind",{items:e})}})}),define("tau/ui/templates/menu/ui.template.menu.actions.item",["tau/core/templates-factory"],function(a){var b={name:"menu-actions-item",markup:["           {{if url}}",'               <div class="ui-menu__item ui-menu__item-action ui-menu__item-action-link ${className}">','                  <a class="drop-down-option" href="${url}">${label}</a>',"               </div>","           {{else label}}",'               <div class="ui-menu__item ui-menu__item-action ${className}">','                   <span class="drop-down-option">${label}</span>',"               </div>","           {{else}}",'               <div class="ui-menu__item-separator">-----</div>',"           {{/if}}"]};return a.register(b)}),define("tau/ui/templates/menu/ui.template.menu.actions.list",["tau/core/templates-factory","tau/ui/templates/menu/ui.template.menu.actions.item"],function(a){var b={name:"menu-actions-list",markup:['<div class="ui-menu-actions">','   <div class=" ui-drop-down drop-down-list">','   {{tmpl(items) "menu-actions-item"}}',"   </div>","</div>"],dependencies:["menu-actions-item"]};return a.register(b)}),define("tau/ui/extensions/entity/actions/extension.entity.actions.editable",["tau/components/extensions/component.extension.base","tau/ui/templates/menu/ui.template.menu.actions.list"],function(a,b){return a.extend({category:"edit","bus permissionsReady+dataBind+afterRender":function(a){var c=this,d=a.permissionsReady.data,e=a.dataBind.data;if(d.editable){var f=a.afterRender.data.element,g=f.find(".tau-entity-actions-target"),h={components:[{type:"menu.actions",template:b,items:e.items}],context:c.config.context},i={target:g,componentsConfig:h};c.fire("initBubble",i)}}})}),define("tau/ui/templates/entity/ui.template.entity.actions",["tau/core/templates-factory"],function(a){var b={name:"ui.template.entity.actions",markup:['<div class="tau-entity-actions">','   <span class="tau-entity-actions-target"></span>',"</div>"],dependencies:[]};return a.register(b)}),define("tau/components/component.entity.actions",["tau/components/component.creator","tau/components/extensions/bubble/extensions.bubble.creator","tau/components/extensions/component.creator.extension","tau/models/entity/actions/model.entity.actions","tau/ui/extensions/entity/actions/extension.entity.actions.editable","tau/ui/templates/entity/ui.template.entity.actions"],function(a,b,c,d,e,f){return{create:function(g){var h={extensions:[b,c,d,e],template:f};return a.create(h,g)}}}),define("tau/models/propertyLists/model.propertyList.base",["Underscore","tau/core/model.editable.base"],function(_,a){return a.extend({getAssignable:function(a){var b=this,c=b.config.context.entity,d=c.entityType.name,e=c.id,f={id:e,fields:this.getRequiredFields()};return b.store.get(d,f).done({success:a}),b},sortProjects:function(a){var b=this.config.context.applicationContext,c=_.pluck(b.selectedProjects,"id"),d=a.sort(function(a,b){var d=_.indexOf(c,a.id),e=_.indexOf(c,b.id);return d>=0&&e>=0||d<0&&e<0?a.id-b.id:-1*d+e});return d},getCurrentEntityId:function(){if(!this.config.data)return null;var a=this.config.data.value;return this.config.data.id||a&&a.id},getRequiredFields:function(){return["id"]},onDataRetrieved:function(a){var b=_.pluck(a,"data");this.processData.apply(this,b)},propertyIsNotEmpty:function(){return _.isNumber(this.config.data.id)},"bus updateState":function(a){var b={},c=null;a.data&&a.data.id&&(c={id:a.data.id}),b[this.propertyType]=c,this.fire("save",b)}})}),define("tau/models/propertyLists/model.entityStateList",["Underscore","tau/models/propertyLists/model.propertyList.base"],function(_,a){return a.extend({name:"states-list",propertyType:"entityState",onInit:function(){var a=this,b=function(b){var c=b[0].data;a.store.get(a.propertyType,a.createGetStateForAssignableCommand(c)).done({success:a.onDataRetrieved.tauCreateDelegate(a)})};this.getAssignable(b)},getRequiredFields:function(){return[{entityState:["id"]}]},createGetStateForAssignableCommand:function(a){return{id:a.entityState.id,fields:["id","name","isCommentRequired",{nextStates:["id","name","isCommentRequired","numericPriority"]}]}},processData:function(a){var b=[];a.nextStates=_.sortBy(a.nextStates,function(a){return a.numericPriority}),_.each(a.nextStates,function(a){b.push({id:a.id,name:a.name,isCommentRequired:a.isCommentRequired})}),this.fire("dataBind",{states:b,completed:!0,nullableValue:!1})}})}),define("tau/utils/utils.textConverter",["Underscore","tau/core/class","tau/configurator"],function(_,a,b){var c=a.extend({convert:function(a,b){var c=a;if(b===!0){$node=$("<span></span>");var d=c.split(/\r\n|\r|\n/);for(var e=0;e<d.length;e++)d[e]=$node.text(d[e]).html();c=d.join("\r\n")}return c=c.replace(/([^\r])\n/gi,"$1<br />\n"),c=c.replace(/\r\n/gi,"<br />\r\n"),c=c.replace(/  /gi,"&nbsp;&nbsp;"),c=c.replace(/&nbsp; /gi,"&nbsp;&nbsp;"),c}});return c}),define("tau/ui/extensions/entityStateList/ui.extension.entityStateList.practices.comment",["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/configurator","tau/utils/utils.textConverter"],function(_,$,a,b,c){var d=a.extend({"bus dataBind+afterRender":function(a){this.element=a.afterRender.data.element,this.dataToBind=a.dataBind.data},"bus focus.before":function(){this.element.find(".ui-entity-state-comment").remove()},"bus updateState":function(a){var b=this.entityStateId=a.data.id,c=_(this.dataToBind.states).detect(function(a){return a.id===b&&a.isCommentRequired});if(!c)return;a.cancel();var d=this.element;if(d.find(".ui-entity-state-comment").length>0){d.find(".ui-state-comment-field").focus();return}var e=d;e.find(".drop-down-list").listSelectable("disable");var f=$("<div class='ui-entity-state-comment'></div>").append($("<div class='ui-state-comment-header'>Please, provide comment</div>")).append($("<div class='ui-state-comment-field-container'></div>").append("<textarea rows='5' class='ui-state-comment-field'></textarea>")).append($("<div class='button-group'></div>").append($("<button type='button' class='save button'>Save</button>").click($.proxy(this._save,this))).append($("<button type='button' class='cancel button'>Cancel</button>").click($.proxy(this._cancel,this)))).appendTo(d),g=f.find(".ui-state-comment-field").focus(),h=f.find(".save"),i=function(){window.setTimeout(function(){var a=g.val()||"",b=a.trim().length===0;b?h.attr("disabled","disabled"):h.attr("disabled")&&h.removeAttr("disabled"),b?h.addClass("disable"):h.removeClass("disable")},50)};i(),h.bind("focus",i),g.bind("change keyup click propertychange paste",i)},_save:function(a){a.stopPropagation();var b=new c,d=this,e=this.element.find(".ui-state-comment-field").val(),f=b.convert(e,!0);d.fire("save",{$set:{entityState:{id:d.entityStateId},comments:[{description:f}]},$include:[{comments:["id","description"]}]})},_cancel:function(a){a.stopPropagation(),this.element.find(".ui-entity-state-comment").remove();var b=this.element.find(".ui-drop-down");b.find(".drop-down-list").listSelectable("enable"),b.show()}});return d}),define("tau/components/component.entityStateList",["tau/components/component.creator","tau/models/propertyLists/model.entityStateList","tau/ui/extensions/stateList/ui.extension.stateList.editable","tau/ui/extensions/entityStateList/ui.extension.entityStateList.practices.comment","tau/ui/templates/state/ui.template.state-list"],function(a,b,c,d,e){return{create:function(f){var g={extensions:[d,b,c],template:e};return a.create(g,f)}}}),define("tau/ui/templates/assignmentsList/ui.template.feature.assignmentsList.userList",["tau/core/templates-factory","tau/ui/templates/common/ui.template.user","tau/ui/templates/assignmentsList/ui.template.assignmentsList.addBtn"],function(a){var b={name:"feature-assignments-user-list",markup:['<div class="group" roleId="${role.id}">','<table class="role-header">',"   <tr>",'   <td class="role-title">','   {{tmpl "assignments-add-btn"}}',"&nbsp;${role.name}","   </td>","</tr>","</table>",'{{tmpl(users) "user"}}',"</div>"].join(""),dependencies:["user","assignments-add-btn"]};return a.register(b)}),define("tau/ui/templates/assignmentsList/ui.template.feature.assignmentsList",["tau/core/templates-factory","tau/ui/templates/assignmentsList/ui.template.feature.assignmentsList.userList","tau/ui/templates/common/ui.template.user"],function(a){var b={name:"feature-assignments-list",markup:['<table class="box assignments-table-readonly assignments-table">','   <tr class="title-row">','      <td class="user-list">','      {{tmpl(assignments.groups, {effortPoints: effortPoints}) "feature-assignments-user-list"}}',"      </td>","   </tr>","</table>"].join(""),dependencies:["feature-assignments-user-list","user"]};return a.register(b)}),define("tau/components/component.feature.assignmentList",["Underscore","tau/components/component.assignmentsList","tau/ui/templates/assignmentsList/ui.template.feature.assignmentsList"],function(_,a,b){return{create:function(c){return _(c).extend({template:b}),a.create(c)}}}),define("tau/models/model.feature.totalEffort",["tau/core/model-base","tau/core/termProcessor"],function(a,b){var c=a.extend({onInit:function(){var a=this,b=a.config.context,c=b.entity.entityType.name,d=b.entity.id;a.store.unbind(a),a.store.on({eventName:"afterSave",type:c,filter:{id:d},hasChanges:["effort|userStories-count"],listener:a},_.bind(a.onDataUpdated,a)),a.store.get(c,{id:d,fields:["id","userStories-count","effort"]},{scope:this,success:this.onGetEntity}).done({scope:this,success:this.onRequestCompleted})},onDataUpdated:function(){this.fire("refresh")},floatToString:function(a){return a.toFixed(2).replace(".00","")},_getEffortPoints:function(){return this.config.context.getEffortPoint().shortName},onGetEntity:function(a){var c=a.data,d=this.config.context.getTerms(),e=new b(d),f=c["userStories-count"];f>0?(this.userStoriesCount=f,this.featureTerm=e.getTerms("feature").name,this.userStoriesTerm=e.getTerms("userStory").names,this.effort=this.floatToString(c.effort),this.point=this._getEffortPoints(),this.hidden=!1):(this.label="",this.hidden=!0)},onRequestCompleted:function(){this.fire("dataBind",{userStoriesCount:this.userStoriesCount,featureTerm:this.featureTerm,userStoriesTerm:this.userStoriesTerm,effort:this.effort,point:this.point,hidden:this.hidden})}});return c}),define("tau/ui/templates/feature/ui.template.totalEffort",["tau/core/templates-factory"],function(a){var b={name:"total-effort",markup:['<div style="',"{{if hidden}}","display:none","{{/if}}",'">',"{{if !hidden }}",'<div class="ui-total-effort">${featureTerm} has <span class="user-story-count">${userStoriesCount}</span> ${userStoriesTerm} with total effort <span class="effort">${effort}</span> ${point}</div>',"{{/if}}","</div>"],dependencies:[]};return a.register(b)}),define("tau/components/component.feature.totalEffort",["tau/components/component.creator","tau/models/model.feature.totalEffort","tau/ui/templates/feature/ui.template.totalEffort"],function(a,b,c){return{create:function(d){var e={ModelType:b,template:c};return a.create(e,d)}}}),define("tau/models/model.field.richText",["tau/core/model-base","tau/utils/utils.htmlConverter"],function(a,b){var c=a.extend({name:"field ",init:function(a){this._super.apply(this,arguments),this.fieldName=a.fieldName;if(!a.fieldName)throw"model.field.richText fieldName is undefined"},onInit:function(){var a=this.config.context,b=a.entity.entityType.name,c=a.entity.id,d=this,e=function(a){if(a.data.id!=c)return;var b=a.data.changes;if(!b.hasOwnProperty(d.fieldName))return;d.fire("applyChanges",b)},f=function(a){if(a.data.id!=c)return;var b=a.data.changes;if(!b.hasOwnProperty(d.fieldName))return;d.fire("prepareChanges",b)};this.store.on({eventName:"beforeSave",type:b,listener:this},f).on({eventName:"afterSave",type:b,listener:this},e);var g={id:c,fields:["id",d.fieldName]};this.store.get(b,g,{scope:this,success:this.entityRetrieved}).done({success:this.requestDone,scope:this})},entityRetrieved:function(a){var b=a.data;this.id=b.id,this.fieldValue=b[this.fieldName]},requestDone:function(){this.bus.fire("dataBind",{html:b.fromSourceToHtml(this.fieldValue)})}});return c}),define("tau/models/model.field.richText.editable",["tau/core/model.editable.base","tau/utils/utils.htmlConverter","tau/utils/utils.jsonSchema"],function(a,b,c){var d=a.extend({category:"edit",name:"model.field.richText.editable",schema:null,init:function(a){this._super.apply(this,arguments);var b={type:"object",properties:{}};this.fieldName=a.fieldName,b.properties[this.fieldName]={optional:!0,empty:!0,type:"string"},this.schema=c.Schema.create(b)},"bus dataBind":function(){this.bus.fire("permissionsReady",{editable:!0,deletable:!0})},"bus beforeSave":function(a){var c=a.data.cmd.$set;c[this.fieldName]=b.fromHtmlToSource(c[this.fieldName])},"bus validate":function(a){var b=a.data,c=b.cmd.$set;b.validation=this.schema.validate(c)}});return d}),define("tau/components/extensions/field/extension.field.richText.editable",["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/behaviour/common/ui.behaviour.richeditor"],function(_,$,a){return a.extend({category:"edit","bus prepareChanges":function(a){this.bus.fire("markElementToBeUpdated",{element:this.element})},"bus applyChanges":function(a){var b=this;this.bus.on("afterRender",function(a){a.removeListener(),b.bus.fire("updateElement",{element:b.element})}),this.bus.fire("refresh")},"bus changeText":function(a){var b=this,c={};c[b.config.fieldName]=a.data,b.bus.fire("save",c)},"bus permissionsReady+afterRender":function(a){var b=this;this.element=a.afterRender.data.element;var c=a.permissionsReady.data;if(c.editable){var d=this.element.width(),e=a.afterRender.data.element.find(".ui-description__inner").richeditor({text:this.element.tmplItem().data.html,placeholder:{text:"Double-click to add description...",className:"ui-description__inner_empty_true"},onSave:function(a){b.fire("changeText",a),e.addClass("data-saving")},settings:{fitImgWidth:!1,toolbar:[["Cut","Copy","Paste","PasteText","PasteFromWord","-","Bold","Italic","Underline","Strike","-","Subscript","Superscript"],["NumberedList","BulletedList","-","Outdent","Indent"],["JustifyLeft","JustifyCenter","JustifyRight"],["Link","Unlink","Anchor"],["Image","Table","HorizontalRule","SpecialChar"],["Source","Format","Font","FontSize"],["Replace","-","RemoveFormat","TextColor","BGColor","-","Templates"],["Maximize"]],height:450}});e.bind("richeditorbeforeapply",function(a,c){var d=[],e=0,f=b.element.width(),g=$(a.target).richeditor("getSettings");_.each(g.toolbar,function(a){var b=a.length*28+20;e+b>f&&(e=0,d.push("/")),d.push(a),e+=b}),g.toolbar=d,$(a.target).richeditor("setSettings",g)})}}})}),define("tau/ui/templates/field/ui.template.field.richText",["tau/core/templates-factory"],function(a){var b={name:"description",markup:['<div class="ui-description {{if !html}}ui-field_empty_true{{/if}}">','   <div class="ui-description__inner tau-clientinput">',"      {{html html}}","   </div>","</div>"],dependencies:[]};return a.register(b)}),define("tau/components/component.field.richText",["tau/components/component.creator","tau/models/model.field.richText","tau/models/model.field.richText.editable","tau/components/extensions/field/extension.field.richText.editable","tau/ui/templates/field/ui.template.field.richText","tau/ui/extensions/ui.extension.shortcutProcessor","tau/ui/extensions/ui.extension.content.imagePreview"],function(a,b,c,d,e,f,g){return{create:function(h){var i={extensions:[b,c,f,d,g],template:e};return h.shortcutProcessorTarget=".ui-description__inner",h.imagePreviewContentSelector=".ui-description__inner",a.create(i,h)}}}),define("tau/components/component.description",["tau/components/component.field.richText"],function(a){return{create:function(b){return b=b||{},b.fieldName="description",a.create(b)}}}),define("tau/models/finder/model.entity.finder",["Underscore","tau/core/model-base"],function(_,a){var b=a.extend({"bus loadMore+nextPageCommandFormed":function(a){var b=this,c=a.nextPageCommandFormed.data;b.fire("partialDataRequest",{type:c.type,config:c.config})},"bus dataRequestCompleted":function(a){var b=a.data,c=this,d=b.data.isNextPageAvailable();d||c.fire("nextPageIsNotAvailable");var e=b.data.length===0?this.config.emptyDataMessage:null;c.fire("dataLoaded",{data:{emptyMessage:e,items:b.data}}),d&&(c.fire("nextPageCommandFormed",b.data.getNextPageCommand()),c.fire("nextPageAvailable",{}))},getFields:function(){var a=this.config.fields||["id","name",{project:["id","abbreviation"]},{entityState:["id","name"]}];return a},"bus newSearchQuery":function(a){this.processSearchQuery(a)},processSearchQuery:function(a){var b=a.data,c=this;_.extend(b.config,{fields:c.getFields()}),c.fire("partialDataRequest",{type:b.type,config:b.config})},"bus searchConfigFormed":function(a){this.processSearchQuery(a)},onInit:function(){var a=this,b=this.config.actions||[];this.config.emptyDataMessage=this.config.emptyDataMessage||"No data found",a.fire("dataBind",{actions:b,data:{items:[]}}),a.config.context&&a.config.context.entity?a.fire("dataRequest",{type:"general",config:{id:a.config.context.entity.id,fields:[{project:["id","name"]}]},callback:function(b){a.fire("requireSearchConfig",{project:b.data.project})}}):a.fire("requireSearchConfig",{})}});return b}),define("tau/ui/templates/finder/ui.template.resultList.row",["tau/core/templates-factory"],function(a){var b={name:"resultList-row",markup:['<tr class="tau-result-list-row">','   <td class="id" style="width:10px; padding-left:10px;"><em class="ui-type-icon ui-type-icon-${__type.toLowerCase()}">${id}</em></td>',"   <td>${name}</td>",'   <td style="white-space: nowrap;">{{if entityState }}${entityState.name} {{/if}}</td>','   <td style="white-space: nowrap; width:10px;  padding-right:10px;" >${project.abbreviation}</td>',"</tr>"]};return a.register(b)}),define("tau/ui/templates/finder/ui.template.resultList",["tau/core/templates-factory","tau/ui/templates/finder/ui.template.resultList.row"],function(a){var b={name:"resultList",markup:['<div class="ui-resultList">','<div class="tau-no-results">${emptyMessage}</div>','<table cellspacing="0" cellpadding="4" class="tau-result-list">',"<tbody>",'{{tmpl(items) "resultList-row"}}',"</tbody>","</table>",'<div class="tau-resultList-load-more">loading items...</div>',"</div>"],dependencies:["resultList-row"]};return a.register(b)}),define("tau/ui/templates/finder/ui.template.finderAction",["tau/core/templates-factory"],function(a){var b={name:"finder-action",markup:["<span id='${id}' class='action-link tau-finder-action'>${name}</span>"]};return a.register(b)}),define("tau/ui/templates/finder/ui.template.finder",["tau/core/templates-factory","tau/ui/templates/finder/ui.template.resultList","tau/ui/templates/finder/ui.template.finderAction"],function(a){var b={name:"finder",markup:['<div class="ui-finder-placeHolder">','<div class="ui-drop-down drop-down-actions tau-finder-actions">','{{tmpl(actions) "finder-action"}}',,"</div>",'<div class="ui-finder-header">','<div class="visual-search ui-drop-down">','<div class="filter-field-wrapper"><input type="text" class="filter-field"></div>',"</div>","</div>",'{{tmpl(data) "resultList"}}',"</div>"],dependencies:["resultList","finder-action"]};return a.register(b)}),define("tau/models/finder/model.assignable.search",["Underscore","tau/core/model-base","tau/core/termProcessor"],function(_,a,b){return a.extend({init:function(a){this._super(a);var c=function(a,b,c){a.hasOwnProperty(b)||(a[b]={}),a[b].$contains=c},d=function(a,b,c){if(c==="All uncompleted"){a[b]={isFinal:0};return}if(!a.hasOwnProperty(b)||_.isNull(a[b]))a[b]={name:{$in:[]}};if(c==="Backlog"){a[b]=null;return}a[b].name&&a[b].name.$in&&a[b].name.$in.push(c)},e=function(a,b,c){a.hasOwnProperty(b)||(a[b]={$in:[0]});var d=parseInt(c);_.isNumber(d)&&!_.isNaN(d)&&a[b].$in.push(d)};a.context&&a.context.applicationContext?this.terms=new b(a.context.getTerms()):this.terms=new b;var f=this.terms;this.properties={id:{autoCompletable:!1,statement:e},text:{name:"name",autoCompletable:!1,statement:c},name:{autoCompletable:!1,statement:c},description:{autoCompletable:!1,statement:c},tag:{name:"tags",autoCompletable:!1,statement:c},project:{label:f.resolve("project"),autoCompletable:!0,statement:d},state:{name:"entityState",autoCompletable:!0,fields:[{entityType:["id"]}],items:[{label:"All uncompleted",value:"All uncompleted",id:0}],statement:d},iteration:{label:f.resolve("iteration"),autoCompletable:!0,category:"project",items:[{label:"Backlog",value:"Backlog",id:0}],fields:[{project:["id","abbreviation"]}],statement:d},release:{label:f.resolve("release"),autoCompletable:!0,category:"project",items:[{label:"Backlog",value:"Backlog",id:0}],fields:[{project:["id","abbreviation"]}],statement:d},priority:{autoCompletable:!0,fields:[{entityType:["id","name"]}],statement:d}}},getType:function(){return"assignable"},"bus autoCompleteRequest":function(a){var b=a.data,c=this,d=c.properties[b.property];if(!d)return;if(d.autoCompletable!==!0)return;if(d.autoCompleteValues){var e={config:b,data:d.autoCompleteValues};c["bus autoComplete"]({data:e});return}var f=d.hasOwnProperty("name")?d.name:b.property,g=["id","name"];d.hasOwnProperty("fields")&&_.mergeFields(g,d.fields);var h=function(a){var d={data:a.data,config:b};c.fire("autoComplete",d)};c.bus.fire("dataRequest",{type:f,config:{fields:g},callback:h})},_isEqualByCategory:function(a,b,c){return b.hasOwnProperty("category")?a[b.category]?a[b.category].name===c.category:!0:!0},"bus autoComplete":function(a){var b=a.data,c=b.config,d=[],e=this,f=this.properties[c.property];f.hasOwnProperty("items")&&(d=d.concat(f.items)),_.each(b.data,function(a){if(a.name===""||a.name==="-")return;if(_(d).any(function(b){return b.value.toLowerCase()===a.name.toLocaleLowerCase()&&e._isEqualByCategory(a,f,b)}))return;var b={label:a.name,value:a.name,id:a.id,dataItem:a},g=function(){return!0};f.hasOwnProperty("filter")&&(g=f.filter);if(!g.call(this,b,f,c))return;if(f.hasOwnProperty("category")){var h=a[f.category].abbreviation||a[f.category].name;_.extend(b,{category:h,label:a.name+" ["+h+"]"})}d.push(b)});var g=_(d).select(function(a){return!c.term||c.term==""?!0:a.value.toLowerCase().indexOf(c.term.toLowerCase())>=0});c.callback(g)},"bus search":function(a){var b=a.data,c=this,d=b.collection,e={};_.each(d,function(a){var b=c.properties[a.property];if(!b)return;var d=b.name?b.name:a.property;b.statement(e,d,a.value)}),c.bus.fire("newSearchQuery",{type:c.getType(),config:{$orderBy:"name",$query:e,$skip:0,$limit:20}})},getInitialQueryConfig:function(){var a={$skip:0,$limit:20,$query:{}};return a},getInitialQueryString:function(){return""},"bus requireSearchConfig":function(a){var b=this,c=a.data.project,d=b.getInitialQueryConfig();_.defaults(d,{$orderBy:"name"});var e=b.getInitialQueryString();b.fire("searchConfigFormed",{type:b.getType(),config:d,properties:b.properties,searchQuery:e})}})}),define("tau/models/finder/model.general.search",["Underscore","tau/models/finder/model.assignable.search"],function(_,a){return a.extend({init:function(a){var b=this;b._super(a),delete b.properties.release,delete b.properties.iteration,delete b.properties.state,delete b.properties.priority;var c=function(a,c,d){var e=_(b.properties.type.autoCompleteValues).select(function(a){return a.name.indexOf(d.toLowerCase())>=0});a.hasOwnProperty(c)||(a[c]={id:{$in:[0]}}),_.each(e,function(b){a[c].id.$in.push(b.id)})};b.properties.type={name:"entityType",autoCompletable:!0,statement:c,autoCompleteValues:[{id:2,name:b.terms.resolve("release")},{id:3,name:b.terms.resolve("iteration")},{id:4,name:b.terms.resolve("story")},{id:5,name:b.terms.resolve("task")},{id:8,name:b.terms.resolve("bug")},{id:9,name:b.terms.resolve("feature")},{id:11,name:b.terms.resolve("build")},{id:12,name:b.terms.resolve("test case")},{id:13,name:b.terms.resolve("test plan")},{id:14,name:b.terms.resolve("test run")},{id:16,name:b.terms.resolve("impediment")},{id:17,name:b.terms.resolve("request")},{id:21,name:b.terms.resolve("solution")}]}},getInitialQueryConfig:function(){return{$skip:0,$limit:20,$query:{}}},getInitialQueryString:function(){return""},getType:function(){return"general"}})}),define("tau/models/finder/model.data",["Underscore","tau/core/model-base"],function(_,a){return a.extend({"bus dataRequest":function(a){this.config.store.get(a.data.type,a.data.config,{success:a.data.callback}).done()},"bus partialDataRequest":function(a){var b=this,c=function(a){b.fire("dataRequestCompleted",a)};b.config.store.find(a.data.type,a.data.config,{success:c}).done()}})}),define("tau/ui/extensions/finder/ui.extension.finder.list",["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/templates/finder/ui.template.resultList"],function(_,$,a,b){return a.extend({appendData:function(a,c){var d=this;d.getShowMoreElement(a).hide();var e=b.get().bind(d.config,c),f=c.emptyMessage||"";d._setNoResultsMessage(a,f);var g=$(".tau-result-list>tbody>tr",e);g.appendTo($(".ui-resultList>table>tbody",a)),d.bus.fire("dataRendered",{element:a})},_setScrollingMode:function(a,b){this.getList(a).data("noScrolling",!b)},_setNoResultsMessage:function(a,b){var c=$(".tau-no-results",a);c.text(b),b===""||_.isNull(b)||_.isUndefined(b)?c.hide():c.show()},"bus elementReady+dataLoaded":function(a){var b=a.elementReady.data.element,c=a.dataLoaded.data.data;this.appendData(b,c)},"bus dataRendered+nextPageAvailable":function(a){var b=a.dataRendered.data.element;this._setScrollingMode(b,!0)},"bus search+dataLoaded":function(a){var b=this,c=a.search.data.element;this.bus.fire("elementReady",{element:c})},"bus loadMore+dataLoaded":function(a){var b=this,c=a.loadMore.data.element;this.bus.fire("elementReady",{element:c})},getList:function(a){return $(".ui-resultList",a)},attachScrollingEvents:function(a){var b=this,c=b.getList(a).scroll(function(d){c.data("noScrolling")!=1&&c.scrollTop()+c.innerHeight()>=c[0].scrollHeight&&b.bus.fire("scrollToEnd",{element:a})})},"bus search":function(a){var b=a.data.element;$(".tau-result-list>tbody",b).html(""),this.getShowMoreElement(b).show(),this._setNoResultsMessage(b,""),this._setScrollingMode(b,!1);var c=this.getList(b);c.prop({scrollTop:c.get(0).scrollHeight})},_signUpOnActionsAndSelection:function(a){var b=this;b.getList(a).click(function(a){var c=$(a.target).parents("tr.tau-result-list-row:first");if(!c.data)return;var d=c.data();if(!d)return;if(!d.tmplItem)return;d=d.tmplItem.data;if(!d)return;b.bus.fire("entitySelected",{entity:d})}),$(".action-link",a).click(function(){var a=$(this).data().tmplItem.data;a.fn.call(b)})},"bus afterRender":function(a){var b=a.data.element,c=this;c.bus.fire("elementReady",{element:b}),c.attachScrollingEvents(b),c._setScrollingMode(b,!1),this._signUpOnActionsAndSelection(b)},getShowMoreElement:function(a){return $(".tau-resultList-load-more",a)},"bus scrollToEnd+nextPageAvailable":function(a){var b=this,c=a.scrollToEnd.data.element,d=b.getList(c);b._setScrollingMode(c,!1),b.getShowMoreElement(c).show(),d.prop({scrollTop:d.get(0).scrollHeight}),b.bus.fire("loadMore",{element:c})}})}),define("tau/ui/extensions/finder/ui.extension.finder.simpleSearch",["Underscore","jQuery","tau/configurator","tau/components/extensions/component.extension.base"],function(_,$,a,b,c){return b.extend({"bus afterRender":function(a){var b=a.data.element,c=this,d=$(".filter-field",b),e=function(){d.is(":visible")&&d.focus()};$(".tau-bubble").bind("show",e),c.fire("showHandlerSigned",{handler:e});var f=function(a){var d=$(this),e=d.val();if(a.keyCode==jQuery.ui.keyCode.ENTER){c.fire("completeInput",{element:b,value:e});return}if(a.keyCode==jQuery.ui.keyCode.DOWN||a.keyCode==jQuery.ui.keyCode.UP)return;c.fire("inputChange",{element:b,value:e})};d.keyup(f),this.disableChange=!1},"bus inputChange":function(a){var b=this;b.lastChangeDate||(b.lastChangeDate=new Date),b.lastArgs||(b.lastArgs={value:""});if(b.lastArgs.value==a.data.value)return;b.lastArgs=a.data,setTimeout(function(){if(!b.lastChangeDate)return;var a=new Date-b.lastChangeDate;a>500&&b.lastArgs&&b.fire("completeInput",b.lastArgs)},501)},"bus partialDataRequest":function(){this.disableChange=!0},"bus dataRequestCompleted":function(){this.disableChange=!1},"bus completeInput":function(a){var b=this;b.lastRequestArgs||(b.lastRequestArgs={value:""});if(b.lastRequestArgs.value==a.data.value)return;var c=a.data.value!==""&&a.data.value!==null?[{property:"name",value:a.data.value}]:[];b.fire("search",{element:a.data.element,collection:c}),b.lastChangeDate=null,b.lastRequestArgs=a.data},"bus destroy+showHandlerSigned":function(a){$(".tau-bubble").unbind("show",a.showHandlerSigned.data.handler)}})}),define("tau/components/component.finder",["tau/components/component.creator","tau/models/finder/model.entity.finder","tau/ui/templates/finder/ui.template.finder","tau/models/finder/model.general.search","tau/models/finder/model.data","tau/ui/extensions/finder/ui.extension.finder.list","tau/ui/extensions/finder/ui.extension.finder.simpleSearch"],function(a,b,c,d,e,f,g){return{create:function(h){var i=b,j=h.searchModel||d;!h.resetDisabled&&h.data&&(h.data.id||h.data.value&&h.data.value.id)&&(h.actions=[{name:"reset",fn:function(){this.bus.fire("entitySelected",{entity:null})}}]);var k={name:"finder",extensions:[e,i,j,f,g],template:c};return h.additionalExtensions&&(k.extensions=k.extensions.concat(h.additionalExtensions)),a.create(k,h)}}}),define("tau/models/baseInfoList/extension.model.additionalInfoImpedimentFilter",["Underscore","tau/models/extension.model.base"],function(_,a){var b=a.extend({"bus extendGetEntityQuery":function(a){var b=a.data.fields,c=["id"];b=a.data.fields=_.uniq(_.union(b,[{owner:c},{responsible:c},"isPrivate"])),_.each(b,function(a){a.hasOwnProperty("entityState")&&(a.entityState=_.uniq(_.union(a.entityState,["isFinal"])))})},"bus filterEntities":function(a){var b=a.data;b.entities=_.select(b.entities,function(a){if(a.entityState.isFinal)return!1;if(!a.isPrivate)return!0;var b=this.config.context.getLoggedUser().id;return(a.owner||{}).id==b||(a.responsible||{}).id==b},this)}});return b}),define("tau/components/extensions/impedimentList/extension.impedimentList.visibilityController",["jQuery","tau/components/extensions/component.extension.base"],function(jQuery,a){return a.extend({"bus afterRender":function(a){a.data.element.hide()},"bus afterRender+impedimentsCountRetrieved":function(a){if(a.impedimentsCountRetrieved.data.count>0){var b=a.afterRender.data.element;this.config.disableAnimation?b.show():b.slideDown("slow")}}})}),define("tau/components/extensions/impedimentList/extension.impedimentList.count.label.setter",["jQuery","tau/components/extensions/component.extension.base"],function(jQuery,a){return a.extend({"bus afterRender+impedimentsCountRetrieved":function(a){var b=a.impedimentsCountRetrieved.data.count;b>0&&this.fire("setBadgeText",{text:b})}})}),define("tau/models/baseInfoList/extension.model.entityIdRetriever",["tau/models/extension.model.base"],function(a){var b=a.extend({"bus registerStoreRequest":function(){var a=this.config.context.entity||{entityType:{}},b={};b[this.config.propertyName]=["id"];var c=[b];this.fire("get",{type:a.entityType.name,query:{id:a.id,fields:c},callback:{success:this.onEntityRetrieved,scope:this}})},onEntityRetrieved:function(a){var b=a.data[this.config.propertyName];this.fire("entityIdsRetrieved",b)}});return b}),define("tau/models/baseInfoList/extension.model.additionalInfoEntityRetriever",["Underscore","tau/models/extension.model.base"],function(_,a){var b=a.extend({"bus entityIdsRetrieved":function(a){var b=a.data,c=b.length;for(var d=0;d<c;d++){var e={id:b[d].id,fields:["id","name",{entityState:["name"]}]};this.fire("extendGetEntityQuery",e),this.fire("get",{type:this.config.typeName,query:e})}this.fire("commitTransaction",{scope:this,success:this.onEntitiesRetrieved})},convertServerDataModelData:function(a){return a=a,{__type:a.__type,id:a.id,name:a.name,state:{name:a.entityState.name}}},onEntitiesRetrieved:function(a){var b={entities:_.pluck(a,"data")};this.fire("filterEntities",b),a=b.entities;var c=_.map(a,this.convertServerDataModelData,this);c=_.compact(c),this.fire("entitiesRetrieved",c)}});return b}),define("tau/models/model.list.baseInfo",["tau/core/model-base","tau/models/baseInfoList/extension.model.entityIdRetriever","tau/models/baseInfoList/extension.model.additionalInfoEntityRetriever"],function(a,b,c){var d=a.extend({init:function(a){this._super.apply(this,arguments),this.propertyName=a.propertyName,this.typeName=a.typeName,new b(a),new c(a)},onInit:function(){this.fire("registerStoreRequest"),this.fire("commitTransaction")},"bus entitiesRetrieved":function(a){var b={items:a.data};this.bus.fire("dataBind",b)},"bus evictProperty":function(){var a=this.config.context.entity;this.store.evictProperties(a.id,a.entityType.name,[this.propertyName])}});return d}),define("tau/models/model.impedimentsCountCalculator",["tau/models/model.list.baseInfo","tau/models/baseInfoList/extension.model.additionalInfoImpedimentFilter"],function(a,b){var c=a.extend({init:function(a){a.propertyName="impediments",a.typeName="impediment",this._super.apply(this,arguments),new b(a)},"bus entitiesRetrieved":function(a){this.fire("impedimentsCountRetrieved",{count:a.data.length})},onGetEntity:function(a){var b=a.data,c=b["impediments-count"];this.fire("impedimentsCountRetrieved",{count:c})}});return c}),define("tau/components/component.impedimentListPanel",["Underscore","tau/components/component.collapsible","tau/components/extensions/impedimentList/extension.impedimentList.visibilityController","tau/components/extensions/impedimentList/extension.impedimentList.count.label.setter","tau/models/model.impedimentsCountCalculator","tau/models/model.extensions","tau/models/assignmentsList/extension.model.store.operations","tau/core/termProcessor"],function(_,a,b,c,d,e,f,g){return{create:function(c){var e=new g(c.context.getTerms());return c=c||{},_.extend(c,{collapsed:!0,header:[{type:"label.impedimentsCount"}],items:[{type:"impedimentList"}],extensions:[b,d,f]}),a.create(c)}}}),define("tau/models/dataprocessor/model.processor.implementationHistory",["Underscore","tau/core/termProcessor"],function(_,a){var b=function(a,b,c){return _.each(c,function(c){c in b&&(a[c]=b[c])}),a},c=function(a){this._historyItems=a};c.enhance=function(a){return(new this(a)).enhance()},c.prototype={constructor:c,enhance:function(){var a=this._historyItems;return a=this._addDateSpan(a),a},_addDateSpan:function(a){var b=this._createItemStateGroups(a);return _.each(b,function(a){var b=_.first(a).state;b.dateSpan=a.length}),a},_createItemStateGroups:function(a){var b=[],c=null,d=null;return _.each(a,function(a){c!=a.state.name&&(c=a.state.name,d&&b.push(d),d=[]),d.push(a)}),b.push(d),b}};var d=function(a){this._historyItems=a};d.compress=function(a){return(new this(a)).compress()},d.prototype={constructor:d,compress:function(){var a=this._historyItems;return a=this._compressAssignments(a),a=this._compressStates(a),a},_compressStates:function(a){var b=_.select(a,function(b,c){var d=!0;return this._isItemStateNeedsCompression(b.state)&&this._isItemNeedsCompression(b,c,a)&&(d=!1),d},this);return b},_isItemStateNeedsCompression:function(a){return a.isInitial||a.isFinal},_isItemNeedsCompression:function(a,b,c){var d=!1,e=c[b-1],f=!e;if(!f){var g=e.state.name!=a.state.name,h=a.transitions>1,i=a.assignments,j=a.relatedEntities,k=a.spentTime>0;g||!h&&!i&&!j&&!k&&(d=!0)}return d},_compressAssignments:function(a){return this._clearDublicatedAssignmentsForState(a),this._mergeIdenticalAssignmentsForItem(a),a},_clearDublicatedAssignmentsForState:function(a){var b=_.select(a,function(b,c){var d=!1;if(b.assignments){var e=a[c-1];e&&e.state.name==b.state.name&&this._areAssignmentsTheSame(e.assignments,b.assignments)&&(d=!0)}return d},this);_.each(b,function(a){delete a.assignments})},_mergeIdenticalAssignmentsForItem:function(a){_.each(a,function(a){if(a.assignments){var b=[],c={};_.each(a.assignments,function(a){a.id in c?c[a.id].roles.push(a.role):(c[a.id]=a,a.roles=[a.role],delete a.role,b.push(a))}),a.assignments=b}})},_areAssignmentsTheSame:function(a,b){var c=_.pluck(a,"id").join(""),d=_.pluck(b,"id").join("");return c==d}};var e=function(b){this._inputData=b,this._termProcessor=new a(b.terms)};return e.transform=function(a){return(new this(a)).transform()},e.prototype={constructor:e,transform:function(){var a={entityStates:this._getEntityStateNames(),historyItems:this._getHistoryItems()};return a},_getHistoryEntries:function(){return this._inputData.response[0].data.statistics.entries},_getAllEntityStatesForProcess:function(){return this._inputData.response[1].data.entityStates},_getAllUsers:function(){return this._inputData.response[2].data},_getAllRoles:function(){return this._inputData.response[3].data},_getEntityStateNames:function(){var a=this._getEntityStates(),b=this._sortEntityStates(a),c=_.map(b,function(a){return a.name});return c},_getEntityStates:function(){var a=this._inputData.entityTypeName,b=_.select(this._getAllEntityStatesForProcess(),function(b){return a.toLowerCase()==b.entityType.name.toLowerCase()});return b},_sortEntityStates:function(a){var b=_.sortBy(a,function(a){var b=a.numericPriority;return a.isInitial?b=Number.NEGATIVE_INFINITY:a.isFinal&&(b=Number.POSITIVE_INFINITY),b}).reverse();return b},_getHistoryItems:function(){var a=[];return _.each(this._getHistoryEntries(),function(b){a.push(this._createHistoryItem(b))},this),a=this._sortHistoryItems(a),a=this._enhanceHistoryItems(a),a=this._compressHistoryItems(a),a},_createHistoryItem:function(a){var b={date:new Date(Date.parse(a.date)),spentTime:parseFloat(a.time),transitions:parseFloat(a.transitions),state:this._getHistoryEntryState(a)},c=this._getHistoryEntryRelatedEntities(a);return _.isEmpty(c)||(b.relatedEntities=c),a.assignments&&(b.assignments=this._getHistoryEntryAssignments(a)),b},_getHistoryEntryState:function(a){var c=this._getEntityStateInfo(a.stateId),d=b({},c,["name","isInitial","isFinal"]);return c.role&&(d.roleId=c.role.id),d},_getEntityStateInfo:function(a){var b=_.detect(this._getAllEntityStatesForProcess(),function(b){return a==b.id});return b},_getHistoryEntryRelatedEntities:function(a){var c=b({},a,["opened","closed"]);return this._setEntityAlias(c.opened),this._setEntityAlias(c.closed),c},_setEntityAlias:function(a){_.each(a,function(a){var b=this._getEntityAlias(a.type);b&&(a.alias=b)},this)},_getEntityAlias:function(a){var b=this._termProcessor.getTerms(a);return b?b.name:null},_getHistoryEntryAssignments:function(a){var b=[];return _.each(a.assignments,function(a){var c=this._getUserInfo(a.userId);c&&b.push({id:a.userId,firstName:c.firstName,lastName:c.lastName,role:{id:parseInt(a.roleId),name:this._roleIdToName(a.roleId)}})},this),b},_getUserInfo:function(a){var c=null,d=_.detect(this._getAllUsers(),function(b){return a==b.id});return d&&(c=b({},d,["firstName","lastName"])),c},_roleIdToName:function(a){var b=_.detect(this._getAllRoles(),function(b){return a==b.id});return b.name},_sortHistoryItems:function(a){return _.sortBy(a,function(a){return new Date(Date.parse(a.date))})},_enhanceHistoryItems:function(a){return c.enhance(a)},_compressHistoryItems:function(a){return d.compress(a)}},e}),define("tau/models/model.implementationHistory",["Underscore","tau/core/model-base","tau/models/dataprocessor/model.processor.implementationHistory","tau/configurator","tau/store/types"],function(_,a,b,c,d){return a.extend({onInit:function(){var a=this.config.context,b="implementationHistory";this.store.evictProperties(this.config.context.entity.id,"implementationHistory",["statistics"]),this.store.get(b,{id:a.entity.id,fields:["id","statistics"]}).get("process",{id:a.getProcessId(),nested:!0,fields:[{entityStates:["id","name","isInitial","isFinal","numericPriority",{entityType:["id","name"]},{role:["id"]}]}]}).get("user",{fields:["id","firstName","lastName"]}).get("roles",{fields:["id","name"]}).done({scope:this,success:this.onDone}),this.store.unbind(this),this._bindToStoreChanges()},_bindToStoreChanges:function(){this._bindToStoreAfterSafe(),this._bindToStoreAfterRemove()},_bindToStoreAfterSafe:function(){this.store.on({eventName:"afterSave",type:this.config.context.entity.entityType.name,listener:this,filter:{id:this.config.context.entity.id},hasChanges:["entityState"]},this._getOnStoreChangesProxy()),_.each(this._getStoreObservableEntityTypes(),function(a){this.store.on({eventName:"afterSave",type:a,listener:this},this._getOnStoreChangesProxy())},this)},_bindToStoreAfterRemove:function(){_.each(this._getStoreObservableEntityTypes(),function(a){this.store.on({eventName:"afterRemove",type:a,listener:this},this._getOnStoreChangesProxy())},this)},_getStoreObservableEntityTypes:function(){if(!this._storeObservableEntityTypes){var a=["assignment","impediment"];switch(this.config.context.entity.entityType.name){case"userstory":a.push("task","bug");break;case"feature":a.push("userstory");break;case"request":a.push("feature","userstory","task","bug")}this._storeObservableEntityTypes=a}return this._storeObservableEntityTypes},_onStoreChanges:function(a){this.store.evictProperties(this.config.context.entity.id,"implementationHistory",["statistics"]),this.fire("afterUpdate")},_getOnStoreChangesProxy:function(){return this._onStoreChangesProxy||(this._onStoreChangesProxy=_.bind(this._onStoreChanges,this)),this._onStoreChangesProxy},onDone:function(a){var c=b.transform({response:a,entityTypeName:this.config.context.entity.entityType.name,terms:this.config.context.getTerms()});this.fire("dataBind",c)}})}),define("tau/components/extensions/implementationHistory/component.implementationHistory.dateRenderer",["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/utils/utils.date"],function(_,$,a,b){return a.extend({"bus afterRender":function(a){this._$element=a.data.element,this._data=a.data.data,this._render()},_render:function(){var a=this._$element.find(".tau-historyGrid td.tau-historyItem");_.each(this._data.historyItems,function(c,d){var e=a.eq(d),f=e.find(".tau-date"),g=$("<span/>").addClass("tau-day"),h=$("<span/>").addClass("tau-month");g.text(b.formatAs(c.date,"dd")),h.text(b.formatAs(c.date,"MMM")),f.attr("title",b.format.date.short(c.date)).append(g,h)})}})}),define("tau/components/extensions/implementationHistory/component.implementationHistory.stateProgressRenderer",["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(_,$,a){return a.extend({"bus afterRender":function(a){this._$element=a.data.element,this._data=a.data.data,this._render()},_render:function(){this._createFlowIndicators(),this._connectMarkers(),this.fire("stateProgressRendered")},_createFlowIndicators:function(){var a=this._$element.find(".tau-historyGrid .tau-historyItem");_.each(this._data.historyItems,function(b,c){this._markProgressStep(a.eq(c),b)},this)},_getHistoryItemStateIndex:function(a){return _.indexOf(this._data.entityStates,a)},_getFlowType:function(a){var b="NORMAL";return a.state.isFinal?b="DONE":this._isUnderImpediment(a)?b="IMPEDIMENT":a.transitions>1&&(b="MULTITRANS"),b},_isUnderImpediment:function(a){var b=_.any(this._getImpedimentRangeList(),function(b){return this._isInImpedimentRange(a,b)},this);return b},_getImpedimentRangeList:function(){if(!this._impedimentRangeList){this._impedimentRangeList=[];var a=this._getAllImpediments();_.each(a.opened,function(b,c){this._impedimentRangeList.push({start:b,end:a.closed[c]||Number.POSITIVE_INFINITY})},this),this._impedimentRangeList.sort(function(a,b){return b.end-b.start-(a.end-a.start)})}return this._impedimentRangeList},_getAllImpediments:function(){var a={opened:{},closed:{}};return _.each(this._data.historyItems,function(b){b.relatedEntities&&(_.each(b.relatedEntities.opened,function(c){this._isImpediment(c)&&(a.opened[c.id]=b.date)},this),_.each(b.relatedEntities.closed,function(c){this._isImpediment(c)&&(a.closed[c.id]=b.date)},this))},this),a},_isImpediment:function(a){return a.type.toLowerCase()=="impediment"},_isInImpedimentRange:function(a,b){return a.date>=b.start&&a.date<=b.end},_markProgressStep:function(a,b){var c=this._getHistoryItemStateIndex(b.state.name),d=this._getFlowType(b),e=this._createFlowIndicator(d),f=b.state.dateSpan;f&&!b.state.isFinal&&$("<span/>").addClass("datespan").text(f).attr("title",f+" consecutive days in this state").appendTo(e),a.find(".tau-progressSteps .tau-step:nth-child("+(c+1)+") .tau-marker").append(e)},_createFlowIndicator:function(a){var b=$("<div/>").addClass("tau-flow");switch(a){case"NORMAL":b.addClass("tau-normal");break;case"MULTITRANS":b.addClass("tau-transitions");break;case"IMPEDIMENT":b.addClass("tau-impediment");break;case"DONE":b.addClass("tau-done")}return b},_connectMarkers:function(){_.each(this._data.historyItems,function(a,b){var c=this._getHistoryItemStateIndex(a.state.name);this._connect(b,c,b-1,"in"),this._connect(b,c,b+1,"out")},this)},_connect:function(a,b,c,d){var e=this._data.historyItems[c];if(e){var f=this._getHistoryItemStateIndex(e.state.name),g=b-f;g>0&&this._$element.find(".tau-historyGrid .tau-historyItem").eq(a).find(".tau-progressSteps .tau-step").filter(function(a){return a>=f+1&&a<=b}).find(".tau-marker").addClass("tau-"+d)}}})}),define("tau/components/extensions/implementationHistory/component.implementationHistory.stateHistogramRenderer",["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(_,$,a){return a.extend({"bus afterRender":function(a){this._$element=a.data.element,this._data=a.data.data,this._render()},_render:function(){var a=this._createStateDateItemsHash();this._$element.find(".tau-historyGridInterpretation .stateName").each(function(b,c){var d=$(c),e=a[d.text()],f=d.attr("title")+" ("+e.absolute+" days)";d.attr("title",f).addClass("tau-dateItems-"+e.relative)})},_createStateDateItemsHash:function(){var a={};return _.each(this._data.entityStates,function(b){a[b]={absolute:0,relative:0}}),this._calculateAbsoluteHashValues(a),this._calculateRelativeHashValues(a),a},_calculateAbsoluteHashValues:function(a){_.each(this._data.historyItems,function(b){var c=b.state.dateSpan;c&&(a[b.state.name].absolute+=c)})},_calculateRelativeHashValues:function(a){var b=_.max(a,function(a){return a.absolute}).absolute;_.each(a,function(c,d){var e=c.absolute*100/b;a[d].relative=Math.round(e/10)*10})}})}),define("tau/components/extensions/implementationHistory/component.implementationHistory.timeLoadRenderer",["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(_,$,a){return a.extend({"bus afterRender":function(a){this._$element=a.data.element,this._data=a.data.data,this._render()},_render:function(){if(this._timeLoadWasReported()){var a=this._calculateMaxSpentTime(),b=this._$element.find(".tau-historyGrid td.tau-historyItem");_.each(this._data.historyItems,function(c,d){var e=c.spentTime,f=b.eq(d).find(".tau-date"),g=this._calculateRelatedRoundedSpentTime(a,e);if(!isNaN(g)){var h=f.attr("title");f.addClass("tau-timeLoad-"+g).attr("title",h+" ("+e+" hours)")}},this)}},_timeLoadWasReported:function(){return _.any(this._data.historyItems,function(a){return a.spentTime>0})},_calculateMaxSpentTime:function(){return _.max(this._data.historyItems,function(a){return a.spentTime}).spentTime},_calculateRelatedRoundedSpentTime:function(a,b){var c=b*100/a,d=Math.round(c/10)*10;return d}})}),define("tau/components/extensions/implementationHistory/component.implementationHistory.relatedEntitiesRenderer",["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(_,$,a){var b={create:function(a,b){return $("<div/>").addClass(this._createClassName(a,b)).attr("title",this._createTitle(a,b)).data("entityInfo",{id:a.id,type:a.type,alias:a.alias||a.type}).click(this._onRelatedEntityClick)},_createTitle:function(a,b){var c=["["+(a.alias||a.type)+"]"," #"+a.id,a.name,b?"(closed)":"(added)"].join(" ");return c},_createClassName:function(a,b){var c=["tau-entity","tau-"+a.type.toLowerCase(),b?"tau-closed":""].join(" ");return c},_onRelatedEntityClick:function(a){var b=$(this).data("entityInfo");b&&location.assign("#"+b.type+"/"+b.id)}};return a.extend({"bus afterRender":function(a){this._$element=a.data.element,this._data=a.data.data,this._render()},_render:function(){var a=this._$element.find(".tau-historyGrid .tau-historyItem");_.each(this._data.historyItems,function(c,d){var e=a.eq(d).find(".tau-relatedEntities");c.relatedEntities&&(_.each(c.relatedEntities.opened,function(a){e.append(b.create(a))}),_.each(c.relatedEntities.closed,function(a){e.append(b.create(a,!0))}))})}})}),define("tau/components/extensions/implementationHistory/component.implementationHistory.assignmentsRenderer",["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/configurator"],function(_,$,a,b){return a.extend({"bus afterRender+stateProgressRendered":function(a){this._$element=a.afterRender.data.element,this._data=a.afterRender.data.data,this._render()},_render:function(){var a=this._$element.find(".tau-historyGrid .tau-historyItem");_.each(this._data.historyItems,function(b,c){b.assignments&&!b.state.isFinal&&$('<div class="tau-assignments"/>').insertAfter(a.eq(c).find(".tau-flow")).append(this._getAssignments(b))},this)},_getAssignments:function(a){var c=[];return _.each(a.assignments,function(d){var e=[d.firstName,d.lastName,"("+this._getAssignmentRoles(d)+")"].join(" "),f=b.getApplicationPath()+"/Avatar.ashx?UserId="+d.id+"&size=50",g=this._isActiveAssignment(d,a)?' class="active"':"";c.push("<img"+g+' alt="avatar" title="'+e+'" src="'+f+'"/>')},this),c.join("")},_getAssignmentRoles:function(a){return _.map(a.roles,function(a){return a.name}).join(", ")},_isActiveAssignment:function(a,b){return _.any(a.roles,function(a){return a.id==b.state.roleId})}})}),define("tau/components/extensions/implementationHistory/component.implementationHistory.legendRenderer",["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/utils/utils.date","tau/utils/utils.storage"],function(_,$,a,b,c){return a.extend({"bus afterRender":function(a){this._$element=a.data.element,this._data=a.data.data,this._render(),this._bindEvents()},_render:function(){var a=$('<div class="tau-legend"></div>'),b=$('<h3><span class="tau-legendToggler">Legend</span></h3>');a.append(b,this._createGroups()),this._setState(a),a.appendTo(this._$element)},_createGroups:function(){var a=$('<div class="tau-groups"></div>');this._createGroupElement("Progress Flow",this._getProgressFlowTypes()).appendTo(a);var b=this._getRelatedEntitiesTypes();return b&&this._createGroupElement("Related Entities",b).appendTo(a),this._createGroupElement("Histograms",this._getHistogramTypes()).appendTo(a),a},_createGroupElement:function(a,b){var c=$("<dl/>"),d=$("<dt/>").text(a);return c.append(d),_.each(b,function(a){var b=$("<dd/>"),d=$(a.element).addClass("glyph");b.text(a.description),b.prepend(d),c.append(b)}),c},_getProgressFlowTypes:function(){var a=this._$element.find(".tau-historyGrid .tau-historyItem .tau-flow"),b={};_.each(a,function(a){var c=$.trim(a.className.replace("tau-flow",""));c in b||(b[c]=$(a).clone().empty().removeAttr("title"))});var c=_.map(b,function(a,b){var c={element:a};switch(b){case"tau-normal":c.description="normal flow";break;case"tau-transitions":c.description="multiple state transitions";break;case"tau-impediment":c.description="impediment";break;case"tau-done":c.description="final state"}return c});return c},_getRelatedEntitiesTypes:function(){var a=null,b=this._$element.find(".tau-historyGrid .tau-historyItem .tau-entity");if(b.size()>0){var c={};_.each(b,function(a){var b=$.trim(a.className.replace(/tau-entity|tau-closed/g,""));b in c||(c[b]=$(a).clone(!0).unbind().removeAttr("title"))});var d=_.map(c,function(a,b){return{element:a,description:a.data("entityInfo").alias}});a=[{element:$('<div class="tau-entity"></div>'),description:"entity (added)"},{element:'<div class="tau-entity tau-closed"></div>',description:"entity (closed)"}].concat(d)}return a},_getHistogramTypes:function(){var a=[];return a.push({element:this._getElementForStateHistogram(),description:"total days in entity state"}),this._timeLoadWasReported()&&a.push({element:this._getElementForTimeLoadHistogram(),description:"daily total spent time"}),a},_getElementForStateHistogram:function(){var a=$(['<div class="tau-historyGridInterpretation">','<div class="stateName tau-dateItems-50">',"<span>State name</span>","</div>","</div>"].join(""));return a},_timeLoadWasReported:function(){return _.any(this._data.historyItems,function(a){return a.spentTime>0})},_getElementForTimeLoadHistogram:function(){var a=new Date(0),c=$(['<div class="tau-date tau-timeLoad-50">','<span class="tau-day">'+b.formatAs(a,"dd")+"</span>",'<span class="tau-month">'+b.formatAs(a,"MMM")+"</span>","</div>"].join(""));return c},_setState:function(a){this._isCollapsed()&&this._collapse(a)},_bindEvents:function(){this._$element.find(".tau-legend .tau-legendToggler").click($.proxy(this,"_toggleState"))},_toggleState:function(a){var b=$(a.currentTarget).parents(".tau-legend");this._isCollapsed()?this._uncollapse(b):this._collapse(b)},_isCollapsed:function(){return c.get("implementationHistoryLegendState")=="collapsed"},_uncollapse:function(a){c.remove("implementationHistoryLegendState"),a.removeClass("tau-collapsed")},_collapse:function(a){c.set("implementationHistoryLegendState","collapsed"),a.addClass("tau-collapsed")}})}),define("tau/components/extensions/implementationHistory/component.implementationHistory.historyGridScroller",["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(_,$,a){return a.extend({"bus afterRender":function(a){a.data.element.find(".tau-historyGrid").mousewheel($.proxy(this,"_onMouseWheel"))},_onMouseWheel:function(a,b){var c=a.currentTarget;if(this._isScrollActive(c)){a.preventDefault();var d=$(c),e=d.scrollLeft(),f=e+ -b*100;d.scrollLeft(f)}},_isScrollActive:function(a){return a.scrollWidth>a.offsetWidth}})}),define("tau/components/extensions/implementationHistory/component.implementationHistory.relatedEntitiesHighlighter",["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(_,$,a){return a.extend({"bus afterRender":function(a){this._$relatedEntities=a.data.element.find(".tau-relatedEntities .tau-entity"),this._$relatedEntities.hover($.proxy(this,"_onHoverIn"),$.proxy(this,"_onHoverOut"))},_getRelatedEntities:function(a){var b=$(a).data("entityInfo").id;return this._$relatedEntities.filter(function(){return b==$(this).data("entityInfo").id})},_onHoverIn:function(a){this._getRelatedEntities(a.currentTarget).addClass("tau-highlight")},_onHoverOut:function(a){this._getRelatedEntities(a.currentTarget).removeClass("tau-highlight")}})}),define("tau/components/extensions/implementationHistory/component.implementationHistory.updateOverlay",["tau/components/extensions/component.extension.base","tau/ui/behaviour/overlay/ui.behaviour.overlay"],function(a){return a.extend({"bus afterRender":function(a){this._$element=a.data.element},"bus afterUpdate":function(a){this._$element.tauOverlay(),this.fire("refresh")}})}),define("tau/ui/templates/implementationHistory/ui.template.implementationHistoryItem",["tau/core/templates-factory"],function(a){var b={name:"implementationHistoryItem",options:{},dependencies:[],markup:['<td class="tau-historyItem">','<div class="tau-progressSteps">',"{{each(index, step) $item.parent.data.entityStates}}",'<div class="tau-step">','<div class="tau-marker"/>',"</div>","{{/each}}","</div>",'<div class="tau-date"></div>','<div class="tau-relatedEntities"></div>',"</td>"].join("")};return a.register(b)}),define("tau/ui/templates/implementationHistory/ui.template.implementationHistory",["tau/core/templates-factory","tau/ui/templates/implementationHistory/ui.template.implementationHistoryItem"],function(a){var b={name:"implementationHistory",options:{},dependencies:["implementationHistoryItem"],markup:['<div class="tau-implementationHistory">','<div class="tau-historyGridInterpretation">',"{{each(index, stateName) entityStates}}",'<div class="stateName" title="${stateName}">',"<span>${stateName}</span>","</div>","{{/each}}","<div>Date</div>","<div>Related Entities</div>","</div>",'<div class="tau-historyGrid">',"<table>","<tbody>","<tr>",'{{tmpl(historyItems) "implementationHistoryItem"}}',"</tr>","</tbody>","</table>","</div>","</div>"].join("")};return a.register(b)}),define("tau/components/component.implementationHistory",["tau/components/component.creator","tau/models/model.implementationHistory","tau/components/extensions/implementationHistory/component.implementationHistory.dateRenderer","tau/components/extensions/implementationHistory/component.implementationHistory.stateProgressRenderer","tau/components/extensions/implementationHistory/component.implementationHistory.stateHistogramRenderer","tau/components/extensions/implementationHistory/component.implementationHistory.timeLoadRenderer","tau/components/extensions/implementationHistory/component.implementationHistory.relatedEntitiesRenderer","tau/components/extensions/implementationHistory/component.implementationHistory.assignmentsRenderer","tau/components/extensions/implementationHistory/component.implementationHistory.legendRenderer","tau/components/extensions/implementationHistory/component.implementationHistory.historyGridScroller","tau/components/extensions/implementationHistory/component.implementationHistory.relatedEntitiesHighlighter","tau/components/extensions/implementationHistory/component.implementationHistory.updateOverlay","tau/ui/templates/implementationHistory/ui.template.implementationHistory"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){return{create:function(n){var o=n||{},p={extensions:[b,c,d,e,f,g,h,i,j,k,l],template:m};return a.create(p,o)}}}),define("tau/ui/templates/common/ui.template.attributeValue",["tau/core/templates-factory"],function(a){var b={name:"common-attributeValue",markup:['<span class="attr-item popup-target"><span class="attr-name">${name}</span></span>'],dependencies:[]};return a.register(b)}),define("tau/ui/templates/progressBar/ui.template.iteration.progressBar",["tau/core/templates-factory","tau/ui/tags/ui.tag.term","tau/ui/templates/common/ui.template.attributeValue"],function(a,b){var c={name:"iteration-progress-bar",tags:[b],markup:['<div class="entity-progress-box">','   <div class="ui-progressbar__data">','      <span class="ui-label-completed">Completed&nbsp;<b class="value">${effortCompleted}${point}</b></span>','      <span class="ui-label-todo">ToDo&nbsp;<b class="value">${effortToDo}${point}</b></span>',"   </div>",'   <div class="ui-progress-bar-progress ui-progressbar__progress">',"{{if percentCompleted !== 0 }}",'      <span class="ui-progress-progress ui-progressbar__progress__indicator" style="width:${ Math.round(percentCompleted) < 15 ? 15 : Math.round(percentCompleted) }%;">','         <span class="ui-label ui-progressbar__progress__label"><b class="value">${ Math.round(percentCompleted) }%</b></span>',"      </span>","{{/if}}","   </div>","</div>"],dependencies:["common-attributeValue"]};return a.register(c)}),define("tau/components/component.iteration.progressBar",["tau/components/component.creator","tau/models/model.iteration.progressBar","tau/ui/templates/progressBar/ui.template.iteration.progressBar"],function(a,b,c){return{create:function(d){var e={extensions:[b],template:c};return a.create(e,d)}}}),define("tau/components/extensions/duplicateBugList/extension.duplicateBugList.count.label.setter",["jQuery","tau/components/extensions/component.extension.base"],function(jQuery,a){return a.extend({"bus afterRender+duplicateBugCountRetrieved":function(a){var b=a.duplicateBugCountRetrieved.data.count;b>0&&this.fire("setBadgeText",{text:b})}})}),define("tau/ui/tags/ui.tag.implode",["Underscore"],function(_){return{register:function(a,b){b.$tau=b.$tau||{},b.$tau.text_implode=function(a){var b=new String(a);if(_.isString(a))b=a;else if(_.isArray(a)){var c=_.clone(a),d=c.pop();b=_.filter([c.join(", "),d],function(a){return a!=0}).join(" &amp; ")}return b}}}}),define("tau/ui/templates/label/ui.template.label",["tau/core/templates-factory","tau/ui/tags/ui.tag.implode"],function(a,b){var c={name:"label",tags:[b],markup:['<div><span class="ui-label{{if cssClass}} ${cssClass}{{/if}}">${$item.$tau.text_implode(text)}</span></div>'],dependencies:[]};return a.register(c)}),define("tau/ui/extensions/label/ui.extension.label",["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(_,$,a){return a.extend({"bus afterRender+setBadgeText":function(a){this.element=a.afterRender.data.element,this._getBadgeElement().text(a.setBadgeText.data.text),this.config.quantityCssClass&&this._getBadgeElement().addClass(this.config.quantityCssClass)},_getBadgeElement:function(){var a=this.element.find(".ui-quantity");return a.length==0&&(a=$('<span class="ui-quantity"></span>').appendTo(this.element)),a}})}),define("tau/components/component.label",["Underscore","tau/components/component.creator","tau/models/model.label","tau/ui/templates/label/ui.template.label","tau/ui/extensions/label/ui.extension.label"],function(_,a,b,c,d){return{create:function(e){var f={ModelType:b,template:c,extensions:_.clone(e.extensions||[])};return e.hideCounter||f.extensions.push(d),a.create(f,e)}}}),define("tau/components/component.label.duplicateBugCount",["Underscore","tau/components/component.label","tau/components/extensions/duplicateBugList/extension.duplicateBugList.count.label.setter","tau/models/model.duplicateBugCountCalculator","tau/models/model.duplicateBugRetriever","tau/models/model.extensions","tau/models/assignmentsList/extension.model.store.operations","tau/core/termProcessor"],function(_,a,b,c,d,e,f,g){return{create:function(e){var h=e.context.applicationContext.processes[0].terms,i=new g(h);return e=e||{},_.extend(e,{text:"Duplicate "+i.getTerms("Bug").names,quantityCssClass:e.quantityCssClass||"ui-gray-quantity",extensions:[b,c,f,d]}),a.create(e)}}}),define("tau/components/component.label.impedimentsCount",["Underscore","tau/components/component.label","tau/components/extensions/impedimentList/extension.impedimentList.count.label.setter","tau/models/model.impedimentsCountCalculator","tau/models/model.extensions","tau/models/assignmentsList/extension.model.store.operations","tau/core/termProcessor"],function(_,a,b,c,d,e,f){return{create:function(d){var g=new f(d.context.getTerms());return d=d||{},_.extend(d,{text:g.getTerms("Impediment").names,quantityCssClass:d.quantityCssClass||"ui-red-quantity",extensions:[b,c,e]}),a.create(d)}}}),define("tau/ui/templates/list/ui.template.list.baseInfo.item",["tau/core/templates-factory","tau/ui/templates/common/ui.template.entityLink"],function(a){var b={name:"list-base-info-item",markup:['<tr class="{{if $item.index %2 != 0}}alternative-row{{/if}}">','   <td class="entity-type tau-list__table__cell-id">{{tmpl($data) "entity-link"}}</td>','   <td class="name">${name}</td>','   <td class="state">${state.name}</td>',"</tr>"].join(""),dependencies:["entity-link"]};return a.register(b)}),define("tau/ui/templates/list/ui.template.list.baseInfo",["tau/core/templates-factory","tau/ui/templates/list/ui.template.list.baseInfo.item"],function(a){var b={name:"request-list",options:{contentSelector:".request-list"},markup:['<div class="ui-base-info-list-content">','<table class="ui-table base-info-list" cellpadding="4" cellspacing="0" {{if items.length === 0}}style="display:none"{{/if}}>',"<tbody>","{{each items}}",'    {{tmpl($value, {index:$index}) "list-base-info-item"}}',"{{/each}}","</tbody>","</table>","</div>"].join(""),dependencies:["list-base-info-item"]};return a.register(b)}),define("tau/ui/extensions/baseList/ui.extension.baseList",["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(_,$,a){return a.extend({"bus beforeInit":function(a){var b=a.data.config;this.options={emptyDataMessage:b.emptyDataMessage||"No data",contentSelector:b.contentSelector||null,emptyElementCssClass:b.emptyElementCssClass||"ui-empty-data-msg"}},"bus dataBind+afterRender":function(a){this.element=a.afterRender.data.element,a.dataBind.data.items.length===0&&this._applyToggleNoData(!0)},"bus hideListContent":function(a){this._applyToggleNoData(!0)},"bus showListContent":function(a){this._applyToggleNoData(!1)},_applyToggleNoData:function(a){this._toggleNoData(a)},_getVisibilityMethodName:function(a){return a?"show":"hide"},_toggleNoData:function(a){var b=this._getVisibilityMethodName(!a),c=this._getVisibilityMethodName(a),d=this.element,e=this.options;d.find(e.contentSelector)[b](),this._getNoDataMessageElement(d,e)[c]()},_getNoDataMessageElement:function(a,b){var c=a.find("."+b.emptyElementCssClass);return c.length===0&&(c=$(['<span class="',b.emptyElementCssClass,'">',b.emptyDataMessage,"</span>"].join("")).appendTo(a)),c}})}),define("tau/components/component.list.creator",["tau/components/component.creator","tau/ui/extensions/baseList/ui.extension.baseList"],function(a,b){return{create:function(c,d){return d.emptyDataMessage=c.message,d.contentSelector=c.template.options.contentSelector,c.showEmptyMessage!==!1&&(c.extensions=c.extensions||[],c.extensions.push(b)),a.create(c,d)}}}),define("tau/components/component.comments",["Underscore","tau/components/component.list.creator","tau/components/extensions/component.creator.extension","tau/models/model.comments","tau/models/model.comments.editable","tau/ui/extensions/ui.extension.shortcutProcessor","tau/ui/extensions/comments/ui.extension.comments.editable","tau/ui/extensions/comments/ui.extension.comments.add","tau/ui/templates/comments/ui.template.comments"],function(_,a,b,c,d,e,f,g,h){return{create:function(i){var j={extensions:_.concat([c,d,e,f,g,b,i.extensions]),template:h,showEmptyMessage:!1};return i.shortcutProcessorTarget=".ui-comment-text",a.create(j,i)}}}),define("tau/components/component.list.baseInfo",["Underscore","tau/components/component.list.creator","tau/models/model.list.baseInfo","tau/models/assignmentsList/extension.model.store.operations","tau/ui/templates/list/ui.template.list.baseInfo","tau/core/termProcessor"],function(_,a,b,c,d,e){return{create:function(f,g){var h=new e(f.context.getTerms());return g=g||{},g.extensions=_.compact(_.union(g.extensions,[c])),_.extend(g,{message:"No "+h.getTerms(f.typeName).names.toLowerCase()+" found",ModelType:f.ModelType||b,template:d}),a.create(g,f)}}}),define("tau/components/component.duplicateBugList",["Underscore","tau/components/component.list.baseInfo","tau/models/model.duplicateBugList","tau/models/model.duplicateBugRetriever"],function(_,a,b,c){return{create:function(d){return d.ModelType=b,d.typeName="bug",a.create(d,{extensions:[c]})}}}),define("tau/components/component.impedimentList",["Underscore","tau/components/component.list.baseInfo","tau/models/baseInfoList/extension.model.additionalInfoImpedimentFilter"],function(_,a,b){return{create:function(c){return c.typeName="impediment",c.propertyName="impediments",a.create(c,{extensions:[b]})}}}),define("tau/ui/templates/list_/grid.entity/request/ui.template.list.grid.entity.row.related_entity",["tau/core/templates-factory","tau/ui/templates/list_/grid.entity/ui.template.cell.progress","tau/ui/templates/list_/grid.entity/ui.template.cell.assignments","tau/ui/templates/list_/grid.entity/ui.template.cell.name","tau/ui/templates/assignmentsList/ui.template.assignments.mini","tau/ui/templates/property.effort/ui.template.property.effort.content"],function(a){var b={name:"list-grid-entity__row_related_entity",markup:["",'<li class="tau-list__list__item tau-list__list__item-related_entity" role="item">','<table class="tau-list__table">',"<tbody>",'<tr class="i-item-${id} tau-list__table__row {{if $item.data.entityState && $item.data.entityState.isFinal}} tau-list__table__row_isfinalstate_true{{/if}}">','<td class="tau-list__table__cell tau-list__table__cell-dragdrop"  role="sortable-handler" ><div class="dragdrop_indicator"></div></td>','<td class="tau-list__table__cell tau-list__table__cell-id">','   <a href="#${__type}/${id}"><em class="ui-type-icon ui-type-icon-${__type.toLowerCase()}">${id}</em></a>',"</td>",'<td class="tau-list__table__cell tau-list__table__cell-name">','   {{tmpl($item.data) "cell-name"}}',"</td>",'<td class="tau-list__table__cell tau-list__table__cell-state">','<div runas="property.entityState" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}">${entityState.name}</div>',"</td>",'<td class="tau-list__table__cell tau-list__table__cell-date" >','<div runas="property.endDate.list" data-context:general:id="${id}" data-context:general:entity-type:name="${__type}">',"{{if endDate}}","${endDate}","{{/if}}","</div>","</td>",'<td class="tau-list__table__cell tau-list__table__cell-release">','{{if $item.data.hasOwnProperty("release")}}','<div runas="property.release" ','data-context:general:id="${id}" ','data-context:general:entity-type:name="${__type}" ','data-show-url="false" ','{{if __type == "task"}}','data-editable="false" ',"{{else}}",'data-placeholder-text="assign to {{term("release") "name"}}"',"{{/if}}",">","{{if release}}","${release.name}","{{/if}}","</div>","{{/if}}","</td>",'{{if $item.data.hasOwnProperty("iteration")}}','<td class="tau-list__table__cell tau-list__table__cell-iteration">','<div runas="property.iteration" ','data-context:general:id="${id}" ','data-context:general:entity-type:name="${__type}" ','data-show-url="false" ','{{if __type == "task"}}','data-editable="false" ',"{{else}}",'data-placeholder-text="assign to {{term("iteration") "name"}}"',"{{/if}}",">","{{if iteration}}","${iteration.name}","{{/if}}","</div>","</td>","{{/if}}","</tr>","</tbody>","</table>","</li>"],dependencies:["ui.template.property.effort.content","ui.template.assignments.mini","cell-progress","cell-assignments","cell-name"]};return a.register(b)}),define("tau/ui/templates/list_/grid.entity/request/ui.template.list.grid.entity.row.requester",["tau/core/templates-factory","tau/ui/templates/list_/grid.entity/ui.template.cell.progress","tau/ui/templates/list_/grid.entity/ui.template.cell.assignments","tau/ui/templates/list_/grid.entity/ui.template.cell.name","tau/ui/templates/assignmentsList/ui.template.assignments.mini","tau/ui/templates/property.effort/ui.template.property.effort.content"],function(a){var b={name:"list-grid-entity__row_requester",markup:["",'<li class="tau-list__list__item tau-list__list__item_requester" role="item">','<table class="tau-list__table">',"<tbody>",'<tr class="i-item-${id} tau-list__table__row  ">','<td class="tau-list__table__cell tau-list__table__cell-dragdrop"  role="sortable-handler" ><div class="dragdrop_indicator"></div></td>','<td class="tau-list__table__cell tau-list__table__cell-avatar">','{{if avatar}}<img src="${avatar}" class="user-avatar" />{{/if}}',"</td>",'<td class="tau-list__table__cell tau-list__table__cell-name">','<a href="${url}">',"${firstName} ${lastName}","</a>","</td>",'<td class="tau-list__table__cell tau-list__table__cell-email">','<span class="tau-extension-tooltip" title="Email ${email}">',"${email}","</span>","</td>",'<td class="tau-list__table__cell tau-list__table__cell-login">','<span class="tau-extension-tooltip" title="Login ${login}">',"${login}","</span>","</td>","</tr>","</tbody>","</table>","</li>"],dependencies:["ui.template.property.effort.content","ui.template.assignments.mini","cell-progress","cell-assignments","cell-name"]};return a.register(b)}),define("tau/ui/templates/list_/grid.entity/testcase/ui.template.list.grid.entity.row.testcaserun",["tau/core/templates-factory","tau/ui/templates/list_/grid.entity/ui.template.cell.progress","tau/ui/templates/list_/grid.entity/ui.template.cell.assignments","tau/ui/templates/list_/grid.entity/ui.template.cell.name","tau/ui/templates/assignmentsList/ui.template.assignments.mini","tau/ui/templates/property.effort/ui.template.property.effort.content"],function(a){var b={name:"list-grid-entity__rowtestcaserun_testcase",markup:["",'<li class="tau-list__list__item tau-list__list__item-testcaserun tau-list__list__item-testcaserun-testcase" role="item">','<table class="tau-list__table">',"<tbody>",'<tr class="tau-list__table__row">','<td class="tau-list__table__cell tau-list__table__cell-dragdrop"  role="sortable-handler" ><div class="dragdrop_indicator"></div></td>','<td class="tau-list__table__cell tau-list__table__cell-id">','<a class="tau-entitylink" href="#testplanrun/${testplanrun.id}" title="${testplanrun.name}">','<em class="ui-type-icon ui-type-icon-testplanrun">${testplanrun.id}</em>',"</a>","</td>",'<td class="tau-list__table__cell tau-list__table__cell-name">',"${testplanrun.name}","</td>",'<td class="tau-list__table__cell tau-list__table__cell-date">','<span class="tau-extension-tooltip" title="Last run date: ${runDate}">',"${runDate}","</span>","</td>",'<td class="tau-list__table__cell tau-list__table__cell-release">',"{{if release}}",'<span class="tau-extension-tooltip" title="Release: ${release.name}">',"${release.name}","</span>","{{/if}}","</td>",'<td class="tau-list__table__cell tau-list__table__cell-iteration">',"{{if iteration}}",'<span class="tau-extension-tooltip" title="Iteration: ${iteration.name}">',"${iteration.name}","</span>","{{/if}}","</td>",'<td class="tau-list__table__cell tau-list__table__cell-build">',"{{if build}}",'<span class="tau-extension-tooltip" title="Build: ${build.name}">',"${build.name}","</span>","{{/if}}","</td>",'<td class="tau-list__table__cell tau-list__table__cell-laststatus">','<div class="ui-status {{if passed === true}}ui-status_type_passed green{{/if}}{{if passed === false}}ui-status_type_failed red {{if comment}}tau-extension-tooltip{{/if}}  {{/if}}{{if passed === null}}ui-status_type_na grey{{/if}}" ',"{{if comment}}",'title="Comment: \n ${comment}"',"{{/if}}",">","{{if runDate !== null}}","{{if passed === true}}","Passed","{{/if}}","{{if passed === false}}","Failed","{{/if}}","{{if passed === null}}","Skipped","{{/if}}","{{/if}}","</div>","</td>","</tr>","</tbody>","</table>","</li>"],dependencies:["ui.template.property.effort.content","ui.template.assignments.mini","cell-progress","cell-assignments","cell-name"]};return a.register(b)}),define("tau/ui/templates/list_/grid.entity/ui.template.list.grid.entity",["tau/core/templates-factory","tau/ui/templates/list_/grid.entity/ui.template.list.grid.entity.group","tau/ui/templates/list_/grid.entity/ui.template.list.grid.entity.row","tau/ui/templates/list_/grid.entity/testplan/ui.template.list.grid.entity.row.testplanrun","tau/ui/templates/list_/grid.entity/testplanrun/ui.template.list.grid.entity.row.testcaserun","tau/ui/templates/list_/grid.entity/userstory/ui.template.list.grid.entity.row.testcase","tau/ui/templates/list_/grid.entity/request/ui.template.list.grid.entity.row.related_entity","tau/ui/templates/list_/grid.entity/request/ui.template.list.grid.entity.row.requester","tau/ui/templates/list_/grid.entity/testcase/ui.template.list.grid.entity.row.testcaserun","tau/ui/templates/list_/ui.template.list.comment"],function(a){var b={name:"list-grid-entity",markup:['<div class="tau-list">',"   {{if isEmpty === true}}",'      <div class="tau-list__empty-message">${config.currentView.emptyMessage}</div>',"   {{else}}",'     <div class="tau-list__content">',"       {{if groups && groups.length}}",'          {{tmpl(groups) "list-grid-entity__group"}}',"       {{/if}}","       {{if items && items.length}}",'           <div class="tau-list__group tau-list__group_flat_true"  role="group">','               <ul class="tau-list__list"  role="list">',"                   {{tmpl(items) $item.data.config.currentView.rowTemplateName }}","               </ul>","           </div>","       {{/if}}","     </div>","   {{/if}}",'   <div class="tau-list__comment-holder">','          {{tmpl({}) "list-grid__comment"}}',"   </div>","</div>"],dependencies:["list-grid-entity__group","list-grid-entity__row","list-grid-entity__rowtestplanrun","list-grid-entity__rowtestcaserun","list-grid-entity__rowtestcase","list-grid-entity__row_related_entity","list-grid-entity__row_requester","list-grid-entity__rowtestcaserun_testcase","list-grid__comment"]};return a.register(b)}),define("tau/ui/extensions/list/extension.list.editable.progress",["tau/components/extensions/component.extension.base"],function(a){return a.extend({name:"extension.list.editable.progress",category:"edit","bus afterRender":function(a){var b=a.data.element;b.addClass("tau-list-editable")}})}),define("tau/models/dataprocessor/model.processor.context",[],function(){function n(a){return _.isUndefined(a)||_.isNull(a)?null:(a.checkPractice=m,a.isPracticeAvailable=m,a.getTimeTrackingPolicies=b,a.getEffortPoint=c,a.getTerms=d,a.getCustomFields=e,a.getPractices=f,a.getEdition=h,a.getProject=g,a.getProjectId=l,a.getProcess=i,a.getLoggedUser=j,a.getProcessId=k,a)}var a=function(a,b){var c=null,d=a.processes[0].practices;for(var e=0;e<d.length;e++)d[e].name.toLowerCase()===b.toLowerCase()&&(c=d[e]);return c},b=function(){var b=a(this.applicationContext,"Time Tracking"),c=!b;return{disableSpentRemain:c}},c=function(b){var c=a(this.applicationContext,"Planning")||{},d=c.effortPoints;b=b||this.entity.entityType.name.toLowerCase();if(b==="task"||b==="request")d="Hour";var e=d.toLowerCase()==="point"?"pt":"h";return{name:d,shortName:e}},d=function(){var a=this.applicationContext;return a&&a.processes&&a.processes.length>0?a.processes[0].terms:[]},e=function(){var a=this.applicationContext;return a&&a.processes&&a.processes.length>0?a.processes[0].customFields:[]},f=function(){var a=this.applicationContext;return a&&a.processes&&a.processes.length>0?a.processes[0].practices:[]},g=function(){var a=this.applicationContext;return a&&a.selectedProjects&&a.selectedProjects.length>0?a.selectedProjects[0]:null},h=function(){var a=this.applicationContext;return a&&a.edition?a.edition:null},i=function(){var a=this.applicationContext;return a&&a.processes&&a.processes.length>0?a.processes[0]:null},j=function(){var a=this.applicationContext;return a&&a.loggedUser?a.loggedUser:null},k=function(){var a=this.applicationContext,b=this.getProcess();return b?b.id:null},l=function(){var a=this.applicationContext,b=this.getProject();return b?b.id:null},m=function(b){return null!==a(this.applicationContext,b)};return n}),define("tau/views/view.compositeControl",["Underscore","jQuery","tau/core/view-base","tau/core/event-dispatcher","tau/models/dataprocessor/model.processor.context"],function(_,$,a,b,c){var d=function(a){return _(a).map(function(a){return"tau/components/component."+a})},e=function(a){var b={},c=_(a).keys();return _(c).each(function(c){var d=c.split(":"),e=null,f=-1,g=d.length,h=b;while(++f<g-1)e=d[f],h.hasOwnProperty(e)||(h[e]={}),h=h[e];var i=d[f];h[i]=a[c]}),b},f=a.extend({name:"view.compositeControl",init:function(a){this._loaded=!1,this._super(a),this.timeoutDescriptor=null},initialize:function(){var a=this;a._super.apply(a,arguments);var b=a.config.dependencies,c=_.size(b)>0&&a.config.visible;if(c){var e=d(b);require(e,a.createComponentTypesCallback(b))}else a.fireDependenciesAreReady({})},createComponentTypesCallback:function(a){var b=this;return b.dependenciesHash={},function(){var c=arguments;_(a).each(function(a,d){b.dependenciesHash[a]=c[d]}),b.fireDependenciesAreReady(b.dependenciesHash)}},fireDependenciesAreReady:function(a){this.fire("dependenciesAreReady",{controlTypes:a})},"bus afterInit+dataBind":function(){},"bus afterInit+dataBind+dependenciesAreReady":function(a){var b=this,c=a.afterInit.data,d=a.dataBind.data,e=a.dependenciesAreReady.data;b.config.visible&&(b._loaded=!0),b.fireBeforeRender({data:d}),b.doRender(d,c.refreshSelector);var f=b.instantiateChildrenComponents(b.element.find("[runas]"),e.controlTypes);b.initializeChildrenComponents(f,d)},createOnAfterRenderCallback:function(a){return function(b){b.removeListener(),a.replaceWith(b.data.element)}},onDestroyCallback:function(a){var b=this,c=a.sender;delete b.children[c.uniqueId]},instantiateChildrenComponents:function(a,b){var c=this,d=[];c.children={};var f=_.bind(c.onDestroyCallback,c);return a.each(function(a,g){var h=$(this),i=h.attr("runas"),j=b.hasOwnProperty(i);if(!j)throw"The component type ["+i+"] not found";var k=b[i],l=k.create({disabledExtensionCategories:c.config.disabledExtensionCategories,context:c.config.context});l.uniqueId=l.uniqueId||_.uniqueId(),l.on("afterRender",c.createOnAfterRenderCallback(h)),l.on("destroy",f);var m={instance:l,config:e(h.data())};c.children[l.uniqueId]=l,d.push(m)}),d},initializeChildrenComponents:function(a,b){var c=this,d=function(){if(a.length){var b=a.shift();c.fire("createComponentContext",b),c.timeoutDescriptor=setTimeout(d,1)}else c.fire("component.ready")};d(),c.fireAfterRender({data:b})},"bus createComponentContext":function(a){var b=this,d=a.data,e=d.config,f=e.context.general;e.context.entity=f,e.context.assignable=f,e.context.applicationContext=b.config.context.applicationContext,c(e.context),b.fire("componentContextCreated",d)},"bus componentContextCreated":function(a){var b=a.data;b.instance.fire("initialize",b.config)},"bus show":function(){this._super(),this._loaded||this.fire("initialize",{})},destroyChildren:function(){var a=this;clearTimeout(a.timeoutDescriptor),a.dispatcher=null,_(a.children||[]).chain().keys().each(function(b){a.children[b].destroy()}),a.children=null},lifeCycleCleanUp:function(){this.destroyChildren(),this._super()},destroy:function(){this.destroyChildren(),this._super()}});return f}),define("tau/ui/extensions/list/extension.list.prioritize",["Underscore","jQuery","tau/configurator","tau/components/extensions/component.extension.base"],function(_,$,a,b){return b.extend({name:"extension.list.prioritize",category:"edit","bus afterRender":function(b){var c=b.data.element,d=this;this.$el=c,c.addClass("tau-list__sortable__true");var e=c.find("[role=group]");e.addClass("tau-list__group_sortable_true");var f={sensitivity:7,speed:12};a.getConfig("isPopup",!1)&&(f={sensitivity:20,speed:30}),e.addClass("tau-list__group_available_true"),e.sortable({scroll:!0,scrollSensitivity:f.sensitivity,scrollSpeed:f.speed,cursor:"move",connectWith:".tau-list__group_available_true[role=group]",items:".tau-list__list [role=item]",dropOnEmpty:!0,handle:"[role=sortable-handler]",forcePlaceholderSize:!0,placeholder:{element:function(a){var b=$('<li class="tau-list__list__item tau-list__sortable-placeholder ui-sortable-placeholder"></li>');return b.height(50),b},update:function(a,b){return}},helper:function(a,b){var c=b;return c}});var g=function(){$(this).data("sortable").refreshPositions()};c.mousedown(function(){e.bind("mousemove",g)}),c.mouseup(function(){e.unbind("mousemove",g)}),e.bind("sortstart",function(a,b){d.started=!0;var c=b.item,e=c.data("tmplItem").data||{},f=$(a.currentTarget);f.addClass("tau-list__group_sortover_true"),d.$group=f;var g=f.data("tmplItem")?f.data("tmplItem").data:{};d.fire("prioritize.start",{item:e,group:g})}),e.bind("sortstop",function(a,b){e.addClass("tau-list__group_available_true"),e.removeClass("tau-list__group_available_false"),e.removeClass("tau-list__group_sortover_true")}),e.bind("sortupdate",function(a,b){if(d.started)d.started=!1;else return;var c=b.item,e=c.prev("[role=item]"),f=c.next("[role=item]"),g=c.data("tmplItem").data||{},h=e.length?e.data("tmplItem").data:{},i=f.length?f.data("tmplItem").data:{},j=c.parents("[role=group]:first"),k=j.data("tmplItem")||null;k=k?k.data:null;var l=j.hasClass("tau-list__group_collapsed_true");j.addClass("i-target");var m=$(this),n=m.data("tmplItem")||null;n=n?n.data:null,d.fire("prioritize.checkAvailability",{$item:c,$prevGroup:m,$targetGroup:j,item:g,prev:h,next:i,group:k,prevGroup:n,isCollapsed:l})}),e.bind("sortchange",function(a,b){var c=e.find(".tau-list__sortable-placeholder").parents("[role=group]:first");c.length==1&&c.hasClass("tau-list__group_sortover_true")==0&&(e.removeClass("tau-list__group_sortover_true"),c.addClass("tau-list__group_sortover_true"))});var h=function(a,b,c,d){c?$(c[0]).find(".tau-list__list").append(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this,f=this.counter;window.setTimeout(function(){f==e.counter&&e.refreshPositions(!d)},0)};e.each(function(){var a=$(this);a.data("sortable")._rearrange=h})},"bus prioritize.checkAvailability":function(a){this.bus.fire("prioritize.isAvailable.default",{})},"bus prioritize.checkAvailability+prioritize.isNotAvailable":function(a){this.bus.fire("refresh")},"bus prioritize.checkAvailability+prioritize.isAvailable.default+prioritize.isAvailable.comment":function(a){var b=a["prioritize.checkAvailability"].data;this.fire("positionUpdated",b)},"bus prioritize.updateGroupsAvailability":function(a){var b=a.data,c=b.groups,d=this,e=this.$el.find("[role=group]");if(e.length<=1||e.length==c.length){e.addClass("tau-list__group_available_true").removeClass("tau-list__group_available_false"),this.$group.sortable("refresh");return}var f=_.filter(e.toArray(),function(a){var b=$(a).data("tmplItem").data;return _.any(c,function(a){return b===a})}),g=$(f);e.addClass("tau-list__group_available_false").removeClass("tau-list__group_available_true"),g.removeClass("tau-list__group_available_false").addClass("tau-list__group_available_true"),this.$group.sortable("refresh")},"bus beforeUpdate":function(){this.$el.find(".i-target [role=counter]").css("backgroundColor","#ffefd5")},"bus afterUpdate":function(a){this.$el.find("[role=group]").each(function(){$(this).find("[role=counter]").text($(this).find("[role=item]").length)}),this.$el.find(".i-target [role=counter]").animate({backgroundColor:"#ffffff"},200),this.$el.find(".i-target").removeClass("i-target");var b=a.data.changedItem,c=this.$el.find(".i-item-"+b.id),d=c.parents("[role=item]:first"),e=d.data("tmplItem").data;_.extend(e,b);var f="tau-list__table__row_isfinalstate_true";e.entityState&&c.toggleClass(f,!!e.entityState.isFinal)}})}),define("tau/ui/extensions/list/extension.list.prioritize.comment",["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/behaviour/common/ui.behaviour.tauBubble","tau/utils/utils.textConverter"],function(_,$,a,b,c){return a.extend({name:"extension.list.prioritize.comment","bus afterRender":function(a){this.$root=a.data.element,this.$el=a.data.element.find("[role=comment-form]")},"bus prioritize.updateGroupsCommentRequirements":function(a){var b=a.data.groups,c=this.$root.find("[role=group]");c.data("isCommentRequired",!1),_.forEach(b,function(a,b){c.eq(b).data("isCommentRequired",a.isCommentRequired)})},"bus prioritize.checkAvailability":function(a){var b=a.data.$targetGroup,c=a.data.$prevGroup;if(!b.data("isCommentRequired")||b[0]===c[0]){this.fire("prioritize.isAvailable.comment");return}var d=a.data.$item;this.$item=d;var e=a.data.item;this.item=e;var f=this.$el;f.removeClass("updating");var g=a.data.isCollapsed,h=!1;g==0?h=d.find("[role=sortable-handler]"):h=b.find("[role=title]"),d.tauBubble({showOnCreation:!0,alignTo:h}),f.detach(),d.tauBubble("widget").find("[role=content]").append(f),f.show(),d.tauBubble("show");var i=f.find("textarea");i.val("").focus();var j=f.find(":button"),k=j.eq(0);k.bind("click",_.bind(this._save,this));var l=j.eq(1);l.bind("click",_.bind(this._cancel,this)),d.bind("externalClose",_.bind(this._cancel,this));var m=function(){window.setTimeout(function(){var a=i.val()||"",b=a.trim().length===0;b?k.attr("disabled","disabled"):k.attr("disabled")&&k.removeAttr("disabled"),b?k.addClass("disable"):k.removeClass("disable")},50)};m(),k.bind("focus",m),i.bind("change keyup click propertychange paste",m)},_save:function(a){a.stopPropagation();var b=this,d=this.$el,e=new c,f=e.convert(d.find("textarea").val(),!0),g=b.config.store,h=b.item;d.addClass("updating"),g.save("comment",{$set:{description:f,general:{id:h.id}},$include:["id","description","createDate","parentId",{owner:["id","firstName","lastName"]}]}).done({success:function(){d.removeClass("updating"),b.fire("prioritize.isAvailable.comment"),b.$item.tauBubble("destroy")},failure:function(){b.fire("prioritize.isNotAvailable")}})},_cancel:function(){var a=this;this.$el.addClass("updating");var b=function(){a.fire("prioritize.isNotAvailable",{$item:a.$item}),a.$item.tauBubble("destroy")};$.fx.off===!0?b():setTimeout(b,50)}})}),define("tau/ui/templates/list_/ui.template.list",["tau/core/templates-factory"],function(a){var b={name:"list",markup:['<div class="tau-list">',"</div>"]};return a.register(b)}),define("tau/ui/extensions/list/extension.list.groups",["jQuery","tau/components/extensions/component.extension.base","tau/ui/templates/list_/ui.template.list"],function($,a,b){return a.extend({name:"extension.list.groups","bus afterRender":function(a){var b=this,c=a.data.element;c.delegate("[role=expander]","click",function(a){var c=$(a.target);if(c.is("a")||c.parent("a").length)return;var d=c.parents("[role=group]:first");d.toggleClass("tau-list__group_collapsed_true"),b.bus.fire("toggled")})}})}),define("tau/ui/extensions/list/extension.list.overlay",["tau/components/extensions/component.extension.base"],function(a){return a.extend({name:"extension.list.overlay","bus dataBind+afterRender":function(a){this.element=a.afterRender.data.element.parent()},showOverlay:function(){this.element.tauOverlay()},hideOverlay:function(){this.element.tauOverlay("hide")},"bus beforeInit":function(a){this.element&&this.element.length&&this.showOverlay()},"bus showOverlay":function(a){this.element&&this.element.length&&this.showOverlay()},"bus afterRender":function(a){if(this.element&&this.element.length){var b=this;b.hideOverlay()}}})}),define("tau/ui/extensions/list/extension.list.state",["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/configurator"],function(_,$,a,b){return a.extend({name:"extension.list.state",initialState:{},"bus preDataBind":function(a){var c=a.data,d=b.getRouting().getStateParameter("list")||{},e=this;_.forEach(c.groups,function(a){var b=(new String(a.key)).toString();e.initialState[b]=a.collapsed,_.isUndefined(d[b])==0&&(a.collapsed=d[b])})},"bus afterInit+afterRender":function(a){this.$el=a.afterRender.data.element},"bus toggled":function(a){var c=this.$el.find("[role=group]"),d={},e=this;c.each(function(){var a=$(this),b=a.hasClass("tau-list__group_collapsed_true"),c=a.data("tmplItem").data,f=(new String(c.key)).toString();_.isUndefined(e.initialState[f])==0&&e.initialState[f]!==b&&(d[f]=b)}),b.getRouting().setStateParameter("list",d,!0),b.getHistory().updateCurrent({url:b.getRouting().getUrl().source})}})}),define("libs/jquery/jquery.tau.bubblepopup",["jQuery"],function(jQuery){return function($,a){var b={TOP:"top",BOTTOM:"bottom",AUTO:"auto"},c={CONTENT:a+"-content",PLACEHOLDER:a+"-placeholder",ACTIVE:a+"-active"};$.widget("ui."+a,{options:{content:"",position:b.AUTO},_create:function(){this._createFrame(),this.hide(),this.setContent($(this.options.content)),this.setPosition(this.options.position||b.AUTO),this._initDOM()},_createFrame:function(){var b=$("<div/>").addClass(a),d=$("<div/>").addClass(c.CONTENT);b.append(d),this._$frame=b,this._$contentWrapper=d},show:function(){this.updatePosition(),this.element.addClass(c.ACTIVE),this._trigger("show")},hide:function(){this._trigger("hide"),this.element.removeClass(c.ACTIVE)},setContent:function(a){this._$content=$(a).appendTo(this._$contentWrapper.empty())},getContent:function(){return this._$content},setPosition:function(a){if(this._isValidPosition(a)&&a!=this._$position){var c=this._$position=a;c==b.AUTO&&(c=this._calculatePosition()),this._setPositionMarker(c)}},getPosition:function(){return this._$position},updatePosition:function(){this.getPosition()==b.AUTO&&this._setPositionMarker(this._calculatePosition())},_isValidPosition:function(a){var c=!1;return $.each(b,function(b,d){if(a==d)return c=!0,!1}),c},_setPositionMarker:function(a){var c=$.map(b,function(b){if(b!=a)return b});this._$frame.removeClass(c.join(" ")).addClass(a)},_calculatePosition:function(){var a=$(window).height(),c=this.element.outerHeight(),d=this.element.offset(),e=2*d.top+c<a,f=b.TOP;return e&&(f=b.BOTTOM),f},_initDOM:function(){this.element.addClass(c.PLACEHOLDER).append(this._$frame)},destroy:function(){$.Widget.prototype.destroy.apply(this,arguments),this._$frame.remove(),this.element.removeClass(c.PLACEHOLDER)}})}(jQuery,"taububblepopup"),jQuery}),define("tau/ui/extensions/ui.extension.tooltip",["jQuery","tau/components/extensions/component.extension.base","libs/jquery/jquery.tau.bubblepopup"],function($,a){return a.extend({name:"ui.extension.tooltip",category:"edit","bus afterRender":function(a){var b=this,c=a.data.element,d=$.proxy(b.onMouseEnter,b),e=$.proxy(b.onMouseLeave,b);c.find(".tau-extension-tooltip").mouseenter(d).mouseleave(e)},onMouseEnter:function(a){var b=this,c=$(a.currentTarget),d=c.data("ui.extension.tooltip/title");d||(d=c.prop("title"),c.data("ui.extension.tooltip/title",d),c.prop("title",""));var e=setTimeout(function(){b.isExecuted=!0;var a=c.data("ui.extension.tooltip/title");c.taububblepopup({content:'<div class="tau-tooltip-title">'+a+"</div>"}),c.taububblepopup("show")},500);b.timeOutDescriptor=e},onMouseLeave:function(a){var b=this,c=$(a.currentTarget),d=b.timeOutDescriptor;clearTimeout(d);var e=b.isExecuted;e&&c.taububblepopup("hide"),b.isExecuted=!1}})}),define("tau/ui/extensions/list/extension.list.handleAction",["Underscore","tau/components/extensions/component.extension.base"],function(_,a){return a.extend({name:"extension.list.handleAction",getRowElement:function(a,b){var c=a.find(".i-item-"+b);return c},"bus afterItemsProvided+afterRender+handleGlobalAction":function(a){var b=a.afterItemsProvided.data.data,c=a.handleGlobalAction.data.id,d=_(b).detect(function(a){return a.id==c});if(d){var e=a.afterRender.data.element,f=this.getRowElement(e,c);this.fire("markElementToBeUpdated",{element:f}),this.fire("updateElement",{element:f}),this.fire("refreshMainEntity")}},"bus afterRender+beforeDeleteRow":function(a){var b=a.afterRender.data.element,c=a.beforeDeleteRow.data.id,d=this.getRowElement(b,c);this.fire("markElementToBeDeleted",{element:d}),this.fire("deleteElement",{element:d,callback:$.noop})},"bus afterRender+afterDeleteRow":function(a){var b=this,c=a.afterRender.data.element,d=a.afterDeleteRow.data.id,e=this.getRowElement(c,d);this.fire("deleteElement",{element:e,callback:function(){b.fire("refresh")}})}})}),define("tau/ui/extensions/list/extension.list.handleAction.generator",["Underscore","tau/components/extensions/component.extension.base"],function(_,a){var b=function(a,b){var c=b.split(":"),d=a;return _(c).each(function(a){d=d[a]}),d};return function(c,d){return a.extend({name:"extension.list.handleAction.generator/"+c,init:function(){this._super.apply(this,arguments),this.bus.getGlobalBus().on(c,this.onGlobalAction,this)},destroy:function(){this.bus.getGlobalBus().removeListener(c,this.onGlobalAction,this),this._super.apply(this,arguments)},onGlobalAction:function(a){var c=b(a.data,d);this.fire("handleGlobalAction",{id:c})}})}}),define("tau/models/dataProviders/model.provider.groups.default",["Underscore","tau/models/dataProviders/model.provider.groups.base"],function(_,a){return a.extend({fetch:function(a,b,c){var d=[];if(!a){c(!1);return}_.forEach(b,function(b){var c=_.complexKey(b,a),e=_(d).any(function(a){return a.key===c});e||d.push({key:c,items:[]})}),c(d)}})}),define("tau/models/model.list",["Underscore","tau/core/model-base","tau/models/dataProviders/model.provider.groups.default"],function(_,a,b){var c=a.extend({name:"model.list",onInit:function(){var a=this;a.store.unbind(this);var b=new this.config.itemsDataProvider(this.config);b.fetch(function(b){a.fire("afterItemsProvided",{data:b})})},"bus afterItemsProvided":function(a){var c=this,d=null;this.config.groupsDataProvider?d=this.config.groupsDataProvider:d=b;var e=a.data.data,f=_.isArray(this.config.groupBy)?this.config.groupBy[0]:this.config.groupBy,g=new d(this.config);g.fetch(f,e,function(a){c.fireAfterGroupsProvided(a)})},fireAfterGroupsProvided:function(a){this.fire("afterGroupsProvided",{data:a})},createSubscription:function(a,b){var c=this;c.store.on({eventName:"beforeRemove",type:a,listener:c},function(a){var d=a.data.id;b(d)&&c.fire("beforeDeleteRow",{id:d})}),c.store.on({eventName:"afterRemove",type:a,listener:c},function(a){var d=a.data.id;b(d)&&c.fire("afterDeleteRow",{id:d})})},"bus afterItemsProvided+afterGroupsProvided":function(a){var b=this,c=a.afterItemsProvided.data.data,d=a.afterGroupsProvided.data.data;if(c&&c.length){var e=function(a){return _(c).detect(function(b){return b.id==a})};_(c).chain().map(function(a){return a.__type}).unique().each(function(a){b.createSubscription(a,e)})}var f={items:[],groups:[],isEmpty:c.length?!1:!0};d!==!1?f.groups=this.innerGroupBy(c,d):f.items=c,this.data=f,b.fire("afterDataProvided",{data:f})},"bus afterDataProvided":function(a){var b=this.preProcess(a.data.data);this.fire("preDataBind",b),this.fire("dataBind",b)},preProcess:function(a){var b=this.config.views[0];return _.forEach(a.groups,function(a){a.title||(_.isObject(a.key)?a.title=_.complexKey(a.key,b.group.dataIndex):a.title=a.key)}),a.config={views:this.config.views,currentView:b},a},innerGroupBy:function(a,b){var c=_.isArray(this.config.groupBy)?this.config.groupBy[0]:this.config.groupBy,d=this;return _.forEach(b,function(b){_.forEach(a,function(a){var d=_.complexKey(a,c);_.isArray(b.key)&&_.indexOf(b.key,d)>-1?b.items.push(a):_.isEqual(b.key,d)&&b.items.push(a)})}),b},"bus prioritize.start":function(a){var c=a.data.item,d=a.data.group,e=null;this.config.groupsDataProvider?e=this.config.groupsDataProvider:e=b;var f=new e(this.config),g=_.filter(this.data.groups,function(a){return f.isAvailableForItem(c,a,d)});this.fire("prioritize.updateGroupsAvailability",{groups:g});var h=f.getCommentRequirements(c,this.data.groups,d);this.fire("prioritize.updateGroupsCommentRequirements",{groups:h})}});return c}),define("tau/models/model.list.editable",["Underscore","tau/core/model.editable.base"],function(_,a){var b=a.extend({name:"model.list.editable",category:"edit","bus dataBind":function(){this.bus.fire("permissionsReady",{editable:!0,deletable:!0})},"bus positionUpdated":function(a){var b=a.data,c=this,d=b.item,e=this.config.store,f=[];b.isCollapsed==0&&f.push(function(a){var d=new c.config.itemsDataProvider(c.config);d.changePriority(b.item,b.prev,b.next,function(b){a(null,b)})}),b.group&&f.push(function(a){var d=new c.config.groupsDataProvider(c.config);d.moveToGroup(b.item,b.group,b.prevGroup,function(b){a(null,b)})}),b.isCollapsed==1?(c.fire("beforeUpdate"),c.fire("showOverlay"),_.parallel(f,function(){c.fire("refresh")})):(c.fire("beforeUpdate"),_.parallel(f,function(a,b){var d={};_.forEach(b,function(a){a&&_.extend(d,a.changed||{})}),c.fire("afterUpdate",{changedItem:d})}))}});return b}),define("tau/views/view.list",["tau/core/view-base"],function(a){return a.extend({name:"view.list","bus initialize":function(a){var b=this.config.views[0];b.type=b.type||"grid";var c=["tau/ui/templates/list_/",b.type,"/ui.template.list.",b.type].join(""),d=this;require([c],function(b){d.config.template=b,d.startLifeCycle(a)})}})}),define("tau/components/component.list",["Underscore","tau/components/component.creator","tau/ui/extensions/list/extension.list.prioritize","tau/ui/extensions/list/extension.list.prioritize.comment","tau/ui/extensions/list/extension.list.groups","tau/ui/extensions/list/extension.list.overlay","tau/ui/extensions/list/extension.list.state","tau/ui/extensions/ui.extension.tooltip","tau/ui/extensions/list/extension.list.handleAction","tau/ui/extensions/list/extension.list.handleAction.generator","tau/models/model.list","tau/models/model.list.editable","tau/views/view.list","tau/ui/extensions/list/external.refresh.extension"],function(_,a,b,c,d,e,f,g,h,i,j,k,l,m){return{create:function(n){n=n||{},n.views=n.views||[{}],_(n.views).each(function(a){a.emptyMessage=a.emptyMessage||"No items found",a.rowTemplateName=a.rowTemplateName||"list-grid-entity__row"});var o=n.views[0];o.type=o.type||"grid",n.multiprojects&&(o.multiprojects=n.multiprojects),o.timeTrackingPolicies=n.context.getTimeTrackingPolicies();var p=[k,d,e,f,g,m,h,i("bugWasMarkedAsDuplicate","duplicateBugId"),i("entityWasMovedToProject","entity:id"),i("entityWasCopiedToProject","entity:id")];n.sortable!==!1&&(p.push(b),p.push(c));var q={extensions:p.concat(n.extensions||[]),ModelType:j,ViewType:n.ViewType||l};return n.template&&(q.template=n.template),a.create(q,n)}}}),define("tau/components/component.list.editable",["Underscore","tau/components/component.list","tau/ui/templates/list_/grid.entity/ui.template.list.grid.entity","tau/ui/extensions/list/extension.list.editable.progress","tau/views/view.compositeControl"],function(_,a,b,c,d){return{create:function(e){return e=_(e).defaults({ViewType:d,template:e.template||b,extensions:[],dependencies:["title","property.severity","property.priority","property.entityState","assignmentsList","property.effort","entity.actions","progressBar.small","property.release","property.iteration","property.build","property.build.testPlanRun","property.lastStatus","property.lastRunDate.list","property.status.testCaseRun","property.endDate","property.endDate.list","steps","success","menu.testPlanRun"]}),e.extensions.push(c),a.create(e)}}}),define("tau/ui/templates/ui.template.lookswitcher",["tau/core/templates-factory"],function(a){var b={name:"ui.lookswitcher",markup:['<div class="ui-lookswitcher tau-look-switcher">','   {{if !loveNewLook }}<a class="ui-lookswitcher-love-link">Always use this awesome UI</a>{{/if}}','   {{if loveNewLook }}<a class="ui-lookswitcher-hate-link">Switch back to the old look</a>{{/if}}',"</div>"],dependencies:[]};return a.register(b)}),define("tau/components/component.lookswitcher",["jQuery","Underscore","tau/configurator","tau/components/component.creator","tau/ui/templates/ui.template.lookswitcher","tau/components/extensions/component.extension.base"],function($,_,a,b,c,d){var e={create:function(e){var f=d.extend({"bus beforeInit":function(){var b=this,c=a.getGlobalSettingsService();c.getGlobalSettings({success:function(a){b.fire("dataBind",{loveNewLook:a.LoveNewLook})}})},execute:function(b,c){var d=a.getGlobalSettingsService(),e=this;d.sendRequest("GlobalSettingsService",b,null,function(a){d.resetSettings(),c&&c()},function(a){})},"bus feltInLove+afterRender":function(a){var b=this;this.execute("WantToSeeBeatyAlways",function(){b.fire("refresh")})},"bus hateIt+afterRender":function(b){var c=this;c.execute("HateNewLook",function(){document.location.href=a.getApplicationPath()+"/view.aspx?id="+c.config.context.entity.id})},"bus afterRender":function(a){var b=this,c=a.data.element,d=function(a,d){$(a,c).click(function(){$(this).unbind(),$(this).addClass("tau-disabled"),$(this).attr("disabled"),b.fire(d)})};d(".ui-lookswitcher-love-link","feltInLove"),d(".ui-lookswitcher-hate-link","hateIt")}}),g={extensions:[f],template:c};return b.create(g,e)}};return e}),define("tau/models/model.menu.actions",["Underscore","tau/core/model-base"],function(_,a){var b=a.extend({"bus beforeInit":function(a){var b=a.data.config,c=b.eventNamesCommon||{};_.defaults(c,{dataBind:"dataBind"});var d=c.dataBind,e=b.items,f=[],g=0;_(e).each(function(a){if(a==="-----"){if(g===0)return;g=0}else++g;f.push(a)});var h={items:f};this.bus.fire(d,h)}});return b}),define("tau/ui/behaviour/menu/ui.behaviour.menu.actions",["Underscore","jQuery","tau/core/tau-widget"],function(_,$,a){a.widget("ui.behaviourMenuActions",{_create:function(){this.init()},init:function(){var a=$(this.element);this.$element=a,this.$popup=a.find(".ui-menu__popup");var b=this;this.$items=this.$element.find(".ui-menu__item-action"),this.currentIndex=-1,b.isOpened=!1,this.$element.find(".ui-menu__trigger").click(function(a){b.show()}),this._bindEvents()},show:function(){var a=this;a.$popup.slideToggle(100,function(){a.isOpened=!a.isOpened,a.isOpened?a._mapKeyboard():a._unmapKeyboard()})},_bindEvents:function(){var a=this;a.$items.hover(function(){a.$items.not(this).removeClass("ui-menu__item-action-hover"),$(this).addClass("ui-menu__item-action-hover"),a.currentIndex=a.$items.index(this)},function(){$(this).removeClass("ui-menu__item-action-hover")}),$("body").click(function(b){a.isOpened&&a.close();if($(b.target).parents(".ui-menu:first").length)return})},_mapKeyboard:function(){this.mapper=_.bind(this._keyboardEvents,this),$(document).bind("keydown",this.mapper)},_unmapKeyboard:function(){$(document).unbind("keydown",this.mapper)},_keyboardEvents:function(a){var b=this;switch(a.keyCode){case $.ui.keyCode.ESCAPE:b.close();break;case $.ui.keyCode.DOWN:b.currentIndex++,b.currentIndex=b.currentIndex>=b.$items.length?0:b.currentIndex,b.$items.removeClass("ui-menu__item-action-hover"),b.$items.eq(b.currentIndex).addClass("ui-menu__item-action-hover");break;case $.ui.keyCode.UP:b.currentIndex--,b.currentIndex=b.currentIndex<0?b.$items.length-1:b.currentIndex,b.$items.removeClass("ui-menu__item-action-hover"),b.$items.eq(b.currentIndex).addClass("ui-menu__item-action-hover");break;case $.ui.keyCode.ENTER:var c=b.$items.filter(".ui-menu__item-action-hover");c&&c.trigger("click")}},close:function(){var a=this;this.$popup.slideUp(100,function(){a.isOpened=!1,a._unmapKeyboard()})},destroy:function(){}})}),define("tau/components/extensions/menu/extension.menu.actions",["Underscore","jQuery","tau/configurator","tau/ui/extensions/editable-base","tau/ui/behaviour/menu/ui.behaviour.menu.actions","tau/utils/utils.redirect"],function(_,$,a,b,c,d){return b.extend({"bus dataBind+afterRender":function(a){this.redirect=new d(this.config.context);var b=this.$el=a.afterRender.data.element;b.behaviourMenuActions(),b.find(".ui-menu__item-action").click(_.bind(this.executeCommand,this))},"bus select":function(){this.$el.behaviourMenuActions("show")},removeEntity:function(){var b=this.config.context.entity;this.config.store.remove(b.entityType.name,{id:b.id}).done(),a.getHistory().exclude(b.id)},redirectTo:function(a,b){this.redirect.redirect(a,b)},split:function(){var a=this.config.context.entity.id,b={generalID:a};this.fire("split",b)},markAsDuplicate:function(){var a=this.config.context.entity.id,b={generalID:a};this.fire("markAsDuplicate",b)},convert:function(){var a=this.config.context.entity.id,b=this.config.context.getProjectId(),c={generalID:a,projectID:b};this.fire("convertEntity",c)},attachToRequest:function(){var a=this.config.context.entity.id;this.fire("attachToRequest",{generalID:a})},moveOrCopy:function(){var a=this.config.context.entity.id;this.fire("moveOrCopy",{generalID:a})},executeCommand:function(a){if($(a.target).is("a"))return;var b=this,c=$(a.currentTarget).data().tmplItem.data,d=c.command,e=c.confirmation||!1;if(e&&window.confirm(e)==0)return;if(_.isFunction(d))_.bind(d,b)(b);else if(typeof d=="object"){var f={components:d,context:b.config.context};b.createComponents(f,function(a){var b=a[0].component;b.initialize()})}else c.url&&b.redirectTo(c.url);this.fire("beforeSave",{})}})}),define("tau/ui/templates/actions/ui.template.moveOrCopy",["tau/core/templates-factory"],function(a){var b={name:"move-or-copy",markup:['<div style="display: none;">','\t<div id="copyActionPopup" style="padding: 10px">','\t\t\t\t<table cellpadding="6" cellspacing="0">',"\t\t\t\t\t<tr>","\t\t\t\t\t\t<td>",'                           <select id="projectSelector">','                               <option value="0" >- Select Project -</option>','                               {{each projects}}<option value="${ID}" >${Name}</option>{{/each}}',"                           </select>","\t\t\t\t\t\t</td>","\t\t\t\t\t\t<td>",'                           <input type="button" value="Copy" class="copy" disabled></button> ',"\t\t\t\t\t\t</td>","\t\t\t\t\t\t<td>",'                           <input type="button" value="Move" class="move" disabled></button> ',"\t\t\t\t\t\t</td>","\t\t\t\t\t</tr>","\t\t\t\t</table>",'\t\t\t\t\t<div style="font-size: 90%">',"\t\t\t\t\t\tCustom fields will be saved only when the entity is copied or moved to a project with the same process","\t\t\t\t\t</div>","\t</div>","</div>"]};return a.register(b)}),define("tau/components/extensions/menu/extensions.menu.moveOrCopy",["tau/components/extensions/component.extension.base","tau/configurator","tau/core/templates-factory","tau/ui/templates/actions/ui.template.moveOrCopy"],function(a,b,c){var d=0;return a.extend({"bus moveOrCopy":function(a){var b=a.data.generalID;this.moveOrCopy(b)},moveOrCopy:function(a){var e=this;Ext.WindowMgr.zseed=99999;var f=b.getActionsService(),g=function(b){function i(b,c){var d=$("#"+h+" #projectSelector").val();d!=0&&f[b](e.config.context.entity.id,d,function(b){k.close(),c&&c(a,d)},function(a){k.close();var b=$.parseJSON(a.responseText).Message;e.fire("error",{message:b})})}d++;var g=c.get("move-or-copy").bind(e.config,{projects:b.d}).appendTo("body"),h="copyActionPopup"+d;g.find("#copyActionPopup").prop("id",h);var j=g.find(".copy,.move");g.find("#projectSelector").change(function(){var a="disabled";$(this).val()!="0"?j.removeAttr(a):j.attr(a,a)}),g.find(".copy").click(function(){var a=function(a,b){e.fire("entityWasCopiedToProject",{entity:{id:a},project:{id:b}})};i("copyGeneralToProject",a)}),g.find(".move").click(function(){var a=function(a,b){e.fire("entityWasMovedToProject",{entity:{id:a},project:{id:b}})};i("moveGeneralToProject",a)});var k=showModalPopup(h,{title:"Move or Copy",width:440,height:126})};f.getActiveProjectForEntity(a,g)}})}),define("tau/components/extensions/menu/extensions.menu.attachToRequest",["tau/components/extensions/component.extension.base","tau/configurator","tau/core/templates-factory"],function(a,b,c){var d=0;return a.extend({"bus attachToRequest":function(a){var b=a.data.generalID;this.attachToRequest(b)},attachToRequest:function(a){Ext.WindowMgr.zseed=99999;var c=this,d=this.config.context.getProjectId(),e=[];for(var f=0;f<_projectContext.length;f++)e.push(_projectContext[f].id);var g=b.getActionsService();g.getProjectIds(function(b){var e=Ext.create({xtype:"lookupgenerallistitemgrid",listeners:{lookupactionlinkclick:{fn:function(b,d,e,h,i,j){f.close(),f.destroy();var k=function(b){c.fire("requestWasAttachedToEntity",{entity:{id:a}},{project:{id:h.json.GeneralID}})},l=function(a){};g.attachGeneralToRequest(a,h.json.GeneralID,k,l)},scope:this}},showReleaseIteration:!1,showEntityType:!1,excludeEntityId:0,showProjects:!0,entityTypeIds:[17],showState:!1,projectIds:b.d,projectId:d,appendItems:[]}),f=showModalPopupForComponent(e,{width:680,height:500,title:"Attach to Request"})})}})}),define("tau/components/extensions/menu/extensions.menu.markAsDuplicate",["tau/components/extensions/component.extension.base","tau/configurator"],function(a,b){var c=0;return a.extend({"bus markAsDuplicate":function(a){var b=a.data.generalID;this.markAsDuplicate(b)},markAsDuplicate:function(a){Ext.WindowMgr.zseed=99999;var c=[];for(var d=0;d<_projectContext.length;d++)c.push(_projectContext[d].id);var e=this,f=Tp.controls.Duplicate.CreatePopup(c,a,undefined,{onMarkDelegate:function(a){var c=b.getStore(),d=c.freeze();e.fire("bugWasMarkedAsDuplicate",a),d.unfreeze()}});f.show(c,a),b.getKeyBoardManager().pushHandler({handleKeyDown:function(a){a.which==27&&(b.getKeyBoardManager().popHandler(),f.hide(),f.destroy())}})}})}),define("tau/components/extensions/menu/extensions.menu.split",["tau/components/extensions/component.extension.base","tau/configurator","tau/utils/utils.urlBuilder","tau/utils/utils.redirect"],function(a,b,c,d){return a.extend({"bus split":function(a){var b=a.data.generalID;this.split(b)},split:function(a){var e=this,f=b.getActionsService();f.splitUserStory(a,function(b){var e=b.d,f=c.getSplitForUserStoryUrl(a,e);(new d).redirect(f)},function(a){e.fire("error",{message:"Split operation is failed due to server error"})})}})}),define("tau/ui/templates/actions/ui.template.convert",["tau/core/templates-factory"],function(a){var b={name:"convert",markup:['<div style="display: none;">','\t<div id="convertEntityPanel" style="overflow: visible; padding: 10px">','\t\t<table cellpadding="6" cellspacing="0">',"\t\t\t<tr>","\t\t\t\t<td>","\t\t\t\t\tConvert to","\t\t\t\t</td>","\t\t\t\t<td>",'                   <select id="entityType">','                       <option value="0" >- Select New Type -</option>','                       {{each types}}<option value="${ID}" >${Name}</option>{{/each}}',"                   </select>","\t\t\t\t</td>","\t\t\t</tr>","\t\t\t<tr>",'\t\t\t\t<td colspan="2">','\t\t\t\t\t<span style="font-size: 90%">',"\t\t\t\t\t\tCustom fields will be saved only inside the same process and if they have the same name and type in both entities.","\t\t\t\t\t</span>","\t\t\t\t</td>","\t\t\t</tr>","\t\t</table>",'       <div style="" id="pnlLookupUserStory" style="display: none">',"\t\t\tSelect new parent user story:",'\t\t\t<table cellspacing="0" cellpadding="0">',"\t\t\t\t<tbody><tr>","\t\t\t\t\t<td>",'\t\t\t\t\t\t<input type="text" style="display: none;" id="hdnGeneralID">','                       <table cellspacing="0" cellpadding="0">',"                           <tr>","\t\t                        <td>","\t\t                        </td>","\t                        </tr>","\t                        <tr>","\t\t                        <td>",'\t\t\t                        <textarea style="height:16px;width:500px;" class="input" title="Type the beginning of the entity name (at least 2 symbols)" id="txtGeneralsLookup" cols="20" rows="1" ></textarea>',"\t\t                        </td>",'\t\t                        <td>&nbsp;&nbsp;<a id="lnkFind" href="javascript:void(0)">Find</a></td>',"\t                        </tr>","           </table>","\t\t\t\t\t</td>","\t\t\t\t</tr>","\t\t\t</tbody></table>","\t\t</div>",'\t\t<table cellpadding="6" cellspacing="0">',"\t\t\t<tr>","\t\t\t\t<td>",'                   <button type="button" value="Convert" class="convert-btn" disabled="disabled">Convert</button> ',"\t\t\t\t</td>","\t\t\t</tr>","\t\t</table>","\t</div>","</div>"]};return a.register(b)}),define("tau/components/extensions/menu/extensions.menu.converter",["tau/components/extensions/component.extension.base","tau/configurator","tau/core/templates-factory","tau/ui/templates/actions/ui.template.convert"],function(a,b,c){var d=46,e=0;return a.extend({"bus convertEntity":function(a){var b=a.data.projectID,c=a.data.generalID;this.convert(c,b)},convert:function(a,f){var g=this.config.context.entity.id,h=this.bus.getGlobalBus(),i=b.getActionsService();Ext.WindowMgr.zseed=99999;var j=this,k=[],l=function(g){function n(){var a=h.find("#entityType").val();h.find("textarea").unbind("keypress"),h.find("textarea").unbind("keyup"),h.find("#pnlLookupUserStory").css("display",a==d?"block":"none"),a==0?h.find(".convert-btn").attr("disabled","disabled"):a==d?(h.find("textarea").bind("keypress ",function(a){a.keyCode==13&&(a.stopPropagation(),a.preventDefault())}),h.find("textarea").bind("keyup",m),h.find("textarea").bind("change",m),m()):h.find(".convert-btn").removeAttr("disabled")}e++;var h=c.get("convert").bind(j.config,{types:g.d}).appendTo("body"),l="convertEntityPanel"+e;h=h.find("#convertEntityPanel").prop("id",l);var m=function(){h.find("textarea").val().length==0?h.find(".convert-btn").attr("disabled","disabled"):h.find(".convert-btn").removeAttr("disabled")};$create(Tp.Atlas.Extenders.Lookup.GeneralLookupBehavior,{TargetControl:h.find("#txtGeneralsLookup")[0],clearLink:h.find("#lnkClear")[0],entityTypeIDs:[4],excludeEntityID:a,findLink:h.find("#lnkFind")[0],generalElement:h.find("#hdnGeneralID")[0],id:"lkpUserStories",projectID:f,projectIDs:k,showEntityTypeFilter:!1,showProjectFilter:!0,showReleaseIterationFilter:!0,onFindDelegate:function(){h.find(".convert-btn").removeAttr("disabled")},showStateFilter:!1},null,null),h.find(".convert-btn").click(function(){var c=h.find("#entityType").val();o.hide(),j.fire("showProgress",{text:"Converting..."});var e={generalId:a},f=function(c){o.close(),j.fire("hideProgress");var d=c.d,e=d.EntityTypeName.split("."),f=e[e.length-1],g={entity:{id:d.GeneralID},entityType:{name:f}};j.fire("generalWasConverted",g),b.getHistory().exclude(a,!1),b.getRouting().redirect("#"+f.toLowerCase()+"/"+d.GeneralID),window._criticalTauChanges=!0},g=function(a){o.close(),j.fire("hideProgress");var b=jQuery.parseJSON(a.responseText)||{Message:"Server is not available"},c=b.Message;j.fire("error",{message:c})};if(c==d){var k=h.find("#hdnGeneralID").val();if(!k){j.fire("error",{message:"Parent user story is not specified"});return}i.convertGeneralToTask(a,k,f,g)}else e.entityTypeId=c,i.convertGeneralToType(a,c,f,g)}),h.find("#entityType").change(function(){n()}),n();var o=showModalPopup(l,{title:"Convert",width:600,height:220})};i.getProjectIds(function(b){k=b.d,i.generalCanConvertTo(a,l)})}})}),define("tau/ui/templates/menu/ui.template.menu.actions",["tau/core/templates-factory","tau/ui/templates/menu/ui.template.menu.actions.item"],function(a){var b={name:"menu-actions",markup:['<div class="ui-menu-actions">','   <span class="ui-menu__trigger">Actions<span class="ui-menu__indicator"></span></span>','   <div class="ui-menu__popup ui-drop-down">','       <div class=" ui-drop-down drop-down-list">','      {{tmpl(items) "menu-actions-item"}}',"       </div>","   </div>","</div>"],dependencies:["menu-actions-item"]};return a.register(b)}),define("tau/components/component.menu.actions",["tau/components/component.creator","tau/models/model.menu.actions","tau/components/extensions/menu/extension.menu.actions","tau/components/extensions/menu/extensions.menu.moveOrCopy","tau/components/extensions/menu/extensions.menu.attachToRequest","tau/components/extensions/menu/extensions.menu.markAsDuplicate","tau/components/extensions/menu/extensions.menu.split","tau/components/extensions/menu/extensions.menu.converter","tau/components/extensions/error/extension.errorBar","tau/ui/templates/menu/ui.template.menu.actions"],function(a,b,c,d,e,f,g,h,i,j){return{create:function(k){var l={extensions:[b,d,e,g,h,f,i,c],template:k.template||j};return a.create(l,k)}}}),define("tau/models/model.menu.testPlanRun",["Underscore","tau/core/model-base","tau/configurator"],function(_,a,b){var c=a.extend({"bus beforeInit":function(a){var c=a.data.config,d=c.eventNamesSpecial||{};_.defaults(d,{dataBind:"dataBind"});var e=d.dataBind,f=c.context.entity.id,g=b.getApplicationPath(),h={run:{show:!1,url:g+"/Project/QA/TestPlanRun/TestsRunner.aspx?TestPlanRunID="+f,label:"Run"},completeRun:{show:!1,url:g+"/Project/QA/TestPlanRun/TestsRunner.aspx?TestPlanRunID="+f+"&CompleteRun=1",label:"Complete Last Run"},newRun:{show:!1,url:g+"/Project/QA/TestPlanRun/TestsRunner.aspx?TestPlanRunID="+f+"&ReRun=1",label:"New Run"},changeLastRun:{show:!1,url:g+"/Project/QA/TestPlanRun/TestsRunner.aspx?TestPlanRunID="+f+"&Edit=1",label:"Change Last Run"}},i=this,j=c.context.entity;this.store.get("testplanrun",{id:j.id,fields:["testCaseRuns-count","passedCount","failedCount","notRunCount",{entityState:["isFinal"]}]}).done({success:function(a){var b=a[0].data;!b.entityState.isFinal&&b["testCaseRuns-count"]>0&&(b.passedCount>0||b.failedCount>0?(h.newRun.show=!0,b.notRunCount>0?h.completeRun.show=!0:h.changeLastRun.show=!0):h.run.show=!0),i.bus.fire(e,{additionalActions:h})}}),this.store.on({eventName:"afterSave",type:"testplanrun",listener:this,filter:{id:j.id},hasChanges:["entityState"]},function(a){i.fire("refresh")})}});return c}),define("tau/models/model.menu.testPlanRun.union",["Underscore","tau/core/model-base","tau/configurator"],function(_,a,b){var c=a.extend({"bus dataBind.special+dataBind.common":function(a){var b=a["dataBind.special"].data.additionalActions,c=[];_.forEach(b,function(a,b){a.show==1&&c.push({label:a.label||b,url:a.url})}),c=c.concat(a["dataBind.common"].data.items),this.fire("dataBind",{items:c})}});return c}),define("tau/components/component.menu.actions.testplanrun",["tau/components/component.creator","tau/models/model.menu.actions","tau/models/model.menu.testPlanRun","tau/models/model.menu.testPlanRun.union","tau/components/extensions/menu/extension.menu.actions","tau/components/extensions/error/extension.errorBar","tau/ui/templates/menu/ui.template.menu.actions"],function(a,b,c,d,e,f,g){return{create:function(h){h.eventNamesCommon={dataBind:"dataBind.common"},h.eventNamesSpecial={dataBind:"dataBind.special"};var i={extensions:[b,c,d,e,f],template:h.template||g};return a.create(i,h)}}}),define("tau/ui/templates/menu.testPlanRun/ui.template.menu.testPlanRun",["tau/core/templates-factory"],function(a){var b={name:"menu-testPlanRun",markup:['<div class="tau-menu-testplanrun">',"{{if additionalActions.run.show == true}}",'<a class="tau-action tau-action-run" href="${additionalActions.run.url}"><span class="tau-action__icon"></span>Run</a>',"{{/if}}","{{if additionalActions.newRun.show == true}}",'<a class="tau-action tau-action-newrun" href="${additionalActions.newRun.url}"><span class="tau-action__icon"></span>New Run</a>',"{{/if}}","{{if additionalActions.completeRun.show == true}}",'<a class="tau-action" href="${additionalActions.completeRun.url}">Complete Last Run</a>',"{{/if}}","{{if additionalActions.changeLastRun.show == true}}",'<a class="tau-action" href="${additionalActions.changeLastRun.url}">Change Last Run</a>',"{{/if}}","</div>"],dependencies:[]};return a.register(b)}),define("tau/components/component.menu.testPlanRun",["tau/components/component.creator","tau/models/model.menu.testPlanRun","tau/ui/templates/menu.testPlanRun/ui.template.menu.testPlanRun"],function(a,b,c){return{create:function(d){var e={extensions:[b],template:d.template||c};return a.create(e,d)}}}),define("tau/components/extensions/storeFreeze.extension",["tau/components/extensions/component.extension.base"],function(a){return a.extend({"bus onConfigContainerCreated":function(a){this.config&&this.config.store&&(this.promise=this.config.store.freeze())},"bus afterInit":function(a){if(!this.promise)return;this.promise.unfreeze(),delete this.promise}})}),define("tau/components/extensions/context.convert.extension",["Underscore","tau/components/extensions/component.extension.base","tau/configurations/converters/converter.context"],function(_,a,b){return a.extend({init:function(a){this._super(a),this.practices=[],this.editions=[]},"bus onConfigContainerCreated":function(a){var c=[],d=[];if(a.data.context){var e=a.data.context,f=this;_.each(e.getPractices(),function(a){c.push(a.name)}),d=e.getEdition()?[e.getEdition()]:[]}var g=a.data;b.convert(g,c,d)}})}),define("tau/components/extensions/extension.storeErrorEmiter",["Underscore","tau/components/extensions/component.extension.base","tau/configurator"],function(_,a,b){var c=a.extend({"bus beforeInit":function(a){this._super(a);var b=this.config.store,c=this;b.unbind(this),b.on({eventName:"failure",listener:c},function(){c.onFailure.apply(c,arguments)})},onFailure:function(a){var b="Looks like application is not available. Please check your connection or server availability";a.data&&a.data.data&&(a.data.data.Message&&(b=a.data.data.Message),a.data.data.response&&(a.data.data.response.Message&&(b=a.data.data.response.Message),_.isArray(a.data.data.response)&&(b=a.data.data.response[1])));var c=0;a.data&&a.data.data&&(c=a.data.data.status||0),c===500&&window.appIsInDebugMode===!1&&(b="Looks like application is not available. Please check your connection or server availability"),this.fire("error",{message:b}),(c>=400||c===0)&&this.bus.fire("globalFailure"),a.data&&a.data.cmd&&(a.data.cmd.name!=="get"?this.bus.fire("refresh"):c===0&&this.bus.fire("destroy"))},destroy:function(){this.config.store.unbind(this),this._super()}});return c}),define("tau/ui/extensions/ui.extension.loading",["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(_,$,a){return a.extend({showWaitIcon:function(){var a=$(".ui-wait-icon");a.length===0?(a=$('<div class="ui-wait-icon"></div>'),a.appendTo("body")):a.show()},"bus beforeInit":function(){this.bus.fire("showLoading","reaction on beforeInit")},"bus showLoading":function(){this.showWaitIcon()},"bus hideLoading":function(){$(".ui-wait-icon").hide()},init:function(a){this._super(a)},"bus beforeInit+afterRender+showLoading":function(a){this.bus.fire("hideLoading","hide on after render"),this.element=a.afterRender.data.element},"bus globalFailure":function(){this.bus.fire("hideLoading","hide on global failure"),this.element&&this.element.show()}})}),define("tau/components/component.page.base",["Underscore","tau/components/component.creator","tau/components/extensions/storeFreeze.extension","tau/components/extensions/context.convert.extension","tau/components/extensions/error/extension.errorBar","tau/components/extensions/extension.storeErrorEmiter","tau/ui/extensions/ui.extension.loading"],function(_,a,b,c,d,e,f){return{create:function(g,h){var i=[b,c,d,e,f];i=_.union(i,g.extensions);var j={name:g.name,ModelType:g.ModelType,ViewType:g.ViewType,extensions:i};return a.create(j,h)}}}),define("tau/views/view.page.board",["Underscore","tau/core/view-base","tau/components/component.container","tau/configurations/factory.container.config"],function(_,a,b,c){return a.extend({init:function(a){this._super(a),this.config.placeholder&&this.config.placeholder.addClass("ui-entity-view")},"container afterInit":function(a){this.fireAfterInit()},initialize:function(){},"container afterRender":function(a){this.fireBeforeRender(),this.element=a.data.element,this.config.placeholder&&this.config.placeholder.append(this.element),this.config.placeholder&&this.config.placeholder.addClass("tau-entity-loaded"),this.fireAfterRender()},initializeContainer:function(a){this.container.initialize(a)},"bus beforeInit":function(a){var d=this,e=a.data;_.extend(e,c.getConfig(e)),this.container=b.create({name:"board page container",store:this.config.store}),this.container.on("afterInit",this["container afterInit"],this),this.container.on("afterRender",this["container afterRender"],this),d.bus.fire("onConfigContainerCreated",e),this.initializeContainer(e)},lifeCycleCleanUp:function(){this.destroyContainer(),this._super()},destroyContainer:function(){if(!this.container)return;this.container.destroy(),this.container=null},destroy:function(){this.destroyContainer(),this.container=null,this._super()}})}),define("tau/components/component.page.board",["tau/components/component.page.base","tau/views/view.page.board"],function(a,b){return{create:function(c){var d={name:"board page component",ViewType:b,extensions:[]};return a.create(d,c)}}}),define("tau/models/model.entity",["Underscore","tau/configurator","tau/core/model-base","tau/models/dataprocessor/model.processor.context"],function(_,a,b,c){var d=function(){this.callbacks={}};return d.prototype={register:function(a,b){this.callbacks[a]=b},fnCallback:function(a){var b=this;return function(){var c=Array.prototype.slice.apply(arguments);b._ready.data[a]=c.length===1?c[0]:c;var d=b.callbacks[a];d&&d.fn.apply(d.scope,c),delete b.callbacks[a],_(b.callbacks).keys().length===0&&b._ready.fn.call(b._ready.scope,b._ready.data)}},ready:function(a){this._ready={fn:a.fn,scope:a.scope,data:{}}}},b.extend({name:"Entity",onInit:function(){var b=this;b.store.unbind(b);var c=b.config.context.id;b.store.on({eventName:"afterRemove",type:b.config.context.entityType.name,listener:this},function(a){var d=a.data.cmd.config.id;c==d&&b.fire("deleted",a.data)}),b.store.on({eventName:"beforeRemove",type:b.config.context.entityType.name,listener:this},function(a){var d=a.data.cmd.config.id;c==d&&b.fire("beforeDelete")});var e=new d;e.register("onGlobalSettings"),e.register("onContext"),e.ready({scope:this,fn:this.fnBindData});var f=a.getGlobalSettingsService();f.getGlobalSettings({scope:e,success:e.fnCallback("onGlobalSettings")}),b.store.get("context",{id:c,fields:["id","acid","culture","edition",{loggedUser:["id","email","isAdministrator"]},{processes:["id","name","terms","practices","customFields"]},{selectedProjects:["id","name",{process:["id","name"]}]}]},{scope:e,success:e.fnCallback("onContext")}).done()},fnBindData:function(a){var b=a.onContext;b.data.globalSettings=a.onGlobalSettings,this.onContextRetrieved(b)},destroy:function(){this.onContextRetrieved=function(){},this._super.apply(this,arguments)},onContextRetrieved:function(a){var b={context:{}},d=this,e=d.config.context;_.extend(b.context,{assignable:e}),_.extend(b.context,{entity:e}),_.extend(b.context,{general:e}),_.extend(b.context,{applicationContext:a.data}),d.bus.fire("contextRetrieved",{context:c(b.context)})}})}),define("tau/views/view.entity",["Underscore","tau/core/view-base","tau/components/component.container","tau/configurations/factory.container.config"],function(_,a,b,c){return a.extend({init:function(a){this._super(a),this.config.placeholder&&this.config.placeholder.addClass("ui-entity-view")},"container afterInit":function(a){this.fireAfterInit()},initialize:function(){},"container afterRender":function(a){this.fireBeforeRender(),this.element=a.data.element,this.config.placeholder&&this.config.placeholder.append(this.element),this.config.placeholder&&this.config.placeholder.addClass("tau-entity-loaded"),this.fireAfterRender()},initializeContainer:function(a){this.container.initialize(a)},"bus contextRetrieved":function(a){var d=this,e=a.data;_.extend(e,c.getConfig(e)),this.container=b.create({name:"entity container",store:this.config.store}),this.container.on("afterInit",this["container afterInit"],this),this.container.on("afterRender",this["container afterRender"],this),d.bus.fire("onConfigContainerCreated",e),this.initializeContainer(e)},lifeCycleCleanUp:function(){this.destroyContainer(),this._super()},destroyContainer:function(){if(!this.container)return;this.container.destroy(),this.container=null},destroy:function(){this.destroyContainer(),this.container=null,this._super()}})}),define("tau/components/extensions/extension.refresher",["Underscore","tau/components/extensions/component.extension.base"],function(_,a){return a.extend({init:function(a){this._super.apply(this,arguments),this.bus.getGlobalBus().on("entityWasMovedToProject",this.onEntityWasMovedToProject,this),this.bus.getGlobalBus().on("refreshMainEntity",this.refresh,this)},destroy:function(){this.bus.getGlobalBus().removeListener("entityWasMovedToProject",this.onEntityWasMovedToProject,this),this.bus.getGlobalBus().removeListener("refreshMainEntity",this.refresh,this),this._super.apply(this,arguments)},"bus onContextRetrieved":function(a){var b=a.data,c=this;_.each(b.processes[0].practices,function(a){c.practices.push(a.name)})},onEntityWasMovedToProject:function(a){var b=this.config.context.id;b==a.data.entity.id&&(this.fire("evictData"),this.fire("refresh"))},refresh:function(){this.fire("evictData"),this.fire("refresh")}})}),define("tau/components/extensions/entity/extension.refresher.project",["Underscore","tau/core/model-base"],function(_,a){return a.extend({onInit:function(){var a=[this.config.context.entityType.name],b=this;b.store.unbind(this),_.forEach(a,function(a){b.store.on({eventName:"beforeSave",type:a,listener:b},function(){b.beforeEntitySave.apply(b,arguments)}),b.store.on({eventName:"afterSave",type:a,listener:b},function(){b.afterEntitySave.apply(b,arguments)})})},"bus contextRetrieved":function(a){this.project=a.data.context.getProject()},beforeEntitySave:function(a){(a.data.changes.userStory||a.data.changes.project)&&a.data.cmd.config.fields.push({project:["id"]})},afterEntitySave:function(a){a.data.changes.project&&(this.fire("evictData"),this.fire("refresh"))}})}),define("tau/components/component.page.entity",["Underscore","tau/components/component.page.base","tau/models/model.entity","tau/views/view.entity","tau/components/extensions/extension.refresher","tau/components/extensions/entity/extension.refresher.project"],function(_,a,b,c,d,e){return{create:function(f,g){g=g||{},_(g).defaults({extensions:[]});var h={name:"entity component",ModelType:b,ViewType:c,extensions:_.union([d,e],g.extensions)};return a.create(h,f)}}}),define("tau/ui/extensions/pluginsList/ui.extension.pluginsList.editable",["Underscore","jQuery","tau/configurator","tau/components/extensions/component.extension.base"],function(_,$,a,b){var c=b.extend({"bus dataBind+afterRender":function(a){this.element=a.afterRender.data.element,this.dataToBind=a.dataBind.data;var b=this.element.find(".plugin-block");_(b).each(function(a){$(a).find(".tau-profile-actions").click($.proxy(this.onDeleteProfile,{pluginBlock:$(a),parentExtension:this}))},this)},onDeleteProfile:function(a){a.preventDefault();var b=this.parentExtension,c=$(a.target).tmplItem().data,d=this.pluginBlock,e=function(){d.confirmation("hide"),d.tauOverlay("hide"),b.fire("refresh")};d.confirmation({message:"Do you really want to delete profile?",okLabel:"OK",cancelLabel:"Cancel",ok:function(){d.tauOverlay({showOnCreation:!1}),d.tauOverlay("showLarge"),d.confirmation("hideConfirmationMessage"),b.config.context.pluginRepository.deleteProfile(c.pluginName,c.name,e)},cancel:function(){d.confirmation("hide")}}),this.pluginBlock.confirmation("show")}});return c}),define("tau/ui/extensions/pluginsList/ui.extension.pluginsList.errorDisplay",["Underscore","jQuery","tau/configurator","tau/components/extensions/component.extension.base"],function(_,$,a,b){var c=b.extend({"bus dataBind+afterRender":function(a){this.element=a.afterRender.data.element,this.dataToBind=a.dataBind.data,_(this.element.find(".plugin-block")).each(function(a){var b=$(a).tmplItem().data.name;this.config.context.pluginRepository.getProfilesErrors(b,$.proxy(this.onProfilesErrorsRetrieved,{element:$(a),data:$(a).tmplItem().data}))},this)},onProfilesErrorsRetrieved:function(a){_(this.element.find(".tau-profileName")).each(function(b){_(a).each(function(a){if(a.ProfileName==$(b).tmplItem().data.name&&a.ErrorsExist){var c=$(b);c.fadeOut("slow"),c.children("a").addClass("error-indicator"),$(b).fadeIn("slow")}})},this)}});return c}),define("tau/ui/extensions/pluginsList/ui.extension.pluginsCategory.collapsible",["Underscore","jQuery","tau/configurator","tau/components/extensions/component.extension.base"],function(_,$,a,b){var c=b.extend({"bus dataBind+afterRender":function(a){_(a.afterRender.data.element.find(".plugins-category")).each(function(a){var b=$(a);b.find(".tau-pluginCategory").click(function(a){a.preventDefault();var c=$(this),d=c.hasClass("collapsed"),e=d?"collapsed":"expanded",f=d?"expanded":"collapsed";c.removeClass(e),c.addClass(f),d?(b.find(".plugin-block").show(),b.find(".create-me").show()):(b.find(".plugin-block").hide(),b.find(".create-me").hide())})})}});return c}),define("tau/ui/extensions/pluginsList/ui.extension.pluginsList.showMore",["Underscore","jQuery","tau/configurator","tau/components/extensions/component.extension.base"],function(_,$,a,b){var c=b.extend({"bus dataBind+afterRender":function(a){this.element=a.afterRender.data.element,this.dataToBind=a.dataBind.data,_(this.element.find(".plugin-block")).each(function(a){var b=$(a),c=b.tmplItem().data.profilesMore.length;if(c>0){var d=b.find(".tau-profiles-more"),e=b.find(".tau-profiles-moreLink");e.show(),e.click([e,d],$.proxy(this.onShowMoreClick,{profilesMoreCount:c}))}},this)},onShowMoreClick:function(a){a.preventDefault();var b=a.data[0].find(".more-link"),c=a.data[1];c.is(":visible")?b.text(["Show more (",this.profilesMoreCount,")"].join("")):b.text("Show less"),c.animate({opacity:"toggle",height:"toggle"},"slow")}});return c}),define("tau/models/model.pluginsList",["Underscore","jQuery","tau/core/model-base"],function(_,$,a){var b=a.extend({onInit:function(){this.config.context.pluginRepository.getPlugins($.proxy(this.onPluginsRetrieved,this))},onPluginsRetrieved:function(a){this.augmentData(a),this.fire("dataBind",{items:a})},augmentData:function(a){_(a).each(function(a){_(a.plugins).each(function(a){a.iconSrc=[this.config.configurator.getApplicationPath(),"/PluginIcon.ashx?pluginName=",a.name].join(""),a.profilesShort=a.profiles.slice(0,3),a.profilesMore=a.profiles.slice(3)},this)},this)}});return b}),define("tau/ui/templates/pluginsList/ui.template.pluginsList.profile",["tau/core/templates-factory"],function(a){var b={name:"pluginsList-profile",markup:["<ul>",'   <li class="name tau-profileName"><a href="${editUrl}">${name}</a></li>','   <li class="delete"><a class="tau-profile-actions button danger" href=""><span class="delete-icon"></span></a></li>',"</ul>"]};return a.register(b)}),define("tau/ui/templates/pluginsList/ui.template.pluginsList.plugin",["tau/core/templates-factory","tau/ui/templates/pluginsList/ui.template.pluginsList.profile"],function(a){var b={name:"pluginsList-plugin",markup:['<div class="plugin-block">','   <img src="${iconSrc}" />','   <h4 class="_pluginName">${name}</h4>','   <p class="note-p">${description}</p>','   <div class="separator"></div>','   <div class="profiles-list">','       <div class="tau-profiles-short">','           {{tmpl(profilesShort) "pluginsList-profile"}}',"       </div>",'       <div class="tau-profiles-more" style="display:none">','           {{tmpl(profilesMore) "pluginsList-profile"}}',"       </div>","   </div>",'   <div class="pb-5 tau-profiles-moreLink" style="display:none">','       <a class="more-link">Show more (${profilesMore.length})</a>',"   </div>",'   <div class="pt-5">','       <button type="button" class="button bold" onClick="window.location.href = \'${newProfileUrl}\';">Add Profile</button>',"   </div>","</div>"],dependencies:["pluginsList-profile"]};return a.register(b)}),define("tau/ui/templates/pluginsList/ui.template.pluginsList.category",["tau/core/templates-factory","tau/ui/templates/pluginsList/ui.template.pluginsList.plugin"],function(a){var b={name:"pluginsList-category",markup:['<div class="plugins-category">','<div class="expanded tau-pluginCategory">','<span class="label">${category}</span>',"</div>",'{{tmpl(plugins) "pluginsList-plugin"}}',"</div>"],dependencies:["pluginsList-plugin"]};return a.register(b)}),define("tau/ui/templates/pluginsList/ui.template.pluginsList",["tau/core/templates-factory","tau/ui/templates/pluginsList/ui.template.pluginsList.category"],function(a){var b={name:"pluginsList",options:{contentSelector:".ui-pluginsList-table"},markup:['<div class="plugins">','   <div class="list">','       <h2 class="h2 icon">Plugins</h2>','       {{tmpl(items) "pluginsList-category"}}',"   </div>","</div>"],dependencies:["pluginsList-category"]};return a.register(b)}),define("tau/components/component.pluginsList",["tau/components/component.list.creator","tau/ui/extensions/pluginsList/ui.extension.pluginsList.editable","tau/ui/extensions/pluginsList/ui.extension.pluginsList.errorDisplay","tau/ui/extensions/pluginsList/ui.extension.pluginsCategory.collapsible","tau/ui/extensions/pluginsList/ui.extension.pluginsList.showMore","tau/models/model.pluginsList","tau/ui/extensions/ui.extension.loading","tau/ui/templates/pluginsList/ui.template.pluginsList"],function(a,b,c,d,e,f,g,h){return{create:function(i){var j={ModelType:f,template:h,message:"No plugins found",extensions:[b,c,d,e,g]};return a.create(j,i)}}}),define("tau/ui/templates/common/ui.template.buttonAction",["tau/core/templates-factory"],function(a){var b={name:"button-action",markup:['<a class="button-box ${id}-button user-action button small ${className}"',' role="button">','   <span class="">${title}</span>',"</a>"].join("")};return a.register(b)}),define("tau/ui/templates/print/ui.template.print",["tau/core/templates-factory","tau/ui/templates/common/ui.template.buttonAction"],function(a){var b={name:"print",markup:['<div class="ui-print">','   <div class="ui-print__controls">','       {{tmpl([{id: "x", className: "ui-print__controls__print", title: "Print"}]) "button-action"}}',"   </div>","</div>"],dependencies:["button-action"]};return a.register(b)}),define("tau/ui/extensions/print/ui.extension.print",["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/utils/utils.redirect"],function(_,$,a,b){return a.extend({"bus beforeInit":function(a){this.options=a.data.config,this.options.window=this.options.window||window},"bus afterRender":function(a){this.element=a.data.element,this.entity=a.data.data.context.entity;var b=this.element,c=this;this._printHandler||(this._printHandler=_.bind(this._print,this),b.find(".ui-print__controls__print").bind("click",this._printHandler));var d=b.find(".ui-print__controls__close");this._closeHandler||(this._closeHandler=_.bind(this._close,this),b.find(".ui-print__controls__close").bind("click",this._closeHandler))},_print:function(a){this.options.window.print()},_close:function(a){a.preventDefault(),this.options.window.opener?this.options.window.close():(new b(this.options.context)).redirect("View.aspx?noRedirect=1&id=${entity.id}")}})}),define("tau/components/component.print",["Underscore","tau/core/component-base","tau/views/view.container","tau/ui/templates/print/ui.template.print","tau/ui/extensions/print/ui.extension.print"],function(_,a,b,c,d){return{create:function(e){return e=e||{},_.defaults(e,{template:c}),(new a(e)).attach(d).attach(b).bus}}}),define("tau/views/view.composer",["Underscore","jQuery","tau/core/view-base","tau/core/event-dispatcher"],function(_,$,a,b){var c=a.extend({init:function(a){this._loaded=!1,this._super(a)},initialize:function(){var a=this,b=a.config.children,c=_.size(b)>0&&a.config.visible;if(c){var d=a.config.children,e=a.config.context||{};this.fire("createComponents",{components:d,context:e})}else a._super.apply(a,arguments),a._fireChildrenRendered({children:[],childrenEvtArgs:[]})},"bus componentCreated":function(a){var b=a.data.component;this.fire("childComponentCreated",b)},"bus componentsCreated":function(a){this.fire("beforeComponentsInitialize",a.data),this.initializeChildrenComponents(a),this.fire("afterComponentsInitialize",a.data)},initializeChildrenComponents:function(a){var c=this,d=_(a.data).pluck("component"),e=_(a.data).pluck("config");c.dispatcher=new b(d),c.dispatcher.listen("afterInit",function(a){c.fireAfterInit()}),c.dispatcher.listen("afterRender",function(a){var b=a.argsArr,e={children:d,childrenEvtArgs:b};c._fireChildrenRendered(e)}),_(d).each(function(a,b){a.fire("initialize",e[b])})},_fireChildrenRendered:function(a){this.fire("internalChildrenRendered",a)},"bus afterInit+dataBind":function(a){},"bus afterInit+dataBind+internalChildrenRendered":function(a){this.destroyChildComponents();var b=this,c=a.afterInit.data,d=a.dataBind.data,e=a.internalChildrenRendered.data;b.children=e.children,b.config.visible&&(b._loaded=!0);if(e.children.length===0)b.render(d,c);else{b.fireBeforeRender({data:d});var f=b.bindTemplate(d);f.find("[runas]").each(function(a,b){var c=$(this),d=c.attr("runas"),f=c.attr("componentId"),g=_(e.childrenEvtArgs).detect(function(a,b){var c=a.view.config;return c.type===d&&c.id.toString()===f});if(!g){var i='Component "'+f+'" type of ['+d+"] not found";throw i}var h=g.element;c.replaceWith(h)}),f=b.prepareElement(f),b.fire("childrenRendered",e.children),b.updateElement(f,c.refreshSelector),!b.config.visible&&b.hide(),b.fireAfterRender({data:d})}},"bus show":function(){this._super(),this._loaded||this.fire("initialize",{})},lifeCycleCleanUp:function(){this._super()},destroyChildComponents:function(){delete this.dispatcher;var a=null;if(this.children&&this.children.length)while(a=this.children.pop())a.destroy();delete this.children},destroy:function(){this.destroyChildComponents(),this._super()}});return c}),define("tau/models/model.progressBar",["tau/core/model-base"],function(a){var b=function(a){this.model=a};b.prototype={setEntity:function(a){this.entity=a.data},done:function(){var a=this.model.entity=this.entity;if(!a)return;var b={id:a.id,entityType:{name:a.__type},entityState:{id:a.entityState.id,name:a.entityState.name,isFinal:a.entityState.isFinal},effortCompleted:a.effortCompleted,effortToDo:a.effortToDo,timeSpent:a.timeSpent,timeRemain:a.timeRemain},c=Math.round(100*parseFloat(b.effortToDo)+100*parseFloat(b.effortCompleted))/100;b.percentCompleted=Math.round(1e4*(b.effortCompleted/c))/100,b.percentCompleted=isNaN(b.percentCompleted)?0:b.percentCompleted,b.percentCompleted=b.percentCompleted>100?100:b.percentCompleted,a.entityState.isFinal&&(b.percentCompleted=100),b.disableSpentRemain=this.model.config.context.getTimeTrackingPolicies().disableSpentRemain;var d=this.model.config.maxWidthPercents;_.isUndefined(d)===!1?b.maxWidthPercents=d:b.maxWidthPercents=100,this.model.bus.fire("dataBind",b)}};var c=a.extend({name:"Progress Bar",beforeSaveRoleEffort:function(a){var b=a.data.cmd.config;b.fields=b.fields||[],b.fields.push({assignable:["id","effortCompleted","effortToDo","timeSpent","timeRemain"]})},afterSaveEntity:function(a){var b=a.data;b.changes.hasOwnProperty("timeRemain")&&b.id===this.config.context.entity.id&&this.fire("remainTimeChanged")},afterSaveRoleEffort:function(a){var b=this;b.fire("roleEffortChanged")},onDataUpdated:function(a){var b=this;b.fire("refresh")},onInit:function(){var a=this,c=new b(this),d=this.config.context,e=d.entity.entityType.name,f=d.entity.id,g=["effortCompleted","effortToDo","timeSpent","timeRemain",{entityState:["id","name","isFinal"]}],h=function(b){var c=b.data.cmd.config.fields;b.data.cmd.config.fields=c.concat(g),a.fire("beforeChanges",b.data.changes)},i=function(b){if(a.isInTransaction(b))return;a.fire("applyChanges",b.data.changes)};a.store.unbind(this),a.store.on({eventName:"beforeSave",type:e,filter:{id:d.assignable.id},hasChanges:["entityState"],listener:this},h),a.store.on({eventName:"afterSave",type:e,filter:{id:d.assignable.id},hasChanges:["entityState"],listener:this},i),a.store.on({eventName:"afterSave",type:e,filter:{id:d.assignable.id},hasChanges:["effort|effortCompleted|effortToDo|timeSpent|timeRemain"],listener:a},_.bind(a.onDataUpdated,a)),a.store.on({eventName:"beforeSave",type:"roleEffort",listener:this},function(){a.beforeSaveRoleEffort.apply(a,arguments)}),a.store.on({eventName:"afterSave",type:"roleEffort",filter:{assignable:{id:d.assignable.id}},listener:this},function(b){if(a.isInTransaction(b))return;a.afterSaveRoleEffort.apply(a,arguments)}),a.store.on({eventName:"afterSave",type:e,listener:this},function(){a.afterSaveEntity.apply(a,arguments)}),this.store.get(e,{id:f,fields:g},{success:c.setEntity,scope:c}).done({success:c.done,scope:c})},isInTransaction:function(a){var b=this,c=a.data?a.data.cmd:{};return c===b.lastCmd?!0:(b.lastCmd=c,!1)},"bus evict":function(){var a=this.config.context.general;this.store.evictProperties(a.id,a.entityType.name,["effortCompleted","effortToDo","timeSpent","timeRemain","entityState"])}});return c}),define("tau/models/model.state.editable",["tau/core/model.editable.base"],function(a){return a.extend({category:"edit",name:"Editable State","bus dataBind":function(){this.bus.fire("permissionsReady",{editable:!0})},"bus beforeSave":function(a){var b=a.data.cmd,c=b.fields||[];c=c.concat(["effortCompleted","effortToDo","timeSpent","timeRemain"]),b.fields=c}})}),define("tau/ui/extensions/progressBar/ui.extension.progressBar.updater",["tau/components/extensions/component.extension.base","tau/ui/behaviour/overlay/ui.behaviour.overlay"],function(a){var b=a.extend({"bus afterRender":function(a){this.$el=a.data.element,this.config.context.getTimeTrackingPolicies().disableSpentRemain&&this.$el.find(".ui-progressbar__data").hide()},"bus roleEffortChanged":function(){this.fire("refresh")},"bus remainTimeChanged":function(){this.fire("refresh")},"bus beforeChanges":function(a){this.$el.tauOverlay()},"bus applyChanges":function(a){this.$el.tauOverlay("hide"),this.fire("refresh")}});return b}),define("tau/ui/templates/progressBar/ui.template.progressBar",["tau/core/templates-factory","tau/ui/tags/ui.tag.term","tau/ui/templates/common/ui.template.attributeValue"],function(a,b){var c={name:"progress-bar",tags:[b],markup:['<div class="entity-progress-box">','   <div class="state-select">{{term(entityType.name) "name"}} is','      <div componentId="ctrlEntityState" runas="property.entityState"></div>',"   </div>",'   <div class="ui-progressbar__data">','      <span class="ui-label-spent ui-progressbar__data__spent">Spent&nbsp;<b class="value">${timeSpent}h</b></span>','      <span class="ui-label-remain  ui-progressbar__data__remain">Remain&nbsp;<b class="value">${timeRemain}h</b></span>',"   </div>",'   <div class="ui-progress-bar-progress ui-progressbar__progress">',"{{if percentCompleted !== 0 }}",'      <span class="ui-progress-progress ui-progressbar__progress__indicator" style="width:${ Math.round(percentCompleted) < 15 ? 15 : Math.round(percentCompleted) }%;">','         <span class="ui-label ui-progressbar__progress__label"><b class="value">${ Math.round(percentCompleted) }%</b></span>',"      </span>","{{/if}}","   </div>","</div>"],dependencies:["common-attributeValue"]};return a.register(c)}),define("tau/components/component.progressBar",["Underscore","tau/components/component.creator","tau/views/view.composer","tau/components/extensions/component.creator.extension","tau/models/model.progressBar","tau/models/model.state.editable","tau/ui/extensions/progressBar/ui.extension.progressBar.updater","tau/ui/extensions/ui.extensions.onMarkAsDuplicate","tau/ui/templates/progressBar/ui.template.progressBar"],function(_,a,b,c,d,e,f,g,h){return{create:function(i,j){j=j||{};var k={ViewType:b,extensions:[j.model||d,e,c,f,g],template:j.template||h},l=i.extensions||[];for(var m=0;m<l.length;m++)k.extensions.push(l[m]);return _(i).extend({children:[{id:"ctrlEntityState",type:"property.entityState",disabledExtensionCategories:i.disabledExtensionCategories}]}),a.create(k,i)}}}),define("tau/ui/templates/progressBar/ui.template.progressBar.small",["tau/core/templates-factory","tau/ui/tags/ui.tag.term","tau/ui/templates/common/ui.template.attributeValue"],function(a,b){var c=["{{if disableSpentRemain === false}}","Time spent: ${timeSpent}{{if timeSpent}}h{{/if}}  ","Time remain: {{if !timeRemain && timeRemain !== 0}}N/A{{else}}${timeRemain}{{if timeRemain}}h{{/if}}{{/if}}  ","{{/if}}","Percent complete: ${Math.round(percentCompleted)}%"].join(""),d={name:"progress-bar-small",tags:[b],markup:["<div>","{{if maxWidthPercents > 0}}",'    <div class="ui-progress-bar-progress ui-progressbar__progress tau-extension-tooltip" style="width:${maxWidthPercents}%;" title="'+c+'">','        <span class="ui-progress-progress ui-progressbar__progress__indicator" style="width:${percentCompleted}%;{{if percentCompleted == 0}}display:none;{{/if}}"></span>',"    </div>","{{else}}",'   <div{{if maxWidthPercents == 0}} class="tau-extension-tooltip" title="'+c+'"{{/if}}>',"   </div>","{{/if}}","</div>"]};return a.register(d)}),define("tau/components/component.progressBar.small",["Underscore","tau/components/component.creator","tau/components/extensions/component.creator.extension","tau/models/model.progressBar","tau/ui/extensions/progressBar/ui.extension.progressBar.updater","tau/ui/extensions/ui.extension.tooltip","tau/ui/templates/progressBar/ui.template.progressBar.small"],function(_,a,b,c,d,e,f){return{create:function(b,g){g=g||{};var h={extensions:[c,d,e],template:f};return a.create(h,b)}}}),define("tau/models/model.property.simple",["tau/core/model-base"],function(a){return a.extend({init:function(a){this._super.apply(this,arguments);if(!a.propertyName)throw"PropertyName was not configured";this.propertyName=a.propertyName,this.listenedEntities={}},getEntityTypeName:function(){return this.config.context.entity.entityType.name},getEntityId:function(){return this.config.context.entity.id},listenOfPropertyChanged:function(){var a=this.config.context.entity.id;this.listenedEntities[a]||(this.listenedEntities[a]=!0,this.attachToChangePropertiesOfCurrentEntity(this.propertyName))},onInit:function(){this.listenOfPropertyChanged(),this.store.get(this.getEntityTypeName(),{id:this.getEntityId(),fields:["id",this.propertyName]}).done({success:this.onEntityRetrieved,scope:this})},onEntityRetrieved:function(a){var b=a[0].data[this.propertyName]||this.config.defaultText;this.fire("dataBind",{name:this.propertyName,text:b})}})}),define("tau/models/model.property.text",["tau/models/model.property.simple"],function(a,b){return a.extend({})}),define("tau/models/model.property.text.editable",["tau/core/model.editable.base"],function(a){return a.extend({"bus dataBind":function(){this.bus.fire("permissionsReady",{editable:this.config.editable})}})}),define("tau/models/model.property.text.validation",["tau/core/model-base","tau/utils/utils.jsonSchema"],function(a,b,c){var d=a.extend({category:"edit",name:"Model text validation",schema:b.Schema.create({type:"string",optional:!1,empty:!1,maxLength:50,minLength:0,pre:["trim"]}),"bus afterRender":function(a){this.$element=a.data.element},"bus validate":function(a){this.$element.find(".property-text").dateEditor("resetValidationErrors");var b=a.data,c=b.cmd.$set[this.config.propertyName];b.validation=this.schema.validate(c);if(!b.validation||b.validation.isError()!=1)b.validation=this.schema.validate(c),b.cmd.$set[this.config.propertyName]=b.validation.instance},"bus afterValidate":function(a){var b=a.data.validation;this.$element.find(".property-text").editableText("setValue",b.instance)},"bus validationFailed":function(a){var b=a.data.validation;this.$element.find(".property-text").editableText("setValidationErrors",b.errors[0].description)}});return d}),define("tau/models/model.property.abbreviation.validation",["tau/models/model.property.text.validation","tau/utils/utils.jsonSchema"],function(a,b){var c=a.extend({category:"edit",schema:b.Schema.create({type:"string",optional:!0,empty:!0,maxLength:3,pre:["trim"],post:[function(a){return(a+"").toUpperCase()},function(a){var b=/^[\dа-яa-z]{1,3}$/i;return a.match(b)||new this.Error("Abbr","Should contain letters or digits"),a}]})});return c}),define("tau/components/extensions/property/extension.property.text.editable",["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(_,$,a){return a.extend({category:"edit","bus permissionsReady+afterRender":function(a){var b=this,c=a.afterRender.data.data,d=this.permissions=a.permissionsReady.data;if(d.editable){var e=this.$el=a.afterRender.data.element,f=e.find(".property-text");b.$widget=f,f.editableText({restoreText:!1,onSave:function(a){var c={};c[b.config.propertyName]=a;var d={$set:c};d.$include=[b.config.propertyName],b.bus.fire("save",d)}})}},"bus edit":function(){this.permissions.editable&&this.$el.find(".property-text").editableText("activate")}})}),define("tau/components/extensions/property/extension.property.refresher",["Underscore","tau/components/extensions/component.extension.base"],function(_,a){return a.extend({category:"refresher","bus propertyChanged":function(){this.fire("refresh")}})}),define("tau/ui/templates/property/ui.template.property",["tau/core/templates-factory","tau/ui/templates/common/ui.template.entityLink"],function(a){var b={name:"property",markup:["<div>",'<span class="property tau-property{{if name}} tau-property-${name}{{/if}}{{if !text}} tau-property_empty_true{{/if}}">',"{{if  hasUrl}}",'{{tmpl($data) "entity-link"}}',"{{/if}}",'<span class="property-text tau-property__value"  data-placeholder="${placeholderText}">${text}</span>',"</span>","{{if subtext}}",'<div class="tau-property__subtext">${subtext}</div>',"{{/if}}","</div>"].join(""),dependencies:["entity-link"]};return a.register(b)}),define("tau/components/component.property.abbreviation",["Underscore","tau/components/component.creator","tau/models/model.property.text","tau/models/model.property.text.editable","tau/models/model.property.abbreviation.validation","tau/components/extensions/property/extension.property.text.editable","tau/components/extensions/property/extension.property.refresher","tau/ui/templates/property/ui.template.property"],function(_,a,b,c,d,e,f,g){return{create:function(h){h.propertyName="abbreviation";var i={ModelType:b,extensions:[c,d,e,f],template:g};return a.create(i,h)}}}),define("tau/models/model.property",["tau/core/model.editable.base","tau/configurator"],function(a,b){return a.extend({init:function(a){this._super.apply(this,arguments);if(!a.propertyName)throw"PropertyName was not configured";this.propertyName=a.propertyName,this.displayField=a.displayField||"name",this.valueField=a.valueField||"id",this.listenedEntities={}},getEntityTypeName:function(){return this.config.context.entity.entityType.name},getEntityId:function(){return this.config.context.entity.id},buildRequest:function(a){var b=this.store;return b=b.get(this.getEntityTypeName(),{id:this.getEntityId(),fields:["id",a]}),b},getPropertyData:function(a){var b=this.buildRequest(a);b.done({success:this.onEntityRetrieved,scope:this})},getPropertyFields:function(){return[this.displayField,this.valueField]},onInit:function(){this._super.apply(this,arguments);var a={};a[this.propertyName]=this.getPropertyFields(),this.listenOfPropertyChanged(),this.getPropertyData(a)},listenOfPropertyChanged:function(){var a=this.config.context.entity.id;this.listenedEntities[a]||(this.listenedEntities[a]=!0,this.attachToChangePropertiesOfCurrentEntity(this.propertyName))},onProcessProperty:function(a){var b={id:a[this.valueField],name:this.propertyName.toLowerCase(),text:a[this.displayField]};return this.config.showUrl&&a.id&&(b.hasUrl=!0,b.__type=a.__type,b.id=a.id),b.placeholderText=this.config.placeholderText,b},processProperty:function(a){var b=this.onProcessProperty(a);this.fire("dataBind",b)},onEntityRetrieved:function(a){var b=this.property=a[0].data[this.propertyName]||{};this.processProperty(b)},entityBelongCurrentContext:function(a){return a.changes.hasOwnProperty(this.config.propertyName)&&a.cmd.config.id==this.config.context.entity.id},onEntityAfterSave:function(a){var b=a.data;this.entityBelongCurrentContext(b)&&this.fire("changed",b)},onEntityBeforeSave:function(a){var b=a.data;this.entityBelongCurrentContext(b)&&this.fire("beforeChanged",b)}})}),define("tau/models/model.property.assignable",["tau/models/model.property","tau/configurator"],function(a,b){return a.extend({onInit:function(){var a=this;a._super.apply(a,arguments),a.store.unbind(a),a.store.on({type:a.getEntityTypeName(),eventName:"beforeSave",listener:a,filter:{id:a.getEntityId()},hasChanges:[a.propertyName]},function(b){a.store.evictProperties(a.getEntityId(),a.getEntityTypeName(),[a.config.refField]),a.fire("beforeChanged",b.data)}),a.store.on({type:a.getEntityTypeName(),eventName:"afterSave",listener:a,filter:{id:a.getEntityId()},hasChanges:[a.propertyName]},function(b){a.fire("propertyChanged",b.data)})},getPropertyData:function(){var a=this;a.store.get(a.getEntityTypeName(),{id:a.getEntityId(),fields:["id",a.config.refField]},{success:function(b){if(!b.data[a.config.refField]||b.data[a.config.refField].length===0){a.processProperty({});return}a.store.get("assignable",{id:b.data[a.config.refField][0],fields:[a.displayField,a.valueField]},{success:function(b){a.processProperty(b.data)}}).done()},scope:a}).done()}})}),define("tau/models/finder/model.relation.editor",["Underscore","tau/core/model.editable.base"],function(_,a){return a.extend({"bus entitySelected":function(a){var b={};b[this.config.propertyName]=null;var c=a.data.entity;c&&c.id&&(b[this.config.propertyName]={id:c.id});var d=this.config.context;this.config.store.evictProperties(d.entity.id,d.entity.entityType.name,[this.config.propertyName]),this.fire("save",{$set:b})}})}),define("tau/models/model.property.bool",["tau/core/model-base"],function(a){return a.extend({init:function(a){this._super.apply(this,arguments);if(!a.propertyName)throw"PropertyName was not configured";this.propertyName=a.propertyName},getEntityTypeName:function(){return this.config.context.entity.entityType.name},getEntityId:function(){return this.config.context.entity.id},onInit:function(){this.store.unbind(this),this.attachToChangePropertiesOfCurrentEntity(this.propertyName),this.store.get(this.getEntityTypeName(),{id:this.getEntityId(),fields:["id",this.propertyName]}).done({success:this.onEntityRetrieved,scope:this})},onEntityRetrieved:function(a){var b=a[0].data,c={value:b[this.propertyName]};this.fire("dataBind",c)}})}),define("tau/models/model.property.editable",["tau/core/model.editable.base"],function(a){return a.extend({"bus beforeInit+dataBind":function(a){this.fire("permissionsReady",{editable:this.config.editable!=0})}})}),define("tau/components/extensions/property/extension.property.bool.editable",["Underscore","tau/components/extensions/component.extension.base","tau/ui/behaviour/checkbox/ui.behaviour.checkboxToggle"],function(_,a){return a.extend({category:"edit","bus permissionsReady+afterRender+dataBind":function(a){var b=this,c=this.element=a.afterRender.data.element;a.afterRender.data.element.find(".external-view").click(function(a){a.stopPropagation()});var d=this.permissions=a.permissionsReady.data,e=a.dataBind.data;if(d.editable){var f=c.find(".property .ui-checkbox");f.checkboxToggle({classNames:{checked:"checked",unchecked:"unchecked"},onSave:function(a){b.bus.fire("elementUpdated");var c={};c[b.config.propertyName]=a,b.bus.fire("save",c)}})}},"bus edit":function(){this.permissions.editable&&this.element.find(".property .ui-checkbox").checkboxToggle("toggle")}})}),define("tau/ui/templates/property/ui.template.bool",["tau/core/templates-factory"],function(a){var b={name:"property-bool",markup:['<div><span class="property"><div class="ui-checkbox {{if value}}checked{{/if}}{{if !value}}unchecked{{/if}}">&nbsp;</div></span></div>'].join("")};return a.register(b)}),define("tau/components/component.property.bool",["Underscore","tau/components/component.creator","tau/models/model.property.bool","tau/models/model.property.editable","tau/components/extensions/property/extension.property.refresher","tau/components/extensions/property/extension.property.bool.editable","tau/ui/templates/property/ui.template.bool"],function(_,a,b,c,d,e,f){return{create:function(g){var h=_.concat([g.extensions,d]);g.editable===!0&&(h=_.concat([h,e,c]));var i={ModelType:b,template:g.template||f,extensions:h};return a.create(i,g)}}}),define("tau/models/finder/model.build.search",["Underscore","tau/models/finder/model.assignable.search"],function(_,a){return a.extend({init:function(a){this._super(a),delete this.properties.state,delete this.properties.priority},setInitialLimits:function(a){this.initialLimits=a},getInitialQueryConfig:function(){return{$skip:0,$limit:20,$query:{}}},getInitialQueryString:function(){return""},getType:function(){return"build"},"bus requireSearchConfig":function(a){var b=this,c=a.data.project,d=this.config.context.entity;this.config.store.get(d.entityType.name,{id:d.id,fields:["id",{project:["id"]}]}).done({success:function(a){var c=a[0].data,d={"Project.Id":null};c.project&&(d["Project.Id"]=c.project.id),b.setInitialLimits(d);var e={$skip:0,$limit:20,$query:d},f=b.getInitialQueryString();b.fire("searchConfigFormed",{type:b.getType(),config:e,properties:b.properties,searchQuery:f})}})},"bus search":function(a){var b=a.data,c=this,d=b.collection,e={};_.each(d,function(a){var b=c.properties[a.property];if(!b)return;var d=b.name?b.name:a.property;b.statement(e,d,a.value)}),e=_.extend(e,this.initialLimits),c.bus.fire("newSearchQuery",{type:c.getType(),config:{$query:e,$skip:0,$limit:20}})}})}),define("tau/components/extensions/property/extension.property.build.refresher",["Underscore","tau/core/model-base"],function(_,a,b){return a.extend({category:"refresher","bus afterInit":function(){var a=this.store,b=this.config.context.entity,c=this;this.store.unbind(this),a.on({eventName:"afterSave",type:"testplanrun",listener:this,filter:{id:b.id}},function(a){var b=a.data.changes;(b.hasOwnProperty("release")||b.hasOwnProperty("iteration"))&&c.bus.fire("refresh")})}})}),define("tau/models/finder/model.build.testPlanRun.search",["Underscore","tau/models/finder/model.build.search"],function(_,a){return a.extend({"bus requireSearchConfig":function(a){var b=this,c=a.data.project,d=this.config.context.entity;this.config.store.get("testPlanRun",{id:d.id,fields:["id",{project:["id",{process:["id",{practices:["id","name"]}]}]},{release:["id"]},{iteration:["id"]}]}).done({success:function(a){var c=a[0].data,d=c.project.process.practices,e=_.any(d,function(a){return a.name.toLowerCase()=="iterations"}),f={"Project.Id":null,"Release.Id":null};c.project&&(f["Project.Id"]=c.project.id),c.release&&(f["Release.Id"]=c.release.id),c.iteration&&e==1&&(f["Iteration.Id"]=c.iteration.id),b.setInitialLimits(f);var g={$skip:0,$limit:20,$query:f},h=b.getInitialQueryString();b.fire("searchConfigFormed",{type:b.getType(),config:g,properties:b.properties,searchQuery:h})}})}})}),define("tau/models/model.property.date",["tau/models/model.property.simple","tau/utils/utils.date"],function(a,b){return a.extend({onEntityRetrieved:function(a){var c=this.config.format?this.config.format:"date",d=a[0].data;this.property=d[this.propertyName];var e=b.format[c].short(b.convertToTimezone(this.property)),f=b.parse(this.property),g={text:e};this.fire("extendData",{dataToBind:g,entity:d,date:f}),this.fire("dataBind",g)}})}),define("tau/models/model.property.date.validation",["tau/core/model-base","tau/utils/utils.jsonSchema","tau/utils/utils.date"],function(a,b,c){var d=a.extend({category:"edit",name:"Model date validation",schema:b.Schema.create({type:"string",optional:!1,empty:!1,post:function(a){if(this.wasError()==0){var b=c.parse(a),d=c.parse(this.schema.additionalProperties.max),e=c.parse(this.schema.additionalProperties.min);b==null?new this.Error("Date","Incorrect date format"):b<new Date("01/01/1900")?new this.Error("Date","Date must be greater then 1-Jan-1900"):d&&b>d?new this.Error("Date","Date must be less then "+c.format.date.short(d)):e&&b<e?new this.Error("Date","Date must be greater then "+c.format.date.short(d)):a=c.formatAs(b,this.schema.additionalProperties.dateFormat)}return a},additionalProperties:{dateFormat:c.getFormatData().date.short,max:null,min:null}}),"bus afterInit":function(){this.config.format=="datetime"&&(this.schema.additionalProperties.dateFormat=c.getFormatData().datetime.short)},"bus afterRender":function(a){this.element=a.data.element},"bus validateDate":function(a){var b=this.schema.validate(a.data.value);a.data.value=b.instance},"bus validate":function(a){var b=this.element.find(".property");b.dateEditor("resetValidationErrors");var c=a.data,d=c.cmd.$set[this.config.propertyName];if(!c.validation||c.validation.isError()!=1)c.validation=this.schema.validate(d),c.cmd.$set[this.config.propertyName]=c.validation.instance},"bus resetValidationErrors":function(){var a=this.element.find(".property");a.dateEditor("resetValidationErrors")},"bus afterValidate":function(a){var b=a.data.validation;this.element.find(".property").dateEditor("setValue",b.instance)},"bus validationFailed":function(a){var b=this.element.find(".property");b.dateEditor("setValidationErrors",a.data.validation.errors[0].description)}});return d}),define("tau/models/model.property.date.editable",["tau/core/model.editable.base","tau/utils/utils.date"],function(a,b){return a.extend({"bus dataBind":function(){this.bus.fire("permissionsReady",{editable:this.config.editable})},"bus afterValidate":function(a){var c=a.data.cmd.$set[this.config.propertyName];c&&(c=b.parse(c),c=b.format.datetime.short(c),a.data.cmd.$set[this.config.propertyName]=c)}})}),define("tau/components/extensions/property/extension.property.date.editable",["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/utils/utils.date","tau/ui/behaviour/date/ui.behaviour.dateEditor"],function(_,$,a,b){return a.extend({category:"edit",init:function(){this._super.apply(this,arguments),this.onClickProxy=$.proxy(this.onClickHandler,this)},"bus permissionsReady+afterRender+dataBind":function(a){var c=this,d=this.element=a.afterRender.data.element;a.afterRender.data.element.find(".external-view").click(function(a){a.stopPropagation()});var e=this.permissions=a.permissionsReady.data,f=this.date=a.dataBind.data,g=this.config.format;if(e.editable){this.element.bind("click",this.onClickProxy);var h=this.$widget=d.find(".property"),i=null;g=="datetime"?i="datetimepicker":i="datepicker",$.datepicker.parseDate=function(a,c,d){return b.parse(c)},$.datepicker.formatDate=function(a,c,d){return b.format.date.short(c)},h.dateEditor({dateFormat:b.getFormatData().date.short,widgetName:i,beforeChange:function(a){c.fire("validateDate",a)},onSave:function(a){var b={};b[c.config.propertyName]=a;if(c.trimString(a)!=c.trimString(f.text)){var d={$set:b};d.$include=[c.config.propertyName],c.bus.fire("save",d)}else c.fire("resetValidationErrors")}})}},trimString:function(a){return(a||"").trim()},showEditor:function(){this.$widget.dateEditor("activate"),this.$widget.focus()},"bus edit":function(){this.permissions.editable&&this.showEditor()},onClickHandler:function(){this.showEditor()},removeHandlers:function(){this.element&&this.element.unbind("click",this.onClickProxy)},removeWidget:function(){this.$widget&&this.$widget.dateEditor("destroy")},destroy:function(){this.removeHandlers(),this.removeWidget(),this._super.apply(this,arguments)}})}),define("tau/ui/templates/property/ui.template.property.date",["tau/core/templates-factory"],function(a){var b={name:"property-date",markup:'<div><div class="property"><div class="property-text">${text}</div></div>'};return a.register(b)}),define("tau/components/component.property.date",["Underscore","tau/components/component.creator","tau/models/model.property.date","tau/models/model.property.date.validation","tau/models/model.property.date.editable","tau/components/extensions/property/extension.property.date.editable","tau/components/extensions/property/extension.property.refresher","tau/ui/templates/property/ui.template.property.date"],function(_,a,b,c,d,e,f,g){return{create:function(h){h=_.extend(_.clone(h)),h.validationExtension=h.validationExtension||c;var i={ModelType:b,template:h.template||g,extensions:_.concat([h.extensions,f,d,e,h.validationExtension])};return a.create(i,h)}}}),define("tau/components/component.property.buildDate",["tau/components/component.property.date"],function(a){return{create:function(b){return b=b||{},b.propertyName="buildDate",b.format="datetime",a.create(b)}}}),define("tau/components/component.property.completeDate",["tau/components/component.property.date"],function(a){return{create:function(b){return b=_.clone(b||{}),b.propertyName="endDate",a.create(b)}}}),define("tau/components/component.property.createDate",["tau/components/component.property.date"],function(a){return{create:function(b){return b=b||{},b.propertyName="createDate",a.create(b)}}}),define("tau/models/model.property.effort",["tau/core/model-base"],function(a){var b=a.extend({onInit:function(){var a=this,b=a.config.context,c=b.entity.entityType.name,d=b.entity.id;a.store.unbind(a),a.store.on(a.getSubscriptionConfig("afterSave"),_.bind(a.onEntityAfterSave,a)),a.store.on(a.getSubscriptionConfig("beforeSave"),_.bind(a.onEntityBeforeSave,a)),a.store.get(c,{id:d,fields:["id","effort",{roleEfforts:["id",{role:["id","hasEffort"]}]}]}).done({scope:a,success:a.done})},done:function(a){var b=this,c=a[0].data,d=b.config.context,e=d.entity.entityType.name,f={id:c.id,effort:Math.round(100*c.effort)/100,unit:d.getEffortPoint(e),roleEfforts:c.roleEfforts};b.fire("dataBind",f)},getSubscriptionConfig:function(a){var b=this,c=b.config.context.entity;return{eventName:a,type:"roleEffort",listener:b,filter:{assignable:{id:c.id}},hasChanges:["effort"]}},onEntityAfterSave:function(a){this.fire("propertyChanged")},onEntityBeforeSave:function(a){this.fire("beforeChangeProperty")}});return b}),define("tau/models/model.property.effort.editable",["tau/core/model.editable.base","Underscore"],function(a,_){var b=a.extend({name:"Effort Editable","bus beforeInit+dataBind":function(){var a=this,b={editable:!0};this.fire("permissionsReady",b)}});return b}),define("tau/ui/templates/assignmentsList/ui.template.assignments.effortsOnly.effortsList",["tau/core/templates-factory"],function(a){var b={name:"ui.template.assignments.effortsOnly.effortsList",markup:["{{if roleEffort}}",'<tr class="tau-row group" roleId="${role.id}">',"   <td><span>${role.name}</span></td>",'   <td class="tau-cell-role-effort-value role-effort"><div class="effort">${roleEffort.effort}<span class="point">${$item.effortPoints}</span></div></td>',"</tr>","{{/if}}"].join(""),dependencies:[]};return a.register(b)}),define("tau/ui/templates/assignmentsList/ui.template.assignments.effortsOnly",["tau/core/templates-factory","tau/ui/templates/assignmentsList/ui.template.assignments.effortsOnly.effortsList"],function(a){var b={name:"ui.template.assignments.effortsOnly",markup:['<table class="assignments-table-readonly tau-assignments-effort-only">','   <tr class="tau-header-row tau-row-delimiter">','       <td class="tau-header-cell-title"></td>','       <td class="tau-header-cell-value">Effort</td>',"    </tr>",'   {{tmpl(assignments.groups, {effortPoints: effortPoints}) "ui.template.assignments.effortsOnly.effortsList"}}',"{{if tasksEffort}}",'   <tr class="tau-footer-row tau-row-delimiter">',"       <td>Tasks</td>","       <td>${tasksEffort.effort} h</td>","   </tr>","{{/if}}",'   <tr class="tau-footer-row tau-footer-row-total">',"       <td>Total</td>","       <td><span>${totalEffort.effort} ${effortPoints}</span></td>","   </tr>","</table>"].join(""),dependencies:["ui.template.assignments.effortsOnly.effortsList"]};return a.register(b)}),define("tau/ui/extensions/effort/extension.effort.editable",["tau/components/extensions/component.extension.base","tau/ui/templates/assignmentsList/ui.template.assignments.effortsOnly","tau/ui/behaviour/common/ui.behaviour.editableText"],function(a,b){return a.extend({category:"edit",normalizeEffort:function(a){return Math.abs(Math.round(parseFloat(a)*100)/100)||0},"bus afterRender+beforeChangeProperty":function(a){var b=a.afterRender.data.element;this.fire("markElementToBeUpdated",{element:b})},"bus propertyChanged":function(a){this.fire("refresh")},"bus refresh+afterRender":function(a){var b=a.afterRender.data.element;this.fire("updateElement",{element:b})},hasEffortIterator:function(a){return a.role.hasEffort},"bus permissionsReady+dataBind+afterRender":function(a){var c=this,d=a.permissionsReady.data,e=a.dataBind.data;if(d.editable){var f=_(e.roleEfforts).chain().select(c.hasEffortIterator).size().value();d.editMode="disabled",f&&(d.editMode=f===1&&c.config.entitiesCount==0?"inline":"roleEfforts");var g=a.afterRender.data.element,h=g.find(".entity-effort");if(d.editMode==="inline")h.editableText({mask:/^\d*\.?\d*$/,restoreText:!0,onSave:function(a){var b=c.normalizeEffort(a),d=_(e.roleEfforts).detect(c.hasEffortIterator),f={typeName:"roleEffort",id:d.id,$set:{effort:b}};c.bus.fire("save",f)},onEditStart:function(){c._$additionalInfo=h.find(".entity-effort-info").detach()},onEditEnd:function(){c._$additionalInfo.appendTo(h)}});else if(d.editMode==="roleEfforts"){var i={components:[{type:"assignmentsList",template:b}],context:c.config.context},j={target:h,componentsConfig:i};c.fire("initBubble",j)}}}})}),define("tau/ui/templates/property.effort/ui.template.property.effort",["tau/core/templates-factory","tau/ui/templates/property.effort/ui.template.property.effort.content"],function(a){var b={name:"ui.template.property.effort",markup:['<div class="tau-property">{{tmpl($item.data) "ui.template.property.effort.content"}}</div>'],dependencies:["ui.template.property.effort.content"]};return a.register(b)}),define("tau/components/component.property.effort",["tau/components/component.creator","tau/models/model.property.effort","tau/models/model.property.effort.editable","tau/components/extensions/bubble/extensions.bubble.creator","tau/components/extensions/component.creator.extension","tau/ui/extensions/effort/extension.effort.editable","tau/ui/extensions/ui.extension.tooltip","tau/ui/templates/property.effort/ui.template.property.effort"],function(a,b,c,d,e,f,g,h){return{create:function(i){var j={extensions:[b,c,f,d,e,g],template:h};return a.create(j,i)}}}),define("tau/components/component.property.endDate",["tau/components/component.property.date"],function(a,b){return{create:function(b){return b=b||{},b.propertyName="endDate",a.create(b)}}}),define("tau/ui/templates/property/ui.template.property.endDate.list",["tau/core/templates-factory"],function(a){var b={name:"property-endDate-list",markup:['<span><span class="tau-extension-tooltip" title="Completion date: ${text}">',"${text}","</span>","</span>"].join("")};return a.register(b)}),define("tau/components/component.property.endDate.list",["tau/components/component.property.date","tau/ui/extensions/ui.extension.tooltip","tau/ui/templates/property/ui.template.property.endDate.list"],function(a,b,c){return{create:function(d){return d=d||{},d.propertyName="endDate",d.template=c,d.extensions=[b],a.create(d)}}}),define("tau/models/model.property.date.validation.project",["Underscore","tau/core/model-base","tau/utils/utils.jsonSchema","tau/utils/utils.date"],function(_,a,b,c){var d=a.extend({category:"edit",name:"Model date validation","bus afterInit":function(){this.schema=b.Schema.create({type:"string",optional:!0,empty:!0,pre:["trim"],post:function(a){if(this.wasError()==0){var b=c.parse(a),d=c.parse(this.schema.additionalProperties.max),e=c.parse(this.schema.additionalProperties.min);b==null?new this.Error("Date","Incorrect date format"):b<new Date("01/01/1900")?new this.Error("Date","Date must be greater then 1-Jan-1900"):d&&b>d?new this.Error("Date","Start Date should be earlier than End Date"):e&&b<e?new this.Error("Date","End Date should be later than Start Date"):a=c.format.date.short(b)}return a},additionalProperties:{dateFormat:c.getFormatData().date.short,max:null,min:null}});var a=this.config.store,d=this.config.context.entity,e=this.config.bus,f=this,g=function(a){var b=a[0].data;this.config.propertyName=="startDate"&&(this.schema.additionalProperties.max=c.parse(b.endDate)),this.config.propertyName=="endDate"&&(this.schema.additionalProperties.min=c.parse(b.startDate))};a.get("project",{id:d.id,fields:["startDate","endDate"]}).done({success:_.bind(g,this)}),this.config.propertyName=="startDate"?a.on({eventName:"afterSave",type:"project",listener:this,filter:{id:d.id},hasChanges:["endDate"]},function(a){var b=c.parse(a.data.changes.endDate);f.schema.additionalProperties.max=b}):this.config.propertyName=="endDate"&&a.on({eventName:"afterSave",type:"project",listener:this,filter:{id:d.id},hasChanges:["startDate"]},function(a){var b=c.parse(a.data.changes.startDate);f.schema.additionalProperties.min=b})},"bus afterRender":function(a){this.element=a.data.element},"bus validateDate":function(a){var b=this.schema.validate(a.data.value||"");a.data.value=b.instance},"bus validate":function(a){var b=this.element.find(".property");b.dateEditor("resetValidationErrors");var c=a.data,d=c.cmd.$set[this.config.propertyName];if(!c.validation||c.validation.isError()!=1)c.validation=this.schema.validate(d),c.cmd.$set[this.config.propertyName]=c.validation.instance||null},"bus resetValidationErrors":function(){var a=this.element.find(".property");a.dateEditor("resetValidationErrors")},"bus afterValidate":function(a){var b=a.data.validation;this.element.find(".property").dateEditor("setValue",b.instance)},"bus validationFailed":function(a){var b=this.element.find(".property");b.dateEditor("setValidationErrors",a.data.validation.errors[0].description)}});return d}),define("tau/components/component.property.endDate.project",["tau/components/component.property.date","tau/models/model.property.date.validation.project"],function(a,b){return{create:function(c){return c=c||{},c.propertyName="endDate",c.validationExtension=b,a.create(c)}}}),define("tau/models/model.property.entityState",["tau/core/model-base","Underscore"],function(a,_){var b=function(a){this.model=a};b.prototype={done:function(a){var b=a[0].data.entityState;this.model.fire("dataBind",b)}};var c=a.extend({onInit:function(){var a=this,c=new b(this),d=this.config.context,e=d.entity.entityType.name,f=d.entity.id,g=[{entityState:["id","name","isFinal","isCommentRequired",{nextStates:["id"]}]}],h=function(b){var c=b.data.changes,d=b.data.cmd.config.fields;b.data.cmd.config.fields=_.union(d,g),a.fire("beforeChanges",c),a.fire("beforeChangeProperty")},i=function(b){a.fire("applyChanges",b.data.changes),a.fire("propertyChanged")};a.store.unbind(a),a.store.on({eventName:"beforeSave",type:e,hasChanges:["entityState"],listener:this},h),a.store.on({eventName:"afterSave",type:e,hasChanges:["entityState"],listener:this},i),this.store.get(e,{id:f,fields:g},{success:c.setEntity,scope:c}).done({success:c.done,scope:c})}});return c}),define("tau/models/model.property.entityState.editable",["tau/core/model.editable.base"],function(a){return a.extend({name:"Entity state editable","bus dataBind":function(){this.fire("permissionsReady",{editable:!0})}})}),define("tau/components/extensions/entityState/extension.entityState.editable",["tau/components/extensions/component.extension.base"],function(a){return a.extend({category:"edit","bus prepareChanges":function(a){this.bus.fire("markElementToBeUpdated",{element:this.element})},"bus applyChanges":function(a){var b=this;this.bus.on("afterRender",function(a){a.removeListener(),b.bus.fire("updateElement",{element:b.element})}),this.bus.fire("refresh")},"bus ownerChanged":function(){this.fire("refresh")},"bus beforeChangeOwner":function(){this.fire("markElementToBeUpdated",{element:this.element})},"bus permissionsReady+afterRender+dataBind":function(a){var b=this,c=this.element=a.afterRender.data.element,d=a.permissionsReady.data,e=a.dataBind.data;if(e.nextStates.length>0&&d.editable){var f={components:[{type:"entityStateList",data:e}],context:b.config.context},g={target:c,componentsConfig:f,alignTo:c.find(".attr-name")};this.fire("initBubble",g)}this.bus.on("edit",function(){this.fire("toggleBubble")},this)}})}),define("tau/components/component.property.entityState",["tau/components/component.creator","tau/models/model.property.entityState","tau/models/model.property.entityState.editable","tau/components/extensions/bubble/extensions.bubble.creator","tau/components/extensions/property/extension.property.refresher","tau/components/extensions/component.creator.extension","tau/ui/templates/common/ui.template.attributeValue","tau/components/extensions/entityState/extension.entityState.editable"],function(a,b,c,d,e,f,g,h){return{create:function(i){var j={ModelType:b,template:g,extensions:[c,d,e,f,h]};return a.create(j,i)}}}),define("tau/models/finder/model.feature.search",["Underscore","tau/models/finder/model.assignable.search"],function(_,a){return a.extend({init:function(a){this._super(a),this.properties.state.filter=function(a){return a?a.dataItem?a.dataItem.entityType.id===9:!0:!0}},getType:function(){return"feature"}})}),define("tau/components/extensions/impedimentDate/extensions.model.impedimentDate.daysPassedCalculator",["Underscore","tau/configurator","tau/components/extensions/component.extension.base"],function(_,a,b){function d(a,b){if(_.isDate(a)&&_.isDate(b)){var d=a.getTime(),e=b.getTime(),f=Math.abs(d-e);return Math.round(f/c)}return null}var c=864e5,e=b.extend({"bus extendData":function(b){var c=b.data.dataToBind||{},e=b.data.date;c.daysPassed=d(a.getCurrentDate(),e)}});return e}),define("tau/components/extensions/impedimentDate/extension.ui.impedimentDate.daysPassed",["jQuery","tau/components/extensions/component.extension.base"],function($,a){return a.extend({extractDataFromEvent:function(a,b){return(a[b]||{}).data||{}},"bus afterRender+dataBind":function(a){var b=this.extractDataFromEvent(a,"dataBind"),c=$(this.extractDataFromEvent(a,"afterRender").element),d=$(['<span class="ui-days-passed">(<span class="days-count">',b.daysPassed,"</span> days passed)</span>"].join(""));c.find(".property").parent().append(d)}})}),define("tau/components/component.property.impedimentDate",["Underscore","tau/components/component.property.createDate","tau/components/extensions/impedimentDate/extensions.model.impedimentDate.daysPassedCalculator","tau/components/extensions/impedimentDate/extension.ui.impedimentDate.daysPassed"],function(_,a,b,c){return{create:function(d){return d=d||{},d.extensions=_.concat([d.extensions,b,c]),a.create(d)}}}),define("tau/components/component.property.isActive",["tau/components/component.property.bool"],function(a){return{create:function(b){return b=b||{},b.propertyName="isActive",a.create(b)}}}),define("tau/components/component.property.isPrivate",["Underscore","tau/components/component.property.bool"],function(_,a){return{create:function(b){return b=_.clone(b||{}),b.propertyName="isPrivate",b.editable=!0,a.create(b)}}}),define("tau/components/component.property.isProduct",["tau/components/component.property.bool"],function(a){return{create:function(b){return b=b||{},b.propertyName="isProduct",a.create(b)}}}),define("tau/components/extensions/property/extension.property.editable",["Underscore","tau/components/extensions/component.extension.base"],function(_,a){return a.extend({category:"edit","bus permissionsReady+afterRender+dataBind":function(a){var b=this,c=this.element=a.afterRender.data.element;a.afterRender.data.element.find(".external-view").click(function(a){a.stopPropagation()});var d=this.permissions=a.permissionsReady.data;if(d.editable===!1)return;c.find(".tau-property").addClass("tau-property_editable_true");var e=a.dataBind.data;(!e.text||!e.text.length)&&c.find(".property").addClass("editable");if(d.editable){var f={components:[_.extend({data:e,v2:!0},this.config.editorComponentConfig)],context:b.config.context},g={target:c.find(".property-text"),componentsConfig:f,alignTo:c.find(this.config.alignElementSelector||"")};this.fire("initBubble",g)}},"bus edit":function(){this.permissions.editable&&this.fire("toggleBubble")}})}),define("tau/components/component.property",["Underscore","tau/components/component.creator","tau/core/termProcessor","tau/models/model.property","tau/models/model.property.editable","tau/components/extensions/property/extension.property.editable","tau/components/extensions/property/extension.property.refresher","tau/components/extensions/bubble/extensions.bubble.creator","tau/components/extensions/component.creator.extension","tau/ui/templates/property/ui.template.property"],function(_,a,b,c,d,e,f,g,h,i){return{create:function(j){var k=new b(j.context.getTerms()),l=j.editorComponentConfig||{};l.resetDisabled=j.resetDisabled,l.showEmptyDataMessage&&(l.emptyDataMessage="No "+k.getTerms(j.propertyName).names.toLowerCase()+" found"),l.showClearValue&&(j.clearValueLabel="reset "+k.getTerms(j.propertyName).name.toLowerCase()),j.placeholderText=j.placeholderText||"click to edit";var m={ModelType:j.Model||c,template:j.template||i,extensions:_.concat([j.extensions,g,h,d,f,e])};return a.create(m,j)}}}),define("tau/components/component.property.assignable",["tau/components/component.property","tau/models/model.property.assignable","tau/models/finder/model.assignable.search","tau/models/finder/model.relation.editor"],function(a,b,c,d){return{create:function(e){return e.propertyName="assignable",e.refField="$ref:assignable[id]",e.showUrl=!0,e.Model=b,e.alignElementSelector=".property-text",e.showEmptyDataMessage=!0,e.editorComponentConfig={type:"finder",resetDisabled:!0,propertyName:"assignable",searchModel:c,additionalExtensions:[d],listType:"userStory",maxHeight:400},a.create(e)}}}),define("tau/components/component.property.build",["tau/components/component.property","tau/models/finder/model.build.search","tau/models/finder/model.relation.editor"],function(a,b,c){return{create:function(d){return d.propertyName="build",d.showUrl=!0,d.alignElementSelector=".property-text",d.showEmptyDataMessage=!0,d.editorComponentConfig={type:"finder",propertyName:"build",fields:["id","name",{project:["id","abbreviation"]}],searchModel:b,additionalExtensions:[c],listType:"build",maxHeight:400},a.create(d)}}}),define("tau/components/component.property.build.testPlanRun",["tau/components/component.property","tau/components/extensions/property/extension.property.build.refresher","tau/models/finder/model.build.testPlanRun.search","tau/models/finder/model.relation.editor"],function(a,b,c,d){return{create:function(e){return e.propertyName="build",e.showUrl=!0,e.alignElementSelector=".property-text",e.showEmptyDataMessage=!0,e.extensions=[b],e.editorComponentConfig={type:"finder",propertyName:"build",fields:["id","name",{project:["id","abbreviation"]}],searchModel:c,additionalExtensions:[d],listType:"build",maxHeight:400},a.create(e)}}}),define("tau/components/component.property.company",["tau/components/component.property"],function(a){return{create:function(b){return b.propertyName="company",b.showUrl=!1,b.alignElementSelector=".property-text",b.editorComponentConfig={type:"state-list",listType:"company",maxHeight:200,filter:!1,expandable:!1,showEmptyDataMessage:!1,clearValueLabel:"no company",defaultValueLabel:"current",fullModeLabel:"show old",emptyDataMessage:"No company found"},a.create(b)}}}),define("tau/components/component.property.feature",["tau/components/component.property","tau/models/finder/model.feature.search","tau/models/finder/model.relation.editor"],function(a,b,c){return{create:function(d){return d.propertyName="feature",d.showUrl=!0,d.alignElementSelector=".property-text",d.showEmptyDataMessage=!0,d.editorComponentConfig={type:"finder",propertyName:"feature",searchModel:b,additionalExtensions:[c],maxHeight:400,filter:!0,expandable:!0,showEmptyDataMessage:!0},a.create(d)}}}),define("tau/components/component.property.iteration",["tau/components/component.property"],function(a){return{create:function(b){return b.propertyName="iteration",b.showUrl=!0,b.alignElementSelector=".property-text",b.editorComponentConfig={type:"state-list",listType:"iteration",maxHeight:200,filter:!0,expandable:!0,showEmptyDataMessage:!0,clearValueLabel:"backlog",defaultValueLabel:"current",fullModeLabel:"show old"},a.create(b)}}}),define("tau/components/component.property.lastRunDate",["tau/components/component.property.date"],function(a){return{create:function(b){return b=_.clone(b||{}),b.propertyName="lastRunDate",b.editable=!1,b.format="datetime",a.create(b)}}}),define("tau/ui/templates/property/ui.template.property.lastRunDate.list",["tau/core/templates-factory"],function(a){var b={name:"property-lastRunDate-list",markup:'<div><div class="property tau-extension-tooltip" title="Last run date ${text}"><div class="property-text">${text}</div></div>'};return a.register(b)}),define("tau/components/component.property.lastRunDate.list",["tau/components/component.property.date","tau/ui/extensions/ui.extension.tooltip","tau/ui/templates/property/ui.template.property.lastRunDate.list"],function(a,b,c){return{create:function(d){return d=_.clone(d||{}),d.propertyName="lastRunDate",d.editable=!1,d.format="datetime",d.extensions=[b],d.template=c,a.create(d)}}}),define("tau/ui/templates/property/ui.template.property.status",["tau/core/templates-factory"],function(a){var b={name:"property-last-status",markup:["<div>",'   <div class="ui-status {{if value === true}}ui-status_type_passed green{{/if}}{{if value === false}}ui-status_type_failed red{{/if}}{{if value === null}}ui-status_type_na grey{{/if}}">',"   {{if value === true}}","       Passed","   {{/if}}","   {{if value === false}}","       Failed","   {{/if}}","</div>","</div>"].join("")};return a.register(b)}),define("tau/components/component.property.lastStatus",["tau/components/component.property.bool","tau/ui/templates/property/ui.template.property.status"],function(a,b){return{create:function(c){return c=c||{},c.propertyName="lastStatus",c.template=b,a.create(c)}}}),define("tau/models/model.property.user",["tau/models/model.property","tau/configurator"],function(a,b){var c=function(a){this.model=a};c.prototype={onGetEntity:function(a){this.entity=a.data},done:function(){var a=this.entity[this.model.config.propertyName],c={id:a.id,avatar:[b.getApplicationPath(),"/Avatar.ashx?UserId=",a.id,"&size=32"].join(""),name:[a.firstName,a.lastName].join(" ")};this.model.fire("dataBind",c)}};var d=a.extend({onInit:function(){var a=this;this.listenOfPropertyChanged();var b=a.config.context,d=b.entity.entityType.name,e=b.entity.id,f=new c(a),g={},h=this.config.propertyName;g[h]=["firstName","lastName"],a.store.get(d,{id:e,fields:["id",g]},{scope:f,success:f.onGetEntity}).done({scope:f,success:f.done})}});return d}),define("tau/ui/templates/common/ui.template.owner",["tau/core/templates-factory","tau/ui/templates/common/ui.template.userName"],function(a){return a.register({name:"owner",markup:["<table class='owner' userId='${id}'><tr>","<td class='owner-avatar-container'>","{{if avatar}}<img src='${avatar}' class='owner-avatar'/>{{/if}}","</td>","<td class='owner-info'>","   {{tmpl 'user-name'}}","</td>","</tr></table>"].join(""),dependencies:["user-name"]})}),define("tau/components/extensions/user/extension.user.editable",["tau/components/extensions/component.extension.base"],function(a){return a.extend({category:"edit","bus permissionsReady+afterRender+dataBind":function(a){var b=this,c=this.element=a.afterRender.data.element,d=a.permissionsReady.data,e=a.dataBind.data;if(d.editable){var f={type:"userList",data:e,extensions:this.getExtensions(),v2:!0};this.extendEditorConfig(f);var g={components:[f],context:b.config.context},h={target:c,componentsConfig:g,alignTo:c.find(".user-name")};this.fire("initBubble",h)}this.bus.on("edit",function(){this.fire("toggleBubble")},this)},extendEditorConfig:function(){},getExtensions:function(){return[]}})}),define("tau/models/assignment/model.property.owner.editable",["Underscore","tau/models/assignment/model.property.assignUser.editable.base"],function(_,a){return a.extend({assignTo:function(a){var b={type:this.config.context.entity.entityType.name,$set:{owner:{id:a}},$include:[{owner:["id","firstName","lastName"]}]};this.fire("save",b)}})}),define("tau/models/userList/extension.model.user.Excluder",["Underscore","tau/core/model-base"],function(_,a){return a.extend({"bus registerStoreRequest":function(){var a=this.config.context.entity||{entityType:{}},b=["id","firstName","lastName"],c={};c[this.getUserPropertyName()]=b,this.fire("get",{type:a.entityType.name,query:{id:a.id,fields:[c]},callback:{scope:this,success:this.onEntityRetrieved}})},getUserPropertyName:function(){throw"Use Excluder getUserPropertyName should be ovveriden"},onEntityRetrieved:function(a){var b=a.data||{},c=[b[this.getUserPropertyName()]];this.fire("excludedUserReady",c)}})}),define("tau/models/userList/extension.model.owner.Excluder",["Underscore","tau/models/userList/extension.model.user.Excluder"],function(_,a){return a.extend({getUserPropertyName:function(){return"owner"}})}),define("tau/components/extensions/user/extension.owner.editable",["tau/components/extensions/user/extension.user.editable","tau/models/assignment/model.property.owner.editable","tau/models/userList/extension.model.owner.Excluder"],function(a,b,c){return a.extend({category:"edit",extendEditorConfig:function(a){a.UserExcluder=c},getExtensions:function(){return[b]}})}),define("tau/components/component.property.owner",["tau/components/component.creator","tau/models/model.property.user","tau/models/model.property.editable","tau/components/extensions/property/extension.property.refresher","tau/components/extensions/bubble/extensions.bubble.creator","tau/components/extensions/component.creator.extension","tau/ui/templates/common/ui.template.owner","tau/components/extensions/user/extension.owner.editable"],function(a,b,c,d,e,f,g,h){return{create:function(i){var j={ModelType:b,template:g,extensions:[c,e,f,d,h]};return i=i||{},i.propertyName="owner",a.create(j,i)}}}),define("tau/models/extensions/team/extension.model.allUserRetriever",["Underscore","tau/core/model-base"],function(_,a){return a.extend({"bus registerStoreRequest":function(){var a=this;this.store.get("user",{fields:["id","firstName","lastName","isActive","deleteDate",{role:["id","name"]}]}).done({success:function(b){var c=b[0].data,d={},e=[];c=_.filter(c,function(a){return a.deleteDate===null}),_.forEach(c,function(a){var b=a.role;b&&(d[b.id]=b),e.push({user:a,role:b})}),a.fire("projectMembersReady",e),a.fire("projectRolesReady",_.values(d))}})}})}),define("tau/components/extensions/user/extension.owner.project.editable",["tau/components/extensions/user/extension.user.editable","tau/models/assignment/model.property.owner.editable","tau/models/userList/extension.model.owner.Excluder","tau/models/extensions/team/extension.model.allUserRetriever"],function(a,b,c,d){return a.extend({category:"edit",extendEditorConfig:function(a){a.UserExcluder=c,a.Retriever=d},getExtensions:function(){return[b]}})}),define("tau/components/component.property.owner.project",["tau/components/component.creator","tau/models/model.property.user","tau/models/model.property.editable","tau/components/extensions/property/extension.property.refresher","tau/components/extensions/bubble/extensions.bubble.creator","tau/components/extensions/component.creator.extension","tau/ui/templates/common/ui.template.user","tau/components/extensions/user/extension.owner.project.editable"],function(a,b,c,d,e,f,g,h){return{create:function(i){var j={ModelType:b,template:g,extensions:[c,e,f,d,h]};return i=i||{},i.propertyName="owner",a.create(j,i)}}}),define("tau/components/component.property.owner.request",["tau/components/component.property.owner.project"],function(a){return a}),define("tau/components/component.property.priority",["tau/components/component.property"],function(a){return{create:function(b){return b.propertyName="priority",b.editorType="",b.alignElementSelector=".property-text",b.showEmptyDataMessage=!0,b.editorComponentConfig={type:"state-list",listType:"priority",maxHeight:200},a.create(b)}}}),define("tau/models/model.property.process",["Underscore","tau/models/model.property"],function(_,a){return a.extend({getPropertyData:function(a){this.store.get(this.getEntityTypeName(),{id:this.getEntityId(),fields:["id",{process:["id","name",{practices:["id","name"]}]}]}).done({success:this.onEntityRetrieved,scope:this})},processProperty:function(a){var b={id:a[this.valueField],text:a[this.displayField],subtext:_.pluck(a.practices,"name").join(", ")};this.fire("dataBind",b)}})}),define("tau/components/extensions/property/extension.property.process.refresher",["Underscore","tau/core/model-base","tau/utils/utils.redirect"],function(_,a,b){return a.extend({category:"refresher","bus afterInit":function(){var a=this.store,c=this.config.context.entity,d=this.config.bus;this.store.unbind(this),a.on({eventName:"afterSave",type:"project",listener:this,filter:{id:c.id},hasChanges:["process"]},function(){d.getGlobalBus().fire("processChanged",{project:c,entity:c}),(new b).reload()})}})}),define("tau/components/component.property.process",["Underscore","tau/components/component.creator","tau/core/termProcessor","tau/models/model.property.process","tau/models/model.property.editable","tau/components/extensions/property/extension.property.process.refresher","tau/components/extensions/property/extension.property.editable","tau/components/extensions/property/extension.property.refresher","tau/components/extensions/bubble/extensions.bubble.creator","tau/components/extensions/component.creator.extension","tau/ui/templates/property/ui.template.property"],function(_,a,b,c,d,e,f,g,h,i,j){return{create:function(g){g.propertyName="process",g.showUrl=!1,g.alignElementSelector=".property-text",g.editorComponentConfig={type:"state-list",listType:"process",maxHeight:200,filter:!1,expandable:!1,showEmptyDataMessage:!1,showClearValue:!1,allowToReset:!1,defaultValueLabel:"current",fullModeLabel:"show old",confirmation:"It is strongly recommended to NOT change Process for Projects in progress as some data will be lost (esp. the Custom fields data). Are you sure you want to change process?"},g.extensions=[e];var k=new b(g.context.getTerms()),l=g.editorComponentConfig;l.resetDisabled=g.resetDisabled,l.showEmptyDataMessage&&(l.emptyDataMessage="No "+k.getTerms(g.propertyName).names.toLowerCase()+" found"),l.showClearValue&&(g.clearValueLabel="reset "+k.getTerms(g.propertyName).name.toLowerCase());var m={ModelType:g.Model||c,template:j,extensions:_.concat([g.extensions,h,i,d,f])};return a.create(m,g)}}}),define("tau/components/component.property.program",["tau/components/component.property"],function(a){return{create:function(b){return b.propertyName="program",b.showUrl=!1,b.alignElementSelector=".property-text",b.editorComponentConfig={type:"state-list",listType:"program",expandable:!0,filter:!0,showEmptyDataMessage:!0,defaultValueLabel:"current",fullModeLabel:"show old",clearValueLabel:"reset"},a.create(b)}}}),define("tau/components/component.property.project",["tau/components/component.property"],function(a){return{create:function(b){return b.propertyName="project",b.showUrl=!0,b.editable=!1,b.alignElementSelector=".property-text",a.create(b)}}}),define("tau/components/component.property.release",["tau/components/component.property"],function(a){return{create:function(b){return b.propertyName="release",b.showUrl=!0,b.alignElementSelector=".property-text",b.editorComponentConfig={type:"state-list",listType:"release",expandable:!0,filter:!0,showEmptyDataMessage:!0,defaultValueLabel:"current",fullModeLabel:"show old",clearValueLabel:"backlog"},a.create(b)}}}),define("tau/components/component.property.requestSource",["tau/components/component.property","tau/models/model.property.simple"],function(a,b){return{create:function(c){return c.propertyName="sourceType",c.Model=b,c.showUrl=!1,c.alignElementSelector=".property-text",c.editorComponentConfig={type:"state-list",listType:"static",values:["None","Email","Phone","Internal","External"],expandable:!0,filter:!1,showEmptyDataMessage:!1},a.create(c)}}}),define("tau/components/component.property.requestType",["tau/components/component.property"],function(a){return{create:function(b){return b.propertyName="requestType",b.editorType="",b.alignElementSelector=".property-text",b.showEmptyDataMessage=!0,b.editorComponentConfig={type:"state-list",listType:"requestType",maxHeight:200,showReset:!1},a.create(b)}}}),define("tau/models/assignment/model.property.responsible.editable",["Underscore","tau/models/assignment/model.property.assignUser.editable.base"],function(_,a){return a.extend({assignTo:function(a){var b={type:this.config.context.entity.entityType.name,$set:{responsible:{id:a}},$include:[{responsible:["id","firstName","lastName"]}]};this.fire("save",b)}})}),define("tau/models/userList/extension.model.responsible.Excluder",["Underscore","tau/models/userList/extension.model.user.Excluder"],function(_,a){return a.extend({getUserPropertyName:function(){return"responsible"}})}),define("tau/components/extensions/user/extension.responsible.editable",["tau/components/extensions/user/extension.user.editable","tau/models/assignment/model.property.responsible.editable","tau/models/userList/extension.model.responsible.Excluder"],function(a,b,c){return a.extend({category:"edit",extendEditorConfig:function(a){a.UserExcluder=c},getExtensions:function(){return[b]}})}),define("tau/components/component.property.responsible",["tau/components/component.creator","tau/models/model.property.user","tau/models/model.property.editable","tau/components/extensions/property/extension.property.refresher","tau/components/extensions/bubble/extensions.bubble.creator","tau/components/extensions/component.creator.extension","tau/ui/templates/common/ui.template.user","tau/components/extensions/user/extension.responsible.editable"],function(a,b,c,d,e,f,g,h){return{create:function(i){var j={ModelType:b,template:g,extensions:[c,e,f,d,h]};return i=i||{},i.propertyName="responsible",a.create(j,i)}}}),define("tau/models/model.property.severity",["Underscore","tau/models/model.property","tau/models/dataprocessor/model.processor.importance"],function(_,a,b){return a.extend({getPropertyFields:function(){var a=this._super(),b=_.union(a,["importance"]);return b},buildRequest:function(a){var b=this._super(a);return b=b.get("severity",{fields:["id","importance"]}),b},onProcessProperty:function(a){var b=this._super(a);return b.kind=this.importanceProcessor.getKind(a.importance),b},onEntityRetrieved:function(a){var c=this.property=a[0].data[this.propertyName]||{},d=_(a[1].data).pluck("importance"),e=_.min(d),f=_.max(d);this.importanceProcessor=new b(e,f),this.processProperty(c)}})}),define("tau/ui/templates/property/ui.template.property.severity",["tau/core/templates-factory"],function(a){var b={name:"property-severity",markup:["<div>",'   <span class="property  tau-list-severity-${kind}">','       <span class="property-text">${text}</span>',"   </span>","</div>"].join(""),dependencies:[]};return a.register(b)}),define("tau/components/component.property.severity",["tau/components/component.property","tau/models/model.property.severity","tau/ui/templates/property/ui.template.property.severity"],function(a,b,c){return{create:function(d){return d.propertyName="severity",d.editorType="",d.showUrl=!1,d.alignElementSelector=".property-text",d.showEmptyDataMessage=!0,d.editorComponentConfig={type:"state-list",listType:"severity",maxHeight:200},d.Model=b,d.template=c,a.create(d)}}}),define("tau/components/component.property.startDate",["tau/components/component.property.date"],function(a){return{create:function(b){return b=b||{},b.propertyName="startDate",a.create(b)}}}),define("tau/components/component.property.startDate.project",["tau/components/component.property.date","tau/models/model.property.date.validation.project"],function(a,b){return{create:function(c){return c=c||{},c.propertyName="startDate",c.validationExtension=b,a.create(c)}}}),define("tau/ui/templates/property/ui.template.property.status.testCaseRun",["tau/core/templates-factory"],function(a){var b={name:"property-last-status-testcaserun",markup:["<div>",'   <div class="ui-status {{if value === true}}ui-status_type_passed green{{/if}}{{if value === false}}ui-status_type_failed red{{/if}}{{if value === null}}ui-status_type_na grey{{/if}}">',"   {{if value === true}}","       Passed","   {{/if}}","   {{if value === false}}","       Failed","   {{/if}}","   {{if value === null}}","       Skipped","   {{/if}}","</div>","</div>"].join("")};return a.register(b)}),define("tau/components/component.property.status.testCaseRun",["tau/components/component.property.bool","tau/ui/templates/property/ui.template.property.status.testCaseRun"],function(a,b){return{create:function(c){return c=c||{},c.propertyName="passed",c.template=b,a.create(c)}}}),define("tau/components/component.property.testPlan",["tau/components/component.property"],function(a){return{create:function(b){return b=b||{},b.propertyName="testPlan",b.showUrl=!0,b.editable=!1,a.create(b)}}}),define("tau/components/component.property.text",["Underscore","tau/components/component.creator","tau/models/model.property.text","tau/models/model.property.text.editable","tau/models/model.property.text.validation","tau/components/extensions/property/extension.property.text.editable","tau/components/extensions/property/extension.property.refresher","tau/ui/templates/property/ui.template.property"],function(_,a,b,c,d,e,f,g){return{create:function(h){var i={ModelType:b,extensions:_.concat([h.extensions,c,d,e,f]),template:g};return a.create(i,h)}}}),define("tau/components/component.property.lastFailureComment",["Underscore","tau/components/component.property.text"],function(_,a){return{create:function(b){return b=_.clone(b||{}),b.propertyName="lastFailureComment",b.defaultText="N/A",a.create(b)}}}),define("tau/models/model.property.time",["tau/models/model.property.simple"],function(a){return a.extend({floatToString:function(a){return a.toFixed(2).replace(".00","")},_getEffortPoints:function(){return this.config.context.getEffortPoint().shortName},onEntityRetrieved:function(a){var b=a[0].data[this.propertyName],c={text:this.floatToString(b),point:this._getEffortPoints()};this.fire("dataBind",c)}})}),define("tau/models/model.property.time.editable",["tau/core/model.editable.base"],function(a){return a.extend({"bus dataBind":function(){this.bus.fire("permissionsReady",{editable:!0})}})}),define("tau/components/extensions/property/extension.property.time.editable",["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/behaviour/date/ui.behaviour.dateEditor"],function(_,$,a){return a.extend({category:"edit",normalizeEffort:function(a){return Math.abs(Math.round(parseFloat(a)*100)/100)||0},"bus permissionsReady+afterRender+dataBind":function(a){var b=this,c=this.permissions=a.permissionsReady.data;c.editable&&(b.$el=a.afterRender.data.element,b.$el.find(".property-text").editableText({mask:/^\d*\.?\d*$/,restoreText:!0,onSave:function(c){var d=a.dataBind.data,e=b.normalizeEffort(d.text),f=b.normalizeEffort(c);if(e===f)return this.restoreInitialText(),!1;var g={};g[b.config.propertyName]=f;var h={$include:["id"],id:b.config.context.entity.id,$set:g};b.bus.fire("save",h)},onEditStart:function(){this.$element.data("points",this.$element.find("span").detach())},onEditEnd:function(){this.$element.append(this.$element.data("points"))}}))},showEditor:function(){this.$el.find(".property-text").editableText("activate")},"bus edit":function(){this.permissions.editable&&this.showEditor()},onClickHandler:function(){},removeHandlers:function(){},removeWidget:function(){this.$widget&&this.$widget.editableText("destroy")},destroy:function(){this.removeHandlers(),this.removeWidget(),this._super.apply(this,arguments)}})}),define("tau/ui/templates/property/ui.template.property.time",["tau/core/templates-factory"],function(a){var b={name:"property-time",markup:["<div>",'   <div class="property"><div class="property-text">${text}<span class="point">${point}</span></div></div>',"</div>"].join("")};return a.register(b)}),define("tau/components/component.property.time",["Underscore","tau/components/component.creator","tau/models/model.property.time","tau/models/model.property.time.editable","tau/components/extensions/property/extension.property.time.editable","tau/components/extensions/property/extension.property.refresher","tau/ui/templates/property/ui.template.property.time","tau/ui/behaviour/common/ui.behaviour.editableText"],function(_,a,b,c,d,e,f){return{create:function(g){var h={ModelType:b,template:f,extensions:[d,c,e]};return a.create(h,g)}}}),define("tau/components/component.property.initialEstimate",["Underscore","tau/components/component.property.time"],function(_,a){return{create:function(b){return b=_.clone(b||{}),b.propertyName="initialEstimate",a.create(b)}}}),define("tau/models/finder/model.userStory.search",["Underscore","tau/models/finder/model.assignable.search"],function(_,a){return a.extend({init:function(a){this._super(a);var b=function(a,b,c){a[b]={name:{$contains:c}}};this.properties.feature={label:this.terms.resolve("feature"),autoCompletable:!1,statement:b},this.properties.state.filter=function(a){return a?a.dataItem?a.dataItem.entityType.id===4:!0:!0}},getType:function(){return"userStory"}})}),define("tau/components/component.property.userStory",["tau/components/component.property","tau/models/finder/model.userStory.search","tau/models/finder/model.relation.editor"],function(a,b,c){return{create:function(d){return d.propertyName="userStory",d.showUrl=!0,d.alignElementSelector=".property-text",d.showEmptyDataMessage=!0,d.editorComponentConfig={type:"finder",propertyName:"userStory",searchModel:b,additionalExtensions:[c],listType:"userStory",maxHeight:400},a.create(d)}}}),define("tau/components/component.property.velocity",["tau/components/component.property.time"],function(a){return{create:function(b){return b.propertyName="velocity",a.create(b)}}}),define("tau/ui/templates/quick.add/ui.template.quick.add",["tau/core/templates-factory"],function(a){var b={name:"quick.add",markup:['<div class="ui-quick-add">','<span class="ui-link ui-quick-add-link">${label}</span>',"</div>"],dependencies:[]};return a.register(b)}),define("tau/ui/templates/quick.add/ui.template.quick.add.content",["tau/core/templates-factory"],function(a){var b={name:"quick.add.content",markup:['<div class="ui-quick-add-stats"></div>','<div class="ui-quick-add-content">','<div class="quick-add-lines">',"</div>","</div>"],dependencies:[]};return a.register(b)}),define("tau/ui/templates/quick.add/ui.template.quick.add.line",["tau/core/templates-factory"],function(a){var b={name:"quick.add.line",markup:['<div class="ui-quick-add-line">',' <div class="quick-add-input ui-quick-add-new-item"></div>',"</div>"],dependencies:[]};return a.register(b)}),define("tau/components/component.quick.add",["jQuery","Underscore","tau/configurator","tau/components/component.creator","tau/ui/templates/quick.add/ui.template.quick.add","tau/components/extensions/component.extension.base","tau/ui/templates/quick.add/ui.template.quick.add.content","tau/ui/templates/quick.add/ui.template.quick.add.line","tau/ui/behaviour/common/ui.behaviour.tauBubble","tau/ui/behaviour/common/ui.behaviour.editableText"],function($,_,a,b,c,d,e,f){return{create:function(g){var h=d.extend({"bus beforeInit":function(){var a=this;a.fire("dataBind",{label:this.config.label,entityType:this.config.entityType})},_attachKeyBoardHandling:function(){var b=this,c={handleKeyDown:function(){}};a.getKeyBoardManager().pushHandler(c)},_getEntityId:function(){return this.config.context.entity.id},_getEntityType:function(){return this.config.context.entity.entityType.name},"bus close":function(){var b=this;a.getKeyBoardManager().popHandler();if(!b.itemsAdded)return;b.config.store.evictProperties(b._getEntityId(),this._getEntityType(),b.config.evictProperties),setTimeout(function(){b.bus.fire(b.config.entityType+".items.added",b.config.context)},1)},_appendAddLine:function(a){var b=this,c=$(".ui-quick-add-new-item",a);if(c.length>0){setTimeout(function(){c.click()},1);return}var d=f.get().bind({},{entityType:b.config.entityType});a.find(".quick-add-lines").append(d);var e=$(".quick-add-input",d);e.editableText({restoreText:!0,resetOnBlur:!0,onSave:function(c){if(!c||!c.trim())return;c.length>255&&(c=c.substring(0,254));var f=b.config.store;if(e.hasClass("ui-quick-add-saving"))return;e.removeClass("ui-quick-add-new-item").addClass("ui-quick-add-saving");var g={name:c};g[b.config.property]={id:b._getEntityId()};var h={};h[b.config.property]=["id"];var i=["id","name",h],j={$set:g,fields:i};d.data("item-id")&&(j.id=d.data("item-id"));var k=function(c){j.$set.project={id:c.id},f.save(b.config.entityType,j,{success:function(c){d.data("item-id",c.data.id),d.addClass("ui-quick-add-item-saved"),e.removeClass("ui-quick-add-saving").text(c.data.name),b.itemsAdded=!0;var f=$(".ui-quick-add-item-saved",a).length+" item(s) saved";$(".ui-quick-add-stats",a).text(f)}}).done()};$(".ui-quick-add-stats",a).text("saving..."),f.get(b._getEntityType(),{id:b._getEntityId(),fields:[{project:["id"]}]},{success:function(a){var b=a.data.project;k(b)}}).done(),b._appendAddLine(a)}}),setTimeout(function(){e.click()},1)},"bus displayQuickAdd":function(a){var b=a.data,c=this;c.itemsAdded=!1;var d=b.popup.find(".tau-bubble__inner");if(d.find(".ui-quick-add-content").length==0){var f=e.get().bind({},{});d.append(f)}b.api.adjustPosition(),d.find(".quick-add-lines").html(""),d.find(".ui-quick-add-stats").text(""),d.find(".button-box").click(function(){b.api.hide()}),this._appendAddLine(d),c._attachKeyBoardHandling()},"bus afterRender":function(a){var b=this,c=a.data.element,d=$(".ui-quick-add-link",c).tauBubble();d.bind("show",function(a,c){b.bus.fire("displayQuickAdd",c)}),d.bind("close",function(a,c){c.event&&(c.event.preventDefault(),c.event.stopPropagation()),b.bus.fire("close",c)})}}),i={extensions:[h],template:c};return b.create(i,g)}}}),define("tau/components/extensions/redirect/extension.redirect",["tau/components/extensions/component.extension.base","tau/utils/utils.redirect"],function(a,b){return a.extend({_redirect:function(a){this.redirect.redirect(a)},"bus afterInit":function(a){this.redirect=new b(a.data.config.context),this._redirect(a.data.config.to)},"bus redirect":function(a){this._redirect(a.data.to)}})}),define("tau/components/component.redirect",["tau/components/component.creator","tau/models/model.menu.actions","tau/components/extensions/redirect/extension.redirect","tau/ui/templates/menu/ui.template.menu.actions"],function(a,b,c,d){return{create:function(b){var d={extensions:[c]};return a.create(d,b)}}}),define("tau/models/model.release.progressBar",["Underscore","tau/core/model-base"],function(_,a){var b=a.extend({name:"Iteration Progress Bar",afterSaveRoleEffort:function(a){var b=this;b.fire("roleEffortChanged")},onDataUpdate:function(a){var b=this;b.fire("refresh")},floatToString:function(a){return a.toFixed(2).replace(".00","")},_getEffortPoints:function(){return this.config.context.getEffortPoint().shortName},onInit:function(){var a=this,b=this.config.context,c=b.entity.entityType.name,d=b.entity.id,e=["bugs-effortToDo-sum","bugs-effortCompleted-sum","userStories-effortToDo-sum","userStories-effortCompleted-sum",{features:["effortToDo","effortCompleted","userStories-count"]}];a.store.unbind(a),a.store.on({eventName:"afterSave",type:"roleEffort",listener:a,filter:{assignable:{id:d}}},_.bind(a.afterSaveRoleEffort,a)),a.store.on({eventName:"afterSave",type:c,listener:a,filter:{id:d},hasChanges:[e.join("|")]},_.bind(a.onDataUpdate,a)),a.store.get(c,{id:d,fields:e},{success:a.onEntityRetrieved,scope:a}).done({success:a.done,scope:a})},onEntityRetrieved:function(a){var b=a.data,c=function(a){return a["userStories-count"]==0},d=a.data.features,e=_.filter(d,c),f=_.pluck(e,"effortToDo"),g=_.pluck(e,"effortCompleted"),h=function(a){return _.reduce(a,function(a,b){return a+b},0)},i=b["bugs-effortToDo-sum"]+b["userStories-effortToDo-sum"]+h(f),j=b["bugs-effortCompleted-sum"]+b["userStories-effortCompleted-sum"]+h(g),k=Math.round(100*parseFloat(i)+100*parseFloat(j))/100,l=Math.round(1e4*(j/k))/100;l=isNaN(l)?0:l,l=l>100?100:l,this.effortToDo=i,this.effortCompleted=j,this.percentCompleted=l},done:function(){this.fire("dataBind",{effortToDo:this.floatToString(this.effortToDo),effortCompleted:this.floatToString(this.effortCompleted),percentCompleted:this.percentCompleted,totalEffort:this.floatToString(this.effortToDo+this.effortCompleted),point:this._getEffortPoints()})}});return b}),define("tau/components/component.release.assignedEffort",["tau/components/component.creator","tau/models/model.release.progressBar","tau/ui/templates/label/ui.template.assignmentEffort.label"],function(a,b,c){return{create:function(d){var e={extensions:[b],template:c};return a.create(e,d)}}}),define("tau/components/component.release.progressBar",["tau/components/component.creator","tau/models/model.release.progressBar","tau/ui/templates/progressBar/ui.template.iteration.progressBar"],function(a,b,c){return{create:function(d){var e={extensions:[b],template:c};return a.create(e,d)}}}),define("tau/models/model.releaseNotes",["Underscore","tau/core/model-base","tau/utils/utils.date"],function(_,a,b){var c=a.extend({onInit:function(){var a=this.config.context.entity,c=this.config.store,d=this;c.unbind(this),c.on({eventName:"afterSave",type:"assignable",listener:this},function(a){var b=["entityState","name"],c=["feature","userstory","bug"];_.include(c,a.data.cmd.type.toLowerCase())&&_.intersect(_.keys(a.data.changes),b).length&&d.bus.fire("refresh")});var e=["feature","userstory","bug"];_.forEach(e,function(a){c.on({eventName:"afterRemove",type:a,listener:d},function(a){d.bus.fire("refresh")})}),c.get("release",{id:a.id,fields:["id","name","startDate","endDate"]}).find("bugs",{fields:["id","name"],$query:{"Release.Id":a.id,"EntityState.isFinal":1},$orderBy:"id"}).find("features",{fields:["id","name",{release:["id"]},{entityState:["id","isFinal"]},{userStories:["id","name",{release:["id"]},{entityState:["id","isFinal"]}]}],$query:{"Release.Id":a.id},$orderBy:"id"}).find("userStories",{fields:["id","name",{release:["id"]},{feature:["id"]},{entityState:["id","isFinal"]}],$query:{"Release.Id":a.id,"EntityState.isFinal":1},$orderBy:"id"}).done({success:function(a){var c=a[2].data,e=[],f=_.pluck(c,"id");_.forEach(c,function(a){var b=[],c=[];_.forEach(a.userStories,function(d){d.release&&d.release.id===a.release.id&&(d.entityState.isFinal==1?b.push(d):c.push(d))}),b.length>0?(a.userStories=b,e.push(a)):a.entityState.isFinal==1&&c.length>0&&c.length==a.userStories.length&&(a.userStories=[],e.push(a))});var g=a[0].data;g.endDate=b.format.date.short(g.endDate);var h=a[1].data,i=a[3].data;i=_.filter(i,function(a){return!a.feature||!a.feature.id||_.indexOf(f,a.feature.id)==-1}),d.bus.fire("dataBind",{item:g,features:e,bugs:h,userStories:i})}})}});return c}),define("tau/ui/templates/releaseNotes/ui.template.releaseNotes",["tau/core/templates-factory"],function(a){var b={name:"releaseNotes",markup:['<div class="tau-releaseNotes">','<div class="tau-releaseNotes__inner">','<span class="tau-releaseNotes__title">${item.name} / ${item.endDate}</span><br />',"----------------------------------------------------------<br /><br />","{{if features.length || userStories.length}}",'<div class="tau-releaseNotes__subtitle">Added features</div><br /><br />',"{{each features}}",'<div class="tau-releaseNotes__feature" data-name="${name}">',"- ${name}<br />","{{each userStories}}",'<div class="tau-releaseNotes__userstory" data-name="${name}">',"&nbsp;&nbsp;&nbsp;&nbsp;- ${name}<br />","</div>","{{/each}}","</div>","{{/each}}","{{each userStories}}",'<div class="tau-releaseNotes__userstory tau-releaseNotes__userstory_separate_true" data-name="${name}">',"- ${name}<br />","</div>","{{/each}}","<br /><br />","{{/if}}","{{if bugs.length}}",'<div class="tau-releaseNotes__subtitle">Fixed Bugs</div><br /><br />',"{{each bugs}}",'<div class="tau-releaseNotes__bug" data-name="${name}">',"#${id} ${name}<br />","</div>","{{/each}}","{{/if}}","</div>","</div>"],dependencies:[]};return a.register(b)}),define("tau/components/component.releaseNotes",["tau/components/component.creator","tau/models/model.releaseNotes","tau/ui/templates/releaseNotes/ui.template.releaseNotes"],function(a,b,c){return{create:function(d){var e={extensions:[b],template:c};return a.create(e,d)}}}),define("tau/components/extensions/requestsList/extension.requestList.actions.detach",["jQuery","tau/configurator","tau/components/extensions/component.extension.base"],function($,a,b){return b.extend({category:"edit","bus dataBind+afterRender":function(a){var b=this,c=a.dataBind.data,d=a.afterRender.data.element;if(c.items&&c.items.length){var e=$('<td class="action"></td>'),f=$('<span class="action-detach ui-link">Detach</span>');f.click($.proxy(b.onActionDetach,b)),e.append(f);var g=d.find("table.base-info-list tbody > tr");g.append(e)}},onActionDetach:function(b){var c=this,d=c.config.context.entity.id,e=$(b.target).parent().parent().data().tmplItem.data.id,f=a.getActionsService();f.detachRequest({generalId:d,requestId:e,success:$.proxy(c.onRequestDetachedSuccess,c)})},onRequestDetachedSuccess:function(){var a=this;a.fire("evictProperty");var b=a.config.context.entity.id;a.fire("requestIsDetachedFromEntity",{entity:{id:b}})}})}),define("tau/components/component.requestList",["tau/components/component.list.baseInfo","tau/components/extensions/requestsList/extension.requestList.refresher","tau/components/extensions/requestsList/extension.requestList.actions.detach"],function(a,b,c){return{create:function(d){var e={extensions:[b,c]};return d.typeName="request",d.propertyName="requests",a.create(d,e)}}}),define("tau/models/propertyLists/model.defaultList",["Underscore","tau/models/propertyLists/model.propertyList.base"],function(_,a){return a.extend({onInit:function(){var a=this,b=this.config,c=this.config.context.entity;this.propertyType=b.listType,a.store.get(b.listType,{fields:["id","name"]}).get(c.entityType.name,{id:c.id,fields:["id",b.listType]}).done({success:_.bind(a.onDataRetrieved,a)})},onDataRetrieved:function(a){var b=a[0].data,c=a[1].data,d=this.config.data,e=!!(this.config.showReset&&d&&d.id),f={states:_.reject(b,function(a){return d&&a.id===d.id}),completed:!0,nullableValue:e};this.fire("dataBind",f)}})}),define("tau/models/propertyLists/model.staticList",["Underscore","tau/models/propertyLists/model.propertyList.base"],function(_,a){return a.extend({onInit:function(){var a=this,b=this.config,c=this.config.context.entity;a.store.get(c.entityType.name,{id:c.id,fields:["id",b.data.name]}).done({success:_.bind(a.onDataRetrieved,a)})},onDataRetrieved:function(a){var b=a[0].data,c=b[this.config.data.name],d=this.config.values;_.forEach(d,function(a,b){_.isObject(a)==0&&(a={id:a,name:a},d[b]=a)});var e=!!this.config.showReset&&!!c,f={states:_.reject(d,function(a){return c&&a.id==c}),completed:!0,nullableValue:e};this.fire("dataBind",f)},"bus updateState":function(a){var b={},c=null;a.data&&a.data.id&&(c=a.data.id),b[this.config.data.name]=c,this.fire("save",b)}})}),define("tau/models/propertyLists/model.prioritiesList",["Underscore","tau/models/propertyLists/model.propertyList.base"],function(_,a){return a.extend({name:"priority-list-model",propertyType:"priority",onInit:function(){var a=this,b=function(b){var c=b[0].data;a.assignable=c,a.store.get(a.propertyType,a.createGetPrioritiesCommand()).done({success:a.onDataRetrieved.tauCreateDelegate(a)})};this.getAssignable(b)},getRequiredFields:function(){return[{entityType:["id"]}]},createGetPrioritiesCommand:function(){return{fields:["id","name","importance",{entityType:["id"]}]}},processData:function(a){var b=this.getCurrentEntityId(),c=this.assignable.entityType.id,d=[];_.each(a,function(a){a.id!==b&&a.entityType.id===c&&d.push({id:a.id,name:a.name,importance:a.importance||0})}),d.sort(function(a,b){return a.importance-b.importance}),this.fire("dataBind",{states:d,completed:!0,nullableValue:!1})}})}),define("tau/models/propertyLists/model.severityList",["Underscore","tau/models/propertyLists/model.propertyList.base"],function(_,a){return a.extend({name:"severity-list",propertyType:"severity",onInit:function(){var a=this;a.store.get(a.propertyType,{fields:["id","name","importance"]}).done({success:a.onDataRetrieved.tauCreateDelegate(a)})},getRequiredFields:function(){return["id","name","importance"]},createGetStateForAssignableCommand:function(){return{fields:["id","name","importance"]}},processData:function(a){var b=this.getCurrentEntityId(),c=[];_.each(a,function(a){a.id!==b&&c.push({id:a.id,name:a.name,importance:a.importance})}),c.sort(function(a,b){return a.importance-b.importance}),this.fire("dataBind",{states:c,completed:!0,nullableValue:!1})}})}),define("tau/models/propertyLists/model.releaseList",["Underscore","tau/models/propertyLists/model.propertyList.base","tau/configurator","tau/store/types","tau/utils/utils.date"],function(_,a,b,c,d){return a.extend({name:"release-list",propertyType:"release",onInit:function(){var a=this.config.context.entity,b=this;this.store.get(a.entityType.name,{id:a.id,fields:["id",{project:["id",{releases:["id","name","startDate","endDate"]}]}]}).done({success:function(a){var c=a[0].data.project;b.processData.call(b,c)}})},"bus beforeSave":function(a){var b=a.data.cmd,c=b.$set,d=b.fields=b.fields||[];this.entityContainIteration()&&d.push({iteration:["id","name"]})},entityContainIteration:function(){var a=c.findByKeyword(this.config.context.entity.entityType.name);return a.refs.hasOwnProperty("iteration")},getRequiredFields:function(){return[{entityState:["id"]}]},convertReleaseToDto:function(a){var b=this.isCurrentRelease(a),c=a.name+(b?" (current)":"");return{id:a.id,name:c,description:"From "+d.format.date.short(a.startDate)+" to "+d.format.date.short(a.endDate)}},isOldRelease:function(a){var c=b.getCurrentDate();return a.endDate<c},isCurrentRelease:function(a){var c=b.getCurrentDate();return a.startDate<=c&&c<=a.endDate},isCurrentOrFeatureRelease:function(a){return!this.isOldRelease(a)},selectOldReleases:function(){return _.select(this.projectReleaseList,this.isOldRelease,this)},selectCurrentAndFeatureReleases:function(a){return _.select(this.projectReleaseList,this.isCurrentOrFeatureRelease,this)},getCurrentRelease:function(){return _.detect(this.projectReleaseList,this.isCurrentRelease,this)},initProjectReleaseList:function(a){var b=this.getCurrentEntityId(),c=_.select(a.releases,function(a){return a.id!=b});_.each(c,function(a){a.startDate=d.parse(a.startDate),a.endDate=d.parse(a.endDate)}),this.projectReleaseList=c},processData:function(a){this.initProjectReleaseList(a);var b=this.getCurrentEntityId(),c=this.config,d=c.mode||"short",e=this.selectCurrentAndFeatureReleases(),f=[],g=this.selectOldReleases(),h=g.length==0;d=="short"&&e.length>0?f=e:(d=="full",f=f.concat(g,e),h=!0),f=_.map(f,this.convertReleaseToDto,this);var i={nullableValue:b!==null&&this.config.context.entity.entityType.name.toLowerCase()!=="iteration"&&this.propertyIsNotEmpty(),states:f,completed:h},j=this.getCurrentRelease();j&&(i.defaultValue=j.id),this.fire("dataBind",i)}})}),define("tau/models/propertyLists/model.iterationList",["Underscore","tau/models/propertyLists/model.propertyList.base","tau/configurator","tau/utils/utils.date"],function(_,a,b,c){return a.extend({name:"iteration-list",propertyType:"iteration",onInit:function(){var a=this.config.context.entity,b=this;this.store.get(a.entityType.name,{id:a.id,fields:["id",{project:["id",{iterations:["id","name","startDate","endDate",{release:["id","name"]}]}]}]}).done({success:function(a){var c=a[0].data.project;b.processData.call(b,c)}})},getRequiredFields:function(){return[{entityState:["id"]}]},"bus beforeSave":function(a){var b=a.data.cmd.fields=a.data.cmd.fields||[];b.push({release:["id","name"]})},processData:function(a){var d=this.config,e=this.getCurrentEntityId(),f=[],g=d.mode||"short",h=null,i=null,j=b.getCurrentDate(),k=function(a){a.id!==e&&f.push(a)};g==="full"?h=k:h=function(a){var b=c.parse(a.startDate),d=c.parse(a.endDate);a.id!==e&&(b>=j||d>=j)&&f.push(a)},_.each(a.iterations,h),f.length==0&&(d.mode=="full",h=k,_.each(a.iterations,h));var l=[],m={};_(f).each(function(a){var b=m[a.release.id]||{id:a.release.id,name:a.release.name};b.items=b.items||[];var d=c.parse(a.startDate),e=c.parse(a.endDate),f=j>=d&&j<=e,g=a.name+(f?" (current)":"");f&&(i=a),b.items.push({id:a.id,name:g,description:"From "+c.format.date.short(d)+" to "+c.format.date.short(e)}),m[b.id]||(l.push(b),m[b.id]=b)});var n=a.iterations.length,o=e?n-1:n,p={nullableValue:e!==null&&this.propertyIsNotEmpty(),states:l,completed:0===f.length-o};i&&(p.defaultValue=i.id),this.fire("dataBind",p)}})}),define("tau/models/propertyLists/model.userStoryList",["Underscore","tau/models/propertyLists/model.propertyList.base"],function(_,a){return a.extend({name:"userStory-list",propertyType:"userStory",onInit:function(){var a=this,b=function(){a.store.get("userStory",{fields:["id","name",{project:["id","name"]}]}).done({success:a.onDataRetrieved.tauCreateDelegate(a)})};b()},processData:function(a){var b=this.getCurrentEntityId(),c={};_.each(a,function(a){if(a.id==b)return;c.hasOwnProperty(a.project.id)||(c[a.project.id]=a.project,c[a.project.id].items=[]),c[a.project.id].items.push(a)});var d={states:this.sortProjects(_.values(c)),completed:!0,nullableValue:b!==null&&this.config.context.entity.entityType.name.toLowerCase()!="task"&&this.propertyIsNotEmpty()};this.fire("dataBind",d)}})}),define("tau/models/propertyLists/model.featureList",["Underscore","tau/models/propertyLists/model.propertyList.base"],function(_,a){return a.extend({name:"release-list",propertyType:"feature",onInit:function(){var a=this;a.store.get("project",{fields:["id","name",{process:["id"]},{features:["id","name"]}]},{success:a.onProjectRetrieved.tauCreateDelegate(a)}).get("feature",{fields:["id","name",{project:["id"]}]},{success:a.onFeatureRetrieved.tauCreateDelegate(a)}).get("process",{fields:["id",{practices:["name"]}]},{success:a.onProcessesRetrieved.tauCreateDelegate(a)}).done({success:a.onDataRetrieved.tauCreateDelegate(a)})},onFeatureRetrieved:function(a){this.featureList=a.data},onProjectRetrieved:function(a){this.projectList=a.data},onProcessesRetrieved:function(a){this.processList=a.data},getFeaturesForProject:function(a){var b=this.getCurrentEntityId(),c=function(a){a.id!==b&&this.push(a)},d=[];return this.projectHasRequirementsPractice(a)&&_.each(a.features,c,d),d},onDataRetrieved:function(){this.processData(this.projectList,this.processList)},projectHasRequirementsPractice:function(a){var b=a.process.id,c=_.detect(this.processList,function(a){return a.id==b}),d=_.detect(c.practices,function(a){return a.name=="Requirements"});return!_.isEmpty(d)},processData:function(a,b){var c=[];this.processList=b,_.each(this.sortProjects(a),function(a){var b=this.getFeaturesForProject(a);_.isEmpty(b)||c.push({id:a.id,name:a.name,items:b})},this);var d={states:c,completed:!0,nullableValue:this.getCurrentEntityId()!==null&&this.propertyIsNotEmpty()};this.fire("dataBind",d)}})}),define("tau/components/component.state-list",["tau/components/component.creator","tau/models/propertyLists/model.defaultList","tau/models/propertyLists/model.staticList","tau/models/propertyLists/model.entityStateList","tau/models/propertyLists/model.prioritiesList","tau/models/propertyLists/model.severityList","tau/models/propertyLists/model.releaseList","tau/models/propertyLists/model.iterationList","tau/models/propertyLists/model.userStoryList","tau/models/propertyLists/model.featureList","tau/ui/extensions/stateList/ui.extension.stateList.editable","tau/ui/templates/state/ui.template.state-list"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m={entityState:d,priority:e,severity:f,release:g,iteration:h,userStory:i,feature:j,"static":c,hasModel:function(a){return this.hasOwnProperty(a)},getByName:function(a){if(this.hasModel(a))return this[a];throw"Model for property list  [mode."+a+"] was not found."}};return{create:function(c){var d=b;m.hasModel(c.listType)&&(d=m.getByName(c.listType));var e=[d,k],f={extensions:e,template:l};return a.create(f,c)}}}),define("tau/components/component.steps",["tau/components/component.field.richText"],function(a){return{create:function(b){return b=b||{},b.fieldName="steps",a.create(b)}}}),define("tau/components/component.success",["tau/components/component.field.richText"],function(a){return{create:function(b){return b=b||{},b.fieldName="success",a.create(b)}}}),define("tau/ui/extensions/tabs/ui.extension.tabs.state.base",["Underscore","tau/components/extensions/component.extension.base"],function(_,a){var b=a.extend({getRestoredState:function(){return null},"bus beforeInit":function(a){var b=a.data.config,c=b.children,d=_.filter(c[0].children,function(a){return a.type=="container"});this.initialLabel=null;var e=this;_.forEach(d,function(a,b){a.selected==1&&(e.initialLabel=a.label)});var f=c.slice(1),g=this.getRestoredState(),h=!1;if(g){var i=0;_.forEach(d,function(a,b){a.label==g?(h=!0,f[b].visible=!0,a.selected=!0):(f[b].visible=!1,a.selected=!1)})}h==0&&_.forEach(d,function(a,b){a.label==e.initialLabel&&(f[b].visible=!0,a.selected=!0)})},"bus childrenRendered":function(a){var b=[];_.forEach(a.data.config.tabs,function(a,c){b[c]={label:a.label}}),this.fire("headerRendered",{component:a.data.children[0],switchConfig:b});var c=a.data.children.slice(1);this.fire("tabsRendered",{components:c})},"bus headerRendered":function(a){var b=a.data.component,c=_.bind(function(a){_.bind(this.onHeaderSwitched,this)(a)},this);b.on("switched",c),this.header=b},"bus headerRendered+tabsRendered":function(a){var b=a.headerRendered.data.switchConfig,c=a.tabsRendered.data.components,d={};_.forEach(c,function(a,c){d[b[c].label]=a}),this.tabs=d},onHeaderSwitched:function(a){var b=a.data.label;this.tabs[b]&&this.selectTabExternal(b)},selectTabInternal:function(a){var a=a||this.initialLabel;this.tabs[a]&&(_.forEach(this.tabs,function(a,b){a.fire("hide")}),this.tabs[a].fire("show"),this.header.fire("switched.after",{label:a}))},selectTabExternal:function(a){this.selectTabInternal(a)}});return b}),define("tau/ui/extensions/tabs/ui.extension.tabs.state.routing",["Underscore","tau/ui/extensions/tabs/ui.extension.tabs.state.base","tau/configurator"],function(_,a,b){var c=a.extend({init:function(a){this._super(a),this.name="tab",this.routing=b.getRouting(),this.history=b.getHistory()},getRestoredState:function(){return this.routing.getStateParameter(this.name)},selectTabExternal:function(a){this.routing.setStateParameter("tab",a,!0),this.history.updateCurrent({url:this.routing.getUrl().source})},"bus initialize":function(a){var b=this;this.routing.on("stateChanged",function(a){a.data.name==b.name&&b.selectTabInternal(a.data.value)})}});return c}),define("tau/ui/extensions/layout/ui.extension.layout.tabsHeader",["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/extensions/extension.javascript"],function(_,$,a){return a.extend({"bus beforeInit":function(a){var b=a.data.config;this.options={childrenContainerSelector:b.childrenContainerSelector||"ul.entity-tabs"}},getTabItemCssName:function(a){return"tab-item"+((a.position||{}).right?" tab-item-right-part":"")},"bus afterRender+childrenRendered":function(a){var b=this;b.element=a.afterRender.data.element;var c=a.childrenRendered.data;b.children=c.children;var d=c.childrenEvtArgs,e=c.config.children;_(d).each(function(a,c){var d=a.element,f=e[c],g=f.selected,h=b.getTabItemCssName(f);b._add(d,g,h,f.label)}),this.findContainerElement().bind("click",$.proxy(this._onContainerClick,this))},findContainerElement:function(){return this.element.find(this.options.childrenContainerSelector)},getTabsCount:function(){return this.findContainerElement().children(".tab-item").length},_add:function(a,b,c,d){var e=b?"selected":"";c=c||"tab-item",d=d||a.text(),$('<li class="'+c+'"></li>').data({label:d,index:this.getTabsCount()}).addClass(e).append(a).appendTo(this.findContainerElement())},_onContainerClick:function(a){var b=$(a.target),c=".tab-item",d=b.is(c)?b:b.parents(c);if(d.is(c)){var e=d.data().index,f={label:d.data("label"),index:e,tabHeader:this.children[e]};this.fire("switched",f)}},"bus switched.after":function(a){var b=a.data.index,c=this.findContainerElement(),d=c.children(".tab-item");d.filter(".selected").removeClass("selected"),_.isUndefined(b)&&a.data.label?d.each(function(){var b=$(this);b.data("label")==a.data.label&&b.addClass("selected")}):d.eq(b).addClass("selected")},destroy:function(){this._super(),delete this.element,delete this.children}})}),define("tau/ui/templates/container/ui.template.container.tabsHeader",["tau/core/templates-factory"],function(a){var b={name:"container.tabsHeader",markup:['<div class="box table">','   <ul class="entity-tabs">',"   </ul>","</div>"],dependencies:[]};return a.register(b)}),define("tau/components/component.tabsHeader",["Underscore","tau/core/component-base","tau/views/view.container","tau/components/extensions/component.creator.extension","tau/ui/extensions/layout/ui.extension.layout.tabsHeader","tau/ui/templates/container/ui.template.container.tabsHeader"],function(_,a,b,c,d,e){return{create:function(f){return f=f||{},_.defaults(f,{template:e}),(new a(f)).attach(b).attach(c).attach(d).bus}}}),define("tau/views/view.tabs",["Underscore","tau/views/view.container","tau/components/component.tabsHeader"],function(_,a){var b=a.extend({"bus beforeInit":function(a){var b=this;b._selectedIndex=-1,this.additionalHeaderTabIndexList={};var c=a.data.config;this.tabsHeader={type:"tabsHeader",children:[]},this.panels=[],_.each(c.tabs,this.addTabInfo,this),_.each(c.additionalHeaders||[],this.addAdditionalActionToTab,this),c.children=[this.tabsHeader].concat(this.panels)},addTabInfo:function(a,b){var c=a.selected===!0,d={type:"container",name:a.label+" tab container",selected:c,children:a.header||[],label:a.label};this.tabsHeader.children.push(d);var e={type:"container",visible:c,children:a.items||[]};this.panels.push(e),c&&(this._selectedIndex=b)},addAdditionalActionToTab:function(a){var b=a||{};b.position={right:!0};var c=this.tabsHeader;c.children.push(b),this.additionalHeaderTabIndexList[c.children.length]=!0}});return b}),define("tau/components/component.tabs",["tau/components/component.creator","tau/views/view.tabs","tau/components/extensions/component.creator.extension","tau/ui/extensions/tabs/ui.extension.tabs.state.routing","tau/ui/extensions/layout/ui.extension.layout","tau/ui/templates/container/ui.template.container.list"],function(a,b,c,d,e,f){return{create:function(g){var h={extensions:[c,d,e],ViewType:b,template:f};return a.create(h,g)}}}),define("tau/models/model.tags",["Underscore","tau/core/model-base"],function(_,a){var b=function(a){this.model=a};b.prototype={_parseTags:function(a){a=a||"";var b=_.isArray(a)?a:a.split(","),c={},d=_(b).map(function(a){return a.trim()});return _.select(d,function(a){var b=a.toLowerCase();return c.hasOwnProperty(b)?!1:(c[b]=!0,!0)})},onGetTags:function(a){var b=a.data;this.id=b.id,this.tags=this._parseTags(b.tags)},done:function(a){var b={tags:this.tags};this.model.bus.fire("dataBind",b)}};var c=a.extend({onInit:function(){var a=new b(this),c=this.config.context,d=c.entity.entityType.name,e=c.entity.id,f={id:e,fields:["id","tags"]};this.store.get(d,f,{scope:a,success:a.onGetTags}).done({success:a.done,scope:a})},"bus evict":function(){var a=this.config.context.general;this.store.evictProperties(a.id,a.entityType.name,["tags"])}});return c}),define("tau/models/model.tags.editable",["tau/core/model.editable.base"],function(a){var b=a.extend({category:"edit",name:"Editable tags","bus dataBind":function(){this.bus.fire("permissionsReady",{editable:!0,deletable:!0})}});return b}),define("tau/ui/extensions/tags/ui.extension.tags.duplicateBug",["tau/components/extensions/component.extension.base"],function(a){return a.extend({"bus dataBind+afterRender":function(a){var b=a.dataBind.data.tags,c=a.afterRender.data.element.find("li.ui-tags__tag span");for(var d=0;d<b.length;d++){var e="duplicateOf#".toLocaleLowerCase(),f=b[d];if(f.toLowerCase().indexOf(e)===0){var g="#bug/"+f.substring(e.length);c.eq(d).text("").append($('<a class="ui-tags__duplicateBug" href="'+g+'">'+f+"</a>"))}}}})}),define("tau/ui/behaviour/tags/ui.behaviour.tagsEditor",["Underscore","jQuery","tau/core/tau"],function(_,$,a){$.widget("ui.tagsEditor",{options:{selector:".ui-tags__tag",onSave:function(){}},_create:function(){this.init()},init:function(){this.$list=$(this.element);var a=this.options.selector,b=this.$list.find(a);b.append('<a href="#" class="ui-tags__control-delete" title="Delete tag">Delete tag</a>');var c=this;this.$list.delegate(".ui-tags__control-delete","click",function(b){b.preventDefault(),$(this).parents(a).eq(0).remove(),c.options.onSave(c.getTags())}),this.$widget=$('<li class="ui-tags__editor"><a href="#" title="Add tag" class="ui-tags__editor__control-show"><i>Add tag</i></a></li>'),this.$widget.find("a:first").click(_.bind(this.showEditor,this)),this.$list.append(this.$widget)},_processAddTag:function(a){var b=this,c=b.parseTags(a.find(":text").val());b.hideEditor();var d=b.getTags();d=d.concat(c),b.options.onSave(d)},showEditor:function(b){b.preventDefault();if(!this._editorIsVisible){if(!this.$editor){var c=$(a.concat('<span class="ui-tags__editor__inner">','    <input type="text" maxlength="50" class="ui-tags__editor__input" />','    <div class="button-group" style="position: relative; top: 5px; left: 3px;"><a title="Add" class="button small ui-tags__editor__button-submit" >Add&nbsp;</a>','    <a title="Cancel" class="button small ui-tags__editor__button-cancel"  >x</a></div>',"</span>")),d=this;c.find(".ui-tags__editor__button-submit").click(function(){d._processAddTag(c)}),c.find(".ui-tags__editor__button-cancel").click(function(){d.hideEditor()}),c.find(":text").keydown(_.bind(this.mapKeys,this)),c.appendTo(this.$widget),this.$editor=c}this.resetEditor(),this.$widget.toggleClass("ui-tags__editor-active",!0),this._editorIsVisible=!0,this.$editor.find(":text").focus()}},hideEditor:function(){this.$editor&&this._editorIsVisible&&(this.$editor.find(":text").blur(),this.$widget.toggleClass("ui-tags__editor-active",!1),this._editorIsVisible=!1,this.resetEditor())},resetEditor:function(){this.$editor&&this.$editor.find(":text").val("")},mapKeys:function(a){switch(a.which){case 13:a.preventDefault();var b=this;this._processAddTag(this.$editor);break;case 27:a.preventDefault(),this.hideEditor(a)}},getTagsElements:function(){var a=[],b=this;return this.$list.find(this.options.selector).each(function(c,d){a.push({value:b.getTagText($(d)),$el:$(d)})}),a},getTagText:function(a){return $.trim(a.find("span:first").text())},getTags:function(){var a=[],b=this;return this.$list.find(this.options.selector).each(function(c,d){var e=$(d);a.push(b.getTagText(e))}),a},addTags:function(a){},parseTags:function(a){a=a||"";var b=a.split(",");return b=_(b).map(function(a){return a.trim()}),b=_.uniq(b),b=_.compact(b),b}})}),define("tau/components/extensions/tags/extension.tags.editable",["Underscore","tau/components/extensions/component.extension.base","tau/ui/behaviour/tags/ui.behaviour.tagsEditor"],function(_,a){return a.extend({category:"edit",_afterSaveHandler:function(a){this.fire("refresh")},"bus afterSave":function(a){this._afterSaveHandler(a)},"bus beforeSave":function(a){var b=a.data.cmd.$set.tags;b&&(a.data.cmd.fields=a.data.cmd.fields||[],a.data.cmd.fields.push("tags"))},"bus permissionsReady+afterRender":function(a){var b=this,c=a.permissionsReady.data;if(c.editable)var d=a.afterRender.data.element.tagsEditor({validation:{trim:!0},onSave:function(a){b.bus.fire("elementUpdated"),b.bus.fire("save",{tags:a.join(",")}),d.addClass("data-saving")}})}})}),define("tau/ui/templates/tags/ui.template.tag.item",["tau/core/templates-factory"],function(a){var b={name:"tag-item",markup:['<li class="ui-tags__tag" rel="tag">',"   <span>${$item.data}</span>","</li>"],dependencies:[]};return a.register(b)}),define("tau/ui/templates/tags/ui.template.tags",["tau/core/templates-factory","tau/ui/templates/tags/ui.template.tag.item"],function(a){var b={name:"tags",markup:['<ul class="ui-tags">','   {{tmpl(tags) "tag-item"}}',"</ul>"],dependencies:["tag-item"]};return a.register(b)}),define("tau/components/component.tags",["tau/components/component.creator","tau/models/model.tags","tau/models/model.tags.editable","tau/ui/extensions/tags/ui.extension.tags.duplicateBug","tau/ui/extensions/ui.extensions.onMarkAsDuplicate","tau/components/extensions/tags/extension.tags.editable","tau/ui/templates/tags/ui.template.tags"],function(a,b,c,d,e,f,g){return{create:function(h){var i={extensions:[b,c,f,d,e],template:g};return a.create(i,h)}}}),define("tau/models/model.testCaseList",["Underscore","tau/core/model-base","tau/utils/utils.urlBuilder","tau/utils/utils.date","tau/utils/utils.htmlConverter"],function(_,a,b,c,d){function e(a){this.model=a}e.prototype={getAssignableRetrievedCallback:function(){return{scope:this,success:this.onAssignableRetrieved}},onAssignableRetrieved:function(a){var b={labelAdd:this.model.config.labelAdd||"Add",items:[]};this.model.assignable=a.data;var c=_.sortBy(a.data.testCases,function(a){return a.numericPriority}),d=c.length;for(var e=0;e<d;e++)b.items.push(this.convertServerDataModelData(c[e]));this.model.bus&&this.model.bus.fire("dataBind",b)},convertServerDataModelData:function(a){var e=null;a.lastRunDate&&(e=c.format.datetime.short(a.lastRunDate));var f=undefined;a.lastStatus!=undefined&&(f={isPassed:a.lastStatus});var g={__type:"testCase",id:a.id,name:a.name,lastRunDate:e,applicationUrl:"#testcase/"+a.id,externalUrl:b.getViewUrl(a.id),steps:d.fromSourceToHtml(a.steps),success:d.fromSourceToHtml(a.success)};return f&&(g.lastRunStatus=f),g}};var f=a.extend({onInit:function(){var a=this,b=new e(a),c=a.config.context.entity;this.store.get(c.entityType.name,{id:c.id,fields:["id",{testCases:["id","name","lastRunDate","lastStatus","steps","success","numericPriority"]}]},b.getAssignableRetrievedCallback()).done()},"bus evictTestCases":function(){var a=this.config.context.entity;this.store.evictProperties(a.id,a.entityType.name,["testCases","testCases-count"])}});return f}),define("tau/models/model.testCaseList.editable",["tau/core/model.editable.base"],function(a){return a.extend({category:"edit",name:"Editable State","bus dataBind":function(){this.bus.fire("permissionsReady",{editable:!0})}})}),define("tau/components/extensions/testCaseList/extension.testCaseList.edit.addTestCase",["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(_,$,a){return a.extend({"bus afterRender+permissionsReady":function(a){if(a.permissionsReady.data.editable){var b=a.afterRender.data.element;b.find(".tau-add-testCase").click($.proxy(this.addTestCaseClickHandler,this))}},addTestCaseClickHandler:function(){function d(){Ext.WindowMgr.zseed=9999999;var d=new Tp.controls.TestCaseCreateEditorWindow({userStoryId:b,processId:a.getProcessId()});d.show(),d.on("saved",function(){c.fire("testCaseWasAdded",{assignable:{id:b}})})}var a=this.config.context,b=a.assignable.id,c=this;if(!window.processConfigurations){var e=window.progressDialog||{show:function(){},hide:function(){}};e.show("Loading..."),Ext.Ajax.request({url:(new Tp.WebServiceURL("/PageServices/TestCaseListService.asmx/GetProcessConfiguration")).toString(),headers:{"Content-Type":"application/json"},success:function(a){e.hide();var b=$.parseJSON(a.responseText).d;processConfigurations=b,d()},jsonData:{userStoryId:b}})}else d()}})}),define("tau/components/extensions/testCaseList/extension.testCaseList.edit.runner",["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(_,$,a){return a.extend({"bus dataBind":function(a){this.data=a.data},onAfterRender:function(){},"bus afterRender":function(a){this.element=a.data.element,this.onAfterRender()},"bus afterRender+permissionsReady":function(a){if(a.permissionsReady.data.editable){var b=a.afterRender.data.element;b.find(".last-run").removeClass("hidden"),b.find(".buttons").removeClass("hidden"),b.find(".passed").click($.proxy(this.passedClickHandler,this)),b.find(".failed").click($.proxy(this.failedClickHandler,this))}},getTestCaseId:function(a){return $(a.target).parents("tbody").eq(0).tmplItem().data.id},passedClickHandler:function(a){var b=this.getTestCaseId(a);this.setTestCaseStatus(b,!0)},failedClickHandler:function(a){var b=this.getTestCaseId(a);this.setTestCaseStatus(b,!1)},setTestCaseStatus:function(a,b){Ext.Ajax.request({url:(new Tp.WebServiceURL("/PageServices/TestCaseListService.asmx/ChangeRunState")).toString(),headers:{"Content-Type":"application/json"},success:this._onChangeStateComplete.createDelegate(this),failure:this._onChangeStateFailed.createDelegate(this),jsonData:{testCaseID:a,status:b}})},openNextTestCase:function(){var a=this.testCaseId,b=this.data.items;for(var c=0;c<b.length-1;c++)b[c].id===a&&this.fire("expandTestCase",{testCaseId:b[c+1].id});this.onAfterRender=function(){}},_onChangeStateComplete:function(a){this.testCaseId=$.parseJSON(a.responseText).d.TestCaseID,this.onAfterRender=this.openNextTestCase,this.fire("testCaseStateWasChanged")},_onChangeStateFailed:function(a){this.fire("showError",{message:a.get_message()})},destroy:function(){delete this.data,delete this.element}})}),define("tau/components/extensions/testCaseList/extension.testCaseList.refresher",["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(_,$,a){return a.extend({"bus testCaseWasAdded":function(a){this.fire("evictTestCases"),this.fire("refresh")},"bus testCaseStateWasChanged":function(a){this.fire("evictTestCases"),this.fire("refresh")}})}),define("tau/ui/templates/testCaseList/ui.template.testCaseList.testCase",["tau/core/templates-factory","tau/ui/templates/common/ui.template.entityLink"],function(a){var b={name:"test-case-list-test-case",markup:['<tbody class="collapsed">',"   <tr>",'       <td class="toggler"><button class="extra-info expand" type="button"><div>+</div></button></td>','       <td class="testcase-id">','           {{tmpl($data) "entity-link"}}',"       </td>","       <td>${name}</td>","       <td>${lastRunDate}</td>","       <td>","{{if  lastRunStatus }}","   {{if lastRunStatus.isPassed === true}}",'       <span class="passed">Passed</span>',"   {{/if}}","   {{if lastRunStatus.isPassed === false}}",'       <span class="failed">Failed</span>',"   {{/if}}","{{/if}}",'       <td class="buttons hidden">','           <button class="passed green-button" type="button">Pass</button>','           <button class="failed  red-button" type="button">Fail</button>',"       </td>","</td>","   </tr>","   <tr>","       <td></td>",'       <td colspan="5">','           <div class="steps">',"               <h4>Steps</h4>","               <span>{{html steps}}</span>","           </div>",'           <div class="success">',"               <h4>Success</h4>","               <span>{{html success}}</span>","           </div>","       </td>","   </tr>","</tbody>"].join(""),dependencies:["entity-link"]};return a.register(b)}),define("tau/ui/templates/testCaseList/ui.template.testCaseList",["tau/core/templates-factory","tau/ui/tags/ui.tag.term","tau/ui/templates/testCaseList/ui.template.testCaseList.testCase"],function(a,b){var c={name:"test-case-list",options:{contentSelector:".ui-testCaseList-content"},tags:[b],markup:['<div class="ui-testCaseList">','   <div class="button-panel">','       <button class="tau-add-testCase" type="button">${labelAdd} {{term("TestCase") "name"}}</button>',"   </div>",'   <div class="ui-testCaseList-content"{{if items.length === 0}} style="display:none"{{/if}}>','       <table class="ui-testCaseList">',"           <colgroup>",'               <col class="toggler">','               <col class="id">','               <col class="name">','               <col class="last-run-date">','               <col class="last-status">','               <col class="last-run">',"           </colgroup>","           <thead>","               <tr>",'                   <th class="toggler">','                       <button class="extra-info expand" type="button"><div>+</div></button>','                        <button class="extra-info collapse" type="button"><div>-</div></button>',"                   </th>",'                   <th class="identificator">ID</th>',"                   <th>Name</th>","                   <th>Last Run Date</th>","                   <th>Last Status</th>",'                   <th class="last-run">Run</th>',"               </tr>","           </thead>",'           {{tmpl(items) "test-case-list-test-case"}}',"       </table>","   </div>","</div>"].join(""),dependencies:["test-case-list-test-case"]};return a.register(c)}),define("tau/ui/extensions/testCaseList/ui.extension.testCaseList",["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/extensions/extension.javascript"],function(_,$,a){return a.extend({"bus afterRender":function(a){var b=this;b.element=a.data.element,b.element.find("tbody .extra-info").click(function(){b._onButtonClick.call(b,this)}),b.element.find("thead .extra-info.expand").click(function(){b.expandAll()}),b.element.find("thead .extra-info.collapse").click(function(){b.collapseAll()})},"bus expandTestCase":function(a){var b=a.data.testCaseId;this.element.find("tbody.collapsed").each(function(){$(this).tmplItem().data.id==b&&$(this).removeClass("collapsed").find(".extra-info").removeClass("expand").addClass("collapse")})},expandAll:function(){this.element.find("tbody.collapsed").removeClass("collapsed"),this._changeButtonsState("expand","collapse","-")},collapseAll:function(){this.element.find("tbody:not(.collapsed)").addClass("collapsed"),this._changeButtonsState("collapse","expand","+")},_changeButtonsState:function(a,b,c){var d="tbody .extra-info."+a,e=function(){$(this).addClass(b).removeClass(a).children("div").text(c)};this.element.find(d).each(e)},_onButtonClick:function(a){$(a).toggleClass("collapse").toggleClass("expand").parents("tbody").toggleClass("collapsed");var b=$(a).children("div"),c=b.text();c=="+"?c="-":c="+",b.text(c)}})}),define("tau/components/component.testCaseList",["tau/components/component.list.creator","tau/models/model.testCaseList","tau/models/model.testCaseList.editable","tau/components/extensions/testCaseList/extension.testCaseList.edit.addTestCase","tau/components/extensions/testCaseList/extension.testCaseList.edit.runner","tau/components/extensions/testCaseList/extension.testCaseList.refresher","tau/ui/templates/testCaseList/ui.template.testCaseList","tau/ui/extensions/testCaseList/ui.extension.testCaseList"],function(a,b,c,d,e,f,g,h){return{create:function(i){var j={template:g,extensions:[b,c,h,i.addTestCaseExtension||d,e,f],message:"No test cases found"};return a.create(j,i)}}}),define("tau/models/model.testCasesRunResults",["tau/core/model-base"],function(a){var b=a.extend({onInit:function(){var a=this,b=a.config.context,c=b.entity.entityType.name,d=b.entity.id;this.store.get(c,{id:d,fields:["passedCount","failedCount","notRunCount"]},{success:this.onDataRetrieved,scope:this}).done()},onDataRetrieved:function(a){var b=a.data,c={passedCount:b.passedCount,failedCount:b.failedCount,notRunCount:b.notRunCount};this.bus.fire("dataBind",c)}});return b}),define("tau/ui/templates/testCasesRunResults/ui.template.testCasesRunResults",["tau/core/templates-factory"],function(a){var b={name:"test-cases-run-results",markup:['<div class="tau-testCasesRunResults">','   <div class="tau-testCasesRunResults-container">','       <span class="tau-testCasesRunResults-item tau-testCasesRunResults-passed">Passed: ${passedCount}</span>','       <span class="tau-testCasesRunResults-item tau-testCasesRunResults-failed">Failed: ${failedCount}</span>','       <span class="tau-testCasesRunResults-item tau-testCasesRunResults-notRun">Not Run: ${notRunCount}</span>',"   </div>","</div>"],dependencies:[]};return a.register(b)}),define("tau/components/component.testCasesRunResults",["tau/components/component.creator","tau/models/model.testCasesRunResults","tau/ui/templates/testCasesRunResults/ui.template.testCasesRunResults"],function(a,b,c){return{create:function(d){var e={ModelType:b,template:c};return a.create(e,d)}}}),define("tau/models/model.timeList",["Underscore","tau/core/model-base","tau/utils/utils.date","tau/utils/utils.urlBuilder"],function(_,a,b,c){function d(a){return{id:a,fields:["id","name",{times:["id","date","spent","remain","description",{assignable:["id"]},{user:["id","firstName","lastName"]}]}]}}function e(a){var b={id:a,fields:["id",{tasks:["id","name",{times:["id","date","spent","remain","description",{assignable:["id"]},{user:["id","firstName","lastName"]}]}]}],list:!0,nested:!0};return b}function f(a){this.model=a,this.times=[]}f.prototype={getAssignableRetrievedCallback:function(){return{scope:this,success:this.onAssignableRetrieved}},getTaskRetrievedCallbackInfo:function(){return{scope:this,success:this.onTasksRetrieved}},getAllTasksRetrievedCallbackInfo:function(){return{scope:this,success:this.onAllTasksRetrieved}},onAssignableRetrieved:function(a){this.assignable=this.model.assignable=a.data;var b=this.model.assignable,c=b.times;this._addTimesToTimeArray(c,this.assignable)},onTasksRetrieved:function(a){_(a.data.tasks).each(function(a){a.__type="task"});var b=a.data.tasks;for(var c=0;c<b.length;c++)this._addTimesToTimeArray(b[c].times,b[c])},onAllTasksRetrieved:function(){var a={items:this.getTimes()};this.model.bus.fire("dataBind",a)},getTimesSortedByDate:function(){var a=[],c=this.times.length;for(var d=0;d<c;d++){var e=_(this.times[d]).clone();e.date=b.parse(e.date),a.push(e)}return a.sort(function(a,b){var c=b.date-a.date;return c!=0?c:b.id-a.id}),a},getTimes:function(){var a=[],b=this.getTimesSortedByDate(),c=b.length;for(var d=0;d<c;d++)a.push(this.convertServerDataModelData(b[d]));return a},convertServerDataModelData:function(a){var d=a.user;return{id:a.id,date:b.format.date.short(a.date),spent:a.spent,remain:a.remain,description:a.description,person:[d.firstName,d.lastName].join(" "),workOn:{__type:a.workOn.__type,name:a.workOn.name},editUrl:c.getEditUrl(a.id,"time")}},_addTimesToTimeArray:function(a,b){var c=[];for(var d=0;d<a.length;d++){var e=_(a[d]).clone();e.workOn=b,c.push(e)}this.times=this.times.concat(c)}};var g=a.extend({isUserStory:function(a){return a.toLowerCase()=="userstory"},onInit:function(){var a=new f(this),b=this.config.context.entity,c=b.id,g=b.entityType.name,h=d(c),i=this.isUserStory(g),j=this.store;j=j.get(g,h,a.getAssignableRetrievedCallback());if(i){var k=e(c);j=j.get(g,k,a.getTaskRetrievedCallbackInfo())}j.done(a.getAllTasksRetrievedCallbackInfo())}});return g}),define("tau/models/model.timeList.editable",["Underscore","tau/components/extensions/component.extension.base"],function(_,a){var b=a.extend({category:"edit","bus beforeInit":function(){this.fire("permissionsReady",{editable:!0})}});return b}),define("tau/ui/templates/common/ui.template.entityIcon",["tau/core/templates-factory","tau/ui/tags/ui.tag.term"],function(a,b){var c={tags:[b],name:"entity-icon",markup:['<em class="ui-type-icon ui-type-icon-${__type.toLowerCase()}">{{term(__type) "iconBig"}}</em>'],dependencies:[]};return a.register(c)}),define("tau/ui/templates/timeList/ui.template.timeList.time",["tau/core/templates-factory","tau/ui/templates/common/ui.template.entityIcon"],function(a){var b={name:"time-list-time",markup:["<tr>",'   <td class="date">${date}</td>','   <td class="spent">${spent} h</td>','   <td class="remain">${remain} h</td>','   <td class="description">${description}</td>','   <td class="work-on">','    {{tmpl(workOn) "entity-icon"}}',"    <span>${workOn.name}</span>","   </td>",'   <td class="person">${person}</td>','   <td class="edit-time hidden"><a href="${editUrl}">Edit</a></td>','   <td class="delete-time hidden"><button type="button" class="button unassign-button">Delete</button></td>',"</tr>"].join(""),dependencies:["entity-icon"]};return a.register(b)}),define("tau/ui/templates/timeList/ui.template.timeList",["tau/core/templates-factory","tau/ui/templates/timeList/ui.template.timeList.time"],function(a){var b={name:"time-list",options:{contentSelector:".time-list"},markup:['<div class="ui-timeList-content">','<table class="ui-table box time-list"{{if items.length === 0}} style="display:none"{{/if}}>',"<thead>",'   <tr class="head-row">','       <th class="header-cell">Date</th>','       <th class="header-cell">Time Spent</th>','       <th class="header-cell">Time Remain</th>','       <th class="header-cell">Description</th>','       <th class="header-cell">Work On</th>','       <th class="header-cell">Person</th>','       <th class="header-cell edit-time hidden"></th>','       <th class="header-cell delete-time hidden"></th>',"   </tr>","</thead>","<tbody>",'    {{tmpl(items) "time-list-time"}}',"</tbody>","</table>","</div>"].join(""),dependencies:["time-list-time"]};return a.register(b)}),define("tau/components/extensions/timeList/extension.timeList.delete",["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(_,$,a){return a.extend({"bus afterRender+permissionsReady+dataBind":function(a){if(a.permissionsReady.data.editable){var b=a.afterRender.data.element;b.find(".delete-time,.edit-time").removeClass("hidden"),b.find(".delete-time button").click($.proxy(this.onDeleteClick,this))}},"bus afterRemove":function(){this.fire("refresh")},onDeleteClick:function(a){var b=$(a.target).parents("tr").tmplItem().data.id;this.fire("remove",{id:b,typeName:"time"})}})}),define("tau/components/component.timeList",["tau/components/component.list.creator","tau/models/model.timeList","tau/models/model.timeList.editable","tau/ui/templates/timeList/ui.template.timeList","tau/components/extensions/timeList/extension.timeList.delete","tau/core/model.editable.base"],function(a,b,c,d,e,f){return{create:function(g){var h={ModelType:b,template:d,extensions:[e,f,c],message:"No time records found"};return a.create(h,g)}}}),define("tau/models/model.title",["tau/core/model-base","tau/configurator"],function(a,b){var c=function(a,b){this.model=a,this.appContext=b};c.prototype={onGetEntity:function(a){this.entity=a.data},setProcess:function(a){this.process=a},setProject:function(a){this.project=a},"get task subPath":function(){return"Project/Planning/UserStory"},done:function(){var a=b.getCurrentAcid()||this.appContext.acid,c={entity:this.entity,process:this.process,project:this.project,appPath:b.getApplicationPath(),url:b.getApplicationPath()+"/RestUI/TpView.aspx?acid="+a+"#"+this.entity.__type.toLowerCase()+"/"+this.entity.id};this.model.fire("dataBind",c)}};var d=a.extend({onInit:function(){var a=this,b=a.config.context,d=b.entity.entityType.name,e=b.entity.id,f=b.applicationContext.processes[0],g=new c(a,b.applicationContext);g.setProcess(f),g.setProject(b.applicationContext.selectedProjects[0]),a._signed||(a._signed=!0,a.store.on({eventName:"afterSave",type:d,listener:a,filter:{id:e},hasChanges:["name"]},function(){a.bus.fire("refresh")})),a.store.get(d,{id:e,fields:["id","name"]},{scope:g,success:g.onGetEntity}).done({scope:g,success:g.done})}});return d}),define("tau/models/model.title.editable",["tau/core/model.editable.base","tau/utils/utils.jsonSchema"],function(a,b){var c=a.extend({category:"edit",name:"Editable title",schema:b.Schema.create({type:"object",properties:{name:{optional:!1,type:"string",maxLength:255,pre:["trim"],fallbacks:{maxLength:"truncateToMaxLength",optional:function(){}}}}}),"bus dataBind":function(){this.bus.fire("permissionsReady",{editable:!0,deletable:!0})},"bus validate":function(a){var b=a.data,c=b.cmd.$set;b.validation=this.schema.validate(c)}});return c}),define("tau/components/extensions/title/extension.title.editable",["tau/components/extensions/component.extension.base","tau/ui/behaviour/common/ui.behaviour.editableText"],function(a){return a.extend({category:"edit","bus changeName":function(a){this.bus.fire("save",{name:a.data})},"bus permissionsReady+afterRender":function(a){var b=this,c=a.permissionsReady.data;if(c.editable){var d=a.afterRender.data.element,e=d.find(".entity-title");this.$widget=e,e.editableText({restoreText:!0,onSave:function(a){b.bus.fire("changeName",a)},onEditStart:function(){b._$titleInfo=e.find(".title-info").detach()},onEditEnd:function(){b._$titleInfo.appendTo(e)}})}},"bus validate":function(){if(!this.$widget)return;this.$widget.editableText("resetValidationErrors")},"bus afterValidate":function(a){if(!this.$widget)return;this.$widget.editableText("setValue",a.data.validation.instance.name)},"bus validationFailed":function(a){if(!this.$widget)return;this.$widget.editableText("setValidationErrors",a.data.validation.errors[0].description)}})}),define("tau/ui/templates/title/ui.template.title",["tau/core/templates-factory","tau/ui/templates/common/ui.template.entityIcon"],function(a){var b={name:"title",markup:['<table class="ui-title">',"<tbody>","<tr>","<td>",'{{tmpl({__type:entity.__type}) "entity-icon"}}','<span class="entity-id"><a class="ui-link" href="${url}">#${entity.id}</a></span>',"</td>","<td>",'<div class="entity-title">',"${entity.name}",'{{if entity.__type !== "project"}}','<span class="title-info"> for ${project.name}</span>',"{{/if}}","</div>","</td>","</tr>","</tbody>","</table>"],dependencies:["entity-icon"]};return a.register(b)}),define("tau/components/component.title",["tau/components/component.creator","tau/models/model.title","tau/models/model.title.editable","tau/components/extensions/title/extension.title.editable","tau/ui/templates/title/ui.template.title"],function(a,b,c,d,e){return{create:function(f){var g={extensions:[b,c,d],template:e};return a.create(g,f)}}}),define("tau/models/model.userList",["Underscore","tau/store/types","tau/core/model-base","tau/configurator","tau/utils/utils.textsearch"],function(_,a,b,c,d){return b.extend({init:function(){this._super.apply(this,arguments),this.textSearch=new d},"bus setFilter":function(a){this.config.data.filter=a.data.filter,this.fire("refresh",{refreshSelector:".user-list,.footer-box"})},setShowMore:function(a){this.config.data.showMore=a},"bus showMore":function(){this.setShowMore(!0),this.fire("refresh",{refreshSelector:".user-list,.footer-box"})},onInit:function(){this.fire("registerStoreRequest"),this.fire("commitTransaction",{})},"bus projectMembersReady+excludedUserReady+projectRolesReady":function(a){var b=a.projectMembersReady.data,c=a.excludedUserReady.data,d=a.projectRolesReady.data,e=[],f=[];!this.excludedUsersContainsLoggedUser(c)&&this.loggedUserInProjectTeam(b)&&(f=[{id:"assign-to-me",title:"Assign To Me"}]),this.filterIsNotEmpty()?e=this.getFilteredGroups(d,b,c):(e=this.getGroups(b,c,d),e.length==0&&(this.setShowMore(!0),e=this.getGroups(b,c,d)));var g={headerActions:f,moreAvailable:!1,groups:e};this.fire("extendDataToBind",g),this.fire("dataBind",g)},getGroups:function(a,b,c){var d=[];for(var e=0;e<c.length;e++){var f=c[e];if(this.usersForRoleIsVisible(f)){var g=this.getUsersForRole(f,a,b);g.length>0&&d.push({role:f,users:g})}}return d},isStringValidForFilter:function(a){return this.textSearch.match(a,this.config.data.filter)!==null},getFilteredGroups:function(a,b,c){var d=[];for(var e=0;e<a.length;e++){var f=a[e],g=[];if(this.isStringValidForFilter(f.name))g=this.getUsersForRole(f,b,c);else{g=this.getUsersForRole(f,b,c);var h=[];for(var i=0;i<g.length;i++)this.isStringValidForFilter(g[i].name)&&h.push(g[i]);g=h}g.length>0&&d.push({role:f,users:g})}return d},usersForRoleIsVisible:function(a){var b=this.config.data||{};if(this.isMoreAvailable()){if(b.hasOwnProperty("roleId"))return b.roleId===a.id;if(b.role)return a.id==b.role.id}return!0},userIsNotExcluded:function(a,b){if(!a.user.isActive)return!1;var c=a.user.id;if(b.constructor!=Array)return c!=b.id;for(var d=0;d<b.length;d++)if(c==b[d].id)return!1;return!0},getUsersForRole:function(a,b,c){var d=[];for(var e=0;e<b.length;e++){var f=b[e];f.role.id==a.id&&this.userIsNotExcluded(f,c)&&d.push(this.convertUser(f.user))}return d.sort(function(a,b){var c=a.name.toLowerCase(),d=b.name.toLowerCase();return c<d?-1:c>d?1:0}),d},convertUser:function(a){return{id:a.id,name:[a.firstName,a.lastName].join(" "),role:a.role,avatar:[c.getApplicationPath(),"/Avatar.ashx?UserId=",a.id,"&size=32"].join("")}},getLoggedUser:function(){return this.config.context.getLoggedUser()},loggedUserInProjectTeam:function(a){var b=this.getLoggedUser();return _.any(a,function(a){return a.user.id===b.id})},excludedUsersContainsLoggedUser:function(a){var b=this.getLoggedUser();for(var c=0;c<a.length;c++)if(a[c].id===b.id)return!0;return!1},filterIsNotEmpty:function(){return this.config.data.filter&&this.config.data.filter.length},filterIsEmpty:function(){return!this.filterIsNotEmpty()},isMoreAvailable:function(){var a=this.config.data;return this.filterIsEmpty()&&a.showMore!==!0&&(a.hasOwnProperty("roleId")||a.hasOwnProperty("role"))},destroy:function(){this.project=null,this.entity=null,this._super()}})}),define("tau/models/extensions/team/extension.model.teamOfEntityRetriever",["Underscore","tau/core/model-base"],function(_,a){return a.extend({"bus registerStoreRequest":function(){var a=this.config.context.entity||{entityType:{}};this.fire("get",{type:a.entityType.name,query:{id:a.id,fields:[{project:["id"]}]},callback:{scope:this,success:this.onEntityRetrieved}})},onEntityRetrieved:function(a){var b=a.data.project?a.data.project.id:a.data.id,c={user:["id","firstName","lastName","isActive"]},d={role:["id","name"]},e={projectMembers:[c,d]};this.fire("get",{type:"project",query:{id:b,fields:["id",e]},callback:{scope:this,success:this.onProjectRetrieved}}),this.fire("commitTransaction")},onProjectRetrieved:function(a){var b=a.data.projectMembers;this.fire("projectMembersReady",b);var c=this.getRoles(b);this.fire("projectRolesReady",c)},getRoles:function(a){var b={},c=[];return _.each(a,function(a){var d=a.role;b.hasOwnProperty(d.id)||(b[d.id]=!0,c.push(d))}),c}})}),define("tau/models/userList/extension.model.assignmentsUser.Excluder",["Underscore","tau/core/model-base"],function(_,a){return a.extend({"bus registerStoreRequest":function(){var a=this.config.context.entity||{entityType:{}},b={role:["id","name"]},c={generalUser:["id","firstName","lastName"]};this.fire("get",{type:a.entityType.name,query:{id:a.id,fields:[{assignments:["id",b,c],list:!0}]},callback:{scope:this,success:this.onEntityRetrieved}})},onEntityRetrieved:function(a){var b=this.config.data||{},c=a.data,d=[],e=b.roleId||(b.role||{}).id;if(e){var f=c.assignments||[];for(var g=0;g<f.length;g++)f[g].role.id==e&&d.push(f[g].generalUser)}this.fire("excludedUserReady",d)}})}),define("tau/components/extensions/userList/extension.userList.editable",["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(_,$,a){return a.extend({category:"edit",name:"user list",init:function(){this._super.apply(this,arguments),this._userClick=$.proxy(this.onUserClick,this),this._unassignClick=$.proxy(this.onUnassignClick,this),this._assignToMeClick=$.proxy(this.onAssignToMeClick,this),this._filterChanged=$.proxy(this.onFilterChanged,this),this._moreClicked=$.proxy(this.onMoreClick,this)},onMoreClick:function(a){a.stopPropagation(),this.fire("showMore")},onUserClick:function(a){var b=$(a.target),c=b.tmplItem().data;this.fire("changeAssignment",{user:c})},onUnassignClick:function(){this.fire("removeAssignment")},onAssignToMeClick:function(){this.fire("assignToLoggedUser")},onFilterChanged:function(a){if(a.keyCode==$.ui.keyCode.DOWN||a.keyCode==$.ui.keyCode.UP||a.keyCode==$.ui.keyCode.ENTER)return;a.preventDefault(),this.fire("setFilter",{filter:$(a.target).val()})},"bus beforeRender":function(){var a=this.$element;a&&(a.find(".user").unbind("click",this._userClick),a.find(".unassign-button").unbind("click",this._unassignClick),a.find(".assign-to-me-button").unbind("click",this._assignToMeClick),a.find(".user-search-box").unbind("keyup",this._filterChanged),a.find(".more-link").unbind("click",this._moreClicked))},"bus afterRender":function(a){var b=this,c=b.$element=a.data.element;c.find(".user").click(this._userClick),c.find(".unassign-button").click(this._unassignClick),c.find(".assign-to-me-button").click(this._assignToMeClick),c.find(".user-search-box").keyup(this._filterChanged),c.find(".more-link").bind("click",this._moreClicked)},"bus refresh":function(a){var b=this.$element.find(".user-list");this._resize(),b.listSelectable({items:".user",className:"user_hover"}),b.listSelectable("enable"),b.listSelectable("reset")},"bus focus":function(a){var b=this.$element.find(".user-list");b.listSelectable({items:".user",className:"user_hover"}),b.listSelectable("enable"),this.$element.find(".user-search-box").focus()},"bus blur":function(a){this.$element.find(".user-list:visible").listSelectable("disable")},_resize:function(a){if(!this.$element)return;var b=this.$element,c=b.find(".user-list");c.css("maxHeight",$(window).height()/3),c.css("overflowY","auto"),c.css("overflowX","hidden")},"bus afterRender+popupResize":function(a){this._resize(a.popupResize.data)},"bus popupResize":function(a){this._resize(a.data)}})}),define("tau/ui/templates/filteredUserList/ui.template.filteredUserList.userList",["tau/core/templates-factory","tau/ui/templates/common/ui.template.user"],function(a){var b={name:"user-list",markup:'<div class="role-title">${role.name}</div>{{tmpl(users) "user"}}',dependencies:["user"]};return a.register(b)}),define("tau/ui/templates/common/ui.template.linkAction",["tau/core/templates-factory"],function(a){var b={name:"link-action",markup:['<a class="${id}-link user-action" >',"   ${title}","</a>"].join("")};return a.register(b)}),define("tau/ui/templates/filteredUserList/ui.template.filteredUserList",["tau/core/templates-factory","tau/ui/templates/filteredUserList/ui.template.filteredUserList.userList","tau/ui/templates/common/ui.template.buttonAction","tau/ui/templates/common/ui.template.linkAction"],function(a){var b={name:"filtered-user-list",markup:['<div class="filtered-user-list">','<div class="header-box">','{{tmpl(headerActions) "button-action"}}',"</div>",'<div class="search-box-container">','   <input type="text" class="user-search-box">','   <div class="help">For filter start typing name or occupation</div>',"</div>",'<div class="user-list"><div class="i-inner">{{tmpl(groups) "user-list"}}</div></div>','<div class="footer-box">','<a class="more-link ',"{{if moreAvailable == false}}","link-hidden","{{/if}}",'" >',"more...","</a>","</div>","</div>"],dependencies:["user-list","button-action","link-action"]};return a.register(b)}),define("tau/components/component.userList",["Underscore","tau/components/component.creator","tau/models/model.userList","tau/models/assignmentsList/extension.model.store.operations","tau/models/extensions/team/extension.model.teamOfEntityRetriever","tau/models/userList/extension.model.assignmentsUser.Excluder","tau/components/extensions/userList/extension.userList.editable","tau/ui/templates/filteredUserList/ui.template.filteredUserList"],function(_,a,b,c,d,e,f,g){return{create:function(h){var i=[];_.isArray(h.extensions)&&(i=_.clone(h.extensions));var j={extensions:i,template:g};return i.push(b),i.push(f),i.push(c),i.push(h.Retriever||d),i.push(h.UserExcluder||e),a.create(j,h)}}}),define("tau/models/model.extension",["tau/core/model-base"],function(a){var b=a.extend({onInit:function(){this.fire("registerStoreRequest"),this.fire("commitTransaction")}});return b}),define("tau/configurations/converters/converter.print",["Underscore","tau/models/model.extension","tau/models/model.impedimentsCountCalculator","tau/models/model.duplicateBugCountCalculator","tau/models/model.duplicateBugRetriever","tau/components/extensions/impedimentList/extension.impedimentList.visibilityController","tau/components/extensions/duplicateBugList/extension.duplicateBugList.visibilityController","tau/models/assignmentsList/extension.model.store.operations"],function(_,a,b,c,d,e,f,g){var h={impedimentListPanel:function(c){return _.extend(c,{compId:"impediments",type:"container",layout:"list",cssClass:"b-section",disableAnimation:!0,children:[{type:"label.impedimentsCount",hideCounter:!0},{type:"impedimentList"}],extensions:[a,e,b,g]}),c},duplicateBugListPanel:function(b){return _.extend(b,{compId:"duplicateBugs",type:"container",layout:"list",cssClass:"b-section",disableAnimation:!0,children:[{type:"label.duplicateBugCount",hideCounter:!0},{type:"duplicateBugList"}],extensions:[a,f,d,c,g]}),b},tabs:function(a){a=_.extend(a,{type:"container",children:[],cssClass:"b-tabs"});var b=[];return _.forEach(a.tabs,function(b,c){b=_.extend(b,{type:"container",children:b.items,cssClass:"b-tab"}),!_.isUndefined(b.header)&&b.header.length&&b.children.unshift({type:"label",text:b.header[0].text}),a.children[c]=b}),a},collapsible:function(a){return a=_.extend(a,{type:"container",children:[],cssClass:"b-section"}),a.children=a.items,!_.isUndefined(a.header)&&a.header.length&&a.children.unshift({type:"label",text:a.header[0].text}),a}},i=function(a){return _.forEach(a,function(b,c){if(b.type){if(b.printable===!1){_.isArray(a)?a.splice(c,1):delete a[c];return}_.isFunction(h[b.type])&&(a[c]=h[b.type](b,a)),b.children&&(a[c].children=i(b.children)),b.items&&(a[c].items=i(b.items)),a[c].disabledExtensionCategories=["edit"]}else c=="children"&&(a[c]=i(b))}),a};return{convert:function(a){return a=i(a),a.children&&a.children.length&&(a.children[0].cssClass="main-container main-container-print i-print"),a}}}),define("tau/components/extensions/print.convert.extension",["tau/components/extensions/component.extension.base","tau/configurations/converters/converter.print"],function(a,b){return a.extend({"bus onConfigContainerCreated":function(a){var c=a.data;b.convert(c),c.children.push({type:"print"})},"bus afterRender":function(a){var b=a.data.element,c=b.find("a");c.removeAttr("href"),b.find("[role=attachment]").removeAttr("role")}})}),define("tau/components/extensions/application/extension.controller.entity",["Underscore","tau/core/class","tau/core/tau","tau/components/component.page.entity","tau/configurator","tau/utils/utils.redirect","tau/core/event","tau/store/types","tau/components/extensions/print.convert.extension"],function(_,a,b,c,d,e,f,g,h){return a.extend({init:function(a){this.config=a,this.bus=a.bus,f.subscribeOn(this),this._initGlobalEvents()},_initGlobalEvents:function(){var a=this,b=function(b){var c=b.data,d={project:{id:c.project.id}},e={id:c.entity.id,changes:d,cmd:{config:{$set:d}}};a.bus.fire("application.reload",e)},c=function(b){var c=b.data,d={},e={id:c.bugId,changes:d,cmd:{config:{$set:d}}};a.bus.fire("application.reload",e)};a.bus.getGlobalBus().on("bugWasMarkedAsDuplicate",c,a),a.bus.getGlobalBus().on("entityWasMovedToProject",b,a),a.bus.getGlobalBus().on("processChanged",b,a);var e=["general","assignment","roleEffort"],f=d.getStore(),g=function(b){a.bus.fire("application.reload",b.data)};_.each(e,function(b){f.on({type:b,eventName:"afterSave",listener:a},g),f.on({type:b,eventName:"afterRemove",listener:a},g)})},"bus afterRender":function(a){this.$element=a.data.element},"bus beforeRender":function(a){},_getItemConfig:function(a,b){var c={context:{id:a,entityType:{name:b}}},d=c.context;return _.extend(c.context,{assignable:d}),_.extend(c.context,{entity:d}),_.extend(c.context,{general:d}),c},"bus application.navigate.entity":function(a){var b=this,c=a.data,e=(c.action||"").toLocaleLowerCase(),f=e&&e!="demoview"&&e!="tpview"?e:"show";if(!c.id&&!c.entity){var g=d.getRouting(),h=g.getReferer()?g.getReferer().url:null;h&&h!=="#"?g.redirect("#"+h):this.bus.fire("application.exit");return}f="action"+f,this[f]||(f="actionshow"),this.bus.fire("controller.preExecute",{action:f,parameters:c}),this[f].call(this,c.id,c.entity),this.bus.fire("controller.postExecute")},actionshow:function(a,b){this._action(a,b),$("html").toggleClass("tau-html_action_view",!0).toggleClass("tau-html_action_print",!1)},actionprint:function(a,b){this._action(a,b,{extensions:[h]}),$("html").toggleClass("tau-html_action_view",!1).toggleClass("tau-html_action_print",!0),jQuery("body").addClass("print-mode")},_action:function(a,b,f){$("html").toggleClass("tau-html_action_view",!1).toggleClass("tau-html_action_print",!1),this.current&&(this.current.destroy(),d.getStore().evictData());var g=this;this.current=c.create(this._getItemConfig(a,b),f||{}),this.current.on("beforeDelete",function(a){g.bus.fire("initProgress")}),this.current.on("deleted",function(a){var b=d.getHistory(),c=new e,f=b.pop();f?(b.setCurrent(null),c.redirect(f.url)):g.bus.fire("application.exit")}),this.current.on("error",function(a){g.bus.fire("application.error")}),this.current.on("afterRender",function(a){g.$element.length&&(g.$element.append(a.data.element),g.bus.fire("contentRendered",{element:a.data.element}))}),this.current.initialize()},"bus destroy":function(){d.getStore().unbind(this),d.getGlobalBus().removeAllListeners(this),this.current&&this.current.fire("destroy")}})}),define("tau/components/component.application",["tau/components/component.creator","tau/core/component-base","tau/core/view-base","tau/components/extensions/application/extension.history","tau/components/extensions/application/extension.routing","tau/components/extensions/application/extension.routing.patterns","tau/components/extensions/application/extension.integration","tau/components/extensions/error/extension.errorBar","tau/ui/extensions/popup/ui.extension.popup","tau/components/extensions/application/extension.controller.entity","tau/ui/templates/application/ui.template.application"],function(a,b,c,d,e,f,g,h,i,j,k){return{create:function(a){a=a||{onCreate:function(){}};var l={name:"application component",template:k},m=new b(l);return m.attach(e,a).attach(f,a).attach(d,a).attach(g,a).attach(h,a).attach(j,a).attach(c),a.integration&&a.integration.showInPopup===!0&&m.attach(i,a),m.bus}}}),require(["tau/components/component.additionalInfo","tau/components/component.application","tau/components/component.assignedEffort","tau/components/component.assignmentsList","tau/components/component.attachments","tau/components/component.attachmentsPreview","tau/components/component.audit.history","tau/components/component.breadcrumbs","tau/components/component.collapsible","tau/components/component.collapsibleHeader","tau/components/component.comment","tau/components/component.comment.new.editor","tau/components/component.commentList","tau/components/component.comments","tau/components/component.container","tau/components/component.creator","tau/components/component.customField.checkbox","tau/components/component.customField.date","tau/components/component.customField.dropdown","tau/components/component.customField.dropdown.list","tau/components/component.customField.entity","tau/components/component.customField.multiselect","tau/components/component.customField.multiselect.list","tau/components/component.customField.number","tau/components/component.customField.richtext","tau/components/component.customField.text","tau/components/component.customField.url.editor","tau/components/component.customField.url","tau/components/component.description","tau/components/component.diagnostics.globalListeners","tau/components/component.diagnostics","tau/components/component.diagnostics.store","tau/components/component.duplicateBugList","tau/components/component.duplicateBugListPanel","tau/components/component.entity.actions","tau/components/component.entityStateList","tau/components/component.feature.assignmentList","tau/components/component.feature.totalEffort","tau/components/component.field.richText","tau/components/component.finder","tau/components/component.impedimentList","tau/components/component.impedimentListPanel","tau/components/component.implementationHistory","tau/components/component.iteration.progressBar","tau/components/component.label.duplicateBugCount","tau/components/component.label.impedimentsCount","tau/components/component.label","tau/components/component.list.baseInfo","tau/components/component.list.creator","tau/components/component.list.editable","tau/components/component.list","tau/components/component.lookswitcher","tau/components/component.menu.actions","tau/components/component.menu.actions.testplanrun","tau/components/component.menu.testPlanRun","tau/components/component.page.base","tau/components/component.page.board","tau/components/component.page.entity","tau/components/component.pluginsList","tau/components/component.print","tau/components/component.progressBar","tau/components/component.progressBar.small","tau/components/component.property.abbreviation","tau/components/component.property.assignable","tau/components/component.property.bool","tau/components/component.property.build","tau/components/component.property.build.testPlanRun","tau/components/component.property.buildDate","tau/components/component.property.company","tau/components/component.property.completeDate","tau/components/component.property.createDate","tau/components/component.property.date","tau/components/component.property.effort","tau/components/component.property.endDate","tau/components/component.property.endDate.list","tau/components/component.property.endDate.project","tau/components/component.property.entityState","tau/components/component.property.feature","tau/components/component.property.impedimentDate","tau/components/component.property.initialEstimate","tau/components/component.property.isActive","tau/components/component.property.isPrivate","tau/components/component.property.isProduct","tau/components/component.property.iteration","tau/components/component.property","tau/components/component.property.lastFailureComment","tau/components/component.property.lastRunDate","tau/components/component.property.lastRunDate.list","tau/components/component.property.lastStatus","tau/components/component.property.owner","tau/components/component.property.owner.project","tau/components/component.property.owner.request","tau/components/component.property.priority","tau/components/component.property.process","tau/components/component.property.program","tau/components/component.property.project","tau/components/component.property.release","tau/components/component.property.requestSource","tau/components/component.property.requestType","tau/components/component.property.responsible","tau/components/component.property.severity","tau/components/component.property.startDate","tau/components/component.property.startDate.project","tau/components/component.property.status.testCaseRun","tau/components/component.property.testPlan","tau/components/component.property.text","tau/components/component.property.time","tau/components/component.property.userStory","tau/components/component.property.velocity","tau/components/component.quick.add","tau/components/component.redirect","tau/components/component.release.assignedEffort","tau/components/component.release.progressBar","tau/components/component.releaseNotes","tau/components/component.requestList","tau/components/component.state-list","tau/components/component.steps","tau/components/component.success","tau/components/component.tabs","tau/components/component.tabsHeader","tau/components/component.tags","tau/components/component.testCaseList","tau/components/component.testCasesRunResults","tau/components/component.timeList","tau/components/component.title","tau/components/component.userList","tau/components/extensions/print.convert.extension"],function(){return{}}),define("all.components",function(){})