/*! Copyright (c) 2011, Lloyd Hilaiel, ISC License */
define("libs/underscore",[],function(){return function(){function z(a,b,c){if(a===b)return a!==0||1/a==1/b;if(a==null||b==null)return a===b;a._chain&&(a=a._wrapped),b._chain&&(b=b._wrapped);if(a.isEqual&&_.isFunction(a.isEqual))return a.isEqual(b);if(b.isEqual&&_.isFunction(b.isEqual))return b.isEqual(a);var d=i.call(a);if(d!=i.call(b))return!1;switch(d){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if(typeof a!="object"||typeof b!="object")return!1;var e=c.length;while(e--)if(c[e]==a)return!0;c.push(a);var f=0,g=!0;if(d=="[object Array]"){f=a.length,g=f==b.length;if(g)while(f--)if(!(g=f in a==f in b&&z(a[f],b[f],c)))break}else{if("constructor"in a!="constructor"in b||a.constructor!=b.constructor)return!1;for(var h in a)if(_.has(a,h)){f++;if(!(g=_.has(b,h)&&z(a[h],b[h],c)))break}if(g){for(h in b)if(_.has(b,h)&&!(f--))break;g=!f}}return c.pop(),g}var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.slice,h=d.unshift,i=e.toString,j=e.hasOwnProperty,k=d.forEach,l=d.map,m=d.reduce,n=d.reduceRight,o=d.filter,p=d.every,q=d.some,r=d.indexOf,s=d.lastIndexOf,t=Array.isArray,u=Object.keys,v=f.bind,_=function(a){return new D(a)};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=_),exports._=_):a._=_,_.VERSION="1.3.1";var w=_.each=_.forEach=function(a,b,d){if(a==null)return;if(k&&a.forEach===k)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;e<f;e++)if(e in a&&b.call(d,a[e],e,a)===c)return}else for(var g in a)if(_.has(a,g)&&b.call(d,a[g],g,a)===c)return};_.map=_.collect=function(a,b,c){var d=[];return a==null?d:l&&a.map===l?a.map(b,c):(w(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),a.length===+a.length&&(d.length=a.length),d)},_.reduce=_.foldl=_.inject=function(a,b,c,d){var e=arguments.length>2;a==null&&(a=[]);if(m&&a.reduce===m)return d&&(b=_.bind(b,d)),e?a.reduce(b,c):a.reduce(b);w(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)});if(!e)throw new TypeError("Reduce of empty array with no initial value");return c},_.reduceRight=_.foldr=function(a,b,c,d){var e=arguments.length>2;a==null&&(a=[]);if(n&&a.reduceRight===n)return d&&(b=_.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=_.toArray(a).reverse();return d&&!e&&(b=_.bind(b,d)),e?_.reduce(f,b,c,d):_.reduce(f,b)},_.find=_.detect=function(a,b,c){var d;return x(a,function(a,e,f){if(b.call(c,a,e,f))return d=a,!0}),d},_.filter=_.select=function(a,b,c){var d=[];return a==null?d:o&&a.filter===o?a.filter(b,c):(w(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},_.reject=function(a,b,c){var d=[];return a==null?d:(w(a,function(a,e,f){b.call(c,a,e,f)||(d[d.length]=a)}),d)},_.every=_.all=function(a,b,d){var e=!0;return a==null?e:p&&a.every===p?a.every(b,d):(w(a,function(a,f,g){if(!(e=e&&b.call(d,a,f,g)))return c}),e)};var x=_.some=_.any=function(a,b,d){b||(b=_.identity);var e=!1;return a==null?e:q&&a.some===q?a.some(b,d):(w(a,function(a,f,g){if(e||(e=b.call(d,a,f,g)))return c}),!!e)};_.include=_.contains=function(a,b){var c=!1;return a==null?c:r&&a.indexOf===r?a.indexOf(b)!=-1:(c=x(a,function(a){return a===b}),c)},_.invoke=function(a,b){var c=g.call(arguments,2);return _.map(a,function(a){return(_.isFunction(b)?b||a:a[b]).apply(a,c)})},_.pluck=function(a,b){return _.map(a,function(a){return a[b]})},_.max=function(a,b,c){if(!b&&_.isArray(a))return Math.max.apply(Math,a);if(!b&&_.isEmpty(a))return-Infinity;var d={computed:-Infinity};return w(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>=d.computed&&(d={value:a,computed:g})}),d.value},_.min=function(a,b,c){if(!b&&_.isArray(a))return Math.min.apply(Math,a);if(!b&&_.isEmpty(a))return Infinity;var d={computed:Infinity};return w(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},_.shuffle=function(a){var b=[],c;return w(a,function(a,d,e){d==0?b[0]=a:(c=Math.floor(Math.random()*(d+1)),b[d]=b[c],b[c]=a)}),b},_.sortBy=function(a,b,c){return _.pluck(_.map(a,function(a,d,e){return{value:a,criteria:b.call(c,a,d,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return c<d?-1:c>d?1:0}),"value")},_.groupBy=function(a,b){var c={},d=_.isFunction(b)?b:function(a){return a[b]};return w(a,function(a,b){var e=d(a,b);(c[e]||(c[e]=[])).push(a)}),c},_.sortedIndex=function(a,b,c){c||(c=_.identity);var d=0,e=a.length;while(d<e){var f=d+e>>1;c(a[f])<c(b)?d=f+1:e=f}return d},_.toArray=function(a){return a?a.toArray?a.toArray():_.isArray(a)?g.call(a):_.isArguments(a)?g.call(a):_.values(a):[]},_.size=function(a){return _.toArray(a).length},_.first=_.head=function(a,b,c){return b!=null&&!c?g.call(a,0,b):a[0]},_.initial=function(a,b,c){return g.call(a,0,a.length-(b==null||c?1:b))},_.last=function(a,b,c){return b!=null&&!c?g.call(a,Math.max(a.length-b,0)):a[a.length-1]},_.rest=_.tail=function(a,b,c){return g.call(a,b==null||c?1:b)},_.compact=function(a){return _.filter(a,function(a){return!!a})},_.flatten=function(a,b){return _.reduce(a,function(a,c){return _.isArray(c)?a.concat(b?c:_.flatten(c)):(a[a.length]=c,a)},[])},_.without=function(a){return _.difference(a,g.call(arguments,1))},_.uniq=_.unique=function(a,b,c){var d=c?_.map(a,c):a,e=[];return _.reduce(d,function(c,d,f){if(0==f||(b===!0?_.last(c)!=d:!_.include(c,d)))c[c.length]=d,e[e.length]=a[f];return c},[]),e},_.union=function(){return _.uniq(_.flatten(arguments,!0))},_.intersection=_.intersect=function(a){var b=g.call(arguments,1);return _.filter(_.uniq(a),function(a){return _.every(b,function(b){return _.indexOf(b,a)>=0})})},_.difference=function(a){var b=_.flatten(g.call(arguments,1));return _.filter(a,function(a){return!_.include(b,a)})},_.zip=function(){var a=g.call(arguments),b=_.max(_.pluck(a,"length")),c=new Array(b);for(var d=0;d<b;d++)c[d]=_.pluck(a,""+d);return c},_.indexOf=function(a,b,c){if(a==null)return-1;var d,e;if(c)return d=_.sortedIndex(a,b),a[d]===b?d:-1;if(r&&a.indexOf===r)return a.indexOf(b);for(d=0,e=a.length;d<e;d++)if(d in a&&a[d]===b)return d;return-1},_.lastIndexOf=function(a,b){if(a==null)return-1;if(s&&a.lastIndexOf===s)return a.lastIndexOf(b);var c=a.length;while(c--)if(c in a&&a[c]===b)return c;return-1},_.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);while(e<d)f[e++]=a,a+=c;return f};var y=function(){};_.bind=function(b,c){var d,e;if(b.bind===v&&v)return v.apply(b,g.call(arguments,1));if(!_.isFunction(b))throw new TypeError;return e=g.call(arguments,2),d=function(){if(this instanceof d){y.prototype=b.prototype;var a=new y,f=b.apply(a,e.concat(g.call(arguments)));return Object(f)===f?f:a}return b.apply(c,e.concat(g.call(arguments)))}},_.bindAll=function(a){var b=g.call(arguments,1);return b.length==0&&(b=_.functions(a)),w(b,function(b){a[b]=_.bind(a[b],a)}),a},_.memoize=function(a,b){var c={};return b||(b=_.identity),function(){var d=b.apply(this,arguments);return _.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},_.delay=function(a,b){var c=g.call(arguments,2);return setTimeout(function(){return a.apply(a,c)},b)},_.defer=function(a){return _.delay.apply(_,[a,1].concat(g.call(arguments,1)))},_.throttle=function(a,b){var c,d,e,f,g,h=_.debounce(function(){g=f=!1},b);return function(){c=this,d=arguments;var i=function(){e=null,g&&a.apply(c,d),h()};e||(e=setTimeout(i,b)),f?g=!0:a.apply(c,d),h(),f=!0}},_.debounce=function(a,b){var c;return function(){var d=this,e=arguments,f=function(){c=null,a.apply(d,e)};clearTimeout(c),c=setTimeout(f,b)}},_.once=function(a){var b=!1,c;return function(){return b?c:(b=!0,c=a.apply(this,arguments))}},_.wrap=function(a,b){return function(){var c=[a].concat(g.call(arguments,0));return b.apply(this,c)}},_.compose=function(){var a=arguments;return function(){var b=arguments;for(var c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},_.after=function(a,b){return a<=0?b():function(){if(--a<1)return b.apply(this,arguments)}},_.keys=u||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)_.has(a,c)&&(b[b.length]=c);return b},_.values=function(a){return _.map(a,_.identity)},_.functions=_.methods=function(a){var b=[];for(var c in a)_.isFunction(a[c])&&b.push(c);return b.sort()},_.extend=function(a){return w(g.call(arguments,1),function(b){for(var c in b)a[c]=b[c]}),a},_.defaults=function(a){return w(g.call(arguments,1),function(b){for(var c in b)a[c]==null&&(a[c]=b[c])}),a},_.clone=function(a){return _.isObject(a)?_.isArray(a)?a.slice():_.extend({},a):a},_.tap=function(a,b){return b(a),a},_.isEqual=function(a,b){return z(a,b,[])},_.isEmpty=function(a){if(_.isArray(a)||_.isString(a))return a.length===0;for(var b in a)if(_.has(a,b))return!1;return!0},_.isElement=function(a){return!!a&&a.nodeType==1},_.isArray=t||function(a){return i.call(a)=="[object Array]"},_.isObject=function(a){return a===Object(a)},_.isArguments=function(a){return i.call(a)=="[object Arguments]"},_.isArguments(arguments)||(_.isArguments=function(a){return!!a&&!!_.has(a,"callee")}),_.isFunction=function(a){return i.call(a)=="[object Function]"},_.isString=function(a){return i.call(a)=="[object String]"},_.isNumber=function(a){return i.call(a)=="[object Number]"},_.isNaN=function(a){return a!==a},_.isBoolean=function(a){return a===!0||a===!1||i.call(a)=="[object Boolean]"},_.isDate=function(a){return i.call(a)=="[object Date]"},_.isRegExp=function(a){return i.call(a)=="[object RegExp]"},_.isNull=function(a){return a===null},_.isUndefined=function(a){return a===void 0},_.has=function(a,b){return j.call(a,b)},_.noConflict=function(){return a._=b,this},_.identity=function(a){return a},_.times=function(a,b,c){for(var d=0;d<a;d++)b.call(c,d)},_.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},_.mixin=function(a){w(_.functions(a),function(b){F(b,_[b]=a[b])})};var A=0;_.uniqueId=function(a){var b=A++;return a?a+b:b},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var B=/.^/,C=function(a){return a.replace(/\\\\/g,"\\").replace(/\\'/g,"'")};_.template=function(a,b){var c=_.templateSettings,d="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(c.escape||B,function(a,b){return"',_.escape("+C(b)+"),'"}).replace(c.interpolate||B,function(a,b){return"',"+C(b)+",'"}).replace(c.evaluate||B,function(a,b){return"');"+C(b).replace(/[\r\n\t]/g," ")+";__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",e=new Function("obj","_",d);return b?e(b,_):function(a){return e.call(this,a,_)}},_.chain=function(a){return _(a).chain()};var D=function(a){this._wrapped=a};_.prototype=D.prototype;var E=function(a,b){return b?_(a).chain():a},F=function(a,b){D.prototype[a]=function(){var a=g.call(arguments);return h.call(a,this._wrapped),E(b.apply(_,a),this._chain)}};_.mixin(_),w(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];D.prototype[a]=function(){var c=this._wrapped;b.apply(c,arguments);var d=c.length;return(a=="shift"||a=="splice")&&d===0&&delete c[0],E(c,this._chain)}}),w(["concat","join","slice"],function(a){var b=d[a];D.prototype[a]=function(){return E(b.apply(this._wrapped,arguments),this._chain)}}),D.prototype.chain=function(){return this._chain=!0,this},D.prototype.value=function(){return this._wrapped}}.call(this),_}),function(exports){function b(a){try{return JSON&&JSON.parse?JSON.parse(a):(new Function("return "+a))()}catch(b){d("ijs",b.message)}}function d(a,b){throw new Error(c[a]+(b&&" in '"+b+"'"))}function h(a,c){c||(c=0);var g=f.exec(a.substr(c));if(!g)return undefined;c+=g[0].length;var h;return g[1]?h=[c," "]:g[2]?h=[c,g[0]]:g[3]?h=[c,e.typ,g[0]]:g[4]?h=[c,e.psc,g[0]]:g[5]?h=[c,e.psf,g[0]]:g[6]?d("upc",a):g[8]?h=[c,g[7]?e.ide:e.str,b(g[8])]:g[9]?d("ujs",a):g[10]&&(h=[c,e.ide,g[10].replace(/\\([^\r\n\f0-9a-fA-F])/g,"$1")]),h}function j(a,b){return typeof a===b}function l(a,c){var d,e=i.exec(a.substr(c));if(e)return c+=e[0].length,d=e[1]||e[2]||e[3]||e[5]||e[6],e[1]||e[2]||e[3]?[c,0,b(d)]:e[4]?[c,0,undefined]:[c,d]}function m(a,b){b||(b=0);var c=l(a,b),e;if(c&&c[1]==="("){e=m(a,c[0]);var f=l(a,e[0]);(!f||f[1]!==")")&&d("epex",a),b=f[0],e=["(",e[1]]}else!c||c[1]&&c[1]!="x"?d("ee",a+" - "+(c[1]&&c[1])):(e=c[1]==="x"?undefined:c[2],b=c[0]);var g=l(a,b);if(!g||g[1]==")")return[b,e];(g[1]=="x"||!g[1])&&d("bop",a+" - "+(g[1]&&g[1]));var h=m(a,g[0]);b=h[0],h=h[1];var i;if(typeof h!="object"||h[0]==="("||k[g[1]][0]<k[h[1]][0])i=[e,g[1],h];else{i=h;while(typeof h[0]=="object"&&h[0][0]!="("&&k[g[1]][0]>=k[h[0][1]][0])h=h[0];h[0]=[e,g[1],h[0]]}return[b,i]}function n(a,b){function c(a){return typeof a!="object"||a===null?a:a[0]==="("?c(a[1]):[c(a[0]),a[1],c(a[2])]}var d=m(a,b?b:0);return[d[0],c(d[1])]}function o(a,b){if(a===undefined)return b;if(a===null||typeof a!="object")return a;var c=o(a[0],b),d=o(a[2],b);return k[a[1]][1](c,d)}function p(a,b,c,e){c||(e={});var f=[],g,i;b||(b=0);for(;;){var j=s(a,b,e);f.push(j[1]),j=h(a,b=j[0]),j&&j[1]===" "&&(j=h(a,b=j[0]));if(!j)break;if(j[1]===">"||j[1]==="~")j[1]==="~"&&(e.usesSiblingOp=!0),f.push(j[1]),b=j[0];else if(j[1]===",")g===undefined?g=[",",f]:g.push(f),f=[],b=j[0];else if(j[1]===")"){c||d("ucp",j[1]),i=1,b=j[0];break}}c&&!i&&d("mcp",a),g&&g.push(f);var k;return!c&&e.usesSiblingOp?k=r(g?g:f):k=g?g:f,[b,k]}function q(a){var b=[],c;for(var d=0;d<a.length;d++)if(a[d]==="~"){if(d<2||a[d-2]!=">")c=a.slice(0,d-1),c=c.concat([{has:[[{pc:":root"},">",a[d-1]]]},">"]),c=c.concat(a.slice(d+1)),b.push(c);if(d>1){var e=a[d-2]===">"?d-3:d-2;c=a.slice(0,e);var f={};for(var g in a[e])a[e].hasOwnProperty(g)&&(f[g]=a[e][g]);f.has||(f.has=[]),f.has.push([{pc:":root"},">",a[d-1]]),c=c.concat(f,">",a.slice(d+1)),b.push(c)}break}return d==a.length?a:b.length>1?[","].concat(b):b[0]}function r(a){if(a[0]===","){var b=[","];for(var c=c;c<a.length;c++){var d=q(d[c]);b=b.concat(d[0]===","?d.slice(1):d)}return b}return q(a)}function s(a,b,c){var f=b,i={},j=h(a,b);j&&j[1]===" "&&(f=b=j[0],j=h(a,b)),j&&j[1]===e.typ?(i.type=j[2],j=h(a,b=j[0])):j&&j[1]==="*"&&(j=h(a,b=j[0]));for(;;){if(j===undefined)break;if(j[1]===e.ide)i.id&&d("nmi",j[1]),i.id=j[2];else if(j[1]===e.psc)(i.pc||i.pf)&&d("mpc",j[1]),j[2]===":first-child"?(i.pf=":nth-child",i.a=0,i.b=1):j[2]===":last-child"?(i.pf=":nth-last-child",i.a=0,i.b=1):i.pc=j[2];else{if(j[1]!==e.psf)break;if(j[2]===":val"||j[2]===":contains")i.expr=[undefined,j[2]===":val"?"=":"*=",undefined],j=h(a,b=j[0]),j&&j[1]===" "&&(j=h(a,b=j[0])),(!j||j[1]!=="(")&&d("pex",a),j=h(a,b=j[0]),j&&j[1]===" "&&(j=h(a,b=j[0])),(!j||j[1]!==e.str)&&d("sex",a),i.expr[2]=j[2],j=h(a,b=j[0]),j&&j[1]===" "&&(j=h(a,b=j[0])),(!j||j[1]!==")")&&d("epex",a);else if(j[2]===":has"){j=h(a,b=j[0]),j&&j[1]===" "&&(j=h(a,b=j[0])),(!j||j[1]!=="(")&&d("pex",a);var k=p(a,j[0],!0);j[0]=k[0],i.has||(i.has=[]),i.has.push(k[1])}else if(j[2]===":expr"){i.expr&&d("mexp",a);var l=n(a,j[0]);j[0]=l[0],i.expr=l[1]}else{(i.pc||i.pf)&&d("mpc",a),i.pf=j[2];var m=g.exec(a.substr(j[0]));m||d("mepf",a),m[5]?(i.a=2,i.b=m[5]==="odd"?1:0):m[6]?(i.a=0,i.b=parseInt(m[6],10)):(i.a=parseInt((m[1]?m[1]:"+")+(m[2]?m[2]:"1"),10),i.b=m[3]?parseInt(m[3]+m[4],10):0),j[0]+=m[0].length}}j=h(a,b=j[0])}return f===b&&d("se",a),[b,i]}function t(b){return Array.isArray?Array.isArray(b):a.call(b)==="[object Array]"}function u(a){if(a===null)return"null";var b=typeof a;return b==="object"&&t(a)&&(b="array"),b}function v(a,b,c,d,e){var f=[],g=b[0]===">"?b[1]:b[0],h=!0,i;g.type&&(h=h&&g.type===u(a)),g.id&&(h=h&&g.id===c),h&&g.pf&&(g.pf===":nth-last-child"?d=e-d:d++,g.a===0?h=g.b===d:(i=(d-g.b)%g.a,h=!i&&d*g.a+g.b>=0));if(h&&g.has){var j=function(){throw 42};for(var k=0;k<g.has.length;k++){try{w(g.has[k],a,j)}catch(l){if(l===42)continue}h=!1;break}}return h&&g.expr&&(h=o(g.expr,a)),b[0]!==">"&&b[0].pc!==":root"&&f.push(b),h&&(b[0]===">"?b.length>2&&(h=!1,f.push(b.slice(2))):b.length>1&&(h=!1,f.push(b.slice(1)))),[h,f]}function w(a,b,c,d,e,f){var g=a[0]===","?a.slice(1):[a],h=[],i=!1,j=0,k=0,l,m;for(j=0;j<g.length;j++){m=v(b,g[j],d,e,f),m[0]&&(i=!0);for(k=0;k<m[1].length;k++)h.push(m[1][k])}if(h.length&&typeof b=="object"){h.length>=1&&h.unshift(",");if(t(b))for(j=0;j<b.length;j++)w(h,b[j],c,undefined,j,b.length);else for(l in b)b.hasOwnProperty(l)&&w(h,b[l],c,l)}i&&c&&c(b)}function x(a,b){var c=[];return w(a,b,function(a){c.push(a)}),c}function y(a){return{sel:p(a)[1],match:function(a){return x(this.sel,a)},forEach:function(a,b){return w(this.sel,a,b)}}}var a=Object.prototype.toString,c={bop:"binary operator expected",ee:"expression expected",epex:"closing paren expected ')'",ijs:"invalid json string",mcp:"missing closing paren",mepf:"malformed expression in pseudo-function",mexp:"multiple expressions not allowed",mpc:"multiple pseudo classes (:xxx) not allowed",nmi:"multiple ids not allowed",pex:"opening paren expected '('",se:"selector expected",sex:"string expected",sra:"string required after '.'",uc:"unrecognized char",ucp:"unexpected closing paren",ujs:"unclosed json string",upc:"unrecognized pseudo class"},e={psc:1,psf:2,typ:3,str:4,ide:5},f=new RegExp('^(?:([\\r\\n\\t\\ ]+)|([~*,>\\)\\(])|(string|boolean|null|array|object|number)|(:(?:root|first-child|last-child|only-child))|(:(?:nth-child|nth-last-child|has|expr|val|contains))|(:\\w+)|(?:(\\.)?(\\"(?:[^\\\\\\"]|\\\\[^\\"])*\\"))|(\\")|\\.((?:[_a-zA-Z]|[^\\0-\\0177]|\\\\[^\\r\\n\\f0-9a-fA-F])(?:[_a-zA-Z0-9\\-]|[^\\u0000-\\u0177]|(?:\\\\[^\\r\\n\\f0-9a-fA-F]))*))'),g=/^\s*\(\s*(?:([+\-]?)([0-9]*)n\s*(?:([+\-])\s*([0-9]))?|(odd|even)|([+\-]?[0-9]+))\s*\)/,i=new RegExp('^\\s*(?:(true|false|null)|(-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?)|("(?:[^\\]|\\[^"])*")|(x)|(&&|\\|\\||[\\$\\^<>!\\*]=|[=+\\-*/%<>])|([\\(\\)]))'),k={"*":[9,function(a,b){return a*b}],"/":[9,function(a,b){return a/b}],"%":[9,function(a,b){return a%b}],"+":[7,function(a,b){return a+b}],"-":[7,function(a,b){return a-b}],"<=":[5,function(a,b){return j(a,"number")&&j(b,"number")&&a<=b}],">=":[5,function(a,b){return j(a,"number")&&j(b,"number")&&a>=b}],"$=":[5,function(a,b){return j(a,"string")&&j(b,"string")&&a.lastIndexOf(b)===a.length-b.length}],"^=":[5,function(a,b){return j(a,"string")&&j(b,"string")&&a.indexOf(b)===0}],"*=":[5,function(a,b){return j(a,"string")&&j(b,"string")&&a.indexOf(b)!==-1}],">":[5,function(a,b){return j(a,"number")&&j(b,"number")&&a>b}],"<":[5,function(a,b){return j(a,"number")&&j(b,"number")&&a<b}],"=":[3,function(a,b){return a===b}],"!=":[3,function(a,b){return a!==b}],"&&":[2,function(a,b){return a&&b}],"||":[1,function(a,b){return a||b}]};exports._lex=h,exports._parse=p,exports.match=function(a,b){return y(a).match(b)},exports.forEach=function(a,b,c){return y(a).forEach(b,c)},exports.compile=y}(typeof exports=="undefined"?window.JSONSelect={}:exports),define("libs/jsonselect",function(){}),define("tau/extensions/extension.underscore",["libs/underscore","libs/jsonselect"],function(_){return _.mixin({keysExt:function(a){if(_.isArray(a))return _.keys(a);var b=[];for(var c in a)b.push(c);return b},findComplexField:function(a,b){var c=null,d=this;return _.each(a,function(a){if(d.isSimple(a))return;if(!a.hasOwnProperty(b))return;c=a}),c},concat:function(a){return _.flatten(_.compact(a))},getFieldName:function(a){if(this.isSimple(a))return a;var b=_.select(_.keys(a),function(a){return a!=="list"});if(b.length>1||b.length===0)throw"Only one reference or list should be defined";return b[0]},isSimple:function(a){return _.isString(a)},mergeFields:function(a,b,c){var d=this,e=c&&c.prependFields?"unshift":"push";return _.each(b,function(b){if(a===b)return;if(d.isSimple(b)){var c=_.select(a,function(a){return a===b});c.length===0&&a[e](b);return}var f=d.getFieldName(b),g=d.findComplexField(a,f);if(g===null){a[e](b);return}var h=b[f],i=g[f];d.mergeFields(i,h)}),a},mergeArrayObjects:function(a,b,c){_.each(_(a).keys(),function(d){if(!_.isArray(a[d]))return;if(!_.isArray(b[d]))return;if(c&&_.isArray(c)&&_(c).indexOf(d)<0)return;a[d]=a[d].concat(b[d])})},functionsExt:function(a){return _.filter(_.keysExt(a),function(b){return _.isFunction(a[b])}).sort()},groupBy:function(a,b){var c=[],d={};return _(a).each(function(a){var e=b(a);if(!d.hasOwnProperty(e)){var f={key:e,items:[]};c.push(f),d[e]=f}d[e].items.push(a)}),c},complexKey:function(a,b){var c=undefined,d=b.split(".");return d.length===1?a[b]:(_.forEach(d,function(b){c=a=a[b];if(_.isUndefined(c)===!0)return!1}),c)},jsonSelect:function(a,b){return JSONSelect.match(b,a)},inArray:function(a,b){return _.indexOf(b,a)>-1},asString:function(a){return(new String(a||"")).toString()}}),_.MIN_INT=-9007199254740992,_.MAX_INT=-_.MIN_INT,_}),define("libs/async/async",[],function(){var a={};return function(){var b=this,c=b.async;typeof module!="undefined"&&module.exports?module.exports=a:b.async=a,a.noConflict=function(){return b.async=c,a};var d=function(a,b){if(a.forEach)return a.forEach(b);for(var c=0;c<a.length;c+=1)b(a[c],c,a)},e=function(a,b){if(a.map)return a.map(b);var c=[];return d(a,function(a,d,e){c.push(b(a,d,e))}),c},f=function(a,b,c){return a.reduce?a.reduce(b,c):(d(a,function(a,d,e){c=b(c,a,d,e)}),c)},g=function(a){if(Object.keys)return Object.keys(a);var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b},h=function(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c+=1)if(a[c]===b)return c;return-1};typeof process=="undefined"||!process.nextTick?a.nextTick=function(a){setTimeout(a,0)}:a.nextTick=process.nextTick,a.forEach=function(a,b,c){if(!a.length)return c();var e=0;d(a,function(d){b(d,function(b){b?(c(b),c=function(){}):(e+=1,e===a.length&&c())})})},a.forEachSeries=function(a,b,c){if(!a.length)return c();var d=0,e=function(){b(a[d],function(b){b?(c(b),c=function(){}):(d+=1,d===a.length?c():e())})};e()};var i=function(b){return function(){var c=Array.prototype.slice.call(arguments);return b.apply(null,[a.forEach].concat(c))}},j=function(b){return function(){var c=Array.prototype.slice.call(arguments);return b.apply(null,[a.forEachSeries].concat(c))}},k=function(a,b,c,d){var f=[];b=e(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c,d){f[a.index]=d,b(c)})},function(a){d(a,f)})};a.map=i(k),a.mapSeries=j(k),a.reduce=function(b,c,d,e){a.forEachSeries(b,function(a,b){d(c,a,function(a,d){c=d,b(a)})},function(a){e(a,c)})},a.inject=a.reduce,a.foldl=a.reduce,a.reduceRight=function(b,c,d,f){var g=e(b,function(a){return a}).reverse();a.reduce(g,c,d,f)},a.foldr=a.reduceRight;var l=function(a,b,c,d){var f=[];b=e(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c){c&&f.push(a),b()})},function(a){d(e(f.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})};a.filter=i(l),a.filterSeries=j(l),a.select=a.filter,a.selectSeries=a.filterSeries;var m=function(a,b,c,d){var f=[];b=e(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c){c||f.push(a),b()})},function(a){d(e(f.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})};a.reject=i(m),a.rejectSeries=j(m);var n=function(a,b,c,d){a(b,function(a,b){c(a,function(c){c?d(a):b()})},function(a){d()})};a.detect=i(n),a.detectSeries=j(n),a.some=function(b,c,d){a.forEach(b,function(a,b){c(a,function(a){a&&(d(!0),d=function(){}),b()})},function(a){d(!1)})},a.any=a.some,a.every=function(b,c,d){a.forEach(b,function(a,b){c(a,function(a){a||(d(!1),d=function(){}),b()})},function(a){d(!0)})},a.all=a.every,a.sortBy=function(b,c,d){a.map(b,function(a,b){c(a,function(c,d){c?b(c):b(null,{value:a,criteria:d})})},function(a,b){if(a)return d(a);var c=function(a,b){var c=a.criteria,d=b.criteria;return c<d?-1:c>d?1:0};d(null,e(b.sort(c),function(a){return a.value}))})},a.auto=function(a,b){b=b||function(){};var c=g(a);if(!c.length)return b(null);var e=[],i=[],j=function(a){i.unshift(a)},k=function(a){for(var b=0;b<i.length;b+=1)if(i[b]===a){i.splice(b,1);return}},l=function(){d(i,function(a){a()})};j(function(){e.length===c.length&&b(null)}),d(c,function(c){var d=a[c]instanceof Function?[a[c]]:a[c],g=function(a){a?(b(a),b=function(){}):(e.push(c),l())},i=d.slice(0,Math.abs(d.length-1))||[],m=function(){return f(i,function(a,b){return a&&h(e,b)!==-1},!0)};if(m())d[d.length-1](g);else{var n=function(){m()&&(k(n),d[d.length-1](g))};j(n)}})},a.waterfall=function(b,c){if(!b.length)return c();c=c||function(){};var d=function(b){return function(e){if(e)c(e),c=function(){};else{var f=Array.prototype.slice.call(arguments,1),g=b.next();g?f.push(d(g)):f.push(c),a.nextTick(function(){b.apply(null,f)})}}};d(a.iterator(b))()},a.parallel=function(b,c){c=c||function(){};if(b.constructor===Array)a.map(b,function(a,b){a&&a(function(a){var c=Array.prototype.slice.call(arguments,1);c.length<=1&&(c=c[0]),b.call(null,a,c||null)})},c);else{var d={};a.forEach(g(b),function(a,c){b[a](function(b){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),d[a]=e,c(b)})},function(a){c(a,d)})}},a.series=function(b,c){c=c||function(){};if(b.constructor===Array)a.mapSeries(b,function(a,b){a&&a(function(a){var c=Array.prototype.slice.call(arguments,1);c.length<=1&&(c=c[0]),b.call(null,a,c||null)})},c);else{var d={};a.forEachSeries(g(b),function(a,c){b[a](function(b){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),d[a]=e,c(b)})},function(a){c(a,d)})}},a.iterator=function(a){var b=function(c){var d=function(){return a.length&&a[c].apply(null,arguments),d.next()};return d.next=function(){return c<a.length-1?b(c+1):null},d};return b(0)},a.apply=function(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b.concat(Array.prototype.slice.call(arguments)))}};var o=function(a,b,c,d){var e=[];a(b,function(a,b){c(a,function(a,c){e=e.concat(c||[]),b(a)})},function(a){d(a,e)})};a.concat=i(o),a.concatSeries=j(o),a.whilst=function(b,c,d){b()?c(function(e){if(e)return d(e);a.whilst(b,c,d)}):d()},a.until=function(b,c,d){b()?d():c(function(e){if(e)return d(e);a.until(b,c,d)})},a.queue=function(b,c){var d=0,e=[],f={concurrency:c,push:function(b,c){e.push({data:b,callback:c}),a.nextTick(f.process)},process:function(){if(d<f.concurrency&&e.length){var a=e.splice(0,1)[0];d+=1,b(a.data,function(){d-=1,a.callback&&a.callback.apply(a,arguments),f.process()})}},length:function(){return e.length}};return f};var p=function(a){return function(b){var c=Array.prototype.slice.call(arguments,1);b.apply(null,c.concat([function(b){var c=Array.prototype.slice.call(arguments,1);typeof console!="undefined"&&(b?console.error&&console.error(b):console[a]&&d(c,function(b){console[a](b)}))}]))}};a.log=p("log"),a.dir=p("dir"),a.memoize=function(a,b){var c={};return b=b||function(a){return a},function(){var d=Array.prototype.slice.call(arguments),e=d.pop(),f=b.apply(null,d);f in c?e.apply(null,c[f]):a.apply(null,d.concat([function(){c[f]=arguments,e.apply(null,arguments)}]))}}}(),a}),define("tau/extensions/extension.underscore.async",["libs/underscore","libs/async/async"],function(_,a){_.mixin({parallel:a.parallel,series:a.series})}),define("libs/underscore/underscore.string",["libs/underscore"],function(_){(function(a){if(typeof _!="undefined")var b=_().reverse,c=_.include;var d=String.prototype.trim,e=function(a){return a*1||0},f=function(a,b){for(var c=[];b>0;c[--b]=a);return c.join("")},g=function(a){return Array.prototype.slice.call(a)},h=function(a){return a?k.escapeRegExp(a):"\\s"},i=function(a){return function(){var b=g(arguments);for(var c=0;c<b.length;c++)b[c]=b[c]==null?"":""+b[c];return a.apply(null,b)}},j=function(){function a(a){return Object.prototype.toString.call(a).slice(8,-1).toLowerCase()}var b=f,c=function(){return c.cache.hasOwnProperty(arguments[0])||(c.cache[arguments[0]]=c.parse(arguments[0])),c.format.call(null,c.cache[arguments[0]],arguments)};return c.format=function(c,d){var e=1,f=c.length,g="",h,i=[],k,l,m,n,o,p;for(k=0;k<f;k++){g=a(c[k]);if(g==="string")i.push(c[k]);else if(g==="array"){m=c[k];if(m[2]){h=d[e];for(l=0;l<m[2].length;l++){if(!h.hasOwnProperty(m[2][l]))throw j('[_.sprintf] property "%s" does not exist',m[2][l]);h=h[m[2][l]]}}else m[1]?h=d[m[1]]:h=d[e++];if(/[^s]/.test(m[8])&&a(h)!="number")throw j("[_.sprintf] expecting number but found %s",a(h));switch(m[8]){case"b":h=h.toString(2);break;case"c":h=String.fromCharCode(h);break;case"d":h=parseInt(h,10);break;case"e":h=m[7]?h.toExponential(m[7]):h.toExponential();break;case"f":h=m[7]?parseFloat(h).toFixed(m[7]):parseFloat(h);break;case"o":h=h.toString(8);break;case"s":h=(h=String(h))&&m[7]?h.substring(0,m[7]):h;break;case"u":h=Math.abs(h);break;case"x":h=h.toString(16);break;case"X":h=h.toString(16).toUpperCase()}h=/[def]/.test(m[8])&&m[3]&&h>=0?"+"+h:h,o=m[4]?m[4]=="0"?"0":m[4].charAt(1):" ",p=m[6]-String(h).length,n=m[6]?b(o,p):"",i.push(m[5]?h+n:n+h)}}return i.join("")},c.cache={},c.parse=function(a){var b=a,c=[],d=[],e=0;while(b){if((c=/^[^\x25]+/.exec(b))!==null)d.push(c[0]);else if((c=/^\x25{2}/.exec(b))!==null)d.push("%");else{if((c=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(b))===null)throw"[_.sprintf] huh?";if(c[2]){e|=1;var f=[],g=c[2],h=[];if((h=/^([a-z_][a-z_\d]*)/i.exec(g))===null)throw"[_.sprintf] huh?";f.push(h[1]);while((g=g.substring(h[0].length))!=="")if((h=/^\.([a-z_][a-z_\d]*)/i.exec(g))!==null)f.push(h[1]);else if((h=/^\[(\d+)\]/.exec(g))!==null)f.push(h[1]);else throw"[_.sprintf] huh?";c[2]=f}else e|=2;if(e===3)throw"[_.sprintf] mixing positional and named placeholders is not (yet) supported";d.push(c)}b=b.substring(c[0].length)}return d},c}(),k={isBlank:i(function(a){return/^\s*$/.test(a)}),stripTags:i(function(a){return a.replace(/<\/?[^>]+>/ig,"")}),capitalize:i(function(a){return a.charAt(0).toUpperCase()+a.substring(1).toLowerCase()}),chop:i(function(a,b){b=e(b)||a.length;var c=[];for(var d=0;d<a.length;)c.push(a.slice(d,d+b)),d+=b;return c}),clean:i(function(a){return k.strip(a.replace(/\s+/g," "))}),count:i(function(a,b){var c=0,d;for(var e=0;e<a.length;)d=a.indexOf(b,e),d>=0&&c++,e=e+(d>=0?d:0)+b.length;return c}),chars:i(function(a){return a.split("")}),escapeHTML:i(function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}),unescapeHTML:i(function(a){return a.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&amp;/g,"&")}),escapeRegExp:i(function(a){return a.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")}),insert:i(function(a,b,c){var d=a.split("");return d.splice(e(b),0,c),d.join("")}),includes:i(function(a,b){return a.indexOf(b)!==-1}),include:function(a,b){return!c||/string|number/.test(typeof a)?this.includes(a,b):c(a,b)},join:i(function(a){var b=g(arguments);return b.join(b.shift())}),lines:i(function(a){return a.split("\n")}),reverse:function(a){return!b||/string|number/.test(typeof a)?Array.prototype.reverse.apply(String(a).split("")).join(""):b.call(_(a))},splice:i(function(a,b,c,d){var f=a.split("");return f.splice(e(b),e(c),d),f.join("")}),startsWith:i(function(a,b){return a.length>=b.length&&a.substring(0,b.length)===b}),endsWith:i(function(a,b){return a.length>=b.length&&a.substring(a.length-b.length)===b}),succ:i(function(a){var b=a.split("");return b.splice(a.length-1,1,String.fromCharCode(a.charCodeAt(a.length-1)+1)),b.join("")}),titleize:i(function(a){var b=a.split(" "),c;for(var d=0;d<b.length;d++)c=b[d].split(""),typeof c[0]!="undefined"&&(c[0]=c[0].toUpperCase()),d+1===b.length?b[d]=c.join(""):b[d]=c.join("")+" ";return b.join("")}),camelize:i(function(a){return k.trim(a).replace(/(\-|_|\s)+(.)?/g,function(a,b,c){return c?c.toUpperCase():""})}),underscored:function(a){return k.trim(a).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/\-|\s+/g,"_").toLowerCase()},dasherize:function(a){return k.trim(a).replace(/([a-z\d])([A-Z]+)/g,"$1-$2").replace(/^([A-Z]+)/,"-$1").replace(/\_|\s+/g,"-").toLowerCase()},trim:i(function(a,b){return!b&&d?d.call(a):(b=h(b),a.replace(new RegExp("^["+b+"]+|["+b+"]+$","g"),""))}),ltrim:i(function(a,b){return b=h(b),a.replace(new RegExp("^["+b+"]+","g"),"")}),rtrim:i(function(a,b){return b=h(b),a.replace(new RegExp("["+b+"]+$","g"),"")}),truncate:i(function(a,b,c){return c=c||"...",b=e(b),a.length>b?a.slice(0,b)+c:a}),prune:i(function(a,b,c){c=c||"...",b=e(b);var d="";return a.substring(b-1,b+1).search(/^\w\w$/)===0?d=k.rtrim(a.slice(0,b).replace(/([\W][\w]*)$/,"")):d=k.rtrim(a.slice(0,b)),d=d.replace(/\W+$/,""),d.length+c.length>a.length?a:d+c}),words:function(a,b){return String(a).split(b||" ")},pad:i(function(a,b,c,d){var g="",h=0;b=e(b),c?c.length>1&&(c=c.charAt(0)):c=" ";switch(d){case"right":h=b-a.length,g=f(c,h),a+=g;break;case"both":h=b-a.length,g={left:f(c,Math.ceil(h/2)),right:f(c,Math.floor(h/2))},a=g.left+a+g.right;break;default:h=b-a.length,g=f(c,h),a=g+a}return a}),lpad:function(a,b,c){return k.pad(a,b,c)},rpad:function(a,b,c){return k.pad(a,b,c,"right")},lrpad:function(a,b,c){return k.pad(a,b,c,"both")},sprintf:j,vsprintf:function(a,b){return b.unshift(a),j.apply(null,b)},toNumber:function(a,b){var c=e(e(a).toFixed(e(b)));return c!==0||a==="0"||a===0?c:Number.NaN},strRight:i(function(a,b){var c=b?a.indexOf(b):-1;return c!=-1?a.slice(c+b.length,a.length):a}),strRightBack:i(function(a,b){var c=b?a.lastIndexOf(b):-1;return c!=-1?a.slice(c+b.length,a.length):a}),strLeft:i(function(a,b){var c=b?a.indexOf(b):-1;return c!=-1?a.slice(0,c):a}),strLeftBack:i(function(a,b){var c=a.lastIndexOf(b);return c!=-1?a.slice(0,c):a})};k.strip=k.trim,k.lstrip=k.ltrim,k.rstrip=k.rtrim,k.center=k.lrpad,k.ljust=k.lpad,k.rjust=k.rpad,_.mixin(k)})(this||window)}),define("Underscore",["libs/underscore","tau/extensions/extension.underscore","tau/extensions/extension.underscore.async","libs/underscore/underscore.string"],function(_){return _})