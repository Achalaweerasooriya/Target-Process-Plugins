define(["require","jQuery","Underscore","libs/parseUri","tau/service.container","tau/configurator","tracking/tracking.headers","tau/services/service.navigator","tau/components/component.application.generic","tau/ui/extensions/application.generic/ui.extension.application.generic.boardSpecific","tau/components/extensions/extension.tracking.performance","tau/components/extensions/extension.views.menu.comet.listener","tau/components/extensions/dashboard/extension.dashboard.widget.registry.builder","main.boardplus.login","main.boardplus.routes","tp/mashups.loader","Modernizr","tracking/tauspy","tau/ui/behaviour/common/ui.behaviour.dnd"],function(e){function n(e){var n=new o;n._id=t.uniqueId("board_"),n.isBoardEdition=!0,n.setWindow(window),n.setFeaturesService(n.getWindow().tauFeatures),n.setLoggedUser(n.getWindow().loggedUser);var i=new u(n,{parameterName:e});return n.registerService("navigator",i),n}var i=e("jQuery"),t=e("Underscore"),a=e("libs/parseUri"),o=e("tau/service.container"),r=e("tau/configurator"),s=e("tracking/tracking.headers"),u=e("tau/services/service.navigator"),c=e("tau/components/component.application.generic"),d=e("tau/ui/extensions/application.generic/ui.extension.application.generic.boardSpecific"),p=e("tau/components/extensions/extension.tracking.performance"),g=e("tau/components/extensions/extension.views.menu.comet.listener"),l=e("tau/components/extensions/dashboard/extension.dashboard.widget.registry.builder"),m=e("main.boardplus.login"),v=e("main.boardplus.routes"),b=e("tp/mashups.loader");e("Modernizr"),e("tracking/tauspy"),e("tau/ui/behaviour/common/ui.behaviour.dnd"),r.isBoardEdition=!0,i(function(){s.trackByDefault();var i="page",t=n(i),o=r.getGlobalBus();if(tauFeatures["load.progress"]){var u={},f=function(){o.removeAllListeners(u),setTimeout(function(){tauLoadProgress.activityEnd("app.init").remove()},4)};o.addEventListener("error",f,u),o.addEventListener("contentRendered",f,u)}new m(t,i).process().then(function(){var n={name:"application board",options:{applicationId:i},routes:v.createApplicationRoutes(),context:{configurator:t},extensions:[d,p,g,l]},o=function(){var e=c.create(n);
tauFeatures["load.progress"]&&tauLoadProgress.activityEnd("user.mashups").activity("app.init"),e.initialize(n)};a(location.href).hasQueryKey("nomashups")?o():t.getFeaturesService().isEnabled("mashups.loader")?b.initDeferred.done(function(){b.loadState.beforeAppInit.status.done(function(){o()})}):e(["user/mashups"],function(){o()})})})});