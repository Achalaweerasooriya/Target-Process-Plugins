define(["Underscore","jQuery","tau/core/event","tests.async/testkit/testkit.component.board","tau/components/component.board.plus","tests/common/remoteConstants"],function(_,$,a,b,c,d){var e=new b(c);e.registerSetup("fixtures",function(a,b){a.set("real",!1);var c={us:d.EntityTypes.USERSTORY,release:d.EntityTypes.RELEASE,feature:d.EntityTypes.FEATURE},e={planning:{id:d.Practices.PLANNING.id},requirements:{id:d.Practices.REQUIREMENTS.id}},f={scrum:{name:"scrum"+ +(new Date),practices:["planning","requirements"]}},g={p_scrum:{name:"Project Scrum"+ +(new Date),process:"scrum"}},h={},i={};for(var j=0;j<4;j++){var k="release"+j;h[k]={name:"Release_"+j+"_"+ +(new Date),entityType:"release",project:"p_scrum"};var l="feature"+j;i[l]={name:"Feature_"+j+"_"+ +(new Date),entityType:"feature",project:"p_scrum",release:k}}var m={};_(h).chain().keys().each(function(a){_(i).chain().keys().each(function(b){for(var c=0;c<4;c++){var d=["us",a,b,c].join("_");m[d]={name:d,entityType:"us",project:"p_scrum",release:a,feature:b}}})});var n={entityTypes:c,practices:e,processes:f,projects:g,releases:h,features:i};a.set("fixtures",n),b()}),e.registerSetup("board.settings",function(a,b){a.set("boardKey",_.uniqueId()),b()});var f={name:"component.board.plus.axis"};return f["collapse should work"]=e.test(function(b){var c=b.get("bus"),d={bus:c,"bus afterRender[0]":function(a){var c=a.data.element,d=c.find("[role=header][data-dimension=x]");b.equals(d.length,1,"Show header");var e=d.find("[role=cellholder]");b.ok(e.length>0,"Show cols");var f=e.find("[role=collapser]");b.equals(e.length,f.length,"Show expanders");var g=c.find("[role=header][data-dimension=y]");b.equals(g.length,1,"Show header");var h=g.find("[role=cellholder]");b.ok(h.length>0,"Show cols");var i=h.find("[role=collapser]");b.equals(h.length,i.length,"Show expanders");var j=f.eq(1),k=e.eq(1),l=k.find("[role=cell]").data("x"),m=c.find("[role=grid] [role=cellholder]:has([role=cell][data-x="+l+"])");b.ok(m.length>0,"Column cells"),j.click(),b.ok(k.hasClass("tau-collapsed"),"Add class"),b.ok(m.hasClass("tau-collapsed"),"Add class"),b.ok(m.hasClass("tau-collapsed_x"),"Add class"),j.click(),b.ok(!k.hasClass("tau-collapsed"),"Remove class"),b.ok(!m.hasClass("tau-collapsed"),"Remove class"),b.ok(!m.hasClass("tau-collapsed_x"),"Remove class");var n=i.eq(2),o=h.eq(2),p=o.find("[role=cell]").data("y"),q=c.find("[role=grid] [role=cellholder]:has([role=cell][data-y="+p+"])");b.ok(q.length>0,"Column cells"),n.click(),b.ok(o.hasClass("tau-collapsed"),"Add class"),b.ok(q.hasClass("tau-collapsed"),"Add class"),b.ok(q.hasClass("tau-collapsed_y"),"Add class"),n.click(),b.ok(!o.hasClass("tau-collapsed"),"Remove class"),b.ok(!q.hasClass("tau-collapsed"),"Remove class"),b.ok(!q.hasClass("tau-collapsed_y"),"Remove class"),j.click(),n.click(),b.ok(m.eq(0).hasClass("tau-collapsed_x"),"Add class"),b.ok(m.eq(1).hasClass("tau-collapsed_x"),"Add class"),b.ok(m.eq(2).hasClass("tau-collapsed_x"),"Add class"),b.ok(m.eq(2).hasClass("tau-collapsed_y"),"Add class, combine"),b.ok(m.eq(2).hasClass("tau-collapsed"),"Add class, combine"),j.click(),b.ok(!m.eq(0).hasClass("tau-collapsed_x"),"Remove class"),b.ok(!m.eq(1).hasClass("tau-collapsed_x"),"Remove class"),b.ok(!m.eq(2).hasClass("tau-collapsed_x"),"Remove class"),b.ok(m.eq(2).hasClass("tau-collapsed_y"),"Add class, combine"),b.ok(m.eq(2).hasClass("tau-collapsed"),"Add class, combine"),n.click(),b.ok(!m.eq(2).hasClass("tau-collapsed_x"),"Remove class"),b.ok(!m.eq(2).hasClass("tau-collapsed_y"),"Remove class, combine"),b.ok(!m.eq(2).hasClass("tau-collapsed"),"Remove class, combine"),b.done()}};a.subscribeOn(d)}),f["focus should work"]=e.test(function(b){var c=b.get("bus"),d={bus:c,"bus afterRender[0]":function(a){var c=a.data.element,d=c.find("[role=action-focus]"),e=c.find("[role=action-unfocus]");b.equals(d.length,1,"Actions"),b.equals(e.length,1,"Actions"),b.ok(d.is(":disabled"),"Disabled by default"),b.ok(e.is(":disabled"),"Disabled by default");var f=c.find("[role=header][data-dimension=x]"),g=c.find("[role=header][data-dimension=y]");b.equals(f.length,1,"Show header");var h=f.find("[role=cellholder]");b.ok(h.length>0,"Show cols");var i=f.find("[name=focus]");b.equals(i.length,h.length,"Focusers");var j=i.eq(2),k=h.eq(2),l=k.find("[role=cell]").data("x"),m=c.find("[role=grid] [role=cellholder]:has([role=cell][data-x="+l+"])");b.ok(!j.prop("checked"),"not checked"),j.prop("checked",!0),j.trigger("change"),b.ok(d.is(":enabled"),"Enabled"),b.ok(!e.is(":enabled"),"Enabled"),b.ok(m.hasClass("tau-selected"),"Selected"),b.done()}};a.subscribeOn(d)}),f})