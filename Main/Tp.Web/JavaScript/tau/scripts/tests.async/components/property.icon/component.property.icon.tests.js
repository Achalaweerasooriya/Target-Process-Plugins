define(["jQuery","tests.async/testkit/testkit.component","tau/components/component.property.icon","tests/common/remoteConstants","tau/ui/extensions/container/ui.extension.container.childrenEvents"],function($,TestKit,Component,Constants,ExtensionChildrenEvents){var testKit=new TestKit(Component);testKit.registerSetup("fixtures",function(test,next){var entityTypes={team:{id:Constants.EntityTypes.TEAM,name:"team"}},teams={t1:{name:"TEAM A"+ +(new Date),icon:"devil"}};test.set("fixtures",{entityTypes:entityTypes,teams:teams}),next()}),testKit.registerSetup("componentBus",function(test,next){test.set("componentBus",test.get("componentClass").create({extensions:[ExtensionChildrenEvents],values:["god","devil","kill","death"]})),next()}),testKit.registerSetup("component.initialize",function(test,next){var testData=test.get("data"),componentBus=test.get("componentBus");componentBus.initialize({context:{entity:_.extend(testData.team.t1,{entityType:testData.entityType.team}),configurator:test.get("configuratorInstance")}}),next()});var testcase={name:"component.property.icon"};return testcase["should render valid markup and allow to edit"]=testKit.test(function(test){testKit.flow(test,{"bus afterRender[0]":function(evt,renderData){var $el=renderData.element,$output=$el.find(".i-role-output"),$icon=$output.children().eq(0);test.equals($icon.hasClass("tau-icon_type_svg"),!0,"show icon"),test.equals($icon.hasClass("tau-icon_name_devil"),!0,"show icon"),$output.click();var $bubble=$output.tauBubble("widget");test.equals($bubble.length,1,"show bubble"),test.equals($bubble!==$output,!0,"show bubble")},"bus afterRender[0] + icon.afterRender[0]":function(evt,renderData,listRenderData){var $bubble=listRenderData.element,$options=$bubble.find("[role=option]");test.equals($options.length,4,"options");var $optionSel=$options.eq(1);test.equals($optionSel.children().hasClass("tau-icon_name_god"),!0,"option 1"),$optionSel.click()},"bus afterRender[1]":function(evt,renderData,listRenderData){var $el=renderData.element,$icon=$el.find(".i-role-output").children();test.equals($icon.hasClass("tau-icon_type_svg"),!0,"show icon"),test.equals($icon.hasClass("tau-icon_name_god"),!0,"show icon"),test.done()}})}),testcase})