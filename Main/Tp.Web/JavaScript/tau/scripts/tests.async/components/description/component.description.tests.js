define(["tau/components/component.description","tau/configurator","tau/service.container","tau/utils/utils.fixturesLoader.store","tests/common/remoteConstants","libs.tests/Sinon","tau/core/bus","tau/utils/utils.process"],function(a,b,c,d,e,f,g,h){var i={name:"component.description"},j=null,k={},l=b.getConfig("real",!1),m;return i.setUp=function(a){var b={us:{id:e.EntityTypes.USERSTORY.id,name:"userStory"}},f={planning:{id:e.Practices.PLANNING.id}},g={scrum:{name:"scream"+parseInt(Math.random()*1e11),practices:["planning"]}},h={p_scrum:{name:"Project Scrum"+parseInt(Math.random()*1e7),process:"scrum"}},i={us1:{name:"US1",project:"p_scrum",entityType:"us",description:"Hell yeah"}},j={practices:f,processes:g,entityType:b,projects:h,userStories:i};m=new c;var n=new d({store:m.getStore(),real:l});n.load(j,function(b,c){b?a(b):(k=c.data,a())})},i.tearDown=function(a){a()},i["render and save"]=function(b){var c=a.create(),d=m.getStore();d.on({eventName:"failure"},function(){b.fail("store failure"),b.done()}),l==0&&f.stub(d.config.proxy.service,"save",function(a){setTimeout(function(){a.callbacks.success({id:a.config.id})},100)});var e=new g,i=0;c.on("afterRender",function(a){h.nextTick(function(){e.fire("afterRender["+i+"]",{element:a.data.element}),i++})}),e.on("afterRender[0]",function(a){var c=a.data.element;b.equals(c.length,1,"Element rendered"),b.equals(_.trim(c.text()),"Hell yeah","Init description correct"),c.children().dblclick();var d=c.find("textarea");b.equals(d.length,1,"Element for edit rendered");var e=c.find("button");b.equals(e.length,2,"Buttons for edit rendered"),d.val("bzz"),e.eq(0).click()}),e.on("afterRender[1]",function(a){var c=a.data.element;b.equals(c.length,1,"Element rendered"),b.equals(_.trim(c.text()),"bzz","Descripotion changed"),b.done()});var j={entity:k.userStory.us1};c.initialize({context:j,store:d})},i})