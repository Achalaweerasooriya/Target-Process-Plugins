define(["jQuery","tests.async/testkit/testkit.component","tau/components/component.list","tau/models/dataProviders/user/user.model.provider.teams.items","tests/common/remoteConstants"],function($,TestKit,Component,TeamItemsDataProvider,Constants){var testKit=new TestKit(Component);testKit.registerSetup("fixtures",function(test,next){var entityTypes={user:{id:Constants.EntityTypes.USER.id,name:"user"}},practices={planning:{id:Constants.Practices.PLANNING.id}},processes={scrum:{name:"scream"+parseInt(Math.random()*1e11),practices:["planning"]}},projects={project1:{name:"Project 1"+parseInt(Math.random()*1e11),process:"scrum"}},teams={teamA:{name:"team A"+parseInt(Math.random()*1e11)},teamB:{name:"team B"+parseInt(Math.random()*1e11)},teamC:{name:"team C"+parseInt(Math.random()*1e11)},teamD:{name:"team D"+parseInt(Math.random()*1e11)},teamE:{name:"team E"+parseInt(Math.random()*1e11)}},users={user1:{firstName:"Ivan",lastName:"Pupkin",email:"pupkin"+ +(new Date)+"@example.com",login:"pupkin"+ +(new Date),password:123123,entityType:"user"}},roles={admin:{name:"Admin"+ +(new Date)},qa:{name:"QA"+ +(new Date)}},teamMembers={tm1:{team:"teamA",user:"user1",role:"qa"},tm2:{team:"teamC",user:"user1",role:"admin"},tm3:{team:"teamD",user:"user1",role:"admin"}},fixtures={entityTypes:entityTypes,practices:practices,processes:processes,projects:projects,users:users,roles:roles,teams:teams,teamMembers:teamMembers};test.set("fixtures",fixtures),next()}),testKit.registerSetup("componentBus",function(test,next){var componentConfig={itemsDataProvider:TeamItemsDataProvider,views:[{type:"grid.entity",emptyMessage:"No teams was assigned",rowTemplateName:"list-grid-entity__rowteam_user"}],context:{configurator:test.get("configurator"),getTimeTrackingPolicies:function(){return[]}}};test.set("componentBus",test.get("componentClass").create(componentConfig)),next()}),testKit.registerSetup("component.initialize",function(test,next){var testData=test.get("data"),componentBus=test.get("componentBus");testData.user.user1.entityType={name:"user"},componentBus.initialize({context:{entity:testData.user.user1,applicationContext:{processes:[testData.process.scrum]},getTerms:function(){return{}},configurator:test.get("configuratorInstance")}}),next()});var testcase={name:"component.list.user.teams"};return testcase["should render valid markup and allow to edit"]=testKit.test(function(test){return testKit.flow(test,{"bus afterRender[0]":function(evt,renderData){var $el=renderData.element;test.equals($el.length,1,"render list");var $items=$el.find("[role=item]");test.equals($items.length,3,"3 teams"),test.done()}})}),testcase})