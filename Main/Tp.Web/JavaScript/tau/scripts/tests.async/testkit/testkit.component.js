define(["tests.async/testkit/testkit.store","tau/configurator","tau/service.container","tau/utils/utils.fixturesLoader.store","tau/core/bus","tau/utils/utils.process","libs.tests/Sinon"],function(a,b,c,d,e,f,g){var h=a.extend({init:function(a){this._super(),this.componentClass=a;var c=this;this.registerSetup("options",function(a,d){a.set("real",b.getConfig("real")),a.set("componentClass",c.componentClass),d()}),this.registerSetup("board.settings",function(a,b){b()}),this.registerSetup("componentBus",function(a,b){a.set("componentBus",a.get("componentClass").create()),a.set("bus",new e),b()}),this.registerSetup("listeners",function(a,b){var c=a.get("bus"),d=a.get("componentBus"),e=0,g={},h=d.fire;d.fire=function(a){var b=arguments;h.apply(d,b),f.nextTick(function(){c.fire.apply(c,b),g[a]=g[a]||0,b[0]+="["+g[a]+"]",c.fire.apply(c,b),g[a]++})},b()}),this.registerSetup("component.initialize",function(a,b){var c=a.get("data"),d=a.get("componentBus");d.initialize({store:a.get("configurator").getStore(),customField:{name:"Tttext",type:"RichText"},context:{entity:c.userStory.us1,applicationContext:{processes:[c.process.scrum],selectedProjects:[c.project.p_scrum]},getCustomFields:function(){return[{name:"Tttext",type:"RichText"},{name:"Lnk",type:"URL"},{name:"NumberOfGod",type:"Number"}]}}}),b()}),this.registerTeardown("component.destroy",function(a,b){a.get("componentBus").fire("destroy"),b()})}});return h})