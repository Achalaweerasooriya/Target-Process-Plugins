define([],function(){var n={};return function(){var t=this,r=t.async;"undefined"!=typeof module&&module.exports?module.exports=n:t.async=n,n.noConflict=function(){return t.async=r,n};var e=function(n,t){if(n.forEach)return n.forEach(t);for(var r=0;r<n.length;r+=1)t(n[r],r,n)},u=function(n,t){if(n.map)return n.map(t);var r=[];return e(n,function(n,e,u){r.push(t(n,e,u))}),r},c=function(n,t,r){return n.reduce?n.reduce(t,r):(e(n,function(n,e,u){r=t(r,n,e,u)}),r)},o=function(n){if(Object.keys)return Object.keys(n);var t=[];for(var r in n)n.hasOwnProperty(r)&&t.push(r);return t},i=function(n,t){if(n.indexOf)return n.indexOf(t);for(var r=0;r<n.length;r+=1)if(n[r]===t)return r;return-1};n.nextTick="undefined"!=typeof process&&process.nextTick?process.nextTick:function(n){setTimeout(n,0)},n.forEach=function(n,t,r){if(!n.length)return r();var u=0;e(n,function(e){t(e,function(t){t?(r(t),r=function(){}):(u+=1,u===n.length&&r())})})},n.forEachSeries=function(n,t,r){if(!n.length)return r();var e=0,u=function(){t(n[e],function(t){t?(r(t),r=function(){}):(e+=1,e===n.length?r():e<n.length&&u())})};u()};var f=function(t){return function(){var r=Array.prototype.slice.call(arguments);return t.apply(null,[n.forEach].concat(r))}},a=function(t){return function(){var r=Array.prototype.slice.call(arguments);return t.apply(null,[n.forEachSeries].concat(r))}},l=function(n,t,r,e){var c=[];t=u(t,function(n,t){return{index:t,value:n}}),n(t,function(n,t){r(n.value,function(r,e){c[n.index]=e,t(r)})},function(n){e(n,c)})};n.map=f(l),n.mapSeries=a(l),n.reduce=function(t,r,e,u){n.forEachSeries(t,function(n,t){e(r,n,function(n,e){r=e,t(n)})},function(n){u(n,r)})},n.inject=n.reduce,n.foldl=n.reduce,n.reduceRight=function(t,r,e,c){var o=u(t,function(n){return n}).reverse();n.reduce(o,r,e,c)},n.foldr=n.reduceRight;var s=function(n,t,r,e){var c=[];t=u(t,function(n,t){return{index:t,value:n}}),n(t,function(n,t){r(n.value,function(r){r&&c.push(n),t()})},function(){e(u(c.sort(function(n,t){return n.index-t.index}),function(n){return n.value}))})};n.filter=f(s),n.filterSeries=a(s),n.select=n.filter,n.selectSeries=n.filterSeries;var p=function(n,t,r,e){var c=[];t=u(t,function(n,t){return{index:t,value:n}}),n(t,function(n,t){r(n.value,function(r){r||c.push(n),t()})},function(){e(u(c.sort(function(n,t){return n.index-t.index}),function(n){return n.value}))})};n.reject=f(p),n.rejectSeries=a(p);var v=function(n,t,r,e){n(t,function(n,t){r(n,function(r){r?e(n):t()})},function(){e()})};n.detect=f(v),n.detectSeries=a(v),n.some=function(t,r,e){n.forEach(t,function(n,t){r(n,function(n){n&&(e(!0),e=function(){}),t()})},function(){e(!1)})},n.any=n.some,n.every=function(t,r,e){n.forEach(t,function(n,t){r(n,function(n){n||(e(!1),e=function(){}),t()})},function(){e(!0)})},n.all=n.every,n.sortBy=function(t,r,e){n.map(t,function(n,t){r(n,function(r,e){r?t(r):t(null,{value:n,criteria:e})})},function(n,t){if(n)return e(n);var r=function(n,t){var r=n.criteria,e=t.criteria;return e>r?-1:r>e?1:0};e(null,u(t.sort(r),function(n){return n.value}))})},n.auto=function(n,t){t=t||function(){};var r=o(n);if(!r.length)return t(null);var u=[],f=[],a=function(n){f.unshift(n)},l=function(n){for(var t=0;t<f.length;t+=1)if(f[t]===n)return void f.splice(t,1)},s=function(){e(f,function(n){n()})};a(function(){u.length===r.length&&t(null)}),e(r,function(r){var e=n[r]instanceof Function?[n[r]]:n[r],o=function(n){n?(t(n),t=function(){}):(u.push(r),s())},f=e.slice(0,Math.abs(e.length-1))||[],p=function(){return c(f,function(n,t){return n&&-1!==i(u,t)},!0)};if(p())e[e.length-1](o);else{var v=function(){p()&&(l(v),e[e.length-1](o))};a(v)}})},n.waterfall=function(t,r){if(!t.length)return r();r=r||function(){};var e=function(t){return function(u){if(u)r(u),r=function(){};else{var c=Array.prototype.slice.call(arguments,1),o=t.next();c.push(o?e(o):r),n.nextTick(function(){t.apply(null,c)})}}};e(n.iterator(t))()},n.parallel=function(t,r){if(r=r||function(){},t.constructor===Array)n.map(t,function(n,t){n&&n(function(n){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),t.call(null,n,r||null)})},r);else{var e={};n.forEach(o(t),function(n,r){t[n](function(t){var u=Array.prototype.slice.call(arguments,1);u.length<=1&&(u=u[0]),e[n]=u,r(t)})},function(n){r(n,e)})}},n.series=function(t,r){if(r=r||function(){},t.constructor===Array)n.mapSeries(t,function(n,t){n&&n(function(n){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),t.call(null,n,r||null)})},r);else{var e={};n.forEachSeries(o(t),function(n,r){t[n](function(t){var u=Array.prototype.slice.call(arguments,1);u.length<=1&&(u=u[0]),e[n]=u,r(t)})},function(n){r(n,e)})}},n.iterator=function(n){var t=function(r){var e=function(){return n.length&&n[r].apply(null,arguments),e.next()};return e.next=function(){return r<n.length-1?t(r+1):null},e};return t(0)},n.apply=function(n){var t=Array.prototype.slice.call(arguments,1);return function(){return n.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var y=function(n,t,r,e){var u=[];n(t,function(n,t){r(n,function(n,r){u=u.concat(r||[]),t(n)})},function(n){e(n,u)})};n.concat=f(y),n.concatSeries=a(y),n.whilst=function(t,r,e){t()?r(function(u){return u?e(u):void n.whilst(t,r,e)}):e()},n.until=function(t,r,e){t()?e():r(function(u){return u?e(u):void n.until(t,r,e)})},n.queue=function(t,r){var e=0,u=[],c={concurrency:r,push:function(t,r){u.push({data:t,callback:r}),n.nextTick(c.process)},process:function(){if(e<c.concurrency&&u.length){var n=u.splice(0,1)[0];e+=1,t(n.data,function(){e-=1,n.callback&&n.callback.apply(n,arguments),c.process()})}},length:function(){return u.length}};return c};var h=function(n){return function(t){var r=Array.prototype.slice.call(arguments,1);t.apply(null,r.concat([function(t){var r=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&console.error(t):console[n]&&e(r,function(t){console[n](t)}))}]))}};n.log=h("log"),n.dir=h("dir"),n.memoize=function(n,t){var r={};return t=t||function(n){return n},function(){var e=Array.prototype.slice.call(arguments),u=e.pop(),c=t.apply(null,e);c in r?u.apply(null,r[c]):n.apply(null,e.concat([function(){r[c]=arguments,u.apply(null,arguments)}]))}}}(),n});