"use strict";!function(t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):(window.WatchJS=t(),window.watch=window.WatchJS.watch,window.unwatch=window.WatchJS.unwatch,window.callWatchers=window.WatchJS.callWatchers)}(function(){var t={noMore:!1},n=[],r=function(t){var n={};return t&&"[object Function]"==n.toString.call(t)},e=function(t){return t%1===0},c=function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=function(t){if(null==t||"object"!=typeof t)return t;var n=t.constructor();for(var r in t)n[r]=t[r];return n},a=function(t,n,r,e){try{Object.observe(t[n],function(t){e(t)})}catch(c){try{Object.defineProperty(t,n,{get:r,set:e,enumerable:!0,configurable:!0})}catch(o){try{Object.prototype.__defineGetter__.call(t,n,r),Object.prototype.__defineSetter__.call(t,n,e)}catch(a){throw new Error("watchJS error: browser not supported :/")}}}},i=function(t,n,r){try{Object.defineProperty(t,n,{enumerable:!1,configurable:!0,writable:!1,value:r})}catch(e){t[n]=r}},f=function(){r(arguments[1])?s.apply(this,arguments):c(arguments[1])?u.apply(this,arguments):h.apply(this,arguments)},s=function(t,n,r,e){if("string"!=typeof t&&(t instanceof Object||c(t))){var o=[];if(c(t))for(var a=0;a<t.length;a++)o.push(a);else for(var i in t)o.push(i);u(t,o,n,r,e)}},u=function(t,n,r,e,o){if("string"!=typeof t&&(t instanceof Object||c(t)))for(var a in n)h(t,n[a],r,e,o)},h=function(t,n,e,o,a){"string"!=typeof t&&(t instanceof Object||c(t))&&(r(t[n])||(null!=t[n]&&(void 0===o||o>0)&&(void 0!==o&&o--,s(t[n],e,o)),v(t,n,e),a&&m(t,n,e,o)))},l=function(){r(arguments[1])?p.apply(this,arguments):c(arguments[1])?w.apply(this,arguments):j.apply(this,arguments)},p=function(t,n){if(!(t instanceof String)&&(t instanceof Object||c(t))){var r=[];if(c(t))for(var e=0;e<t.length;e++)r.push(e);else for(var o in t)r.push(o);w(t,r,n)}},w=function(t,n,r){for(var e in n)j(t,n[e],r)},v=function(n,r,e){var c=n[r];d(n,r),n.watchers||i(n,"watchers",{}),n.watchers[r]||(n.watchers[r]=[]);for(var o in n.watchers[r])if(n.watchers[r][o]===e)return;n.watchers[r].push(e);var f=function(){return c},u=function(o){var a=c;c=o,n[r]&&s(n[r],e),d(n,r),t.noMore||JSON.stringify(a)!==JSON.stringify(o)&&(g(n,r,"set",o,a),t.noMore=!1)};a(n,r,f,u)},g=function(t,n,r,c,o){if(n)for(var a in t.watchers[n])e(a)&&t.watchers[n][a].call(t,n,r,c||t[n],o);else for(var n in t)g(t,n,r,c,o)},y=["pop","push","reverse","shift","sort","slice","unshift"],b=function(t,n,r,e){i(t[n],e,function(){var c=r.apply(t[n],arguments);return h(t,t[n]),"slice"!==e&&g(t,n,e,arguments),c})},d=function(t,n){if(t[n]&&!(t[n]instanceof String)&&c(t[n]))for(var r,e=y.length;e--;)r=y[e],b(t,n,t[n][r],r)},j=function(t,n,r){for(var e in t.watchers[n]){var c=t.watchers[n][e];c==r&&t.watchers[n].splice(e,1)}O(t,n,r)},m=function(t,r,e,c){n.push({obj:t,prop:r,actual:o(t[r]),watcher:e,level:c})},O=function(t,r,e){for(var c in n){var o=n[c];o.obj==t&&o.prop==r&&o.watcher==e&&n.splice(c,1)}};return t.watch=f,t.unwatch=l,t.callWatchers=g,t});