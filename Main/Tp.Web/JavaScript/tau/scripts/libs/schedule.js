define([],function(){function t(t){this.createdOn=new Date,this.period=t,this.expected=0,this.xxx=null,this.MAX_DELTA=6e4,this.iterationNo=-1;var e=this.loop=function(t,i){var s=new Date,h=s.getTime(),n=this.expected>0?this.expected:h,o=h-n;i||t({date:s,"schedule-shift":o,i:++this.iterationNo}),this.expected=+new Date+this.period,this.xxx=setTimeout(function(){e(t,i)},this.period)}.bind(this);this.stop=function(){this.expected=0,clearTimeout(this.xxx)}.bind(this)}return t});