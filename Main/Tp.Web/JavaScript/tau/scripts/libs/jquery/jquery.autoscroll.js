define(["libs/jquery/jquery"],function(t){return function(n){var r="$autoscroll",e=function(t){n(t).data(p,setInterval(function(){var r,e=i(t);e&&("function"==typeof e.onEvaluate&&e.onEvaluate.apply(t),h(t)||!e.scroll||e.e||e.fr||((r=n(t).data(d))&&!s(r,e)?n(t).stop(!0).animate(f(e.step,e.direction,t),1e3,"linear"):n(t).animate(f(e.step,e.direction),1e3,"linear")),n(t).data(d,n.extend(!0,{},e)))},50))},o=function(t){clearInterval(n(t).data(p))},i=function(t){return n(t).data(r)},s=function(t,n){return t.step===n.step&&t.direction===n.direction&&t.scroll===n.scroll},l=function(t,r,s){var l=a(n.extend(n.fn.autoscroll.defaults.ffrw,s));return t.each(function(){var t=i(this);if(t){var s=(t.scroll,t.direction);t.fr=!0,"r"==r&&(s+=180)>360&&(s-=360),t.scroll&&o(this),n(this).stop(!0).animate(f(l.step,s),l.speed,"swing",function(){i(this).fr=!1,t.scroll&&e(this)})}})},a=function(t){return n.inArray(typeof t.scroll,["undefined","boolean"])<0&&n.error("scroll is not a boolean"),n.inArray(typeof t.step,["undefined","number"])<0&&isNaN(t.step=Number(t.step))&&n.error("step is not a valid number"),t.direction&&(t.direction=c(t.direction)),t},u=function(t){return t*Math.PI/180},c=function(t){for("string"==typeof t&&isNaN(Number(t))&&(v[t]?t=v[t]:t.indexOf("rad")!=t.length-3||isNaN(t=Number(t.substring(0,t.length-3)))||(t=180*t/Math.PI)),isNaN(t=Number(t))&&n.error("Invalid direction on jQuery.autoscroll");0>t;)t+=360;return t},f=function(t,r){var e=Math.round(t*Math.cos(r=u(r))),o=-1*Math.round(t*Math.sin(r)),i=arguments[2];return i&&n(i).length>0?{scrollTop:i.scrollTop+o,scrollLeft:i.scrollLeft+e}:{scrollTop:(0>o?"-=":"+=")+Math.abs(o),scrollLeft:(0>e?"-=":"+=")+Math.abs(e)}},h=function(t){var r=i(t);if(r&&"function"==typeof r.onEdge){var e=n(t).data(y)||{x:null,y:null},o=r.step,s=t.scrollLeft,l=u(r.direction),a=Math.round(o*Math.cos(l)),c=s+a,f=t.scrollTop,h=-1*Math.round(o*Math.sin(l)),d=f+h,p=n(t).data(g);s>c&&0==s?e.x&&"left"==e.x||(e.x="left"):c>s&&s==t.scrollWidth-t.clientWidth?e.x&&"right"==e.x||(e.x="right"):e.x=null,f>d&&0==f?e.y&&"top"==e.y||(e.y="top"):d>f&&f==t.scrollHeight-t.clientHeight?e.y&&"bottom"==e.y||(e.y="bottom"):e.y=null;try{if(!p||e.x&&e.x!=p.x||e.y&&e.y!=p.y)return r.onEdge.apply(t,[e]),!0}catch(v){throw v}finally{n(t).data(g,n.extend(!0,{},e)).data(y,e)}}return!1},d="$tAutoscroll",p="$autoscrollInterval",y="$edgeAutoscroll",g="$lastEdgeAutoscroll",v={up:90,left:180,right:360,upleft:135,upright:45,downleft:225,downright:315,leftup:135,rightup:45,leftdown:225,rightdown:315,down:270},m={init:function(t){return this.each(function(){i(this)?n(this).data(r,a(n.extend(i(this),t))):(n(this).data(r,a(n.extend({e:!1,fr:!1},n.fn.autoscroll.defaults.settings,t))),e(this))})},destroy:function(){return this.each(function(){i(this)&&(o(this),n(this).stop(!0).data(p,null).data(r,null).data(d,null))})},delay:function(t){return this.each(function(){var e=i(this);e&&e.scroll&&(n(this).autoscroll("pause"),n(this).oneTime(t||n.fn.autoscroll.defaults.delay,r,function(){n(this).autoscroll("resume")}))})},fastforward:function(t){return l(this,"f",t)},rewind:function(t){return l(this,"r",t)},pause:function(){return this.each(function(){var t=i(this);t&&t.scroll&&(t.scroll=!1,n(this).stop(!0),o(this))})},resume:function(){return this.each(function(){var t=i(this);t&&(t.scroll=!0,e(this))})},reverse:function(){return this.each(function(){var t=i(this);t&&(t.direction+=180)>360&&(t.direction-=360),n(this).stop(!0)})},toggle:function(){return this.each(function(){var t=i(this);t&&n(this).autoscroll(t.scroll?"pause":"resume")})},get:function(){return this.each(function(){return i(this)?i(this):void 0})},addpausesource:function(r){if("undefined"==typeof r)return this;if(!(r instanceof t)&&0==(r=n(r)).length)return this;var s=this.selector;return r.each(function(){n(this).hover(function(){n(s).each(function(){var t=i(this);t&&(t.scroll&&(o(this),n(this).stop(!0)),t.e=!0)})},function(){n(s).each(function(){var t=i(this);t&&t.e&&(t.scroll&&e(this),t.e=!1)})})}),this}};n.fn.autoscroll=function(t){return m[t]?m[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void n.error("Method "+t+" does not exist on jQuery.autoscroll"):m.init.apply(this,arguments)},n.fn.autoscroll.defaults={settings:{step:50,scroll:!0,direction:"down"},delay:5e3,ffrw:{speed:"fast",step:100}}}(t),t});