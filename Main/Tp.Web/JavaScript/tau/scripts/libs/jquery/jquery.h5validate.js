define(["libs/jquery/jquery"],function(a){(function(a){var b={defaults:{debug:!1,valMethod:!1,patternLibrary:{phone:/([\+][0-9]{1,3}([ \.\-])?)?([\(]{1}[0-9]{3}[\)])?([0-9A-Z \.\-]{1,32})((x|ext|extension)?[0-9]{1,4}?)/,email:/((([a-zA-Z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-zA-Z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?/,url:/(https?|ftp):\/\/(((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?/,number:/-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?/,dateISO:/\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}/,alpha:/[a-zA-Z]+/,alphaNumeric:/\w+/,integer:/-?\d+/},messages:{required:"This is a required field.",invalid:"Please correct this field."},classPrefix:"h5-",errorClass:"ui-state-error",validClass:"ui-state-valid",activeClass:"active",requiredClass:"required",requiredAttribute:"required",patternAttribute:"pattern",errorAttribute:"data-h5-errorid",kbSelectors:":text, :password, select, textarea",focusout:!0,focusin:!1,change:!0,keyup:!1,mSelectors:":radio, :checkbox, select, option",click:!0,activeKeyup:!0,requiredVar:"h5-required",patternVar:"h5-pattern",stripMarkup:!0,submit:!0,invalidCallback:function(){},validCallback:function(){},markInvalid:function(b){var c=a(b.element),d=a(b.errorID);c.addClass(b.errorClass).removeClass(b.validClass),c.addClass(b.settings.activeClass),d.length&&(c.attr("title")&&d.text(c.attr("title")),d.show()),c.data("valid",!1),b.settings.invalidCallback.call(b.element);return c},markValid:function(b){var c=a(b.element),d=a(b.errorID);c.addClass(b.validClass).removeClass(b.errorClass),d.length&&d.hide(),c.data("valid",!0),b.settings.validCallback.call(b.element);return c},unmark:function(b){var c=a(b.element);c.removeClass(b.errorClass).removeClass(b.validClass),c.form.find("#"+b.element.id).removeClass(b.errorClass).removeClass(b.validClass);return c}}},c=b.defaults,d=c.messages,e=c.patternLibrary,f={isValid:function(b){return!!a(this).data("valid")},allValid:function(){var b=!0;a(this).find("input, textarea, select").each(function(){b=a(this).h5Validate("isValid");return b});return b},validate:function(b){var c=a(this),d=c.filter("[pattern]")[0]?c.attr("pattern"):!1,e=new RegExp("^(?:"+d+")$"),f=b.valMethod?b.valMethod.call(null,c):c.is("[type=checkbox]")||c.is("[type=radio]")?c.is(":checked"):c.val(),g=b.errorClass,h=b.validClass,i=c.attr(b.errorAttribute)||!1,j=i?"#"+i:!1,k=!1,l=!0,m="",n=a("<input required>");n.filter("[required]")&&n.filter("[required]").length?k=c.filter("[required]").length&&c.attr("required")!=="false"?!0:!1:k=c.attr("required")!==undefined?!0:!1,b.debug&&window.console&&(console.log('Validate called on "'+f+'" with regex "'+e+'". Required: '+k),console.log("Regex test: "+e.test(f)+", Pattern: "+d)),k&&!f?(l=!1,m="required"):d&&!e.test(f)&&f?(l=!1,m="pattern"):(l=!0,b.markValid({element:this,errorClass:g,validClass:h,errorID:j,settings:b})),l||b.markInvalid({element:this,reason:m,errorClass:g,validClass:h,errorID:j,settings:b})},delegateEvents:function(b,c,d,e){var f=[],g=0,h=function(){e.validate.call(this,e)};a.each(c,function(a,b){b&&(f[a]=a)}),g=0;for(g in f)f.hasOwnProperty(g)&&a(d).delegate(b,f[g]+".h5Validate",h);return d},bindDelegation:function(b){a.each(e,function(c,d){var e=d.toString();e=e.substring(1,e.length-1),a("."+b.classPrefix+c).attr("pattern",e)}),a(this).filter("form").attr("novalidate","novalidate"),a(this).find("form").attr("novalidate","novalidate"),a(this).parents("form").attr("novalidate","novalidate");return this.each(function(){var a={focusout:b.focusout,focusin:b.focusin,change:b.change,keyup:b.keyup},c={click:b.click},d={keyup:b.activeKeyup};b.delegateEvents(b.kbSelectors,a,this,b),b.delegateEvents(b.mSelectors,c,this,b),b.delegateEvents(b.activeClassSelector,d,this,b)})}};a.h5Validate={addPatterns:function(a){var b=c.patternLibrary,d;for(d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);return b},validValues:function(b,c){var d=0,e=c.length,f="",g;for(d=0;d<e;d++)f=f?f+"|"+c[d]:c[d];g=new RegExp("^(?:"+f+")$"),a(b).data("regex",g)}},a.fn.h5Validate=function(e){var g=a.extend({},c,e,f),h=g.classPrefix+g.activeClass,i,j;a.extend(g,{activeClass:h,activeClassSelector:"."+h,requiredClass:g.classPrefix+g.requiredClass}),g.messages=d,a.extend(a.fn.h5Validate,b);if(typeof e=="string"&&typeof f[e]=="function"){j=a.makeArray(arguments),i=e,j.shift(),j=a.merge(j,[g]);return g[i].apply(this,j)}return f.bindDelegation.call(this,g)}})(a);return a.h5Validate})