define(["libs/jquery/jquery.ui"],function(t){"use strict";return function(t,i){var e={TOP:"top",BOTTOM:"bottom",AUTO:"auto"},n={CONTENT:i+"-content",PLACEHOLDER:i+"-placeholder",ACTIVE:i+"-active"};t.widget("ui."+i,{options:{content:"",position:e.AUTO},_create:function(){this._createFrame(),this.hide(),this.setContent(t(this.options.content)),this.setPosition(this.options.position||e.AUTO),this._initDOM()},_createFrame:function(){var e=t("<div/>").addClass(i),o=t("<div/>").addClass(n.CONTENT);e.append(o),this._$frame=e,this._$contentWrapper=o},show:function(){this.updatePosition(),this.element.addClass(n.ACTIVE),this._trigger("show")},hide:function(){this._trigger("hide"),this.element.removeClass(n.ACTIVE)},setContent:function(i){this._$content=t(i).appendTo(this._$contentWrapper.empty())},getContent:function(){return this._$content},setPosition:function(t){if(this._isValidPosition(t)&&t!=this._$position){var i=this._$position=t;i==e.AUTO&&(i=this._calculatePosition()),this._setPositionMarker(i)}},getPosition:function(){return this._$position},updatePosition:function(){this.getPosition()==e.AUTO&&this._setPositionMarker(this._calculatePosition())},_isValidPosition:function(i){var n=!1;return t.each(e,function(t,e){return i==e?(n=!0,!1):void 0}),n},_setPositionMarker:function(i){var n=t.map(e,function(t){return t!=i?t:void 0});this._$frame.removeClass(n.join(" ")).addClass(i)},_calculatePosition:function(){var i=t(window).height(),n=this.element.outerHeight(),o=this.element.offset(),s=2*o.top+n<i,r=e.TOP;return s&&(r=e.BOTTOM),r},_initDOM:function(){this.element.addClass(n.PLACEHOLDER).append(this._$frame)},destroy:function(){t.Widget.prototype.destroy.apply(this,arguments),this._$frame.remove(),this.element.removeClass(n.PLACEHOLDER)}})}(t,"taububblepopup"),t});