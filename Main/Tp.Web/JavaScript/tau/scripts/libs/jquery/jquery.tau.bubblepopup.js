define(["jQuery"],function(jQuery){return function($,a){var b={TOP:"top",BOTTOM:"bottom",AUTO:"auto"},c={CONTENT:a+"-content",PLACEHOLDER:a+"-placeholder",ACTIVE:a+"-active"};$.widget("ui."+a,{options:{content:"",position:b.AUTO},_create:function(){this._createFrame(),this.hide(),this.setContent($(this.options.content)),this.setPosition(this.options.position||b.AUTO),this._initDOM()},_createFrame:function(){var b=$("<div/>").addClass(a),d=$("<div/>").addClass(c.CONTENT);b.append(d),this._$frame=b,this._$contentWrapper=d},show:function(){this.updatePosition(),this.element.addClass(c.ACTIVE),this._trigger("show")},hide:function(){this._trigger("hide"),this.element.removeClass(c.ACTIVE)},setContent:function(a){this._$content=$(a).appendTo(this._$contentWrapper.empty())},getContent:function(){return this._$content},setPosition:function(a){if(this._isValidPosition(a)&&a!=this._$position){var c=this._$position=a;c==b.AUTO&&(c=this._calculatePosition()),this._setPositionMarker(c)}},getPosition:function(){return this._$position},updatePosition:function(){this.getPosition()==b.AUTO&&this._setPositionMarker(this._calculatePosition())},_isValidPosition:function(a){var c=!1;return $.each(b,function(b,d){if(a==d)return c=!0,!1}),c},_setPositionMarker:function(a){var c=$.map(b,function(b){if(b!=a)return b});this._$frame.removeClass(c.join(" ")).addClass(a)},_calculatePosition:function(){var a=$(window).height(),c=this.element.outerHeight(),d=this.element.offset(),e=2*d.top+c<a,f=b.TOP;return e&&(f=b.BOTTOM),f},_initDOM:function(){this.element.addClass(c.PLACEHOLDER).append(this._$frame)},destroy:function(){$.Widget.prototype.destroy.apply(this,arguments),this._$frame.remove(),this.element.removeClass(c.PLACEHOLDER)}})}(jQuery,"taububblepopup"),jQuery})