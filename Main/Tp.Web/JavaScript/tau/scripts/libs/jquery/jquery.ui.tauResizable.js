define(["Underscore","libs/jquery/jquery.ui"],function(t,i){i.widget("ui.tauResizable",i.ui.resizable,{_create:function(){this.element.find(".tc-start").addClass("ui-resizable-handle ui-resizable-w"),this.element.find(".tc-end").addClass("ui-resizable-handle ui-resizable-e"),this._super(),this.element.removeClass("ui-resizable")},_propagate:function(t,i){"start"===t&&this.startCallback(i),"resize"===t&&this.resizeCallback(i),this._super(t,i)},ui:function(){var t=this._super();return t.startValue=this.options.startValue,t.endValue=this.options.endValue,t},startCallback:function(){if(this.options.gridContainment){var t=i(this.options.gridContainment),e=t.last();this.gridContainmentOptions={grid:t,totalWidth:e.position().left+e.outerWidth(),length:t.length}}},resizeCallback:function(){if(this.options.gridContainment){var t=this.size.width+this.position.left;this.position.left<0?(this.size.width=t,this.position.left=0):t>this.gridContainmentOptions.totalWidth&&(this.size.width=this.size.width-(t-this.gridContainmentOptions.totalWidth));var i=this.getGridBoundValues(this.position.left,this.position.left+this.size.width,this.gridContainmentOptions.totalWidth,this.gridContainmentOptions.length);this.options.startValue=i.startValue,this.options.endValue=i.endValue;var e=this.getPositions(i,this.gridContainmentOptions.grid);this.position.left=e.left,this.size.width=e.right-e.left}},_mouseStop:function(t){var i=this.element.parent().outerWidth(),e={left:100*this.position.left/i+"%",width:100*this.size.width/i+"%"};return this.element.css(e),this._super(t)},getGridBoundValues:function(t,i,e,s){var n={startValue:Math.round(s*t/e),endValue:Math.round(s*i/e)-1};return n},getPositions:function(t,i){var e=i.eq(t.startValue),s=i.eq(t.endValue);return{left:e.position().left,right:s.position().left+s.outerWidth()}}})});