tau.mashups.addDependency("libs/jquery/jquery").addModule("MashupManager/jquery/fieldSelection",function(a){(function(a){function b(a){var b={start:0,end:a.value.length,length:0};if(a.selectionStart>=0)b.start=a.selectionStart,b.end=a.selectionEnd,b.length=b.end-b.start,b.text=a.value.substr(b.start,b.length);else if(a.ownerDocument.selection){var c=a.ownerDocument.selection.createRange();if(!c)return b;var d=a.createTextRange(),e=d.duplicate();d.moveToBookmark(c.getBookmark()),e.setEndPoint("EndToStart",d),b.start=e.text.length,b.end=e.text.length+c.text.length,b.text=c.text,b.length=c.text.length}return b}function c(a,b){if(a.selectionStart>=0){var c=a.selectionStart,d=a.selectionEnd,e,f=a.scrollTop,g=a.scrollLeft;a.value=a.value.substr(0,c)+b+a.value.substr(d),e=c+b.length,a.selectionStart=e,a.selectionEnd=e,a.scrollTop=f,a.scrollLeft=g}else if(a.ownerDocument.selection){var h=a.ownerDocument.selection.createRange();h.text=b,h.move("character",0),h.select()}else a.value+=b,a.scrollTop=1e5}a.fn.fieldSelection=function(a){var d;return this.each(function(){this.focus(),d=a?c(this,a||""):b(this)}),d||this}})(jQuery)})