define(["libs/jquery/jquery","libs/jquery/jquery.caret"],function(jQuery){(function($){$.fn.toggleFilter=function(options){function filterToggleExpand($element){$element.hasClass(settings.expandedClass)?$element.removeClass(settings.expandedClass):$element.addClass(settings.expandedClass)}function filterToggleEmpty($element,$input){$input.val()?$element.addClass(settings.filterOnClass+" i-role-filter-control_on"):$element.removeClass(settings.filterOnClass+" i-role-filter-control_on")}var settings=$.extend({expandedClass:"tau-inline-group",additionalClass:"",filterOnClass:"tau-boardsettings__filter_on",defaultExpand:!1},options);return options==="refresh"?(this.each(function(){var $filter=$(this),$filterInput=$filter.find(".i-role-filter-input");filterToggleEmpty($filter,$filterInput)}),this):(this.addClass(settings.additionalClass),settings.defaultExpand&&this.addClass(settings.expandedClass),this.each(function(){var $filter=$(this),$filterInput=$filter.find(".i-role-filter-input"),$filterToggle=$filter.find(".i-role-filter-toggle");filterToggleEmpty($filter,$filterInput),$filterInput.on("clear autocompletechange",function(){filterToggleEmpty($filter,$filterInput)}),$filterToggle.click(function(){$filterToggle.toggleClass("tau-checked"),filterToggleExpand($filter),filterToggleEmpty($filter,$filterInput),$filterInput.focus().caretToEnd()})}),this)}})(jQuery)})