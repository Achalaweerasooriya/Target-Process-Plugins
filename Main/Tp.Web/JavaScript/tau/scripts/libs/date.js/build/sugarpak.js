/**
 * @version: 1.0 Alpha-1
 * @author: Coolite Inc. http://www.coolite.com/
 * @date: 2008-05-13
 * @copyright: Copyright (c) 2006-2008, Coolite Inc. (http://www.coolite.com/). All rights reserved.
 * @license: Licensed under The MIT License. See license.txt and http://www.datejs.com/license/. 
 * @website: http://www.datejs.com/
 */

(function(){var $D=Date,$P=$D.prototype,$C=$D.CultureInfo,$N=Number.prototype;$P._orient=1,$P._nth=null,$P._is=!1,$P._same=!1,$P._isSecond=!1,$N._dateElement="day",$P.next=function(){return this._orient=1,this},$D.next=function(){return $D.today().next()},$P.last=$P.prev=$P.previous=function(){return this._orient=-1,this},$D.last=$D.prev=$D.previous=function(){return $D.today().last()},$P.is=function(){return this._is=!0,this},$P.same=function(){return this._same=!0,this._isSecond=!1,this},$P.today=function(){return this.same().day()},$P.weekday=function(){return this._is?(this._is=!1,!this.is().sat()&&!this.is().sun()):!1},$P.at=function(time){return typeof time=="string"?$D.parse(this.toString("d")+" "+time):this.set(time)},$N.fromNow=$N.after=function(date){var c={};return c[this._dateElement]=this,(date?date.clone():new Date).add(c)},$N.ago=$N.before=function(date){var c={};return c[this._dateElement]=this*-1,(date?date.clone():new Date).add(c)};var dx="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),mx="january february march april may june july august september october november december".split(/\s/),px="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),pxf="Milliseconds Seconds Minutes Hours Date Week Month FullYear".split(/\s/),nth="final first second third fourth fifth".split(/\s/),de;$P.toObject=function(){var o={};for(var i=0;i<px.length;i++)o[px[i].toLowerCase()]=this["get"+pxf[i]]();return o},$D.fromObject=function(config){return config.week=null,Date.today().set(config)};var df=function(n){return function(){if(this._is)return this._is=!1,this.getDay()==n;if(this._nth!==null){this._isSecond&&this.addSeconds(this._orient*-1),this._isSecond=!1;var ntemp=this._nth;this._nth=null;var temp=this.clone().moveToLastDayOfMonth();this.moveToNthOccurrence(n,ntemp);if(this>temp)throw new RangeError($D.getDayName(n)+" does not occur "+ntemp+" times in the month of "+$D.getMonthName(temp.getMonth())+" "+temp.getFullYear()+".");return this}return this.moveToDayOfWeek(n,this._orient)}},sdf=function(n){return function(){var t=$D.today(),shift=n-t.getDay();return n===0&&$C.firstDayOfWeek===1&&t.getDay()!==0&&(shift+=7),t.addDays(shift)}};for(var i=0;i<dx.length;i++)$D[dx[i].toUpperCase()]=$D[dx[i].toUpperCase().substring(0,3)]=i,$D[dx[i]]=$D[dx[i].substring(0,3)]=sdf(i),$P[dx[i]]=$P[dx[i].substring(0,3)]=df(i);var mf=function(n){return function(){return this._is?(this._is=!1,this.getMonth()===n):this.moveToMonth(n,this._orient)}},smf=function(n){return function(){return $D.today().set({month:n,day:1})}};for(var j=0;j<mx.length;j++)$D[mx[j].toUpperCase()]=$D[mx[j].toUpperCase().substring(0,3)]=j,$D[mx[j]]=$D[mx[j].substring(0,3)]=smf(j),$P[mx[j]]=$P[mx[j].substring(0,3)]=mf(j);var ef=function(j){return function(){if(this._isSecond)return this._isSecond=!1,this;if(this._same){this._same=this._is=!1;var o1=this.toObject(),o2=(arguments[0]||new Date).toObject(),v="",k=j.toLowerCase();for(var m=px.length-1;m>-1;m--){v=px[m].toLowerCase();if(o1[v]!=o2[v])return!1;if(k==v)break}return!0}return j.substring(j.length-1)!="s"&&(j+="s"),this["add"+j](this._orient)}},nf=function(n){return function(){return this._dateElement=n,this}};for(var k=0;k<px.length;k++)de=px[k].toLowerCase(),$P[de]=$P[de+"s"]=ef(px[k]),$N[de]=$N[de+"s"]=nf(de);$P._ss=ef("Second");var nthfn=function(n){return function(dayOfWeek){return this._same?this._ss(arguments[0]):dayOfWeek||dayOfWeek===0?this.moveToNthOccurrence(dayOfWeek,n):(this._nth=n,n!==2||dayOfWeek!==undefined&&dayOfWeek!==null?this:(this._isSecond=!0,this.addSeconds(this._orient)))}};for(var l=0;l<nth.length;l++)$P[nth[l]]=l===0?nthfn(-1):nthfn(l)})()