!function(e,t){"use strict";function n(e){var i,a,o,u,d,f,c,p,g,v=N.data,x=this,b={};return x&&x.constructor==n?(a=t.createElement("div"),p="xstats"+N.counter++,r(x,e||(e={})),x.uid=p,r(b,x),o=x.fps=r(r({},x.fps),e.fps),f=x.ms=r(r({},x.ms),e.ms),d=x.mem=r(r({},x.mem),e.mem),c=2*x.padding,u=x.height-c,g=x.width-c,i=k(1,T(.02*g)),g=w(g/i),b.titleHeight=T(.28*u),b.barWidth=i+4,b.fontSize=(b.titleHeight/22.2).toFixed(2),b.innerWidth=i*g,b.innerHeight=u-b.titleHeight,b.padding=T((x.width-b.innerWidth)/2),v.ms.length<g&&(v.fps.length=v.ms.length=v.mem.length=g),s(l(".#{uid},.#{uid} .bg,.#{uid} .fg{width:#{width}px;height:#{height}px}.#{uid} .mi{margin:#{padding}px;width:#{innerWidth}px}.#{uid} p{font-size:#{fontSize}em;height:#{titleHeight}px;width:#{innerWidth}px}.#{uid} ul{height:#{innerHeight}px;width:#{innerWidth}px}.#{uid} li{width:#{barWidth}px}",b)+l(".#{uid}.fps{color:#{fg}}.#{uid}.fps ul{background:#{fg}}.#{uid}.fps .bg,.#{uid}.fps li{background:#{bg}}",r(b,o))+l(".#{uid}.ms{color:#{fg}}.#{uid}.ms ul{background:#{fg}}.#{uid}.ms .bg,.#{uid}.ms li{background:#{bg}}",r(b,f))+l(".#{uid}.mem{color:#{fg}}.#{uid}.mem ul{background:#{fg}}.#{uid}.mem .bg,.#{uid}.mem li{background:#{bg}}",r(b,d))),a.className="xstats "+p+" "+x.mode,a.innerHTML="<div class=bg></div><div class=mi><p>&nbsp;</p><ul>"+m("<li></li>",g)+"</ul></div><div class=fg></div>",a.addEventListener?a.addEventListener("click",h(x),!1):a.attachEvent&&a.attachEvent("onclick",h(x)),x.element=a,x.canvas=a.getElementsByTagName("ul")[0],x.title=a.getElementsByTagName("p")[0].firstChild,void n.subclasses.push(x)):new n(e)}function i(e,t){e.className+=(e.className?" ":"")+t}function s(e){var n,i="cssText",s=N.sheet;s||(n=t.getElementsByTagName("head")[0],s=N.sheet=t.createElement("style"),s.type="text/css",n.insertBefore(s,n.firstChild)),(n="styleSheet"in s&&s.styleSheet)||(i="nodeValue",n=s.firstChild||s.appendChild(t.createTextNode(""))),n[i]+=e}function a(e,t){for(var n=-1,i=e.length;++n<i&&t(e[n],n,e)!==!1;);return e}function r(e,t){t||(t={});for(var n in t)e[n]=t[n];return e}function l(e,t){for(var n in t)e=e.replace(RegExp("#\\{"+n+"\\}","g"),t[n]);return e}function o(e,t){for(var n,i=e.className.split(" "),s=[];n=i.pop();)t!=n&&s.push(n);e.className=s.join(" ")}function m(e,t){if(1>t)return"";if(t%2)return m(e,t-1)+e;var n=m(e,t/2);return n+n}function u(e,t){var n=this,i=n.events||(n.events={});return a(e.split(" "),function(e){(i[e]||(i[e]=[])).push(t)}),n}function d(e){var t=this,n=H(e),i=(arguments[0]=n,y.call(arguments)),s=t.events,r=s&&s[n.type]||[],l=!0;return a(r.slice(),function(e){return(l=e.apply(t,i)!==!1)?void 0:l}),l}function f(e,t){var n=this,i=n.events;return a(e.split(" "),function(e){var n=i&&i[e]||[],s=n.indexOf(t);s>-1&&n.splice(s,1)}),n}function c(e){var t=this,n=t.events;return a(e?e.split(" "):n,function(e){(n&&n[e]||[]).length=0}),t}function h(e){return function(){if(!e.locked){var t="fps"==e.mode?"ms":"ms"==e.mode?b?"mem":"fps":"fps",n=e.element,s=e.canvas.childNodes,a=N.data[t],r=a[0],l=s.length;for(e.mode=t,v(e,r&&r.value);l--;)r=a[l],g(e,s[l],r&&r.percent);o(n,"fps"),o(n,"ms"),o(n,"mem"),i(n,t)}}}function p(e,t){var n=N.data[e],i=S(100,100*(t/("fps"==e?80:"ms"==e?1e3:128)));t="mem"==e?t.toFixed(2):T(t),n.length=[n.length,n.unshift({value:t,percent:i})][0],t=w(t),n.min=S(null==n.min?t:n.min,t),n.max=k(null==n.max?t:n.max,t)}function g(e,t,n){var i=100,s=i/16*15,a=s/100*n,r=null==n?i:(s-a).toFixed(2);t.style.height=r+"%"}function v(e,t){var n=e.mode,i="mem"==n?"MB":n.toUpperCase(),s=N.data[n];e.title.nodeValue=null==t?" ":t+i+" ("+s.min+"-"+s.max+")"}function x(){var e,t=N.data,i=N.frameTimes,s=0,r=z(),l=r-N.lastSecond,o=r-1e3;if(null!=N.lastTime){if(i.push(r),p("ms",r-N.lastTime),l>999){for(e=i.length;e--&&!(i[e]<o);)s++;p("fps",s),b&&p("mem",b.memory.usedJSHeapSize/1048576),N.frameTimes=i.slice(e),N.lastSecond=r}a(n.subclasses,function(e){var n=e.canvas,i=e.mode,s=t[i][0];!s||"ms"!=i&&N.lastSecond!=r||(v(e,s.value),g(e,n.insertBefore(n.lastChild,n.firstChild),s.percent))})}else N.lastSecond=r;N.lastTime=r}var b=e.performance||e.webkitPerformance||e.console;b=b&&b.memory&&b;var y=Array.prototype.slice,w=Math.floor,k=Math.max,S=Math.min,T=Math.round,E=function(){return r([],{max:null,min:null})},N={counter:1,frameTimes:[],lastSecond:null,lastTime:null,data:{fps:new E,ms:new E,mem:new E}},H=function(e){var t=this;return t&&t.constructor==H?e instanceof H?e:r(t,"string"==typeof e?{type:e}:e):new H(e)},z=Date.now||function(){return+new Date};n.subclasses=[],r(n.prototype,{height:48,width:94,padding:3,locked:!1,mode:"fps",sampleRate:0,on:u,fps:{bg:"#282845",fg:"#1affff"},ms:{bg:"#284528",fg:"#1aff1a"},mem:{bg:"#452831",fg:"#ff1a8d"},addListener:u,emit:d,removeAllListeners:c,removeListener:f}),H.prototype.type="",n.Event=H,e.xStats=n,b=b&&!!b.memory.usedJSHeapSize&&b,setInterval(x,1e3/60),setInterval(function(){var e=N.data,t=e.fps[0],i=e.mem[0],s=e.ms[0];a(n.subclasses,function(e){e.emit("sample",{fps:t&&t.value,mem:i&&i.value,ms:s&&s.value})})},2e3),s(".xstats div{position:absolute;overflow:hidden}.xstats p{margin:0;overflow:hidden;font-family:sans-serif;-webkit-text-size-adjust:100%}.xstats ul{margin:0;padding:0;list-style:none;overflow:hidden}.xstats li{float:right;height:100%;margin-left:-4px}.xstats .bg{opacity:.5;filter:alpha(opacity=50)}.xstats{cursor:pointer;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-o-user-select:none;user-select:none}")}(this,this.document);