!function(e,t){"use strict";function n(e){var i,a,o,d,m,c,f,p,g,v=this,x={};return v&&v.constructor==n?(a=t.createElement("div"),p="xstats"+N.counter++,r(v,e||(e={})),v.uid=p,r(x,v),o=v.fps=r(r({},v.fps),e.fps),c=v.ms=r(r({},v.ms),e.ms),m=v.mem=r(r({},v.mem),e.mem),f=2*v.padding,d=v.height-f,g=v.width-f,i=S(1,T(.02*g)),g=w(g/i),x.titleHeight=T(.28*d),x.barWidth=i+4,x.fontSize=(x.titleHeight/22.2).toFixed(2),x.innerWidth=i*g,x.innerHeight=d-x.titleHeight,x.padding=T((v.width-x.innerWidth)/2),H.ms.data.length<g&&(H.fps.data.length=H.ms.data.length=H.mem.data.length=g),s(l(".#{uid},.#{uid} .bg,.#{uid} .fg{width:#{width}px;height:#{height}px}.#{uid} .mi{margin:#{padding}px;width:#{innerWidth}px}.#{uid} p{font-size:#{fontSize}em;height:#{titleHeight}px;width:#{innerWidth}px}.#{uid} ul{height:#{innerHeight}px;width:#{innerWidth}px}.#{uid} .bar{width:#{barWidth}px}",x)+l(".#{uid}.fps{color:#{fg}}.#{uid}.fps ul{background:#{fg}}.#{uid}.fps .bg,.#{uid}.fps .bar{background:#{bg}}",r(x,o))+l(".#{uid}.ms{color:#{fg}}.#{uid}.ms ul{background:#{fg}}.#{uid}.ms .bg,.#{uid}.ms .bar{background:#{bg}}",r(x,c))+l(".#{uid}.mem{color:#{fg}}.#{uid}.mem ul{background:#{fg}}.#{uid}.mem .bg,.#{uid}.mem .bar{background:#{bg}}",r(x,m))),a.className="xstats "+p+" "+v.mode,a.innerHTML='<div class="bg"></div><div class="mi"><p>&nbsp;</p><ul>'+u('<li class="bar"></li>',g)+'</ul></div><div class="fg"></div>',a.addEventListener?a.addEventListener("click",h(v),!1):a.attachEvent&&a.attachEvent("onclick",h(v)),v.element=a,v.canvas=a.getElementsByTagName("ul")[0],v.title=a.getElementsByTagName("p")[0].firstChild,void n.subclasses.push(v)):new n(e)}function i(e,t){e.className+=(e.className?" ":"")+t}function s(e){var n,i="cssText",s=N.sheet;s||(n=t.getElementsByTagName("head")[0],s=N.sheet=t.createElement("style"),s.type="text/css",n.insertBefore(s,n.firstChild)),(n="styleSheet"in s&&s.styleSheet)||(i="nodeValue",n=s.firstChild||s.appendChild(t.createTextNode(""))),n[i]+=e}function a(e,t){for(var n=-1,i=e.length;++n<i&&t(e[n],n,e)!==!1;);return e
}function r(e,t){t||(t={});for(var n in t)e[n]=t[n];return e}function l(e,t){for(var n in t)e=e.replace(RegExp("#\\{"+n+"\\}","g"),t[n]);return e}function o(e,t){for(var n,i=e.className.split(" "),s=[];n=i.pop();)t!=n&&s.push(n);e.className=s.join(" ")}function u(e,t){if(1>t)return"";if(t%2)return u(e,t-1)+e;var n=u(e,t/2);return n+n}function d(e,t){var n=this.events||(this.events={});return a(e.split(" "),function(e){(n[e]||(n[e]=[])).push(t)}),this}function m(e){var t=this,n=z(e),i=(arguments[0]=n,y.call(arguments)),s=t.events,r=s&&s[n.type]||[],l=!0;return a(r.slice(),function(e){return(l=e.apply(t,i)!==!1)?void 0:l}),l}function c(e,t){var n=this.events;return a(e.split(" "),function(e){var i=n&&n[e]||[],s=i.indexOf(t);s>-1&&i.splice(s,1)}),this}function f(e){var t=this.events;return a(e?e.split(" "):t,function(e){(t&&t[e]||[]).length=0}),this}function h(e){return function(){if(!e.locked){var t=H[e.mode].next,n=e.element,s=e.canvas.childNodes,a=H[t].data,r=a[0],l=s.length;for(e.mode=t,v(e,r&&r.value);l--;)r=a[l],g(e,s[l],r&&r.percent);o(n,"fps"),o(n,"ms"),o(n,"mem"),i(n,t)}}}function p(e,t){var n=H[e].data,i=k(100,100*(t/H[e].scale));t="mem"==e?t.toFixed(2):T(t),n.length=[n.length,n.unshift({value:t,percent:i})][0],t=w(t),n.min=k(null==n.min?t:n.min,t),n.max=S(null==n.max?t:n.max,t)}function g(e,t,n){var i=100,s=i/16*15,a=s/100*n,r=null==n?i:(s-a).toFixed(2);t.style.height=r+"%"}function v(e,t){var n=e.mode,i=H[n].data;e.title.nodeValue=t?t+H[n].unit+" ("+i.min+"-"+i.max+")":" "}function x(){var e,t=N.frameTimes,i=0,s=W(),r=s-N.lastSecond,l=s-1e3;if(N.lastTime){if(t.push(s),p("ms",s-N.lastTime),r>999){for(e=t.length;e--&&!(t[e]<l);)i++;p("fps",i),b&&p("mem",b.memory.usedJSHeapSize/1048576),N.frameTimes=t.slice(e),N.lastSecond=s}a(n.subclasses,function(e){var t=e.canvas,n=e.mode,i=H[n].data[0];!i||"ms"!=n&&N.lastSecond!=s||(v(e,i.value),g(e,t.insertBefore(t.lastChild,t.firstChild),i.percent))})}else N.lastSecond=s;N.lastTime=s}var b=e.performance||e.webkitPerformance||e.console;
b=b&&b.memory&&b;var y=Array.prototype.slice,w=Math.floor,S=Math.max,k=Math.min,T=Math.round,E=function(){return r([],{max:null,min:null})},N={counter:1,frameTimes:[],lastSecond:null,lastTime:null},H={fps:{data:new E,scale:80,unit:"FPS",next:"ms"},ms:{data:new E,scale:1e3,unit:"ms",next:b?"mem":"fps"},mem:{data:new E,scale:128,unit:"MB",next:"fps"}},z=function(e){var t=this;return t&&t.constructor==z?e instanceof z?e:r(t,"string"==typeof e?{type:e}:e):new z(e)},W=Date.now||function(){return+new Date};n.subclasses=[],r(n.prototype,{height:48,width:94,padding:3,locked:!1,mode:"fps",sampleRate:0,on:d,fps:{bg:"#282845",fg:"#1affff"},ms:{bg:"#284528",fg:"#1aff1a"},mem:{bg:"#452831",fg:"#ff1a8d"},addListener:d,emit:m,removeAllListeners:f,removeListener:c}),z.prototype.type="",n.Event=z,e.xStats=n,b=b&&!!b.memory.usedJSHeapSize&&b,setInterval(x,1e3/60),setInterval(function(){var e=H.fps.data[0],t=H.mem.data[0],i=H.ms.data[0];a(n.subclasses,function(n){n.emit("sample",{fps:e&&e.value,mem:t&&t.value,ms:i&&i.value})})},2e3),s(".xstats div{position:absolute;overflow:hidden}.xstats p{margin:0;overflow:hidden;font-family:sans-serif;-webkit-text-size-adjust:100%}.xstats ul{margin:0;padding:0;list-style:none;overflow:hidden}.xstats .bar{float:right;height:100%;margin-left:-4px}.xstats .bg{opacity:0.5;filter:alpha(opacity=50)}.xstats{cursor:pointer;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-o-user-select:none;user-select:none}")}(this,this.document);