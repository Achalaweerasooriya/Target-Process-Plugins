function quantize(a){return"q"+Math.min(8,~~(data[a.id]*9/12))+"-9"}var data,path=d3.geo.path(),svg=d3.select("#chart").append("svg"),counties=svg.append("g").attr("id","counties").attr("class","Blues"),states=svg.append("g").attr("id","states");d3.json("../data/us-counties.json",function(a){counties.selectAll("path").data(a.features).enter().append("path").attr("class",data?quantize:null).attr("d",path)}),d3.json("../data/us-states.json",function(a){states.selectAll("path").data(a.features).enter().append("path").attr("d",path)}),d3.json("unemployment.json",function(a){data=a,counties.selectAll("path").attr("class",quantize)})