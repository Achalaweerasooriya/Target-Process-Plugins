function d3_scale_log(a,b){function d(c){return a(b(c))}var c=b.pow;return d.invert=function(b){return c(a.invert(b))},d.domain=function(e){return arguments.length?(b=e[0]<0?d3_scale_logn:d3_scale_logp,c=b.pow,a.domain(e.map(b)),d):a.domain().map(c)},d.nice=function(){return a.domain(d3_scale_nice(a.domain(),d3_scale_niceDefault)),d},d.ticks=function(){var d=d3_scaleExtent(a.domain()),e=[];if(d.every(isFinite)){var f=Math.floor(d[0]),g=Math.ceil(d[1]),h=c(d[0]),i=c(d[1]);if(b===d3_scale_logn){e.push(c(f));for(;f++<g;)for(var j=9;j>0;j--)e.push(c(f)*j)}else{for(;f<g;f++)for(var j=1;j<10;j++)e.push(c(f)*j);e.push(c(f))}for(f=0;e[f]<h;f++);for(g=e.length;e[g-1]>i;g--);e=e.slice(f,g)}return e},d.tickFormat=function(a,e){arguments.length<2&&(e=d3_scale_logFormat);if(arguments.length<1)return e;var f=a/d.ticks().length,g=b===d3_scale_logn?(h=-1e-12,Math.floor):(h=1e-12,Math.ceil),h;return function(a){return a/c(g(b(a)+h))<f?e(a):""}},d.copy=function(){return d3_scale_log(a.copy(),b)},d3_scale_linearRebind(d,a)}function d3_scale_logp(a){return Math.log(a<0?0:a)/Math.LN10}function d3_scale_logn(a){return-Math.log(a>0?0:-a)/Math.LN10}d3.scale.log=function(){return d3_scale_log(d3.scale.linear(),d3_scale_logp)};var d3_scale_logFormat=d3.format(".0e");d3_scale_logp.pow=function(a){return Math.pow(10,a)},d3_scale_logn.pow=function(a){return-Math.pow(10,-a)}