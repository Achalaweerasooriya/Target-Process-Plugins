var w=960,h=2200,cluster=d3.layout.cluster().size([h,w-160]),diagonal=d3.svg.diagonal().projection(function(a){return[a.y,a.x]}),vis=d3.select("#chart").append("svg").attr("width",w).attr("height",h).append("g").attr("transform","translate(40, 0)");d3.json("../data/flare.json",function(a){var b=cluster.nodes(a),c=vis.selectAll("path.link").data(cluster.links(b)).enter().append("path").attr("class","link").attr("d",diagonal),d=vis.selectAll("g.node").data(b).enter().append("g").attr("class","node").attr("transform",function(a){return"translate("+a.y+","+a.x+")"});d.append("circle").attr("r",4.5),d.append("text").attr("dx",function(a){return a.children?-8:8}).attr("dy",3).attr("text-anchor",function(a){return a.children?"end":"start"}).text(function(a){return a.name})})