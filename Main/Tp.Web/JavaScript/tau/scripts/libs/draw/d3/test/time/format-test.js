require("../env");var vows=require("vows"),assert=require("assert"),time=require("./time"),local=time.local,utc=time.utc,suite=vows.describe("d3.time.format");suite.addBatch({format:{topic:function(){return d3.time.format},"formats abbreviated weekday":function(a){var b=a("%a");assert.equal(b(local(1990,0,1)),"Mon"),assert.equal(b(local(1990,0,2)),"Tue"),assert.equal(b(local(1990,0,3)),"Wed"),assert.equal(b(local(1990,0,4)),"Thu"),assert.equal(b(local(1990,0,5)),"Fri"),assert.equal(b(local(1990,0,6)),"Sat"),assert.equal(b(local(1990,0,7)),"Sun")},"formats weekday":function(a){var b=a("%A");assert.equal(b(local(1990,0,1)),"Monday"),assert.equal(b(local(1990,0,2)),"Tuesday"),assert.equal(b(local(1990,0,3)),"Wednesday"),assert.equal(b(local(1990,0,4)),"Thursday"),assert.equal(b(local(1990,0,5)),"Friday"),assert.equal(b(local(1990,0,6)),"Saturday"),assert.equal(b(local(1990,0,7)),"Sunday")},"formats abbreviated month":function(a){var b=a("%b");assert.equal(b(local(1990,0,1)),"Jan"),assert.equal(b(local(1990,1,1)),"Feb"),assert.equal(b(local(1990,2,1)),"Mar"),assert.equal(b(local(1990,3,1)),"Apr"),assert.equal(b(local(1990,4,1)),"May"),assert.equal(b(local(1990,5,1)),"Jun"),assert.equal(b(local(1990,6,1)),"Jul"),assert.equal(b(local(1990,7,1)),"Aug"),assert.equal(b(local(1990,8,1)),"Sep"),assert.equal(b(local(1990,9,1)),"Oct"),assert.equal(b(local(1990,10,1)),"Nov"),assert.equal(b(local(1990,11,1)),"Dec")},"formats locale date and time":function(a){var b=a("%c");assert.equal(b(local(1990,0,1)),"Mon Jan  1 00:00:00 1990")},"formats zero-padded date":function(a){var b=a("%d");assert.equal(b(local(1990,0,1)),"01")},"formats space-padded date":function(a){var b=a("%e");assert.equal(b(local(1990,0,1))," 1")},"formats zero-padded hour (24)":function(a){var b=a("%H");assert.equal(b(local(1990,0,1,0)),"00"),assert.equal(b(local(1990,0,1,13)),"13")},"formats zero-padded hour (12)":function(a){var b=a("%I");assert.equal(b(local(1990,0,1,0)),"12"),assert.equal(b(local(1990,0,1,13)),"01")},"formats zero-padded day of year":function(a){var b=a("%j");assert.equal(b(local(1990,0,1)),"001"),assert.equal(b(local(1990,5,1)),"152"),assert.equal(b(local(2010,2,13)),"072"),assert.equal(b(local(2010,2,14)),"073"),assert.equal(b(local(2010,2,15)),"074"),assert.equal(b(local(2010,10,6)),"310"),assert.equal(b(local(2010,10,7)),"311"),assert.equal(b(local(2010,10,8)),"312")},"formats zero-padded month":function(a){var b=a("%m");assert.equal(b(local(1990,0,1)),"01"),assert.equal(b(local(1990,9,1)),"10")},"formats zero-padded minute":function(a){var b=a("%M");assert.equal(b(local(1990,0,1,0,0)),"00"),assert.equal(b(local(1990,0,1,0,32)),"32")},"formats AM or PM":function(a){var b=a("%p");assert.equal(b(local(1990,0,1,0)),"AM"),assert.equal(b(local(1990,0,1,13)),"PM")},"formats zero-padded second":function(a){var b=a("%S");assert.equal(b(local(1990,0,1,0,0,0)),"00"),assert.equal(b(local(1990,0,1,0,0,32)),"32")},"formats zero-padded millisecond":function(a){var b=a("%L");assert.equal(b(local(1990,0,1,0,0,0,0)),"000"),assert.equal(b(local(1990,0,1,0,0,0,432)),"432")},"formats zero-padded week number":function(a){var b=a("%U");assert.equal(b(local(1990,0,1)),"00"),assert.equal(b(local(1990,5,1)),"21"),assert.equal(b(local(2010,2,13,23)),"10"),assert.equal(b(local(2010,2,14,0)),"11"),assert.equal(b(local(2010,2,15,0)),"11"),assert.equal(b(local(2010,10,6,23)),"44"),assert.equal(b(local(2010,10,7,0)),"45"),assert.equal(b(local(2010,10,8,0)),"45")},"formats locale date":function(a){var b=a("%x");assert.equal(b(local(1990,0,1)),"01/01/90"),assert.equal(b(local(2010,5,1)),"06/01/10")},"formats locale time":function(a){var b=a("%X");assert.equal(b(local(1990,0,1)),"00:00:00"),assert.equal(b(local(1990,0,1,13,34,59)),"13:34:59")},"formats zero-padded two-digit year":function(a){var b=a("%y");assert.equal(b(local(1990,0,1)),"90"),assert.equal(b(local(2002,0,1)),"02")},"formats zero-padded four-digit year":function(a){var b=a("%Y");assert.equal(b(local(123,0,1)),"0123"),assert.equal(b(local(1990,0,1)),"1990"),assert.equal(b(local(2002,0,1)),"2002"),assert.equal(b(local(10002,0,1)),"0002")},"formats time zone":function(a){var b=a("%Z");assert.equal(b(local(1990,0,1)),"-0800")},"formats literal percent sign":function(a){var b=a("%%");assert.equal(b(local(1990,0,1)),"%")},UTC:{topic:function(a){return a.utc},"formats abbreviated weekday":function(a){var b=a("%a");assert.equal(b(utc(1990,0,1)),"Mon"),assert.equal(b(utc(1990,0,2)),"Tue"),assert.equal(b(utc(1990,0,3)),"Wed"),assert.equal(b(utc(1990,0,4)),"Thu"),assert.equal(b(utc(1990,0,5)),"Fri"),assert.equal(b(utc(1990,0,6)),"Sat"),assert.equal(b(utc(1990,0,7)),"Sun")},"formats weekday":function(a){var b=a("%A");assert.equal(b(utc(1990,0,1)),"Monday"),assert.equal(b(utc(1990,0,2)),"Tuesday"),assert.equal(b(utc(1990,0,3)),"Wednesday"),assert.equal(b(utc(1990,0,4)),"Thursday"),assert.equal(b(utc(1990,0,5)),"Friday"),assert.equal(b(utc(1990,0,6)),"Saturday"),assert.equal(b(utc(1990,0,7)),"Sunday")},"formats abbreviated month":function(a){var b=a("%b");assert.equal(b(utc(1990,0,1)),"Jan"),assert.equal(b(utc(1990,1,1)),"Feb"),assert.equal(b(utc(1990,2,1)),"Mar"),assert.equal(b(utc(1990,3,1)),"Apr"),assert.equal(b(utc(1990,4,1)),"May"),assert.equal(b(utc(1990,5,1)),"Jun"),assert.equal(b(utc(1990,6,1)),"Jul"),assert.equal(b(utc(1990,7,1)),"Aug"),assert.equal(b(utc(1990,8,1)),"Sep"),assert.equal(b(utc(1990,9,1)),"Oct"),assert.equal(b(utc(1990,10,1)),"Nov"),assert.equal(b(utc(1990,11,1)),"Dec")},"formats locale date and time":function(a){var b=a("%c");assert.equal(b(utc(1990,0,1)),"Mon Jan  1 00:00:00 1990")},"formats zero-padded date":function(a){var b=a("%d");assert.equal(b(utc(1990,0,1)),"01")},"formats space-padded date":function(a){var b=a("%e");assert.equal(b(utc(1990,0,1))," 1")},"formats zero-padded hour (24)":function(a){var b=a("%H");assert.equal(b(utc(1990,0,1,0)),"00"),assert.equal(b(utc(1990,0,1,13)),"13")},"formats zero-padded hour (12)":function(a){var b=a("%I");assert.equal(b(utc(1990,0,1,0)),"12"),assert.equal(b(utc(1990,0,1,13)),"01")},"formats zero-padded day of year":function(a){var b=a("%j");assert.equal(b(utc(1990,0,1)),"001"),assert.equal(b(utc(1990,5,1)),"152"),assert.equal(b(utc(2010,2,13,23)),"072"),assert.equal(b(utc(2010,2,14,0)),"073"),assert.equal(b(utc(2010,2,15,0)),"074"),assert.equal(b(utc(2010,10,6,23)),"310"),assert.equal(b(utc(2010,10,7,0)),"311"),assert.equal(b(utc(2010,10,8,0)),"312")},"formats zero-padded month":function(a){var b=a("%m");assert.equal(b(utc(1990,0,1)),"01"),assert.equal(b(utc(1990,9,1)),"10")},"formats zero-padded minute":function(a){var b=a("%M");assert.equal(b(utc(1990,0,1,0,0)),"00"),assert.equal(b(utc(1990,0,1,0,32)),"32")},"formats AM or PM":function(a){var b=a("%p");assert.equal(b(utc(1990,0,1,0)),"AM"),assert.equal(b(utc(1990,0,1,13)),"PM")},"formats zero-padded second":function(a){var b=a("%S");assert.equal(b(utc(1990,0,1,0,0,0)),"00"),assert.equal(b(utc(1990,0,1,0,0,32)),"32")},"formats zero-padded millisecond":function(a){var b=a("%L");assert.equal(b(utc(1990,0,1,0,0,0,0)),"000"),assert.equal(b(utc(1990,0,1,0,0,0,432)),"432")},"formats zero-padded week number":function(a){var b=a("%U");assert.equal(b(utc(1990,0,1)),"00"),assert.equal(b(utc(1990,5,1)),"21"),assert.equal(b(utc(2010,2,13,23)),"10"),assert.equal(b(utc(2010,2,14,0)),"11"),assert.equal(b(utc(2010,2,15,0)),"11"),assert.equal(b(utc(2010,10,6,23)),"44"),assert.equal(b(utc(2010,10,7,0)),"45"),assert.equal(b(utc(2010,10,8,0)),"45")},"formats locale date":function(a){var b=a("%x");assert.equal(b(utc(1990,0,1)),"01/01/90"),assert.equal(b(utc(2010,5,1)),"06/01/10")},"formats locale time":function(a){var b=a("%X");assert.equal(b(utc(1990,0,1)),"00:00:00"),assert.equal(b(utc(1990,0,1,13,34,59)),"13:34:59")},"formats zero-padded two-digit year":function(a){var b=a("%y");assert.equal(b(utc(1990,0,1)),"90"),assert.equal(b(utc(2002,0,1)),"02")},"formats zero-padded four-digit year":function(a){var b=a("%Y");assert.equal(b(utc(123,0,1)),"0123"),assert.equal(b(utc(1990,0,1)),"1990"),assert.equal(b(utc(2002,0,1)),"2002"),assert.equal(b(utc(10002,0,1)),"0002")},"formats time zone":function(a){var b=a("%Z");assert.equal(b(utc(1990,0,1)),"+0000")},"formats literal percent sign":function(a){var b=a("%%");assert.equal(b(utc(1990,0,1)),"%")}},ISO:{topic:function(a){return a.iso},"toString is %Y-%m-%dT%H:%M:%S.%LZ":function(a){assert.equal(a+"","%Y-%m-%dT%H:%M:%S.%LZ")},"formats as ISO 8601":function(a){assert.equal(a(utc(1990,0,1,0,0,0)),"1990-01-01T00:00:00.000Z"),assert.equal(a(utc(2011,11,31,23,59,59)),"2011-12-31T23:59:59.000Z")}}},parse:{topic:function(){return d3.time.format},"parses abbreviated weekday and numeric date":function(a){var b=a("%a %m/%d/%Y").parse;assert.deepEqual(b("Sun 01/01/1990"),local(1990,0,1)),assert.deepEqual(b("Wed 02/03/1991"),local(1991,1,3)),assert.isNull(b("XXX 03/10/2010"))},"parses weekday and numeric date":function(a){var b=a("%A %m/%d/%Y").parse;assert.deepEqual(b("Sunday 01/01/1990"),local(1990,0,1)),assert.deepEqual(b("Wednesday 02/03/1991"),local(1991,1,3)),assert.isNull(b("Caturday 03/10/2010"))},"parses numeric date":function(a){var b=a("%m/%d/%y").parse;assert.deepEqual(b("01/01/90"),local(2090,0,1)),assert.deepEqual(b("02/03/91"),local(2091,1,3)),assert.isNull(b("03/10/2010"))},"parses locale date":function(a){var b=a("%x").parse;assert.deepEqual(b("01/01/90"),local(2090,0,1)),assert.deepEqual(b("02/03/91"),local(2091,1,3)),assert.isNull(b("03/10/2010"))},"parses abbreviated month, date and year":function(a){var b=a("%b %d, %Y").parse;assert.deepEqual(b("jan 01, 1990"),local(1990,0,1)),assert.deepEqual(b("feb  2, 2010"),local(2010,1,2)),assert.isNull(b("jan. 1, 1990"))},"parses month, date and year":function(a){var b=a("%B %d, %Y").parse;assert.deepEqual(b("january 01, 1990"),local(1990,0,1)),assert.deepEqual(b("February  2, 2010"),local(2010,1,2)),assert.isNull(b("jan 1, 1990"))},"parses locale date and time":function(a){var b=a("%c").parse;assert.deepEqual(b("Mon Jan  1 00:00:00 1990"),local(1990,0,1)),assert.deepEqual(b("Sun Jan  1 00:00:00 1990"),local(1990,0,1)),assert.deepEqual(b("Mon Jan 01 00:00:00 1990"),local(1990,0,1)),assert.deepEqual(b("Mon Jan 1 00:00:00 1990"),local(1990,0,1)),assert.deepEqual(b("Mon Jan 1 0:0:0 1990"),local(1990,0,1))},"parses twenty-four hour, minute and second":function(a){var b=a("%H:%M:%S").parse;assert.deepEqual(b("00:00:00"),local(1900,0,1,0,0,0)),assert.deepEqual(b("11:59:59"),local(1900,0,1,11,59,59)),assert.deepEqual(b("12:00:00"),local(1900,0,1,12,0,0)),assert.deepEqual(b("12:00:01"),local(1900,0,1,12,0,1)),assert.deepEqual(b("23:59:59"),local(1900,0,1,23,59,59))},"parses locale time":function(a){var b=a("%X").parse;assert.deepEqual(b("00:00:00"),local(1900,0,1,0,0,0)),assert.deepEqual(b("11:59:59"),local(1900,0,1,11,59,59)),assert.deepEqual(b("12:00:00"),local(1900,0,1,12,0,0)),assert.deepEqual(b("12:00:01"),local(1900,0,1,12,0,1)),assert.deepEqual(b("23:59:59"),local(1900,0,1,23,59,59))},"parses twelve hour, minute and second":function(a){var b=a("%I:%M:%S %p").parse;assert.deepEqual(b("12:00:00 am"),local(1900,0,1,0,0,0)),assert.deepEqual(b("11:59:59 AM"),local(1900,0,1,11,59,59)),assert.deepEqual(b("12:00:00 pm"),local(1900,0,1,12,0,0)),assert.deepEqual(b("12:00:01 pm"),local(1900,0,1,12,0,1)),assert.deepEqual(b("11:59:59 PM"),local(1900,0,1,23,59,59))},"doesn't crash when given weird strings":function(a){try{Object.prototype.foo=10;var b=a("%b %d, %Y").parse;assert.isNull(b("foo 1, 1990"))}finally{delete Object.prototype.foo}},UTC:{topic:function(a){return a.utc},"parses abbreviated weekday and numeric date":function(a){var b=a("%a %m/%d/%Y").parse;assert.deepEqual(b("Sun 01/01/1990"),utc(1990,0,1)),assert.deepEqual(b("Wed 02/03/1991"),utc(1991,1,3)),assert.isNull(b("XXX 03/10/2010"))},"parses weekday and numeric date":function(a){var b=a("%A %m/%d/%Y").parse;assert.deepEqual(b("Sunday 01/01/1990"),utc(1990,0,1)),assert.deepEqual(b("Wednesday 02/03/1991"),utc(1991,1,3)),assert.isNull(b("Caturday 03/10/2010"))},"parses numeric date":function(a){var b=a("%m/%d/%y").parse;assert.deepEqual(b("01/01/90"),utc(2090,0,1)),assert.deepEqual(b("02/03/91"),utc(2091,1,3)),assert.isNull(b("03/10/2010"))},"parses locale date":function(a){var b=a("%x").parse;assert.deepEqual(b("01/01/90"),utc(2090,0,1)),assert.deepEqual(b("02/03/91"),utc(2091,1,3)),assert.isNull(b("03/10/2010"))},"parses abbreviated month, date and year":function(a){var b=a("%b %d, %Y").parse;assert.deepEqual(b("jan 01, 1990"),utc(1990,0,1)),assert.deepEqual(b("feb  2, 2010"),utc(2010,1,2)),assert.isNull(b("jan. 1, 1990"))},"parses month, date and year":function(a){var b=a("%B %d, %Y").parse;assert.deepEqual(b("january 01, 1990"),utc(1990,0,1)),assert.deepEqual(b("February  2, 2010"),utc(2010,1,2)),assert.isNull(b("jan 1, 1990"))},"parses locale date and time":function(a){var b=a("%c").parse;assert.deepEqual(b("Mon Jan  1 00:00:00 1990"),utc(1990,0,1)),assert.deepEqual(b("Sun Jan  1 00:00:00 1990"),utc(1990,0,1)),assert.deepEqual(b("Mon Jan 01 00:00:00 1990"),utc(1990,0,1)),assert.deepEqual(b("Mon Jan 1 00:00:00 1990"),utc(1990,0,1)),assert.deepEqual(b("Mon Jan 1 0:0:0 1990"),utc(1990,0,1))},"parses twenty-four hour, minute and second":function(a){var b=a("%H:%M:%S").parse;assert.deepEqual(b("00:00:00"),utc(1900,0,1,0,0,0)),assert.deepEqual(b("11:59:59"),utc(1900,0,1,11,59,59)),assert.deepEqual(b("12:00:00"),utc(1900,0,1,12,0,0)),assert.deepEqual(b("12:00:01"),utc(1900,0,1,12,0,1)),assert.deepEqual(b("23:59:59"),utc(1900,0,1,23,59,59))},"parses locale time":function(a){var b=a("%X").parse;assert.deepEqual(b("00:00:00"),utc(1900,0,1,0,0,0)),assert.deepEqual(b("11:59:59"),utc(1900,0,1,11,59,59)),assert.deepEqual(b("12:00:00"),utc(1900,0,1,12,0,0)),assert.deepEqual(b("12:00:01"),utc(1900,0,1,12,0,1)),assert.deepEqual(b("23:59:59"),utc(1900,0,1,23,59,59))},"parses twelve hour, minute and second":function(a){var b=a("%I:%M:%S %p").parse;assert.deepEqual(b("12:00:00 am"),utc(1900,0,1,0,0,0)),assert.deepEqual(b("11:59:59 AM"),utc(1900,0,1,11,59,59)),assert.deepEqual(b("12:00:00 pm"),utc(1900,0,1,12,0,0)),assert.deepEqual(b("12:00:01 pm"),utc(1900,0,1,12,0,1)),assert.deepEqual(b("11:59:59 PM"),utc(1900,0,1,23,59,59))}},ISO:{topic:function(a){return a.iso},"parses as ISO 8601":function(a){var b=a.parse;assert.deepEqual(b("1990-01-01T00:00:00.000Z"),utc(1990,0,1,0,0,0)),assert.deepEqual(b("2011-12-31T23:59:59.000Z"),utc(2011,11,31,23,59,59))}}}}),suite.export(module)