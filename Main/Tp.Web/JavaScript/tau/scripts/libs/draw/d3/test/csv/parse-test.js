require("../env");var vows=require("vows"),assert=require("assert"),suite=vows.describe("d3.csv.parse");suite.addBatch({parse:{topic:function(){return d3.csv.parse},"returns an array of objects":function(a){assert.deepEqual(a("a,b,c\n1,2,3\n"),[{a:"1",b:"2",c:"3"}])},"does not strip whitespace":function(a){assert.deepEqual(a("a,b,c\n 1, 2,3\n"),[{a:" 1",b:" 2",c:"3"}])},"parses quoted values":function(a){assert.deepEqual(a('a,b,c\n"1",2,3'),[{a:"1",b:"2",c:"3"}]),assert.deepEqual(a('a,b,c\n"1",2,3\n'),[{a:"1",b:"2",c:"3"}])},"parses quoted values with quotes":function(a){assert.deepEqual(a('a\n"""hello"""'),[{a:'"hello"'}])},"parses quoted values with newlines":function(a){assert.deepEqual(a('a\n"new\nline"'),[{a:"new\nline"}]),assert.deepEqual(a('a\n"new\rline"'),[{a:"new\rline"}]),assert.deepEqual(a('a\n"new\r\nline"'),[{a:"new\r\nline"}])},"parses unix newlines":function(a){assert.deepEqual(a('a,b,c\n1,2,3\n4,5,"6"\n7,8,9'),[{a:"1",b:"2",c:"3"},{a:"4",b:"5",c:"6"},{a:"7",b:"8",c:"9"}])},"parses mac newlines":function(a){assert.deepEqual(a('a,b,c\r1,2,3\r4,5,"6"\r7,8,9'),[{a:"1",b:"2",c:"3"},{a:"4",b:"5",c:"6"},{a:"7",b:"8",c:"9"}])},"parses dos newlines":function(a){assert.deepEqual(a('a,b,c\r\n1,2,3\r\n4,5,"6"\r\n7,8,9'),[{a:"1",b:"2",c:"3"},{a:"4",b:"5",c:"6"},{a:"7",b:"8",c:"9"}])}},parseRows:{topic:function(){return d3.csv.parseRows},"returns an array of arrays":function(a){assert.deepEqual(a("a,b,c\n"),[["a","b","c"]])},"parses quoted values":function(a){assert.deepEqual(a('"1",2,3\n'),[["1","2","3"]]),assert.deepEqual(a('"hello"'),[["hello"]])},"parses quoted values with quotes":function(a){assert.deepEqual(a('"""hello"""'),[['"hello"']])},"parses quoted values with newlines":function(a){assert.deepEqual(a('"new\nline"'),[["new\nline"]]),assert.deepEqual(a('"new\rline"'),[["new\rline"]]),assert.deepEqual(a('"new\r\nline"'),[["new\r\nline"]])},"parses unix newlines":function(a){assert.deepEqual(a('a,b,c\n1,2,3\n4,5,"6"\n7,8,9'),[["a","b","c"],["1","2","3"],["4","5","6"],["7","8","9"]])},"parses mac newlines":function(a){assert.deepEqual(a('a,b,c\r1,2,3\r4,5,"6"\r7,8,9'),[["a","b","c"],["1","2","3"],["4","5","6"],["7","8","9"]])},"parses dos newlines":function(a){assert.deepEqual(a('a,b,c\r\n1,2,3\r\n4,5,"6"\r\n7,8,9'),[["a","b","c"],["1","2","3"],["4","5","6"],["7","8","9"]])}}}),suite.export(module)