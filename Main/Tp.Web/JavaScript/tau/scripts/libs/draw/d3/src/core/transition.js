function d3_transition(a,b,c){d3_arraySubclass(a,d3_transitionPrototype);var d=new d3_Map,e=d3.dispatch("start","end"),f=d3_transitionEase;return a.id=b,a.time=c,a.tween=function(b,c){return arguments.length<2?d.get(b):(c==null?d.remove(b):d.set(b,c),a)},a.ease=function(b){return arguments.length?(f=typeof b=="function"?b:d3.ease.apply(d3,arguments),a):f},a.each=function(b,c){return arguments.length<2?d3_transition_each.call(a,b):(e.on(b,c),a)},d3.timer(function(g){return a.each(function(h,i,j){function p(a){return o.active>b?r():(o.active=b,d.forEach(function(a,b){(tween=b.call(l,h,i))&&k.push(tween)}),e.start.call(l,h,i),q(a)||d3.timer(q,0,c),1)}function q(a){if(o.active!==b)return r();var c=(a-m)/n,d=f(c),g=k.length;while(g>0)k[--g].call(l,d);if(c>=1)return r(),d3_transitionId=b,e.end.call(l,h,i),d3_transitionId=0,1}function r(){return--o.count||delete l.__transition__,1}var k=[],l=this,m=a[j][i].delay,n=a[j][i].duration,o=l.__transition__||(l.__transition__={active:0,count:0});++o.count,m<=g?p(g):d3.timer(p,m,c)}),1},0,c),a}function d3_transitionNull(a,b,c){return c!=""&&d3_transitionRemove}function d3_transitionTween(a,b){function d(a,d,e){var f=b.call(this,a,d);return f==null?e!=""&&d3_transitionRemove:e!=f&&c(e,f)}function e(a,d,e){return e!=b&&c(e,b)}var c=d3_interpolateByName(a);return typeof b=="function"?d:b==null?d3_transitionNull:(b+="",e)}var d3_transitionRemove={},d3_transitionPrototype=[],d3_transitionNextId=0,d3_transitionId=0,d3_transitionDefaultDelay=0,d3_transitionDefaultDuration=250,d3_transitionDefaultEase=d3.ease("cubic-in-out"),d3_transitionDelay=d3_transitionDefaultDelay,d3_transitionDuration=d3_transitionDefaultDuration,d3_transitionEase=d3_transitionDefaultEase;d3_transitionPrototype.call=d3_selectionPrototype.call,d3.transition=function(a){return arguments.length?d3_transitionId?a.transition():a:d3_selectionRoot.transition()},d3.transition.prototype=d3_transitionPrototype