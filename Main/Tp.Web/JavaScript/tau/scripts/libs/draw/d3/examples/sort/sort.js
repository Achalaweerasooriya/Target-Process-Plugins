function start(){function b(){var c=a.pop();line.data(c,Number).transition().duration(duration).attr("transform",transform),a.length?setTimeout(b,duration):(shuffle(data),setTimeout(start,duration+4e3))}var a=mergesort(data).reverse();b()}function transform(b,c){return"translate("+x(c)+","+h+")rotate("+a(b)+")"}function shuffle(a){var b=a.length,c,d;while(--b>0)c=~~(Math.random()*(b+1)),d=a[c],a[c]=a[b],a[b]=d;return a}function mergesort(a){function g(b,c,d){c=Math.min(a.length,c),d=Math.min(a.length,d);for(;b<c;b++)if(a[b]>a[c]){var e=a[b];return a[b]=a[c],h(c,d,e),!0}return!1}function h(b,c,d){while(b+1<c&&a[b+1]<d){var e=a[b];a[b]=a[b+1],a[b+1]=e,b++}a[b]=d}var b=[],c,d,e=a.length,f=1;while(f<a.length){c=d=0;while(c<a.length)d+=g(c,c+=f,c+=f);d?b.push(a.slice()):f<<=1}return b}var w=960,h=50,n=240,x=d3.scale.linear().domain([0,n]).range([h,w-h]),a=d3.scale.linear().domain([0,n-1]).range([150,210]),data=shuffle(d3.range(n)),duration=250,vis=d3.select("#chart").append("svg").attr("width",w).attr("height",h),line=vis.selectAll("line").data(data).enter().append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",h).attr("transform",transform);start()