function cell(){this.style("left",function(a){return a.x+"px"}).style("top",function(a){return a.y+"px"}).style("width",function(a){return a.dx-1+"px"}).style("height",function(a){return a.dy-1+"px"})}var w=960,h=500,fill=d3.scale.ordinal().range(colorbrewer.Greys[9].slice(1,4)),stroke=d3.scale.linear().domain([0,1e4]).range(["brown","steelblue"]),treemap=d3.layout.treemap().size([w,h]).value(function(a){return a.size}),bundle=d3.layout.bundle(),div=d3.select("#chart").append("div").style("position","relative").style("width",w+"px").style("height",h+"px"),line=d3.svg.line().interpolate("bundle").tension(.85).x(function(a){return a.x+a.dx/2}).y(function(a){return a.y+a.dy/2});d3.json("../data/flare-imports.json",function(a){var b=treemap.nodes(packages.root(a)),c=packages.imports(b);div.selectAll("div").data(b).enter().append("div").attr("class","cell").style("background",function(a){return a.children?fill(a.key):null}).call(cell).text(function(a){return a.children?null:a.key}),div.append("svg").attr("width",w).attr("height",h).style("position","absolute").selectAll("path.link").data(bundle(c)).enter().append("path").style("stroke",function(a){return stroke(a[0].value)}).attr("class","link").attr("d",line)})