require("../env");var vows=require("vows"),assert=require("assert"),suite=vows.describe("selection.text");suite.addBatch({"select(body)":{topic:function(){return d3.select("body").html("")},"sets the text content as a string":function(a){a.text("Hello, world!"),assert.equal(document.body.textContent,"Hello, world!")},"sets the text content as a number":function(a){a.text(42),assert.equal(document.body.textContent,"42")},"sets the text content as a function":function(a){a.data(["Subject"]).text(function(a,b){return"Hello, "+a+" "+b+"!"}),assert.equal(document.body.textContent,"Hello, Subject 0!")},"escapes html content to text":function(a){a.text("<h1>Hello, world!</h1>"),assert.equal(document.body.textContent,"<h1>Hello, world!</h1>"),assert.equal(document.body.firstChild.nodeType,document.TEXT_NODE)},"ignores null nodes":function(){var a=d3.select("body");a[0][0]=null,document.body.textContent="foo",a.text("bar"),assert.equal(document.body.textContent,"foo")},"returns the current selection":function(a){assert.isTrue(a.text("hello")===a)}}}),suite.addBatch({"selectAll(div)":{topic:function(){return d3.select("body").html("").selectAll("div").data(d3.range(2)).enter().append("div")},"sets the text content as a string":function(a){a.text("Hello, world!"),assert.equal(a[0][0].textContent,"Hello, world!"),assert.equal(a[0][1].textContent,"Hello, world!")},"sets the text content as a number":function(a){a.text(42),assert.equal(a[0][0].textContent,"42"),assert.equal(a[0][1].textContent,"42")},"sets the text content as a function":function(a){a.data(["foo","bar"]).text(function(a,b){return"Hello, "+a+" "+b+"!"}),assert.equal(a[0][0].textContent,"Hello, foo 0!"),assert.equal(a[0][1].textContent,"Hello, bar 1!")},"escapes html content to text":function(a){a.text("<h1>Hello, world!</h1>"),assert.equal(a[0][0].textContent,"<h1>Hello, world!</h1>"),assert.equal(a[0][1].textContent,"<h1>Hello, world!</h1>"),assert.equal(a[0][0].firstChild.nodeType,document.TEXT_NODE),assert.equal(a[0][1].firstChild.nodeType,document.TEXT_NODE)},"ignores null nodes":function(a){a[0][0].textContent="foo";var b=d3.selectAll("div");b[0][0]=null,b.text("bar"),assert.equal(a[0][0].textContent,"foo"),assert.equal(a[0][1].textContent,"bar")},"returns the current selection":function(a){assert.isTrue(a.text("hello")===a)}}}),suite.export(module)