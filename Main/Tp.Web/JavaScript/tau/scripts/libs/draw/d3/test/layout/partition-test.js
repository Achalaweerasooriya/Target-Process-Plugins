function metadata(a){var b={};return"x"in a&&(b.x=a.x),"y"in a&&(b.y=a.y),"dx"in a&&(b.dx=a.dx),"dy"in a&&(b.dy=a.dy),b}require("../env");var vows=require("vows"),assert=require("assert"),suite=vows.describe("d3.layout.partition");suite.addBatch({partition:{topic:function(){return d3.layout.partition},"ignores zero values":function(a){var b=a().size([3,3]);assert.deepEqual(b.nodes({children:[{value:1},{value:0},{value:2},{children:[{value:0},{value:0}]}]}).map(metadata),[{x:0,y:0,dx:3,dy:1},{x:2,y:1,dx:1,dy:1},{x:3,y:1,dx:0,dy:1},{x:0,y:1,dx:2,dy:1},{x:3,y:1,dx:0,dy:1},{x:3,y:2,dx:0,dy:1},{x:3,y:2,dx:0,dy:1}])},"can handle an empty children array":function(a){var b=a();assert.deepEqual(b.nodes({children:[]}).map(metadata),[{x:0,y:0,dx:1,dy:1}]),assert.deepEqual(b.nodes({children:[{children:[]},{value:1}]}).map(metadata),[{x:0,y:0,dx:1,dy:.5},{x:1,y:.5,dx:0,dy:.5},{x:0,y:.5,dx:1,dy:.5}])}}}),suite.export(module)