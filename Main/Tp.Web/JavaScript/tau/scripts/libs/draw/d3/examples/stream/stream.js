function transition(){d3.selectAll("path").data(function(){var a=data1;return data1=data0,data0=a}).transition().duration(2500).attr("d",area)}var n=20,m=200,data0=d3.layout.stack().offset("wiggle")(stream_layers(n,m)),data1=d3.layout.stack().offset("wiggle")(stream_layers(n,m)),color=d3.interpolateRgb("#aad","#556"),w=960,h=500,mx=m-1,my=d3.max(data0.concat(data1),function(a){return d3.max(a,function(a){return a.y0+a.y})}),area=d3.svg.area().x(function(a){return a.x*w/mx}).y0(function(a){return h-a.y0*h/my}).y1(function(a){return h-(a.y+a.y0)*h/my}),vis=d3.select("#chart").append("svg").attr("width",w).attr("height",h);vis.selectAll("path").data(data0).enter().append("path").style("fill",function(){return color(Math.random())}).attr("d",area)