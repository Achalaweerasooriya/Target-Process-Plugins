var data=[,.187,.198,,.133,.175,.151,,.1,.125,.171,,.172,.133,,.108,.142,.167,.201,.175,.159,.169,.177,.141,.163,.117,.182,.153,.195,.189,.134,.163,.133,.151,.145,.13,.139,.169,.164,.175,.135,.152,.169,,.132,.167,.139,.184,.159,.14,.146,.157,,.139,.183,.16,.143],color=d3.scale.linear().domain([d3.min(data),d3.max(data)]).range(["#aad","#556"]),force=d3.layout.force().charge(0).gravity(0).size([960,500]),svg=d3.select("#chart").append("svg").attr("width",1060).attr("height",600).append("g").attr("transform","translate(50,50)");d3.json("../data/us-state-centroids.json",function(a){var b=d3.geo.albersUsa(),c={},d=[],e=a.features.map(function(a){var d=b(a.geometry.coordinates);return c[a.id]={x:d[0],y:d[1],gravity:{x:d[0],y:d[1]},r:Math.sqrt(data[+a.id]*5e3),value:data[+a.id]}});force.nodes(e).links(d).start().on("tick",function(a){var b=a.alpha,c=b*.02;e.forEach(function(a,d){a.x+=(a.gravity.x-a.x)*c,a.y+=(a.gravity.y-a.y)*c,e.slice(d+1).forEach(function(c){var d=a.x-c.x,e=a.y-c.y,f=Math.sqrt(d*d+e*e),g=a.r+c.r;f<g&&(f=(f-g)/f*b,d*=f,e*=f,a.x-=d,a.y-=e,c.x+=d,c.y+=e)})}),svg.selectAll("circle").attr("cx",function(a){return a.x}).attr("cy",function(a){return a.y})}),svg.selectAll("circle").data(e).enter().append("circle").style("fill",function(a){return color(a.value)}).attr("cx",function(a){return a.x}).attr("cy",function(a){return a.y}).attr("r",function(a,b){return a.r})})