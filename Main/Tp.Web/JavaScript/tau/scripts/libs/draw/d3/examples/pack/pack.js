var w=960,h=960,format=d3.format(",d"),pack=d3.layout.pack().size([w-4,h-4]).value(function(a){return a.size}),vis=d3.select("#chart").append("svg").attr("width",w).attr("height",h).attr("class","pack").append("g").attr("transform","translate(2, 2)");d3.json("../data/flare.json",function(a){var b=vis.data([a]).selectAll("g.node").data(pack.nodes).enter().append("g").attr("class",function(a){return a.children?"node":"leaf node"}).attr("transform",function(a){return"translate("+a.x+","+a.y+")"});b.append("title").text(function(a){return a.name+(a.children?"":": "+format(a.size))}),b.append("circle").attr("r",function(a){return a.r}),b.filter(function(a){return!a.children}).append("text").attr("text-anchor","middle").attr("dy",".3em").text(function(a){return a.name.substring(0,a.r/3)})})