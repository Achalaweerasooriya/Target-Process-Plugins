require("../env");var vows=require("vows"),assert=require("assert"),suite=vows.describe("d3.svg.line");suite.addBatch({line:{topic:function(){return d3.svg.line},"x defaults to a function accessor":function(a){var b=a();assert.pathEqual(b([[1,2],[4,3]]),"M1,2L4,3"),assert.typeOf(b.x(),"function")},"x can be defined as a constant":function(a){var b=a().x(0);assert.pathEqual(b([[1,2],[4,3]]),"M0,2L0,3"),assert.equal(b.x(),0)},"x can be defined as a function":function(a){function g(a,b){return d.push(a),e.push(b),f.push(this),0}var b=a().x(g),c={},d=[],e=[],f=[];assert.pathEqual(b.call(c,[[1,2],[4,3]]),"M0,2L0,3"),assert.deepEqual(d,[[1,2],[4,3]],"expected data, got {actual}"),assert.deepEqual(e,[0,1],"expected index, got {actual}"),assert.deepEqual(f,[c,c],"expected this, got {actual}")},"y defaults to a function accessor":function(a){var b=a();assert.pathEqual(b([[1,2],[4,3]]),"M1,2L4,3"),assert.typeOf(b.y(),"function")},"y can be defined as a constant":function(a){var b=a().y(0);assert.pathEqual(b([[1,2],[4,3]]),"M1,0L4,0"),assert.equal(b.y(),0)},"y can be defined as a function":function(a){function g(a,b){return d.push(a),e.push(b),f.push(this),0}var b=a().y(g),c={},d=[],e=[],f=[];assert.pathEqual(b.call(c,[[1,2],[4,3]]),"M1,0L4,0"),assert.deepEqual(d,[[1,2],[4,3]],"expected data, got {actual}"),assert.deepEqual(e,[0,1],"expected index, got {actual}"),assert.deepEqual(f,[c,c],"expected this, got {actual}")},"interpolate defaults to linear":function(a){assert.equal(a().interpolate(),"linear")},"interpolate can be defined as a constant":function(a){var b=a().interpolate("step-before");assert.pathEqual(b([[0,0],[1,1]]),"M0,0V1H1"),assert.equal(b.interpolate(),"step-before")},"invalid interpolates fallback to linear":function(a){assert.equal(a().interpolate("__proto__").interpolate(),"linear")},"tension defaults to .7":function(a){assert.equal(a().tension(),.7)},"tension can be specified as a constant":function(a){var b=a().tension(.5);assert.equal(b.tension(),.5)},"returns null if input points array is empty":function(a){assert.isNull(a()([]))},"interpolate(linear)":{"supports linear interpolation":function(a){var b=a().interpolate("linear");assert.pathEqual(b([[0,0],[1,1],[2,0],[3,1],[4,0]]),"M0,0L1,1L2,0L3,1L4,0")}},"interpolate(step)":{"supports step-before interpolation":function(a){var b=a().interpolate("step-before");assert.pathEqual(b([[0,0]]),"M0,0"),assert.pathEqual(b([[0,0],[1,1]]),"M0,0V1H1"),assert.pathEqual(b([[0,0],[1,1],[2,0]]),"M0,0V1H1V0H2")},"supports step-after interpolation":function(a){var b=a().interpolate("step-after");assert.pathEqual(b([[0,0]]),"M0,0"),assert.pathEqual(b([[0,0],[1,1]]),"M0,0H1V1"),assert.pathEqual(b([[0,0],[1,1],[2,0]]),"M0,0H1V1H2V0")}},"interpolate(basis)":{"supports basis interpolation":function(a){var b=a().interpolate("basis");assert.pathEqual(b([[0,0],[1,1],[2,0],[3,1],[4,0]]),"M0,0C0,0,0,0,0.16666666666666666,0.16666666666666666C0.3333333333333333,0.3333333333333333,0.6666666666666666,0.6666666666666666,1,0.6666666666666666C1.3333333333333333,0.6666666666666666,1.6666666666666665,0.3333333333333333,2,0.3333333333333333C2.333333333333333,0.3333333333333333,2.6666666666666665,0.6666666666666666,3,0.6666666666666666C3.333333333333333,0.6666666666666666,3.6666666666666665,0.3333333333333333,3.833333333333333,0.16666666666666666C4,0,4,0,3.9999999999999996,0")},"supports basis-open interpolation":function(a){var b=a().interpolate("basis-open");assert.pathEqual(b([[0,0],[1,1],[2,0],[3,1],[4,0]]),"M1,0.6666666666666666C1.3333333333333333,0.6666666666666666,1.6666666666666665,0.3333333333333333,2,0.3333333333333333C2.333333333333333,0.3333333333333333,2.6666666666666665,0.6666666666666666,3,0.6666666666666666")},"supports basis-closed interpolation":function(a){var b=a().interpolate("basis-closed");assert.pathEqual(b([[0,0],[1,1],[2,0],[3,1],[4,0]]),"M2,0.3333333333333333C2.333333333333333,0.3333333333333333,2.6666666666666665,0.6666666666666666,3,0.6666666666666666C3.333333333333333,0.6666666666666666,3.6666666666666665,0.3333333333333333,3.1666666666666665,0.16666666666666666C2.6666666666666665,0,1.3333333333333333,0,0.8333333333333333,0.16666666666666666C0.3333333333333333,0.3333333333333333,0.6666666666666666,0.6666666666666666,1,0.6666666666666666C1.3333333333333333,0.6666666666666666,1.6666666666666665,0.3333333333333333,2,0.3333333333333333")},"basis interpolation reverts to linear with fewer than three points":function(a){var b=a().interpolate("basis"),c=a();assert.pathEqual(b([[0,0]]),c([[0,0]])),assert.pathEqual(b([[0,0],[1,1]]),c([[0,0],[1,1]]))},"basis-open interpolation reverts to linear with fewer than four points":function(a){var b=a().interpolate("basis-open"),c=a();assert.pathEqual(b([[0,0]]),c([[0,0]])),assert.pathEqual(b([[0,0],[1,1]]),c([[0,0],[1,1]])),assert.pathEqual(b([[0,0],[1,1],[2,0]]),c([[0,0],[1,1],[2,0]]))},"basis-closed interpolation reverts to linear with fewer than three points":function(a){var b=a().interpolate("basis-open"),c=a();assert.pathEqual(b([[0,0]]),c([[0,0]])),assert.pathEqual(b([[0,0],[1,1]]),c([[0,0],[1,1]]))}},"interpolate(bundle)":{"supports bundle interpolation":function(a){var b=a().interpolate("bundle");assert.pathEqual(b([[0,0],[1,1],[2,0],[3,1],[4,0]]),"M0,0C0,0,0,0,0.16666666666666666,0.11666666666666665C0.3333333333333333,0.2333333333333333,0.6666666666666666,0.4666666666666666,1,0.4666666666666666C1.3333333333333333,0.4666666666666666,1.6666666666666665,0.2333333333333333,2,0.2333333333333333C2.333333333333333,0.2333333333333333,2.6666666666666665,0.4666666666666666,3,0.4666666666666666C3.333333333333333,0.4666666666666666,3.6666666666666665,0.2333333333333333,3.833333333333333,0.11666666666666665C4,0,4,0,4,0")},"observes the specified tension":function(a){var b=a().interpolate("bundle").tension(1);assert.pathEqual(b([[0,0],[1,1],[2,0],[3,1],[4,0]]),a().interpolate("basis")([[0,0],[1,1],[2,0],[3,1],[4,0]]))}},"interpolate(cardinal)":{"supports cardinal interpolation":function(a){var b=a().interpolate("cardinal");assert.pathEqual(b([[0,0],[1,1],[2,0],[3,1],[4,0]]),"M0,0Q0.8,1,1,1C1.3,1,1.7,0,2,0S2.7,1,3,1Q3.2,1,4,0")},"supports cardinal-open interpolation":function(a){var b=a().interpolate("cardinal-open");assert.pathEqual(b([[0,0],[1,1],[2,0],[3,1],[4,0]]),"M1,1C1.3,1,1.7,0,2,0S2.7,1,3,1")},"supports cardinal-closed interpolation":function(a){var b=a().interpolate("cardinal-closed");assert.pathEqual(b([[0,0],[1,1],[2,0],[3,1],[4,0]]),"M0,0C-0.45,0.15,0.7,1,1,1S1.7,0,2,0S2.7,1,3,1S4.45,0.15,4,0S0.45,-0.15,0,0")},"cardinal interpolation reverts to linear with fewer than three points":function(a){var b=a().interpolate("cardinal"),c=a();assert.pathEqual(b([[0,0]]),c([[0,0]])),assert.pathEqual(b([[0,0],[1,1]]),c([[0,0],[1,1]]))},"cardinal-open interpolation reverts to linear with fewer than four points":function(a){var b=a().interpolate("cardinal-open"),c=a();assert.pathEqual(b([[0,0]]),c([[0,0]])),assert.pathEqual(b([[0,0],[1,1]]),c([[0,0],[1,1]])),assert.pathEqual(b([[0,0],[1,1],[2,0]]),c([[0,0],[1,1],[2,0]]))},"cardinal-closed interpolation reverts to linear with fewer than three points":function(a){var b=a().interpolate("cardinal-open"),c=a();assert.pathEqual(b([[0,0]]),c([[0,0]])),assert.pathEqual(b([[0,0],[1,1]]),c([[0,0],[1,1]]))},"observes the specified tension":function(a){var b=a().tension(.5);assert.pathEqual(b.interpolate("cardinal")([[0,0],[1,1],[2,0],[3,1],[4,0]]),"M0,0Q0.6666666666666667,1,1,1C1.5,1,1.5,0,2,0S2.5,1,3,1Q3.3333333333333335,1,4,0"),assert.pathEqual(b.interpolate("cardinal-open")([[0,0],[1,1],[2,0],[3,1],[4,0]]),"M1,1C1.5,1,1.5,0,2,0S2.5,1,3,1"),assert.pathEqual(b.interpolate("cardinal-closed")([[0,0],[1,1],[2,0],[3,1],[4,0]]),"M0,0C-0.75,0.25,0.5,1,1,1S1.5,0,2,0S2.5,1,3,1S4.75,0.25,4,0S0.75,-0.25,0,0")}},"interpolate(monotone)":{"supports monotone interpolation":function(a){var b=a().interpolate("monotone");assert.pathEqual(b([[0,0],[1,1],[2,1],[3,0],[4,0]]),"M0,0C0.08333333333333333,0.08333333333333333,0.6666666666666667,1,1,1S1.6666666666666667,1,2,1S2.6666666666666665,0,3,0S3.8333333333333335,0,4,0")},"monotone interpolation reverts to linear with fewer than three points":function(a){var b=a().interpolate("monotone"),c=a();assert.pathEqual(b([[0,0]]),c([[0,0]])),assert.pathEqual(b([[0,0],[1,1]]),c([[0,0],[1,1]]))}}}}),suite.export(module)