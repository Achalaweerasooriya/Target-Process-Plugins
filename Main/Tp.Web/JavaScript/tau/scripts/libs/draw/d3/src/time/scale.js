function d3_time_scale(a,b,c){function d(b){return a(b)}return d.invert=function(b){return d3_time_scaleDate(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain(b),d):a.domain().map(d3_time_scaleDate)},d.nice=function(a){var b=d3_time_scaleExtent(d.domain());return d.domain([a.floor(b[0]),a.ceil(b[1])])},d.ticks=function(c,e){var f=d3_time_scaleExtent(d.domain());if(typeof c!="function"){var g=f[1]-f[0],h=g/c,i=d3.bisect(d3_time_scaleSteps,h);if(i==d3_time_scaleSteps.length)return b.year(f,c);if(!i)return a.ticks(c).map(d3_time_scaleDate);Math.log(h/d3_time_scaleSteps[i-1])<Math.log(d3_time_scaleSteps[i]/h)&&--i,c=b[i],e=c[1],c=c[0].range}return c(f[0],new Date(+f[1]+1),e)},d.tickFormat=function(){return c},d.copy=function(){return d3_time_scale(a.copy(),b,c)},d3.rebind(d,a,"range","rangeRound","interpolate","clamp")}function d3_time_scaleExtent(a){var b=a[0],c=a[a.length-1];return b<c?[b,c]:[c,b]}function d3_time_scaleDate(a){return new Date(a)}function d3_time_scaleFormat(a){return function(b){var c=a.length-1,d=a[c];while(!d[1](b))d=a[--c];return d[0](b)}}function d3_time_scaleSetYear(a){var b=new Date(a,0,1);return b.setFullYear(a),b}function d3_time_scaleGetYear(a){var b=a.getFullYear(),c=d3_time_scaleSetYear(b),d=d3_time_scaleSetYear(b+1);return b+(a-c)/(d-c)}var d3_time_scaleSteps=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],d3_time_scaleLocalMethods=[[d3.time.second,1],[d3.time.second,5],[d3.time.second,15],[d3.time.second,30],[d3.time.minute,1],[d3.time.minute,5],[d3.time.minute,15],[d3.time.minute,30],[d3.time.hour,1],[d3.time.hour,3],[d3.time.hour,6],[d3.time.hour,12],[d3.time.day,1],[d3.time.day,2],[d3.time.week,1],[d3.time.month,1],[d3.time.month,3],[d3.time.year,1]],d3_time_scaleLocalFormats=[[d3.time.format("%Y"),function(a){return!0}],[d3.time.format("%B"),function(a){return a.getMonth()}],[d3.time.format("%b %d"),function(a){return a.getDate()!=1}],[d3.time.format("%a %d"),function(a){return a.getDay()&&a.getDate()!=1}],[d3.time.format("%I %p"),function(a){return a.getHours()}],[d3.time.format("%I:%M"),function(a){return a.getMinutes()}],[d3.time.format(":%S"),function(a){return a.getSeconds()}],[d3.time.format(".%L"),function(a){return a.getMilliseconds()}]],d3_time_scaleLinear=d3.scale.linear(),d3_time_scaleLocalFormat=d3_time_scaleFormat(d3_time_scaleLocalFormats);d3_time_scaleLocalMethods.year=function(a,b){return d3_time_scaleLinear.domain(a.map(d3_time_scaleGetYear)).ticks(b).map(d3_time_scaleSetYear)},d3.time.scale=function(){return d3_time_scale(d3.scale.linear(),d3_time_scaleLocalMethods,d3_time_scaleLocalFormat)}