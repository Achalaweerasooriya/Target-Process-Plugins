require("../env");var vows=require("vows"),assert=require("assert"),suite=vows.describe("selection.property");suite.addBatch({"select(body)":{topic:function(){return d3.select("body").html("")},"sets a property as a string":function(a){a.property("bgcolor","red"),assert.equal(document.body.bgcolor,"red")},"sets a property as a number":function(a){a.property("opacity",1),assert.equal(document.body.opacity,"1")},"sets a property as a function":function(a){a.property("bgcolor",function(){return"orange"}),assert.equal(document.body.bgcolor,"orange")},"gets a property value":function(a){document.body.bgcolor="yellow",assert.equal(a.property("bgcolor"),"yellow")},"removes a property as null":function(a){a.property("bgcolor","yellow").property("bgcolor",null),assert.isFalse("bgcolor"in document.body)},"removes a property as a function":function(a){a.property("bgcolor","yellow").property("bgcolor",function(){return null}),assert.isFalse("bgcolor"in document.body)},"returns the current selection":function(a){assert.isTrue(a.property("bgcolor","yellow")===a)}}}),suite.addBatch({"selectAll(div)":{topic:function(){return d3.select("body").html("").selectAll("div").data(d3.range(2)).enter().append("div")},"sets a property as a string":function(a){a.property("bgcolor","red"),assert.equal(a[0][0].bgcolor,"red"),assert.equal(a[0][1].bgcolor,"red")},"sets a property as a number":function(a){a.property("opacity",.4),assert.equal(a[0][0].opacity,"0.4"),assert.equal(a[0][1].opacity,"0.4")},"sets a property as a function":function(a){a.property("bgcolor",d3.interpolateRgb("brown","steelblue")),assert.equal(a[0][0].bgcolor,"#a52a2a"),assert.equal(a[0][1].bgcolor,"#4682b4")},"gets a property value":function(a){a[0][0].bgcolor="purple",assert.equal(a.property("bgcolor"),"purple")},"removes a property as null":function(a){a.property("bgcolor","yellow").property("bgcolor",null),assert.isFalse("bgcolor"in a[0][0]),assert.isFalse("bgcolor"in a[0][1])},"removes a property as a function":function(a){a.property("bgcolor","yellow").property("bgcolor",function(){return null}),assert.isFalse("bgcolor"in a[0][0]),assert.isFalse("bgcolor"in a[0][1])},"ignores null nodes":function(a){var b=d3.selectAll("div");b[0][1]=null,b.property("bgcolor",null).property("bgcolor","red"),assert.equal(a[0][0].bgcolor,"red"),assert.isFalse("bgcolor"in a[0][1])},"returns the current selection":function(a){assert.isTrue(a.property("bgcolor","yellow")===a)}}}),suite.export(module)