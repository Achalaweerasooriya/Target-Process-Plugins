require("../env");var vows=require("vows"),assert=require("assert"),suite=vows.describe("selection.html");suite.addBatch({"select(body)":{topic:function(){return d3.select("body").html("")},"sets the inner HTML as a string":function(a){a.html("<h1>Hello, world!</h1>"),assert.equal(document.body.firstChild.tagName,"H1"),assert.equal(document.body.firstChild.textContent,"Hello, world!")},"sets the inner HTML as a number":function(a){a.html(42),assert.equal(document.body.innerHTML,"42"),assert.equal(document.body.firstChild.nodeType,document.TEXT_NODE)},"sets the inner HTML as a function":function(a){a.data(["Subject"]).html(function(a,b){return"<b>"+a+"</b><i>"+b+"</i>"}),assert.equal(document.body.firstChild.tagName,"B"),assert.equal(document.body.firstChild.textContent,"Subject"),assert.equal(document.body.lastChild.tagName,"I"),assert.equal(document.body.lastChild.textContent,"0")},"clears the inner HTML as null":function(a){a.html(null),assert.equal(document.body.innerHTML,""),assert.isNull(document.body.firstChild)},"clears the inner HTML as undefined":function(a){a.html(undefined),assert.equal(document.body.innerHTML,""),assert.isNull(document.body.firstChild)},"clears the inner HTML as the empty string":function(a){a.html(""),assert.equal(document.body.innerHTML,""),assert.isNull(document.body.firstChild)},"clears the inner HTML as a function returning the empty string":function(a){a.text(function(){return""}),assert.equal(document.body.innerHTML,""),assert.isNull(document.body.firstChild)},"clears the inner HTML as a function returning null":function(a){a.text(function(){return null}),assert.equal(document.body.innerHTML,""),assert.isNull(document.body.firstChild)},"clears the inner HTML as a function returning undefined":function(a){a.text(function(){return undefined}),assert.equal(document.body.innerHTML,""),assert.isNull(document.body.firstChild)},"ignores null nodes":function(){var a=d3.select("body");a[0][0]=null,document.body.innerHTML="<h1>foo</h1>",a.html("bar"),assert.equal(document.body.textContent,"foo")},"returns the current selection":function(a){assert.isTrue(a.html("foo")===a)}}}),suite.addBatch({"selectAll(div)":{topic:function(){return d3.select("body").html("").selectAll("div").data(d3.range(2)).enter().append("div")},"sets the inner HTML as a string":function(a){a.html("<h1>Hello, world!</h1>"),assert.equal(a[0][0].firstChild.tagName,"H1"),assert.equal(a[0][0].firstChild.textContent,"Hello, world!"),assert.equal(a[0][1].firstChild.tagName,"H1"),assert.equal(a[0][1].firstChild.textContent,"Hello, world!")},"sets the inner HTML as a number":function(a){a.html(42),assert.equal(a[0][0].innerHTML,"42"),assert.equal(a[0][0].firstChild.nodeType,document.TEXT_NODE)},"sets the inner HTML as a function":function(a){a.data(["foo","bar"]).html(function(a,b){return"<b>"+a+"</b><i>"+b+"</i>"}),assert.equal(a[0][0].firstChild.tagName,"B"),assert.equal(a[0][0].firstChild.textContent,"foo"),assert.equal(a[0][0].lastChild.tagName,"I"),assert.equal(a[0][0].lastChild.textContent,"0"),assert.equal(a[0][1].firstChild.tagName,"B"),assert.equal(a[0][1].firstChild.textContent,"bar"),assert.equal(a[0][1].lastChild.tagName,"I"),assert.equal(a[0][1].lastChild.textContent,"1")},"clears the inner HTML as a function":function(a){a.html(function(){return""}),assert.equal(a[0][0].innerHTML,""),assert.isNull(a[0][0].firstChild),assert.equal(a[0][1].innerHTML,""),assert.isNull(a[0][1].firstChild)},"ignores null nodes":function(a){var b=d3.selectAll("div");b[0][0]=null,a[0][0].innerHTML="<h1>foo</h1>",b.html("bar"),assert.equal(a[0][0].textContent,"foo"),assert.equal(a[0][1].textContent,"bar")},"returns the current selection":function(a){assert.isTrue(a.html("foo")===a)}}}),suite.export(module)