var width=960,height=500,color=d3.scale.category20(),force=d3.layout.force().charge(-120).linkDistance(30).size([width,height]),svg=d3.select("#chart").append("svg").attr("width",width).attr("height",height);d3.json("miserables.json",function(a){force.nodes(a.nodes).links(a.links).start();var b=svg.selectAll("line.link").data(a.links).enter().append("line").attr("class","link").style("stroke-width",function(a){return Math.sqrt(a.value)}),c=svg.selectAll("circle.node").data(a.nodes).enter().append("circle").attr("class","node").attr("r",5).style("fill",function(a){return color(a.group)}).call(force.drag);c.append("title").text(function(a){return a.name}),force.on("tick",function(){b.attr("x1",function(a){return a.source.x}).attr("y1",function(a){return a.source.y}).attr("x2",function(a){return a.target.x}).attr("y2",function(a){return a.target.y}),c.attr("cx",function(a){return a.x}).attr("cy",function(a){return a.y})})})