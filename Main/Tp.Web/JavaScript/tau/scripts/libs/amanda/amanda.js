(function(){var a=function(a){return Object.prototype.toString.call(a)==="[object Object]"},b=function(a){return Object.prototype.toString.call(a)==="[object Array]"},c=function(c){if(b(c)||typeof c=="string")return c.length===0;if(a(c))for(var d in c)if(c.hasOwnProperty(d))return!1;return!0},d=function(a,b){for(var c in b)b.hasOwnProperty(c)&&!a.hasOwnProperty(c)&&(a[c]=b[c]);return a},e=function(d,e,f){var g=function(d,e){if(b(d)&&!c(d))for(var f=0,g=d.length;f<g;f++)e.apply(d,[f,d[f]]);if(a(d)&&!c(d))for(var h in d)d.hasOwnProperty(h)&&e.apply(d,[h,d[h]])},h=function(d,e,f){var g=[],h=function(a,b){var c=g.length+1;g.push(function(){var d=function(a){var b=g[c];return!a&&b?b():!a&&!b?f():f(a)};return e(a,b,d)})};if(b(d)&&!c(d))for(var i=0,j=d.length;i<j;i++)h(i,d[i]);else{if(!a(d)||!!c(d))return f();for(var k in d)d.hasOwnProperty(k)&&h(k,d[k])}return g[0]()};return typeof f=="undefined"?g.apply(this,arguments):h.apply(this,arguments)},f=function(a,b){var c=[];for(var d=0,e=a.length;d<e;d++){var f=a[d][b];c.indexOf(f)===-1&&c.push(f)}return c},g=function(){this.length=0};g.prototype.addError=function(a){this[this.length]=a,this.length++},e({getProperties:"property",getMessages:"message"},function(a,b){g.prototype[a]=function(){return f(this,b)}});var h={required:"The ‘{{property}}’ property is required.",minLength:"The ‘{{property}}’ property must be at least {{validator}} characters.",maxLength:"The ‘{{property}}’ property must not exceed {{validator}} characters.",length:"The ‘{{property}}’ property must be exactly {{validator}} characters.",format:"The ‘{{property}}’ property must be a/an {{validator}}.",type:"The ‘{{property}}’ property must be a/an {{validator}}.",except:"The ‘{{property}}’ property must not be {{propertyValue}}",minimum:"The minimum value of the ‘{{property}}’ must be {{validator}}",maximum:"The maximum value of the ‘{{property}}’ must be {{validator}}",pattern:"The `{{property}}` does not match the ‘{{validator}}’ pattern.",maxItems:"The `{{property}}` property must not contain more than {{validator}} items.",minItems:"The `{{property}}` property must contain at least {{validator}} items.",divisibleBy:"The ‘{{property}}’ property is not divisible by {{validator}}.",uniqueItems:"All items in the ‘{{property}}’ property must be unique.","enum":function(a,b,c){return"Value of the ‘"+a+"’ must be "+c.join(" or ")+"."}},i=function(a){var b=this;this.singleError=a.hasOwnProperty("singleError")?a.singleError:!0,this.validators=j,this.messages=a.messages?d(a.messages,h):h,this.Errors=new g};i.prototype.renderErrorMessage=function(a,b){var c=this.messages[a];return typeof c=="function"?c(b.property,b.propertyValue,b.validator):typeof c=="string"?(e(b,function(a,b){c=c.replace(new RegExp("{{"+a+"}}","g"),b)}),c.replace(/\s+/g," ")):""},i.prototype.validateProperty=function(a,b,c,d){var f=this,g=function(d,e,g){var h=function(e){if(!e)return g();var h=f.renderErrorMessage(d,{property:a,propertyValue:b,validator:c[d]});return f.Errors.addError({property:a,propertyValue:b,validator:d,validatorValue:c[d],message:h}),g(f.singleError?!0:null)};return c[d]?e(a,b,c[d],c,h):g()};return c.required!==!0&&typeof b=="undefined"?d():e(f.validators,g,d)},i.prototype.validate=function(a,b,c){var d=this;return this.Errors=new g,this.validateSchema(a,b,"",function(a){return c(d.Errors.length>0?d.Errors:undefined)})},i.prototype.validateProperties=function(a,b,c,d){var f=this;return e(b.properties,function(d,e,g){var h=e.type==="object"&&e.properties,i=e.type==="array",j=f.getProperty(a,d),k=d.indexOf(" ")!==-1?"['"+d+"']":"."+d,l=c.length===0?d:c+k;return h||i?f.validateSchema(j,b.properties[d],l,g):f.validateProperty(l,j,e,g)},d)},i.prototype.validateItems=function(a,b,d,f){var g=this;return a&&!c(a)?["object","array"].indexOf(b.items.type)!==-1?e(a,function(a,c,e){var f=d+"["+a+"]";return g.validateSchema(c,b.items,f,e)},f):e(a,function(a,c,e){var f=d+"["+a+"]";return g.validateProperty(f,c,b.items,e)},f):f()},i.prototype.validateSchema=function(a,b,c,d){var e=this;return["object","array"].indexOf(b.type)!==-1?e.validateProperty(c,a,b,function(f){return b.properties?e.validateProperties(a,b,c,d):b.items?e.validateItems(a,b,c,d):d()}):e.validateProperty(c,a,b,d)},i.prototype.getProperty=function(a,b){return a?a[b]:undefined};var j={required:function(a,b,c,d,e){return c&&b===undefined?e(!0):e()},type:function(){var a={object:function(a){return Object.prototype.toString.call(a)==="[object Object]"},array:function(a){return Object.prototype.toString.call(a)==="[object Array]"},integer:function(a){return typeof a=="number"&&a%1===0}},b=["string","number","function","boolean"];for(var c=0,d=b.length;c<d;c++)a[b[c]]=function(a){return function(){return typeof arguments[0]===a}}(b[c]);return function(b,c,d,e,f){if(Object.prototype.toString.call(d)==="[object Array]"){var g=d.some(function(b){return a[b](c)});return g?f():f(!0)}return a[d](c)?f():f(!0)}}(),format:function(){var a={alpha:function(a){return typeof a=="string"&&a.match(/^[a-zA-Z]+$/)},alphanumeric:function(a){return typeof a=="string"&&/^[a-zA-Z0-9]+$/.test(a)||typeof a=="number"},ipv4:function(a){return typeof a=="string"&&a.match(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/)},ipv6:function(a){return typeof a=="string"&&a.match(/(?:(?:[a-f\d]{1,4}:)*(?:[a-f\d]{1,4}|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})|(?:(?:[a-f\d]{1,4}:)*[a-f\d]{1,4})?::(?:(?:[a-f\d]{1,4}:)*(?:[a-f\d]{1,4}|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}))?)/)},ip:function(b){return a.ipv4(b)||a.ipv6},email:function(a){return typeof a=="string"&&a.match(/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/)},url:function(a){return typeof a=="string"&&a.match(/^(?:(?:ht|f)tp(?:s?)\:\/\/|~\/|\/)?(?:\w+:\w+@)?((?:(?:[-\w\d{1-3}]+\.)+(?:com|org|cat|coop|int|pro|tel|xxx|net|gov|mil|biz|info|mobi|name|aero|jobs|edu|co\.uk|ac\.uk|it|fr|tv|museum|asia|local|travel|[a-z]{2})?)|((\b25[0-5]\b|\b[2][0-4][0-9]\b|\b[0-1]?[0-9]?[0-9]\b)(\.(\b25[0-5]\b|\b[2][0-4][0-9]\b|\b[0-1]?[0-9]?[0-9]\b)){3}))(?::[\d]{1,5})?(?:(?:(?:\/(?:[-\w~!$+|.,=]|%[a-f\d]{2})+)+|\/)+|\?|#)?(?:(?:\?(?:[-\w~!$+|.,*:]|%[a-f\d{2}])+=?(?:[-\w~!$+|.,*:=]|%[a-f\d]{2})*)(?:&(?:[-\w~!$+|.,*:]|%[a-f\d{2}])+=?(?:[-\w~!$+|.,*:=]|%[a-f\d]{2})*)*)*(?:#(?:[-\w~!$ |\/.,*:;=]|%[a-f\d]{2})*)?$/)},date:function(a){return Object.prototype.toString.call(a)==="[object Date]"},decimal:function(a){return/^[0-9]+(\.[0-9]{1,2})?$/.test(a)},"int":function(a){return/^-?[0-9]+$/.test(a)},percentage:function(a){return typeof a=="string"&&a.match(/^-?[0-9]{0,2}(\.[0-9]{1,2})?$|^-?(100)(\.[0]{1,2})?$/)||a>=-100&&a<=100},port:function(a){return/\:\d+/.test(a)},regexp:function(a){return a&&a.test&&a.exec},unsignedInt:function(a){return/^[0-9]+$/.test(a)}};return function(b,c,d,e,f){return a[d](c)?f():f(!0)}}(),minLength:function(a,b,c,d,e){return typeof b=="string"&&b.length>=c?e():e(!0)},maxLength:function(a,b,c,d,e){return typeof b=="string"&&b.length<=c?e():e(!0)},length:function(a,b,c,d,e){return typeof b=="string"&&b.length===c?e():e(!0)},"enum":function(a,b,c,d,e){return c.indexOf(b)===-1?e(!0):e()},except:function(a,b,c,d,e){return c.indexOf(b)!==-1?e(!0):e()},minimum:function(a,b,c,d,e){if(typeof b=="number"){var f=d.exclusiveMinimum?b>c:b>=c;return f?e():e(!0)}return e(!0)},maximum:function(a,b,c,d,e){if(typeof b=="number"){var f=d.exclusiveMaximum?b<c:b<=c;return f?e():e(!0)}return e(!0)},pattern:function(a,b,c,d,e){return typeof b=="string"&&!b.match(c)?e(!0):e()},minItems:function(a,c,d,e,f){return b(c)&&c.length>=d?f():f(!0)},maxItems:function(a,c,d,e,f){return b(c)&&c.length<=d?f():f(!0)},uniqueItems:function(a,b,c,d,f){return e(b,function(a,c,d){return b.indexOf(c)<a?d(!0):d()},f)},divisibleBy:function(a,b,c,d,e){var f=typeof b=="number",g=b%c===0;return f&&g?e():e(!0)}},k={validate:function(a,b,c,d){return typeof c=="function"&&(d=c,c={}),(new i(c)).validate(a,b,d)},addValidator:function(a,b){j[a]=b},getVersion:function(){return[0,3,0].join(".")},getValidators:function(){return j}};typeof module!="undefined"&&module.exports?module.exports=k:typeof define!="undefined"?define(function(){return i}):this.amanda=k})()