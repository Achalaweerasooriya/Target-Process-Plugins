define(["Underscore","tau/core/async.source.adapter"],function(_,AsyncSourceAdapter){var createComponentStorageAsyncSource=function(serviceContainer,settings){var storage=serviceContainer.getRestStorage();return new AsyncSourceAdapter({onGet:function(cmd){storage.data(settings.groupName,settings.id).done(function(result){var data=result.data||{};data=data.userData||{};var fields={};for(var i=0;i<cmd.fields.length;i++){var fieldName=cmd.fields[i];data.hasOwnProperty(fieldName)&&(fields[fieldName]=data[fieldName])}cmd.callback(fields)})},onSet:function(cmd){var set=cmd.set;storage.data(settings.groupName,settings.id,{scope:"Public",userData:set}).done(function(r){cmd.callback(set)})},onBind:function(cmd){},onUnbind:function(cmd){}})};return{create:createComponentStorageAsyncSource}})