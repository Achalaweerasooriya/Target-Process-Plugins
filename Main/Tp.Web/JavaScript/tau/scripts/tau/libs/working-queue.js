define(["Underscore"],function(t){var e=function(e){var n=this;n.queue=[],n.interval=e.interval,n.iterator=e.iterator,n.proceed=t.bind(n.proceed,n),n.start=t.bind(n.start,n)};return e.prototype={tick:function(){return+new Date},clean:function(){this.queue=[]},start:function(){var t=this;t.lastResume=t.tick(),t.next()},next:function(){var e=this;e.queue.length>0&&t.defer(e.proceed)},push:function(t){var e=this;e.queue.push(t),1===e.queue.length&&e.start()},proceed:function(){var t=this;if(0!==t.queue.length){t.iterator(t.queue.shift());var e=t.tick()-t.lastResume;e>t.interval?t.wait():t.next()}},wait:function(){var e=this;t.delay(e.start,e.interval)}},e});