define(["Underscore"],function(_){var ClassWorkingQueue=function(settings){var me=this;me.queue=[],me.interval=settings.interval,me.iterator=settings.iterator,me.proceed=_.bind(me.proceed,me),me.start=_.bind(me.start,me)};return ClassWorkingQueue.prototype={tick:function(){return+(new Date)},start:function(){var o=this;o.lastResume=o.tick(),o.next()},next:function(){var o=this;o.queue.length>0&&_.defer(o.proceed)},push:function(item){var o=this;o.queue.push(item),o.queue.length===1&&o.start()},proceed:function(){var me=this;if(me.queue.length===0)return;me.iterator(me.queue.shift());var delta=me.tick()-me.lastResume;delta>me.interval?me.wait():me.next()},wait:function(){var o=this;_.delay(o.start,o.interval)}},ClassWorkingQueue})