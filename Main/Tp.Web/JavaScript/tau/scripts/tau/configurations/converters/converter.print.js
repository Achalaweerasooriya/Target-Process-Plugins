define(["Underscore","tau/models/model.extension","tau/models/model.impedimentsCountCalculator","tau/models/model.duplicateBugCountCalculator","tau/models/model.duplicateBugRetriever","tau/components/extensions/impedimentList/extension.impedimentList.visibilityController","tau/components/extensions/duplicateBugList/extension.duplicateBugList.visibilityController","tau/models/assignmentsList/extension.model.store.operations","tau/core/termProcessor"],function(_,a,b,c,d,e,f,g,h){var i={impedimentListPanel:function(a,c){var d=new h(c.getTerms());return _.extend(a,{compId:"impediments",type:"container",layout:"list",cssClass:"b-section",disableAnimation:!0,children:[{type:"label",text:d.getTerms("Impediment").names,hideCounter:!0},{type:"impedimentList",disableModel:!0}],extensions:[e,b,g]}),a},duplicateBugListPanel:function(a,b){var e=new h(b.getTerms());return _.extend(a,{compId:"duplicateBugs",type:"container",layout:"list",cssClass:"b-section",disableAnimation:!0,children:[{type:"label",text:"Duplicate "+e.getTerms("Bug").names,hideCounter:!0},{type:"duplicateBugList",disableModel:!0}],extensions:[f,d,c,g]}),a},tabs:function(a){a=_.extend(a,{type:"container",children:[],cssClass:"b-tabs"});var b=[];return _.forEach(a.tabs,function(b,c){var d=!1;b=_.extend(b,{type:"container",children:b.items,cssClass:"b-tab"}),d=!_.isUndefined(b.children)&&b.children.length&&b.children[0].type==="revisionList";if(d)return;!_.isUndefined(b.header)&&b.header.length&&b.children.unshift({type:"label",text:b.header[0].text}),a.children.push(b)}),a},collapsible:function(a){return a=_.extend(a,{type:"container",children:[],cssClass:"b-section"}),a.children=a.items,!_.isUndefined(a.header)&&a.header.length&&a.children.unshift({type:"label",text:a.header[0].text}),a}},j=function(a,b){var c=null;if(_.isArray(a)){var d=0;c=function(b){a.splice(b,1),d--};for(d=0;d<a.length;d++)b(a[d],d,c)}else{c=function(b){delete a[b]};var e=_(a).keys(),f=null;while(f=e.pop())b(a[f],f,c)}},k=function(a,b){return j(a,function(c,d,e){if(c.type){if(c.printable===!1){e(d);return}_.isFunction(i[c.type])&&(a[d]=i[c.type](c,b)),c.children&&(a[d].children=k(c.children,b)),c.items&&(a[d].items=k(c.items,b)),a[d].disabledExtensionCategories=["edit"]}else d=="children"&&(a[d]=k(c,b))}),a};return{convert:function(a){return a=k(a,a.context),a.children&&a.children.length&&(a.children[0].cssClass="main-container main-container-print i-print"),a}}})