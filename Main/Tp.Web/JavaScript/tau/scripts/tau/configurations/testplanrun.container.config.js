define(["require","Underscore","tau/configurations/baseAssignable.container.config","tau/ui/extensions/list/collapse/extension.list.actions.collapse","tau/models/dataProviders/testplanrun/testplanrun.model.provider.testcaseruns.items","tau/ui/extensions/list/testplanrun/extension.list.testcaseruns.refresher","tau/models/model.menu.testPlanRun.runner","tau/models/model.menu.testPlanRun","tau/models/testPlanRun/model.testPlanRun.runner","tau/models/page.testPlanRun/model.page.testPlanRun.runner","tau/components/extensions/error/extension.errorBar","tau/ui/templates/list_/grid.entity.testcase/ui.template.list.grid.entity.testcase","tau/models/model.label.entityCount","tau/ui/extensions/label/ui.extension.label.refresher.comet"],function(e){var t=e("Underscore"),n=e("tau/configurations/baseAssignable.container.config"),s=e("tau/ui/extensions/list/collapse/extension.list.actions.collapse"),a=e("tau/models/dataProviders/testplanrun/testplanrun.model.provider.testcaseruns.items"),i=e("tau/ui/extensions/list/testplanrun/extension.list.testcaseruns.refresher"),r=e("tau/models/model.menu.testPlanRun.runner"),l=e("tau/models/model.menu.testPlanRun"),o=e("tau/models/testPlanRun/model.testPlanRun.runner"),u=e("tau/models/page.testPlanRun/model.page.testPlanRun.runner"),d=e("tau/components/extensions/error/extension.errorBar"),m=e("tau/ui/templates/list_/grid.entity.testcase/ui.template.list.grid.entity.testcase"),p=e("tau/models/model.label.entityCount"),c=e("tau/ui/extensions/label/ui.extension.label.refresher.comet");return n.extend({init:function(e){this._super(e),this.registerAdditionalInfoItem("Build",{label:{text:this.getTermName("build")},field:{type:"property.build.testPlanRun"}}),this.registerAdditionalInfoItem("Start Plan Run Date",{label:{text:"Start Run Date"},field:{type:"property.date",propertyName:"startDate",format:"datetime"}}),this.registerAdditionalInfoItem("End Plan Run Date",{label:{text:"End Run Date"},field:{type:"property.date",propertyName:"endDate",format:"datetime"}}),this.registerPanel("Last Run",{type:"collapsible",stateName:"lastRun",collapsed:!1,header:[{type:"label",text:"Last Run"}],items:[{type:"container",lazy:!0,name:"lazyPlaceholder container",children:[{type:"testCasesRunResults"}]}]}),this.registerTab("Test Case Runs",{disabledIf:{isBoard:!0},label:"testcaseruns",header:[{type:"label",text:this.getNames("testCaseRun"),countFieldNames:["testCaseRuns"],lazy:!0}],items:[{type:"container",spinnerConfigForLazy:this.getSpinnerConfigForLazy(),practices:["Test Cases"],children:[{type:"container",lazy:!0,practices:["Test Cases"],name:"lazyPlaceholder container",children:[{type:"list.editable",itemsDataProvider:a,extensions:[i,s],template:m,sortable:!1,views:[{rowTemplateName:"list-grid-entity__rowtestcaserun",type:"grid.entity",emptyMessage:"No items found"}]}]}]}],practices:["Test Cases"]}),this.registerTab("Test Runs",{enabledIf:{isBoard:!0},label:"testCases",header:[{type:"label.testHierarchy",text:"Test Runs"}],items:[{name:"TestRuns",type:"testPlanRun.testRuns",lazy:!0,spinnerConfigForLazy:this.getSpinnerConfigForLazy(),helper:this.helper}]}),this.registerTab("Bugs",{enabledIf:{isBoard:!0},label:"bugs",header:[{type:"label",text:this.getNames("bug"),countFieldNames:["Bugs"],modelType:p,entityType:"bug",filter:"?TestPlanRuns.Where(Id == %d)",extensions:[c],lazy:!0}],items:[{name:"Bugs",type:"entity.new.list",definition:{cells:{types:["bug"]},cardSettings:{list_bug:{list:[[{id:"entity_name_1line",order:0},{id:"general_entity_id",order:1},{id:"entity_state",order:2},{id:"entity_assignments",order:3},{id:"severity_long",order:4},{id:"business_value_long",order:5},{id:"project_long",order:6},{id:"team_name_long",order:7}]]}}},listOptions:{quickAddOptions:{disabled:!0}},lazy:!0,spinnerConfigForLazy:this.getSpinnerConfigForLazy()}]}),this.registerPanel("Last Run",{type:"panel.testPlanRun.run",enabledIf:{isBoard:!0}})
},getAdditionalInfoAliases:function(){return["Project","Team","Test Plan","Test Plan Run","Build","Release","Iteration","Team Iteration","CreationDate","Start Plan Run Date","End Plan Run Date","PlannedStartDate","PlannedEndDate"]},getActionsAliases:function(){return["Old Edit","Print","-----","Delete"]},getPanelsAliases:function(){return["Diagnostic","State Selector","Progress Bar","Last Run","Impediments","Assignments","Additional Info","Custom Fields"]},getTabsAliases:function(){return["Description","Test Case Runs","Test Runs","Relations","Bugs","Flow","Time","Tp2 Time","History"]},getEntityMenuOptions:function(){return{type:"menu.actions.testplanrun",Model:this.helper.valueOrDefault({enabledIf:{isBoard:!0},value:r,"default":l}),items:this.getActions()}},getEntityQuickAddOptions:function(){return{items:[{entityType:"time",relationName:"times",practices:["Time Tracking"]}]}},getContainerRegistry:function(e){return t.extend(this._super(e),{runnerModel:new o})},getConfig:function(e){var t=this._super(e);return t.extensions=[u,d],t}})});