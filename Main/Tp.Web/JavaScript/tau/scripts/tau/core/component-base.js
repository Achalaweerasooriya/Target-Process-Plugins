define(["Underscore","tau/core/class","tau/configurator","tau/core/bus"],function(_,a,b,c){return a.extend({init:function(a){return this.config=_.extend({},a),this.config.context=this.config.context||{},_.defaults(this.config.context,{configurator:b}),this.bus=new c({name:a.name,globalBus:this.config.context.configurator.getGlobalBus()}),_.defaults(this.config,{bus:this.bus}),this},attach:function(a,b){b=b||{};var c=this.config.disabledExtensionCategories;if(c){var d=a.prototype.category;if(d&&_.indexOf(c,d)>=0)return this}var e=_.clone(this.config);b.hasOwnProperty("onCreate")||(e=_.extend(e,b));var f=new a(e);return b.onCreate&&b.onCreate(f),this}})})