define(["Underscore","tau/core/class","tau/configurator","tau/core/bus"],function(a,b,c,d){return b.extend({init:function(b){return this.config=a.extend({},b),this.bus=new d({name:b.name,globalBus:c.getGlobalBus()}),a.defaults(this.config,{configurator:c,bus:this.bus}),this},attach:function(b,c){c=c||{};var d=this.config.disabledExtensionCategories;if(d){var e=b.prototype.category;if(e&&a.indexOf(d,e)>=0)return this}var f=a.clone(this.config);c.hasOwnProperty("onCreate")||(f=a.extend(f,c));var g=new b(f);return c.onCreate&&c.onCreate(g),this}})})