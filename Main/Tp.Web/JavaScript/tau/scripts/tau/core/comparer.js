define(["Underscore"],function(e){return{isEqualIncluded:function(r,n){if(r===n)return!0;var i=typeof r,t=typeof n;if(i!=t)return!1;if(r==n)return!0;if(!r&&n||r&&!n)return!1;if(e.isDate(r)&&e.isDate(n))return r.getTime()===n.getTime();if(e.isNaN(r)&&e.isNaN(n))return!1;if(e.isRegExp(r)&&e.isRegExp(n))return r.source===n.source&&r.global===n.global&&r.ignoreCase===n.ignoreCase&&r.multiline===n.multiline;if("object"!==i)return!1;if(e.isArray(r)&&e.isArray(n)&&r.length!==n.length)return!1;for(var u=e.keys(n),a=0;a<u.length;a++){var s=u[a];if(r.hasOwnProperty(s)&&!this.isEqualIncluded(r[s],n[s]))return!1}return!0},compare:function(r,n){var i=this,t={changes:{}};return r?(e.each(e(n).keys(),function(e){var u={value:n[e]};return r.hasOwnProperty(e)?void(i.isEqualIncluded(r[e],n[e])||(t.changes[e]=u)):void(t.changes[e]=u)}),t):t}}});