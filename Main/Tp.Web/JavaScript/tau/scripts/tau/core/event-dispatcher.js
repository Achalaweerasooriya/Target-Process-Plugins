define(["Underscore","tau/core/class"],function(e,n){var t=n.extend({init:function(e){this.components=e,this.eventArgsQueue={},this.dictionaryQueue={}},listen:function(n,t){var i=this;i.dictionaryQueue.hasOwnProperty(n)||(i.dictionaryQueue[n]=e(i.components).clone(),i.eventArgsQueue[n]=[]);var r=function(n){var r=n.sender;n.removeListener();var u=e(i.components).indexOf(r);if(i.eventArgsQueue[n.name][u]=n.data,i.dictionaryQueue[n.name]=e(i.dictionaryQueue[n.name]).without(r),e.isEmpty(i.dictionaryQueue[n.name])){var a={eventName:n.name,argsArr:i.eventArgsQueue[n.name]};t(a)}};e(i.components).each(function(e){e.on(n,r,null,{},1e3)})}});return t});