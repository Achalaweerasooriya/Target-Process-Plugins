define(["Underscore","tau/core/class"],function(_,a){var b=a.extend({init:function(a){this.components=a,this.eventArgsQueue={},this.dictionaryQueue={}},listen:function(a,b){var c=this;c.dictionaryQueue.hasOwnProperty(a)||(c.dictionaryQueue[a]=_(c.components).clone(),c.eventArgsQueue[a]=[]);var d=function(a){var d=a.sender;a.removeListener();var e=_(c.components).indexOf(d);c.eventArgsQueue[a.name][e]=a.data,c.dictionaryQueue[a.name]=_(c.dictionaryQueue[a.name]).without(d);if(_.isEmpty(c.dictionaryQueue[a.name])){var f={eventName:a.name,argsArr:c.eventArgsQueue[a.name]};b(f)}};_(c.components).each(function(b){b.on(a,d,null,{},1e3)})}});return b})