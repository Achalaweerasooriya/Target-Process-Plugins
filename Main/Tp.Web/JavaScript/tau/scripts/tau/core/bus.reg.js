define(["Underscore","tau/core/event"],function(_,a){var b={buses:{},onCreate:function(a){var b=this;b.buses[a.id]=a,b.fire("create",{bus:a})},onDestroy:function(a){if(a.id==="global")return;delete this.buses[a.id],this.fire("destroy",{bus:a})},logCount:function(){console.log("#count: "+this.count())},count:function(a){var b=_(this.buses).keys();return a&&(b=_(b).without("global")),b.length},stats:function(){var a={},b=this;_.each(_(b.buses).keys(),function(c){var d=b.buses[c];a.hasOwnProperty(d.name)||(a[d.name]=0),a[d.name]++}),_.each(_(a).keys(),function(b){console.log(b+" : "+a[b])})}};return a.implementOn(b),window.tau=window.tau||{},_.extend(window.tau,{buses:b}),b})