define(["require","tau/core/extension.base","tau/utils/utils.serverErrorTranslator"],function(e){var t=e("tau/core/extension.base"),s=e("tau/utils/utils.serverErrorTranslator");return t.extend({init:function(e){this._super(e),this.on("afterRender",function(e,t){this.$element=t.element}.bind(this))},"bus _terms.view":function(e,t){this._view=t},"bus terms.config.ready + _terms.view":function(e,t){t.model.getTerms().done(function(e){this._setState(e)}.bind(this))},"bus terms.config.ready:last + terms.resetToDefault":function(e,t){this.$element.find(".i-role-reset").tauConfirm({content:"<h3>Do you really want to restore default settings?</h3>",callbacks:{success:function(){this._setState(t.model.resetTermsToDefault())}.bind(this)}}),this.$element.find(".i-role-reset").tauConfirm("show")},"bus terms.config.ready:last + changeTerm":function(e,t,s){this._setState(t.model.updateTerms(s))},"bus terms.config.ready:last + saveTerms":function(e,t){t.model.saveTerms().done(function(e){this._setState(e)}.bind(this)).fail(function(e){var t;t=e.clientValidation?e.clientValidation:s.translateXhrError(e).message.replace(/\r\n/gm,"<br/>"),this._setState({errorMessage:t})}.bind(this))},_setState:function(e){this._view&&this._view.setState(e)}})});