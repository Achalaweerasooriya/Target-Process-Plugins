define(["Underscore"],function(t){return{workflowMapper:function(){return function(e){return{entityStates:t.pluck(e.entityStates.items||e.entityStates,"name"),name:e.parentWorkflow&&e.name,id:e.id,entityType:e.entityType.name.toLowerCase(),root:!e.parentWorkflow}}},findDefaultWorkflow:function(e,n){return t.findWhere(this.findWorkflows(e,n),{root:!0})},findWorkflows:function(e,n){return n?t.filter(e,function(t){return n==t.entityType}):e}}});