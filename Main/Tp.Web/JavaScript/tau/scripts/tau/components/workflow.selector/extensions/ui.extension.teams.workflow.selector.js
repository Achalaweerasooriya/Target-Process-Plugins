define(["require","Underscore","libs/react/react-ex","tau/ui/extensions/board.context.selector/ui.extension.board.context.selector.add.abstract","jsx!tau/components/workflow.selector/views/workflowSelectors","tau/components/process.menu/models/workflow.entitytypes.order","tau/components/workflow.selector/utils/workflow.utils"],function(e){"use strict";var t=e("Underscore"),o=e("libs/react/react-ex"),s=e("tau/ui/extensions/board.context.selector/ui.extension.board.context.selector.add.abstract"),r=e("jsx!tau/components/workflow.selector/views/workflowSelectors"),a=e("tau/components/process.menu/models/workflow.entitytypes.order"),n=e("tau/components/workflow.selector/utils/workflow.utils");return s.extend({init:function(e){this._super(e),this._config=e},"bus afterInit":function(e,t){var o=t.config.allData;if("object"!=typeof o.data)throw new Error("Team Workflow selector may not be initialized. Initial data is not object: "+o.data);this.fire("dataBind",o)},"bus dataBind:last + afterRender":function(e,s,n){var i=s.data.defaultProcessId,l={process:t.extend(s.data.processes[i],{id:i}),entityTypes:a,groups:s.data.groups,onWorkflowChanged:this.fire.bind(this,"customizedWorkflow"),resetOnProcessChange:s.data.resetOnProcessChange};this._workflowSelectors=o.renderClass(r,l,n.element[0]),this._setWorkflowHelpData(i)},"bus dataBind:last + processChanged":function(e,o,s){this._workflowSelectors.setProps({process:t.extend(o.data.processes[s.id],{id:s.id})}),this._setWorkflowHelpData(s.id)},"bus dataBind:last + projectChanged":function(e,o,s){var r=o.data.groups[s.id];this._workflowSelectors.setProps({process:t.extend(o.data.processes[r],{id:r}),selectedGroupId:s.id}),this._setWorkflowHelpData(r)},_setWorkflowHelpData:function(e){this._workflowSelectors.setProps({workflowHelpData:n.getWorkflowHelpData(this._config.context.configurator,e,"userstory")})},"bus teamChanged":function(e,t){this._workflowSelectors.setProps({selectedGroupId:t.id})},"bus afterRender:last + destroy":function(e,t){o.unmountComponentAtNode(t.element[0])
}})});