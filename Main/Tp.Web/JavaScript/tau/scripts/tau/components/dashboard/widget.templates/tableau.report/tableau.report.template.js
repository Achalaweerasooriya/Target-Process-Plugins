define(["require","jQuery","react","jsx!./tableau.report.renderer","jsx!./tableau.report.selector.view","jsx!./tableau.report.settings.view","jsx!../shared/error.view","./tableau.report.url"],function(e){var r=e("jQuery"),t=e("react"),n=e("jsx!./tableau.report.renderer"),a=e("jsx!./tableau.report.selector.view"),i=e("jsx!./tableau.report.settings.view"),o=e("jsx!../shared/error.view"),s=e("./tableau.report.url");return{id:"tableau.report.embedded",name:"Tableau report",description:"Display Tableau reports and dashboards in Targetprocess",tags:["Beta","Reports"],previewSrc:"../img/widgets/reports-tableau.png",layout:{aspectRatio:1.6},defaultSettings:{reportUrl:""},insert:function(e,t,a){if(!this._canInsertReport(t))return this._insertReportSelector(e,a);var i=r.Deferred(),o={placeholder:e,reportUrl:t.reportUrl};return new n(o).render().done(i.resolve.bind(i)).fail(function(r){i.resolve(this._insertErrorView(e,r))}.bind(this)),i.promise()},_canInsertReport:function(e){return s.isValidReportUrl(e.reportUrl)},_insertReportSelector:function(e,r){var n={onApply:function(e){var t=s.extractReportNameFromUrl(e),n=t?{name:t}:null;r.widgetApi.internalModifyDefinition({reportUrl:e},n)}.bind(this)};t.render(t.createElement(a,n),e)},_insertErrorView:function(e,r){var n={header:"Oops, seems that we can't render this report",message:"Please verify that the report URL is correct or let us know about this issue",technicalDetails:r};return t.render(t.createElement(o,n),e)},insertSettings:function(e,r){var n={initialReportUrl:r.reportUrl},a=t.render(t.createElement(i,n),e);return a.getCurrentSettings}}});