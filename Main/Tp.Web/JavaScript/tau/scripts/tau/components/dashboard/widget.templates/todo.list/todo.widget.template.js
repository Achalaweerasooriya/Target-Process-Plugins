define(["require","Underscore","libs/react/react-ex","./todo.widget.model","jsx!./todo.widget.view","jsx!./todo.widget.settings","./todo.widget.constants","tau/components/dashboard/widget.templates/todo.list/todo.widget.entity.layouts","tau/core/termProcessor","tau/ui/templates/board.plus/customized/ui.template.boardplus.default.card.customized","./todo.widget.highlighter"],function(t){var e=t("Underscore"),i=t("libs/react/react-ex"),o=t("./todo.widget.model"),n=t("jsx!./todo.widget.view"),s=t("jsx!./todo.widget.settings"),r=t("./todo.widget.constants"),a=t("tau/components/dashboard/widget.templates/todo.list/todo.widget.entity.layouts"),d=t("tau/core/termProcessor"),g=t("tau/ui/templates/board.plus/customized/ui.template.boardplus.default.card.customized"),u=t("./todo.widget.highlighter"),c=function(t){return{id:c.TEMPLATE_ID,name:"ToDo List",previewSrc:"../img/widgets/todo-list.png",description:"All open work assigned to you",tags:["Lists"],insert:function(e,s,r){var a=new o(r.context,t,s),d=new u(t.getStore());return d.initialize().then(function(){return i.render(i.createElement(n,{highlighter:d,cardsRetrieved:a.cardsRetrieved,renderCardAsText:function(e,i){return g.renderToString({dataItem:e,layout:i,configurator:t})},openEntityView:function(e){t.getEntityViewService().showEntityView(e)}}),e),{update:function(t){a.update(t)},updateContext:a.updateContext.bind(a),destroy:function(){a.destroy(),i.unmountComponentAtNode(e)}}})},insertSettings:function(o,n,a){return t.getApplicationContextService().getApplicationContext({acid:a.context.acid}).then(function(t){var a=e.find(t.processes,e.property("isDefault")),g=a||t.processes[0],u=new d(g.terms),c=i.renderClass(s,{termProcessor:u,initialEntities:n.entities,initialHighlight:n.highlight},o);return function(){return{entities:c.state.entities,highlight:{blockers:c.state.highlight.blockers,noStateChanges:c.state.highlight.noStateChanges,noStateChangesDays:c.state.highlight.noStateChangesDays||r.NO_STATE_CHANGE_DAYS}}}})},defaultSettings:{entities:e.keys(a),highlight:{blockers:!1,noStateChanges:!1,noStateChangesDays:r.NO_STATE_CHANGE_DAYS}}}
};return c.TEMPLATE_ID="todo_list",c});