define(["require","tau/core/class","Underscore","tau/services/boards/view.types"],function(t){var a=t("tau/core/class"),r=t("Underscore"),e=t("tau/services/boards/view.types");return a.extend({parseDashboardUpdate:function(t,a){if(!t)throw new Error("Parser config should be specified");if(!t.dashboardId)throw new Error("Parser config should contain a dashboard ID");return this._extractOperationData(t,a)},_extractOperationData:function(t,a){return r.chain(a).filter(this._isSupportedNotification,this).map(this._tryExtractData.bind(this,t)).compact().last().value()},_isSupportedNotification:function(t){return t.data.itemType===e.DASHBOARD&&"updated"===t.modificationType.toLowerCase()},_tryExtractData:function(t,a){var r=a.data.itemData;if(r){if(r.key!==t.dashboardId)return void console.warn('Dashboard comet parser received a notification for dashboard "'+r.key+'", but it should only listen to notifications of dashboard "'+t.dashboardId+'".');if(r.layout)return r}}})});