define(["require","Underscore","tau/core/class","tau/components/board.menu/models/board.menu.section.collection"],function(e){var i=e("Underscore"),t=e("tau/core/class"),n=e("tau/components/board.menu/models/board.menu.section.collection");return t.extend({init:function(e){if(!i.isFunction(e.isMatchingView))throw new Error("`isMatchingView` should be a valid function");this._viewsMenuService=e.viewsMenuService,this._isMatchingView=e.isMatchingView},getAllViews:function(e){return this._viewsMenuService.getViewsMenuForUser().then(this._getViewsFromSections.bind(this,e))},_getViewsFromSections:function(e,t){var r=new n;r.setSections(t);var s=r.getAllBoards();return i.chain(s).filter(function(i){var t=e&&i.storedViewData.key===e;return t||this._isMatchingView(i)},this).map(this._pickViewData,this).sortBy(i.property("name")).value()},_pickViewData:function(e){var i=e.storedViewData.key;return{key:i,name:e.storedViewData.name||i}}})});