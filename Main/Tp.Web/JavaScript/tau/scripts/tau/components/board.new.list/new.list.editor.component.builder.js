define(["Underscore","jQuery","tau/core/class","./views/editors/view.new.list.editor.unit","./views/editors/editor.adapter.default","./views/editors/editor.adapter.title","./views/editors/editor.adapter.text","./views/editors/editor.adapter.assignments","./views/editors/editor.adapter.tags","./views/editors/editor.adapter.choice"],function(e,t,i,n,a,r,o,d,s,l){return i.extend({configsByEditor:{defaults:{maxWidth:!1,minWidth:!0,className:null,positionVertical:"center",adapter:a},title:{maxWidth:!0,minWidth:!0,adapter:r},choice:{minWidth:!0,positionVertical:"top",adapter:l},tags:{className:"tau-bubble-newlist-editor-tags-inline",adapter:s},assignments:{minWidth:!1,className:"tau-bubble-newlist-editor-assignments",positionVertical:"top",adapter:d},"time.description.edit":{maxWidth:!1,minWidth:!1,adapter:o,bubbleConfig:{appendTo:null}},"finder.entity":{adapterConfig:{savingEvent:"beforeSave",savedEvent:"afterSave",saveFailedEvent:"saveFailed",finishedEvent:"afterSave"}},effort:{minWidth:!1,className:"tau-bubble-newlist-editor-effort",positionVertical:"top",adapterConfig:{savingEvent:"effort.editor.saving",savedEvent:"effort.editor.saved",saveFailedEvent:"effort.editor.saveFailed",finishedEvent:"effort.editor.finished"}},time:{minWidth:!1,className:"tau-bubble-newlist-editor-effort",positionVertical:"top",adapterConfig:{savingEvent:"time.editor.saving",savedEvent:"time.editor.saved",saveFailedEvent:"time.editor.saveFailed",finishedEvent:"time.editor.finished"}},"entity.delete":{minWidth:!1,className:null,positionVertical:"center",adapterConfig:{savingEvent:"delete.editor.saving",savedEvent:"delete.editor.saved",saveFailedEvent:"delete.editor.saveFailed",finishedEvent:"delete.editor.finished"}},date:{maxWidth:!1,minWidth:!1,bubbleConfig:{dontCloseSelectors:["#ui-datepicker-div"],zIndex:1e4},adapterConfig:{savingEvent:"beforeSave",savedEvent:"afterSave",saveFailedEvent:"saveFailed",finishedEvent:"afterSave"}}},init:function(e,t,i,n){this._bus=e,this._configurator=t,this._eventAggregator=i,this._viewContainer=n
},createEditorView:function(e,i,r,o){var d={configurator:this._configurator,entity:e.entity},s=i.editorConfig,l=this._getEditorConfig(s.type),f=l.adapter||a,v=new f,c=v.adaptEditorData(i,e.data[i.id]),u=this._createBubbleConfigOptions(l,o,r),h=this._createComponentConfig(s,d,c,u),p=this._configurator.getComponentBuilder();return p.createAsChild(h,this._bus).then(function(e){var i,n=t.Deferred(),a=t.Deferred();return e.once("childrenBuses.ready",function(e,t){i=t[0],v.createEditableElement(i).then(function(){a.resolve(v)})}),e.once("$bubbled.ready",function(e,t){i.fire("$outerBubbled.ready",t),n.resolve(t)}),e.initialize({context:d}),e.fire("view.dom.ready"),e.fire("$trigger.ready",o),t.when(n,a)}).then(function(t,a){return a.startEdit(t,l.adapterConfig),new n(e,i,r,o,a)})},_getEditorConfig:function(t){var i=e.find(this.configsByEditor,function(i,n){return e.startsWith(t,n)});return e.extend({},this.configsByEditor.defaults,i)},_findEditorContainer:function(){return this._viewContainer.findBoardContainer()},_createBubbleConfigOptions:function(t,i,n){var a=n.closest(".general-info"),r=a.length?a:n;return e.extend({appendTo:r,within:this._findEditorContainer(),className:t.className,showArrow:!1,template:['<div class="tau-bubble tau-bubble-newlist-editor" style="',t.maxWidth?" max-width: "+i.width()+"px;":"",t.minWidth?" min-width: "+i.outerWidth()+"px;":"",'">','<div class="tau-bubble__inner" role="content"></div>',"</div>"].join(""),onPositionConfig:function(e){e.my="left "+t.positionVertical,e.at="left "+t.positionVertical,e.collision="flipfit flipfit"}},t.bubbleConfig)},_createComponentConfig:function(t,i,n,a){var r=e.extend({},t,{context:i,extensions:[],data:n,$within:this._findEditorContainer()});return{type:"bubble.container",visible:!0,children:[r],extensions:[],options:a}}})});