define(["Underscore","jQuery","tau/core/class","./views/editors/view.new.list.editor.unit","./views/editors/editor.adapter.default","./views/editors/editor.adapter.title","./views/editors/editor.adapter.assignments","./views/editors/editor.adapter.tags","./views/editors/editor.adapter.choice"],function(e,t,i,n,r,a,o,s,d){return i.extend({configsByEditor:{defaults:{maxWidth:!1,minWidth:!0,className:null,positionVertical:"center",adapter:r},title:{maxWidth:!0,minWidth:!0,adapter:a},choice:{minWidth:!0,positionVertical:"top",adapter:d},tags:{className:"tau-bubble-newlist-editor-tags-inline",adapter:s},assignments:{minWidth:!1,className:"tau-bubble-newlist-editor-assignments",positionVertical:"top",adapter:o},"finder.entity":{adapterConfig:{savingEvent:"beforeSave",savedEvent:"afterSave",saveFailedEvent:"saveFailed",finishedEvent:"afterSave"}},effort:{minWidth:!1,className:"tau-bubble-newlist-editor-effort",positionVertical:"top",adapterConfig:{savingEvent:"effort.editor.saving",savedEvent:"effort.editor.saved",saveFailedEvent:"effort.editor.saveFailed",finishedEvent:"effort.editor.finished"}}},init:function(e,t,i,n){this._bus=e,this._configurator=t,this._eventAggregator=i,this._viewContainer=n},createEditorView:function(e,i,a,o){var s={configurator:this._configurator,entity:e.entity},d=i.editorConfig,f=this._getEditorConfig(d.type),l=f.adapter||r,c=new l,u=c.adaptEditorData(i,e.data[i.id]),v=this._createComponentConfig(d,f,a,o,s,u),h=this._configurator.getComponentBuilder();return h.createAsChild(v,this._bus).then(function(e){var i,n=t.Deferred(),r=t.Deferred();return e.once("childrenBuses.ready",function(e,t){i=t[0],c.createEditableElement(i).then(function(){r.resolve(c)})}),e.once("$bubbled.ready",function(e,t){i.fire("$outerBubbled.ready",t),n.resolve(t)}),e.initialize({context:s}),e.fire("view.dom.ready"),e.fire("$trigger.ready",o),t.when(n,r)}).then(function(t,r){return r.startEdit(t,f.adapterConfig),new n(e,i,a,o,r)})},_getEditorConfig:function(t){var i=e.find(this.configsByEditor,function(i,n){return e.startsWith(t,n)});return e.extend({},this.configsByEditor.defaults,i)},_createComponentConfig:function(t,i,n,r,a,o){var s=r,d=this._viewContainer.findBoardContainer(),f=e.extend({},t,{context:a,extensions:[],data:o,$within:d});return{type:"bubble.container",visible:!0,children:[f],extensions:[],options:{appendTo:n,within:d,className:i.className,showArrow:!1,template:['<div class="tau-bubble tau-bubble-newlist-editor" style="',i.maxWidth?" max-width: "+s.width()+"px;":"",i.minWidth?" min-width: "+s.outerWidth()+"px;":"",'">','<div class="tau-bubble__inner" role="content"></div>',"</div>"].join(""),onPositionConfig:function(e){e.my="left "+i.positionVertical,e.at="left "+i.positionVertical,e.collision="flipfit flipfit"}}}}})});