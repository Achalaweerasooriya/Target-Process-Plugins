define(["Underscore","tau/core/templates-factory","tau/ui/extensions/board.plus/ui.board.plus.utils","tau/ui/extensions/board.plus/ui.board.plus.cards-custom-functions","tau/ui/templates/board.plus/customized/ui.template.boardplus.card.section.customized"],function(a,t,e,r){var s=a.extend({},r,{generateCardClass:function(a,t){return["i-role-card","tau-list-entity",this.generateFinalStateClass(t),this.generateIsInPastClass(t),this.generateListClass(a,t)].join(" ")},generateListClass:function(a,t){var r="tau-list-"+t.type.toLowerCase(),s=a.data.empty;return s&&(r+=" tau-axis-card-no-value"),e.isSupportedCardForView(t.type.toLowerCase())||(r+=" tau-axis-card-no-view"),r},generateHandlerClass:function(a){return"tau-drag-handler tau-drag-handler-level-"+a.levelKey+(a.isMovable||a.isPrioritizable?" tau-drag-handler-enabled":" tau-drag-handler-disabled")},generateFinalStateClass:function(a){return a.isFinal?this.getFinalStateClass():""},generateIsInPastClass:function(a){return a.isInPast?this.getIsInPastClass():""},getFinalStateClass:function(){return"tau-list-entity_final-state"},getIsInPastClass:function(){return"tau-list-entity_isInPast"},generateCardCollapserClass:function(a){var t="tau-list-collapser-cell";return a.isCollapserEnabled||(t+=" disabled"),t},prepareListCardData:function(a){var t=a.data.cardData||{id:a.id,type:a.type};return a.data.cardData=t,t},renderListLayout:function(t,e,r){var s=r.data.cardData.type.toLowerCase(),n=a.map(e,function(a,e){var n=r.data[a.unit.id];if(r.data.empty){if(!a.unit.isNameUnit)return"";n=r.data}var i={settings:{width:a.width},type:s,data:n,configurator:t,first:!e,unit:a,renderDetailsTrigger:r.renderDetailsTrigger};return this.sub(a.unit.getTemplateName("list"),[i])},this);return n.join("")}}),n={engine:"jqote2",customFunctions:s,name:"new.list.card.customized",markup:["<% var dataItem = this.dataItem, configurator = this.configurator; %>","<% var cardData = fn.prepareListCardData(dataItem); %>",'<div role="card" id="<%= fn.generateCardId(cardData) %>" style="<%= fn.generateColorEncodingStyle(dataItem) %>" class="<%= fn.generateCardClass(dataItem, cardData) %>" <%= fn.generateDataAttributes(dataItem) %>>','<div class="tau-list-line">','<div class="tau-elems-table tau-elems-table-level-<%= dataItem.levelKey %>">','<div class="tau-drag-handler-cell i-role-dragndrop-handler">','<div class="<%= fn.generateHandlerClass(dataItem) %>"></div>',"</div>","<% if (dataItem.renderCollapser) { %>",'<div class="<%= fn.generateCardCollapserClass(dataItem) %>"><button class="i-role-card-collapser tau-v-collapser"></button></div>',"<% } %>","<%= fn.renderListLayout(configurator, this.layout, dataItem) %>","</div>","</div>","</div>"]};
return t.register(n)});