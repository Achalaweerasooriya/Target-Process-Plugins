define(["Underscore","tau/core/controller.base"],function(e,i){return i.extend({init:function(i,t){this._pagingView=i,this._treeModel=t,this._treeModel.pagingUpdated.add(this._updateView,this),this._treeModel.pagingLoadingStarted.add(this._showViewProgress,this);var n=function(i,n){taus.track({action:n+" page",cardTypes:e.map(t.hierarchyMetaInfo.cardTypes,function(e){return e.typeName}),pageSize:t.pagingModel.pageSize,pagingType:i,skip:t.pagingModel.getSkipped(),cardCount:t.nodes.items.length,tags:["newlist"]})};this._pagingView.nextPageClicked.add(function(e){t.goToNextPage().then(function(){n(e.pagingType,e.direction)})}),this._pagingView.prevPageClicked.add(function(e){t.goToPreviousPage().then(function(){n(e.pagingType,e.direction)})}),this._pagingView.lastPageClicked&&this._pagingView.lastPageClicked.add(function(e){t.goToLastPage().then(function(){n(e.pagingType,e.direction)})}),this._pagingView.firstPageClicked&&this._pagingView.firstPageClicked.add(function(e){t.goToFirstPage().then(function(){n(e.pagingType,e.direction)})}),this._pagingView.pageSizeChanged.add(e.bind(this._pageSizeChangedHandler,this))},_updateView:function(){this._pagingView.update(this._treeModel)},_showViewProgress:function(){this._pagingView.showProgress()},startLifeCycle:function(){this._pagingView.render(this._treeModel)},_pageSizeChangedHandler:function(e){this._treeModel.setPageSize(e),taus.track({action:"page size",pageSize:e,tags:["newlist"]})},destroy:function(){this._treeModel.pagingUpdated.remove(this),this._treeModel.pagingLoadingStarted.remove(this)}})});