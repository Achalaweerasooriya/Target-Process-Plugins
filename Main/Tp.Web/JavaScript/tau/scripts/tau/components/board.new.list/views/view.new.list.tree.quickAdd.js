define(["Underscore","jQuery","tau/core/class"],function(i,t,d){return d.extend({init:function(t,d){this.treeView=t,this.quickAddModel=d,this.showQuickAddClicked=i.Callbacks(),this.quickAddModel.dataLoaded.add(this.renderPossibleActions,this),this.renderPossibleActions()},renderPossibleActions:function(){if(this.quickAddModel.data){var d=this.treeView.findHeaderHolder(),e=d.find(".i-role-list-controls");e.find("button.tau-list-quick-add").remove();var s=t('<button class="tau-list-quick-add tau-btn tau-add tau-success"></button>');e.append(s),s.on("click",this._onShowQuickAddClicked.bind(this,{target:s})),d.on("dblclick",this._onShowQuickAddClicked.bind(this,{target:s}));var o=s.closest(".tau-board-list-view__inner");o.on("scroll",i.debounce(function(){s.data("ui-tauBubble")&&s.tauBubble("adjustPosition")},200))}},_onShowQuickAddClicked:function(i){i.target.parent().hasClass("tau-quick-add_expand")||this.showQuickAddClicked.fire(i)},destroy:function(){this.quickAddModel.dataLoaded.remove(this)}})});