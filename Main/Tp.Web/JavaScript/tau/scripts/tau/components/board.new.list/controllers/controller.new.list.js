define(["require","Underscore","tau/core/controller.base","./controller.new.list.tree.root","tau/models/board.plus/model.board.slice.extender","../models/model.new.list.tree.root","../views/dragndropBehavior","../views/sortingBehavior","../views/resizableBehavior","../storeListenerBehavior","../views/stickyHeaderBehavior","../views/contextMenuBehavior","tau/libs/boardSettings/board.settings.to.definition.translator"],function(e){var i=e("Underscore"),t=e("tau/core/controller.base"),o=e("./controller.new.list.tree.root"),r=e("tau/models/board.plus/model.board.slice.extender"),n=e("../models/model.new.list.tree.root"),s=e("../views/dragndropBehavior"),a=e("../views/sortingBehavior"),d=e("../views/resizableBehavior"),l=e("../storeListenerBehavior"),c=e("../views/stickyHeaderBehavior"),g=e("../views/contextMenuBehavior"),h=e("tau/libs/boardSettings/board.settings.to.definition.translator");return t.extend({_lastRenderedElement:null,init:function(e,i,t,o,r,n,s,a){this._skeletonView=e,this._listModel=i,this._eventAggregator=t,this._configurator=n,this._editorComponentBuilder=o,this._quickAddComponentBuilder=r,this._sliceFactory=s,this._componentBus=a},startLifeCycle:function(e,i){taus.start("statistics_newlist_cardLoad",{},"statistics_newlist_cardLoad");var t=new h(e,this._configurator.getAppStateStore());t.getBoardDefinition().then(function(e){var t=e.definition,o=e.configuration;this._eventAggregator.acidRetrieved.fire(t.global.acid),this._eventAggregator.boardSettingsRetrieved.fire(o),this._eventAggregator.definitionReady.fire(t,o);var n={definition:t},s=this._sliceFactory.create(n),a=new r;a.extend({slice:s},i).then(function(e){this._eventAggregator.sliceServiceCreated.fire({service:e.slice,definition:t})}.bind(this))}.bind(this))},buildSkeleton:function(e,i){var t=this._listModel.getEmptyModelInfoArgs(e.config.definition);this._eventAggregator.sliceInfoRetrieved.fire(t),this._skeletonView.buildSkeleton(e.config.definition,t,i)},render:function(e,t){var r=t.config.definition;e.get(["cellPaging"]).then(i.bind(function(s){var a={paging:s.cellPaging,boardId:e.settings.id,listSettings:{apiService:t,boardSettingsService:e,serviceContainer:this._configurator}},d=new n(a);if(this._listModel.setup(d,r),this._listModel.isNotConfigured())this._skeletonView.showNotConfiguredMessage();else{var l=new o(d,this._skeletonView,this._eventAggregator,this._editorComponentBuilder,this._quickAddComponentBuilder,this._configurator,a);l.startLifeCycle(),this._addChildDestroyable(l),i.each(this._createBehaviors(a,l),function(e){this._addChildDestroyable(e),e.attach()},this)}},this))},_createBehaviors:function(e,i){var t=e.listSettings;return[new s(this._eventAggregator,this._skeletonView,t.boardSettingsService,t.apiService,this._configurator),new d(this._eventAggregator,this._skeletonView.columnWidthService,this._skeletonView.$el),new c(this._eventAggregator,this._skeletonView,t.boardSettingsService,this._configurator),new g(this._componentBus,t.apiService,this._configurator),new a(this._skeletonView,i,e),new l(this._listModel,t.apiService.config.definition,t.apiService,this._configurator.getStore())]}})});