define(["require","Underscore","tau/core/extension.base","tau/components/board.new.list/models/comet.dispatcher"],function(e){var t=e("Underscore"),o=e("tau/core/extension.base"),a=e("tau/components/board.new.list/models/comet.dispatcher");return o.extend({init:function(e,t){this._super(e),this._model=t,this._cometDispatcher=new a},"bus comet.tick":function(e,t){this.fire("operation.execute",t.data)},"bus configurator.ready:last + operation.execute":function(e,t,o){this.executeCometOperation(o)},executeCometOperation:function(e){var o=t.map(e.items,this._getOperationData.bind(this,e));this._executeOperations(o)},_getOperationData:function(e,o){var a=t.cloneDeep(o.data);return a.path=a.path||[],{name:(o.modification||e.name).toLowerCase(),path:a.path,card:a.dataItem||a.data,levelType:o.levelType,shouldBePropagated:o.shouldBePropagated,level:o.level,options:e.options,items:e.items,reason:e.reason}},_executeOperations:function(e){this._cometDispatcher.tryDispatchOperations(this._model.treeRootModel,e)&&this.fire("operation.execute.done")}})});