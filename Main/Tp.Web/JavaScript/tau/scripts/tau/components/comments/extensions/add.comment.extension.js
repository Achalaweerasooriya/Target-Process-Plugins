define(["require","tau/components/extensions/component.extension.base","../comment.editor","tau/utils/utils.editors","tau/ui/behaviour/common/ui.behaviour.richeditor","tau/ui/behaviour/common/ui.behaviour.richeditorMarkdown"],function(e){var t=e("tau/components/extensions/component.extension.base"),i=e("../comment.editor"),o=e("tau/utils/utils.editors");e("tau/ui/behaviour/common/ui.behaviour.richeditor"),e("tau/ui/behaviour/common/ui.behaviour.richeditorMarkdown");var n=t.extend({category:"edit","bus afterRender + editorModelReady":function(e,t,i){this.element=t.element,i.editorClosed.add(function(){this.fire("destroy")},this);var n=this.config.context.entity.entityType.name;this.config.context.configurator.getGlobalSettingsService().getGlobalSettings().then(function(e){var t=o.detectEditorType(e,"",n);this.initializeEditor({model:i,editorType:t})}.bind(this))},initializeEditor:function(e){var t=this.config.context.configurator,o=this.element.find(".ui-comment-text"),n=new i({configurator:t,editorModel:e.model,editorType:e.editorType,extension:this,$editor:o,mentionConfig:{configurator:t},pluginConfig:{uploadUrl:t.getApplicationPath()+"/UploadFile.ashx"}});n.showEditor()}});return n});