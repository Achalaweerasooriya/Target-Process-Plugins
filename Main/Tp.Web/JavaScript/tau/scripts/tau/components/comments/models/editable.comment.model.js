define(["require","./comment.model.base","./comment.editor.model"],function(e){var t=e("./comment.model.base"),i=e("./comment.editor.model");return t.extend({name:"Editable Comments","bus applyTo":function(e){this._bindedData=e.data.data,this._authorize(),this._initializeCommentEditors()},_authorize:function(){var e=this._bindedData.deleted,t={editable:!e,deletable:!0};this.fire("permissionsReady",t)},_initializeCommentEditors:function(){var e=this.config.context.entity,t=e.id,n=e.entityType.name,o=this._bindedData,d={replyEditorModel:new i({entityId:t,entityType:n,saveComment:function(e){return this.postCommentData(null,{description:e,parentId:o.id})}.bind(this),saveActionName:"Add Reply"}),commentEditorModel:new i({entityId:o.id,entityType:"comment",getDefaultCommentText:function(){return o.rawDescription},saveComment:function(e){return this.postCommentText(o.id,e)}.bind(this),checkChanges:!1})};this.fire("editorModelsReady",d)},"bus deleteComment":function(){var e=this._bindedData,t=e.id;e.comments&&e.comments.length>0?this.postCommentData(t,{description:"DELETED"}):this.fire("remove",{id:t,typeName:"comment"})}})});