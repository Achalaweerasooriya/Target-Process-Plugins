define(["require","jQuery","tau/components/extensions/component.extension.base","template!tau/components/comments/templates/comment.mention.hint.template","tau/components/comments/templates/comment.notifications.template"],function(e){var t=e("jQuery"),n=e("tau/components/extensions/component.extension.base"),o=e("template!tau/components/comments/templates/comment.mention.hint.template"),i=e("tau/components/comments/templates/comment.notifications.template");return n.extend({category:"edit","bus editorSave":function(){if(this.globalSettings.IsEmailNotificationsEnabled){var e=this;e.config.store.on({eventName:"beforeSave",type:"comment",listener:e},function(t){var n=t.data;e.beforeSaveComment(n)})}},"bus $editorHolder.ready":function(e,t){var n={config:this.config};this.globalSettings=n.config.context.applicationContext.globalSettings||{};var a=n.config.context.entity,s=a.entityType.name.toLowerCase(),c=o.render();if(t.find(".i-role-tools").before(c),this.globalSettings.IsEmailNotificationsEnabled){var m=i.render({owner:!0,assigned:!0,requesters:"request"==s,team:"request"!==s});c.after(m),this.placeHolder=m}},"bus destroy":function(){this.config.store.unbind(this),this._super()},beforeSaveComment:function(e){var n=this.placeHolder.find('input[type="checkbox"]'),o={};n.each(function(e,n){var i=t(n);i.prop("checked")&&(o[i.val()]=!0)}),e.cmd["comment-practices-notification-opts"]=o}})});