define(["Underscore","jQuery","tau/core/class","tau/ui/templates/board.timeline/ui.template.board.timeline.ruler10","tau/components/board.timeline/views/ruler/scale","tau/components/board.timeline/views/board.timeline.view.first-label"],function(e,t,i,l,a,s){var r=i.extend({init:function(e){this._$placeholder=null,this._dateRange=null,this._milestonesView=e,this._firstLabel=new s},_htmlWithMeta:function(){var t=a.createFor(this._$placeholder.width(),this._dateRange).segments();this._firstLabel.setLabel(t[0].firstLabel);var i=e.some(t,function(e){return e.label&&!e.isPeriodStart});return{html:l.get().bind({},t),segmentsWithLabels:i}},_attachHtmlToPlaceholder:function(){var e=this._htmlWithMeta();this._$placeholder.html(e.html),this._$placeholder.toggleClass("tau-scale-ruler--zoomed",e.segmentsWithLabels)},bind:function(e){this._dateRange=e,this._$placeholder&&this._doRender()},renderTo:function(e){this._$placeholder=e.find(".tau-scale-ruler"),this._$placeholder.width(e.find(".tau-timeline-flow").width()),this._dateRange&&this._doRender()},_doRender:function(){if(this._attachHtmlToPlaceholder(),this._milestonesView.render(this._$placeholder,!0),this._firstLabel.isEmpty()){var e=this._$placeholder.find(".tau-ruler-segment.tau-is-period-start").first(),t=e.position(),i=e.find(".tau-notch-label");i.length>0&&i.width()/2>t.left&&(this._firstLabel.setLabel(i.html()),i.empty())}this._firstLabel.render(this._$placeholder)}});return r});