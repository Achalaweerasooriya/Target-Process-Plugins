define(["Underscore","tau/core/class"],function(n,e){function t(e,t){return n.chain(e).keys().reduce(function(n,u){return n[u]=t(e[u]),n},{}).value()}var u=function(e){return n.sum(n.values(e))};return e.extend({_items:null,init:function(n){this._items=n},gerRenderData:function(e){var r=n.reduce(this._items,function(e,t,u){return n.each(t,function(n,t){e[t]=e[t]||{},e[t][u]=n}),e},[]),i=n.chain(r).map(u).max().value(),c=e/i;return n.map(r,function(n){return t(n,function(n){return Math.round(n*c)})})}})});