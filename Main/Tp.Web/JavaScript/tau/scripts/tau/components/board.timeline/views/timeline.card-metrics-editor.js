define(["Underscore","tau/core/class"],function(i,t){var e=t.extend({init:function(i){this._model=i},commit:function(){this._model.commitEdit()},resize:function(){throw new Error("Resize should be implemented in derived class")},drag:function(){throw new Error("Drag should be implemented in derived class")},leftResizeAvailable:function(){return!0},rightResizeAvailable:function(){return!0}}),n=e.extend({begin:function(){this._initial={left:this._model.plannedLeft,width:this._model.plannedWidth},this.drag(0)},drag:function(i){var t=-(this._model.plannedWidth+this._initial.left),e=1-this._initial.left;this._model.applyEdit(a(i,t,e),0)},resize:function(i,t){i==-t?this._resizeLeft(i):this._resizeRight(t)},leftResizeAvailable:function(){return this._model.plannedLeft>=0},rightResizeAvailable:function(){return this._model.plannedLeft+this._model.plannedWidth<=1},_resizeLeft:function(i){var t=-this._initial.left,e=Math.min(this._initial.width,1-this._initial.left);i=a(i,t,e),this._model.applyEdit(i,-i)},_resizeRight:function(i){var t=-this._initial.width,e=1-(this._model.plannedLeft+this._initial.width);this._model.applyEdit(0,a(i,t,e))}}),l=e.extend({begin:function(){this._initialLeft=this._model.fixedLeft},drag:function(i){this._model.applyEdit(a(i,-this._initialLeft,-this._initialLeft+1),0)},leftResizeAvailable:function(){return!1},rightResizeAvailable:function(){return!1}}),a=function(i,t,e){return Math.max(t,Math.min(e,i))},d={fixed:l,durable:n};return{createFor:function(i){return new d[i.type](i)}}});