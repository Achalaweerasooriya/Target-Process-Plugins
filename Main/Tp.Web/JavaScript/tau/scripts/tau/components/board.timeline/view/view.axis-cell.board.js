define(["Underscore","jQuery","tau/core/class","tau/ui/extensions/board.plus/ui.board.plus.dom.utils","tau/ui/extensions/board.plus/ui.board.plus.utils"],function(e,t,i,a,s){return i.extend({init:function(t,i,a,s,d){this._$axisCell=i,this._model=t,this._template=s.getTemplateFactory().get("boardplus.cell.axis.skeleton"),this._renderConfig=e.defaults(d,{beforeInsert:e.identity,afterInsert:e.identity}),this.onViewUpdated=e.Callbacks(),t.onAxisUpdated.add(this._updateAxis.bind(this)),t.onAxisRemoved.add(this._removeAxis.bind(this))},_$createAxisItem:function(e){var t=s.convertCellAxisData({dynamic:{items:[e]}});return t.dynamic=!0,this._template.bind({},t)},render:function(){var e={cell:this._$axisCell,content:t(),dataItem:this._model.dataItem};this._renderConfig.beforeInsert(e),this._$axisCell.append(this._$createAxisItem(this._model.dataItem.dynamic.items[0])),this._renderConfig.afterInsert(e)},_fireOnViewUpdated:function(t,i,a){this.onViewUpdated.fire({name:t,items:e.map(a,function(e){return{data:e}}),location:"axis"},{$cell:this._$axisCell,cards:i||[],dataItems:a})},_updateAxis:function(e){var i=e.card.data,s=this._$createAxisItem(i);this._$axisCell.empty().append(s),t.when(a.animated(s,"tau-operation_axis_updated")).then(t.noop),this._fireOnViewUpdated("updated",[s],[i])},_removeAxis:function(i){var a=this._$axisCell,s=function(t,i){var a=t.attr("class")||"",s=e.reduce(i,function(e,t){return e.replace(t.key,t.val)},a);return t.attr("class",s),t},d=function(){var e=[{key:/i-role-/gi,val:"i-disabled-role-"}];s(t(this),e).removeProp("checked").prop("disabled",!0)},n=function(){var e=t(this);s(e,[{key:/i-role-(?!cell\b)/gi,val:"tau-disabled-role-"}]).addClass("tau-cellaxis__removed").css("opacity",.3),s(e.parent(".i-role-cellholder"),[{key:/i-role-(?!cellholder\b)/gi,val:"tau-disabled-role-"},{key:/tau-selected/gi,val:"tau-disabled-selected"}])};a.find("*").each(d),a.each(n),this._fireOnViewUpdated("deleted",[],[i])}})});