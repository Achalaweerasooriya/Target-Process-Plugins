define(["Underscore","jQuery","tau/core/class","tau/ui/extensions/board.plus/ui.board.plus.dom.utils","tau/ui/extensions/board.plus/ui.board.plus.utils"],function(e,t,i,a,d){return i.extend({init:function(i,a,d,s,r){this._$axisCell=a,this._model=i,this._template=s.getTemplateFactory().get("boardplus.cell.axis.skeleton"),this._renderConfig=e.defaults(r,{beforeInsert:e.identity,afterInsert:e.identity}),this.onViewUpdated=t.Callbacks(),i.onAxisUpdated.add(this._updateCard.bind(this)),i.onAxisRemoved.add(this._removeCard.bind(this))},_$createAxisItem:function(e){var t=d.convertCellAxisData({dynamic:{items:[e]}});return t.dynamic=!0,this._template.bind({},t)},render:function(){var e={cell:this._$axisCell,content:t(),dataItem:this._model.dataItem};this._renderConfig.beforeInsert(e),this._$axisCell.append(this._$createAxisItem(this._model.dataItem.dynamic.items[0])),this._renderConfig.afterInsert(e)},_fireOnViewUpdated:function(e,t,i){this.onViewUpdated.fire({name:e,location:"axis"},{$cell:this._$axisCell,cards:t||[],dataItems:i})},_updateCard:function(e){var i=e.card.data,d=this._$createAxisItem(i);this._$axisCell.empty().append(d),t.when(a.animated(d,"tau-operation_axis_updated")).then(t.noop),this._fireOnViewUpdated("updated",[d],[i])},_removeCard:function(i){var a=this._$axisCell,d=function(t,i){var a=t.attr("class")||"",d=e.reduce(i,function(e,t){return e.replace(t.key,t.val)},a);return t.attr("class",d),t},s=function(){var e=[{key:/i-role-/gi,val:"i-disabled-role-"}];d(t(this),e).removeProp("checked").prop("disabled",!0)},r=function(){var e=t(this);d(e,[{key:/i-role-(?!cell\b)/gi,val:"tau-disabled-role-"}]).addClass("tau-cellaxis__removed").css("opacity",.3),d(e.parent(".i-role-cellholder"),[{key:/i-role-(?!cellholder\b)/gi,val:"tau-disabled-role-"},{key:/tau-selected/gi,val:"tau-disabled-selected"}])};a.find("*").each(s),a.each(r),this._fireOnViewUpdated("deleted",[],[i])}})});