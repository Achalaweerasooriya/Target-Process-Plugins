define(["require","Underscore","jQuery","react","tau/core/class","jsx!tau/components/board.timeline/views/board.timeline.view.milestone.add"],function(e){var i=(e("Underscore"),e("jQuery")),t=e("react"),n=e("tau/core/class"),o=e("jsx!tau/components/board.timeline/views/board.timeline.view.milestone.add");return n.extend({init:function(e,i){if(!e)throw new Error("timelineRangeModel is not defined");this._timelineRangeModel=e,this._milestonesModel=i,this._$viewPlaceholder=null,this._reactView=null,this._clicked=!1},render:function(e){if(this._$viewPlaceholder&&(t.unmountComponentAtNode(this._$viewPlaceholder[0]),this._$viewPlaceholder.remove(),this._$viewPlaceholder=null),this._milestonesModel.isMilestonesEnabled){this._$viewPlaceholder=i('<div class="tau-timeline-milestone-add-placeholder"></div>').appendTo(e);var n=t.createElement(o,this._createProps());this._reactView=t.render(n,this._$viewPlaceholder[0])}},update:function(){this._clicked=!1;var e=this._milestonesModel.getActiveMilestone();e&&!e.item.id&&(this._clicked=!0),this._reactView&&this._reactView.setProps(this._createProps())},_onQuickAddPopupOpened:function(e){this._clicked=!0,this._milestonesModel.createNewMilestone(e)},_createProps:function(){return{onAddButtonClick:this._onQuickAddPopupOpened.bind(this),clicked:this._clicked}}})});