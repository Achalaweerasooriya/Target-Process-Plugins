define(["Underscore","tau/core/class","tau/utils/timeline/utils.timeline.date.position.calculator","tau/utils/utils.date","tau/utils/timeline/utils.timeline.date-range"],function(t,e,i,n,o){var a=e.extend({init:function(){this._dateRange=null},setDateRange:function(t){this._dateRange=t,this.positionCalculator=i(t)},getDateRange:function(){return this._dateRange},getDateRelativeOffset:function(e){var i=t.isString(e)?n._convertToServerTime(n.parse(e)):e;return this.positionCalculator.getRelativeDatePosition(i)},getRelativeNowOffset:function(){return this.positionCalculator.getRelativeDatePosition(this.getNow())},getNow:function(){return n.getServerNow()},getCorrespondingDateRange:function(t){return new o(null===t.from?null:this.positionCalculator.getCorrespondingDate(t.from),null===t.to?null:this.positionCalculator.getCorrespondingDate(t.to))},serializeAsDate:function(t){var e=this.positionCalculator.getCorrespondingDate(t);return n.format.datetime.short(n.convertToTimezone(e))},getRelativeOffsetAndDuration:function(t,e){var i=this.getDateRelativeOffset(t),n=this.getDateRelativeOffset(e);return{offset:i,duration:n-i}}});return a});