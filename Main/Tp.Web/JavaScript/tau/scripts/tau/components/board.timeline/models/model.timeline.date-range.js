define(["Underscore","tau/core/class","tau/utils/timeline/utils.timeline.date.position.calculator","tau/utils/utils.date","tau/utils/timeline/utils.timeline.date-range"],function(t,e,n,i,o){var a=e.extend({init:function(){this._dateRange=null},setDateRange:function(t){this._dateRange=t,this.positionCalculator=n(t)},getDateRange:function(){return this._dateRange},toRelativeOffset:function(e){var n=t.isString(e)?i._convertToServerTime(i.parse(e)):e;return this.positionCalculator.getRelativeDatePosition(n)},getRelativeNowOffset:function(){return this.positionCalculator.getRelativeDatePosition(i.getServerNow())},getCorrespondingDateRange:function(t){return new o(null===t.from?null:this.positionCalculator.getCorrespondingDate(t.from),null===t.to?null:this.positionCalculator.getCorrespondingDate(t.to))},createDateRange:function(t){return new o(t.from,t.to)},serializeDate:function(t){return i.format.datetime.short(i.convertToTimezone(t))},isInRange:function(t,e){return this._dateRange.intersects(new o(t,e))}});return a});