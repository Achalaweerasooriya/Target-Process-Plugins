define(["Underscore","jQuery","tau/components/board.timeline/views/card/view.card-base","tau/ui/extensions/board.plus/ui.board.plus.dom.utils","tau/ui/templates/board.plus/customized/ui.template.boardplus.default.card.customized"],function(t,e,i,r,o){var s=i.extend({init:function(t,e,i){this._configurator=e,this._layoutFactory=i,this._super(t)},_$render:function(){var t=this._model.cardData(),e={configurator:this._configurator,dataItem:t,lazy:t.lazy,layout:this._layoutFactory(t.type.toLowerCase())};return o.render(e)},insertAt:function(t,e){this._$dom.insertAt(t,e,".i-role-card")},clearArtifacts:function(){this._$dom=e()},update:function(e){if(!this._isPlaceholder()){var i=this._$dom,r=t.filter(i.classes(),function(t){return 0===t.indexOf("i-role-permanent-")});this._setModel(e),this._$dom.addClass(r.join(" ")),i.replaceWith(this._$dom),this._$dom.text()!==i.text()&&this.markAsChanged()}},index:function(){return this._$dom.index()},isPromise:function(){return this._model.isPromise}});return s});