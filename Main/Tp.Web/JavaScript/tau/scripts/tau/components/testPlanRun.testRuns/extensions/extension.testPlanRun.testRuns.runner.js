define(["require","Underscore","jQuery","tau/core/extension.base","tau/components/testPlanRun.testRuns/controllers/controller.testPlanRun.testRuns.runner"],function(e){var n=e("Underscore"),t=e("jQuery"),i=e("tau/core/extension.base"),r=e("tau/components/testPlanRun.testRuns/controllers/controller.testPlanRun.testRuns.runner");return i.extend({predefinedOrderingConfig:{levelType:"cells",ordering:{name:"Rank",direction:"Desc"}},init:function(e){this._super(e),this._config=e,this._configurator=e.context.configurator,this._uiReady=t.Deferred(),this._sliceApi={},this._runnerModel=this._config.context.registry.runnerModel,this._runNext=this._runNext.bind(this),this._runFinished=this._runFinished.bind(this),this._runnerModel.nextRun.add(this._runNext),this._runnerModel.finished.add(this._runFinished),this._createListRunnerController()},_initSubscriptions:function(){this._runnerModel.nextRun.add(this._runNext),this._runnerModel.finished.add(this._runFinished)},_createListRunnerController:function(){this._listRunnerController=new r(this._config.newList,this._runnerModel,this._config.context.entity),this._listRunnerController.openNextRunCardDetails.add(this._openNextRunCardDetails,this)},_destroyListRunnerController:function(){this._listRunnerController&&(this._listRunnerController.openNextRunCardDetails.remove(this._openNextRunCardDetails,this),this._listRunnerController.destroy(),this._listRunnerController=null)},_runNext:function(){this._shouldBeRefreshed()&&this.fire("refresh")},_openNextRunCardDetails:function(e){this._uiReady.done(this.fire.bind(this,"new.list.open.card.details.view",n.extend(e,{doNotHideOnToggle:!0,scrollToCard:!0})))},_runFinished:function(){this.fire("new.list.close.card.details.view")},_shouldBeRefreshed:function(){var e=this._sliceApi.currentOrderingConfig;return this._sliceApi.currentOrderingConfig=this.predefinedOrderingConfig,e&&e.ordering&&e!=this.predefinedOrderingConfig},"bus refresh":function(){this._destroyListRunnerController(),this._createListRunnerController()
},"bus slice.ready":function(e,n){this._sliceApi=n.slice},"bus overview.board.ready:last + container.show.completed":function(){this._uiReady.resolve()},"bus container.hide.completed":function(){this._uiReady=t.Deferred()},"bus destroy":function(){this._runnerModel.nextRun.remove(this._runNext),this._runnerModel.finished.remove(this._runFinished),this._destroyListRunnerController()}})});