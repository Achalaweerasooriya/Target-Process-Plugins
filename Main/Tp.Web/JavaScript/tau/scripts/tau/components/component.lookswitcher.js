define(["jQuery","Underscore","tau/configurator","tau/components/component.creator","tau/ui/templates/ui.template.lookswitcher","tau/components/extensions/component.extension.base"],function($,_,conf,creator,template,ExtBase){var c={create:function(config){var SwitcherExt=ExtBase.extend({"bus beforeInit":function(){var self=this,globSettingsService=conf.getGlobalSettingsService();globSettingsService.getGlobalSettings({success:function(r){self.fire("dataBind",{loveNewLook:r.LoveNewLook})}})},execute:function(method,fnCallback){var globalSettingsService=conf.getGlobalSettingsService(),self=this;globalSettingsService.sendRequest("GlobalSettingsService",method,null,function(r){globalSettingsService.resetSettings(),fnCallback&&fnCallback()},function(r){})},"bus feltInLove+afterRender":function(args){var self=this;this.execute("WantToSeeBeatyAlways",function(){self.fire("refresh")})},"bus hateIt+afterRender":function(args){var self=this;self.execute("HateNewLook",function(){document.location.href=conf.getApplicationPath()+"/view.aspx?id="+self.config.context.entity.id})},"bus afterRender":function(args){var self=this,$element=args.data.element,attachHandler=function(lnk,method){$(lnk,$element).click(function(){$(this).unbind(),$(this).addClass("tau-disabled"),$(this).attr("disabled"),self.fire(method)})};attachHandler(".ui-lookswitcher-love-link","feltInLove"),attachHandler(".ui-lookswitcher-hate-link","hateIt")}}),creatorConfig={extensions:[SwitcherExt],template:template};return creator.create(creatorConfig,config)}};return c})