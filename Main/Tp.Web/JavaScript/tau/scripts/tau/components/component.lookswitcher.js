define(["jQuery","Underscore","tau/configurator","tau/components/component.creator","tau/ui/templates/ui.template.lookswitcher","tau/components/extensions/component.extension.base"],function(a,b,c,d,e,f){var g={create:function(b){var g=f.extend({"bus beforeInit":function(){var a=this,b=c.getGlobalSettingsService();b.getGlobalSettings({success:function(b){a.fire("dataBind",{loveNewLook:b.LoveNewLook})}})},execute:function(a,b){var d=c.getGlobalSettingsService(),e=this;d.sendRequest("GlobalSettingsService",a,null,function(a){d.resetSettings(),b&&b()},function(a){})},"bus feltInLove+afterRender":function(a){var b=this;this.execute("WantToSeeBeatyAlways",function(){b.fire("refresh")})},"bus hateIt+afterRender":function(a){var b=this;b.execute("HateNewLook",function(){document.location.href=c.getApplicationPath()+"/view.aspx?id="+b.config.context.entity.id})},"bus afterRender":function(b){var c=this,d=b.data.element,e=function(b,e){a(b,d).click(function(){a(this).unbind(),a(this).addClass("tau-disabled"),a(this).attr("disabled"),c.fire(e)})};e(".ui-lookswitcher-love-link","feltInLove"),e(".ui-lookswitcher-hate-link","hateIt")}}),h={extensions:[g],template:e};return d.create(h,b)}};return g})