define(["jQuery","Underscore","tau/configurator","tau/components/component.creator","tau/ui/templates/ui.template.lookswitcher","tau/components/extensions/component.extension.base"],function($,_,a,b,c,d){var e={create:function(e){var f=d.extend({"bus beforeInit":function(){var b=this,c=a.getGlobalSettingsService();c.getGlobalSettings({success:function(a){b.fire("dataBind",{loveNewLook:a.LoveNewLook})}})},execute:function(b,c){var d=a.getGlobalSettingsService(),e=this;d.sendRequest("GlobalSettingsService",b,null,function(a){d.resetSettings(),c&&c()},function(a){})},"bus feltInLove+afterRender":function(a){var b=this;this.execute("WantToSeeBeatyAlways",function(){b.fire("refresh")})},"bus hateIt+afterRender":function(b){var c=this;c.execute("HateNewLook",function(){document.location.href=a.getApplicationPath()+"/view.aspx?id="+c.config.context.entity.id})},"bus afterRender":function(a){var b=this,c=a.data.element,d=function(a,d){$(a,c).click(function(){$(this).unbind(),$(this).addClass("tau-disabled"),$(this).attr("disabled"),b.fire(d)})};d(".ui-lookswitcher-love-link","feltInLove"),d(".ui-lookswitcher-hate-link","hateIt")}}),g={extensions:[f],template:c};return b.create(g,e)}};return e})