define(["require","tau/core/extension.base","jsx!tau/components/dashboard.editor.widgets/views/dashboard.editor.widget.view","Underscore"],function(e){var t=e("tau/core/extension.base"),s=e("jsx!tau/components/dashboard.editor.widgets/views/dashboard.editor.widget.view"),d=e("Underscore");return t.extend({init:function(e){this._super(e);var t=e.context.configurator;this._dashboardModelRegistry=t.getDashboardModelRegistry(),this._registry=t.getDashboardWidgetTemplateRegistry(),this._registry.widgetTemplateAdded.add(this._onTemplateAdded,this)},_onTemplateAdded:function(){this.fire("props.ready",this._getBaseProps())},"bus boardSettings.ready":function(e,t){var i=t.boardSettings.settings.id,r=d.extend({selectListItem:this._addWidget.bind(this,i),emptyMessage:"No widgets found",searchPlaceholder:"Search widgets",ItemComponent:s,templateListClass:"tau-board-settings__template-list--dashboard"},this._getBaseProps());this.fire("props.ready",r)},_addWidget:function(e,t){this._dashboardModelRegistry.getDashboardModel(e).then(function(e){e.addWidgetFromTemplateAndMakeVisible({templateId:t.id})})},_getBaseProps:function(){return{items:this._registry.getLoadedWidgetTemplates()}},destroy:function(){this._registry.widgetTemplateAdded.remove(this),this._super()}})});