define(["require","Underscore"],function(n){var e=n("Underscore"),r=function(n){var r=e.isString(n.x)?[n.x]:n.x;return 1===r.length?r[0]:null},i=function(n){var r=e.isArray(n.guide)?n.guide:[n.guide],i=r[r.length-1];return i&&i.x||{}},t=function(n){var r=i(n);return!e.contains(["day","week"],r.tickPeriod)},o=function(n){return Boolean("bar"===n.type&&n.dimensions&&n.dimensions.color)},u=function(n){return!r(n)},s=function(n){var r=[o,u,t];return n.dimensions&&!e.some(r,function(e){return e(n)})};return{setCompactMode:function(n){return n.settings=n.settings||{},n.settings.specEngine="COMPACT",n},changeXScaleFromPeriodToTime:function(n){if(s(n)){var e=r(n),t=n.dimensions[e];t.scale="time",t.type="measure";var o=i(n);o.tickFormat="x-time-auto",o.tickPeriod=null}return n}}});