define(["require","jQuery","Underscore","tau/core/class"],function(e){var t=e("jQuery"),r=e("Underscore"),n=e("tau/core/class"),i=n.extend({init:function(e,t,r,n){this._chart=e,this._container=t,this._renderWithNewSettings=r,this._sizeUpdated=n},rerender:function(e){return this.destroy(),this._renderWithNewSettings(e).then(function(e){this._chart=e}.bind(this))},resize:function(e){setTimeout(function(){this._sizeUpdated(e),this._chart&&this._chart.resize(e)}.bind(this),0)},destroy:function(){this._chart&&this._chart.destroy()}});return n.extend({init:function(e){this._renderer=e},renderCustomReportAndGetState:function(e,n,s){var o=t.Deferred(),c=s.size,h=function(t){var n=r.extend({},s,{size:c});return this._renderer.renderCustomReport(e,t,n).then(r.property("chart"))}.bind(this),u=function(t){return new i(t,e[0],h,function(e){c=e})};return h(n).done(function(e){o.resolve(u(e))}).fail(function(){o.resolve(u(null))}),o.promise()}})});