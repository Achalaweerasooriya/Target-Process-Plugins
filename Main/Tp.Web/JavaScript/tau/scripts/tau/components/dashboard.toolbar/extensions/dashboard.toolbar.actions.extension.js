define(["require","Underscore","tau/components/extensions/component.extension.base","template!tau/components/dashboard.toolbar/templates/dashboard.toolbar.actions.menu.template","tau/services/boards/view.types"],function(e){var t=e("Underscore"),n=e("tau/components/extensions/component.extension.base"),o=e("template!tau/components/dashboard.toolbar/templates/dashboard.toolbar.actions.menu.template"),a=e("tau/services/boards/view.types");return n.extend({init:function(e){this._super(e);var t=e.context.configurator;this._dashboardModelRegistry=t.getDashboardModelRegistry()},"bus boardSettings.ready:last + afterRender":function(e,t,n){this._initActionsMenu(n,t)},_initActionsMenu:function(e,s){var i=e.element.find("[role=actions-button]"),r={target:i,cleanupOnHide:!0,className:"tau-board-actions-bubble",stackName:"actionsDashboard",showOnCreation:!0,zIndex:42,componentsConfig:{components:[{name:"dashboard-actions-bubble",layout:"selectable",model:e.data,extensions:[n.extend({"bus childComponentCreated":function(e,t){t.fire("boardSettings.ready",s)}})],children:t.compact([e.data.isEditable?{selector:".remove-dashboard-button",type:"board.remove",itemType:a.DASHBOARD}:!1]),type:"container",template:o}]},onShow:function(e){i.addClass("tau-checked"),e.on("click.settings",".tau-btn-settings",function(){i.tauBubble("hide"),s.boardSettings.set({set:{edit:!0}})})},onHide:function(e){e.off("click.settings",".tau-btn-settings"),i.removeClass("tau-checked")}};i.on("click",function(){this.fire("initBubble",r)}.bind(this))}})});