define(["Underscore","tau/service.container","tau/core/component-base","tau/models/application/model.application.main","tau/core/view-base","tau/ui/extensions/application.generic/ui.extension.application.generic.routing","tau/ui/extensions/application.generic/ui.extension.application.generic.controller","tau/ui/extensions/application.generic/ui.extension.application.generic.navigation","tau/ui/extensions/application.generic/ui.extension.application.generic.history","tau/ui/extensions/application.generic/ui.extension.application.generic.integration","tau/components/extensions/error/extension.errorBar","tau/ui/extensions/application.generic/ui.extension.application.generic.popup","tau/ui/templates/application/ui.template.application.generic"],function(_,ServiceContainer,Component,Model,ViewExtension,RouterExtension,ControllerExtension,NavigationExtension,HistoryExtension,IntegrationExtension,ErrorExtension,PopupExtension,Template){return{create:function(config){config=config||{onCreate:function(){}};var configurator=config.context.configurator||new ServiceContainer,component=new Component({name:config.name,queuedBus:!0,context:{configurator:configurator},template:Template}),extensions=[Model,ViewExtension,RouterExtension,ControllerExtension,NavigationExtension,HistoryExtension,IntegrationExtension,ErrorExtension],integrationOpt=config.integration||config.options&&config.options.integration||{};return integrationOpt.showInPopup===!0&&extensions.push(PopupExtension),extensions=extensions.concat(config.extensions||[]),_.forEach(extensions,function(extension){component.attach(extension,config)}),component.bus}}})