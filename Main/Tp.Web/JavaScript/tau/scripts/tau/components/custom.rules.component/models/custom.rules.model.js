define(["require","tau/core/class","Underscore","tau/store/header"],function(t){var e=t("tau/core/class"),s=t("Underscore"),u=t("tau/store/header");return e.extend({init:function(t){this._customRulesService=t,this._customRulesData={}},getData:function(){return this._customRulesData},getCustomRules:function(){return this._loadCustomRules().then(function(t){return t=u.formatObject(t),s.extend(this._customRulesData,t),this._customRulesData}.bind(this))},_loadCustomRules:function(){return this._customRulesService.getCustomRules()},toggleCustomRuleStatus:function(t){var e=!t.isEnabled,s={id:t.id,isEnabled:e};return taus.track("customRulesMVF",{ruleName:t.name,isEnabled:e}),this._customRulesService.updateCustomRule(s).then(function(t){t=u.formatObject(t).data;for(var e=0;e<this._customRulesData.data.length;e++){var s=this._customRulesData.data[e];if(s.id==t.id){this._customRulesData.data[e]=t;break}}}.bind(this))}})});