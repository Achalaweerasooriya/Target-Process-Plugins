define(["Underscore","jQuery","tau/components/board.new.list/extension.base.new.list","tau/slice/entity.new.list.factory","tau/components/board.new.list/new.list.quickAdd.component.builder","tau/components/board.new.list/new.list.context.menu.component.builder"],function(t,e,i,n,o,r){return i.extend({_defaultOnPage:20,_quickAddOptions:{positionConfig:{collision:"fit flip"}},init:function(t,e,i,n){this.eventAggregator=n;var s=new o(t.bus,t.context.configurator,n,this._quickAddOptions),a=new r(t);this._super(t,e,i,n,s,a),n.expansionStateChanged.add(this.fire.bind(this,"expansion.state.changed"))},"bus afterInit":function(){this.fire("eventAggregator.ready",this.eventAggregator)},"bus start.lifecycle":function(){this._skeletonView.treeViewCreated.add(function(t){this.fire("newListTreeView.ready",{skeletonView:this._skeletonView,treeView:t})}.bind(this))},"bus afterInit + start.lifecycle":function(t,e){this._initViewNewListSettings(e.config),this._initSliceFactory(e.config)},"bus afterRender":function(){this.fire("view.dom.ready",{})},_initViewNewListSettings:function(t){var e=this._createViewNewListSettings(t);this.fire("boardSettings.ready",{boardSettings:e})},_getEntityId:function(t){return t.entityIdProvider?t.entityIdProvider(t.context.entity):t.context.entity.id},_initSliceFactory:function(t){var e={prefix:t.treeViewEndPoint||"EntityTreeView",entityId:this._getEntityId(t)},i=new n(this._configurator.getSliceFactoryOptions(),e);this.fire("sliceFactory.ready",i)},_createViewNewListSettings:function(e){var i=e.context.entity,n=i.entityType.name.toLowerCase(),o=[n,i.id.toString(),e.name.toLowerCase()].join(""),r=t.extend({id:o,viewMode:"newlist",x:{types:[n]},cellPaging:{onPage:this._defaultOnPage}},e.definition);return this._configurator.getBoardSettingsFactory().createStaticSettings(r)},_getAppStateStore:function(){return this._configurator.getBoardSettingsFactory().createStaticSettings({acid:null})}})});