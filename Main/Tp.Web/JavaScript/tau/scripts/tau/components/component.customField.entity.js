define(["Underscore","tau/components/component.creator","tau/components/extensions/component.creator.extension","tau/models/model.customField","tau/ui/extensions/customField/ui.extension.customField.required","tau/ui/templates/customField/ui.template.customField.entity","tau/components/extensions/bubble/extension.bubble.creator.direct","tau/models/customField/model.customField.entity.editable","tau/ui/extensions/customField/ui.extension.customField.editable"],function(_,creator,CreatorExt,ModelType,RequireCustomField,template,Popup,Editable,ExtensionHighlight){return{create:function(config){var creatorConfig={template:template,extensions:[Editable,ModelType,RequireCustomField,Popup,ExtensionHighlight,CreatorExt]};config=config||{};var finderConfig={type:"finder",additionalExtensions:[Editable],fields:["id","name",{project:["id","name","abbreviation"]}],maxHeight:400};return config.customField&&config.customField.required===!0&&(finderConfig.resetDisabled=!0),_.extend(config,{popupEditorContainer:[{target:"tr",targetCssClass:"ui-customfield_editable_true",alignTo:".entity-custom-field-link",componentsConfig:{components:[finderConfig]},onShow:function(){config.context.configurator.getKeyBoardManager().pushHandler({})},onHide:function(){config.context.configurator.getKeyBoardManager().popHandler()}}]}),creator.create(creatorConfig,config)}}})