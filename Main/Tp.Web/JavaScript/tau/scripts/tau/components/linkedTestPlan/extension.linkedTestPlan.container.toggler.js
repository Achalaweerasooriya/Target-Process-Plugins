define(["require","./extension.linkedTestPlan.toggler.base","tau/components/linkedTestPlan/model.linkedTestPlan.provider"],function(e){var t=e("./extension.linkedTestPlan.toggler.base"),n=e("tau/components/linkedTestPlan/model.linkedTestPlan.provider");return t.extend({init:function(e,t){this._super(e,t),this._store=e.context.configurator.getStore(),this._listenLinkedTestPlanChanges(e.context.entity)},_resolveToggleValue:function(e,t){return n.getLinkedTestPlan(e).then(function(e){return Boolean(e)===t.visibleIfLinkedTestPlan}.bind(this))},_listenLinkedTestPlanChanges:function(e){this._store.on({eventName:"afterSave",type:e.entityType.name,filter:{id:e.id},hasChanges:["linkedTestPlan"],listener:this},this._toggle),this._store.on({eventName:"afterSave",type:"testPlan",filter:{linkedGeneral:{id:e.id}},hasChanges:["linkedGeneral"],listener:this},this._toggle)},destroy:function(){this._store.unbind(this),this._super()}})});