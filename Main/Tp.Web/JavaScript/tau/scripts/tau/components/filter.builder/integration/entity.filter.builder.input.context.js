define(["require","../models/filter.builder.data.context.base","Underscore","jQuery"],function(e){function i(e){return e?"("+e+")":""}function n(e){return e?"?"+e:""}var t=e("../models/filter.builder.data.context.base"),r=e("Underscore"),u=e("jQuery"),o=t.extend({init:function(e){this._super(),this._$element=u(e)},setNewValue:function(e){this._$element.prop("value",n(this._buildFilterString(e)))},_buildFilterString:function(e){return r.chain(e.items).map(r.composeForward(this._buildForField.bind(this),i)).compact().value().join(" and ")},_buildForField:function(e){var i=r.filter(e.items,function(e){return""!==e&&void 0!==e&&null!==e});return e.fieldDefinition.transformer.combine(e.fieldDefinition,i)},_buildForFieldFilter:function(e,i){var n=e.name;return n+" is "+i}});return o});