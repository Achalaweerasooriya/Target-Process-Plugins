define(["require","tau/core/extension.base","../models/filter.builder.model","jsx!../views/filter.builder.loading.wrapper","react"],function(e){var i=e("tau/core/extension.base"),t=e("../models/filter.builder.model"),r=e("jsx!../views/filter.builder.loading.wrapper"),n=e("react");return i.extend({init:function(e){this._super(e),this._modelDeferred=e.builderMetaInfo.getDefinitions().then(function(i){var r=new t(e.builderDataContext,i,e.chooseDefaultFields);return r.builderValueChanged.add(this._onBuilderValueChanged,this),r}.bind(this))},"bus afterInit":function(){this.fire("dataBind")},"bus afterRender":function(e,i){this._placeholder=i.element[0],this._view=n.render(n.createElement(r,this._createViewProps()),this._placeholder)},_createViewProps:function(){return{builderModelPromise:this._modelDeferred}},_onBuilderValueChanged:function(){this._view&&this._view.setProps(this._createViewProps())},_cleanUp:function(){this._modelDeferred.then(function(e){e.destroy()}),this._view&&n.unmountComponentAtNode(this._placeholder)},destroy:function(){this._cleanUp(),this._super()}})});