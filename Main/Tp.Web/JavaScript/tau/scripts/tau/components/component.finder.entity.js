define(["tau/components/component.creator","tau/models/finder.entity/model.entity.finder","tau/ui/extensions/finder.entity/ui.extension.finder.entity.list","tau/ui/extensions/finder.entity/ui.extension.finder.entity.filter","tau/ui/templates/finder.entity/ui.template.finder","tau/ui/templates/finder.entity/ui.template.finder.result-list","libs/jquery/jquery.placeholder","libs/jquery/jquery.tau.resetableInput","libs/jquery/jquery.ui"],function(creator,Model,ExtensionResult,ExtensionFilter,template,templateList){return $.widget("ui.menuEntity",$.ui.menu,{_create:function(){var self=this;this.element.addClass("ui-menu ui-widget ").attr({role:"list","aria-activedescendant":"ui-active-menuitem"}).click(function(event){if(!$(event.target).closest(".ui-menu-item").length)return;self.select(event)}),this.refresh()},refresh:function(){var self=this,items=this.element.children("li").addClass("ui-menu-item").attr("role","option");items.addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(event){self.activate(event,$(this))}).mouseleave(function(){self.deactivate()}),this._trigger("refresh")},move:function(direction,edge,event){if(!this.active){this.activate(event,this.element.children(edge));return}var next=this.active[direction+"All"](".ui-menu-item").eq(0);next.length?this.activate(event,next):this.activate(event,this.element.children(edge))},activate:function(event,item){this.deactivate();if(this.hasScroll()){var offset=item.offset().top-this.element.offset().top,scroll=this.element.scrollTop(),elementHeight=this.element.height();offset<0?this.element.scrollTop(scroll+offset):offset>=elementHeight&&this.element.scrollTop(scroll+offset-elementHeight+item.height())}this.active=item.eq(0).addClass("tau-result-list-row_hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",event,{item:item})},deactivate:function(){if(!this.active)return;this.active.removeClass("tau-result-list-row_hover").removeAttr("id"),this._trigger("blur"),this.active=null},hasScroll:function(){return this.element.height()<this.element[$.fn.prop?"prop":"attr"]("scrollHeight")}}),{create:function(config){var extensions=[Model,ExtensionResult,ExtensionFilter],creatorConfig={name:config.allData&&config.allData.name||"finder",extensions:extensions,template:template};return config.templateList=templateList,config["queue.bus"]=!0,creator.create(creatorConfig,config)}}})