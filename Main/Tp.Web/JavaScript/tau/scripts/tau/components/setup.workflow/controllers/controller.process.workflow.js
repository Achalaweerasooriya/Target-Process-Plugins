define(["require","Underscore","tau/core/class","jsx!../views/view.process.workflow","libs/react/react-ex"],function(t){"use strict";var e=t("Underscore"),s=t("tau/core/class"),i=t("jsx!../views/view.process.workflow"),n=t("libs/react/react-ex");return s.extend({init:function(t){this._model=t,this.rendered=e.Callbacks()},render:function(t){return this._container=t,this._view=n.renderComponent(i({entityType:this._model.getEntityType(),processId:this._model.getProcessId(),stateSettings:{get:this._model.getStateSettings.bind(this._model),save:this._model.saveStateSettings.bind(this._model),"delete":this._migrateAndDeleteState.bind(this)},renameStateAction:this._model.renameState.bind(this._model)}),t),this._model.statesChanged.add(this._updateStates.bind(this)),this._model.updateProgress.add(this._updateProgress.bind(this)),this._model.refresh()},_migrateAndDeleteState:function(t,e){this._model.migrateEntityState(t,e).then(function(e){e.deleteEntityState(t)}.bind(this,this._model))},_updateStates:function(t){this._view&&this._view.setProps({states:t.states,entityTerms:t.entityTerms})},_updateProgress:function(t){this._view&&this._view.setProps({updatingStateId:t.updatingStateId})},destroy:function(){n.unmountComponentAtNode(this._container),this._model=null,this._view=null}})});