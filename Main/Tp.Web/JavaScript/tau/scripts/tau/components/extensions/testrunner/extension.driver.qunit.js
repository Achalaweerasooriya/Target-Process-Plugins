define(["jQuery","tau/components/extensions/component.extension.base"],function($,ExtensionBase){return ExtensionBase.extend({"bus beforeInit":function(e){var self=this;require(["libs.tests/qunit","libs.tests/tests.result","libs.tests/jquery.simulate","libs.tests/jsmock","libs.tests/jqMock"],function(){self.bus.fire("dataBind",{})})},"bus error.global":function(evt){var ex=evt.data;module("global failure"),test("global failure",function(){ok(!1,ex.message)})},"bus afterInit+afterRender":function(evt){function beforeRun(){var failedonly=QUnit.urlParams["failedonly"]=="true",cardview=QUnit.urlParams["cardview"]=="true"&&!QUnit.urlParams.filter;$container=$el.find("#qunit-tests"),$container.hide(),failedonly&&$container.addClass("failedonly"),cardview&&$container.addClass("cardview")}function afterRun(){$container=$el.find("#qunit-tests"),$container.show()}var makeSame=function(a,b){var ac=_.extend({},a);return _.each(_.keys(a),function(key){b.hasOwnProperty(key)||delete ac[key]}),ac};window.included=QUnit.included=function(actual,expected,message){var same=makeSame(_.extend({},actual),expected),isEquiv=QUnit.equiv(same,expected);QUnit.push(isEquiv,same,expected,message)};var testsUnit=_.compact(evt.afterInit.data.config.files);if(!testsUnit||testsUnit.length==0)return;var $el=evt.afterRender.data.element,$header=$el.find("#qunit-header"),extendHeader=function(){var failedonly=QUnit.urlParams["failedonly"]=="true",cardview=QUnit.urlParams["cardview"]=="true"&&!QUnit.urlParams.filter,$failedFlag=$("<label><input type='checkbox' name='failedonly'>failed only</label>"),$failedCheckbox=$failedFlag.find("input[name=failedonly]");$failedCheckbox.attr("checked",failedonly),$failedCheckbox.bind("click",function(){QUnit.url({failedonly:!failedonly})});var $cardviewFlag=$("<label><input type='checkbox' name='cardview'>card view</label>"),$cardviewCheckbox=$cardviewFlag.find("input[name=cardview]");$cardviewCheckbox.attr("checked",cardview),$cardviewCheckbox.bind("click",function(){QUnit.url({cardview:!cardview})}),$header.append($failedFlag),$header.append($cardviewFlag),jQuery.fx.off=!0},startCallback=QUnit.start;QUnit.start=function(){startCallback.call(QUnit),extendHeader()},require(testsUnit,function(){beforeRun();var i=-1,tests=arguments,len;for(i=0,len=tests.length;i<len;i++)tests[i]&&tests[i].run();afterRun()})},"bus dom.appended":function(){$.browser.msie&&QUnit.load()}})})