define(["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,t,i){return i.extend({category:"edit",normalizeEffort:function(e){return Math.abs(Math.round(100*parseFloat(e))/100)||0},"bus permissionsReady+afterRender+dataBind":function(e,t,i,n){if(this.permissions=t,t.editable){var s=this;this.$el=i.element,this.$widget=this.$el.find(".property-text"),this.$widget.editableText({mask:/^\d*\.?\d*$/,restoreText:!0,onSave:function(e){var t=s.normalizeEffort(n.text),i=s.normalizeEffort(e);if(t===i)return this.restoreInitialText(),!1;var o={};o[s.config.propertyName]=i;var r={$include:["id"],id:s.config.context.entity.id,$set:o};s.bus.fire("save",r)},onEditStart:function(){this.$element.data("points",this.$element.find("span").detach())},onEditEnd:function(){this.$element.append(this.$element.data("points"))}})}},showEditor:function(){this.$widget.editableText("activate")},"bus edit":function(){this.permissions.editable&&this.showEditor()},onClickHandler:function(){},removeHandlers:function(){},removeWidget:function(){this.$widget&&this.$widget.editableText("instance")&&this.$widget.editableText("destroy")},destroy:function(){this.removeHandlers(),this.removeWidget(),this._super()}})});