define(["Underscore","tau/core/event.emitter"],function(_,a){return a.extend({init:function(a){this._super(a),this.config=a},"bus application.navigate.entity":function(a){this._initGlobalEvents()},_initGlobalEvents:function(){var a=this,b=function(b){var c=b.data,d={project:{id:c.project.id}},e={id:c.entity.id,changes:d,cmd:{config:{$set:d}}};a.bus.fire("application.reload",e)},c=function(b){var c=b.data,d={},e={id:c.bugId,changes:d,cmd:{config:{$set:d}}};a.fire("application.reload",e)};a.bus.getGlobalBus().on("bugWasMarkedAsDuplicate",c,a),a.bus.getGlobalBus().on("entityWasMovedToProject",b,a),a.bus.getGlobalBus().on("processChanged",b,a);var d=["general","assignment","roleEffort"],e=a.config.context.configurator.getStore(),f=function(b){a.fire("application.reload",b.data)};_.each(d,function(b){e.on({type:b,eventName:"afterSave",listener:a},f),e.on({type:b,eventName:"afterRemove",listener:a},f)})},destroy:function(){this._super(),this.config.context.configurator.getStore().unbind(this),delete this.config}})})