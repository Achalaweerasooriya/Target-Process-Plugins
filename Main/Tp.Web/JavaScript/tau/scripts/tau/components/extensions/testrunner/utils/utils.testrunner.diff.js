define([],function(){var t=Object.prototype.hasOwnProperty,r=function(){function r(r,l){var o,n={},e={};for(o=0;o<l.length;o++)null==n[l[o]]&&(n[l[o]]={rows:[],o:null}),n[l[o]].rows.push(o);for(o=0;o<r.length;o++)null==e[r[o]]&&(e[r[o]]={rows:[],n:null}),e[r[o]].rows.push(o);for(o in n)t.call(n,o)&&1==n[o].rows.length&&"undefined"!=typeof e[o]&&1==e[o].rows.length&&(l[n[o].rows[0]]={text:l[n[o].rows[0]],row:e[o].rows[0]},r[e[o].rows[0]]={text:r[e[o].rows[0]],row:n[o].rows[0]});for(o=0;o<l.length-1;o++)null!=l[o].text&&null==l[o+1].text&&l[o].row+1<r.length&&null==r[l[o].row+1].text&&l[o+1]==r[l[o].row+1]&&(l[o+1]={text:l[o+1],row:l[o].row+1},r[l[o].row+1]={text:r[l[o].row+1],row:o+1});for(o=l.length-1;o>0;o--)null!=l[o].text&&null==l[o-1].text&&l[o].row>0&&null==r[l[o].row-1].text&&l[o-1]==r[l[o].row-1]&&(l[o-1]={text:l[o-1],row:l[o].row-1},r[l[o].row-1]={text:r[l[o].row-1],row:o-1});return{o:r,n:l}}return function(t,l){t=t.replace(/\s+$/,""),l=l.replace(/\s+$/,"");var o=r(""==t?[]:t.split(/\s+/),""==l?[]:l.split(/\s+/)),n="",e=t.match(/\s+/g);null==e?e=[" "]:e.push(" ");var w=l.match(/\s+/g);null==w?w=[" "]:w.push(" ");var s;if(0==o.n.length)for(s=0;s<o.o.length;s++)n+="<del>"+o.o[s]+e[s]+"</del>";else{if(null==o.n[0].text)for(l=0;l<o.o.length&&null==o.o[l].text;l++)n+="<del>"+o.o[l]+e[l]+"</del>";for(s=0;s<o.n.length;s++)if(null==o.n[s].text)n+="<ins>"+o.n[s]+w[s]+"</ins>";else{var u="";for(l=o.n[s].row+1;l<o.o.length&&null==o.o[l].text;l++)u+="<del>"+o.o[l]+e[l]+"</del>";n+=" "+o.n[s].text+w[s]+u}}return n}}();return r});