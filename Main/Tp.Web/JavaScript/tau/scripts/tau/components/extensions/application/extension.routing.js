define(["Underscore","jQuery","tau/core/class","tau/core/event","tau/core/types","tau/configurator"],function(a,b,c,d,e,f){return c.extend({init:function(b){this.config=b,this.bus=b.bus;var c=this.routing=f.getRouting(),e=c.getUrl().source;this.defaultHash=e!=="#"?e:"#__"+a.uniqueId(),d.subscribeOn(this)},"bus registerRoute":function(a){var b=a.data;this.routing.register(b.pattern,b.callback)},"bus registerRouteNotFound":function(a){var b=a.data;this.routing.register404(b.callback)},"bus afterInit":function(a){this.bus.fire("routing.registered",{})},"bus controller.ready":function(){this.routing.start();var a=f.getRouting().getUrl();this.config.startUrl?a.url===this.config.startUrl?this.routing.execute(this.config.startUrl):(this.routing.execute(this.config.startUrl),f.getRouting().setInternalUrl(this.config.startUrl)):this.config.executeOnStart!==!1&&this.routing.execute(a.source)},"bus destroy":function(){this.bus.getGlobalBus().removeAllListeners(this),this.routing.reset(),this.routing.stop(),this.routing.setUrl(this.defaultHash),this.routing.removeAllListeners(this)}})})