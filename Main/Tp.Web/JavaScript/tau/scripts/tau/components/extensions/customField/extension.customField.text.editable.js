define(["require","tau/components/extensions/component.extension.base","tau/ui/behaviour/common/ui.behaviour.editableText","tau/ui/behaviour/customField/ui.behaviour.customField.row"],function(e){var i=e("tau/components/extensions/component.extension.base");return e("tau/ui/behaviour/common/ui.behaviour.editableText"),e("tau/ui/behaviour/customField/ui.behaviour.customField.row"),i.extend({category:"edit","bus permissionsReady + afterRender":function(e,i,t){if(i.editable){var a=t.element,n=a.find(".ui-customfield__value");this.$widget=n,n.editableText(this._getWidgetConfig(t.data)),this._bindValueChanging(a,n),a.addClass("ui-customfield_editable_true")}},_bindValueChanging:function(e,i){e.behaviourCustomFieldRow({onActivate:function(){i.editableText("activate"),i.focus()}})},_getWidgetConfig:function(e){return{restoreText:!1,onSave:function(i){this.bus.fire("save",{customFields:[{name:e.name,type:e.type,value:i}]})}.bind(this)}},"bus validate":function(){this.$widget.editableText("resetValidationErrors")},"bus afterValidate":function(e){this.$widget.editableText("setValue",e.data.validation.instance.value)},"bus validationFailed":function(e){this.$widget.editableText("setValidationErrors",e.data.validation.errors[0].description)}})});