define(["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/behaviour/common/ui.behaviour.richeditor"],function(e,t,i){return i.extend({category:"edit",resetLifecycle:!0,"bus beforeInit:last + dataBind:last + submitted":function(e,t,i,n){var o=t.config.context.entity;t.config.context.configurator.getStore().evictProperties(o.id,o.entityType.name,["customFields"]);var a={customFields:[{name:i.name,type:i.type,value:n}]};this.fire("save",a),this.fire("allow.close.editor")},"bus beforeInit + permissionsReady + dataBind + afterRender":function(t,i,n,o,a){if(n.editable){var r=i.config.context.configurator,c=a.element,s=c.find(".i-role-property");s.attr("data-placeholder","Double-click to add content..."),this.$widget=s;var d=e.bind(this.fire,this),u="richeditor";s[u]({ckPath:r.getCkPath(),text:o.value,settings:{toolbar:"Full",extraPlugins:"charcount",charcount_limit:4e3,height:"auto",maxHeight:8e3},onCreate:function(){this.active=!0,d("$editor.ready",s)},onHide:function(){this.active=!1},onCancel:function(){s[u]("hide"),d("allow.close.editor")},onSave:function(e){d("submitted",e)}})}}})});