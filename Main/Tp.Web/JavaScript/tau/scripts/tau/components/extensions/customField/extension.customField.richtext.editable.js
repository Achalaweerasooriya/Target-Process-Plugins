define(["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/behaviour/common/ui.behaviour.richeditor"],function(_,$,a){return a.extend({category:"edit","bus permissionsReady+afterRender":function(a){var b=this,c=a.afterRender.data.data,d=a.permissionsReady.data;if(d.editable){var e=a.afterRender.data.element,f=e.find(".ui-customfield__value");b.$widget=f,f.richeditor({text:e.tmplItem().data.value,placeholder:{text:"Double-click to add content...",className:"ui-description__inner_empty_true"},settings:{fitImgWidth:!1,toolbar:[["Cut","Copy","Paste","PasteText","PasteFromWord","-","Bold","Italic","Underline","Strike","-","Subscript","Superscript"],["NumberedList","BulletedList","-","Outdent","Indent"],["JustifyLeft","JustifyCenter","JustifyRight"],["Link","Unlink","Anchor"],["Image","Table","HorizontalRule","SpecialChar"],"/",["Source","Format","Font","FontSize"],["Replace","-","RemoveFormat","TextColor","BGColor","-","Templates"],["Maximize"]],extraPlugins:"autogrow,charcount",charcount_limit:4e3},onSave:function(a){b.bus.fire("save",{customFields:[{name:c.name,type:c.type,value:a}]})}})}},"bus validate":function(){this.$widget.richeditor("resetValidationErrors")},"bus afterValidate":function(a){this.$widget.richeditor("setValue",a.data.validation.instance.value)},"bus validationFailed":function(a){this.$widget.richeditor("setValidationErrors",a.data.validation.errors[0].description)}})})