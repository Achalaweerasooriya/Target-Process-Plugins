define(["Underscore","tau/core/extension.base"],function(t,n){return n.extend({init:function(t){this.store=t.store,this.entity=t.context.entity,this._runnerModel=t.context.registry.runnerModel,this._super(t)},"bus afterRender":function(t){var n=this.store,e=this.entity.id,i=this.entity.entityType.name;this.$nextCaseButton=t.data.element.find(".i-role-next-tcr-btn"),this._bindHandlerForRunNextTCRButton(e),this._initRunNextTCRButtonState(n,e,i)},_bindHandlerForRunNextTCRButton:function(t){this.$nextCaseButton.on("click",function(){this._runnerModel.runNext(t)}.bind(this))},_initRunNextTCRButtonState:function(t,n,e){t.get(e,{id:n,fields:[{testplanrun:[{entitystate:["isFinal"]}]}]}).done({success:function(t){var n=t[0].data;n.testplanrun.entitystate.isFinal&&this.$nextCaseButton.css("display","none")},scope:this})}})});