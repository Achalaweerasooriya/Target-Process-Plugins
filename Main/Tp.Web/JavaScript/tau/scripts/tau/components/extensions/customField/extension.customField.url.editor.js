define(["Underscore","jQuery","tau/core/extension.base","tau/ui/behaviour/customField/ui.behaviour.customField.url.editor"],function(_,$,ExtensionBase){return ExtensionBase.extend({category:"edit","bus dataBind+afterRender":function(evt){var self=this,customField=evt.dataBind.data,$el=evt.afterRender.data.element;this.$widget=$el,$el.find("[name=url]").val(customField.value.url),$el.find("[name=label]").val(customField.value.label),$el.behaviourUrlEditor({onSave:function(value){self.bus.fire("save",{customFields:[{name:customField.name,type:"URL",value:value}]})}}),$el.find(":button:eq(1)").click(function(){self.bus.fire("close")})},"bus validate":function(){this.$widget.behaviourUrlEditor("resetValidationErrors")},"bus afterValidate":function(evt){this.$widget.behaviourUrlEditor("setValue",evt.data.validation.instance.value)},"bus validationFailed":function(evt){var errs={};_.each(evt.data.validation.errors,function(item){_.each(["url","label"],function(field){_.indexOf(item.path,field)!==-1&&(errs[field]=item.description)})}),this.$widget.behaviourUrlEditor("setValidationErrors",errs)}})})