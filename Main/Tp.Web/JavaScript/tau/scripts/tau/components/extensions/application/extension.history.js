define(["Underscore","jQuery","tau/core/class","tau/core/event","tau/store/types","tau/configurator"],function(_,$,a,b,c,d){return a.extend({init:function(a){this.config=a,this.bus=a.bus,this.globalBus=this.bus.getGlobalBus(),d.getWindow().document&&(this.defaultTitle=d.getWindow().document.title),b.subscribeOn(this);var c=function(a){var b=d.getHistory().getCurrent();b&&b.title&&(d.getWindow().document.title=b.title)};this._currentHandler=_.bind(c,this),d.getHistory().on("setCurrent",this._currentHandler,this)},"bus controller.preExecute":function(a){d.getHistory().process()},"bus controller.postExecute":function(a){},clearCurrent:function(){d.getHistory().current=null},"bus destroy":function(){d.getWindow().document&&(d.getWindow().document.title=this.defaultTitle),this.clearCurrent(),d.getHistory().stack=[],d.getHistory().removeAllListeners(this)}})})