define(["tau/components/extensions/component.extension.base"],function(ExtensionBase){return ExtensionBase.extend({category:"edit","bus prepareChanges":function(evt){this.bus.fire("markElementToBeUpdated",{element:this.element})},"bus applyChanges":function(evt){var self=this;this.bus.on("afterRender",function(e){e.removeListener(),self.bus.fire("updateElement",{element:self.element})}),this.bus.fire("refresh")},"bus ownerChanged":function(){this.fire("refresh")},"bus beforeChangeOwner":function(){this.fire("markElementToBeUpdated",{element:this.element})},"bus permissionsReady+afterRender+dataBind":function(eventData){var self=this,$element=this.element=eventData.afterRender.data.element,permissions=eventData.permissionsReady.data,data=eventData.dataBind.data;if(data.nextStates.length>0&&permissions.editable){var componentsConfig={components:[{type:"entityStateList",data:data}],context:self.config.context},bubbleConfig={target:$element,componentsConfig:componentsConfig,alignTo:$element.find(".attr-name")};this.fire("initBubble",bubbleConfig)}this.bus.on("edit",function(){this.fire("toggleBubble")},this)}})})