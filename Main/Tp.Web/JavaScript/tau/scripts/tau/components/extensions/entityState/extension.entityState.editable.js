define(["tau/components/extensions/component.extension.base"],function(e){return e.extend({category:"edit","bus prepareChanges":function(){this.bus.fire("markElementToBeUpdated",{element:this.element})},"bus applyChanges":function(){var e=this;this.bus.on("afterRender",function(t){t.removeListener(),e.bus.fire("updateElement",{element:e.element})}),this.bus.fire("refresh")},"bus ownerChanged":function(){this.fire("refresh")},"bus beforeChangeOwner":function(){this.fire("markElementToBeUpdated",{element:this.element})},"bus permissionsReady+afterRender+dataBind":function(e){var t=this,n=this.element=e.afterRender.data.element,i=e.permissionsReady.data,s=e.dataBind.data;if(s.nextStates.length>0&&i.editable){var a={components:[{type:"choice.entityState",data:s}],context:t.config.context},r={target:n,componentsConfig:a,alignTo:n.find(".attr-name")};this.fire("initBubble",r)}this.bus.on("edit",function(){this.fire("toggleBubble")},this)}})});