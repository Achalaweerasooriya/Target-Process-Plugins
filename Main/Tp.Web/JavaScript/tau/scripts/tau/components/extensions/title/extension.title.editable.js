define(["tau/components/extensions/component.extension.base","tau/ui/behaviour/common/ui.behaviour.editableText"],function(ExtensionBase){return ExtensionBase.extend({category:"edit","bus changeName":function(evt){var name=evt.data||"";this.fire("save",{name:name})},"bus permissionsReady+afterRender":function(eventData){var self=this,permissions=eventData.permissionsReady.data;if(permissions.editable){var $titleContainer=eventData.afterRender.data.element,$entityTitle=$titleContainer.find(".entity-title");this.$widget=$entityTitle,$entityTitle.editableText({restoreText:!0,onSave:function(text){self.fire("changeName",text)},onEditStart:function(){self._$titleInfo=$entityTitle.find(".title-info").detach()},onEditEnd:function(){self._$titleInfo.appendTo($entityTitle)}})}},"bus validate":function(){if(!this.$widget)return;this.$widget.editableText("resetValidationErrors")},"bus afterValidate":function(evt){if(!this.$widget)return;this.$widget.editableText("setValue",evt.data.validation.instance.name)},"bus validationFailed":function(evt){if(!this.$widget)return;this.$widget.editableText("setValidationErrors",evt.data.validation.errors[0].description)}})})