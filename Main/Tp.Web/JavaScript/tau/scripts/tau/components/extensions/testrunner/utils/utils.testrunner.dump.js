define([],function(){function getText(elems){var ret="",elem;for(var i=0;elems[i];i++)elem=elems[i],elem.nodeType===3||elem.nodeType===4?ret+=elem.nodeValue:elem.nodeType!==8&&(ret+=getText(elem.childNodes));return ret}function inArray(elem,array){if(array.indexOf)return array.indexOf(elem);for(var i=0,length=array.length;i<length;i++)if(array[i]===elem)return i;return-1}var toString=Object.prototype.toString,hasOwn=Object.prototype.hasOwnProperty,is=function(type,obj){return objectType(obj)==type},objectType=function(obj){if(typeof obj=="undefined")return"undefined";if(obj===null)return"null";var type=toString.call(obj).match(/^\[object\s(.*)\]$/)[1]||"";switch(type){case"Number":return isNaN(obj)?"nan":"number";case"String":case"Boolean":case"Array":case"Date":case"RegExp":case"Function":return type.toLowerCase()}return typeof obj=="object"?"object":undefined},jsDump=function(){function quote(str){return'"'+str.toString().replace(/"/g,'\\"')+'"'}function literal(o){return o+""}function join(pre,arr,post){var s=jsDump.separator(),base=jsDump.indent(),inner=jsDump.indent(1);return arr.join&&(arr=arr.join(","+s+inner)),arr?[pre,inner+arr,base+post].join(s):pre+post}function array(arr,stack){var i=arr.length,ret=Array(i);this.up();while(i--)ret[i]=this.parse(arr[i],undefined,stack);return this.down(),join("[",ret,"]")}var reName=/^function (\w+)/,jsDump={parse:function(obj,type,stack){stack=stack||[];var parser=this.parsers[type||this.typeOf(obj)];type=typeof parser;var inStack=inArray(obj,stack);if(inStack!=-1)return"recursion("+(inStack-stack.length)+")";if(type=="function"){stack.push(obj);var res=parser.call(this,obj,stack);return stack.pop(),res}return type=="string"?parser:this.parsers.error},typeOf:function(obj){var type;return obj===null?type="null":typeof obj=="undefined"?type="undefined":is("RegExp",obj)?type="regexp":is("Date",obj)?type="date":is("Function",obj)?type="function":typeof obj.setInterval!==undefined&&typeof obj.document!="undefined"&&typeof obj.nodeType=="undefined"?type="window":obj.nodeType===9?type="document":obj.nodeType?type="node":toString.call(obj)==="[object Array]"||typeof obj.length=="number"&&typeof obj.item!="undefined"&&(obj.length?obj.item(0)===obj[0]:obj.item(0)===null&&typeof obj[0]=="undefined")?type="array":type=typeof obj,type},separator:function(){return this.multiline?this.HTML?"<br />":"\n":this.HTML?"&nbsp;":" "},indent:function(extra){if(!this.multiline)return"";var chr=this.indentChar;return this.HTML&&(chr=chr.replace(/\t/g,"   ").replace(/ /g,"&nbsp;")),Array(this._depth_+(extra||0)).join(chr)},up:function(a){this._depth_+=a||1},down:function(a){this._depth_-=a||1},setParser:function(name,parser){this.parsers[name]=parser},quote:quote,literal:literal,join:join,_depth_:1,parsers:{window:"[Window]",document:"[Document]",error:"[ERROR]",unknown:"[Unknown]","null":"null","undefined":"undefined","function":function(fn){var ret="function",name="name"in fn?fn.name:(reName.exec(fn)||[])[1];return name&&(ret+=" "+name),ret+="(",ret=[ret,jsDump.parse(fn,"functionArgs"),"){"].join(""),join(ret,jsDump.parse(fn,"functionCode"),"}")},array:array,nodelist:array,arguments:array,object:function(map,stack){var ret=[];jsDump.up();for(var key in map){var val=map[key];ret.push(jsDump.parse(key,"key")+": "+jsDump.parse(val,undefined,stack))}return jsDump.down(),join("{",ret,"}")},node:function(node){var open=jsDump.HTML?"&lt;":"<",close=jsDump.HTML?"&gt;":">",tag=node.nodeName.toLowerCase(),ret=open+tag;for(var a in jsDump.DOMAttrs){var val=node[jsDump.DOMAttrs[a]];val&&(ret+=" "+a+"="+jsDump.parse(val,"attribute"))}return ret+close+open+"/"+tag+close},functionArgs:function(fn){var l=fn.length;if(!l)return"";var args=Array(l);while(l--)args[l]=String.fromCharCode(97+l);return" "+args.join(", ")+" "},key:quote,functionCode:"[code]",attribute:quote,string:quote,date:quote,regexp:literal,number:literal,"boolean":literal},DOMAttrs:{id:"id",name:"name","class":"className"},HTML:!1,indentChar:"  ",multiline:!0};return jsDump}();return jsDump})