define(["Underscore","jQuery","tau/components/extensions/bubble/extension.bubble.creator"],function(e,t,n){return n.extend({category:"edit","bus afterInit":function(){this.onEditActivated()},"bus afterRender + applyPopups":function(n,a,i){var o=a.element,s=this;e.forEach(i,function(n){var a=o.find(n.target),i=o.find(n.alignTo),r=a.length>1;a.each(function(a){var o=t(this);o.addClass("tau-bubble-target");var l=e.deepClone(n);l.targetCssClass&&o.addClass(l.targetCssClass),l.target=o,l.alignTo=o.find(l.alignTo),l.alignTo=l.alignTo.length?l.alignTo:i.eq(a),l.componentsConfig.components[0].data=e.deepClone(o.tmplItem().data),r&&(l.cleanupOnHide=!0),l.stackName=n.stackName,s.fire("initBubble",l)})})},onEditActivated:function(){this.fire("applyPopups",this.config.popupEditorContainer)}})});