define(["Underscore","tau/core/event.emitter","tau/core/tau"],function(_,a,b){return a.extend({init:function(a){this._super(a),this.config=a},parseQueryParams:function(){var a=b.getValueFromQueryString("type").split("."),c=/\/(\w+?).aspx$/.exec(window.location.pathname);return{id:b.getValueFromQueryString("id"),entity:a[a.length-1],type:a[a.length-1],action:c&&c.length?c[1]:null}},"bus routing.registered":function(a){var b=this,c=this.parseQueryParams(),d=_.bind(this.execute,this);this.fire("registerRoute",{pattern:"board/{id}",callback:function(a){d("board",a)}}),this.fire("registerRoute",{pattern:"",callback:function(a){d("entity",c)}}),this.fire("registerRoute",{pattern:"{entity}/{id}",callback:function(a){_.defaults(a,{action:"show"}),d("entity",a)}}),this.fire("registerRoute",{pattern:"{entity}/{id}/{action}",callback:function(a){d("entity",a)}}),this.fire("registerRouteNotFound",{callback:function(a){b.fire("error",{message:"URL is not found"})}}),this.fire("dataBind",{})},execute:function(a,b){this.fire("application.navigate."+a,b)},"bus afterRender":function(a){this.fire("controller.ready")}})})