define(["jQuery","Underscore","tau/components/extensions/component.extension.base","libs.tests/nodeunit/nodeunit","libs/underscore/underscore.string","libs/parseUri","tau/configurator","tau/utils/utils.storage"],function($,_,a,b,c,d,e,f){return a.extend({"bus afterInit":function(a){$.fx.off=!0;var c=_.compact(a.data.config.files),g=d(document.location.href).queryKey;_.forEach(g,function(a,b){g[b]=decodeURIComponent(a)});var h={file:null,filter:null,data:"local",view:"list",shuffle:!1,execution:"serial"};g.apply?(_.defaults(g,h),delete g.apply,f.set("testrunner.nodeunit",g)):g.reset?(delete g.reset,g=h,f.set("testrunner.nodeunit",g)):g.reset_filters&&(delete g.reset_filters,g.file="",g.filter="",f.set("testrunner.nodeunit",g)),g=_.defaults(g,f.get("testrunner.nodeunit")||h),e.setConfig("real",g.data=="remote"),g.bus=this.bus,g.file&&(c=_.filter(c,function(a){return a.search(g.file)==0}));var i=this;require(c,function(){var a=_.compact(_.toArray(arguments));_.forEach(a,function(module,a){c[a]?module.file=c[a]:module.file="",module.name||(module.name=_.camelCase(module.file)),module.id="module_"+_.uniqueId()});if(g.filter){var d=[];d=_.filter(a,function(module){return module.name.search(g.filter)==0}),d.length==0&&(d=_.filter(a,function(module){return g.filter.search(module.name)==0})),a=d}i.fire("dataBind",{modules:a,options:g,useragent:navigator.userAgent}),b.run(a,g)})}})})