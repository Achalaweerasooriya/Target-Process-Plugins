define(["Underscore","tau/components/extensions/component.extension.base"],function(_,a){var b=a.extend({getDependencies:function(a){var b=[];return _(a).each(function(a){if(a.path)b.push(a.path);else{if(!a.type)throw"Configuration error: type or path is missing";var c="tau/components/component."+a.type;b.push(c)}}),b},childrenLoadedCallback:function(a,b){var c=this,d=[];_(a).each(function(a){a.name||(a.name="",a.type&&(a.name=a.type),a.id&&(a.name+=":"+a.id));var b=a.component.create(a);c.fire("componentCreated",{component:b}),d.push({config:a,component:b})}),c.fire("componentsCreated",d,b)},createDependenciesLoadedCallback:function(a,b){var c=this,d=a.components,e=a.context;return function(){var a=arguments;_(d).each(function(b,c){b.component=a[c],b.context=e}),c.childrenLoadedCallback(d,b)}},"bus createComponents":function(a){var b=a.data,c=a.caller,d=b.components;d=b.components=_.isArray(d)?d:[d];var e=this.getDependencies(d);require(e,this.createDependenciesLoadedCallback(b,c))}});return b})