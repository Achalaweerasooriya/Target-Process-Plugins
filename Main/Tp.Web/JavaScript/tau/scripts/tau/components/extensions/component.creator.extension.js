define(["Underscore","tau/components/extensions/component.extension.base"],function(_,ExtensionBase){var Creator=ExtensionBase.extend({getDependencies:function(children){var dependencies=[];return _(children).each(function(config){if(config.path)dependencies.push(config.path);else{if(!config.type)throw"Configuration error: type or path is missing";var path="tau/components/component."+config.type;dependencies.push(path)}}),dependencies},childrenLoadedCallback:function(childrenConfigs,listenerData){var self=this,result=[];_(childrenConfigs).each(function(config){config.name||(config.name="",config.type&&(config.name=config.type),config.id&&(config.name+=":"+config.id));var component;try{var component=config.component.create(config);self.fire("componentCreated",{component:component}),result.push({config:config,component:component})}catch(e){console.error(e)}}),self.fire("componentsCreated",result,listenerData)},createDependenciesLoadedCallback:function(data,listenerData){var self=this,childrenConfigs=data.components,parentContext=data.context;return function(){var components=arguments;_(childrenConfigs).each(function(config,index){config.component=components[index],config.context=parentContext}),self.childrenLoadedCallback(childrenConfigs,listenerData)}},"bus createComponents":function(evtArgs){var config=evtArgs.data,listenerData=evtArgs.caller,components=config.components;components=config.components=_.isArray(components)?components:[components];var dependencies=this.getDependencies(components);require(dependencies,this.createDependenciesLoadedCallback(config,listenerData))}});return Creator})