define(["Underscore","jQuery","tau/core/extension.base","tau/configurator"],function(_,$,Class,configurator){return Class.extend({init:function(config){this.config=config,this.config.integration=this.config.integration||{},this.bus=config.bus,this.globalBus=this.bus.getGlobalBus(),this.criticalChanged=!1,this.window=configurator.getWindow(),this.redirect=configurator.getRedirect()},"bus afterRender":function(){$("body").delegate("a[href=#]","click",function(e){e.preventDefault()});var reloadCallback=this.config.integration.reloadCallback,isPopup=!!reloadCallback;isPopup?$("html").addClass("tau-html_integration_popup"):$("html").addClass("tau-html_integration_main")},"bus initProgress":function(e){this.config.integration.progress&&this.config.integration.progress.show("Reloading...")},"bus application.error":function(e){this.config.integration.progress&&this.config.integration.progress.hide()},"globalBus showProgress":function(e){this.config.integration.progress&&this.config.integration.progress.show(e.data.text)},"globalBus hideProgress":function(e){this.config.integration.progress&&this.config.integration.progress.hide()},"bus destroy":function(){configurator.getGlobalBus().removeAllListeners(this),this.window._criticalTauChanges&&(this.bus.fire("initProgress"),this.redirect.reload()),$("body .jquery-notify-bar").remove()},"bus integration.react":function(e){var reloadCallback=this.config.integration.reloadCallback;if(!!reloadCallback==0)return;reloadCallback(e)}})})