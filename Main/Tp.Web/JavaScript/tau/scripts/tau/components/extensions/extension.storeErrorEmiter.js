define(["Underscore","tau/components/extensions/component.extension.base"],function(_,a){return a.extend({"bus beforeInit":function(a){this._super(a);var b=this.config.store,c=this;b.unbind(this),b.on({eventName:"failure",listener:c},function(){c.onFailure.apply(c,arguments)})},onFailure:function(a){var b="Looks like application is not available. Please check your connection or server availability";if(a.data&&a.data.data){a.data.data.Message&&(b=a.data.data.Message);var c=a.data.data.response;if(c){c.Message&&(b=c.Message);if(_.isArray(c)){var d=[c[1]];_.isArray(c[4])&&c[4].length>0&&c[4][0]!=d[0]&&d.push(c[4][0]),b=d.join(":&nbsp;")}c.Error&&c.Error.Message&&(b=c.Error.Message)}}var e=0;a.data&&a.data.data&&(e=a.data.data.status||0),e===500&&window.appIsInDebugMode===!1&&(b="Looks like application is not available. Please check your connection or server availability"),this.fire("error",{message:b}),(e>=400||e===0)&&this.fire("globalFailure");if(a.data&&a.data.cmd){var f=a.data.cmd.name;_.include(["get","find"],f)?e===0&&this.fire("destroy"):this.fire("refresh")}},destroy:function(){this.config.store.unbind(this),this._super()}})})