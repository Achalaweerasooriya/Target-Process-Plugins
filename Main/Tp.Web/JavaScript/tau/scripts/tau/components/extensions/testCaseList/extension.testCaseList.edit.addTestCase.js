define(["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(a,b,c){return c.extend({"bus afterRender+permissionsReady":function(a){if(a.permissionsReady.data.editable){var c=a.afterRender.data.element;c.find(".tau-add-testCase").click(b.proxy(this.addTestCaseClickHandler,this))}},addTestCaseClickHandler:function(){function e(){Ext.WindowMgr.zseed=9999999;var b=new Tp.controls.TestCaseCreateEditorWindow({userStoryId:c,processId:a.getProcessId()});b.show(),b.on("saved",function(){d.fire("testCaseWasAdded",{assignable:{id:c}})})}var a=this.config.context,c=a.assignable.id,d=this;if(!window.processConfigurations){var f=window.progressDialog||{show:function(){},hide:function(){}};f.show("Loading..."),Ext.Ajax.request({url:(new Tp.WebServiceURL("/PageServices/TestCaseListService.asmx/GetProcessConfiguration")).toString(),headers:{"Content-Type":"application/json"},success:function(a){f.hide();var c=b.parseJSON(a.responseText).d;processConfigurations=c,e()},jsonData:{userStoryId:c}})}else e()}})})