define(["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(_,$,a){return a.extend({"bus afterRender+permissionsReady":function(a){if(a.permissionsReady.data.editable){var b=a.afterRender.data.element;b.find(".tau-add-testCase").click($.proxy(this.addTestCaseClickHandler,this))}},addTestCaseClickHandler:function(){function d(){Ext.WindowMgr.zseed=9999999;var d=new Tp.controls.TestCaseCreateEditorWindow({userStoryId:b,processId:a.getProcessId()});d.show(),d.on("saved",function(){c.fire("testCaseWasAdded",{assignable:{id:b}})})}var a=this.config.context,b=a.assignable.id,c=this;if(!window.processConfigurations){var e=window.progressDialog||{show:function(){},hide:function(){}};e.show("Loading..."),Ext.Ajax.request({url:(new Tp.WebServiceURL("/PageServices/TestCaseListService.asmx/GetProcessConfiguration")).toString(),headers:{"Content-Type":"application/json"},success:function(a){e.hide();var b=$.parseJSON(a.responseText).d;processConfigurations=b,d()},jsonData:{userStoryId:b}})}else d()}})})