define(["Underscore","jQuery","tau/components/extensions/component.extension.base","app.path"],function(e,s,n,t){return n.extend({"bus afterRender+permissionsReady":function(e){if(e.permissionsReady.data.editable){var n=e.afterRender.data.element;n.find(".tau-add-testCase").click(s.proxy(this.addTestCaseClickHandler,this))}},addTestCaseClickHandler:function(){function e(){Ext.WindowMgr.zseed=9999999;var e=new Tp.controls.TestCaseCreateEditorWindow({userStoryId:i,processId:n.getProcessId()});e.show(),e.on("saved",function(){o.fire("testCaseWasAdded",{assignable:{id:i}})})}var n=this.config.context,i=n.entity.id,o=this;if(window.processConfigurations)e();else{var a=window.progressDialog||{show:function(){},hide:function(){}};a.show("Loading..."),Ext.Ajax.request({url:new t.tp.WebServiceURL("/PageServices/TestCaseListService.asmx/GetProcessConfiguration").toString(),headers:{"Content-Type":"application/json"},success:function(n){a.hide();var t=s.parseJSON(n.responseText).d;processConfigurations=t,e()},jsonData:{userStoryId:i}})}}})});