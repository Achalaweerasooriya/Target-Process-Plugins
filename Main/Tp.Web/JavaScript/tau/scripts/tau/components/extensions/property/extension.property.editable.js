define(["Underscore","tau/components/extensions/component.extension.base"],function(_,a){return a.extend({category:"edit","bus permissionsReady+afterRender+dataBind":function(a){var b=this,c=this.element=a.afterRender.data.element;a.afterRender.data.element.find(".external-view").click(function(a){a.stopPropagation()});var d=this.permissions=a.permissionsReady.data;if(d.editable===!1)return;c.find(".tau-property").addClass("tau-property_editable_true");var e=a.dataBind.data;(!e.text||!e.text.length)&&c.find(".property").addClass("editable");if(d.editable){var f={components:[_.extend({data:e,v2:!0},this.config.editorComponentConfig)],context:b.config.context},g={target:c.find(".property-text"),componentsConfig:f,alignTo:c.find(this.config.alignElementSelector||"")};this.fire("initBubble",g)}},"bus edit":function(){this.permissions.editable&&this.fire("toggleBubble")}})})