define(["Underscore","tau/components/extensions/component.extension.base"],function(_,a){return a.extend({init:function(a){this._super.apply(this,arguments),this.bus.getGlobalBus().on("entityWasMovedToProject",this.onEntityWasMovedToProject,this),this.bus.getGlobalBus().on("refreshMainEntity",this.refresh,this)},destroy:function(){this.bus.getGlobalBus().removeListener("entityWasMovedToProject",this.onEntityWasMovedToProject,this),this.bus.getGlobalBus().removeListener("refreshMainEntity",this.refresh,this),this._super.apply(this,arguments)},"bus onContextRetrieved":function(a){var b=a.data,c=this;_.each(b.processes[0].practices,function(a){c.practices.push(a.name)})},onEntityWasMovedToProject:function(a){var b=this.config.entity.id;b==a.data.entity.id&&(this.fire("evictData"),this.fire("refresh"))},refresh:function(){this.fire("evictData"),this.fire("refresh")}})})