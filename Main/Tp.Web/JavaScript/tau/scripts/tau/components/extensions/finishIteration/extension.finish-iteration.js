define(["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,i,t){return t.extend({"bus dataBind":function(e,i){i.iterations.length<1&&(this.config.context.configurator.service("errorBar").fire("error",{message:"There're no other iterations, so you can't move the work that is not finished"}),this._close(i))},"bus afterRender + dataBind":function(i,t,n){var o=t.element,r=o.find("#tau-submit-finish-iteration");r.on("click",e.bind(function(e){e.preventDefault(),this._finishIteration(n.iteration,o),r.prop("disabled",!0),o.find(".tau-loader").show()},this))},"bus afterRender + dataBind + iterationIsFinished":function(e,i,t,n){i.element.find("#tau-submit-finish-iteration").prop("disabled",!1),i.element.find(".tau-loader").hide();var o=this.config.context.configurator.service("errorBar");if(n.successful){var r=t.iteration.name+" is finished";o.fire("notification",{message:r})}else o.fire("error",{message:n.reason});this._close(t.iteration)},_close:function(e){var i=e.id,t=this.config.context.configurator,n=t.getHistory();t.service("navigator").back(!1),n.exclude(i)},_finishIteration:function(e,i){var t={};t.type=e.__type,t.from=e.id,t.to=parseInt(i.find("#to-iteration").val(),10),t.useMoveInsteadSplit="true"===i.find("[name=tau-finish-by-move]:checked").val(),this.fire("finishIteration",t)}})});