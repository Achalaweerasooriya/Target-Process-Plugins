define(["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(a,b,c){return c.extend({"bus afterRender":function(a){this._$element=a.data.element,this._data=a.data.data,this._render()},_render:function(){var a=this._createStateDateItemsHash();this._$element.find(".tau-historyGridInterpretation .stateName").each(function(c,d){var e=b(d),f=a[e.text()],g=e.attr("title")+" ("+f.absolute+" days)";e.attr("title",g).addClass("tau-dateItems-"+f.relative)})},_createStateDateItemsHash:function(){var b={};return a.each(this._data.entityStates,function(a){b[a]={absolute:0,relative:0}}),this._calculateAbsoluteHashValues(b),this._calculateRelativeHashValues(b),b},_calculateAbsoluteHashValues:function(b){a.each(this._data.historyItems,function(a){var c=a.state.dateSpan;c&&(b[a.state.name].absolute+=c)})},_calculateRelativeHashValues:function(b){var c=a.max(b,function(a){return a.absolute}).absolute;a.each(b,function(a,d){var e=a.absolute*100/c;b[d].relative=Math.round(e/10)*10})}})})