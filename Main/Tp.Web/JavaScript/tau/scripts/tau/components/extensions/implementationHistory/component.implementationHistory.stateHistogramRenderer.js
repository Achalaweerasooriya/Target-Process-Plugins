define(["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(_,$,a){return a.extend({"bus afterRender":function(a){this._$element=a.data.element,this._data=a.data.data,this._render()},_render:function(){var a=this._createStateDateItemsHash();this._$element.find(".tau-historyGridInterpretation .stateName").each(function(b,c){var d=$(c),e=a[d.text()],f=d.attr("title")+" ("+e.absolute+" days)";d.attr("title",f).addClass("tau-dateItems-"+e.relative)})},_createStateDateItemsHash:function(){var a={};return _.each(this._data.entityStates,function(b){a[b]={absolute:0,relative:0}}),this._calculateAbsoluteHashValues(a),this._calculateRelativeHashValues(a),a},_calculateAbsoluteHashValues:function(a){_.each(this._data.historyItems,function(b){var c=b.state.dateSpan;c&&(a[b.state.name].absolute+=c)})},_calculateRelativeHashValues:function(a){var b=_.max(a,function(a){return a.absolute}).absolute;_.each(a,function(c,d){var e=c.absolute*100/b;a[d].relative=Math.round(e/10)*10})}})})