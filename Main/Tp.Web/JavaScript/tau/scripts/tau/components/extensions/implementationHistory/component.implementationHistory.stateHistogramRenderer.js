define(["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(t,e,a){return a.extend({"bus afterRender":function(t){this._$element=t.data.element,this._data=t.data.data,this._render()},_render:function(){var t=this._createStateDateItemsHash();this._$element.find(".tau-historyGridInterpretation .stateName").each(function(a,n){var s=e(n),i=t[s.text()],u=s.attr("title")+" ("+i.absolute+" days)";s.attr("title",u).addClass("tau-dateItems-"+i.relative)})},_createStateDateItemsHash:function(){var e={};return t.each(this._data.entityStates,function(t){e[t]={absolute:0,relative:0}}),this._calculateAbsoluteHashValues(e),this._calculateRelativeHashValues(e),e},_calculateAbsoluteHashValues:function(e){t.each(this._data.historyItems,function(t){var a=t.state.dateSpan;a&&(e[t.state.name].absolute+=a)})},_calculateRelativeHashValues:function(e){var a=t.max(e,function(t){return t.absolute}).absolute;t.each(e,function(t,n){var s=100*t.absolute/a;e[n].relative=10*Math.round(s/10)})}})});