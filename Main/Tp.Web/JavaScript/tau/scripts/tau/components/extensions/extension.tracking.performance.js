define(["Underscore","tau/components/extensions/component.extension.base"],function(e,t){return t.extend({init:function(e){this.globalBus=e.bus.globalBus,this._super(e),this._slice={},this._commands={},this._startLifeCycle=null,this.diagnostics=e.context.configurator.getDiagnosticsService(),this._setPageClientProcessingTime()},_setPageClientProcessingTime:function(){var e=this.diagnostics.page();e&&(e.client=(new Date).getTime()-window.clientStartTime.getTime())},_requestCompleted:function(e,t){this._commands[t.command.method]=parseInt(t.response.getResponseHeader("X-Stopwatch"),10)},_viewReady:function(e){if(this._startLifeCycle.caller.id==e.caller.id){var t=e.date-this._startLifeCycle.date,s=Math.max(0,this._commands.xaxis||0,this._commands.yaxis||0);this._commands.list&&(s+=this._commands.list),this._commands.cells&&(s+=this._commands.cells),this.diagnostics.set("board",{server:s,client:t-s})}},"globalBus start.lifecycle":function(e){this._startLifeCycle=e},"globalBus slice.ready":function(t,s){e.each(s,function(e,t){this._slice[t]!==e&&(this._slice[t]&&(this._slice[t].removeListener("request.completed",this._requestCompleted,this),this._commands={}),this._slice[t]=e,e.on("request.completed",this._requestCompleted,this))},this)},"globalBus model.cells.content.loaded + cardsFullyLoaded":function(e){this._viewReady(e["model.cells.content.loaded"])},"globalBus overview.board.ready":function(e){this._viewReady(e)}})});