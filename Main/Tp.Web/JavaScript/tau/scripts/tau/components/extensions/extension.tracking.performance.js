define(["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,s,t){return t.extend({init:function(e){this.globalBus=e.bus.globalBus,this._super(e),this._slice={},this._commands={},this._startLifeCycle=null,this.diagnostics=e.context.configurator.getDiagnosticsService(),this._setPageClientProcessingTime()},_setPageClientProcessingTime:function(){var e=this.diagnostics.page();e&&(e.client=(new Date).getTime()-window.clientStartTime.getTime())},_requestCompleted:function(e,s){this._commands[s.command.method]=parseInt(s.response.getResponseHeader("X-Stopwatch"),10)},_viewReady:function(e){if(this._startLifeCycle.caller.id==e.caller.id){var s=e.date-this._startLifeCycle.date,t=0;this._commands.xaxis>t&&(t=this._commands.xaxis),this._commands.yaxis>t&&(t=this._commands.yaxis),this._commands.list&&(t+=this._commands.list),this._commands.cells&&(t+=this._commands.cells),this.diagnostics.set("board",{server:t,client:s-t})}},"globalBus start.lifecycle":function(e){this._startLifeCycle=e},"globalBus slice.ready":function(s,t){e.each(t,function(e,s){this._slice[s]!==e&&(this._slice[s]&&(this._slice[s].removeListener("request.completed",this._requestCompleted.bind(this),this._slice[s]),this._commands={}),this._slice[s]=e,e.on("request.completed",this._requestCompleted.bind(this)))}.bind(this))},"globalBus model.cells.content.loaded + cardsFullyLoaded":function(e){this._viewReady(e["model.cells.content.loaded"])},"globalBus overview.board.ready":function(e){this._viewReady(e)}})});