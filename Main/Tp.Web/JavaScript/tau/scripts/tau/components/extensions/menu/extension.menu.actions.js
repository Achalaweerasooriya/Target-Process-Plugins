define(["Underscore","jQuery","tau/configurator","tau/ui/extensions/editable-base","tau/ui/behaviour/menu/ui.behaviour.menu.actions","tau/utils/utils.redirect"],function(a,b,c,d,e,f){return d.extend({"bus dataBind+afterRender":function(b){this.redirect=new f(this.config.context);var c=this.$el=b.afterRender.data.element;c.behaviourMenuActions(),c.find(".ui-menu__item-action").click(a.bind(this.executeCommand,this))},"bus select":function(){this.$el.behaviourMenuActions("show")},removeEntity:function(){var a=this.config.context.entity;this.config.store.remove(a.entityType.name,{id:a.id}).done(),c.getHistory().exclude(a.id)},redirectTo:function(a,b){this.redirect.redirect(a,b)},split:function(){var a=this.config.context.entity.id,b={generalID:a};this.fire("split",b)},markAsDuplicate:function(){var a=this.config.context.entity.id,b={generalID:a};this.fire("markAsDuplicate",b)},convert:function(){var a=this.config.context.entity.id,b=this.config.context.getProjectId(),c={generalID:a,projectID:b};this.fire("convertEntity",c)},attachToRequest:function(){var a=this.config.context.entity.id;this.fire("attachToRequest",{generalID:a})},moveOrCopy:function(){var a=this.config.context.entity.id;this.fire("moveOrCopy",{generalID:a})},executeCommand:function(c){if(b(c.target).is("a"))return;var d=this,e=b(c.currentTarget).data().tmplItem.data,f=e.command,g=e.confirmation||!1;if(g&&window.confirm(g)==0)return;if(a.isFunction(f))a.bind(f,d)(d);else if(typeof f=="object"){var h={components:f,context:d.config.context};d.createComponents(h,function(a){var b=a[0].component;b.initialize()})}else e.url&&d.redirectTo(e.url);this.fire("beforeSave",{})}})})