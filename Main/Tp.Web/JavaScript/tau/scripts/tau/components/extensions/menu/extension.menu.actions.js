define(["Underscore","jQuery","tau/configurator","tau/ui/extensions/editable-base","tau/ui/behaviour/menu/ui.behaviour.menu.actions","tau/utils/utils.redirect"],function(_,$,a,b,c,d){return b.extend({"bus dataBind+afterRender":function(a){this.redirect=new d(this.config.context);var b=this.$el=a.afterRender.data.element;b.behaviourMenuActions(),b.find(".ui-menu__item-action").click(_.bind(this.executeCommand,this))},"bus select":function(){this.$el.behaviourMenuActions("show")},removeEntity:function(){var b=this.config.context.entity;this.config.store.remove(b.entityType.name,{id:b.id}).done(),a.getHistory().exclude(b.id)},redirectTo:function(a,b){this.redirect.redirect(a,b)},split:function(){var a=this.config.context.entity.id,b={generalID:a};this.fire("split",b)},markAsDuplicate:function(){var a=this.config.context.entity.id,b={generalID:a};this.fire("markAsDuplicate",b)},convert:function(){var a=this.config.context.entity.id,b=this.config.context.getProjectId(),c={generalID:a,projectID:b};this.fire("convertEntity",c)},attachToRequest:function(){var a=this.config.context.entity.id;this.fire("attachToRequest",{generalID:a})},moveOrCopy:function(){var a=this.config.context.entity.id;this.fire("moveOrCopy",{generalID:a})},executeCommand:function(a){if($(a.target).is("a"))return;var b=this,c=$(a.currentTarget).data().tmplItem.data,d=c.command,e=c.confirmation||!1;if(e&&window.confirm(e)==0)return;if(_.isFunction(d))_.bind(d,b)(b);else if(typeof d=="object"){var f={components:d,context:b.config.context};b.createComponents(f,function(a){var b=a[0].component;b.initialize()})}else c.url&&b.redirectTo(c.url);this.fire("beforeSave",{})}})})