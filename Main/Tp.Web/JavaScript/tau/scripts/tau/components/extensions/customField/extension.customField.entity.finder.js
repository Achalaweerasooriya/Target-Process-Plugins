define(["Underscore","tau/core/extension.base","tau/models/customField/model.customField.entity.editable","tau/models/finder.entity/model.finder.entity.data.customField.entity"],function(e,t,i,n){return t.extend({"bus beforeInit + configurationProvided + afterRender":function(t,i,n,o){var d=i.customField,r=o.element.find("tr"),l=e.deepClone(n),f=o.view,u=this._createFinderConfig(l,d,n);this._initBubbleWithFinder(r,f,u),r.on("click",".i-role-reset",e.bind(function(){return this.fire("entitySelected",{entity:null}),!1},this))},_createFinderConfig:function(e){return{type:"finder.entity",model:n,modelEditable:i,customField:e}},_initBubbleWithFinder:function(e,t,i){e.addClass("tau-bubble-target ui-customfield_editable_true");var n={target:e,alignTo:e.find(".entity-custom-field-link"),onShow:function(){t.config.context.configurator.getKeyBoardManager().pushHandler({})},onHide:function(){t.config.context.configurator.getKeyBoardManager().popHandler()},componentsConfig:{components:[i]},onPositionConfig:function(e){e.collision="flipfit flipfit",e.at="left middle",e.my="right middle"}};this.fire("initBubble",n)}})});