define(["jQuery","tau/components/extensions/component.extension.base"],function($,ExtensionBase){var addBubble=function(config){var position=null,target=config.target,caption=config.caption,value=config.value;target.click(function(evt){position={x:evt.pageX,y:evt.pageY}}),target.addClass("ui-link").tauBubble({onShow:function(){var popupInner=this.$popup.find(".tau-bubble__inner");if(popupInner.find(".tau-time-interval-header").size()>0)return;popupInner.append(['<div class="tau-time-interval-container">',"<table>","<tr>","   <td>",'       <div class="tau-time-interval-header">',config.caption,":</div>","   </td>","   <td>",'       <div class="tau-time-interval-value">',value,"</div>","   </td>","</tr>","<tr>","   <td>",'       <div class="tau-time-interval-header">',config.startCaption,":</div>","   </td>","   <td>",'       <div class="tau-time-interval-value">',config.startDate,"</div>","   </td>","</tr>","<tr>","   <td>",'       <div class="tau-time-interval-header">',config.endCaption,":</div>","   </td>","   <td>",'       <div class="tau-time-interval-value">',config.endDate,"</div>","   </td>","</tr>","</table>","</div>"].join(""))},alignTo:target,onArrowPositionConfig:function(config){var offset=this.target.offset();return config.offset=position.x-offset.left+" 0",config},onPositionConfig:function(config){var offset=this.target.offset();return config.offset=position.x-offset.left-70+" 0",config},target:target})};return ExtensionBase.extend({extractDataFromEvent:function(evtArgs,eventName){return(evtArgs[eventName]||{}).data||{}},"bus afterRender+dataBind":function(evtArgs){var dataToBind=this.extractDataFromEvent(evtArgs,"dataBind"),element=$(this.extractDataFromEvent(evtArgs,"afterRender").element);addBubble({target:element.find("svg.main-plot rect").eq(4),caption:"Cycle Time",value:dataToBind.cycleTimeTooltip,startCaption:"Start Date",startDate:(dataToBind.startDate||"").length>0?dataToBind.startDate:dataToBind.createDate,endCaption:dataToBind.endDateLabel,endDate:dataToBind.endDate}),addBubble({target:element.find("svg.main-plot rect").eq(0),caption:"Lead Time",value:dataToBind.leadTimeTooltip,startCaption:"Create Date",startDate:dataToBind.createDate,endCaption:dataToBind.endDateLabel,endDate:dataToBind.endDate})}})})