define(["Underscore","jQuery","tau/core/extension.base.stateful","tau/ui/behaviour/common/ui.behaviour.listSelectable"],function(_,$,ExtensionBase){return ExtensionBase.extend({category:"edit",name:"user list","bus initialize + afterRender":function(evt,initConfig,renderData){var $element=renderData.element;$element.delegate(".unassign-button","click",_.bind(this.onUnassignClick,this)),$element.delegate(".assign-to-me-button","click",_.bind(this.onAssignToMeClick,this)),$element.delegate(".user-search-box","keyup",_.bind(this.onFilterChanged,this)),$element.delegate(".user","click",_.bind(this.onUserClick,this)),$element.delegate(".more-link","click",_.bind(this.onMoreClick,this))},"bus afterRender":function(evt,renderData){var $element=renderData.element,$list=$element.find("[role=list]");$list.listSelectable({items:".user",className:"user_hover",keyboardManager:this.config.context.configurator.getKeyBoardManager()}),this.fire("$listSelectable.ready",$list)},"bus $listSelectable.ready:last+afterRender:last+focus":function(evt,$list,renderData){var $element=renderData.element;$list.listSelectable("enable"),$element.find(".user-search-box").focus()},"bus $listSelectable.ready:last+blur":function(evt,$list){$list.is(":visible")&&$list.listSelectable("disable")},onMoreClick:function(evt){evt.stopPropagation(),this.fire("showMore")},onUserClick:function(evt){var $target=$(evt.target),data=$target.tmplItem().data;this.fire("changeAssignment",{user:data})},onUnassignClick:function(){this.fire("removeAssignment")},onAssignToMeClick:function(){this.fire("assignToLoggedUser")},onFilterChanged:function(evt){if(evt.keyCode==$.ui.keyCode.DOWN||evt.keyCode==$.ui.keyCode.UP||evt.keyCode==$.ui.keyCode.ENTER)return;evt.preventDefault(),this.fire("setFilter",{filter:$(evt.target).val()})}})})