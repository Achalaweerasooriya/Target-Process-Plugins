define(["Underscore","jQuery","tau/core/extension.base.stateful","tau/ui/behaviour/common/ui.behaviour.listSelectable"],function(e,i,t){return t.extend({category:"edit",name:"user list","bus initialize + afterRender":function(i,t,s){var n=s.element;n.delegate(".unassign-button","click",e.bind(this.onUnassignClick,this)),n.delegate(".assign-to-me-button","click",e.bind(this.onAssignToMeClick,this)),n.delegate(".user-search-box","keyup",e.bind(this.onFilterChanged,this)),n.delegate(".user","click",e.bind(this.onUserClick,this)),n.delegate(".more-link","click",e.bind(this.onMoreClick,this))},"bus afterRender":function(e,i){var t=i.element,s=t.find("[role=list]");s.listSelectable({items:".user",className:"user_hover",keyboardManager:this.config.context.configurator.getKeyBoardManager()}),this.fire("$listSelectable.ready",s)},"bus $listSelectable.ready:last+focus":function(e,i){i.data("ui-listSelectable")&&i.listSelectable("enable")},"bus afterRender:last+focus":function(e,i){var t=i.element;t.is(":visible")&&t.find(".user-search-box").focus()},"bus $listSelectable.ready:last+blur":function(e,i){i.is(":visible")&&i.data("ui-listSelectable")&&i.listSelectable("disable")},onMoreClick:function(e){e.stopPropagation(),this.fire("showMore")},onUserClick:function(e){var t=i(e.target),s=t.tmplItem().data;this.fire("changeAssignment",{user:s})},onUnassignClick:function(){this.fire("removeAssignment")},onAssignToMeClick:function(){this.fire("assignToLoggedUser")},onFilterChanged:function(e){e.keyCode!=i.ui.keyCode.DOWN&&e.keyCode!=i.ui.keyCode.UP&&e.keyCode!=i.ui.keyCode.ENTER&&(e.preventDefault(),this.fire("setFilter",{filter:i(e.target).val()}))}})});