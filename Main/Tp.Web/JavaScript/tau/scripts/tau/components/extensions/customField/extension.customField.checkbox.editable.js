define(["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/behaviour/checkbox/ui.behaviour.checkboxToggle","tau/ui/behaviour/customField/ui.behaviour.customField.row"],function(_,$,ExtensionBase){return ExtensionBase.extend({category:"edit","bus permissionsReady+afterRender":function(eventData){var self=this,fieldData=eventData.afterRender.data.data,permissions=eventData.permissionsReady.data;if(permissions.editable){var $row=eventData.afterRender.data.element,$widget=$row.find(".ui-customfield__value");$widget.checkboxToggle({classNames:{checked:"ui-customfield__value_checked",unchecked:"ui-customfield__value_unchecked"},onSave:function(text){$widget.removeClass("ui-validationerror"),self.bus.fire("elementUpdated"),self.bus.fire("save",{customFields:[{name:fieldData.name,type:fieldData.type,value:text}]})}}),$row.behaviourCustomFieldRow({onActivate:function(e){e.stopPropagation(),$(e.target).hasClass("ui-customfield__value")==0&&$widget.checkboxToggle("activate")}}),$row.addClass("ui-customfield_editable_true")}}})})