define(["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,t,a){var n={create:function(e,a){return t("<a></a>").addClass(this._createClassName(e,a)).attr("href","#"+e.type+"/"+e.id).attr("title",this._createTitle(e,a)).data("entityInfo",{id:e.id,type:e.type,alias:e.alias||e.type})},_createTitle:function(e,t){var a=["["+(e.alias||e.type)+"]"," #"+e.id,e.name,t?"(closed)":"(added)"].join(" ");return a},_createClassName:function(e,t){var a=["i-role-entity ","tau-entity-icon ","tau-entity-icon--"+e.type.toLowerCase(),t?"tau-closed":""].join(" ");return a}};return a.extend({"bus afterRender":function(e){this._$element=e.data.element,this._data=e.data.data,this._render()},_render:function(){var t=this._$element.find(".tau-historyGrid .tau-historyItem");e.each(this._data.historyItems,function(a,i){var r=t.eq(i).find(".i-role-relatedEntities-container");a.relatedEntities&&(e.each(a.relatedEntities.opened,function(e){r.append(n.create(e))}),e.each(a.relatedEntities.closed,function(e){r.append(n.create(e,!0))}))})}})});