define(["require","tau/services/boards/service.views.menu.item.api","Underscore","app.path","tau/utils/utils.api"],function(e){var t=e("tau/services/boards/service.views.menu.item.api"),i=e("Underscore"),n=e("app.path"),r=e("tau/utils/utils.api"),a=t.extend({init:function(e,t){this._super({storageConfig:e,storageKeyPrefix:"__board_legacy",itemType:"view",apiItemType:"view",clientId:t.clientId})},createBoard:function(e){return this.createViewMenuItem(i.extend({itemType:"board"},e))},createDashboard:function(e){return this.createViewMenuItem(i.extend({itemType:"dashboard"},e))},createReport:function(e){return this.createViewMenuItem(i.extend({itemType:"customreport"},e))},setBoardData:function(e,t,i){return this.updateViewMenuItem(e,t,i)},getBoardData:function(e){return this.getViewMenuItem(e)},removeBoard:function(e){return this.removeViewMenuItem(e)},getViewsForGroup:function(e){var t={url:n.get()+"/api/views/v1/view/forGroup/"+e,type:"GET"};return this._noCacheStorage.makeServiceCall(t)},removeViews:function(e){this._notifyViewsRemoving(e);var t=r.createDeleteAjaxCommandConfig({url:n.get()+"/api/views/v1/deleteBatch",data:JSON.stringify({viewIds:e})});return this._noCacheStorage.makeServiceCall(t).then(this._notifyViewsRemoved.bind(this,e))},_notifyViewsRemoving:function(e){i.each(e,this._notifyItemRemoving,this)},_notifyViewsRemoved:function(e){i.each(e,this._notifyItemRemoved,this)},internalCreateItemUpdatedInvalidatingHandler:function(){return function(e){this.clearCacheForViewMenuItem(e.key),this._notifyItemUpdated(e)}.bind(this)}});return a});