define(["require","Underscore","tau/core/class","tau/core/templates-factory","tau/services/customize/templateRegistrators/templateRegistrator.functions","tau/services/customize/templateRegistrators/listTemplateRegistrator.functions"],function(e){var t=e("Underscore"),i=e("tau/core/class"),s=e("tau/core/templates-factory"),a=e("tau/services/customize/templateRegistrators/templateRegistrator.functions"),n=e("tau/services/customize/templateRegistrators/listTemplateRegistrator.functions");return i.extend({registerItemTitleTemplate:function(e,t){s.register({name:t.getTitleTemplateName(),engine:"jqote2",customFunctions:t,markup:t.createTitleTemplateMarkup()})},createItemTemplate:function(e){var i=t.extend(n.itemFunctions(e),e.template.customFunctions);return this.registerItemTitleTemplate(e,i),{name:"list.unit."+e.id,engine:"jqote2",customFunctions:i,markup:t.flatten(['<div class="<%= fn.createCellClassName(this) %>">',"<% if (fn.isApplicable(this) && fn.isEmptyUnit(this)) { %>",'<div class="tau-elems-cell_unit-empty-text">click to edit</div>',"<% } %>",'<div class="<%! fn.createUnitClassName(this) %>" data-id="<%= this.unit.id %>" ',"<%= fn.createTitle(this) %> ",a.getAdditionalAttributes(e),">","<% if (fn.shouldRenderUnitValue(this)) { %>",a.createTerm(e),e.template.markup||e.template,"<% } %>","<% if (fn.canDisplayNameControls(this)) { %>",'<span class="tau-board-unit_name-controls">',"<% if (fn.canDisplayOpenDetailsButton(this)) { %>","<% if (this.renderDetailsTrigger) { %>",'<span title="Click for details" class="tau-board-list-view_details-view-trigger tau-icon tau-icon_name_newwindow i-role-details-trigger"></span>',"<% } %>","<% } %>",'<span class="tau-counter"></span>',"</span>","<% } %>","</div>","</div>"])}},createHeaderTemplate:function(e){return{name:"list.header."+e.id,engine:"jqote2",customFunctions:t.extend(n.headerFunctions(e),e.template.customFunctions),markup:['<div class="<%= fn.createCellClassName(this) %>" <%= fn.createListSettings(this) %> title="<%= fn.getUnitTitle(this) %>">',"<%= fn.cond(fn.isResizable(this), '<div class=\"tau-list-caption-cell__overflow-helper\">') %>","<%= fn.sortableTemplateHeader(this) %>","<% if (this.first) { %>","<% this.cardTypes.forEach(function(item, index) { %>","<% if (index > 0) { %>",'<span class="tau-cap">, </span>',"<% } %>",'<span class="tau-cap tau-text_type_<%=item.typeId%>"><%! fn.getLevelTitle(item.typeId) || item.typeName %></span>',"<% }); %>","<% if (this.parentEntityType) { %>",'<span class="tau-cap"> for <%! fn.term(this.parentEntityType, "name") %></span>',"<% }; %>","<%= fn.sortableTemplateFooter(this) %>","<% } else { %>","<%! fn.getUnitHeader(this) %>","<% } %>","<%= fn.sortableTemplateFooter(this) %>","<%= fn.cond(fn.isResizable(this), '</div>') %>","<% if (this.first) { %>",'<span class="tau-inline-group tau-list-controls-holder i-role-list-controls"></span>',"<% } %>","</div>"]}
},registerUnit:function(e){var t=this.createItemTemplate(e),i=this.createHeaderTemplate(e);return s.register(t),s.register(i),{list:t.name,header:i.name}}})});