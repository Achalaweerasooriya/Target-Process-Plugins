define(["jQuery","Underscore","tau/core/class","tau/models/board.customize.units/const.card.sizes","tau/core/templates-factory","tau/services/customize/templateRegistrators/templateRegistrator.functions","tau/services/customize/templateRegistrators/listTemplateRegistrator.functions"],function(t,e,i,a,s,n,r){return i.extend({registerItemTitleTemplate:function(t,e){s.register({name:e.getTitleTemplateName(),engine:"jqote2",customFunctions:e,markup:e.createTitleTemplateMarkup()})},createItemTemplate:function(t){var i=e.extend(r.itemFunctions(t),t.template.customFunctions);return this.registerItemTitleTemplate(t,i),{name:"list.unit."+t.id,engine:"jqote2",customFunctions:i,markup:e.flatten(['<div class="<%= fn.createCellClassName(this) %>">',"<% if (fn.isEmptyUnit(this)) { %>",'<div class="tau-elems-cell_unit-empty-text">click to edit</div>',"<% } %>",'<div class="<%! fn.createUnitClassName(this) %>" data-id="<%= this.unit.id %>" ',"<%= fn.createTitle(this) %> ",n.getDataAttributes(t.data),">","<% if (fn.isApplicable(this)) { %>",t.template.markup||t.template,"<% } %>","<% if (fn.canDisplayNameControls(this)) { %>",'<span class="tau-board-unit_name-controls">',"<% if (fn.canDisplayOpenDetailsButton(this)) { %>",'<span title="Click for details" class="tau-board-list-view_details-view-trigger tau-icon tau-icon_name_newwindow"></span>',"<% } %>",'<span class="tau-counter tau-counter-hidden"></span>',"</span>","<% } %>","</div>","</div>"])}},createHeaderTemplate:function(t){return{name:"list.header."+t.id,engine:"jqote2",customFunctions:e.extend(r.headerFunctions(t),t.template.customFunctions),markup:['<div class="<%= fn.createCellClassName(this) %>" <%= fn.createListSettings(this) %> title="<%= fn.getUnitTitle(this) %>">',"<%= fn.cond(fn.isResizable(this), '<div class=\"tau-list-caption-cell__overflow-helper\">') %>","<%= fn.sortableTemplateHeader(this) %>","<% if (this.first) { %>","<% this.cardTypes.forEach(function(item, index) { %>","<% if (index > 0) { %>",'<span class="tau-cap">, </span>',"<% } %>",'<span class="tau-cap tau-<%=item.typeId%>"><%! fn.term(item.typeId, "names") || item.typeName %></span>',"<% }); %>","<% if (this.parentEntityType) { %>",'<span class="tau-cap"> for <%! fn.term(this.parentEntityType, "name") %></span>',"<% }; %>","<%= fn.sortableTemplateFooter(this) %>","<% } else { %>","<%= fn.getUnitHeader(this) %>","<% } %>","<%= fn.sortableTemplateFooter(this) %>","<%= fn.cond(fn.isResizable(this), '</div>') %>","<% if (this.first) { %>",'<span class="tau-list-quick-add-holder i-role-quick-add-holder"></span>',"<% } %>","</div>"]}},registerUnit:function(t){var e=this.createItemTemplate(t),i=this.createHeaderTemplate(t);return s.register(e),s.register(i),{list:e.name,header:i.name}}})});