define(["require","tau/core/class","Underscore","jQuery"],function(t){var n=t("tau/core/class"),i=t("Underscore"),e=t("jQuery");return n.extend({init:function(t){t=t||{},this._whenUnitUpdatedCallback=i.isFunction(t.whenUnitUpdated)?t.whenUnitUpdated.bind(t):i.constant(e.Deferred().resolve())},wireUpNewUnitEditorView:function(t){t.toggleFocus(!0),t.unitEditorUpdating.add(function(){t.toggleBusyIndicator(!0)}),t.unitEditorUpdated.add(this._whenUnitEditorUpdated.bind(this,t)),t.unitEditFinished.add(function(){t.toggleFocus(!1)}.bind(this))},_whenUnitEditorUpdated:function(t){this._whenUnitUpdatedCallback().always(function(){t.toggleBusyIndicator(!1)})}})});