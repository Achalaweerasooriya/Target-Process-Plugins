define(["Underscore","tau/core/class"],function(_,Class){var ServiceRouting=Class.extend({init:function(config){config=config||{},this.config=config,this.external=config.external},get:function(command){var states={},id=command.id,fields=command.fields,len=fields.length,hash=this.external.getHashParam(id);for(var i=0;i<len;i++){var name=fields[i];states[name]=hash.hasOwnProperty(name)?hash[name]:null}command.callback(states)},set:function(command){var id=command.id,set=command.set,hash=this.external.getHashParam(id),newHash=_(hash).extend(set);this.external.setHashParam(id,newHash),command.callback(newHash)}});return ServiceRouting})