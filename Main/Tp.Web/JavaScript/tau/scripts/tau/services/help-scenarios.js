define(["jQuery","Underscore","tau/services/help-scenarios/basic-intro","tau/services/help-scenarios/kanban","tau/services/help-scenarios/scrum"],function(e,t,n,o,r){function i(t){t.$holder=e("<div></div>").appendTo("body");var n={alignTo:t.$node,content:"<span>"+t.message+"</span>",zIndex:10001,template:u,showOnCreation:!0,className:"tau-warning-bubble"+(t.step.pin===!1?"":" i-role-taububble-ignore"),showEvent:null,hideEvent:null,mode:"bubble",stackName:"help-flow",dontCloseSelectors:["body"]},o=t.step.hasOwnProperty("offset")?t.step.offset:-5;"left"===t.step.direction?n.onPositionConfig=function(e){return e.at="left center",e.my="right center",e.offset="0 "+o,e}:"none"!==t.step.direction&&(n.onPositionConfig=function(e){return e.at="right center",e.my="left center",e.offset="0 "+o,e}),t.$holder.tauBubble(n)}function a(e){if(e.step.attractor!==!1){var n=b(e),o=n.direction,r=n.position;if(r.top*r.left!==0){var i=t.bind(function(e,t){var n="r"===t,o=n?"right-15 center":"center center";e.$node.is(":visible")&&e.$attractor.position({my:"center",at:o,of:e.$node,collision:"none"})},this,e,o),a=e.$attractor.offset(),s=t.max([Math.abs(a.top-r.top),Math.abs(a.left-r.left)]);e.$attractor.animate(r,{complete:i,queue:!0,duration:s>300?1e3:600})}}}function s(e){if(e.step.attractor!==!1){var t=b(e),n=t.direction,o="r"===n,r=o?"right-15 center":"center center";e.$attractor.position({my:"center",at:r,of:e.$node,collision:"none"})}}function c(e){d=setTimeout(function(){e.$attractor.removeClass("tau-animated-attractor")},500)}function l(n){function o(){r&&(n.$node.hasClass("i-role-help-disable-tooltip")?n.$holder.tauBubble("hide"):n.$node.is(":visible")?(s(n),n.$holder.tauBubble("show")):(e.contains(document.documentElement,n.$node[0]),n.reject()),t.delay(o,500))}var r=!0;t.delay(o,500),n.stopMonitoring=function(){r=!1}}var u=['<div class="tau-bubble">','    <div class="tau-bubble__arrow" role="arrow"></div>','    <div class="tau-bubble__inner tau-container">','        <div role="content"></div>',"    </div>","</div>"].join(""),d=null,f=function(){clearTimeout(d);
var t=e(".i-role-attention-attractor");return 0===t.length&&(t=e('<div class="i-role-attention-attractor tau-help-attention-attractor"></div>'),t.appendTo("body")),t},b=function(e){e.$attractor=f(),e.$attractor.addClass("tau-animated-attractor");var t=e.$node.offset(),n=e.$node.width(),o=e.$node.height(),r=n>100?"r":"c",i="r"===r?n-15:n/2;return t.left+=10+i,t.top+=o/2,{position:t,direction:r}},p={},m={get:function(e){return p[e]},set:function(e,t){return p[e]=t}},h={setup:function(n,o){var r=t.extend(e.Deferred(),{$node:n,globalBus:this.globalBus,message:o.message,step:o,scenarioContext:m});return o.isScrollTo!==!1&&r.$node[0].scrollIntoView(!1),o.custom!==!0&&(i(r),l(r),a(r)),r},teardown:function(e){e.step.custom!==!0&&(e.stopMonitoring(),e.$holder.tauBubble("destroy").remove(),c(e))}},v=[{id:"",name:"Select Help Scenario",sections:[{name:"Select help flow above â†‘",steps:[]}]},{id:"scratch",requiredProject:null,requiredProjectName:null,name:"Basic Intro",sections:n},{id:"scrum",requiredProject:13,requiredProjectName:"Tau Product Web Site - Scrum #1",name:"Scrum Getting Started",sections:r},{id:"kanban",requiredProject:2,requiredProjectName:"Tau Product - Kanban #1",name:"Kanban Getting Started",sections:o}];return{utils:h,scenarios:t.toObject(v,"id")}});