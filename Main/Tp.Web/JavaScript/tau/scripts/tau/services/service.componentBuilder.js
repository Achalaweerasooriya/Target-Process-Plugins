define(["Underscore","jQuery","tau/core/class"],function(e,r,t){return t.extend({init:function(e){this.requireLoader=e.getRequireLoader()},create:function(t,n){e.isString(t)&&(t={name:t,path:t});var i;if(t.path)i=t.path;else{if(!t.type)throw new Error("Configuration error: type or path is missing");e.defaults(t,{namespace:"tau"}),i=t.namespace+"/components/component."+t.type}var o=r.Deferred();return this.requireLoader([i],function(r){o.resolve(r.create(e.defaults(t,n||{})))},function(e){o.reject(e)}),o},createAsChild:function(t,n){return r.when(this.create(t)).then(function(r){return n.on("refresh",e.bind(r.fire,r,"destroy")),n.on("destroy",e.bind(r.fire,r,"destroy")),r})}})});