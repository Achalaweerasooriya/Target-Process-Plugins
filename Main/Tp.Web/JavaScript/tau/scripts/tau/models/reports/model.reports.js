define(["Underscore","tau/core/extension.base"],function(e,t){return t.extend({"bus beforeInit + destroy":function(e,t){var r=t.config,i=r.context.configurator,n=i.getAppStateStore();n.unbind({listener:this})},"bus beforeInit":function(t,r){var i=r.config,n=i.context.configurator,o=n.getAppStateStore(),c=this;o.unbind({listener:this}),o.bind({fields:["acid"],listener:this,callback:function(){c.fire("refresh")}}),o.get({fields:["acid"],callback:function(t){var r=t.acid,i={id:r,acid:r,fields:["acid",{selectedProjects:["id","name"]},{selectedTeams:["id","name"]}]};n.getStore().get("context",i).done({success:function(t){var r=t[0].data;e.isArray(r)&&(r=r[0]),c.fire("context.ready",r)},failure:function(){var e={acid:"",selectedProjects:[],selectedTeams:[]};c.fire("context.ready",e)}})}})},"bus afterInit + context.ready":function(e,t,r){var i=t.config.context.configurator.getApplicationPath(),n=this._createMenuEntries(r,i);this.fire("dataBind",n)},_createMenuEntries:function(e,t){if(!e.selectedProjects.length&&!e.selectedTeams.length)return[];var r=[{title:"Process Control",report:"processControl"},{title:"Burn Down",report:"burnDown"},{title:"Cycle Time Distribution",report:"timeDistribution"},{title:"Relations Network",report:"relationsNetwork"}];return e.selectedProjects.length&&(r.push({title:"Cumulative Flow",url:t+"/Project/Reports/Report.aspx?Report=CumulativeFlow&rmnav=1&tp3=1&acid="+e.acid}),r.push({title:"Other Reports&hellip;",url:t+"/Project/Reports/Reports.aspx?rmnav=1&tp3=1&acid="+e.acid})),r}})});