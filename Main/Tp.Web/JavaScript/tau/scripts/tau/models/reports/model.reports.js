define(["Underscore","tau/core/extension.base"],function(e,t){return t.extend({"bus beforeInit + destroy":function(e,t){var i=t.config,r=i.context.configurator,n=r.getAppStateStore();n.unbind({listener:this})},"bus beforeInit":function(e,t){var i=t.config,r=i.context.configurator,n=r.getAppStateStore(),o=this;n.unbind({listener:this}),n.bind({fields:["acid"],listener:this,callback:function(){o.fire("refresh")}}),n.get({fields:["acid"],callback:function(e){var t=e.acid,i={id:t,acid:t,fields:["acid",{selectedProjects:["id","name"]},{selectedTeams:["id","name"]}]};r.getApplicationContextService().getApplicationContext(i,{success:function(e){o.fire("context.ready",e)},failure:function(){var e={acid:"",selectedProjects:[],selectedTeams:[]};o.fire("context.ready",e)}})}})},"bus afterInit + context.ready":function(e,t,i){var r=t.config.context.configurator.getApplicationPath(),n=this._createMenuEntries(i,r);this.fire("dataBind",n)},_createMenuEntries:function(e,t){if(!e.selectedProjects.length&&!e.selectedTeams.length)return[];var i=[{title:"Process Control",report:"processControl"},{title:"Burn Down",report:"burnDown"},{title:"Cycle Time Distribution",report:"timeDistribution"},{title:"Relations Network",report:"relationsNetwork"}];return e.selectedProjects.length&&(i.push({title:"Cumulative Flow",url:t+"/Project/Reports/Report.aspx?Report=CumulativeFlow&rmnav=1&tp3=1&acid="+e.acid}),i.push({title:"Other Reports&hellip;",url:t+"/Project/Reports/Reports.aspx?rmnav=1&tp3=1&acid="+e.acid})),i}})});