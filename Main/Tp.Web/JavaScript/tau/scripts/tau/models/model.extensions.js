define(["Underscore"],function(a){var b=function(a,b){var c=this,d=c.config.context,e=d.entity.entityType.name,f=[];for(var g=0;g<a.length;g++)f.push(a[g]);var h={id:d.entity.id,fields:a},i={innerCallback:function(a){var c=a.data,d=0;for(var e=0;e<f.length;e++)d+=c[f[e]];b.callback.call(b.scope,{count:d})}};c.store.get(e,h,{success:i.innerCallback,scope:i}).done()};return{calculateTagsCount:function(a){b.call(this,["tags-count"],a)},calculateBugsAndTasksCount:function(c){var d=[],e=a.pluck(this.config.context.applicationContext.processes[0].practices,"name");a.indexOf(e,"Planning")!==-1&&d.push("tasks-count"),a.indexOf(e,"Bug Tracking")!==-1&&d.push("bugs-count"),b.call(this,d,c)},calculateUserStoriesAndBugsCount:function(c){var d=[],e=a.pluck(this.config.context.applicationContext.processes[0].practices,"name");d.push("userStories-count"),a.indexOf(e,"Bug Tracking")!==-1&&d.push("bugs-count"),b.call(this,d,c)},calculateIterationsCount:function(a){b.call(this,["iterations-count"],a)},calculateFeaturesCount:function(a){b.call(this,["features-count"],a)},calculateRequestsCount:function(a){b.call(this,["requests-count"],a)},calculateTimesCount:function(a){b.call(this,["times-count"],a)},calculateAttachmentsCount:function(a){b.call(this,["attachments-count"],a)},calculateCommentsCount:function(a){b.call(this,["comments-count"],a)},calculateTesCasesCount:function(a){b.call(this,["testCases-count"],a)},calculateUserStoriesCount:function(a){b.call(this,["userStories-count"],a)}}})