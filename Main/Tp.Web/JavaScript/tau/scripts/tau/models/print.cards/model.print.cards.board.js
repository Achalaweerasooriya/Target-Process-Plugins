define(["jQuery","Underscore","tau/core/extension.base"],function(e,a,r){return r.extend({"bus configurator.ready:last + getCardsData":function(r,n){var t=n.service("currentBoard").$element,i=t.find(".i-role-header"),d=function(r){var n=[];return a.each(i.find(".i-role-cellholder"),function(i){var d=e(i),c=d.data(r),o=".i-role-grid .i-role-cell[data-"+r+"="+c+"] .i-role-card",l=a.chain(t.find(o)).map(function(a){return e(a).data("cardData")}).value();l.length&&n.push({name:d.find(".i-role-name").text(),cards:l})}),n},c=[],o=i.length;switch(o){case 1:var l=i.data("dimension");c=d(l);break;case 2:c=d("x");break;default:var u=a.map(t.find(".i-role-card"),function(a){return e(a).data("cardData")});u.length&&(c=[{name:"",cards:u}])}this.fire("currentCards",c)}})});