define(["Underscore","tau/models/model.property","tau/models/dataprocessor/model.processor.importance"],function(_,ModelPropertyBase,ImportanceProcessor){return ModelPropertyBase.extend({getPropertyFields:function(){var baseFields=this._super(),result=_.union(baseFields,["importance"]);return result},buildRequest:function(propertyField){var chain=this._super(propertyField);return chain=chain.get("severity",{fields:["id","importance"]}),chain},onProcessProperty:function(property){if(!this.config)return;var data=this._super(property);return data.kind=this.importanceProcessor.getKind(property.importance),data},onEntityRetrieved:function(r){var property=this.property=r[0].data[this.propertyName]||{},importanceList=_(r[1].data).pluck("importance"),min=_.min(importanceList),max=_.max(importanceList);this.importanceProcessor=new ImportanceProcessor(min,max),this.processProperty(property)}})})