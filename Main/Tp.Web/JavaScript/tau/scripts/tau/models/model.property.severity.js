define(["Underscore","tau/models/model.property","tau/models/dataprocessor/model.processor.importance"],function(e,r,t){return r.extend({getPropertyFields:function(){return e.union(this._super(),["importance"])},buildRequest:function(e){var r=this._super(e);return r=r.get("severity",{fields:["id","importance"]})},onProcessProperty:function(e){var r=this._super(e);return r.kind=this.importanceProcessor.getKind(e.importance),r},onEntityRetrieved:function(r){this.property=r[0].data[this.propertyName]||{};var o=e.pluck(r[1].data,"importance"),i=e.min(o),n=e.max(o);this.importanceProcessor=new t(i,n),this.processProperty(this.property)}})});