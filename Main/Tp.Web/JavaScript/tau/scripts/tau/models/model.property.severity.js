define(["Underscore","tau/models/model.property","tau/models/dataprocessor/model.processor.importance"],function(_,a,b){return a.extend({getPropertyFields:function(){var a=this._super(),b=_.union(a,["importance"]);return b},buildRequest:function(a){var b=this._super(a);return b=b.get("severity",{fields:["id","importance"]}),b},onProcessProperty:function(a){var b=this._super(a);return b.kind=this.importanceProcessor.getKind(a.importance),b},onEntityRetrieved:function(a){var c=this.property=a[0].data[this.propertyName]||{},d=_(a[1].data).pluck("importance"),e=_.min(d),f=_.max(d);this.importanceProcessor=new b(e,f),this.processProperty(c)}})})