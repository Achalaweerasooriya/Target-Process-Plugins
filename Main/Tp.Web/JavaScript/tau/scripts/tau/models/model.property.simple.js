define(["tau/core/model-base"],function(ModelBase){return ModelBase.extend({init:function(config){this._super.apply(this,arguments);if(!config.propertyName)throw"PropertyName was not configured";this.propertyName=config.propertyName,this.placeholderText=_.asString(config.placeholderText),this.listenedEntities={}},getEntityTypeName:function(){return this.config.context.entity.entityType.name},getEntityId:function(){return this.config.context.entity.id},listenOfPropertyChanged:function(){var entityId=this.config.context.entity.id;this.listenedEntities[entityId]||(this.listenedEntities[entityId]=!0,this.attachToChangePropertiesOfCurrentEntity(this.propertyName))},onInit:function(){this.listenOfPropertyChanged(),this.store.get(this.getEntityTypeName(),{id:this.getEntityId(),fields:["id",this.propertyName]}).done({success:this.onEntityRetrieved,scope:this})},onEntityRetrieved:function(r){var value=this.config?r[0].data[this.propertyName]||this.config.defaultText:"";this.fire("dataBind",{name:this.propertyName,text:value,output:value,placeholderText:this.placeholderText})}})})