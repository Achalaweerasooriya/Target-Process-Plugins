define(["Underscore","tau/core/extension.base"],function(e,i){var t=i.extend({"bus initialize":function(e,i){var t=this,n=i,a=this._extractOptions(n,{refreshTimeout:null,settingsFieldName:"board_clipboard_collapse_state"}),r=n.context.configurator;t.fire("options.ready",a),t.fire("configurator.ready",r)},"bus boardSettings.ready":function(e,i){var t=i.boardSettings,n=this;t.get({fields:["viewMode"],callback:function(e){n.fire("viewMode.ready",e.viewMode),n.fire("viewMode.ready.fromInit",e.viewMode)}}),t.unbind({listener:this}),t.bind({listener:this,fields:["viewMode"],callback:function(e){n.fire("viewMode.ready",e.viewMode),n.fire("viewMode.ready.fromBind",e.viewMode)}})},"bus afterRender":function(e,i){this.fire("$el.ready",i.element)},"bus options.ready + configurator.ready":function(i,t,n){var a=n.getSettingsManager(),r=t.settingsFieldName;a.get({fields:[r],callback:e.bind(function(e){this.fire("collapseState.updated",e[r])},this)}),a.unbind({listener:this}),a.bind({fields:[r],listener:this,callback:e.bind(function(e){this.fire("collapseState.updated",e[r])},this)})},"bus options.ready:last + configurator.ready:last + collapseState.set":function(e,i,t,n){var a=t.getSettingsManager(),r=i.settingsFieldName,s={};s[r]=n?"expanded":"collapsed",a.set({set:s,callback:function(){}})}});return t});