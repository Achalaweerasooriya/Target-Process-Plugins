define([],function(){function fnContextProcessor(ctxRef){return _.isUndefined(ctxRef)||_.isNull(ctxRef)?null:(ctxRef.checkPractice=innerCheckPractice,ctxRef.isPracticeAvailable=innerCheckPractice,ctxRef.getTimeTrackingPolicies=innerGetTimeTrackingPolicies,ctxRef.getEffortPoint=innerGetEffortPoint,ctxRef.getTerms=innerGetTerms,ctxRef.getCustomFields=innerGetCustomFields,ctxRef.getPractices=innerGetPractices,ctxRef.getEdition=innerGetEdition,ctxRef.hasEdition=hasEdition,ctxRef.getTeam=innerGetTeam,ctxRef.getTeamId=innerGetTeamId,ctxRef.getProject=innerGetProject,ctxRef.getProjectId=innerGetProjectId,ctxRef.getProcess=innerGetProcess,ctxRef.getLoggedUser=innerGetUser,ctxRef.getProcessId=innerGetProcessId,ctxRef)}var _getPracticeByName=function(appCtx,practiceName){var practice=null,practices=appCtx.processes[0].practices;for(var i=0;i<practices.length;i++)practices[i].name.toLowerCase()===practiceName.toLowerCase()&&(practice=practices[i]);return practice},innerGetTimeTrackingPolicies=function(){var timeTrackingPractice=_getPracticeByName(this.applicationContext,"Time Tracking"),disableSpentRemain=!timeTrackingPractice;return{disableSpentRemain:disableSpentRemain}},innerGetEffortPoint=function(entityType){var planningPractice=_getPracticeByName(this.applicationContext,"Planning")||{},effortPointsName=planningPractice.effortPoints;entityType=entityType||this.entity.entityType.name.toLowerCase();if(entityType==="task"||entityType==="request")effortPointsName="Hour";var shortName=effortPointsName.toLowerCase()==="point"?"pt":"h";return{name:effortPointsName,shortName:shortName}},innerGetTerms=function(){var appCtx=this.applicationContext;return appCtx&&appCtx.processes&&appCtx.processes.length>0?appCtx.processes[0].terms:[]},innerGetCustomFields=function(){var appCtx=this.applicationContext;return appCtx&&appCtx.processes&&appCtx.processes.length>0?appCtx.processes[0].customFields:[]},innerGetPractices=function(){var appCtx=this.applicationContext;return appCtx&&appCtx.processes&&appCtx.processes.length>0?appCtx.processes[0].practices:[]},innerGetProject=function(){var appCtx=this.applicationContext;return appCtx&&appCtx.selectedProjects&&appCtx.selectedProjects.length>0?appCtx.selectedProjects[0]:null},innerGetTeam=function(){var appCtx=this.applicationContext;return appCtx&&appCtx.selectedTeams&&appCtx.selectedTeams.length>0?appCtx.selectedTeams[0]:null},innerGetEdition=function(){var appCtx=this.applicationContext,edition=appCtx&&appCtx.edition?appCtx.edition:[],result=_.isArray(edition)?edition:[edition];return result},hasEdition=function(edition){return _.indexOf(this.getEdition(),edition)>=0},innerGetProcess=function(){var appCtx=this.applicationContext;return appCtx&&appCtx.processes&&appCtx.processes.length>0?appCtx.processes[0]:null},innerGetUser=function(){var appCtx=this.applicationContext;return appCtx&&appCtx.loggedUser?appCtx.loggedUser:null},innerGetProcessId=function(){var appCtx=this.applicationContext,p=this.getProcess();return p?p.id:null},innerGetProjectId=function(){var appCtx=this.applicationContext,project=this.getProject();return project?project.id:null},innerGetTeamId=function(){var team=this.getTeam();return team?team.id:null},innerCheckPractice=function(practiceName){return null!==_getPracticeByName(this.applicationContext,practiceName)};return fnContextProcessor})