define(["Underscore","tau/store/types"],function(e,t){function n(n){return e.isUndefined(n)||e.isNull(n)?null:(n.checkPractice=C,n.isPracticeAvailable=C,n.getTimeTrackingPolicies=s,n.getEffortPoint=i,n.getTerms=o,n.getCustomFields=c,n.getPractices=a,n.getEdition=p,n.hasEdition=f,n.getTeam=l,n.getTeamId=v,n.getProject=u,n.getProjectId=m,n.getProcess=g,n.getLoggedUser=h,n.getProcessId=d,n.hoursOnlyEntityTypes=e.chain(t.getDictionary()).filter(e.matches({effortInHours:!0})).map(function(e){return e.name.toLowerCase()}).union().value(),n)}var r=function(e,t){for(var n=null,r=e.processes[0].practices,s=0;s<r.length;s++)r[s].name.toLowerCase()===t.toLowerCase()&&(n=r[s]);return n},s=function(){var e=r(this.applicationContext,"Time Tracking"),t=!e;return{disableSpentRemain:t}},i=function(t){var n=r(this.applicationContext,"Planning")||{},t=t?t:this.entity.entityType.name.toLowerCase(),s=e.contains(this.hoursOnlyEntityTypes,t)?"Hour":n.effortPoints;if(s){var i="point"===s.toLowerCase()?"pt":"h";return{name:s,shortName:i}}return{}},o=function(){var t=this.applicationContext;if(t&&t.processes&&t.processes.length>0){var n=e.find(t.processes,function(e){return e.isDefault});return(n||e.sortBy(t.processes,function(e){return e.name})[0]).terms}return[]},c=function(){var e=this.applicationContext;return e&&e.processes&&e.processes.length>0?e.processes[0].customFields:[]},a=function(){var e=this.applicationContext;return e&&e.processes&&e.processes.length>0?e.processes[0].practices:[]},u=function(){var e=this.applicationContext;return e&&e.selectedProjects&&e.selectedProjects.length>0?e.selectedProjects[0]:null},l=function(){var e=this.applicationContext;return e&&e.selectedTeams&&e.selectedTeams.length>0?e.selectedTeams[0]:null},p=function(){var t=this.applicationContext,n=t&&t.edition?t.edition:[];return e.isArray(n)?n:[n]},f=function(t){return e.indexOf(this.getEdition(),t)>=0},g=function(){var e=this.applicationContext;return e&&e.processes&&e.processes.length>0?e.processes[0]:null
},h=function(){var e=this.applicationContext;return e&&e.loggedUser?e.loggedUser:null},d=function(){var e=this.getProcess();return e?e.id:null},m=function(){var e=this.getProject();return e?e.id:null},v=function(){var e=this.getTeam();return e?e.id:null},C=function(e){return null!==r(this.applicationContext,e)};return n});