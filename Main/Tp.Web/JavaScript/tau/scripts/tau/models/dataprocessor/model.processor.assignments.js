define(["Underscore","tau/utils/utils.translation"],function(e,s){return{getAssignmentsForRole:function(s,r){return e.select(r.assignments,function(e){return e.role.id==s.id})},getAssignments:function(r){for(var t={groups:[]},n=r.roleEfforts,a=0;a<n.length;a++){for(var i=n[a].role,u={role:{id:i.id,name:s.shorten(i.name),fullName:i.name},users:[]},o=this.getAssignmentsForRole(i,r),l=0;l<o.length;l++){var m=o[l].generalUser,g=[];m.firstName?(g.push(m.firstName),m.lastName&&g.push(e.asString(m.lastName).substring(0,1)+".")):g.push(m.lastName?m.lastName:m.email),u.users.push({id:m.id,name:e.trim(g.join(" ")),assignmentId:o[l].id,avatarUri:m.avatarUri})}t.groups.push(u)}return t}}});