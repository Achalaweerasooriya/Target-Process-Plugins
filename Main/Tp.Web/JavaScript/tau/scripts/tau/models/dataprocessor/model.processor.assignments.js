define(["Underscore"],function(_){var a={getAssignmentsForRole:function(a,b){var c=_(b.assignments).select(function(b){return b.role.id==a.id});return c},getAssignments:function(a){var b={groups:[]},c=a.roleEfforts;for(var d=0;d<c.length;d++){var e=c[d].role,f={role:{id:e.id,name:e.name.substring(0,3)},users:[]},g=this.getAssignmentsForRole(e,a);for(var h=0;h<g.length;h++){var i=g[h].generalUser;f.users.push({id:i.id,name:[i.firstName," ",i.lastName.substring(0,1),"."].join(""),assignmentId:g[h].id})}b.groups.push(f)}return b}};return a})