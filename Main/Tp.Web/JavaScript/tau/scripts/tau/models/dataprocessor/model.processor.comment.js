define(["tau/configurator","tau/core/dates","tau/utils/utils.htmlConverter","tau/utils/utils.date"],function(a,b,c,d){function e(a){this.context=a}e.prototype={destroy:function(){this.context=null},convertDTO:function(b){var d=this,e={id:b.id,parentId:b.parentId,avatar:[a.getApplicationPath(),"/Avatar.ashx?UserId=",b.owner.id,"&size=32"].join(""),name:d.getName(b.owner),description:c.fromSourceToHtml(b.description),age:this.getAge(b.createDate),comments:[],deleted:"DELETED"===b.description,isRequester:b.owner.kind&&b.owner.kind.toString().toLowerCase()==="requester"};this.context.applicationContext.loggedUser.id==b.owner.id&&(e.isOwnerComment=!0);return e},getName:function(a){var b=a.firstName||"",c=a.lastName||"",d="";if(b.length>0||c.length>0)d=[b," ",c.trim().substring(0,1),"."].join("");return d},getAge:function(a){if(!a)return"Draft";var c=d.getAge(b.parse(a));return c.isZero?"Just added":c.toString()}};return e})