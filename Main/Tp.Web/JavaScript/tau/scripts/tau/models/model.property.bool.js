define(["tau/core/model-base"],function(ModelBase){return ModelBase.extend({init:function(config){this._super.apply(this,arguments);if(!config.propertyName)throw"PropertyName was not configured";this.propertyName=config.propertyName},getEntityTypeName:function(){return this.config.context.entity.entityType.name},getEntityId:function(){return this.config.context.entity.id},onInit:function(){this.store.unbind(this),this.attachToChangePropertiesOfCurrentEntity(this.propertyName),this.store.get(this.getEntityTypeName(),{id:this.getEntityId(),fields:["id",this.propertyName]}).done({success:this.onEntityRetrieved,scope:this})},onEntityRetrieved:function(r){if(!this.config)return;var entity=r[0].data,data={value:entity[this.propertyName]},label=this.config.label;label&&(data.label=label),this.fire("dataBind",data)}})})