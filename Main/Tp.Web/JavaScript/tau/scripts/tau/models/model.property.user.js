define(["tau/models/model.property","tau/configurator"],function(a,b){var c=function(a){this.model=a};c.prototype={onGetEntity:function(a){this.entity=a.data},done:function(){var a=this.entity[this.model.config.propertyName],c=a.email;if(a.firstName||a.lastName)c=_.trim([a.firstName,a.lastName].join(" "));var d={id:a.id,avatar:[b.getApplicationPath(),"/Avatar.ashx?UserId=",a.id,"&size=32"].join(""),name:c};this.model.fire("dataBind",d)}};var d=a.extend({onInit:function(){var a=this;this.listenOfPropertyChanged();var b=a.config.context,d=b.entity.entityType.name,e=b.entity.id,f=new c(a),g={},h=this.config.propertyName;g[h]=["firstName","lastName","email"],a.store.get(d,{id:e,fields:["id",g]},{scope:f,success:f.onGetEntity}).done({scope:f,success:f.done})}});return d})