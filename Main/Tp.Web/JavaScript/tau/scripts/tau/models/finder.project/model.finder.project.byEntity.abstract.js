define(["Underscore","tau/core/extension.base","tau/configurations/project.colors"],function(t,e,n){return e.extend({resetLifecycle:!0,"bus beforeInit":function(t,e){var n=e.config.context.configurator;this.fire("configurator.ready",n),this.fire("entity.ready",e.config.context.entity)},"bus configurator.ready + entity.ready":function(t,e){var n=e.getStore(),i=this.fire.bind(this,"refresh");n.unbind(this),n.on(this._getStoreOnRefreshConfig(),i)},"bus configurator.ready:last + entity.ready":function(t,e,n){this._getAssignedEntities(e.getStore(),n)},"bus configurator.ready:last + destroy":function(t,e){var n=e.getStore();n.unbind(this)},_getAvailableEntities:function(e,i){var r=this.fire.bind(this,"dataBind");t.parallel(e,function(t,e){var o=e[0],s=e[1],a=e[2];r({projects:o,processes:s,programs:a,activeTab:i,canAddProjects:!0,teams:[],canAddTeams:!1,submitLabel:"Assign",showEmpty:!0,showSearch:o.length>20,colors:n})})},_getList:function(e,n,i,r,o){e.get(n,{fields:i}).done({success:function(e){var n=e[0].data;n=t.filter(n,function(e){return-1==t.indexOf(r,e.id)}),n=t.sortBy(n,function(t){return t.name.toUpperCase()}),o(!1,n)}})}})});