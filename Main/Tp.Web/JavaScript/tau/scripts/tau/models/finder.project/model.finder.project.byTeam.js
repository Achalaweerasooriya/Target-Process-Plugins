define(["Underscore","tau/models/finder.project/model.finder.project.byEntity.abstract"],function(e,t){return t.extend({resetLifecycle:!0,"bus configurator.ready:last + teamProjects.ready:last + activeTab.ready:last + beforeInit":function(t,i,s,r){var a=i.getStore(),n=e.chain(s).pluck("project").compact().pluck("id").value(),o={projects:this._getList.bind(this,a,"project",["id","name","color"],n),processes:this._getList.bind(this,a,"process",["id","name","isDefault"],[]),programs:this._getPrograms.bind(this,a)};this._getAvailableEntities(o,r)},_getStoreOnRefreshConfig:function(){return{eventName:"afterSave",type:"team",listener:this,hasChanges:["teamProjects"]}},_getAssignedEntities:function(e,t){var i=this;e.get("team",{id:t.id,fields:[{teamProjects:[{project:["id","name"]}]}]}).done({success:function(e){i.fire("teamProjects.ready",e[0].data.teamProjects)}})}})});