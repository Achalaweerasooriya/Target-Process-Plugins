define(["Underscore","tau/models/finder.project/model.finder.project.byEntity.abstract","tau/configurations/factory.container.config"],function(e,t){return t.extend({"bus configurator.ready:last + releaseProjects.ready:last + activeTab.ready:last + beforeInit":function(t,i,s,r){var n=i.getStore(),o=e.pluck(s,"id"),a={projects:this._getProjects.bind(this,n,o),processes:this._getList.bind(this,n,"process",["id","name","isDefault"],[]),programs:this._getPrograms.bind(this,n)};this._getAvailableEntities(a,r)},_getProjects:function(t,i,s){t.getDef("project",{fields:["id","name","color","isActive",{crossprojectreleases:["id","name"]}]}).then(function(t){t=e.filter(t,function(t){return-1==e.indexOf(i,t.id)}),t=e.filter(t,function(e){return e.isActive}),t=e.sortBy(t,this._sortByName),s(!1,t)}.bind(this))},_getStoreOnRefreshConfig:function(){return{eventName:"afterSave",type:"release",listener:this,hasChanges:["projects"]}},_getAssignedEntities:function(e,t){var i=this;e.get("release",{id:t.id,fields:[{projects:["id","name"]}]}).done({success:function(e){i.fire("releaseProjects.ready",e[0].data.projects)}})}})});