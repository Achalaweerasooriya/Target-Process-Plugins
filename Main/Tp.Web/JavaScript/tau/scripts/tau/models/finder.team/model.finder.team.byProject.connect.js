define(["Underscore","tau/core/extension.base"],function(e,t){return t.extend({"bus configurator.ready:last + entity.ready:last + form.submitted":function(t,i,a,s){var r=this,d=i.getStore(),n=[],o=[];e.forEach(s.teamIds,function(e){o.push({team:{id:e}})}),n.push({id:a.id,type:a.type,fields:["id","teamProjects"],data:{teamProjects:o}});var c=[function(e){d.evictProperties(a.id,a.type,["teamProjects"]),e()}];e.forEach(n,function(e){c.push(function(t){d.save(e.type,{id:e.id,fields:e.fields,$set:e.data}).done({success:function(e){t(!1,e[0].data)}})})}),e.parallel(c,function(){r.fire("refresh")})},"bus configurator.ready:last + entity.ready:last + team.add.success":function(t,i,a,s){var r=this,d=i.getStore(),n=[];n.push({id:a.id,type:a.type,fields:["id","teamProjects"],data:{teamProjects:[{team:{id:s.id}}]}});var o=[function(e){d.evictProperties(a.id,a.type,["teamProjects"]),e()}];e.forEach(n,function(e){o.push(function(t){d.save(e.type,{id:e.id,fields:e.fields,$set:e.data}).done({success:function(e){t(!1,e[0].data)}})})}),e.parallel(o,function(){r.fire("refresh")})}})});