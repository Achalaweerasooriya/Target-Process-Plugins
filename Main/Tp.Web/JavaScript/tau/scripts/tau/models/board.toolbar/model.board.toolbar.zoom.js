define(["Underscore","tau/core/model-base"],function(i,e){var t=e.extend({"bus boardSettings.ready":function(e,t){var n=t.boardSettings;n.unbind({listener:this}),n.bind({fields:["zoomLevel"],listener:this,callback:i.bind(this.onZoomLevelUpdated,this)}),n.get({fields:["zoomLevel"],callback:i.bind(this.onDataReady,this)})},onDataReady:function(i){var e=this.normalize(i.zoomLevel,this.config);this.isValid(e,this.config)&&this.fire("zoom.provided",{value:e})},onZoomLevelUpdated:function(i){var e=this.normalize(i.zoomLevel,this.config);this.isValid(e,this.config)&&this.fire("zoom.provided",{value:e})},"bus boardSettings.ready:last + zoom.updated":function(i,e,t){var n=e.boardSettings,o=this.normalize(t.value,this.config);this.isValid(o,this.config)&&n.get({fields:["zoomLevel"],callback:function(i){i.zoomLevel!=o&&n.set({set:{zoomLevel:o}})}})},"bus boardSettings.ready + destroy":function(i,e){this.onDataReady=function(){};var t=e.boardSettings;t.unbind({listener:this})},isValid:function(i,e){return e.hasOwnProperty("min")&&i<e.min?!1:e.hasOwnProperty("max")&&i>e.max?!1:void 0!=i},normalize:function(i,e){if(e.hasOwnProperty("min")&&e.hasOwnProperty("max")){if(void 0==i)return e.defaultValue;if(i<e.min)return this.config.min;if(i>e.max)return e.max}return i}});return t});