define(["Underscore","tau/core/model-base","tau/models/board.editor/board.filter.help","tau/models/const.view.modes"],function(e,t,i,r){return t.extend({"bus beforeInit":function(e){var t=e.data.config.context.configurator;this.fire("configurator.ready",t)},"bus afterInit + boardSettings.ready:last + configurator.ready:last":function(t,s,n){var o=n.boardSettings,a=this.config.context.configurator.getLoggedUser(),l=this.config.context.configurator.getBoardAccessService(),d=e.bind(function(e,t){var i=e.cells||{types:[]};i.name="cells",i.filter=e.user&&e.user.cardFilter?e.user.cardFilter:"";var n=e.viewMode,o=n===r.BOARD||n===r.DETAILS;i.predefinedFilters=t,this.fire("cell.types",i.types),this.fire("dataBind",{name:e.name,isShared:e.isShared,viewMode:e.viewMode,isPrintable:o,cells:i,zoom:{value:e.zoomLevel,min:s.config.min,max:s.config.max},isEditable:l.isEditable(e,a)})},this);o.get({fields:["ownerIds","user","id","name","isShared","viewMode","zoomLevel","cells"],callback:function(e){(new i).get({cells:e.cells}).done(function(t){d(e,t.cells||[])})}}),o.unbind({listener:this}),o.bind({fields:["cells"],listener:this,callback:e.bind(function(e){this.fire("cell.types",e.cells.types)},this)})},"bus configurator.ready:last + user.filter.changed":function(e,t,i){t.service("boardSettings").set({set:{user:{cardFilter:i}}})},"bus boardSettings.ready:last + destroy":function(e,t){t.boardSettings.unbind({listener:this})}})});