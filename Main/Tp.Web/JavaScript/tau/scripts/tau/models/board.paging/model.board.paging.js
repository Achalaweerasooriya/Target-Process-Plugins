define(["Underscore","tau/core/model-base"],function(_,BaseModel){var Model=BaseModel.extend({"bus afterInit":function(evt){var self=this,config=evt.data.config,configurator=evt.data.config.context.configurator;self.fire("configurator.ready",configurator),configurator.getComponentBusRegistry().getByName(config.boardName).done(function(bus){self.fire("boardBus.ready",bus)})},"bus boardBus.ready":function(evt){var boardBus=evt.data,self=this,_f=_.bind(self.fire,self),_fire=function(newName){return function(evt){_f(newName||evt.name,evt.data)}};boardBus.removeAllListeners(this),boardBus.on("board.paging.settings",_fire("pagingData.ready"),this),boardBus.on("board.paging.settings.retrieved",_fire("pagingData.retrieved"),this),boardBus.on("page.move.to",_fire("refresh"),this),boardBus.fire("board.paging.settings.retrieve",{})},"bus pagingData.retrieved":function(evt){var boardData=evt.data,paging=this._calculatePaging(boardData),self=this;self.fire("dataBind",paging),self.fire("paging.ready",paging)},"bus paging.ready:last+pagingData.ready":function(evt){var currentPaging=_.values(evt)[0].data,boardData=_.values(evt)[1].data,newPaging=this._calculatePaging(boardData);(currentPaging.pagesX!=newPaging.pagesX||currentPaging.pagesY!=newPaging.pagesY)&&this.fire("refresh")},"bus boardBus.ready:last+page.switched":function(evt){var boardBus=_.values(evt)[0].data,page=_.values(evt)[1].data,self=this;boardBus.fire("page.switched",page)},"bus boardBus.ready+destroy":function(evt){var boardBus=_.values(evt)[0].data;boardBus.removeAllListeners(this)},_calculatePaging:function(boardData){var data={pagesX:boardData.x.totalPages||1,pagesY:boardData.y.totalPages||1,current:boardData.page};return data}});return Model})