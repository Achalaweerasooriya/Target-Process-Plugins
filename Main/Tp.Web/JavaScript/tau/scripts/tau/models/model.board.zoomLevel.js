define(["Underscore","tau/core/model-base"],function(_,BaseModel){var ZoomLevelModel=BaseModel.extend({"bus boardSettings.ready":function(evt){var self=this,boardSettings=evt.data.boardSettings;boardSettings.unbind({listener:self}),boardSettings.bind({fields:["zoomLevel"],listener:self,callback:_.bind(self.onZoomLevelUpdated,self)}),boardSettings.get({fields:["zoomLevel"],callback:function(r){self.onDataReady(r)}})},onDataReady:function(r){var self=this,data={zoomLevel:r.zoomLevel};self.fire("zoomLevelReady",data),this.config.bindData&&self.fire("dataBind",data),!this.validateZoomLevel(r.zoomLevel)&&this.normalizeZoomLevel(r.zoomLevel)&&this.fire("updateZoomLevel",{zoomLevel:this.normalizeZoomLevel(r.zoomLevel)})},validateZoomLevel:function(zoomLevel){return this.config.hasOwnProperty("min")&&zoomLevel<this.config.min?!1:this.config.hasOwnProperty("max")&&zoomLevel>this.config.max?!1:zoomLevel!=undefined},normalizeZoomLevel:function(zoomLevel){if(this.config.hasOwnProperty("min")&&this.config.hasOwnProperty("max")){if(zoomLevel==undefined)return this.config.defaultValue;if(zoomLevel<this.config.min)return this.config.min;if(zoomLevel>this.config.max)return this.config.max}return zoomLevel},onZoomLevelUpdated:function(r){var self=this;if(!this.validateZoomLevel(r.zoomLevel))return;self.bus.fire("zoomLevelUpdated",r)},"bus boardSettings.ready:last+updateZoomLevel":function(evt){var boardSettings=evt["boardSettings.ready"].data.boardSettings,data=evt.updateZoomLevel.data,zoomLevel=data.zoomLevel;this.validateZoomLevel(zoomLevel)||(zoomLevel=this.normalizeZoomLevel(zoomLevel)),boardSettings.set({set:{zoomLevel:zoomLevel}})},"bus boardSettings.ready+destroy":function(evt){var self=this;self.onDataReady=function(){};var boardSettings=evt["boardSettings.ready"].data.boardSettings;boardSettings.unbind({listener:this})}});return ZoomLevelModel})