define(["Underscore","./model.choice.base"],function(e,t){return t.extend({name:"priority-list-model",propertyType:"priority",onInit:function(){var t=this,i=function(i){var n=i[0].data;t.assignable=n,t.store.get(t.propertyType,t.createGetPrioritiesCommand()).done({success:e.bind(t.onDataRetrieved,t)})};this.getAssignable(i)},getRequiredFields:function(){return[{entityType:["id"]}]},createGetPrioritiesCommand:function(){return{fields:["id","name","importance",{entityType:["id"]}]}},processData:function(t){var i=this.getCurrentEntityId(),n=this.assignable.entityType.id,r=[];e.each(t,function(e){e.id!==i&&e.entityType.id===n&&r.push({id:e.id,name:e.name,importance:e.importance||0})}),r.sort(function(e,t){return e.importance-t.importance}),this.fire("dataBind",{states:r,completed:!0})}})});