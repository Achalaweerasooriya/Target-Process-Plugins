define(["Underscore","./model.choice.base"],function(e,t){return t.extend({name:"userStory-list",propertyType:"userStory",onInit:function(){var t=this,r=function(){t.store.get("userStory",{fields:["id","name",{project:["id","name"]}]}).done({success:e.bind(t.onDataRetrieved,t)})};r()},processData:function(t){var r=this.getCurrentEntityId(),o={};e.each(t,function(e){e.project=e.project||{},e.id!=r&&(o.hasOwnProperty(e.project.id)||(o[e.project.id]=e.project,o[e.project.id].items=[]),o[e.project.id].items.push(e))});var i={states:this.sortProjects(e.values(o)),completed:!0};this.fire("dataBind",i)}})});