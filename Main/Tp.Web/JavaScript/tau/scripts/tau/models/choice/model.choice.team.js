define(["Underscore","./model.choice.base"],function(e,t){return t.extend({propertyType:"team","bus beforeInit":function(t,n){var i=n.config.context.entity,a=n.config.context.configurator,r=a.getStore(),o=e.bind(this.fire,this);r.get("team",{fields:["id","name","icon"]}).done(function(e){o("items.ready",e[0].data)}),r.get(i.entityType.name,{id:i.id,fields:["id",{team:["id"]}]}).done(function(e){o("currentItem.ready",e[0].data.team||{})})},"bus beforeInit:last + items.ready + currentItem.ready":function(t,n,i,a){var r=n.config;i=e.sortBy(i,function(e){return e.name.toLowerCase()});var o={states:e.reject(i,function(e){return a&&e.id===a.id}),completed:!0,nullableValue:this.isNullableValue(),templateOption:r.templateOption};this.fire("dataBind",o)}})});