define(["Underscore","./model.choice.base"],function(e,t){return t.extend({propertyType:"entityState",onInit:function(){this.getAssignable(e.bind(function(t){var i=t[0].data;this.store.get(this.propertyType,this.createGetStateForAssignableCommand(i)).done({success:e.bind(this.onDataRetrieved,this)})},this))},getRequiredFields:function(){return[{entityState:["id"]}]},createGetStateForAssignableCommand:function(e){return{id:e.entityState.id,fields:["id","name","isCommentRequired",{nextStates:["id","name","isCommentRequired","numericPriority"]}]}},processData:function(t){var i=[];t.nextStates=e.sortBy(t.nextStates,function(e){return e.numericPriority}),e.each(t.nextStates,function(e){i.push({id:e.id,name:e.name,isCommentRequired:e.isCommentRequired})}),this.fire("dataBind",{states:i,completed:!0})}})});