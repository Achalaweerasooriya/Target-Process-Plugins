define(["Underscore","tau/models/finder.entity/model.finder.entity.data"],function(e,n){return n.extend({processInitDsl:function(n,t){var i=n.context.entity,d=$.Deferred(),r=n.dependencyType;return t.getStore().get(i.entityType.name,{id:i.id,fields:[{masterRelations:[{master:["id"]}]},{slaveRelations:[{slave:["id"]}]}]}).done(function(t){var a=e.pluck(e.pluck(t[0].data[r+"Relations"],r),"id");a.push(i.id);var s=e.map(a,function(n){return e.sprintf("id != %d",n)});n.filter.init_dsl=s.join(" and "),d.resolve(n)}),d.promise()}})});