define(["Underscore","tau/core/extension.base","tau/models/board.editor/board.filter.suggestionManager"],function(e,t,r){return t.extend({"bus configurator.ready":function(e,t){var n=new r(t);this.fire("suggestionManager.ready",n)},"bus suggestionManager.ready:last + types.ready:last + filter.autocomplete.preload":function(t,r,n,o){var s=o.value;if(s&&0!==s.length&&"?"==s[0]){var a=[s.trim()+" ",s.trim()+"."];e.each(a,function(e){var t={query:{resourceTypes:n,script:e}};r.get(t)})}},"bus suggestionManager.ready:last + types.ready:last + filter.autocomplete.resolve":function(t,r,n,o){var s=o.request.term.slice(0,o.$input[0].selectionStart),a=function(t){var r=t.Suggestions?t.Suggestions.Items:[];r=e.map(r,function(e){return e.Source=t.Source,e.Position=t.Position,e}),o.next(r)},i=function(){o.next([])},u={query:{resourceTypes:n,script:s}};r.get(u).done(a).fail(i)}})});