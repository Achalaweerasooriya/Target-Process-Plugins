define(["Underscore","tau/models/propertyLists/model.propertyList.base"],function(_,a){return a.extend({name:"release-list",propertyType:"feature",onInit:function(){var a=this;a.store.get("project",{fields:["id","name",{process:["id"]},{features:["id","name"]}]},{success:a.onProjectRetrieved.tauCreateDelegate(a)}).get("feature",{fields:["id","name",{project:["id"]}]},{success:a.onFeatureRetrieved.tauCreateDelegate(a)}).get("process",{fields:["id",{practices:["name"]}]},{success:a.onProcessesRetrieved.tauCreateDelegate(a)}).done({success:a.onDataRetrieved.tauCreateDelegate(a)})},onFeatureRetrieved:function(a){this.featureList=a.data},onProjectRetrieved:function(a){this.projectList=a.data},onProcessesRetrieved:function(a){this.processList=a.data},getFeaturesForProject:function(a){var b=this.getCurrentEntityId(),c=function(a){a.id!==b&&this.push(a)},d=[];return this.projectHasRequirementsPractice(a)&&_.each(a.features,c,d),d},onDataRetrieved:function(){this.processData(this.projectList,this.processList)},projectHasRequirementsPractice:function(a){var b=a.process.id,c=_.detect(this.processList,function(a){return a.id==b}),d=_.detect(c.practices,function(a){return a.name=="Requirements"});return!_.isEmpty(d)},processData:function(a,b){var c=[];this.processList=b,_.each(this.sortProjects(a),function(a){var b=this.getFeaturesForProject(a);_.isEmpty(b)||c.push({id:a.id,name:a.name,items:b})},this);var d={states:c,completed:!0,nullableValue:this.getCurrentEntityId()!==null&&this.propertyIsNotEmpty()};this.fire("dataBind",d)}})})