define(["Underscore","tau/models/propertyLists/model.propertyList.base"],function(_,a){return a.extend({onInit:function(){var a=this,b=this.config,c=this.config.context.entity;a.store.get(c.entityType.name,{id:c.id,fields:["id",b.data.name]}).done({success:_.bind(a.onDataRetrieved,a)})},onDataRetrieved:function(a){var b=a[0].data,c=b[this.config.data.name],d=this.config.values;_.forEach(d,function(a,b){_.isObject(a)==0&&(a={id:a,name:a},d[b]=a)});var e=!!this.config.showReset&&!!c,f={states:_.reject(d,function(a){return c&&a.id==c}),completed:!0,nullableValue:e};this.fire("dataBind",f)},"bus updateState":function(a){var b={},c=null;a.data&&a.data.id&&(c=a.data.id),b[this.config.data.name]=c,this.fire("save",b)}})})