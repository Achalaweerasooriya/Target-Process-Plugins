define(["Underscore","tau/models/propertyLists/model.propertyList.base"],function(_,a){return a.extend({name:"userStory-list",propertyType:"userStory",onInit:function(){var a=this,b=function(){a.store.get("userStory",{fields:["id","name",{project:["id","name"]}]}).done({success:a.onDataRetrieved.tauCreateDelegate(a)})};b()},processData:function(a){var b=this.getCurrentEntityId(),c={};_.each(a,function(a){if(a.id==b)return;c.hasOwnProperty(a.project.id)||(c[a.project.id]=a.project,c[a.project.id].items=[]),c[a.project.id].items.push(a)});var d={states:this.sortProjects(_.values(c)),completed:!0,nullableValue:b!==null&&this.config.context.entity.entityType.name.toLowerCase()!="task"&&this.propertyIsNotEmpty()};this.fire("dataBind",d)}})})