define(["tau/core/extension.base"],function(ModelBase){var Model=ModelBase.extend({"bus beforeInit":function(evt,initConfig){var context=initConfig.config.context,configurator=context.configurator,store=configurator.getStore(),entity=context.entity;store.unbind(this),store.on({eventName:"afterSave",type:entity.entityType.name,listener:this,filter:{id:entity.id},hasChanges:["name"]},_.bind(function(){this.fire("refresh")},this));var fields=["id","name"];store.get(entity.entityType.name,{id:entity.id,fields:fields}).done({success:_.bind(function(r){this.fire("data.ready",r[0].data)},this)})},"bus beforeInit+data.ready":function(evt,initConfig,data){var context=initConfig.config.context,configurator=context.configurator,entity=context.entity,dataToBind=_.pick(data,"id","name");dataToBind.entityType={name:entity.entityType.name.toLowerCase()},dataToBind.entity={name:data.name},dataToBind.url=configurator.getUrlBuilder().getNewViewUrl(dataToBind.id,dataToBind.entityType.name,!0),this.fire("dataBind",dataToBind)}});return Model})