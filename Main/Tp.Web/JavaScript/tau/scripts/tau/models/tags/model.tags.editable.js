define(["Underscore","tau/core/extension.base"],function(_,ExtensionBase){return ExtensionBase.extend({"bus configurator.ready:last + entity.ready:last + tagsProcessor.ready:last + form.submitted":function(evt,configurator,entity,tagsProcessor,formData){var store=configurator.getStore();store.save(entity.entityType.name,{id:entity.id,$set:{tags:tagsProcessor.asString(formData.tags)},fields:["id","tags"]}).done()},"bus configurator.ready + entity.ready + beforeInit":function(evt,configurator,entity){var store=configurator.getStore();store.unbind(this),store.on({eventName:"afterSave",type:entity.entityType.name,listener:this,filter:{id:entity.id}},_.bind(function(e){e.data.cmd&&e.data.cmd.config.$set&&_.has(e.data.cmd.config.$set,"tags")&&this.fire("refresh")},this))},"bus configurator.ready > destroy":function(evt,configurator){var store=configurator.getStore();store.unbind(this)}})})