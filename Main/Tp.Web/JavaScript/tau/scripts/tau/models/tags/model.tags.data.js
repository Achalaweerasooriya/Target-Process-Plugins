define(["Underscore","tau/core/extension.base","tau/models/tags/tagsProcessor"],function(e,t,r){return t.extend({"bus beforeInit":function(e,t){var i=t.config.context.entity,n=t.config.context.configurator;this.fire("entity.ready",i),this.fire("configurator.ready",n),this.fire("tagsProcessor.ready",new r)},"bus configurator.ready + entity.ready + tagsProcessor.ready + beforeInit":function(t,r,i,n){var a=r.getStore();a.evictProperties(i.id,i.entityType.name,["tags"]),a.get(i.entityType.name,{id:i.id,fields:["id","tags"]}).done(e.bind(function(e){this.fire("dataBind",{tags:this._process(n.asArray(e[0].data.tags),r)})},this))},_process:function(t,r){return t=e.map(t,function(e){var t={name:e},i=t.name.match(/^duplicateOf\#(\d+)$/i);return i&&(t.isDuplicate=!0,t.href=r.getUrlBuilder().getNewViewUrl(i[1],"bug",!0)),t})}})});