define(["Underscore","tau/core/model-base"],function(e,t){return t.extend({"bus registerStoreRequest":function(){var e=this.config.context.entity||{entityType:{}},t={role:["id","name"]},i={generalUser:["id","avatarUri","firstName","lastName"]};this.fire("get",{type:e.entityType.name,query:{id:e.id,fields:[{assignments:["id",t,i],list:!0}]},callback:{scope:this,success:this.onEntityRetrieved}})},"bus assignmentsUserExluder":function(e){var t=this.config.data||{},i=e.data.data,s=[],n=t.roleId||(t.role||{}).id;if(n)for(var r=i.assignments||[],a=0;a<r.length;a++)r[a].role.id==n&&s.push(r[a].generalUser);this.fire("excludedUserReady",s)},onEntityRetrieved:function(e){this.fire("assignmentsUserExluder",e)}})});