define(["Underscore","tau/configurator"],function(_,a){var b={project:{listType:"projects",getCommand:function(a){return{fields:["id","name"]}},filter:function(a,b,c){var d=c.id,e=[];return _.each(b,function(a){a.id!==d&&e.push({id:a.id,name:a.name})}),{items:e,completed:!0}}},company:{listType:"companies",getCommand:function(a){return{fields:["id","name"]}},filter:function(a,b,c){var d=c.id,e=[];return _.each(b,function(a){a.id!==d&&e.push({id:a.id,name:a.name})}),{items:e,completed:!0}}},process:{listType:"processes",getCommand:function(a){return{fields:["id","name"]}},filter:function(a,b,c){var d=c.id,e=[];return _.each(b,function(a){a.id!==d&&e.push({id:a.id,name:a.name})}),{items:e,completed:!0}}},feature:{listType:"projects",getCommand:function(a){return{fields:["id","name",{process:["id"]},{features:["id","name"]}]}},filter:function(a,b,c,d){var e=d.store,f=c.id||null;_.each(b,function(a){e=e.get("process",{id:a.process.id,fields:[{processes:["name"]}]})}),e.done({success:function(){},scope:this});var g=function(a){a.id!==f&&this.push(a)},b=[];return _.each(b,function(a){var c=[];_.each(a.features,g,c),b.push({id:a.id,name:a.name,items:b})}),{items:b,completed:!0,nullableValue:f!==null}}}};return{get:function(a){var c=b[a];if(!c)throw"Type is not supported";return c}}})