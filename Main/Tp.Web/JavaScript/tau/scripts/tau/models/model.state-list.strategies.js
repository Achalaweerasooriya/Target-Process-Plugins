define(["Underscore","tau/configurator","tau/core/dates","libs/date.js/build/date"],function(a,b,c){var d={project:{listType:"projects",getCommand:function(a){return{fields:["id","name"]}},filter:function(b,c,d){var e=d.id,f=[];a.each(c,function(a){a.id!==e&&f.push({id:a.id,name:a.name})});return{items:f,completed:!0}}},feature:{listType:"projects",getCommand:function(a){return{fields:["id","name",{process:["id"]},{features:["id","name"]}]}},filter:function(b,c,d,e){var f=e.store,g=d.id||null;a.each(c,function(a){f=f.get("process",{id:a.process.id,fields:[{processes:["name"]}]})}),f.done({success:function(){},scope:this});var h=function(a){a.id!==g&&this.push(a)},c=[];a.each(c,function(b){var d=[];a.each(b.features,h,d),c.push({id:b.id,name:b.name,items:c})});return{items:c,completed:!0,nullableValue:g!==null}}}};return{get:function(a){var b=d[a];if(!b)throw"Type is not supported";return b}}})