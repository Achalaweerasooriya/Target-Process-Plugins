define(["Underscore","tau/configurator"],function(a,b){var c={project:{listType:"projects",getCommand:function(a){return{fields:["id","name"]}},filter:function(b,c,d){var e=d.id,f=[];return a.each(c,function(a){a.id!==e&&f.push({id:a.id,name:a.name})}),{items:f,completed:!0}}},company:{listType:"companies",getCommand:function(a){return{fields:["id","name"]}},filter:function(b,c,d){var e=d.id,f=[];return a.each(c,function(a){a.id!==e&&f.push({id:a.id,name:a.name})}),{items:f,completed:!0}}},process:{listType:"processes",getCommand:function(a){return{fields:["id","name"]}},filter:function(b,c,d){var e=d.id,f=[];return a.each(c,function(a){a.id!==e&&f.push({id:a.id,name:a.name})}),{items:f,completed:!0}}},feature:{listType:"projects",getCommand:function(a){return{fields:["id","name",{process:["id"]},{features:["id","name"]}]}},filter:function(b,c,d,e){var f=e.store,g=d.id||null;a.each(c,function(a){f=f.get("process",{id:a.process.id,fields:[{processes:["name"]}]})}),f.done({success:function(){},scope:this});var h=function(a){a.id!==g&&this.push(a)},c=[];return a.each(c,function(b){var d=[];a.each(b.features,h,d),c.push({id:b.id,name:b.name,items:c})}),{items:c,completed:!0,nullableValue:g!==null}}}};return{get:function(a){var b=c[a];if(!b)throw"Type is not supported";return b}}})