define(["Underscore","tau/core/extension.base.stateful","tau/utils/utils.date","tau/store/testcaserun.status"],function(t,s,e,i){return s.extend({"bus beforeInit":function(t,s){this.entity=s.config.context.entity,this.store.get(this.entity.entityType.name,{id:this.entity.id,fields:["status",{testplanrun:[{entitystate:["isFinal"]}]}]}).done({success:function(t){var s=t[0].data;this.fire("dataBind",{passed:i.isPassed(s.status),failed:i.isFailed(s.status),skipped:i.isSkipped(s.status),blocked:i.isBlocked(s.status),isTestPlanRunStateFinal:s.testplanrun.entitystate.isFinal,status:i})},scope:this})},"bus testCaseRun.status.selected":function(t,s){this.store.save("testcaserun",{$set:{id:this.entity.id,status:s}}).done()}})});