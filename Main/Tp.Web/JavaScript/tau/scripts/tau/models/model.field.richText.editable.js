define(["tau/core/model.editable.base","tau/utils/utils.htmlConverter","tau/utils/utils.jsonSchema"],function(ModelBase,htmlConverter,jsonSchema){var editableModel=ModelBase.extend({category:"edit",name:"model.field.richText.editable",schema:null,init:function(config){this._super.apply(this,arguments);var schemaConfig={type:"object",properties:{}};this.fieldName=config.fieldName,schemaConfig.properties[this.fieldName]={optional:!0,empty:!0,type:"string"},this.schema=jsonSchema.Schema.create(schemaConfig)},"bus dataBind":function(){this.bus.fire("permissionsReady",{editable:!0,deletable:!0})},"bus beforeSave":function(evtData){var item=evtData.data.cmd.$set;item[this.fieldName]=htmlConverter.fromHtmlToSource(item[this.fieldName])},"bus validate":function(evt){var args=evt.data,data=args.cmd.$set;args.validation=this.schema.validate(data)}});return editableModel})