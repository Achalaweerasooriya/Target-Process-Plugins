define(["Underscore","tau/models/model.iteration.progressBar"],function(e,t){var o=t.extend({name:"Iteration Progress Bar",_getDefaultFields:function(){return["bugs-effortToDo-sum","bugs-effortCompleted-sum","userStories-effortToDo-sum","userStories-effortCompleted-sum",{features:["effortToDo","effortCompleted","userStories-count"]}]},onEntityRetrieved:function(t){var o=t.data,r=e.filter(o.features,function(e){return 0===e["userStories-count"]}),f=e.pluck(r,"effortToDo"),u=e.pluck(r,"effortCompleted"),s=function(t){return e.reduce(t,function(e,t){return e+t},0)},n=o["bugs-effortToDo-sum"]+o["userStories-effortToDo-sum"]+s(f),i=o["bugs-effortCompleted-sum"]+o["userStories-effortCompleted-sum"]+s(u);this.effortToDo=n,this.effortCompleted=i,this.calculatePercentCompleted()}});return o});