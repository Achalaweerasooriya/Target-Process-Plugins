define(["Underscore","tau/models/model.iteration.progressBar"],function(e,t){var o=t.extend({name:"Iteration Progress Bar",_getDefaultFields:function(){return["bugs-effortToDo-sum","bugs-effortCompleted-sum","userStories-effortToDo-sum","userStories-effortCompleted-sum",{features:["effortToDo","effortCompleted","userStories-count"]}]},onEntityRetrieved:function(t){var o=t.data,r=e.filter(o.features,function(e){return 0===e["userStories-count"]}),s=e.pluck(r,"effortToDo"),f=e.pluck(r,"effortCompleted"),u=o["bugs-effortToDo-sum"]+o["userStories-effortToDo-sum"]+e.sum(s),n=o["bugs-effortCompleted-sum"]+o["userStories-effortCompleted-sum"]+e.sum(f);this.effortToDo=u,this.effortCompleted=n,this.calculatePercentCompleted()}});return o});