define(["Underscore","tau/core/extension.base"],function(_,ExtensionBase){return ExtensionBase.extend({"bus entity.ready + configurator.ready":function(evt,entity,configurator){var gb=configurator.getGlobalBus();gb.removeAllListeners(this),gb.on("entityWasMovedToProject",_.bind(this.onEntityWasMovedToProject,this,entity),this),gb.on("refreshMainEntity",_.bind(this.refresh,this,entity),this)},"bus configurator.ready > destroy":function(evt,configurator){var gb=configurator.getGlobalBus();gb.removeAllListeners(this)},onEntityWasMovedToProject:function(entity,evt){entity.id==evt.data.entity.id&&this.refresh(entity)},refresh:function(entity){this.fire("entity.toEvict",entity),this.fire("refresh")},"bus configurator.ready > entity.toEvict":function(evt,configurator,entity){var store=configurator.getStore();store.evictPersistedObject(entity.id,"context"),store.evictPersistedObject(entity.id,entity.entityType.name)}})})