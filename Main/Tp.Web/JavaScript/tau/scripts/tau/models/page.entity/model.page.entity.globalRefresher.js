define(["Underscore","tau/core/extension.base"],function(t,e){return e.extend({"bus entity.ready + configurator.ready":function(e,i,n){var r=n.getGlobalBus();r.removeAllListeners(this),r.on("entityWasMovedToProject",t.bind(this.onEntityWasMovedToProject,this,i),this),r.on("refreshMainEntity",t.bind(this.refresh,this,i),this)},"bus configurator.ready > destroy":function(t,e){var i=e.getGlobalBus();i.removeAllListeners(this)},onEntityWasMovedToProject:function(t,e){t.id==e.data.entity.id&&this.refresh(t)},refresh:function(t){this.fire("entity.toEvict",t),this.fire("refresh")},"bus configurator.ready > entity.toEvict":function(t,e,i){var n=e.getStore();n.evictPersistedObject(i.id,"context"),n.evictPersistedObject(i.id,i.entityType.name)}})});