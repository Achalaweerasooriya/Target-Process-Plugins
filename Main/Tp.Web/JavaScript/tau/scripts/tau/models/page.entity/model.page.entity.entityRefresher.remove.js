define(["Underscore","tau/core/extension.base"],function(e,t){return t.extend({"bus entity.ready + configurator.ready":function(t,n,i){var o=i.getStore(),r=e.bind(this.fire,this);o.unbind(this),o.on({eventName:"beforeRemove",type:n.entityType.name,listener:this},function(e){var t=e.data,i=t.cmd.config.id;n.id==i&&r("entity.beforeDelete",t)}),o.on({eventName:"afterRemove",type:n.entityType.name,listener:this},function(e){var t=e.data,i=t.cmd?t.cmd.config.id:t.obj?t.obj.id:t.id;n.id==i&&r("entity.deleted",t)})},"bus configurator.ready > destroy":function(e,t){t.getStore().unbind(this)}})});