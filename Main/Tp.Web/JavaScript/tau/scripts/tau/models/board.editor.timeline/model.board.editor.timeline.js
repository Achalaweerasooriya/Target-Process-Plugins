define(["Underscore","tau/core/extension.base"],function(e,n){return n.extend({"bus beforeInit + boardSettings.ready:last":function(n,t,i){var s=t.config.context.configurator,o=i.boardSettings;o.get({fields:["timelineSettings","ownerIds"]}).done(function(n){var t=s.getLoggedUser(),i=e.defaults(n.timelineSettings||{},{showPlannedInPast:!1,showForecast:!1,editable:s.getBoardAccessService().isEditable(n,t)});this.fire("dataBind",i)}.bind(this)),this.on("destroy",function(){o.unbind({listener:this})}),o.unbind({listener:this}),o.bind({fields:["timelineSettings"],listener:this,callback:function(){this.fire("refresh")}.bind(this)})},"bus boardSettings.ready:last + afterRender":function(e,n,t){var i=t.element,s=t.view.config.context.configurator;s.getFeaturesService().isEnabled("board.timeline.forecast")||i.find("[name=showForecast]").parents("li:eq(0)").css("display","none");var o=n.boardSettings;i.on("change",":checkbox",function(){var e={showPlannedInPast:i.find("[name=showPlannedInPast]").prop("checked"),showForecast:i.find("[name=showForecast]").prop("checked")};o.set({set:{timelineSettings:e}})})}})});