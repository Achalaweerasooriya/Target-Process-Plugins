define(["Underscore","tau/core/extension.base"],function(e,i){return i.extend({"bus beforeInit":function(i){var t=i.data.config.context.configurator;this.fire("configurator.ready",t);var r=$.Deferred();t.service("boardSettings").get({fields:["ownerIds","prioritization","cells"],callback:e.bind(function(i){var n=e.defaults(i.prioritization||{},{mode:"enabled"});if(t.getBoardAccessService().isEditable(i,t.getLoggedUser())){var a={definition:{cells:i.cells}},o=t.getSliceFactory().create(a);o.spaceV2().done(function(e){var i=e.data,t=i.metaInfo.isPrioritizable;r.resolve({prioritization:n,access:{edit:t}})})}else r.resolve({prioritization:n,access:{edit:!1}})},this)}),r.done(e.bind(function(e){this.fire("dataBind",e)},this)),t.service("boardSettings").unbind({listener:this}),t.service("boardSettings").bind({fields:["cells"],listener:this,callback:e.bind(function(){this.fire("refresh")},this)})},"bus configurator.ready + afterRender":function(i,t,r){var n=r.element,a=t.service("boardSettings");n.on("change",":radio",function(){var i={};e.forEach(n.find("form").serializeArray(),function(e){i[e.name]=e.value}),a.set({set:{prioritization:i}})})}})});