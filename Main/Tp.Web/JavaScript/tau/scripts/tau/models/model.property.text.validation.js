define(["tau/core/model-base","tau/utils/utils.jsonSchema"],function(t,e){var a=t.extend({category:"edit",name:"Model text validation",schema:e.Schema.create({type:"string",optional:!1,empty:!1,maxLength:50,minLength:0,pre:["trim"]}),"bus afterRender":function(t){this.$element=t.data.element},"bus validate":function(t){this._getProperty().editableText("resetValidationErrors");var e=t.data,a=e.cmd.$set[this.config.propertyName];e.validation=this.schema.validate(a),e.validation&&1==e.validation.isError()||(e.validation=this.schema.validate(a),e.cmd.$set[this.config.propertyName]=e.validation.instance)},"bus afterValidate":function(t){var e=t.data.validation;this._getProperty().editableText("setValue",e.instance)},"bus validationFailed":function(t){var e=t.data.validation;this._getProperty().editableText("setValidationErrors",e.errors[0].description)},_getProperty:function(){return this.$element.find(".property-text")}});return a});