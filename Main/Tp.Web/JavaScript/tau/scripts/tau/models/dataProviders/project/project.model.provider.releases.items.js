define(["Underscore","tau/models/dataProviders/model.provider.items.base","tau/utils/utils.date"],function(t,e,r){return e.extend({fetch:function(t){this._fetch("iterations","iteration",!1,t)},_createDetailCommand:function(t){var e={};return e[t]=["id","name","tags","startDate","endDate","canBeFinished",{release:["id","name"]},"bugs-effortToDo-sum","bugs-effortCompleted-sum","userStories-effortToDo-sum","userStories-effortCompleted-sum"],e},_getAssignedEffort:function(t){var e={},r=0,o=0;return r+=t["bugs-effortToDo-sum"],r+=t["userStories-effortToDo-sum"],o+=t["bugs-effortCompleted-sum"],o+=t["userStories-effortCompleted-sum"],e.value=Math.round(100*(r+o))/100,e.unit=this.config.context.getEffortPoint(t.__type),e},_convertItem:function(t){var e={id:t.id,name:t.name,__type:t.__type,tags:this._processTags(t),release:t.release,assignedEffort:this._getAssignedEffort(t),startDate:r.format.date.short(r.convertToTimezone(t.startDate)),endDate:r.format.date.short(r.convertToTimezone(t.endDate)),url:this.config.context.configurator.getUrlBuilder().getNewViewUrl(t.id,t.__type,!0)};return e},_convertData:function(t){return t=this._super(t),this._sortByStartDate(t)},_sortByStartDate:function(e){return t.sortBy(e,function(t){return-1*t.startDate})}})});