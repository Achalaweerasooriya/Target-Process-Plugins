define(["Underscore","tau/models/dataProviders/model.provider.items.user_stories_bugs","tau/models/dataProviders/model.provider.items.user_stories","tau/models/dataProviders/model.provider.items.bugs"],function(_,BaseProvider,UserStoriesProvider,BugsProvider){return BaseProvider.extend({init:function(config){this.config=config,config.additionalFields=["iteration"],this.providers=[new UserStoriesProvider(config)],this.config.context.isPracticeAvailable("Bug Tracking")&&this.providers.push(new BugsProvider(config))},_convertData:function(data){return data=BaseProvider.prototype._convertData.call(this,data),_.forEach(data,function(item){item.visibleEntityState=item.entityState.name}),this._sortByPriority(data)},_sortByState:function(data){return _.forEach(data,function(item){var entityState=item.entityState;item.stateWeight=entityState.isInitial?0:entityState.isFinal?100500:entityState.numericPriority}),data=_.sortBy(data,function(item){return item.stateWeight}),data}})})