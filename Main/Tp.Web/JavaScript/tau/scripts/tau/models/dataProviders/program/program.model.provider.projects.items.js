define(["jQuery","Underscore","tau/models/dataProviders/model.provider.items.base"],function(t,e,n){var r=n.extend({sparklineLength:16,fetch:function(t){this._fetch("projects","project",!1,t)},_fetch:function(t,e,n,r){var i=this.config.context.entity,o=this.config.context.configurator.getStore2();o.findAll("project?select={"+['"project" as __type',"id","name","color","Bugs.Count(entityState.IsFinal != true) as openBugsCount","Bugs.Count(entityState.IsFinal == true) as closedBugsCount","UserStories.Count(entityState.IsFinal != true) as openUsCount","UserStories.Count(entityState.IsFinal == true) as closedUsCount","UserStories.Sparkline("+this.sparklineLength+") as userStoriesSparkline","Bugs.Sparkline("+this.sparklineLength+") as bugsSparkline"].join(",")+"}&where=(program.id=="+i.id+")").then(this._convertData.bind(this)).then(r)},_convertData:function(t){return t=this._super(t),e.sortBy(t,this._sortOrder)},_sortOrder:function(t){return-1*t.id},_convertItem:function(t){return e.extend(t,{appPath:this.config.context.configurator.getApplicationPath(),sparklineLength:this.sparklineLength,uri:this.config.context.configurator.getUrlBuilder().getNewViewUrl(t.id,"project",!0)})}});return r});