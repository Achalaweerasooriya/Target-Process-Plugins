define(["Underscore","tau/models/dataProviders/model.provider.groups.base"],function(_,BaseProvider){return BaseProvider.extend({fetch:function(key,items,fnCallback){var projectIds=_(items).pluck("projectId"),store=this.config.store,projConfig={fields:[{process:["id"]}],list:!0};store.get("projects",projConfig,{scope:this,success:this.onProjects(projectIds,key,fnCallback)}).done()},onProjects:function(criteriaProjects,key,fnCallback){return function(r){var processIds=_(r.data).chain().select(function(proj){return _(criteriaProjects).include(proj.id)}).map(function(proj){return proj.process.id}).uniq().value(),fnFilter=function(state){var typeName=(state.entityType.name||"").toLowerCase();return typeName==="userstory"&&_(processIds).include(state.process.id)};return this._fetchState(key,fnFilter,fnCallback)}},fetchForGroup:function(group,callback){},moveToGroup:function(item,group,prevGroup,callback){return this._moveToGroupByState(item,group,prevGroup,callback)}})})