define(["Underscore","tau/models/dataProviders/strategies/model.provider.groups.strategy.base"],function(e,t){return t.extend({fetch:function(){},moveToGroup:function(t,n,i,r,o){var s=e.find(r.realGroups,function(e){return e.id==n.entityState.id}),u=e.find(i.realGroups,function(e){return e.entityType.name.toLowerCase()==n.__type.toLowerCase()&&e.process.id==s.process.id});if(!u||u.id==s.id)return void o.call(null);var d=[];d.push(function(e){t.save(n.__type,{id:n.id,$set:{entityState:{id:u.id}},fields:["id",{entityState:["id","name","isFinal"]}]}).done({success:function(){e(null,arguments)}})}),d.push(function(e){t.get(n.__type,{id:n.id,fields:["id",{entityState:["id","name","isFinal"]}]}).done({success:function(t){e(null,t[0].data)}})}),e.series(d,function(t,n){e.isFunction(o)&&o.call(null,{changed:n[1]})})},isAvailableForItem:function(t,n,i){var r=e.find(i.realGroups,function(e){return e.id==t.entityState.id}),o=e.find(n.realGroups,function(e){return e.entityType.name.toLowerCase()==t.__type.toLowerCase()&&e.process.id==r.process.id}),s=e.pluck(r.nextStates,"id");return s.push(r.id),o&&e.include(s,o.id)},getCommentRequirements:function(t,n,i){var r=e.find(i.realGroups,function(e){return e.id==t.entityState.id}),o=[];return e.forEach(n,function(n){var i=e.find(n.realGroups,function(e){return e.entityType.name.toLowerCase()==t.__type.toLowerCase()&&e.process.id==r.process.id});o.push({isCommentRequired:i?i.isCommentRequired:!1})}),o}})});