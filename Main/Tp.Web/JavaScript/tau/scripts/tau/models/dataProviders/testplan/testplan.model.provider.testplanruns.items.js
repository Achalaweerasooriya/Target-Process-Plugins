define(["Underscore","tau/models/dataProviders/model.provider.items.base"],function(t,i){return i.extend({fetch:function(t){this._fetch("testPlanRuns","testPlanRun","severity",t)},_createDetailCommand:function(i){var e={};e[i]=["id","name","numericPriority","tags","effort","effortCompleted","effortToDo","timeSpent","timeRemain","passedCount","failedCount","notRunCount","testCaseRuns-count",{entityState:this.fields.entityStateWithComment},{roleEfforts:["id","effort","effortToDo",{role:["id","name","isPair","hasEffort"]}]},{assignments:["id",{role:["id"]},{generalUser:this.fields.generalUser}]},{release:["id","name"]},{iteration:["id","name"]},{build:["id","name"]}];var n={project:["id"]};return this.config.multiprojects&&n.project.push("abbreviation"),e[i].push(n),this.config.additionalFields&&t.indexOf(this.config.additionalFields,"iteration")>-1&&e[i].push({iteration:["id","name"]}),e},_convertData:function(i){return i=this._super(i),t.sortBy(i,function(t){var i=t.numericPriority||0;return i})},_convertItem:function(i){var e=!0;this.config.context.isPracticeAvailable("Iterations")||(e=!1),i.project=i.project||{};var n={id:i.id,name:i.name,numericPriority:i.numericPriority,__type:i.__type,entityState:{id:i.entityState.id,name:i.entityState.name,isInitial:i.entityState.isInitial,isFinal:i.entityState.isFinal,numericPriority:i.entityState.numericPriority},assignments:this._processAssignments(i),projectId:i.project.id,entitiesCount:0,release:i.release,iteration:i.iteration,build:i.build,passedCount:t.toNumber(i.passedCount)||0,failedCount:t.toNumber(i.failedCount)||0,notRunCount:t.toNumber(i.notRunCount)||0,url:this.config.context.configurator.getUrlBuilder().getNewViewUrl(i.id,i.__type,!0),isAvailableIteration:e,additionalActions:{}};return this.config.multiprojects&&(n.project={id:i.project.id,abbreviation:i.project.abbreviation}),this.config.additionalFields&&t.indexOf(this.config.additionalFields,"iteration")>-1&&(n.iteration={id:i.iteration?i.iteration.id:null,name:i.iteration?i.iteration.name:null}),n}})});