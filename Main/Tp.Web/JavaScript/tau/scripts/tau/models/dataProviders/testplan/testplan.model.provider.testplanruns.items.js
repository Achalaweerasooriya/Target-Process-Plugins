define(["Underscore","tau/models/dataProviders/model.provider.items.base","tau/configurator"],function(a,b,c){return b.extend({fetch:function(a){this._fetch("testPlanRuns","testPlanRun","severity",a)},_createDetailCommand:function(b){var c={};c[b]=["id","name","numericPriority","tags","effort","effortCompleted","effortToDo","timeSpent","timeRemain","passedCount","failedCount","notRunCount","testCaseRuns-count",{entityState:["id","name","isInitial","isFinal","numericPriority","isCommentRequired",{nextStates:["id"]}]},{roleEfforts:["id","effort","effortToDo",{role:["id","name","isPair","hasEffort"]}]},{assignments:["id",{role:["id"]},{generalUser:["id","firstName","lastName"]}]},{release:["id","name"]},{iteration:["id","name"]},{build:["id","name"]}];var d={project:["id"]};return this.config.multiprojects&&d.project.push("abbreviation"),c[b].push(d),this.config.additionalFields&&a.indexOf(this.config.additionalFields,"iteration")>-1&&c[b].push({iteration:["id","name"]}),c},_convertData:function(b){return b=this._super(b),a.sortBy(b,function(a){var b=a.numericPriority||0;return b})},_convertItem:function(b){var d=this,e=!0;this.config.context.isPracticeAvailable("Iterations")||(e=!1);var f=c.getApplicationPath(),g={id:b.id,name:b.name,numericPriority:b.numericPriority,__type:b.__type,entityState:{id:b.entityState.id,name:b.entityState.name,isInitial:b.entityState.isInitial,isFinal:b.entityState.isFinal,numericPriority:b.entityState.numericPriority},assignments:this._processAssignments(b),projectId:b.project.id,entitiesCount:0,release:b.release,iteration:b.iteration,build:b.build,passedCount:a.toNumber(b.passedCount)||0,failedCount:a.toNumber(b.failedCount)||0,notRunCount:a.toNumber(b.notRunCount)||0,isAvailableIteration:e,additionalActions:{}};return this.config.multiprojects&&(g.project={id:b.project.id,abbreviation:b.project.abbreviation}),this.config.additionalFields&&a.indexOf(this.config.additionalFields,"iteration")>-1&&(g.iteration={id:b.iteration?b.iteration.id:null,name:b.iteration?b.iteration.name:null}),g}})})