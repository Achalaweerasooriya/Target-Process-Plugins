define(["Underscore","tau/core/model.editable.base"],function(e,i){var t=i.extend({onInit:function(){var i=this.config,t=i.context.entity.id,n=this,o=i.context.applicationContext.loggedUser,d=o.isAdministrator||o.id===t;this.store.get("user",{id:t,fields:["login","email","weeklyAvailableHours","isActive","isObserver","isAdministrator","activeDirectoryName"]}).done(function(i){n.fire("dataBind",e.extend(e.clone(i[0].data),{allowToEditAdmin:o.id!=t&&o.isAdministrator,allowToEditObserver:o.isAdministrator,allowToEdit:d}))})},"bus model.save":function(i,t){var n=this.config.context.entity.id,o=this;this.store.save("user",{id:n,$set:e.extend(t,{id:n})}).done(function(){o.fire("refresh"),o.fire("model.data.changed",t)})}});return t});