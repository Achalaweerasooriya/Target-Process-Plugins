define(["Underscore","tau/core/model-base"],function(a,b){var c=b.extend({"bus loadMore+nextPageCommandFormed":function(a){var b=this,c=a.nextPageCommandFormed.data;b.fire("partialDataRequest",{type:c.type,config:c.config})},"bus dataRequestCompleted":function(a){var b=a.data,c=this,d=b.data.isNextPageAvailable();d||c.fire("nextPageIsNotAvailable");var e=b.data.length===0?this.config.emptyDataMessage:null;c.fire("dataLoaded",{data:{emptyMessage:e,items:b.data}}),d&&(c.fire("nextPageCommandFormed",b.data.getNextPageCommand()),c.fire("nextPageAvailable",{}))},getFields:function(){var a=this.config.fields||["id","name",{project:["id","abbreviation"]},{entityState:["id","name"]}];return a},"bus newSearchQuery":function(a){this.processSearchQuery(a)},processSearchQuery:function(b){var c=b.data,d=this;a.extend(c.config,{fields:d.getFields()}),d.fire("partialDataRequest",{type:c.type,config:c.config})},"bus searchConfigFormed":function(a){this.processSearchQuery(a)},onInit:function(){var a=this,b=this.config.actions||[];this.config.emptyDataMessage=this.config.emptyDataMessage||"No data found",a.fire("dataBind",{actions:b,data:{items:[]}}),a.config.context&&a.config.context.entity?a.fire("dataRequest",{type:"general",config:{id:a.config.context.entity.id,fields:[{project:["id","name"]}]},callback:function(b){a.fire("requireSearchConfig",{project:b.data.project})}}):a.fire("requireSearchConfig",{})}});return c})