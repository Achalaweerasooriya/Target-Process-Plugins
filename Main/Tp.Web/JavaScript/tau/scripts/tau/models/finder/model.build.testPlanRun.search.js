define(["Underscore","tau/models/finder/model.build.search"],function(a,b){return b.extend({"bus requireSearchConfig":function(b){var c=this,d=b.data.project,e=this.config.context.entity;this.config.store.get("testPlanRun",{id:e.id,fields:["id",{project:["id",{process:["id",{practices:["id","name"]}]}]},{release:["id"]},{iteration:["id"]}]}).done({success:function(b){var d=b[0].data,e=d.project.process.practices,f=a.any(e,function(a){return a.name.toLowerCase()=="iterations"}),g={"Project.Id":null,"Release.Id":null};d.project&&(g["Project.Id"]=d.project.id),d.release&&(g["Release.Id"]=d.release.id),d.iteration&&f==1&&(g["Iteration.Id"]=d.iteration.id),c.setInitialLimits(g);var h={$skip:0,$limit:20,$query:g},i=c.getInitialQueryString();c.fire("searchConfigFormed",{type:c.getType(),config:h,properties:c.properties,searchQuery:i})}})}})})