define(["Underscore","tau/models/finder/model.assignable.search"],function(a,b){return b.extend({init:function(a){this._super(a),delete this.properties.state,delete this.properties.priority},setInitialLimits:function(a){this.initialLimits=a},getInitialQueryConfig:function(){return{$skip:0,$limit:20,$query:{}}},getInitialQueryString:function(){return""},getType:function(){return"build"},"bus requireSearchConfig":function(a){var b=this,c=a.data.project,d=this.config.context.entity;this.config.store.get(d.entityType.name,{id:d.id,fields:["id",{project:["id"]}]}).done({success:function(a){var c=a[0].data,d={"Project.Id":null};c.project&&(d["Project.Id"]=c.project.id),b.setInitialLimits(d);var e={$skip:0,$limit:20,$query:d},f=b.getInitialQueryString();b.fire("searchConfigFormed",{type:b.getType(),config:e,properties:b.properties,searchQuery:f})}})},"bus search":function(b){var c=b.data,d=this,e=c.collection,f={};a.each(e,function(a){var b=d.properties[a.property];if(!b)return;var c=b.name?b.name:a.property;b.statement(f,c,a.value)}),f=a.extend(f,this.initialLimits),d.bus.fire("newSearchQuery",{type:d.getType(),config:{$query:f,$skip:0,$limit:20}})}})})