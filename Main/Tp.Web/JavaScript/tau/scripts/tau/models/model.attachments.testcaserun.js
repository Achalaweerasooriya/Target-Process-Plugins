define(["Underscore","tau/core/model-base"],function(t,e){return e.extend({"bus beforeInit":function(t,e){var n=e.config,i=n.context.entity;n.store.get(i.entityType.name,{id:i.id,fields:[{testcase:["id"]}]}).done({scope:this,success:function(t){this.testCaseId=t[0].data.testcase.id,this.fire("dataBind",{hasAccess:!0})}})},"bus afterRender":function(t,e){var n=this.config.context.configurator,i={type:"attachments"},s={context:{entity:{id:this.testCaseId,entityType:{name:"testcase"}},configurator:n}};n.getComponentBuilder().createAsChild(i,this.bus).then(function(t){this.fire("attachmentsBus",t),t.on("afterRender",function(t,n){var i=e.element.find(".i-role-attachments");i.empty(),i.append(n.element),this.fire("load.done")}.bind(this)),t.on("load.error",function(t){if(404===t.data.data.status){var n="You don't have access to the initial Test Case, so you cannot view the attachments. Please contact your administrator.";e.element.find(".i-role-error").text(n)}this.fire("load.done")}.bind(this)),t.fire("initialize",s)}.bind(this))}})});