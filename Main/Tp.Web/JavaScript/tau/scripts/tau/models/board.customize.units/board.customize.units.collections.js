define(["require","Underscore","tau/const/entityType.names","tau/models/board.customize.units/const.card.sizes","tau/models/board.customize.units/board.customize.units.base","tau/services/service.features","./board.customize.units.interaction","tau/const/linkedGeneral.entityType.names"],function(t){function e(t,e,s){for(var a=[],n=Math.min(t.length,e),i=0;n>i;i++)a.push('<div class="tau-board-unit_type_list__item">'),a.push(s(t[i])),a.push("</div>");return t.length>e&&(a.push('<div class="tau-board-unit_type_list__others-counter">'),a.push(t.length-e),a.push("</div>")),p.flatten(a,!0).join("")}function s(t){return p.map(t.tags,function(t){return'<div class="tau-board-unit_type_list__item">'+p.escape(t)+"</div>"}).join(", ")}function a(t,s){return e(t.projects,s,function(t){return['<i style="background-color: ',t.color||"transparent",'" class="tau-icon tau-icon_type_color"></i>']})}function n(t,s){return e(t.projects,s,function(t){return['<div class="tau-board-unit__value_type_abbr" style="background-color: ',t.color||"transparent",'">',p.escape(t.abbr),"</div>"]})}function i(t,s){return e(t.teams,s,function(t){return['<i class="tau-icon tau-icon_type_svg tau-icon_name_',t.icon||"trihead",'"></i>']})}function o(t){return t.openAssignables+t.openBlockers+t.others}function u(t){return!t||!o(t)}function r(t){return{markup:["<%= fn.assignedPeople(this.data, "+t+", this.settings) %>"],customFunctions:{assignedPeople:function(t,s,a){var n=this.isResponsible.bind(this,t),i=this.getUserText.bind(this),o=this.getPeopleOrdered(t);return e(o,s,function(t){return['<div class="tau-avatar',n(t)?"":" tau-avatar-not-currentResponsible",'">','<img src="'+t.avatarUri+'32"',a.isDesignMode?"":' title="'+i(t)+'"',">","</div>"]})}}}}function l(t,e){var s=function(s){var a=p.escape(e.getUserName(s));return e.isResponsible(t,s)?'<b class="tau-board-unit__value">'+a+"</b>":'<span class="tau-board-unit__value">'+a+"</span>"},a=e.getPeopleOrdered(t);return p.map(a,s).join(", ")}function d(t){return['<div class="tau-board-unit__value-open"><%= this.data.open{{FIELD}}Count%></div>','<div class="tau-board-unit__value-total"><%= this.data.total{{FIELD}}Count%></div>'].join("").replace(new RegExp("{{FIELD}}","g"),t)
}function c(t){return["<% if (this.data.open{{FIELD}}Count || this.data.total{{FIELD}}Count) { %>","Open: <%= this.data.open{{FIELD}}Count %> / total: <%= this.data.total{{FIELD}}Count %>","<% } %>"].join("").replace(new RegExp("{{FIELD}}","g"),t)}var p=t("Underscore"),S=t("tau/const/entityType.names"),m=t("tau/models/board.customize.units/const.card.sizes"),T=t("tau/models/board.customize.units/board.customize.units.base"),_=new(t("tau/services/service.features")),C=t("./board.customize.units.interaction"),E=t("tau/const/linkedGeneral.entityType.names"),f=C.openUnitEditor.bind(C),g={users:[{id:1,fullName:"Uladzimir Karatkievich",email:"u.karatkievich@writer.com",avatarUri:T.url("/Javascript/tau/css/images/icons/users/karat.png?size="),isActive:!0},{id:2,fullName:"Janka Kupala",email:"ja.kupala@writer.com",avatarUri:T.url("/Javascript/tau/css/images/icons/users/kupala.png?size="),isActive:!0},{id:3,fullName:"Adam Mickiewicz",email:"a.mickiewicz@writer.com",avatarUri:T.url("/Javascript/tau/css/images/icons/users/mick.png?size="),isActive:!0},{id:4,fullName:"Uladzimir Karatkievich",email:"u.karatkievich@writer.com",avatarUri:T.url("/Javascript/tau/css/images/icons/user.png?size="),isActive:!0}],currentStateResponsiblePersons:[1,2,3,4]},b=[{id:"progress_short_release_iteration",classId:"tau-board-unit_type_progress",name:"Progress",types:[S.ITERATION,S.TEAM_ITERATION,S.RELEASE],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],template:['<div class="tau-board-unit__value"><%= fn.precise_round(this.data.progress*100, 0) %></div>'],sampleData:{progress:1},listSettings:{title:"<%= fn.precise_round(this.data.progress*100, 0) %>%"}},{id:"progress_long_release_iteration",classId:"tau-board-unit_type_progress",name:"Progress",types:[S.ITERATION,S.TEAM_ITERATION,S.RELEASE],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],template:['<div class="tau-progress tau-v-<%= fn.precise_round(this.data.progress*10, 0)*10 %>"></div>','<div class="tau-board-unit__value"><%= fn.precise_round(this.data.progress*100, 0) %></div>'],sampleData:{progress:1},listSettings:{title:"<%= fn.precise_round(this.data.progress*100, 0) %>%"}},{id:"progress_short_program",classId:"tau-board-unit_type_progress",name:"Progress",settings:[{types:[S.PROGRAM],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],model:"totalStoriesCount:userStoriesCount(),openStoriesCount:openUserStoriesCount()"}],template:['<div class="tau-board-unit__value"><%= fn.precise_round(fn.programProgress(this.data)*100, 0) %></div>'],sampleData:{totalStoriesCount:10,openStoriesCount:5},listSettings:{title:"<%= fn.precise_round(fn.programProgress(this.data)*100, 0) %>%"}},{id:"progress_long_program",classId:"tau-board-unit_type_progress",name:"Progress",settings:[{types:[S.PROGRAM],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],model:"totalStoriesCount:userStoriesCount(),openStoriesCount:openUserStoriesCount()"}],template:['<div class="tau-progress tau-v-<%= fn.precise_round(fn.programProgress(this.data)*10, 0)*10 %>"></div>','<div class="tau-board-unit__value"><%= fn.precise_round(fn.programProgress(this.data)*100, 0) %></div>'],sampleData:{totalStoriesCount:10,openStoriesCount:5},listSettings:{title:"<%= fn.precise_round(fn.programProgress(this.data)*100, 0) %>%"}},{id:"test_cases",classId:"tau-board-unit_type_testcases-detailed-counter",hideIf:function(t){var e=t.testCaseStats||t.oldTestCaseStats;
return!e||!(e.passed||e.failed||e.notrun||e.onhold||e.blocked)},name:"Run Results",settings:[{types:[S.TEST_PLAN],sizes:[m.S,m.M,m.L,m.XL,m.LIST],model:"TestCaseStats:{passed:lastStartedTestPlanRun.passedCount,failed:lastStartedTestPlanRun.failedCount,notrun:lastStartedTestPlanRun.notRunCount,onhold:lastStartedTestPlanRun.onHoldCount,blocked:lastStartedTestPlanRun.blockedCount}",header:"Last Run Results"},{types:[S.STORY],sizes:[m.S,m.M,m.L,m.XL,m.LIST],model:'TestCaseStats:linkedTestPlan!=null?{passed:linkedTestPlan.lastStartedTestPlanRun.passedCount,failed:linkedTestPlan.lastStartedTestPlanRun.failedCount,notrun:linkedTestPlan.lastStartedTestPlanRun.notRunCount,onhold:linkedTestPlan.lastStartedTestPlanRun.onHoldCount,blocked:linkedTestPlan.lastStartedTestPlanRun.blockedCount}:null,OldTestCaseStats:linkedTestPlan==null?{passed:testCases.Count(lastRunStatus == "Passed"),failed:testCases.Count(lastRunStatus == "Failed"),notrun:testCases.Count(lastRunStatus == "NotRun"),onhold:testCases.Count(lastRunStatus == "OnHold"),blocked:testCases.Count(lastRunStatus == "Blocked")}:null'},{types:[S.TEST_PLAN_RUN],sizes:[m.S,m.M,m.L,m.X,m.XL,m.LIST],model:"TestCaseStats:{passed:PassedCount,failed:FailedCount,notrun:NotRunCount,onhold:OnHoldCount,blocked:BlockedCount}"}].concat(_.isEnabled("linked.test.plan")?[{types:p.without(E,S.STORY),sizes:[m.S,m.M,m.L,m.XL,m.LIST],model:"TestCaseStats:linkedTestPlan!=null?{passed:linkedTestPlan.lastStartedTestPlanRun.passedCount,failed:linkedTestPlan.lastStartedTestPlanRun.failedCount,notrun:linkedTestPlan.lastStartedTestPlanRun.notRunCount,onhold:linkedTestPlan.lastStartedTestPlanRun.onHoldCount,blocked:linkedTestPlan.lastStartedTestPlanRun.blockedCount}:null",header:"Last Run Results"}]:[]),template:["<% var testCaseStats = this.data.testCaseStats || this.data.oldTestCaseStats || {}; %>","<% if (testCaseStats.notrun || testCaseStats.onhold || testCaseStats.blocked) { %>","<% testCaseStats.notrun = (testCaseStats.notrun || 0) + (testCaseStats.onhold || 0) + (testCaseStats.blocked || 0); %>","<% } %>",'<div class="tau-board-unit__value-passed <% if(!testCaseStats.passed) { %> tau-board-unit__value--null <% } %>" ><%= testCaseStats.passed || "" %></div>','<div class="tau-board-unit__value-failed <% if(!testCaseStats.failed) { %> tau-board-unit__value--null <% } %>" ><%= testCaseStats.failed || "" %></div>','<div class="tau-board-unit__value-notrun <% if(!testCaseStats.notrun) { %> tau-board-unit__value--null <% } %>" ><%= testCaseStats.notrun || "" %></div>'],listSettings:{title:["<% var testCaseStats = this.data.testCaseStats || this.data.oldTestCaseStats || {}; %>","<% if (testCaseStats.passed || testCaseStats.failed || testCaseStats.notrun || testCaseStats.onhold || testCaseStats.blocked) { %>","Passed: <%= testCaseStats.passed || 0 %>, ","Failed: <%= testCaseStats.failed || 0 %>, ","Not Run: <%= testCaseStats.notrun || 0 %> (","On Hold: <%= testCaseStats.onhold || 0 %> / ","Blocked: <%= testCaseStats.blocked || 0 %>)","<% } %>"]},sampleData:{testCaseStats:{passed:830,failed:110,notrun:120}}},{id:"test_cases_ext",classId:"tau-board-unit_type_testcases-detailed-counter",hideIf:function(t){var e=t.testCaseStats||t.oldTestCaseStats;
return!e||!(e.passed||e.failed||e.notrun||e.onhold||e.blocked)},name:"Run Results",settings:[{types:[S.TEST_PLAN],sizes:[m.M,m.L,m.XL,m.LIST],model:"TestCaseStats:{passed:lastStartedTestPlanRun.passedCount,failed:lastStartedTestPlanRun.failedCount,notrun:lastStartedTestPlanRun.notRunCount,onhold:lastStartedTestPlanRun.onHoldCount,blocked:lastStartedTestPlanRun.blockedCount}",header:"Last Run Results"},{types:[S.STORY],sizes:[m.M,m.L,m.XL,m.LIST],model:'TestCaseStats:linkedTestPlan!=null?{passed:linkedTestPlan.lastStartedTestPlanRun.passedCount,failed:linkedTestPlan.lastStartedTestPlanRun.failedCount,notrun:linkedTestPlan.lastStartedTestPlanRun.notRunCount,onhold:linkedTestPlan.lastStartedTestPlanRun.onHoldCount,blocked:linkedTestPlan.lastStartedTestPlanRun.blockedCount}:null,OldTestCaseStats:linkedTestPlan==null?{passed:testCases.Count(lastRunStatus == "Passed"),failed:testCases.Count(lastRunStatus == "Failed"),notrun:testCases.Count(lastRunStatus == "NotRun"),onhold:testCases.Count(lastRunStatus == "OnHold"),blocked:testCases.Count(lastRunStatus == "Blocked")}:null'},{types:[S.TEST_PLAN_RUN],sizes:[m.M,m.L,m.X,m.XL,m.LIST],model:"TestCaseStats:{passed:PassedCount,failed:FailedCount,notrun:NotRunCount,onhold:OnHoldCount,blocked:BlockedCount}"}].concat(_.isEnabled("linked.test.plan")?[{types:p.without(E,S.STORY),sizes:[m.M,m.L,m.XL,m.LIST],model:"TestCaseStats:linkedTestPlan!=null?{passed:linkedTestPlan.lastStartedTestPlanRun.passedCount,failed:linkedTestPlan.lastStartedTestPlanRun.failedCount,notrun:linkedTestPlan.lastStartedTestPlanRun.notRunCount,onhold:linkedTestPlan.lastStartedTestPlanRun.onHoldCount,blocked:linkedTestPlan.lastStartedTestPlanRun.blockedCount}:null",header:"Last Run Results"}]:[]),template:["<% var testCaseStats = this.data.testCaseStats || this.data.oldTestCaseStats || {}; %>",'<div class="tau-board-unit__value-passed <% if(!testCaseStats.passed) { %> tau-board-unit__value--null <% } %>" ><%= testCaseStats.passed || "" %></div>','<div class="tau-board-unit__value-failed <% if(!testCaseStats.failed) { %> tau-board-unit__value--null <% } %>" ><%= testCaseStats.failed || "" %></div>','<div class="tau-board-unit__value-notrun <% if(!testCaseStats.notrun) { %> tau-board-unit__value--null <% } %>" ><%= testCaseStats.notrun || "" %></div>',"<% if (testCaseStats.onhold || testCaseStats.blocked) { %>",'<div class="tau-board-unit__value-onhold" ><%= testCaseStats.onhold || 0 %></div>','<span class="tau-board-unit__separate">/</span>','<div class="tau-board-unit__value-blocked" ><%= testCaseStats.blocked || 0 %></div>',"<% } else { %>",'<div class="tau-board-unit__value-onhold"></div>','<span class="tau-board-unit__separate"></span>','<div class="tau-board-unit__value-blocked"></div>',"<% } %>"],listSettings:{title:["<% var testCaseStats = this.data.testCaseStats || this.data.oldTestCaseStats || {}; %>","<% if (testCaseStats.passed || testCaseStats.failed || testCaseStats.notrun || testCaseStats.onhold || testCaseStats.blocked) { %>","Passed: <%= testCaseStats.passed || 0 %>, ","Failed: <%= testCaseStats.failed || 0 %>, ","Not Run: <%= testCaseStats.notrun || 0 %>, ","On Hold: <%= testCaseStats.onhold || 0 %> / ","Blocked: <%= testCaseStats.blocked || 0 %>","<% } %>"]},sampleData:{testCaseStats:{passed:830,failed:110,notrun:120,onhold:150,blocked:150}}},{id:"assignments_big_2",classId:"tau-board-unit_type_avatars-list",hideIf:function(t){return!(t.user||t.users&&t.users.length)
},name:"Assigned people",header:"Assignments",settings:[{types:[S.FEATURE,S.EPIC,S.STORY,S.TASK,S.BUG,S.REQUEST,S.TEST_PLAN_RUN],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],model:"users:assignedUser.Select({id,avatarUri,fullName,email}),currentStateResponsiblePersons"}],template:r(2),listSettings:{title:'<%= _.map(fn.getPeopleOrdered(this.data), fn.getUserText).join("&#10;") %>'},sampleData:g,interactionConfig:{isEditable:!0,handler:f("assignments")}},{id:"assigned_users",classId:"tau-board-unit_type_avatars-list",hideIf:function(t){return!t.users||!t.users.length},name:"Assigned people",header:"Assignments",settings:[{types:[S.FEATURE,S.EPIC,S.STORY,S.TASK,S.BUG,S.REQUEST,S.TEST_PLAN_RUN],sizes:[m.M,m.L,m.XL,m.LIST],model:"users:assignedUser.Select({id,avatarUri,fullName,email}),currentStateResponsiblePersons"}],template:r(3),listSettings:{title:'<%= _.map(fn.getPeopleOrdered(this.data), fn.getUserText).join("&#10;") %>'},sampleData:g,interactionConfig:{isEditable:!0,handler:f("assignments")}},{id:"assigned_users_name_initials",classId:"tau-board-unit_type_assigned_users_names",hideIf:function(t){return!t.users||!t.users.length},name:"Assigned people",header:"Assignments",settings:[{types:[S.FEATURE,S.EPIC,S.STORY,S.TASK,S.BUG,S.REQUEST,S.TEST_PLAN_RUN],sizes:[m.M,m.L,m.XL,m.LIST],model:"users:assignedUser.Select({id,firstName,lastName,fullName}),currentStateResponsiblePersons"}],template:{markup:["<%= fn.assignedUsersInitials(this.data, this.settings) %>"],customFunctions:{getUserName:function(t){var e=p.trim(t.firstName||""),s=p.trim(t.lastName||"");return e&&s?e[0]+s[0]:e[0]||s[0]},assignedUsersInitials:function(t){return l(t,this)}}},listSettings:{title:'<%= _.map(fn.getPeopleOrdered(this.data), fn.getUserText).join("&#10;") %>'},sampleData:{users:[{id:1,firstName:"Uladzimir",lastName:"Karatkievich",fullName:"Uladzimir Karatkievich",isActive:!0},{id:2,firstName:"Janka",lastName:"Kupala",fullName:"Janka Kupala",isActive:!0},{id:3,firstName:"Adam",lastName:"Mickiewicz",fullName:"Adam Mickiewicz",isActive:!0},{id:4,firstName:"Uladzimir",lastName:"Karatkievich",fullName:"Uladzimir Karatkievich",isActive:!0}],currentStateResponsiblePersons:[]},interactionConfig:{isEditable:!0,handler:f("assignments")}},{id:"assigned_users_last_name",classId:"tau-board-unit_type_assigned_users_names",hideIf:function(t){return!t.users||!t.users.length
},name:"Assigned people",header:"Assignments",settings:[{types:[S.FEATURE,S.EPIC,S.STORY,S.TASK,S.BUG,S.REQUEST,S.TEST_PLAN_RUN],sizes:[m.LIST],model:"users:assignedUser.Select({id,firstName,lastName,fullName}),currentStateResponsiblePersons"}],template:{markup:["<%= fn.assignedUsersLastName(this.data, this.settings) %>"],customFunctions:{getUserName:function(t){var e=p.trim(t.firstName||""),s=p.trim(t.lastName||"");return e&&s?e[0]+". "+s:e||s},assignedUsersLastName:function(t){return l(t,this)}}},listSettings:{title:'<%= _.map(fn.getPeopleOrdered(this.data), fn.getUserText).join("&#10;") %>',maxWidth:300},sampleData:{users:[{id:1,firstName:"Adam",lastName:"Mickiewicz",fullName:"Adam Mickiewicz"},{id:2,firstName:"Janka",lastName:"Kupala",fullName:"Janka Kupala"}],currentStateResponsiblePersons:[]},interactionConfig:{isEditable:!0,handler:f("assignments")}},{id:"assigned_users_full_name",classId:"tau-board-unit_type_assigned_users_names",hideIf:function(t){return!t.users||!t.users.length},name:"Assigned people",header:"Assignments",settings:[{types:[S.FEATURE,S.EPIC,S.STORY,S.TASK,S.BUG,S.REQUEST,S.TEST_PLAN_RUN],sizes:[m.LIST],model:"users:assignedUser.Select({id,fullName}),currentStateResponsiblePersons"}],template:{markup:["<%= fn.assignedUsersFullName(this.data, this.settings) %>"],customFunctions:{getUserName:function(t){return p.trim(t.fullName)},assignedUsersFullName:function(t){return l(t,this)}}},listSettings:{title:'<%= _.map(fn.getPeopleOrdered(this.data), fn.getUserText).join("&#10;") %>',maxWidth:300},sampleData:{users:[{id:1,fullName:"Adam Mickiewicz"},{id:2,fullName:"Janka Kupala"}],currentStateResponsiblePersons:[]},interactionConfig:{isEditable:!0,handler:f("assignments")}},{id:"entity_assignments",classId:"tau-board-unit_type_avatars-list",name:"Assigned people",header:"Assignments",hideIf:function(t){return!t.users||!t.users.length},settings:[{types:[S.TEST_PLAN_RUN,S.BUG],sizes:[m.LIST],model:"users:assignedUser.Select({id,avatarUri,fullName,email}),currentStateResponsiblePersons"}],template:r(2),listSettings:{title:'<%= _.map(fn.getPeopleOrdered(this.data), fn.getUserText).join("&#10;") %>'},sampleData:g,interactionConfig:{isEditable:!0,handler:f("assignments")}},{id:"tcr_last_executor",name:"Last Executor",header:"Tester",hidden:!0,settings:[{types:[S.TEST_CASE_RUN],sizes:[m.LIST],model:"user: {avatarUri: lastExecutor.avatarUri, fullName: lastExecutor.fullName, email: lastExecutor.email}"}],template:{markup:["<% if (!_.isEmpty(this.data.user)) { %>",'<div class="tau-avatar">','<img src="<%= this.data.user.avatarUri %>32" title="<%= fn.getUserText(this.data.user) %>">',"</div>","<% } %>"]},listSettings:{title:"<%= !_.isEmpty(this.data.user) ? fn.getUserText(this.data.user) : '' %>"},sampleData:{user:{fullName:"Uladzimir Karatkievich",email:"u.karatkievich@writer.com",avatarUri:T.url("/Javascript/tau/css/images/icons/users/karat.png?size=")}}},{id:"attachments",classId:"tau-board-unit_type_attachments-counter",hideIf:function(t){return!t.attachmentsCount
},name:"Attachments count",header:"",types:[S.FEATURE,S.EPIC,S.STORY,S.TASK,S.BUG,S.REQUEST,S.TEST_CASE,S.IMPEDIMENT,S.ITERATION,S.TEAM_ITERATION,S.RELEASE,S.TEST_PLAN,S.TEST_PLAN_RUN,S.BUILD],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],template:['<div class="tau-board-unit__value"><%!this.data.attachmentsCount%></div>'],listSettings:{title:'<%! fn.getUnitName() + ": " + this.data.attachmentsCount %>'},sampleData:{attachmentsCount:3},model:"attachmentsCount:attachments.Count()"},{id:"comments_count",classId:"tau-board-unit_type_comments-counter",hideIf:function(t){return!t.commentsCount},name:"Comments count",header:"",types:[S.FEATURE,S.EPIC,S.STORY,S.TASK,S.BUG,S.REQUEST,S.TEST_CASE,S.IMPEDIMENT,S.ITERATION,S.TEAM_ITERATION,S.RELEASE,S.TEST_PLAN,S.TEST_PLAN_RUN,S.BUILD],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],template:['<div class="tau-board-unit__value"><%!this.data.commentsCount%></div>'],listSettings:{title:'<%! fn.getUnitName() + ": " + this.data.commentsCount %>'},sampleData:{commentsCount:27},model:"commentsCount:comments.Count()"},{id:"requests_open",classId:"tau-board-unit_type_requesters-counter",hideIf:function(t){return!t.requestersCount},name:"Requesters count",header:"",types:[S.REQUEST],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],template:['<div class="tau-board-unit__value"><%!this.data.requestersCount%></div>'],listSettings:{title:'<%! fn.getUnitName() + ": " + this.data.requestersCount %>'},sampleData:{requestersCount:43},model:"requestersCount:requesters.Count()"},{id:"tasks",classId:"tau-board-unit_type_tasks-counter-open-total",hideIf:function(t){return!t.totalTasksCount},name:"Open/total tasks",header:"Tasks",types:[S.STORY],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],template:[d("Tasks")],term:"task",listSettings:{title:c("Tasks")},sampleData:{totalTasksCount:43,openTasksCount:26},model:"totalTasksCount:tasks.Count(),openTasksCount:tasks.Where(entityState.isFinal != true).Count()"},{id:"requests_open_total",classId:"tau-board-unit_type_requests-counter-open-total",hideIf:function(t){return!t.totalRequestsCount
},name:"Open/total Requests",header:"Requests",types:[S.REQUESTER],sizes:[m.S,m.M,m.L,m.XL,m.LIST],template:[d("Requests")],term:"request",listSettings:{title:c("Requests")},sampleData:{openRequestsCount:5,totalRequestsCount:9},model:"totalRequestsCount:requests.Count(),openRequestsCount:requests.Where(entityState.isFinal != true).Count()"},{id:"story_bugs",classId:"tau-board-unit_type_bugs-counter-open-total",hideIf:function(t){return!t.totalBugsCount},name:"Open/total ${bug,lower,names}",header:"${Bug,camel,names}",types:[S.STORY],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],template:[d("Bugs")],term:"bug",listSettings:{title:c("Bugs")},sampleData:{totalBugsCount:43,openBugsCount:26},model:"totalBugsCount:bugs.Count(),openBugsCount:bugs.Where(entityState.isFinal != true and project.isActive = true).Count()"},{id:"bugs",classId:"tau-board-unit_type_bugs-counter-open-total-e",hideIf:function(t){return!t.totalBugsCount},name:"Open/total ${bug,lower,names}",header:"${Bug,camel,names}",settings:[{types:[S.USER],sizes:[m.S,m.M,m.L,m.XL,m.LIST],model:"totalBugsCount:bugs.Where(project.isActive == true).Count(),openBugsCount:bugs.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[S.RESPONSIBLE_TEAM,S.TEAM,S.PROJECT,S.ITERATION,S.TEAM_ITERATION,S.RELEASE,S.BUILD,S.TEST_CASE_RUN,S.TEST_PLAN_RUN],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],model:"totalBugsCount:bugs.Count(),openBugsCount:bugs.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[S.FEATURE],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],model:"totalBugsCount:bugsCountForFeature(), openBugsCount:openBugsCountForFeature()"},{types:[S.PROGRAM],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],model:"totalBugsCount:bugsCount(),openBugsCount:openBugsCount()"}],template:[d("Bugs")],term:"bug",listSettings:{title:c("Bugs")},sampleData:{totalBugsCount:431,openBugsCount:261}},{id:"tasks_badge",classId:"tau-board-unit_type_tasks-counter",hideIf:function(t){return!t.openTasksCount},name:"Open tasks",header:"",settings:[{types:[S.STORY],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],model:"openTasksCount:tasks.Where(entityState.isFinal != true).Count()"},{types:[S.USER],sizes:[m.S,m.M,m.L,m.XL,m.LIST],model:"openTasksCount:tasks.Where(entityState.isFinal != true and project.isActive == true).Count()"}],template:['<div class="tau-board-unit__value  tau-entity-icon tau-entity-icon--task"><%!this.data.openTasksCount%></div>'],listSettings:{title:'<%! fn.getUnitName() + ": " + this.data.openTasksCount %>'},sampleData:{openTasksCount:26}},{id:"story_bugs_badge",classId:"tau-board-unit_type_bugs-counter",hideIf:function(t){return!t.openBugsCount
},name:"Open ${bug,lower,names}",header:"",types:[S.STORY],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],template:['<div class="tau-board-unit__value tau-entity-icon tau-entity-icon--bug"><%!this.data.openBugsCount%></div>'],listSettings:{title:'<%! fn.replaceTermTags(fn.getUnitName()) + ": " + this.data.openBugsCount %>'},sampleData:{openBugsCount:42},model:"openBugsCount:bugs.Where(entityState.isFinal != true).Count()"},{id:"bugs_badge",classId:"tau-board-unit_type_bugs-counter-e",hideIf:function(t){return!t.openBugsCount},name:"Open ${bug,lower,names}",header:"",settings:[{types:[S.RESPONSIBLE_TEAM,S.PROJECT,S.TEAM,S.ITERATION,S.TEAM_ITERATION,S.RELEASE,S.BUILD],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],model:"openBugsCount:bugs.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[S.USER],sizes:[m.S,m.M,m.L,m.XL,m.LIST],model:"openBugsCount:bugs.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[S.PROGRAM],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],model:"openBugsCount:openBugsCount()"}],template:['<div class="tau-board-unit__value tau-entity-icon tau-entity-icon--bug"><%!this.data.openBugsCount%></div>'],listSettings:{title:'<%! fn.replaceTermTags(fn.getUnitName()) + ": " + this.data.openBugsCount %>'},sampleData:{openBugsCount:421}},{id:"teams_badge",classId:"tau-board-unit_type_teams-counter",hideIf:function(t){return!t.teamsCount},name:"Teams",settings:[{types:[S.PROJECT],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],model:"teamsCount:teamProjects.Count()"},{types:[S.USER],sizes:[m.S,m.M,m.L,m.XL,m.LIST],model:"teamsCount:teamMembers.Count()"}],template:['<div class="tau-board-unit__value"><%!this.data.teamsCount%></div>'],sampleData:{teamsCount:24}},{id:"us_count",classId:"tau-board-unit_type_userstories-counter",hideIf:function(t){return!t.userStoriesCount},name:"Open ${user story,lower,names}",header:"",settings:[{types:[S.RESPONSIBLE_TEAM,S.FEATURE,S.TEAM,S.PROJECT,S.ITERATION,S.TEAM_ITERATION,S.RELEASE],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],model:"userStoriesCount:userStories.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[S.USER],sizes:[m.S,m.M,m.L,m.XL,m.LIST],model:"userStoriesCount:userStories.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[S.PROGRAM],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],model:"userStoriesCount:openUserStoriesCount()"}],template:['<div class="tau-board-unit__value tau-entity-icon tau-entity-icon--userstory"><%!this.data.userStoriesCount%></div>'],listSettings:{title:'<%! fn.replaceTermTags(fn.getUnitName()) + ": " + this.data.userStoriesCount %>'},sampleData:{userStoriesCount:425}},{id:"request_badge",classId:"tau-board-unit_type_requests-counter",hideIf:function(t){return!t.requestsCount
},name:"Open requests",header:"",settings:[{types:[S.RESPONSIBLE_TEAM,S.PROJECT,S.TEAM],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],model:"requestsCount:requests.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[S.USER],sizes:[m.S,m.M,m.L,m.XL,m.LIST],model:"requestsCount:assignedRequests.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[S.REQUESTER],sizes:[m.S,m.M,m.L,m.XL,m.LIST],model:"requestsCount:requests.Where(entityState.isFinal != true and project.isActive == true).Count()"}],template:['<div class="tau-board-unit__value tau-entity-icon tau-entity-icon--request"><%!this.data.requestsCount%></div>'],listSettings:{title:'<%! fn.getUnitName() + ": " + this.data.requestsCount %>'},sampleData:{requestsCount:43}},{id:"dependencies",classId:"tau-board-unit_type_relations-counter-in-out",hideIf:function(t){return u(t.inbound)&&u(t.outbound)},name:"Relations",types:[S.FEATURE,S.EPIC,S.STORY,S.TASK,S.BUG,S.REQUEST,S.IMPEDIMENT,S.RESPONSIBLE_TEAM,S.TEAM,S.PROJECT,S.ITERATION,S.TEAM_ITERATION,S.RELEASE,S.TEST_CASE,S.TEST_PLAN,S.TEST_PLAN_RUN,S.BUILD,S.PROGRAM],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],template:{markup:T.createUnitValueWrapperTemplate(["<% var inboundCount = fn.count(this.data.inbound); %>","<% var outboundCount = fn.count(this.data.outbound); %>",'<div class="tau-board-unit__value-in <%=this.data.inbound.openBlockers > 0 ? "tau-board-unit__value-blocker":"" %>"><%= inboundCount %></div>','<div class="tau-board-unit__value-out <%=this.data.outbound.openBlockers > 0 ? "tau-board-unit__value-blocker":"" %>"><%= outboundCount %></div>']),customFunctions:{count:o}},listSettings:{title:["<% var inboundCount = fn.count(this.data.inbound); %>","<% var outboundCount = fn.count(this.data.outbound); %>","<% if (inboundCount || outboundCount) { %>","In: <%= inboundCount %>, out: <%= outboundCount %>","<% } %>"]},sampleData:{inbound:{openAssignables:22,openBlockers:0,others:18},outbound:{openAssignables:43,openBlockers:0,others:4}},model:"inbound:masterRelations.activeMasterRelationsCount,outbound:slaveRelations.activeSlaveRelationsCount"},{id:"test_run_short",classId:"tau-board-unit_type_testruns-counter-open-total",hideIf:function(t){return!t.totalTestRunsCount
},name:"Open/total test plan runs",header:"Test Plan Runs",types:[S.PROJECT,S.ITERATION,S.TEAM_ITERATION,S.RELEASE,S.TEST_PLAN,S.BUILD],sizes:[m.M,m.L,m.XL,m.LIST],template:[d("TestRuns")],term:"testplanrun",listSettings:{title:c("TestRuns")},sampleData:{totalTestRunsCount:403,openTestRunsCount:286},model:"totalTestRunsCount:testPlanRuns.Count(),openTestRunsCount:testPlanRuns.Where(entityState.isFinal != true).Count()"},{id:"test_run_badge",classId:"tau-board-unit_type_testruns-counter",hideIf:function(t){return!t.openTestRunsCount},name:"Open test plan runs",header:"",types:[S.PROJECT,S.ITERATION,S.TEAM_ITERATION,S.RELEASE,S.TEST_PLAN,S.BUILD],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],template:['<div class="tau-board-unit__value tau-entity-icon tau-entity-icon--testrun"><%!this.data.openTestRunsCount%></div>'],sampleData:{openTestRunsCount:286},listSettings:{title:'<%! fn.getUnitName() + ": " + this.data.openTestRunsCount%>'},model:"openTestRunsCount:testPlanRuns.Where(entityState.isFinal != true).Count()"},{id:"feature_icon",classId:"tau-board-unit_type_features-counter-open-total",hideIf:function(t){return!t.totalFeaturesCount},name:"Open/total ${feature,lower,names}",header:"${Feature,camel,names}",settings:[{types:[S.RESPONSIBLE_TEAM,S.EPIC,S.PROJECT,S.RELEASE,S.TEAM],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],model:"totalFeaturesCount:features.Count(),openFeaturesCount:features.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[S.USER],sizes:[m.S,m.M,m.L,m.XL,m.LIST],model:"totalFeaturesCount:features.Where(project.isActive == true).Count(),openFeaturesCount:features.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[S.PROGRAM],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],model:"totalFeaturesCount:featuresCount(),openFeaturesCount:openFeaturesCount()"}],template:[d("Features")],term:"feature",listSettings:{title:c("Features")},sampleData:{totalFeaturesCount:286,openFeaturesCount:204}},{id:"feature_badge",classId:"tau-board-unit_type_features-counter",hideIf:function(t){return!t.openFeaturesCount
},name:"Open ${feature,lower,names}",header:"",settings:[{types:[S.RESPONSIBLE_TEAM,S.EPIC,S.PROJECT,S.RELEASE,S.TEAM],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],model:"openFeaturesCount:features.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[S.USER],sizes:[m.S,m.M,m.L,m.XL,m.LIST],model:"openFeaturesCount:features.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[S.PROGRAM],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],model:"openFeaturesCount:openFeaturesCount()"}],template:['<div class="tau-board-unit__value tau-entity-icon tau-entity-icon--feature"><%!this.data.openFeaturesCount%></div>'],listSettings:{title:'<%! fn.replaceTermTags(fn.getUnitName()) + ": " + this.data.openFeaturesCount %>'},sampleData:{openFeaturesCount:286}},{id:"us_opentotal",classId:"tau-board-unit_type_userstories-counter-open-total",hideIf:function(t){return!t.totalStoriesCount},name:"Open/total ${user story,lower,names}",header:"${User Story,camel,names}",settings:[{types:[S.RESPONSIBLE_TEAM,S.FEATURE,S.PROJECT,S.ITERATION,S.TEAM_ITERATION,S.RELEASE,S.TEAM],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],model:"totalStoriesCount:userStories.Count(),openStoriesCount:userStories.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[S.USER],sizes:[m.S,m.M,m.L,m.XL,m.LIST],model:"totalStoriesCount:userStories.Where(project.isActive == true).Count(),openStoriesCount:userStories.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[S.PROGRAM],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],model:"totalStoriesCount:userStoriesCount(),openStoriesCount:openUserStoriesCount()"}],template:[d("Stories")],term:"userstory",listSettings:{title:c("Stories")},sampleData:{totalStoriesCount:281,openStoriesCount:201}},{id:"effort_total_collection",classId:"tau-board-unit_type_effort-total-e",name:"Total effort",header:"Effort",types:[S.ITERATION,S.TEAM_ITERATION,S.RELEASE],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],template:['<div class="tau-board-unit__value"><%=fn.precise_round(this.data.effort||0,1)%></div>','<div class="tau-board-unit__points"><%=this.data.units%></div>'],sampleData:{effort:255.5,units:"pt"},model:"effort:bugs.Sum(effort)+userStories.Sum(effort),units:units"},{id:"effort_complete_collection",classId:"tau-board-unit_type_effort-total-e tau-board-unit_type_effort-complete",name:"Completed effort",header:"Completed Effort",types:[S.ITERATION,S.TEAM_ITERATION,S.RELEASE],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],template:['<div class="tau-board-unit__value"><%=fn.precise_round(this.data.effort||0,1)%></div>','<div class="tau-board-unit__points"><%=this.data.units%></div>'],sampleData:{effort:201.3,units:"pt"},model:"effort:bugs.Sum(effort)+userStories.Sum(effort)-bugs.Sum(effortToDo)-userStories.Sum(effortToDo),units:units"},{id:"effort_spent_total_collection",classId:"tau-board-unit_type_effort-todo-total-e",name:"Todo/total effort",header:"Effort",types:[S.ITERATION,S.TEAM_ITERATION,S.RELEASE],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],template:['<div class="tau-board-unit__value-todo"><%=fn.precise_round(this.data.effortToDo||0,1)%></div>','<div class="tau-board-unit__value-total"><%=fn.precise_round(this.data.effort||0,1)%></div>','<div class="tau-board-unit__points"><%=this.data.units%></div>'],sampleData:{effortToDo:253.7,effort:380.3,units:"pt"},model:"effort:bugs.Sum(effort)+userStories.Sum(effort),effortToDo:bugs.Sum(effortToDo)+userStories.Sum(effortToDo),units:units",listSettings:{title:["<%= fn.precise_round(this.data.effortToDo || 0, 1) %>"," / ","<%= fn.precise_round(this.data.effort || 0, 1) %><%= this.data.units %>"]}}];
return _.isEnabled("entity.epics")&&b.push([{id:"epic_icon",classId:"tau-board-unit_type_epics-counter-open-total",hideIf:function(t){return!t.totalEpicsCount},name:"Open/total ${epic,lower,names}",header:"${Epic,camel,names}",settings:[{types:[S.RESPONSIBLE_TEAM,S.PROJECT,S.TEAM],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],model:"totalEpicsCount:epics.Count(),openEpicsCount:epics.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[S.USER],sizes:[m.S,m.M,m.L,m.XL,m.LIST],model:"totalEpicsCount:epics.Where(project.isActive == true).Count(),openEpicsCount:epics.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[S.PROGRAM],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],model:"totalEpicsCount:epicsCount(),openEpicsCount:openEpicsCount()"}],template:[d("Epics")],term:"epic",listSettings:{title:c("Epics")},sampleData:{totalEpicsCount:28,openEpicsCount:20}},{id:"epic_badge",classId:"tau-board-unit_type_epics-counter",hideIf:function(t){return!t.openEpicsCount},name:"Open ${epic,lower,names}",header:"",settings:[{types:[S.RESPONSIBLE_TEAM,S.PROJECT,S.TEAM],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],model:"openEpicsCount:epics.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[S.USER],sizes:[m.S,m.M,m.L,m.XL,m.LIST],model:"openEpicsCount:epics.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[S.PROGRAM],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],model:"openEpicsCount:openEpicsCount()"}],template:['<div class="tau-board-unit__value tau-entity-icon tau-entity-icon--epic"><%!this.data.openEpicsCount%></div>'],listSettings:{title:'<%! fn.replaceTermTags(fn.getUnitName()) + ": " + this.data.openEpicsCount %>'},sampleData:{openEpicsCount:20}}]),T.pushClones(b,{hideIf:function(t){return!t.tags||!t.tags.length},name:"Tags",types:[S.EPIC,S.FEATURE,S.STORY,S.TASK,S.BUG,S.REQUEST,S.TEST_CASE,S.RESPONSIBLE_TEAM,S.IMPEDIMENT,S.TEAM,S.PROJECT,S.ITERATION,S.TEAM_ITERATION,S.RELEASE,S.TEST_PLAN,S.TEST_PLAN_RUN,S.BUILD,S.PROGRAM],template:{markup:['<div class="tau-board-unit_type_tags-list__wrapper">',"<%=fn.tags(this.data)%>","</div>"],customFunctions:{tags:s}},sampleData:{tags:["UX","Design","Prototype","Javascript"]},model:"tags:tagObjects.Select(name)",interactionConfig:{isEditable:!0,handler:f("tagsInline")},listSettings:{title:'<%= this.data.tags.join("&#10;") %>',minWidth:70,maxWidth:600}},[{id:"tags_short",classId:"tau-board-unit_type_list tau-board-unit_type_tags-list-s",sizes:[m.M,m.L,m.XL,m.LIST]},{id:"tags_short_xs",classId:"tau-board-unit_type_list tau-board-unit_type_tags-list-xs",sizes:[m.M,m.L,m.XL]},{id:"tags_long",classId:"tau-board-unit_type_list tau-board-unit_type_tags-list",sizes:[m.XS,m.S,m.M,m.L,m.XL],sections:1}]),T.pushClones(b,{hideIf:function(t){return!t.testCasesCount
},name:"Total test cases",settings:[{types:[S.STORY],sizes:[m.S,m.M,m.L,m.XL,m.LIST],model:"testCasesCount:linkedTestPlan!=null?linkedTestPlan.testHierarchyCount:testCases.Count()"},{types:[S.TEST_PLAN,S.TEST_PLAN_RUN],sizes:[m.S,m.M,m.L,m.XL,m.LIST],model:"testCasesCount:testHierarchyCount"}].concat(_.isEnabled("linked.test.plan")?[{types:p.without(E,S.STORY),sizes:[m.S,m.M,m.L,m.XL,m.LIST],model:"testCasesCount:linkedTestPlan!=null?linkedTestPlan.testHierarchyCount:0"}]:[]),sampleData:{testCasesCount:142}},[{id:"test_case_badge",header:"",classId:"tau-board-unit_type_testcases-counter",template:['<div class="tau-board-unit__value tau-entity-icon tau-entity-icon--testcase"><%!this.data.testCasesCount%></div>'],listSettings:{title:'<%! fn.getUnitName() + ": " + this.data.testCasesCount %>'}},{id:"test_case_icon",header:"Test Cases",classId:"tau-board-unit_type_testcases-counter-alt",template:['<div class="tau-board-unit__value"><%!this.data.testCasesCount%></div>'],term:"testcase"}]),T.pushClones(b,{hideIf:function(t){return!t.impedimentsCount},name:"Open ${impediment,lower,names}",header:"",types:[S.EPIC,S.FEATURE,S.STORY,S.TASK,S.BUG,S.REQUEST,S.TEST_PLAN_RUN],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],listSettings:{title:'<%! fn.replaceTermTags(fn.getUnitName()) + ": " + this.data.impedimentsCount %>'},sampleData:{impedimentsCount:7},model:"impedimentsCount:masterRelations.activeMasterRelationsCount.openBlockers"},[{id:"impediments",classId:"tau-board-unit_type_impediments-counter-alt",template:['<div class="tau-board-unit__value"><%!this.data.impedimentsCount%></div>']},{id:"impediments_badge",classId:"tau-board-unit_type_impediments-counter",template:['<div class="tau-board-unit__value tau-entity-icon tau-entity-icon--impediment"><%!this.data.impedimentsCount%></div>']}]),T.pushClones(b,{classId:"tau-board-unit_type_list tau-board-unit_type_projects-abbrs-list",hideIf:function(t){return!t.projects||!t.projects.length},name:"Projects abbreviations",header:"Projects",template:{markup:["<%=fn.projects(this.data, 2)%>"],customFunctions:{projects:n}},sampleData:{projects:[{color:"#f9d9d1",abbr:"MMM",name:"MMM"},{color:"#fbe9d6",abbr:"MWO",name:"MWO"},{color:"#fbe9d6",abbr:"MWO",name:"MWO"},{color:"#fbe9d6",abbr:"MWO",name:"MWO"}]},listSettings:{title:'<%= _.pluck(this.data.projects, "name").join("&#10;") %>'}},[{id:"project_abbrs_team",types:[S.RESPONSIBLE_TEAM,S.TEAM],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],model:"projects:TeamProjects.Where(project.IsActive == true).Select({project.color,abbr:project.abbreviation,name:project.name})"},{id:"project_abbrs_release",types:[S.RELEASE],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],model:"projects:Projects.Where(IsActive == true).Select({color,abbr:abbreviation,name:name})"},{id:"project_abbrs_user",types:[S.USER,S.ASSIGNED_USER],sizes:[m.S,m.M,m.L,m.XL,m.LIST],model:"projects:ProjectMembers.Where(project.IsActive == true).Select({project.color,abbr:project.abbreviation,name:project.name})"},{id:"project_abbrs_milestone",types:[S.MILESTONE],sizes:[m.LIST],model:"projects:Projects.Where(IsActive == true).Select({color,abbr:abbreviation,name})"}]),T.pushClones(b,{classId:"tau-board-unit_type_list tau-board-unit_type_projects-list",hideIf:function(t){return!t.projects||!t.projects.length
},name:"Projects",template:{markup:["<%=fn.projects(this.data, 3)%>"],customFunctions:{projects:a}},sampleData:{projects:[{color:"#f9d9d1",abbr:"MMM",name:"MMM"},{color:"#fbe9d6",abbr:"MWO",name:"MWO"},{color:"#fbe9d6",abbr:"MWO",name:"MWO"},{color:"#fbe9d6",abbr:"MWO",name:"MWO"}]},listSettings:{title:'<%= _.pluck(this.data.projects, "name").join("&#10;") %>'}},[{id:"project_icons_team",types:[S.RESPONSIBLE_TEAM,S.TEAM],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],model:"projects:TeamProjects.Where(project.IsActive == true).Select({project.color,abbr:project.abbreviation,name:project.name})"},{id:"project_icons_user",types:[S.USER,S.ASSIGNED_USER],sizes:[m.S,m.M,m.L,m.XL,m.LIST],model:"projects:ProjectMembers.Where(project.IsActive == true).Select({project.color,abbr:project.abbreviation,name:project.name})"},{id:"project_icons_release",types:[S.RELEASE],sizes:[m.S,m.M,m.L,m.XL,m.LIST],model:"projects:Projects.Where(IsActive == true).Select({color,abbr:abbreviation,name:name})"}]),T.pushClones(b,{classId:"tau-board-unit_type_list tau-board-unit_type_teams-list",hideIf:function(t){return!t.teams||!t.teams.length},name:"Teams",template:{markup:["<%=fn.teams(this.data, 3)%>"],customFunctions:{teams:i}},sampleData:{teams:[{icon:"apple",name:"Apple Team"},{icon:"windows",name:"Windows Team"},{icon:"linux",name:"Linux Team"},{name:"Anonymous"}]},listSettings:{title:'<%= _.pluck(this.data.teams, "name").join("&#10;") %>'}},[{id:"teams_user",types:[S.USER,S.ASSIGNED_USER],sizes:[m.S,m.M,m.L,m.XL,m.LIST],model:"teams:teamMembers.Select({team.icon,team.name})"},{id:"teams_project",types:[S.PROJECT],sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST],model:"teams:TeamProjects.Select({team.icon,team.name})"}]),T.pushClones(b,{classId:"tau-board-unit_type_list tau-board-unit_type_avatars-list",sections:1,hideIf:function(t){return!t.users||!t.users.length},name:"People",sizes:[m.M,m.L,m.XL,m.LIST],template:["<% var users = this.data.users, count = users.length;%>",'<div class="tau-board-unit_type_list__total-counter"><%= count %></div>',"<% for (var i = 0; i < count; i++) {%>","<% var user = users[i]; %>",'<div class="tau-board-unit_type_list__item">','<div class="tau-avatar <%=user.isActive?"":"tau-avatar-not-active"%>">','<img src="<%= user.avatarUri %>32" <% if (!this.settings.isDesignMode) { %>title="<%! _.trim(user.fullName) || user.email %>"<% } %>>',"</div>","</div>","<% }%>"],sampleData:g,listSettings:{title:'<%= _.map(fn.getPeopleOrdered(this.data), fn.getUserText).join("&#10;") %>'}},[{id:"people_icons_project",types:[S.PROJECT],model:"users:projectMembers.Select({user.avatarUri,user.fullName,user.email,user.isActive})"},{id:"people_icons_team",types:[S.RESPONSIBLE_TEAM,S.TEAM],model:"users:teamMembers.Select({user.avatarUri,user.fullName,user.email,user.isActive})"}]),T.pushClones(b,{classId:"tau-board-unit_type_projects-counter",hideIf:function(t){return!t.projectsCount
},name:"Projects",template:['<div class="tau-board-unit__value"><%!this.data.projectsCount%></div>'],sampleData:{projectsCount:24}},[{id:"projects_badge_team",types:[S.RESPONSIBLE_TEAM,S.TEAM],model:"projectsCount:teamProjects.Where(project.IsActive == true).Count()",sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST]},{id:"projects_badge_release",types:[S.RELEASE],model:"projectsCount:projects.Where(IsActive == true).Count()",sizes:[m.XS,m.S,m.M,m.L,m.XL,m.LIST]},{id:"projects_badge_user",types:[S.USER,S.ASSIGNED_USER],model:"projectsCount:projectMembers.Where(project.IsActive == true).Count()",sizes:[m.S,m.M,m.L,m.XL,m.LIST]},{id:"projects_badge_program",types:[S.PROGRAM],model:"projectsCount:projects.Where(IsActive == true).Count()",sizes:[m.S,m.M,m.L,m.XL,m.LIST]}]),p.each(b,function(t){t.category="collection",t.lazy=!0}),b});