define(["Underscore","tau/models/board.customize.units/const.entity.types.names","tau/models/board.customize.units/const.card.sizes","tau/models/board.customize.units/board.customize.units.base","tau/services/service.features"],function(t,e,s,a,n){var i={users:[{id:1,fullName:"Uladzimir Karatkievich",email:"u.karatkievich@writer.com",avatarUri:a.url("/Javascript/tau/css/images/icons/users/karat.png?size="),isActive:!0},{id:2,fullName:"Janka Kupala",email:"ja.kupala@writer.com",avatarUri:a.url("/Javascript/tau/css/images/icons/users/kupala.png?size="),isActive:!0},{id:3,fullName:"Adam Mickiewicz",email:"a.mickiewicz@writer.com",avatarUri:a.url("/Javascript/tau/css/images/icons/users/mick.png?size="),isActive:!0},{id:4,fullName:"Uladzimir Karatkievich",email:"u.karatkievich@writer.com",avatarUri:a.url("/Javascript/tau/css/images/icons/user.png?size="),isActive:!0}],currentStateResponsiblePersons:[1,2,3,4]},o=function(e,s,a){for(var n=[],i=Math.min(e.length,s),o=0;i>o;o++)n.push('<div class="tau-board-unit_type_list__item">'),n.push(a(e[o])),n.push("</div>");return e.length>s&&(n.push('<div class="tau-board-unit_type_list__others-counter">'),n.push(e.length-s),n.push("</div>")),t.flatten(n,!0).join("")},u=function(e){return t.map(e.tags,function(e){return'<div class="tau-board-unit_type_list__item">'+t.escape(e)+"</div>"}).join(", ")},r=function(t,e){return o(t.projects,e,function(t){return['<i style="background-color: ',t.color||"transparent",'" class="tau-icon tau-icon_type_color"></i>']})},l=function(e,s){return o(e.projects,s,function(e){return['<div class="tau-board-unit__value_type_abbr" style="background-color: ',e.color||"transparent",'">',t.escape(e.abbr),"</div>"]})},d=function(t,e){return o(t.teams,e,function(t){return['<i class="tau-icon tau-icon_type_svg tau-icon_name_',t.icon||"trihead",'"></i>']})},p=function(t){return t.openAssignables+t.openBlockers+t.others},c=function(t){return!t||!p(t)},m=function(t){return{markup:["<%= fn.assignedPeople(this.data, "+t+", this.settings) %>"],customFunctions:{assignedPeople:function(t,e,s){var a=this.isResponsible.bind(this,t),n=this.getUserText.bind(this),i=this.getPeopleOrdered(t);
return o(i,e,function(t){return['<div class="tau-avatar',a(t)?"":" tau-avatar-not-currentResponsible",'">','<img src="'+t.avatarUri+'20"',s.isDesignMode?"":' title="'+n(t)+'"',">","</div>"]})}}}},S=function(e,s){var a=function(a){var n=t.escape(s.getUserName(a));return s.isResponsible(e,a)?'<b class="tau-board-unit__value">'+n+"</b>":'<span class="tau-board-unit__value">'+n+"</span>"},n=s.getPeopleOrdered(e);return t.map(n,a).join(", ")},_=function(t){return['<div class="tau-board-unit__value-open"><%= this.data.open{{FIELD}}Count%></div>','<div class="tau-board-unit__value-total"><%= this.data.total{{FIELD}}Count%></div>'].join("").replace(new RegExp("{{FIELD}}","g"),t)},T=function(t){return["<% if (this.data.open{{FIELD}}Count || this.data.total{{FIELD}}Count) { %>","Open: <%= this.data.open{{FIELD}}Count %> / total: <%= this.data.total{{FIELD}}Count %>","<% } %>"].join("").replace(new RegExp("{{FIELD}}","g"),t)},C=[{id:"progress_short_release_iteration",classId:"tau-board-unit_type_progress",name:"Progress",types:[e.ITERATION,e.TEAM_ITERATION,e.RELEASE],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],template:['<div class="tau-board-unit__value"><%= fn.precise_round(this.data.progress*100, 0) %></div>'],sampleData:{progress:1},listSettings:{title:"<%= fn.precise_round(this.data.progress*100, 0) %>%"}},{id:"progress_long_release_iteration",classId:"tau-board-unit_type_progress",name:"Progress",types:[e.ITERATION,e.TEAM_ITERATION,e.RELEASE],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],template:['<div class="tau-progress tau-v-<%= fn.precise_round(this.data.progress*10, 0)*10 %>"></div>','<div class="tau-board-unit__value"><%= fn.precise_round(this.data.progress*100, 0) %></div>'],sampleData:{progress:1},listSettings:{title:"<%= fn.precise_round(this.data.progress*100, 0) %>%"}},{id:"progress_short_program",classId:"tau-board-unit_type_progress",name:"Progress",settings:[{types:[e.PROGRAM],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],model:"totalStoriesCount:userStoriesCount(),openStoriesCount:openUserStoriesCount()"}],template:['<div class="tau-board-unit__value"><%= fn.precise_round(fn.programProgress(this.data)*100, 0) %></div>'],sampleData:{totalStoriesCount:10,openStoriesCount:5},listSettings:{title:"<%= fn.precise_round(fn.programProgress(this.data)*100, 0) %>%"}},{id:"progress_long_program",classId:"tau-board-unit_type_progress",name:"Progress",settings:[{types:[e.PROGRAM],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],model:"totalStoriesCount:userStoriesCount(),openStoriesCount:openUserStoriesCount()"}],template:['<div class="tau-progress tau-v-<%= fn.precise_round(fn.programProgress(this.data)*10, 0)*10 %>"></div>','<div class="tau-board-unit__value"><%= fn.precise_round(fn.programProgress(this.data)*100, 0) %></div>'],sampleData:{totalStoriesCount:10,openStoriesCount:5},listSettings:{title:"<%= fn.precise_round(fn.programProgress(this.data)*100, 0) %>%"}},{id:"test_cases",classId:"tau-board-unit_type_testcases-detailed-counter",hideIf:function(t){return!t.testCaseStats||!t.testCaseStats.passed&&!t.testCaseStats.failed&&!t.testCaseStats.ignored
},name:"Test cases stats",header:"Test Cases Stats",settings:[{types:[e.TEST_PLAN],sizes:[s.S,s.M,s.L,s.XL,s.LIST],model:"TestCaseStats:{passed:testCases.Count(lastStatus == true),failed:testCases.Count(lastStatus == false),ignored:testCases.Count(lastStatus == null)}"},{types:[e.STORY],sizes:[s.S,s.M,s.L,s.XL,s.LIST],model:"TestCaseStats:{passed:testCases.Count(lastStatus == true),failed:testCases.Count(lastStatus == false),ignored:testCases.Count(lastStatus == null)}"},{types:[e.TEST_PLAN_RUN],sizes:[s.S,s.M,s.L,s.X,s.XL,s.LIST],model:"TestCaseStats:{passed:PassedCount,failed:FailedCount,ignored:NotRunCount}"}],template:["<% var testCaseStats = this.data.testCaseStats || {}; %>",'<div class="tau-board-unit__value-passed <% if(!testCaseStats.passed){ %>  tau-board-unit__value--null <% } %>"><%= testCaseStats.passed || "" %></div>','<div class="tau-board-unit__value-failed <% if(!testCaseStats.failed){ %>  tau-board-unit__value--null <% } %>"><%= testCaseStats.failed || "" %></div>','<div class="tau-board-unit__value-ignored <% if(!testCaseStats.ignored){ %> tau-board-unit__value--null <% } %>"><%= testCaseStats.ignored || "" %></div>'],listSettings:{title:["<% var testCaseStats = this.data.testCaseStats || {}; %>","<% if (testCaseStats.passed || testCaseStats.failed || testCaseStats.ignored) { %>","Passed: <%= testCaseStats.passed || 0 %>, ","failed: <%= testCaseStats.failed || 0 %>, ","ignored: <%= testCaseStats.ignored || 0 %>","<% } %>"]},sampleData:{testCaseStats:{passed:830,failed:110,ignored:120}}},{id:"assignments_big_2",classId:"tau-board-unit_type_avatars-list",hideIf:function(t){return!(t.user||t.users&&t.users.length)},name:"Assigned people",header:"Assignments",settings:[{types:[e.FEATURE,e.EPIC,e.STORY,e.TASK,e.BUG,e.REQUEST,e.TEST_PLAN_RUN],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],model:"users:assignedUser.Select({id,avatarUri,fullName,email}),currentStateResponsiblePersons"}],template:m(2),listSettings:{title:'<%= _.map(fn.getPeopleOrdered(this.data), fn.getUserText).join("&#10;") %>'},sampleData:i,editorConfig:{type:"assignments"}},{id:"assigned_users",classId:"tau-board-unit_type_avatars-list",hideIf:function(t){return!t.users||!t.users.length
},name:"Assigned people",header:"Assignments",settings:[{types:[e.FEATURE,e.EPIC,e.STORY,e.TASK,e.BUG,e.REQUEST,e.TEST_PLAN_RUN],sizes:[s.M,s.L,s.XL,s.LIST],model:"users:assignedUser.Select({id,avatarUri,fullName,email}),currentStateResponsiblePersons"}],template:m(3),listSettings:{title:'<%= _.map(fn.getPeopleOrdered(this.data), fn.getUserText).join("&#10;") %>'},sampleData:i,editorConfig:{type:"assignments"}},{id:"assigned_users_name_initials",classId:"tau-board-unit_type_assigned_users_names",hideIf:function(t){return!t.users||!t.users.length},name:"Assigned people",header:"Assignments",settings:[{types:[e.FEATURE,e.EPIC,e.STORY,e.TASK,e.BUG,e.REQUEST,e.TEST_PLAN_RUN],sizes:[s.M,s.L,s.XL,s.LIST],model:"users:assignedUser.Select({id,firstName,lastName,fullName}),currentStateResponsiblePersons"}],template:{markup:["<%= fn.assignedUsersInitials(this.data, this.settings) %>"],customFunctions:{getUserName:function(e){var s=t.trim(e.firstName||""),a=t.trim(e.lastName||"");return s&&a?s[0]+a[0]:s[0]||a[0]},assignedUsersInitials:function(t){return S(t,this)}}},listSettings:{title:'<%= _.map(fn.getPeopleOrdered(this.data), fn.getUserText).join("&#10;") %>'},sampleData:{users:[{id:1,firstName:"Uladzimir",lastName:"Karatkievich",fullName:"Uladzimir Karatkievich",isActive:!0},{id:2,firstName:"Janka",lastName:"Kupala",fullName:"Janka Kupala",isActive:!0},{id:3,firstName:"Adam",lastName:"Mickiewicz",fullName:"Adam Mickiewicz",isActive:!0},{id:4,firstName:"Uladzimir",lastName:"Karatkievich",fullName:"Uladzimir Karatkievich",isActive:!0}],currentStateResponsiblePersons:[]},editorConfig:{type:"assignments"}},{id:"assigned_users_last_name",classId:"tau-board-unit_type_assigned_users_names",hideIf:function(t){return!t.users||!t.users.length},name:"Assigned people",header:"Assignments",settings:[{types:[e.FEATURE,e.EPIC,e.STORY,e.TASK,e.BUG,e.REQUEST,e.TEST_PLAN_RUN],sizes:[s.LIST],model:"users:assignedUser.Select({id,firstName,lastName,fullName}),currentStateResponsiblePersons"}],template:{markup:["<%= fn.assignedUsersLastName(this.data, this.settings) %>"],customFunctions:{getUserName:function(e){var s=t.trim(e.firstName||""),a=t.trim(e.lastName||"");
return s&&a?s[0]+". "+a:s||a},assignedUsersLastName:function(t){return S(t,this)}}},listSettings:{title:'<%= _.map(fn.getPeopleOrdered(this.data), fn.getUserText).join("&#10;") %>',maxWidth:300},sampleData:{users:[{id:1,firstName:"Adam",lastName:"Mickiewicz",fullName:"Adam Mickiewicz"},{id:2,firstName:"Janka",lastName:"Kupala",fullName:"Janka Kupala"}],currentStateResponsiblePersons:[]},editorConfig:{type:"assignments"}},{id:"assigned_users_full_name",classId:"tau-board-unit_type_assigned_users_names",hideIf:function(t){return!t.users||!t.users.length},name:"Assigned people",header:"Assignments",settings:[{types:[e.FEATURE,e.EPIC,e.STORY,e.TASK,e.BUG,e.REQUEST,e.TEST_PLAN_RUN],sizes:[s.LIST],model:"users:assignedUser.Select({id,fullName}),currentStateResponsiblePersons"}],template:{markup:["<%= fn.assignedUsersFullName(this.data, this.settings) %>"],customFunctions:{getUserName:function(e){return t.trim(e.fullName)},assignedUsersFullName:function(t){return S(t,this)}}},listSettings:{title:'<%= _.map(fn.getPeopleOrdered(this.data), fn.getUserText).join("&#10;") %>',maxWidth:300},sampleData:{users:[{id:1,fullName:"Adam Mickiewicz"},{id:2,fullName:"Janka Kupala"}],currentStateResponsiblePersons:[]},editorConfig:{type:"assignments"}},{id:"attachments",classId:"tau-board-unit_type_attachments-counter",hideIf:function(t){return!t.attachmentsCount},name:"Attachments count",header:"Attachments",types:[e.FEATURE,e.EPIC,e.STORY,e.TASK,e.BUG,e.REQUEST,e.TEST_CASE,e.IMPEDIMENT,e.ITERATION,e.TEAM_ITERATION,e.RELEASE,e.TEST_PLAN,e.TEST_PLAN_RUN,e.BUILD],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],template:['<div class="tau-board-unit__value"><%!this.data.attachmentsCount%></div>'],sampleData:{attachmentsCount:3},model:"attachmentsCount:attachments.Count()"},{id:"comments_count",classId:"tau-board-unit_type_comments-counter",hideIf:function(t){return!t.commentsCount},name:"Comments count",header:"Comments",types:[e.FEATURE,e.EPIC,e.STORY,e.TASK,e.BUG,e.REQUEST,e.TEST_CASE,e.IMPEDIMENT,e.ITERATION,e.TEAM_ITERATION,e.RELEASE,e.TEST_PLAN,e.TEST_PLAN_RUN,e.BUILD],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],template:['<div class="tau-board-unit__value"><%!this.data.commentsCount%></div>'],sampleData:{commentsCount:27},model:"commentsCount:comments.Count()"},{id:"requests_open",classId:"tau-board-unit_type_requesters-counter",hideIf:function(t){return!t.requestersCount
},name:"Requesters count",header:"Requesters",types:[e.REQUEST],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],template:['<div class="tau-board-unit__value"><%!this.data.requestersCount%></div>'],sampleData:{requestersCount:43},model:"requestersCount:requesters.Count()"},{id:"tasks",classId:"tau-board-unit_type_tasks-counter-open-total",hideIf:function(t){return!t.totalTasksCount},name:"Open/total tasks",header:"Tasks",types:[e.STORY],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],template:[_("Tasks")],term:"task",listSettings:{title:T("Tasks")},sampleData:{totalTasksCount:43,openTasksCount:26},model:"totalTasksCount:tasks.Count(),openTasksCount:tasks.Where(entityState.isFinal != true).Count()"},{id:"story_bugs",classId:"tau-board-unit_type_bugs-counter-open-total",hideIf:function(t){return!t.totalBugsCount},name:"Open/total ${bug,lower,names}",header:"${Bug,camel,names}",types:[e.STORY],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],template:[_("Bugs")],term:"bug",listSettings:{title:T("Bugs")},sampleData:{totalBugsCount:43,openBugsCount:26},model:"totalBugsCount:bugs.Count(),openBugsCount:bugs.Where(entityState.isFinal != true and project.isActive = true).Count()"},{id:"bugs",classId:"tau-board-unit_type_bugs-counter-open-total-e",hideIf:function(t){return!t.totalBugsCount},name:"Open/total ${bug,lower,names}",header:"${Bug,camel,names}",settings:[{types:[e.USER],sizes:[s.S,s.M,s.L,s.XL,s.LIST],model:"totalBugsCount:bugs.Where(project.isActive == true).Count(),openBugsCount:bugs.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[e.TEAM,e.PROJECT,e.ITERATION,e.TEAM_ITERATION,e.RELEASE,e.BUILD],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],model:"totalBugsCount:bugs.Count(),openBugsCount:bugs.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[e.PROGRAM],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],model:"totalBugsCount:bugsCount(),openBugsCount:openBugsCount()"}],template:[_("Bugs")],term:"bug",listSettings:{title:T("Bugs")},sampleData:{totalBugsCount:431,openBugsCount:261}},{id:"tasks_badge",classId:"tau-board-unit_type_tasks-counter",hideIf:function(t){return!t.openTasksCount
},name:"Open tasks",header:"Open Tasks",settings:[{types:[e.STORY],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],model:"openTasksCount:tasks.Where(entityState.isFinal != true).Count()"},{types:[e.USER],sizes:[s.S,s.M,s.L,s.XL,s.LIST],model:"openTasksCount:tasks.Where(entityState.isFinal != true and project.isActive == true).Count()"}],template:['<div class="tau-board-unit__value  tau-entity-icon tau-entity-icon--task"><%!this.data.openTasksCount%></div>'],sampleData:{openTasksCount:26}},{id:"story_bugs_badge",classId:"tau-board-unit_type_bugs-counter",hideIf:function(t){return!t.openBugsCount},name:"Open ${bug,lower,names}",header:"Open ${bug,camel,names}",types:[e.STORY],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],template:['<div class="tau-board-unit__value tau-entity-icon tau-entity-icon--bug"><%!this.data.openBugsCount%></div>'],sampleData:{openBugsCount:42},model:"openBugsCount:bugs.Where(entityState.isFinal != true).Count()"},{id:"bugs_badge",classId:"tau-board-unit_type_bugs-counter-e",hideIf:function(t){return!t.openBugsCount},name:"Open ${bug,lower,names}",header:"Open ${bug,camel,names}",settings:[{types:[e.PROJECT,e.TEAM,e.ITERATION,e.TEAM_ITERATION,e.RELEASE,e.BUILD],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],model:"openBugsCount:bugs.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[e.USER],sizes:[s.S,s.M,s.L,s.XL,s.LIST],model:"openBugsCount:bugs.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[e.PROGRAM],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],model:"openBugsCount:openBugsCount()"}],template:['<div class="tau-board-unit__value tau-entity-icon tau-entity-icon--bug"><%!this.data.openBugsCount%></div>'],sampleData:{openBugsCount:421}},{id:"teams_badge",classId:"tau-board-unit_type_teams-counter",hideIf:function(t){return!t.teamsCount},name:"Teams",settings:[{types:[e.PROJECT],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],model:"teamsCount:teamProjects.Count()"},{types:[e.USER],sizes:[s.S,s.M,s.L,s.XL,s.LIST],model:"teamsCount:teamMembers.Count()"}],template:['<div class="tau-board-unit__value"><%!this.data.teamsCount%></div>'],sampleData:{teamsCount:24}},{id:"us_count",classId:"tau-board-unit_type_userstories-counter",hideIf:function(t){return!t.userStoriesCount
},name:"Open ${user story,lower,names}",header:"Open ${User Story,camel,names}",settings:[{types:[e.FEATURE,e.TEAM,e.PROJECT,e.ITERATION,e.TEAM_ITERATION,e.RELEASE],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],model:"userStoriesCount:userStories.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[e.USER],sizes:[s.S,s.M,s.L,s.XL,s.LIST],model:"userStoriesCount:userStories.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[e.PROGRAM],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],model:"userStoriesCount:openUserStoriesCount()"}],template:['<div class="tau-board-unit__value  tau-entity-icon tau-entity-icon--userstory"><%!this.data.userStoriesCount%></div>'],sampleData:{userStoriesCount:425}},{id:"request_badge",classId:"tau-board-unit_type_requests-counter",hideIf:function(t){return!t.requestsCount},name:"Open requests",header:"Open Requests",settings:[{types:[e.PROJECT,e.TEAM],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],model:"requestsCount:requests.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[e.USER],sizes:[s.S,s.M,s.L,s.XL,s.LIST],model:"requestsCount:assignedRequests.Where(entityState.isFinal != true and project.isActive == true).Count()"}],template:['<div class="tau-board-unit__value tau-entity-icon tau-entity-icon--request"><%!this.data.requestsCount%></div>'],sampleData:{requestsCount:43}},{id:"dependencies",classId:"tau-board-unit_type_relations-counter-in-out",hideIf:function(t){return c(t.inbound)&&c(t.outbound)},name:"Relations",types:[e.FEATURE,e.EPIC,e.STORY,e.TASK,e.BUG,e.REQUEST,e.TEST_CASE,e.IMPEDIMENT,e.TEAM,e.PROJECT,e.ITERATION,e.TEAM_ITERATION,e.RELEASE,e.TEST_PLAN,e.TEST_PLAN_RUN,e.BUILD,e.PROGRAM],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],template:{markup:a.createUnitValueWrapperTemplate(["<% var inboundCount = fn.count(this.data.inbound); %>","<% var outboundCount = fn.count(this.data.outbound); %>",'<div class="tau-board-unit__value-in <%=this.data.inbound.openBlockers > 0 ? "tau-board-unit__value-blocker":"" %>"><%= inboundCount %></div>','<div class="tau-board-unit__value-out <%=this.data.outbound.openBlockers > 0 ? "tau-board-unit__value-blocker":"" %>"><%= outboundCount %></div>']),customFunctions:{count:p}},listSettings:{title:["<% var inboundCount = fn.count(this.data.inbound); %>","<% var outboundCount = fn.count(this.data.outbound); %>","<% if (inboundCount || outboundCount) { %>","In: <%= inboundCount %>, out: <%= outboundCount %>","<% } %>"]},sampleData:{inbound:{openAssignables:22,openBlockers:0,others:18},outbound:{openAssignables:43,openBlockers:0,others:4}},model:"inbound:masterRelations.activeMasterRelationsCount,outbound:slaveRelations.activeSlaveRelationsCount"},{id:"test_run_short",classId:"tau-board-unit_type_testruns-counter-open-total",hideIf:function(t){return!t.totalTestRunsCount
},name:"Open/total test plan runs",header:"Test Plan Runs",types:[e.PROJECT,e.ITERATION,e.TEAM_ITERATION,e.RELEASE,e.TEST_PLAN,e.BUILD],sizes:[s.M,s.L,s.XL,s.LIST],template:[_("TestRuns")],term:"testplanrun",listSettings:{title:T("TestRuns")},sampleData:{totalTestRunsCount:403,openTestRunsCount:286},model:"totalTestRunsCount:testPlanRuns.Count(),openTestRunsCount:testPlanRuns.Where(entityState.isFinal != true).Count()"},{id:"test_run_badge",classId:"tau-board-unit_type_testruns-counter",hideIf:function(t){return!t.openTestRunsCount},name:"Open test plan runs",header:"Open Test Plan Runs",types:[e.PROJECT,e.ITERATION,e.TEAM_ITERATION,e.RELEASE,e.TEST_PLAN,e.BUILD],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],template:['<div class="tau-board-unit__value tau-entity-icon tau-entity-icon--testrun"><%!this.data.openTestRunsCount%></div>'],sampleData:{openTestRunsCount:286},model:"openTestRunsCount:testPlanRuns.Where(entityState.isFinal != true).Count()"},{id:"feature_icon",classId:"tau-board-unit_type_features-counter-open-total",hideIf:function(t){return!t.totalFeaturesCount},name:"Open/total ${feature,lower,names}",header:"${Feature,camel,names}",settings:[{types:[e.EPIC,e.PROJECT,e.RELEASE,e.TEAM],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],model:"totalFeaturesCount:features.Count(),openFeaturesCount:features.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[e.USER],sizes:[s.S,s.M,s.L,s.XL,s.LIST],model:"totalFeaturesCount:features.Where(project.isActive == true).Count(),openFeaturesCount:features.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[e.PROGRAM],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],model:"totalFeaturesCount:featuresCount(),openFeaturesCount:openFeaturesCount()"}],template:[_("Features")],term:"feature",listSettings:{title:T("Features")},sampleData:{totalFeaturesCount:286,openFeaturesCount:204}},{id:"feature_badge",classId:"tau-board-unit_type_features-counter",hideIf:function(t){return!t.openFeaturesCount},name:"Open ${feature,lower,names}",header:"Open ${Feature,camel,names}",settings:[{types:[e.EPIC,e.PROJECT,e.RELEASE,e.TEAM],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],model:"openFeaturesCount:features.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[e.USER],sizes:[s.S,s.M,s.L,s.XL,s.LIST],model:"openFeaturesCount:features.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[e.PROGRAM],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],model:"openFeaturesCount:openFeaturesCount()"}],template:['<div class="tau-board-unit__value tau-entity-icon tau-entity-icon--feature"><%!this.data.openFeaturesCount%></div>'],sampleData:{openFeaturesCount:286}},{id:"us_opentotal",classId:"tau-board-unit_type_userstories-counter-open-total",hideIf:function(t){return!t.totalStoriesCount
},name:"Open/total ${user story,lower,names}",header:"${User Story,camel,names}",settings:[{types:[e.FEATURE,e.PROJECT,e.ITERATION,e.TEAM_ITERATION,e.RELEASE,e.TEAM],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],model:"totalStoriesCount:userStories.Count(),openStoriesCount:userStories.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[e.USER],sizes:[s.S,s.M,s.L,s.XL,s.LIST],model:"totalStoriesCount:userStories.Where(project.isActive == true).Count(),openStoriesCount:userStories.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[e.PROGRAM],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],model:"totalStoriesCount:userStoriesCount(),openStoriesCount:openUserStoriesCount()"}],template:[_("Stories")],listSettings:{title:T("Stories")},sampleData:{totalStoriesCount:281,openStoriesCount:201}},{id:"effort_total_collection",classId:"tau-board-unit_type_effort-total-e",name:"Total effort",header:"Effort",types:[e.ITERATION,e.TEAM_ITERATION,e.RELEASE],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],template:['<div class="tau-board-unit__value"><%=fn.precise_round(this.data.effort||0,1)%></div>','<div class="tau-board-unit__points"><%=this.data.units%></div>'],sampleData:{effort:255.5,units:"pt"},model:"effort:bugs.Sum(effort)+userStories.Sum(effort),units:units"},{id:"effort_complete_collection",classId:"tau-board-unit_type_effort-total-e tau-board-unit_type_effort-complete",name:"Completed effort",header:"Completed Effort",types:[e.ITERATION,e.TEAM_ITERATION,e.RELEASE],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],template:['<div class="tau-board-unit__value"><%=fn.precise_round(this.data.effort||0,1)%></div>','<div class="tau-board-unit__points"><%=this.data.units%></div>'],sampleData:{effort:201.3,units:"pt"},model:"effort:bugs.Sum(effort)+userStories.Sum(effort)-bugs.Sum(effortToDo)-userStories.Sum(effortToDo),units:units"},{id:"effort_spent_total_collection",classId:"tau-board-unit_type_effort-todo-total-e",name:"Todo/total effort",header:"Effort",types:[e.ITERATION,e.TEAM_ITERATION,e.RELEASE],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],template:['<div class="tau-board-unit__value-todo"><%=fn.precise_round(this.data.effortToDo||0,1)%></div>','<div class="tau-board-unit__value-total"><%=fn.precise_round(this.data.effort||0,1)%></div>','<div class="tau-board-unit__points"><%=this.data.units%></div>'],sampleData:{effortToDo:253.7,effort:380.3,units:"pt"},model:"effort:bugs.Sum(effort)+userStories.Sum(effort),effortToDo:bugs.Sum(effortToDo)+userStories.Sum(effortToDo),units:units",listSettings:{title:["<%= fn.precise_round(this.data.effortToDo || 0, 1) %>"," / ","<%= fn.precise_round(this.data.effort || 0, 1) %><%= this.data.units %>"]}}],f=new n;
return f.isEnabled("entity.epics")&&C.push([{id:"epic_icon",classId:"tau-board-unit_type_epics-counter-open-total",hideIf:function(t){return!t.totalEpicsCount},name:"Open/total ${epic,lower,names}",header:"${Epic,camel,names}",settings:[{types:[e.PROJECT,e.TEAM],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],model:"totalEpicsCount:epics.Count(),openEpicsCount:epics.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[e.USER],sizes:[s.S,s.M,s.L,s.XL,s.LIST],model:"totalEpicsCount:epics.Where(project.isActive == true).Count(),openEpicsCount:epics.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[e.PROGRAM],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],model:"totalEpicsCount:epicsCount(),openEpicsCount:openEpicsCount()"}],template:[_("Epics")],term:"epic",listSettings:{title:T("Epics")},sampleData:{totalEpicsCount:28,openEpicsCount:20}},{id:"epic_badge",classId:"tau-board-unit_type_epics-counter",hideIf:function(t){return!t.openEpicsCount},name:"Open ${epic,lower,names}",header:"Open ${Epic,camel,names}",settings:[{types:[e.PROJECT,e.TEAM],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],model:"openEpicsCount:epics.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[e.USER],sizes:[s.S,s.M,s.L,s.XL,s.LIST],model:"openEpicsCount:epics.Where(entityState.isFinal != true and project.isActive == true).Count()"},{types:[e.PROGRAM],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],model:"openEpicsCount:openEpicsCount()"}],template:['<div class="tau-board-unit__value tau-entity-icon tau-entity-icon--epic"><%!this.data.openEpicsCount%></div>'],sampleData:{openEpicsCount:20}}]),a.pushClones(C,{hideIf:function(t){return!t.tags||!t.tags.length},name:"Tags",types:[e.EPIC,e.FEATURE,e.STORY,e.TASK,e.BUG,e.REQUEST,e.TEST_CASE,e.IMPEDIMENT,e.TEAM,e.PROJECT,e.ITERATION,e.TEAM_ITERATION,e.RELEASE,e.TEST_PLAN,e.TEST_PLAN_RUN,e.BUILD,e.PROGRAM],template:{markup:['<div class="tau-board-unit_type_tags-list__wrapper">',"<%=fn.tags(this.data)%>","</div>"],customFunctions:{tags:u}},sampleData:{tags:["UX","Design","Prototype","Javascript"]},model:"tags:tagObjects.Select(name)",editorConfig:{type:"tagsInline"},listSettings:{title:'<%= this.data.tags.join("&#10;") %>',minWidth:70,maxWidth:600}},[{id:"tags_short",classId:"tau-board-unit_type_list tau-board-unit_type_tags-list-s",sizes:[s.M,s.L,s.XL,s.LIST]},{id:"tags_short_xs",classId:"tau-board-unit_type_list tau-board-unit_type_tags-list-xs",sizes:[s.M,s.L,s.XL]},{id:"tags_long",classId:"tau-board-unit_type_list tau-board-unit_type_tags-list",sizes:[s.XS,s.S,s.M,s.L,s.XL],sections:1}]),a.pushClones(C,{hideIf:function(t){return!(t.testCasesCount||t.passedCount||t.failedCount||t.notRunCount)
},name:"Total test cases",header:"Test Cases",settings:[{types:[e.STORY,e.TEST_PLAN],sizes:[s.S,s.M,s.L,s.XL,s.LIST],model:"testCasesCount:testCases.Count()"},{types:[e.TEST_PLAN_RUN],sizes:[s.S,s.M,s.L,s.XL,s.LIST],model:"testCasesCount:passedCount+failedCount+notRunCount"}],sampleData:{testCasesCount:142}},[{id:"test_case_badge",classId:"tau-board-unit_type_testcases-counter",template:['<div class="tau-board-unit__value tau-entity-icon tau-entity-icon--testcase"><%!this.data.testCasesCount%></div>']},{id:"test_case_icon",classId:"tau-board-unit_type_testcases-counter-alt",template:['<div class="tau-board-unit__value"><%!this.data.testCasesCount%></div>'],term:"testcase"}]),a.pushClones(C,{hideIf:function(t){return!t.impedimentsCount},name:"Open ${impediment,lower,names}",header:"Open ${Impediment,camel,names}",types:[e.EPIC,e.FEATURE,e.STORY,e.TASK,e.BUG,e.REQUEST,e.TEST_PLAN_RUN],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],sampleData:{impedimentsCount:7},model:"impedimentsCount:masterRelations.activeMasterRelationsCount.openBlockers"},[{id:"impediments",classId:"tau-board-unit_type_impediments-counter-alt",template:['<div class="tau-board-unit__value"><%!this.data.impedimentsCount%></div>']},{id:"impediments_badge",classId:"tau-board-unit_type_impediments-counter",template:['<div class="tau-board-unit__value tau-entity-icon tau-entity-icon--impediment"><%!this.data.impedimentsCount%></div>']}]),a.pushClones(C,{classId:"tau-board-unit_type_list tau-board-unit_type_projects-abbrs-list",hideIf:function(t){return!t.projects||!t.projects.length},name:"Projects abbreviations",header:"Projects",template:{markup:["<%=fn.projects(this.data, 2)%>"],customFunctions:{projects:l}},sampleData:{projects:[{color:"#f9d9d1",abbr:"MMM",name:"MMM"},{color:"#fbe9d6",abbr:"MWO",name:"MWO"},{color:"#fbe9d6",abbr:"MWO",name:"MWO"},{color:"#fbe9d6",abbr:"MWO",name:"MWO"}]},listSettings:{title:'<%= _.pluck(this.data.projects, "name").join("&#10;") %>'}},[{id:"project_abbrs_team",types:[e.TEAM],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],model:"projects:TeamProjects.Where(project.IsActive == true).Select({project.color,abbr:project.abbreviation,name:project.name})"},{id:"project_abbrs_user",types:[e.USER,e.ASSIGNED_USER],sizes:[s.S,s.M,s.L,s.XL,s.LIST],model:"projects:ProjectMembers.Where(project.IsActive == true).Select({project.color,abbr:project.abbreviation,name:project.name})"}]),a.pushClones(C,{classId:"tau-board-unit_type_list tau-board-unit_type_projects-list",hideIf:function(t){return!t.projects||!t.projects.length
},name:"Projects",template:{markup:["<%=fn.projects(this.data, 3)%>"],customFunctions:{projects:r}},sampleData:{projects:[{color:"#f9d9d1",abbr:"MMM",name:"MMM"},{color:"#fbe9d6",abbr:"MWO",name:"MWO"},{color:"#fbe9d6",abbr:"MWO",name:"MWO"},{color:"#fbe9d6",abbr:"MWO",name:"MWO"}]},listSettings:{title:'<%= _.pluck(this.data.projects, "name").join("&#10;") %>'}},[{id:"project_icons_team",types:[e.TEAM],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],model:"projects:TeamProjects.Where(project.IsActive == true).Select({project.color,abbr:project.abbreviation,name:project.name})"},{id:"project_icons_user",types:[e.USER,e.ASSIGNED_USER],sizes:[s.S,s.M,s.L,s.XL,s.LIST],model:"projects:ProjectMembers.Where(project.IsActive == true).Select({project.color,abbr:project.abbreviation,name:project.name})"}]),a.pushClones(C,{classId:"tau-board-unit_type_list tau-board-unit_type_teams-list",hideIf:function(t){return!t.teams||!t.teams.length},name:"Teams",template:{markup:["<%=fn.teams(this.data, 3)%>"],customFunctions:{teams:d}},sampleData:{teams:[{icon:"apple",name:"Apple Team"},{icon:"windows",name:"Windows Team"},{icon:"linux",name:"Linux Team"},{name:"Anonymous"}]},listSettings:{title:'<%= _.pluck(this.data.teams, "name").join("&#10;") %>'}},[{id:"teams_user",types:[e.USER,e.ASSIGNED_USER],sizes:[s.S,s.M,s.L,s.XL,s.LIST],model:"teams:teamMembers.Select({team.icon,team.name})"},{id:"teams_project",types:[e.PROJECT],sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST],model:"teams:TeamProjects.Select({team.icon,team.name})"}]),a.pushClones(C,{classId:"tau-board-unit_type_list tau-board-unit_type_avatars-list",sections:1,hideIf:function(t){return!t.users||!t.users.length},name:"People",sizes:[s.M,s.L,s.XL,s.LIST],template:["<% var users = this.data.users, count = users.length;%>",'<div class="tau-board-unit_type_list__total-counter"><%= count %></div>',"<% for (var i = 0; i < count; i++) {%>","<% var user = users[i]; %>",'<div class="tau-board-unit_type_list__item">','<div class="tau-avatar <%=user.isActive?"":"tau-avatar-not-active"%>">','<img src="<%= user.avatarUri %>20" <% if (!this.settings.isDesignMode) { %>title="<%! _.trim(user.fullName) || user.email %>"<% } %>>',"</div>","</div>","<% }%>"],sampleData:i,listSettings:{title:'<%= _.map(fn.getPeopleOrdered(this.data), fn.getUserText).join("&#10;") %>'}},[{id:"people_icons_project",types:[e.PROJECT],model:"users:projectMembers.Select({user.avatarUri,user.fullName,user.email,user.isActive})"},{id:"people_icons_team",types:[e.TEAM],model:"users:teamMembers.Select({user.avatarUri,user.fullName,user.email,user.isActive})"}]),a.pushClones(C,{classId:"tau-board-unit_type_projects-counter",hideIf:function(t){return!t.projectsCount
},name:"Projects",template:['<div class="tau-board-unit__value"><%!this.data.projectsCount%></div>'],sampleData:{projectsCount:24}},[{id:"projects_badge_team",types:[e.TEAM],model:"projectsCount:teamProjects.Where(project.IsActive == true).Count()",sizes:[s.XS,s.S,s.M,s.L,s.XL,s.LIST]},{id:"projects_badge_user",types:[e.USER,e.ASSIGNED_USER],model:"projectsCount:projectMembers.Where(project.IsActive == true).Count()",sizes:[s.S,s.M,s.L,s.XL,s.LIST]},{id:"projects_badge_program",types:[e.PROGRAM],model:"projectsCount:projects.Where(IsActive == true).Count()",sizes:[s.S,s.M,s.L,s.XL,s.LIST]}]),t.each(C,function(t){t.category="collection",t.lazy=!0}),C});