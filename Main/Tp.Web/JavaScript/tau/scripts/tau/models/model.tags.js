define(["Underscore","tau/core/model-base"],function(a,b){var c=function(a){this.model=a};c.prototype={_parseTags:function(b){b=b||"";var c=a.isArray(b)?b:b.split(","),d={},e=a(c).map(function(a){return a.trim()});return a.select(e,function(a){var b=a.toLowerCase();return d.hasOwnProperty(b)?!1:(d[b]=!0,!0)})},onGetTags:function(a){var b=a.data;this.id=b.id,this.tags=this._parseTags(b.tags)},done:function(a){var b={tags:this.tags};this.model.bus.fire("dataBind",b)}};var d=b.extend({onInit:function(){var a=new c(this),b=this.config.context,d=b.entity.entityType.name,e=b.entity.id,f={id:e,fields:["id","tags"]};this.store.get(d,f,{scope:a,success:a.onGetTags}).done({success:a.done,scope:a})},"bus evict":function(){var a=this.config.context.general;this.store.evictProperties(a.id,a.entityType.name,["tags"])}});return d})