define(["Underscore","tau/core/model-base"],function(_,a){var b=function(a){this.model=a};b.prototype={_parseTags:function(a){a=a||"";var b=_.isArray(a)?a:a.split(","),c={},d=_(b).map(function(a){return a.trim()});return _.select(d,function(a){var b=a.toLowerCase();return c.hasOwnProperty(b)?!1:(c[b]=!0,!0)})},onGetTags:function(a){var b=a.data;this.id=b.id,this.tags=this._parseTags(b.tags)},done:function(a){var b={tags:this.tags};this.model.bus.fire("dataBind",b)}};var c=a.extend({onInit:function(){var a=new b(this),c=this.config.context,d=c.entity.entityType.name,e=c.entity.id,f={id:e,fields:["id","tags"]};this.store.get(d,f,{scope:a,success:a.onGetTags}).done({success:a.done,scope:a})},"bus evict":function(){var a=this.config.context.general;this.store.evictProperties(a.id,a.entityType.name,["tags"])}});return c})