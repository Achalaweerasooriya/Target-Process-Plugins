define(["require","Underscore","tau/core/class"],function(t){var n=t("Underscore"),e=t("tau/core/class");return e.extend({init:function(t){this._store2=t.context.configurator.getStore2(),this._testPlanRun=t.context.entity,this._runned=0,this.started=n.Callbacks(),this.nextRun=n.Callbacks(),this.finished=n.Callbacks()},start:function(){this.started.fire(),this.runNext()},runNext:function(t){this._store2.findAll(["testPlanRun?","select={nextToRunPath("+(t||"null")+") as nextToRunPath}&","where=(id==",this._testPlanRun.id,")"].join("")).done(function(e){e&&!n.isEmpty(e[0].nextToRunPath)?this.nextRun.fire(e[0].nextToRunPath):this._finish(!!t)}.bind(this))},_finish:function(t){this.finished.fire(t)}})});