define(["Underscore","tau/core/extension.base","tau/models/tags/tagsProcessor"],function(e,t,i){return t.extend({fieldsToClone:["cells","x","y","zoomLevel","viewMode","cardSettings","timelineSettings"],"bus beforeInit":function(t,a){var o=a.config.context.configurator;this.fire("configurator.ready",o),this.fire("dataBind",{}),this.fire("tagsProcessor.ready",new i);var r=e.defaults(a.config.options||{},{groupName:"boardTemplates"});this.fire("options.ready",r)},"bus boardSettings.ready:last + form.submitted":function(t,i){var a=i.boardSettings;a.get({fields:this.fieldsToClone,callback:e.bind(function(e){this.fire("boardData.ready",e)},this)})},"bus options.ready:last + configurator.ready:last + tagsProcessor.ready:last + boardData.ready + form.submitted":function(t,i,a,o,r,s){var n=a.getRestStorage(),d={name:e.asString(s.name).trim().slice(0,50),description:e.asString(s.description).trim().slice(0,255),tags:o.asArray(o.asArray(s.tags).concat(["custom"])),definition:e.pick(r,this.fieldsToClone),numericPriority:(new Date).getTime()};d.name.length?n.data(i.groupName,void 0,{scope:"Public",publicData:d}).done(e.bind(function(e){this.fire("form.processed",e)},this)):this.fire("form.failed",{name:"Should not be empty"})}})});