define(["tau/models/customField/model.customField.editable","tau/utils/utils.jsonSchema","tau/utils/utils.date"],function(t,e,a){var i=t.extend({category:"edit",name:"Editable custom field",schema:e.Schema.create({type:"object",properties:{value:{type:"string",optional:!1,post:function(t){if(0==this.wasError()){var e=a.parse(t);null==e?new this.Error("Date","Incorrect date format"):e<new Date(1900,0,1)?new this.Error("Date","Date must be greater than 01-01-1900"):t=a.format.date.short(e)}return t},additionalProperties:{dateFormat:a.getFormatData().date.short}}}}),"bus validate":function(t){var e=t.data,a=e.cmd.$set.customFields[0],i=this.config.customField||this.config.data;this.schema.properties.value.optional=!i.required,this.schema.properties.value.empty=!i.required,e.validation=this.schema.validate(a)}});return i});