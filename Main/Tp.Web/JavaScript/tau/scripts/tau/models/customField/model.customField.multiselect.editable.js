define(["Underscore","tau/models/model.customField.editable"],function(_,ModelBase){var model=ModelBase.extend({onInit:function(){if(this.config.data){var curValue=this.config.data.value,choices=[];_.map(this.config.data.options,function(item){choices.push({id:item,name:item,selected:_.include(curValue,item)})});var nullableValue=curValue?!this.config.data.required&&choices.length:!1;this.fire("dataBind",{states:choices,nullableValue:nullableValue})}},"bus updateState":function(evt){var val=null;evt.data&&evt.data.id&&(val=evt.data.id);var $set={customFields:[{name:this.config.data.name,type:this.config.data.type,value:_.toArray(val).join(",")}]};this.fire("save",$set)}});return model})