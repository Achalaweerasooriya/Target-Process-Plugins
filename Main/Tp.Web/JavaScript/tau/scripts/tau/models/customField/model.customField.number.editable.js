define(["Underscore","tau/models/customField/model.customField.editable","tau/utils/utils.jsonSchema"],function(e,t,a){var i=t.extend({category:"edit",name:"Editable custom field",schema:a.Schema.create({type:"object",properties:{value:{type:"number",optional:!1,minimum:0,maximum:e.MAX_INT,minimumCanEqual:!0,pre:["trim","castTolerantlyToType"],"default":0,fallbacks:{type:"setDefault"}}}}),"bus validate":function(e){{var t=e.data,a=t.cmd.$set.customFields[0];a.value+"",this.config.context.applicationContext.culture.decimalSeparator}a.value=a.value.toString().replace(",","."),this.schema.properties.value.optional=!this.config.customField.required,this.schema.properties.value.empty=!this.config.customField.empty,t.validation=this.schema.validate(a)},"bus beforeSave":function(t){var a=t.data.cmd.$set.customFields[0].value;t.data.cmd.$set.customFields[0].value=e.isNumber(a)?a:null}});return i});