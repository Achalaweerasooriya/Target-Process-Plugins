define(["Underscore","tau/models/model.customField.editable","tau/utils/utils.jsonSchema"],function(_,ModelBase,jsonSchema){var model=ModelBase.extend({category:"edit",name:"Editable custom field",schema:jsonSchema.Schema.create({type:"object",properties:{value:{type:"number",optional:!1,minimum:0,maximum:_.MAX_INT,minimumCanEqual:!0,pre:["trim","castTolerantlyToType"],"default":0,fallbacks:{type:"setDefault"}}}}),"bus validate":function(evt){var args=evt.data,data=args.cmd.$set.customFields[0],value=data.value+"",delimiter=this.config.context.applicationContext.culture.decimalSeparator;data.value=data.value.toString().replace(",","."),this.schema.properties.value.optional=!this.config.customField.required,this.schema.properties.value.empty=!this.config.customField.empty,args.validation=this.schema.validate(data)},"bus beforeSave":function(evt){var val=evt.data.cmd.$set.customFields[0].value;evt.data.cmd.$set.customFields[0].value=_.isNumber(val)?val:null}});return model})