define(["Underscore","tau/models/model.customField"],function(_,ModelBase){var customFieldsModel=ModelBase.extend({_beforeSave:function(evt){return!0},"bus beforeInit":function(e){var config=e.data.config,entity=config.context.entity,processFields=config.context.getCustomFields(),self=this,sourceField={name:config.data.name,type:config.data.type};this.store.get(entity.entityType.name,{id:entity.id,fields:["id","customFields"]}).done({success:function(result){var entityFields=result[0].data.customFields,configuraton=self.createConfiguration(sourceField,entity,processFields,entityFields);self.fire("configurationProvided",configuraton)}})},_afterSave:function(evt){return!0}});return customFieldsModel})