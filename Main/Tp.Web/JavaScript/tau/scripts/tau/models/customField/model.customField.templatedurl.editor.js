define(["Underscore","tau/models/customField/model.customField"],function(e,t){var n=t.extend({_beforeSave:function(){return!0},"bus beforeInit":function(e){var t=e.data.config,n=t.context.entity,i=t.context.getCustomFields(),o=this,a={name:t.data.name,type:t.data.type};this.store.get(n.entityType.name,{id:n.id,fields:["id","customFields"]}).done({success:function(e){var t=e[0].data.customFields,d=o.createConfiguration(a,n,i,t);o.fire("configurationProvided",d)}})},_afterSave:function(){return!0}});return n});