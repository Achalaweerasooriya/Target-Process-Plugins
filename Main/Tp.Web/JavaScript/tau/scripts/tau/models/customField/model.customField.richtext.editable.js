define(["tau/models/model.customField.editable","tau/utils/utils.jsonSchema","tau/utils/utils.htmlConverter"],function(ModelBase,jsonSchema,htmlConverter){var model=ModelBase.extend({category:"edit",name:"Editable custom field",schema:jsonSchema.Schema.create({type:"object",properties:{value:{optional:!0,empty:!0,maxLength:4e3,type:"string",pre:["trim"]}}}),"bus validate":function(evt){var args=evt.data,data=args.cmd.$set.customFields[0];args.validation=this.schema.validate(data)},"bus beforeSave":function(evtData){var item=evtData.data.cmd.$set,field=item.customFields[0];field.value=htmlConverter.fromHtmlToSource(field.value)}});return model})