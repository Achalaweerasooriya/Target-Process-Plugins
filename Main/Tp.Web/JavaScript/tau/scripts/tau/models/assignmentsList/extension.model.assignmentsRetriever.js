define(["Underscore","tau/models/extension.model.base"],function(e,t){return t.extend({category:"model extension assignments retriever","bus registerStoreRequest":function(){var e=this.config.context.entity||{entityType:{}},t={generalUser:["id","firstName","lastName","avatarUri","email"]};this.fire("get",{type:e.entityType.name,query:{id:e.id,fields:[{assignments:["id",{role:["id","name"]},t],list:!0},{entityState:[{workflow:[{process:["name"]}]}]}]},callback:{scope:this,success:this.onAssignmentsRetrieved}})},"bus extendDataToBind":function(e,t){var s=this.config.context.entity;t.workflow={process:{name:this._processName},entityType:s.entityType.name}},onAssignmentsRetrieved:function(e){this._processName=e.data.entityState.workflow.process.name;var t=e.data.assignments;this.fire("assignmentsReady",t)}})});