define(["Underscore","tau/models/extension.model.base"],function(_,ExtensionBase){return ExtensionBase.extend({category:"model task EffortRetriever","bus registerStoreRequest":function(){var entity=this.config.context.entity||{entityType:{}};this.fire("get",{type:entity.entityType.name,query:{id:entity.id,fields:["tasks-count","tasks-effort-sum","tasks-effortToDo-sum"]},callback:{scope:this,success:this.onTaskEffortRetrieved}})},"bus extendDataToBind":function(evtArgs){var data=evtArgs.data||{},entity=this.entity||{};entity["tasks-count"]>0&&(data.tasksEffort={effort:this.floatToString(entity["tasks-effort-sum"]),remain:this.floatToString(entity["tasks-effortToDo-sum"])})},onTaskEffortRetrieved:function(evtArgs){this.entity=evtArgs.data},destroy:function(){delete this.entity,this._super()}})})