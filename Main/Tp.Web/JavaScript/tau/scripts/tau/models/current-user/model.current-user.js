define(["tau/core/extension.base"],function(e){return e.extend({"bus beforeInit":function(e,t){this.fire("configurator.ready",t.config.context.configurator)},"bus afterInit":function(e,t){var r=t.config.context.configurator,a=r.getLoggedUser(),i=r.getStore(),n=this;r.getFeaturesService().isEnabled("context.v2")?n.fire("dataBind",{userAvatarURI:a.avatarUri+"24",userId:a.id,logoutUrl:r.getUrlBuilder().getLogoutUrl(),userName:a.name}):i.get("user",{id:a.id,fields:["avatarUri","firstName","lastName"]}).done({success:function(e){var t=e[0].data;n.fire("dataBind",{userAvatarURI:t.avatarUri+"24",userId:t.id,logoutUrl:r.getUrlBuilder().getLogoutUrl(),userName:[t.firstName,t.lastName].join(" ")})}}),i.unbind(this),i.on({eventName:"afterSave",type:"user",listener:n},function(e){e.data.id==a.id&&n.fire("refresh")})}})});