define(["Underscore","jQuery","tau/core/class"],function(e,t,i){var r={};return i.extend({init:function(e){this.url=e.getApplicationPath()+"/slice/v1/lang/query",this.acidStore=e.getAppStateStore(),this.ajaxService=t.ajax},get:function(i){i=e.defaults(i||{},{query:{resourceTypes:[],script:""},take:50,skip:0,options:{insertDotForObjectAttribute:!0,insertLeftBracketForObjectCollectionMethod:!0}});var a=this.url+"/suggestions",n=t.Deferred();return this.acidStore.get({fields:["acid"],callback:e.bind(function(e){i.acid=e.acid;var t=JSON.stringify(i),s=(a+"/"+t).toLowerCase(),o=r.hasOwnProperty(s)?r[s]:this.ajaxService({url:a,type:"POST",data:t,dataType:"json",contentType:"application/json; charset=utf-8"});r[s]=o,o.done(n.resolve).fail(n.fail)},this)}),n}})});