define(["Underscore","jQuery","tau/core/class"],function(t,e,i){var r={};return i.extend({init:function(t){this.url=t.getApplicationPath()+"/api/v2/lang/query",this.acidStore=t.getAppStateStore(),this.ajaxService=e.ajax},get:function(i){i=t.defaults(i||{},{query:{resourceTypes:[],script:""},take:50,skip:0,options:{insertDotForObjectAttribute:!0,insertLeftBracketForObjectCollectionMethod:!0}});var a=this.url+"/suggestions",n=e.Deferred();return this.acidStore.get({fields:["acid"],callback:t.bind(function(t){i.acid=t.acid;var e=JSON.stringify(i),o=(a+"/"+e).toLowerCase(),s=r.hasOwnProperty(o)?r[o]:this.ajaxService({url:a,type:"POST",data:e,dataType:"json",contentType:"application/json; charset=utf-8"});r[o]=s,s.done(n.resolve).fail(n.fail)},this)}),n}})});