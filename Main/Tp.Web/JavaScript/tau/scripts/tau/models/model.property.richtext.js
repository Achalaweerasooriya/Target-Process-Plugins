define(["Underscore","tau/core/extension.base.stateful","tau/utils/utils.htmlConverter"],function(e,t,n){var a=t.extend({onInit:function(t){var a=this,i=t.context.entity,r=this.store,o=t.fieldName,d=i.entityType.name,s=i.id;r.unbind(a);var l=function(e,t){if(t.data.id==s){var n=t.data.changes;n.hasOwnProperty(o)&&a.fire(e,n)}};r.on({eventName:"beforeSave",type:d,listener:this},e.bind(l,this,"prepareChanges")).on({eventName:"afterSave",type:d,listener:this},e.bind(l,this,"applyChanges")),r.get(d,{id:s,fields:["id",o]}).done(function(e){var i=e[0].data;a.fire("dataBind",{value:n.fromSourceToHtml(i[o]),placeholder:t.placeholder})})}});return a});