define(["Underscore","tau/core/extension.base.stateful","tau/utils/utils.htmlConverter"],function(e,t,n){var i=t.extend({onInit:function(t){var i=this,a=t.context.entity,r=this.store,s=t.fieldName,o=a.entityType.name,d=a.id;r.unbind(i);var f=function(e,t){if(t.data.id==d){var n=t.data.changes;n.hasOwnProperty(s)&&i.fire(e,n)}};r.on({eventName:"beforeSave",type:o,listener:this},e.bind(f,this,"prepareChanges")).on({eventName:"afterSave",type:o,listener:this},e.bind(f,this,"applyChanges")),r.get(o,{id:d,fields:["id",s]}).done(function(e){var t=e[0].data;i.fire("dataBind",{value:n.fromSourceToHtml(t[s])})})}});return i});