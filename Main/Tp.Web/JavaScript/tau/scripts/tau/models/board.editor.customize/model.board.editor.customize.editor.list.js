define(["Underscore","tau/models/board.editor.customize/model.board.editor.customize.editor","tau/ui/ui.templateFactory","tau/ui/extensions/board.plus/ui.board.plus.utils","tau/utils/utils.customFields.list"],function(e,t,i,a,r){return t.extend({refreshLayout:function(t,n){n.configurator=t;var s=i.getTermProcessor(),o=a.orderListUnits(n.cardLayout);n.cardLayout=e.map(o,function(t){var i=e.clone(t.unit),a=e.intersection(n.types,e.chain(i.settings).pluck("types").flatten().value()),o=r.getListHeader(void 0!==i.header?i.header:i.name);return i.settings={classes:["dnd_source","maximized"],isDesignMode:!0,metaData:{id:t.id,rank:t.rank,title:i.name,header:o,alignment:t.alignment,typesNames:e.map(a,function(e){return{"long":s.getTerm(e,"names"),"short":s.getTerm(e,"iconSmall"),typeId:e}}),showTypes:n.types.length>a.length}},t.unit=i,t}),this.fire("refreshData",n)}})});