define(["require","tau/models/model.label","tau/libs/store2/store2"],function(t){var e=t("tau/models/model.label"),i=t("tau/libs/store2/store2");return e.extend({_hierarchyCountField:"testHierarchyCount",onInit:function(){this.dataBind(),this._updateBadge()},getCountFields:function(){return[this._hierarchyCountField]},entityChanged:function(){this._updateBadge()},_updateBadge:function(){this._receiveCount().done(this._setBadgeData.bind(this))},_receiveCount:function(){return this._getStore2().findAll(this.config.context.entity.entityType.name+"?select={"+this.getCountFields().join(",")+"}&where=(id=="+this.config.context.entity.id+")")},_setBadgeData:function(t){0!==t.length&&this.badgeDataRetrieved({data:t[0]})},_getStore2:function(){return this.store2||(this.store2=new i(this.config.context.configurator)),this.store2}})});