define(["Underscore","./model.board.cell"],function(_,a){return a.extend({"bus model.get.cell.basicInfo.start":function(a){this.fire("model.get.cell.basicInfo.dump",{dump:{}})},processResponse:function(a,b,c){var d=a.data.items;for(var e=0,f=d.length;e<f;e++){var g=d[e],h=this.getKey(g);b.hasOwnProperty(h)&&_.extend(b[h],g)}var i=[];for(var j=0;j<c.length;j++){var k=c[j];this.fireCellBasicInfoRetrieved(k),i=i.concat(k.dynamic.items)}this.fire("model.cards.data.ready",{cards:i})},getKey:function(a){return a.x+"_"+a.y},"bus slice.ready:last+model.get.cell.basicInfo.dump:last+model.get.cell.basicInfo.end":function(a){var b=a["model.get.cell.basicInfo.dump"].data.dump,c=_.values(b),d=a["slice.ready"].data.slice,e=_(c).pluck("x"),f=_(c).pluck("y"),g=this;d.cell({x:{$in:e},y:{$in:f}}).done(function(a){g.processResponse(a,b,c)})},"bus slice.ready:last+model.get.cell.content":function(a){},"bus model.get.cell.basicInfo.dump:last+model.get.cell.content":function(a){var b=a["model.get.cell.basicInfo.dump"].data.dump,c=a["model.get.cell.content"].data,d={x:c.x.toString(),y:c.y.toString(),dynamic:{items:[]},fixed:{items:[]}};b[this.getKey(d)]=d}})})