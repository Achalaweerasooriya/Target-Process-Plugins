define(["Underscore","./model.board.collapse"],function(_,Model){return Model.extend({"bus model.sliceInfo.retrieved + model.cells.content.loaded":function(evt){var cards=evt["model.cells.content.loaded"].data,axises=evt["model.sliceInfo.retrieved"].data,emptyValues=function(axis){var empty=[],marks=_.pluck(axises["marks"+axis.toUpperCase()]||[],axis);return _.each(marks,function(value){var items=_.select(cards.data.items,function(v){return v[axis]==value&&v.dynamic.items.length>0});items.length===0&&empty.push(value)}),empty},emptyX=emptyValues("x"),emptyY=emptyValues("y");this.fire("model.empty.data.ready",{x:emptyX,y:emptyY})},"bus settings.collapse.provided + model.empty.data.ready":function(evt){var empty=evt["model.empty.data.ready"].data,serverCollapsed=evt.data||{x:[],y:[]},data={x:_.without(empty.x,_.keys(serverCollapsed.x)),y:_.without(empty.y,_.keys(serverCollapsed.y))};this.fire("model.empty.axis.info",data)},"bus settings.collapse.provided":function(evt){},_fireCollapsedDataEvent:function(evt){var collapsingSettings=evt["settings.collapse.provided"]||evt["board.empty.collapsed.changed"],collapsed=_.cloneDeep(collapsingSettings.data||{x:[],y:[]}),empty=evt["model.empty.axis.info"].data;collapsed.x=_.union(collapsed.x,empty.x),collapsed.y=_.union(collapsed.y,empty.y),this.fire("view.collapsed.axis",collapsed)},"bus settings.collapse.provided + model.empty.axis.info":function(evt){this._fireCollapsedDataEvent(evt)}})})