define(["Underscore","jQuery","tau/core/extension.base","tau/configurations/definitions/board.definition.factory"],function(_,$,ExtensionBase,BoardDefinitionFactory){return ExtensionBase.extend({"bus configurator.ready":function(evt,configurator){configurator.getBoardDefinitionFactory=function(){return this.boardDefinitionFactory=this.boardDefinitionFactory||new BoardDefinitionFactory(configurator),this.boardDefinitionFactory}},"bus afterRender":function(evt,renderData){this.processBody(renderData.element),this.initializeFeedback()},"bus configurator.ready + application.exit":function(evt,configurator){this.fire("initProgress"),configurator.getRouting().redirect(configurator.getUrlBuilder().getDashboardUrl())},"bus configurator.ready:last + application.navigate + controller.postExecute":function(e,configurator,request){var params=request.requestArgs||{};if(params.entity!="board")return;var ctx={id:params.id,type:params.entity},defaultDefinition=configurator.getBoardDefinitionFactory().createDefault();configurator.setBoardSettingsOptions(defaultDefinition);var boardSettings=configurator.getBoardSettingsFactory().create(ctx.id);this.prepareBoardSettings({boardSettings:boardSettings})},"bus controller.app.host:last + controller.app.page:last + boardSettings.ready":function(e,hostBus,pageBus,bs){_.forEach([hostBus,pageBus],function(bus){bus.fire("boardSettings.ready",bs)})},prepareBoardSettings:function(args){var self=this,boardSettings=args.boardSettings;boardSettings.get({fields:["name","x","y","cells","viewMode","zoomLevel","collapse","focus"],callback:function(r){var bs={boardSettings:boardSettings};self.fire("boardSettings.ready",bs)}})},processBody:function($el){$(":root").addClass("tau-app-frame");var $body=$("body");$body.prepend($el),this.fire("view.dom.ready",{element:$body})},initializeFeedback:function(){(function(){var uv=document.createElement("script");uv.type="text/javascript",uv.async=!0,uv.src=("https:"==document.location.protocol?"https://":"http://")+"widget.uservoice.com/rywvig4l55Tifwaw7wk3Ag.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(uv,s)})()}})})