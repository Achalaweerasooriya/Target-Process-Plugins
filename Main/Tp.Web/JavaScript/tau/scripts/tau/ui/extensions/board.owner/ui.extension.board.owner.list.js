define(["Underscore","jQuery","tau/core/extension.base","tau/libs/store2/store2","tau/ui/extensions/user/jquery.tauUserAutocomplete"],function(e,t,n,r){return n.extend({"bus ownerIds.ready":function(e,t){this.ownerIds=t.ownerIds},"bus configurator.ready:last + boardSettings.ready:last + afterRender":function(e,t,n,r){var o=n.boardSettings;this._bindDelete(o,r.element),this._bindAdd(t,o,r.element)},_bindDelete:function(n,r){r.filter(":not(.i-role-delete-bound)").on("click",".i-role-delete",e.bind(function(r){var o=t(r.target).data("userid");this._updateOwners(n,function(t){return e.without(t,o)})},this)).addClass("i-role-delete-bound")},_bindAdd:function(t,n,o){var i=o.find(".i-role-add");i.data("tauuserautocomplete")||i.tauUserAutocomplete({position:{my:"right top",at:"right bottom+5",collision:"none"},store2:new r(t),rejectUserIdsGetter:e.bind(this._rejectUserIdsGetter,this),open:function(){t.getKeyBoardManager().pushHandler({})},close:function(){t.getKeyBoardManager().popHandler()},select:e.bind(function(e,t){this._updateOwners(n,function(e){return e.push(t.item.id),e})},this)})},_updateOwners:function(t,n){t.get({fields:["ownerIds"],callback:e.bind(function(e){t.set({set:{ownerIds:n(e.ownerIds)}})},this)})},_rejectUserIdsGetter:function(){return this.ownerIds}})});