define(["jQuery","Underscore","tau/core/extension.base"],function(t,e,i){function n(t){return 10>t&&(t=10),(t/1e3).toFixed(2)+" s"}return i.extend({init:function(t){this.globalBus=t.bus.globalBus,this._super(t)},"bus initialize:last + afterRender:last":function(i,a,s){this.configurator=a.context.configurator,this.diagnostics=a.context.configurator.getDiagnosticsService();var r=s.element.find(".tau-changelog-link"),o=this.configurator.getChangelogController();r.click(o.show.bind(o));var c=s.element.find(".tau-system-info"),u=c.find(".tau-server-time"),d=c.find(".tau-client-time"),l=this.configurator.getDiagnosticsService(),f=l.get("page");f&&(u.html(n(f.server)),d.html(n(f.client)));var g=this.diagnostics.get("slowMashups"),h=s.element.find(".i-role-slow-mashups-list");if(g.length){g=e.first(g,5);var m=document.createDocumentFragment();e.each(g,function(e,i){var a='<span class="tau-mashup-index">'+(i+1)+".</span>",s=a+" "+e.name,r=t("<tr><td>"+s+'</td><td><span class="tau-mashup-time">'+n(e.time)+"</span></td></tr>");r.appendTo(m)}),h.append(m)}else h.hide();var p=function(t){var e=t.data;if(e){var i=c.find(".tau-board-server-time"),a=c.find(".tau-board-client-time");i.html(n(e.server)),a.html(n(e.client)),c.find(".tau-board-time").show()}};l.on("board",p),p({data:this.diagnostics.get("board")})}})});