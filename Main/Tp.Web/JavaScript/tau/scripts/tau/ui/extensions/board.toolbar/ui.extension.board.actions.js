define(["jQuery","Underscore","tau/components/extensions/component.extension.base","tau/ui/templates/board.toolbar/ui.template.board.actions.menu","tau/models/print.cards/model.print.cards.board","tau/models/const.view.modes"],function(e,t,n,o,a){return n.extend({"bus boardSettings.ready:last + configurator.ready:last + afterRender":function(e,s,i,r){var d=i.getFeaturesService(),c=i.getLoggedUser(),b=d.isEnabled("boardTemplates")&&c.isAdministrator,l=r.element.find("[role=actions-button]"),u={target:l,cleanupOnHide:!0,className:"tau-board-actions-bubble",stackName:"actionsBoard",showOnCreation:!0,zIndex:42,componentsConfig:{components:[{name:"actions-bubble",layout:"selectable",model:r.data,boardTemplatesEnabled:b,extensions:[n.extend({"bus childComponentCreated":function(e,t){t.fire("boardSettings.ready",s)}})],type:"container",template:o,children:t.compact([r.data.isEditable?{selector:".remove-board-button",type:"board.remove"}:!1,{selector:".clone-board-button",type:"board.clone"},r.data.isPrintable?{selector:".print-board-button",type:"print.cards",extensions:[a,n.extend({init:function(e){this._super(e),l.one("taububblehide",function(){this.fire("clearPrintBlock")}.bind(this))}})]}:!1,{selector:".tau-csv",type:"board.csv"},b?{selector:".save-template-button",type:"board.templates.editor"}:!1])}]},onShow:function(e){l.addClass("tau-checked"),e.on("click.settings",".tau-btn-settings",function(){l.tauBubble("hide"),s.boardSettings.set({set:{edit:!0}})})},onHide:function(e){e.off("click.settings",".tau-btn-settings"),l.removeClass("tau-checked")}};l.on("click",function(){this.fire("initBubble",u)}.bind(this))}})});