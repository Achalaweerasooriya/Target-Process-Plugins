define(["Underscore","jQuery","./widget.select"],function(e,t,n){return n.extend({init:function(e,t,n){this._super(e,t,n),this.options.collectionName="entityState"},renderOutput:function(){this.value||this._super();var n=t.Deferred();return this.configurator.getStore().get(this.options.collectionName,{fields:["id","name"]}).done(e.bind(function(t){var i=e.map(t[0].data,function(e){return{value:e.name.toLowerCase(),label:e.name}}),r=this.value,a=e.find(i,function(e){return e.value==r});a||(a={label:this.value});var u=this.renderOutputTemplate({name:this.name,value:this.value,label:a.label});n.resolve(u)},this)),n.promise()},getEditOptions:function(t){return t=e.unique(t,function(e){return e.name.toLowerCase()}),t=e.sortBy(t,function(e){return e.name.toLowerCase()}),e.map(t,function(e){return{value:e.name.toLowerCase(),label:e.name}})}})});