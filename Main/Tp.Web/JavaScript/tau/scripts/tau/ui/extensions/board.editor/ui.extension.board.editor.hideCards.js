define(["Underscore","jQuery","tau/core/extension.base"],function(e,t,n){return n.extend({COUNT_OF_VISIBLE_CARDS:6,"bus $form.ready + boardSettings.ready:last":function(e,t,n){this._hideCardsIntoMoreAction(t),n.boardSettings.unbind({listener:this}),n.boardSettings.bind({fields:["edit"],listener:this,callback:function(e){e.edit&&this._hideCardsIntoMoreAction(t)}.bind(this)})},_hideCardsIntoMoreAction:function(e){var t=e.find(".tau-board-settings-cards button.i-role-cell-type").slice(this.COUNT_OF_VISIBLE_CARDS),n=e.find("button.tau-more");t.filter(":not(.tau-checked)").addClass("hidden").parent().addClass("collapsed"),n.removeClass("hidden").on("click",function(){t.removeClass("hidden").parent().removeClass("collapsed"),n.addClass("hidden")})}})});