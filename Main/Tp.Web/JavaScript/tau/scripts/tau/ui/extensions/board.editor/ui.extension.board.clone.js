define(["Underscore","tau/core/extension.base.stateful"],function(_,ExtensionBase){return ExtensionBase.extend({"bus boardSettings.ready:last + command.clone":function(e,bsDependency){var self=this,configurator=this.config.context.configurator,bs=bsDependency.boardSettings;bs.get({callback:function(r){var cloned=configurator.getBoardDefinitionFactory().cloneDefinition(r),storage=configurator.getRestStorage();storage.data(cloned.groupName,cloned.id,{scope:"Public",publicData:cloned,userData:{menuIsVisible:1}}).done(function(res){cloned.id=res.data.key,self.navigateToCloned(configurator,cloned)})}})},"bus afterRender":function(e){this.createTooltip(e.data.element.find(".i-role-clone-trigger"),"Clone this board with all settings")},createTooltip:function(button,content){button.tauBubble({content:content,template:['<div class="tau-bubble-board">','<div class="tau-bubble-board__arrow"  role="arrow"></div>','<div class="tau-bubble-board__inner tau-container"  role="content"></div>',"</div>"].join(""),zIndex:999,className:"tau-bubble-tooltip",showEvent:"mouseenter",hideEvent:"mouseleave",mode:"tooltip",onPositionConfig:function(config){return config.at="center top",config.my="center bottom",config.offset="0 0",config},onShow:function(){this.adjustPosition()}})},navigateToCloned:function(configurator,clonedDefinition){var hash=configurator.getUrlBuilder().getRelativeBoardUrl(clonedDefinition.id);configurator.getRouting().redirect(hash)}})})