define(["Underscore","tau/core/extension.base","tau/ui/behaviour/tags/ui.behaviour.tagsEditor"],function(t,i){return i.extend({category:"edit",alwaysShowTagsEditField:!1,"bus beforeInit":function(t,i){this.alwaysShowTagsEditField=i.config.alwaysShowTagsEditField||!1,this.renderEditorFirst=i.config.renderEditorFirst||!1},"bus afterRender:last+focus":function(t,i){i.element.find(".i-role-editor").tagsEditor("focus")},"bus afterRender":function(i,e){var r=e.element;this.fire("$el.ready",r);var a=this,s=r.find(".i-role-editor");s.bind("tagseditorshow",t.bind(this.fire,this,"$editor.shown",s)),s.tagsEditor({validation:{trim:!0},alwaysShowEditor:this.alwaysShowTagsEditField,renderEditorFirst:this.renderEditorFirst,onSave:function(t){s.addClass("data-saving"),a.fire("form.submitted",{tags:t})}}),this.fire("$editor.ready",s)},"bus tagsProcessor.ready:last + $editor.ready:last + external.toggleTag":function(i,e,r,a){r.tagsEditor("showEditor");var s=r.find(":text"),d=e.asArray(s.val());a.checked?d.push(a.text):d=t.without(d,a.text);var o=e.asString(d);o.length?s.val(o):r.tagsEditor("hideEditor")}})});