define(["Underscore","jQuery","tau/core/extension.base"],function(e,t,i){var r=function(e,t){var i=this;e.refActualCellsCount+=1,e.refActualCellsData.push(t),e.refActualCellsCount===e.expectedCellsCount&&i.fire("overview.cells.skeletons.ready",{cells:e.refActualCellsData,cardGroups:e.refActualCellsCardsGroupedHash})};return i.extend({init:function(e){this._super(e),this.config=e},"bus initialize":function(e,t){var i=this._extractOptions(t.options||this.config.options,{dragndrop:{containmentRefreshTimeout:null},clipboard:{processTimeout:null},paging:{0:[100,100,100],1:[100,50,25],2:[50,25,25]}});this.fire("options.ready",i),this.fire("configurator.ready",e.data.context.configurator),this.fire("board.configurator.initialized",{configurator:e.data.context.configurator}),this.startLifeCycle(e.data)},"bus refresh":function(){this.startLifeCycle(this.config)},"bus configurator.ready > refresh":function(e,t){this.fire("configurator.ready",t)},"bus options.ready > refresh":function(e,t){this.fire("options.ready",t)},startLifeCycle:function(e){this.fire("start.lifecycle",e)},"bus start.lifecycle":function(){this.fire("afterInit",{})},"bus pastElement:last + afterRender":function(e,t,i){var r=i.element,s=t.element;s!==r&&this.fire("board.element.updated",{newElement:r,oldElement:s})},"bus view.skeleton.built":function(e){this.fire("afterRender",e.data),this.fire("pastElement",e.data)},"bus afterRender":function(e){var t=e.data.element,i=t.find(".i-role-grid");this.fire("$el.ready",t),this.fire("$grid.ready",i)},"bus model.sliceInfo.retrieved":function(e,t){this.fire("view.build.skeleton",t);var i=t.x.onPage,r=t.y.onPage,s=i||1,n=r||1,l=s*n+i+r;this.fire("metaInfo",{expectedCellsCount:l,refActualCellsCount:0,refActualCellsData:[]})},"bus model.cell.basicInfo.retrieved":function(t,i){var r=e.has(i,"x"),s=e.has(i,"y");r&&s?this.fire("view.build.cell.skeleton",i):this.fire("view.build.axis.skeleton",i)},"bus view.cellSlot.built.start":function(){this.fire("model.get.cell.basicInfo.start",{})
},"bus view.cellSlot.built.end":function(){this.fire("model.get.cell.basicInfo.end",{})},fireOverviewCardsReady:function(e){this.fire("overview.cards.ready",{cards:e.refActualCellsCardsHash,cardGroups:e.refActualCellsCardsGroupedHash})},"bus metaInfo":function(){this.onViewCellSkeletonBuiltTick=r},"bus overview.cells.skeletons.ready":function(){this.onViewCellSkeletonBuiltTick=t.noop},"bus metaInfo:last + view.cell.skeleton.built":function(e,t,i){this.onViewCellSkeletonBuiltTick(t,i)},"bus metaInfo + view.cards.update.complete":function(e,t){this.fireOverviewCardsReady(t)},"bus view.skeleton.built + overview.cells.skeletons.ready":function(e){var t=e["view.skeleton.built"].data.element,i=e["overview.cells.skeletons.ready"].data.cells;this.fire("overview.board.ready",{element:t,cells:i})}})});