define(["tau/components/extensions/component.extension.base"],function(ExtensionBase,listTemplate){return ExtensionBase.extend({"bus afterInit":function(){if(this.signedUp)return;this.signedUp=!0;var entity=this.config.context.entity,typeName=entity.entityType.name,store=this.config.store,self=this;this._refresher||(this._refresher=function(){store.evictProperties(entity.id,typeName,["tasks","bugs"]),self.fire("refresh")},store.unbind(this),store.on({eventName:"afterSave",type:"userStory",listener:this,filter:{id:entity.id},hasChanges:["entityState"]},this._refresher))},"bus destroy":function(){this.config.store.unbind(this),delete this._refresher,this._super.apply(this,arguments)}})})