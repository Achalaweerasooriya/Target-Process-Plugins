define(["Underscore","jQuery","tau/core/extension.base"],function(e,c,n){return n.extend({"bus $sections.ready":function(e,n){n.each(function(){var e=c(this),n=e.find("header :checkbox");n.on("change",function(){e.find(".i-role-list .i-role-item:visible :checkbox").prop("checked",n.prop("checked"))});var o=function(){var c=e.find(".i-role-list .i-role-item:visible"),o=c.find(":checkbox").not(":checked");n.prop("checked",0==o.length&&c.length)};e.on("change",".i-role-list .i-role-item",o),e.on("synccheckboxes",o)})},"bus $sections.ready:last + filter.completed":function(e,c){c.trigger("synccheckboxes")},"bus $sections.ready:last + team.add.completed":function(e,c){c.trigger("synccheckboxes")},"bus $sections.ready:last + project.add.completed":function(e,c){c.trigger("synccheckboxes")},"bus $sections.ready:last + $popup.shown":function(e,c){c.trigger("synccheckboxes")},"bus $sections.changed":function(n,o){var t=function(n,o){var t={};e.each(o,function(e){t[e.id]=e.selected}),e.each(n.find(".i-role-item :checkbox"),function(e){var n=c(e),o=n.val(),i=n.prop("checked"),s=t[o];i!==s&&n.prop("checked",s)})};t(o.projects.$optionsList,o.projects.data),t(o.teams.$optionsList,o.teams.data)}})});