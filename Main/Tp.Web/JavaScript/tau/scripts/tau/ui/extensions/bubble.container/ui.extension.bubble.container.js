define(["Underscore","jQuery","tau/core/extension.base.stateful"],function(e,t,u){return u.extend({"bus afterRender":function(e,t){var u=t.element;this.fire("$el.ready",u)},"bus beforeInit + $el.ready + $trigger.ready":function(t,u,b,i){i.data("ui-tauBubble")&&i.tauBubble("destroy");var n={content:b,zIndex:"",onShow:e.bind(function(){this.fire("show")},this),onHide:e.bind(function(){this.fire("hide")},this)};this.config.autoClose===!1&&(n.stackName="bubble"+e.uniqueId(),n.dontCloseSelectors=["body"]),this.config.stackName&&(n.stackName=this.config.stackName),i.tauBubble(e.defaults(u.config.options||{},n)),this.fire("$bubbled.ready",i)},"bus view.dom.ready + $bubbled.ready":function(t,u,b){b.on("taububbledestroy",e.bind(function(){this.isDestroyed||this.fire("destroy")},this))},"bus $bubbled.ready:last + hide":function(e,t,u){t.tauBubble("hide",u||{})},"bus $bubbled.ready + componentsCreated":function(t,u,b){var i=!1,n=e.bind(function(e){var t=e.data("ui-tauBubble");this.config.visible&&!i&&(!t||t.$popup&&t.$popup.is(":visible")||e.tauBubble("show"),i=!0),e.data("ui-tauBubble")&&e.tauBubble("isVisible")&&e.tauBubble("adjust")},this,u);e.forEach(b,function(t){var b=t.component;u.on("taububbleshow",e.bind(b.fire,b,"$outerBubbled.shown")),u.on("taububblehide",e.bind(b.fire,b,"$outerBubbled.hidden")),b.on("afterRender",n),b.on("dom.modified",n),b.on("svg.ready",n),b.on("adjustPosition",n)}),n()},"bus $bubbled.ready:last + $el.ready:last + show.completed":function(e,t){t.tauBubble("adjust")},"bus $bubbled.ready:last + destroy":function(e,t){this.isDestroyed=!0,t.data("ui-tauBubble")&&t.tauBubble("destroy")}})});