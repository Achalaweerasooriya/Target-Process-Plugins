define(["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,t,i){return i.extend({"bus options.ready + beforeInit":function(e,t){this.initContainer(t)},init:function(e){this._super(e),this.$element=this.createElement()},createElement:function(){return t("<div></div>")},setWidget:function(e){this.$element.tauPopup({hideOnEscape:!0,hide:function(){this.fire(e.integration.keepAlive?"application.exit":"destroy")}.bind(this)})},showWidget:function(){this.$element.tauPopup("show")},hideWidget:function(){this.$element.tauPopup("hide")},getWidget:function(){return this.$element.tauPopup("widget")},initContainer:function(e){this.setWidget(e),this.$widget=this.getWidget(),this.$widget.on("transitionend webkitTransitionEnd",function(){t(window).trigger("resize")}),e.integration.cssClass&&this.$widget.addClass(e.integration.cssClass),this.fire("$popup.ready",this.$element)},"bus $popup.ready > contentRendered":function(e,t,i){this.fire("popup.open",i)},"bus popup.close > contentRendered":function(e,t,i){this.fire("popup.open",i)},"bus configurator.ready:last + $popup.ready:last + popup.open":function(e,i,n,o){var s=o.element;s.addClass("ui-popup-content"),this.showWidget(),this.$widget.append(s),this.fire("view.dom.ready",t("body"))},"bus application.exit":function(){this.fire("popup.close")},"bus configurator.ready:last + $popup.ready:last + popup.close":function(){this.$widget.is(":visible")&&this.hideWidget()},"bus $popup.ready > destroy":function(){this.hideWidget()}})});