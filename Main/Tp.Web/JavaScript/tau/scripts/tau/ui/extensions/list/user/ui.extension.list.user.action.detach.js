define(["tau/core/extension.base"],function(ExtensionBase){return ExtensionBase.extend({"bus afterInit + afterRender":function(evt,initConfig,renderData){var $el=renderData.element,store=initConfig.config.context.configurator.getStore(),entity=initConfig.config.context.entity;$el.delegate("[role=action-detach]","click",function(e){var $button=$(e.target);if($button.data("confirmMessage")&&!confirm($button.data("confirmMessage")))return;var $item=$button.parents("[role=item]:first"),relatedData=$item.data(),set={};set[relatedData.entityType+"s"]={id:relatedData.entityId};var relatedMainName=relatedData.entityType.toLowerCase()=="projectmember"?"project":"team";store.removeFromList(relatedMainName,{id:relatedData[relatedMainName+"Id"],$set:set}).done({success:function(){$item.remove(),store.evictProperties(entity.id,entity.entityType.name,[relatedMainName=="project"?"projectMembers":"teamMembers"])}})})}})})