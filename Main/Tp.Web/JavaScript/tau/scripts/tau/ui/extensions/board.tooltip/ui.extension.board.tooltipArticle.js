define(["Underscore","jQuery","tau/core/extension.base"],function(t,e,o){e.widget("ui.tauBubbleArticle",e.ui.tauBubble,{});var r="http://guide.targetprocess.com/teams-and-projects.html#visibility",i=t.map([{id:"project.formAdd.selectProcess",html:"<p>You can use our default process or create your own with custom workflows and practices.</p>",url:r},{id:"project.formAdd.selectProgram",html:"<p>You can group related projects under the same program to manage your portfolio.</p>",url:!1},{id:"project.formAdd.assignPeople",html:"<p>People can be included into both teams and projects so that you can vary work visibility.</p>",url:r},{id:"project.formAdd.assignTeams",html:"<p>You can have one team that works on several projects or one large project with several teams. Any mix of teams and projects, no matter how crazy, is supported.</p>",url:r},{id:"team.formAdd.assignPeople",html:"<p>People can be included into both teams and projects so that you can vary work visibility.</p>",url:r},{id:"team.formAdd.assignProjects",html:"<p>You can have one team that works on several projects or one large project with several teams. Any mix of teams and projects, no matter how crazy, is supported.</p>",url:r},{id:"board.templates",html:"<p>Easily create Views from predefined templates.</p>",url:"http://guide.targetprocess.com/boards/templates.html"},{id:"board.editor",html:"<p>On a View you can see different data as cards, organize your selected cards by common properties, and apply filters to cards and lanes.</p>",url:"http://guide.targetprocess.com/boards/boards-how-to.html",linkText:"See how to setup a View"},{id:"board.editor.access",html:"<p>Anyone can create Views that are private or shared with their team/project, but only administrators can create public Views.</p>",url:"http://guide.targetprocess.com/boards/access.html"},{id:"board.editor.prioritization",html:"<p>By default you should hold the Shift key to prioritize cards. While holding Shift, simply drag a card and move it into the desired position.</p><p>Remember that you can always change the prioritization mode for the View.</p>",url:"http://guide.targetprocess.com/boards/sort.html"},{id:"board.editor.selectCards",html:"<p>You can display various entities on Views. Entities with common properties can be displayed at the same time.</p>",url:"http://guide.targetprocess.com/boards/cards.html"},{id:"board.editor.selectLanes",html:"<p>Organize your selected items by common properties. You can use different properties (even custom fields) as your horizontal and vertical lanes.</p>",url:"http://guide.targetprocess.com/boards/lanes.html",linkText:"View the full list"},{id:"board.editor.selectListLevels",html:"<p>Organize your selected items by common properties. You can use different properties (even custom fields) as your 1st and 2nd levels.</p>",url:"http://guide.targetprocess.com/boards/lists.html"},{id:"board.editor.selectListCards",html:"<p>You can display various entities on Views. Entities with common properties can be displayed at the same time.</p>",url:"http://guide.targetprocess.com/boards/lists.html"},{id:"timeline.options.plannedInPast",html:"<p>This checkbox shows/hides planned dates for Done cards.</p>",url:"https://guide.targetprocess.com/boards/getting-started-with-the-timeline-view.html#planned-time"},{id:"timeline.options.showForecast",html:"<p>This checkbox shows/hides Forecast for cards.</p>",url:"https://guide.targetprocess.com/boards/getting-started-with-the-timeline-view.html#forecast-time"},{id:"board.editor.filter",html:["<p>","<strong>Basic mode.</strong> Just type keywords and filter cards by name. You can filter lanes (columns and rows) this way, as well.","</p>","<p>",'<strong>Advanced mode.</strong> These filters are much more powerful. Start off with "?" and from there you can create a complex query to use as a filter.',"</p>"].join(""),url:"http://guide.targetprocess.com/filters.html"},{id:"board.editor.saveContext",html:'<p>Specify a Projects-Teams context for&nbsp;this&nbsp;View, or go with "not specified" context.</p>',url:"https://guide.targetprocess.com/boards/context.html"},{id:"board.context.noProject.warning",html:"<p>All work will belong to some project in the future. All work without project will be moved to some artificial project.</p>",url:"http://tp3.uservoice.com/forums/174654-we-will-rock-you/suggestions/6326570-don-t-remove-no-project-option-across-the-system",linkText:"Share your opinion"}],function(e){return t.defaults(e,{url:"http://guide.targetprocess.com",linkText:"Read more&hellip;"})
});return o.extend({destroy:function(){this._super()},"bus afterRender":function(){var o=t.bind(function(t){var o=e(t.currentTarget);o.data("ui-tauBubbleArticle")||this._initTooltip(o)},this);e(document).on("mouseenter.tooltipArticle",".i-role-tooltipArticle",o),this.on("destroy",function(){e(document).off("mouseenter.tooltipArticle",".i-role-tooltipArticle",o)})},_initTooltip:function(e){var o=e.data("articleId"),r=t.findWhere(i,{id:o});r&&e.tauBubbleArticle({content:this._getContent(r),zIndex:99999,template:['<div class="tau-bubble-board">','<div class="tau-bubble-board__arrow" role="arrow"></div>','<div class="tau-bubble-board__inner tau-container" role="content"></div>',"</div>"].join(""),className:"tau-bubble-tooltipArticle",showEvent:"click",hideEvent:"click",stackName:"tooltipArticle",delay:100,showOnCreation:!1,onShow:function(){this.$target.toggleClass("tau-help_state_active",!0)},onHide:function(){this.$target.toggleClass("tau-help_state_active",!1)},onPositionConfig:this._tooltipPositionConfigTop,onArrowPositionConfig:this._tooltipArrowPositionConfigTop})},_getContent:function(t){var e=t.html;if(t.url){var o=this._applyStatisticQuery(t.url,t.id);e+='<a target="_blank" href="'+o+'">'+t.linkText+"</a>"}return e},_tooltipPositionConfigTop:function(t){t.at="left-8 top",t.my="left-50 bottom"},_tooltipArrowPositionConfigTop:function(t){return"center top"==t.at?t.at="left+10 top":"center bottom"==t.at&&(t.at="left+10 bottom"),t},_tooltipPositionConfigRight:function(t){t.at="right center",t.my="left center"},_applyStatisticQuery:function(t,o){var r,i,s=taus&&taus.adaptersScope&&taus.adaptersScope.cntx;return s?(r="?"+e.param({host:s.host&&s.host.id,userId:(s.user&&s.user.id).match(/(\d+)(?!.*\d)/).pop(),sid:taus.sid,origin:"Tooltip bubble "+o}),t.indexOf("#")>0?(i=t.split("#"),i[0]+r+"#"+i[1]):t+r):t}})});