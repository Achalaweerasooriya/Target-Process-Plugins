define(["Underscore","jQuery","tau/core/extension.base"],function(t,e,a){return a.extend({"bus initialize":function(){this.fire("activeTab.ready",null)},"bus activeTab.ready > refresh":function(t,e){this.fire("activeTab.ready",e)},"bus $el.ready":function(t,a){var i=this,n=a.find(".i-role-tabheader.tau-active");n.length&&this._switchTab(a,n,!0),a.on("click",".i-role-tabheader",function(){i._switchTab(a,e(this));i.fire("activeTab.ready",i._getActiveName(a))})},_switchTab:function(t,a,i){var n=t.find(".i-role-tabheader"),r=a.data("tab");n.not(a).each(function(){t.find(".i-role-tab-"+e(this).data("tab")).removeClass("tau-active")}).removeClass("tau-active");var s=t.find(".i-role-tab-"+r);return s.toggleClass("tau-active",i),s.hasClass("tau-active")&&this._applyFocus(s),a.toggleClass("tau-active",i),a},_applyFocus:function(t){t.find("form :submit:first:visible").focus(),t.find("form :text:first:visible").focus()},_getActiveName:function(t){return t.find(".i-role-tabheader.tau-active").data("tab")||null}})});