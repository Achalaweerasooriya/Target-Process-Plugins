define(["Underscore","jQuery","tau/core/extension.base"],function(_,$,ExtensionBase){return ExtensionBase.extend({"bus beforeInit + configurator.ready":function(evt,initConfig,configurator){var reloadEvt=_.bind(function(evt){var evtData=evt.data,changes={project:{id:evtData.project.id}},data={id:evtData.entity.id,changes:changes,cmd:{config:{$set:changes}}};this.fire("integration.react",data)},this),duplicateBugReloadEvt=_.bind(function(evt){var evtData=evt.data,changes={},data={id:evtData.bugId,changes:changes,cmd:{config:{$set:changes}}};this.fire("integration.react",data)},this),gb=configurator.getGlobalBus();gb.removeAllListeners(this),gb.on("bugWasMarkedAsDuplicate",duplicateBugReloadEvt,this),gb.on("entityWasMovedToProject",reloadEvt,this);var store=configurator.getStore();store.unbind(this);var reloadCallback=_.bind(function(e){this.fire("integration.react",e.data)},this),types=["general","assignment","roleEffort"];_.each(types,_.bind(function(type){store.on({type:type,eventName:"afterSave",listener:this},reloadCallback),store.on({type:type,eventName:"afterRemove",listener:this},reloadCallback)},this))},"bus options.ready + beforeInit":function(e,options){$("body").delegate("a[href=#]","click",function(e){e.preventDefault()});var reloadCallback=options.integration.reloadCallback,progress=options.integration.progress;progress&&this.fire("progress.ready",progress),reloadCallback&&this.fire("reloadCallback.ready",reloadCallback)},"bus progress.ready:last + initProgress":function(e,progress){progress.show("Reloading...")},"bus progress.ready:last + application.error":function(e,progress){progress.hide()},"bus reloadCallback.ready:last + integration.react":function(e,reloadCallback,integrationData){reloadCallback({data:integrationData})},"bus configurator.ready > destroy":function(evt,configurator){configurator.getStore().unbind(this),configurator.getGlobalBus().removeAllListeners(this)}})})