define(["Underscore","jQuery","tau/configurator","tau/components/extensions/component.extension.base"],function(_,$,a,b,c){return b.extend({"bus afterRender":function(a){var b=a.data.element,c=this,d=$(".filter-field",b),e=function(){d.is(":visible")&&d.focus()};$(".tau-bubble").bind("show",e),c.fire("showHandlerSigned",{handler:e});var f=function(a){var d=$(this),e=d.val();if(a.keyCode==jQuery.ui.keyCode.ENTER){c.fire("completeInput",{element:b,value:e});return}if(a.keyCode==jQuery.ui.keyCode.DOWN||a.keyCode==jQuery.ui.keyCode.UP)return;c.fire("inputChange",{element:b,value:e})};d.keyup(f),this.disableChange=!1},"bus inputChange":function(a){var b=this;b.lastChangeDate||(b.lastChangeDate=new Date),b.lastArgs||(b.lastArgs={value:""});if(b.lastArgs.value==a.data.value)return;b.lastArgs=a.data,setTimeout(function(){if(!b.lastChangeDate)return;var a=new Date-b.lastChangeDate;a>500&&b.lastArgs&&b.fire("completeInput",b.lastArgs)},501)},"bus partialDataRequest":function(){this.disableChange=!0},"bus dataRequestCompleted":function(){this.disableChange=!1},"bus completeInput":function(a){var b=this;b.lastRequestArgs||(b.lastRequestArgs={value:""});if(b.lastRequestArgs.value==a.data.value)return;var c=a.data.value!==""&&a.data.value!==null?[{property:"name",value:a.data.value}]:[];b.fire("search",{element:a.data.element,collection:c}),b.lastChangeDate=null,b.lastRequestArgs=a.data},"bus destroy+showHandlerSigned":function(a){$(".tau-bubble").unbind("show",a.showHandlerSigned.data.handler)}})})