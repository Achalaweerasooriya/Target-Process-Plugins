define(["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(_,$,ExtensionBase){var commentsExtension=ExtensionBase.extend({category:"edit",beforeSaveComment:function(cmdData){var $checkbox=this.placeHolder.find('input[type="checkbox"]'),settings={};$checkbox.each(function(i,el){var $el=$(el);$el.attr("checked")&&(settings[$el.val()]=!0)}),cmdData.cmd["comment-practices-notification-opts"]=settings},"bus editorSave":function(){if(!this.globalSettings.IsEmailNotificationsEnabled)return;var self=this;self.config.store.on({eventName:"beforeSave",type:"comment",listener:self},function(e){var cmdData=e.data;self.beforeSaveComment(cmdData)})},"bus editorCreated":function(evt){this.globalSettings=this.config.context.applicationContext.globalSettings||{};if(!this.globalSettings.IsEmailNotificationsEnabled)return;var $editor=evt.data.editorElement;this.placeHolder=$editor.find(".tau-notification-practices-settings");if(!this.placeHolder.length){var $notificationSettings=this.placeHolder=$('<div class="tau-notification-practices-settings"><span class="prompt">Notify by email: </span></div>');$notificationSettings.append("<input type='checkbox' id='owner' value='Owner' /><label for='owner'>Owner</label>"),$notificationSettings.append("<input type='checkbox' id='people' value='Assigned' /><label for='people'>Assigned people</label>"),this.config.context.entity.entityType.name.toLowerCase()==="request"?$notificationSettings.append("<input type='checkbox' id='requestor' value='Requesters' /><label for='requestor'>Requester(s)</label>"):$notificationSettings.append("<input type='checkbox' id='team' value='Team' /><label for='team'>Project Team</label>"),$notificationSettings.insertBefore($editor.find(".ui-richeditor__controls"))}},"bus destroy":function(){this.config.store.unbind(this),this._super.apply(this,arguments)}});return commentsExtension})