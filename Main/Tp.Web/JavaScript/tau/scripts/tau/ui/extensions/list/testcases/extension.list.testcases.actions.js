define(["Underscore","tau/ui/extensions/list/collapse/extension.list.actions.collapse"],function(t,e){return e.extend({"bus prioritize.start":function(){var t=this.$el.find(".ui-richeditor:visible");t.length&&t.prev().richeditor("hideEditor")},"bus preDataBind":function(t){var e=t.data;e.labelAdd=this.config.labelAdd||"Add"},"bus testCaseWasAdded":function(){this.fire("evictTestCases")},"bus evictTestCases":function(){var t=this.config.context.entity;this.config.context.configurator.getStore().evictProperties(t.id,t.entityType.name,["testCases","testCases-count"]),this.fire("refresh")},"bus afterRender":function(e,i){this._super(e,i);var n=i.element;this.$el=n;var s=this,a=this.config.context.configurator.getStore(),o=function(t,e){a.save("testcase",{id:t.id,$set:{lastStatus:e,lastFailureComment:null},fields:["id","lastStatus","lastRunDate"]}).done({success:function(){}})},r=t.bind(this.addTestCaseClickHandler,this);n.delegate("[role=action-add]","click",function(t){t.preventDefault(),t.stopPropagation(),r(t)}),n.delegate("[role=action-pass]","click",function(t){t.preventDefault(),t.stopPropagation();var e=$(this).parents("[role=item]:first"),i=e.data("tmplItem").data;o(i,!0),s._toggle(e,!1);var n=e.next("[role=item]");n.length&&s._toggle(n,!0)}),n.delegate("[role=action-fail]","click",function(t){t.preventDefault(),t.stopPropagation();var e=$(this).parents("[role=item]:first"),i=e.data("tmplItem").data,n=!1;o(i,n),s._toggle(e,!1);var a=e.next("[role=item]");a.length&&s._toggle(a,!0)})},addTestCaseClickHandler:function(t){this.bus.fire("action.add",{originalEvent:t,entity:this.config.context.entity})}})});