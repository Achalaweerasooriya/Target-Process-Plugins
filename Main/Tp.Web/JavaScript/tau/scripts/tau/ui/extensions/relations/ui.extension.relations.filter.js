define(["Underscore","jQuery","tau/components/extensions/component.extension.base","./relations.filter","tau/ui/templates/relations/filters/ui.template.relations.filter.relationType.option","tau/ui/templates/relations/filters/ui.template.relations.filter.entityType.option","tau/ui/templates/relations/filters/ui.template.relations.filter.project.option","tau/ui/templates/relations/filters/ui.template.relations.filter.project.output","tau/ui/templates/relations/filters/ui.template.relations.filter.team.option","tau/ui/templates/relations/filters/ui.template.relations.filter.team.output"],function(e,t,i,n,r,l,a,o,s,p){return i.extend({"bus beforeInit + afterRender":function(t,i,u){var f=e.bind(function(t,r,l,a,o){var s="i-role-filter-"+t;return new n({$el:u.element.find("."+s),outputTemplate:a||l,optionTemplate:l,configurator:i.config.context.configurator,callback:e.partial(e.bind(this.filterChanged,this),t),placeholderText:r,bubbleClass:(o||"")+" "+s})},this),c={relationType:f("relationType","Relation Type",r),entityType:f("entityType","Entity Type",l),project:f("project","Project",a,o,"tau-bubble-project"),team:f("team","Team",s,p,"tau-bubble-team")};this.fire("filters.ready",c),this.filterDefinition={},this.fire("public.relation.filter.changed",this.filterDefinition)},"bus filters.ready:last + entityTypes.ready":function(e,t,i){t.entityType.setFilterOptions(i)},"bus filters.ready:last + projects.ready":function(e,t,i){t.project.setFilterOptions(i)},"bus filters.ready:last + relationTypes.ready":function(e,t,i){t.relationType.setFilterOptions(i)},"bus filters.ready:last + teams.ready":function(e,t,i){t.team.setFilterOptions(i)},"bus afterRender:last + public.relationsReady":function(e,t,i){var n=t.element;i.master.length+i.slave.length>=2?"none"===n.css("display").toLowerCase()&&n.slideDown():n.slideUp()},filterChanged:function(e,t){this.filterDefinition[e]=t,this.fire("public.relation.filter.changed",this.filterDefinition)}})});