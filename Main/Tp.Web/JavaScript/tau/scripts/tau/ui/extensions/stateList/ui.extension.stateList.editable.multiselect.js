define(["Underscore","jQuery","tau/ui/extensions/stateList/ui.extension.stateList.editable"],function(_,$,ExtensionBase){var Extension=ExtensionBase.extend({"bus dataBind+afterRender":function(evt){this._super(evt);var $el=evt.afterRender.data.element;this.$el=$el,this.field=this.config.data,this._updateSave();var $saveButton=$el.find("[role=action-save]"),self=this;$saveButton.click(function(e){var $opts=$el.find("[role=option].tau-option_selected_true"),values=[];_.forEach($opts,function(option){values.push($(option).tmplItem().data.id)}),self._updateState(values)});var $cancelButton=$el.find("[role=action-cancel]");$cancelButton.click(function(e){self.fire("close")})},"bus blur":function(){this.bus.fire("close")},onItemSelected:function(evt){var $option=$(evt.target);$option.toggleClass("tau-option_selected_true"),this._updateSave()},_updateSave:function(){if(this.field.required==1){this.enabled=this.enabled||null;var $opts=this.$el.find("[role=option].tau-option_selected_true"),$saveButton=this.$el.find("[role=action-save]");$opts.length?($saveButton.removeClass("disable"),$saveButton.removeAttr("disabled")):($saveButton.addClass("disable"),$saveButton.attr("disabled","disabled"))}}});return Extension})