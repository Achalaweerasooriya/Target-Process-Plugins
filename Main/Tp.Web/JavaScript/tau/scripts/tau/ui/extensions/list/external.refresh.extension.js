define(["Underscore","tau/core/extension.base"],function(e,t){return t.extend({"bus beforeInit":function(t,n){var i=this,r=e.bind(function(t,n){var i=this,r=n.data["evict-data"],o=e.bind(function(e,t){e.evictProperties(t.entityId,t.entityType,t.evictProperties),this.fire("refresh")},i,t,r);e.has(r,"$defer")?r.$defer.done(o):o()},i,n.config.store),o=n.config.context.configurator.getGlobalBus();o.removeAllListeners(this),e.each(n.config.externalRefreshEvents,function(e){o.on(e,r,i)}),this.fire("globalBus.ready",o)},"bus globalBus.ready:last + destroy":function(e,t){t.removeAllListeners(this)}})});