define(["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(_,$,a){return a.extend({"bus afterRender":function(a){var b=a.data,c=this.$element=b.element,d=this.config.shortcutProcessorTarget,e=[],f=c.find(d),g=/\b(?:id):(?:\W|&nbsp;){0,5}(\d+)\b/gi;f.each(function(a,b){var c=$(b),d=c.html(),f=!1;d=d.replace(g,function(){f=!0;var a=arguments[1];return e.push(a),"<span class='tau-shortcut-loading' entity_ref='"+a+"'>id:"+a+"</span>"}),f&&c.html(d)}),e=_(e).uniq();var h=e.length;if(h){var i=this,j=this.config.store;for(var k=0;k<h;k++){var l=e[k],m={id:l,fields:["id","name",{entityType:["id","name"]}],silent:!0};j=j.get("general",m,{success:i.replaceShortcut,scope:i})}j.done()}},replaceShortcut:function(a){var b=a.data,c=$('<a href="#'+b.entityType.name+"/"+b.id+'">#'+b.id+"&nbsp;"+b.name+"</a>");this.$element.find("[entity_ref='"+b.id+"']").each(function(a,b){var d=$(b);d.replaceWith(c.clone())})}})})