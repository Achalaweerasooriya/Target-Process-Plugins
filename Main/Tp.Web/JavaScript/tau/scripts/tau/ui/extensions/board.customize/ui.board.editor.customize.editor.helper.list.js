define(["Underscore","tau/ui/extensions/board.customize/ui.board.editor.customize.editor.helper.base","tau/ui/templates/board.editor.customize/ui.template.board.editor.customize.editor.list.unit","tau/utils/utils.customFields.list"],function(t,e,n,i){var s=function(){};$.widget("tau.pscrollerForCustomize",$.ui.pscroller,{setPoint:function(t){this.__setPoint(t)}});var a=e.extend({init:function(){this.CLASS_MAP=t.defaults({CARD_SECTION:"tau-list-canvas",CARD:"tau-list-canvas"},this.CLASS_MAP)},setUnits:function(t){this.units=t},setConfigurator:function(t){this.configurator=t},getUnitLineNumber:function(){return 0},initializeScroll:function(t){this.getLayoutCompositor(t).pscrollerForCustomize().pscrollerForCustomize("enable")},setOptionScroll:function(t,e){this.getLayoutCompositor(t).pscrollerForCustomize("setPoint",e.point)},destroyScroll:function(t){this.getLayoutCompositor(t).pscrollerForCustomize("destroy")},appendToSection:function(t){this.showPlaceholder(t)},getPlaceholder:function(t){return t.find("."+this.CLASS_MAP.BOARD_UNIT_DND_PROXY).find(".tau-board-unit")},addDraggableClasses:function(t){t.closest(".tau-canvas-board-unit-cell").addClass(this.CLASS_MAP.BOARD_UNIT_DND_PROXY)},enableUnitInCard:function(t,e){t.addClass(this.CLASS_MAP.BOARD_UNIT_DND_SOURCE).closest(".tau-canvas-board-unit-cell").removeClass(this.CLASS_MAP.BOARD_UNIT_DND_PROXY+" "+this.CLASS_MAP.BOARD_UNIT_DND_PRE_INSERT).show(),e&&t.animateWithCss({cssClassName:"tau-operation_unit_added",offsetTimeout:-40})},isSectionCardElement:function(t){return this._super(t)||t.closest(".tau-canvas-board-unit-cell").hasClass("tau-canvas-board-unit-cell_not_dnd")},insertAfterUnit:function(t,e){t.closest(".tau-canvas-board-unit-cell").after(e.closest(".tau-canvas-board-unit-cell"))},insertBeforeUnit:function(t,e){t.closest(".tau-canvas-board-unit-cell").before(e.closest(".tau-canvas-board-unit-cell"))},getUnitHolder:function(t){return t.closest(".tau-canvas-board-unit-cell")},getUnit:function(t){return t.find("."+this.CLASS_MAP.BOARD_UNIT)},isOverUnit:function(t){return t.hasClass("tau-canvas-board-unit-cell")&&!t.hasClass("tau-canvas-board-unit-cell_not_dnd")&&!t.hasClass(this.CLASS_MAP.BOARD_UNIT_DND_PROXY)&&!t.closest("."+this.CLASS_MAP.LAYOUT_COMPONENTS_SET).length&&!t.closest("."+this.CLASS_MAP.CARD_SECTION).hasClass(this.CLASS_MAP.NOT_DROP)},isMultipleLineUnit:function(){return!1},isDoubleLineUnit:function(){return!1},isStretchableUnit:function(){return!1},removeFromSection:function(t){t.closest(".tau-canvas-board-unit-cell").remove()},setSectionStyles:s,resetSectionStyles:s,insertSectionToCard:s,isAvailableSpaceOnSection:function(){return!0},isAvailableSpaceForMultipleUnit:function(){return!0},isAvailableSpaceForStretchableUnit:function(){return!0},checkAvailableSpaceOnCard:function(){return!0},hidePlaceholder:function(t){t.closest(".tau-canvas-board-unit-cell").hide()},showPlaceholder:function(t){t.closest(".tau-canvas-board-unit-cell").show()},showPlaceholderOutLibrary:s,preInsertUnitOnCard:function(e,n){var s,a=n;if(a.length){this.setSectionStyles(a,e);var o=e.data("unitId"),r=t.find(this.units,function(t){return t.unitId==o}),l=this.renderUnitCell(r.unit);s=l.find(".tau-board-unit"),l.addClass(this.CLASS_MAP.BOARD_UNIT_DND_PROXY+" "+this.CLASS_MAP.BOARD_UNIT_DND_PRE_INSERT),s.addClass(this.CLASS_MAP.BOARD_UNIT_ALIGNMENT_BASE),this.hidePlaceholder(s),this.setAlignment(s,!0);var u=l.data("rank"),c=a.find("[data-rank="+u+"]");if(o.indexOf("custom_field")>=0){var d=l.find(".tau-board-unit-label");d.text(i.getListHeader(d.text()))}var h=c.last();h.length?h.after(l):a.append(l)}else s=$("<div/>").remove(),s.length=0;return s},handleDragOverStretchableUnit:s,renderUnitCell:function(t){return n.render({unit:t,configurator:this.configurator})},fixLayoutNearStretchable:s,freezeStretchableUnits:s,unfreezeStretchableUnit:s,unfreezeStretchableUnits:s});return new a});