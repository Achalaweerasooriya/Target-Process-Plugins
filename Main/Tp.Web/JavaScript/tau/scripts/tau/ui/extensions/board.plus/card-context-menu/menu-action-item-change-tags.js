define(["jQuery","Underscore","tau/ui/extensions/board.plus/card-context-menu/menu-action-item-base"],function(t,e,n){return n.extend({name:"Change Tags",className:"i-role-card-context-menu-changeTags",getDisabledEntityTypes:function(){return["user","requester","projectmember"]},getAlignTo:function(t){var e=t.getAlignTo(this);if(e.is(".i-role-timeline-card-holder,.i-role-timeline-planner-card-holder"))return e;var n=e.find(".tau-card-tags:visible");return n.length?n:e},itemClickCallback:function(n){var o=this.getBubbleCreator(n),i=function(){var e=t(o.cardSelector).find(".tau-card-tags");return 0!==e.length&&e.is(":visible")?"left+20":"center"},r={context:{entity:o.entity},alignTo:e.bind(this.getAlignTo,this,o),stackName:"tagsContextMenu",dontCloseSelectors:[".tau-autocomplete__menu__tags"],skipUpdateEntity:function(t){return!(t&&t.config.$set&&e.has(t.config.$set,"tags"))},onPositionConfig:function(t){t.my="center bottom",t.at=i()+" top"},onArrowPositionConfig:function(t,e){"bottom"===e?(t.my="center bottom",t.at=i()+" top"):(t.my="center top",t.at=i()+" bottom")},componentsConfig:{components:[{type:"tags",selector:".i-role-tagslistcontainer",alwaysShowTagsEditField:!0,renderEditorFirst:!0}]}};o.createBubble(r)}})});