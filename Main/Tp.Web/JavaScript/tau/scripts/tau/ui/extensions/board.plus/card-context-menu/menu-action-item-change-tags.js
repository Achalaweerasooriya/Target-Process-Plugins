define(["jQuery","Underscore","tau/ui/extensions/board.plus/card-context-menu/menu-action-item-base","tau/ui/extensions/board.plus/card-context-menu/menu-bubbleCreator"],function(t,e,n,o){return n.extend({name:"Change Tags",className:"i-role-card-context-menu-changeTags",getDisabledEntityTypes:function(){return["user","projectmember"]},getAlignTo:function(t){var e=t.getAlignTo(this);if(e.is(".i-role-timeline-card-holder,.i-role-timeline-planner-card-holder"))return e;var n=e.find(".tau-card-tags:visible");return n.length?n:e},itemClickCallback:function(n){var i=new o(n.$trigger,this),r=function(){var e=t(i.cardSelector).find(".tau-card-tags");return 0!==e.length&&e.is(":visible")?"left+20":"center"},a={context:{entity:i.entity},alignTo:e.bind(this.getAlignTo,this,i),stackName:"tagsContextMenu",dontCloseSelectors:[".tau-autocomplete__menu__tags"],skipUpdateEntity:function(t){return!(t&&t.config.$set&&e.has(t.config.$set,"tags"))},onPositionConfig:function(t){t.my="center bottom",t.at=r()+" top"},onArrowPositionConfig:function(t,e){"bottom"===e?(t.my="center bottom",t.at=r()+" top"):(t.my="center top",t.at=r()+" bottom")},componentsConfig:{components:[{type:"tags",selector:".i-role-tagslistcontainer",alwaysShowTagsEditField:!0,renderEditorFirst:!0}]}};i.createBubble(a)}})});