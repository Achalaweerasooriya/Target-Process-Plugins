define(["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,a,t){return t.extend({"bus afterRender":function(t){var n=t.data.element,i=n.find("[role=filter]"),r=i.find(":input"),s=i.find(":button"),o=this;this.state="clear",s.prop("disabled","disabled"),s.addClass("disable"),r.bind("change keyup",function(){o.state="dirty",s.prop("disabled",!1),s.removeClass("disable")});var d=function(t){var n={};r.each(function(){var t=a(this),i=e.trim(t.val());n[t.attr("name")]=i}),n.action=t,o.bus.fire("search.parametersBound",{parameters:n})};r.bind("keydown",function(e){switch(e.keyCode){case a.ui.keyCode.ENTER:d("search"),e.stopPropagation(),e.preventDefault();break;case a.ui.keyCode.DOWN:a(this).is("input")?a(this).blur():(e.stopPropagation(),e.preventDefault())}}),s.eq(0).click(function(){d(a(this).val())}),s.eq(1).click(function(){var t={};r.each(function(){var n=a(this);n.val(null);var i=e.trim(n.val());t[n.attr("name")]=i}),t.action=a(this).val(),o.bus.fire("search.parametersBound",{parameters:t}),s.prop("disabled","disabled"),s.addClass("disable"),r.filter("[data-autofocus]").focus()});var l=r.filter("[name=companyId]"),c=r.filter("[name=type]"),u=function(){"User"==c.val()?(l.val(null),l.prop("disabled","disabled")):l.prop("disabled",!1)};u(),c.on("change",u)}})});