define(["jQuery","Underscore","tau/ui/behaviour/common/ui.behaviour.progressIndicator","tau/ui/extensions/board.plus/ui.board.plus.utils","tau/ui/extensions/board.plus/ui.extension.board.plus.cardsViewer.base"],function(e,t,i,s,r){return r.extend({resetLifecycle:!0,appOptions:{applicationId:"listPopup",turnOffLoadingIndicator:!0,integration:{showInPopup:!1},routing:{silent:!0,executeOnStart:!1},comet:{enabled:!1}},"bus viewerBus.ready + view.skeleton.built + viewPort.afterRender":function(e,t){var i=e["view.skeleton.built"].data.element,s=e["viewPort.afterRender"].data.element;i.find(".i-card-details-holder").append(s),t.fire("view.dom.ready")},subscribe:function(i){this._viewCardSelectedHandler&&this.bus.removeListener("view.card.selected",this._viewCardSelectedHandler,this.bus),this._viewCardSelectedHandler=function(e){if(e.data.selected){var t=e.data.element.data();this.isSupportedCardForView(t)&&this.loadCardDetails(t)}}.bind(this);var s=t.debounce(this._openCardDetails.bind(this),500,!0);i.on("click",".tau-id",function(t){t.ctrlKey||(t.stopPropagation(),t.preventDefault(),s(e(t.currentTarget).data()))}),this.on("view.card.selected",this._viewCardSelectedHandler)},_openCardDetails:function(t){if("process"===t.entityType){var i=this.config.context.configurator;i.loggedUser.isAdministrator&&this._openProcessDetails(t)}else e(this).closest(".tau-card").trigger("mousedown")},"bus acid.ready:last + viewPort.created:last + view.load.cardDetails":function(e,t,i,s){this.fire("has.data.in.slice"),i.configurator.getBoardCacheService().setData(s.cardData),i.application.fire("history.reset"),i.application.fire("application.navigate.entity",{id:s.entityId,entity:s.entityType,acid:t})},"bus viewPort.created:last + view.empty.cardDetails":function(e,t){t.application.fire("application.exit"),this.fire("no.data.in.slice",{type:"isEmpty",reason:{noData:!0,noSetup:!1}})},"bus view.skeleton.built:last + view.cardDetails.routing":function(e,t){var i=t.element;this.showProgress(i)},"bus view.skeleton.built:last + view.cardDetails.lastResult":function(e,t){var i=t.element;
this.removeProgress(i)},"bus view.skeleton.built:last + view.empty.cardDetails":function(e,t){var i=t.element;this.removeProgress(i)},"bus view.card.batch.move.completed":function(){this.fire("view.card.batch.move.completed.spec.cardsViewer")},"bus view.skeleton.built:last + refresh":function(e,t){var i=t.element;this.removeProgress(i)},"bus view.skeleton.built:last + destroy":function(e,t){var i=t.element;this.removeProgress(i)},toggleProgress:function(e,t){var s=e.find(".i-card-details-holder"),r=i.get(s);t?r.show():r.hide()},showProgress:function(e){this.toggleProgress(e,!0)},removeProgress:function(e){this.toggleProgress(e,!1)}})});