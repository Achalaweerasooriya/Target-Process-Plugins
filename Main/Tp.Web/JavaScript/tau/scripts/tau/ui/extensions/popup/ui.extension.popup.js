define(["tau/components/extensions/component.extension.base","tau/core/tau","tau/configurator","tau/extensions/extension.javascript"],function(a,b,c){return a.extend({init:function(a){var b=this;b.bodyOverflow=$("body").css("overflow"),$("body").css("overflow","hidden"),b.$overlay=$('<div class="ui-popup-overlay" style="display: none;"></div>').appendTo("body"),b.$container=$('<div class="ui-popup" style="display: none;"><div class="close"></div></div>').appendTo("body"),b._super(a)},"bus beforeDelete":function(){},"bus deleted":function(){var a=this,b=this.$container.position(),c=b.top,d=b.left,e=this.$container.width(),f=this.$container.height();this.$container.animate({opacity:0,top:c+f/2,left:d+e/2,width:0,height:0},800,function(){a.bus.fire("destroy")}),this.$overlay.hide()},"bus contentRendered":function(a){var b=this;b.$overlay.show(),b.element=a.data.element,b.element.addClass("ui-popup-content");var c=b.$container,d=$(".close",c);d.hide(),c.animate({opacity:"show"},150,function(){b.element.appendTo(c),d.fadeIn(1e3),b._attachHandlers()})},_attachKeyBoardHandling:function(){var a=this,b={handleKeyDown:function(){a._onDocumentKeyDown.apply(a,arguments)}};c.getKeyBoardManager().pushHandler(b)},_attachHandlers:function(){this._attached||(this._attached=!0,this._onBodyClickHandler=$.proxy(this._onBodyClick,this),this._onDocumentKeyDownHandler=$.proxy(this._onDocumentKeyDown,this),this._onCloseButtonClickHandler=$.proxy(this._onCloseButtonClick,this),$(document).bind("click",this._onBodyClickHandler),this._attachKeyBoardHandling(),this.$container.find(".close").bind("click",this._onCloseButtonClickHandler),this._removeElements=this._removeElementsInnerImpl)},_onDocumentKeyDown:function(a){a.keyCode==$.ui.keyCode.ESCAPE&&this.fire("destroy")},_onBodyClick:function(a){a.target==this.$overlay[0]&&this.fire("destroy")},_onCloseButtonClick:function(){this.fire("destroy")},_detachHandlers:function(){$(document).unbind("click",this._onBodyClickHandler),this.element&&this.element.parents(".ui-popup").unbind("click",this._onElementClickHandler),c.getKeyBoardManager().popHandler(),this.$container.find(".close").unbind("click",this._onCloseButtonClickHandler)},_removeElementsInnerImpl:function(){this.$overlay.remove(),this.$container.remove(),$("body").css("overflow",this.bodyOverflow)},_removeElements:b.empty,"bus destroy":function(){this._detachHandlers(),this._removeElements(),this._super()}})})