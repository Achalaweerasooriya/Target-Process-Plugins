define(["Underscore","jQuery","tau/ui/extensions/choice/ui.extension.choice.editable"],function(e,t,i){return i.extend({"bus dataBind+afterRender":function(i){this._super(i);var a=i.afterRender.data.element;this.$el=a,this.field=this.config.data,this._updateSave();var n=a.find("[role=action-save]"),d=this;n.click(function(){var i=a.find("[role=option].tau-option_selected_true"),n=[];e.forEach(i,function(e){n.push(t(e).tmplItem().data.id)}),d._updateState(n)});var s=a.find("[role=action-cancel]");s.click(function(){d.fire("close")})},"bus blur":function(){this.bus.fire("close")},onItemSelected:function(e){var i=t(e.target);i.toggleClass("tau-option_selected_true"),this._updateSave()},_updateSave:function(){if(1==this.field.required){this.enabled=this.enabled||null;var e=this.$el.find("[role=option].tau-option_selected_true"),t=this.$el.find("[role=action-save]");e.length?(t.removeClass("disable"),t.removeAttr("disabled")):(t.addClass("disable"),t.attr("disabled","disabled"))}}})});