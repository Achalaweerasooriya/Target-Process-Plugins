define(["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(_,$,BaseExtension){return BaseExtension.extend({name:"ui.extension.domOperationsBase","bus markElementToBeDeleted":function(evt){var data=evt.data,$el=data.element;$el.addClass("deleting")},"bus deleteElement":function(evt){var $element=evt.data.element,callback=evt.data.callback;$element.fadeOut(750,callback)},"bus markElementToBeUpdated":function(evt){var data=evt.data,$el=data.element;$el.addClass("updating")},"bus cancelUpdateElement":function(evt){var $element=evt.data.element;this._highlightElement($element,"#EE5757",1500)},"bus updateElement":function(evt){var self=this,$element=evt.data.element;$element.each(function(){var $node=$(this);self._highlightElement($node,evt.data.color||"#FFFFD3",evt.data.duration||1500)})},_highlightElement:function($element,startColor,delay){$element.stop(!0,!0),$element.removeClass("updating"),$element.addClass("before-animate");var color=this._getElementBgColor($element),lastColor=$element.css("backgroundColor"),callback=function(){$element.css("backgroundColor","")};$element.removeClass("before-animate"),$element.css({backgroundColor:startColor}).animate({backgroundColor:color},delay,callback)},_getElementBgColor:function($el){var color="transparent";while($el.length>0&&$el.parent()&&((color=$el.css("backgroundColor"))=="transparent"||color==undefined||color=="rgba(0, 0, 0, 0)"||color.length==0)){$el=$el.parent();if($el.is("body"))break}if(color=="transparent"||color.length==0)color="#ffffff";return color}})})