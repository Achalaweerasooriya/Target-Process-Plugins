define(["Underscore","jQuery","app.path","tau/core/extension.base.stateful","tau/utils/utils.api","tau/utils/utils.serverErrorTranslator"],function(e,t,r,a,i,o){return a.extend({"bus board.deleted + configurator.ready:last":function(e,r,a){var i=r.boardData,o=t("<div><h3>View '"+i.name+'\' has been deleted.</h3><p><a class="i-role-undo" style="text-decoration: underline">Undelete</a></p><div>');o.on("click",".i-role-undo",function(){var e=a.getBoardApiService();e.setBoardData(r.id,i).done(function(){var e=a.getUrlBuilder().getRelativeBoardUrl(r.id);a.getRouting().redirect(e)})}.bind(this)),this.fire("notification",{id:"board.removed",className:"tau-system-message-success",$node:o,delay:1e4,disableAutoClose:!1})},"bus boardSettings.ready:last + afterRender":function(t){var r=this.config.context.configurator,a=t["boardSettings.ready"].data.boardSettings,i=t.afterRender.data.element,o=i.find("[role=action-remove]");o.tauConfirm({content:["<h3>"+o.data("confirmMessage")+"</h3>"].join(""),callbacks:{success:e.bind(function(){var t=r.getBoardApiService(),i=a.settings.id;t.getBoardData(i).done(e.bind(function(a){var o=a.data;this._removeBoard(i,t).done(e.bind(function(){this.fire("remove.board",{board:{id:i}}),r.getHistory().exclude(i);var e=(r.getHistory().pop(),"current");r.getRouting().redirect(r.getUrlBuilder().getRelativeBoardUrl(e)),this.fire("board.deleted",{boardData:o,id:i})},this))},this))},this)},zIndex:130})},_removeBoard:function(e,t){return t.removeBoard(e).fail(function(e){this.fire("error",o.translateXhrError(e))}.bind(this))}})});