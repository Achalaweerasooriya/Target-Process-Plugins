define(["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(_,$,ExtensionBase){return ExtensionBase.extend({"bus afterRender":function(evt){var $element=evt.data.element,onPositionConfig=function(config){return config.at="center bottom",config.my="center top",config.offset="0 -10",config},onArrowPositionConfig=function(config){return config.at="center bottom",config.my="center top",config.offset="0 -10",config},bubbleConfig={target:$element,onPositionConfig:onPositionConfig,showEvent:this.config.editorConfig.showEvent||"mouseenter",hideEvent:"click",showCloseButton:!1,delay:100,onShow:function(){var widget=this.target.tauBubble("widget");widget.find(".tau-bubble__inner").attr("tabindex",-1).css("outline","none").focus(),widget.on("keydown",function(e){e.keyCode==$.ui.keyCode.ESCAPE&&(widget.hide(),widget.off("keydown"),e.stopPropagation())})},onArrowPositionConfig:onArrowPositionConfig,componentsConfig:{components:[{type:"avatar.editor"}],context:this.config.context},stackName:"avatar"};this.fire("initBubble",bubbleConfig)},"bus avatarChanged":function(){this.fire("refresh")}})})