define(["jQuery","Underscore","tau/core/extension.base","tau/core/bus"],function(e,o,t,i){return t.extend({"bus initialize":function(o,t){var n=t.context.configurator;n.registerService("errorBar",new i);var r=e("body"),s=n.service("errorBar");s.on("error",function(e,o){this.showError(e,o.data)}.bind(this,r)),s.on("notification",function(e,o){this.showNotification(e,o.data)}.bind(this,r)),s.on("clearError",function(e,o){this.clearError(e,o.data)}.bind(this,r)),this.fire("$notified.ready",r)},"bus $notified.ready:last + clearError":function(e,o,t){this.clearError(o,t)},"bus $notified.ready:last + error":function(e,o,t){this.showError(o,t)},"bus $notified.ready:last + notification":function(e,o,t){this.showNotification(o,t)},clearError:function(e,o){e.notifyBar("remove",o)},showError:function(e,t){this.notify({id:t.id,type:t.type||"error",message:o.isString(t)?t:t.message||"Error",details:t.details,$node:t.$node,delay:t.delay,disableAutoClose:t.disableAutoClose===!0,button:t.button},e)},showNotification:function(e,o){this.notify({id:o.id,type:o.type,message:o.message,$node:o.$node,delay:o.delay,disableAutoClose:o.disableAutoClose===!0,button:o.button},e)},notify:function(t,i){if(!t.$node&&(t.$node=e('<div class="tau-system-message-body-inner"></div>'),t.$node.append("<h3>"+o.asString(t.message)+"</h3>"),t.details)){var n=e("<p></p>").append(t.details);t.$node.append(n)}var r=t.type||"success",s="success"===r,a=t.disableAutoClose,d=s?5e3:t.delay||1e5;s&&void 0===a&&(a=!1),i.notifyBar({id:t.id,className:"tau-system-message-"+r,$node:t.$node,delay:d,disableAutoClose:a,button:t.button})}})});