define(["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(_,$,ExtensionBase){return ExtensionBase.extend({configFieldName:"collapser_aside_collapsed","bus afterInit+afterRender":function(evt){var configurator=_.values(evt)[1].data.data.context.configurator,settingsManager=configurator.getSettingsManager(),$element=_.values(evt)[1].data.element,configFieldName=this.configFieldName,self=this,$appBody=$element.filter("[role=app-body]:first");self.fire("$appBody.ready",$appBody),self.fire("configurator.ready",configurator),settingsManager.get({fields:[configFieldName],callback:function(result){self.fire("isCollapsed.ready",!!result[configFieldName])}}),settingsManager.unbind({listener:this}),settingsManager.bind({fields:[configFieldName],listener:this,callback:function(result){self.fire("isCollapsed.ready",!!result[configFieldName])}})},"bus $appBody.ready:last+configurator.ready:last+isCollapsed.ready":function(e){var evt=_.pluck(_.values(e),"data"),$appBody=evt[0],configurator=evt[1],isCollapsed=evt[2],currentCollapsed=$appBody.hasClass("tau-sp-collapsed");currentCollapsed!=isCollapsed&&($appBody.toggleClass("tau-sp-collapsed",isCollapsed),$(configurator.getWindow()).trigger("resize"))},"bus configurator.ready+destroy":function(evt){var settingsManager=_.values(evt)[0].data.getSettingsManager();settingsManager.unbind({listener:this})}})})