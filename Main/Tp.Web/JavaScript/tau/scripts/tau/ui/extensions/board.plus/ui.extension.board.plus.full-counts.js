define(["jQuery","Underscore","tau/components/extensions/component.extension.base"],function($,_,ExtensionBase){return ExtensionBase.extend({resetLifecycle:!0,init:function(){var self=this;self._super.apply(self,arguments),self._updateMetaInfoDebouncedHandler=_.debounce(self.updateMetaInfoAsync,500)},updateMetaInfoAsync:function(sliceInfo,sliceApi,limits,domWrapper){var self=this;self._request&&self._request.reject({data:{status:0}});var x=_.pluck(sliceInfo.x.data,"x"),y=_.pluck(sliceInfo.y.data,"y"),coords={$whereX:x.length?{x:{$in:x}}:undefined,$whereY:y.length?{y:{$in:y}}:undefined};if(coords.$whereX||coords.$whereY)self._request=sliceApi.axesCounts(coords).done(function(r){self._request=null,domWrapper.updateAxesMetaInfo(r.data.items,limits),self.fire("view.axes.counters.updated")})},"bus boardSettings.ready":function(evt,boardSettings){boardSettings=boardSettings.boardSettings;var limitsReady=_.bind(function(data){this.fire("boardSettings.limitsReady",data.limits||{})},this);boardSettings.get({fields:["limits"],listener:this,callback:limitsReady}),boardSettings.bind({fields:["limits"],listener:this,callback:limitsReady})},"bus model.sliceInfo.retrieved + slice.ready + domWrapper.ready + boardSettings.limitsReady":function(e,sliceInfo,api,domWrapper,limits){this._updateMetaInfoDebouncedHandler(sliceInfo,api.slice,limits,domWrapper)},"bus boardSettings.limitsReady:last > model.sliceInfo.retrieved:last > slice.ready:last > domWrapper.ready:last >  view.card.batch.move.completed":function(e,limits,sliceInfo,api,domWrapper){this._updateMetaInfoDebouncedHandler(sliceInfo,api.slice,limits,domWrapper)},"bus boardSettings.limitsReady:last > model.sliceInfo.retrieved:last > slice.ready:last > domWrapper.ready:last > view.cell.skeleton.updated":function(e,limits,sliceInfo,api,domWrapper){this._updateMetaInfoDebouncedHandler(sliceInfo,api.slice,limits,domWrapper)},"bus boardSettings.limitsReady:last > model.sliceInfo.retrieved:last > slice.ready:last > domWrapper.ready:last > boardSettings.limitsReady:last > operation.execute.done":function(e,limits,sliceInfo,api,domWrapper){this._updateMetaInfoDebouncedHandler(sliceInfo,api.slice,limits,domWrapper)},"bus model.sliceInfo.retrieved:last > slice.ready:last > domWrapper.ready:last > boardSettings.limitsReady":function(e,sliceInfo,api,domWrapper,limits){this._updateMetaInfoDebouncedHandler(sliceInfo,api.slice,limits,domWrapper)}})})