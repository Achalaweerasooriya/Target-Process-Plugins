define(["Underscore","jQuery","tau/core/extension.base","tau/ui/templates/board.plus/ui.template.boardplus.card.skeleton"],function(_,$,ExtensionBase,cardTemplate){return ExtensionBase.extend({"bus $el.ready:last+viewMode.ready":function(ev,$el,viewMode){$el.toggleClass("tau-boardclipboard_enable_true",viewMode!="list"),this.fire("$el.readyToLayout",$el)},"bus    $el.ready:last          +                $selectable.ready:last  +                $holder.ready:last      +                configurator.ready:last +                cards.ready":function(ev,$el,$selectable,$holder,configurator,cards){var $cards=$holder.find(".i-role-card"),$real=$(),extLength=$cards.length;cards.length==0?$cards.detach():(_.forEach(cards,function(card){var $ext=$cards.filter("[data-_id="+card._id+"]");$ext.length?$cards=$cards.not($ext.eq(0)):($ext=configurator.getTemplateFactory().get("boardplus.card.skeleton").bind({},card),$ext.attr("id",_.uniqueId("clipboardcard_"))),$ext.length&&($real=$real.add($ext.eq(0)))}),$cards.detach(),$real.appendTo($holder)),$el.find("[role=counter]").text($real.length),cards.length>extLength&&$selectable.tauSelectable("reset"),this.fire("count.updated",$real.length)},"bus $el.ready:last + count.updated:last + collapseState.updated:last":function(evt,$el,count,state){$el.toggleClass("tau-boardclipboard_empty_true",count==0||state=="collapsed"),this.fire("$el.readyToLayout",$el)},"bus view.dom.ready":function(evt,dom){var $layout=dom.element.find(".tau-app-main-pane");this.fire("$layout.ready",$layout)},"bus $layout.ready:last+$el.readyToLayout":function(evt,$layout,$el){var isEnabled=$el.hasClass("tau-boardclipboard_enable_true"),isEmpty=$el.hasClass("tau-boardclipboard_empty_true");$layout.toggleClass("tau-layout-board_south-visible_true",isEnabled),$layout.toggleClass("tau-layout-board_south-visible_false",!isEnabled),$layout.toggleClass("tau-layout-board_south-expanded_false",isEmpty),$layout.toggleClass("tau-layout-board_south-expanded_true",!isEmpty)}})})