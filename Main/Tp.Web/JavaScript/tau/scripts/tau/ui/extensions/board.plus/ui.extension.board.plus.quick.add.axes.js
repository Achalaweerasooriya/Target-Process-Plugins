define(["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/extensions/board.plus/ui.board.plus.decorator.quick-add-axes"],function(t,e,o,i){return o.extend({resetLifecycle:!0,"bus slice.axes.quickadd.api.ready:last + domWrapper.ready:last + model.axesActions.ready":function(e,o,n,a){o.on("after.addAxisData",t.bind(this.onAfterAddData,this)),this.decorator=new i(n,{items:a.items,onActivate:t.bind(this.showQuickAddPopup,this,o,n)})},onAfterAddData:function(t){var e=t.data.result,o=e[0];this.itemsToAdd.push({data:o.dataItem,location:o.location})},setupBatchAddOperation:function(){this.itemsToAdd=[]},triggerBatchAddOperation:function(){0!==this.itemsToAdd.length&&this.fire("operation.execute",{name:"added",options:{force:!0},items:this.itemsToAdd})},showQuickAddPopup:function(e,o,i){var n=this,a=i.target,d=i.data.actionItems,s=t.find(d.fixed.items,function(t){return"AddAction"===t.type}),r="axis",c=o.getGrid().parents(".i-role-board-body-holder,.tau-entity-list"),u="x"===(d.location||"").toLowerCase(),p=function(t){t=!!t,c.prop("disabled",t),a.parent().toggleClass("tau-quick-add_expand",t)},f={target:a,cleanupOnHide:!0,stackName:"quickAdd",showOnCreation:!0,zIndex:1e4,onShow:function(){p(!0),n.setupBatchAddOperation()},onHide:function(){p(!1),n.triggerBatchAddOperation(),i.deactivate()},onPositionConfig:function(){return{my:u?"left top":"left bottom",at:u?"left-30 bottom":"left-30 top",of:a,collision:"fit flip"}},onArrowPositionConfig:function(t){u&&(t.offset="-5 0")},dontCloseSelectors:["#ui-datepicker-div"],componentsConfig:{components:[{name:"board axis quick add",type:"board.cell.quick.add",options:{slice:e,action:d,addAction:s,viewMode:r}}]}};n.fire("initBubble",f)}})});