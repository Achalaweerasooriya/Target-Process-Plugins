define(["jQuery","tau/core/extension.base"],function($,ExtensionBase){return ExtensionBase.extend({resetLifecycle:!0,"bus afterRender":function(evt,renderData){var $el=renderData.element;this.fire("confirmation.toggle",!0),this.fire("$el.ready",$el),this.fire("$list.ready",$el.find(".tau-templates-body")),this.fire("$items.ready",$el.find(".i-role-item"))},"bus $items.ready":function(evt,$items){var self=this;$items.find(".i-role-tabheader").on("click",function(e){e.stopPropagation(),self.fire("setup.pressed")})},"bus $el.ready:last + $items.ready:last + confirmation.toggle":function(evt,$el,$items,useConfirmation){var self=this,prevConfirmation=$el.data("confirmation");if(prevConfirmation==useConfirmation)return;$items.each(function(){var $item=$(this),id=$item.data("id"),$bubbled=$item.tauBubble({template:['<div class="tau-bubble tau-warning-bubble">','<div class="tau-bubble__inner tau-container"  role="content"></div>',"</div>"].join(""),content:["<h3>This board settings will be reset and new template will be applied. Do you want to do that?</h3>",'<div class="tau-buttons">','<button class="tau-btn tau-attention i-role-actionok">Ok</button>','<button class="tau-btn i-role-actioncancel">Cancel</button>',"</div>"].join(""),onPositionConfig:function(conf){return conf.my="center center",conf.at="center center",conf.offset="0 0",conf},onBeforeShow:function(){if($item.hasClass("tau-template-item-checked"))return!1},onHide:function(){$item.toggleClass("tau-template-item_hover",!1)},onShow:function(){$item.toggleClass("tau-template-item_hover",!0);var $w=$bubbled.tauBubble("widget");$w.unbind("click"),$w.one("click",".i-role-actioncancel",function(){$bubbled.tauBubble("hide")}),$w.one("click",".i-role-actionok",function(){$items.not($item).removeClass("tau-template-item-checked"),$item.toggleClass("tau-template-item-checked",!0),$bubbled.tauBubble("hide"),self.fire("item.selected",id)})},zIndex:130})}),useConfirmation?($items.tauBubble("enable"),$items.unbind("click.boardTemplates")):($items.tauBubble("disable"),$items.on("click.boardTemplates",function(){var $item=$(this),id=$item.data("id");$items.not($item).removeClass("tau-template-item-checked"),$item.toggleClass("tau-template-item-checked",!0),self.fire("item.selected",id)})),$el.data("confirmation",!!useConfirmation)},"bus $el.ready:last + $list.ready:last + $items.ready:last + external.setFocusOnSelected":function(evt,$el,$list,$items){var $item=$items.filter(".tau-template-item-checked");$item.length&&$list.scrollTo($item)},"bus $el.ready:last + $list.ready:last + $items.ready:last + external.selectDefault":function(evt,$el,$list,$items){var $item=$items.first().toggleClass("tau-template-item-checked",!0);$item.length&&$list.scrollTo($item)},"bus $el.ready:last + $list.ready:last + $items.ready:last + external.selectNone":function(evt,$el,$list,$items){$items.filter(".tau-template-item-checked").toggleClass("tau-template-item-checked",!1)}})})