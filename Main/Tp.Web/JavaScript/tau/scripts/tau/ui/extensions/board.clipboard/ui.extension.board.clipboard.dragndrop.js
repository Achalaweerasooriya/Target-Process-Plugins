define(["jQuery","tau/core/extension.base","tau/ui/extensions/board.plus/ui.board.plus.dom.utils"],function(e,r,t){return r.extend({"bus configurator.ready + $sortable.ready":function(e,r){r.getGlobalBus().removeAllListeners(this)},"bus configurator.ready:last + destroy":function(e,r){r.getGlobalBus().removeAllListeners(this)},"bus $el.ready + $selectable.ready":function(r,a,o){var l=this,s=a,i=a.parents("[role=main]:first");s.tauSortable({groups:".tau-boardclipboard__holder, .i-role-grid .i-role-cellholder",items:".i-role-card",appendTo:s,containment:i,addClasses:!1,useSelectable:o,connectedSortable:".i-role-grid",moveInGroup:!1,createPlaceholderContent:t.createDragNDropPlaceholderContent,processToGroup:function(e,r,t){var a=t;t.is(".i-role-cellholder")&&(a=t.children(".i-role-cell")),a.data("isempty",!0),e.appendTo(a);var o=a.children().length-1;o&&a.data("isempty",!1)}}),s.bind("tausortablestart",function(e,r){r.helper&&r.helper.find(".i-role-card").removeClass("i-role-card"),r.items.removeClass("i-role-card")}),s.bind("tausortablegroupentered",function(r,t){var a=t.group,o=a.parents(".i-role-grid"),l=o.length?o:s,i=e(t.item),n=i.data("ui-draggable");n.scrollParent=l,n.overflowOffset=l.offset()}),s.bind("tausortablestop",function(e,r){r.items.addClass("i-role-card"),o.tauSelectable("select",r.items),l.fire("cards.drag.stopped",r.items)}),l.fire("$sortable.ready",s)}})});