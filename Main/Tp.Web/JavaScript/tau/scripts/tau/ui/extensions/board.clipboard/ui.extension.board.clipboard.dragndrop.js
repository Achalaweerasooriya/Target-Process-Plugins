define(["jQuery","tau/core/extension.base","tau/ui/extensions/board.plus/ui.board.plus.dom.utils"],function(e,r,a){return r.extend({"bus configurator.ready + $sortable.ready":function(e,r){r.getGlobalBus().removeAllListeners(this)},"bus configurator.ready:last + destroy":function(e,r){r.getGlobalBus().removeAllListeners(this)},"bus $el.ready + $selectable.ready":function(r,t,o){var l=this,s=t,d=t.parents("[role=main]:first");s.tauSortable({groups:".tau-boardclipboard__holder, .i-role-grid .i-role-cellholder",items:".i-role-card",appendTo:s,containment:d,addClasses:!1,useSelectable:o,connectedSortable:".i-role-grid",moveInGroup:!1,createPlaceholderContent:a.createDragNDropPlaceholderContent,processToGroup:function(e,r,a){var t=a;a.is(".i-role-cellholder")&&(t=a.children(".i-role-cell")),t.data("isempty",!0),e.appendTo(t);var o=t.children().length-1;o&&t.data("isempty",!1)}}),s.bind("tausortablestart",function(e,r){taus.track({action:"clipboard cards dnd",tags:["clipboard","cards dnd",r.items.length]}),r.helper&&r.helper.find(".i-role-card").addClass("tau-card-v2_dnd_helper").removeClass("i-role-card"),r.items.removeClass("i-role-card")}),s.bind("tausortablegroupentered",function(r,a){var t=a.group,o=t.parents(".i-role-grid"),l=o.length?o:s,d=e(a.item),i=d.data("ui-draggable");i.scrollParent=l,i.overflowOffset=l.offset()}),s.bind("tausortablestop",function(e,r){r.items.addClass("i-role-card"),o.tauSelectable("select",r.items),l.fire("cards.drag.stopped",r.items)}),l.fire("$sortable.ready",s)}})});