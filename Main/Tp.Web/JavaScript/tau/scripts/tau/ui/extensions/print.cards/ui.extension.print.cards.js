define(["Underscore","jQuery","tau/core/extension.base","tau/ui/templates/print.cards/ui.template.print.cards","tau/core/tau"],function(t,r,i,e){return i.extend({"bus afterRender":function(t,i){i.element.on("click",".i-role-print-trigger",function(t){r(t.currentTarget).prop("disabled",!0),this.fire("getCardsData")}.bind(this))},clearPrintBlock:function(){this.$printBlock&&(this.$printBlock.remove(),r("body").css({overflow:""}))},"bus clearPrintBlock":function(){this.clearPrintBlock()},"bus destroy":function(){this.clearPrintBlock(),this._super()},"bus configurator.ready:last + renderCards + afterRender:last":function(i,n,o,d){d.element.find(".i-role-print-trigger").prop("disabled",!1);var a=r(".i-print-card");0===a.length&&(a=r('<div  class="i-print-card print-block-cards"/>').appendTo("body"),r("body").css({overflow:"hidden"})),this.$printBlock=a;var c=e.render(o);a.removeClass("print-block-cards_hide").html(c);var s=c.find(".i-role-card"),l=t.reduce(s,function(t,i){var e=r(i).height(),n=r(i).width();return t.height=e>t.height?e:t.height,t.width=e>t.width?n:t.width,t},{width:0,height:0}),h=1.92,p={width:l.width*h,height:l.height*h+35};c.find(".wrap-cards-for-print").css(p),r(window).on("afterprint",function(){this.clearPrintBlock()}.bind(this)),window.print(),window.stop&&(location.reload(),window.stop()),a.addClass("print-block-cards_hide")}})});