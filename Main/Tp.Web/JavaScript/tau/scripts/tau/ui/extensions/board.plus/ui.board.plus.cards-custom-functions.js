define(["Underscore","tau/ui/extensions/board.plus/ui.board.plus.utils","tau/utils/utils.color","tau/services/colorEncoding/service.colorEncoding.brewer"],function(a,t,r,e){function n(a){return function(t,r){return a==t?void 0:r}}var i={r:134,g:153,b:181},o=a.partial(r.combineColors,a,i,.3),s=new e;return{_:a,generateDataAttributes:function(a){var r=a.data.cardData,e={id:a.id,"entity-type":r.type.toLowerCase(),"ordering-value":a.orderingValue,"entity-id":r.id,"card-data":JSON.stringify(r),"data-item":JSON.stringify(a,n("data"))};return a._id&&(e._id=a._id),t.generateElementData(e)},generateCardId:a.bind(t.generateCardId,t),generateCardClass:function(a){return["i-role-card","i-role-"+a.id,"tau-card-v2","tau-card-v2_type_"+a.type.toLowerCase(),this.generateFinalStateClass(a.data.cardData),this.generateIsInPastClass(a.data.cardData)].join(" ")},generateFinalStateClass:function(a){return a.isFinal?"tau-card-v2_final-state":""},generateIsInPastClass:function(a){return a.isInPast?"tau-card-v2_isInPast":""},generateColorEncodingStyle:function(t){if(t.coords&&t.coords.color){var e=t&&t.data&&t.data.cardData,n=e.isFinal||e.isInPast,i=a.chain(t.coords.color.split(" ")).filter(function(a){return""!==a}).map(function(a){var t=s.mapColorClassToColor(a);return t?t.className:a}).map(function(a){if(n){var t=r.stringToColor(a),e=o(t);return r.colorToString(e)}return a}).map(function(a){return"#"+a}).take(3).value(),d=r.generateGradient(i.reverse());return"background: "+d+";"}}}});