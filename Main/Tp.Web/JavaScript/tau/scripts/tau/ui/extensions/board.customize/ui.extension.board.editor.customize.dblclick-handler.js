define(["jQuery","tau/components/extensions/component.extension.base","tau/ui/extensions/board.customize/ui.board.editor.customize.editor.helper","Underscore"],function(e,t,i,n){return t.extend({init:function(e){this._super(e),this.helper=i},"bus afterRender:last + child.customize.editor.ready:last + child.customize.library.ready:last":function(t,i){var r=i.element,o=this.helper,c=o.CLASS_MAP,s=r.find("."+c.LAYOUT_COMPONENTS_SET),a=o.getCard(r),d=n.bind(function(t){var i=r.find("."+c.CARD_SECTION),n=e(t.currentTarget),d=o.preInsertUnitOnCard(n,i,s);o.unfreezeStretchableUnits(r),d.length&&(o.disableUnitInLibrary(d,s),o.enableUnitInCard(d,!0),o.getLayoutCompositor(r).scrollTo(d),this.fire("public.card.changed",a))},this),l=n.bind(function(t){var i=e(t.currentTarget);o.removeFromSection(i),o.enableUnitInLibrary(i,s),o.unfreezeStretchableUnit(i),o.getCloseCross(r).hide(),this.fire("public.card.changed",a)},this);s.off("dblclick.customize"),s.on("dblclick.customize","."+c.BOARD_UNIT_DND_SOURCE,d),a.off("dblclick.customize"),a.on("dblclick.customize","."+c.BOARD_UNIT_DND_SOURCE,l)}})});