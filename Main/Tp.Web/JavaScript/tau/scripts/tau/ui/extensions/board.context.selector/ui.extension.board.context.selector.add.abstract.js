define(["Underscore","jQuery","tau/core/extension.base"],function(e,t,i){return i.extend({_selectText:function(e){e[0].setSelectionRange(0,e.val().length)},_initForm:function(e){var t=e.find(".i-role-form");setTimeout(function(){t.find(":submit:first").focus(),t.find(":text:first").focus()},10),e.find(".i-role-formtrigger").toggleClass("tau-active"),e.toggleClass("tau-managed-category_formactive_true"),t.on("reset",function(){t.find(":input").removeClass("tau-error"),t.find(":submit:first").focus(),t.find(":text:first").focus()}),t.on("click","[type=reset]",function(){e.removeClass("tau-managed-category_formactive_true"),e.find(".i-role-formtrigger").removeClass("tau-active")});var i=function(){t.find(":not(.disabled)").prop("disabled",!1),t.tauProgressIndicator("hide")};return t.on("entity.add.completed",i),t.on("entity.add.failed",i),t.tauProgressIndicator(),t},_addSubmitDataListener:function(e,i){e.on("submit",function(n){n.preventDefault();var r={};e.find(":input").each(function(){r[this.name]=this.value}),r.members=e.find("[name=users]").tauInviter("getValue",!0),r.connected=[];var a=e.find(".i-role-list :checked");a.each(function(){r.connected.push(t(this).val())}),e.find(":not(.disabled)").prop("disabled",!0),e.tauProgressIndicator("show"),i(r)})},_initRichSelect:function(e,i){var n=e.find(".i-role-currenticon");return i.on("change",function(){var e=i.val();n.trigger("change",e),n.attr("data-value",e||"default")}),e.delegate(".i-role-richselect .i-role-option","click",function(){var t=this.getAttribute("data-value");i.val(t),i.trigger("change"),e.find(":text:first").focus()}),n.parent().on("click",function(){t(this).toggleClass("tau-active"),e.find(".i-role-richselect").toggle()}),e.on("reset",function(){i.val(""),i.trigger("change")}),n},_addToList:function(t,i,n){n.selected=!0,n.isSupportView=!0;var r=i.bind({},n),a=(t.find(".i-role-form"),t.find(".i-role-list")),o=a.find(".i-role-item:first");o.length?o.after(r):a.append(r),a.parent().scrollTo(0,{duration:500}),r.addClass("tau-added"),e.delay(function(){r.removeClass("tau-added")
},1500)},_resetProgressIndicator:function(e){e.tauProgressIndicator("hide"),e.find(":not(.disabled)").prop("disabled",!1)}})});