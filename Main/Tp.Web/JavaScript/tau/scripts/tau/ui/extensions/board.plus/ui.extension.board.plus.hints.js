define(["jQuery","tau/core/extension.base"],function($,ExtensionBase){return ExtensionBase.extend({"bus boardSettings.ready":function(evt,bs){var boardSettings=bs.boardSettings;boardSettings.get({fields:["zoomLevel"],callback:_.bind(function(r){this.fire("zoomLevel.ready",r.zoomLevel)},this)}),boardSettings.unbind({listener:this}),boardSettings.bind({fields:["zoomLevel"],listener:this,callback:_.bind(function(r){this.fire("zoomLevel.ready",r.zoomLevel)},this)})},"bus $grid.ready":function(evt,$grid){var $bubbled=$grid.tauBubble({className:"zoom-level-5 tau-cardtooltip",showEvent:"nothing",template:['<div class="tau-bubble-board">','<div class="tau-bubble-board__arrow"  role="arrow"></div>','<div class="tau-bubble-board__inner tau-container"  role="content"></div>',"</div>"].join(""),zIndex:100});this.fire("$bubbled.ready",$bubbled),this.fire("hint.enable")},"bus sort.started":function(){this.fire("hint.disable")},"bus view.card.batch.move.after":function(){_.delay(_.bind(this.fire,this,"hint.enable"),100)},"bus $grid.ready:last+$bubbled.ready:last+zoomLevel.ready:last+hint.enable:last":function(evt,$grid,$bubbled,zoomLevel){zoomLevel<4?this._enable($grid,$bubbled):this._enable($grid,$bubbled,!0)},"bus $grid.ready:last+$bubbled.ready:last+hint.disable":function(evt,$grid,$bubbled){this._disable($grid,$bubbled)},_showHandler:function($bubbled,evt){var $card=$(evt.currentTarget);$bubbled.tauBubble("option","content",'<div class="tau-card tau-'+$card.attr("data-entity-type")+'">'+$card.html()+"</div>"),$bubbled.tauBubble("option","alignTo",$card),$bubbled.tauBubble("option","className","zoom-level-5 tau-cardtooltip tau-cardtooltip_type_"+$card.attr("data-entity-type")),clearTimeout(this.timeout),this.timeout=setTimeout(_.bind($bubbled.tauBubble,$bubbled,"show"),750)},_hideHandler:function($bubbled){clearTimeout(this.timeout),$bubbled.tauBubble("hide")},_enable:function($grid,$bubbled,onlyCollapsed){this._disable($grid,$bubbled);var s=".i-role-card";onlyCollapsed&&(s=".i-role-cellholder.tau-collapsed .i-role-card"),$grid.delegate(s,"mouseenter.hint",_.bind(this._showHandler,this,$bubbled)),$grid.delegate(s,"mouseleave.hint",_.bind(this._hideHandler,this,$bubbled))},_disable:function($grid,$bubbled){this._hideHandler($grid,$bubbled);var s=".i-role-card";$grid.undelegate(s,"mouseenter.hint"),$grid.undelegate(s,"mouseleave.hint")}})})