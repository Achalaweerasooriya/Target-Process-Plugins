define(["Underscore","tau/ui/extensions/tabs/ui.extension.tabs.state.base"],function(_,ExtensionBase){return ExtensionBase.extend({getRestoredState:function(){var def=$.Deferred(),stateName=this.getStateName();return this.config.context.componentSettings.get({fields:[stateName],callback:function(data){def.resolve(data[stateName])}}),def},getStateName:function(){return this.config.stateName},selectTabExternal:function(index){var componentSettings=this.config.context.componentSettings,set={},stateName=this.getStateName();set[stateName]=index,componentSettings.set({set:set})},onStateChanged:function(stateObject){var state=stateObject[this.getStateName()]||this.defaultState;this.selectTabInternal(state)},"bus initialize":function(){var self=this,componentSettings=self.config.context.componentSettings;componentSettings.bind({fields:[this.getStateName()],listener:self,callback:self.onStateChanged})},"bus destroy":function(){var self=this,componentSettings=self.config.context.componentSettings;componentSettings.unbind({listener:self,callback:self.onStateChanged})}})})