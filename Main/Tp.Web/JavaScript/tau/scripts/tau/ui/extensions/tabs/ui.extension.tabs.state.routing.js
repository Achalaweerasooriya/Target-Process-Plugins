define(["Underscore","tau/ui/extensions/tabs/ui.extension.tabs.state.base"],function(_,ExtensionBase){var extension=ExtensionBase.extend({init:function(config){this._super(config),this.name=config.stateName||"tab",this.defaultState=this.getRestoredState()},getRestoredState:function(){if(this.config.hasOwnProperty("stateName")){var states=this.config,stateName=this.config.stateName;if(_.has(states,stateName))return states[stateName];states=this.config.context.configurator.getConfig("states")||{};if(_.has(states,stateName))return states[stateName]}return null},getStateName:function(){return this.config.stateName},selectTabExternal:function(index){var componentSettings=this.config.context.componentSettings,set={},stateName=this.getStateName();set[stateName]=index,componentSettings.set({set:set})},onStateChanged:function(stateObject){var state=stateObject[this.getStateName()]||this.defaultState;this.selectTabInternal(state)},"bus initialize":function(){var self=this,componentSettings=self.config.context.componentSettings;componentSettings.bind({fields:[this.getStateName()],listener:self,callback:self.onStateChanged})},"bus destroy":function(){var self=this,componentSettings=self.config.context.componentSettings;componentSettings.unbind({listener:self,callback:self.onStateChanged})}});return extension})