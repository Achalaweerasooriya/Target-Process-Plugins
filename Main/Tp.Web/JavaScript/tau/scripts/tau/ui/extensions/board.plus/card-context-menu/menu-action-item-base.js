define(["jQuery","Underscore","tau/core/class","tau/utils/utils.sliceApi","tau/ui/extensions/board.plus/card-context-menu/menu-bubbleCreator"],function(e,t,n,i,r){return n.extend({init:function(e){if(!(e.bus&&e.configurator&&e.sliceReady))throw new Error("action-base : required parameters are missing");this.settings=e},deleteCard:function(e,t){var n=[{location:"card",data:{id:e.id,data:{id:e.entityId,type:e.entityType}}}];t.fire("operation.execute",{name:"deleted",items:n})},updateCard:function(n,r,a){var s=this,o=s.settings.bus,u=s.settings.sliceReady,d=e.Deferred();if(r&&(t.has(r,"x")||t.has(r,"y"))){d.done(function(e){var t=i.convertCellsResponseToComet(e);0===t.length?s.deleteCard(a,o):o.fire("operation.execute",{name:"updated",items:t})});var c={dataItem:{id:{$eq:n.toString()}}};u.slice.cell(c).done(d.resolve)}return d},disabled:function(e,n){var i=this,r=i.data("entityType"),a=n.items[e],s=a.getSupportedEntityTypes();return null===s||t.contains(s,r)?t.contains(a.getDisabledEntityTypes(),r):!0},getBubbleCreator:function(e){return new r(e.$trigger,this)},getSupportedEntityTypes:function(){return null},getDisabledEntityTypes:function(){}})});