define(["jQuery","Underscore","tau/components/extensions/component.extension.base"],function(e,n,o){return o.extend({hideRawSkeleton:function(e){e.children().css({opacity:0})},showRawSkeleton:function(e){e.children().animate({opacity:1})},"bus view.skeleton.built":function(e,n){this.hideRawSkeleton(n.element)},"bus view.skeleton.built > board.size.updated":function(e,n){this.showRawSkeleton(n.element)},"bus view.skeleton.built > no.data.in.slice":function(e,n){this.showRawSkeleton(n.element)},"bus page.ready > page.changed":function(e,n,o){var t=this.getDirection(n,o);this.fire("refresh",{page:{from:n,to:o,direction:t}})},"bus refresh > board.element.updated":function(n,o,t){var i=o||{},r=t.oldElement,a=t.newElement,d=r.parent();d.append(a);var s=e.Deferred(),l=null;l=i.page&&i.page.direction?function(){this.swap(r,a,i.page.direction)}.bind(this):function(){r.hide().removeClass("tau-board-becomes-old").replaceWith(a)},s.done(l).fail(function(){r.hide().remove()}),this.fire("board.reload",s)},"bus afterRender:last > refresh":function(e,n,o){o&&o.page&&o.page.direction||n.element.addClass("tau-board-becomes-old")},"bus board.reload > refresh":function(e,n){n.reject()},"bus board.reload > no.data.in.slice":function(e,n){n.resolve()},"bus board.reload > overview.board.ready > board.size.updated":function(e,n){n.resolve()},"bus operation.highlightItems > domWrapper.ready":function(e,n,o){o.highlightAxesLines(n)},swap:function(e,n,o){var t=this.directionToProperty(o),i={};e.find(".i-role-grid").css("overflow","hidden"),n.find(".i-role-grid").css("overflow","hidden"),i[t]="+=100%",n.css(t,"-100%"),e.add(n).animate(i,{duration:750,complete:function(){n.css(t,""),n.find(".i-role-grid").css("overflow",""),setTimeout(function(){e.remove()},50)}})},getDirection:function(e,n){var o=null;return e.x==n.x?e.y-n.y==1?o="up":e.y-n.y==-1&&(o="down"):e.y==n.y&&(e.x-n.x==1?o="left":e.x-n.x==-1&&(o="right")),o},directionToProperty:function(e){return{up:"top",down:"bottom",left:"left",right:"right"}[e]
}})});