define(["tau/core/extension.base.stateful"],function(t){return t.extend({"bus afterRender":function(t){{var e=t.data.element,n=this.config.context.configurator,i=n.getStore(),s=this.config.context.entity,o=s.entityType.name,a=_.bind(function(){i.evictProperties(s.id,o,["teamProjects"]),i.get(o,{id:s.id,fields:["id",{teamProjects:["id"]}]}).done({success:function(){},failure:function(){alert("You don't have access to this "+o+"now"),n.getHistory().exclude(s.id),n.service("navigator").back()}})},this);this.bus}e.on("click",".tau-unassign",function(t){var e=$(t.currentTarget),n=_.bind(function(){var t=e.parents("[role=item]:first"),n=t.data();i.removeFromList(o,{id:s.id,$set:{teamProjects:{id:n.entityId}}}).done({success:a})},this);e.tauConfirm({content:["<h3>"+e.data("confirmMessage")+"</h3>"].join(""),callbacks:{success:n},zIndex:130}),_.delay(_.bind(e.tauConfirm,e),100,"show")})}})});