define(["jQuery","tau/core/extension.base"],function($,ExtensionBase){return ExtensionBase.extend({"bus configurator.ready":function(ev,configurator){var self=this,req=configurator.getRequireLoader();req(["all.components"],function(){req(["tau/components/component.application"],function(appComponent){var appConfigurator=configurator.createChild();appConfigurator._id=_.uniqueId("board_entityViewer_"),appConfigurator.isBoardEdition=!0,self.fire("appData.ready",{component:appComponent,configurator:appConfigurator})})})},"bus afterRender":function(){var $body=$("body");$body.tauProgressIndicator(),this.fire("$progressIndicator.ready",$body)},"bus appData.ready":function(ev,appData){var appConfigurator=appData.configurator,appComponent=appData.component;appConfigurator.getHashService().setFakeWindow();var self=this,appConfig={context:{configurator:appConfigurator},options:{applicationId:"boardEntityViewerPopup",integration:{showInPopup:!0,keepAlive:!0},routing:{silent:!0,executeOnStart:!1},comet:{enabled:!1}}};appConfig.options.comet.enabled=appConfigurator.getFeaturesService().isEnabled("comet.notifications");var appBus=appComponent.create(appConfig);appBus.on("application.error",function(evt){self.fire("error",evt.data)}),appBus.initialize(appConfig),self.fire("appBus.ready",appBus)},"bus appData.ready:last + appBus.ready:last + cardDataToShow.ready":function(ev,appData,appBus,cardData){var appConfigurator=appData.configurator;if(!cardData.entityId||!cardData.entityType){console.error("bad data for viewer",cardData);return}this.cleanupStore(appConfigurator),appBus.fire("history.reset"),appBus.fire("application.navigate.entity",{id:cardData.entityId,entity:cardData.entityType})},"bus appBus.error":function(ev,err){this.fire("error",err)},"bus appBus.ready + destroy":function(ev,appBus){appBus.destroy()},cleanupStore:function(configurator){configurator.getStore().evictData()}})})