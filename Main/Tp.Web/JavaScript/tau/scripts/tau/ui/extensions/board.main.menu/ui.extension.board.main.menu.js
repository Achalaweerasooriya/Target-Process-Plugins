define(["jQuery","tau/core/extension.base"],function($,ExtensionBase){return ExtensionBase.extend({"bus afterRender":function(evt,renderData){var self=this,$el=renderData.element,$menus=$el.find(".tau-user-menu");$menus.each(function(){var $menu=$(this),$subMenu=$menu.find(".tau-user-submenu");$subMenu.detach();var coords;$menu.click(function(evt){coords={x:evt.pageX-$(this).position().left}});var onPositionConfig=function(config){config.at="left bottom",config.my="center top",config.offset=coords.x+" 0"};$menu.tauBubble({content:$subMenu,target:$menu,alignTo:$menu,zIndex:999,onArrowPositionConfig:onPositionConfig,onPositionConfig:onPositionConfig,onShow:function($subMenu){$subMenu.find(".tau-menu-item").bind("click",function(){$menu.tauBubble("hide")}),$subMenu.find(".tau-user-menu-profile").bind("click",function(){self.fire("show.user.profile"),$menu.tauBubble("hide")}),$subMenu.find(".tau-user-menu-getting-started").bind("click",function(){self.fire("show.getting.started"),$menu.tauBubble("hide")})},onHide:function($subMenu){$subMenu.find(".tau-menu-item").unbind("click"),$subMenu.find(".tau-user-menu-profile").unbind("click")}})})}})})