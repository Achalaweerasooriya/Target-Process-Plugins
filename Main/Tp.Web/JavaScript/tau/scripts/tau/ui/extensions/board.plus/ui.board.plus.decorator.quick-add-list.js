define(["Underscore","jQuery","tau/ui/extensions/board.plus/ui.board.plus.decorator.quick-add.base"],function(t,e,i){var n=2,s=32,o=i.extend({activatedScope:null,lastScope:null,sharedState:null,findElements:function(t){this.element=t.getGrid().parent(".i-role-board-body"),this.$buttonPanel=this.createQuickAddPanel(),this.$button=this.$buttonPanel.find(".tau-btn"),this.$buttonPanel.css({bottom:n}).addClass("i-role-quick-add-decorator-list").appendTo(this.element)},deactivate:function(){this.isActivated=!1,this.activatedScope!==this.lastScope&&this.$buttonPanel.hide()},setPosition:function(){var t=this.element.find(".i-role-cellholder").width();this.$buttonPanel.css({left:t-s-n})},showButton:function(){this.sharedState&&(this.setPosition(),this.$buttonPanel.show())},hideButton:function(){this.$buttonPanel.hide()},onClick:function(){this.sharedState&&(this.activatedScope=this.lastScope,this.activate(this.$button,this.sharedState))},onDblClick:t.debounce(function(t){var i=e(t.target);i.hasClass("i-role-cellholder")&&this.$button.is(":visible")&&this.$button.click()},300),onMouseEnter:function(t){var i=this.getCellData(e(t.delegateTarget));if(this.lastScope="enter_"+i.x+"_"+i.y,!this.isActivated){var n=this.predicateAddAction(i);n&&(this.sharedState={actionItems:n},this.showButton())}},onMouseLeave:function(){this.lastScope=null,this.isActivated||(this.sharedState=null,this.hideButton())},attachEvents:function(){this.$button.on("click",this.onClick.bind(this)),this.element.on({dblclick:this.onDblClick.bind(this),mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)},".i-role-grid,.i-role-quick-add-decorator-list")},getCellData:function(t){var e=t.find(".i-role-cellholder");return e.data()}});return o});