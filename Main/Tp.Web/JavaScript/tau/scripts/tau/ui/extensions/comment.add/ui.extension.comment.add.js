define(["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/behaviour/common/ui.behaviour.richeditor"],function(e,t,i){var n=i.extend({category:"edit","bus afterRender":function(e){this.element=e.data.element,this.initializeEditor()},onSave:function(e){this.fire("editorSave"),this.fire("saveComment",{description:e}),this.closeEditor()},onCancel:function(){this.closeEditor()},closeEditor:function(){this.fire("destroy")},initializeEditor:function(){var i=this.element,n=i,o=n.find(".ui-comment-text"),r="richeditor";o.data("ui-richeditor")||(o=o[r]({ckPath:this.config.context.configurator.getCkPath(),text:"",settings:{toolbar:"Basic",removePlugins:"autogrow,magicline",allowedContent:!0,height:200},executionGroupName:"comments",onSave:e.bind(this.onSave,this),onCancel:e.bind(this.onCancel,this),onCreate:e.bind(function(){var e=i.parents(".ui-popup-content:first");0==e.size()&&(e=t(window)),e.scrollTo(o.parent(),100),this.fire("$editor.ready",o),this.fire("$editorHolder.ready",n)},this),saveAction:{text:"Add comment",disableIfEmpty:!0},cancelAction:{available:!0}})),o[r]("show")}});return n});