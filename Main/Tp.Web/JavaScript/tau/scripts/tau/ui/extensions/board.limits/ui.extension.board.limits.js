define(["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/ui/templates/board.limits/ui.template.board.limit-item","libs/jquery/jquery.inputMaskEditor"],function(_,$,ExtensionBase){return ExtensionBase.extend({temp:{},"bus afterRender:last + dataLimits.ready + configurator.ready:last + boardSettings.ready:last":function(evt,afterRender,dataLimits,configurator,boardSettings){var $element=afterRender.element;$element.html(""),this.temp=_.extend(this.temp,dataLimits.values),$element.append(configurator.getTemplateFactory().get("board.limit-item").bind({},dataLimits)),this.setHandler($element,boardSettings.boardSettings)},setHandler:function($element,boardSettings){var $inputs=$element.find("input"),mask=/^\d+$/i;$inputs.closest("form").on("submit",function(){return!1});var saveLimits=_.debounce(_.bind(function(event){var $input=$(event.target);mask.test($input.val())||$input.val("");var limitData=$input.closest("form").serializeArray();limitData=_.reduce(limitData,function(memo,item){return memo[item.name]=parseInt(item.value,10),memo},{}),this.temp=_.extend(this.temp,limitData),boardSettings.set({set:{limits:{entitystate:this.temp}},callback:$.noop}),this.fire("changeLimits",this.temp)},this),100);$inputs.on("input keydown",saveLimits),$inputs.inputMaskEditor({mask:mask})}})})