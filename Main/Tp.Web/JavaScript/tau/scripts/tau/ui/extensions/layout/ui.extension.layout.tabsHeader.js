define(["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/extensions/extension.javascript"],function(_,$,a){return a.extend({"bus beforeInit":function(a){var b=a.data.config;this.options={childrenContainerSelector:b.childrenContainerSelector||"ul.entity-tabs"}},getTabItemCssName:function(a){return"tab-item"+((a.position||{}).right?" tab-item-right-part":"")},"bus afterRender+childrenRendered":function(a){var b=this;b.element=a.afterRender.data.element;var c=a.childrenRendered.data;b.children=c.children;var d=c.childrenEvtArgs,e=c.config.children;_(d).each(function(a,c){var d=a.element,f=e[c],g=f.selected,h=b.getTabItemCssName(f);b._add(d,g,h,f.label)}),this.findContainerElement().bind("click",$.proxy(this._onContainerClick,this))},findContainerElement:function(){return this.element.find(this.options.childrenContainerSelector)},getTabsCount:function(){return this.findContainerElement().children(".tab-item").length},_add:function(a,b,c,d){var e=b?"selected":"";c=c||"tab-item",d=d||a.text(),$('<li class="'+c+'"></li>').data({label:d,index:this.getTabsCount()}).addClass(e).append(a).appendTo(this.findContainerElement())},_onContainerClick:function(a){var b=$(a.target),c=".tab-item",d=b.is(c)?b:b.parents(c);if(d.is(c)){var e=d.data().index,f={label:d.data("label"),index:e,tabHeader:this.children[e]};this.fire("switched",f)}},"bus switched.after":function(a){var b=a.data.index,c=this.findContainerElement(),d=c.children(".tab-item");d.filter(".selected").removeClass("selected"),_.isUndefined(b)&&a.data.label?d.each(function(){var b=$(this);b.data("label")==a.data.label&&b.addClass("selected")}):d.eq(b).addClass("selected")},destroy:function(){this._super(),delete this.element,delete this.children}})})