define(["Underscore","jQuery","tau/components/extensions/component.extension.base","tau/extensions/extension.javascript"],function(a,b,c){return c.extend({"bus beforeInit":function(a){var b=a.data.config;this.options={childrenContainerSelector:b.childrenContainerSelector||"ul.entity-tabs"}},getTabItemCssName:function(a){return"tab-item"+((a.position||{}).right?" tab-item-right-part":"")},"bus afterRender+childrenRendered":function(c){var d=this;d.element=c.afterRender.data.element;var e=c.childrenRendered.data;d.children=e.children;var f=e.childrenEvtArgs,g=e.config.children;a(f).each(function(a,b){var c=a.element,e=g[b],f=e.selected,h=d.getTabItemCssName(e);d._add(c,f,h,e.label)}),this.findContainerElement().bind("click",b.proxy(this._onContainerClick,this))},findContainerElement:function(){return this.element.find(this.options.childrenContainerSelector)},getTabsCount:function(){return this.findContainerElement().children(".tab-item").length},_add:function(a,c,d,e){var f=c?"selected":"";d=d||"tab-item",e=e||a.text(),b('<li class="'+d+'"></li>').data({label:e,index:this.getTabsCount()}).addClass(f).append(a).appendTo(this.findContainerElement())},_onContainerClick:function(a){var c=b(a.target),d=".tab-item",e=c.is(d)?c:c.parents(d);if(e.is(d)){var f=e.data().index,g={label:e.data("label"),index:f,tabHeader:this.children[f]};this.fire("switched",g)}},"bus switched.after":function(c){var d=c.data.index,e=this.findContainerElement(),f=e.children(".tab-item");f.filter(".selected").removeClass("selected"),a.isUndefined(d)&&c.data.label?f.each(function(){var a=b(this);a.data("label")==c.data.label&&a.addClass("selected")}):f.eq(d).addClass("selected")},destroy:function(){this._super(),delete this.element,delete this.children}})})