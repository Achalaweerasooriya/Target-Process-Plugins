define(["tau/core/extension.base","tau/ui/behaviour/common/ui.behaviour.editableText"],function(ExtensionBase){return ExtensionBase.extend({category:"edit","bus changeName":function(evt){var name=evt.data||"";this.fire("save",{name:name})},"bus permissionsReady+afterRender":function(eventData,permissions,renderData){var self=this;if(permissions.editable){var $titleContainer=renderData.element,$entityTitle=$titleContainer.find(".i-role-title");this.$widget=$entityTitle,$entityTitle.editableText({restoreText:!0,onSave:function(text){self.fire("changeName",text)}})}},"bus validate":function(){if(!this.$widget)return;this.$widget.editableText("resetValidationErrors")},"bus afterValidate":function(evt){if(!this.$widget)return;this.$widget.editableText("setValue",evt.data.validation.instance.name)},"bus validationFailed":function(evt){if(!this.$widget)return;this.$widget.editableText("setValidationErrors",evt.data.validation.errors[0].description)}})})