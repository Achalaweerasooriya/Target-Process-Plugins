define(["Underscore","tau/core/templates-factory"],function(_,templates){var config={name:"boardplus.card.relations",engine:"jqote2",customFunctions:{_:_,getTotalMasters:function(item){var totalMasters=item.hasOwnProperty("activeMasterCount")?item.activeMasterCount.openAssignables+item.activeMasterCount.openImpediments+item.activeMasterCount.others:0;return totalMasters},getTotalSlaves:function(item){var totalSlaves=item.hasOwnProperty("activeSlaveCount")?item.activeSlaveCount.openAssignables+item.activeSlaveCount.openImpediments+item.activeSlaveCount.others:0;return totalSlaves}},markup:["<% var item = this.relations || {}; %>","<% var totalMasters = fn.getTotalMasters(item); %>","<% var totalSlaves = fn.getTotalSlaves(item); %>","<% var enabled = (totalMasters > 0 || totalSlaves > 0); %>",'<div class="tau-relations i-role-card-content-relations" style="<% if (!enabled) { %>display: none;<% } %>">',"<% if (enabled) { %>",'   <span class="<% if (item.activeMasterCount.openImpediments > 0) { %>tau-relations-impediment<% } %>"><%=totalMasters%></span>','   <span class="tau-relations-icon"></span>','   <span class="<% if (item.activeSlaveCount.openImpediments > 0) { %>tau-relations-impediment<% } %>"><%=totalSlaves%></span>',"<% } %>","</div>"]};return templates.register(config)})