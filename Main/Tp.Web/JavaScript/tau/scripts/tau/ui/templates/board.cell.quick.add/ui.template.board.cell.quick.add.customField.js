define(["Underscore","tau/core/templates-factory","tau/ui/templates/board.cell.quick.add/ui.customFunctions.template.board.cell.quick.add"],function(e,i,t){var a={name:"board.cell.item.quick.add.field.CustomField",engine:"jqote2",customFunctions:e.defaults(t,{selected:function(e){return e?'selected="selected"':""}}),markup:['<% var field = this.field, className = "cf-wrap tau-field tau-custom cf-process_" + field.processId;','var defaultValue = field.config && field.config.defaultValue ? field.config.defaultValue : "";','if (field.fieldType == "Text" || field.fieldType == "Number" || field.fieldType == "Date" || field.fieldType == "TemplatedURL") {','    var rules = [], additionalClass = "";','    if (field.fieldType == "Number") {','        rules.push("number");','        additionalClass = "cf-input_number";','    } else if (field.fieldType == "Text") {','        rules.push("text");','    } else if (field.fieldType == "Date") {','        rules.push("date");','        additionalClass = "cf-input_date";',"    }","%>",'    <div class="<%=className%>">','        <input tabindex="0" autocomplete="off" type="text" data-validate=\'{"caption":"<%=field.caption%>","rules":<%=fn.getValidationRules(this.field, rules)%>}\' class="tau-in-text <%=additionalClass%> cf-input tau-required-field-editor" placeholder="<%=field.caption%>" data-iscf="true" data-fieldname="<%=field.caption%>" data-fieldtype="<%=field.fieldType%>" value="<%=defaultValue%>">',"    </div>",'<% } else if (field.fieldType == "CheckBox") { %>','    <div class="<%=className%>">','        <label class="tau-checkbox "><input tabindex="0" autocomplete="off" type="checkbox" data-validate=\'{"caption":"<%= field.caption%>","rules":<%=fn.getValidationRules(this.field, ["checkbox"])%>}\' class="tau-is-active cf-input tau-required-field-editor" data-iscf="true" data-fieldname="<%=field.caption%>" data-fieldtype="<%=field.fieldType%>"><i class="tau-checkbox__icon"></i><span><%=field.caption%></span></label>',"    </div>",'<% } else if (field.fieldType == "URL") { %>','    <div class="<%=className%>">','        <input tabindex="0" autocomplete="off" type="hidden" value=\'fake\' data-validate=\'{"caption":"<%= field.caption%>","rules":<%=fn.getValidationRules(this.field)%>}\' class="tau-is-active cf-input tau-required-field-editor" data-iscf="true" data-fieldname="<%=field.caption%>" data-fieldtype="<%=field.fieldType%>">',"        <h4><%= field.caption %></h4>",'        <p class="cf-wrap-url_value">','            <input class="tau-in-text tau-is-active cf-input cf-input-url_value tau-required-field-editor" data-iscf=\'true\' data-validate=\'{"caption":"<%= field.caption%>","rules":<%=fn.getValidationRules(this.field, ["url"])%>}\' data-fieldname="<%=field.caption%>-value" type="" placeholder="URL">',"        </p>",'        <p class="cf-wrap-url_description">','            <input class="tau-in-text tau-is-active cf-input cf-input-url_description tau-required-field-editor" data-iscf=\'true\' data-validate=\'{"caption":"<%= field.caption%>","rules":<%=fn.getValidationRules(this.field)%>}\' data-fieldname="<%=field.caption%>-description" type="" placeholder="URL description">',"        </p>","    </div>",'<% } else if (field.fieldType == "DropDown") {','    var options = field.options.value && field.options.value.split("\\r\\n") || [];',"%>",'    <div class="<%=className%>">','        <select data-validate=\'{"caption":"<%=field.caption%>","rules":<%=fn.getValidationRules(this.field)%>}\' tabindex="0" data-iscf=\'true\' class="tau-select cf-input tau-required-field-editor" name="<%=field.caption%>" data-fieldname="<%=field.caption%>" data-fieldtype="<%=field.fieldType%>">','            <option value=""><%=field.caption%></option>',"            <% for (var k = 0; k < options.length; k++) { %>",'                <option value="<%!options[k]%>" <%= fn.selected(defaultValue == options[k]) %>><%!options[k]%></option>',"            <% } %>","        </select>","    </div>",'<% } else if (field.fieldType == "MultipleSelectionList") {','    var options = field.options.value && field.options.value.split("\\r\\n") || [];','    var defaultValues = defaultValue.split(",");',"%>",'    <div class="<%=className%>">',"        <h4><%= field.caption %></h4>",'        <select data-validate=\'{"caption":"<%=field.caption%>","rules":<%=fn.getValidationRules(this.field)%>}\' multiple="multiple" tabindex="0" data-iscf=\'true\' class="tau-select cf-input tau-required-field-editor" name="<%=field.caption%>" data-fieldname="<%=field.caption%>" data-fieldtype="<%=field.fieldType%>">',"            <% for (var k = 0; k < options.length; k++) { %>",'                <option value="<%!options[k]%>" <%= fn.selected(defaultValues.indexOf(options[k]) >= 0) %>><%!options[k]%></option>',"            <% } %>","        </select>","    </div>",'<% } else if (field.fieldType == "Entity") { %>','    <div class="<%=className%> tau-field_entity">','        <div tabindex="0" class="tau-userStorySelector">','            <input type="hidden" data-iscf="true" data-entityuniquename=\'entity_<%=this.type.entityType.name%>_<%=this.entityNumber%>\' data-validate=\'{"caption":"<%=field.caption%>","rules":<%=fn.getValidationRules(this.field, [], \'entityRequired\')%>}\' name="<%=field.id%>" class="cf-input tau-required-field-editor <%= field.id%>" placeholder="<%=field.caption%>" data-fieldname="<%=field.caption%>" data-filter=\'<%= JSON.stringify(field.options.filter)%>\' data-fieldtype="<%=field.fieldType%>">','            <span class="userStorySelector ui-link"><em class="tau-entity-icon tau-entity-icon--userstory tau-linkentity__icon" style="display: none;"></em><span class="tau-linkentity__inner tau-linkentity__inner_placeholder"><%=field.caption%></span></span>',"        </div>",'        <div class="tau-userStorySelector__control" data-name=\'entity_<%=this.type.entityType.name%>_<%=this.entityNumber%>\'><span runas="finder.entity" ',"            <% if (this.mainEntity) { %>",'            data-context:general:id="<%= this.mainEntity.id %>" ','            data-context:general:entity-type:name="<%= this.mainEntity.entityType.name %>" ',"            <% } else { %>","            data-context:general='' ","            <% } %>","            data-name='entity_<%=this.type.entityType.name%>_<%=this.entityNumber%>' ","            data-filterenabled='true' ","            data-filter='<%= JSON.stringify(field.options.filter || null) %>'></span>","        </div>","    </div>","<% } %>"]};
return i.register(a)});