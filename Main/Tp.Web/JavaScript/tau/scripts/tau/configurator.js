define(["tau/store/instance","tau/core/keyboard.manager","tau/core/global.bus","tau/core/external","tau/core/state.manager","tau/services/service.routing","tau/utils/utils.routing","tau/utils/utils.history","libs/parseUri","tau/store/services/service.globalSettings","tau/store/services/service.notifications","tau/store/services/service.actions"],function(a,b,c,d,e,f,g,h,i,j,k,l){function m(){var a=new b;this.getKeyBoardManager=function(){return a};var c={handleKeyDown:function(a){a.keyCode==$.ui.keyCode.ESCAPE&&(a.preventDefault(),a.stopPropagation())}};return a.pushHandler(c),this.getKeyBoardManager()}return{ckPath:"../Ckeditor/",getKeyBoardManager:m,_config:{},setGlobalSettingsService:function(a){this.globalSettingsService=a},getGlobalSettingsService:function(){if(!this.globalSettingsService){var a={appPath:this.getApplicationPath()};this.globalSettingsService=new j(a)}return this.globalSettingsService},setNotificationService:function(a){this.notificationService=a},getNotificationService:function(){if(!this.notificationService){var a={appPath:this.getApplicationPath()};this.notificationService=new k(a)}return this.notificationService},setActionsService:function(a){this.actionsService=a},getActionsService:function(){if(!this.actionsService){var a={appPath:this.getApplicationPath()};this.actionsService=new l(a)}return this.actionsService},clearSingles:function(){a.clearSingles()},clear:function(){this.clearSingles(),c.reset(),delete this.currentDate,delete this.external,a.clear()},getCurrentAcid:function(){var a="",b=this.getWindow();if(b.location&&b.location.href){var c=b.location.href;a=i(c).queryKey.acid||a}return a},setWindow:function(a){this.window=a},getWindow:function(){return this.window||window},getHistory:function(){return this.history||(this.history=new h),this.history},getRouting:function(){return this.routing||(this.routing=new g({window:this.getWindow()})),this.routing},setCurrentDate:function(a){this.currentDate=a},getCurrentDate:function(){return this.currentDate?this.currentDate:new Date},getGlobalBus:function(){return c.get()},setApplicationPath:function(b){a.setApplicationPath(b)},getApplicationPath:function(){return a.getApplicationPath()},getCkPath:function(){return this.ckPath},setCkPath:function(a){this.ckPath=a},setInitialData:function(b){a.setInitialData(b)},setService:function(b){a.setService(b)},getService:function(){return a.getService()},getRestPath:function(){return a.getRestPath()},setProxy:function(b){a.setProxy(b)},getProxy:function(){return a.getProxy()},disableRules:function(){a.disableRules()},enableRules:function(){a.enableRules()},initRules:function(){a.initRules()},getStore:function(b){return b=b||{},_.defaults(b,{services:this}),a.getStore(b)},setConfig:function(a,b){this._config[a]=b},getConfig:function(a,b){var c=b;return this._config.hasOwnProperty(a)&&(c=this._config[a]),c},setExternal:function(a){this.external=new d(a)},getExternal:function(){return this.external||(this.external=new d(window)),this.external},getStateManager:function(){var a=this;if(!a.stateManager){var b=a.getExternal(),c=new f({external:b});a.stateManager=new e({service:c,state:b.hashParams()}),b.onHashChange(function(b){var c=b.hashParams();a.stateManager.update(c)})}return a.stateManager}}})