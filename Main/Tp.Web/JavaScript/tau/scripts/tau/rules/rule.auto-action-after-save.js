define(["Underscore"],function(_){var fn=function(evt,rule){var rulesEngine=this,evtData=evt.data,cfg={store:rulesEngine.store,data:evtData};rule.action(cfg)};return{"auto-action-after-save":function(rule){var rulesEngine=this,fnProcess=function(evt){fn.call(rulesEngine,evt,rule)},subscriptionConfig={eventName:"afterSave",type:rule.type,listener:rulesEngine};rule.hasOwnProperty("changes")&&rule.changes.length&&(subscriptionConfig.hasChanges=[rule.changes.join("|")]),rulesEngine.store.on(subscriptionConfig,fnProcess)}}})