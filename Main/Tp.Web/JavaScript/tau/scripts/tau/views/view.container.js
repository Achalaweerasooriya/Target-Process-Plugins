define(["Underscore","jQuery","tau/core/view-base","tau/core/event-dispatcher","tau/ui/templates/container/ui.template.container.list","tau/ui/templates/container/ui.template.container.table"],function(_,$,a,b){var c=a.extend({init:function(a){this._loaded=!1,this._super(a)},completeInitializationWithoutChildren:function(){var a=this;a.fire("afterInit"),a._fireChildrenRendered({children:[],childrenEvtArgs:[]})},setDefaultConfig:function(){var a=this;a._super(),_.defaults(a.config,{template:{name:"container."+(a.config.layout||"list")}})},"bus componentCreated":function(a){var b=a.data.component;this.fire("childComponentCreated",b),this.children.push(b)},_fireChildrenRendered:function(a){this.fire("internalChildrenRendered",a)},"bus afterInit+internalChildrenRendered":function(a){var b=this._getRenderConfig();this.fireBeforeRender({data:b}),this.doRender(b);var c=a.internalChildrenRendered.data;_.extend(c,{config:this.config}),this.fire("childrenRendered",c),this.fireAfterRender({data:b})},initializeComponents:function(a){var c=this;c.dispatcher=new b(c.children);var d=["afterInit"],e=function(a){c.fire(a.eventName)};_(d).each(function(a){c.dispatcher.listen(a,e)}),c.dispatcher.listen("afterRender",function(a){var b=a.argsArr,d={children:c.children,childrenEvtArgs:b};c._fireChildrenRendered(d)});var f=_(a.data).pluck("config");_(c.children).each(function(a,b){a.fire("initialize",f[b])})},"bus componentsCreated":function(a){this.fire("beforeComponentsInitialize",a.data),this.initializeComponents(a),this.fire("afterComponentsInitialize",a.data)},lifeCycleCleanUp:function(){this.destroyChildren()},"bus refresh":function(a){this.startLifeCycle()},startLifeCycle:function(a){var b=this;b.setDefaultConfig(),_.extend(b.config,(a||{}).data),b.fire("beforeInit",{config:b.config});var c=b.config.children;b.children=[];var d=_.size(c)>0&&b.config.visible;if(d){var e=b.config.children,f=b.config.context||{};this.fire("createComponents",{components:e,context:f})}else b.completeInitializationWithoutChildren()},"bus initialize":function(a){this.startLifeCycle(a)},hideElement:function(){if(this._loaded&&!$.fx.off){this.element.slideUp(200);return}this._super()},showElement:function(){if(!$.fx.off){this.element.slideDown(200);return}this._super()},"bus show":function(){this._super(),this._loaded||this.fire("initialize",{})},_getRenderConfig:function(){var a=this.config;return a.visible&&(this._loaded=!0),a},destroyChildren:function(){var a=null;if(this.children&&this.children.length)while(a=this.children.pop())a.destroy();this.children=null},destroy:function(){this.dispatcher=null,this.destroyChildren(),this._super()}});return c})