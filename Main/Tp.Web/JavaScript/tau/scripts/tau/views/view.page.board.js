define(["Underscore","tau/core/view-base","tau/components/component.container","tau/configurations/board.container.config","tau/components/extensions/board.container/extension.board.container","tau/models/boardSettings/factory.board.settings"],function(_,a,b,c,d,e){return a.extend({init:function(a){this._super(a),this.config.placeholder&&this.config.placeholder.addClass("ui-entity-view")},"container afterInit":function(a){this.fireAfterInit()},initialize:function(){},"container componentsCreated":function(a){this.fire(a.name,a.data)},"container afterRender":function(a){this.fireBeforeRender(),this.element=a.data.element,this.config.placeholder&&this.config.placeholder.append(this.element),this.config.placeholder&&this.config.placeholder.addClass("tau-entity-loaded"),this.fireAfterRender()},"bus beforeInit":function(a){var f=this,g=a.data,h=g.config.context.configurator;g.context=_.extend(g.context||{},{acid:h.getCurrentAcid(),configurator:h,entity:{entityType:{name:"board"}}});var i=c.getDefaultBoardSettings(g.config.context.entity.id),j=e.createInstance(h,i);j.bind({fields:["viewMode"],listener:f,callback:function(a){this.fire("refresh")}}),j.get({fields:["viewMode"],callback:function(a){_.extend(g,a),_.extend(g,c.getConfig(g)),f.container=b.create({name:"board page container",layout:g.layout,template:g.template,store:f.config.store,extensions:[d],context:{configurator:g.config.context.configurator}}),f.container.on("afterInit",f["container afterInit"],f),f.container.on("afterRender",f["container afterRender"],f),f.container.on("componentsCreated",f["container componentsCreated"],f),f.container.fire("boardSettings.ready",{boardSettings:j}),f.container.initialize(g)}})},lifeCycleCleanUp:function(){this.destroyContainer(),this._super()},destroyContainer:function(){if(!this.container)return;this.container.destroy(),this.container=null},destroy:function(){this.destroyContainer(),this.container=null,this._super()}})})