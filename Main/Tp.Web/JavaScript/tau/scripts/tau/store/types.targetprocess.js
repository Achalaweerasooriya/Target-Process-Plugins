define(["Underscore","tau/store/types","tau/store/types.targetprocess.generated","tau/store/types.targetprocess.additional"],function(e,t,s,r){var n=function(e){for(var t=[],s=0,r=e.length;r>s;s++){var n=e.charAt(s),a=n.toUpperCase();0===s?n=a:n===a&&t.push(" "),t.push(n)}return t.join("")},a=function(e){return{key:e,val:e}},i=function(e){var t=e.length-1,s=e.charAt(t);return"s"===s?/^.*[sx]is$/.test(e)?e=e.substring(0,t-1)+"es":e+="es":"z"===s||"x"===s||"h"===s&&/^.*[sc]h$/.test(e)?e+="es":"y"===s?/^.*[aeijouy]y$/.test(e)?e+="s":e=e.substring(0,t)+"ies":e+="s",e},o=function(e,t){return t=t||i(e),{key:t,val:t}},c=function(e){return{key:e+" Big Icon Text",val:e}},u={testcase:"TC",teamiteration:"TI",testplan:"TP",testplanrun:"TR",userstory:"U"},l=function(t,s){return{key:t+" Small Icon Text",val:u[s.toLowerCase()]||e.last(t.split(" ")).charAt(0)}},p=function(e){if(e&&e.entityType&&e.entityType.name)return e.entityType.name;throw new Error("Type of entity is not detected")},f=function(e,t){var s=n(e);return{name:a(s),names:o(s,t),iconBig:c(s),iconSmall:l(s,e)}};return e.each(s.concat(r),function(e){var s;switch(e.name){case"projectMember":s="Project Allocations";break;case"userStory":e.aliases.unshift("story","stories","us"),e.simpleFields.push("tasks-effort-sum","tasks-effortToDo-sum");break;case"general":case"assignable":e.isParentType=!0,e.discriminator={entityType:["id","name"]},e.detectType=p}("general"===e.parent||"assignable"===e.parent)&&e.simpleFields.push("customFields"),e.terms=f(e.name,s),"processInfo"===e.name&&e.refs&&(e.refs={}),"context"===e.name&&(e.refs||(e.refs={}),e.refs.culture&&delete e.refs.culture,e.refs.appContext&&delete e.refs.appContext,e.refs.selectedProjects={list:!0,name:"project"},e.simpleFields=["id","acid"]),t.register(e)}),t.register({name:"implementationHistory",aliases:["stats"]}),t.register({name:"solution"}),t.register({name:"prioritizer",fields:["id"],refs:[]}),t});