define(["Underscore","tau/store/types","tau/store/types.targetprocess.generated"],function(_,a,b){var c=function(a){var b=[];for(var c=0,d=a.length;c<d;c++){var e=a.charAt(c);c===0?e=e.toUpperCase():e===e.toUpperCase()&&b.push(" "),b.push(e)}return b.join("")},d=function(a){return{key:a,val:a}},e=function(a){var b=a.length-1;if(a.charAt(b)==="y"){var c=a.substring(0,b),d="ies";a=c+d}else a+="s";return{key:a,val:a}},f=function(a){var b=a.split(" "),c=b.length,d=c-1||0,e=b[d];return{key:a+" Big Icon Text",val:e}},g=function(a){var b=a.split(" "),c=b.length,d=c-1||0,e=b[d];return{key:a+" Small Icon Text",val:e.charAt(0)}},h=function(a){if(a&&a.entityType&&a.entityType.name)return a.entityType.name;throw"type of entity is not detected"},i=function(a){var b=c(a);return{name:d(b),names:e(b),iconBig:f(b),iconSmall:g(b)}};return _.each(b,function(b){b.name==="userStory"&&(b.aliases.unshift("story","stories","us"),b.simpleFields.push("tasks-effort-sum","tasks-effortToDo-sum"));if(b.name==="general"||b.name==="assignable")b.isParentType=!0,b.discriminator={entityType:["id","name"]},b.detectType=h;(b.parent==="general"||b.parent==="assignable")&&b.simpleFields.push("customFields"),b.terms=i(b.name),b.name==="process"&&b.refs&&b.refs.customFields&&delete b.refs.customFields,b.name==="processInfo"&&b.refs&&(b.refs={}),b.name==="context"&&(b.refs||(b.refs={}),b.refs.culture&&delete b.refs.culture,b.refs.selectedProjects={list:!0,name:"project"},b.simpleFields=["id","acid"]),a.register(b)}),a.register({name:"implementationHistory",aliases:["stats"]}),a.register({name:"prioritizer",fields:["id"],refs:[]}),a})