define(["tau/core/class"],function(Class){var globalSettingsResult=null,GlobalSettingsService=Class.extend({init:function(config){this.config=config},resetSettings:function(){globalSettingsResult=null},getGlobalSettings:function(callbackInfo){var processCallback=function(callbackInfo,r){callbackInfo.success&&callbackInfo.success.call(callbackInfo.scope,r.d)};if(globalSettingsResult){processCallback(callbackInfo,globalSettingsResult);return}this.sendRequest("GlobalSettingsService","GetGlobalSettings",null,function(r){globalSettingsResult=r,processCallback(callbackInfo,r)},function(r){callbackInfo.failure&&callbackInfo.failure.call(callbackInfo.scope,r)})},sendRequest:function(serviceName,operationName,data,fnSuccess,fnError){var url=this.config.appPath+"/PageServices/"+serviceName+".asmx/"+operationName,cfg={contentType:"application/json",type:"POST",success:fnSuccess,error:fnError};data&&(cfg.data=JSON.stringify(data)),$.ajax(url,cfg)}});return GlobalSettingsService})