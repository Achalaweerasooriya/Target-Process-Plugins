define(["Underscore"],function(e){return{createSliceDefinitionFromBoardSettings:function(t){var i=t.global?t.global.acid:null,n=t.global?t.global.entityId:null,r={global:{acid:i,entityId:n}};if(t.hasOwnProperty("x")){var l=this._convertToDefinitionItem(t.x);l&&(r.x=l)}if(t.hasOwnProperty("user")){var o=e.cloneDeep(t.user);o&&(r.user=o)}if(t.hasOwnProperty("y")){var s=this._convertToDefinitionItem(t.y);s&&(r.y=s)}return t.hasOwnProperty("cells")&&(r.cells=this._convertToDefinitionCells(t.cells)),t.hasOwnProperty("entityId")&&t.hasOwnProperty("entityType")&&(r.entityId=t.entityId,r.entityType=t.entityType,r.templateTypesFilter=t.templateTypesFilter),r},_convertToDefinitionItem:function(t){if(!t)return null;t=e.cloneDeep(t);var i={};if(e.isString(t)&&(t=[t]),e.isArray(t))i.id=t.length?t[0]:null,i.filter=null,i.ordering=null;else if(e.isObject(t)){var n=t.type||t.types;i.id=e.isArray(n)?n.length?n[0]:null:n,e.isString(t.data)&&(i.data=t.data),this._convertFilterAndOrdering(t,i)}return i},_convertToDefinitionCells:function(t){if(!t)return null;t=e.cloneDeep(t);var i={};return e.isArray(t)?i.items=t:e.isObject(t)&&(i.items=t.items||t.types||t.type,this._convertFilterAndOrdering(t,i)),e.each(i.items,function(e,t){i.items[t]=this._convertToDefinitionItem(e)},this),i},_convertFilterAndOrdering:function(e,t){e.useFilter!==!1&&(t.filter=e.filter||null),t.ordering=e.ordering&&e.ordering.name?e.ordering:null}}});