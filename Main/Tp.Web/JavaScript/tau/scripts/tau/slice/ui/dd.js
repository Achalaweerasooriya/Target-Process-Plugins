define(["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(_,$,a){return a.extend({_declareDnD:function(a){var b=this;$(".draggable",a).draggable({revert:"invalid",helper:"clone",cursor:"move",stop:function(a,b){$(a.target).removeClass("moved-slice-card")},start:function(a,b){$(a.target).addClass("moved-slice-card")}}),$(".droppable",a).droppable({activeClass:"ui-state-hover",hoverClass:"ui-state-active",drop:function(a,c){var d=$(c.draggable),e=d.parents(".slice-cell"),f=$(this);f.append(d);var g=f.attr("id").split("_"),h={x:g[0],y:g[1],id:d.attr("id"),card:d,prevCell:e};b.bus.fire("move",h)}})},"bus afterRender":function(a){var b=a.data.element,c=a.data.data,d=new Date-c.renderTime,e=$("#null_null>.slice-info",b);e.append("<br/> render: "+d+"ms");var f=new Date;this._declareDnD(b),e.append("<br/> d&d: "+(new Date-f)+"ms")},"bus moveCompleted":function(a){var b=a.data.saga,c=b.card.css("backgroundColor");b.card.css({backgroundColor:"#dbf383"}),b.card.animate({backgroundColor:c},"slow")},"bus moveFailed":function(a){var b=a.data.saga;$(b.prevCell).append(b.card);var c=b.card.css("backgroundColor");b.card.css({backgroundColor:"red"}),b.card.animate({backgroundColor:c},"slow")}})})