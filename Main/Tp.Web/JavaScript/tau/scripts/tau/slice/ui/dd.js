define(["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(e,a,r){return r.extend({_declareDnD:function(e){var r=this;a(".draggable",e).draggable({revert:"invalid",helper:"clone",cursor:"move",stop:function(e){a(e.target).removeClass("moved-slice-card")},start:function(e){a(e.target).addClass("moved-slice-card")}}),a(".droppable",e).droppable({activeClass:"ui-state-hover",hoverClass:"ui-state-active",drop:function(e,n){var d=a(n.draggable),o=d.parents(".slice-cell"),t=a(this);t.append(d);var s=t.attr("id").split("_"),c={x:s[0],y:s[1],id:d.attr("id"),card:d,prevCell:o};r.bus.fire("move",c)}})},"bus afterRender":function(e){var r=e.data.element,n=e.data.data,d=new Date-n.renderTime,o=a("#null_null>.slice-info",r);o.append("<br/> render: "+d+"ms");var t=new Date;this._declareDnD(r),o.append("<br/> d&d: "+(new Date-t)+"ms")},"bus moveCompleted":function(e){var a=e.data.saga,r=a.card.css("backgroundColor");a.card.css({backgroundColor:"#dbf383"}),a.card.animate({backgroundColor:r},"slow")},"bus moveFailed":function(e){var r=e.data.saga;a(r.prevCell).append(r.card);var n=r.card.css("backgroundColor");r.card.css({backgroundColor:"red"}),r.card.animate({backgroundColor:n},"slow")}})});