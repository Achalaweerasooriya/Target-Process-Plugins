define(["jQuery","Underscore","app.path","tau/core/query"],function($,_,a,b){var c=a.get(),d=c+"/slice/v1/";return{resolve:function(a,c){var e=a.global.acid;if(!e)throw"acid should be defined";var f=d+c.method+"?type=matrix_proto&definition={cells:'"+a.cells.types[0]+"',x:'"+a.x.types[0]+"',y:'"+a.y.types[0]+"',global: {acid:'"+e+"'}}",g=_.clone(c.config||{});_.defaults(g,{$take:999,$innerTake:999}),f+="&take="+g.$take,f+="&innerTake="+g.$innerTake,g.$skip&&(f+="&skip="+g.$skip);var h=b.render(g);return h&&(f+="&where="+h),g.$set&&_.each(_.keys(g.$set),function(a){f+="&"+a+"="+g.$set[a]}),encodeURI(f)}}})