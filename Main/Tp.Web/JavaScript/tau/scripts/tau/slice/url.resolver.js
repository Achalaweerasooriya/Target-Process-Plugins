define(["jQuery","Underscore","tau/core/class","app.path","tau/core/query","tau/slice/slice.definition.transformations"],function(e,r,i,t,n,a){var s=t.get(),o=s+"/slice/v1/";return i.extend({init:function(e){this.prefix=e.prefix},resolve:function(i,t,s){var o=this.resolveUrl(t.method),c=r.clone(t.config||{});r.defaults(c,{});var l={base64:s.base64||!1};if(s.clientId&&(l.clientId=s.clientId),l.take=c.$take,c.$skip&&(l.skip=c.$skip),!s.disableWhereScope){var d=n.render(c);d&&(l.where=d);var f=n.render(c.$whereX||{});f&&(l.whereX=f);var u=n.render(c.$whereY||{});u&&(l.whereY=u)}c.$set&&r.forEach(c.$set,function(e,r){l[r]=e}),l.definition=a.createSliceDefinitionFromBoardSettings(i);var h=r.clone(l);return delete h.clientId,{serviceUrl:o,parameters:l,url:o+"?"+e.param(h)}},resolveUrl:function(e){return[o,this.prefix,"/",e].join("")}})});