define(["tau/core/class","tau/utils/timeline/utils.timeline.date-range","libs/date.js/build/date","tau/utils/utils.date"],function(e,t,a,n){return e.extend({DEFAULT_LOCAL_DATE_RANGE_IN_PERCENT:.3,MIN_LOCAL_DATE_RANGE_IN_PERCENT:.1,MAX_LOCAL_DATE_RANGE_IN_PERCENT:.9,_setLocalDateRangeCloseToDate:function(e,n,_){var s=e.getDurationInTicks(),e=new t(new a(_-s/2),new a(_+s/2));return e.startDate.getTime()<n.startDate.getTime()?e=new t(n.startDate.clone(),new a(n.startDate+s)):e.endDate.getTime()>n.endDate.getTime()&&(e=new t(new a(n.endDate-s),n.endDate.clone())),e},scaleLocalDateRangeProportionally:function(e,n,_){var s,i=t.tryParseWithRoundedDays(n),E=t.tryParse(e),D=E.getDurationInTicks();i.isValid?s=D/i.getDurationInTicks():(s=D/_.getDurationInTicks(),s<this.MIN_LOCAL_DATE_RANGE_IN_PERCENT?s=this.MIN_LOCAL_DATE_RANGE_IN_PERCENT:s>this.MAX_LOCAL_DATE_RANGE_IN_PERCENT&&(s=this.MAX_LOCAL_DATE_RANGE_IN_PERCENT));var r=new a(E.startDate+D/2);return this._setLocalDateRangeCloseToDate(_.scale(s),_,r)},setLocalDateRangeCloseToNow:function(e){var t=n.getServerNow();return this._setLocalDateRangeCloseToDate(e.scale(this.DEFAULT_LOCAL_DATE_RANGE_IN_PERCENT),e,t)}})});