define(["Underscore","tau/core/class"],function(a,e){var t=e.extend({data:[],load:function(e){var t=this;a.forEach(e,function(a){a.normalizeData=t._normalize(a.data)}),this.data=e},_createRegex:function(e){var t=a.trim(e);t=t.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&"),t=t.replace(/[ ]+/g,"([-[\\]{}()*+?.,\\\\^$|#:;! ]+|\\s+|\\s+[ \\S]*?\\s+)");var r=new RegExp(t,"i");return r},_normalize:function(e){return a.trim(e)},search:function(e){var t=[],r=this._createRegex(e);return a.forEach(this.data,function(a){var e=a.normalizeData,n=e.match(r);if(n){var i={_id:a._id,data:a.data,entry:{from:n.index,len:n[0].length}};t.push(i)}}),t},match:function(a,e){var t=null,r=this._normalize(a).match(this._createRegex(e));return r&&(t={from:r.index,len:r[0].length}),t}});return t});