define(["Underscore","tau/core/class","libs/underscore/underscore.string"],function(a,b){var c=b.extend({data:[],load:function(b){var c=this;a.forEach(b,function(a){a.normalizeData=c._normalize(a.data)}),this.data=b},_createRegex:function(b){var c=a.trim(b);c=c.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&"),c=c.replace(/[ ]+/g,"([-[\\]{}()*+?.,\\\\^$|#:;! ]+|\\s+|\\s+[ \\S]*?\\s+)");var d=new RegExp(c,"i");return d},_normalize:function(b){return a.trim(b)},search:function(b){var c=[],d=this._createRegex(b);return a.forEach(this.data,function(a){var b=a.normalizeData,e=b.match(d);if(e){var f={_id:a._id,data:a.data,entry:{from:e.index,len:e[0].length}};c.push(f)}}),c},match:function(a,b){var c=null,d=this._normalize(a).match(this._createRegex(b));return d&&(c={from:d.index,len:d[0].length}),c}});return c})