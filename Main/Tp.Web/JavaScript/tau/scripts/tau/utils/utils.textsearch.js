define(["Underscore","tau/core/class"],function(_,a){var b=a.extend({data:[],load:function(a){var b=this;_.forEach(a,function(a){a.normalizeData=b._normalize(a.data)}),this.data=a},_createRegex:function(a){var b=_.trim(a);b=b.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&"),b=b.replace(/[ ]+/g,"([-[\\]{}()*+?.,\\\\^$|#:;! ]+|\\s+|\\s+[ \\S]*?\\s+)");var c=new RegExp(b,"i");return c},_normalize:function(a){return _.trim(a)},search:function(a){var b=[],c=this._createRegex(a);return _.forEach(this.data,function(a){var d=a.normalizeData,e=d.match(c);if(e){var f={_id:a._id,data:a.data,entry:{from:e.index,len:e[0].length}};b.push(f)}}),b},match:function(a,b){var c=null,d=this._normalize(a).match(this._createRegex(b));return d&&(c={from:d.index,len:d[0].length}),c}});return b})