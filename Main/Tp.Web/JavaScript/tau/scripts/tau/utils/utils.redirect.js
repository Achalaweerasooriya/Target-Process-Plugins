define(["Underscore","jQuery","tau/core/class","tau/configurator"],function(_,$,a,b){return a.extend({init:function(a){this.context=a,this.window=b.getWindow()},_process:function(a){var c=null;if(a.match(/^http(s)?:\/\//i))c=a;else if(a[0]=="#")c=a;else{var d=b.getApplicationPath();a[0]!=="/"&&(a="/"+a),c=d+a}return this.context&&(c=$.tmpl(c,this.context).text()),c},_redirect:function(a,b){b.location.href=a},redirect:function(a,b){var c=this.window;if(typeof b!="undefined"){var d=$(document),e={scrollbars:1,width:d.width()*.8,height:d.height()*.8,top:50},f=[],g=null;for(g in e)f.push(g+"="+e[g]);var h=f.join(",");c=this.window.open(this._process(a),b,h);return}this._redirect(this._process(a),c)},back:function(){this.window.history&&this.window.history.back&&this.window.history.back()},reload:function(){this.window.location&&this.window.location.reload&&this.window.location.reload()}})})