define(["Underscore","jQuery","tau/core/class"],function(i,t,o){return o.extend({init:function(i,t){this.window=i,this.appPath=t},_process:function(i,o){var n=null;if(i.match(/^http(s)?:\/\//i))n=i;else if("#"==i[0])n=i;else{var e=this.appPath;"/"!==i[0]&&(i="/"+i),n=e+i}return o&&(n=t.tmpl(n,o).text()),n},_redirect:function(i,t){t.location.href=i},redirect:function(i,o,n){var e=this.window;if(o){var r=t(document),s={scrollbars:1,width:.8*r.width(),height:.8*r.height(),top:50},h=[],c=null;for(c in s)h.push(c+"="+s[c]);var a=h.join(",");return void(e=this.window.open(this._process(i,n),o,a))}this._redirect(this._process(i,n),e)},back:function(){this.window.history&&this.window.history.back&&this.window.history.back()},reload:function(){if(this.window.location&&this.window.location.reload){var t=i.bind(function(){this.window.location.reload()},this);setTimeout(t,1)}}})});