define(["jQuery"],function($){function selectText($scope){return $scope.map(function(){return $(this).text()})}function Settings($element){return{element:function(){return $element.find(".tau-chart-settings")},isrendered:function(){return this.element().length==1},yAxisButtons:function(){return this.element().find(".tau-chart-time-switch button")},yAxisButton:function(){return this.yAxisButtons().filter(".tau-checked").text()},yAxisButtonNames:function(){return selectText(this.yAxisButtons()).toArray()},entityButtons:function(){var element=this.element,ret=element().find(".tau-chart-entities button");return ret.get=function(name){var input=function(){return element().find('input:checkbox[value="'+name+'"]')};return{element:input(),check:function(){input().prop("checked",!0)},change:function(){input().trigger("change")}}},ret},entityButtonNames:function(){return selectText(this.entityButtons()).toArray()},filter:function(){return this.element().find("input.i-role-filter-input")},filterRendered:function(){return this.filter().length==1},filterHelp:function(){return this.element().find("button.i-role-help")},filterHelpRendered:function(){return this.filterHelp().length==1},filterAutocomplete:function(){return this.filter().data("autocomplete")},whenAutocompleteOpen:function(callback){this.filter().on("autocompleteopen",callback)},filterSuggestions:function(){return selectText(this.filterAutocomplete().menu.element.find("li")).toArray()},enterFilter:function(val){this.filter().val(val),this.filter()[0].selectionStart=val.length,this.filter().autocomplete("search")},applyFilter:function(val){this.filter().trigger("_change")},filterHelpBubble:function(){return this.filterHelp().data("tauBubble")}}}function select(prop){return{from:function(arr){return $(arr).map(function(){return this[prop]}).toArray()}}}function roundAll(arr){return arr.map(function(d){return Math.round(d)})}return{select:select,roundAll:roundAll,Settings:Settings}})