var tests=tests||{};tests.testRunner=function(a){this.config=a},tests.testRunner.prototype={run:function(){var a=this;$(".progress-bar").progressbar({min:0,value:0,max:a.config.paths.length});var b=$("#"+a.config.frameId);a.config.$frame=b,b.bind("load",function(){a.listenFrame(b)}),a.startNextTest()},listenFrame:function(a){var b=this;$(a[0].contentDocument).ready(function(){var c=a[0].contentWindow.QUnit;if(!c){b.incrimentProgressbar(),b.startNextTest();return}var d=c.log,e=c.moduleDone,f=c.moduleStart,g=c.testStart,h=c.testDone,i=c.done;c.log=function(a,c){d.apply(this,arguments),b.log.apply(b,arguments)},c.moduleStart=function(){f.apply(this,arguments),b.moduleStart.apply(b,arguments)},c.moduleDone=function(){e.apply(this,arguments),b.moduleDone.apply(b,arguments)},c.testStart=function(){g.apply(this,arguments),b.testStart.apply(b,arguments)},c.testDone=function(){h.apply(this,arguments),b.testDone.apply(b,arguments)},c.done=function(){i.apply(this,arguments),b.done.apply(b,arguments)}})},moduleStart:function(a){var b=this.config.paths[this.currentTestIndex],c=['<div class="module">','   <div class="result"></div>','   <div class="module-name"><a href="',b,'"  target="_blank" ><strong>',a,"</strong></a></div>",'   <div class="module-tests"></div>',"</div>"].join("");this.currentModule=$(c),$(".modules").append(this.currentModule)},log:function(a,b){var c=a?"success":"failed";$log=$(['<li class="',c,'">',b,"</li>"].join("")),this.currentTest.find(".test-log").append($log)},testStart:function(a){var b=this.config.paths[this.currentTestIndex];this.currentTest=$(['<div class="test">','   <div class="test-result"></div>','   <div class="collapse expand"></div>','   <div class="test-name"><a target="_blank" href="',b,"?",a,'"> ',a,"</a></div>",'   <div class="test-log-container" style="display:none;"><ol class="test-log"></ol></div>',"</div>"].join("")),this.currentModule.find(".module-tests").append(this.currentTest),this.currentTest.find(".expand").click(function(){$(this).toggleClass("expand"),$(this).parent().find(".test-log-container").toggle()})},testDone:function(a,b,c){b>0?(this.currentTest.addClass("failed-test"),$(".progress-bar").find(".ui-progressbar-value").css("background-color","#EE5757")):this.currentTest.addClass("success-test")},incrimentProgressbar:function(){var a=$(".progress-bar"),b=a.progressbar("option","value");a.progressbar("option","value",b+1)},done:function(){this.incrimentProgressbar(),this.startNextTest()},moduleDone:function(a,b,c){if(!this.currentModule)return;b>0?this.currentModule.addClass("failed-module"):this.currentModule.addClass("success-module"),delete this.currentModule},startNextTest:function(){var a=this;a.hasOwnProperty("currentTestIndex")?a.currentTestIndex=a.currentTestIndex+1:a.currentTestIndex=0;if(a.currentTestIndex>=a.config.paths.length)return;var b=a.config.paths[a.currentTestIndex],c=[$.trim(b),"#",+(new Date)].join("");a.config.$frame.attr("src",c)}}