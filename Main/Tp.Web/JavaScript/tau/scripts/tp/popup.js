define(["jQuery"],function(i){i.widget("ui.popup",i.ui.dialog,{options:{modal:!0,position:"center",draggable:!1,resizable:!1,fitToWindow:!0,horizontalPadding:20,verticalPadding:20},_create:function(){this._super();var t=i.proxy(this._resize,this),e=i.proxy(this.close,this);this.element.off("popupopen popupclose popupresize"),this.element.bind("popupopen",function(){i(window).bind("resize",t),i(".ui-widget-overlay").click(e)}),this.element.bind("popupclose",function(){i(window).unbind("resize",t),i("ui-widget-overlay").unbind("click",e)});var n=this;this.element.bind("popupresize",function(){n.uiDialog.width()<n.options.minWidth&&n.uiDialog.width(n.options.minWidth),n.element.width()!=n.uiDialog.width()&&n.element.width(n.uiDialog.width())})},_init:function(){this._super();var i=this.element.parent();i.addClass("tau-dialog-container"),this.options.parentClassName&&i.addClass(this.options.parentClassName),this._resize()},open:function(){this._super(),this._resize()},_title:function(i){i.html(this.options.title||"&#160;")},_resize:function(){if(this.options.fitToWindow){var t=i(window).width(),e=Math.max(this.options.minWidth,t-2*this.options.horizontalPadding);this.uiDialog.width(e),this.element.width(e);var n=i(window).height(),o=Math.max(this.options.minHeight,n-2*this.options.verticalPadding);this.uiDialog.height(o),this.element.height(o-this.uiDialog.find(".ui-dialog-titlebar").outerHeight(!1))}this._setOption("position",this._getOffset()),this._trigger("resize")},_getOffset:function(){var t=i("body"),e=t.width(),n=t.height(),o=(e-this.element.width())/2,s=Math.max((n-this.element.height())/2,50);return{top:s,left:o}}})});