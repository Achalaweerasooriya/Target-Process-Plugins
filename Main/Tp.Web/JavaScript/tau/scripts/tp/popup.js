define(["libs/jquery/jquery","libs/jquery/jquery.ui"],function(a){a.widget("ui.popup",a.ui.dialog,{options:{modal:!0,position:"center",draggable:!1,resizable:!1,fitToWindow:!0,horizontalPadding:20,verticalPadding:20},_create:function(){a.ui.dialog.prototype._create.apply(this);var b=a.proxy(this._resize,this),c=a.proxy(this.close,this);this.element.bind("popupopen",function(){a(window).bind("resize",b),a(".ui-widget-overlay").click(c)}),this.element.unbind("popupclose",function(){a(window).unbind("resize",b),a("ui-widget-overlay").unbind("click",c)});var d=this;this.element.bind("popupresize",function(){d.uiDialog.width()<d.options.minWidth&&d.uiDialog.width(d.options.minWidth),d.element.width()!=d.uiDialog.width()&&d.element.width(d.uiDialog.width())})},close:function(){a.ui.dialog.prototype.close.apply(this)},_init:function(){a.ui.dialog.prototype._init.apply(this),this.element.parent().addClass("tau-dialog-container"),this._resize()},destroy:function(){a.ui.dialog.prototype.destroy.apply(this)},open:function(){a.ui.dialog.prototype.open.apply(this,arguments),this._resize()},_setOption:function(b,c){a.ui.dialog.prototype._setOption.apply(this,arguments)},_resize:function(){if(this.options.fitToWindow){var b=a(window).width(),c=Math.max(this.options.minWidth,b-2*this.options.horizontalPadding);this.uiDialog.width(c),this.element.width(c);var d=a(window).height(),e=Math.max(this.options.minHeight,d-2*this.options.verticalPadding);this.uiDialog.height(e),this.element.height(e-this.uiDialog.find(".ui-dialog-titlebar").outerHeight(!1))}this._setOption("position",this._getOffset()),this._trigger("resize")},_getOffset:function(){var b=a("body"),c=b.width(),d=b.height(),e=(c-this.element.width())/2,f=Math.max((d-this.element.height())/2,50);return{top:f,left:e}}})})