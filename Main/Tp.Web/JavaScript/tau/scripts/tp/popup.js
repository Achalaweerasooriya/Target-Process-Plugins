define(["jQuery"],function($){$.widget("ui.popup",$.ui.dialog,{options:{modal:!0,position:"center",draggable:!1,resizable:!1,fitToWindow:!0,horizontalPadding:20,verticalPadding:20},_create:function(){$.ui.dialog.prototype._create.apply(this);var resizeHandler=$.proxy(this._resize,this),closeHandler=$.proxy(this.close,this);this.element.bind("popupopen",function(){$(window).bind("resize",resizeHandler),$(".ui-widget-overlay").click(closeHandler)}),this.element.unbind("popupclose",function(){$(window).unbind("resize",resizeHandler),$("ui-widget-overlay").unbind("click",closeHandler)});var that=this;this.element.bind("popupresize",function(){that.uiDialog.width()<that.options.minWidth&&that.uiDialog.width(that.options.minWidth),that.element.width()!=that.uiDialog.width()&&that.element.width(that.uiDialog.width())})},close:function(){$.ui.dialog.prototype.close.apply(this)},_init:function(){$.ui.dialog.prototype._init.apply(this),this.element.parent().addClass("tau-dialog-container"),this._resize()},destroy:function(){$.ui.dialog.prototype.destroy.apply(this)},open:function(){$.ui.dialog.prototype.open.apply(this,arguments),this._resize()},_setOption:function(key,value){$.ui.dialog.prototype._setOption.apply(this,arguments)},_resize:function(){if(this.options.fitToWindow){var windowWidth=$(window).width(),width=Math.max(this.options.minWidth,windowWidth-2*this.options.horizontalPadding);this.uiDialog.width(width),this.element.width(width);var windowHeight=$(window).height(),height=Math.max(this.options.minHeight,windowHeight-2*this.options.verticalPadding);this.uiDialog.height(height),this.element.height(height-this.uiDialog.find(".ui-dialog-titlebar").outerHeight(!1))}this._setOption("position",this._getOffset()),this._trigger("resize")},_getOffset:function(){var body=$("body"),width=body.width(),height=body.height(),left=(width-this.element.width())/2,top=Math.max((height-this.element.height())/2,50);return{top:top,left:left}}})})