define(["Underscore","jQuery","tau/components/extensions/component.extension.base","template!tp/reports/processControl/template.legend"],function(e,n,t,r){return t.extend({whenFilterResolved:function(e){var t=n.Deferred();this.fire("filter.resolve",t),t.then(e)},whenTimeResolved:function(e){var t=n.Deferred();this.fire("time.resolve",t),t.then(e)},unbindSettings:function(){var e=this;e.whenFilterResolved(function(t){e.whenTimeResolved(function(r){e.fire("formData.changed",n.extend({time:r},t))})})},"bus afterRender + contextProvider.ready":function(e,n,t){var r=n.element;this.fire("$form.ready",r),this.fire("view.dom.ready",{$element:r,legend:this.getLegend(t)}),this.unbindSettings()},"bus filter.form.changed":function(){this.unbindSettings()},"bus time.form.changed":function(){this.unbindSettings()},getLegend:function(e){return r.render({usTerm:e.getTerms("userStory").name,bugTerm:e.getTerms("bug").name})}})});