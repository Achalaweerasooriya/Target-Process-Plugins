define(["jQuery","Underscore","libs/d3/d3","tp/reports/chart.behaviour"],function(e,t,r,s){var n=function(e,t,s,n){return function(c){var a=r.svg.line().x(function(e){return e[0]}).y(function(e){return e[1]});c.attr("d",a([[s[0],t],[e,t],[e,n[0]]])).attr("fill","none")}},c={mouseover:function(e,t){r.select(this).classed("hover",!0),r.select(t.placeholder).insert("path",":first-child").classed("highlighter",!0).classed(t.scales.stroke(e.stroke),!0).call(n(t.scales.x(e.x),t.scales.y(e.y),[t.scales.x.range()[0]-t.scales.axisMargin,t.scales.x.range()[1]],[t.scales.y.range()[0]+t.scales.axisMargin,t.scales.y.range()[1]]))},mouseout:function(e,t){r.select(this).classed("hover",!1),r.select(t.placeholder).selectAll("path.highlighter").remove()}};return s.extend({initHandlers:function(e){return e.concat(c)},data:function(e,t){r.select(t.placeholder).classed("_scatterPlot scatterPlot",!0);var s=r.select(t.placeholder).selectAll("circle").data(e.nodes,function(e){return e.id});s.enter().append("circle"),s.exit().remove(),s.attr("class",function(e){return t.scales.stroke(e.stroke)}).transition().attr("cx",function(e){return t.scales.x(e.x)}).attr("cy",function(e){return t.scales.y(e.y)}).attr("r",function(e){return e.r}).attr("data-id",function(e){return e.id}).attr("fill","none"),this._subscribe(s,["click","mouseover","mouseout"],t)}})});