define(["Underscore","tp/reports/settings/model.settings","tau/utils/utils.date","tp/reports/settings/definitionBuilder","tp/reports/settings/templateDataBuilder"],function(e,t,i,n,s){return t.extend({NAME_CHART:"Process Ğ¡ontrol",DESCRIPTION:["Process control chart shows distribution of cycle time of all completed entities (user stories, features, bugs, tasks, requests) for a given time frame."].join(""),defaultData:{scale:"cycleTime",entities:["userstory","bug"],filter:"?EndDate > Today - 180(days)"},saveSettings:function(t,i){var n={scale:i.time.key,filter:i.filter,useFilter:i.useFilter,entities:JSON.stringify(e.reduce(i.entities,function(e,t){return e.push(t.id),e},[]))};t({scope:"Public",userData:n}).done(),this._super(t,n)},setSettings:function(e,t){function s(e,t){return function(i){var n=i[e];return"undefined"==typeof t||"undefined"!=typeof n&&null!=n||(n=t),n}}function r(e,t,i){return{map:s(e,i),label:t}}function a(e,t){return{map:function(t){return s(e)(t)?i.convertToTimezone(s(e)(t))[0]:void 0},label:t}}function o(e){return{map:function(){return e}}}var u={strategy:"page",parameters:n.getWithLeadAndCycleTime(e,t),mapping:{x:a("endDate","End Date"),y:r(e.time.key,e.time.label,0),r:o(4),stroke:r("type","Entity Type")}};this.fire("settings.changed",u)},"bus model.ready":function(t,i){this.fire("dataBind",{times:s.times(i),types:s.assignables(i),isShowSettings:i.isShowSettings,name:this.NAME_CHART,description:this.DESCRIPTION,filter:s.filter(i,"?EndDate > Today - 180(days)"),useFilter:e.isUndefined(i.useFilter)?!0:i.useFilter})}})});