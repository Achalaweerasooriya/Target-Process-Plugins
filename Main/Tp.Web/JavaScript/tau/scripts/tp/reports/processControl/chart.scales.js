define(["libs/d3/d3","tau/utils/utils.date","tp/reports/chart.scales"],function(n,t,a){function r(){}return r.prototype={get:function(r,i,e){function u(){return n.extent(r,function(n){return n.x})}function o(){return[0,n.max(r,function(n){return n.y})]}function c(n,a){return[t.addDays(n[0],-a/2),t.addDays(n[1],a/2)]}function l(t,a){var r=n.max([1.1*t[1]-t[0],a]);return[t[0],t[0]+r]}function s(n,t){return n?t?n+", "+t:n:t}var g=n.time.scale().domain(c(u(),2)).range([e.margin,e.width-e.margin]);g.label=s(i.mapping.x.label,i.mapping.x.units);var m=n.scale.linear().domain(l(o(),2)).range([e.height-e.margin,e.margin]).nice();return m.label=s(i.mapping.y.label,i.mapping.y.units),{x:g,y:m,stroke:a.type(),axisMargin:20}}},r});