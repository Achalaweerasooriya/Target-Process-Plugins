define(["jQuery","application.creator"],function($,AppCreator){var APP_ID="appReports",initializeApplication=function(configurator){configurator._id=_.uniqueId("report_charts_viewer"),configurator.isBoardEdition=!0;var ROUTING_PATTERNS=[{pattern:/reports/,adapter:function(){this.resolve({id:null,entity:"reports"})},type:"tau/components/component.page.reports",host:"tau/components/component.master.empty"},{pattern:/(\w+)\/([0-9]+)($|\s|&)/,adapter:function(entityType,entityId,tail){this.resolve({id:parseInt(entityId),entity:entityType,action:"show"})},type:"tau/components/component.page.entity",host:"tau/components/component.master.empty"},{pattern:/(\w+)\/([0-9]+)\/(\w+)[&|]*.*/,adapter:function(entityType,entityId,action){this.resolve({id:parseInt(entityId),entity:entityType,action:action})},type:"tau/components/component.page.entity",host:"tau/components/component.master.empty"}],appConfig={name:"application charts",applicationId:APP_ID,routes:ROUTING_PATTERNS,configurator:configurator,routing:{silent:!0},integration:{disableProgressIndicator:!0,showInPopup:!0,keepAlive:!1}};return AppCreator.create(appConfig).pipe(function(appBus){var $return=$.Deferred();appBus.on("afterRender",function(e){appBus.fire("view.dom.ready",{element:e.data.element})});var clickHandler=function(e){if(e.ctrlKey||e.metaKey)return;var href=$(e.currentTarget).attr("href")||"";if(href==="#")return;href.charAt(0)==="#"&&(e.preventDefault(),e.stopPropagation(),configurator.service("navigator").to(href.substring(1)))};return appBus.on("innerContentRendered",function(e,renderData){var $el=renderData.element,$applicationRoleNode=$el.parents(".i-role-application");$applicationRoleNode.removeClass("tau-app").addClass("ui-application-viewport"),$el.off("click","a",clickHandler),$el.on("click","a",clickHandler)}),appBus.initialize(appConfig),$return.resolve(appBus),$return})},getHash=function(){return"#"+APP_ID+"=reports"},initialize=function(parentConfigurator){var configurator=parentConfigurator.createChild();configurator.setExternal({location:{hash:getHash(),replace:function(newHash){this.hash=newHash}}}),configurator.registerService("navigator",{to:function(url){var ext=configurator.getExternal();ext.setHashParam(APP_ID,url),ext.triggerHashChange()}}),initializeApplication(configurator)};return{initialize:initialize}})