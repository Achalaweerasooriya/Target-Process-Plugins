define(["Underscore","tp/reports/settings/model.settings","tp/reports/settings/definitionBuilder","tp/reports/settings/templateDataBuilder"],function(e,t,i,s){return t.extend({NAME_CHART:"Relations Network",defaultData:{entities:JSON.stringify(["userstory"]),filter:"?Iteration is Current",onlyWithRelations:!1,isShowSettings:!0,isShowLegend:!0},processSettings:function(t){return{filter:t.filter,useFilter:t.useFilter,onlyWithRelations:t.onlyWithRelations,entities:JSON.stringify(e.map(t.entities,function(e){return e.id}))}},setSettings:function(e,t,s){var r=i.getWithRelations(e,t,s),n={strategy:"page",parameters:r.definition,layouts:r.layouts,configurator:s};this.fire("settings.changed",n)},"bus configurator.ready:last + model.ready + contextProvider.ready":function(t,i,r,n){var o=i.getFeaturesService().isEnabled("tp2.application")?s.tp2generals(r):s.generals(r);this.fire("dataBind",{onlyWithRelations:r.onlyWithRelations,types:o,filter:s.filter(r,"?Iteration is Current"),useFilter:e.isUndefined(r.useFilter)?!0:r.useFilter,isShowSettings:r.isShowSettings,name:this.NAME_CHART,description:this.getDescription(n),termProcessor:n.getTermProcessorForCurrentProject()})},getDescription:function(e){return"This network is a visualization of direct and hidden dependency relations between any entities in Targetprocess (e.g. projects, "+e.getTerms("userStory").names.toLowerCase()+", "+e.getTerms("feature").names.toLowerCase()+", "+e.getTerms("bug").names.toLowerCase()+", tasks, etc.)"}})});