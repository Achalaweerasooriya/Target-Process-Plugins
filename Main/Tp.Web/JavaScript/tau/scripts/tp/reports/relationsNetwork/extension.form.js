define(["Underscore","jQuery","tau/components/extensions/component.extension.base"],function(_,$,ExtensionBase){return ExtensionBase.extend({whenFilterResolved:function(callback){var whenFilterResolved=$.Deferred();this.fire("filter.resolve",whenFilterResolved),whenFilterResolved.then(callback)},whenOnlyWithRelationsFilterResolved:function(callback){var whenOnlyWithRelationsFilterResolved=$.Deferred();this.fire("onlyWithRelations.resolve",whenOnlyWithRelationsFilterResolved),whenOnlyWithRelationsFilterResolved.then(callback)},"bus $form.ready:last + onlyWithRelations.resolve":function(e,$form,promise){promise.resolve($form.find("#onlyWithRelations").is(":checked"))},unbindSettings:function(){var self=this;self.whenFilterResolved(function(filter){self.whenOnlyWithRelationsFilterResolved(function(onlyWithRelations){self.fire("formData.changed",$.extend(filter,{onlyWithRelations:onlyWithRelations}))})})},"bus afterRender":function(evt,renderData){var self=this,$form=renderData.element;this.fire("$form.ready",$form.find(".i-role-settings")),this.fire("view.dom.ready",$form),$form.find("#onlyWithRelations").change(function(){self.unbindSettings()}),this.unbindSettings()},"bus filter.form.changed":function(){this.unbindSettings()}})})