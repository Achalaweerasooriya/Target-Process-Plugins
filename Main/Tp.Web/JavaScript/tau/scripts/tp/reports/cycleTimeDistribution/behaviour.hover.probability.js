define(["jQuery","libs/d3/d3","tp/reports/cycleTimeDistribution/chart.axes.format"],function(t,e,r){function n(t){return e.event.pageX-t.offset().left}function s(r){return e.event.pageX-t(r).closest("div").offset().left}function a(t){return{render:function(r,n){var s=t.selectAll("path.hover").data([[r,n]]);s.enter().insert("path",":first-child").attr("class","hover"),s.attr("stroke","black").attr("d",e.svg.line())}}}function o(t,e){return{render:function(r,n){var s=t.selectAll("div.hover").data([r]);s.enter().append("div").attr("class","hover tau-chart-tooltip"),s.exit().remove(),s.style("position","absolute").style("left",function(t){return t[0]+"px"}).style("top",function(t){return t[1]+"px"}).attr("class","hover tau-chart-tooltip").html(e(n))}}}function i(t){return function(e){return["<span>probability to complete entities in "+r.days(e.x)+": </span>"].concat(e.values.map(function(e){return'<span class="'+t.scales.fill(e.fill)+'">'+r.y(e.y+e.y0)+" </span>"})).join("")}}return{create:function(){return{mousemove:function(r,l){var c=t(this).closest("div"),u=e.select(c[0]),f=t(this).closest("svg").find(".chart"),v=e.select(f[0]),p=u.selectAll(".probability.data-x-"+r.x),d=s(this),h=[d,l.scales.y.range()[0]],y=[d,l.scales.y.range()[1]-20];a(v).render(h,y),o(u,i(l)).render([n(c),39],p.datum())},mouseout:function(){{var r=t(this).closest("div")[0];e.select(r).selectAll("path.hover, div.hover").remove()}}}}}});