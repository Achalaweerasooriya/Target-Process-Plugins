define(["Underscore","jQuery","tau/components/extensions/component.extension.base","template!tp/reports/cycleTimeDistribution/template.legend"],function(e,n,t,i){return t.extend({whenFilterResolved:function(e){var t=n.Deferred();this.fire("filter.resolve",t),t.then(e)},whenTimeResolved:function(e){var t=n.Deferred();this.fire("time.resolve",t),t.then(e)},unbindSettings:function(){var e=this;e.whenFilterResolved(function(t){e.whenTimeResolved(function(i){e.fire("formData.changed",n.extend({time:i},t))})})},"bus afterRender + contextProvider.ready":function(e,n,t){var i=n.element;this.fire("$form.ready",i),this.fire("view.dom.ready",{$element:i,legend:this.getLegend(t)}),this.unbindSettings()},"bus filter.form.changed":function(){this.unbindSettings()},"bus time.form.changed":function(){this.unbindSettings()},getLegend:function(e){return i.render({usTerm:e.getTerms("userStory").name,bugTerm:e.getTerms("bug").name})}})});