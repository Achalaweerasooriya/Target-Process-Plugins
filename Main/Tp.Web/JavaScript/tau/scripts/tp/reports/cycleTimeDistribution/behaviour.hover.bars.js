define(["jQuery","libs/d3/d3","tp/reports/cycleTimeDistribution/chart.axes.format"],function($,d3,format){function setAlign(val){return function(config){return config.my=val,config}}return{create:function(config){var tooltip=$('<div class="tau-chart-tooltip" style="position:absolute"></div>').appendTo(config.placeholder).tauBubble({content:"",className:"tau-chart-tooltip",onPositionConfig:setAlign("left bottom"),onBeforeShow:function($popup){function content(){return["<div>"+format.days(d.values[0].x)+"</div>"].concat(d.values.map(function(d){return'<div><span class="'+context.scales.fill(d.fill)+'"><strong>'+format.y(d.y)+"</strong> of all "+config.contextProvider.getTerms(d.fill).names.toLowerCase()+"</span>"+"<span> ("+d.length+" of "+d.count+")</span></div>"})).join("")}var d=this.$target.data("d"),context=this.$target.data("context");$popup.find('[role="content"]').html(content())}});return{mouseover:function(d,context){var offset=$(this).offset();offset.top+=1,offset.left+=context.scales.width(.5),tooltip.data("d",d3.select(this).datum()),tooltip.data("context",context),tooltip.offset(offset).tauBubble("show")},mouseout:function(d){tooltip.tauBubble("hide")}}}}})