define(["tp/reports/dataRepository","tau/components/extensions/component.extension.base","Underscore"],function(t,e,r){function n(t){return function(e){return e[t]}}function i(t){return function(e){var r={id:e.id,data:e};for(var n in t)r[n]=t[n].map(e);return r}}var a=new t({url:"/slice/v1/matrix/list"});return e.extend({_error:function(t){this.fire("afterLoad"),this.fire("report.error",JSON.parse(t.responseText))},_afterLoad:function(){this.fire("clearError"),this.fire("afterLoad")},_beforeLoad:function(){this.fire("beforeLoad")},"bus settings.changed":function(t,e){function o(t){return t.items[0].dynamic.items.map(n("data")).filter(e.filter||r.constant(!0)).map(i(e.mapping))}function s(t){var e=!1;if(t.items.length>0){var r=t.items[0].fixed.items;e=r.length>0&&r.filter(function(t){return"cellpaging"==t.type}).length>0}return{hasMore:e}}function f(t,r){c.fire("data.ready",{data:t,metaData:r,settings:e}),c._afterLoad()}function u(t,e,r){a.get(t,function(n){e(t,n,r)},$.proxy(c._error,c),$.proxy(c._error,c))}this._beforeLoad();var c=this,p={page:function(t,e){f(o(e),s(e))},all:function(t,e,r){r=r||[],r=r.concat(o(e)),s(e).hasMore?(t.skip=t.skip||0,t.skip+=t.take,u(t,p.all,r)):f(r,null)}};u(e.parameters,p[e.strategy],null)}})});