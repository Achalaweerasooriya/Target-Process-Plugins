define(["tp/reports/dataRepository","tau/components/extensions/component.extension.base"],function(t,e){function r(t){return function(e){return e[t]}}function n(t){return function(e){var r={id:e.id,data:e};for(var n in t)r[n]=t[n].map(e);return r}}var i=new t({url:"/slice/v1/matrix/list"});return e.extend({_error:function(t){this.fire("afterLoad"),this.fire("report.error",JSON.parse(t.responseText))},_afterLoad:function(){this.fire("clearError"),this.fire("afterLoad")},_beforeLoad:function(){this.fire("beforeLoad")},"bus settings.changed":function(t,e){function a(t){return t.items[0].dynamic.items.map(r("data")).map(n(e.mapping))}function o(t){var e=!1;if(t.items.length>0){var r=t.items[0].fixed.items;e=r.length>0&&r.filter(function(t){return"cellpaging"==t.type}).length>0}return{hasMore:e}}function s(t,r){u.fire("data.ready",{data:t,metaData:r,settings:e}),u._afterLoad()}function f(t,e,r){i.get(t,function(n){e(t,n,r)},$.proxy(u._error,u),$.proxy(u._error,u))}this._beforeLoad();var u=this,c={page:function(t,e){s(a(e),o(e))},all:function(t,e,r){r=r||[],r=r.concat(a(e)),o(e).hasMore?(t.skip=t.skip||0,t.skip+=t.take,f(t,c.all,r)):s(r,null)}};f(e.parameters,c[e.strategy],null)}})});