define(["jQuery","tp/gateway","tau/core/termProcessor"],function($,a,b){function c(){this.context=null,this.gateway=a,this.loading=!1}return c.prototype={get:function(a){var b=this;this.gateway.getJSON(this._getContextUrl(),function(c){b.context=c,b.loading=!1,a()})},_getContextUrl:function(){return this._getUrl("/api/v1/Context/?acid="+(new Tp.URL(location.href)).getAcid())},_getUrl:function(a){return(new Tp.WebServiceURL(a)).url},setCurrentProject:function(a){this.currentProjectId=a},getSelectedProjects:function(){return this.context.SelectedProjects.Items},getTermProcessorForCurrentProject:function(){var a=this,c=this.getSelectedProjects().filter(function(b){return b.Id==a.currentProjectId}).map(function(a){return a.Process.Id})[0],d=this.context.Processes.Items.filter(function(a){return a.Id==c})[0];return new b(d.Terms)}},new c})