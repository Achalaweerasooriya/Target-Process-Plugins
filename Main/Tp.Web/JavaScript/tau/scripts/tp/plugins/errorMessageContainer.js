define(["jQuery"],function($){function ErrorMessageContainer(config){this._create(config)}return ErrorMessageContainer.prototype={messageTemplate:'{{ if Message.Length }} <span>&nbsp;<span class="error">${Message}</span></span> {{/if}}',workingSpace:null,errorList:null,generalErrorContainer:null,generalErrorMessage:null,_create:function(config){this.workingSpace=config.placeholder,this.errorList=[],this.generalErrorContainer=config.generalErrorContainer,this.generalErrorMessage=config.generalErrorMessage},reset:function(){this.errorList=[],this.workingSpace.find('[name*="ErrorLabel"]').html("")},add:function(error){this.errorList.push(error)},addRange:function(errors){var that=this;$(errors).each(function(index,error){that.add(error)})},_renderError:function(index,error){this.workingSpace.find('*[name="'+error.FieldName+'"]').addClass("error"),this.workingSpace.find('*[name="'+error.FieldName+'ErrorLabel"]').html(error.Message)},render:function(){this.errorList.length==0?this.workingSpace.find(".error").removeClass("error"):($(this.errorList).each($.proxy(this._renderError,this)),$('*[name="'+this.errorList[0].FieldName+'"]').focus(),this._renderGeneralError())},_renderGeneralError:function(){var errorMessage;this.generalErrorMessage&&(errorMessage=this.generalErrorMessage);if(this.generalErrorContainer){var generalErrors=$.grep(this.errorList,function(item){return!item.FieldName});generalErrors.length>0&&(errorMessage=$.map(generalErrors,function(item){return item.Message}).join(" "))}errorMessage&&this.workingSpace.find(this.generalErrorContainer).show().text(errorMessage)},clearErrors:function(){this._removeErrorClass("input"),this._removeErrorClass("textarea"),this._removeErrorClass("select"),this.reset(),this.generalErrorContainer&&this.workingSpace.find(this.generalErrorContainer).hide().text("")},setOnFocusEvent:function(){this._setOnFocusForControl("input"),this._setOnFocusForControl("textarea"),this._setOnFocusForControl("select")},_setOnFocusForControl:function(selector){this.workingSpace.find(selector).focus(function(){$(this).removeClass("error")})},_removeErrorClass:function(selector){this.workingSpace.find(selector).removeClass("error")}},ErrorMessageContainer})