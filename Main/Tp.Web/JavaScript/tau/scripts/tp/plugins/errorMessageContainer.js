define(["jQuery"],function($){function a(a){this._create(a)}return a.prototype={messageTemplate:'{{ if Message.Length }} <span>&nbsp;<span class="error">${Message}</span></span> {{/if}}',workingSpace:null,errorList:null,generalErrorContainer:null,generalErrorMessage:null,_create:function(a){this.workingSpace=a.placeholder,this.errorList=[],this.generalErrorContainer=a.generalErrorContainer,this.generalErrorMessage=a.generalErrorMessage},reset:function(){this.errorList=[],this.workingSpace.find('[name*="ErrorLabel"]').html("")},add:function(a){this.errorList.push(a)},addRange:function(a){var b=this;$(a).each(function(a,c){b.add(c)})},_renderError:function(a,b){this.workingSpace.find('*[name="'+b.FieldName+'"]').addClass("error"),this.workingSpace.find('*[name="'+b.FieldName+'ErrorLabel"]').html(b.Message)},render:function(){this.errorList.length==0?this.workingSpace.find(".error").removeClass("error"):($(this.errorList).each($.proxy(this._renderError,this)),$('*[name="'+this.errorList[0].FieldName+'"]').focus(),this._renderGeneralError())},_renderGeneralError:function(){var a;this.generalErrorMessage&&(a=this.generalErrorMessage);if(this.generalErrorContainer){var b=$.grep(this.errorList,function(a){return!a.FieldName});b.length>0&&(a=$.map(b,function(a){return a.Message}).join(" "))}a&&this.workingSpace.find(this.generalErrorContainer).show().text(a)},clearErrors:function(){this._removeErrorClass("input"),this._removeErrorClass("textarea"),this._removeErrorClass("select"),this.reset(),this.generalErrorContainer&&this.workingSpace.find(this.generalErrorContainer).hide().text("")},setOnFocusEvent:function(){this._setOnFocusForControl("input"),this._setOnFocusForControl("textarea"),this._setOnFocusForControl("select")},_setOnFocusForControl:function(a){this.workingSpace.find(a).focus(function(){$(this).removeClass("error")})},_removeErrorClass:function(a){this.workingSpace.find(a).removeClass("error")}},a})