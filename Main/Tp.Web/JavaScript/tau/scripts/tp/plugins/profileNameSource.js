define(["tp/bus","libs/jquery/jquery","tp/Mashups"],function(a){function b(a){this._create(a)}b.prototype={_create:function(b){this.bus=a,this.bus.subscribe("ProfileNameSource",{onProfileSaveSucceed:$.proxy(function(a){this.setProfileName(a.Name)},this)},!0)},getPluginName:function(){return(new Tp.URL(location.href)).getArgumentValue("PluginName")},getProfileNameKey:function(){return"ProfileName"},getProfileName:function(){var a=new Tp.URL(location.href),b=a.getArgumentValue(this.getProfileNameKey());if(!b){var c=a.getReference();c&&(b=c.substr(1))}return b},setProfileName:function(a){this.getProfileName()||(window.location=window.location+"#"+a)}};return new b})