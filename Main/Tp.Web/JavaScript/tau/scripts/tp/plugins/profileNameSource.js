define(["tp/bus","app.path","jQuery","tp/mashups"],function(e,t){function n(e){this._create(e)}return n.prototype={_create:function(){this.bus=e,this.bus.subscribe("ProfileNameSource",{onProfileSaveSucceed:$.proxy(function(e){this.setProfileName(e.Name)},this)},!0)},getPluginName:function(){return new t.tp.URL(location.href).getArgumentValue("PluginName")},getProfileNameKey:function(){return"ProfileName"},getProfileName:function(){var e=new t.tp.URL(location.href),n=e.getArgumentValue(this.getProfileNameKey());if(!n){var i=e.getReference();i&&(n=i.substr(1))}return n},setProfileName:function(e){this.getProfileName()||(window.location=window.location+"#"+e)}},new n});