define(["jQuery","tp/jquery.utils"],function(){function globalAnimation(){}return $.widget("ui.error",{messageTemplate:'<span class="error">${message}</span>',_create:function(){this.element.focus($.proxy(this.clear,this)),this.element.addClass("ui-error"),this.element.addClass("error"),this.errorSpan=$.tmpl(this.messageTemplate,this.options),this.element.prev("p").append(this.errorSpan)},clear:function(){this.errorSpan.remove(),this.element.removeClass("error"),this.element.removeClass("ui-error"),this.destroy()}}),$.widget("ui.synchronizeUser",{_create:function(){this._synchronizeId(),this._synchronizeName(),this.element.blur($.proxy(this._synchronizeId,this))},userId:function(value){return value&&this.element.attr("userId",value),this.element.attr("userId")},userName:function(value){return value&&this.element.val(value),this.element.val()},_synchronizeName:function(){var userId=this.userId();if(userId==null||userId==-1)return;var user=$.grep(this.options.source,function(u){return u.Id==userId});user.length>0?this.userName(user[0].Name):this._userDeleted()},_userDeleted:function(){this.element.enabled(!1),this.element.parents(".users-block").find(".svnuser").enabled(!1)},_synchronizeId:function(){var context=this,user=$.grep(this.options.source,function(u){return u.Name==context.userName()});user.length>0&&this.userId(user[0].Id)}}),$.widget("ui.tpUserInput",{_create:function(){this.element.trigger("mappingadded"),this.element.change(function(){$(this).attr("userId",-1)}),this.element.bind("validate",function(){if($(this).val()=="")return;if($(this).attr("userId")!=null&&$(this).attr("userId")!=-1)return;$(this).error({message:""})})},validate:function(){this.element.trigger("validate")}}),$.widget("ui.success",{_create:function(){this.successElement=$('<p class="message-ok"><span>Connection was established successfully</span></p>'),this.element.before(this.successElement)},clear:function(){this.successElement.remove(),this.destroy()}}),$.widget("ui.editorAnimation",{animation:{appendTo:function(element,container){element.hide(),element.appendTo(container),element.show("blind",{direction:"vertical"},500)},remove:function(element){element.hide("blind",{direction:"vertical"},500),element.remove()}},noAnimation:{appendTo:function(element,container){element.appendTo(container)},remove:function(element){element.remove()}},_create:function(){},_getStrategy:function(){return globalAnimation.prototype.turnedOn?this.animation:this.noAnimation},appendTo:function(container){this._getStrategy().appendTo(this.element,container)},remove:function(){this._getStrategy().remove(this.element)}}),globalAnimation.prototype={turnedOn:!1},globalAnimation})