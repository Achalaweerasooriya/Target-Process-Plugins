define(["jQuery","tp/plugins/profileNameSource","app.path"],function($,profileNameSource,appPath){function profileRepository(){this._create()}return profileRepository.prototype={_getGetActivityLogUrlBase:"/api/v1/Plugins.asmx/{PluginName}/Profiles/{ProfileName}/Commands/GetActivityLog",_getClearActivityLogUrlBase:"/api/v1/Plugins.asmx/{PluginName}/Profiles/{ProfileName}/Commands/ClearActivityLog",_pluginName:null,_create:function(){this._pluginName=profileNameSource.getPluginName()},_getGetActivityLogUrl:function(profileName){return this._getUrl(this._getGetActivityLogUrlBase,profileName)},_getClearActivityLogUrl:function(profileName){return this._getUrl(this._getClearActivityLogUrlBase,profileName)},_getUrl:function(url,profileName){var relativeUrl=url.replace(/{PluginName}/g,this._pluginName).replace(/{ProfileName}/g,profileName);return(new appPath.tp.WebServiceURL(relativeUrl)).url},_post:function(url,profileName,data,success,error){$.ajax({url:url,data:JSON.stringify(data),success:success,error:error,type:"POST",dataType:"json"})},getActivityLog:function(profileName,data,success,error){this._post(this._getGetActivityLogUrl(profileName),profileName,data,success,error)},clearActivityLog:function(profileName,data,success,error){this._post(this._getClearActivityLogUrl(profileName),profileName,data,success,error)}},profileRepository})