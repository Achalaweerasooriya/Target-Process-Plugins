define(["libs/jquery/jquery","tp/plugins/profileNameSource","tp/gateway"],function(a,b,c){function d(a){this._create(a)}d.prototype={_requestUrlBase:"/api/v1/Plugins.asmx/{PluginName}/Commands/{CommandName}",_pluginName:null,_create:function(a){this.profileNameSource=b,this.gateway=c,a&&a.pluginName?this._pluginName=a.pluginName:this._pluginName=this.profileNameSource.getPluginName()},_getUrl:function(a){var b=this._requestUrlBase.replace(/{PluginName}/g,this._pluginName).replace(/{CommandName}/g,a);return(new Tp.WebServiceURL(b)).url},execute:function(a,b,c,d,e){this.gateway.postJSON(this._getUrl(a),b,function(a){c&&c(a)},function(a){d&&d(a.responseText)},function(a){e&&e(a.responseText)})}};return d})