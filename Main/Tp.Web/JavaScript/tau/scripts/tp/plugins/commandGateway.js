define(["jQuery","tp/plugins/profileNameSource","tp/gateway","app.path"],function(e,i,t,r){function a(e){this._create(e)}return a.prototype={_requestUrlBase:"/api/v1/Plugins.asmx/{PluginName}/Commands/{CommandName}",_requestForProfileUrlBase:"/api/v1/Plugins.asmx/{PluginName}/Profiles/{ProfileName}/Commands/{CommandName}",_pluginName:null,_create:function(e){this.profileNameSource=i,this.gateway=t,this._pluginName=e&&e.pluginName?e.pluginName:this.profileNameSource.getPluginName()},_getUrl:function(e){var i=this._requestUrlBase.replace(/{PluginName}/g,this._pluginName).replace(/{CommandName}/g,e);return new r.tp.WebServiceURL(i).url},_getUrlForProfile:function(e,i){var t=this._requestForProfileUrlBase.replace(/{PluginName}/g,this._pluginName).replace(/{ProfileName}/g,i||this.profileNameSource.getProfileName()).replace(/{CommandName}/g,e);return new r.tp.WebServiceURL(t).url},_post:function(e,i,t,r,a){this.gateway.postJSON(e,i,function(e){t&&t(e)},function(e){r&&r(e.responseText)},function(e){a&&a(e.responseText)})},execute:function(e,i,t,r,a){this._post(this._getUrl(e),i,t,r,a)},executeForProfile:function(e,i,t,r,a){this._post(this._getUrlForProfile(e),i,t,r,a)},executeForSpecificProfile:function(e,i,t,r,a,n){this._post(this._getUrlForProfile(i,e),t,r,a,n)}},a});