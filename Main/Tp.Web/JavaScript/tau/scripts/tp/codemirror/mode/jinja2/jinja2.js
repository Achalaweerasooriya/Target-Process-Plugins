define(["tp/codemirror/lib/codemirror"],function(e){e.defineMode("jinja2",function(){function e(e,t){var o=e.next();return"{"==o&&(o=e.eat(/\{|%|#/))?(e.eat("-"),t.tokenize=n(o),"tag"):void 0}function n(n){return"{"==n&&(n="}"),function(o,r){var i=o.next();return(i==n||"-"==i&&o.eat(n))&&o.eat("}")?(r.tokenize=e,"tag"):o.match(t)?"keyword":"#"==n?"comment":"string"}}var t=["block","endblock","for","endfor","in","true","false","loop","none","self","super","if","as","not","and","else","import","with","without","context"];return t=new RegExp("^(("+t.join(")|(")+"))\\b"),{startState:function(){return{tokenize:e}},token:function(e,n){return n.tokenize(e,n)}}})});