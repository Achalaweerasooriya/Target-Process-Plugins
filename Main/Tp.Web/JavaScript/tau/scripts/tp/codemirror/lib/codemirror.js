define([],function(){var t=function(){function t(i,a){function m(t){return G&&(K&&229==t||window.opera&&197==t)||V&&K}function x(t){return t>=0&&t<Jn.size}function C(t){return f(Jn,t)}function S(t,e){oi=!0;for(var n=e-t.height,i=t;i;i=i.parent)i.height+=n}function H(t){var e={line:0,ch:0};oe(e,{line:Jn.size-1,ch:C(Jn.size-1).text.length},q(t),e,e),ti=!0}function I(){var t=[];return Jn.iter(0,Jn.size,function(e){t.push(e.text)}),t.join("\n")}function Y(t){function e(t){var n=cn(t,!0);if(n&&!z(n,l)){Un||ie(),l=n,Ae(i,n),ti=!1;var r=we();(n.line>=r.to||n.line<r.from)&&(o=setTimeout(wn(function(){e(t)}),150))}}for(var n=M(t);n!=An;n=n.parentNode)if(n.parentNode==Wn&&n!=Hn)return;for(var n=M(t);n!=An;n=n.parentNode)if(n.parentNode==Bn)return Sn.onGutterClick&&Sn.onGutterClick(Mi,W(Bn.childNodes,n)+ui,t),g(t);var i=cn(t);switch(b(t)){case 3:return void(K&&!V&&dn(t));case 2:return void(i&&Le(i.line,i.ch,!0))}if(!i)return void(M(t)==Ln&&g(t));Un||ie();var r=+new Date;if($n&&$n.time>r-400&&z($n.pos,i))return g(t),setTimeout(ye,20),Re(i.line);if(Zn&&Zn.time>r-400&&z(Zn.pos,i))return $n={time:r,pos:i},g(t),Ke(i);Zn={time:r,pos:i};var o,l=i;if(D&&!z(hi.from,hi.to)&&!A(i,hi.from)&&!A(hi.to,i)){F&&(Dn.draggable=!0);var a=k(zn,"mouseup",wn(function(e){F&&(Dn.draggable=!1),_n=!1,a(),Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)<10&&(g(e),Le(i.line,i.ch,!0),ye())}),!0);return void(_n=!0)}g(t),Le(i.line,i.ch,!0);var s=k(zn,"mousemove",wn(function(t){clearTimeout(o),g(t),e(t)}),!0),a=k(zn,"mouseup",wn(function(t){clearTimeout(o);var e=cn(t);e&&Ae(i,e),g(t),ye(),ti=!0,s(),a()}),!0)}function J(t){for(var e=M(t);e!=An;e=e.parentNode)if(e.parentNode==Bn)return g(t);var n=cn(t);n&&($n={time:+new Date,pos:n},g(t),Ke(n))}function $(t){function e(t,e){var i=new FileReader;i.onload=function(){o[e]=i.result,++l==r&&(n=He(n),wn(function(){var t=fe(o.join(""),n,n);Ae(n,t)})())},i.readAsText(t)}t.preventDefault();var n=cn(t,!0),i=t.dataTransfer.files;if(n&&!Sn.readOnly)if(i&&i.length&&window.FileReader&&window.File)for(var r=i.length,o=Array(r),l=0,a=0;r>a;++a)e(i[a],a);else try{var o=t.dataTransfer.getData("Text");if(o){var s=fe(o,n,n),h=hi.from,f=hi.to;Ae(n,s),_n&&fe("",h,f),ye()}}catch(t){}}function _(t){var e=pe();O(e),t.dataTransfer.setDragImage(X,0,0),t.dataTransfer.setData("Text",e)}function te(t){Un||ie();var e=t.keyCode;R&&27==e&&(t.returnValue=!1);var n=(V?t.metaKey:t.ctrlKey)&&!t.altKey,i=t.ctrlKey||t.altKey||t.metaKey;if(qn=16==e||t.shiftKey?qn||(hi.inverted?hi.to:hi.from):null,!Sn.onKeyEvent||!Sn.onKeyEvent(Mi,v(t))){if(33==e||34==e)return Ie(34==e),g(t);if(n&&(36==e||35==e||V&&(38==e||40==e)))return Be(36==e||38==e),g(t);if(n&&65==e)return De(),g(t);if(!Sn.readOnly){if(!i&&13==e)return;if(!i&&9==e&&Pe(t.shiftKey))return g(t);if(n&&90==e)return ae(),g(t);if(n&&(t.shiftKey&&90==e||89==e))return se(),g(t)}if(36==e&&Sn.smartHome)return je(),g(t);if(pi=(n?"c":"")+(t.altKey?"a":"")+e,hi.inverted&&U[pi]===!0){var r=Q(On);r&&(Qn={anchor:r.start},Z(On,r.start,r.start))}n||t.altKey||(pi=null),ve(pi),Sn.pollForIME&&m(e)&&(gi=50)}}function ee(t){Sn.onKeyEvent&&Sn.onKeyEvent(Mi,v(t))||(Qn&&(Qn=null,ti=!0),16==t.keyCode&&(qn=null),2e3>gi&&!xi&&(gi=2e3))}function ne(t){if(!Sn.onKeyEvent||!Sn.onKeyEvent(Mi,v(t))){if(Sn.electricChars&&Vn.electricChars){var e=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode);Vn.electricChars.indexOf(e)>-1&&setTimeout(wn(function(){Ve(hi.to.line,"smart")}),50)}var n=t.keyCode;13==n?(Sn.readOnly||Fe(),g(t)):t.ctrlKey||t.altKey||t.metaKey||9!=n||"default"==Sn.tabMode?ve(pi):g(t)}}function ie(){"nocursor"!=Sn.readOnly&&(Un||(Sn.onFocus&&Sn.onFocus(Mi),Un=!0,-1==An.className.search(/\bCodeMirror-focused\b/)&&(An.className+=" CodeMirror-focused"),ri||xe()),me(),pn())}function re(){Un&&(Sn.onBlur&&Sn.onBlur(Mi),Un=!1,An.className=An.className.replace(" CodeMirror-focused","")),clearInterval(jn),setTimeout(function(){Un||(qn=null)},150)}function oe(t,e,n,i,r){if(vi){var o=[];for(Jn.iter(t.line,e.line+1,function(t){o.push(t.text)}),vi.addChange(t.line,n.length,o);vi.done.length>Sn.undoDepth;)vi.done.shift()}he(t,e,n,i,r)}function le(t,e){var n=t.pop();if(n){var i=[],r=n.start+n.added;Jn.iter(n.start,r,function(t){i.push(t.text)}),e.push({start:n.start,added:n.old.length,old:i});var o=He({line:n.start+n.old.length-1,ch:L(i[i.length-1],n.old[n.old.length-1])});he({line:n.start,ch:0},{line:r-1,ch:C(r-1).text.length},n.old,o,o),ti=!0}}function ae(){le(vi.done,vi.undone)}function se(){le(vi.undone,vi.done)}function he(t,e,n,i,r){function o(t){return t<=Math.min(e.line,e.line+g)?t:t+g}var a=!1,s=mi.length;Sn.lineWrapping||Jn.iter(t.line,e.line,function(t){return t.text.length==s?(a=!0,!0):void 0});var h=e.line-t.line,f=C(t.line),u=C(e.line);if(f==u)if(1==n.length)f.replace(t.ch,e.ch,n[0]);else{u=f.split(e.ch,n[n.length-1]),f.replace(t.ch,null,n[0]),f.fixMarkEnds(u);for(var c=[],d=1,p=n.length-1;p>d;++d)c.push(l.inheritMarks(n[d],f));c.push(u),Jn.insert(t.line+1,c)}else if(1==n.length)f.replace(t.ch,null,n[0]),u.replace(null,e.ch,""),f.append(u),Jn.remove(t.line+1,h);else{var c=[];f.replace(t.ch,null,n[0]),u.replace(null,e.ch,n[n.length-1]),f.fixMarkEnds(u);for(var d=1,p=n.length-1;p>d;++d)c.push(l.inheritMarks(n[d],f));h>1&&Jn.remove(t.line+1,h-1),Jn.insert(t.line+1,c)}if(Sn.lineWrapping){var m=Ln.clientWidth/hn()-3;Jn.iter(t.line,t.line+n.length,function(t){if(!t.hidden){var e=Math.ceil(t.text.length/m)||1;e!=t.height&&S(t,e)}})}else Jn.iter(t.line,d+n.length,function(t){var e=t.text;e.length>s&&(mi=e,s=e.length,si=null,a=!1)}),a&&(s=0,mi="",si=null,Jn.iter(0,Jn.size,function(t){var e=t.text;e.length>s&&(s=e.length,mi=e)}));for(var v=[],g=n.length-h-1,d=0,x=Gn.length;x>d;++d){var y=Gn[d];y<t.line?v.push(y):y>e.line&&v.push(y+g)}var M=t.line+Math.min(n.length,500);xn(t.line,M),v.push(M),Gn=v,Mn(100),ei.push({from:t.line,to:e.line+1,diff:g}),ni={from:t,to:e,text:n},Ne(i,r,o(hi.from.line),o(hi.to.line)),Wn.style.height=Jn.height*sn()+2*fn()+"px"}function fe(t,e,n){function i(i){if(A(i,e))return i;if(!A(n,i))return r;var o=i.line+t.length-(n.line-e.line)-1,l=i.ch;return i.line==n.line&&(l+=t[t.length-1].length-(n.ch-(n.line==e.line?e.ch:0))),{line:o,ch:l}}e=He(e),n=n?He(n):e,t=q(t);var r;return ce(t,e,n,function(t){return r=t,{from:i(hi.from),to:i(hi.to)}}),r}function ue(t,e){ce(q(t),hi.from,hi.to,function(t){return"end"==e?{from:t,to:t}:"start"==e?{from:hi.from,to:hi.from}:{from:hi.from,to:t}})}function ce(t,e,n,i){var r=1==t.length?t[0].length+e.ch:t[t.length-1].length,o=i({line:e.line+t.length-1,ch:r});oe(e,n,t,o.from,o.to)}function de(t,e){var n=t.line,i=e.line;if(n==i)return C(n).text.slice(t.ch,e.ch);var r=[C(n).text.slice(t.ch)];return Jn.iter(n+1,i,function(t){r.push(t.text)}),r.push(C(i).text.slice(0,e.ch)),r.join("\n")}function pe(){return de(hi.from,hi.to)}function me(){bi||Yn.set(gi,function(){bn(),ge(),Un&&me(),kn()})}function ve(t){function e(){bn();var i=ge();i&&t&&("moved"==i&&null==U[t]&&(U[t]=!0),"changed"==i&&(U[t]=!1)),i||n?(bi=!1,me()):(n=!0,Yn.set(80,e)),kn()}var n=!1;bi=!0,Yn.set(20,e)}function ge(){function t(t,e){for(var i=0;;){var r=n.indexOf("\n",i);if(-1==r||("\r"==n.charAt(r-1)?r-1:r)>=t)return{line:e,ch:t-i};++e,i=r+1}}if(!ri&&Un){var e=!1,n=On.value,i=Q(On);if(!i)return!1;var e=li.text!=n,r=Qn,o=e||i.start!=li.start||i.end!=(r?li.start:li.end);if(!o&&!r)return!1;if(e&&(qn=Qn=null,Sn.readOnly))return ti=!0,"changed";var l=t(i.start,li.from),a=t(i.end,li.from);if(r){var s=i.start==r.anchor?a:l,h=qn?hi.to:i.start==r.anchor?l:a;(hi.inverted=A(s,h))?(l=s,a=h):(Qn=null,l=h,a=s)}if(l.line!=a.line||l.line!=hi.from.line||l.line!=hi.to.line||qn||(ti=!1),e){for(var f,u=0,c=n.length,d=Math.min(c,li.text.length),p=li.from,m=-1;d>u&&(f=n.charAt(u))==li.text.charAt(u);)++u,"\n"==f&&(p++,m=u);for(var v=m>-1?u-m:u,g=li.to-1,x=li.text.length;;){if(f=li.text.charAt(x),n.charAt(c)!=f){++c,++x;break}if("\n"==f&&g--,u>=x||u>=c)break;--c,--x}var m=li.text.lastIndexOf("\n",x-1),y=-1==m?x:x-m-1;oe({line:p,ch:v},{line:g,ch:y},q(n.slice(u,c)),l,a),(p!=g||l.line!=p)&&(ti=!0)}else Ne(l,a);return li.text=n,li.start=i.start,li.end=i.end,e?"changed":o?"moved":!1}}function xe(){var t=[],e=Math.max(0,hi.from.line-1),n=Math.min(Jn.size,hi.to.line+2);Jn.iter(e,n,function(e){t.push(e.text)}),t=On.value=t.join(P);var i=hi.from.ch,r=hi.to.ch;Jn.iter(e,hi.from.line,function(t){i+=P.length+t.text.length}),Jn.iter(e,hi.to.line,function(t){r+=P.length+t.text.length}),li={text:t,from:e,to:n,start:i,end:r},Z(On,i,Qn?i:r)}function ye(){"nocursor"!=Sn.readOnly&&On.focus()}function Me(){if(Rn.getBoundingClientRect){var t=Rn.getBoundingClientRect(),e=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(t.top<0||t.bottom>e)&&Rn.scrollIntoView()}}function be(){var t=on(hi.inverted?hi.from:hi.to),e=Sn.lineWrapping?Math.min(t.x,Dn.offsetWidth):t.x;return ke(e,t.y,e,t.yBot)}function ke(t,e,n,i){var r=un(),o=fn(),l=sn();e+=o,i+=o,t+=r,n+=r;var a=Ln.clientHeight,s=Ln.scrollTop,h=!1,f=!0;s>e?(Ln.scrollTop=Math.max(0,e-2*l),h=!0):i>s+a&&(Ln.scrollTop=i+l-a,h=!0);var u=Ln.clientWidth,c=Ln.scrollLeft,d=Sn.fixedGutter?In.clientWidth:0;return c+d>t?(50>t&&(t=0),Ln.scrollLeft=Math.max(0,t-10-d),h=!0):n>u+c&&(Ln.scrollLeft=n+10-u,h=!0,n>Wn.clientWidth&&(f=!1)),h&&Sn.onScroll&&Sn.onScroll(Mi),f}function we(){var t=sn(),e=Ln.scrollTop-fn(),n=Math.max(0,Math.floor(e/t)),i=Math.ceil((e+Ln.clientHeight)/t);return{from:c(Jn,n),to:c(Jn,i)}}function Ce(t){if(!Ln.clientWidth)return void(ui=ci=fi=0);var e=we();if(!(t!==!0&&0==t.length&&e.from>=ui&&e.to<=ci)){var n=Math.max(e.from-100,0),i=Math.min(Jn.size,e.to+100);n>ui&&20>n-ui&&(n=ui),ci>i&&20>ci-i&&(i=Math.min(Jn.size,ci));for(var r=t===!0?[]:Se([{from:ui,to:ci,domStart:0}],t),o=0,l=0;l<r.length;++l){var a=r[l];a.from<n&&(a.domStart+=n-a.from,a.from=n),a.to>i&&(a.to=i),a.from>=a.to?r.splice(l--,1):o+=a.to-a.from}if(o!=i-n){r.sort(function(t,e){return t.domStart-e.domStart});var s=sn(),h=In.style.display;Fn.style.display=In.style.display="none",Te(n,i,r),Fn.style.display="";var f=n!=ui||i!=ci||di!=Ln.clientHeight;if(f&&(di=Ln.clientHeight),ui=n,ci=i,fi=d(Jn,n),Hn.style.top=fi*s+"px",Wn.style.height=Jn.height*s+2*fn()+"px",Fn.childNodes.length!=ci-ui)throw new Error("BAD PATCH! "+JSON.stringify(r)+" size="+(ci-ui)+" nodes="+Fn.childNodes.length);if(Sn.lineWrapping){si=Ln.clientWidth;var u=Fn.firstChild;Jn.iter(ui,ci,function(t){if(!t.hidden){var e=Math.round(u.offsetHeight/s)||1;t.height!=e&&(S(t,e),oi=!0)}u=u.nextSibling})}else null==si&&(si=nn(mi)),si>Ln.clientWidth?(Dn.style.width=si+"px",Wn.style.width="",Wn.style.width=Ln.scrollWidth+"px"):Dn.style.width=Wn.style.width="";In.style.display=h,(f||oi)&&Ee(),ze()}}}function Se(t,e){for(var n=0,i=e.length||0;i>n;++n){for(var r=e[n],o=[],l=r.diff||0,a=0,s=t.length;s>a;++a){var h=t[a];r.to<=h.from&&r.diff?o.push({from:h.from+l,to:h.to+l,domStart:h.domStart}):r.to<=h.from||r.from>=h.to?o.push(h):(r.from>h.from&&o.push({from:h.from,to:r.from,domStart:h.domStart}),r.to<h.to&&o.push({from:r.to+l,to:h.to+l,domStart:h.domStart+(r.to-h.from)}))}t=o}return t}function Te(t,e,n){function i(t){var e=t.nextSibling;return t.parentNode.removeChild(t),e}if(n.length){for(var r=0,o=Fn.firstChild,l=0;l<n.length;++l){for(var a=n[l];a.domStart>r;)o=i(o),r++;for(var s=0,h=a.to-a.from;h>s;++s)o=o.nextSibling,r++}for(;o;)o=i(o)}else Fn.innerHTML="";var f=n.shift(),o=Fn.firstChild,s=t,u=hi.from.line,c=hi.to.line,d=t>u&&c>=t,p=zn.createElement("div");Jn.iter(t,e,function(t){var e=null,i=null;d?(e=0,c==s&&(d=!1,i=hi.to.ch)):u==s&&(c==s?(e=hi.from.ch,i=hi.to.ch):(d=!0,e=hi.from.ch)),f&&f.to==s&&(f=n.shift()),!f||f.from>s?(p.innerHTML=t.hidden?"<pre></pre>":t.getHTML(e,i,!0),Fn.insertBefore(p.firstChild,o)):o=o.nextSibling,++s})}function Ee(){if(Sn.gutter||Sn.lineNumbers){var t=Hn.offsetHeight,e=Ln.clientHeight;In.style.height=(2>t-e?e:t)+"px";var n=[],i=ui;Jn.iter(ui,Math.max(ci,ui+1),function(t){if(t.hidden)n.push("<pre></pre>");else{var e=t.gutterMarker,r=Sn.lineNumbers?i+Sn.firstLineNumber:null;e&&e.text?r=e.text.replace("%N%",null!=r?r:""):null==r&&(r=" "),n.push(e&&e.style?'<pre class="'+e.style+'">':"<pre>",r);for(var o=1;o<t.height;++o)n.push("<br>&nbsp;");n.push("</pre>")}++i}),In.style.display="none",Bn.innerHTML=n.join("");for(var r=String(Jn.size).length,o=Bn.firstChild,l=E(o),a="";l.length+a.length<r;)a+=" ";a&&o.insertBefore(zn.createTextNode(a),o.firstChild),In.style.display="",Dn.style.marginLeft=In.offsetWidth+"px",oi=!1}}function ze(){var t=hi.inverted?hi.from:hi.to,e=(sn(),on(t,!0)),n=e.y+fi*sn();Nn.style.top=Math.max(Math.min(n,Ln.offsetHeight),0)+"px",Nn.style.left=e.x-Ln.scrollLeft+"px",z(hi.from,hi.to)?(Rn.style.top=e.y+"px",Rn.style.left=(Sn.lineWrapping?Math.min(e.x,Dn.offsetWidth):e.x)+"px",Rn.style.display=""):Rn.style.display="none"}function Ae(t,e){var n=qn&&He(qn);n&&(A(n,t)?t=n:A(e,n)&&(e=n)),Ne(t,e)}function Ne(t,e,n,i){if(null==n&&(n=hi.from.line,i=hi.to.line),!z(hi.from,t)||!z(hi.to,e)){if(A(e,t)){var r=e;e=t,t=r}t.line!=n&&(t=Oe(t,n,hi.from.ch)),e.line!=i&&(e=Oe(e,i,hi.to.ch)),z(t,e)?hi.inverted=!1:z(t,hi.to)?hi.inverted=!1:z(e,hi.from)&&(hi.inverted=!0),z(t,e)?z(hi.from,hi.to)||ei.push({from:n,to:i+1}):z(hi.from,hi.to)?ei.push({from:t.line,to:e.line+1}):(z(t,hi.from)||ei.push(t.line<n?{from:t.line,to:Math.min(e.line,n)+1}:{from:n,to:Math.min(i,t.line)+1}),z(e,hi.to)||ei.push(e.line<i?{from:Math.max(n,t.line),to:i+1}:{from:Math.max(t.line,i),to:e.line+1})),hi.from=t,hi.to=e,ii=!0}}function Oe(t,e,n){function i(e){for(var i=t.line+e,r=1==e?Jn.size:-1;i!=r;){var o=C(i);if(!o.hidden){var l=t.ch;return(l>n||l>o.text.length)&&(l=o.text.length),{line:i,ch:l}}i+=e}}var r=C(t.line);return r.hidden?t.line>=e?i(1)||i(-1):i(-1)||i(1):t}function Le(t,e,n){var i=He({line:t,ch:e||0});(n?Ae:Ne)(i,i)}function We(t){return Math.max(0,Math.min(t,Jn.size-1))}function He(t){if(t.line<0)return{line:0,ch:0};if(t.line>=Jn.size)return{line:Jn.size-1,ch:C(Jn.size-1).text.length};var e=t.ch,n=C(t.line).text.length;return null==e||e>n?{line:t.line,ch:n}:0>e?{line:t.line,ch:0}:t}function Ie(t){var e=Math.floor(Ln.clientHeight/sn()),n=hi.inverted?hi.from:hi.to,i=d(Jn,n.line)+Math.max(e-1,1)*(t?1:-1);Le(c(Jn,i),n.ch,!0)}function Be(t){var e=t?{line:0,ch:0}:{line:Jn.size-1,ch:C(Jn.size-1).text.length};Ae(e,e)}function De(){var t=Jn.size-1;Ne({line:0,ch:0},{line:t,ch:C(t).text.length})}function Ke(t){for(var e=C(t.line).text,n=t.ch,i=t.ch;n>0&&/\w/.test(e.charAt(n-1));)--n;for(;i<e.length&&/\w/.test(e.charAt(i));)++i;Ae({line:t.line,ch:n},{line:t.line,ch:i})}function Re(t){Ae({line:t,ch:0},{line:t,ch:C(t).text.length})}function Fe(){ue("\n","end"),"flat"!=Sn.enterMode&&Ve(hi.from.line,"keep"==Sn.enterMode?"prev":"smart")}function Pe(t){function e(t){if(z(hi.from,hi.to))return Ve(hi.from.line,t);for(var e=hi.to.line-(hi.to.ch?0:1),n=hi.from.line;e>=n;++n)Ve(n,t)}switch(qn=null,Sn.tabMode){case"default":return!1;case"indent":e("smart");break;case"classic":if(z(hi.from,hi.to)){t?Ve(hi.from.line,"smart"):ue("	","end");break}case"shift":e(t?"subtract":"add")}return!0}function je(){var t=Math.max(0,C(hi.from.line).text.search(/\S/));Le(hi.from.line,hi.from.ch<=t&&hi.from.ch?0:t,!0)}function Ve(t,e){if("smart"==e)if(Vn.indent)var n=gn(t);else e="prev";var i,r=C(t),o=r.indentation(),l=r.text.match(/^\s*/)[0];"prev"==e?i=t?C(t-1).indentation():0:"smart"==e?i=Vn.indent(n,r.text.slice(l.length)):"add"==e?i=o+Sn.indentUnit:"subtract"==e&&(i=o-Sn.indentUnit),i=Math.max(0,i);var a=i-o;if(a){var s="",h=0;if(Sn.indentWithTabs)for(var f=Math.floor(i/j);f;--f)h+=j,s+="	";for(;i>h;)++h,s+=" "}else{if(hi.from.line!=t&&hi.to.line!=t)return;var s=l}fe(s,{line:t,ch:0},{line:t,ch:l.length})}function Ge(){Vn=t.getMode(Sn,Sn.mode),Jn.iter(0,Jn.size,function(t){t.stateAfter=null}),Gn=[0],Mn()}function Ue(){var t=Sn.gutter||Sn.lineNumbers;In.style.display=t?"":"none",t?oi=!0:Fn.parentNode.style.marginLeft=0}function Ye(){if(Sn.lineWrapping){An.className+=" CodeMirror-wrap";var t=Ln.clientWidth/hn()-3;Jn.iter(0,Jn.size,function(e){if(!e.hidden){var n=Math.ceil(e.text.length/t)||1;1!=n&&S(e,n)}}),Dn.style.width=Wn.style.width=""}else An.className=An.className.replace(" CodeMirror-wrap",""),si=null,mi="",Jn.iter(0,Jn.size,function(t){1==t.height||t.hidden||S(t,1),t.text.length>mi.length&&(mi=t.text)});ei.push({from:0,to:Jn.size})}function Xe(){this.set=[]}function Je(t,e,n){function i(t,e,n,i){mark=C(t).addMark(new r(e,n,i,o.set))}t=He(t),e=He(e);var o=new Xe;if(t.line==e.line)i(t.line,t.ch,e.ch,n);else{i(t.line,t.ch,null,n);for(var l=t.line+1,a=e.line;a>l;++l)i(l,null,null,n);i(e.line,null,e.ch,n)}return ei.push({from:t.line,to:e.line+1}),o}function qe(t){t=He(t);var e=new o(t.ch);return C(t.line).addMark(e),e}function Qe(t,e,n){return"number"==typeof t&&(t=C(We(t))),t.gutterMarker={text:e,style:n},oi=!0,t}function Ze(t){"number"==typeof t&&(t=C(We(t))),t.gutterMarker=null,oi=!0}function $e(t,e){var n=t,i=t;return"number"==typeof t?i=C(We(t)):n=u(t),null==n?null:(e(i,n)&&ei.push({from:n,to:n+1}),i)}function _e(t,e){return $e(t,function(t){return t.className!=e?(t.className=e,!0):void 0})}function tn(t,e){return $e(t,function(t,n){return t.hidden!=e?(t.hidden=e,S(t,e?0:1),!e||hi.from.line!=n&&hi.to.line!=n||Ne(Oe(hi.from,hi.from.line,hi.from.ch),Oe(hi.to,hi.to.line,hi.to.ch)),oi=!0):void 0})}function en(t){if("number"==typeof t){if(!x(t))return null;var e=t;if(t=C(t),!t)return null}else{var e=u(t);if(null==e)return null}var n=t.gutterMarker;return{line:e,handle:t,text:t.text,markerText:n&&n.text,markerClass:n&&n.style,lineClass:t.className}}function nn(t){return Kn.innerHTML="<pre><span>x</span></pre>",Kn.firstChild.firstChild.firstChild.nodeValue=t,Kn.firstChild.firstChild.offsetWidth||10}function rn(t,e){var n="";if(Sn.lineWrapping){var i=t.text.indexOf(" ",e+2);n=t.text.slice(e+1,0>i?t.text.length:i+(R?5:0))}Kn.innerHTML="<pre>"+t.getHTML(null,null,!1,e)+'<span id="CodeMirror-temp-'+Si+'">'+(t.text.charAt(e)||" ")+"</span>"+n+"</pre>";var r=document.getElementById("CodeMirror-temp-"+Si),o=r.offsetTop,l=r.offsetLeft;if(R&&e&&0==o&&0==l){var a=document.createElement("span");a.innerHTML="x",r.parentNode.insertBefore(a,r.nextSibling),o=a.offsetTop}return{top:o,left:l}}function on(t,e){var n,i=sn(),r=i*(d(Jn,t.line)-(e?fi:0));if(0==t.ch)n=0;else{var o=rn(C(t.line),t.ch);n=o.left,Sn.lineWrapping&&(r+=Math.max(0,o.top))}return{x:n,y:r,yBot:r+i}}function ln(t,e){function n(t){var e=rn(a,t);if(h){var n=Math.round(e.top/i);return Math.max(0,e.left+(n-f)*Ln.clientWidth)}return e.left}0>e&&(e=0);var i=sn(),r=hn(),o=fi+Math.floor(e/i),l=c(Jn,o);if(l>=Jn.size)return{line:Jn.size-1,ch:0};var a=C(l),s=a.text,h=Sn.lineWrapping,f=h?o-d(Jn,l):0;if(0>=t&&0==f)return{line:l,ch:0};for(var u,p=0,m=0,v=s.length,g=Math.min(v,Math.ceil((t+f*Ln.clientWidth*.9)/r));;){var x=n(g);if(!(t>=x&&v>g)){u=x,v=g;break}g=Math.min(v,Math.ceil(1.2*g))}if(t>u)return{line:l,ch:v};for(g=Math.floor(.8*v),x=n(g),t>x&&(p=g,m=x);;){if(1>=v-p)return{line:l,ch:u-t>t-m?p:v};var y=Math.ceil((p+v)/2),M=n(y);M>t?(v=y,u=M):(p=y,m=M)}}function an(t){var e=on(t,!0),n=T(Dn);return{x:n.left+e.x,y:n.top+e.y,yBot:n.top+e.yBot}}function sn(){var t=Fn.offsetHeight;return t==wi?ki:(wi=t,Kn.innerHTML="<pre>x<br>x<br>x<br>x<br>x<br>x<br>x<br>x<br>x<br>x</pre>",ki=Kn.firstChild.offsetHeight/10||1)}function hn(){return Ln.clientWidth==wi?Ci:(wi=Ln.clientWidth,Ci=nn("x"))}function fn(){return Dn.offsetTop}function un(){return Dn.offsetLeft}function cn(t,e){var n,i,r=T(Ln,!0);try{n=t.clientX,i=t.clientY}catch(t){return null}if(!e&&(n-r.left>Ln.clientWidth||i-r.top>Ln.clientHeight))return null;var o=T(Dn,!0);return ln(n-o.left,i-o.top)}function dn(t){function e(){var t=q(On.value).join("\n");t!=r&&wn(ue)(t,"end"),Nn.style.position="relative",On.style.cssText=i,ri=!1,xe(),me()}var n=cn(t);if(n&&!window.opera){(z(hi.from,hi.to)||A(n,hi.from)||!A(n,hi.to))&&wn(Le)(n.line,n.ch);var i=On.style.cssText;Nn.style.position="absolute",On.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(t.clientY-5)+"px; left: "+(t.clientX-5)+"px; z-index: 1000; background: white; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",ri=!0;var r=On.value=pe();if(ye(),Z(On,0,On.value.length),K){y(t);var o=k(window,"mouseup",function(){o(),setTimeout(e,20)},!0)}else setTimeout(e,50)}}function pn(){clearInterval(jn);var t=!0;Rn.style.visibility="",jn=setInterval(function(){Rn.style.visibility=(t=!t)?"":"hidden"},650)}function mn(t){function e(t,e,n){if(t.text)for(var i,r=t.styles,o=l?0:t.text.length-1,s=l?0:r.length-2,h=l?r.length:-2;s!=h;s+=2*a){var f=r[s];if(null==r[s+1]||r[s+1]==c){for(var u=l?0:f.length-1,m=l?f.length:-1;u!=m;u+=a,o+=a)if(o>=e&&n>o&&p.test(i=f.charAt(u))){var v=Ti[i];if(">"==v.charAt(1)==l)d.push(i);else{if(d.pop()!=v.charAt(0))return{pos:o,match:!1};if(!d.length)return{pos:o,match:!0}}}}else o+=a*f.length}}var n=hi.inverted?hi.from:hi.to,i=C(n.line),r=n.ch-1,o=r>=0&&Ti[i.text.charAt(r)]||Ti[i.text.charAt(++r)];if(o){for(var l=(o.charAt(0),">"==o.charAt(1)),a=l?1:-1,s=i.styles,h=r+1,f=0,u=s.length;u>f;f+=2)if((h-=s[f].length)<=0){var c=s[f+1];break}for(var d=[i.text.charAt(r)],p=/[(){}[\]]/,f=n.line,u=l?Math.min(f+100,Jn.size):Math.max(-1,f-100);f!=u;f+=a){var i=C(f),m=f==n.line,v=e(i,m&&l?r+1:0,m&&!l?r:i.text.length);if(v)break}v||(v={pos:null,match:!1});var c=v.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",g=Je({line:n.line,ch:r},{line:n.line,ch:r+1},c),x=null!=v.pos&&Je({line:f,ch:v.pos},{line:f,ch:v.pos+1},c),y=wn(function(){g.clear(),x&&x.clear()});t?setTimeout(y,800):ai=y}}function vn(t){for(var e,n,i=t,r=t-40;i>r;--i){if(0==i)return 0;var o=C(i-1);if(o.stateAfter)return i;var l=o.indentation();(null==n||e>l)&&(n=i-1,e=l)}return n}function gn(t){var i=vn(t),r=i&&C(i-1).stateAfter;return r=r?e(Vn,r):n(Vn),Jn.iter(i,t,function(t){t.highlight(Vn,r),t.stateAfter=e(Vn,r)}),t>i&&ei.push({from:i,to:t}),t<Jn.size&&!C(t).stateAfter&&Gn.push(t),r}function xn(t,n){var i=gn(t);Jn.iter(t,n,function(t){t.highlight(Vn,i),t.stateAfter=e(Vn,i)})}function yn(){for(var t=+new Date+Sn.workTime,i=Gn.length;Gn.length;){if(C(ui).stateAfter)var r=Gn.pop();else var r=ui;if(!(r>=Jn.size)){var o=vn(r),l=o&&C(o-1).stateAfter;l=l?e(Vn,l):n(Vn);var a=0,s=Vn.compareStates,h=!1,f=o,u=!1;if(Jn.iter(f,Jn.size,function(n){var i=n.stateAfter;if(+new Date>t)return Gn.push(f),Mn(Sn.workDelay),h&&ei.push({from:r,to:f+1}),u=!0;var o=n.highlight(Vn,l);if(o&&(h=!0),n.stateAfter=e(Vn,l),s){if(i&&s(i,l))return!0}else if(o===!1&&i){if(++a>3)return!0}else a=0;++f}),u)return;h&&ei.push({from:r,to:f+1})}}i&&Sn.onHighlightComplete&&Sn.onHighlightComplete(Mi)}function Mn(t){Gn.length&&Xn.set(t,wn(yn))}function bn(){ti=null,ei=[],ni=ii=!1}function kn(){var t=!1;ii&&(t=!be()),ei.length?Ce(ei):(ii&&ze(),oi&&Ee()),t&&be(),ii&&(Me(),pn()),Un&&!ri&&(ti===!0||ti!==!1&&ii)&&xe(),ii&&Sn.matchBrackets&&setTimeout(wn(function(){ai&&(ai(),ai=null),mn(!1)}),20);var e=ni;ii&&Sn.onCursorActivity&&Sn.onCursorActivity(Mi),e&&Sn.onChange&&Mi&&Sn.onChange(Mi,e)}function wn(t){return function(){Ei++||bn();try{var e=t.apply(this,arguments)}finally{--Ei||kn()}return e}}function Cn(t,e,n){if(this.atOccurrence=!1,null==n&&(n="string"==typeof t&&t==t.toLowerCase()),e=e&&"object"==typeof e?He(e):{line:0,ch:0},this.pos={from:e,to:e},"string"!=typeof t)this.matches=function(e,n){if(e)for(var i=C(n.line).text.slice(0,n.ch),r=i.match(t),o=0;r;){var l=i.indexOf(r[0]);o+=l,i=i.slice(l+1);var a=i.match(t);if(!a)break;r=a,o++}else var i=C(n.line).text.slice(n.ch),r=i.match(t),o=r&&n.ch+i.indexOf(r[0]);return r?{from:{line:n.line,ch:o},to:{line:n.line,ch:o+r[0].length},match:r}:void 0};else{n&&(t=t.toLowerCase());var i=n?function(t){return t.toLowerCase()}:function(t){return t},r=t.split("\n");this.matches=1==r.length?function(e,n){var r,o=i(C(n.line).text),l=t.length;return(e?n.ch>=l&&-1!=(r=o.lastIndexOf(t,n.ch-l)):-1!=(r=o.indexOf(t,n.ch)))?{from:{line:n.line,ch:r},to:{line:n.line,ch:r+l}}:void 0}:function(t,e){var n=e.line,o=t?r.length-1:0,l=r[o],a=i(C(n).text),s=t?a.indexOf(l)+l.length:a.lastIndexOf(l);if(!(t?s>=e.ch||s!=l.length:s<=e.ch||s!=a.length-l.length))for(;;){if(t?!n:n==Jn.size-1)return;if(a=i(C(n+=t?-1:1).text),l=r[t?--o:++o],!(o>0&&o<r.length-1)){var h=t?a.lastIndexOf(l):a.indexOf(l)+l.length;if(t?h!=a.length-l.length:h!=l.length)return;var f={line:e.line,ch:s},u={line:n,ch:h};return{from:t?u:f,to:t?f:u}}if(a!=l)return}}}}var Sn={},Tn=t.defaults;for(var En in Tn)Tn.hasOwnProperty(En)&&(Sn[En]=(a&&a.hasOwnProperty(En)?a:Tn)[En]);var zn=Sn.document,An=zn.createElement("div");An.className="CodeMirror"+(Sn.lineWrapping?" CodeMirror-wrap":""),An.innerHTML='<div style="overflow: hidden; position: relative; width: 1px; height: 0px;"><textarea style="position: absolute; width: 10000px;" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll cm-s-'+Sn.theme+'"><div style="position: relative"><div style="position: relative"><div class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative"><div style="position: absolute; width: 100%; height: 0; overflow: hidden; visibility: hidden"></div><pre class="CodeMirror-cursor">&#160;</pre><div></div></div></div></div></div></div>',i.appendChild?i.appendChild(An):i(An);var Nn=An.firstChild,On=Nn.firstChild,Ln=An.lastChild,Wn=Ln.firstChild,Hn=Wn.firstChild,In=Hn.firstChild,Bn=In.firstChild,Dn=In.nextSibling.firstChild,Kn=Dn.firstChild,Rn=Kn.nextSibling,Fn=Rn.nextSibling;F||(Dn.draggable=!0),null!=Sn.tabindex&&(On.tabindex=Sn.tabindex),Sn.gutter||Sn.lineNumbers||(In.style.display="none");try{nn("x")}catch(Pn){throw Pn.message.match(/unknown runtime/i)&&(Pn=new Error("A CodeMirror inside a P-style element does not work in Internet Explorer. (innerHTML bug)")),Pn}var jn,Vn,Gn,Un,Yn=new w,Xn=new w,Jn=new h([new s([new l("")])]);Ge();var qn,Qn,Zn,$n,_n,ti,ei,ni,ii,ri,oi,li,ai,si,hi={from:{line:0,ch:0},to:{line:0,ch:0},inverted:!1},fi=0,ui=0,ci=0,di=0,pi=null,mi="";wn(function(){H(Sn.value||""),ti=!1})();var vi=new p,gi=2e3,xi=!G&&!V&&(K||window.opera);Sn.pollForIME&&xi&&(gi=50),k(Ln,"mousedown",wn(Y)),k(Ln,"dblclick",wn(J)),k(Dn,"dragstart",_),k(Dn,"selectstart",g),K||k(Ln,"contextmenu",dn),k(Ln,"scroll",function(){Ce([]),Sn.fixedGutter&&(In.style.left=Ln.scrollLeft+"px"),Sn.onScroll&&Sn.onScroll(Mi)}),k(window,"resize",function(){Ce(!0)}),k(On,"keyup",wn(ee)),k(On,"input",function(){ve(pi)}),k(On,"keydown",wn(te)),k(On,"keypress",wn(ne)),k(On,"focus",ie),k(On,"blur",re),k(Ln,"dragenter",y),k(Ln,"dragover",y),k(Ln,"drop",wn($)),k(Ln,"paste",function(){ye(),ve()}),k(On,"paste",function(){ve()}),k(On,"cut",function(){ve()});var yi;try{yi=zn.activeElement==On}catch(Pn){}yi?setTimeout(ie,20):re();var Mi=An.CodeMirror={getValue:I,setValue:wn(H),getSelection:pe,replaceSelection:wn(ue),focus:function(){ye(),ie(),ve()},setOption:function(t,e){var n=Sn[t];Sn[t]=e,"mode"==t||"indentUnit"==t?Ge():"readOnly"==t&&"nocursor"==e?On.blur():"theme"==t?Ln.className=Ln.className.replace(/cm-s-\w+/,"cm-s-"+e):"lineWrapping"==t&&n!=e?wn(Ye)():"pollForIME"==t&&xi&&(gi=e?50:2e3),("lineNumbers"==t||"gutter"==t||"firstLineNumber"==t||"theme"==t)&&wn(Ue)()},getOption:function(t){return Sn[t]},undo:wn(ae),redo:wn(se),indentLine:wn(function(t,e){x(t)&&Ve(t,null==e?"smart":e?"add":"subtract")}),historySize:function(){return{undo:vi.done.length,redo:vi.undone.length}},clearHistory:function(){vi=new p},matchBrackets:wn(function(){mn(!0)}),getTokenAt:wn(function(t){return t=He(t),C(t.line).getTokenAt(Vn,gn(t.line),t.ch)}),getStateAfter:function(t){return t=We(null==t?Jn.size-1:t),gn(t+1)},cursorCoords:function(t){return null==t&&(t=hi.inverted),an(t?hi.from:hi.to)},charCoords:function(t){return an(He(t))},coordsChar:function(t){var e=T(Dn);return ln(t.x-e.left,t.y-e.top)},getSearchCursor:function(t,e,n){return new Cn(t,e,n)},markText:wn(Je),setBookmark:qe,setMarker:wn(Qe),clearMarker:wn(Ze),setLineClass:wn(_e),hideLine:wn(function(t){return tn(t,!0)}),showLine:wn(function(t){return tn(t,!1)}),lineInfo:en,addWidget:function(t,e,n,i,r){t=on(He(t));var o=t.yBot,l=t.x;if(e.style.position="absolute",Wn.appendChild(e),"over"==i)o=t.y;else if("near"==i){var a=Math.max(Ln.offsetHeight,Jn.height*sn()),s=Math.max(Wn.clientWidth,Dn.clientWidth)-un();t.yBot+e.offsetHeight>a&&t.y>e.offsetHeight&&(o=t.y-e.offsetHeight),l+e.offsetWidth>s&&(l=s-e.offsetWidth)}e.style.top=o+fn()+"px",e.style.left=e.style.right="","right"==r?(l=Wn.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==r?l=0:"middle"==r&&(l=(Wn.clientWidth-e.offsetWidth)/2),e.style.left=l+un()+"px"),n&&ke(l,o,l+e.offsetWidth,o+e.offsetHeight)},lineCount:function(){return Jn.size},getCursor:function(t){return null==t&&(t=hi.inverted),N(t?hi.from:hi.to)},somethingSelected:function(){return!z(hi.from,hi.to)},setCursor:wn(function(t,e){null==e&&"number"==typeof t.line?Le(t.line,t.ch):Le(t,e)}),setSelection:wn(function(t,e){Ne(He(t),He(e||t))}),getLine:function(t){return x(t)?C(t).text:void 0},setLine:wn(function(t,e){x(t)&&fe(e,{line:t,ch:0},{line:t,ch:C(t).text.length})}),removeLine:wn(function(t){x(t)&&fe("",{line:t,ch:0},He({line:t+1,ch:0}))}),replaceRange:wn(fe),getRange:function(t,e){return de(He(t),He(e))},coordsFromIndex:function(t){var e,n=0;return Jn.iter(0,Jn.size,function(i){var r=i.text.length+1;return r>t?(e=t,!0):(t-=r,void++n)}),He({line:n,ch:e})},operation:function(t){return wn(t)()},refresh:function(){Ce(!0)},getInputField:function(){return On},getWrapperElement:function(){return An},getScrollerElement:function(){return Ln},getGutterElement:function(){return In}},bi=!1;Xe.prototype.clear=wn(function(){for(var t=0,e=this.set.length;e>t;++t){var n=this.set[t].marked;if(n)for(var i=0;i<n.length;++i)n[i].set==this.set&&n.splice(i--,1)}ei.push({from:0,to:Jn.size})}),Xe.prototype.find=function(){for(var t,e,n=0,i=this.set.length;i>n;++n)for(var r=this.set[n],o=r.marked,l=0;l<o.length;++l){var a=o[l];if(a.set==this.set&&(null!=a.from||null!=a.to)){var s=u(r);null!=s&&(null!=a.from&&(t={line:s,ch:a.from}),null!=a.to&&(e={line:s,ch:a.to}))}}return{from:t,to:e}};var ki,wi,Ci,Si=Math.floor(16777215*Math.random()).toString(16),wi=0,Ti={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},Ei=0;Cn.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(t){function e(t){var e={line:t,ch:0};return n.pos={from:e,to:e},n.atOccurrence=!1,!1}for(var n=this,i=He(t?this.pos.from:this.pos.to);;){if(this.pos=this.matches(t,i))return this.atOccurrence=!0,this.pos.match||!0;if(t){if(!i.line)return e(0);i={line:i.line-1,ch:C(i.line-1).text.length}}else{if(i.line==Jn.size-1)return e(Jn.size);i={line:i.line+1,ch:0}}}},from:function(){return this.atOccurrence?N(this.pos.from):void 0},to:function(){return this.atOccurrence?N(this.pos.to):void 0},replace:function(t){var e=this;this.atOccurrence&&wn(function(){e.pos.to=fe(t,e.pos.from,e.pos.to)})()}};for(var zi in B)B.propertyIsEnumerable(zi)&&!Mi.propertyIsEnumerable(zi)&&(Mi[zi]=B[zi]);return Mi}function e(t,e){if(e===!0)return e;if(t.copyState)return t.copyState(e);var n={};for(var i in e){var r=e[i];r instanceof Array&&(r=r.concat([])),n[i]=r}return n}function n(t,e,n){return t.startState?t.startState(e,n):!0}function i(t){this.pos=this.start=0,this.string=t}function r(t,e,n,i){this.from=t,this.to=e,this.style=n,this.set=i}function o(t){this.from=t,this.to=t,this.line=null}function l(t,e){this.styles=e||[t,null],this.text=t,this.height=1,this.marked=this.gutterMarker=this.className=null,this.stateAfter=this.parent=this.hidden=null}function a(t,e,n,i){for(var r=0,o=0,l=0;e>o;r+=2){var a=n[r],s=o+a.length;0==l?(s>t&&i.push(a.slice(t-o,Math.min(a.length,e-o)),n[r+1]),s>=t&&(l=1)):1==l&&(s>e?i.push(a.slice(0,e-o),n[r+1]):i.push(a,n[r+1])),o=s}}function s(t){this.lines=t,this.parent=null;for(var e=0,n=t.length,i=0;n>e;++e)t[e].parent=this,i+=t[e].height;this.height=i}function h(t){this.children=t;for(var e=0,n=0,i=0,r=t.length;r>i;++i){var o=t[i];e+=o.chunkSize(),n+=o.height,o.parent=this
}this.size=e,this.height=n,this.parent=null}function f(t,e){for(;;){for(var n=0,i=t.children.length;i>n;++n){var r=t.children[n],o=r.chunkSize();if(o>e){t=r;break}e-=o}if(t.lines)return t.lines[e]}}function u(t){if(null==t.parent)return null;for(var e=t.parent,n=W(e.lines,t),i=e.parent;i;e=i,i=i.parent){var r=0;for(i.children.length;i.children[r]!=e;++r)n+=i.children[r].chunkSize()}return n}function c(t,e){var n=0;t:do{for(var i=0,r=t.children.length;r>i;++i){var o=t.children[i],l=o.height;if(l>e){t=o;continue t}e-=l,n+=o.chunkSize()}return n}while(!t.lines);for(var i=0,r=t.lines.length;r>i;++i){var a=t.lines[i],s=a.height;if(s>e)break;e-=s}return n+i}function d(t,e){var n=0;t:do{for(var i=0,r=t.children.length;r>i;++i){var o=t.children[i],l=o.chunkSize();if(l>e){t=o;continue t}e-=l,n+=o.height}return n}while(!t.lines);for(var i=0;e>i;++i)n+=t.lines[i].height;return n}function p(){this.time=0,this.done=[],this.undone=[]}function m(){y(this)}function v(t){return t.stop||(t.stop=m),t}function g(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function x(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function y(t){g(t),x(t)}function M(t){return t.target||t.srcElement}function b(t){return t.which?t.which:1&t.button?1:2&t.button?3:4&t.button?2:void 0}function k(t,e,n,i){function r(t){n(t||window.event)}if("function"==typeof t.addEventListener){if(t.addEventListener(e,r,!1),i)return function(){t.removeEventListener(e,r,!1)}}else if(t.attachEvent("on"+e,r),i)return function(){t.detachEvent("on"+e,r)}}function w(){this.id=null}function C(t,e){null==e&&(e=t.search(/[^\s\u00a0]/),-1==e&&(e=t.length));for(var n=0,i=0;e>n;++n)"	"==t.charAt(n)?i+=j-i%j:++i;return i}function S(t){return t.currentStyle?t.currentStyle:window.getComputedStyle(t,null)}function T(t,e){for(var n=t.ownerDocument.body,i=0,r=0,o=!1,l=t;l;l=l.offsetParent){var a=l.offsetLeft,s=l.offsetTop;l==n?(i+=Math.abs(a),r+=Math.abs(s)):(i+=a,r+=s),e&&"fixed"==S(l).position&&(o=!0)}for(var h=e&&!o?null:n,l=t.parentNode;l!=h;l=l.parentNode)null!=l.scrollLeft&&(i-=l.scrollLeft,r-=l.scrollTop);return{left:i,top:r}}function E(t){return t.textContent||t.innerText||t.nodeValue||""}function z(t,e){return t.line==e.line&&t.ch==e.ch}function A(t,e){return t.line<e.line||t.line==e.line&&t.ch<e.ch}function N(t){return{line:t.line,ch:t.ch}}function O(t){return J?(X.innerHTML="",X.appendChild(document.createTextNode(t))):X.textContent=t,X.innerHTML}function L(t,e){if(!e)return t?t.length:0;if(!t)return e.length;for(var n=t.length,i=e.length;n>=0&&i>=0&&t.charAt(n)==e.charAt(i);--n,--i);return i+1}function W(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,i=t.length;i>n;++n)if(t[n]==e)return n;return-1}t.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:!1,tabMode:"classic",enterMode:"indent",electricChars:!0,onKeyEvent:null,lineWrapping:!1,lineNumbers:!1,gutter:!1,fixedGutter:!1,firstLineNumber:1,readOnly:!1,smartHome:!0,onChange:null,onCursorActivity:null,onGutterClick:null,onHighlightComplete:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:!1,workTime:100,workDelay:200,undoDepth:40,tabindex:null,pollForIME:!1,document:window.document};var H={},I={};t.defineMode=function(e,n){t.defaults.mode||"null"==e||(t.defaults.mode=e),H[e]=n},t.defineMIME=function(t,e){I[t]=e},t.getMode=function(e,n){if("string"==typeof n&&I.hasOwnProperty(n)&&(n=I[n]),"string"==typeof n)var i=n,r={};else if(null!=n)var i=n.name,r=n;var o=H[i];return o?o(e,r||{}):(window.console&&console.warn("No mode "+i+" found, falling back to plain text."),t.getMode(e,"text/plain"))},t.listModes=function(){var t=[];for(var e in H)H.propertyIsEnumerable(e)&&t.push(e);return t},t.listMIMEs=function(){var t=[];for(var e in I)I.propertyIsEnumerable(e)&&t.push({mime:e,mode:I[e]});return t};var B={};t.defineExtension=function(t,e){B[t]=e},t.fromTextArea=function(e,n){function i(){e.value=a.getValue()}function r(){i(),e.form.submit=l,e.form.submit(),e.form.submit=r}if(n||(n={}),n.value=e.value,!n.tabindex&&e.tabindex&&(n.tabindex=e.tabindex),e.form){var o=k(e.form,"submit",i,!0);if("function"==typeof e.form.submit){var l=e.form.submit;e.form.submit=r}}e.style.display="none";var a=t(function(t){e.parentNode.insertBefore(t,e.nextSibling)},n);return a.save=i,a.toTextArea=function(){i(),e.parentNode.removeChild(a.getWrapperElement()),e.style.display="",e.form&&(o(),"function"==typeof e.form.submit&&(e.form.submit=l))},a},t.copyState=e,t.startState=n,i.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(t){var e=this.string.charAt(this.pos);if("string"==typeof t)var n=e==t;else var n=e&&(t.test?t.test(e):t(e));return n?(++this.pos,e):void 0},eatWhile:function(t){for(var e=this.pos;this.eat(t););return this.pos>e},eatSpace:function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},skipToEnd:function(){this.pos=this.string.length},skipTo:function(t){var e=this.string.indexOf(t,this.pos);return e>-1?(this.pos=e,!0):void 0},backUp:function(t){this.pos-=t},column:function(){return C(this.string,this.start)},indentation:function(){return C(this.string)},match:function(t,e,n){function i(t){return n?t.toLowerCase():t}if("string"!=typeof t){var r=this.string.slice(this.pos).match(t);return r&&e!==!1&&(this.pos+=r[0].length),r}return i(this.string).indexOf(i(t),this.pos)==this.pos?(e!==!1&&(this.pos+=t.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)}},t.StringStream=i,r.prototype={attach:function(t){this.set.push(t)},detach:function(t){var e=W(this.set,t);e>-1&&this.set.splice(e,1)},split:function(t,e){if(this.to<=t&&null!=this.to)return null;var n=this.from<t||null==this.from?null:this.from-t+e,i=null==this.to?null:this.to-t+e;return new r(n,i,this.style,this.set)},dup:function(){return new r(null,null,this.style,this.set)},clipTo:function(t,e,n,i,r){null!=this.from&&this.from>=e&&(this.from=Math.max(i,this.from)+r),null!=this.to&&this.to>e&&(this.to=i<this.to?this.to+r:e),t&&i>this.from&&(i<this.to||null==this.to)&&(this.from=null),n&&(e<this.to||null==this.to)&&(e>this.from||null==this.from)&&(this.to=null)},isDead:function(){return null!=this.from&&null!=this.to&&this.from>=this.to},sameSet:function(t){return this.set==t.set}},o.prototype={attach:function(t){this.line=t},detach:function(t){this.line==t&&(this.line=null)},split:function(t,e){return t<this.from?(this.from=this.to=this.from-t+e,this):void 0},isDead:function(){return this.from>this.to},clipTo:function(t,e,n,i,r){(t||e<this.from)&&(n||i>this.to)?(this.from=0,this.to=-1):this.from>e&&(this.from=this.to=Math.max(i,this.from)+r)},sameSet:function(){return!1},find:function(){return this.line&&this.line.parent?{line:u(this.line),ch:this.from}:null},clear:function(){if(this.line){var t=W(this.line.marked,this);-1!=t&&this.line.marked.splice(t,1),this.line=null}}},l.inheritMarks=function(t,e){var n=new l(t),i=e.marked;if(i)for(var r=0;r<i.length;++r)if(null==i[r].to&&i[r].style){var o=n.marked||(n.marked=[]),a=i[r],s=a.dup();o.push(s),s.attach(n)}return n},l.prototype={replace:function(t,e,n){t||null!=e&&e!=this.text.length||(this.className=this.gutterMarker=null);var i=[],r=this.marked,o=null==e?this.text.length:e;if(a(0,t,this.styles,i),n&&i.push(n,null),a(o,this.text.length,this.styles,i),this.styles=i,this.text=this.text.slice(0,t)+n+this.text.slice(o),this.stateAfter=null,r)for(var l=n.length-(o-t),s=0,h=r[s];s<r.length;++s)h.clipTo(null==t,t||0,null==e,o,l),h.isDead()&&(h.detach(this),r.splice(s--,1))},split:function(t,e){var n=[e,null],i=this.marked;a(t,this.text.length,this.styles,n);var r=new l(e+this.text.slice(t),n);if(i)for(var o=0;o<i.length;++o){var s=i[o],h=s.split(t,e.length);h&&(r.marked||(r.marked=[]),r.marked.push(h),h.attach(r))}return r},append:function(t){var e=this.text.length,n=t.marked,i=this.marked;if(this.text+=t.text,a(0,t.text.length,t.styles,this.styles),i)for(var r=0;r<i.length;++r)null==i[r].to&&(i[r].to=e);if(n&&n.length){i||(this.marked=i=[]);t:for(var r=0;r<n.length;++r){var o=n[r];if(!o.from)for(var l=0;l<i.length;++l){var s=i[l];if(s.to==e&&s.sameSet(o)){s.to=null==o.to?null:o.to+e,s.isDead()&&(s.detach(this),n.splice(r--,1));continue t}}i.push(o),o.attach(this),o.from+=e,null!=o.to&&(o.to+=e)}}},fixMarkEnds:function(t){var e=this.marked,n=t.marked;if(e)for(var i=0;i<e.length;++i){var r=e[i],o=null==r.to;if(o&&n)for(var l=0;l<n.length;++l)if(n[l].sameSet(r)){o=!1;break}o&&(r.to=this.text.length)}},addMark:function(t){t.attach(this),null==this.marked&&(this.marked=[]),this.marked.push(t),this.marked.sort(function(t,e){return(t.from||0)-(e.from||0)})},highlight:function(t,e){var n,r=new i(this.text),o=this.styles,l=0,a=!1,s=o[0];for(""==this.text&&t.blankLine&&t.blankLine(e);!r.eol();){var h=t.token(r,e),f=this.text.slice(r.start,r.pos);if(r.start=r.pos,l&&o[l-1]==h?o[l-2]+=f:f&&(!a&&(o[l+1]!=h||l&&o[l-2]!=n)&&(a=!0),o[l++]=f,o[l++]=h,n=s,s=o[l]),r.pos>5e3){o[l++]=this.text.slice(r.pos),o[l++]=null;break}}return o.length!=l&&(o.length=l,a=!0),l&&o[l-2]!=n&&(a=!0),a||(o.length<5&&this.text.length<10?null:!1)},getTokenAt:function(t,e,n){for(var r=this.text,o=new i(r);o.pos<n&&!o.eol();){o.start=o.pos;var l=t.token(o,e)}return{start:o.start,end:o.pos,string:o.current(),className:l||null,state:e}},indentation:function(){return C(this.text)},getHTML:function(t,e,n,i){function r(t,e){t&&(a&&R&&" "==t.charAt(0)&&(t=" "+t.slice(1)),a=!1,e?l.push('<span class="',e,'">',O(t),"</span>"):l.push(O(t)))}function o(){f&&(v+=1,g=v<f.length?f[v]:null)}var l=[],a=!0;n&&l.push(this.className?'<pre class="'+this.className+'">':"<pre>");var s=this.styles,h=this.text,f=this.marked;t==e&&(t=null);var u=h.length;if(null!=i&&(u=Math.min(i,u)),h||null!=i)if(f||null!=t){var c,d=0,p=0,m="",v=-1,g=null;for(o();u>d;){var x=u,y="";for(null!=t&&(t>d?x=t:(null==e||e>d)&&(y=" CodeMirror-selected",null!=e&&(x=Math.min(x,e))));g&&null!=g.to&&g.to<=d;)o();for(g&&(g.from>d?x=Math.min(x,g.from):(y+=" "+g.style,null!=g.to&&(x=Math.min(x,g.to))));;){var M=d+m.length,b=c;if(y&&(b=c?c+y:y),r(M>x?m.slice(0,x-d):m,b),M>=x){m=m.slice(x-d),d=x;break}d=M,m=s[p++],c="cm-"+s[p++]}}null!=t&&null==e&&r(" ","CodeMirror-selected")}else for(var p=0,k=0;u>k;p+=2){var w=s[p],c=s[p+1],C=w.length;k+C>u&&(w=w.slice(0,u-k)),k+=C,r(w,c&&"cm-"+c)}else r(" ",null!=t&&null==e?"CodeMirror-selected":null);return n&&l.push("</pre>"),l.join("")},cleanUp:function(){if(this.parent=null,this.marked)for(var t=0,e=this.marked.length;e>t;++t)this.marked[t].detach(this)}},s.prototype={chunkSize:function(){return this.lines.length},remove:function(t,e){for(var n=t,i=t+e;i>n;++n){var r=this.lines[n];r.cleanUp(),this.height-=r.height}this.lines.splice(t,e)},collapse:function(t){t.splice.apply(t,[t.length,0].concat(this.lines))},insertHeight:function(t,e,n){this.height+=n,this.lines.splice.apply(this.lines,[t,0].concat(e));for(var i=0,r=e.length;r>i;++i)e[i].parent=this},iterN:function(t,e,n){for(var i=t+e;i>t;++t)if(n(this.lines[t]))return!0}},h.prototype={chunkSize:function(){return this.size},remove:function(t,e){this.size-=e;for(var n=0;n<this.children.length;++n){var i=this.children[n],r=i.chunkSize();if(r>t){var o=Math.min(e,r-t),l=i.height;if(i.remove(t,o),this.height-=l-i.height,r==o&&(this.children.splice(n--,1),i.parent=null),0==(e-=o))break;t=0}else t-=r}if(this.size-e<25){var a=[];this.collapse(a),this.children=[new s(a)]}},collapse:function(t){for(var e=0,n=this.children.length;n>e;++e)this.children[e].collapse(t)},insert:function(t,e){for(var n=0,i=0,r=e.length;r>i;++i)n+=e[i].height;this.insertHeight(t,e,n)},insertHeight:function(t,e,n){this.size+=e.length,this.height+=n;for(var i=0,r=this.children.length;r>i;++i){var o=this.children[i],l=o.chunkSize();if(l>=t){if(o.insertHeight(t,e,n),o.lines&&o.lines.length>50){for(;o.lines.length>50;){var a=o.lines.splice(o.lines.length-25,25),h=new s(a);o.height-=h.height,this.children.splice(i+1,0,h),h.parent=this}this.maybeSpill()}break}t-=l}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e=t.children.splice(t.children.length-5,5),n=new h(e);if(t.parent){t.size-=n.size,t.height-=n.height;var i=W(t.parent.children,t);t.parent.children.splice(i+1,0,n)}else{var r=new h(t.children);r.parent=t,t.children=[r,n],t=r}n.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iter:function(t,e,n){this.iterN(t,e-t,n)},iterN:function(t,e,n){for(var i=0,r=this.children.length;r>i;++i){var o=this.children[i],l=o.chunkSize();if(l>t){var a=Math.min(e,l-t);if(o.iterN(t,a,n))return!0;if(0==(e-=a))break;t=0}else t-=l}}},p.prototype={addChange:function(t,e,n){this.undone.length=0;var i=+new Date,r=this.done[this.done.length-1];if(i-this.time>400||!r||r.start>t+e||r.start+r.added<t-r.added+r.old.length)this.done.push({start:t,added:e,old:n});else{var o=0;if(t<r.start){for(var l=r.start-t-1;l>=0;--l)r.old.unshift(n[l]);r.added+=r.start-t,r.start=t}else r.start<t&&(o=t-r.start,e+=o);for(var l=r.added-o,a=n.length;a>l;++l)r.old.push(n[l]);r.added<e&&(r.added=e)}this.time=i}},w.prototype={set:function(t,e){clearTimeout(this.id),this.id=setTimeout(e,t)}};var D=function(){if(/MSIE [1-8]\b/.test(navigator.userAgent))return!1;var t=document.createElement("div");return"draggable"in t}(),K=/gecko\/\d{7}/i.test(navigator.userAgent),R=/MSIE \d/.test(navigator.userAgent),F=/WebKit\//.test(navigator.userAgent),P="\n";!function(){var t=document.createElement("textarea");t.value="foo\nbar",t.value.indexOf("\r")>-1&&(P="\r\n")}();for(var j=8,V=/Mac/.test(navigator.platform),G=/Win/.test(navigator.platform),U={},Y=35;40>=Y;++Y)U[Y]=U["c"+Y]=!0;null!=document.documentElement.getBoundingClientRect&&(T=function(t,e){try{var n=t.getBoundingClientRect();n={top:n.top,left:n.left}}catch(i){n={top:0,left:0}}if(!e)if(null==window.pageYOffset){var r=document.documentElement||document.body.parentNode;null==r.scrollTop&&(r=document.body),n.top+=r.scrollTop,n.left+=r.scrollLeft}else n.top+=window.pageYOffset,n.left+=window.pageXOffset;return n});var X=document.createElement("pre"),J="	"!=O("	");t.htmlEscape=O;var q,Q,Z;return q=3!="\n\nb".split(/\n/).length?function(t){for(var e,n=0,i=[];(e=t.indexOf("\n",n))>-1;)i.push(t.slice(n,"\r"==t.charAt(e-1)?e-1:e)),n=e+1;return i.push(t.slice(n)),i}:function(t){return t.split(/\r?\n/)},t.splitLines=q,window.getSelection?(Q=function(t){try{return{start:t.selectionStart,end:t.selectionEnd}}catch(e){return null}},Z=F?function(t,e,n){e==n?t.setSelectionRange(e,n):(t.setSelectionRange(e,n-1),window.getSelection().modify("extend","forward","character"))}:function(t,e,n){try{t.setSelectionRange(e,n)}catch(i){}}):(Q=function(t){try{var e=t.ownerDocument.selection.createRange()}catch(n){return null}if(!e||e.parentElement()!=t)return null;var i=t.value,r=i.length,o=t.createTextRange();o.moveToBookmark(e.getBookmark());var l=t.createTextRange();if(l.collapse(!1),o.compareEndPoints("StartToEnd",l)>-1)return{start:r,end:r};for(var a=-o.moveStart("character",-r),s=i.indexOf("\r");s>-1&&a>s;s=i.indexOf("\r",s+1),a++);if(o.compareEndPoints("EndToEnd",l)>-1)return{start:a,end:r};for(var h=-o.moveEnd("character",-r),s=i.indexOf("\r");s>-1&&h>s;s=i.indexOf("\r",s+1),h++);return{start:a,end:h}},Z=function(t,e,n){var i=t.createTextRange();i.collapse(!0);for(var r=i.duplicate(),o=0,l=t.value,a=l.indexOf("\n");a>-1&&e>a;a=l.indexOf("\n",a+1))++o;for(i.move("character",e-o);a>-1&&n>a;a=l.indexOf("\n",a+1))++o;r.move("character",n-o),i.setEndPoint("EndToEnd",r),i.select()}),t.defineMode("null",function(){return{token:function(t){t.skipToEnd()}}}),t.defineMIME("text/plain","null"),t}();return t});