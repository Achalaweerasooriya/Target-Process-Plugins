define(["../codemirror"],function(n){n.runMode=function(t,e,r){var a=n.getMode({indentUnit:2},e),o=1==r.nodeType;if(o){var s=r,i=[];r=function(t,e){i.push("\n"==t?"<br>":e?'<span class="cm-'+n.htmlEscape(e)+'">'+n.htmlEscape(t)+"</span>":n.htmlEscape(t))}}for(var c=n.splitLines(t),p=n.startState(a),f=0,l=c.length;l>f;++f){f&&r("\n");for(var d=new n.StringStream(c[f]);!d.eol();){var m=a.token(d,p);r(d.current(),m,f,d.start),d.start=d.pos}}o&&(s.innerHTML=i.join(""))}});