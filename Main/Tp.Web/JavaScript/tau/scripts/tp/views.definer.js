define(["Underscore","tp/mashup.view.types"],function(t,n){viewTypes=t.values(n);var o=function(t){this.config=t||{type:""}};o.prototype={addControl:function(n,o,e,i,s){var r={type:this.config.type||"notype",options:s,control:o,name:n||"Noname",onCreateContent:e||$.noop,onCreateHeader:i||$.noop},p=t.uniqueId("custom control:"+r.control+":"+r.name+":"+r.type);this.config.Mashups.prototype.controls.view[p]=t.extend(r,{id:p})},onRender:function(t,n){var o=this.config.type.toLowerCase(),e=this.config.Mashups.prototype.subscriptions.view;return e.hasOwnProperty(o)||(e[o]=[]),e[o].push({callback:t,options:n}),this},addTab:function(t,n,o,e){return this.addControl(t,"tab",n,o,e),this},addBlock:function(t,n,o,e){return this.addControl(t,"block",n,o,e),this}};var e={init:function(t){this.options=t;for(var n=0;n<viewTypes.length;n++)this._defineView(viewTypes[n]);return this},_defineView:function(t){var n="tp/"+t+"/view",e=this.options.Mashups;define(n,[],function(){return new o({type:t,Mashups:e})})}};return e});