define(["Underscore","tp/mashup.view.types"],function(t,n){var o=function(t){this.config=t||{type:""}};o.prototype={addControl:function(n,o,e,i,r){var s={type:this.config.type||"notype",options:r,control:o,name:n||"Noname",onCreateContent:e||t.noop,onCreateHeader:i||t.noop};s.id=t.uniqueId("custom control:"+s.control+":"+s.name+":"+s.type),this.config.Mashups.addViewControl(s)},onRender:function(t,n){var o=this.config.type.toLowerCase(),e=this.config.Mashups.prototype.subscriptions.view;return e.hasOwnProperty(o)||(e[o]=[]),e[o].push({callback:t,options:n}),this},addTab:function(t,n,o,e){return this.addControl(t,"tab",n,o,e),this},addBlock:function(t,n,o,e){return this.addControl(t,"block",n,o,e),this}};var e={init:function(o){this.options=o;for(var e=t.values(n),i=0;i<e.length;i++)this._defineView(e[i]);return this},_defineView:function(t){var n="tp/"+t+"/view",e=this.options.Mashups;define(n,[],function(){return new o({type:t,Mashups:e})})}};return e});