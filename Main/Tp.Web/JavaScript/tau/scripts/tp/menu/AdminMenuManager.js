define(["tp/menu/MenuManager","jQuery","app.path","tp/plugins/restService"],function(t,e,i,n){function r(t){this._create(t)}return r.prototype={_create:function(n){this._itemText=n.itemText,this._itemUrl=new i.tp.WebServiceURL(n.itemUrl).url,this._identifyUrlPart=n.identifyUrlPart,this._menuManager=new t({menu:e('[id="System Settings Action Group"]')}),this._item='<tr><td><div><a class="'+n.classIdentificator+' _adminMashupMenuItem" href="'+this._itemUrl+'">'+this._itemText+"</a></div></td></tr>"},addItem:function(){this._itemIsAvailableForCurrentUser(e.proxy(function(t){t&&(this._menuManager.addItem(this._item),this._fixSelection())},this))},_fixSelection:function(){this._menuManager.fixSelection(this._identifyUrlPart,this._itemText)},_itemIsAvailableForCurrentUser:function(t){var i=new n;e.getJSON(i._getUrl("context")).done(function(e){t(1==e.LoggedUser.IsAdministrator)})}},r});