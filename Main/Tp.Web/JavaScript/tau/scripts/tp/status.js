define(["jQuery","app.path"],function($,AppPath){function Status(){this._ctor()}return Status.prototype={_ctor:function(){this.statusBox=$('<div class="plugins info-block"><div></div></div>'),this.currentTimeout=null,this.defaultTimeout=3e3},hide:function(duration,callback){this.statusBox.find("div").removeClass("_opened");var that=this;callback?this.statusBox.slideUp(duration||"slow").queue(function(){clearTimeout(that.currentTimeout),that.currentTimeout=null,callback(),$(this).dequeue()}):this.statusBox.slideUp(duration||"slow")},custom:function(status,message,timeout,duration){$("body .plugins.info-block").length==0&&this.statusBox.appendTo($("body"));var that=this,showStatus=function(){var calculateStatusPosition=function(){return Math.floor(50*(1-$(that.statusBox).width()/$(document).width()))};that.statusBox.find("div").attr("class",status).html(message),that.statusBox.css("left",calculateStatusPosition()+"%"),that.currentTimeout=setTimeout($.proxy(that.hide,that),timeout?timeout:that.defaultTimeout),that.statusBox.slideDown(duration||"slow",function(){that.statusBox.find("div").addClass("_opened")}).queue(function(){$(this).dequeue()})};this.currentTimeout?this.hide(duration,showStatus):showStatus()},success:function(message,timeout){this.custom("success",message,timeout)},profileSavedSuccessfully:function(timeout){this.success("Profile saved successfully",timeout)},error:function(message,timeout){this.custom("error",message,timeout||1e4)},saving:function(timeout){var relativeLoaderUrl=new AppPath.tp.URL(AppPath.get()+"/Javascript/tau/css/images/loader-yellow.gif");this.custom("saving",'<img src="'+relativeLoaderUrl.url+'" /><span>Saving...</span>',timeout||3e4,"fast")}},new Status})