define(["jQuery","tau/configurator","tests/performance/list.datapoint"],function($,a,b){function c(){$('<span>Items count: </span><input type="text" id="itemsCount" value="100" />').appendTo("#toolbarContainer"),$("<button>Run</button>").click(g(!0)).appendTo("#toolbarContainer"),$('<table id="result" border="1" cellpadding="1" cellspacing="1" width="30%"><thead><th>#</th><th>Prepare</th><th>Register</th><th>store.get.done cycle</th><th>Unfreeze callbacks cycle</th></thead></table>').appendTo("#resultsContainer")}function d(b){var c=a.getStore().config.proxy;c.registerData(b,!0)}function e(a,b){for(var c=0;c<b;c++){var d=c+1,e={id:d,fields:["id","name","effort","effortCompleted","effortToDo","numericPriority","tags","timeRemain","timeSpent",{entityState:["id","name","isInitial","isFinal"]},{priority:["id","name","importance"]},{owner:["id","firstName","lastName"]},{project:["id"]}]};a.get("task",e).done({success:$.proxy($.noop,this)})}}function f(c){var f=[];f.push(+(new Date));var g=b.prepareTestData(c);f.push(+(new Date)),d(g),console.log(g),f.push(+(new Date));var h=a.getStore(),i=h.freeze();return e(h,c),f.push(+(new Date)),i.unfreeze(),f.push(+(new Date)),{points:f}}function g(b){return function(){var c=$("#itemsCount").val();b&&a.clear();var d=f(c),e=d.points;$("<tr></tr>").append("<td>0</td>").append("<td>"+(e[1]-e[0])+"</td>").append("<td>"+(e[2]-e[1])+"</td>").append("<td>"+(e[3]-e[2])+"</td>").append("<td>"+(e[4]-e[3])+"</td>").appendTo("#result")}}return{run:c}})