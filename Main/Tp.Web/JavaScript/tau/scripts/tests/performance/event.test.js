define(["jQuery","tau/core/bus","tau/core/event"],function($,Bus,Event){function startCallback(){$('<span>Items count: </span><input type="text" id="itemsCount" value="100" />').appendTo("#toolbarContainer"),$("<button>Run</button>").click(createStartTest()).appendTo("#toolbarContainer"),$('<table id="result" border="1" cellpadding="1" cellspacing="1" width="30%"><thead><th>#</th><th>Plain</th><th>Event</th></thead></table>').appendTo("#resultsContainer")}function startTestPlainFunctions(itemsCount){var testFunc=function(){},points=[];points.push(+(new Date));for(var i=0;i<itemsCount;i++)testFunc.call(this,{});return points.push(+(new Date)),{points:points}}function startTestEvents(itemsCount){var testFunc=function(){},obj={bus:new Bus,"bus someEventName":testFunc};Event.subscribeOn(obj);var points=[];points.push(+(new Date));for(var i=0;i<itemsCount;i++)obj.bus.fire("someEventName",{});return points.push(+(new Date)),{points:points}}function createStartTest(){return function(){var itemsCount=$("#itemsCount").val(),results=startTestPlainFunctions(itemsCount),points1=results.points,results=startTestEvents(itemsCount),points2=results.points;$("<tr></tr>").append("<td>"+itemsCount+"</td>").append("<td>"+(points1[1]-points1[0])+"</td>").append("<td>"+(points2[1]-points2[0])+"</td>").appendTo("#result")}}return{run:startCallback}})