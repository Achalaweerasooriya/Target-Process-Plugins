define(["Underscore","tau/core/comparer"],function(_,comparer){var innerRun=function(){module("[comparer] tests"),test("plain new property",function(){var a={f:1},b={d:1},results=comparer.compare(a,b),result={value:1};same(result,results.changes.d,"new properties is registered in results")}),test("plain property value changed",function(){var a={d:1},b={d:2},results=comparer.compare(a,b),result={value:2};same(result,results.changes.d,"properties is registered in results")}),test("object property not changed",function(){var a={c:{d:2,v:8}},b={c:{d:2}},results=comparer.compare(a,b);same({},results.changes,"no changed properties")}),test("object property changed",function(){var a={c:{d:1,v:8}},b={c:{d:2}},results=comparer.compare(a,b),result={value:b.c};same(result,results.changes.c,"no changed properties registered in results")}),test("array equal",function(){var a={c:{d:[1],b:44}},b={c:{d:[1]}},results=comparer.compare(a,b);same({},results.changes,"no changed properties")}),test("array equal very complex",function(){var a={c:{d:[{r:1}],b:44}},b={c:{d:[{r:1}]}},results=comparer.compare(a,b);same({},results.changes,"no changed properties")}),test("array not equal very complex",function(){var a={c:{d:[{r:2}],b:44}},b={c:{d:[{r:1}]}},results=comparer.compare(a,b);same(1,_(results.changes).keys().length,"has changed properties")})};return{run:innerRun}})