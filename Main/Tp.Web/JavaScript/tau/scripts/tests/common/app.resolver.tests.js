define(["Underscore","jQuery","tau/app.resolver"],function(_,$,a){var b=function(){module("[AppResolver] module tests",{setup:function(){this.appConfig={appId:"page"}},teardown:function(){delete this.appConfig}}),test("should resolve page info without appId param",function(){var b={location:{hash:"#board/7"}};this.appConfig.win=b;var c=a.resolvePageInfo(this.appConfig);equals(c.type,"board","Page type"),equals(c.id,"7","Page id")}),test("should resolve page info with appId param",function(){var b={location:{hash:"#abcdefg&page=board/7&popup=bug/22"}};this.appConfig.win=b;var c=a.resolvePageInfo(this.appConfig);equals(c.type,"board","Page type"),equals(c.id,"7","Page id")}),test("should resolve page info with legacy state",function(){var b={location:{hash:'#bug/22||{"state":1}&state=123'}};this.appConfig.win=b;var c=a.resolvePageInfo(this.appConfig);equals(c.type,"bug","Page type"),equals(c.id,"22","Page id")}),test("should resolve page info with legacy state",function(){var b={location:{hash:'#page=bug/22||{"state":1}&state=123'}};this.appConfig.win=b;var c=a.resolvePageInfo(this.appConfig);equals(c.type,"bug","Page type"),equals(c.id,"22","Page id")}),test("should resolve page info with default param",function(){var b={location:{hash:"",search:"?acid=1234567890"}};this.appConfig.win=b;var c=a.getQueryParam(b.location.search,"acid"),d={id:c,type:"board"},e=a.resolvePageInfo(this.appConfig,d);equals(e.type,"board","Page type"),equals(e.id,"1234567890","Page id")}),test("should force normalization on window hash",function(){var b={location:{hash:"",search:"?acid=1234567890",replace:function(a){this.hash=a}}};this.appConfig.win=b,this.appConfig.force=!0;var c=a.getQueryParam(b.location.search,"acid"),d={id:c,type:"board"},e=a.resolvePageInfo(this.appConfig,d);equals(e.type,"board","Page type"),equals(e.id,"1234567890","Page id"),equals(b.location.hash,"#page=board/1234567890","Page hash after forced normalization")})};return{run:b}})