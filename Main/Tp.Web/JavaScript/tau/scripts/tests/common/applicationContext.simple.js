define(["Underscore","tau/core/class","tau/utils/utils.fixturesLoader","tau/models/dataprocessor/model.processor.context"],function(_,a,b,c){var d=a.extend({init:function(a){this.entity={id:7357,type:"bug"},this.defaultFixtures={context:{test:{acid:"56B47A374989E87FC3C87D817A69C46E",loggedUser:"u1",processes:["all"],selectedProjects:["p1"],culture:"en-US",edition:"Pro"}},users:{u1:{firstName:"Administrator",lastName:"Administrator",email:"admin@example.com",isActive:!0,isAdministrator:!0}},projects:{p1:{name:"Test Project",process:"all"}},process:{all:{id:777,name:"All Practices",practices:["planning","timeTracking","bugTracking","requirements","testCases","sourceControl","helpDesc","iterations"]}},processInfo:{all:{id:777,name:"All Practices",practices:["planning","timeTracking","bugTracking","requirements","testCases","sourceControl","helpDesc","iterations"]}},practices:{planning:{name:"Planning",effortPoints:"Hour",isStoryEffortEqualsSumTasksEffort:!1},timeTracking:{name:"Time Tracking",isCloseAssignableIfZeroTimeRemaining:!1,isTimeDescriptionFieldVisible:!0,isTimeDescriptionRequired:!0,isRequiredShowRoleDropDown:!1},bugTracking:{name:"Bug Tracking"},requirements:{name:"Requirements"},testCases:{name:"Test Cases"},sourceControl:{name:"Source Control"},helpDesc:{name:"Help Desk"},iterations:{name:"Iterations"}},cultures:{"en-US":{name:"en-US",timePattern:"g:i A",shortDateFormat:"M/d/yyyy",longDateFormat:"dddd, MMMM dd, yyyy",decimalSeparator:"."}}};var c=new b({generateId:!0,setType:!0,copyAdditionalFields:!0}),d=c.load(this.defaultFixtures);this.defaultData=d;var e=this;_.forEach(d.context.test,function(a,b){})},selectDefaultProject:function(){this.selectedProjects=[this.defaultData.project.p1],this.processes=[this.defaultData.project.p1.process]},selectProject:function(a,b){a.process?a.process.practices.length==0&&(a.process.practices=this.defaultData.process.all.practices):a.process=this.defaultData.process.all,b&&_.forEach(a.process.practices,function(c,d){_.inArray(c.name.toLowerCase(),b)&&a.process.practices.splice(d,1)}),this.selectedProjects=[a],this.processes=[a.process]},excludePractices:function(a){if(a){var b=this;_.forEach(this.processes[0].practices,function(c,d){_.inArray(c.name,a)&&b.processes[0].practices.splice(d,1)})}},loginAs:function(a){this.loggedUser=a},setEntity:function(a){this.entity={id:a.id,type:a.type?a.type:a.__type?a.__type:"assignable"}},setEdition:function(a){this.defaultData.context.test.edition=a},process:function(){_.defaults(this.entity,{id:7357,type:"bug"});var a=this.defaultData.context.test;a.processes=[a.selectedProjects[0].process];var b={entity:this.entity,applicationContext:a};return c(b)}});return d})