define(["Underscore","tau/configurator","tau/core/class","tests/common/service.mock","tau/models/dataprocessor/model.processor.context"],function(_,a,b,c,d){return b.extend({init:function(a){this.name=a},initModule:function(b,e,f,g){module(this.name,{setup:function(){this.initialData=b.data||[],this.serviceMock=new c,a.clear(),a.disableRules(),a.setApplicationPath(b.applicationPath||"/TP"),a.setCurrentDate(b.currentDate||new Date(1307600546192)),a.setService(this.serviceMock),a.setInitialData(this.initialData),f&&f.call(this);var g=b.componentConfig,h=_.clone(g);h.context=d(h.context),this.component=e.create(h),this.component.on("afterRender",function(a){this.element=a.data.element},this),this.component.initialize(b.componentConfig)},teardown:function(){a.clear(),g&&g(),this.component.destroy(),this.serviceMock.verify(),delete this.initialData}})},test:function(a,b){test(a,b)}})})