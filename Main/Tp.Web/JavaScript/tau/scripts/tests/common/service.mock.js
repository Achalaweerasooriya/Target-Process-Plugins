define(["tau/core/class"],function(a){return a.extend({saveCommandList:null,removeCommandList:null,getCommandList:null,findCommandList:null,init:function(){this.saveCommandList=[],this.removeCommandList=[],this.getCommandList=[],this.findCommandList=[]},registerSaveCommand:function(a){this.saveCommandList.push(a)},registerRemoveCommand:function(a){this.removeCommandList.push(a)},registerGetCommand:function(a){this.getCommandList.push(a)},registerFindCommand:function(a){this.findCommandList.push(a)},executeCommand:function(a,b,c){if(b.length==0)throw same(c,null,"Actual command"),"Unexpected call "+a+" function of service with command"+c;var d=b[0];b.splice(0,1),same(c.config,d.config),d.preCheck&&d._test&&d._test[d.preCheck]&&d._test[d.preCheck].apply(d._test),c.callbacks.success(d.returnedData)},remove:function(a){this.executeCommand("remove",this.removeCommandList,a)},save:function(a){this.executeCommand("save",this.saveCommandList,a)},get:function(a){this.executeCommand("get",this.getCommandList,a)},find:function(a){this.executeCommand("find",this.findCommandList,a)},verify:function(){this.saveCommandList.length>0&&same([],this.saveCommandList,"Not all save command was executed")}})})