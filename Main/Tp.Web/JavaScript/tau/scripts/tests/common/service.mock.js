define(["tau/core/class"],function(a){return a.extend({saveCommandList:null,removeCommandList:null,removeFromListCommandList:null,getCommandList:null,findCommandList:null,refreshCommandList:null,init:function(){this.saveCommandList=[],this.removeCommandList=[],this.removeFromListCommandList=[],this.getCommandList=[],this.findCommandList=[],this.refreshCommandList=[]},registerSaveCommand:function(a){this.saveCommandList.push(a)},registerRemoveCommand:function(a){this.removeCommandList.push(a)},registerRemoveFromListCommand:function(a){this.removeFromListCommandList.push(a)},registerGetCommand:function(a){this.getCommandList.push(a)},registerFindCommand:function(a){this.findCommandList.push(a)},registerRefreshCommand:function(a){this.refreshCommandList.push(a)},executeCommand:function(a,b,c){if(b.length==0)throw same(c,null,"Actual command"),"Unexpected call "+a+" function of service with command"+c;var d=b[0];b.splice(0,1),same(c.config,d.config),d.preCheck&&d._test&&d._test[d.preCheck]&&d._test[d.preCheck].apply(d._test),c.callbacks.success(d.returnedData)},remove:function(a){this.executeCommand("remove",this.removeCommandList,a)},removeFromList:function(a){this.executeCommand("removeFromList",this.removeFromListCommandList,a)},save:function(a){this.executeCommand("save",this.saveCommandList,a)},get:function(a){this.executeCommand("get",this.getCommandList,a)},find:function(a){this.executeCommand("find",this.findCommandList,a)},refresh:function(a){this.executeCommand("refresh",this.refreshCommandList,a)},verify:function(a){var b=function(a,b){a.length>0&&same([],a,"Not all "+b+" commands were executed")};a&&b(this.getCommandList,"get"),b(this.saveCommandList,"save"),b(this.removeCommandList,"remove"),b(this.removeFromListCommandList,"remove"),b(this.findCommandList,"find"),b(this.refreshCommandList,"refresh")}})})