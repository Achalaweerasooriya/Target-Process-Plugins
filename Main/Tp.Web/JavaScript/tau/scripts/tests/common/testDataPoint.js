define(["Underscore","tau/core/class","tests/common/rest.data/roles","tests/common/rest.data/entityTypes","tests/common/rest.data/features","tests/common/rest.data/priorities","tests/common/rest.data/severities","tests/common/rest.data/users","tests/common/rest.data/userStories","tests/common/rest.data/iterations","tests/common/rest.data/processes","tests/common/rest.data/releases","tests/common/rest.data/entityStates"],function(_,Class,rdRoles,rdEntityTypes,rdFeatures,rdPriorities,rdSeverities,rdUsers,rdUserStories,rdIterations,rdProcesses,rdReleases,rdEntityStates){return Class.extend({init:function(){this.data=[]},getRoles:function(){return rdRoles.getRoles()},getTypes:function(){return rdEntityTypes.getEntityTypes()},getFeatures:function(){return rdFeatures.getFeatures()},getPriorities:function(){return rdPriorities.getPriorities()},getSeverities:function(){return rdSeverities.getSeverities()},getUsers:function(){return rdUsers.getUsers()},getUserStories:function(){return rdUserStories.getUserStories()},getIterations:function(){return rdIterations.getIterations()},getProcesses:function(){return rdProcesses.getProcesses()},getProjects:function(){var users=this.getUsers(),roles=this.getRoles(),releases=this.getReleases(),iterations=this.getIterations(),userStoryList=this.getUserStories(),processList=this.getProcesses(),featureList=this.getFeatures();return[{id:1,__type:"project",name:"Private Universe #1",releases:releases,iterations:iterations,userStories:userStoryList,features:_.select(featureList,function(num,index){return index<7}),process:processList[0],projectMembers:[{id:95,user:users[1],role:roles[1]},{id:96,user:users[2],role:roles[3]},{id:97,user:users[3],role:roles[2]},{id:98,user:users[4],role:roles[0]},{id:99,user:users[5],role:roles[1]},{id:100,user:users[6],role:roles[0]},{id:101,user:users[7],role:roles[3]},{id:102,user:users[0],role:roles[0]},{id:103,user:users[8],role:roles[0]}]},{id:2,__type:"project",name:"No requirements project",releases:releases,iterations:iterations,userStories:userStoryList,features:_.select(featureList,function(num,index){return index>=7&&index<13}),process:processList[1],projectMembers:[]},{id:3,__type:"project",name:"Project without features",releases:releases,iterations:iterations,userStories:[],features:null,process:processList[0],projectMembers:[]}]},getReleases:function(){return rdReleases.getReleases()},getBugs:function(){var releases=this.getReleases(),roles=this.getRoles(),users=this.getUsers(),iterations=this.getIterations(),priorities=this.getPriorities(),userStoryList=this.getUserStories(),severityList=this.getSeverities(),featureList=this.getFeatures(),types=this.getTypes(),project=this.getProjects()[0],entityStates=this.getEntityStates(),bug={__type:"bug",id:25,entityType:types[0],entityState:entityStates[0],release:releases[0],iteration:iterations[0],priority:priorities[0],userStory:userStoryList[0],severity:severityList[0],feature:featureList[0],project:{id:project.id},assignments:[],roleEfforts:[],effortCompleted:50,effortToDo:50,timeSpent:4,timeRemain:4},bugWithoutRelease={__type:"bug",id:26,entityType:types[0],entityState:entityStates[0],release:null,iteration:null,priority:null,userStory:null,feature:null,project:{id:project.id},severity:null,assignments:[],roleEfforts:[],effortCompleted:0,effortToDo:4,timeSpent:0,timeRemain:4},bugInFinalState={__type:"bug",id:27,entityState:entityStates[3],release:null,iteration:null,priority:null,userStory:null,feature:null,project:{id:project.id},severity:null,assignments:[],roleEfforts:[]};return bug.assignments[0]={id:15,role:roles[3],generalUser:users[0]},bug.assignments[2]={id:16,role:roles[3],generalUser:users[3]},bug.assignments[1]={id:17,role:roles[1],generalUser:users[2]},bug.roleEfforts[0]={id:350,effortToDo:15.555,effort:20,role:roles[3]},bug.roleEfforts[1]={id:351,effortToDo:8,effort:15,role:roles[1]},bug.owner=users[1],[bug,bugWithoutRelease,bugInFinalState]},getEntityStates:function(){return rdEntityStates.getEntityStates()},registerData:function(entityList){_.each(entityList,function(entity){this.data.push(entity)},this)},initDefaultData:function(){this.registerData(this.getRoles()),this.registerData(this.getEntityStates()),this.registerData(this.getProjects()),this.registerData(this.getPriorities()),this.registerData(this.getProcesses()),this.registerData(this.getSeverities()),this.registerData(this.getBugs())},emptyProperty:function(type,property){_.each(this.data,function(entity){entity.__type==type&&entity.hasOwnProperty(property)&&(entity[property]=null)})},removeReleases:function(){this.emptyProperty("project","releases")},removeIterations:function(){this.emptyProperty("project","iterations")},removeUserStories:function(){this.emptyProperty("project","userStories")},removeFeatures:function(){this.emptyProperty("project","features")},clear:function(){this.data=[]},getData:function(){return this.data}})})