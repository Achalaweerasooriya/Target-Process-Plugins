define(["Underscore","jQuery","tau/core/class","tau/configurator","tests/common/applicationContext.simple","tau/models/dataprocessor/model.processor.context","tests/components/common/common.setup","tests/components/component.specs","tests/common/service.mock","tau/utils/utils.fixturesLoader"],function(a,b,c,d,e,f,g,h,i,j){return c.extend({init:function(a,b){this.name=a,this.Component=b,this.appContext=new e,this.tests=[]},loadFixtures:function(a){var b=new j({generateId:!0,setType:!0});return b.load(a)},addTest:function(a){this.tests.push(a)},setData:function(a){this.data=a},setEntity:function(a){this.entity=a},selectProject:function(a,b){this.appContext.selectProject(a,b)},selectDefaultProject:function(){this.appContext.selectDefaultProject()},loginAs:function(a){this.appContext.loginAs(a)},getService:function(){return d.getService()},run:function(b){b=a.extend(b||{},{context:{applicationContext:this.appContext}}),f(b.context);var c=[];a.forEach(this.data,function(b,d){c=c.concat(a.values(b))});var e=g.create(this.name,c,this.Component,b,this.appContext),j={context:{type:this.entity.__type,id:this.entity.id}},k=h.create(e,j),l=a.bind(function(){var b=new i;d.setService(b),a.forEach(a.keys(this.data),function(a){d.getProxy().markRecordSetAsCompleteLoaded(a)})},this);k.viewShouldFollowDataComponentLifeCycle(function(){l()});var m=[];a.forEach(this.tests,function(a){m.push({name:a.name,context:a.context||null,preSetup:function(){l()},test:a.test})}),k.viewShouldPassTests(m),k.done()}})})