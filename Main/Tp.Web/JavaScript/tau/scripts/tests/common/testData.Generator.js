define(["Underscore","tau/core/class","libs/underscore"],function(_,Class){return Class.extend({initDataArray:function(){this.data=[],this.data.find=function(callback){return _.find(this,callback)},this.data.selectByType=function(type){return _.select(this,function(entity){return entity.__type==type})}},init:function(){this.initDataArray()},getRoles:function(){return[{id:1,name:"Developer",isPair:!0,hasEffort:!0,__type:"role"},{id:2,name:"Project Manager",__type:"role",hasEffort:!0,isPair:!1},{id:3,name:"Top Manager",__type:"role",hasEffort:!0,isPair:!1},{id:4,name:"QA Engineer",__type:"role",hasEffort:!0,isPair:!1}]},getTypes:function(){return[{__type:"entityType",id:15,name:"Bug"}]},getFeatures:function(){var users=this.getUsersRefs(),userStories=this.getUserStories(),roles=this.getRolesRefs(),entityStates=this.getEntityStates(),us=userStories[3];return us.entityState.isFinal=!0,us.release={id:1061},[{__type:"feature",id:53,name:"Define Space Constants",entityState:entityStates[0],project:{id:1},release:{id:987},initialEstimate:5.61111,"userStories-count":15,effort:326,effortToDo:522,assignments:[{id:233,generalUser:users[0],role:roles[0]}]},{__type:"feature",id:91,name:"Celestial Bodies Creation",effortCompleted:20,effortToDo:15,entityState:entityStates[1],"userStories-count":0,project:{id:1},release:{id:987}},{__type:"feature",id:137,name:"Complex 3D Demo",initialEstimate:0,entityState:entityStates[2],effortCompleted:33,effortToDo:98,"userStories-count":2,project:{id:1},release:{id:987}},{__type:"feature",id:169,name:"The Big Bang Setup",entityState:entityStates[3],project:{id:1},release:{id:987}},{__type:"feature",id:223,name:"Lakes and Rivers",entityState:entityStates[4],project:{id:1},release:{id:987}},{__type:"feature",id:251,name:"Licensing",entityState:entityStates[5],userStories:[userStories[0]],project:{id:1},release:{id:987}},{__type:"feature",id:264,name:"Space machines",entityState:entityStates[0],project:{id:1},release:{id:987}},{__type:"feature",id:331,name:"Define Space Constants",entityState:entityStates[1],project:{id:2},release:{id:1061}},{__type:"feature",id:369,name:"Celestial Bodies Creation",entityState:entityStates[2],project:{id:2},release:{id:1061}},{__type:"feature",id:415,name:"Complex 3D Demo",entityState:entityStates[3],userStories:[us],project:{id:2},release:{id:1061}},{__type:"feature",id:447,name:"The Big Bang Setup",entityState:entityStates[4],project:{id:2},release:{id:1061}},{__type:"feature",id:499,name:"Lakes and Rivers",entityState:entityStates[5],project:{id:2},release:{id:1061}},{__type:"feature",id:527,name:"Licensing",entityState:entityStates[0],project:{id:2},release:{id:1061}},{__type:"feature",id:540,name:"Space machines",entityState:entityStates[1],project:{id:2},release:{id:1061}}]},getPriorities:function(){return[{__type:"priority",id:1,name:"Must Have",importance:1,endDate:"/Date(1304542800000+0300)/",entityType:{id:15}},{__type:"priority",id:2,name:"Low",importance:2,endDate:"/Date(1304542800000+0300)/",entityType:{id:15}},{__type:"priority",id:3,name:"Medium",importance:3,endDate:"/Date(1304542800000+0300)/",entityType:{id:15}}]},getPriorities:function(){return[{__type:"priority",id:1,name:"Must Have",importance:1,endDate:"/Date(1304542800000+0300)/",entityType:{id:15}},{__type:"priority",id:2,name:"Low",importance:2,endDate:"/Date(1304542800000+0300)/",entityType:{id:15}},{__type:"priority",id:3,name:"Medium",importance:3,endDate:"/Date(1304542800000+0300)/",entityType:{id:15}}]},getSeverities:function(){return[{__type:"severity",id:1,name:"Enhancement",importance:1},{__type:"severity",id:2,name:"Critical",importance:2},{__type:"severity",id:3,name:"Normal",importance:3},{__type:"severity",id:4,name:"Small",importance:4}]},getUsers:function(){return[{id:1,__type:"user",firstName:"Administrator",lastName:"Administrator",isActive:!0,email:"1123123@eerer.fd",kind:"user",avatarUri:"/TP/Avatar.ashx?UserId=1&size="},{id:254,__type:"user",firstName:"John",lastName:"Brown",isActive:!0,email:"11233123@eerer.fd",kind:"user",avatarUri:"/TP/Avatar.ashx?UserId=254&size="},{id:255,__type:"user",firstName:"Tod",lastName:"Black",email:"11233123@eerer.fd",isActive:!0,kind:"user",avatarUri:"/TP/Avatar.ashx?UserId=255&size="},{id:256,__type:"user",firstName:"Andrew",lastName:"Gray",isActive:!0,email:"112323123@eerer.fd",kind:"user",avatarUri:"/TP/Avatar.ashx?UserId=256&size="},{id:257,__type:"user",firstName:"Sandra",lastName:"Red",isActive:!0,email:"123123123@eerer.fd",kind:"user",avatarUri:"/TP/Avatar.ashx?UserId=257&size="},{id:258,__type:"user",firstName:"Jack",lastName:"Blue",isActive:!0,email:"112443123@eerer.fd",kind:"user",avatarUri:"/TP/Avatar.ashx?UserId=258&size="},{id:259,__type:"user",firstName:"Sam",lastName:"Yellow",isActive:!0,email:"112333333123@eerer.fd",kind:"user",avatarUri:"/TP/Avatar.ashx?UserId=259&size="},{id:260,__type:"user",firstName:"Tanya",lastName:"White",isActive:!0,email:"11231zzz23@eerer.fd",kind:"user",avatarUri:"/TP/Avatar.ashx?UserId=260&size="},{id:5656,__type:"user",firstName:"Not activated",lastName:"user",isActive:!1,email:"11231233sdf@eerer.fd",kind:"user",avatarUri:"/TP/Avatar.ashx?UserId=5656&size="}]},createRef:function(entity){return{id:entity.id,__type:entity.__type}},getTestPlans:function(){var testPlans=[{id:2,name:"3D Model",__type:"testPlan"},{id:76,name:"Space, Planets and Stars",__type:"testPlan"},{id:184,name:"Setup",__type:"testPlan"}];return testPlans},getTestCases:function(){var testCases=[{id:9,lastStatus:!0,lastRunDate:"/Date(1304542800000+0300)/",lastFailureComment:"Failure Comment",__type:"testCase"},{id:14,lastStatus:!1,lastFailureComment:"",__type:"testCase"},{id:22,lastStatus:null,__type:"testCase"}];return testCases},getRefs:function(users){return _.map(users,this.getRef,this)},getTestPlansRefs:function(){return this.getRefs(this.getTestPlans())},getTestPlanRuns:function(){var testPlans=this.getTestPlansRefs(),testPlanRuns=[{id:39,name:"3D Model Tests Run",__type:"testPlanRun",testPlan:testPlans[1]},{id:40,name:"3D Model Tests Run",__type:"testPlanRun",testPlan:testPlans[1]},{id:41,name:"3D Model Tests Run",__type:"testPlanRun",testPlan:testPlans[1]},{id:42,name:"3D Model Tests Run",__type:"testPlanRun",testPlan:testPlans[1]},{id:82,name:"Space, Planets and Stars Tests Run",__type:"testPlanRun",testPlan:testPlans[0]},{id:129,name:"Space, Planets and Stars Tests Run",__type:"testPlanRun",testPlan:testPlans[0]},{id:130,name:"Space, Planets and Stars Tests Run",__type:"testPlanRun",testPlan:testPlans[0]},{id:131,name:"Space, Planets and Stars Tests Run",__type:"testPlanRun",testPlan:testPlans[0]}];return testPlanRuns},getUserStories:function(){var roles=this.getRoles(),states=this.getEntityStates(),priority=this.getPriorities(),users=this.getUsersRefs(),impediments=this.getImpedimentsRefs(),userStory={__type:"userStory",id:150,name:"User Story",createDate:"/Date(1304542800000+0300)/",endDate:"/Date(1304542800000+0300)/",assignments:[{id:250},{id:251},{id:252}],project:{id:1},team:{id:null},description:"UserStory",customFields:{},"tasks-count":4,tags:"tag1,tag2,tag3","testCases-count":3,"bugs-count":2,"requests-count":2,timeSpent:3,timeRemain:6,"tasks-effort-sum":18.21111,"tasks-effortToDo-sum":12.2111,effort:25.11111,effortToDo:98.51111,attachments:[],comments:[],entityType:{name:"userStory",id:3},entityState:{id:states[0].id},priority:{id:priority[0].id},"impediments-count":impediments.length,impediments:impediments,release:null,iteration:null,feature:null,effortCompleted:15,requests:[],roleEfforts:[{id:350,effortToDo:15.555,effort:20,assignable:{id:150}},{id:351,effortToDo:8,effort:15,assignable:{id:150}}]};return userStory.assignments[0].role=this.createRef(roles[0]),userStory.assignments[0].generalUser=this.createRef(users[1]),userStory.assignments[2].role=this.createRef(roles[0]),userStory.assignments[2].generalUser=this.createRef(users[4]),userStory.assignments[1].role=this.createRef(roles[3]),userStory.assignments[1].generalUser=this.createRef(users[3]),userStory.roleEfforts[0].role=this.createRef(roles[0]),userStory.roleEfforts[1].role=this.createRef(roles[3]),userStory.owner=users[2],[{__type:"userStory",id:99,name:"Investigate frameworks",project:{id:1},team:{id:null},endDate:"/Date(1304542800000+0300)/",effortCompleted:11,effortToDo:55,assignments:[{id:655,role:this.createRef(roles[0]),generalUser:this.createRef(users[3])}],roleEfforts:[{id:365,effortToDo:15.555,effort:20,role:this.createRef(roles[0])},{id:366,effortToDo:8,effort:15,role:this.createRef(roles[3])}]},{__type:"userStory",id:100,name:"Create Architecture",project:{id:1},team:{id:null},feature:null,endDate:"/Date(1304542800000+0300)/",effortToDo:32,effortCompleted:5},{__type:"userStory",id:101,name:"Creat stories",project:{id:1},team:{id:null},endDate:"/Date(1304542800000+0300)/",effortToDo:17,effortCompleted:9},userStory]},getRef:function(entity){return{id:entity.id,__type:entity.__type}},getUserStoriesRefs:function(){return _.map(this.getUserStories(),this.getRef,this)},getUsersRefs:function(){return _.map(this.getUsers(),this.getRef,this)},getRolesRefs:function(){return _.map(this.getRoles(),this.getRef,this)},getBugsRefs:function(){return _.map(this.getBugs(),this.getRef,this)},getStatusRefs:function(){return _.map(this.getEntityStates(),this.getRef,this)},getImpedimentsRefs:function(){return _.map(this.getImpediments(),this.getRef,this)},getImpediments:function(){var status=this.getStatusRefs(),users=this.getUsersRefs();return[{__type:"impediment",id:11,name:"Teddy works terrible",isPrivate:!1,entityState:status[0],responsible:users[3],owner:users[3]},{__type:"impediment",id:12,isPrivate:!0,name:"Enabled practices is not returned from rest",entityState:status[1],responsible:users[3],owner:users[0]},{__type:"impediment",id:13,name:"Enabled practices is not returned from rest",entityState:status[0],isPrivate:!0,responsible:users[0],owner:users[3]},{__type:"impediment",id:14,name:"Private impediment",entityState:status[0],isPrivate:!0,responsible:users[3],owner:users[3]},{__type:"impediment",id:15,name:"Private impediment",entityState:status[3],isPrivate:!1,responsible:users[3],owner:users[3]}]},getIterations:function(){return[{__type:"iteration",id:369,name:"Iteration #2.1",isCurrent:!1,startDate:"/Date(1304512800000+0300)/",endDate:"/Date(1304542800000+0300)/",velocity:25,release:{id:367,name:"Beta Version",__type:"release"},"bugs-effortToDo-sum":250,"bugs-effortCompleted-sum":100,"userStories-effortToDo-sum":9.51,"userStories-effortCompleted-sum":9},{__type:"iteration",id:186,name:"Iteration #3.1",isCurrent:!1,startDate:"/Date(1304512800000+0300)/",endDate:"/Date(1304542800000+0300)/",release:{id:1169,name:"Gold",__type:"release"}},{__type:"iteration",id:509,name:"Iteration #3.2",isCurrent:!1,startDate:"/Date(1304512800000+0300)/",endDate:"/Date(1304542800000+0300)/",release:{id:1169,name:"Gold",__type:"release"}},{__type:"iteration",id:531,name:"Iteration #3.3",isCurrent:!1,startDate:"/Date(1304512800000+0300)/",endDate:"/Date(1307600546000+0300)/",release:{id:1169,name:"Gold",__type:"release"}},{__type:"iteration",id:694,name:"Iteration #4.1",isCurrent:!1,startDate:"/Date(1307610546000+0300)/",endDate:"/Date(1307700546000+0300)/",release:{id:1262,name:"Feature",__type:"release"}}]},getProcesses:function(){var entityStateRefs=this.getEntityStateRefs();return[{__type:"process",id:1,name:"Kanban",terms:[{name:"Bug",value:"Issue"},{name:"Bugs",value:"Issues"}],entityStates:[entityStateRefs[4],entityStateRefs[5]],practices:[{id:1,name:"Planning",effortPoints:"Hour",isStoryEffortEqualsSumTasksEffort:!1},{id:2,name:"Time Tracking",isCloseAssignableIfZeroTimeRemaining:!1,isTimeDescriptionFieldVisible:!0,isTimeDescriptionRequired:!0,isRequiredShowRoleDropDown:!1},{id:3,name:"Bug Tracking"},{id:4,name:"Requirements"},{id:6,name:"Test Cases"},{id:7,name:"Source Control"},{id:8,name:"Help Desk"},{id:9,name:"Iterations"}],customFields:[{id:111,entityKind:"UserStory",name:"CF Text",type:"Text",required:!0,listed:!0},{id:222,entityKind:"UserStory",name:"CF Text Empty",type:"Text",required:!0,listed:!0},{id:333,entityKind:"UserStory",name:"CF Rich",type:"RichText",required:!1,listed:!1},{id:444,entityKind:"UserStory",name:"CF Rich Empty",type:"RichText",required:!1,listed:!1},{id:555,entityKind:"UserStory",name:"CF DropDownList",type:"DropDown",required:!1,listed:!1,value:"1\r\n2\r\n3\r\n4"},{id:666,entityKind:"UserStory",name:"CF DropDownList Empty",type:"DropDown",required:!1,listed:!1,value:"1\r\n2\r\n3\r\n4"},{id:777,entityKind:"UserStory",name:"CF Check Box",type:"CheckBox",required:!1,listed:!1},{id:888,entityKind:"UserStory",name:"CF Check Box Empty",type:"CheckBox",required:!1,listed:!1},{id:999,entityKind:"UserStory",name:"CF URL",type:"URL",required:!1,listed:!1},{id:1111,entityKind:"UserStory",name:"CF URL Empty",type:"URL",required:!1,listed:!1},{id:2222,entityKind:"UserStory",name:"CF Date",type:"Date",required:!1,listed:!1},{id:3333,entityKind:"UserStory",name:"CF Date Empty",type:"Date",required:!1,listed:!1},{id:4444,entityKind:"UserStory",name:"CF Number",type:"Number",required:!1,listed:!1},{id:5555,entityKind:"UserStory",name:"CF Number Empty",type:"Number",required:!1,listed:!1},{id:6666,entityKind:"UserStory",name:"CF TargetProcessEntity",type:"Entity",required:!1,listed:!1},{id:7777,entityKind:"UserStory",name:"CF TargetProcessEntity Empty",type:"Entity",required:!1,listed:!1},{id:8888,entityKind:"UserStory",name:"CF Rich2",type:"RichText",required:!1,listed:!1},{id:9999,entityKind:"UserStory",name:"CF Rich2 Empty",type:"RichText",required:!1,listed:!1}]},{__type:"process",id:2,name:"No Requirements",terms:[{name:"Bug",value:"Issue"},{name:"Bugs",value:"Issues"}],practices:[{id:1,name:"Planning",effortPoints:"Hour",isStoryEffortEqualsSumTasksEffort:!1},{id:2,name:"Time Tracking",isCloseAssignableIfZeroTimeRemaining:!1,isTimeDescriptionFieldVisible:!0,isTimeDescriptionRequired:!0,isRequiredShowRoleDropDown:!1},{id:3,name:"Bug Tracking"},{id:6,name:"Test Cases"},{id:7,name:"Source Control"},{id:8,name:"Help Desk"},{id:9,name:"Iterations"}],customFields:null}]},getEntityStateRefs:function(){var entityStateList=this.getEntityStates();return entityStateList=_.map(entityStateList,this.createRef,this),entityStateList},getFeaturesRefs:function(){var featureList=this.getFeatures();return featureList=_.map(featureList,function(entity){return this.createRef(entity)},this),featureList},getProjects:function(){var users=this.getUsers(),roles=this.getRoles(),releases=this.getReleases(),iterations=this.getIterations(),userStoryList=this.getUserStories(),processList=this.getProcesses(),featureList=this.getFeaturesRefs();return[{id:1,abbreviation:"PU1",__type:"project",name:"Private Universe #1",releases:releases,iterations:iterations,userStories:userStoryList,features:_.select(featureList,function(num,index){return index<7}),process:processList[0],projectMembers:[{id:95,user:this.createRef(users[1]),role:this.createRef(roles[1])},{id:96,user:this.createRef(users[2]),role:this.createRef(roles[3])},{id:97,user:this.createRef(users[3]),role:this.createRef(roles[2])},{id:98,user:this.createRef(users[4]),role:this.createRef(roles[0])},{id:99,user:this.createRef(users[5]),role:this.createRef(roles[1])},{id:100,user:this.createRef(users[6]),role:this.createRef(roles[0])},{id:101,user:this.createRef(users[7]),role:this.createRef(roles[3])},{id:102,user:this.createRef(users[0]),role:this.createRef(roles[0])},{id:103,user:this.createRef(users[8]),role:this.createRef(roles[0])}]},{id:2,abbreviation:"XZ",__type:"project",name:"No requirements project",releases:releases,iterations:iterations,userStories:[],features:_.select(featureList,function(num,index){return index>=7&&index<13}),process:processList[1],projectMembers:[]},{id:3,abbreviation:"FUU",__type:"project",name:"Project without features",releases:releases,iterations:iterations,userStories:null,features:[],process:processList[0],projectMembers:[]},{id:4,abbreviation:"BOB",__type:"project",name:"Second project with features",releases:releases,iterations:iterations,userStories:[],features:_.select(featureList,function(num,index){return index>=7&&index<13}),process:processList[0],projectMembers:[]}]},getTimes:function(){var usersRefs=this.getUsersRefs();return[{id:4,__type:"time",date:"/Date(1292002100000+0300)/",description:"First Time",spent:3,remain:2,user:usersRefs[0]},{id:5,__type:"time",date:"/Date(1292002100000+0300)/",description:"Second Time",spent:4,remain:3,user:usersRefs[0]},{id:6,__type:"time",date:"/Date(1292002100000+0300)/",description:"Thread Time",spent:4,remain:3,user:usersRefs[0]}]},getTimesRefs:function(){return this.getRefs(this.getTimes())},getReleases:function(){var featureRefs=this.getFeaturesRefs();return[{__type:"release",id:987,name:"Demo",isCurrent:!1,startDate:"/Date(1292002100000+0300)/",endDate:"/Date(1294002100000+0300)/"},{__type:"release",id:1061,name:"Beta Version",isCurrent:!1,startDate:"/Date(1309542300000+0300)/",endDate:"/Date(1309942300000+0300)/"},{__type:"release",id:1169,name:"Gold",isCurrent:!1,startDate:"/Date(1304542400000+0300)/",endDate:"/Date(1304542500000+0300)/"},{__type:"release",id:1262,name:"Feature",isCurrent:!1,startDate:"/Date(1306600546000+0300)/",endDate:"/Date(1308600546000+0300)/","bugs-effortToDo-sum":35,"bugs-effortCompleted-sum":50,"userStories-effortToDo-sum":40,"userStories-effortCompleted-sum":30,features:[featureRefs[1],featureRefs[2]]}]},getBuilds:function(){return[{__type:"build",id:1301,name:"Bubu",buildDate:"/Date(1309545300000+0300)/"},{__type:"build",id:1302,name:"Yogi",buildDate:"/Date(1309542300000+0300)/"}]},getRevisionFiles:function(){return[,{id:105,fileName:"/Login.cs",fileAction:"Modify",__type:"revisionFile"},{id:106,fileName:"/Login.cs",fileAction:"Modify",__type:"revisionFile"}]},getRevisions:function(){var users=this.getUsersRefs();return[{id:1100,sourceControlId:1,description:"Fix login page",commitDate:"/Date(1309542300000+0300)/",author:users[0],revisionFiles:[{id:102,fileName:"/Login.cs",fileAction:"Add",__type:"revisionFile"},{id:103,fileName:"/Login.html",fileAction:"Add",__type:"revisionFile"},{id:104,fileName:"/Users.cs",fileAction:"Add",__type:"revisionFile"}],__type:"revision"},{id:1101,sourceControlId:1,description:"Add avatar of logged user",commitDate:"/Date(1309542300000+0300)/",author:users[1],revisionFiles:[{id:105,fileName:"/Login.cs",fileAction:"Modify",__type:"revisionFile"},{id:106,fileName:"/Login.html",fileAction:"Modify",__type:"revisionFile"},{id:107,fileName:"/Users.cs",fileAction:"Modify",__type:"revisionFile"}],__type:"revision"},{id:1102,sourceControlId:1,description:"Fix css avatar",commitDate:"/Date(1309542300000+0300)/",author:users[2],revisionFiles:[{id:108,fileName:"/Login.css",fileAction:"Add",__type:"revisionFile"},{id:109,fileName:"/Login.cs",fileAction:"Modify",__type:"revisionFile"}],__type:"revision"},{id:1103,sourceControlId:1,description:"Add contacts to user page",commitDate:"/Date(1309542300000+0300)/",author:users[3],revisionFiles:[{id:110,fileName:"/Contact.cs",fileAction:"Add",__type:"revisionFile"},{id:111,fileName:"/Login.cs",fileAction:"Delete",__type:"revisionFile"}],__type:"revision"},{id:1105,sourceControlId:1,description:"Restore password",commitDate:"/Date(1309542300000+0300)/",author:null,revisionFiles:[{id:110,fileName:"/Contact.cs",fileAction:"Add",__type:"revisionFile"},{id:111,fileName:"/Login.cs",fileAction:"Delete",__type:"revisionFile"}],__type:"revision"}]},getRevisionRefs:function(){return this.getRefs(this.getRevisions())},getBugs:function(){var releases=this.getReleases(),roles=this.getRoles(),users=this.getUsers(),iterations=this.getIterations(),priorities=this.getPriorities(),userStoryList=this.getUserStories(),severityList=this.getSeverities(),featureList=this.getFeaturesRefs(),types=this.getTypes(),project=this.getProjects()[0],times=this.getTimesRefs(),revisions=this.getRevisionRefs(),entityStates=this.getEntityStates(),impediments=this.getImpedimentsRefs(),bug={__type:"bug",id:25,name:"Almost full bug",entityType:types[0],entityState:entityStates[0],release:releases[0],iteration:iterations[0],priority:priorities[0],userStory:userStoryList[0],severity:severityList[0],times:times,feature:featureList[0],createDate:"/Date(1318855726000+0300)/",endDate:"/Date(1318506969000+0300)/",project:{id:project.id},revisions:revisions,assignments:[],roleEfforts:[],impediments:impediments,effortCompleted:50,effortToDo:50,timeSpent:4,timeRemain:4},bugWithoutRelease={__type:"bug",id:26,entityType:types[0],name:"Bug without release",entityState:entityStates[0],release:null,iteration:null,priority:null,userStory:null,feature:null,project:{id:project.id},severity:null,assignments:[],roleEfforts:[],effortCompleted:0,effortToDo:4,timeSpent:0,timeRemain:4},bugInFinalState={__type:"bug",id:27,entityState:entityStates[3],name:"Bug In Final State",release:null,iteration:null,priority:null,userStory:null,feature:null,project:{id:project.id},createDate:"/Date(1318506969000+0300)/",endDate:null,severity:null,effortCompleted:19,effortToDo:3,assignments:[],roleEfforts:[]};return bug.assignments[0]={id:15,role:this.createRef(roles[3]),generalUser:this.createRef(users[0])},bug.assignments[2]={id:16,role:this.createRef(roles[3]),generalUser:this.createRef(users[3])},bug.assignments[1]={id:17,role:this.createRef(roles[1]),generalUser:this.createRef(users[2])},bug.roleEfforts[0]={id:350,effortToDo:15.555,effort:20,role:this.createRef(roles[3])},bug.roleEfforts[1]={id:351,effortToDo:8,effort:15,role:this.createRef(roles[1])},bug.owner=users[1],[bug,bugWithoutRelease,bugInFinalState]},getEntityTypes:function(){return[{id:1,name:"Project",__type:"entityType"},{id:2,name:"Release",__type:"entityType"},{id:3,name:"Iteration",__type:"entityType"},{id:4,name:"UserStory",__type:"entityType"},{id:5,name:"Task",__type:"entityType"},{id:6,name:"User",__type:"entityType"},{id:7,name:"Time",__type:"entityType"},{id:8,name:"Bug",__type:"entityType"},{id:9,name:"Feature",__type:"entityType"},{id:10,name:"Program",__type:"entityType"},{id:11,name:"Build",__type:"entityType"},{id:12,name:"TestCase",__type:"entityType"},{id:13,name:"TestPlan",__type:"entityType"},{id:14,name:"TestPlanRun",__type:"entityType"},{id:16,name:"Impediment",__type:"entityType"},{id:17,name:"Request",__type:"entityType"},{id:18,name:"Requester",__type:"entityType"},{id:19,name:"Comment",__type:"entityType"},{id:20,name:"Attachment",__type:"entityType"},{id:21,name:"Solution",__type:"entityType"},{id:22,name:"Company",__type:"entityType"}]},getEntityStates:function(){var featureEntityType=this.getRef(this.getEntityTypes()[8]),qaRole=this.getRef(this.getRoles()[3]),devRole=this.getRef(this.getRoles()[0]),planned={__type:"entityState",id:1,name:"Planned",isInitial:!0,isFinal:!1,isCommentRequired:!1,numericPriority:1,role:devRole},open={__type:"entityState",id:2,name:"Open",isInitial:!1,isFinal:!1,isCommentRequired:!1,numericPriority:2,role:null},inProgress={__type:"entityState",id:3,name:"In Progress",isInitial:!1,isFinal:!1,isCommentRequired:!1,numericPriority:3,role:devRole},done={__type:"entityState",id:4,name:"Done",isInitial:!1,isFinal:!0,isCommentRequired:!0,numericPriority:4,role:null},featureOpen=_.extend(_.clone(open),{id:11,entityType:featureEntityType,role:qaRole}),featureDone=_.extend(_.clone(inProgress),{id:12,entityType:featureEntityType,role:devRole});return[_(planned).extend({nextStates:[_(open).clone(),_(done).clone()]}),_(open).extend({nextStates:[_(inProgress).clone(),_(done).clone()]}),_(inProgress).extend({nextStates:[_(done).clone(),_(open).clone()]}),_(done).extend({nextStates:[]}),featureOpen,featureDone]},registerData:function(entityList){_.each(entityList,function(entity){this.data.push(entity)},this)},initDefaultData:function(){this.registerData(this.getRoles()),this.registerData(this.getUsers()),this.registerData(this.getEntityStates()),this.registerData(this.getFeatures()),this.registerData(this.getImpediments()),this.registerData(this.getProjects()),this.registerData(this.getPriorities()),this.registerData(this.getProcesses()),this.registerData(this.getSeverities()),this.registerData(this.getImpediments()),this.registerData(this.getTestPlanRuns()),this.registerData(this.getTestCases()),this.registerData(this.getTestPlans()),this.registerData(this.getBugs()),this.registerData(this.getUserStories()),this.registerData(this.getIterations()),this.registerData(this.getBuilds()),this.registerData(this.getProcesses()),this.registerData(this.getEntityTypes()),this.registerData(this.getTimes()),this.registerData(this.getRevisions()),this.initRelations()},initRelations:function(){this.addProjectToUserStories(),this.addUserStoriesAndBugsToIterations()},addUserStoriesAndBugsToIterations:function(){var iteration=this.getData().find(function(entity){return entity.__type=="iteration"});iteration.userStories=this.getUserStoriesRefs(),iteration.bugs=this.getBugsRefs()},addProjectToUserStories:function(){var projects=_.select(this.data,function(entity){return entity.__type==="project"});_.each(this.data,function(entity){entity.__type==="userStory"&&(entity.project={id:projects[0].id,__type:projects[0].__type})},this)},emptyProperty:function(type,property){_.each(this.data,function(entity){entity.__type==type&&entity.hasOwnProperty(property)&&(entity[property]=null)})},removeReleases:function(){this.emptyProperty("project","releases"),this.emptyProperty("userStory","release"),this.emptyProperty("bug","release")},removeBugsFromIteration:function(){this.emptyProperty("iteration","bugs")},removeIterations:function(){this.emptyProperty("project","iterations")},removeUserStoriesFromProject:function(){this.emptyProperty("project","userStories"),this.emptyProperty("bug","userStory"),this.emptyProperty("iteration","userStories")},removeFeatures:function(){this.emptyProperty("project","features")},clear:function(){this.initDataArray()},getData:function(){return this.data}})})