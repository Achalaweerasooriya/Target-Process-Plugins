define(["Underscore","tau/core/class","libs/underscore"],function(a,b){return b.extend({initDataArray:function(){this.data=[],this.data.find=function(b){return a.find(this,b)},this.data.selectByType=function(b){return a.select(this,function(a){return a.__type==b})}},init:function(){this.initDataArray()},getRoles:function(){return[{id:1,name:"Developer",isPair:!0,hasEffort:!0,__type:"role"},{id:2,name:"Project Manager",__type:"role",hasEffort:!0,isPair:!1},{id:3,name:"Top Manager",__type:"role",hasEffort:!0,isPair:!1},{id:4,name:"QA Engineer",__type:"role",hasEffort:!0,isPair:!1}]},getTypes:function(){return[{__type:"entityType",id:15,name:"Bug"}]},getFeatures:function(){return[{__type:"feature",id:53,name:"Define Space Constants",project:{id:1}},{__type:"feature",id:91,name:"Celestial Bodies Creation",project:{id:1}},{__type:"feature",id:137,name:"Complex 3D Demo",project:{id:1}},{__type:"feature",id:169,name:"The Big Bang Setup",project:{id:1}},{__type:"feature",id:223,name:"Lakes and Rivers",project:{id:1}},{__type:"feature",id:251,name:"Licensing",project:{id:1}},{__type:"feature",id:264,name:"Space machines",project:{id:1}},{__type:"feature",id:331,name:"Define Space Constants",project:{id:2}},{__type:"feature",id:369,name:"Celestial Bodies Creation",project:{id:2}},{__type:"feature",id:415,name:"Complex 3D Demo",project:{id:2}},{__type:"feature",id:447,name:"The Big Bang Setup",project:{id:2}},{__type:"feature",id:499,name:"Lakes and Rivers",project:{id:2}},{__type:"feature",id:527,name:"Licensing",project:{id:2}},{__type:"feature",id:540,name:"Space machines",project:{id:2}}]},getPriorities:function(){return[{__type:"priority",id:1,name:"Must Have",importance:1,endDate:"/Date(1304542800000+0300)/",entityType:{id:15}},{__type:"priority",id:2,name:"Low",importance:2,endDate:"/Date(1304542800000+0300)/",entityType:{id:15}},{__type:"priority",id:3,name:"Medium",importance:3,endDate:"/Date(1304542800000+0300)/",entityType:{id:15}}]},getPriorities:function(){return[{__type:"priority",id:1,name:"Must Have",importance:1,endDate:"/Date(1304542800000+0300)/",entityType:{id:15}},{__type:"priority",id:2,name:"Low",importance:2,endDate:"/Date(1304542800000+0300)/",entityType:{id:15}},{__type:"priority",id:3,name:"Medium",importance:3,endDate:"/Date(1304542800000+0300)/",entityType:{id:15}}]},getSeverities:function(){return[{__type:"severity",id:1,name:"Enhancement",importance:1},{__type:"severity",id:2,name:"Critical",importance:2},{__type:"severity",id:3,name:"Normal",importance:3},{__type:"severity",id:4,name:"Small",importance:4}]},getUsers:function(){return[{id:1,__type:"user",firstName:"Administrator",lastName:"Administrator",isActive:!0,kind:"user"},{id:254,__type:"user",firstName:"John",lastName:"Brown",isActive:!0,kind:"user"},{id:255,__type:"user",firstName:"Tod",lastName:"Black",isActive:!0,kind:"user"},{id:256,__type:"user",firstName:"Andrew",lastName:"Gray",isActive:!0,kind:"user"},{id:257,__type:"user",firstName:"Sandra",lastName:"Red",isActive:!0,kind:"user"},{id:258,__type:"user",firstName:"Jack",lastName:"Blue",isActive:!0,kind:"user"},{id:259,__type:"user",firstName:"Sam",lastName:"Yellow",isActive:!0,kind:"user"},{id:260,__type:"user",firstName:"Tanya",lastName:"White",isActive:!0,kind:"user"},{id:5656,__type:"user",firstName:"Not activated",lastName:"user",isActive:!1,kind:"user"}]},createRef:function(a){return{id:a.id,__type:a.__type}},getUserStories:function(){var a=this.getRoles(),b=this.getUsers(),c={__type:"userStory",id:150,name:"User Story",endDate:"/Date(1304542800000+0300)/",assignments:[{id:250},{id:251},{id:252}],project:{id:1},"tasks-count":4,"tasks-effort-sum":18.21111,"tasks-effortToDo-sum":12.2111,effort:25.11111,effortToDo:98.51111,roleEfforts:[{id:350,effortToDo:15.555,effort:20},{id:351,effortToDo:8,effort:15}]};c.assignments[0].role=this.createRef(a[0]),c.assignments[0].generalUser=this.createRef(b[1]),c.assignments[2].role=this.createRef(a[0]),c.assignments[2].generalUser=this.createRef(b[4]),c.assignments[1].role=this.createRef(a[3]),c.assignments[1].generalUser=this.createRef(b[3]),c.roleEfforts[0].role=this.createRef(a[0]),c.roleEfforts[1].role=this.createRef(a[3]),c.owner=b[2];return[{__type:"userStory",id:99,name:"Investigate frameworks",project:{id:1},endDate:"/Date(1304542800000+0300)/"},{__type:"userStory",id:100,name:"Create Architecture",project:{id:1},endDate:"/Date(1304542800000+0300)/"},{__type:"userStory",id:101,name:"Creat stories",project:{id:1},endDate:"/Date(1304542800000+0300)/"},c]},getIterations:function(){return[{__type:"iteration",id:369,name:"Iteration #2.1",startDate:"/Date(1304512800000+0300)/",endDate:"/Date(1304542800000+0300)/",release:{id:367,name:"Beta Version",__type:"release"}},{__type:"iteration",id:186,name:"Iteration #3.1",startDate:"/Date(1304512800000+0300)/",endDate:"/Date(1304542800000+0300)/",release:{id:1169,name:"Gold",__type:"release"}},{__type:"iteration",id:509,name:"Iteration #3.2",startDate:"/Date(1304512800000+0300)/",endDate:"/Date(1304542800000+0300)/",release:{id:1169,name:"Gold",__type:"release"}},{__type:"iteration",id:531,name:"Iteration #3.3",startDate:"/Date(1304512800000+0300)/",endDate:"/Date(1307600546000+0300)/",release:{id:1169,name:"Gold",__type:"release"}},{__type:"iteration",id:694,name:"Iteration #4.1",startDate:"/Date(1307610546000+0300)/",endDate:"/Date(1307700546000+0300)/",release:{id:1262,name:"Feature",__type:"release"}}]},getProcesses:function(){return[{__type:"process",id:1,name:"Kanban",terms:[{name:"Bug",value:"Issue"},{name:"Bugs",value:"Issues"}],practices:[{id:1,name:"Planning",effortPoints:"Hour",isStoryEffortEqualsSumTasksEffort:!1},{id:2,name:"Time Tracking",isCloseAssignableIfZeroTimeRemaining:!1,isTimeDescriptionFieldVisible:!0,isTimeDescriptionRequired:!0,isRequiredShowRoleDropDown:!1},{id:3,name:"Bug Tracking"},{id:4,name:"Requirements"},{id:6,name:"Test Cases"},{id:7,name:"Source Control"},{id:8,name:"Help Desk"},{id:9,name:"Iterations"}],customFields:[{entityKind:"UserStory",name:"CF Text",type:"Text",required:!0,listed:!0},{entityKind:"UserStory",name:"CF Text Empty",type:"Text",required:!0,listed:!0},{entityKind:"UserStory",name:"CF Rich",type:"RichText",required:!1,listed:!1},{entityKind:"UserStory",name:"CF Rich Empty",type:"RichText",required:!1,listed:!1},{entityKind:"UserStory",name:"CF DropDownList",type:"DropDown",required:!1,listed:!1,value:"1\r\n2\r\n3\r\n4"},{entityKind:"UserStory",name:"CF DropDownList Empty",type:"DropDown",required:!1,listed:!1,value:"1\r\n2\r\n3\r\n4"},{entityKind:"UserStory",name:"CF Check Box",type:"CheckBox",required:!1,listed:!1},{entityKind:"UserStory",name:"CF Check Box Empty",type:"CheckBox",required:!1,listed:!1},{entityKind:"UserStory",name:"CF URL",type:"URL",required:!1,listed:!1},{entityKind:"UserStory",name:"CF URL Empty",type:"URL",required:!1,listed:!1},{entityKind:"UserStory",name:"CF Date",type:"Date",required:!1,listed:!1},{entityKind:"UserStory",name:"CF Date Empty",type:"Date",required:!1,listed:!1},{entityKind:"UserStory",name:"CF Number",type:"Number",required:!1,listed:!1},{entityKind:"UserStory",name:"CF Number Empty",type:"Number",required:!1,listed:!1},{entityKind:"UserStory",name:"CF TargetProcessEntity",type:"Entity",required:!1,listed:!1},{entityKind:"UserStory",name:"CF TargetProcessEntity Empty",type:"Entity",required:!1,listed:!1},{entityKind:"UserStory",name:"CF Rich2",type:"RichText",required:!1,listed:!1},{entityKind:"UserStory",name:"CF Rich2 Empty",type:"RichText",required:!1,listed:!1}]},{__type:"process",id:2,name:"No Requirements",terms:[{name:"Bug",value:"Issue"},{name:"Bugs",value:"Issues"}],practices:[{id:1,name:"Planning",effortPoints:"Hour",isStoryEffortEqualsSumTasksEffort:!1},{id:2,name:"Time Tracking",isCloseAssignableIfZeroTimeRemaining:!1,isTimeDescriptionFieldVisible:!0,isTimeDescriptionRequired:!0,isRequiredShowRoleDropDown:!1},{id:3,name:"Bug Tracking"},{id:6,name:"Test Cases"},{id:7,name:"Source Control"},{id:8,name:"Help Desk"},{id:9,name:"Iterations"}],customFields:null}]},getProjects:function(){var b=this.getUsers(),c=this.getRoles(),d=this.getReleases(),e=this.getIterations(),f=this.getUserStories(),g=this.getProcesses(),h=this.getFeatures();return[{id:1,__type:"project",name:"Private Universe #1",releases:d,iterations:e,userStories:f,features:a.select(h,function(a,b){return b<7}),process:g[0],projectMembers:[{id:95,user:this.createRef(b[1]),role:this.createRef(c[1])},{id:96,user:this.createRef(b[2]),role:this.createRef(c[3])},{id:97,user:this.createRef(b[3]),role:this.createRef(c[2])},{id:98,user:this.createRef(b[4]),role:this.createRef(c[0])},{id:99,user:this.createRef(b[5]),role:this.createRef(c[1])},{id:100,user:this.createRef(b[6]),role:this.createRef(c[0])},{id:101,user:this.createRef(b[7]),role:this.createRef(c[3])},{id:102,user:this.createRef(b[0]),role:this.createRef(c[0])},{id:103,user:this.createRef(b[8]),role:this.createRef(c[0])}]},{id:2,__type:"project",name:"No requirements project",releases:d,iterations:e,userStories:[],features:a.select(h,function(a,b){return b>=7&&b<13}),process:g[1],projectMembers:[]},{id:3,__type:"project",name:"Project without features",releases:d,iterations:e,userStories:null,features:[],process:g[0],projectMembers:[]},{id:4,__type:"project",name:"Second project with features",releases:d,iterations:e,userStories:[],features:a.select(h,function(a,b){return b>=7&&b<13}),process:g[0],projectMembers:[]}]},getReleases:function(){return[{__type:"release",id:987,name:"Demo",startDate:"/Date(1292002100000+0300)/",endDate:"/Date(1294002100000+0300)/"},{__type:"release",id:1061,name:"Beta Version",startDate:"/Date(1309542300000+0300)/",endDate:"/Date(1309942300000+0300)/"},{__type:"release",id:1169,name:"Gold",startDate:"/Date(1304542400000+0300)/",endDate:"/Date(1304542500000+0300)/"},{__type:"release",id:1262,name:"Feature",startDate:"/Date(1306600546000+0300)/",endDate:"/Date(1308600546000+0300)/"}]},getBugs:function(){var a=this.getReleases(),b=this.getRoles(),c=this.getUsers(),d=this.getIterations(),e=this.getPriorities(),f=this.getUserStories(),g=this.getSeverities(),h=this.getFeatures(),i=this.getTypes(),j=this.getProjects()[0],k=this.getEntityStates(),l={__type:"bug",id:25,entityType:i[0],entityState:k[0],release:a[0],iteration:d[0],priority:e[0],userStory:f[0],severity:g[0],feature:h[0],createDate:"/Date(1318855726000+0300)/",endDate:"/Date(1318506969000+0300)/",project:{id:j.id},assignments:[],roleEfforts:[],effortCompleted:50,effortToDo:50,timeSpent:4,timeRemain:4},m={__type:"bug",id:26,entityType:i[0],entityState:k[0],release:null,iteration:null,priority:null,userStory:null,feature:null,project:{id:j.id},severity:null,assignments:[],roleEfforts:[],effortCompleted:0,effortToDo:4,timeSpent:0,timeRemain:4},n={__type:"bug",id:27,entityState:k[3],release:null,iteration:null,priority:null,userStory:null,feature:null,project:{id:j.id},createDate:"/Date(1318506969000+0300)/",endDate:null,severity:null,assignments:[],roleEfforts:[]};l.assignments[0]={id:15,role:this.createRef(b[3]),generalUser:this.createRef(c[0])},l.assignments[2]={id:16,role:this.createRef(b[3]),generalUser:this.createRef(c[3])},l.assignments[1]={id:17,role:this.createRef(b[1]),generalUser:this.createRef(c[2])},l.roleEfforts[0]={id:350,effortToDo:15.555,effort:20,role:this.createRef(b[3])},l.roleEfforts[1]={id:351,effortToDo:8,effort:15,role:this.createRef(b[1])},l.owner=c[1];return[l,m,n]},getEntityStates:function(){var b={__type:"entityState",id:1,name:"Planned",isInitial:!0,isFinal:!1,isCommentRequired:!1},c={__type:"entityState",id:2,name:"Open",isInitial:!1,isFinal:!1,isCommentRequired:!1},d={__type:"entityState",id:3,name:"In Progress",isInitial:!1,isFinal:!1,isCommentRequired:!1},e={__type:"entityState",id:4,name:"Done",isInitial:!1,isFinal:!0,isCommentRequired:!0};return[a(b).extend({nextStates:[a(c).clone(),a(e).clone()]}),a(c).extend({nextStates:[a(d).clone(),a(e).clone()]}),a(d).extend({nextStates:[a(e).clone(),a(c).clone()]}),a(e).extend({nextStates:[]})]},registerData:function(b){a.each(b,function(a){this.data.push(a)},this)},initDefaultData:function(){this.registerData(this.getRoles()),this.registerData(this.getUsers()),this.registerData(this.getEntityStates()),this.registerData(this.getProjects()),this.registerData(this.getPriorities()),this.registerData(this.getProcesses()),this.registerData(this.getSeverities()),this.registerData(this.getBugs()),this.registerData(this.getUserStories()),this.initRelations()},initRelations:function(){this.addProjectToUserStories()},addProjectToUserStories:function(){var b=a.select(this.data,function(a){return a.__type==="project"});a.each(this.data,function(a){a.__type==="userStory"&&(a.project={id:b[0].id,__type:b[0].__type})},this)},emptyProperty:function(b,c){a.each(this.data,function(a){a.__type==b&&a.hasOwnProperty(c)&&(a[c]=null)})},removeReleases:function(){this.emptyProperty("project","releases"),this.emptyProperty("userStory","release"),this.emptyProperty("bug","release")},removeIterations:function(){this.emptyProperty("project","iterations")},removeUserStoriesFromProject:function(){this.emptyProperty("project","userStories"),this.emptyProperty("bug","userStory")},removeFeatures:function(){this.emptyProperty("project","features")},clear:function(){this.initDataArray()},getData:function(){return this.data}})})