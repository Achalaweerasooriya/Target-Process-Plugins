function startEditDate(){var a=this.element;a.click();var b=a.find("input.hasDatepicker");return b}define(["jQuery","tau/configurator","tests/common/testCase","tests/common/componentConfigCreator","tau/components/component.property.completeDate","tests/common/testData.Generator"],function($,a,b,c,d,e){var f=function(){var f=new e;f.initDefaultData();var g=f.getData(),h=f.getBugs()[0],i=new c;i.setEntityIDAndType(h.id,h.__type),i.setSelectedProjects([g.selectByType("project")[0]]),i.setProcesses(g.selectByType("process"));var j=i.getConfig();j.editable=!0;var k=new b("[component.completeDate]");k.initModule({componentConfig:j,data:g},d),k.test("should render valid markup",function(){var a=this.element;equal(a.find(".property-text").text(),"13-Oct-2011","Complete Date name"),a.click(),equal(a.find(".external-view").size(),0,"Url is not added")}),k.test("should refresh when completeDate is changed",function(){var b=this.element,c=new Date;this.serviceMock.registerSaveCommand({config:{id:h.id,$set:{endDate:c.toString()},fields:["id"]},returnedData:{id:h.id,endDate:"/Date(1319124023000+0300)/"}}),a.getStore().save(h.__type,{id:h.id,$set:{endDate:c.toString()}}).done();var b=this.element;equal(b.find(".property-text").text(),"20-Oct-2011","Complete Date name"),equal(b.find(".external-view").size(),0,"Url is not added")}),k.test("should not save if date is not changed",function(){var a=this.element,b=startEditDate.call(this);equal(b.size(),1,"Input is created"),b.val(" "+b.val()),$("body").click(),b=startEditDate.call(this);var c=b.val();b.val(c+" 20:00"),$("body").click(),b=startEditDate.call(this),b.val(c),$("body").click(),equal(this.element.find(".property").text(),c,"Values is valid"),equal(this.element.find(".property").hasClass("ui-validationerror"),!1,"Values is valid"),equal(a.find("input.hasDatepicker").size(),1,"Input is removed")}),k.test("should change",function(){var a=this.element,b=new Date;this.serviceMock.registerSaveCommand({config:{id:h.id,$set:{endDate:"25-Dec-2011 00:00"},fields:["id","endDate"]},returnedData:{id:h.id,endDate:"/Date(1319124023000+0300)/"}});var a=this.element;a.click();var c=a.find("input.hasDatepicker");equal(c.size(),1,"Input is created"),c.val("25-Dec-2011"),$("body").click(),a=this.element,equal(a.find(".property-text").text(),"20-Oct-2011","Complete Date name"),equal(a.find(".external-view").size(),0,"Url is not added")})};return{run:f}})