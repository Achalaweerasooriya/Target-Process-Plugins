define(["Underscore","tau/core/event"],function(_,a){var b=function(b,c){var d={order:[],args:{},counts:{},initEvt:function(a){this.counts.hasOwnProperty(a)||(this.counts[a]=0)},regEvt:function(a,b){this.order.push(a),this.counts[a]=1+this.counts[a],this.args[a]=b}},e={bus:b};return _.each(c,function(a){d.initEvt(a),e["bus "+a+" 1"]=function(b){d.regEvt(a,b.data||b)}}),a.subscribeOn(e),d},c=function(a,b,c){_.each(a,function(a){equals(b.counts[a],1,"Count of event '"+a+"' is valid for "+c)})},d=function(b,c,d,e){var f={bus:b,"bus afterInit":function(){equals(e.counts.afterInit,0,"no after init for container")},"bus initialize":function(a){var b=a.data,e=c;e.context=d,same(b,e,"Initialization config for first component")},"bus afterRender":function(){equals(e.counts.afterRender,0,"no after render for container")}};a.subscribeOn(f)};return{createDispatcher:b,verifyLifeCycle:c,dispatchChild:d}})