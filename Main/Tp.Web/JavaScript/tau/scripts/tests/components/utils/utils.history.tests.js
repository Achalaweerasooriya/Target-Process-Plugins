define(["tau/configurator","tau/utils/utils.history"],function(a,b){var c=function(){module("[utils.history] tests"),test("should allow to add, remove, move",function(){var a=new b;equals(a.size(),0,"Zero on start"),a.push({title:"Preved",url:"preved/medved"}),equals(a.size(),1,"Add item"),a.push({title:"Preved2",url:"preved/medved2"}),a.push({title:"Preved3",url:"preved/medved3"});var c=a.pop(),d=a.pop();equals(a.size(),1,"Remove items"),equals(c.title,"Preved3","Pop item"),equals(d.title,"Preved2","Pop item"),a.setCurrent({title:"Zhopa",url:"zhopa/main"}),equals(a.size(),1,"Current doesnt add to stack"),a.process(),equals(a.size(),2,"Add current to history"),equals(a.getCurrent(),null,"Empty current"),c=a.pop(),equals(c.title,"Zhopa","Current last to history"),a=new b,equals(a.size(),0,"Zero on start"),a.process(),equals(a.size(),0,"Empty history"),a=new b,a.setCurrent({title:"Zhopa",url:"zhopa/main"}),a.updateCurrent({title:"zz"}),equals(a.getCurrent().title,"zz","Update current"),a=new b,a.setCurrent({id:1,title:"Zhopa",url:"zhopa/main"}),a.process(),a.setCurrent({id:2,title:"Zhopa2",url:"zhopa/main2"}),a.process(),a.setCurrent({id:1,title:"Zhopa",url:"zhopa/main"}),a.exclude(1),equals(a.getCurrent(),null,"Exclude from hist by id"),equals(a.size(),1,"Exclude from hist by id")})};return{run:c}})