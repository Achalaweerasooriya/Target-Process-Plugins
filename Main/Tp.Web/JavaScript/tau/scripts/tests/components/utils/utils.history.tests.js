define(["tau/configurator","tau/utils/utils.history"],function(configurator,History){var innerRun=function(){module("[utils.history] tests"),test("should allow to add, remove, move",function(){var history=new History;equals(history.size(),0,"Zero on start"),history.push({title:"Preved",url:"preved/medved"}),equals(history.size(),1,"Add item"),history.push({title:"Preved2",url:"preved/medved2"}),history.push({title:"Preved3",url:"preved/medved3"});var a=history.pop(),b=history.pop();equals(history.size(),1,"Remove items"),equals(a.title,"Preved3","Pop item"),equals(b.title,"Preved2","Pop item"),history.setCurrent({title:"Zhopa",url:"zhopa/main"}),equals(history.size(),1,"Current doesnt add to stack"),history.process(),equals(history.size(),2,"Add current to history"),equals(history.getCurrent(),null,"Empty current"),a=history.pop(),equals(a.title,"Zhopa","Current last to history"),history=new History,equals(history.size(),0,"Zero on start"),history.process(),equals(history.size(),0,"Empty history"),history=new History,history.setCurrent({title:"Zhopa",url:"zhopa/main"}),history.updateCurrent({title:"zz"}),equals(history.getCurrent().title,"zz","Update current"),history=new History,history.setCurrent({id:1,title:"Zhopa",url:"zhopa/main"}),history.process(),history.setCurrent({id:2,title:"Zhopa2",url:"zhopa/main2"}),history.process(),history.setCurrent({id:1,title:"Zhopa",url:"zhopa/main"}),history.exclude(1),equals(history.getCurrent(),null,"Exclude from hist by id"),equals(history.size(),1,"Exclude from hist by id")})};return{run:innerRun}})