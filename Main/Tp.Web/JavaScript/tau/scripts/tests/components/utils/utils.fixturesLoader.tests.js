define(["tau/configurator","tau/utils/utils.fixturesLoader"],function(a,b){var c=function(){module("[utils.fixturesLoader] tests"),test("should allow to load one",function(){var a=new b,c=a.load({bug:{b1:{name:"Evil Bug"}}});jqMock.assertThat(c,{bug:{b1:jqMock.is.objectThatIncludes({id:null,name:"Evil Bug",createDate:null,release:null,assignments:[]})}},"Return correct load"),jqMock.assertThat(c,{bug:{b1:jqMock.is.not(jqMock.is.objectThatIncludes({__type:"bug"}))}},"Return correct load without __type");var a=new b({generateId:!0,setType:!0}),c=a.load({bug:{b1:{name:"Evil Bug"}}});jqMock.assertThat(c,{bug:{b1:jqMock.is.objectThatIncludes({id:jqMock.is.custom(function(a){return _.isNumber(a)}),__type:"bug",name:"Evil Bug",createDate:null,release:null,assignments:[]})}},"Return correct load with id and __type")}),test("should allow to load short",function(){var a=new b,c=a.load({bugs:{b1:"Evil Bug"}});jqMock.assertThat(c,{bug:{b1:jqMock.is.objectThatIncludes({name:"Evil Bug",createDate:null,release:null,assignments:[]})}},"Return correct load")}),test("should allow to load collections",function(){var a=new b,c=a.load({bugs:{b1:"Evil Bug",b2:"Good Bug"},tasks:{t1:"Good Task"}});jqMock.assertThat(c,{bug:{b1:jqMock.is.objectThatIncludes({name:"Evil Bug",createDate:null}),b2:jqMock.is.objectThatIncludes({name:"Good Bug",createDate:null})},task:{t1:jqMock.is.objectThatIncludes({name:"Good Task"})}},"Return correct load")}),test("should allow to load with refs",function(){var a=new b,c=a.load({userStories:{us1:{name:"Big Story",tasks:["t2"],feature:"f1"}},task:{t1:"Cool task",t2:{name:"Big Day",createDate:"12-Dec-2012"}},feature:{f1:"World Dominance"}});jqMock.assertThat(c,{userStory:{us1:jqMock.is.objectThatIncludes({name:"Big Story",createDate:null,tasks:[jqMock.is.objectThatIncludes({name:"Big Day",createDate:"12-Dec-2012"})],release:null,feature:jqMock.is.objectThatIncludes({name:"World Dominance"})})},task:{t1:jqMock.is.objectThatIncludes({name:"Cool task",createDate:null}),t2:jqMock.is.objectThatIncludes({name:"Big Day",createDate:"12-Dec-2012"})},feature:{f1:jqMock.is.objectThatIncludes({name:"World Dominance"})}},"Return correct load refs")}),test("should allow to set additional fielsds",function(){var a=new b,c=a.load({bug:{b1:{name:"Evil Bug",something:"yeah"}}});jqMock.assertThat(c,{bug:{b1:jqMock.is.objectThatIncludes({id:null,name:"Evil Bug",createDate:null,release:null,assignments:[]})}},"Return correct load"),jqMock.assertThat(c,{bug:{b1:jqMock.is.not(jqMock.is.objectThatIncludes({something:"yeah"}))}},"Return correct load without additional fields");var a=new b({copyAdditionalFields:!0}),c=a.load({bug:{b1:{name:"Evil Bug",something:"yeah"}}});jqMock.assertThat(c,{bug:{b1:jqMock.is.objectThatIncludes({name:"Evil Bug",something:"yeah",createDate:null,release:null,assignments:[]})}},"Return correct load with additional fields")}),test("should allow to load with refs and backRefs",function(){var a={userStories:{us1:{name:"Big Story",tasks:["t2"],feature:"f1"}},task:{t1:"Cool task",t2:{name:"Big Day",createDate:"12-Dec-2012"}},feature:{f1:"World Dominance"}},c=new b,d=c.load(a);jqMock.assertThat(d,{userStory:{us1:jqMock.is.objectThatIncludes({name:"Big Story",createDate:null,tasks:[jqMock.is.objectThatIncludes({name:"Big Day",createDate:"12-Dec-2012"})],release:null,feature:jqMock.is.objectThatIncludes({name:"World Dominance"})})},task:{t1:jqMock.is.objectThatIncludes({name:"Cool task",createDate:null}),t2:jqMock.is.objectThatIncludes({name:"Big Day",createDate:"12-Dec-2012",userStory:null})},feature:{f1:jqMock.is.objectThatIncludes({name:"World Dominance"})}},"No back refs bt default"),c=new b({setBackRefs:!0}),d=c.load(a),jqMock.assertThat(d,{userStory:{us1:jqMock.is.objectThatIncludes({name:"Big Story",createDate:null,tasks:[jqMock.is.objectThatIncludes({name:"Big Day",createDate:"12-Dec-2012"})],release:null,feature:jqMock.is.objectThatIncludes({name:"World Dominance"})})},task:{t1:jqMock.is.objectThatIncludes({name:"Cool task",createDate:null}),t2:jqMock.is.objectThatIncludes({name:"Big Day",createDate:"12-Dec-2012",userStory:jqMock.is.objectThatIncludes({name:"Big Story"})})},feature:{f1:jqMock.is.objectThatIncludes({name:"World Dominance"})}},"Return correct load refs")})};return{run:c}})