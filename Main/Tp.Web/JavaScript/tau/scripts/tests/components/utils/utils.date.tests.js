define(["tau/configurator","tau/utils/utils.date"],function(configurator,DateUtil){var innerRun=function(){module("[utils.date] tests"),test("should allow to get age",function(){configurator.setCurrentDate(DateUtil.parse("1-Jan-2012 00:00"));var date="1-Jan-2010";equals(DateUtil.getAge(date).toString(),"2 years ago");var date="5-Jan-2010";equals(DateUtil.getAge(date).toString(),"2 years ago");var date="31-Dec-2009";equals(DateUtil.getAge(date).toString(),"2 years ago");var date="1-Jan-2011";equals(DateUtil.getAge(date).toString(),"1 year ago");var date="2-Jan-2011";equals(DateUtil.getAge(date).toString(),"11 months ago");var date="1-Feb-2011";equals(DateUtil.getAge(date).toString(),"11 months ago");var date="2-Feb-2011";equals(DateUtil.getAge(date).toString(),"11 months ago");var date="31-Jan-2011";equals(DateUtil.getAge(date).toString(),"11 months ago");var date="1-Dec-2011";equals(DateUtil.getAge(date).toString(),"1 month ago");var date="20-Nov-2011 ";equals(DateUtil.getAge(date).toString(),"1 month ago");var date="30-Nov-2011 23:59";equals(DateUtil.getAge(date).toString(),"1 month ago");var date="2-Dec-2011";equals(DateUtil.getAge(date).toString(),"30 days ago");var date="31-Dec-2011 23:00:00";equals(DateUtil.getAge(date).toString(),"1 hour ago");var date="31-Dec-2011 20:00:00";equals(DateUtil.getAge(date).toString(),"4 hours ago");var date="31-Dec-2011 20:29:00";equals(DateUtil.getAge(date).toString(),"4 hours ago");var date="31-Dec-2011 20:31:00";equals(DateUtil.getAge(date).toString(),"3 hours ago");var date="31-Dec-2011 23:45:00";equals(DateUtil.getAge(date).toString(),"15 min ago");var date="31-Dec-2011 23:59:55";equals(DateUtil.getAge(date).toString(),"5 sec ago");var date="31-Dec-2011 23:59:05";equals(DateUtil.getAge(date).toString(),"55 sec ago");var date="31-Dec-2011 23:58:55";equals(DateUtil.getAge(date).toString(),"1 min ago")}),test("should allow to get age specific",function(){configurator.setCurrentDate(DateUtil.parse("1-Jan-2012 17:32"));var date="1-Jan-2012 12:53";equals(DateUtil.getAge(date).toString(),"5 hours ago")}),test("should format date",function(){var date=DateUtil.parse("1 Jan 2012 11:44 pm");equals(DateUtil.format.date.short(date),"1-Jan-2012"),equals(DateUtil.format.time.short(date),"23:44"),equals(DateUtil.format.datetime.short(date),"1-Jan-2012 23:44"),equals(DateUtil.format.date.short("preved"),"")}),test("should parse date",function(){equals(DateUtil.parse("preved"),null,"date"),equals(DateUtil.parse(new Date("12 Jan 2011")).toString(),(new Date("12 Jan 2011")).toString(),"date"),equals(DateUtil.parse("12-Jan-2011").toString(),(new Date("12 Jan 2011")).toString(),"date")})};return{run:innerRun}})