define(["tau/configurator","tau/utils/utils.date"],function(a,b){var c=function(){module("[utils.date] tests"),test("should allow to get age",function(){a.setCurrentDate(Date.parse("1-Jan-2012 00:00"));var c="1-Jan-2010";equals(b.getAge(c).toString(),"2 years ago");var c="5-Jan-2010";equals(b.getAge(c).toString(),"2 years ago");var c="31-Dec-2009";equals(b.getAge(c).toString(),"3 years ago");var c="1-Jan-2011";equals(b.getAge(c).toString(),"1 year ago");var c="2-Jan-2011";equals(b.getAge(c).toString(),"11 months ago");var c="1-Feb-2011";equals(b.getAge(c).toString(),"11 months ago");var c="2-Feb-2011";equals(b.getAge(c).toString(),"11 months ago");var c="31-Jan-2011";equals(b.getAge(c).toString(),"11 months ago");var c="1-Dec-2011";equals(b.getAge(c).toString(),"1 month ago");var c="20-Nov-2011 ";equals(b.getAge(c).toString(),"2 months ago");var c="30-Nov-2011 23:59";equals(b.getAge(c).toString(),"2 months ago");var c="2-Dec-2011";equals(b.getAge(c).toString(),"30 days ago");var c="31-Dec-2011 23:00:00";equals(b.getAge(c).toString(),"1 hour ago");var c="31-Dec-2011 20:00:00";equals(b.getAge(c).toString(),"4 hours ago");var c="31-Dec-2011 20:29:00";equals(b.getAge(c).toString(),"4 hours ago");var c="31-Dec-2011 20:31:00";equals(b.getAge(c).toString(),"4 hours ago");var c="31-Dec-2011 23:45:00";equals(b.getAge(c).toString(),"15 min ago");var c="31-Dec-2011 23:59:55";equals(b.getAge(c).toString(),"5 sec ago");var c="31-Dec-2011 23:59:05";equals(b.getAge(c).toString(),"55 sec ago");var c="31-Dec-2011 23:58:55";equals(b.getAge(c).toString(),"2 min ago")}),test("should allow to get age specific",function(){a.setCurrentDate(Date.parse("1-Jan-2012 17:32"));var c="1-Jan-2012 12:53";equals(b.getAge(c).toString(),"5 hours ago")}),test("should format date",function(){var a=b.parse("1 Jan 2012 11:44 pm");equals(b.format.date.short(a),"1-Jan-2012"),equals(b.format.time.short(a),"23:44"),equals(b.format.datetime.short(a),"1-Jan-2012 23:44"),equals(b.format.date.short("preved"),"")}),test("should parse date",function(){equals(b.parse("preved"),null,"date"),equals(b.parse(new Date("12 Jan 2011")).toString(),(new Date("12 Jan 2011")).toString(),"date"),equals(b.parse("12-Jan-2011").toString(),(new Date("12 Jan 2011")).toString(),"date")})};return{run:c}})