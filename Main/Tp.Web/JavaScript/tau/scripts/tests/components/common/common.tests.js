define(["Underscore"],function(_){var a=[],b=function(){var a=this;this.component.on("afterRender",function(b){a.$el=b.data.element}),this.component.on("dataBind",function(b){a.data=b.data})};return{addViewTestToArray:function(b){return a.concat(b)},addModelTestsToArray:function(a,b,c,d){var e=[{name:"model should return valid data on initialize",preSetup:function(a){a.mockRepository(this);var b=d||[];for(var e=0;e<b.length;e++)this.repositoryMock.expects().on(b[e],TypeOf.isA(Function)).andStub(this.repository.on.tauCreateDelegate(this.repository));var f=c.length;for(var g=0;g<f;g++)if(c[g]._operation=="on"){var h=this.repositoryMock.expects(),i=c[g].command;_.isArray(i)?h=h.on.apply(h,i):h=h.on(i,TypeOf.isA(Function)),h.andStub(this.repository.on.tauCreateDelegate(this.repository))}else this.repositoryMock.expects().execute(c[g]).andStub(this.repository.execute.tauCreateDelegate(this.repository))},setup:function(){var a=this;a.data={},this.component.on("dataBind",function(b){a.data=b.data})},test:function(){var a=this.data;same(a,b,"Data returned from model is valid")}}];return e.concat(a)},addPermissionTestToArray:function(a,b){var c=[{name:"should fire permissionsReady",setup:function(){var a=this;a.permissions={},this.component.on("permissionsReady",function(b){a.permissions=b.data})},test:function(){var a=this.permissions;same(a,b,"Permissions is valid")}}];return c.concat(a)},addUITestToArray:function(a,c,d){function e(a,b,c){a[c]&&(b[c]=a[c])}if(!c)return;for(var f=0,g=c.length;f<g;f++){var h={name:c[f].name,setup:c[f].setup||d||b,test:c[f].test};e(c[f],h,"context"),e(c[f],h,"preSetup"),e(c[f],h,"init"),a.push(h)}}}})