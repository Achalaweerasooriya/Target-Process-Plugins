define(["tau/core/tau","tau/components/extensions/redirect/extension.redirect","tau/components/component.redirect","tests/components/component.specs","tests/common/testData","tests/components/common/common.setup","tests/common/applicationContext","tau/configurator"],function(tau,ext,component,componentSpecs,testData,commonSetup,AppContext,configurator){configurator.setApplicationPath("/TP");var currentUrl=null;ext.prototype._redirect=function(url){currentUrl=url};var innerRun=function(){var context={context:{type:"bug",id:15}},config={to:"http://google.com"},testDataForTitle=testData.getTestDataForTitle(),setup=commonSetup.create("[component.redirect]",testDataForTitle,component,config),appContext=new AppContext(context),process=appContext.processes[0],project=appContext.selectedProjects[0],expected={entity:{__type:"bug",id:15,name:"BugName"},process:process,project:project,subPath:"Project/QA/Bug",appPath:"/TP"},expectedPermissions={editable:!0,deletable:!0},viewTests=[{name:"should redirect",test:function(){this.component.fire("redirect",{to:"http://twitter.com"}),equals(currentUrl,"http://twitter.com","Redirect to url")}}];componentSpecs.create(setup,context).viewShouldPassTests(viewTests).done()};return{run:innerRun}})