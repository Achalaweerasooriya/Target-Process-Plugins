define(["jQuery","tests/common/testkit","tau/configurator","tau/components/component.property.build","tau/components/component.finder"],function(a,b,c,d){var e=function(){var c=new b("[component.property.build]",d),e={p1:"Preved",p2:"Medved"},f={r1:"Release",r2:"Release2",r3:"Release3"},g={i1:"Iter1",i2:"Iter2"},h={b1:{name:"Build1",project:"p1",release:"r1"},b2:{name:"Build2",project:"p1",release:"r2",iteration:"i1"}},i={bug1:{name:"Bug 1",project:"p1",release:"r2",build:"b2"}},j=c.loadFixtures({projects:e,iterations:g,releases:f,builds:h,bugs:i});return c.setData(j),c.setEntity(j.bug.bug1),c.selectDefaultProject(),c.addTest({name:"should render valid markup",test:function(){var a=this.$el;equal(a.find(".tau-property__value").text(),"Build2")}}),c.addTest({name:"should change property dependant of project",test:function(){c.getService().registerFindCommand({config:{$skip:0,$limit:20,fields:["id","name",{project:["id","abbreviation"]}],$query:{"Project.Id":j.project.p1.id}},returnedData:[j.build.b1,j.build.b2]});var b=this.$el,d=b.find(".tau-property__value");d.click();var e=a(".tau-bubble");equal(e.size(),1,"Count of bubbles");var f=e.find(".tau-result-list-row");equals(f.length,2,"Options");var g=e.find(":text.filter-field");c.getService().registerFindCommand({config:{$skip:0,$limit:20,fields:["id","name",{project:["id","abbreviation"]}],$query:{name:{$contains:"preved"},"Project.Id":j.project.p1.id}},returnedData:[]}),g.val("preved"),g.trigger(jQuery.Event("keyup",{keyCode:jQuery.ui.keyCode.ENTER})),c.getService().verify()}}),c.run()};return{run:e}})