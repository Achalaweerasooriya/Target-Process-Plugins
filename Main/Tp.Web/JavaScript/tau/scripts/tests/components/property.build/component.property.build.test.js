define(["jQuery","tests/common/testkit","tau/configurator","tau/components/component.property.build","tau/components/component.finder"],function($,a,b,c){var d=function(){var b=new a("[component.property.build]",c),d={p1:"Preved",p2:"Medved"},e={r1:"Release",r2:"Release2",r3:"Release3"},f={i1:"Iter1",i2:"Iter2"},g={b1:{name:"Build1",project:"p1",release:"r1"},b2:{name:"Build2",project:"p1",release:"r2",iteration:"i1"}},h={bug1:{name:"Bug 1",project:"p1",release:"r2",build:"b2"}},i=b.loadFixtures({projects:d,iterations:f,releases:e,builds:g,bugs:h});return b.setData(i),b.setEntity(i.bug.bug1),b.selectDefaultProject(),b.addTest({name:"should render valid markup",test:function(){var a=this.$el;equal(a.find(".tau-property__value span").text(),"Build2")}}),b.addTest({name:"should change property dependant of project",test:function(){b.getService().registerFindCommand({config:{$skip:0,$limit:20,fields:["id","name",{project:["id","abbreviation"]}],$query:{"Project.Id":i.project.p1.id}},returnedData:[i.build.b1,i.build.b2]});var a=this.$el,c=a.find(".tau-property__value");c.click();var d=$(".tau-bubble");equal(d.size(),1,"Count of bubbles");var e=d.find(".tau-result-list-row");equals(e.length,2,"Options");var f=d.find(":text.filter-field");b.getService().registerFindCommand({config:{$skip:0,$limit:20,fields:["id","name",{project:["id","abbreviation"]}],$query:{name:{$contains:"preved"},"Project.Id":i.project.p1.id}},returnedData:[]}),f.val("preved"),f.trigger(jQuery.Event("keyup",{keyCode:jQuery.ui.keyCode.ENTER})),b.getService().verify()}}),b.run()};return{run:d}})