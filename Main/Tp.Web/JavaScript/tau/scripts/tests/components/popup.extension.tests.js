define(["Underscore","jQuery","tau/core/bus","tau/ui/extensions/popupEditorContainer.extension","tau/components/extensions/component.creator.extension","tests/components/component1","tests/components/component2","tests/components/utils/dispatcher"],function(_,$,a,b,c,d,e,f){var g=function(){module("[popup.extension]",{setup:function(){this.bus=new a,this.$element=$("<div><div class='popup-target1'></div><div class='popup-target2'></div><div class='popup-container'></div></div>"),new c({bus:this.bus}),this.popup=new b({bus:this.bus,element:this.$element,popupEditorContainer:[{targetSelector:".popup-target1",component:{path:"tests/components/component1",x:3,y:5}},{targetSelector:".popup-target2",component:{path:"tests/components/component2",z:9}}]}),this.popup.onEditActivated({element:this.$element})}}),test("attached to link",function(){ok(this.$element.find(".popup-target1").hasClass("ui-link"),"attached"),ok(this.$element.find(".popup-target2").hasClass("ui-link"),"attached")}),test("container rendered to popup-container",function(){this.$element.find(".popup-target1").click();var a=this.$element.find(".popup-target1").tauBubble("widget");equals(a.find(".component1").length,1,"component1 element is rendered"),this.$element.find(".popup-target2").click(),a=this.$element.find(".popup-target2").tauBubble("widget"),equals(a.find(".component2").length,1,"component2 element is rendered")})};return{run:g}})