define(["tau/components/extensions/context.convert.extension","tau/core/bus","tests/common/applicationContext.simple"],function(a,b,c){var d=function(){var d=function(){var a={configurator:{isBoardEdition:!1}};return a};module("[context.convert.extension]"),test("on create config event configuration is converted",function(){var e=new b,f=new a({bus:e,context:d()}),g=new c;g.selectDefaultProject(),g.excludePractices(["Test Cases"]),g=g.process();var h={children:[{type:"testCaseList",practices:["Test Cases"]}]};h.context=g,e.fire("onConfigContainerCreated",h),equals(h.children.length,0,"convert is performed"),h={children:[{type:"tabs",tabs:[{items:[{type:"testCaseList",practices:["Test Cases"]}]}]}]},h.context=g,e.fire("onConfigContainerCreated",h),equals(h.children.length,0,"convert is performed"),h={children:[{type:"tab",items:[{type:"testCaseList",practices:["Planning"]},{type:"testCaseList",practices:["Test Cases"]}]}]},h.context=g,e.fire("onConfigContainerCreated",h),equals(h.children.length,1,"convert is performed"),equals(h.children[0].items.length,1,"convert is performed"),h={children:[{type:"tabs",tabs:[{type:"tab",header:[{type:"label",text:[{value:"planning",practices:["Planning"]},{value:"test",practices:["Test Cases"]}]}],items:[{type:"testCaseList",practices:["Planning"]},{type:"testCaseList",practices:["Test Cases"]}]}]}]},h.context=g,e.fire("onConfigContainerCreated",h),equals(h.children[0].tabs[0].header[0].text.length,1,"convert is performed"),equals(h.children[0].tabs[0].header[0].text[0].value,"planning","convert is performed"),h={children:[{type:"tabs",tabs:[{type:"tab",items:[{type:"label"}]}],additionalHeaders:[{type:"menu.actions",items:[{label:"hi"},{label:"preved",practices:["Planning"]},{label:"medved",practices:["Test Cases"]},{label:"zzz",practices:["Test Cases","Planning"]}]}]}]},h.context=g,e.fire("onConfigContainerCreated",h);var i=h.children[0].additionalHeaders[0].items;equals(i.length,3,"convert is performed"),equals(i[0].label,"hi","convert is performed"),equals(i[1].label,"preved","convert is performed"),equals(i[2].label,"zzz","convert is performed"),h={children:[{type:"tabs",tabs:[{type:"tab",items:[{type:"additionalInfo",children:[{label:{type:"label",text:"Owner"},field:{type:"owner"},practices:["Test Cases"]},{label:{type:"label",text:"Priority"},field:{type:"priority"}}]},{type:"testCaseList",practices:["Test Cases"]}]}]}]},h.context=g,e.fire("onConfigContainerCreated",h);var j=h.children[0].tabs[0].items[0];equals(j.children.length,1,"convert is performed"),equals(j.children[0].field.type,"priority","convert is performed")}),test("should allow special syntax",function(){var e=new b,f=new a({bus:e,context:d()}),g=new c;g.selectDefaultProject(),g.excludePractices(["Test Cases"]),g=g.process();var h={children:[{type:"testCaseList",practices:["~Test Cases"]}]};h.context=g,e.fire("onConfigContainerCreated",h),equals(h.children.length,1,"convert is performed"),h={children:[{type:"tabs",tabs:[{items:[{type:"testCaseList",practices:["~Planning"]}]}]}]},h.context=g,e.fire("onConfigContainerCreated",h),equals(h.children.length,0,"convert is performed")}),test("should filter edition",function(){var e=new b,f=new a({bus:e,context:d()}),g,h={children:[{type:"testCaseList",editions:["Lite"]},{type:"testCaseList2",editions:["Pro"]},{type:"testCaseList3"},{type:"testCaseList4",editions:["Lite","Pro"]}]};g=new c,g.selectDefaultProject(),g.setEdition("Pro"),g.setEntity({id:435345,type:"TEST something"}),g=g.process(),h.context=g,e.fire("onConfigContainerCreated",h),equals(h.children.length,3,"convert is performed"),equals(h.children[0].type,"testCaseList2","convert is performed")})};return{run:d}})