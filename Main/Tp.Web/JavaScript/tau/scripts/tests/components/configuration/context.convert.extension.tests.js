define(["tau/components/extensions/context.convert.extension","tau/core/bus","tests/common/applicationContext.simple"],function(a,b,c){var d=function(){module("[context.convert.extension]"),test("on create config event configuration is converted",function(){var d=new b,e=new a({bus:d}),f=new c;f.selectDefaultProject(),f.excludePractices(["Test Cases"]),f=f.process();var g={children:[{type:"testCaseList",practices:["Test Cases"]}]};g.context=f,d.fire("onConfigContainerCreated",g),equals(g.children.length,0,"convert is performed"),g={children:[{type:"tabs",tabs:[{items:[{type:"testCaseList",practices:["Test Cases"]}]}]}]},g.context=f,d.fire("onConfigContainerCreated",g),equals(g.children.length,0,"convert is performed"),g={children:[{type:"tab",items:[{type:"testCaseList",practices:["Planning"]},{type:"testCaseList",practices:["Test Cases"]}]}]},g.context=f,d.fire("onConfigContainerCreated",g),equals(g.children.length,1,"convert is performed"),equals(g.children[0].items.length,1,"convert is performed"),g={children:[{type:"tabs",tabs:[{type:"tab",header:[{type:"label",text:[{value:"planning",practices:["Planning"]},{value:"test",practices:["Test Cases"]}]}],items:[{type:"testCaseList",practices:["Planning"]},{type:"testCaseList",practices:["Test Cases"]}]}]}]},g.context=f,d.fire("onConfigContainerCreated",g),equals(g.children[0].tabs[0].header[0].text.length,1,"convert is performed"),equals(g.children[0].tabs[0].header[0].text[0].value,"planning","convert is performed"),g={children:[{type:"tabs",tabs:[{type:"tab",items:[{type:"label"}]}],additionalHeaders:[{type:"menu.actions",items:[{label:"hi"},{label:"preved",practices:["Planning"]},{label:"medved",practices:["Test Cases"]},{label:"zzz",practices:["Test Cases","Planning"]}]}]}]},g.context=f,d.fire("onConfigContainerCreated",g);var h=g.children[0].additionalHeaders[0].items;equals(h.length,3,"convert is performed"),equals(h[0].label,"hi","convert is performed"),equals(h[1].label,"preved","convert is performed"),equals(h[2].label,"zzz","convert is performed"),g={children:[{type:"tabs",tabs:[{type:"tab",items:[{type:"additionalInfo",children:[{label:{type:"label",text:"Owner"},field:{type:"owner"},practices:["Test Cases"]},{label:{type:"label",text:"Priority"},field:{type:"priority"}}]},{type:"testCaseList",practices:["Test Cases"]}]}]}]},g.context=f,d.fire("onConfigContainerCreated",g);var i=g.children[0].tabs[0].items[0];equals(i.children.length,1,"convert is performed"),equals(i.children[0].field.type,"priority","convert is performed")}),test("should allow special syntax",function(){var d=new b,e=new a({bus:d}),f=new c;f.selectDefaultProject(),f.excludePractices(["Test Cases"]),f=f.process();var g={children:[{type:"testCaseList",practices:["~Test Cases"]}]};g.context=f,d.fire("onConfigContainerCreated",g),equals(g.children.length,1,"convert is performed"),g={children:[{type:"tabs",tabs:[{items:[{type:"testCaseList",practices:["~Planning"]}]}]}]},g.context=f,d.fire("onConfigContainerCreated",g),equals(g.children.length,0,"convert is performed")}),test("should filter edition",function(){var d=new b,e=new a({bus:d}),f,g={children:[{type:"testCaseList",editions:["Lite"]},{type:"testCaseList2",editions:["Pro"]},{type:"testCaseList3"},{type:"testCaseList4",editions:["Lite","Pro"]}]};f=new c,f.selectDefaultProject(),f.setEdition("Pro"),f.setEntity({id:435345,type:"TEST something"}),f=f.process(),g.context=f,d.fire("onConfigContainerCreated",g),equals(g.children.length,3,"convert is performed"),equals(g.children[0].type,"testCaseList2","convert is performed")})};return{run:d}})