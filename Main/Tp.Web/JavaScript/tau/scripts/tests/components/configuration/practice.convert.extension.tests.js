define(["tau/components/extensions/practice.convert.extension","tau/core/bus","tests/common/applicationContext"],function(a,b,c){var d=function(){module("[practice.convert.extension]"),test("on create config event configuration is converted",function(){var d=new b,e=new a({bus:d}),f=new c,g,h={children:[{type:"testCaseList",practices:["Test Cases"]}]};g=new c,g.processes[0].practices.splice(2,10),d.fire("onContextRetrieved",g),ok(e.practices.length>0,"extension collects practices names"),equals(e.practices[0],"Planning","extension collects practices names"),d.fire("onConfigContainerCreated",h),equals(h.children.length,0,"convert is performed"),h={children:[{type:"tabs",tabs:[{items:[{type:"testCaseList",practices:["Test Cases"]}]}]}]},d.fire("onConfigContainerCreated",h),equals(h.children.length,0,"convert is performed"),h={children:[{type:"tab",items:[{type:"testCaseList",practices:["Planning"]},{type:"testCaseList",practices:["Test Cases"]}]}]},d.fire("onConfigContainerCreated",h),equals(h.children.length,1,"convert is performed"),equals(h.children[0].items.length,1,"convert is performed"),h={children:[{type:"tabs",tabs:[{type:"tab",header:[{type:"label",text:[{value:"planning",practices:["Planning"]},{value:"test",practices:["Test Cases"]}]}],items:[{type:"testCaseList",practices:["Planning"]},{type:"testCaseList",practices:["Test Cases"]}]}]}]},d.fire("onConfigContainerCreated",h),equals(h.children[0].tabs[0].header[0].text.length,1,"convert is performed"),equals(h.children[0].tabs[0].header[0].text[0].value,"planning","convert is performed"),h={children:[{type:"tabs",tabs:[{type:"tab",items:[{type:"label"}]}],additionalHeaders:[{type:"menu.actions",items:[{label:"hi"},{label:"preved",practices:["Planning"]},{label:"medved",practices:["Test Cases"]},{label:"zzz",practices:["Test Cases","Planning"]}]}]}]},d.fire("onConfigContainerCreated",h);var i=h.children[0].additionalHeaders[0].items;equals(i.length,3,"convert is performed"),equals(i[0].label,"hi","convert is performed"),equals(i[1].label,"preved","convert is performed"),equals(i[2].label,"zzz","convert is performed"),h={children:[{type:"tabs",tabs:[{type:"tab",items:[{type:"additionalInfo",children:[{label:{type:"label",text:"Owner"},field:{type:"owner"},practices:["Test Cases"]},{label:{type:"label",text:"Priority"},field:{type:"priority"}}]},{type:"testCaseList",practices:["Test Cases"]}]}]}]},d.fire("onConfigContainerCreated",h);var j=h.children[0].tabs[0].items[0];equals(j.children.length,1,"convert is performed"),equals(j.children[0].field.type,"priority","convert is performed")})};return{run:d}})