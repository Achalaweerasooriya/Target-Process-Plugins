define(["Underscore","jQuery","tests/components/templates/jqote2.custom.template","tau/components/component.creator"],function(_,$,customTemplate,componentCreator){var innerRun=function(){module("[jqote2 template engine]",{setup:function(){this.component=componentCreator.create({template:customTemplate},{})},teardown:function(){this.component.destroy(),delete this.component}}),test("render valid template",function(){var $el=null,items=[{id:1,name:"Test 1",deep:!0},{id:2,name:"Test 2",deep:!1},{id:3,name:"Test 3",deep:!0}];this.component.on("afterRender",function(evt){$el=evt.data.element}),this.component.initialize(),this.component.fire("dataBind",{id:22,title:"jqote2-test-title",items:items});var $title=$el.find(".title");equals($title.attr("id"),"22","ID is valid"),equals($title.text(),"jqote2-test-title","Title is valid");var $items=$el.find(".items > .sub"),len=$items.size();equals(len,items.length,"Items count");for(var i=0;i<len;i++){var $item=$items.eq(i);equals($item.find(".sub-text").text(),items[i].id+":"+items[i].name,"Text is valid"),equals($item.find(".sub-deep").text(),"Deep:"+items[i].deep,"Deep is valid")}})};return{run:innerRun}})