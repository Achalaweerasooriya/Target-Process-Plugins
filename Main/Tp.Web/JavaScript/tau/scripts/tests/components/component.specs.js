define(["Underscore","tests/components/common/common.tests","tests/components/utils/dispatcher"],function(_,a,b){return{create:function(c,d){var e=[];return{modelShouldReturnData:function(b,c,d){return e=a.addModelTestsToArray(e,b,c,d),this},shouldHandlePermissions:function(b){return e=a.addPermissionTestToArray(e,b),this},viewShouldFollowBasicComponentLifeCycle:function(){var a={name:"view should follow basic component life cycle",setup:function(){this.basicEvents=["beforeInit","afterInit","beforeRender","afterRender"],this.containerDispatcher=b.createDispatcher(this.component,this.basicEvents)},test:function(){b.verifyLifeCycle(this.basicEvents,this.containerDispatcher,"component"),same(this.containerDispatcher.order,this.basicEvents)}};return arguments.length===1&&(a.preSetup=arguments[0]),e.push(a),this},viewShouldFollowDataComponentLifeCycle:function(){var a={name:"view should follow data component life cycle",setup:function(){this.basicEvents=["beforeInit","dataBind","afterInit","beforeRender","afterRender"],this.containerDispatcher=b.createDispatcher(this.component,this.basicEvents)},test:function(){b.verifyLifeCycle(this.basicEvents,this.containerDispatcher,"component"),same(this.containerDispatcher.order,this.basicEvents)}};return arguments.length===1&&(a.preSetup=arguments[0]),e.push(a),this},on:function(a,b){var c={setup:function(){var b=this;b.EventsDictonary=b.EventsDictonary||{},b.EventsDictonary[a]=[],b.component.on(a,function(c){_(b.EventsDictonary[a]).contains(c)||b.EventsDictonary[a].push(c)})}};return _.extend(c,b),e.push(c),this},viewShouldFollowContainerComponentLifeCycle:function(){var a={name:"view should follow container component life cycle",setup:function(){var a=this;a.basicEvents=["beforeInit","afterInit","beforeRender","afterRender"],a.basicChildEvents=["beforeInit","afterInit","dataBind","beforeRender","afterRender"],a.childDispatchers=[],a.containerDispatcher=b.createDispatcher(this.component,a.basicEvents),this.component.on("childComponentCreated",function(c){var d=c.data;b.dispatchChild(d,a.config.children[a.childDispatchers.length],a.config.context,a.containerDispatcher),a.childDispatchers.push(b.createDispatcher(d,a.basicChildEvents))})},test:function(){var a=this;b.verifyLifeCycle(a.basicEvents,a.containerDispatcher,"main container");for(var c=0,d=a.childDispatchers.length;c<d;c++)b.verifyLifeCycle(a.basicEvents,a.childDispatchers[c],"child component #"+(c+1));same(a.containerDispatcher.order,a.basicEvents)}};return e.push(a),this},viewShouldPassTests:function(b,c){return a.addUITestToArray(e,b,c),this},viewShouldContainEmptyMessage:function(a,b){var c=function(){this.component.on("dataBind",function(){arguments[0].data.items=[]},this,null,1),this.component.on("afterRender",function(a){this.$el=a.data.element},this)},d=[{name:"should have valid empty message",setup:c,test:b||function(){equal(this.$el.children().length,2,"Count of children is valid"),equal(this.$el.children().eq(0).css("display"),"none","Style is valid"),ok(this.$el.children().eq(1).is("span"),"Count of children is valid"),equal(this.$el.children().eq(1).text(),a,"Count of children is valid")}}];return this.viewShouldPassTests(d,c)},done:function(){for(var a=0,b=e.length;a<b;a++){var f=e[a];f.context&&(d.context=f.context);var g=c.setup({setup:f.setup,preSetup:f.preSetup}).initialize(d,f.init).test(f.name,f.test)}return this}}}}})