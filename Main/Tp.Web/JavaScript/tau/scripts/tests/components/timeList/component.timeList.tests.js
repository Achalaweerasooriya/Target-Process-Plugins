define(["tau/core/tau","tau/utils/utils.date","tau/components/component.timeList","tests/common/testData","tests/components/common/common.setup","tests/components/component.specs"],function(a,b,c,d,e,f){var g=function(){function h(){return Like.is({times:["id","date","spent","remain","description",Like.is({assignable:["id"]}),Like.is({user:["id","firstName","lastName"]})],list:!0})}function i(){return Similar.to({tasks:Similar.to(["id","name",h()])})}function n(a,b){var c=b.workOn.__type,d=a.find(".work-on"),e=d.find("em");equal(a.find(".date").text(),b.date,"Date is valid"),equal(a.find(".spent").text(),b.spent+" h","Spent is valid"),equal(a.find(".remain").text(),b.remain+" h","Remain is valid"),equal(a.find(".description").text(),b.description,"Description is valid"),equal(d.find("span").text(),b.workOn.name,"Work on is valid");var f=a.find(".edit-time a");equal(f.parent().text(),"Edit","Edit action text is valid"),equal(f.attr("href"),"/TP/Project/Tracking/time/Edit.aspx?timeID="+b.id,"Edit action text is valid"),ok(e.is(".ui-type-icon.ui-type-icon-"+c.toLowerCase()),"Work on entity icon has valid class"),equal(e.text(),b.term,"Work on entity icon has valid text"),equal(a.find(".person").text(),b.person,"Person on is valid")}var a=d.getTestDataForTimeList(),g=[Similar.to({name:"get",type:"userStory",config:Like.is({id:28,fields:["id","name",h()]})}),Similar.to({name:"get",type:"userStory",config:Like.is({id:28,fields:["id",i()],list:!0,nested:!0})})],j={context:{type:"story",id:28}},k=a[0].times,l=a[0].tasks,m={items:[{id:367,date:b.format.date.short(b.convertToTimezone(k[2].date)),spent:34,remain:10,description:"43245",person:"Administrator Administrator",workOn:{__type:"userStory",name:"Build planets"},editUrl:"/TP/Project/Tracking/time/Edit.aspx?timeID=367"},{id:366,date:b.format.date.short(b.convertToTimezone(l[0].times[0].date)),spent:5,remain:0,description:"sad",person:"Administrator Administrator",workOn:{__type:"task",name:"Specification"},editUrl:"/TP/Project/Tracking/time/Edit.aspx?timeID=366"},{id:365,date:b.format.date.short(b.convertToTimezone(k[1].date)),spent:5,remain:0,description:"weqrer",person:"Administrator Administrator",workOn:{__type:"userStory",name:"Build planets"},editUrl:"/TP/Project/Tracking/time/Edit.aspx?timeID=365"},{id:364,date:b.format.date.short(b.convertToTimezone(k[0].date)),spent:4,remain:0,description:"3324",person:"Administrator Administrator",workOn:{__type:"userStory",name:"Build planets"},editUrl:"/TP/Project/Tracking/time/Edit.aspx?timeID=364"},{id:69,date:b.format.date.short(b.convertToTimezone(l[1].times[0].date)),spent:4,remain:0,description:"Do",person:"Tanya White",workOn:{__type:"task",name:"Testing"},editUrl:"/TP/Project/Tracking/time/Edit.aspx?timeID=69"}]},o=[{name:"should render valid markup",test:function(){var a=this.$el,b=this.data.items,c=a.find("table.time-list * > tr"),d=c.length;equals(c.length,b.length+1,"Count of times is valid");for(var e=1;e<d;e++){var f=b[e-1];f.term=this.termProcessor.getTerms(f.workOn.__type).iconBig,n(c.eq(e),b[e-1])}}}],p=e.create("[component.timeList]",a,c);f.create(p,j).viewShouldFollowDataComponentLifeCycle().modelShouldReturnData(m,[g]).viewShouldPassTests(o).viewShouldContainEmptyMessage("No time records found").done()};return{run:g}})