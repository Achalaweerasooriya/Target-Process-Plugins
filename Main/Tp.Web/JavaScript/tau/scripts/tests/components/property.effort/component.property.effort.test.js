define(["jQuery","tau/configurator","tests/common/testCase","tests/common/componentConfigCreator","tau/components/component.property.effort","tests/common/datapoint/test.common.datapoint"],function($,configurator,TestCase,ComponentConfigCreator,Component,dataPoint){var innerRun=function(){var entityData=dataPoint.userStories()[0],selectedProject=dataPoint.projects()[0],configCreator=new ComponentConfigCreator;configCreator.setEntityIDAndType(entityData.id,entityData.__type),configCreator.setSelectedProjects([selectedProject]),configCreator.setProcesses(dataPoint.processes());var config=configCreator.getConfig(),popupEditorTestCase=new TestCase("[component.property.effort][popup-editor]");config.entitiesCount=2,popupEditorTestCase.initModule({componentConfig:config,data:entityData},Component),popupEditorTestCase.test("should render valid markup",function(){var $el=this.element;equals($el.find(".entity-effort").text(),"56h","Effort value"),ok($el.find(".entity-effort").hasClass("tau-bubble-target"),"Popup editor")});var inlineEditConfigCreator=new ComponentConfigCreator;inlineEditConfigCreator.setEntityIDAndType(entityData.id,entityData.__type),inlineEditConfigCreator.setSelectedProjects([selectedProject]),inlineEditConfigCreator.setProcesses(dataPoint.processes());var inlineEditConfig=inlineEditConfigCreator.getConfig(),inlineEditorTestCase=new TestCase("[component.property.effort][inline-editor]");inlineEditConfig.entitiesCount=0,inlineEditorTestCase.initModule({componentConfig:inlineEditConfig,data:entityData},Component),inlineEditorTestCase.test("should render valid markup",function(){var $el=this.element;equals($el.find(".entity-effort").text(),"56h","Effort value"),ok($el.find(".entity-effort").hasClass("editableText"),"Inline editor")});var entityWithNoRolesHasEffort=$.extend(!0,{},entityData);entityWithNoRolesHasEffort.effort=0,_(entityWithNoRolesHasEffort.roleEfforts).each(function(roleEffort){roleEffort.role.hasEffort=!1});var noRolesHasEffortConfigCreator=new ComponentConfigCreator;noRolesHasEffortConfigCreator.setEntityIDAndType(entityWithNoRolesHasEffort.id,entityWithNoRolesHasEffort.__type),noRolesHasEffortConfigCreator.setSelectedProjects([selectedProject]),noRolesHasEffortConfigCreator.setProcesses(dataPoint.processes());var noRolesHasEffortConfig=noRolesHasEffortConfigCreator.getConfig(),noRolesHasEffortTestCase=new TestCase("[component.property.effort][no-roles-has-effort]");noRolesHasEffortConfig.entitiesCount=0,noRolesHasEffortTestCase.initModule({componentConfig:noRolesHasEffortConfig,data:entityWithNoRolesHasEffort},Component),noRolesHasEffortTestCase.test("should render valid markup",function(){var $el=this.element,$valueNode=$el.find(".entity-effort");equals($valueNode.text(),"0h","Effort value"),ok(!$valueNode.hasClass("editableText"),"Editor is disabled"),ok(!$valueNode.hasClass("tau-bubble-target"),"Editor is disabled"),ok(!$valueNode.hasClass("ui-link"),"Editor is disabled")})};return{run:innerRun}})