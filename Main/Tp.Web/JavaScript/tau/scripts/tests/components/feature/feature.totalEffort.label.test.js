define(["jQuery","tau/configurator","tests/common/testCase","tests/common/componentConfigCreator","tau/components/component.feature.totalEffort","tests/common/testData.Generator"],function($,configurator,TestCase,ComponentConfigCreator,ComponentInitialEstimate,TestDataGenerator){var innerRun=function(){var testDataGenerator=new TestDataGenerator;testDataGenerator.initDefaultData();var data=testDataGenerator.getData(),featureData=testDataGenerator.getFeatures()[0],configCreator=new ComponentConfigCreator;configCreator.setEntityIDAndType(featureData.id,featureData.__type),configCreator.setSelectedProjects([data.selectByType("project")[0]]);var process=data.selectByType("process");configCreator.setProcesses(process);var config=configCreator.getConfig(),testCase=new TestCase("[component.feature.totalEffort.label]");testCase.initModule({componentConfig:config,data:data},ComponentInitialEstimate),testCase.test("should render valid markup",function(){var $el=this.element;equal($el.find(".ui-total-effort").text(),"Feature has 15 User Stories with total effort 326 h","Label text is valid")}),testDataGenerator.clear(),testDataGenerator.initDefaultData(),data=testDataGenerator.getData();var featureData=data.find(function(entity){return entity.__type=="feature"});featureData["userStories-count"]=0,configCreator.setEntityIDAndType(featureData.id,featureData.__type),configCreator.setSelectedProjects([data.selectByType("project")[0]]);var process=data.selectByType("process");configCreator.setProcesses(process);var config=configCreator.getConfig();testCase=new TestCase("[component.feature.totalEffort.label]"),testCase.initModule({componentConfig:config,data:data},ComponentInitialEstimate),testCase.test("should render valid markup",function(){var $el=this.element;equal($el.css("display"),"none","Effort not visible"),equal($el.text(),"","Text is empty")})};return{run:innerRun}})