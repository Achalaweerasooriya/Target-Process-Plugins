define(["Underscore","tests/components/list/specific/component.list.spec.base","tau/models/dataProviders/testplanrun/testplanrun.model.provider.testcaseruns.items","tau/ui/templates/list_/grid.entity/ui.template.list.grid.entity"],function(_,Spec,ItemsProvider){var innerRun=function(){var tests=Spec.Testcase.create("[list.testplanrun.testcaseruns]",ItemsProvider,null,function(){this.componentConfig={itemsDataProvider:this.providers.items,views:[{rowTemplateName:"list-grid-entity__rowtestcaserun",type:"grid.entity"}]};var types={tcr:"TestCaseRun"},processes={kanban:"Kanban",scrum:"Scrum"},priorities={p1:"Good",p2:"Very Good"},projects={p_kanban:{name:"Project Kanban",process:"kanban"},p_scrum:{name:"Project Scrum",process:"scrum"}},testPlanRuns={tpr1:{name:"Test Plan Run",testCaseRuns:["tcr1","tcr2","tcr3"],project:"p_kanban",process:"kanban"}},testCaseRuns={tcr1:{runDate:"12-Dec-2012",testCases:["tc1"],passed:!0,executed:!0},tcr2:{runDate:"13-Dec-2012",testCases:["tc2"],passed:!1,executed:!0},tcr3:{runDate:"11-Dec-2012",testCases:["tc3"],passed:null},tcr4:{runDate:null,testCases:["tc4"],passed:null,executed:!1}},testCases={tc1:{name:"TC1",priority:"p1",numericPriority:10},tc3:{name:"TC3",priority:"p2",numericPriority:30},tc2:{name:"TC2",priority:"p2",numericPriority:20},tc4:{name:"TC4",priority:"p2",numericPriority:40}};this.loadFixtures({entityType:types,projects:projects,priorities:priorities,testPlanRuns:testPlanRuns,testCaseRuns:testCaseRuns,testCases:testCases,processes:processes}),this.setProject(this.data.project.p_kanban),this.setEntity(this.data.testPlanRun.tpr1)});tests.add(new Spec.Test({name:"should render valid markup view",test:function(){var data=tests.data,items=_.values(data.testCaseRun),$el=this.$el,groupsConfig=[{items:["TC1","TC2","TC3","TC4"]}],$groups=$el.find("[role=group]");equals($groups.length,groupsConfig.length,"Groups amount");var $itemsGroups=$el.find("[role=list]");for(var i=0;i<$itemsGroups.length;i++){var $group=$itemsGroups.eq(i),$trs=$group.find("[role=item]");for(var j=0;j<$trs.length;j++){var $cells=$trs.eq(j).find(".tau-list__table__cell"),item=items[j],testcase=item.testCases[0];equals(_.trim($cells.eq(1).text()),testcase.id,"ID Data column -- testcase");var outputLink=$cells.eq(1).find(".tau-entitylink").attr("href");equals(outputLink,"#testcase/"+testcase.id,"Link to testcase");var outputName=$cells.eq(1).find(".tau-entitylink").attr("title"),itemName=groupsConfig[i].items[j];equals(outputName,itemName,"Name Data column"),outputName=$cells.eq(2).text(),equals(outputName,itemName,"Name Data column");var $priorityCell=$cells.eq(3);equals($priorityCell.length,1,"Priority Cell");var priority=$priorityCell.text();equals(priority,testcase.priority.name,"Priority Data column");var $statusCell=$cells.eq(4);equals($statusCell.length,1,"Status Cell");var status=_.trim($statusCell.text());item.runDate?item.passed===!0?equals(status,"Passed"):item.passed===!1?equals(status,"Failed"):item.passed===null&&equals(status,"Skipped"):equals(status,"")}}}})),tests.run()};return{run:innerRun}})