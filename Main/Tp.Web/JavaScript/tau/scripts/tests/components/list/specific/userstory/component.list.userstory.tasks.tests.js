define(["Underscore","tests/components/list/specific/component.list.spec.base","tau/models/dataProviders/userstory/userstory.model.provider.tasks.items"],function(_,Spec,ItemsProvider){var innerRun=function(){var tests=Spec.Testcase.create("[list.userstory.tasks]",ItemsProvider,null,function(){this.componentConfig={itemsDataProvider:this.providers.items,views:[{type:"grid.entity"}]};var types={task:"Task"},processes={kanban:"Kanban",scrum:"Scrum"},priorities={p1:"Good"},severities={s1:"Good"},projects={p_kanban:{name:"Project Kanban",process:"kanban"},p_scrum:{name:"Project Scrum",process:"scrum"}},releases={r1:"Release1",r2:"R2"},iterations={i1:"Iter1",i2:"Iter2"},entityStates={task_open:{name:"Open",nextStates:["task_inprogress","task_done"],entityType:"task",process:"kanban",isInitial:!0},task_inprogress:{name:"In Progress",nextStates:["task_done"],entityType:"task",process:"kanban"},task_done:{name:"Done",nextStates:[],entityType:"task",process:"kanban",isFinal:!0}},userStories={us1:{name:"US1",tasks:["t1","t2","t3"],project:"p_kanban",process:"kanban"},us2:{name:"US2",tasks:[],project:"p_kanban",process:"kanban"}},tasks={t1:{name:"Task1",priority:"p1",project:"p_kanban",release:"r1",entityState:"task_open",numericPriority:10},t2:{name:"Task2",priority:"p1",project:"p_scrum",iteration:"i1",entityState:"task_open",numericPriority:30},t3:{name:"Task3",priority:"p1",project:"p_scrum",iteration:"i1",entityState:"task_open",numericPriority:20}};this.loadFixtures({entityType:types,projects:projects,userStories:userStories,tasks:tasks,priority:priorities,severity:severities,processes:processes,releases:releases,iterations:iterations,entityStates:entityStates}),this.setProject(this.data.project.p_kanban),this.setEntity(this.data.userStory.us1)});tests.add(new Spec.Test({name:"should render valid markup view",test:function(){var data=this.data,$el=this.$el,groupsConfig=[{items:["Task1","Task3","Task2"]}],$groups=$el.find("[role=group]");equals($groups.length,groupsConfig.length,"Groups amount");var $itemsGroups=$el.find("[role=list]");for(var i=0;i<$itemsGroups.length;i++){var $group=$itemsGroups.eq(i),$trs=$group.find("[role=item]");for(var j=0;j<$trs.length;j++){var $cells=$trs.eq(j).find(".tau-list__table__cell"),item=data.items[j];equals(_.trim($cells.eq(1).text()),item.id,"ID Data column");var outputName=_.trim($cells.eq(2).text()),itemName=groupsConfig[i].items[j];equals(outputName,itemName,"Name Data column")}}}})),tests.run()};return{run:innerRun}})