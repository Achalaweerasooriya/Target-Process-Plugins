define(["Underscore","tau/configurator","jQuery","tau/models/dataprocessor/model.processor.context","tau/components/component.list","tests/common/testData","tests/common/applicationContext","tests/components/common/common.setup","tests/components/component.specs","tests/common/checker","tau/models/dataProviders/model.provider.items.user_stories","tau/models/dataProviders/model.provider.groups.user_stories","tau/ui/templates/list_/grid.entity/ui.template.list.grid.entity"],function(_,configurator,$,fnCtxProcessor,listComponent,testData,AppCtx,commonSetup,componentSpecs,checker,ItemsDataProvider,GroupsDataProvider){var innerRun=function(){function createExpectedItemsCommand(entityType,entityId,collectionName){var config={id:entityId,nested:!0,fields:["id"]},coll={};coll[collectionName]=["id","name","numericPriority","tags",Similar.to({priority:["id","name","importance"]}),"effort","effortCompleted","effortToDo","timeSpent","timeRemain",Similar.to({entityState:["id","name","isInitial","isFinal","numericPriority"]}),Similar.to({roleEfforts:["id",Like.is({role:["id","name"]})]}),Similar.to({assignments:["id",Like.is({role:["id"]}),Similar.to({generalUser:["id","firstName","lastName"]})]}),Similar.to({project:["id"]})],config.fields.push(Similar.to(coll));var command=Similar.to({name:"get",type:entityType,config:Similar.to(config)});return command}var appContext=new AppCtx,data=testData.registerTestDataForUserStoriesListModel(),testProcess=testData.getStatesForProcess(),items=[],entity=data.data;entity.userStories=[];var context={context:{type:"feature",id:15}},expectedData={items:[],groups:[],isEmpty:!0,config:{views:[{type:"grid.entity",emptyMessage:"No features found",timeTrackingPolicies:{disableSpentRemain:!1}}],currentView:{type:"grid.entity",emptyMessage:"No features found",timeTrackingPolicies:{disableSpentRemain:!1}}}},expectedItemsCommand=createExpectedItemsCommand("feature",15,"userStories"),fnPreSetup=function(){configurator.getProxy().markRecordSetAsCompleteLoaded("priority")},viewTests=[{name:"should render valid markup view",preSetup:fnPreSetup,test:function(){var data=this.data,$el=this.$el,$groups=$el.find("[role=group]");equals($groups.length,0,"Groups amount"),equals($el.find(".tau-list__empty-message").length,1,"Empty message"),equals($el.find(".tau-list__empty-message").text(),"No features found","Empty message")}}],componentConfig={context:{applicationContext:appContext},itemsDataProvider:ItemsDataProvider,views:[{type:"grid.entity",emptyMessage:"No features found"}]};fnCtxProcessor(componentConfig.context);var setup=commonSetup.create("[component.list][user_stories.empty]",[entity,testProcess],listComponent,componentConfig);componentSpecs.create(setup,context).viewShouldFollowDataComponentLifeCycle(fnPreSetup).viewShouldPassTests(viewTests).done()};return{run:innerRun}})