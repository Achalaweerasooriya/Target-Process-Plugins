define(["jQuery","tests/common/testkit","tau/components/component.customField.number"],function($,a,b){var c=function(){var c=new a("[component.customField.number]",b),d={us1:{name:"US1",customFields:[{name:"NumberOfBeast",type:"Number",value:666}]}},e=c.loadFixtures({userStories:d});return c.setData(e),c.setEntity(e.userStory.us1),c.selectDefaultProject(),c.appContext.processes[0].customFields=[{name:"NumberOfBeast",type:"Number",required:!1,listed:!1,value:null}],c.addTest({name:"should render valid markup",test:function(){var a=this.$el;equals(a.find(".ui-customfield__label").text().trim(),"NumberOfBeast","Name is valid"),equals(a.find(".ui-customfield__value").text(),666,"Correct process and output")}}),c.addTest({name:"should allow to edit",test:function(){var a=this.$el,b=e.userStory.us1;c.getService().registerSaveCommand({config:{$set:{customFields:[{name:"NumberOfBeast",type:"Number",value:777}]},fields:["id","customFields"],id:b.id},returnedData:{id:b.id,customFields:[{name:"NumberOfBeast",type:"Number",value:"777"}]}}),ok(a.hasClass("ui-customfield_editable_true"),"Editable highlighting is applied");var d=this.$el.find(".ui-customfield__value"),f=d.text();d.click(),equals(d.attr("contenteditable"),"true","Generate editor"),d.focus(),d.text("777"),d.blur(),equals(d.text(),"777","Save value")}}),c.addTest({name:"validation",test:function(){var a=e.userStory.us1,b=this.$el.find(".ui-customfield__value").text();this.$el.find(".ui-customfield__value").click(),equals(this.$el.find(".ui-customfield__value").attr("contenteditable"),"true","Generate editor"),this.$el.find(".ui-customfield__value").focus(),this.$el.find(".ui-customfield__value").text("preved"),this.$el.find(".ui-customfield__value").blur(),ok(this.$el.find(".ui-customfield__value").hasClass("ui-validationerror"),"Validate with error"),ok(this.$el.find(".ui-customfield__value").attr("title")!=0,"Validated with error"),c.getService().registerSaveCommand({config:{$set:{customFields:[{name:"NumberOfBeast",type:"Number",value:123}]},fields:["id","customFields"],id:a.id},returnedData:{id:a.id,customFields:[{name:"NumberOfBeast",type:"Number",value:"123"}]}}),this.$el.find(".ui-customfield__value").click(),this.$el.find(".ui-customfield__value").focus(),this.$el.find(".ui-customfield__value").text("  123  "),this.$el.find(".ui-customfield__value").blur(),equals(this.$el.find(".ui-customfield__value").text(),"123","Sanitize value"),equals(this.$el.find(".ui-customfield__value").hasClass("ui-validationerror"),!1,"Validate sanitized value"),ok(_.isEmpty(this.$el.find(".ui-customfield__value").attr("title")),"Validate sanitized value")}}),c.addTest({name:"spec validation",test:function(){var a=this.$el,b=e.userStory.us1,d=this.$el.find(".ui-customfield__value"),f=d.text();d.click(),c.getService().registerSaveCommand({config:{$set:{customFields:[{name:"NumberOfBeast",type:"Number",value:null}]},fields:["id","customFields"],id:b.id},returnedData:{id:b.id,customFields:[{name:"NumberOfBeast",type:"Number",value:null}]}}),this.$el.find(".ui-customfield__value").focus(),this.$el.find(".ui-customfield__value").text(""),this.$el.find(".ui-customfield__value").blur(),d.click(),equals(this.$el.find(".ui-customfield__value").text(),"","Sanitize empty value"),equals(this.$el.find(".ui-customfield__value").hasClass("ui-validationerror"),!1,"Validate empty value"),ok(_.isEmpty(this.$el.find(".ui-customfield__value").attr("title")),"Validate empty value");var d=this.$el.find(".ui-customfield__value"),f=d.text();d.click(),c.getService().registerSaveCommand({config:{$set:{customFields:[{name:"NumberOfBeast",type:"Number",value:0x7048860ddf79}]},fields:["id","customFields"],id:b.id},returnedData:{id:b.id,customFields:[{name:"NumberOfBeast",type:"Number",value:0x7048860ddf79}]}}),this.$el.find(".ui-customfield__value").focus(),this.$el.find(".ui-customfield__value").text("123456789012345"),this.$el.find(".ui-customfield__value").blur(),equals(this.$el.find(".ui-customfield__value").text(),"123456789012345","Process large numbers"),equals(this.$el.find(".ui-customfield__value").hasClass("ui-validationerror"),!1,"Process large numbers")}}),c.run({customField:{type:"Number",name:"NumberOfBeast"}})};return{run:c}})