define(["tests/components/customField/component.customField.specification.base","tau/components/component.customField.dropdown","tau/components/component.customField.dropdown.list"],function(a,b){var c=function(){var c=["Atos","Portos","Aramis"];a.run("dropdown.editable",b,{name:"CF DropDownList",type:"dropdown",required:!1,listed:!0,value:c,options:c},"Atos",[{name:"Should show popup",test:function(){var a=this.data,b=this.$el;ok(this.$el.hasClass("ui-customfield_editable_true"),"Editable highlighting is applied");var d=b.find(".ui-customfield__value");d.click();var e=d.parents("tr:first").tauBubble("widget");equals(e.length,1,"Has bubble");var f=e.find(".drop-down-list");equals(f.length,1,"Has bubble with choices");var g=f.find(".drop-down-option");equals(g.length,2,"Render correct options without existing"),equals(g.eq(0).text(),c[1],"Render correct options"),equals(g.eq(1).text(),c[2],"Render correct options")}},{name:"Should allow to change and save",preSetup:a.shouldSave("CF DropDownList",c[2]),test:function(){var a=this.data,b=this.$el,c=b.find(".ui-customfield__value");c.click();var d=c.parents("tr:first").tauBubble("widget"),e=d.find(".drop-down-list"),f=e.find(".drop-down-option");f.eq(1).click()}},{name:"Should show popup with clear link for non-required data",preSetup:a.shouldSave("CF DropDownList",null),test:function(){var a=this.data,b=this.$el,c=b.find(".ui-customfield__value");c.click();var d=c.parents("tr:first").tauBubble("widget");equals(d.length,1,"Has bubble");var e=d.find(".drop-down-actions");equals(e.find(".clear").length,1,"Has clear action"),e.find(".clear").click();var c=b.find(".ui-customfield__value");c.click();var d=c.parents("tr:first").tauBubble("widget"),e=d.find(".drop-down-actions");equals(e.find(".clear").length,0,"Has no clear action if value is empty")}}]),a.run("dropdown.editable.required",b,{name:"CF DropDownList",type:"dropdown",required:!0,listed:!0,value:c,options:c},"Atos",[{name:"Should show popup with no clear link for required data",test:function(){var a=this.data,b=this.$el,c=b.find(".ui-customfield__value");c.click();var d=c.parents("tr:first").tauBubble("widget");equals(d.length,1,"Has bubble");var e=d.find(".drop-down-actions");equals(e.find(".clear").length,0,"Has no clear action")}}])};return{run:c}})