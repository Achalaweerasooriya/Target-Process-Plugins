define(["jQuery","tests/common/testkit","tau/components/component.customField.dropdown","tau/components/component.customField.dropdown.list"],function($,a,b){var c=function(){var c=new a("[component.customField.dropdown]",b),d={us1:{name:"US1",customFields:[{name:"DD",type:"DropDown",value:"Abagael"}]}},e=c.loadFixtures({userStories:d});return c.setData(e),c.setEntity(e.userStory.us1),c.selectDefaultProject(),c.appContext.processes[0].customFields=[{name:"DD",type:"DropDown",required:!1,listed:!1,value:"Aaren\r\nAarika\r\nAaron\r\nAartjan\r\nAbagael\r\nAbagail\r\nAbahri\r\nAbbas\r\nAbbe\r\nAbbey\r\nAbbi\r\nAbbie\r\nAbby\r\nAbbye\r\nAbdalla\r\nAbdallah\r\nAbdul\r\nAbdullah\r\nAbe\r\nAbel\r\nAbigael\r\nAbigail\r\nAbigale\r\nAbra\r\nAbraham\r\nAbu\r\nAccess\r\nAccounting\r\nAchal\r\nAchamma\r\nAction\r\nAda\r\nAdah\r\nAdaline\r\nAdam\r\nAdan\r\nAdara\r\nAdda"}],c.addTest({name:"should render valid markup",test:function(){var a=this.$el;equals(a.find(".ui-customfield__value").text(),"Abagael","Correct process and output")}}),c.addTest({name:"should allow to edit",test:function(){var a=this.$el,b=a.find(".tau-bubble-target"),d=e.userStory.us1;b.click();var f=b.tauBubble("widget");equals(f.length,1,"Show popup");var g=f.find("[role=option]");equals(g.length,37,"Show opts"),equals(g.eq(0).text(),"Aaren","First opt"),equals(g.eq(1).text(),"Aarika","Second opt"),ok(g.eq(4).text()!="Abagael","Dont show exist"),c.getService().registerSaveCommand({config:{$set:{customFields:[{name:"DD",type:"DropDown",value:"Abbe"}]},fields:["id","customFields"],id:d.id},returnedData:{id:d.id,customFields:[{name:"DD",type:"DropDown",value:"Abbe"}]}}),g.eq(7).click(),$newEl=this.$el,ok($newEl!==a,"Reload field"),equals($newEl.find(".ui-customfield__value").text(),"Abbe","New value")}}),c.run({customField:{type:"DropDown",name:"DD"}})};return{run:c}})