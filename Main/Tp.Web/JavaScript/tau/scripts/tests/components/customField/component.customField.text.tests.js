define(["jQuery","tests/common/testkit","tau/components/component.customField.text"],function(a,b,c){var d=function(){var a=new b("[component.customField.text]",c),d={us1:{name:"US1",customFields:[{name:"Motto",type:"Text",value:"Kill them all"}]}},e=a.loadFixtures({userStories:d});return a.setData(e),a.setEntity(e.userStory.us1),a.selectDefaultProject(),a.appContext.processes[0].customFields=[{name:"Motto",type:"Text",required:!1,listed:!1,value:null}],a.addTest({name:"should render valid markup",test:function(){var a=this.$el;equals(a.find(".ui-customfield__label").text().trim(),"Motto","Name is valid"),equals(a.find(".ui-customfield__value").text(),"Kill them all","Correct process and output")}}),a.addTest({name:"should allow to edit",test:function(){var b=this.$el,c=e.userStory.us1;a.getService().registerSaveCommand({config:{$set:{customFields:[{name:"Motto",type:"Text",value:"Now or never"}]},fields:["id","customFields"],id:c.id},returnedData:{id:c.id,customFields:[{name:"Motto",type:"Text",value:"Now or never"}]}}),ok(b.hasClass("ui-customfield_editable_true"),"Editable highlighting is applied");var d=this.$el.find(".ui-customfield__value"),f=d.text();d.click(),equals(d.attr("contenteditable"),"true","Generate editor"),d.focus(),d.text("Now or never"),d.blur();var d=this.$el.find(".ui-customfield__value");equals(d.text(),"Now or never","Save value")}}),a.addTest({name:"should allow to save empty",test:function(){var b=this.$el,c=e.userStory.us1;a.getService().registerSaveCommand({config:{$set:{customFields:[{name:"Motto",type:"Text",value:null}]},fields:["id","customFields"],id:c.id},returnedData:{id:c.id,customFields:[{name:"Motto",type:"Text",value:null}]}}),ok(b.hasClass("ui-customfield_editable_true"),"Editable highlighting is applied");var d=this.$el.find(".ui-customfield__value"),f=d.text();d.click(),equals(d.attr("contenteditable"),"true","Generate editor"),d.focus(),d.text("  "),d.blur();var d=this.$el.find(".ui-customfield__value");equals(d.text(),"","Save value")}}),a.run({customField:{type:"Text",name:"Motto"}})};return{run:d}})