define(["jQuery","tests/common/testkit","tau/components/component.customField.checkbox"],function($,ComponentTestKit,Component){var run=function(){var TestCase=new ComponentTestKit("[component.customField.checkbox]",Component),userStories={us1:{name:"US1",customFields:[{name:"Yop",type:"Checkbox",value:!1}]}},data=TestCase.loadFixtures({userStories:userStories});return TestCase.setData(data),TestCase.setEntity(data.userStory.us1),TestCase.selectDefaultProject(),TestCase.appContext.processes[0].customFields=[{name:"Yop",type:"Checkbox",required:!1,listed:!1,value:null}],TestCase.addTest({name:"should render valid markup",test:function(){var $el=this.$el;equals($el.find(".ui-customfield__label").text().trim(),"Yop","Name is valid");var $iconEl=$el.find(".ui-customfield__value");ok($iconEl.length===1,"Has icon element");var expectedCssClass="ui-customfield__value_unchecked";ok($iconEl.hasClass(expectedCssClass),"Expected css class is valid")}}),TestCase.addTest({name:"should allow to edit",test:function(){var $el=this.$el,entity=data.userStory.us1;TestCase.getService().registerSaveCommand({config:{$set:{customFields:[{name:"Yop",type:"Checkbox",value:!0}]},fields:["id","customFields"],id:entity.id},returnedData:{id:entity.id,customFields:[{name:"Yop",type:"Checkbox",value:!0}]}}),ok($el.hasClass("ui-customfield_editable_true"),"Editable highlighting is applied");var $iconEl=$el.find(".ui-customfield__value"),expectedCssClass="ui-customfield__value_checked";$iconEl.click(),ok($iconEl.hasClass(expectedCssClass),"Expected css is changed")}}),TestCase.run({customField:{type:"Checkbox",name:"Yop"}})};return{run:run}})