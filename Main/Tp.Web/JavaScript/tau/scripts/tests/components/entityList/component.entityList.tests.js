define(["Underscore","tau/core/tau","tau/components/component.entityList","tests/common/testData","tests/components/common/common.setup","tests/components/component.specs","tests/common/checker"],function(a,b,c,d,e,f,g){var h=function(){function q(a,b){var c=a.find("td");ok(c.eq(0).find("em").hasClass("ui-type-icon-"+b.__type),"Type is valid"),equal(c.eq(1).text().trim(),b.id.toString(),"ID text is valid"),equal(c.eq(2).text().trim(),b.name,"Name text is valid"),equal(c.eq(3).text().trim(),b.entityState.name,"State text is valid"),equal(c.eq(4).text().trim(),b.effort+"Â h","Effort text is valid"),g.checkAssignments(c.eq(5),b.assignments)}function l(a,b,c){var d={id:b,nested:!0,fields:["id"]},e={};e[c]=["id","name","effort",Similar.to({entityState:["id","name","isinitial","isfinal"]}),Similar.to({roleEfforts:["id",Like.is({role:["id","name"]})]}),Similar.to({assignments:["id",Like.is({role:["id"]}),Similar.to({generalUser:["id","firstName","lastName"]})]})],d.fields.push(Similar.to(e));var f=Similar.to({name:"get",type:a,config:Similar.to(d)});return f}var b=d.registerTestDataForEntityListModel().userStory,h=b[0],i=b.id,j={id:1,name:"Dev."},k={context:{type:"story",id:15}},m=[{id:31,name:"Task Name1",__type:"task",entityState:{id:1,name:"Open"},effort:1,assignments:{groups:[{role:j,users:[{id:1,name:"Vasili I.",assignmentId:309},{id:2,name:"Ivan V.",assignmentId:310}]}]}},{id:41,name:"Bug Name1",__type:"bug",entityState:{id:1,name:"Open"},effort:5,assignments:{groups:[{role:{id:1,name:"Dev."},users:[{id:3,name:"Alex P.",assignmentId:311},{id:4,name:"Petr I.",assignmentId:312}]}]}},{id:32,name:"Task Name2",__type:"task",entityState:{id:2,name:"In Progress"},effort:22,assignments:{groups:[{role:{id:1,name:"Dev."},users:[{id:1,name:"Vasili I.",assignmentId:309},{id:2,name:"Ivan V.",assignmentId:310}]}]}},{id:43,name:"Bug Name3",__type:"bug",entityState:{id:2,name:"In Progress"},effort:5,assignments:{groups:[{role:{id:1,name:"Dev."},users:[{id:3,name:"Alex P.",assignmentId:311},{id:4,name:"Petr I.",assignmentId:312}]}]}},{id:33,name:"Task Name3",__type:"task",entityState:{id:3,name:"Done"},effort:8,assignments:{groups:[{role:{id:1,name:"Dev."},users:[{id:1,name:"Vasili I.",assignmentId:309},{id:2,name:"Ivan V.",assignmentId:310}]}]}},{id:42,name:"Bug Name2",__type:"bug",entityState:{id:3,name:"Done"},effort:5,assignments:{groups:[{role:{id:1,name:"Dev."},users:[{id:3,name:"Alex P.",assignmentId:311},{id:4,name:"Petr I.",assignmentId:312}]}]}}],n={items:m},o=[],p=l("userStory",15,"tasks");o.push(p),p=l("userStory",15,"bugs"),o.push(p);var r=[{name:"should render valid markup view",test:function(){var a=this.data,b=this.$el.find("table tr"),c=1+a.items.length;equals(b.length,c,"Count of entities is valid");var d=b.eq(0),e=b.eq(1);equals(d.find("th").length,e.find("td").length,"Count of cells in header and first row are equal");for(var f=1,g=b.length;f<g;f++){var h=b.eq(f),i=a.items[f-1];q(h,i)}}}],s=e.create("[component.entityList]",b,c);f.create(s,k).viewShouldFollowDataComponentLifeCycle().modelShouldReturnData(n,[o]).viewShouldPassTests(r).done(),r=[{name:"should filter items in dependence of practice",test:function(){var b=this.data,c=this.$el.find("table tbody tr"),d=a.select(b.items,function(a){return a.__type=="task"}),e=d.length;equals(c.length,e,"Count of entities is valid");for(var f=0,g=c.length;f<g;f++){var h=c.eq(f),i=d[f];q(h,i)}}}],s=e.create("[component.entityList]",b,c,{},{processes:[{practices:[{name:"Planning"}]}]}),f.create(s,k).viewShouldPassTests(r).done()};return{run:h}})