define(["tau/components/component.tabs","tau/utils/utils.routing","tests/components/common/common.setup","tests/components/component.specs","tests/components/component1","tests/components/component2"],function(component,Routing,componentSetup,componentSpecs){var innerRun=function(){var getCommonConfig=function(){return{context:{type:"bug",id:1},settings:{type:"tabs",tabs:[{label:"c1",header:[{path:"tests/components/component1"}],items:[{path:"tests/components/component2"}]},{label:"c2",selected:!0,header:[{path:"tests/components/component2"}],items:[{path:"tests/components/component1"}]}]}}},viewTests=[{name:"should has child controls",test:function(){var $el=this.$el,$tabHeaderItems=$el.find(".tab-item");equals($tabHeaderItems.length,2,"Amount of tab items"),ok(!$tabHeaderItems.eq(0).hasClass("selected"),"Tab 1 is not selected"),ok($tabHeaderItems.eq(1).hasClass("selected"),"Tab 2 is selected");var $tabPanelItems=$el.children();ok($tabPanelItems.eq(1).css("display")==="none","Tab 1 panel should be hidden"),equals($tabPanelItems.eq(1).find(".component2").length,0,"TabPanel 1 panel should not load inner components (lazy loading)"),ok($tabPanelItems.eq(2).css("display")!=="none","Tab 2 panel should be visible"),equals($tabPanelItems.eq(2).find(".component1").length,1,"TabPanel 2 panel should load Component 1 inside")}},{name:"should switch panels on header click",test:function(){var $el=this.$el,$tabHeaderItems=$el.find(".tab-item"),$firstTab=$tabHeaderItems.eq(0),$secondTab=$tabHeaderItems.eq(1),$tabPanelItems=this.$el.children(),$firstTabPanel=$tabPanelItems.eq(1),$secondTabPanel=$tabPanelItems.eq(2);equals($tabHeaderItems.length,2,"Amount of tab items"),ok(!$firstTab.hasClass("selected"),"Tab 1 is not selected before click"),ok($secondTab.hasClass("selected"),"Tab 2 is selected before click"),ok($firstTabPanel.css("display")==="none","Tab 1 panel should be hidden"),equals($firstTabPanel.find(".component2").length,0,"TabPanel 1 panel has no content"),equals($firstTabPanel.children().length,0,"No children content is loaded"),ok($secondTabPanel.css("display")!=="none","Tab 2 panel should be visible"),equals($secondTabPanel.find(".component1").length,1,"TabPanel 2 panel should load Component 1 inside"),$firstTab.click(),$tabPanelItems=this.$el.children(),$firstTabPanel=$tabPanelItems.eq(1),$secondTabPanel=$tabPanelItems.eq(2),ok($firstTab.hasClass("selected"),"Tab 1 is selected now"),ok(!$secondTab.hasClass("selected"),"Tab 2 is not selected"),ok($firstTabPanel.css("display")!=="none","Tab 1 panel should be visible now"),equals($firstTabPanel.children(".component2").length,1,"TabPanel 1 panel should load content"),ok($secondTabPanel.css("display")==="none","Tab 2 panel should be hidden now"),equals($secondTabPanel.find(".component1").length,1,"Component 1 should remains inside TabPanel 2 panel"),$secondTab.click(),ok(!$firstTab.hasClass("selected"),"Tab 1 is not selected"),ok($secondTab.hasClass("selected"),"Tab 2 is selected again"),ok($firstTabPanel.css("display")==="none","Tab 1 panel should be hidden now"),equals($firstTabPanel.find(".component2").length,1,"TabPanel 1 panel content is remains"),ok($secondTabPanel.css("display")!=="none","Tab 2 panel should be visible again"),equals($secondTabPanel.find(".component1").length,1,"Component 1 should remains inside TabPanel 2 panel")}}],setup=componentSetup.create("[component.tabs]",{},component);componentSpecs.create(setup,getCommonConfig()).viewShouldFollowBasicComponentLifeCycle().viewShouldPassTests(viewTests).done()};return{run:innerRun}})