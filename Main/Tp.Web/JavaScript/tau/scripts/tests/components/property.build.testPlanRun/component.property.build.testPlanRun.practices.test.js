define(["jQuery","tests/common/testkit","tau/configurator","tau/components/component.property.build.testPlanRun","tau/components/component.finder"],function(a,b,c,d){var e=function(){var c=new b("[component.property.build.testPlanRun.practices]",d),e={p1:"Preved",p2:"Medved"},f={r1:"Release",r2:"Release2",r3:"Release3"},g={i1:"Iter1",i2:"Iter2"},h={b1:{name:"Build1",project:"p1",release:"r1"},b2:{name:"Build2",project:"p1",release:"r2",iteration:"i1"}},i={tpr1:{name:"TPR1",project:"p1",release:"r2",build:"b2"},tpr2:{name:"TPR2",project:"p1"},tpr3:{name:"TPR3",project:"p1",release:"r2",iteration:"i1"}},j=c.loadFixtures({projects:e,iterations:g,releases:f,testPlanRuns:i,builds:h});return c.setData(j),c.setEntity(j.testPlanRun.tpr1),c.selectProject(j.project.p1,["iterations"]),c.addTest({name:"should change property, correct find3 -- when iteration practice disable",context:{type:"testPlanRun",id:j.testPlanRun.tpr3.id},test:function(){var b=j.testPlanRun.tpr3;c.getService().registerFindCommand({config:{$skip:0,$limit:20,fields:["id","name",{project:["id","abbreviation"]}],$query:{"Project.Id":j.project.p1.id,"Release.Id":j.release.r2.id}},returnedData:[j.build.b1,j.build.b2]});var d=this.$el,e=d.find(".tau-property__value");e.click();var f=a(".tau-bubble");equal(f.size(),1,"Count of bubbles");var g=f.find(".tau-result-list-row");equals(g.length,2,"Options");var h=f.find(":text.filter-field");c.getService().registerFindCommand({config:{$skip:0,$limit:20,fields:["id","name",{project:["id","abbreviation"]}],$query:{name:{$contains:"preved"},"Project.Id":j.project.p1.id,"Release.Id":j.release.r2.id}},returnedData:[]}),h.val("preved"),h.trigger(jQuery.Event("keyup",{keyCode:jQuery.ui.keyCode.ENTER})),c.getService().verify()}}),c.run()};return{run:e}})