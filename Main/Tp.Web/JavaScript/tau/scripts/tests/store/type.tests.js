define(["Underscore","tau/store/types.targetprocess"],function(_,types){var innerRun=function(){module("[targetprocess types]",{setup:function(){},teardown:function(){}}),test("process info refs",function(){var processInfo=types.findByKeyword("processInfo");ok(processInfo,"types is loaded"),ok(_.isEmpty(processInfo.refs))}),test("context modifications",function(){var context=types.findByKeyword("context");ok(!context.refs.hasOwnProperty("culture"))}),test("custom fields in us",function(){var story=types.findByKeyword("story");ok(!story.hasOwnProperty("customFields"))}),test("required fields in general",function(){var general=types.findByKeyword("general");ok(general.discriminator.entityType,"entity type is required in general"),ok(general.isParentType)}),test("required fields in assignable",function(){var assignable=types.findByKeyword("assignable");ok(assignable.isParentType),ok(assignable.discriminator.entityType,"entity type is required in assignable")}),test("type detection",function(){var assignable=types.findByKeyword("assignable");ok(assignable.detectType({entityType:{id:1,name:"UserStory"}})==="UserStory")})};return{run:innerRun}})