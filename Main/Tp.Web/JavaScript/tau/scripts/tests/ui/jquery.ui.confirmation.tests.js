define(["Underscore","jQuery"],function(_,$){var innerRun=function(){module("[jquery.ui.confirmation] widget tests",{setup:function(){this.$element=$("<div/>")},teardown:function(){delete this.$element}}),test("should has correct initialization",function(){this.$element.confirmation(),ok(this.$element.hasClass("confirmationHost"),"Confirmation container has correct class."),equal(this.$element.confirmation("option","message"),"Question?","Has correct default message."),equal(this.$element.confirmation("option","okLabel"),"OK",'Has correct default "OK" label.'),equal(this.$element.confirmation("option","cancelLabel"),"Cancel",'Has correct default "Cancel" label.'),this.$element.confirmation("destroy")}),test('should insert and delete widget on "show" and "hide"',function(){this.$element.confirmation(),this.$element.confirmation("show"),equal(this.$element.find(".confirmation").size(),1,"Widget element inserted correctly."),this.$element.confirmation("hide"),equal(this.$element.find(".confirmation").size(),0,"Widget element deleted correctly."),this.$element.confirmation("destroy")}),test("should correctly destroy",function(){this.$element.confirmation(),this.$element.confirmation("destroy"),equal(this.$element.find(".confirmation").size(),0,"Widget element deleted."),ok(!this.$element.hasClass("confirmationHost"),"Confirmation container class deleted.")}),test("should have valid markup",function(){this.$element.confirmation(),this.$element.confirmation("show");var $confirmation=this.$element.find(".confirmation"),$message=$confirmation.find(".inner p");equal($message.size(),1,"Message element found."),equal($message.text(),"Question?","Message element has valid text.");var $okButton=$confirmation.find(".inner button.ok");equal($okButton.size(),1,'"OK" button found.'),equal($okButton.text(),"OK",'"OK" button has valid text.');var $cancelButton=$confirmation.find(".inner button.cancel");equal($cancelButton.size(),1,'"Cancel" button found.'),equal($cancelButton.text(),"Cancel",'"Cancel" button has valid text.'),equal($confirmation.find("*").size(),4,"Total elements count is valid."),this.$element.confirmation("destroy")}),test("should override default options",function(){this.$element.confirmation({message:"Foo",okLabel:"A",cancelLabel:"B"}),equal(this.$element.confirmation("option","message"),"Foo","Message option override."),equal(this.$element.confirmation("option","okLabel"),"A",'"OK" label option override.'),equal(this.$element.confirmation("option","cancelLabel"),"B","Message option override."),this.$element.confirmation("destroy")}),test("should support callbacks through options",function(){var log={show:!1,hide:!1,ok:!1,cancel:!1};this.$element.confirmation({show:function(){log.show=!0},hide:function(){log.hide=!0},ok:function(){log.ok=!0},cancel:function(){log.cancel=!0}}),this.$element.confirmation("show"),this.$element.find(".confirmation .ok").click(),this.$element.find(".confirmation .cancel").click(),this.$element.confirmation("hide"),ok(log.show,'"show" callback was called.'),ok(log.ok,'"ok" callback was called.'),ok(log.cancel,'"cancel" callback was called.'),ok(log.hide,'"hide" callback was called.'),this.$element.confirmation("destroy")}),test("should support callbacks through event binding",function(){var log={show:!1,hide:!1,ok:!1,cancel:!1};this.$element.confirmation(),this.$element.bind({confirmationshow:function(){log.show=!0},confirmationhide:function(){log.hide=!0},confirmationok:function(){log.ok=!0},confirmationcancel:function(){log.cancel=!0}}),this.$element.confirmation("show"),this.$element.find(".confirmation .ok").click(),this.$element.find(".confirmation .cancel").click(),this.$element.confirmation("hide"),ok(log.show,'"show" callback was called.'),ok(log.ok,'"ok" callback was called.'),ok(log.cancel,'"cancel" callback was called.'),ok(log.hide,'"hide" callback was called.'),this.$element.confirmation("destroy")})};return{run:innerRun}})