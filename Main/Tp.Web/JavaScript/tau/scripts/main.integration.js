(function(){window.jsErrors=[],require(["jQuery","Underscore","tau/core/tau","tests/integration/specs"],function($,_,tau,specs){var getId=function(name){return name.replace(/ /g,"_")};specs.on("progress",function(evt){var data=evt.data;$(".progress-bar>span").width(data.percent+"%"),data.failed>0&&$(".progress-bar").removeClass("green").addClass("orange")}),specs.on("executing",function(evt){var scenario=evt.data;$("#"+getId(scenario.name)).removeClass("notRun").addClass("executing")});var failedScenarios=[];specs.on("completed",function(evt){window.allTestsCompleted=!0,_.each(failedScenarios,function(scenario){window.jsErrors.push("Scenario ["+scenario.name+"] failed")})}),specs.on("success",function(evt){var scenario=evt.data;$("#"+getId(scenario.name)).removeClass("executing").removeClass("notRun").addClass("passed")}),specs.on("failure",function(evt){var scenario=evt.data;$("#"+getId(scenario.name)).removeClass("executing").removeClass("notRun").addClass("failed"),failedScenarios.push(scenario)}),_.each(_(specs.scenarios).keys(),function(name){$('<div class="test notRun" id="'+getId(name)+'"></div>').text(name).appendTo(".tests-panel").click(function(){var location=document.location.href.split("?")[0]+"?filter="+encodeURI(name);document.location.href=location})});var config={filter:decodeURI(tau.getValueFromQueryString("filter"))};specs.executeStepByStep(config)})})()